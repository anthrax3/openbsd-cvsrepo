head	1.2;
access;
symbols
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.04.09.21.43.39;	author jsg;	state dead;
branches;
next	1.1;

1.1
date	2011.01.13.00.15.50;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 2.9
ok sthen@@ tested by matthew@@ jeremy@@
@
text
@$OpenBSD: patch-Makefile_rules,v 1.1 2011/01/13 00:15:50 jeremy Exp $
--- Makefile.rules.orig	Thu Jan  6 15:35:39 2011
+++ Makefile.rules	Thu Jan  6 15:37:39 2011
@@@@ -959,9 +959,10 @@@@ ifeq ($(HAVE_LINK_VERSION_SCRIPT),1)
 NativeExportsFile := $(ObjDir)/$(notdir $(EXPORTED_SYMBOL_FILE)).map
 $(NativeExportsFile): $(EXPORTED_SYMBOL_FILE) $(ObjDir)/.dir
 	$(Verb) echo "{" > $@@
-	$(Verb) grep -q "\<" $< && echo "  global:" >> $@@ || :
+	$(Verb) echo "  global:" >> $@@
 	$(Verb) sed -e 's/$$/;/' -e 's/^/    /' < $< >> $@@
-	$(Verb) echo "  local: *;" >> $@@
+	$(Verb) echo "  local:" >> $@@
+	$(Verb) echo "    *;" >> $@@
 	$(Verb) echo "};" >> $@@
 clean-local::
 	-$(Verb) $(RM) -f $(NativeExportsFile)
@


1.1
log
@Bump llvm version to 2.8.

OK @@sthen
@
text
@d1 1
a1 1
$OpenBSD$
@

