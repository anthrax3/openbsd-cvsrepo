head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2016.03.05.15.31.41;	author pascal;	state dead;
branches;
next	1.2;
commitid	Hqi865xYWk2i2UMI;

1.2
date	2015.01.06.00.58.02;	author brad;	state Exp;
branches;
next	1.1;
commitid	wmhUFBKA8qKDvKmr;

1.1
date	2014.10.28.17.52.05;	author brad;	state Exp;
branches;
next	;
commitid	evS2EXXakgWF8MMD;


desc
@@


1.3
log
@Update to LLVM 3.7.1.  This version is modified to use C++ includes from
ports GCC and link to libestdc++.

Currently, this still breaks mail/mozilla-thunderbird, which will be taken care
of shortly.

feedback/testing from jsg landry mmcc semarie aja naddy (hope I didn't forget
anyone)

ok landry robert
@
text
@$OpenBSD: patch-lib_Target_X86_MCTargetDesc_X86MCAsmInfo_cpp,v 1.2 2015/01/06 00:58:02 brad Exp $

r225227
Remove X86 .quad workaround for buggy GNU assembler on OpenBSD / Bitrig.

--- lib/Target/X86/MCTargetDesc/X86MCAsmInfo.cpp.orig	Fri Oct 17 03:18:59 2014
+++ lib/Target/X86/MCTargetDesc/X86MCAsmInfo.cpp	Fri Oct 17 03:38:34 2014
@@@@ -111,12 +111,6 @@@@ X86ELFMCAsmInfo::X86ELFMCAsmInfo(const Triple &T) {
   // Exceptions handling
   ExceptionsType = ExceptionHandling::DwarfCFI;
 
-  // OpenBSD and Bitrig have buggy support for .quad in 32-bit mode, just split
-  // into two .words.
-  if ((T.getOS() == Triple::OpenBSD || T.getOS() == Triple::Bitrig) &&
-       T.getArch() == Triple::x86)
-    Data64bitsDirective = 0;
-
   // Always enable the integrated assembler by default.
   // Clang also enabled it when the OS is Solaris but that is redundant here.
   UseIntegratedAssembler = true;
@


1.2
log
@Commited upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_Target_X86_MCTargetDesc_X86MCAsmInfo_cpp,v 1.1 2014/10/28 17:52:05 brad Exp $
@


1.1
log
@Remove the .quad assembler workaround for i386 now that the external
assembler has been fixed. The integrated assembler already handled
this properly but the workaround didn't take that into consideration.

ok daniel@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 1
Revert workaround for buggy GNU assembler with OpenBSD.
@

