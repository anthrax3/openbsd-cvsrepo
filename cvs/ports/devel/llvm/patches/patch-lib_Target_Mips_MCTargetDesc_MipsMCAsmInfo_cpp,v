head	1.4;
access;
symbols
	OPENBSD_6_1:1.3.0.2
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2017.09.01.06.40.28;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	Z3UHKMH3qAZXhBfH;

1.3
date	2017.02.10.09.37.43;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	fevyFq3hanzfmR8U;

1.2
date	2016.10.07.08.55.30;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	9CZYQ6vy0MJoEWYH;

1.1
date	2016.05.15.07.07.52;	author ajacoutot;	state Exp;
branches;
next	;
commitid	LWasRKnDGo7JO66q;


desc
@@


1.4
log
@Update to llvm-5.0.0rc4.

Tested on amd64, i386, sparc64
from Brad (maintainer)
@
text
@$OpenBSD: patch-lib_Target_Mips_MCTargetDesc_MipsMCAsmInfo_cpp,v 1.3 2017/02/10 09:37:43 ajacoutot Exp $

Use the integrated assembler by default on Mips64.

Index: lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp
--- lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp.orig
+++ lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp
@@@@ -61,4 +61,8 @@@@ MipsMCAsmInfo::MipsMCAsmInfo(const Triple &TheTriple) 
   // Enable IAS by default for Debian mips64/mips64el.
   if (TheTriple.getEnvironment() == Triple::GNUABI64)
     UseIntegratedAssembler = true;
+
+  // Enable IAS by default for OpenBSD mips64/mips64el.
+  if (TheTriple.getOS() == Triple::OpenBSD)
+    UseIntegratedAssembler = true;
 }
@


1.3
log
@Update to llvm-4.0.0rc2.
- survived a bulk on i386 and amd64

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_Target_Mips_MCTargetDesc_MipsMCAsmInfo_cpp,v 1.2 2016/10/07 08:55:30 ajacoutot Exp $
d5 4
a8 3
--- lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp.orig	Mon Oct 10 19:41:29 2016
+++ lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp	Sun Jan  1 17:55:32 2017
@@@@ -63,4 +63,8 @@@@ MipsMCAsmInfo::MipsMCAsmInfo(const Triple &TheTriple) 
@


1.2
log
@Update to LLVM 3.9.0.
Been through bulks on amd64 / i386 by sthen@@ and naddy@@ respectively.

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_Target_Mips_MCTargetDesc_MipsMCAsmInfo_cpp,v 1.1 2016/05/15 07:07:52 ajacoutot Exp $
d5 10
a14 11
--- lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp.orig	Sun Jul 24 07:39:45 2016
+++ lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp	Mon Sep  5 20:01:14 2016
@@@@ -50,8 +50,5 @@@@ MipsMCAsmInfo::MipsMCAsmInfo(const Triple &TheTriple) 
   ExceptionsType = ExceptionHandling::DwarfCFI;
   DwarfRegNumForCFI = true;
 
-  // Enable IAS by default for O32.
-  if (TheTriple.getArch() == Triple::mips ||
-      TheTriple.getArch() == Triple::mipsel)
-    UseIntegratedAssembler = true;
+  UseIntegratedAssembler = true;
@


1.1
log
@Enable the integrated assembler on Mips64 and Sparc.

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 4
--- lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp.orig	Sat May 14 20:30:16 2016
+++ lib/Target/Mips/MCTargetDesc/MipsMCAsmInfo.cpp	Sat May 14 20:30:35 2016
@@@@ -42,4 +42,6 @@@@ MipsMCAsmInfo::MipsMCAsmInfo(const Triple &TheTriple) 
   SupportsDebugInformation = true;
d10 5
a14 1
+
@

