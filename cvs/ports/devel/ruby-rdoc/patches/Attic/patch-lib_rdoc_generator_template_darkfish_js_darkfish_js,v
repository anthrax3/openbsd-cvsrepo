head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.8
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.6
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.09.27.16.42.22;	author jeremy;	state dead;
branches;
next	1.1;
commitid	cmWepuud3HZ3IdWP;

1.1
date	2013.02.13.18.19.37;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove rdoc.  rdoc has shipped with ruby since 1.8, and a newer version
ships in ruby 1.9+.

OK sthen@@
@
text
@$OpenBSD: patch-lib_rdoc_generator_template_darkfish_js_darkfish_js,v 1.1 2013/02/13 18:19:37 jasper Exp $

Fix CVE-2013-0256, an XSS exploit in RDoc
From upstream git:
https://github.com/rdoc/rdoc/commit/ffa87887ee0517793df7541629a470e331f9fe60

--- lib/rdoc/generator/template/darkfish/js/darkfish.js.orig	Wed Feb 13 16:20:53 2013
+++ lib/rdoc/generator/template/darkfish/js/darkfish.js	Wed Feb 13 16:21:41 2013
@@@@ -109,13 +109,15 @@@@ function hookSearch() {
 function highlightTarget( anchor ) {
   console.debug( "Highlighting target '%s'.", anchor );
 
-  $("a[name=" + anchor + "]").each( function() {
-    if ( !$(this).parent().parent().hasClass('target-section') ) {
-      console.debug( "Wrapping the target-section" );
-      $('div.method-detail').unwrap( 'div.target-section' );
-      $(this).parent().wrap( '<div class="target-section"></div>' );
-    } else {
-      console.debug( "Already wrapped." );
+  $("a[name]").each( function() {
+    if ( $(this).attr("name") == anchor ) {
+      if ( !$(this).parent().parent().hasClass('target-section') ) {
+        console.debug( "Wrapping the target-section" );
+        $('div.method-detail').unwrap( 'div.target-section' );
+        $(this).parent().wrap( '<div class="target-section"></div>' );
+      } else {
+        console.debug( "Already wrapped." );
+      }
     }
   });
 };
@


1.1
log
@Security fix for CVE-2013-0256, an XSS exploit in RDoc

ok jeremy@@ sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@

