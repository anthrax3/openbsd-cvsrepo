head	1.3;
access;
symbols
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.20
	OPENBSD_5_0:1.2.0.18
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.16
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.14
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2012.04.28.09.48.20;	author stsp;	state dead;
branches;
next	1.2;

1.2
date	2007.04.01.20.03.07;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2007.03.24.13.46.47;	author todd;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to APR-1.4.6. Enable threads by default and remove the 'mt' flavour.
Grab maintainership.
ok sthen
@
text
@$OpenBSD: patch-Makefile_in,v 1.2 2007/04/01 20:03:07 kurt Exp $
--- Makefile.in.orig	Fri Feb  4 06:55:44 2005
+++ Makefile.in	Wed Mar 28 09:57:24 2007
@@@@ -3,6 +3,7 @@@@ srcdir=@@srcdir@@
 VPATH=@@srcdir@@
 top_srcdir=@@apr_srcdir@@
 top_blddir=@@apr_builddir@@
+MT?=
 
 #
 # APR (Apache Portable Runtime) library Makefile.
@@@@ -26,9 +27,10 @@@@ INCLUDES=-I$(INCDIR) -I$(OSDIR) -I$(DEFOSDIR) -I$(top_
 CLEAN_SUBDIRS= test
 INSTALL_SUBDIRS=@@INSTALL_SUBDIRS@@
 
-TARGET_LIB = lib@@APR_LIBNAME@@.la
-APR_PCFILE = apr-$(APR_MAJOR_VERSION).pc
+TARGET_LIB = lib@@APR_LIBNAME@@${MT}.la
+APR_PCFILE = apr-$(APR_MAJOR_VERSION)${MT}.pc
 APR_CONFIG = apr-$(APR_MAJOR_VERSION)-config
+APR_INSTCONFIG = apr-$(APR_MAJOR_VERSION)${MT}-config
 INSTALL = @@INSTALL@@
 INSTALL_DATA = @@INSTALL_DATA@@
 
@@@@ -75,7 +77,7 @@@@ install: $(TARGET_LIB) apr-config.out build/apr_rules.
 	done
 	$(LIBTOOL) --mode=install $(INSTALL) -m 755 $(TARGET_LIB) $(DESTDIR)$(libdir)
 	$(INSTALL_DATA) apr.exp $(DESTDIR)$(libdir)/apr.exp
-	$(INSTALL_DATA) apr.pc $(DESTDIR)$(libdir)/pkgconfig/$(APR_PCFILE)
+	$(INSTALL_DATA) apr${MT}.pc $(DESTDIR)$(libdir)/pkgconfig/$(APR_PCFILE)
 	for f in libtool shlibtool; do \
 	    if test -f $${f}; then $(INSTALL) -m 755 $${f} $(DESTDIR)$(installbuilddir); fi; \
 	done
@@@@ -84,7 +86,7 @@@@ install: $(TARGET_LIB) apr-config.out build/apr_rules.
 	    $(INSTALL_DATA) $(top_srcdir)/build/$${f} $(DESTDIR)$(installbuilddir); \
 	done
 	$(INSTALL_DATA) build/apr_rules.out $(DESTDIR)$(installbuilddir)/apr_rules.mk
-	$(INSTALL) -m 755 apr-config.out $(DESTDIR)$(bindir)/$(APR_CONFIG)
+	$(INSTALL) -m 755 apr-config.out $(DESTDIR)$(bindir)/$(APR_INSTCONFIG)
 	@@if [ $(INSTALL_SUBDIRS) != "none" ]; then \
             for i in $(INSTALL_SUBDIRS); do \
 	        ( cd $$i ; $(MAKE) DESTDIR=$(DESTDIR) install ); \
@


1.2
log
@per POSIX accept(2) can return EINTR so have apr_socket_accept() retry
when this happens. http://issues.apache.org/bugzilla/show_bug.cgi?id=41975
fixes issues noticed while testing tomcat-native. regen patches and distinfo
while here.  "looks ok" steven@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.1 2007/03/24 13:46:47 todd Exp $
@


1.1
log
@add mt flavor that can co-exist with the default non-mt flavor
ok kurt@@
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.in.orig	Fri Feb  4 05:55:44 2005
+++ Makefile.in	Thu Feb  8 14:25:50 2007
d12 1
a12 1
@@@@ -26,9 +27,10 @@@@ INCLUDES=-I$(INCDIR) -I$(OSDIR) -I$(DEFO
d25 1
a25 1
@@@@ -75,7 +77,7 @@@@ install: $(TARGET_LIB) apr-config.out bu
d34 1
a34 1
@@@@ -84,7 +86,7 @@@@ install: $(TARGET_LIB) apr-config.out bu
@

