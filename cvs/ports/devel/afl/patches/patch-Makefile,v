head	1.23;
access;
symbols
	OPENBSD_6_0:1.22.0.2
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.12.0.4
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	jsg_20141123:1.1.1.1
	jsg:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2016.08.08.09.06.46;	author jsg;	state Exp;
branches;
next	1.22;
commitid	AoOOkMTpa2UGl8xm;

1.22
date	2016.07.05.18.44.34;	author gsoares;	state Exp;
branches;
next	1.21;
commitid	Ar0zuZvdy8JLGD3x;

1.21
date	2016.06.11.12.27.56;	author gsoares;	state Exp;
branches;
next	1.20;
commitid	atsHOiGu8euhXCa1;

1.20
date	2016.05.21.04.05.07;	author gsoares;	state Exp;
branches;
next	1.19;
commitid	Drkw1x3GZjfAsyis;

1.19
date	2016.04.28.11.23.21;	author gsoares;	state Exp;
branches;
next	1.18;
commitid	2M51AdnCpketp5UG;

1.18
date	2016.03.24.01.47.28;	author gsoares;	state Exp;
branches;
next	1.17;
commitid	mOFTvTR0rHNlQ9If;

1.17
date	2016.02.25.02.25.10;	author jsg;	state Exp;
branches;
next	1.16;
commitid	LgBpyD2gAAfz9DcE;

1.16
date	2015.12.18.03.11.23;	author gsoares;	state Exp;
branches;
next	1.15;
commitid	zjAzyfnVj7meImEJ;

1.15
date	2015.11.25.02.27.12;	author gsoares;	state Exp;
branches;
next	1.14;
commitid	Kme2XhQ6zZ0XkvLM;

1.14
date	2015.09.23.13.30.42;	author gsoares;	state Exp;
branches;
next	1.13;
commitid	55B8i7NSWyFDuuf5;

1.13
date	2015.08.31.12.27.07;	author gsoares;	state Exp;
branches;
next	1.12;
commitid	TKef5PEdnpiJlqA9;

1.12
date	2015.06.17.22.21.23;	author gsoares;	state Exp;
branches;
next	1.11;
commitid	RRGDtcrEvtleWTA9;

1.11
date	2015.06.10.02.31.04;	author gsoares;	state Exp;
branches;
next	1.10;
commitid	DvSNdo6SFFOpibJ0;

1.10
date	2015.05.21.02.44.11;	author gsoares;	state Exp;
branches;
next	1.9;
commitid	pGd8ooolOohaoItL;

1.9
date	2015.05.18.11.32.27;	author gsoares;	state Exp;
branches;
next	1.8;
commitid	HsIE5BLK4GgzI1Pv;

1.8
date	2015.05.06.01.01.32;	author gsoares;	state Exp;
branches;
next	1.7;
commitid	ZVQY9cQW6SGSghh0;

1.7
date	2015.04.27.13.17.34;	author gsoares;	state Exp;
branches;
next	1.6;
commitid	DbKCQTilccknT1DE;

1.6
date	2015.04.01.14.57.07;	author gsoares;	state Exp;
branches;
next	1.5;
commitid	X3gHvyMgs2ofJ5rm;

1.5
date	2015.03.16.01.59.27;	author jsg;	state Exp;
branches;
next	1.4;
commitid	16jF4h9MZJvO8h5l;

1.4
date	2014.12.15.14.13.59;	author jsg;	state Exp;
branches;
next	1.3;
commitid	8jSZLLgdEXupqCRJ;

1.3
date	2014.12.01.10.57.44;	author jsg;	state Exp;
branches;
next	1.2;
commitid	Zbq6NJDUrAaLX5LK;

1.2
date	2014.11.27.08.15.41;	author jsg;	state Exp;
branches;
next	1.1;
commitid	j7gGrnIHlXldpAVb;

1.1
date	2014.11.23.03.12.42;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;
commitid	i4Xg3tQShlIEKLyp;

1.1.1.1
date	2014.11.23.03.12.42;	author jsg;	state Exp;
branches;
next	;
commitid	i4Xg3tQShlIEKLyp;


desc
@@


1.23
log
@update to afl 2.29b
@
text
@$OpenBSD: patch-Makefile,v 1.22 2016/07/05 18:44:34 gsoares Exp $
--- Makefile.orig	Sat Aug  6 09:12:53 2016
+++ Makefile	Sat Aug  6 14:07:48 2016
@@@@ -18,7 +18,7 @@@@ VERSION     = $(shell grep '^\#define VERSION ' config
 
 PREFIX     ?= /usr/local
 BIN_PATH    = $(PREFIX)/bin
-HELPER_PATH = $(PREFIX)/lib/afl
+HELPER_PATH = $(PREFIX)/libexec/afl
 DOC_PATH    = $(PREFIX)/share/doc/afl
 MISC_PATH   = $(PREFIX)/share/afl
 
@@@@ -44,7 +44,7 @@@@ endif
 
 COMM_HDR    = alloc-inl.h config.h debug.h types.h
 
-all: test_x86 $(PROGS) afl-as test_build all_done
+all: test_x86 $(PROGS) afl-as
 
 ifndef AFL_NO_X86
 
@


1.22
log
@update to 2.19b
OK jsg@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile,v 1.21 2016/06/11 12:27:56 gsoares Exp $
--- Makefile.orig	Thu Jun 23 23:35:35 2016
+++ Makefile	Mon Jul  4 12:00:47 2016
@


1.21
log
@update to 2.14b
OK jsg@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.20 2016/05/21 04:05:07 gsoares Exp $
--- Makefile.orig	Tue Jun  7 03:45:45 2016
+++ Makefile	Tue Jun  7 23:27:54 2016
@@@@ -18,7 +18,7 @@@@ VERSION     = 2.14b
@


1.20
log
@update to 2.13b
OK jsg@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.19 2016/04/28 11:23:21 gsoares Exp $
--- Makefile.orig	Sat May 14 14:43:15 2016
+++ Makefile	Fri May 20 00:13:10 2016
@@@@ -18,7 +18,7 @@@@ VERSION     = 2.13b
@


1.19
log
@update to 2.11b
OK jsg@@ (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.18 2016/03/24 01:47:28 gsoares Exp $
--- Makefile.orig	Wed Apr 27 15:55:27 2016
+++ Makefile	Wed Apr 27 18:23:09 2016
@@@@ -18,7 +18,7 @@@@ VERSION     = 2.11b
@


1.18
log
@update to 2.08b
OK jsg@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.17 2016/02/25 02:25:10 jsg Exp $
--- Makefile.orig	Sat Mar 12 19:35:05 2016
+++ Makefile	Wed Mar 23 22:45:54 2016
@@@@ -18,7 +18,7 @@@@ VERSION     = 2.08b
@


1.17
log
@update to afl 2.04b
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.16 2015/12/18 03:11:23 gsoares Exp $
--- Makefile.orig	Mon Feb 22 13:22:50 2016
+++ Makefile	Thu Feb 25 09:20:31 2016
@@@@ -18,7 +18,7 @@@@ VERSION     = 2.04b
@


1.16
log
@update to 1.96b
OK jsg@@ mmcc@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.15 2015/11/25 02:27:12 gsoares Exp $
--- Makefile.orig	Wed Dec 16 01:24:06 2015
+++ Makefile	Wed Dec 16 16:55:42 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.96b
d13 1
a13 1
@@@@ -41,7 +41,7 @@@@ endif
d17 2
a18 2
-all: test_x86 $(PROGS) test_build all_done
+all: test_x86 $(PROGS)
d20 1
a20 1
 ifndef AFL_NOX86
@


1.15
log
@update to 1.95b

"I'm fine..." jsg@@ (MAINTAINER)
similar diff from mmcc@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.14 2015/09/23 13:30:42 gsoares Exp $
--- Makefile.orig	Thu Nov 12 23:58:12 2015
+++ Makefile	Tue Nov 24 09:56:32 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.95b
@


1.14
log
@update to 1.94b; OK jsg@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.13 2015/08/31 12:27:07 gsoares Exp $
--- Makefile.orig	Fri Sep 11 22:38:02 2015
+++ Makefile	Tue Sep 22 22:02:52 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.94b
@


1.13
log
@update to 1.88b; OK jsg@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.12 2015/06/17 22:21:23 gsoares Exp $
--- Makefile.orig	Thu Aug 27 22:24:07 2015
+++ Makefile	Thu Aug 27 23:22:00 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.88b
@


1.12
log
@update to 1.83b
OK jsg@@ (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.11 2015/06/10 02:31:04 gsoares Exp $
--- Makefile.orig	Sun Jun 14 11:34:26 2015
+++ Makefile	Tue Jun 16 00:48:00 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.83b
@


1.11
log
@update to 1.80b
sure jsg@@(MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.10 2015/05/21 02:44:11 gsoares Exp $
--- Makefile.orig	Tue May 26 02:20:29 2015
+++ Makefile	Tue Jun  9 17:00:28 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.80b
@


1.10
log
@update to 1.79b
OK jsg@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.9 2015/05/18 11:32:27 gsoares Exp $
--- Makefile.orig	Wed May 20 17:53:17 2015
+++ Makefile	Wed May 20 20:29:17 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.79b
@


1.9
log
@update to 1.78b
OK jsg@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.8 2015/05/06 01:01:32 gsoares Exp $
--- Makefile.orig	Sun May 17 17:42:05 2015
+++ Makefile	Sun May 17 22:22:23 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.78b
@


1.8
log
@update to 1.77b

OK jsg@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.7 2015/04/27 13:17:34 gsoares Exp $
--- Makefile.orig	Tue May  5 21:38:01 2015
+++ Makefile	Tue May  5 21:53:04 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.77b
@


1.7
log
@update afl to 1.73b
OK jsg@@ (MAINTAINER)

--------------
Version 1.73b:
--------------

  - Fixed a pretty stupid bug in effector maps that could sometimes cause
    AFL to fuzz slightly more than necessary; and in very rare circumstances,
    could lead to SEGV if eff_map is aligned with page boundary and followed
    by an unmapped page. Spotted by Jonathan Gray.

--------------
Version 1.72b:
--------------

  - Fixed a glitch in non-x86 install, spotted by Tobias Ospelt.

  - Added a minor safeguard to llvm_mode Makefile following a report from
    Kai Zhao.
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.6 2015/04/01 14:57:07 gsoares Exp $
--- Makefile.orig	Mon Apr 27 03:17:22 2015
+++ Makefile	Mon Apr 27 10:07:53 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.73b
@


1.6
log
@update to 1.58b

OK jsg@@ (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.5 2015/03/16 01:59:27 jsg Exp $
--- Makefile.orig	Fri Mar 27 03:47:58 2015
+++ Makefile	Wed Apr  1 10:36:53 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.58b
d20 2
a21 2
 test_x86:
 	@@echo "[*] Checking for the ability to compile x86 code..."
@


1.5
log
@update to afl 1.56b
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.4 2014/12/15 14:13:59 jsg Exp $
--- Makefile.orig	Thu Jan 29 16:31:24 2015
+++ Makefile	Thu Jan 29 19:30:51 2015
@@@@ -18,7 +18,7 @@@@ VERSION     = 1.34b
d13 1
a13 1
@@@@ -37,7 +37,7 @@@@ endif
@


1.4
log
@update to afl 0.90b
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.3 2014/12/01 10:57:44 jsg Exp $
--- Makefile.orig	Mon Dec 15 11:14:03 2014
+++ Makefile	Tue Dec 16 00:22:16 2014
@@@@ -18,7 +18,7 @@@@ VERSION     = 0.90b
@


1.3
log
@update to afl 0.80b
remove the patch raising the fd limit to 128 for the regress test
the default limit is 512.
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.2 2014/11/27 08:15:41 jsg Exp $
--- Makefile.orig	Mon Dec  1 15:00:00 2014
+++ Makefile	Mon Dec  1 20:19:20 2014
@@@@ -18,7 +18,7 @@@@ VERSION     = 0.80b
@


1.2
log
@update to afl 0.73b
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.1.1.1 2014/11/23 03:12:42 jsg Exp $
--- Makefile.orig	Wed Nov 26 08:34:13 2014
+++ Makefile	Wed Nov 26 15:37:24 2014
@@@@ -18,7 +18,7 @@@@ VERSION     = 0.69b
d13 1
a13 12
@@@@ -29,10 +29,6 @@@@ CFLAGS     += -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointe
 	      -DAFL_PATH=\"$(HELPER_PATH)\" -DDOC_PATH=\"$(DOC_PATH)\" \
 	      -DVERSION=\"$(VERSION)\"
 
-ifneq "$(shell echo $$HOSTNAME)" "raccoon"
-  CFLAGS   += -Wno-format
-endif
-
 ifeq "$(findstring clang, $(shell $(CC) --version 2>/dev/null))" ""
   TEST_CC   = afl-gcc
 else
@@@@ -41,7 +37,7 @@@@ endif
a21 11
@@@@ -66,8 +62,8 @@@@ afl-showmap: afl-showmap.c $(COMM_HDR) | test_x86
 test_build: afl-gcc afl-as afl-showmap
 	@@echo "[*] Testing the CC wrapper and instrumentation output..."
 	AFL_QUIET=1 AFL_INST_RATIO=100 AFL_PATH=. ./$(TEST_CC) $(CFLAGS) $(LDFLAGS) test-instr.c -o test-instr
-	echo 0 | AFL_SINK_OUTPUT=1 AFL_QUIET=1 ./afl-showmap ./test-instr 2>.test-instr0
-	echo 1 | AFL_SINK_OUTPUT=1 AFL_QUIET=1 ./afl-showmap ./test-instr 2>.test-instr1
+	ulimit -n 256 && echo 0 | AFL_SINK_OUTPUT=1 AFL_QUIET=1 ./afl-showmap ./test-instr 2>.test-instr0
+	ulimit -n 256 && echo 1 | AFL_SINK_OUTPUT=1 AFL_QUIET=1 ./afl-showmap ./test-instr 2>.test-instr1
 	@@rm -f test-instr
 	@@diff -qs .test-instr0 .test-instr1; DR="$$?"; rm -f .test-instr0 .test-instr1; if [ "$$DR" = "0" ]; then echo; echo "Oops, the instrumentation does not seem to be behaving correctly!"; echo; echo "Please ping <lcamtuf@@google.com> to troubleshoot the issue."; echo; exit 1; fi
 	@@echo "[+] All right, the instrumentation seems to be working!"
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.orig	Fri Nov 21 08:14:41 2014
+++ Makefile	Fri Nov 21 21:33:49 2014
@@@@ -18,20 +18,16 @@@@ VERSION     = 0.61b
d13 1
a13 4
 PROGS       = afl-gcc afl-as afl-fuzz afl-showmap
 
-CFLAGS     += -O3 -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign \
+CFLAGS     += -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign \
d24 1
a24 1
@@@@ -40,7 +36,7 @@@@ endif
d33 1
a33 1
@@@@ -64,8 +60,8 @@@@ afl-showmap: afl-showmap.c $(COMM_HDR) | test_x86
d36 1
a36 1
 	AFL_QUIET=1 AFL_INST_RATIO=100 AFL_PATH=. ./$(TEST_CC) $(CFLAGS) test-instr.c -o test-instr
@


1.1.1.1
log
@import american fuzzy lop 0.65b

American Fuzzy Lop is a brute-force fuzzer coupled with an exceedingly
simple but rock-solid instrumentation-guided genetic algorithm. It uses
an enhanced form of edge coverage to easily detect subtle, local-scale
changes to program control flow, without being bogged down by complex
comparisons between multiple long-winded execution paths.

ok sthen@@ feedback/ok daniel@@
@
text
@@
