head	1.48;
access;
symbols
	OPENBSD_5_8:1.47.0.6
	OPENBSD_5_8_BASE:1.47
	OPENBSD_5_7:1.47.0.2
	OPENBSD_5_7_BASE:1.47
	OPENBSD_5_6:1.46.0.2
	OPENBSD_5_6_BASE:1.46
	OPENBSD_5_5:1.45.0.4
	OPENBSD_5_5_BASE:1.45
	OPENBSD_5_4:1.45.0.2
	OPENBSD_5_4_BASE:1.45
	OPENBSD_5_3:1.43.0.2
	OPENBSD_5_3_BASE:1.43
	OPENBSD_5_2:1.36.0.4
	OPENBSD_5_2_BASE:1.36
	OPENBSD_5_1_BASE:1.36
	OPENBSD_5_1:1.36.0.2
	OPENBSD_5_0:1.32.0.2
	OPENBSD_5_0_BASE:1.32
	OPENBSD_4_9:1.27.0.2
	OPENBSD_4_9_BASE:1.27
	OPENBSD_4_8:1.21.0.2
	OPENBSD_4_8_BASE:1.21
	OPENBSD_4_7:1.11.0.6
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.4
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.10.0.6
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.4
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.2
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.6.0.8
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.6
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.4
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.2
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.5.0.2
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	avsm_2003-Jul-24:1.1.1.1
	avsm:1.1.1;
locks; strict;
comment	@# @;


1.48
date	2015.09.19.08.34.11;	author kili;	state dead;
branches;
next	1.47;
commitid	otGzRp4QOHTaUcf2;

1.47
date	2014.11.22.20.32.01;	author kili;	state Exp;
branches;
next	1.46;
commitid	lhK5gejr3EOKsKwl;

1.46
date	2014.06.19.18.58.01;	author kili;	state Exp;
branches;
next	1.45;
commitid	1m0c25NDEYVsshu2;

1.45
date	2013.07.18.21.44.12;	author kili;	state Exp;
branches;
next	1.44;

1.44
date	2013.03.11.10.50.06;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2013.01.20.17.59.15;	author kili;	state Exp;
branches;
next	1.42;

1.42
date	2012.10.28.23.26.01;	author kili;	state Exp;
branches;
next	1.41;

1.41
date	2012.10.11.13.31.29;	author dcoppa;	state Exp;
branches;
next	1.40;

1.40
date	2012.09.27.17.26.05;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2012.09.03.17.35.25;	author kili;	state Exp;
branches;
next	1.38;

1.38
date	2012.09.03.17.01.54;	author kili;	state Exp;
branches;
next	1.37;

1.37
date	2012.09.02.20.06.54;	author kili;	state Exp;
branches;
next	1.36;

1.36
date	2012.01.12.20.20.05;	author kili;	state Exp;
branches;
next	1.35;

1.35
date	2011.12.27.21.17.36;	author kili;	state Exp;
branches;
next	1.34;

1.34
date	2011.10.18.06.46.24;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2011.09.16.09.24.50;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2011.06.30.21.39.10;	author kili;	state Exp;
branches;
next	1.31;

1.31
date	2011.04.23.21.05.14;	author kili;	state Exp;
branches;
next	1.30;

1.30
date	2011.04.23.13.00.43;	author kili;	state Exp;
branches;
next	1.29;

1.29
date	2011.04.23.12.25.51;	author kili;	state Exp;
branches;
next	1.28;

1.28
date	2011.04.11.14.31.01;	author kili;	state Exp;
branches;
next	1.27;

1.27
date	2010.11.21.17.52.55;	author kili;	state Exp;
branches;
next	1.26;

1.26
date	2010.11.15.19.45.58;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.06.10.18.38;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.03.22.13.38;	author kili;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.28.13.52.55;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2010.08.26.22.05.05;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2010.08.02.21.16.15;	author kili;	state Exp;
branches;
next	1.20;

1.20
date	2010.07.17.13.54.30;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2010.06.30.15.41.01;	author kili;	state Exp;
branches;
next	1.18;

1.18
date	2010.06.18.21.34.23;	author kili;	state Exp;
branches;
next	1.17;

1.17
date	2010.06.18.21.05.06;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2010.06.18.20.42.03;	author kili;	state Exp;
branches;
next	1.15;

1.15
date	2010.06.15.17.38.17;	author kili;	state Exp;
branches;
next	1.14;

1.14
date	2010.05.06.20.05.24;	author kili;	state Exp;
branches;
next	1.13;

1.13
date	2010.04.22.21.49.12;	author kili;	state Exp;
branches;
next	1.12;

1.12
date	2010.04.15.13.56.34;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2008.09.19.21.39.43;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2007.08.01.21.59.55;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2007.07.21.17.20.20;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2007.05.04.09.56.02;	author bernd;	state Exp;
branches;
next	1.7;

1.7
date	2006.11.20.13.07.19;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2004.11.23.11.22.02;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2004.08.10.08.23.37;	author xsa;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.23.02.40.16;	author dons;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.16.08.46.37;	author avsm;	state Exp;
branches;
next	1.2;

1.2
date	2003.07.31.01.11.14;	author avsm;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.25.00.26.13;	author avsm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.07.25.00.26.13;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.48
log
@Remove haddock, which is now contained in the ghc package.
@
text
@# $OpenBSD: Makefile,v 1.47 2014/11/22 20:32:01 kili Exp $

COMMENT-main =	documentation-generation tool for Haskell libraries
COMMENT-lib =	haddock library

# Dependency of meta/haskell-platform.
# Please do *not* update without thinking.
DISTNAME =	haddock-2.14.3
PKGNAME-main =	${DISTNAME}
PKGNAME-lib =	hs-${DISTNAME}
CATEGORIES =	devel

HOMEPAGE =	http://www.haskell.org/haddock/

MULTI_PACKAGES =		-main -lib

# BSD3
PERMIT_PACKAGE_CDROM =	Yes

MODULES =		lang/ghc converters/libiconv
MODGHC_BUILD =		cabal hackage register

LIB_DEPENDS-lib =
LIB_DEPENDS-main =	${LIB_DEPENDS}

WANTLIB-lib =
WANTLIB-main =		${WANTLIB} \
			c m pthread util

BUILD_DEPENDS +=	devel/hs-ghc-paths \
			lang/ghc,-doc \
			textproc/docbook-xsl \
			${RUN_DEPENDS}

RUN_DEPENDS-lib =	${RUN_DEPENDS} \
			devel/hs-ghc-paths

USE_GMAKE =		Yes
CONFIGURE_STYLE =	autoconf no-autoheader
AUTOCONF_VERSION =	2.61
AUTOCONF_DIR =		${WRKSRC}/doc
WRKCONF =		${AUTOCONF_DIR}

post-build:
	@@cd ${WRKBUILD}/doc && exec ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} html
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${MODGHC_SETUP_PROG} \
		--with-haddock=${WRKBUILD}/dist/build/haddock/haddock \
		haddock --haddock-option=-l${WRKBUILD}/resources

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc
	cd ${WRKBUILD}/doc && umask 022 && pax -rw haddock ${PREFIX}/share/doc

.include <bsd.port.mk>
@


1.47
log
@Update to haddock-2.14.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/06/19 18:58:01 kili Exp $
@


1.46
log
@Add comments to ports which meta/haskell-platform depends on, to
stop other people wasting time on updates which should not be done.

ian@@ ran into this (while working on devel/hs-aeson and
textproc/hs-attoparsec), and even I didn't notice before trying to
build all Haskell ports (including meta/haskell-platform) with his
diffs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2013/07/18 21:44:12 kili Exp $
d8 1
a8 1
DISTNAME =	haddock-2.13.2
a22 9
# We still use the version bundled with the ghc sources, even if it's
# the same as the one from hackage, because it contains the alex- and
# happy-generated sources. And we cannot generate them ourselves,
# because alex and happy themselves depend on some Haskell packages
# (devel/hs-QuickCheck resp. devel/hs-mtl) which obviously need haddock
# to be built.
DISTFILES =
BUILD_DEPENDS +=	lang/ghc:patch

a42 4

post-extract:
	mv ${WRKDIR}/lang/ghc/ghc-${MODGHC_VER}/utils/haddock ${WRKSRC}
	rm -f ${WRKSRC}/src/Haddock/*.source
@


1.45
log
@Update to haddock-2.13.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2013/03/11 10:50:06 espie Exp $
d6 2
@


1.44
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/01/20 17:59:15 kili Exp $
d6 1
a6 1
DISTNAME =	haddock-2.11.0
a8 2
REVISION-main =	0
REVISION-lib =	1
d21 6
a26 4
# Currently, we use the version bundled with the ghc sources, because
# the latest official haddock version (2.10.0) doesn't work with
# ghc-7.4. There's hope that this situation will be fixed upstream
# before ghc-7.6 will be released.
d60 1
a60 1
		haddock --haddock-option=-l${WRKBUILD}
@


1.43
log
@Regenerate plist for profiling libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2012/10/28 23:26:01 kili Exp $
a18 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.42
log
@Move the @@exec and @@unexec lines running the {,un}register.sh scripts
and the line with the unregister.sh script down to the bottom of
the plist. Silences all the blurb about ".../*.haddock doesn't exist
or isn't a file."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2012/10/11 13:31:29 dcoppa Exp $
d10 1
a10 1
REVISION-lib =	0
@


1.41
log
@Fix fallout of haskell ports, now that devel/gmp is no more a
dependency for ghc - devel category

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2012/09/27 17:26:05 ajacoutot Exp $
d10 1
@


1.40
log
@docbook-xsl already comes with libxslt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2012/09/03 17:35:25 kili Exp $
d9 1
d33 1
a33 2
LIB_DEPENDS-main =	${LIB_DEPENDS} \
			devel/gmp
d37 1
a37 1
			c gmp m pthread util
@


1.39
log
@Better fix: just use the pregenerated Lexer and Parser.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/09/03 17:01:54 kili Exp $
a40 1
			textproc/docbook \
a41 1
			textproc/libxslt \
@


1.38
log
@Missing devel/alex and devel/happy in BUILD_DEPENDS.

Noticed by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/09/02 20:06:54 kili Exp $
d39 1
a39 3
BUILD_DEPENDS +=	devel/alex \
			devel/happy \
			devel/hs-ghc-paths \
d57 1
@


1.37
log
@Update to haddock-2.11.0 (using the sources bundled with ghc-7.4.2;
see comment in the Makefile).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/01/12 20:20:05 kili Exp $
d39 3
a41 1
BUILD_DEPENDS +=	devel/hs-ghc-paths \
@


1.36
log
@Bump after the xhtml update in lang/ghc.
Not strictly necessary, but I don't want to get a heart attack
because of some people who don't use packages and don't
rebuild all hs-ports properly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/12/27 21:17:36 kili Exp $
d6 1
a6 1
DISTNAME =	haddock-2.9.2
a7 1
REVISION-main =	2
a8 1
REVISION-lib =	2
a20 7
# This flavor is needed to let ghc extract the haddock sources
# without pulling in haddocks own build dependencies (which would
# include ghc).
FLAVORS =	no_deps
FLAVOR ?=

.if ! ${FLAVOR:Mno_deps}
d24 7
a53 4
.else
MASTER_SITES =		http://hackage.haskell.org/packages/archive/${DISTNAME:S,-,/,}/

DIST_SUBDIR =		ghc
a54 9
do-build:
	@@echo "*** The no_deps FLAVOR is not meant to be built at all, it is"
	@@echo "*** only used by lang/ghc to get a copy of the haddock sources."
	@@false
.endif

# Move the alex- and happy-generated files into the src dir and
# rename the corresponding sources so cabal won't try to re-run
# alex or happy.
d56 1
a56 4
	cd ${WRKSRC}/src && \
	find . -name \*.[xy] -print | \
	sed 's@@\(.*\)\.[xy]@@mv & &.source \&\& mv ../dist/build/haddock/haddock-tmp/\1.hs \1.hs@@' | \
	sh
@


1.35
log
@Bump to enforce updates.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/10/18 06:46:24 espie Exp $
d10 1
a10 1
REVISION-lib =	1
@


1.34
log
@fix build: prevent infinite recursion thru python.
also annotate gamin for bootstrap property, and mark haddock,no_deps as
a "real flavor", since it's only used for bootstrap anyways AND significantly
changes the build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/09/16 09:24:50 espie Exp $
d8 1
a8 1
REVISION-main =	1
@


1.33
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/06/30 21:39:10 kili Exp $
d23 1
a23 1
# This pseudo flavor is needed to let ghc extract the haddock sources
d26 1
a26 1
PSEUDO_FLAVORS =	no_deps
d29 1
a29 1
.if ! ${FLAVOR:L:Mno_deps}
@


1.32
log
@Bump, and twaek RUN_DEPENDS-lib.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/04/23 21:05:14 kili Exp $
d8 1
a8 1
REVISION-main =	0
d10 1
a10 1
REVISION-lib =	0
@


1.31
log
@Set DIST_SUBDIR for the no_deps pseudo flavor.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/04/23 13:00:43 kili Exp $
d8 1
d10 1
d47 3
@


1.30
log
@Comment only.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/04/23 12:25:51 kili Exp $
d53 2
@


1.29
log
@Use the pregenerated lexer and parser to get rid of alex
and happy dependencies (the latter causing circular build
dependencies via hs-mtl and hs-transformers back to haddock).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/04/11 14:31:01 kili Exp $
d60 3
@


1.28
log
@Update to 2.9.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/11/21 17:52:55 kili Exp $
d39 1
a39 3
BUILD_DEPENDS +=	devel/alex \
			devel/happy \
			devel/hs-ghc-paths \
d59 6
@


1.27
log
@Move the entry for unregister.sh *below* the @@unexec line.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/11/15 19:45:58 espie Exp $
d6 1
a6 1
DISTNAME =	haddock-2.7.2
a7 1
REVISION-main =	4
a8 1
REVISION-lib =	3
a47 1
# Required for building the documentation:
@


1.26
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/06 10:18:38 espie Exp $
d10 1
a10 1
REVISION-lib =	2
@


1.25
log
@convert libiconv to new wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/03 22:13:38 kili Exp $
d35 1
a35 1
			::devel/gmp
d41 7
a47 7
BUILD_DEPENDS +=	::devel/alex \
			::devel/happy \
			::devel/hs-ghc-paths \
			::lang/ghc,-doc \
			::textproc/docbook \
			::textproc/docbook-xsl \
			::textproc/libxslt \
@


1.24
log
@bumpski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/10/28 13:52:55 jasper Exp $
d37 3
a39 1
WANTLIB-main =		c gmp m pthread util
@


1.23
log
@- regen plist after recent ghc.port.mk change
- adjust @@exec/@@unexec accordingly

"just go ahead" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/08/26 22:05:05 kili Exp $
d10 1
a10 1
REVISION-lib =	1
@


1.22
log
@Move WANTLIB-main into the ! ${FLAVOR:L:Mno_deps} block, so the
no_deps FLAVOR has really no dependencies. Add an always failing
do-build for no_deps that tells people why this FLAVOR exists.

"makes sense" jakemsr@@, who initlally sent a different diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/08/02 21:16:15 kili Exp $
d8 1
a8 1
REVISION-main =	3
d10 1
a10 1
REVISION-lib =	0
@


1.21
log
@Bump after ghc ABI change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/07/17 13:54:30 kili Exp $
a28 2
WANTLIB-main =		c gmp m pthread util

d37 2
d56 5
@


1.20
log
@Switch to REVISION and new WANTLIB/LIB_DEPENDS style.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/06/30 15:41:01 kili Exp $
d10 1
@


1.19
log
@WANTLIB += pthread and bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/06/18 21:34:23 kili Exp $
d7 2
a8 1
PKGNAME-main =	${DISTNAME}p3
d28 1
a28 1
WANTLIB-main =		c m pthread util
d36 1
a36 1
			gmp::devel/gmp
@


1.18
log
@Require ghc-doc to get all links enabled.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/06/18 21:05:06 kili Exp $
d7 1
a7 1
PKGNAME-main =	${DISTNAME}p2
d27 1
a27 1
WANTLIB-main =		c m util
@


1.17
log
@Oops. I forgot that Haskell people are bad on bootstrapping.
Force the build to use the inplace haddock for building the haddock
documentation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/06/18 20:42:03 kili Exp $
d40 1
@


1.16
log
@Include the Haddock API, but put it into its own subpackage (hs-haddock).
This will be needed by leksah.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/06/15 17:38:17 kili Exp $
d58 3
a60 1
		${MODGHC_SETUP_PROG} haddock
@


1.15
log
@Add gmp dependency.
Move hs-ghc-paths from RUN_DEPENDS to BUILD_DEPENDS.
Bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/05/06 20:05:24 kili Exp $
d3 2
a4 1
COMMENT =	documentation-generation tool for Haskell libraries
d7 2
a8 1
PKGNAME =	${DISTNAME}p1
d13 2
d27 1
a27 1
WANTLIB =		c m util
d31 1
a31 2
# No haddock library (yet).
MODGHC_BUILD =		cabal hackage nort
d33 3
a35 1
LIB_DEPENDS +=		gmp::devel/gmp
d57 2
@


1.14
log
@Adjust WANTLIB and bump PKGNAME after the ghc change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/04/22 21:49:12 kili Exp $
d6 1
a6 1
PKGNAME =	${DISTNAME}p0
d30 1
a30 1
RUN_DEPENDS +=		::devel/hs-ghc-paths
d34 1
@


1.13
log
@Update to haddock-2.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/04/15 13:56:34 ajacoutot Exp $
d6 1
d23 1
a23 1
WANTLIB =		c m pthread util
@


1.12
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/09/19 21:39:43 kili Exp $
d3 1
a3 1
COMMENT=	documentation tool for the functional language Haskell
d5 2
a6 5
V=		0.8
DISTNAME=	haddock-${V}
PKGNAME=	haddock-${V}p1
DISTFILES=	${DISTNAME}-src.tar.gz
CATEGORIES=	devel
d8 1
a8 1
HOMEPAGE=	http://www.haskell.org/haddock/
d10 27
a36 24
# BSD style w/o advertising clause
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

WANTLIB=	c m

MODULES=	lang/ghc
MODGHC_RUNTIME=	No

MASTER_SITES=	${HOMEPAGE}

BUILD_DEPENDS+=	::textproc/docbook \
		::textproc/docbook-xsl \
		::textproc/libxslt
LIB_DEPENDS=	gmp::devel/gmp

SETUP_CONF_ARGS=	configure -g --prefix=${PREFIX}
SETUP_CONF_ENV=		HOME=${PORTHOME} ${CONFIGURE_ENV}
SETUP_PROG=		${WRKSRC}/Setup
SUBST_VARS=		V

NO_REGRESS=		Yes
d39 8
a46 10
USE_GMAKE=		Yes
CONFIGURE_STYLE=	autoconf no-autoheader
AUTOCONF_VERSION=	2.61
AUTOCONF_DIR=		${WRKSRC}/doc
WRKCONF=		${AUTOCONF_DIR}

post-configure:
	@@cd ${WRKSRC} && ghc --make -o ${SETUP_PROG} Setup.lhs
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
		${SETUP_PROG} ${SETUP_CONF_ARGS}
d48 1
a48 2
do-build:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} ${SETUP_PROG} build
a49 4

do-install:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} copy --destdir=${DESTDIR}
@


1.11
log
@
Drop maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/08/01 21:59:55 kili Exp $
d7 1
a7 1
PKGNAME=	haddock-${V}p0
@


1.10
log
@
Don't use runhaskell and unbreak for amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/07/21 17:20:20 kili Exp $
d7 1
a7 1
PKGNAME=	haddock-${V}
a11 1
MAINTAINER=	Matthias Kilian <kili@@openbsd.org>
@


1.9
log
@
Update to 0.8 to make it build with ghc-6.6.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/05/04 09:56:02 bernd Exp $
d34 1
d47 3
a49 2
	@@cd ${WRKSRC} && exec ${SETENV} ${SETUP_CONF_ENV} \
		runhaskell Setup.lhs ${SETUP_CONF_ARGS}
d52 2
a53 4
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		runhaskell Setup.lhs build
	@@cd ${WRKSRC}/doc && exec ${SETENV} ${MAKE_ENV} \
		${MAKE_PROGRAM} html
d57 1
a57 1
		runhaskell Setup.lhs copy --destdir=${DESTDIR}
d61 1
a61 1
	cd ${WRKSRC}/doc && umask 022 && pax -rw haddock ${PREFIX}/share/doc
@


1.8
log
@Use xenocara expat.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/11/20 13:07:19 espie Exp $
d3 1
a3 1
COMMENT=	"documentation tool for the functional language Haskell"
d5 1
a5 1
V=		0.6
d7 2
a8 1
PKGNAME=	${DISTNAME}p0
d12 1
a12 1
MAINTAINER=	Don Stewart <dons@@openbsd.org>
d14 5
a18 1
MODULES=	lang/ghc
d20 1
a20 2
MASTER_SITES=	http://www.haskell.org/haddock/
MASTER_SITES0=	ftp://ftp.cse.unsw.edu.au/pub/users/dons/haddock/
d22 2
a23 2
DISTFILES=	${DISTNAME}-src.tar.gz \
		haddock-regress-${V}.tgz:0
d25 1
a25 9
BUILD_DEPENDS+=	::textproc/docbook	::textproc/docbook-dsssl \
		::textproc/sgmlformat	::textproc/openjade      \
		::textproc/iso8879	::textproc/linuxdoc      \
		::textproc/html		::print/jadetex

USE_GMAKE=	Yes
CONFIGURE_STYLE=gnu dest
CONFIGURE_ENV=	SGML_CATALOG_FILES=${LOCALBASE}/share/sgml/catalog
MAKE_ENV=	SGML_CATALOG_FILES=${LOCALBASE}/share/sgml/catalog
d27 31
a57 4
DOC_DIR=	${PREFIX}/share/doc/haddock

post-build:
	@@cd ${WRKSRC}/haddock/doc ; ${MAKE_ENV} ${GMAKE} html
d60 2
a61 9
	${INSTALL_DATA_DIR} ${DOC_DIR}
	@@cp -R ${WRKSRC}/haddock/doc/haddock/* ${DOC_DIR}

# BSD style w/o advertising clause
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
WANTLIB=		c gmp m
@


1.7
log
@fix a few obviously wrong dependencies, and remove extra shells in ghc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/11/23 11:22:02 espie Exp $
d7 1
d24 1
a24 2
		::textproc/html		::print/jadetex          \
		::textproc/expat 
@


1.6
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/08/10 08:23:37 xsa Exp $
d34 1
a34 1
	@@(cd ${WRKSRC}/haddock/doc ; ${MAKE_ENV} ${GMAKE} html)
d38 1
a38 1
	@@(cp -R ${WRKSRC}/haddock/doc/haddock/* ${DOC_DIR})
@


1.5
log
@
MODULES= lang/ghc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/04/23 02:40:16 dons Exp $
d45 1
@


1.4
log
@
Let haddock build on amd64.
Update my MAINTAINER addr and add RCS tags while I'm here.

ok pvalchev@@ avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/01/16 08:46:37 avsm Exp $
d12 1
a12 1
MODULES=	ghc
@


1.3
log
@update to 0.6, and support sparc
from maintainer Don Stewart <dons at cse.unsw.edu.au>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/07/31 01:11:14 avsm Exp $
d10 1
a10 1
MAINTAINER=	Don Stewart <dons@@cse.unsw.edu.au>
@


1.2
log
@Update to haddock-0.5, build docs from sgml source, cleanup

From: Don Stewart <dons@@cse.unsw.edu.au>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/07/25 00:26:13 avsm Exp $
d5 1
a5 1
V=		0.5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=	"documentation tool for Haskell"
d5 1
a5 1
V=		0.4
d12 1
a12 1
MODULES=	gettext iconv ghc
d15 4
a18 1
DISTFILES=	${DISTNAME}-src.tar.gz
a24 2

NO_REGRESS=	Yes
@


1.1.1.1
log
@initial import of haddock-0.4, from Don Stewart <dons at cse.unsw.edu.au>
--

Haddock is a tool for automatically generating documentation from
annotated Haskell source code. It is primary intended for documenting
libraries, but it should be useful for any kind of Haskell code.

Like other systems, Haddock lets you write documentation annotations
next to the definitions of functions and types in the source code, in
a syntax that is easy on the eye when writing the source code (no
heavyweight mark-up). The documentation generated by Haddock is fully
hyperlinked.

@
text
@@
