head	1.2;
access;
symbols
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2003.09.23.05.59.34;	author marcm;	state dead;
branches;
next	1.1;

1.1
date	2002.12.11.17.17.08;	author marcm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 0.15.0

This update itself doesn't change anything that effects OpenBSD but I
wanted to sync the port with the current version (that has been out for
quite some time).

This port once again builds and statically links against its own internal
glib sources rather than pull in glib-1.2 from ports.  It seemed kinda
silly to build glib-1.2 to build glib-2.0 apps.
@
text
@$OpenBSD: patch-aclocal_m4,v 1.1 2002/12/11 17:17:08 marcm Exp $
--- aclocal.m4.orig	Fri Dec  6 09:42:50 2002
+++ aclocal.m4	Fri Dec  6 09:43:34 2002
@@@@ -1808,8 +1808,8 @@@@ else
     hardcode_direct=yes
     hardcode_shlibpath_var=no
     if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
-      archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+      archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
+      hardcode_libdir_flag_spec='${wl}-R$libdir'
       export_dynamic_flag_spec='${wl}-E'
     else
       case "$host_os" in
@@@@ -1818,8 +1818,8 @@@@ else
 	hardcode_libdir_flag_spec='-R$libdir'
         ;;
       *)
-        archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
-        hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+        archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
+        hardcode_libdir_flag_spec='${wl}-R$libdir'
         ;;
       esac
     fi
@


1.1
log
@Update to 0.14.0 which now handles -pthread without patching (hmpf "patch
from FreeBSD guys" indeed).

The included glib-1.2.8 is no longer built, instead our in-tree glib is
linked statically.  This avoids a reported problem on macppc arches.

ok avsm@@
@
text
@d1 1
a1 1
$OpenBSD$
@

