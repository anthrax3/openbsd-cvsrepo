head	1.4;
access;
symbols
	OPENBSD_4_6:1.3.0.34
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.32
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.30
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.28
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.26
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.24
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.22
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.20
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.18
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.16
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.14
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.12
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.10
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.8
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.6
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.4
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2009.11.04.13.36.55;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2001.09.16.03.00.01;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.30.22.16.42;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.22.18.30.59;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- remove prc-tools. it's been broken for > 7.5 years. and nobody showed
any intrest in it. it belongs in the Attic..

"axe it!" pvalchev@@
@
text
@--- Makefile.orig	Thu Jul 10 05:14:12 1997
+++ Makefile	Thu Aug 23 19:48:54 2001
@@@@ -2,8 +2,7 @@@@
 CFLAGS = -O2 -g
 # -g -DDEBUG
 
-PREFIX = /usr/local/gnu
-HOST = i386-slackware-linux
+#PREFIX = /usr/local/pilot
 TARGET-NAME = m68k-palmos-coff
 
 EXEEXT = 
@@@@ -15,15 +14,15 @@@@
 GCCDIR = ../gcc-2.7.2.2
 GDBDIR = ../gdb-4.16
 
-GNUARCH = /cdrom/gnu
+GNUARCH = /usr/ports/distfiles
 
-TTY = /dev/cua0
+TTY = /dev/pilot
 
 M68K_BFD = $(PREFIX)/lib/lib$(TARGET-NAME)-bfd.a
 
 LBFD = `if [ -f $(M68K_BFD) ]; \
 	then echo $(M68K_BFD); \
-	else echo "-L$(PREFIX)/lib -lbfd"; fi` -liberty
+	else echo "-L$(PREFIX)/lib -lbfd"; fi` -L$(PREFIX)/lib -liberty
 
 LIBCDIR = libc.0.1.2
 LIBMDIR = libmf.0.1.2
@@@@ -34,6 +33,8 @@@@
 # export doesn't work on make in gnuwin32 b18...
 MAKEEXPORTS = PREFIX=$(PREFIX) TOOLDIR=$(TOOLDIR) \
 	LIBCDIR=$(LIBCDIR) LIBMDIR=$(LIBMDIR) LIBGLIBDIR=$(LIBGLIBDIR)
+IEXPORTS = PREFIX=$(PREFIX) TOOLDIR=$(TOOLDIR) \
+	LIBCDIR=$(LIBCDIR) LIBMDIR=$(LIBMDIR) LIBGLIBDIR=$(LIBGLIBDIR)
 
 all: gdbpanel/gdbpanel.prc example/pilrctst.prc
 
@@@@ -61,27 +62,27 @@@@
 	make install
 
 install: all dummy install-man
-	cd $(LIBCDIR) ; make $(MAKEEXPORTS) install
-	cd $(LIBMDIR) ; make $(MAKEEXPORTS) install
-	cd $(LIBGLIBDIR) ; make $(MAKEEXPORTS) install
-	cp -f pilrc$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
-	cp -f txt2bitm$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
-	cp -f obj-res$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
-	cp -f build-prc$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
-	cp -f stubgen $(PREFIX)/$(TARGET-NAME)/bin
-	cp -f exportlist $(PREFIX)/$(TARGET-NAME)/bin
-	-cp -raf PalmOS1 $(PREFIX)/$(TARGET-NAME)/include
-	-cp -raf PalmOS2 $(PREFIX)/$(TARGET-NAME)/include
-	ln -snf $(PREFIX)/$(TARGET-NAME)/include/PalmOS2 $(PREFIX)/$(TARGET-NAME)/include/PalmOS
-	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/pilrc$(EXEEXT) $(PREFIX)/bin/pilrc$(EXEEXT)
-	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/txt2bitm$(EXEEXT) $(PREFIX)/bin/txt2bitm$(EXEEXT)
-	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/obj-res$(EXEEXT) $(PREFIX)/bin/$(TARGET-NAME)-obj-res$(EXEEXT)
-	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/exportlist $(PREFIX)/bin/$(TARGET-NAME)-exportlist
-	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/build-prc$(EXEEXT) $(PREFIX)/bin/build-prc$(EXEEXT)
-	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/stubgen $(PREFIX)/bin/$(TARGET-NAME)-stubgen
+	cd $(LIBCDIR) ; make $(IEXPORTS) install
+	cd $(LIBMDIR) ; make $(IEXPORTS) install
+	cd $(LIBGLIBDIR) ; make $(IEXPORTS) install
+	cp -f pilrc$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
+	cp -f txt2bitm$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
+	cp -f obj-res$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
+	cp -f build-prc$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
+	cp -f stubgen $(PREFIX)/$(TARGET-NAME)/bin
+	cp -f exportlist $(PREFIX)/$(TARGET-NAME)/bin
+	-cp -rf PalmOS1 $(PREFIX)/$(TARGET-NAME)/include
+	-cp -rf PalmOS2 $(PREFIX)/$(TARGET-NAME)/include
+	ln -sf $(PREFIX)/$(TARGET-NAME)/include/PalmOS2 $(PREFIX)/$(TARGET-NAME)/include/PalmOS
+	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/pilrc$(EXEEXT) $(PREFIX)/bin/pilrc$(EXEEXT)
+	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/txt2bitm$(EXEEXT) $(PREFIX)/bin/txt2bitm$(EXEEXT)
+	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/obj-res$(EXEEXT) $(PREFIX)/bin/$(TARGET-NAME)-obj-res$(EXEEXT)
+	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/exportlist $(PREFIX)/bin/$(TARGET-NAME)-exportlist
+	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/build-prc$(EXEEXT) $(PREFIX)/bin/build-prc$(EXEEXT)
+	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/stubgen $(PREFIX)/bin/$(TARGET-NAME)-stubgen
 
 install-man: dummy
-	cp man/* $(PREFIX)/man/man1
+	cp man/* $(PREFIX)/man/man1
 
 send: all
 	echo Hit the HotSync button on the Pilot connected to $(TTY)
@@@@ -156,21 +157,21 @@@@
 gnutools: stamp.binutils stamp.gcc stamp.gdb
 
 stamp.binutils:
-	cd $(BINUTILSDIR) ; ./configure --host=$(HOST) --prefix=$(PREFIX) --target=$(TARGET-NAME)
+	cd $(BINUTILSDIR) ; ./configure --prefix=$(PREFIX) --target=$(TARGET-NAME) -host=$(MACHINE_ARCH)-unknown-freebsd
 	cd $(BINUTILSDIR) ; make
-	cd $(BINUTILSDIR) ; make install
+	cd $(BINUTILSDIR) ; PREFIX=$(PREFIX) make install
 	touch $@@
 
 stamp.gcc:
-	cd $(GCCDIR) ; ./configure --host=$(HOST) --prefix=$(PREFIX) --target=$(TARGET-NAME)
+	cd $(GCCDIR) ; ./configure --prefix=$(PREFIX) --target=$(TARGET-NAME) --host=$(MACHINE_ARCH)-unknown-freebsd
 	cd $(GCCDIR) ; make LANGUAGES=c
-	cd $(GCCDIR) ; make LANGUAGES=c install
+	cd $(GCCDIR) ; PREFIX=$(PREFIX) make LANGUAGES=c install
 	touch $@@
 
 stamp.gdb:
-	cd $(GDBDIR) ; ./configure --host=$(HOST) --prefix=$(PREFIX) --target=$(TARGET-NAME)
+	cd $(GDBDIR) ; ./configure --prefix=$(PREFIX) --target=$(TARGET-NAME) --host=$(MACHINE_ARCH)-unknown-freebsd
 	cd $(GDBDIR) ; make
-	cd $(GDBDIR) ; make install
+	cd $(GDBDIR) ; PREFIX=$(PREFIX) make install
 	touch $@@
 
 dummy:
@


1.3
log
@clean some unneeded stuff
@
text
@@


1.2
log
@Re-enable this port.

Still FAKE=No as it installs things during build time.
@
text
@d36 1
a36 1
+IEXPORTS = PREFIX=$(DPREFIX) TOOLDIR=$(TOOLDIR) \
d66 15
a80 15
+	cp -f pilrc$(EXEEXT) $(DPREFIX)/$(TARGET-NAME)/bin
+	cp -f txt2bitm$(EXEEXT) $(DPREFIX)/$(TARGET-NAME)/bin
+	cp -f obj-res$(EXEEXT) $(DPREFIX)/$(TARGET-NAME)/bin
+	cp -f build-prc$(EXEEXT) $(DPREFIX)/$(TARGET-NAME)/bin
+	cp -f stubgen $(DPREFIX)/$(TARGET-NAME)/bin
+	cp -f exportlist $(DPREFIX)/$(TARGET-NAME)/bin
+	-cp -rf PalmOS1 $(DPREFIX)/$(TARGET-NAME)/include
+	-cp -rf PalmOS2 $(DPREFIX)/$(TARGET-NAME)/include
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/include/PalmOS2 $(PREFIX)/$(TARGET-NAME)/include/PalmOS
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/bin/pilrc$(EXEEXT) $(PREFIX)/bin/pilrc$(EXEEXT)
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/bin/txt2bitm$(EXEEXT) $(PREFIX)/bin/txt2bitm$(EXEEXT)
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/bin/obj-res$(EXEEXT) $(PREFIX)/bin/$(TARGET-NAME)-obj-res$(EXEEXT)
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/bin/exportlist $(PREFIX)/bin/$(TARGET-NAME)-exportlist
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/bin/build-prc$(EXEEXT) $(PREFIX)/bin/build-prc$(EXEEXT)
+	ln -sf $(DPREFIX)/$(TARGET-NAME)/bin/stubgen $(PREFIX)/bin/$(TARGET-NAME)-stubgen
d84 1
a84 1
+	cp man/* $(DPREFIX)/man/man1
d96 1
a96 1
+	cd $(BINUTILSDIR) ; PREFIX=$(DPREFIX) make install
d104 1
a104 1
+	cd $(GCCDIR) ; PREFIX=$(DPREFIX) make LANGUAGES=c install
d112 1
a112 1
+	cd $(GDBDIR) ; PREFIX=$(DPREFIX) make install
@


1.1
log
@- First apply the distribution patches, and remove the old
.orig leftovers before applying the local ones.
- Rename patches to make update-patches work.
prc-tools is still broken.  new version 2.0 has binutils issues
@
text
@d1 3
a3 4
$OpenBSD$
--- prc-tools-0.5.0/Makefile.orig	Thu Jul 10 05:14:12 1997
+++ prc-tools-0.5.0/Makefile	Wed Aug 22 12:23:05 2001
@@@@ -2,8 +2,7 @@@@ CC = gcc
d9 1
a9 1
+PREFIX = /usr/local/pilot
d13 1
a13 1
@@@@ -15,15 +14,15 @@@@ BINUTILSDIR = ../binutils-2.7
d32 22
a53 4
@@@@ -70,9 +69,9 @@@@ install: all dummy install-man
 	cp -f build-prc$(EXEEXT) $(PREFIX)/$(TARGET-NAME)/bin
 	cp -f stubgen $(PREFIX)/$(TARGET-NAME)/bin
 	cp -f exportlist $(PREFIX)/$(TARGET-NAME)/bin
d57 32
a88 7
+	-cp -rf PalmOS1 $(PREFIX)/$(TARGET-NAME)/include
+	-cp -rf PalmOS2 $(PREFIX)/$(TARGET-NAME)/include
+	ln -sf $(PREFIX)/$(TARGET-NAME)/include/PalmOS2 $(PREFIX)/$(TARGET-NAME)/include/PalmOS
 	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/pilrc$(EXEEXT) $(PREFIX)/bin/pilrc$(EXEEXT)
 	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/txt2bitm$(EXEEXT) $(PREFIX)/bin/txt2bitm$(EXEEXT)
 	ln -sf $(PREFIX)/$(TARGET-NAME)/bin/obj-res$(EXEEXT) $(PREFIX)/bin/$(TARGET-NAME)-obj-res$(EXEEXT)
@@@@ -156,19 +155,19 @@@@ stamp.winpatch:
d95 2
a96 1
 	cd $(BINUTILSDIR) ; make install
d103 2
a104 1
 	cd $(GCCDIR) ; make LANGUAGES=c install
d111 2
a112 1
 	cd $(GDBDIR) ; make install
d114 2
@

