head	1.3;
access;
symbols
	OPENBSD_4_6:1.2.0.34
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.32
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.30
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.28
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.26
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.24
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.22
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.20
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.18
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.16
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.14
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.12
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.10
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.8
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.6
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2009.11.04.13.36.55;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2001.08.30.22.16.42;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.22.18.30.59;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- remove prc-tools. it's been broken for > 7.5 years. and nobody showed
any intrest in it. it belongs in the Attic..

"axe it!" pvalchev@@
@
text
@$OpenBSD: patch-prc-tools-0_5_0_build-prc_c,v 1.2 2001/08/30 22:16:42 pvalchev Exp $
--- ../prc-tools-0.5.0/build-prc.c.orig	Fri Jun 27 10:59:32 1997
+++ ../prc-tools-0.5.0/build-prc.c	Wed Aug 22 12:23:06 2001
@@@@ -9,6 +9,7 @@@@
 #include <stdio.h>
 #include <fcntl.h>
 #include <stdlib.h>
+#include <string.h>
 #include "prc.h"
 
 #ifdef __CYGWIN32__
@@@@ -17,6 +18,21 @@@@
 #define O_PLATFORM 0
 #endif
 
+char *
+basename(char *path)
+{
+  char *name;
+
+  name = strrchr(path, '/');
+  if (name) {
+    name++;
+  } else {
+    name = path;
+  }
+
+  return name;
+}
+
 main(int argc, char *argv[])
 {
   pfd_t *pf;
@@@@ -64,6 +80,8 @@@@ main(int argc, char *argv[])
   /* the .prc write routines write the resources in reverse order! */
 
   for (i=argc-1; i > optind + 2; i--) {
+    char *name;
+
     if ((fd = open(argv[i], O_PLATFORM | O_RDONLY)) < 1) {
       fprintf(stderr, "Can't open resource file %s\n",argv[i]);
       exit(3);
@@@@ -76,7 +94,8 @@@@ main(int argc, char *argv[])
     read(fd, sd, slen);
     close (fd);
 
-    add_section_pfd(pf, argv[i], strtoul(argv[i] + 4, (void *)0, 16),
+    name = basename(argv[i]);
+    add_section_pfd(pf, name, strtoul(name + 4, (void *)0, 16),
 		    sd, slen);
   }
 
@


1.2
log
@Re-enable this port.

Still FAKE=No as it installs things during build time.
@
text
@d1 1
a1 1
$OpenBSD: patch-prc-tools-0_5_0_build-prc_c,v 1.1 2001/08/22 18:30:59 pvalchev Exp $
@


1.1
log
@- First apply the distribution patches, and remove the old
.orig leftovers before applying the local ones.
- Rename patches to make update-patches work.
prc-tools is still broken.  new version 2.0 has binutils issues
@
text
@d1 3
a3 3
$OpenBSD$
--- prc-tools-0.5.0/build-prc.c.orig	Fri Jun 27 10:59:32 1997
+++ prc-tools-0.5.0/build-prc.c	Wed Aug 22 12:23:06 2001
@

