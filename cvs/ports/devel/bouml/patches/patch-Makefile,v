head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.28
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.26
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.22
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.24
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.20
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.18
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.16
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.14
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.12
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.10
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.8
	OPENBSD_5_0:1.3.0.6
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.4
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.1.0.4
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	jasper_20080917:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2010.07.05.10.42.48;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2009.09.01.09.35.28;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2008.09.17.11.56.35;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.09.17.11.56.35;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- update bouml to 4.22.1
@
text
@$OpenBSD: patch-Makefile,v 1.2 2009/09/01 09:35:28 jasper Exp $

Use INSTALL_DATA/INSTALL_PROGRAM here to make sure we end up with the correct
permissions being set (cp -p).

--- Makefile.orig	Sat Dec 26 11:00:56 2009
+++ Makefile	Mon Jul  5 10:34:21 2010
@@@@ -1,19 +1,19 @@@@
 # The directory where all the bouml files will be installed, you
 # can change it for instance because you don't have root permission
-BOUML_LIB = /usr/lib/bouml
+BOUML_LIB = ${PREFIX}/share/bouml
 
 # The directory where the bouml shell script will be installed, you
 # can change it for instance because you don't have root permission
-BOUML_DIR = /usr/bin
+BOUML_DIR = ${PREFIX}/bin
 
 # The directory containing bouml.desktop
 # The copy is not done if you comment the definition
-BOUML_DESKTOP_DIR = /usr/share/applications
+BOUML_DESKTOP_DIR = ${PREFIX}/share/applications
 
 # The directories containing the bouml icons are
 # <BOUML_ICONS_PREFIX_DIR>/<size>x<size>/apps
 # The copy is not done if you comment the definition
-BOUML_ICONS_PREFIX_DIR = /usr/share/icons/hicolor
+BOUML_ICONS_PREFIX_DIR = ${PREFIX}/share/icons/hicolor
 
 # On several Unix systems, the icons used inside the
 # menus must be stored inside the pixmaps' directory.
@@@@ -26,7 +26,7 @@@@ BOUML_ICONS_PREFIX_DIR = /usr/share/icons/hicolor
 # uncomment if needed
 # MAKE = make
 
-QMAKE=qmake
+QMAKE?=qmake
 
 SRC_DIRS = src \
 	src/CppGenerator \
@@@@ -111,9 +111,9 @@@@ install:
 	then \
 		for i in 16 32 48 64; do \
 			mkdir -p "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps"; \
-			cp -p bouml.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/bouml.png"; \
-			cp -p projectControl.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectControl.png"; \
-			cp -p projectSynchro.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectSynchro.png"; \
+			${BSD_INSTALL_DATA} bouml.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/bouml.png"; \
+			${BSD_INSTALL_DATA} projectControl.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectControl.png"; \
+			${BSD_INSTALL_DATA} projectSynchro.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectSynchro.png"; \
 		done; \
 	fi
 	if test -n "$(BOUML_UNIX_PIXMAPS_DIR)"; then \
@@@@ -122,16 +122,9 @@@@ install:
 		cp -f projectControl.48.png "$(DESTDIR)$(BOUML_UNIX_PIXMAPS_DIR)/projectControl.png"; \
 		cp -f projectSynchro.48.png "$(DESTDIR)$(BOUML_UNIX_PIXMAPS_DIR)/projectSynchro.png"; \
 	fi
-	cp -p *.lang "$(DESTDIR)$(BOUML_LIB)"
-	for i in $(PROGS); do cp -p $$i "$(DESTDIR)$(BOUML_LIB)" ; done
+	${BSD_INSTALL_PROGRAM} *.lang "$(DESTDIR)$(BOUML_LIB)"
+	for i in $(PROGS); do ${BSD_INSTALL_PROGRAM} $$i "$(DESTDIR)$(BOUML_DIR)" ; done
 	cd plugouts ; tar cf - empty genpro html rose singleton cpp_utilities xmi xmi2 xmi2import sm_generator usecase_wizard sort uml_projection FileControl deploy GlobalChange | (cd $(DESTDIR)$(BOUML_LIB); tar xf -)
-	echo "#!/bin/sh" >$(DESTDIR)$(BOUML_DIR)/bouml
-	echo "PATH=$(BOUML_LIB):$$"PATH >>$(DESTDIR)$(BOUML_DIR)/bouml
-	echo "BOUML_LIB_DIR=$(BOUML_LIB)" >>$(DESTDIR)$(BOUML_DIR)/bouml
-	echo "export PATH" >>$(DESTDIR)$(BOUML_DIR)/bouml
-	echo "export BOUML_LIB_DIR" >>$(DESTDIR)$(BOUML_DIR)/bouml
-	echo "exec $(BOUML_LIB)/bouml \"$$"@@"\"" >>$(DESTDIR)$(BOUML_DIR)/bouml
-	chmod +x "$(DESTDIR)$(BOUML_DIR)/bouml"
 	cd $(DESTDIR)$(BOUML_DIR) ; rm -f projectControl ; ln -s $(BOUML_LIB)/projectControl
 	cd $(DESTDIR)$(BOUML_DIR) ; rm -f projectSynchro ; ln -s $(BOUML_LIB)/projectSynchro
 	if test -n "$(BOUML_DESKTOP_DIR)" ; \
@@@@ -151,7 +144,7 @@@@ install:
 		echo "Name=Project Control" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
 		echo "Type=Application" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
 		echo "Comment=Bouml project's files control" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
-		echo "Exec=$(BOUML_LIB)/projectControl" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
+		echo "Exec=$(BOUML_DIR)/projectControl" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
 		echo "TryExec=projectControl" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
 		echo "Icon=projectControl" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
 		echo "Categories=Development;" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectControl.desktop" ; \
@@@@ -160,7 +153,7 @@@@ install:
 		echo "Name=Project Synchro" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
 		echo "Type=Application" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
 		echo "Comment=Bouml project's files synchronization" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
-		echo "Exec=$(BOUML_LIB)/projectSynchro" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
+		echo "Exec=$(BOUML_DIR)/projectSynchro" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
 		echo "TryExec=projectSynchro" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
 		echo "Icon=projectSynchro" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
 		echo "Categories=Development;" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/projectSynchro.desktop" ; \
@


1.2
log
@- update bouml to 4.13.1
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.1.1.1 2008/09/17 11:56:35 jasper Exp $
d6 2
a7 2
--- Makefile.orig	Wed Jun 10 22:25:38 2009
+++ Makefile	Tue Sep  1 09:57:54 2009
d41 1
a41 1
@@@@ -109,9 +109,9 @@@@ install:
d54 1
a54 1
@@@@ -120,13 +120,8 @@@@ install:
d58 1
d60 1
d65 1
d67 1
d73 1
a73 1
@@@@ -146,7 +141,7 @@@@ install:
d82 1
a82 1
@@@@ -155,7 +150,7 @@@@ install:
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d6 2
a7 2
--- Makefile.orig	Sat Apr  5 10:56:34 2008
+++ Makefile	Mon Sep  8 10:49:49 2008
d41 1
a41 1
@@@@ -107,9 +107,9 @@@@ install:
d54 1
a54 1
@@@@ -118,13 +118,8 @@@@ install:
d69 1
a69 1
@@@@ -144,7 +139,7 @@@@ install:
d78 1
a78 1
@@@@ -153,7 +148,7 @@@@ install:
@


1.1.1.1
log
@import bouml 4.5

BOUML is a free UML tool box (under development) allowing you to specify and
generate code in C++, Java, Idl, PHP and Python.
BOUML is extensible, and the external tools (named plug-outs) may be developed
in C++ or Java, using BOUML for their definition as any other program. The code
generators and reverses are ones of the predefined plug-outs included in the
BOUML distribution.

feedback and ok ajacoutot@@
@
text
@@
