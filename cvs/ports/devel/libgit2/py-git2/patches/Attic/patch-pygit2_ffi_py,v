head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.09.16.08.18.07;	author jasper;	state dead;
branches;
next	1.1;
commitid	1suwnUWIOgaJlFN3;

1.1
date	2014.07.08.15.34.01;	author jasper;	state Exp;
branches;
next	;
commitid	Ve0fsqftZChTbWAD;


desc
@@


1.2
log
@update to py-git2-0.21.3
@
text
@$OpenBSD: patch-pygit2_ffi_py,v 1.1 2014/07/08 15:34:01 jasper Exp $

From b0bf223276ac3a0a522aca4d1c2e8c08636f9081 Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
Date: Thu, 3 Jul 2014 10:10:38 +0200
Subject: [PATCH] Tweak include/lib dir detection in ffi.py

--- pygit2/ffi.py.orig	Thu Jul  3 10:49:42 2014
+++ pygit2/ffi.py	Thu Jul  3 10:50:49 2014
@@@@ -112,11 +112,11 @@@@ with codecs.open(decl_path, 'r', 'utf-8') as header:
 
 # if LIBGIT2 exists, set build and link against that version
 libgit2_path = getenv('LIBGIT2')
-include_dirs = []
-library_dirs = []
-if libgit2_path:
-    include_dirs = [path.join(libgit2_path, 'include')]
-    library_dirs = [path.join(libgit2_path, 'lib')]
+if not libgit2_path:
+    libgit2_path = '${PREFIX}'
+
+include_dirs = [path.join(libgit2_path, 'include')]
+library_dirs = [path.join(libgit2_path, 'lib')]
 
 C = ffi.verify("#include <git2.h>", libraries=["git2"],
                include_dirs=include_dirs, library_dirs=library_dirs)
@


1.1
log
@update to pygit2-0.21.0
@
text
@d1 1
a1 1
$OpenBSD$
@

