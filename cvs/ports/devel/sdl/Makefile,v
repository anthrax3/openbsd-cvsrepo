head	1.99;
access;
symbols
	OPENBSD_6_1:1.99.0.4
	OPENBSD_6_1_BASE:1.99
	OPENBSD_6_0:1.99.0.2
	OPENBSD_6_0_BASE:1.99
	OPENBSD_5_9:1.97.0.2
	OPENBSD_5_9_BASE:1.97
	OPENBSD_5_8:1.97.0.4
	OPENBSD_5_8_BASE:1.97
	OPENBSD_5_7:1.96.0.6
	OPENBSD_5_7_BASE:1.96
	OPENBSD_5_6:1.96.0.4
	OPENBSD_5_6_BASE:1.96
	OPENBSD_5_5:1.96.0.2
	OPENBSD_5_5_BASE:1.96
	OPENBSD_5_4:1.92.0.2
	OPENBSD_5_4_BASE:1.92
	OPENBSD_5_3:1.90.0.2
	OPENBSD_5_3_BASE:1.90
	OPENBSD_5_2:1.86.0.2
	OPENBSD_5_2_BASE:1.86
	OPENBSD_5_1_BASE:1.79
	OPENBSD_5_1:1.79.0.4
	OPENBSD_5_0:1.79.0.2
	OPENBSD_5_0_BASE:1.79
	OPENBSD_4_9:1.78.0.2
	OPENBSD_4_9_BASE:1.78
	OPENBSD_4_8:1.75.0.2
	OPENBSD_4_8_BASE:1.75
	OPENBSD_4_7:1.74.0.2
	OPENBSD_4_7_BASE:1.74
	OPENBSD_4_6:1.72.0.4
	OPENBSD_4_6_BASE:1.72
	OPENBSD_4_5:1.72.0.2
	OPENBSD_4_5_BASE:1.72
	OPENBSD_4_4:1.64.0.2
	OPENBSD_4_4_BASE:1.64
	OPENBSD_4_3:1.61.0.2
	OPENBSD_4_3_BASE:1.61
	OPENBSD_4_2:1.54.0.2
	OPENBSD_4_2_BASE:1.54
	OPENBSD_4_1:1.49.0.2
	OPENBSD_4_1_BASE:1.49
	OPENBSD_4_0:1.45.0.2
	OPENBSD_4_0_BASE:1.45
	OPENBSD_3_9:1.44.0.2
	OPENBSD_3_9_BASE:1.44
	OPENBSD_3_8:1.40.0.2
	OPENBSD_3_8_BASE:1.40
	OPENBSD_3_7:1.38.0.2
	OPENBSD_3_7_BASE:1.38
	OPENBSD_3_6:1.32.0.2
	OPENBSD_3_6_BASE:1.32
	OPENBSD_3_5:1.30.0.2
	OPENBSD_3_5_BASE:1.30
	OPENBSD_3_4:1.27.0.4
	OPENBSD_3_4_BASE:1.27
	OPENBSD_3_3:1.27.0.2
	OPENBSD_3_3_BASE:1.27
	OPENBSD_3_2:1.26.0.2
	OPENBSD_3_2_BASE:1.26
	OPENBSD_3_1:1.22.0.2
	OPENBSD_3_1_BASE:1.22
	OPENBSD_3_0:1.18.0.2
	OPENBSD_3_0_BASE:1.18
	OPENBSD_2_9_TRACKING_SWITCH:1.16
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	obecian_2001-Apr-19:1.1.1.1
	obecian:1.1.1;
locks; strict;
comment	@# @;


1.99
date	2016.04.26.21.21.22;	author naddy;	state Exp;
branches;
next	1.98;
commitid	UXl7ZbXWbRNPFeHp;

1.98
date	2016.03.11.20.28.24;	author naddy;	state Exp;
branches;
next	1.97;
commitid	UYLP8TE6V7RS2GhJ;

1.97
date	2015.05.22.11.31.13;	author ajacoutot;	state Exp;
branches;
next	1.96;
commitid	2khjHXfpTaOuNVcx;

1.96
date	2013.12.24.20.21.42;	author brad;	state Exp;
branches;
next	1.95;

1.95
date	2013.12.19.09.24.18;	author ratchov;	state Exp;
branches;
next	1.94;

1.94
date	2013.12.15.01.57.55;	author brad;	state Exp;
branches;
next	1.93;

1.93
date	2013.08.07.15.37.10;	author naddy;	state Exp;
branches;
next	1.92;

1.92
date	2013.03.21.08.45.16;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2013.03.11.10.50.30;	author espie;	state Exp;
branches;
next	1.90;

1.90
date	2013.02.09.14.49.50;	author sthen;	state Exp;
branches;
next	1.89;

1.89
date	2013.01.16.01.49.02;	author brad;	state Exp;
branches;
next	1.88;

1.88
date	2013.01.12.12.34.21;	author brad;	state Exp;
branches;
next	1.87;

1.87
date	2012.12.09.07.29.57;	author brad;	state Exp;
branches;
next	1.86;

1.86
date	2012.05.16.14.01.19;	author edd;	state Exp;
branches;
next	1.85;

1.85
date	2012.03.29.13.38.30;	author sthen;	state Exp;
branches;
next	1.84;

1.84
date	2012.03.22.13.00.42;	author dcoppa;	state Exp;
branches;
next	1.83;

1.83
date	2012.03.04.01.33.22;	author jsg;	state Exp;
branches;
next	1.82;

1.82
date	2012.03.02.09.10.38;	author dcoppa;	state Exp;
branches;
next	1.81;

1.81
date	2012.02.22.08.22.39;	author dcoppa;	state Exp;
branches;
next	1.80;

1.80
date	2012.02.17.06.59.46;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2011.05.13.07.57.24;	author jasper;	state Exp;
branches;
next	1.78;

1.78
date	2010.11.15.19.46.09;	author espie;	state Exp;
branches;
next	1.77;

1.77
date	2010.10.24.21.11.03;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2010.10.18.17.48.13;	author espie;	state Exp;
branches;
next	1.75;

1.75
date	2010.06.15.15.29.29;	author espie;	state Exp;
branches;
next	1.74;

1.74
date	2010.01.12.11.19.06;	author jakemsr;	state Exp;
branches;
next	1.73;

1.73
date	2009.08.10.06.31.08;	author kili;	state Exp;
branches;
next	1.72;

1.72
date	2009.01.24.10.56.11;	author jakemsr;	state Exp;
branches;
next	1.71;

1.71
date	2009.01.08.20.38.11;	author ratchov;	state Exp;
branches;
next	1.70;

1.70
date	2008.12.30.22.17.54;	author sthen;	state Exp;
branches;
next	1.69;

1.69
date	2008.12.30.02.15.20;	author jakemsr;	state Exp;
branches;
next	1.68;

1.68
date	2008.12.23.07.45.32;	author jakemsr;	state Exp;
branches;
next	1.67;

1.67
date	2008.11.02.14.53.51;	author jakemsr;	state Exp;
branches;
next	1.66;

1.66
date	2008.09.26.03.14.42;	author brad;	state Exp;
branches;
next	1.65;

1.65
date	2008.09.16.20.43.10;	author naddy;	state Exp;
branches;
next	1.64;

1.64
date	2008.03.20.22.00.15;	author pvalchev;	state Exp;
branches;
next	1.63;

1.63
date	2008.03.20.05.14.11;	author pvalchev;	state Exp;
branches;
next	1.62;

1.62
date	2008.03.19.13.33.29;	author jakemsr;	state Exp;
branches;
next	1.61;

1.61
date	2008.01.27.18.43.20;	author pvalchev;	state Exp;
branches;
next	1.60;

1.60
date	2008.01.03.17.39.40;	author pvalchev;	state Exp;
branches;
next	1.59;

1.59
date	2007.12.09.13.40.16;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2007.11.18.09.39.02;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2007.11.14.07.16.39;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2007.09.22.01.12.38;	author pvalchev;	state Exp;
branches;
next	1.55;

1.55
date	2007.09.16.02.53.13;	author merdely;	state Exp;
branches;
next	1.54;

1.54
date	2007.08.14.15.51.07;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2007.08.07.14.22.02;	author pvalchev;	state Exp;
branches;
next	1.52;

1.52
date	2007.07.20.05.23.41;	author jakemsr;	state Exp;
branches;
next	1.51;

1.51
date	2007.04.08.15.31.01;	author sturm;	state Exp;
branches;
next	1.50;

1.50
date	2007.03.26.21.22.13;	author espie;	state Exp;
branches;
next	1.49;

1.49
date	2007.01.21.14.47.58;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2006.12.04.03.52.08;	author jolan;	state Exp;
branches;
next	1.47;

1.47
date	2006.10.19.00.26.33;	author pvalchev;	state Exp;
branches;
next	1.46;

1.46
date	2006.10.18.17.53.08;	author pvalchev;	state Exp;
branches;
next	1.45;

1.45
date	2006.08.01.23.39.08;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2006.02.03.06.20.11;	author aanriot;	state Exp;
branches;
next	1.43;

1.43
date	2006.01.13.23.40.23;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2005.12.24.17.40.00;	author pvalchev;	state Exp;
branches;
next	1.41;

1.41
date	2005.09.17.00.38.15;	author pvalchev;	state Exp;
branches;
next	1.40;

1.40
date	2005.08.10.00.25.16;	author jolan;	state Exp;
branches;
next	1.39;

1.39
date	2005.05.11.17.26.15;	author pvalchev;	state Exp;
branches;
next	1.38;

1.38
date	2005.02.11.18.52.04;	author sturm;	state Exp;
branches;
next	1.37;

1.37
date	2005.01.29.22.56.34;	author robert;	state Exp;
branches;
next	1.36;

1.36
date	2005.01.05.21.52.50;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2004.11.24.00.11.03;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2004.11.18.17.48.50;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2004.10.25.02.34.21;	author pvalchev;	state Exp;
branches;
next	1.32;

1.32
date	2004.04.23.12.09.18;	author robert;	state Exp;
branches;
next	1.31;

1.31
date	2004.04.18.17.21.13;	author pvalchev;	state Exp;
branches;
next	1.30;

1.30
date	2003.12.28.22.26.18;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2003.12.07.19.45.42;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2003.09.29.05.41.37;	author pvalchev;	state Exp;
branches;
next	1.27;

1.27
date	2002.11.30.11.17.26;	author wcobb;	state Exp;
branches;
next	1.26;

1.26
date	2002.09.15.19.53.21;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2002.09.07.04.56.28;	author pvalchev;	state Exp;
branches;
next	1.24;

1.24
date	2002.05.06.04.26.08;	author pvalchev;	state Exp;
branches;
next	1.23;

1.23
date	2002.04.21.00.20.08;	author pvalchev;	state Exp;
branches;
next	1.22;

1.22
date	2002.02.25.22.33.59;	author pvalchev;	state Exp;
branches;
next	1.21;

1.21
date	2002.02.19.20.53.50;	author pvalchev;	state Exp;
branches;
next	1.20;

1.20
date	2002.02.19.06.42.03;	author pvalchev;	state Exp;
branches;
next	1.19;

1.19
date	2001.12.28.23.42.26;	author pvalchev;	state Exp;
branches;
next	1.18;

1.18
date	2001.09.28.06.02.13;	author pvalchev;	state Exp;
branches;
next	1.17;

1.17
date	2001.08.30.02.24.52;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2001.08.14.22.42.03;	author pvalchev;	state Exp;
branches;
next	1.15;

1.15
date	2001.07.29.19.46.17;	author pvalchev;	state Exp;
branches;
next	1.14;

1.14
date	2001.07.25.07.58.32;	author pvalchev;	state Exp;
branches;
next	1.13;

1.13
date	2001.07.20.03.10.10;	author pvalchev;	state Exp;
branches;
next	1.12;

1.12
date	2001.07.19.22.03.26;	author pvalchev;	state Exp;
branches;
next	1.11;

1.11
date	2001.07.18.10.59.01;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2001.07.11.16.45.45;	author pvalchev;	state Exp;
branches;
next	1.9;

1.9
date	2001.06.29.01.13.04;	author pvalchev;	state Exp;
branches;
next	1.8;

1.8
date	2001.06.23.20.07.17;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.23.19.05.33;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2001.05.24.05.54.55;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2001.05.12.04.27.05;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2001.05.09.23.26.19;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2001.04.21.15.33.01;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.20.23.48.50;	author reinhard;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.19.18.55.39;	author obecian;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.04.19.18.55.39;	author obecian;	state Exp;
branches;
next	;


desc
@@


1.99
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.98 2016/03/11 20:28:24 naddy Exp $

COMMENT=	cross-platform multimedia library

VERSION=	1.2.15
DISTNAME=	SDL-${VERSION}
PKGNAME=	${DISTNAME:L}
REVISION=	7
CATEGORIES=	devel
MASTER_SITES=	${HOMEPAGE}release/

SHARED_LIBS=	SDL	8.0

HOMEPAGE=	http://www.libsdl.org/

# LGPLv2.1+
PERMIT_PACKAGE_CDROM=   Yes

WANTLIB=	iconv m pthread sndio usbhid

LIB_DEPENDS=	converters/libiconv

AUTOCONF_VERSION= 2.61
BUILD_DEPENDS+=	${MODGNU_AUTOCONF_DEPENDS}

.if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	devel/nasm
.endif

FLAVORS=	aa no_x11
FLAVOR?=

USE_GMAKE=	Yes
SEPARATE_BUILD=	Yes
CONFIGURE_STYLE= gnu
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/test
CONFIGURE_ARGS+= --disable-alsa \
		 --disable-arts \
		 --disable-esd \
		 --disable-oss \
		 --disable-pulseaudio
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

# in case devel/usb is installed, don't pick it up.
CONFIGURE_ENV+= ac_cv_lib_usb_hid_init=no \
		ac_cv_header_usb_h=no

.if ${FLAVOR:Maa}
WANTLIB+=	aa
LIB_DEPENDS+=	graphics/aalib
CONFIGURE_ARGS+= --enable-video-aalib
.endif

.if ${FLAVOR:Mno_x11}
CONFIGURE_ARGS+= --without-x \
		 --disable-video-x11
.else
#
# X11/Xext/Xrender/Xrandr are dlopen'd by SDL
#
WANTLIB+=	X11 Xau Xdmcp Xext Xrandr Xrender pthread-stubs xcb
.endif

NO_TEST=	Yes

pre-configure:
	@@mkdir -p ${WRKSRC}/src/audio/sndio
	@@cp ${FILESDIR}/SDL_sndioaudio.{c,h} ${WRKSRC}/src/audio/sndio
	@@cd ${WRKSRC}; env AUTOCONF_VERSION=${AUTOCONF_VERSION} ./autogen.sh

.include <bsd.port.mk>
@


1.98
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/05/22 11:31:13 ajacoutot Exp $
d19 1
a19 1
WANTLIB=	m pthread sndio usbhid
d21 1
a21 1
MODULES=	converters/libiconv
@


1.97
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2013/12/24 20:21:42 brad Exp $
d37 1
a37 2
CONFIGURE_ARGS+= ${CONFIGURE_SHARED} \
		 --disable-alsa \
@


1.96
log
@Some improvements from upstream..

- Use fast path for RGB 565 -> 32-bit XRGB 8888
- Use _NET_WM_ICON if possible for X11's SDL_WM_SetIcon() implementation

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2013/12/19 09:24:18 ratchov Exp $
d8 1
a8 1
REVISION=	6
@


1.95
log
@- use SIO_DEVANY instead of NULL
- simplify SNDIO_WaitAudio (do as others backends do)
- remove the rate negotiation, which predates sndiod

these tweaks that don't change the bahavior.

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2013/12/15 01:57:55 brad Exp $
d8 1
a8 1
REVISION=	5
@


1.94
log
@- Rename the sndio backend files to match what was submitted upstream
  and sync in the autoconf bits.
- Sync WANTLIB.
- Merge in PFRAG.shared.

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2013/08/07 15:37:10 naddy Exp $
d8 1
a8 1
REVISION=	4
@


1.93
log
@kill direct and indirect references to GCC2_ARCHS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/03/21 08:45:16 ajacoutot Exp $
d8 1
a8 1
REVISION=	3
d19 1
a19 1
WANTLIB=	m sndio usbhid
d23 3
d44 1
a44 2
		LDFLAGS="-L${LOCALBASE}/lib" \
		WITH_SNDIO="Yes"
d69 3
a71 2
	@@mkdir -p ${WRKSRC}/src/audio/libsndio
	@@cp ${FILESDIR}/SDL_libsndioaudio.{c,h} ${WRKSRC}/src/audio/libsndio
@


1.92
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.91 2013/03/11 10:50:30 espie Exp $

# requires ELF visibility support when on a shared arch
ONLY_FOR_ARCHS=	${GCC3_ARCHS} ${GCC4_ARCHS} ${NO_SHARED_ARCHS}
@


1.91
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/02/09 14:49:50 sthen Exp $
a33 1
USE_LIBTOOL=	Yes
@


1.90
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/01/16 01:49:02 brad Exp $
a20 3
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d68 1
a68 1
NO_REGRESS=	Yes
@


1.89
log
@Allow SDL to utilize symbol visibility with GCC 3 so it can
build on shared archs using GCC 3.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/01/12 12:34:21 brad Exp $
d55 1
a55 1
.if ${FLAVOR:L:Maa}
d61 1
a61 1
.if ${FLAVOR:L:Mno_x11}
@


1.88
log
@Add ONLY_FOR_ARCHS and only allow this for gcc4 and no shared archs.

SDL requires symbol visibility support on a shared arch.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2012/12/09 07:29:57 brad Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	${GCC4_ARCHS} ${NO_SHARED_ARCHS}
@


1.87
log
@Jacob Meuser disappeared a year and a half ago so remove him as MAINTAINER.

ok ajacoutot@@
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.86 2012/05/16 14:01:19 edd Exp $
d42 1
@


1.86
log
@Bump the maximum number of uhid devices SDL can address from 4 to 16. It is
quite easy to exhaust the SDL default of 4.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/03/29 13:38:30 sthen Exp $
d8 1
a8 1
REVISION=	2
a14 2

MAINTAINER=	Jacob Meuser <jakemsr@@openbsd.org>
@


1.85
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2012/03/22 13:00:42 dcoppa Exp $
d8 1
a8 1
REVISION=	1
@


1.84
log
@Fix a typo into the gnu configure script resulting in SDL not using
the dynamic loading with the XRender and Xrandr libraries.

From brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/03/04 01:33:22 jsg Exp $
d37 1
a37 1
SEPARATE_BUILD=	concurrent
@


1.83
log
@modify the configure script so it does not dlopen old X11 libs
and include brad's X11 WANTLIB bits.

ok sthen@@ dcoppa@@ earlier version ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2012/03/02 09:10:38 dcoppa Exp $
d8 1
a8 1
REVISION=	0
@


1.82
log
@Update to sdl-1.2.15.

From brad, with tweaks by ajacoutot@@ and me.

Tested by many on ports@@
Ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2012/02/22 08:22:39 dcoppa Exp $
d8 1
d62 5
@


1.81
log
@Roll back support for XRandR and VidMode gamma ramps: SDL was broken
on (at least) macppc because of this.

Patch updated for -current by Brad
OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/02/17 06:59:46 ajacoutot Exp $
d5 1
a5 1
VERSION=	1.2.13
a7 1
REVISION =	17
d9 3
a21 1
WANTLIB=		m sndio usbhid
d23 3
a25 4
MASTER_SITES=	ftp://ftp.fr.freebsd.org/pub/FreeBSD/distfiles/ \
		${HOMEPAGE}release/
MASTER_SITES0=	http://dev.beastie.hu/ \
		http://www.beastie.hu/
d28 1
a28 1
BUILD_DEPENDS+=	devel/yasm
d31 1
a31 1
FLAVORS=	aa caca no_x11 altivec
d34 1
a35 3
USE_GROFF =	Yes
MODULES=	converters/libiconv

d39 6
a44 3
SHARED_LIBS=	SDL	8.0
CONFIGURE_ENV+=	X11BASE="${X11BASE}" \
		CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
a51 8
CONFIGURE_ARGS+= ${CONFIGURE_SHARED} \
		 --disable-arts \
		 --disable-esd \
		 --disable-oss \
		 --disable-pulseaudio \
		 --enable-nasm \
		 --enable-pthread-sem

d53 1
a54 1
WANTLIB +=	aa
a55 12
.else
CONFIGURE_ARGS+= --disable-video-aalib
.endif

.if ${FLAVOR:L:Mcaca}
PATCH_DIST_STRIP= -p1
PATCHFILES=	patch-libsd1.2.7-libcaca0.9.diff:0
LIB_DEPENDS+=	graphics/libcaca
WANTLIB +=	caca
CONFIGURE_ARGS+= --enable-video-caca
.else
SUPDISTFILES+=	patch-libsd1.2.7-libcaca0.9.diff:0
a60 2
.else
WANTLIB+=	X11>=10 Xau Xdmcp Xext Xrandr Xrender pthread-stubs xcb
d66 2
a67 2
	mkdir -p ${WRKSRC}/src/audio/libsndio
	cp ${FILESDIR}/SDL_libsndioaudio.{c,h} ${WRKSRC}/src/audio/libsndio
@


1.80
log
@Re-enable altivec.

from Brad, tested by myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/05/13 07:57:24 jasper Exp $
d8 1
a8 1
REVISION =	16
@


1.79
log
@Add support for XRandR and VidMode gamma ramps.
From upstream bz #971

This fixes the very dark screens with various SDL apps, most notably
openarena.

ok jakemsr@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2010/11/15 19:46:09 espie Exp $
d8 1
a8 1
REVISION =	15
a81 10
.endif

.if ${FLAVOR:L:Maltivec}
ONLY_FOR_ARCHS=	powerpc
CONFIGURE_ARGS+=--enable-altivec
# XXX Segmentation fault
# Blit_RGB888_RGB565Altivec at SDL_blit_N.c:203
BROKEN=		segfault when altivec is enabled
.else
CONFIGURE_ARGS+=--disable-altivec
@


1.78
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/10/24 21:11:03 ajacoutot Exp $
d8 1
a8 1
REVISION =	14
@


1.77
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/10/18 17:48:13 espie Exp $
d7 2
a8 1
PKGNAME=	${DISTNAME:L}p14
d28 1
a28 1
BUILD_DEPENDS+=	:yasm-*:devel/yasm
d60 2
a61 1
LIB_DEPENDS+=	aa::graphics/aalib
d70 2
a71 1
LIB_DEPENDS+=	caca::graphics/libcaca
d81 1
a81 1
WANTLIB+=	X11.>=10 Xau Xdmcp Xext Xrandr Xrender pthread-stubs xcb
@


1.76
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/06/15 15:29:29 espie Exp $
a77 1
USE_X11=	Yes
@


1.75
log
@help shitty includes work. fixes sdlmame
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/01/12 11:19:06 jakemsr Exp $
d34 1
@


1.74
log
@- quit building audio(4) support
- remove unused --disable-ltdl configure arg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2009/08/10 06:31:08 kili Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p13
@


1.73
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2009/01/24 10:56:11 jakemsr Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p12
a52 1
		 --disable-ltdl \
d55 1
a55 2
		 --enable-pthread-sem \
		 --enable-sunaudio
@


1.72
log
@cleanup sndio backend
- rename from "libsndio" to "sndio"
- remove support for "frame tick" synchronization; nothing uses it
- as with many other sndio backends, the audio device block size is the
  buffer-write-size the application wants and there are 2 blocks per
  device buffer
- if SDL will resample, increase the audio block and buffer size by
  the same ratio, so that device latency (or how much *time* the
  application has between write()s to not let the buffer underrun) does
  not change
- allow applications to disable conversions

tested with almost every port that uses this code (exceptions being some
games that require non-free game data) on a device most likely to be
affected by the changes (azalia(4) that only does 44.1 or 48 kHz s16)

unoverriding conversion disabling exposes brokenness in a few other
ports, those will be fixed soon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2009/01/08 20:38:11 ratchov Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p11
d80 1
a80 1
WANTLIB+=	X11.>=10 Xau Xdmcp Xext Xrandr Xrender
@


1.71
log
@bump PKGNAME, forgotten in the last commit
requested by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2008/12/30 22:17:54 sthen Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p10
d43 1
a43 1
		WITH_LIBSNDIO="Yes"
@


1.70
log
@add @@pkgpath marker to ease updates from the removed -esd flavour and
bump version.  pointed out by ajacoutot; ok ajacoutot, jakemsr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2008/12/30 02:15:20 jakemsr Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p9
@


1.69
log
@remove arts and esd backends

from Brad, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2008/12/23 07:45:32 jakemsr Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p8
@


1.68
log
@bufsz -> appbufsz per recent libsndio changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2008/11/02 14:53:51 jakemsr Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p7
d30 1
a30 1
FLAVORS=	esd arts aa caca no_x11 altivec
d50 2
a57 16

.if ${FLAVOR:L:Mesd}
# used via dlopen()
LIB_DEPENDS+=	esd.>=2::audio/esound
CONFIGURE_ARGS+= --enable-esd
.else
CONFIGURE_ARGS+= --disable-esd
.endif

.if ${FLAVOR:L:Marts}
LIB_DEPENDS+=	artsc::x11/kde/arts3
WANTLIB+=	glib-2.0 gmodule-2.0 gthread-2.0 intl pcre stdc++
CONFIGURE_ARGS+= --enable-arts --disable-arts-shared
.else
CONFIGURE_ARGS+= --disable-arts
.endif
@


1.67
log
@add libsndio backend and use it by default.

take maintainership as suggested by current maintainer.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2008/09/26 03:14:42 brad Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p6
@


1.66
log
@- Remove ${LDFLAGS} from LDFLAGS specified with CONFIGURE_ENV since this
  is not set elsewhere.
- Add disable option for PulseAudio so support is not built if it happens
  to be installed.
- Enable the use of YASM to build the i386 assembly blit code.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2008/09/16 20:43:10 naddy Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p5
d12 1
a12 1
MAINTAINER=	Peter Valchev <pvalchev@@openbsd.org>
d19 1
a19 1
WANTLIB=		m usbhid
d42 2
a43 1
		LDFLAGS="-L${LOCALBASE}/lib"
d108 4
@


1.65
log
@Fix alignment error in SDL display output from sparc64 to i386.
From upstream SVN.  ok pvalchev@@, brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2008/03/20 22:00:15 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p4
d14 1
a14 1
# LGPL
d26 4
d42 1
a42 2
		LDFLAGS="${LDFLAGS} -L${LOCALBASE}/lib"

d51 2
a54 10

.include <bsd.own.mk>
USE_GCC3?=No
# XXX gcc 3/nasm issue.
.if (${MACHINE_ARCH} == "i386") && (${CC} != "egcc" && ${USE_GCC3:L} != "yes")
BUILD_DEPENDS+=	nasm::devel/nasm
CONFIGURE_ARGS+= --enable-nasm
.else
CONFIGURE_ARGS+= --disable-nasm
.endif
@


1.64
log
@@@X_LIBS@@ and @@C_CFLAGS@@ for pkg-config too, from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2008/03/20 05:14:11 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p3
@


1.63
log
@add @@X_CFLAGS@@ to `sdl-config --cflags` (-I${X11BASE}/include), much
like -L{X11...} is in --libs
from Peter Hessler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2008/03/19 13:33:29 jakemsr Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p2
@


1.62
log
@- make artsd audio output work by linking with libartsc instead
  of trying to dlopen() it.  also fix a couple bugs in the artsd
  output module: when artsd is "suspended", it only means that
  it it not accessing the soundcard at the moment, not that it
  will not accept data.  fix output latency by setting parameters
  that actually are settable, instead of trying to set read-only(!)
  parameters.

- allow the default audio output method to be chosen with the
  SDL_AUDIO_DRIVER environment variable.  choices are 'arts',
  'esd' and 'audio'.  'audio' selects audio(4) output, and is
  the default if SDL_AUDIO_DRIVER is not set.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2008/01/27 18:43:20 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p1
@


1.61
log
@Fix libGL dynamic loading (let dlopen(3) do its job!)
From Antti Harri <iku@@openbsd.fi>, tested by many
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2008/01/03 17:39:40 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p0
d62 1
d71 2
a72 1
CONFIGURE_ARGS+= --enable-arts
@


1.60
log
@Update to sdl-1.2.13
Bugfix release, notably:
- Fix a fullscreen crash with ffmpeg, etc. due to expecting memory to
be executable by default - use mprotect() - Reported by deanna@@
- Worked around BadAlloc error when using XVideo on the XFree86 Intel
- Integrated Graphics driver
- Fixed use of sdl-config arguments in sdl.m4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2007/12/09 13:40:16 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}
@


1.59
log
@- remove the sun FLAVOR and add sunaudio support by default

note: people running with non-default FLAVOR(s) will need to update their
package manually as "pkg_add -u" won't be able to cope with this change

discussed with and ok steven@@, "theorical ok" from pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2007/11/18 09:39:02 ajacoutot Exp $
d5 1
a5 1
VERSION=	1.2.12
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p2
@


1.58
log
@- fix altivec FLAVOR variable expansion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2007/11/14 07:16:39 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p1
d26 2
a27 2
FLAVORS=	sun esd arts aa caca no_x11 altivec
FLAVOR?=	sun
d48 2
a49 1
		 --enable-pthread-sem
a58 6
.endif

.if ${FLAVOR:L:Msun}
CONFIGURE_ARGS+= --enable-sunaudio
.else
CONFIGURE_ARGS+= --disable-sunaudio
@


1.57
log
@- there's a bug in the SDL altivec code and altivec was enabled by
default, so now we:
* add an altivec FLAVOR
* mark is BROKEN (so that --disable-altivec is used)

Note that this is not a "set and forget" workaround, we will try fixing
this segfault but for now we need a working SDL for powerpc.

discussed with and ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2007/09/22 01:12:38 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p0
d104 1
a104 1
.if ${FLAVOR:L} == "altivec"
@


1.56
log
@update to sdl-1.2.12. long due update, possible now since the macppc
X acceleration bug is now gone (thanks for ajacoutot for endless testing
of this issue), diff from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/08/14 15:51:07 naddy Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}
d26 1
a26 1
FLAVORS=	sun esd arts aa caca no_x11
d102 10
@


1.55
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@a1 1
# Uses pthreads
d5 1
a5 1
VERSION=	1.2.9
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p7
d30 1
a31 2
AUTOCONF_VERSION=	2.59
AUTOMAKE_VERSION=	1.9
d33 1
a33 1
CONFIGURE_STYLE= autoconf
d35 1
a35 1
SHARED_LIBS=	SDL	7.0
d101 1
a101 1
WANTLIB+=	X11.>=10 Xau Xdmcp Xext
@


1.54
log
@various audio fixes; from jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/08/07 14:22:02 pvalchev Exp $
d4 1
a4 1
COMMENT=	"cross-platform multimedia library"
@


1.53
log
@if requested sound settings fail, try 48000 Hz, as some audio devices
can only support that sample rate. reported by deanna, fixed by jakemsr
who asked me to commit it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/07/20 05:23:41 jakemsr Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p6
@


1.52
log
@- use the sun audio interface instead of the OpenBSD interface
- sync patches with update-patches
- bump PKGNAME

the sun interface keeps fewer samples in the play buffer, and with
less fluctuation than the OpenBSD interface.  results in better
audio-video synchronization in e.g. ffplay and gnash

go for it -pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2007/04/08 15:31:01 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p5
@


1.51
log
@fix WANTLIB after switch to xenocara
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2007/03/26 21:22:13 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p4
d63 1
a63 1
CONFIGURE_ARGS+= --enable-openbsdaudio
d65 1
a65 1
CONFIGURE_ARGS+= --disable-openbsdaudio
@


1.50
log
@help people not mix up X11 with xenocara, by making sure they link against
X11 >= 10, and bump those major numbers accordingly, so that bug-reports
will get easier to process.

(artificial `flag day' as discussed with deraadt@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2007/01/21 14:47:58 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p3
d103 1
a103 1
WANTLIB+=	X11.>=10 Xext
@


1.49
log
@- better MASTER_SITES mirror for distfiles hosted on www.libsdl.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2006/12/04 03:52:08 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p2
d37 1
a37 1
SHARED_LIBS=	SDL	6.0
d103 1
a103 1
WANTLIB+=	X11 Xext
@


1.48
log
@use nanosleep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2006/10/19 00:26:33 pvalchev Exp $
d22 2
a23 2
MASTER_SITES=	${HOMEPAGE}release/ \
		http://www.devolution.com/~slouken/SDL/release/
@


1.47
log
@revert to sdl-1.2.9 for now as this causes some breakage with
at least some macppc scenarios; discovered by ajacoutot
since it's only a few hour window of breakage, be careful reverting
things if you updated during that time
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2006/08/01 23:39:08 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p1
@


1.46
log
@update to sdl-1.2.11
sdl-config --libs is now fixed to pass just -lSDL and the needed deps
get pulled implicitly as is proper
feedback/testing by various and ports@@
@
text
@d6 1
a6 1
VERSION=	1.2.11
d8 1
a8 1
PKGNAME=	${DISTNAME:L}
a30 1
MODULES=	converters/libiconv
d32 2
d35 1
a35 1
CONFIGURE_STYLE= gnu
d37 1
a37 1
SHARED_LIBS=	SDL	7.0
d103 1
a103 1
WANTLIB+=	X11 Xext Xrandr Xrender
@


1.45
log
@new libspecs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2006/02/03 06:20:11 aanriot Exp $
d6 1
a6 1
VERSION=	1.2.9
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p1
d31 1
a32 2
AUTOCONF_VERSION=	2.59
AUTOMAKE_VERSION=	1.9
d34 1
a34 1
CONFIGURE_STYLE= autoconf
d36 1
a36 1
SHARED_LIBS=	SDL	6.0
d102 1
a102 1
WANTLIB+=	X11 Xext
@


1.44
log
@- USE_LIBTOOL=Yes and get ride of MODGNU_SHARED_LIBS.
- PKGNAME bump.

ok steven@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2006/01/13 23:40:23 espie Exp $
d69 1
a69 1
LIB_DEPENDS+=	esd.2::audio/esound
@


1.43
log
@bump C++ shared libs after typedef changes.
note that all SDL libs link with supc++ (potentially, and thus are affected)
-> don't take a chance, bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2005/12/24 17:40:00 pvalchev Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p0
d30 2
a37 1
MODGNU_SHARED_LIBS=	SDL	'-no-undefined'
@


1.42
log
@SHARED_LIBS; ok espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2005/09/17 00:38:15 pvalchev Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}
d35 1
a35 1
SHARED_LIBS=	SDL	5.0
@


1.41
log
@Update to sdl-1.2.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2005/08/10 00:25:16 jolan Exp $
d35 2
a105 2

MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 5:0:0"
@


1.40
log
@fix opengl stuff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2005/05/11 17:26:15 pvalchev Exp $
d6 1
a6 1
VERSION=	1.2.8
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p0
d31 1
d105 1
a105 1
MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 4:0:0"
@


1.39
log
@update to SDL-1.2.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/02/11 18:52:04 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}
@


1.38
log
@fix WANTLIB for no_x11 FLAVOR

fixes ports/4092
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2005/01/29 22:56:34 robert Exp $
d6 1
a6 1
VERSION=	1.2.7
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p1
d104 1
a104 1
MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 3:0:0"
@


1.37
log
@fix libcaca support (distribution patch); bump PKGNAME
reported by Antoine Jacoutot <ajacoutot@@lphp.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/01/05 21:52:50 naddy Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p0
d20 1
a20 1
WANTLIB=		X11 Xext m usbhid
d99 1
@


1.36
log
@proper SUPDISTFILES, restore checksums
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2004/11/24 00:11:03 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}
d87 1
a87 1
PATCHFILES=	patch-libsd1.2.6-libcaca0.9.diff:0
d91 1
a91 1
SUPDISTFILES+=	patch-libsd1.2.6-libcaca0.9.diff:0
@


1.35
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2004/11/18 17:48:50 espie Exp $
d90 2
@


1.34
log
@make sure we don't pick the wrong usb.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2004/10/25 02:34:21 pvalchev Exp $
d20 1
@


1.33
log
@Update to SDL-1.2.7; based on work by jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/04/23 12:09:18 robert Exp $
d36 6
@


1.32
log
@Add caca FLAVOR to have support for libcaca (color ascii art library)
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/04/18 17:21:13 pvalchev Exp $
d6 1
a6 1
VERSION=	1.2.6
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p0
d29 1
d45 1
a45 1
BUILD_DEPENDS=	nasm::devel/nasm
d94 1
a94 1
MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 2:0:0"
@


1.31
log
@remove post-patch kludges now done in bsd.port.mk; reminded by naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2003/12/28 22:26:18 espie Exp $
d23 2
d26 1
a26 1
FLAVORS=	sun esd arts aa no_x11
d75 7
@


1.30
log
@gcc3 doesn't like multi-line literals, and pval already knew it's
unhappy with nasm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/12/07 19:45:42 espie Exp $
a84 4

post-patch:
	@@touch ${WRKSRC}/aclocal.m4 ${WRKSRC}/configure
	@@find ${WRKSRC} -name Makefile.in -exec touch {} \;
@


1.29
log
@do not pick up libtool on the way.
okay pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/09/29 05:41:37 pvalchev Exp $
d38 2
d41 1
a41 1
.if (${MACHINE_ARCH} == "i386") && (${CC} != "egcc")
@


1.28
log
@Update to SDL-1.2.6; mostly from espie, much testing by jolan, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/11/30 11:17:26 wcobb Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}
d35 1
@


1.27
log
@Update to SDL-1.2.5.
- sdl-config no longer provides -I${LOCALBASE}/include.
- add an `aa' flavor (ASCII art display).
- GNU make is not needed.
- don't use nasm with gcc 3.
- don't install a SEGV handler.
- prevent the joystick driver from picking up usb keyboards.
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/09/15 19:53:21 brad Exp $
d6 1
a6 1
VERSION=	1.2.5
d11 1
a11 1
HOMEPAGE=	http://www.libsdl.org
d15 1
d21 1
a21 1
MASTER_SITES=	${HOMEPAGE}/release/ \
d81 1
a81 1
MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 1:0:0"
@


1.26
log
@having CONFIGURE_STYLE set to autoconf implies gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2002/09/07 04:56:28 pvalchev Exp $
d6 1
a6 1
VERSION=	1.2.4
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p2
d23 1
a23 1
FLAVORS=	sun esd arts no_x11
a25 2
USE_GMAKE=	Yes

d29 3
a31 1
CONFIGURE_ENV+=	X11BASE="${X11BASE}"
d36 2
a37 1
.if ${MACHINE_ARCH} == "i386"
d62 7
@


1.25
log
@use kde3 for arts flavor; bunch of people
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/05/06 04:26:08 pvalchev Exp $
d29 1
a29 1
CONFIGURE_STYLE= gnu autoconf
@


1.24
log
@Add -L${X11BASE}/lib to sdl-config in when X11 is used, as SDL depends on
libraries there and needs to know the path.  this means sdl-config was
broken for a few days but none of the ports depended on this.
Also bump package revision to p1 for the last couple of fixes to the port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/04/21 00:20:08 pvalchev Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p1
a9 1
NEED_VERSION=	1.525
d57 1
a57 1
LIB_DEPENDS+=	artsc::x11/kde/libs2
@


1.23
log
@Update to SDL-1.2.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/02/25 22:33:59 pvalchev Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME:L}
d10 1
a10 1
NEED_VERSION=	1.524
@


1.22
log
@- use nasm assembly blitters on i386 by default
- enable usage of pthreads semaphores now that our libc_r has support
from vedge@@csoft.org, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/02/19 20:53:50 pvalchev Exp $
d6 1
a6 1
VERSION=	1.2.3
d10 1
a10 1
NEED_VERSION=	1.504
d73 1
a73 1
MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 0:4:0"
@


1.21
log
@tweak CONFIGURE_STYLE for previous update (cvs missed a file)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/02/19 06:42:03 pvalchev Exp $
d10 1
a10 1
NEED_VERSION=	1.502
a33 1
		 --disable-pthread-sem \
d35 8
a42 1
		 --disable-nasm
@


1.20
log
@no regress
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/12/28 23:42:26 pvalchev Exp $
d30 1
a30 1
CONFIGURE_STYLE= gnu
@


1.19
log
@Update to SDL-1.2.3.  thanks mark for the feedback
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/09/28 06:02:13 pvalchev Exp $
d64 2
@


1.18
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/08/30 02:24:52 brad Exp $
d6 1
a6 1
VERSION=	1.2.2
d10 1
a10 1
NEED_VERSION=	1.427
d65 1
a65 1
MAKE_FLAGS=	libSDL_la_LDFLAGS="-version-info 0:3:0"
@


1.17
log
@more ports which use or can use pthreads
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/08/14 22:42:03 pvalchev Exp $
d31 1
@


1.16
log
@Pass libSDL_la_LDFLAGS containing -version-info for libtool via MAKE_FLAGS
instead of patching configure unnecessarily.
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.15 2001/07/29 19:46:17 pvalchev Exp $
@


1.15
log
@cheat on automake/autoconf so that they do not get ran automagically
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/07/25 07:58:32 pvalchev Exp $
d62 2
@


1.14
log
@Update to SDL-1.2.2
Includes OpenBSD fixes and cleanups.
Other changes that concern us:
* Now gets correct keyboard state when starting up on X11
* Improved X11 fullscreen support, works better with KDE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2001/07/20 03:10:10 pvalchev Exp $
d65 1
@


1.13
log
@Any flavor permutation should work now.  Remove checks that narrowed
down possible choices.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/07/19 22:03:26 pvalchev Exp $
d5 1
a5 1
VERSION=	1.2.1
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p1
d9 1
a9 1
NEED_VERSION=	1.422
@


1.12
log
@Drop oss flavor.
Note: If you use the esd flavor you'll still be using ossaudio, due to
esound itself linking with it.  So, we can't completely get rid of it yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/07/18 10:59:01 naddy Exp $
a25 6
.if empty(FLAVOR:L:Msun) && empty(FLAVOR:L:Mesd)
ERRORS+=    "Fatal: You must choose a flavor from: sun, esd" \
	    "   to select the appropriate sound system you want to use." \
	    "   Additionally, you can append your other choices afterwards."
.endif

a60 1
LDFLAGS=	"-Wl,R${X11BASE}/lib -L${X11BASE}/lib"
@


1.11
log
@- Make use of new bsd.port.mk feature and replace error reporting through
  .BEGIN with ERRORS.
- Sync NEED_VERSION accordingly.
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/07/11 16:45:45 pvalchev Exp $
d23 1
a23 1
FLAVORS=	sun oss esd arts no_x11
d26 2
a27 2
.if empty(FLAVOR:L:Msun) && empty(FLAVOR:L:Moss) && empty(FLAVOR:L:Mesd)
ERRORS+=    "Fatal: You must choose a flavor from: sun, oss, esd" \
d39 1
a52 6
.endif

.if ${FLAVOR:L:Moss}
CONFIGURE_ARGS+= --enable-oss
.else
CONFIGURE_ARGS+= --disable-oss
@


1.10
log
@Enable dummy joystick driver building.  This offers empty joystick
function stubs.
Bump package version revision and crank library minor number.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/06/29 01:13:04 pvalchev Exp $
d9 1
a9 1
NEED_VERSION=	1.417
d27 3
a29 5
.BEGIN:
	@@echo "You must choose a flavor from: sun, oss, esd"
	@@echo "to select the appropriate sound system you want to use."
	@@echo "Additionally, you can append your other choices afterwards."
	@@exit 1
@


1.9
log
@Make OpenGL be default and thus drop GL flavor.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/06/23 20:07:17 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:L}
a39 1
		 --disable-joystick \
@


1.8
log
@Disallow flavourless build if someone ever tries to do that (FLAVOR= make).
Force people to choose from sun, oss, esd as their sound system, print
error message if that is not done.
Suggested by Heikki Korpela <heko@@saitti.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/06/23 19:05:33 pvalchev Exp $
d23 1
a23 1
FLAVORS=	sun oss esd gl arts no_x11
a60 6
.endif

.if ${FLAVOR:L:Mgl}
CONFIGURE_ARGS+= --enable-video-opengl
.else
CONFIGURE_ARGS+= --disable-video-opengl
@


1.7
log
@Upgrade to SDL-1.2.1
Various improvements, including OpenBSD native audio.

* Fix audio device path.  This has caused audio not to work without the
esd flavor before, many people (including me) had link to /dev/dsp because
of linux emulation programs and haven't noticed the problem.
* Fix OSS audio.
* Sync libtool patches
* Properly include @@SYSTEM_LIBS@@ in sdl-config to ensure proper linking
of SDL applications.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/05/24 05:54:55 pvalchev Exp $
d25 8
@


1.6
log
@- Implement a native audio driver by <vedge2@@vedge.com.ar> as a "sun"
flavor, being the default one (fetching distfile from an external site).
- Isolate esd as a separate flavor from oss -- a combination with either
"sun" or "oss" is possible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/05/12 04:27:05 pvalchev Exp $
d5 2
a6 2
VER=		1.2.0
DISTNAME=	SDL-${VER}
d9 1
a9 1
NEED_VERSION=	1.378
a21 4
MASTER_SITES0=	http://vedge.com.ar/hack/ \
		http://hobbiton.org/~pvalchev/sdl/

DISTFILES=	${DISTNAME}.tar.gz SDL_obsd_audio-1.2.0.tar.gz:0
d73 1
a77 1
	@@ln -sf ${WRKSRC}/../src/audio/obsd ${WRKSRC}/src/audio/obsd
@


1.5
log
@Pass and handle X11BASE correctly throughout configure and put it
sdl-config.
Noticed by: vedge2@@vedge.com.ar
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/05/09 23:26:19 pvalchev Exp $
d22 2
d25 4
a28 2
FLAVORS=	oss gl arts no_x11
FLAVOR?=	oss
d40 13
d54 1
a54 3
LIB_DEPENDS+=	esd.2::audio/esound
CONFIGURE_ARGS+= --enable-esd \
		 --enable-oss
d56 1
a56 2
CONFIGURE_ARGS+= --disable-esd \
		 --disable-oss
d81 1
@


1.4
log
@Switch my email over @@openbsd.org.
Insert all COMMENT lines into double quotes for consistency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/04/21 15:33:01 brad Exp $
d30 1
@


1.3
log
@move a few --disable-foo from main group of CONFIGURE_ARGS options and put
them after each individual check for a FLAVOR instead.
--
Ok'd by: maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/04/20 23:48:50 reinhard Exp $
d3 1
a3 1
COMMENT=	'cross-platform multimedia library'
d13 1
a13 1
MAINTAINER=	Peter Valchev <pvalchev@@home.com>
@


1.2
log
@remove obsolete Mesa dependency

from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/04/19 18:55:39 obecian Exp $
d33 1
a33 5
		 --disable-nasm \
		 --disable-video-opengl \
		 --disable-arts \
		 --disable-esd \
		 --disable-oss
d39 3
d46 2
d53 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
PKGNAME=	sdl-${VER}
d40 1
a40 1
LIB_DEPENDS=	esd.2::audio/esound
a45 1
LIB_DEPENDS+=	MesaGL.3::graphics/Mesa
@


1.1.1.1
log
@sdl-1.2.0 - Simple DirectMedia Layer
@
text
@@
