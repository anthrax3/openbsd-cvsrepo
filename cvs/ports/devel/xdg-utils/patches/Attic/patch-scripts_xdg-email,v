head	1.6;
access;
symbols
	OPENBSD_5_6:1.5.0.10
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.8
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.6
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.4
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.4
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.10
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.8
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.4
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	ajacoutot_20081030:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2014.08.28.10.26.21;	author ajacoutot;	state dead;
branches;
next	1.5;
commitid	Frtw9s8VeEV9DBnq;

1.5
date	2012.04.09.09.39.15;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.05.19.18.35.43;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.26.17.49.39;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.01.19.30.07;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.30.14.28.36;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.10.30.14.28.36;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to xdg-utils-1.1.0rc2 + fixes from upstream.
Committing now since these utilities tend to break after an update in very
subtle ways...
@
text
@$OpenBSD: patch-scripts_xdg-email,v 1.5 2012/04/09 09:39:15 ajacoutot Exp $
--- scripts/xdg-email.orig	Sat Jan  1 11:03:14 2011
+++ scripts/xdg-email	Mon Apr  9 10:57:05 2012
@@@@ -562,7 +562,7 @@@@ result=$(echo "$1" | $utf8 | awk '
 
 options=
 mailto=
-utf8="iconv -t utf8"
+utf8="iconv -t UTF-8"
 while [ $# -gt 0 ] ; do
     parm="$1"
     shift
@@@@ -699,7 +699,7 @@@@ fi
 if [ x"$BROWSER" = x"" ]; then
     BROWSER=links2:links:lynx:w3m
     if [ -n "$DISPLAY" ]; then
-        BROWSER=firefox:mozilla:epiphany:konqueror:chromium-browser:google-chrome:$BROWSER
+        BROWSER=firefox:chrome:seamonkey:mozilla:epiphany:midori:konqueror:opera:firefox35:firefox36:$BROWSER
     fi
 fi
 
@


1.5
log
@Update to xdg-utils-1.1.0rc1.
The 1.0 serie hasn't seen an update for 5 years and this release
contains lots of fixes for new version desktops.

While here, remove the hook stuff; that is what aliases or ~/bin are for.
@
text
@d1 1
a1 1
$OpenBSD: patch-scripts_xdg-email,v 1.4 2011/05/19 18:35:43 ajacoutot Exp $
@


1.4
log
@Merge a part from upstream commit that prefers gvfs-open over gnome-open so
that xdg-open works in both gnome2 and gnome3.
@
text
@d1 4
a4 27
$OpenBSD: patch-scripts_xdg-email,v 1.3 2008/11/26 17:49:39 ajacoutot Exp $

Merge part of:
From 79fe2261b0025b36515d17d3c22c162bf1c7efb3 Mon Sep 17 00:00:00 2001
From: Rex Dieter <rdieter@@math.unl.edu>
Date: Fri, 16 Oct 2009 17:10:55 +0000
Subject: * prefer gvfs-open over gnome-open

--- scripts/xdg-email.orig	Sun Jun 24 21:58:04 2007
+++ scripts/xdg-email	Thu May 19 20:23:55 2011
@@@@ -406,8 +406,13 @@@@ open_kde()
 
 open_gnome()
 {
-    DEBUG 1 "Running gnome-open \"$1\""
-    gnome-open "$1"
+    if gvfs-open --help 2>/dev/null 1>&2; then
+        DEBUG 1 "Running gvfs-open \"$1\"" 
+        gvfs-open "$1"
+    else
+        DEBUG 1 "Running gnome-open \"$1\""
+        gnome-open "$1"
+    fi
 
     if [ $? -eq 0 ]; then
         exit_success
@@@@ -480,7 +485,7 @@@@ result=$(echo "$1" | $utf8 | awk '
d13 6
a18 1
@@@@ -607,12 +612,21 @@@@ if which xdg-email-hook.sh > /dev/null 2> /dev/null; t
a21 19
+if which xdg-email-hook > /dev/null 2> /dev/null; then
+    xdg-email-hook "${mailto}"
+    if [ $? -eq 0 ]; then
+        exit_success
+    else
+        exit_failure_operation_failed
+    fi
+fi
+
 detectDE
 
 if [ x"$DE" = x"" ]; then
     # if BROWSER variable is not set, check some well known browsers instead
     if [ x"$BROWSER" = x"" ]; then
-        BROWSER=firefox:mozilla:netscape
+        BROWSER=firefox:seamonkey:epiphany:opera:mozilla:netscape
     fi
     DE=generic
 fi
@


1.3
log
@- enhance default browsers list
@
text
@d1 8
a8 1
$OpenBSD: patch-scripts_xdg-email,v 1.2 2008/11/01 19:30:07 ajacoutot Exp $
d10 18
a27 2
+++ scripts/xdg-email	Wed Nov 26 18:45:09 2008
@@@@ -480,7 +480,7 @@@@ result=$(echo "$1" | $utf8 | awk '
d36 1
a36 1
@@@@ -607,12 +607,21 @@@@ if which xdg-email-hook.sh > /dev/null 2> /dev/null; t
@


1.2
log
@- merge xdg enhancements from productivity/thinkingrock
(support custom user hooks and create "open" and "email" links)

suggested by, feedback from and ok sturm@@
@
text
@d1 1
a1 1
$OpenBSD: patch-scripts_xdg-email,v 1.1.1.1 2008/10/30 14:28:36 ajacoutot Exp $
d3 1
a3 1
+++ scripts/xdg-email	Thu Oct 30 19:37:30 2008
d13 3
a15 1
@@@@ -600,6 +600,15 @@@@ mailto=`echo "${mailto}"| sed 's/[?&]$//'`
d17 2
a18 2
 if which xdg-email-hook.sh > /dev/null 2> /dev/null; then
     xdg-email-hook.sh "${mailto}"
d26 10
a35 5
+if which xdg-email-hook > /dev/null 2> /dev/null; then
+    xdg-email-hook "${mailto}"
     if [ $? -eq 0 ]; then
         exit_success
     else
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- scripts/xdg-email.orig	Thu Oct 30 14:47:03 2008
+++ scripts/xdg-email	Thu Oct 30 14:47:41 2008
d13 16
@


1.1.1.1
log
@Import xdg-utils-1.0.2

Xdg-utils is a set of command line tools that assist applications with a
variety of desktop integration tasks.  About half of the tools focus on
tasks commonly required during the installation of a desktop application
and the other half focuses on integration with the desktop environment
while the application is running.

based on an unfinished port from landry@@
ok landry@@
@
text
@@
