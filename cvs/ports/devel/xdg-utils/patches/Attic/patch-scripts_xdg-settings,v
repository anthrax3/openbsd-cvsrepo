head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.08.28.10.26.21;	author ajacoutot;	state dead;
branches;
next	1.1;
commitid	Frtw9s8VeEV9DBnq;

1.1
date	2012.04.09.09.39.15;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to xdg-utils-1.1.0rc2 + fixes from upstream.
Committing now since these utilities tend to break after an update in very
subtle ways...
@
text
@$OpenBSD: patch-scripts_xdg-settings,v 1.1 2012/04/09 09:39:15 ajacoutot Exp $
--- scripts/xdg-settings.orig	Mon Apr  9 11:13:21 2012
+++ scripts/xdg-settings	Mon Apr  9 11:14:22 2012
@@@@ -364,7 +364,7 @@@@ first_word()
 
 binary_to_desktop_file()
 {
-    search="${XDG_DATA_HOME:-$HOME/.local/share}:${XDG_DATA_DIRS:-/usr/local/share:/usr/share}"
+    search="${XDG_DATA_HOME:-$HOME/.local/share}:${XDG_DATA_DIRS:-${LOCALBASE}/share:/usr/share}"
     binary="`which "$1"`"
     binary="`readlink -f "$binary"`"
     base="`basename "$binary"`"
@@@@ -392,7 +392,7 @@@@ binary_to_desktop_file()
 
 desktop_file_to_binary()
 {
-    search="${XDG_DATA_HOME:-$HOME/.local/share}:${XDG_DATA_DIRS:-/usr/local/share:/usr/share}"
+    search="${XDG_DATA_HOME:-$HOME/.local/share}:${XDG_DATA_DIRS:-${LOCALBASE}/share:/usr/share}"
     desktop="`basename "$1"`"
     IFS=:
     for dir in $search; do
@@@@ -655,7 +655,7 @@@@ set_browser_gnome()
 
 get_browser_xfce()
 {
-    search="${XDG_CONFIG_HOME:-$HOME/.config}:${XDG_CONFIG_DIRS:-/etc/xdg}"
+    search="${XDG_CONFIG_HOME:-$HOME/.config}:${XDG_CONFIG_DIRS:-${SYSCONFDIR}/xdg}"
     IFS=:
     for dir in $search; do
         unset IFS
@@@@ -688,7 +688,7 @@@@ check_xfce_desktop_file()
     # "Type" must be "X-XFCE-Helper"
     # "X-XFCE-Category" must be "WebBrowser" (for web browsers, anyway)
     # "X-XFCE-Commands" and "X-XFCE-CommandsWithParameter" must be set
-    search="${XDG_DATA_HOME:-$HOME/.local/share}:${XDG_DATA_DIRS:-/usr/local/share:/usr/share}"
+    search="${XDG_DATA_HOME:-$HOME/.local/share}:${XDG_DATA_DIRS:-${LOCALBASE}/share:/usr/share}"
     IFS=:
     for dir in $search; do
         unset IFS
@


1.1
log
@Update to xdg-utils-1.1.0rc1.
The 1.0 serie hasn't seen an update for 5 years and this release
contains lots of fixes for new version desktops.

While here, remove the hook stuff; that is what aliases or ~/bin are for.
@
text
@d1 1
a1 1
$OpenBSD$
@

