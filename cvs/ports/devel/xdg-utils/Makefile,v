head	1.28;
access;
symbols
	OPENBSD_6_1:1.28.0.6
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.28.0.4
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.27.0.6
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.27.0.2
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.24.0.2
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.22.0.2
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.18.0.2
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.4
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.9.0.2
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	ajacoutot_20081030:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2015.11.01.22.23.03;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	m7fmE1ZJrLPRhB0t;

1.27
date	2015.01.04.15.36.22;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	uIGTkjZHWJJFeiuF;

1.26
date	2014.10.30.12.56.05;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	QuHHw3cpPV6NC3HE;

1.25
date	2014.08.28.10.26.20;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	Frtw9s8VeEV9DBnq;

1.24
date	2014.06.02.09.25.33;	author stsp;	state Exp;
branches;
next	1.23;
commitid	azjY0HOnrs0Ua7Qd;

1.23
date	2013.03.11.10.50.32;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2013.01.13.19.32.12;	author landry;	state Exp;
branches;
next	1.21;

1.21
date	2013.01.04.11.42.18;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.10.18.13.17.36;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2012.08.04.15.09.35;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2012.04.09.09.39.15;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2012.04.06.07.53.38;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2012.04.04.07.54.55;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.02.13.41.38;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.05.19.18.35.43;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.03.28.07.12.05;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.06.08.03.05;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.18.17.48.13;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.28.12.41.26;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.08.15.23.14.15;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.07.12.20.28.41;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.25.08.11.13;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.02.09.13.32.10;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.28.09.53.02;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.02.17.05.27;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.26.17.49.39;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.01.19.30.07;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.30.14.28.36;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.10.30.14.28.36;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Update to xdg-utils-1.1.1.
@
text
@# $OpenBSD: Makefile,v 1.27 2015/01/04 15:36:22 ajacoutot Exp $

# Does _not_ depend on desktop-file-utils, hicolor-icon-theme,
# gtk-update-icon-cache, shared-mime-info... on purpose as it should
# only use whatever is available on the system at runtime.

COMMENT=		utilities to assist desktop integration tasks

DISTNAME=		xdg-utils-1.1.1

CATEGORIES=		devel

HOMEPAGE=		https://wiki.freedesktop.org/www/Software/xdg-utils/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# MIT
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		http://portland.freedesktop.org/download/

PKG_ARCH=		*
USE_GMAKE=		Yes

BUILD_DEPENDS=		textproc/xmlto

CONFIGURE_STYLE=	gnu

pre-configure:
	sed -i -e 's,/usr/local/share,${LOCALBASE}/share,g;' \
		-e 's,/etc/xdg,${SYSCONFDIR}/xdg,g' \
		${WRKSRC}/scripts/xdg-*.in

post-install:
	# Official NetBeans does not know about OpenBSD, thus at least
	# some java apps use 'email' and 'open' as fallbacks.
	ln -s xdg-email ${PREFIX}/bin/email
	ln -s xdg-open ${PREFIX}/bin/open

do-test:
	cd ${WRKSRC}/autotests && ${MAKE_PROGRAM}

.include <bsd.port.mk>
@


1.27
log
@xdg-utils-1.1.0-rc3 is out, so use that for DISTFILE and drop all the
backport patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/10/30 12:56:05 ajacoutot Exp $
d7 1
a7 1
COMMENT=	utilities to assist desktop integration tasks
d9 1
a9 3
DISTNAME=	xdg-utils-1.1.0-rc3
PKGNAME=	xdg-utils-1.1.0rc3
REVISION=	0
d11 1
a11 1
CATEGORIES=	devel
d13 1
a13 1
HOMEPAGE=	http://portland.freedesktop.org/
d15 1
a15 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d20 1
a20 1
MASTER_SITES=	http://people.freedesktop.org/~rdieter/xdg-utils/
d22 2
a23 3
PKG_ARCH=	*
USE_GMAKE=	Yes
NO_TEST=	Yes
d25 1
a25 1
BUILD_DEPENDS=	textproc/xmlto
d27 1
a27 1
CONFIGURE_STYLE=gnu
d30 1
a30 1
	perl -pi -e 's,/usr/local/share,${LOCALBASE}/share,g;' \
d39 3
@


1.26
log
@Update to xdg-utils-1.1.0rc3.

prodded by a diff from dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/08/28 10:26:20 ajacoutot Exp $
d9 1
a9 1
DISTNAME=	xdg-utils-1.1.0-rc2
d11 1
a11 23

###
DIST_SUBDIR=	xdg-utils
MASTER_SITES0=	http://cgit.freedesktop.org/xdg/xdg-utils/patch/?id=
PATCH_DIST_STRIP=-p1
IDS=		a983a14293129ea94b634579a46dc69835e88e15 \
		cba39e7a00abe27b3bff49e2d455bb30ad33dde6 \
		495fa68306f6f5b0c0bb312e92f0f2a0e35fa567 \
		50254545a0d2c181bf9bce4c7723044ee7186cb5 \
		3eaf93ab3303e14813885b6b743b48a1c3b5a6ab \
		316b9adc05c6d871360afb1195939c5fc975ccff \
		ba265f969b9061d221915c2528122c44a85ad7c2 \
		69adcfeb4679f75eb24f357f304715d3c014273b \
		5913207e625a92b73cd9489aea4b7b10bf3eb855 \
		34e033845ea6997bc4fdafd9bdd4856bfa5d0d36 \
		7cd846d62e17f36be2f7d29e56188ddf6a6d72cb \
		781023ef997bac433dbc258bd5cfdc1366f2ffa4 \
		48545132620f85d3ba133010116884a63f26f3a3
.for i in ${IDS}
PATCHFILES +=		$i:0
.endfor
BUILD_DEPENDS +=	textproc/xmlto
###
d28 2
a30 1
#CONFIGURE_ENV=	ac_cv_path_XMLTO=""
@


1.25
log
@Update to xdg-utils-1.1.0rc2 + fixes from upstream.
Committing now since these utilities tend to break after an update in very
subtle ways...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/06/02 09:25:33 stsp Exp $
d10 1
a10 1
PKGNAME=	xdg-utils-1.1.0rc2
d12 1
d26 3
a28 1
		7cd846d62e17f36be2f7d29e56188ddf6a6d72cb
d33 1
@


1.24
log
@Fix xdg-open for KDE4 such that devices mounted by sysutils/toad open
up in the dolphin file manager rather than in the default web browser.
ok ajacoutot, tested by Fabian Raetz
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/03/11 10:50:32 espie Exp $
d9 21
a29 3
DISTNAME=	xdg-utils-1.1.0-rc1
PKGNAME=	xdg-utils-1.1.0rc1
REVISION=	4
d33 1
a33 1
HOMEPAGE=	http://portland.freedesktop.org/wiki/
d40 1
a40 1
MASTER_SITES=	http://portland.freedesktop.org/download/
d42 2
a43 1
NO_BUILD=	Yes
d47 1
a47 1
CONFIGURE_ENV=	ac_cv_path_XMLTO=""
d50 3
a52 6
	${SUBST_CMD} \
		${WRKSRC}/scripts/xdg-desktop-menu \
		${WRKSRC}/scripts/xdg-icon-resource \
		${WRKSRC}/scripts/xdg-mime \
		${WRKSRC}/scripts/xdg-open \
		${WRKSRC}/scripts/xdg-settings
@


1.23
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/01/13 19:32:12 landry Exp $
d11 1
a11 1
REVISION=	3
@


1.22
log
@Fix xdg-screensaver: we don't have mv -T.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/01/04 11:42:18 ajacoutot Exp $
a20 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d25 1
a25 1
NO_REGRESS=	Yes
@


1.21
log
@Fix sed(1) usage to open the proper application according to its mime
type.

breakage reported by edd@@, fixed by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/10/18 13:17:36 ajacoutot Exp $
d11 1
a11 1
REVISION=	2
@


1.20
log
@Extend README: give an example of xdg-mime(1) usage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/08/04 15:09:35 ajacoutot Exp $
d11 1
a11 1
REVISION=	1
@


1.19
log
@Document the BROWSER variable in README; this was source of confusion for
pirofti@@ during g2k12 :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/04/09 09:39:15 ajacoutot Exp $
d11 1
a11 1
REVISION=	0
@


1.18
log
@Update to xdg-utils-1.1.0rc1.
The 1.0 serie hasn't seen an update for 5 years and this release
contains lots of fixes for new version desktops.

While here, remove the hook stuff; that is what aliases or ~/bin are for.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/04/06 07:53:38 ajacoutot Exp $
d11 1
@


1.17
log
@Clarify README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/04/04 07:54:55 ajacoutot Exp $
d9 2
a10 3
DISTNAME=	xdg-utils-1.0.2
EXTRACT_SUFX=	.tgz
REVISION=	13
d29 2
a30 4
USE_GROFF =	Yes

CONFIGURE_STYLE= gnu
CONFIGURE_ENV=	XMLTO=${LOCALBASE}/bin/xmlto
d34 5
a38 1
		${WRKSRC}/scripts/{xdg-desktop-menu,xdg-icon-resource,xdg-mime}
a44 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/xdg-utils
	${INSTALL_SCRIPT} ${FILESDIR}/x* ${PREFIX}/share/examples/xdg-utils
@


1.16
log
@Add comment about having no dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/06/02 13:41:38 ajacoutot Exp $
d11 1
a13 2

REVISION=	12
@


1.15
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/05/19 18:35:43 ajacoutot Exp $
d3 3
a5 2
# XXX Are we affected by CVE-2008-0386? Our sed(1) does not behave as
# the GNU version.
d10 2
a27 1
EXTRACT_SUFX=	.tgz
d30 1
@


1.14
log
@Merge a part from upstream commit that prefers gvfs-open over gnome-open so
that xdg-open works in both gnome2 and gnome3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/03/28 07:12:05 ajacoutot Exp $
d11 1
a11 1
REVISION=	11
@


1.13
log
@Extend the BROWSER list.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/06 08:03:05 ajacoutot Exp $
d11 1
a11 1
REVISION=	10
@


1.12
log
@Move to pkg-readmes and REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/18 17:48:13 espie Exp $
d11 1
a11 1
REVISION=	9
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/05/28 12:41:26 ajacoutot Exp $
a8 1
PKGNAME=	${DISTNAME}p8
d11 2
a41 5
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xdg-utils
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/doc/xdg-utils/README.OpenBSD
	chown ${SHAREOWN}:${SHAREGRP} \
		${PREFIX}/share/doc/xdg-utils/README.OpenBSD
@


1.10
log
@We don't provide a share/applications/defaults.list file so use
mimeinfo.cache instead (and this file actually contains mimes we do
suport).
Fix typo in xdg-open.

Fixes xdg-open and xdg-mime issues dcoppa@@ reported.
ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/08/15 23:14:15 ajacoutot Exp $
d27 1
@


1.9
log
@Fix xdg-open when the URL passed contains a '#' (Freedesktop Bug 23319).

from FreeBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/07/12 20:28:41 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p7
@


1.8
log
@- take maintainership

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/04/25 08:11:13 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p6
@


1.7
log
@- remove workaround now that we have file(1) -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/02/09 13:32:10 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p5
d13 2
@


1.6
log
@- remove bashism
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/01/28 09:53:02 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p4
@


1.5
log
@- the file(1) call needs to be changed as the '-i' switch does not exist
under OpenBSD... because chl@@ is a slacker ;)
This will not give completely the intended output, but at least it will
be closer than getting file(1) usage().
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.4 2009/01/02 17:05:27 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p3
@


1.4
log
@- add missing @@conflict marker with old thinkingrock

from Mikolaj Kucharski, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/11/26 17:49:39 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.3
log
@- enhance default browsers list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/11/01 19:30:07 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.2
log
@- merge xdg enhancements from productivity/thinkingrock
(support custom user hooks and create "open" and "email" links)

suggested by, feedback from and ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/10/30 14:28:36 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d29 13
@


1.1.1.1
log
@Import xdg-utils-1.0.2

Xdg-utils is a set of command line tools that assist applications with a
variety of desktop integration tasks.  About half of the tools focus on
tasks commonly required during the installation of a desktop application
and the other half focuses on integration with the desktop environment
while the application is running.

based on an unfinished port from landry@@
ok landry@@
@
text
@@
