head	1.3;
access;
symbols
	OPENBSD_5_8:1.2.0.36
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.32
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.30
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.28
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.26
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.24
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.22
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.20
	OPENBSD_5_0:1.2.0.18
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.16
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.14
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2015.09.18.13.28.39;	author ajacoutot;	state dead;
branches;
next	1.2;
commitid	mOsk8AWsEEoYUmVB;

1.2
date	2007.06.27.21.09.48;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.06.27.20.33.14;	author steven;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to p5-libintl-1.24.
@
text
@$OpenBSD: patch-lib_Locale_TextDomain_pm,v 1.2 2007/06/27 21:09:48 steven Exp $
--- lib/Locale/TextDomain.pm.orig	Wed Sep 28 01:29:38 2005
+++ lib/Locale/TextDomain.pm	Wed Jun 27 23:07:26 2007
@@@@ -79,7 +79,7 @@@@ use vars qw (@@ISA @@EXPORT %__ $__);
 
 my %textdomains = ();
 my %bound_dirs = ();
-my @@default_dirs = ();
+my @@default_dirs;
 
 sub __ ($);
 	
@@@@ -95,8 +95,7 @@@@ BEGIN {
 	# Add default search directories, but only if they exist.
 	for my $dir (qw (/usr/share/locale /usr/local/share/locale)) {
         if (-d $dir) {
-            @@default_dirs = ($dir);
-            last;
+            push @@default_dirs, $dir;
         }
     }
 }
@@@@ -221,8 +220,10 @@@@ sub import
     # Remember that we still have to bind that textdomain to
     # a directory.
     unless (exists $bound_dirs{$textdomain}) {
-		@@search_dirs = map $_ . '/LocaleData', @@INC, @@default_dirs
-			unless @@search_dirs;
+		unless (@@search_dirs) {
+			@@search_dirs = map $_ . '/LocaleData', @@INC;
+			push @@search_dirs, @@default_dirs;
+		}
 		$bound_dirs{$textdomain} = \@@search_dirs;
     }
 	
@


1.2
log
@forgot a piece
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_Locale_TextDomain_pm,v 1.1 2007/06/27 20:33:14 steven Exp $
@


1.1
log
@find locale under share/locale.  discussed with author a while ago.
@
text
@d1 12
a12 3
$OpenBSD$
--- lib/Locale/TextDomain.pm.orig	Wed Jun 27 18:22:44 2007
+++ lib/Locale/TextDomain.pm	Wed Jun 27 18:27:12 2007
@

