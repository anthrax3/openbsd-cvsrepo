head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	avsm_2015-Aug-30:1.1.1.1
	avsm:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2016.06.24.15.59.12;	author krw;	state Exp;
branches;
next	1.1;
commitid	uNq7PAnG26SO2XnT;

1.1
date	2015.08.30.15.47.06;	author avsm;	state Exp;
branches
	1.1.1.1;
next	;
commitid	68qK6I2GjivZAuSa;

1.1.1.1
date	2015.08.30.15.47.06;	author avsm;	state Exp;
branches;
next	;
commitid	68qK6I2GjivZAuSa;


desc
@@


1.2
log
@Upgrade Ocaml to 4.3.0 and tweak ports the minimal amount to keep
them all compiling.

Tweaks include updating

ocaml-batteries 2.3.1 -> 2.5.0
ocaml-lwt 2.4.8 -> 2.5.2
ocaml-ppx-tools 0.99.2 -> 4.03.0
ocaml-camlp4 4.02+6 -> 4.03+1
utop 1.15 -> 1.19.2

and fixes to coccinelle and wyrd to let them build on bytecode archs.

Other necessary tweaks from the various homes of the projects.

Everything still builds on amd64 (native and bytecode) and sparc64 (bytecode).

ok anil@@ sthen@@ so final 4.3.0 tweaks can be done in-tree.
@
text
@--- Makefile.orig	Wed May 18 22:18:08 2016
+++ Makefile	Wed May 18 22:18:55 2016
@@@@ -12,8 +12,11 @@@@
 OCAMLOPT = ocamlopt
 COMPFLAGS = -w +A-4-17-44-45 -I +compiler-libs -safe-string
 
-.PHONY: all
-all: genlifter$(EXE) dumpast$(EXE) ppx_metaquot$(EXE) rewriter$(EXE) ast_mapper_class.cmo ppx_tools.cma
+.PHONY: all byte opt dyn
+all: byte opt dyn
+byte: genlifter$(EXE) dumpast$(EXE) ppx_metaquot$(EXE) rewriter$(EXE) ast_mapper_class.cmo ppx_tools.cma
+opt: ppx_tools.cmxa
+dyn: ppx_tools.cmxs
 
 ifneq ($(ARCH),none)
 all: ppx_tools.cmxa
@


1.1
log
@Initial revision
@
text
@d1 3
a3 4
$OpenBSD$
--- Makefile.orig	Mon Sep 29 11:13:30 2014
+++ Makefile	Thu Aug 13 13:40:05 2015
@@@@ -12,9 +12,11 @@@@ OCAMLC = ocamlc
a8 1
-all: ppx_tools.cmxa ppx_tools.cmxs
d15 2
a16 11
 genlifter$(EXE): ppx_tools.cma genlifter.cmo
 	$(OCAMLC) $(COMPFLAGS) -o genlifter$(EXE) ocamlcommon.cma ppx_tools.cma genlifter.cmo
@@@@ -73,7 +75,7 @@@@ clean:
 
 INSTALL = META \
    genlifter$(EXE) dumpast$(EXE) ppx_metaquot$(EXE) rewriter$(EXE) \
-   ppx_tools.cma ppx_tools.cmxa ppx_tools$(EXT_LIB) \
+   ppx_tools.cma -optional ppx_tools.cmxa ppx_tools$(EXT_LIB) \
    ppx_tools.cmxs \
    ast_convenience.cmi ast_convenience.cmx \
    ast_mapper_class.cmi ast_mapper_class.cmx
@


1.1.1.1
log
@ocaml-ppx-tools-0.99.2 port
@
text
@@
