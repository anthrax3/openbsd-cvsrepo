head	1.35;
access;
symbols
	OPENBSD_6_2:1.35.0.2
	OPENBSD_6_2_BASE:1.35
	OPENBSD_6_1:1.34.0.4
	OPENBSD_6_1_BASE:1.34
	OPENBSD_6_0:1.34.0.2
	OPENBSD_6_0_BASE:1.34
	OPENBSD_5_9:1.33.0.2
	OPENBSD_5_9_BASE:1.33
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.23.0.4
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.2
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.16.0.4
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.2
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	fgsch_20080723:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2017.05.16.19.34.50;	author landry;	state Exp;
branches;
next	1.34;
commitid	QVlb3cRdJNHMIEAW;

1.34
date	2016.05.15.09.04.09;	author landry;	state Exp;
branches;
next	1.33;
commitid	HmhFV2tLIrcwbOh5;

1.33
date	2016.02.11.12.37.34;	author landry;	state Exp;
branches;
next	1.32;
commitid	uoBv89SxsYTXWeAA;

1.32
date	2015.09.29.10.51.44;	author sthen;	state Exp;
branches;
next	1.31;
commitid	NAa0n7dMfq2qVX1q;

1.31
date	2015.07.19.19.24.19;	author landry;	state Exp;
branches;
next	1.30;
commitid	xtTIl4Bk9IZr8JZ0;

1.30
date	2015.07.18.06.15.08;	author ajacoutot;	state Exp;
branches;
next	1.29;
commitid	XlYPZU9v2WP73oe0;

1.29
date	2015.07.16.00.09.32;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	cZwJr0e7hjt7JI6F;

1.28
date	2015.05.03.08.27.59;	author landry;	state Exp;
branches;
next	1.27;
commitid	F4sI2rF7Tm2N7XhW;

1.27
date	2015.04.02.14.21.14;	author jasper;	state Exp;
branches;
next	1.26;
commitid	4Dkfcsk2uZtFDSwy;

1.26
date	2015.01.16.19.08.49;	author landry;	state Exp;
branches;
next	1.25;
commitid	rmrxm955oRr6NjrR;

1.25
date	2015.01.05.20.12.30;	author landry;	state Exp;
branches;
next	1.24;
commitid	rCvN022XSQELKOpg;

1.24
date	2015.01.03.14.36.03;	author landry;	state Exp;
branches;
next	1.23;
commitid	umxZecGsMgFJJRlm;

1.23
date	2013.10.03.16.37.15;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2013.09.16.10.02.28;	author landry;	state Exp;
branches;
next	1.21;

1.21
date	2013.08.07.21.31.40;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2013.06.20.14.07.40;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.20.13.58.53;	author landry;	state Exp;
branches;
next	1.18;

1.18
date	2013.06.04.07.57.13;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.11.10.50.25;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2012.04.14.09.52.40;	author landry;	state Exp;
branches;
next	1.15;

1.15
date	2012.01.09.19.56.54;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.16.09.24.54;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.08.17.39.24;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2011.06.02.13.41.38;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.21.10.20.43;	author eric;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.15.19.46.07;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.08.01.20.06;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.07.17.17.42;	author fgsch;	state Exp;
branches;
next	1.7;

1.7
date	2010.08.30.22.24.15;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2010.05.04.13.50.35;	author wcmaier;	state Exp;
branches;
next	1.5;

1.5
date	2009.11.21.13.41.15;	author fgsch;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.22.16.42.12;	author fgsch;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2009.03.15.12.49.35;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2008.12.27.15.32.54;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2008.07.23.00.36.45;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.07.23.00.36.45;	author fgsch;	state Exp;
branches;
next	;

1.4.2.1
date	2010.02.14.03.43.29;	author william;	state Exp;
branches;
next	;


desc
@@


1.35
log
@Fix RDEP for twisted update, and add a oneliner patch to fix runtime,
also tested on my buildbot instance.

Many thanks to Pavel Korovin for polishing this twisted updated, finally
paving the way to update buildbot to the 0.9 branch.
@
text
@# $OpenBSD: Makefile,v 1.34 2016/05/15 09:04:09 landry Exp $

COMMENT =	continuous integration framework

MODPY_EGG_VERSION =	0.8.12
DISTNAME =	buildbot-${MODPY_EGG_VERSION}
PKGNAME =	py-${DISTNAME:S/p/pl/}
REVISION =	6

CATEGORIES =	devel

HOMEPAGE =	http://buildbot.net/

MAINTAINER =	Landry Breuil <landry@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MODPY_PI =	Yes

MODULES =	lang/python

MODPY_SETUPTOOLS = Yes

RUN_DEPENDS =	databases/py-sqlalchemy \
		databases/py-sqlalchemy-migrate>=0.7.2 \
		devel/py-dateutil \
		devel/py-twisted \
		www/py-jinja2

TEST_DEPENDS =	${RUN_DEPENDS} \
			devel/py-mock

HOMEDIR =		/var/buildbot

SUBST_VARS +=		HOMEDIR

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/py-buildbot
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-buildbot
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/py-buildbot
	${INSTALL_DATA} ${WRKSRC}/docs/examples/*.cfg \
	    ${PREFIX}/share/examples/py-buildbot
	cd ${WRKSRC} && pax -rw contrib ${PREFIX}/share/doc/py-buildbot
	${INSTALL_MAN} ${WRKSRC}/docs/buildbot.1 ${PREFIX}/man/man1

do-test:
	@@${MAKE_ENV} PYTHONPATH=${WRKSRC} \
	    ${LOCALBASE}/bin/trial --temp-directory=${WRKBUILD}/regress \
	    buildbot.test

.include <bsd.port.mk>
@


1.34
log
@Fix pexp in rc script to correctly detect status
ok/with ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/02/11 12:37:34 landry Exp $
d8 1
a8 1
REVISION =	5
d28 1
a28 5
		devel/py-twisted/core \
		devel/py-twisted/conch \
		devel/py-twisted/mail \
		devel/py-twisted/web \
		devel/py-twisted/words \
@


1.33
log
@Fix dependency on twisted so that the correct Twisted_Core python package
name ends up in egg-info/requires.txt.

Fixes an issue with Interpolate feature reported (with a reduced test
case, thanks!) by Alex Holst -a at mongers dot org-
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/09/29 10:51:44 sthen Exp $
d8 1
a8 1
REVISION =	4
@


1.32
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/07/19 19:24:19 landry Exp $
d8 1
a8 1
REVISION =	3
@


1.31
log
@Enforce dependency on newer sqlalchemy-migrate, as spotted by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/07/18 06:15:08 ajacoutot Exp $
d8 1
a8 1
REVISION =	2
@


1.30
log
@sudo(8) -> su(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/07/16 00:09:32 ajacoutot Exp $
d8 1
a8 1
REVISION =	1
d26 1
a26 1
		databases/py-sqlalchemy-migrate \
@


1.29
log
@Hopefull fix pexp; this port is curently broken at runtime.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/05/03 08:27:59 landry Exp $
d8 1
a8 1
REVISION =	0
@


1.28
log
@Update to buildbot 0.8.12.

See http://docs.buildbot.net/current/relnotes/index.html for changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/04/02 14:21:14 jasper Exp $
d8 1
@


1.27
log
@- switch to MODPY_PI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/01/16 19:08:49 landry Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.10
@


1.26
log
@Update to buildbot 0.8.10.

See See http://docs.buildbot.net/current/relnotes/0.8.9.html and See
http://docs.buildbot.net/current/relnotes/index.html for changes.

Dont forget to run:
$sudo -u _buildbot buildbot upgrade-master /where/your/master/is
after upgrading.
Tested by Alex Holst (thx!) and myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/01/05 20:12:30 landry Exp $
d18 1
a18 1
MASTER_SITES =	${MASTER_SITE_PYPI:=b/buildbot/}
@


1.25
log
@Fix pexp .. for some reason, the full commandline is not the same
anymore, and this breaks proper rc.d usage. Not ideal since this
probably prevents running several distinct instances, will be revisited
when i look at the 0.8.10 update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/01/03 14:36:03 landry Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.8
a7 1
REVISION =	1
d18 1
a18 1
MASTER_SITES =	https://buildbot.googlecode.com/files/
@


1.24
log
@Add py-dateutil to RDEP, needed to use schedulers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/10/03 16:37:15 dcoppa Exp $
d8 1
a8 1
REVISION =	0
@


1.23
log
@Bye bye MODPY_BADEGGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/09/16 10:02:28 landry Exp $
d8 1
d27 1
@


1.22
log
@Update to buildbot/buildslave 0.8.8.
Take over maintainership with previous MAINTAINER agreement.
Improve COMMENTs.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/08/07 21:31:40 naddy Exp $
a22 1
MODPY_BADEGGS =	buildbot
@


1.21
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/06/20 14:07:40 sthen Exp $
d3 1
a3 1
COMMENT =	system to automate the compile/test cycle
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.7p1
d13 1
a13 1
MAINTAINER =	Piotr Sikora <piotr.sikora@@frickle.com>
@


1.20
log
@tweak regex for safety in case there's a p2 release, "probably saner" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/06/20 13:58:53 landry Exp $
d18 1
a18 1
MASTER_SITES =	http://buildbot.googlecode.com/files/
@


1.19
log
@Update to py-build{bot,slave} 0.8.7p1.

MAINTAINER timeout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/06/04 07:57:13 fgsch Exp $
d7 1
a7 1
PKGNAME =	py-${DISTNAME:S/p1/pl1/}
@


1.18
log
@Remove MODPY_JSON from RDEP and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/11 10:50:25 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.6p1
a7 1
REVISION =	0
@


1.17
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/04/14 09:52:40 landry Exp $
d8 1
d33 1
a33 2
		www/py-jinja2 \
		${MODPY_JSON}
@


1.16
log
@Update to buildbot 0.8.6p1.
remember to update your master.cfg and run update-master between
stop/start.. see http://buildbot.net/buildbot/docs/0.8.6/release-notes.html

ok sthen@@ Piotr Sikora(Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/01/09 19:56:54 landry Exp $
a16 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	Yes
d35 1
a35 1
REGRESS_DEPENDS =	${RUN_DEPENDS} \
d51 1
a51 1
do-regress:
@


1.15
log
@Upgrade to py-buildbot 0.8.5, from MAINTAINER Piotr Sikora, in my tree
since september... be sure to run 'buildbot upgrade-master' if upgrading
an existing setup, as explained in README.
Tested by edd@@ and myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/16 09:24:54 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.5
d7 1
a7 1
PKGNAME =	py-${DISTNAME:S/p/./}
@


1.14
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/06/08 17:39:24 jasper Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.3p1
a8 2
REVISION =	2

d28 3
a30 1
RUN_DEPENDS =	devel/py-twisted/core \
a44 3
post-configure:
	@@cd ${WRKSRC}/docs && makeinfo --no-split --html buildbot

d46 1
a46 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/py-buildbot/images
a50 4
	cd ${WRKSRC}/docs && ${INSTALL_DATA} buildbot.html *.png \
	    ${PREFIX}/share/doc/py-buildbot
	cd ${WRKSRC}/docs/images && ${INSTALL_DATA} *.png \
	    ${PREFIX}/share/doc/py-buildbot/images
d52 1
@


1.13
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/06/02 13:41:38 ajacoutot Exp $
d9 1
a9 1
REVISION =	1
@


1.12
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/04/21 10:20:43 eric Exp $
d9 1
a9 1
REVISION =	0
@


1.11
log
@- update to 0.8.3p1
- add a new _buildbot user
- add a rc script
- add a README
- update HOMEPAGE
- change MAINTAINER (per his request)

from Piotr Sikora (new MAINTAINER)

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/11/15 19:46:07 espie Exp $
d8 2
@


1.10
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/08 01:20:06 fgsch Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.2
d7 1
a7 2
PKGNAME =	py-${DISTNAME}
REVISION =	0
d9 1
a9 1
CATEGORIES =   	devel
d13 1
a13 1
MAINTAINER =	Will Maier <wcmaier@@openbsd.org>
d21 1
a21 1
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=buildbot/}
d35 7
a41 1
REGRESS_DEPENDS =	${RUN_DEPENDS}
@


1.9
log
@correct plist and don't need to fake to run regress.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/07 17:17:42 fgsch Exp $
d29 6
a34 6
RUN_DEPENDS =	::devel/py-twisted/core \
		::devel/py-twisted/conch \
		::devel/py-twisted/mail \
		::devel/py-twisted/web \
		::devel/py-twisted/words \
		::www/py-jinja2 \
@


1.8
log
@Update to buildbot 0.8.2. wcmaier@@ (maintainer) ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/08/30 22:24:15 jasper Exp $
d8 1
d53 2
a54 2
do-regress: fake
	@@${MAKE_ENV} PYTHONPATH=${WRKINST}${MODPY_SITEPKG} \
@


1.7
log
@bumpski for python
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/05/04 13:50:35 wcmaier Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.7.12
a7 1
REVISION =	0
d26 1
d32 3
a34 1
		::devel/py-twisted/words
d54 1
a54 1
	    ${LOCALBASE}/bin/trial --temp-directory=${WRKBUILD} \
@


1.6
log
@Update to 0.7.12.

Contains a SECURITY fix: http://buildbot.net/trac/wiki/SecurityAlert0711.
Patch from Alex Holst <a at mongers.org>; thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/11/21 13:41:15 fgsch Exp $
d8 1
@


1.5
log
@SECURITY UPDATE to 0.7.11p3.
Fixes several XSS vulnerabilities.  wcmaier@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/03/22 16:42:12 fgsch Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.7.11p3
d7 1
a7 1
PKGNAME =	py-${DISTNAME:S/p3/.3/}
@


1.4
log
@Update to 0.7.10.1. Install documentation in the right place as well.
Timeout from maintaner.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/03/15 12:49:35 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.7.10p1
d7 1
a7 1
PKGNAME =	py-${DISTNAME:S/p1/.1/}
d33 3
@


1.4.2.1
log
@SECURITY FIX

http://buildbot.net/trac/wiki/SecurityAlert0711

patch linked from that URL:
http://github.com/djmitche/buildbot/commit/822bd5600f8ea577dcb24efe8d7886c66946ac94.patch

ok wcmaier@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/03/22 16:42:12 fgsch Exp $
d7 1
a7 1
PKGNAME =	py-${DISTNAME:S/p1/.1p0/}
@


1.3
log
@A few python deps updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/12/27 15:32:54 fgsch Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.7.9
d7 1
a7 1
PKGNAME =	py-${DISTNAME}p0
d18 1
a18 1
PERMIT_DISTFILES_CDROM =	Yes
d35 3
a37 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/buildbot/images
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/buildbot
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/buildbot
d39 1
a39 1
	    ${PREFIX}/share/examples/buildbot
d41 1
a41 1
	    ${PREFIX}/share/doc/buildbot
d43 2
a44 2
	    ${PREFIX}/share/doc/buildbot/images
	cd ${WRKSRC} && pax -rw contrib ${PREFIX}/share/doc/buildbot
@


1.2
log
@Update to 0.7.9; maintainer (wcmaier@@) ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/07/23 00:36:45 fgsch Exp $
d7 1
a7 1
PKGNAME =	py-${DISTNAME}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
MODPY_EGG_VERSION =	0.7.7
d24 2
@


1.1.1.1
log
@import py-buildbot, a system to automate the compile/test cycle.
wcmaier@@ ok and added as maintainer.
@
text
@@
