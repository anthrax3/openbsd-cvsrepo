head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.04.22.03.11.36;	author jsg;	state Exp;
branches;
next	;
commitid	AGvmj0qC7SxXtw5m;


desc
@@


1.1
log
@Backport a patch to let pygame build with clang on amd64 by replacing
movsxl with movslq in inline assembly.
@
text
@$OpenBSD$
--- src/scale_mmx64.c.orig	Sat Apr 22 12:58:10 2017
+++ src/scale_mmx64.c	Sat Apr 22 12:58:14 2017
@@@@ -425,7 +425,7 @@@@ filter_expand_X_MMX(Uint8 *srcpix, Uint8 *dstpix, int 
              " movl             %5,      %%ecx;           "
              " pxor          %%mm0,      %%mm0;           "
              "1:                                          "
-             " movsxl         (%3),      %%rax;           " /* get xidx0[x] */
+             " movslq         (%3),      %%rax;           " /* get xidx0[x] */
              " add              $4,         %3;           "
              " movq           (%0),      %%mm1;           " /* load mult0 */
              " add              $8,         %0;           "
@@@@ -500,7 +500,7 @@@@ filter_expand_X_SSE(Uint8 *srcpix, Uint8 *dstpix, int 
              " movl             %5,      %%ecx;           "
              " pxor          %%mm0,      %%mm0;           "
              "1:                                          "
-             " movsxl         (%3),      %%rax;           " /* get xidx0[x] */
+             " movslq         (%3),      %%rax;           " /* get xidx0[x] */
              " add              $4,         %3;           "
              " movq           (%0),      %%mm1;           " /* load mult0 */
              " add              $8,         %0;           "
@
