head	1.33;
access;
symbols
	OPENBSD_6_1:1.33.0.2
	OPENBSD_6_1_BASE:1.33
	OPENBSD_6_0:1.30.0.2
	OPENBSD_6_0_BASE:1.30
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.26.0.4
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.15.0.2
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	ports:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2017.03.05.11.52.43;	author landry;	state Exp;
branches;
next	1.32;
commitid	ESIkhPGltOPYU5Pk;

1.32
date	2017.02.01.20.34.40;	author tb;	state Exp;
branches;
next	1.31;
commitid	Aeu2IdL9dzKXxtsP;

1.31
date	2016.11.25.15.52.42;	author naddy;	state Exp;
branches;
next	1.30;
commitid	So1CwqaHKJe7zgLx;

1.30
date	2016.05.12.01.17.13;	author naddy;	state Exp;
branches;
next	1.29;
commitid	yWplpZyyaU1NC3LP;

1.29
date	2016.05.02.14.52.48;	author espie;	state Exp;
branches;
next	1.28;
commitid	kmCjisfJdqN5E3OM;

1.28
date	2015.12.20.00.16.27;	author naddy;	state Exp;
branches;
next	1.27;
commitid	7FwUBfDRx93p0qtP;

1.27
date	2015.12.03.21.24.29;	author sthen;	state Exp;
branches;
next	1.26;
commitid	qh8BBe4z9PLvLPKf;

1.26
date	2015.06.17.20.03.11;	author sthen;	state Exp;
branches;
next	1.25;
commitid	ASHe8W1wzY7eB3KC;

1.25
date	2015.03.16.18.07.42;	author naddy;	state Exp;
branches;
next	1.24;
commitid	IJdm3Zowcdkcxp5X;

1.24
date	2015.01.02.14.26.12;	author sthen;	state Exp;
branches;
next	1.23;
commitid	opt64GLzbD0TGQDJ;

1.23
date	2014.07.16.09.11.43;	author espie;	state Exp;
branches;
next	1.22;
commitid	kI47fXE5HK4uEJKT;

1.22
date	2014.01.12.14.58.30;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2013.08.09.11.02.28;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2013.07.07.21.25.27;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.13.21.23.48;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.10.50.09;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.02.01.16.34.36;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2012.09.01.12.02.27;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2012.06.21.16.17.40;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2012.06.21.13.56.57;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2012.01.13.00.55.14;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2011.11.18.11.16.24;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.11.17.13.58.27;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.18.19.06.36;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2011.01.15.01.09.43;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.01.10.29.56;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.24.23.05.08;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.07.14.25.47;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2010.05.26.08.18.07;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.25.13.45.19;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.05.25.05.03.18;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.25.00.29.09;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.24.22.42.08;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.05.24.22.42.08;	author espie;	state Exp;
branches;
next	;


desc
@@


1.33
log
@Missing REVISION bump, libf2c also has OSREV in PLIST..
@
text
@# $OpenBSD: Makefile,v 1.32 2017/02/01 20:34:40 tb Exp $

V =		3.3.6
CONFIG =	${MACHINE_ARCH}-unknown-openbsd${OSREV}
SUBST_VARS +=	CONFIG V
PKGNAME =	libf2c-$V
REVISION =	10
DISTFILES =	libf2c-openbsd.tgz
MASTER_SITES =	https://spacehopper.org/mirrors/

COMMENT =	GNU fortran 77 libraries
CATEGORIES =	devel math
PERMIT_PACKAGE_CDROM = Yes

MAJOR=	8
MINOR=  1
SHARED_LIBS=	g2c	${MAJOR}.${MINOR}

WRKDIST =	${WRKDIR}/libf2c
MAKE_FILE = ${WRKDIST}/Makefile.bsd-wrapper

do-configure:
	cd ${WRKDIST} && ${MAKE} -f ${MAKE_FILE} ${MAKE_FLAGS} obj
	cd ${WRKDIST} && ${MAKE} -f ${MAKE_FILE} ${MAKE_FLAGS} depend

MAKE_FLAGS = MANDIR=${TRUEPREFIX}/man/cat \
	INSTALL_LIBGCC= LIBGCC= \
	COMPILERS=f771 \
	USE_COLLECT2= \
	LANGUAGES=f77 \
	LIBDIR=${TRUEPREFIX}/lib \
	BSDSRCDIR=${WRKDIST} \
	BSDOBJDIR=${WRKBUILD} \
	major=${MAJOR} minor=${MINOR} \
	libf2c_cv_has_g77_builtin_types=yes

post-install:
	cd ${WRKBUILD}/obj && ${INSTALL_DATA} g2c.h ${PREFIX}/include
	${INSTALL_DATA_DIR} ${PREFIX}/lib/gcc-lib/${CONFIG}/$V
.for i in libfrtbegin.a libfrtbegin_pic.a libfrtbegin_p.a libg2c.a \
	libg2c_p.a libg2c_pic.a libg2c.so.${MAJOR}.${MINOR}
	if test -e ${PREFIX}/lib/$i; then \
	  ln -sf ${TRUEPREFIX}/lib/$i ${PREFIX}/lib/gcc-lib/${CONFIG}/$V; \
	fi
.endfor

.include <bsd.port.mk>
@


1.32
log
@Since bsd.obj.mk no longer chowns without checking, the WOJBDIR workaround
to fix the build in dpb setups can be removed again.

ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/11/25 15:52:42 naddy Exp $
d7 1
a7 1
REVISION =	9
@


1.31
log
@This port uses bsd.obj.mk, which now tries to chgrp obj directories
to the wobj group.  For a port build, there is no point in changing
the obj subdirectory to a different group after extraction, so set
WOBJGROUP to the group of the WRKBUILD directory.  This fixes dpb
setups where privileges are dropped to the _pbuild user during the
build stage.  ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/05/12 01:17:13 naddy Exp $
a33 1
	WOBJGROUP=`stat -f %g ${WRKBUILD}` \
@


1.30
log
@bump for plist changes 5.9 -> 6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/05/02 14:52:48 espie Exp $
d34 1
@


1.29
log
@pass "safe" values of BSDSRCDIR and BSDOBJDIR on the command line.
Those ports use bsd.obj.mk, which doesn't like it if BSDSRCDIR doesn't point
to a defined place.

(found by doing a bulk on a chroot in a somewhat more hostile setup than usual)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/12/20 00:16:27 naddy Exp $
d7 1
a7 1
REVISION =	8
@


1.28
log
@bump for plist changes 5.8 -> 5.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/12/03 21:24:29 sthen Exp $
d32 2
@


1.27
log
@switch my distfiles mirror to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/06/17 20:03:11 sthen Exp $
d7 1
a7 1
REVISION =	7
@


1.26
log
@port REVISION bumps as base has moved to 5.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/03/16 18:07:42 naddy Exp $
d9 1
a9 1
MASTER_SITES =	http://spacehopper.org/mirrors/
@


1.25
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/01/02 14:26:12 sthen Exp $
d4 2
a5 2
CONFIG = 	${MACHINE_ARCH}-unknown-openbsd${OSREV}
SUBST_VARS += 	CONFIG V
d7 2
a8 2
REVISION =	6
DISTFILES = 	libf2c-openbsd.tgz
@


1.24
log
@bump REVISION for 5.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/07/16 09:11:43 espie Exp $
d7 1
a7 1
REVISION =	5
@


1.23
log
@bump for 5.6beta
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/01/12 14:58:30 naddy Exp $
d7 1
a7 1
REVISION =	4
@


1.22
log
@bump for plist changes 5.4 -> 5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/08/09 11:02:28 naddy Exp $
d7 1
a7 1
REVISION =	3
@


1.21
log
@remove last mentions of GCC2_ARCHS variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/07/07 21:25:27 naddy Exp $
d7 1
a7 1
REVISION =	2
@


1.20
log
@bump for plist changes 5.3 -> 5.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/13 21:23:48 miod Exp $
a10 1
NOT_FOR_ARCHS =	${GCC2_ARCHS}
@


1.19
log
@Update g77 to the in-tree 3.3.6 codebase, bringing support for m68k and m88k.
All previous patches have also been applied, and a new distribution tarball
has been created.
ok sthen@@; help naddy@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 10:50:09 espie Exp $
d7 1
a7 1
REVISION =	1
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/02/01 16:34:36 naddy Exp $
d3 1
a3 1
V =		3.3.5
d7 1
a7 1
REVISION =	10
@


1.17
log
@bump for plist changes 5.2 -> 5.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/09/01 12:02:27 naddy Exp $
a13 1
PERMIT_DISTFILES_CDROM = Yes
a14 2
PERMIT_DISTFILES_FTP =	Yes
PERMIT_PACKAGE_FTP =	Yes
@


1.16
log
@bsd.lib.mk does not build _pic.a libraries any longer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/06/21 16:17:40 naddy Exp $
d7 1
a7 1
REVISION =	9
@


1.15
log
@GCC3 is gone, we don't need to deal with it any longer; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/06/21 13:56:57 sthen Exp $
d7 1
a7 1
REVISION =	8
@


1.14
log
@bump for plist changes 5.1 -> 5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/01/13 00:55:14 naddy Exp $
d36 2
a37 1
	major=${MAJOR} minor=${MINOR}
a49 3
.if ${COMPILER_VERSION:L:Mgcc4*}
MAKE_FLAGS += libf2c_cv_has_g77_builtin_types=yes
.endif
@


1.13
log
@bump revision for plist changes 5.0 -> 5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/11/18 11:16:24 espie Exp $
d7 1
a7 1
REVISION =	7
@


1.12
log
@shrink, this lives in bsd.port.mk itself now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/11/17 13:58:27 sthen Exp $
d7 1
a7 1
REVISION =	6
@


1.11
log
@NOT_FOR_ARCHES -> NOT_FOR_ARCHS, from viq
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/07/18 19:06:36 naddy Exp $
a24 7

# See bsd.lib.mk:162
.if ${MACHINE_ARCH:Mmips64*}
PKG_ARGS+=	-Dno_mips64=0
.else
PKG_ARGS+=	-Dno_mips64=1
.endif
@


1.10
log
@bump revision for plist changes 4.9 -> 5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/01/15 01:09:43 naddy Exp $
d11 1
a11 1
NOT_FOR_ARCHES =	${GCC2_ARCHS}
@


1.9
log
@bump revision for plist changes 4.8 -> 4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/08/01 10:29:56 espie Exp $
d7 1
a7 1
REVISION =	5
@


1.8
log
@conflict with the lang/gcc/3.3,-f77 subpackage.
(and pseudo-conflict with older lang/g77)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/07/24 23:05:08 naddy Exp $
d7 1
a7 1
REVISION =	4
@


1.7
log
@bump PKGNAME for PLIST changes 4.7 -> 4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/06/07 14:25:47 jasper Exp $
d7 1
a7 1
REVISION =	3
@


1.6
log
@- fix on mips64(el)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/05/26 08:18:07 espie Exp $
d6 2
a7 1
PKGNAME =	libf2c-$Vp2
@


1.5
log
@Don't patch configure, the env is enough.
let it build on gcc3, as noticed by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/05/25 13:45:19 espie Exp $
d6 1
a6 1
PKGNAME =	libf2c-$Vp1
d24 7
@


1.4
log
@fix build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/05/25 05:03:18 ajacoutot Exp $
d6 1
a6 1
PKGNAME =	libf2c-$Vp0
d26 2
a27 2
	cd ${WRKDIST} && ${MAKE} -f ${MAKE_FILE} obj
	cd ${WRKDIST} && ${MAKE} -f ${MAKE_FILE} depend
d48 3
@


1.3
log
@Capital letter, full-stop.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/05/25 00:29:09 espie Exp $
d18 3
a20 1
SHARED_LIBS=	g2c	8.1
d23 1
a24 1
MAKE_FILE = ${WRKDIST}/Makefile.bsd-wrapper
d34 2
a35 1
	LIBDIR=${TRUEPREFIX}/lib
d41 2
a42 2
	libg2c_p.a libg2c_pic.a libg2c.so.*
	if test -e ${TRUEPREFIX}/lib/$i; then \
@


1.2
log
@forgot to mark it not for gcc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/05/24 22:42:08 espie Exp $
d6 1
a6 1
PKGNAME =	libf2c-$V
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 1
@


1.1.1.1
log
@libf2c from gcc 3.3.5 from main source tree
@
text
@@
