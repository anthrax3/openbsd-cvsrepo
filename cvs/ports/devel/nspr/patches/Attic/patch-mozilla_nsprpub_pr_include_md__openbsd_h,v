head	1.10;
access;
symbols
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.10
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.8
	OPENBSD_5_0:1.8.0.6
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.4
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.7.0.6
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_3:1.5.0.6
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.4
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5;
locks; strict;
comment	@# @;


1.10
date	2013.06.23.18.36.50;	author landry;	state dead;
branches;
next	1.9;

1.9
date	2012.09.17.20.00.09;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2010.03.30.11.47.33;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2009.02.14.12.01.48;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2008.07.25.00.42.34;	author martynas;	state dead;
branches;
next	1.5;

1.5
date	2007.03.01.22.37.48;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.30.16.53.53;	author kurt;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.15.09.05.36;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.06.14.35.45;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.03.18.02.13;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Update to nspr 4.10.

http://mozilla.6506.n7.nabble.com/ANNOUNCE-NSPR-4-10-Release-td280660.html

After years of sticking to CVS, upstream finally switched to hg,
changing its directory layout while here. All our patches are actually
unchanged, but got renamed/moved. CVS doesn't handle moves :)

Tested in an amd64 bulk build.
@
text
@$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.9 2012/09/17 20:00:09 landry Exp $
--- mozilla/nsprpub/pr/include/md/_openbsd.h.orig	Tue Mar  6 14:13:52 2012
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Sun Sep  2 00:30:56 2012
@@@@ -24,6 +24,10 @@@@
 #define _PR_SI_ARCHITECTURE "sparc"
 #elif defined(__arm__)
 #define _PR_SI_ARCHITECTURE "arm"
+#elif defined(__hppa__)
+#define _PR_SI_ARCHITECTURE "hppa"
+#elif defined(__mips64__) || defined(__mips64el__)
+#define _PR_SI_ARCHITECTURE "mips64"
 #endif
 
 #define PR_DLL_SUFFIX		".so"
@@@@ -33,7 +37,11 @@@@
 #define _MD_DEFAULT_STACK_SIZE	65536L
 #define _MD_MMAP_FLAGS          MAP_PRIVATE
 
+#if defined(__hppa__)
+#define HAVE_STACK_GROWING_UP
+#else
 #undef  HAVE_STACK_GROWING_UP
+#endif
 #define HAVE_DLL
 #define USE_DLFCN
 #define _PR_HAVE_SOCKADDR_LEN
@@@@ -69,6 +77,8 @@@@
 #define JB_SP_INDEX 6
 #elif defined(__arm__)
 #define JB_SP_INDEX 23
+#elif defined(__mips64__) || defined(__mips64el__)
+#define JB_SP_INDEX 29
 #else
 #error "Need to define SP index in jmp_buf here"
 #endif
@


1.9
log
@Update to nspr 4.9.2.

- Garbage collect patch adding -pthread hack while here.
- Improve pthread_set_name_np() call (returns void)
- Needed anyway by upcoming Mozilla 16 releases
been in a bunch of amd64 bulks, ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.8 2010/03/30 11:47:33 jasper Exp $
@


1.8
log
@- allow this to build on mips64*

feedback from kettenis@@
ok phessler@@
@
text
@d1 4
a4 4
$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.7 2009/02/14 12:01:48 sthen Exp $
--- mozilla/nsprpub/pr/include/md/_openbsd.h.orig	Sat May 26 02:13:08 2007
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Mon Feb  8 16:00:19 2010
@@@@ -56,6 +56,10 @@@@
d15 1
a15 1
@@@@ -65,7 +69,11 @@@@
d27 1
a27 1
@@@@ -101,6 +109,8 @@@@
@


1.7
log
@build this on hppa; ok martynas (maintainer).
@
text
@d1 4
a4 4
$OpenBSD$
--- mozilla/nsprpub/pr/include/md/_openbsd.h.orig	Sat May 26 01:13:08 2007
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Sat Feb 14 00:30:54 2009
@@@@ -56,6 +56,8 @@@@
d10 2
d15 1
a15 1
@@@@ -65,7 +67,11 @@@@
d27 9
@


1.6
log
@update to nspr-4.7.1.  also needed by firefox 3.0
tested by many, both w/ mozilla 1.8 branch projects, and mozilla 1.9
"nspr and nss should go in" naddy@@
ok kurt@@
@
text
@d1 4
a4 6
$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.5 2007/03/01 22:37:48 robert Exp $
--- mozilla/nsprpub/pr/include/md/_openbsd.h.orig	Sun Apr 25 17:00:47 2004
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Thu Mar  1 23:09:56 2007
@@@@ -54,9 +54,11 @@@@
 #define _PR_SI_ARCHITECTURE "powerpc"
 #elif defined(__sparc__)
d6 4
a9 2
+#elif defined(__arm__)
+#define _PR_SI_ARCHITECTURE "arm"
d12 4
a15 2
-#define PR_DLL_SUFFIX		".so.1.0"
+#define PR_DLL_SUFFIX		".so"
d17 8
a24 11
 #define _PR_VMBASE              0x30000000
 #define _PR_STACK_VMBASE	0x50000000
@@@@ -97,6 +99,8 @@@@
 #define JB_SP_INDEX 34
 #elif defined(__amd64__)
 #define JB_SP_INDEX 6
+#elif defined(__arm__)
+#define JB_SP_INDEX 23
 #else
 #error "Need to define SP index in jmp_buf here"
 #endif
@


1.5
log
@update to version 4.6.5; from Martynas Venckus; ok pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.4 2006/11/30 16:53:53 kurt Exp $
@


1.4
log
@Don't append nspr's shared lib version in PR_GetLibraryName. This fixes
missing 'Builtin Roots Module'/Authorities problem in mozilla* apps.
okay ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.3 2006/11/15 09:05:36 ajacoutot Exp $
d3 1
a3 1
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Fri Nov 10 20:13:55 2006
@


1.3
log
@- add arm support (from kili@@)
- increase soft limits for regression tests and make sure the prpollml
test works (from kili@@ and kurt@@)
- enable nameshm1 regression test (disable ClientServerTest function)

ok kurt@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_nsprpub_pr_include_md__openbsd_h,v 1.2 2006/11/06 14:35:45 ajacoutot Exp $
d13 1
a13 1
+#define PR_DLL_SUFFIX		".so._SO_VERSION_"
@


1.2
log
@- update to latest stable version (4.6.3) - 3 years worth of changes!
- use patches from www/mozilla-firefox (should now work on all supported
  Firefox platforms)
- replaced internal strtod and dtoa implementations (patch from kurt@@)
- create and install nspr.pc (from FreeBSD)
- change MASTER_SITES, remove USE_X11, update pkg/DESCR

ok mbalmer@@ kurt@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 2
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Sat Nov  4 13:14:54 2006
@@@@ -56,7 +56,7 @@@@
d8 2
d17 9
@


1.1
log
@Add support for amd64, from NetBSD

ok sturm@@
@
text
@d2 11
a12 11
--- mozilla/nsprpub/pr/include/md/_openbsd.h.orig	Fri Nov  3 16:18:46 2006
+++ mozilla/nsprpub/pr/include/md/_openbsd.h	Fri Nov  3 16:19:04 2006
@@@@ -43,6 +43,8 @@@@
 #define _PR_SI_ARCHITECTURE "x86"
 #elif defined(__alpha__)
 #define _PR_SI_ARCHITECTURE "alpha"
+#elif defined(__amd64__)
+#define _PR_SI_ARCHITECTURE "amd64"
 #elif defined(__m68k__)
 #define _PR_SI_ARCHITECTURE "m68k"
 #elif defined(__powerpc__)
@

