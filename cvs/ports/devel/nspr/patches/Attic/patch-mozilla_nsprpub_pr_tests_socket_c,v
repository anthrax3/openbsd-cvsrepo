head	1.5;
access;
symbols
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.3.0.8
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.6
	OPENBSD_5_0:1.3.0.4
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.0.12
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.10
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.8
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.6
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.4
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2013.06.23.18.36.50;	author landry;	state dead;
branches;
next	1.4;

1.4
date	2012.09.17.20.00.09;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2010.08.30.20.12.55;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2009.08.04.13.56.09;	author martynas;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.09.19.00.39;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to nspr 4.10.

http://mozilla.6506.n7.nabble.com/ANNOUNCE-NSPR-4-10-Release-td280660.html

After years of sticking to CVS, upstream finally switched to hg,
changing its directory layout while here. All our patches are actually
unchanged, but got renamed/moved. CVS doesn't handle moves :)

Tested in an amd64 bulk build.
@
text
@$OpenBSD: patch-mozilla_nsprpub_pr_tests_socket_c,v 1.4 2012/09/17 20:00:09 landry Exp $
--- mozilla/nsprpub/pr/tests/socket.c.orig	Tue Mar  6 14:14:32 2012
+++ mozilla/nsprpub/pr/tests/socket.c	Sun Sep  2 00:30:57 2012
@@@@ -2206,6 +2206,7 @@@@ int main(int argc, char **argv)
     /*
      * client-server test, Ipv6-Ipv4
      */
+    #if !defined(__OpenBSD__)
 	client_domain = PR_AF_INET6;
 	printf("TCP Client/Server Test - IPv6/Ipv4\n");
     if (TCP_Socket_Client_Server_Test() < 0) {
@@@@ -2213,9 +2214,11 @@@@ int main(int argc, char **argv)
         goto done;
     } else
         printf("TCP_Socket_Client_Server_Test Passed\n");
+    #endif
     /*
      * client-server test, Ipv4-Ipv6
      */
+    #if !defined(__OpenBSD__)
 	client_domain = PR_AF_INET;
 	server_domain = PR_AF_INET6;
 	printf("TCP Client/Server Test - IPv4/Ipv6\n");
@@@@ -2224,6 +2227,7 @@@@ int main(int argc, char **argv)
         goto done;
     } else
         printf("TCP_Socket_Client_Server_Test Passed\n");
+    #endif
     /*
      * client-server test, Ipv6-Ipv6
      */
@@@@ -2253,6 +2257,7 @@@@ int main(int argc, char **argv)
     /*
      * run client-server test with UDP, IPv6/IPv4
      */
+    #if !defined(__OpenBSD__)
 	printf("UDP Client/Server Test - IPv6/Ipv4\n");
 	client_domain = PR_AF_INET6;
 	server_domain = PR_AF_INET;
@@@@ -2261,9 +2266,11 @@@@ int main(int argc, char **argv)
         goto done;
     } else
         printf("UDP_Socket_Client_Server_Test Passed\n");
+    #endif
     /*
      * run client-server test with UDP,IPv4-IPv6
      */
+    #if !defined(__OpenBSD__)
 	printf("UDP Client/Server Test - IPv4/Ipv6\n");
 	client_domain = PR_AF_INET;
 	server_domain = PR_AF_INET6;
@@@@ -2272,6 +2279,7 @@@@ int main(int argc, char **argv)
         goto done;
     } else
         printf("UDP_Socket_Client_Server_Test Passed\n");
+    #endif
     /*
      * run client-server test with UDP,IPv6-IPv6
      */
@


1.4
log
@Update to nspr 4.9.2.

- Garbage collect patch adding -pthread hack while here.
- Improve pthread_set_name_np() call (returns void)
- Needed anyway by upcoming Mozilla 16 releases
been in a bunch of amd64 bulks, ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_nsprpub_pr_tests_socket_c,v 1.3 2010/08/30 20:12:55 landry Exp $
@


1.3
log
@Update to nspr 4.8.6, required by (at least) a future firefox 4 update..
Tested in a bunch of amd64 bulk builds.
ok naddy@@ phessler@@
@
text
@d1 4
a4 4
$OpenBSD: patch-mozilla_nsprpub_pr_tests_socket_c,v 1.2 2009/08/04 13:56:09 martynas Exp $
--- mozilla/nsprpub/pr/tests/socket.c.orig	Sat Feb 13 01:32:47 2010
+++ mozilla/nsprpub/pr/tests/socket.c	Sun Aug  1 13:16:28 2010
@@@@ -2238,6 +2238,7 @@@@ int main(int argc, char **argv)
d12 1
a12 1
@@@@ -2245,9 +2246,11 @@@@ int main(int argc, char **argv)
d24 1
a24 1
@@@@ -2256,6 +2259,7 @@@@ int main(int argc, char **argv)
d32 1
a32 1
@@@@ -2285,6 +2289,7 @@@@ int main(int argc, char **argv)
d40 1
a40 1
@@@@ -2293,9 +2298,11 @@@@ int main(int argc, char **argv)
d52 1
a52 1
@@@@ -2304,6 +2311,7 @@@@ int main(int argc, char **argv)
@


1.2
log
@update to nspr-4.8.  security.  please note, this will be needed
in stable for further mozilla-firefox security updates.
bulk build done by sthen@@.  thanks!
@
text
@d1 4
a4 4
$OpenBSD: patch-mozilla_nsprpub_pr_tests_socket_c,v 1.1 2006/11/09 19:00:39 ajacoutot Exp $
--- mozilla/nsprpub/pr/tests/socket.c.orig	Wed May  6 08:40:39 2009
+++ mozilla/nsprpub/pr/tests/socket.c	Sat Jun 20 23:38:30 2009
@@@@ -2234,6 +2234,7 @@@@ int main(int argc, char **argv)
d12 1
a12 1
@@@@ -2241,9 +2242,11 @@@@ int main(int argc, char **argv)
d24 1
a24 1
@@@@ -2252,6 +2255,7 @@@@ int main(int argc, char **argv)
d32 1
a32 1
@@@@ -2281,6 +2285,7 @@@@ int main(int argc, char **argv)
d40 1
a40 1
@@@@ -2289,9 +2294,11 @@@@ int main(int argc, char **argv)
d52 1
a52 1
@@@@ -2300,6 +2307,7 @@@@ int main(int argc, char **argv)
@


1.1
log
@- re-add socket regression test (but do not run IPv4->IPv6 mapping tests
  under OpenBSD)
- bump so version to 17 as Firefox 1.5.0.8 will use 16 (from wilfried@@)
- bump PKGNAME

go ahead steven@@
@
text
@d1 4
a4 4
$OpenBSD$
--- mozilla/nsprpub/pr/tests/socket.c.orig	Sun Apr 25 17:01:02 2004
+++ mozilla/nsprpub/pr/tests/socket.c	Thu Nov  9 14:29:45 2006
@@@@ -2245,6 +2245,7 @@@@ main(int argc, char **argv)
d12 1
a12 1
@@@@ -2252,9 +2253,11 @@@@ main(int argc, char **argv)
d24 1
a24 1
@@@@ -2263,6 +2266,7 @@@@ main(int argc, char **argv)
d32 1
a32 1
@@@@ -2289,6 +2293,7 @@@@ main(int argc, char **argv)
d40 1
a40 1
@@@@ -2297,9 +2302,11 @@@@ main(int argc, char **argv)
d52 1
a52 1
@@@@ -2308,6 +2315,7 @@@@ main(int argc, char **argv)
@

