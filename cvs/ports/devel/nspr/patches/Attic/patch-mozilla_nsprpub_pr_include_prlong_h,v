head	1.3;
access;
symbols
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2013.03.18.20.30.32;	author landry;	state dead;
branches;
next	1.2;

1.2
date	2012.09.17.20.00.09;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2011.10.27.07.58.03;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to nspr 4.9.5.

After two years of discussion in bug #634793 and countless hours lost on
filing followup bugs at each type mismatch, nspr upstream finally got
convinced that on OpenBSD uint64_t was unsigned long long, and there was
no reason at all to define PRUint64 as unsigned long, happily raping the
principle of least surprise. So now that upstream behaves correctly,
remove the two pr{long,types}.h patches.

And there was much rejoicing.

Tested on sparc64/ppc/hppa/amd64, went in a bunch of bulk builds.
@
text
@$OpenBSD: patch-mozilla_nsprpub_pr_include_prlong_h,v 1.2 2012/09/17 20:00:09 landry Exp $
https://bugzilla.mozilla.org/show_bug.cgi?id=634793
--- mozilla/nsprpub/pr/include/prlong.h.orig	Tue Mar  6 14:13:46 2012
+++ mozilla/nsprpub/pr/include/prlong.h	Sun Sep  2 00:30:56 2012
@@@@ -35,7 +35,7 @@@@ NSPR_API(PRUint64) LL_MaxUint(void);
 #if defined(HAVE_LONG_LONG)
 
 /* Keep this in sync with prtypes.h. */
-#if PR_BYTES_PER_LONG == 8 && !defined(__APPLE__)
+#if PR_BYTES_PER_LONG == 8 && !defined(__APPLE__) && !defined(__OpenBSD__)
 #define LL_MAXINT   9223372036854775807L
 #define LL_MININT   (-LL_MAXINT - 1L)
 #define LL_ZERO     0L
@


1.2
log
@Update to nspr 4.9.2.

- Garbage collect patch adding -pthread hack while here.
- Improve pthread_set_name_np() call (returns void)
- Needed anyway by upcoming Mozilla 16 releases
been in a bunch of amd64 bulks, ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_nsprpub_pr_include_prlong_h,v 1.1 2011/10/27 07:58:03 robert Exp $
@


1.1
log
@match uint64_t and int64_t typedefs with the system ones to avoid confusion
in chrome for example

ok jasper@@
@
text
@d1 5
a5 4
$OpenBSD$
--- mozilla/nsprpub/pr/include/prlong.h.orig	Wed Oct 12 11:57:07 2011
+++ mozilla/nsprpub/pr/include/prlong.h	Wed Oct 12 11:57:16 2011
@@@@ -67,7 +67,7 @@@@ NSPR_API(PRUint64) LL_MaxUint(void);
@

