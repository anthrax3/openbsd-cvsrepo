head	1.30;
access;
symbols
	OPENBSD_6_2:1.30.0.2
	OPENBSD_6_2_BASE:1.30
	OPENBSD_6_1:1.28.0.2
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.24.0.2
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.18.0.4
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.4
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5;
locks; strict;
comment	@# @;


1.30
date	2017.09.08.09.52.58;	author juanfra;	state Exp;
branches;
next	1.29;
commitid	wlxXCVnWYXwukOUS;

1.29
date	2017.06.13.07.47.51;	author czarkoff;	state Exp;
branches;
next	1.28;
commitid	20jx9nDksK79Uaz0;

1.28
date	2017.01.17.03.10.21;	author czarkoff;	state Exp;
branches;
next	1.27;
commitid	EWGm3W1oovQppFXg;

1.27
date	2017.01.17.02.57.09;	author czarkoff;	state Exp;
branches;
next	1.26;
commitid	egaT9XALFbv2xcDK;

1.26
date	2016.10.14.14.00.09;	author czarkoff;	state Exp;
branches;
next	1.25;
commitid	jd969ZOinETqbR5o;

1.25
date	2016.08.03.21.57.08;	author czarkoff;	state Exp;
branches;
next	1.24;
commitid	k1ZUIkstfsTsCj30;

1.24
date	2016.07.10.22.28.20;	author czarkoff;	state Exp;
branches;
next	1.23;
commitid	v2Wcj5iMzBsFoJo4;

1.23
date	2016.06.14.09.55.31;	author czarkoff;	state Exp;
branches;
next	1.22;
commitid	mt4DB1gj7T4vswKw;

1.22
date	2015.12.21.22.12.23;	author czarkoff;	state Exp;
branches;
next	1.21;
commitid	A25O0GSt9ROtbAEK;

1.21
date	2015.11.23.19.44.44;	author czarkoff;	state Exp;
branches;
next	1.20;
commitid	vObtuMQW1MOEsO8f;

1.20
date	2015.09.29.10.51.53;	author sthen;	state Exp;
branches;
next	1.19;
commitid	NBCOrQyZLwl2eNgm;

1.19
date	2015.09.23.07.17.00;	author czarkoff;	state Exp;
branches;
next	1.18;
commitid	OPA7yPwXOgMqdkC7;

1.18
date	2015.04.07.15.49.25;	author jca;	state Exp;
branches;
next	1.17;
commitid	U90JWs7VEW7P6uum;

1.17
date	2015.04.07.05.09.29;	author czarkoff;	state Exp;
branches;
next	1.16;
commitid	Of1aqgRVOCQKesE1;

1.16
date	2015.04.02.14.21.14;	author jasper;	state Exp;
branches;
next	1.15;
commitid	4Dkfcsk2uZtFDSwy;

1.15
date	2015.03.23.11.06.39;	author czarkoff;	state Exp;
branches;
next	1.14;
commitid	WSEHCI1q07F1task;

1.14
date	2014.10.12.20.57.06;	author juanfra;	state Exp;
branches
	1.14.2.1;
next	1.13;
commitid	mkCGiUoU3RhpUVjO;

1.13
date	2014.10.03.22.51.48;	author sthen;	state Exp;
branches;
next	1.12;
commitid	ogSs7q0M773OphXD;

1.12
date	2014.03.25.16.18.02;	author sthen;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2013.10.03.16.37.15;	author dcoppa;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.11.10.50.25;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2012.10.15.14.55.43;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2011.09.16.09.24.55;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2011.06.08.17.39.25;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2011.05.31.05.44.27;	author rpointel;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.15.19.46.07;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.16.22.59.43;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2010.09.14.15.11.22;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.09.14.14.47.59;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.02.20.55.37;	author millert;	state Exp;
branches;
next	;

1.12.2.1
date	2015.03.23.11.38.36;	author jasper;	state Exp;
branches;
next	;
commitid	Fx1JSym4gHXUmyDt;

1.14.2.1
date	2015.03.23.11.38.43;	author jasper;	state Exp;
branches;
next	;
commitid	GeN8Cbt2N8mBfGJh;


desc
@@


1.30
log
@Update to dulwich 0.18.2. Maintainer timeout.
@
text
@# $OpenBSD: Makefile,v 1.29 2017/06/13 07:47:51 czarkoff Exp $

COMMENT =		pure Python implementation of Git file formats and protocols

MODPY_EGG_VERSION =	0.18.2
DISTNAME =		dulwich-${MODPY_EGG_VERSION}
PKGNAME =		py-${DISTNAME}

CATEGORIES =		devel

HOMEPAGE =		https://www.dulwich.io/

MAINTAINER =		Dmitrij D. Czarkoff <czarkoff@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += pthread ${MODPY_WANTLIB}

MODULES =		lang/python
MODPY_PI =		Yes
MODPY_SETUPTOOLS =	Yes

RUN_DEPENDS =		net/py-geventhttpclient

TEST_DEPENDS =		${RUN_DEPENDS} \
			devel/git,-main \
			devel/py-fastimport \
			devel/py-greenlet \
			devel/py-mock

MAKE_ENV +=		LC_CTYPE=en_US.UTF-8
GIT =			${LOCALBASE}/bin/git

pre-test:
	sed -i '/^_DEFAULT_GIT/s/git/${GIT:S/\//\\\//g}/' \
		${WRKSRC}/dulwich/tests/compat/utils.py

post-install:
	rm -R ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/docs
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/dulwich/tutorial
	${INSTALL_DATA} ${WRKSRC}/docs/tutorial/*.txt \
			${PREFIX}/share/doc/dulwich/tutorial

.include <bsd.port.mk>
@


1.29
log
@update to py-dulwich 0.17.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/01/17 03:10:21 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.17.3
@


1.28
log
@Update to dulwich 0.16.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2017/01/17 02:57:09 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.16.3
d29 1
@


1.27
log
@Update to dulwich 0.16.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/10/14 14:00:09 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.16.1
@


1.26
log
@update to py-dulwich-0.15.0

As testing dulwich with nose becomes more cumbersome, switch to projects' own
testing framework.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/08/03 21:57:08 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.15.0
@


1.25
log
@update to py-dulwich-0.14.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/07/10 22:28:20 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.14.1
d7 1
a7 1
PKGNAME =		${MODPY_PY_PREFIX}${DISTNAME}
a25 1
# One test fails due to the lack of OpenStack SWIFT.
d27 10
a36 5
			devel/py-nose \
			devel/git,-main

do-test:
	nosetests -w ${WRKSRC}
@


1.24
log
@update to py-dulwich-0.14.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/06/14 09:55:31 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.14.0
@


1.23
log
@update to py-dulwich 0.13.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/12/21 22:12:23 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.13.0
a26 2
# The other failed tests are related to this bug:
# https://github.com/surfly/gevent/issues/446
@


1.22
log
@update to dulwich 0.12.0

OK juanfra@@, shadchin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/11/23 19:44:44 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.12.0
d7 1
a7 1
PKGNAME =		py-${DISTNAME}
d24 1
a24 2
RUN_DEPENDS =		devel/py-gevent \
			net/py-geventhttpclient
a29 1
			devel/py-mock \
a32 1

d34 1
a34 1
	cd ${WRKSRC} && nosetests
@


1.21
log
@update to dulwich 0.11.2

ok shadchin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/09/29 10:51:53 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.11.2
a22 1
MODPY_VERSION =		${MODPY_DEFAULT_VERSION_2}
@


1.20
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/09/23 07:17:00 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.11.1
a7 1
REVISION =		0
a19 1
MASTER_SITES =		${HOMEPAGE:=releases/}
d21 1
@


1.19
log
@- update to 0.11.1
- new homepage; also used as MASTER_SITES now
- fix tests that suffered from monkeypatching in gevent

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/04/07 15:49:25 jca Exp $
d8 1
@


1.18
log
@Add missing test-dep.

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/04/07 05:09:29 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.10.1a
d11 1
a11 1
HOMEPAGE =		http://samba.org/~jelmer/dulwich/
d13 1
a13 1
MAINTAINER =		Dmitrij D. Czarkoff <czarkoff@@gmail.com>
d20 1
a20 2
MODPY_PI =		Yes

@


1.17
log
@update to dulwich 0.10.1a

OK jca@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/04/02 14:21:14 jasper Exp $
d33 1
@


1.16
log
@- switch to MODPY_PI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/03/23 11:06:39 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.10.0
@


1.15
log
@update to dulwich-0.10.0

Fixes CVE-2015-0838.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/10/12 20:57:06 juanfra Exp $
d20 1
a20 1
MASTER_SITES =		${MASTER_SITE_PYPI:=d/dulwich/}
@


1.14
log
@Update to dulwich 0.9.7. From MAINTAINER. Tweaks by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/03/25 16:18:02 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.9.7
d24 1
d36 1
d39 6
@


1.14.2.1
log
@security fix for CVE-2015-0838 python-dulwich: buffer overflow in apply_delta()

originally spotted by sthen@@
ok czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/10/12 20:57:06 juanfra Exp $
a6 1
REVISION =		0
@


1.13
log
@add Dmitrij D. Czarkoff as maintainer, I forgot to add when I committed it
@
text
@d3 1
a3 1
COMMENT =	pure Python implementation of Git file formats and protocols
d5 1
a5 2
MODPY_EGG_VERSION =	0.9.5
REVISION =		0
d16 3
a18 1
PERMIT_PACKAGE_CDROM =		Yes
d25 2
a26 2
TEST_DEPENDS =	devel/py-nose \
		devel/git,-main
d28 6
a33 1
WANTLIB +=	${MODPY_WANTLIB}
@


1.12
log
@update to py-dulwich, from new maintainer Dmitrij D. Czarkoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/10/03 16:37:15 dcoppa Exp $
d6 1
d13 2
@


1.12.2.1
log
@security fix for CVE-2015-0838 python-dulwich: buffer overflow in apply_delta()

originally spotted by sthen@@
ok czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/03/25 16:18:02 sthen Exp $
a6 1
REVISION =		0
@


1.11
log
@Bye bye MODPY_BADEGGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/03/11 10:50:25 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.6.1
a7 1
REVISION =		4
d16 1
a16 1
MASTER_SITES =		${HOMEPAGE}
d21 2
a22 1
TEST_DEPENDS =	devel/py-nose
@


1.10
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/10/15 14:55:43 sthen Exp $
a20 2

MODPY_BADEGGS =		dulwich
@


1.9
log
@zap some trailing whitespace mostly on HOMEPAGE lines
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/09/16 09:24:55 espie Exp $
a15 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d24 1
a24 1
REGRESS_DEPENDS =	devel/py-nose
d28 1
a28 1
do-regress:
@


1.8
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/06/08 17:39:25 jasper Exp $
d20 1
a20 1
MASTER_SITES =		${HOMEPAGE} 
@


1.7
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/05/31 05:44:27 rpointel Exp $
d8 1
a8 1
REVISION =		3
@


1.6
log
@First ports I found which need Add WANTLIB += ${MODPY_WANTLIB}, bump revision.
ok sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/15 19:46:07 espie Exp $
d8 1
a8 1
REVISION =		2
@


1.5
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/09/16 22:59:43 fgsch Exp $
d8 1
a8 1
REVISION =		1
d28 2
@


1.4
log
@Mark it with MODPY_BADEGGS. millert@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/09/14 15:11:22 jasper Exp $
d27 1
a27 1
REGRESS_DEPENDS =	::devel/py-nose
@


1.3
log
@- dependencies changed, so please bump!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/09/14 14:47:59 millert Exp $
d24 2
@


1.2
log
@Add missing dependency on setuptools.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2010/09/02 20:55:37 millert Exp $
d8 1
a8 1
REVISION =		0
@


1.1
log
@Dulwich is a pure-Python implementation of the Git file formats and protocols.
OK martynas@@
@
text
@d1 1
a1 1
# $OpenBSD$
d23 1
@

