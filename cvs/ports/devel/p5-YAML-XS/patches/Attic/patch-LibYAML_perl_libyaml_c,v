head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.01.24.11.08.27;	author benoit;	state dead;
branches;
next	1.1;
commitid	yhwIoetgFEkTaMlL;

1.1
date	2012.03.09.17.09.52;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to p5-YAML-XS-0.58.

ok ajacoutot@@
@
text
@$OpenBSD: patch-LibYAML_perl_libyaml_c,v 1.1 2012/03/09 17:09:52 sthen Exp $

http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=661548
https://rt.cpan.org/Public/Bug/Display.html?id=46507

--- LibYAML/perl_libyaml.c.orig	Sun Apr  3 17:28:08 2011
+++ LibYAML/perl_libyaml.c	Fri Mar  9 12:30:39 2012
@@@@ -188,7 +188,7 @@@@ Load(SV *yaml_sv)
     return;
 
 load_error:
-    croak(loader_error_msg(&loader, NULL));
+    croak("%s", loader_error_msg(&loader, NULL));
 }
 
 /*
@@@@ -271,7 +271,7 @@@@ load_node(perl_yaml_loader_t *loader)
     return return_sv;
 
     load_error:
-        croak(loader_error_msg(loader, NULL));
+        croak("%s", loader_error_msg(loader, NULL));
 }
 
 /*
@@@@ -314,7 +314,7 @@@@ load_mapping(perl_yaml_loader_t *loader, char *tag)
         else if (strlen(tag) <= strlen(prefix) ||
             ! strnEQ(tag, prefix, strlen(prefix))
         ) croak(
-            loader_error_msg(loader, form("bad tag found for hash: '%s'", tag))
+            "%s", loader_error_msg(loader, form("bad tag found for hash: '%s'", tag))
         );
         class = tag + strlen(prefix);
         sv_bless(hash_ref, gv_stashpv(class, TRUE)); 
@@@@ -347,7 +347,7 @@@@ load_sequence(perl_yaml_loader_t *loader)
         else if (strlen(tag) <= strlen(prefix) ||
             ! strnEQ(tag, prefix, strlen(prefix))
         ) croak(
-            loader_error_msg(loader, form("bad tag found for array: '%s'", tag))
+            "%s", loader_error_msg(loader, form("bad tag found for array: '%s'", tag))
         );
         class = tag + strlen(prefix);
         sv_bless(array_ref, gv_stashpv(class, TRUE)); 
@


1.1
log
@actually add the p5-YAML-XS security patch that was intended to have gone in
the previous commit, and bump. pointed out by landry@@, thanks!

--/--
update to p5-YAML-XS (YAML-LibYAML) 0.38 and add a SECURITY patch to fix
format string problems; https://rt.cpan.org/Public/Bug/Display.html?id=46507
--/--
@
text
@d1 1
a1 1
$OpenBSD$
@

