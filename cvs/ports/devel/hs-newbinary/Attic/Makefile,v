head	1.3;
access;
symbols
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	kili_20070721:1.1.1.1
	kili:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2010.04.22.22.20.40;	author kili;	state dead;
branches;
next	1.2;

1.2
date	2007.08.01.22.01.32;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.21.17.17.00;	author kili;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.21.17.17.00;	author kili;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Everything that still needs this will probably not be buildable
with ghc-6.12 and thus is just dead.
@
text
@# $OpenBSD: Makefile,v 1.2 2007/08/01 22:01:32 kili Exp $

COMMENT=	binary serialization library for Haskell

V=		0.1
DISTNAME=	NewBinary-${V}
PKGNAME=	hs-newbinary-${V}
CATEGORIES=	devel

HACKAGE=	http://hackage.haskell.org/
HOMEPAGE=	${HACKAGE}/cgi-bin/hackage-scripts/package/NewBinary-0.1/

MAINTAINER=	Matthias Kilian <kili@@openbsd.org>

# NHC style (some awfully complicated BSD like thing with the option of
# using GPL). See http://www.cs.york.ac.uk/fp/nhc98/copyright.html for
# the full blurb.
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES=	lang/ghc

MASTER_SITES=	${HACKAGE}packages/archive/NewBinary/$V/

CONFIGURE_ARGS=	configure -g --prefix=${PREFIX}
CONFIGURE_ENV=	HOME=${PORTHOME}
SETUP_PROG=	${WRKSRC}/Setup
SUBST_VARS=	V

NO_REGRESS=	Yes

post-install:
.for f in register.sh unregister.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/$f ${PREFIX}/lib/NewBinary-${V}
.endfor

do-configure:
	@@cd ${WRKSRC} && ghc --make -o ${SETUP_PROG} Setup.lhs
	@@cd ${WRKBUILD} && exec ${SETENV} ${CONFIGURE_ENV} \
		${SETUP_PROG} ${CONFIGURE_ARGS}

do-build:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} build
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} register --gen-script
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} unregister --gen-script

do-install:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} copy --destdir=${DESTDIR}

.include <bsd.port.mk>
@


1.2
log
@
Don't use runhaskell and unbreak for amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/21 17:17:00 kili Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d29 1
d40 3
a42 2
	@@cd ${WRKSRC} && exec ${SETENV} ${CONFIGURE_ENV} \
		runhaskell Setup.lhs ${CONFIGURE_ARGS}
d46 1
a46 1
		runhaskell Setup.lhs build
d48 1
a48 1
		runhaskell Setup.lhs register --gen-script
d50 1
a50 1
		runhaskell Setup.lhs unregister --gen-script
d54 1
a54 1
		runhaskell Setup.lhs copy --destdir=${DESTDIR}
@


1.1.1.1
log
@
The NewBinary package is an older binary serialization library for
Haskell used by a number of projects. Consider it legacy code, i.e.
don't use it for new projects.

This port is reqired for security/hs-crypto.
@
text
@@
