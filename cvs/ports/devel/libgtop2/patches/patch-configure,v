head	1.25;
access;
symbols
	OPENBSD_6_1:1.25.0.2
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.24.0.2
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.22.0.8
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.22.0.4
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_4:1.17.0.8
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.17.0.6
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.4
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.4.0.8
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.6
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.25
date	2016.08.21.09.49.41;	author jasper;	state Exp;
branches;
next	1.24;
commitid	V0rGjVruehUWX8h2;

1.24
date	2016.04.20.06.20.38;	author jasper;	state Exp;
branches;
next	1.23;
commitid	t93j0n2r5bzxZbbK;

1.23
date	2015.12.11.14.07.30;	author jasper;	state Exp;
branches;
next	1.22;
commitid	CWQNOsQpFRBLZIfv;

1.22
date	2014.04.29.06.27.57;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2014.02.03.13.46.19;	author ajacoutot;	state dead;
branches;
next	1.20;

1.20
date	2014.02.02.11.33.45;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.11.26.12.01.19;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.08.26.08.43.15;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.08.30.12.24.53;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2011.06.22.15.30.01;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.21.07.19.36;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2011.06.20.21.29.47;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.20.09.03.29;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2011.05.23.18.09.10;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.07.08.09.35;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.25.16.16.32;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.09.30.07.44.35;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.04.08.15.57.46;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.03.30.16.24.24;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.11.02.20.19.06;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.16.10.56.04;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2008.02.09.16.52.25;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.28.14.31.52;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2007.01.18.19.31.34;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2006.04.02.12.21.00;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.25
log
@update to libgtop-2.34.1
@
text
@$OpenBSD: patch-configure,v 1.24 2016/04/20 06:20:38 jasper Exp $
--- configure.orig	Sat Aug 20 16:04:11 2016
+++ configure	Sun Aug 21 11:47:24 2016
@@@@ -19006,8 +19006,8 @@@@ else
 /* end confdefs.h.  */
 
 #include <sys/types.h>
+#include <sys/param.h>
 #include <sys/mount.h>
-#include <sys/fs_types.h>
 int
 main ()
 {
@


1.24
log
@update to libgtop-2.34.0
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.23 2015/12/11 14:07:30 jasper Exp $
--- configure.orig	Tue Mar 22 07:57:32 2016
+++ configure	Mon Apr 18 19:06:09 2016
@@@@ -18222,8 +18222,8 @@@@ else
@


1.23
log
@- update to libgtop2-2.32.0
* various changes, mostly upstream rototilling code
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.22 2014/04/29 06:27:57 jasper Exp $
--- configure.orig	Mon Sep 21 19:08:25 2015
+++ configure	Fri Dec 11 14:19:49 2015
@@@@ -17734,8 +17734,8 @@@@ else
@


1.22
log
@update to libgtop-2.30.0
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Mon Apr 28 23:55:19 2014
+++ configure	Mon Apr 28 23:56:30 2014
@@@@ -17809,8 +17809,8 @@@@ else
@


1.21
log
@Sync with what was committed upstream to bring us closer to what FreeBSD
does.
Properly use the OpenBSD-specific code instead of the common one.

ok jasper@@ (maintainer)
@
text
@d1 4
a4 5
$OpenBSD: patch-configure,v 1.20 2014/02/02 11:33:45 ajacoutot Exp $
--- configure.orig	Mon Aug 19 22:31:42 2013
+++ configure	Sun Feb  2 12:19:54 2014
@@@@ -17547,9 +17547,9 @@@@ else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
d7 1
a8 1
 #include <sys/types.h>
@


1.20
log
@Drop unneeded chunks.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.19 2013/11/26 12:01:19 sthen Exp $
@


1.19
log
@remove a bunch of patches to the autoconf output script that was coping
with lack of inter-lib deps for gettext, ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.18 2013/08/26 08:43:15 ajacoutot Exp $
d3 2
a4 30
+++ configure	Mon Aug 26 10:23:43 2013
@@@@ -7120,10 +7120,12 @@@@ newos6*)
   ;;
 
 openbsd*)
-  if test -z "`echo __ELF__ | $CC -E - | $GREP __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
-    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|\.so|_pic\.a)$'
+  lt_cv_file_magic_cmd=/usr/bin/file
+  lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
+  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`"; then
+    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'
   else
-    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|_pic\.a)$'
+    lt_cv_deplibs_check_method='file_magic OpenBSD.* shared library'
   fi
   ;;
 
@@@@ -16385,11 +16387,6 @@@@ glib_save_datarootdir="$datarootdir"
 test "x$prefix" = xNONE && prefix=$ac_default_prefix
 test "x$exec_prefix" = xNONE && exec_prefix=$prefix
 datarootdir=`eval echo "${datarootdir}"`
-if test "x$CATOBJEXT" = "x.mo" ; then
-  localedir=`eval echo "${libdir}/locale"`
-else
-  localedir=`eval echo "${datadir}/locale"`
-fi
 prefix="$glib_save_prefix"
 exec_prefix="$glib_save_exec_prefix"
 datarootdir="$glib_save_datarootdir"
@@@@ -17547,9 +17544,9 @@@@ else
@


1.18
log
@Update to libgtop2-2.28.5.
No noticeable changes besides our patches being integrated upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.17 2011/08/30 12:24:53 jasper Exp $
a19 63
@@@@ -15031,7 +15033,7 @@@@ if ${ac_cv_lib_intl_strftime+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -15064,7 +15066,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
 if test "x$ac_cv_lib_intl_strftime" = xyes; then :
   $as_echo "#define HAVE_STRFTIME 1" >>confdefs.h
 
-LIBS="-lintl $LIBS"
+LIBS="-lintl -liconv $LIBS"
 fi
 
 fi
@@@@ -15823,7 +15825,7 @@@@ if ${ac_cv_lib_intl_bindtextdomain+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -15860,7 +15862,7 @@@@ if ${ac_cv_lib_intl_ngettext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -15897,7 +15899,7 @@@@ if ${ac_cv_lib_intl_dgettext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -16034,7 +16036,7 @@@@ fi
         #
         if test "$gt_cv_func_dgettext_libintl" = "yes" ; then
           glib_save_LIBS="$LIBS"
-          LIBS="$LIBS -lintl $libintl_extra_libs"
+          LIBS="$LIBS -lintl -liconv $libintl_extra_libs"
           unset ac_cv_func_bind_textdomain_codeset
           for ac_func in bind_textdomain_codeset
 do :
@@@@ -16066,7 +16068,7 @@@@ done
       fi
 
       if test "$gt_cv_func_dgettext_libintl" = "yes"; then
-        INTLLIBS="-lintl $libintl_extra_libs"
+        INTLLIBS="-lintl -liconv $libintl_extra_libs"
       fi
 
       if test "$gt_cv_have_gettext" = "yes"; then
@


1.17
log
@- update libgtop to 2.28.4
* openbsd now has it's own backend
- remove some patch- files that i've committed upstream too
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.16 2011/06/22 15:30:01 jasper Exp $
--- configure.orig	Tue Aug 30 13:48:13 2011
+++ configure	Tue Aug 30 13:51:10 2011
@@@@ -7091,10 +7091,12 @@@@ newos6*)
d20 1
a20 1
@@@@ -15007,7 +15009,7 @@@@ if ${ac_cv_lib_intl_strftime+:} false; then :
d29 1
a29 1
@@@@ -15040,7 +15042,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
d38 1
a38 1
@@@@ -15778,7 +15780,7 @@@@ if ${ac_cv_lib_intl_bindtextdomain+:} false; then :
d47 1
a47 1
@@@@ -15815,7 +15817,7 @@@@ if ${ac_cv_lib_intl_ngettext+:} false; then :
d56 1
a56 1
@@@@ -15852,7 +15854,7 @@@@ if ${ac_cv_lib_intl_dgettext+:} false; then :
d65 1
a65 1
@@@@ -15989,7 +15991,7 @@@@ fi
d74 1
a74 1
@@@@ -16021,7 +16023,7 @@@@ done
d83 1
a83 1
@@@@ -16336,11 +16338,6 @@@@ glib_save_datarootdir="$datarootdir"
d95 1
a95 1
@@@@ -17498,9 +17495,9 @@@@ else
@


1.16
log
@sync with upstream, no package change
@
text
@d1 4
a4 25
$OpenBSD: patch-configure,v 1.15 2011/06/21 07:19:36 jasper Exp $

commit cecf53394ba213c03b7165749eb011d3809de48d
Author: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
Date:   Wed Jun 22 17:22:26 2011 +0200

    Use a more portable construct for doing substitutions.
    
    https://bugzilla.gnome.org/show_bug.cgi?id=652981

--- configure.orig	Fri Mar 25 15:54:05 2011
+++ configure	Mon Jun 20 23:29:15 2011
@@@@ -3231,9 +3231,9 @@@@ $as_echo "$found_introspection" >&6; }
        INTROSPECTION_COMPILER=`$PKG_CONFIG --variable=g_ir_compiler gobject-introspection-1.0`
        INTROSPECTION_GENERATE=`$PKG_CONFIG --variable=g_ir_generate gobject-introspection-1.0`
        INTROSPECTION_GIRDIR=`$PKG_CONFIG --variable=girdir gobject-introspection-1.0`
-       INTROSPECTION_GIRDIR=${INTROSPECTION_GIRDIR/$datadir/\$(datadir)}
+       INTROSPECTION_GIRDIR=`echo ${INTROSPECTION_GIRDIR} | sed -e "s|${datadir}|\\\$(datadir)|"`
        INTROSPECTION_TYPELIBDIR="$($PKG_CONFIG --variable=typelibdir gobject-introspection-1.0)"
-       INTROSPECTION_TYPELIBDIR=${INTROSPECTION_TYPELIBDIR/$libdir/\$(libdir)}
+       INTROSPECTION_TYPELIBDIR=`echo ${INTROSPECTION_TYPELIBDIR} | sed -e "s|${libdir}|\\\$(libdir)|"`
        INTROSPECTION_CFLAGS=`$PKG_CONFIG --cflags gobject-introspection-1.0`
        INTROSPECTION_LIBS=`$PKG_CONFIG --libs gobject-introspection-1.0`
        INTROSPECTION_MAKEFILE=`$PKG_CONFIG --variable=datadir gobject-introspection-1.0`/gobject-introspection-1.0/Makefile.introspection
@@@@ -7006,10 +7006,12 @@@@ newos6*)
d20 1
a20 21
@@@@ -13049,12 +13051,18 @@@@ $as_echo_n "checking for libgtop sysdeps directory... 
 	  libgtop_sysdeps_private_mountlist=yes
 	  libgtop_sysdeps_private_fsusage=yes
 	  ;;
-	netbsd*|openbsd*|bsdi*)
+	netbsd*|bsdi*)
 	  libgtop_sysdeps_dir=bsd
 	  libgtop_use_machine_h=yes
 	  libgtop_need_server=yes
 	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2755 $(bindir)/libgtop_server2'
 	  ;;
+	openbsd*)
+	  libgtop_sysdeps_dir=openbsd
+	  libgtop_use_machine_h=yes
+	  libgtop_need_server=yes
+	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2555 $(bindir)/libgtop_server2'
+	  ;;
 	freebsd*|kfreebsd*)
 	  libgtop_sysdeps_dir=freebsd
 	  libgtop_use_machine_h=yes
@@@@ -14903,7 +14911,7 @@@@ if ${ac_cv_lib_intl_strftime+:} false; then :
d29 1
a29 1
@@@@ -14936,7 +14944,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
d38 1
a38 1
@@@@ -15674,7 +15682,7 @@@@ if ${ac_cv_lib_intl_bindtextdomain+:} false; then :
d47 1
a47 1
@@@@ -15711,7 +15719,7 @@@@ if ${ac_cv_lib_intl_ngettext+:} false; then :
d56 1
a56 1
@@@@ -15748,7 +15756,7 @@@@ if ${ac_cv_lib_intl_dgettext+:} false; then :
d65 1
a65 1
@@@@ -15885,7 +15893,7 @@@@ fi
d74 1
a74 1
@@@@ -15917,7 +15925,7 @@@@ done
d83 1
a83 1
@@@@ -16232,11 +16240,6 @@@@ glib_save_datarootdir="$datarootdir"
d95 1
a95 1
@@@@ -17394,9 +17397,9 @@@@ else
a105 9
@@@@ -18280,7 +18283,7 @@@@ fi
 
 
 
-ac_config_files="$ac_config_files Makefile libgtop.spec po/Makefile.in misc/Makefile include/Makefile include/glibtop/Makefile sysdeps/Makefile sysdeps/common/Makefile sysdeps/stub/Makefile sysdeps/stub_suid/Makefile sysdeps/sun4/Makefile sysdeps/osf1/Makefile sysdeps/linux/Makefile sysdeps/freebsd/Makefile sysdeps/solaris/Makefile sysdeps/aix/Makefile sysdeps/bsd/Makefile sysdeps/darwin/Makefile sysdeps/cygwin/Makefile src/Makefile src/daemon/Makefile lib/Makefile examples/Makefile doc/Makefile doc/reference/Makefile doc/reference/version.xml libgtop-2.0.pc libgtopconfig.h"
+ac_config_files="$ac_config_files Makefile libgtop.spec po/Makefile.in misc/Makefile include/Makefile include/glibtop/Makefile sysdeps/Makefile sysdeps/common/Makefile sysdeps/stub/Makefile sysdeps/stub_suid/Makefile sysdeps/sun4/Makefile sysdeps/osf1/Makefile sysdeps/linux/Makefile sysdeps/freebsd/Makefile sysdeps/solaris/Makefile sysdeps/aix/Makefile sysdeps/bsd/Makefile sysdeps/darwin/Makefile sysdeps/cygwin/Makefile sysdeps/openbsd/Makefile src/Makefile src/daemon/Makefile lib/Makefile examples/Makefile doc/Makefile doc/reference/Makefile doc/reference/version.xml libgtop-2.0.pc libgtopconfig.h"
 
 
 cat >confcache <<\_ACEOF
@


1.15
log
@tweak comment
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.14 2011/06/20 21:29:47 jasper Exp $
d3 1
a3 1
commit 51afc705520a03618f34c9320302688e88e05316
d5 1
a5 1
Date:   Mon Jun 20 10:59:56 2011 +0200
@


1.14
log
@remove unused chunk now that we have our own implementation
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.13 2011/06/20 09:03:29 jasper Exp $
d3 3
a5 1
./configure[3240]: ${INTROSPECTION_GIRDIR/$datadir/\$(datadir)}: bad substitution
d7 3
a9 1
https://bugzilla.gnome.org/show_bug.cgi?id=652981
@


1.13
log
@- add links to bugzilla;
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.12 2011/05/23 18:09:10 jasper Exp $
d8 1
a8 1
+++ configure	Mon May 23 19:46:25 2011
d46 1
a46 2
-	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2755 $(bindir)/libgtop_server2'
+	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2555 $(bindir)/libgtop_server2'
@


1.12
log
@the openbsd code has diverged too much from the freebsd and generic bsd code
to be easily maintainable. so instead move it to files/ for now untill it
gets incorporated upstream.

discussed with aja@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.11 2011/04/07 08:09:35 ajacoutot Exp $
d4 2
@


1.11
log
@Add introspection support (needed for on-going GNOME 3 work).
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.10 2011/03/25 16:16:32 ajacoutot Exp $
d5 2
a6 2
--- configure.orig	Thu Apr  7 10:05:32 2011
+++ configure	Thu Apr  7 10:05:19 2011
d35 6
a40 1
@@@@ -13053,7 +13055,7 @@@@ $as_echo_n "checking for libgtop sysdeps directory... 
d47 6
d55 2
a56 1
@@@@ -14903,7 +14905,7 @@@@ if ${ac_cv_lib_intl_strftime+:} false; then :
d65 1
a65 1
@@@@ -14936,7 +14938,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
d74 1
a74 1
@@@@ -15674,7 +15676,7 @@@@ if ${ac_cv_lib_intl_bindtextdomain+:} false; then :
d83 1
a83 1
@@@@ -15711,7 +15713,7 @@@@ if ${ac_cv_lib_intl_ngettext+:} false; then :
d92 1
a92 1
@@@@ -15748,7 +15750,7 @@@@ if ${ac_cv_lib_intl_dgettext+:} false; then :
d101 1
a101 1
@@@@ -15885,7 +15887,7 @@@@ fi
d110 1
a110 1
@@@@ -15917,7 +15919,7 @@@@ done
d119 1
a119 1
@@@@ -16232,11 +16234,6 @@@@ glib_save_datarootdir="$datarootdir"
d131 1
a131 1
@@@@ -17394,9 +17391,9 @@@@ else
d142 9
@


1.10
log
@Maintenance update to libgtop2-2.28.3.
@
text
@d1 18
a18 3
$OpenBSD: patch-configure,v 1.9 2010/09/30 07:44:35 ajacoutot Exp $
--- configure.orig	Fri Mar 25 17:08:37 2011
+++ configure	Fri Mar 25 17:11:52 2011
@


1.9
log
@Update to libgtop2-2.28.2.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.8 2010/04/08 15:57:46 ajacoutot Exp $
--- configure.orig	Tue Sep 28 11:37:06 2010
+++ configure	Tue Sep 28 15:14:22 2010
@@@@ -6727,10 +6727,12 @@@@ newos6*)
d20 3
a22 1
@@@@ -12021,6 +12023,11 @@@@ $as_echo_n "checking for libgtop sysdeps directory... 
d24 2
a25 1
 	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2755 $(bindir)/libgtop_server2'
a26 5
+	openbsd*)
+	  libgtop_sysdeps_dir=bsd
+	  libgtop_use_machine_h=yes
+	  libgtop_need_server=yes
+	  ;;
d29 1
a29 2
 	  libgtop_use_machine_h=yes
@@@@ -13985,7 +13992,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then :
d38 2
a39 2
@@@@ -14018,7 +14025,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
 if test "x$ac_cv_lib_intl_strftime" = x""yes; then :
d47 1
a47 1
@@@@ -14756,7 +14763,7 @@@@ if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; 
d56 1
a56 1
@@@@ -14793,7 +14800,7 @@@@ if test "${ac_cv_lib_intl_ngettext+set}" = set; then :
d65 1
a65 1
@@@@ -14830,7 +14837,7 @@@@ if test "${ac_cv_lib_intl_dgettext+set}" = set; then :
d74 10
a83 1
@@@@ -14999,7 +15006,7 @@@@ done
d92 1
a92 1
@@@@ -15314,11 +15321,6 @@@@ glib_save_datarootdir="$datarootdir"
d104 1
a104 1
@@@@ -16476,9 +16478,9 @@@@ else
@


1.8
log
@Remove the post-install target, we set permissions with PLIST markers.
Fix some ifdef mess in sysdeps/bsd/procmem.c.
Fix some warnings and implicit references.
Fix subnet display.
Bring a couple of patches from FreeBSD.

This is still not perfect but libgtop2 is now much more robust.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2010/03/30 16:24:24 ajacoutot Exp $
--- configure.orig	Tue Mar 30 17:10:07 2010
+++ configure	Mon Apr  5 14:10:33 2010
@@@@ -6934,10 +6934,12 @@@@ newos6*)
d20 1
a20 1
@@@@ -12826,6 +12828,11 @@@@ $as_echo_n "checking for libgtop sysdeps directory... 
d32 1
a32 1
@@@@ -18246,7 +18253,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d38 6
a43 6
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -18310,7 +18317,7 @@@@ if test "x$ac_cv_lib_intl_strftime" = x""yes; then
 #define HAVE_STRFTIME 1
 _ACEOF
d50 1
a50 1
@@@@ -19721,7 +19728,7 @@@@ if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; 
d56 4
a59 4
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -19787,7 +19794,7 @@@@ if test "${ac_cv_lib_intl_ngettext+set}" = set; then
d65 4
a68 4
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -19853,7 +19860,7 @@@@ if test "${ac_cv_lib_intl_dgettext+set}" = set; then
d74 13
a86 4
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -20721,11 +20728,6 @@@@ glib_save_datarootdir="$datarootdir"
d98 2
a99 10
@@@@ -22880,6 +22882,7 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#include <sys/param.h>
 #include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
@@@@ -23391,9 +23394,9 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
@


1.7
log
@Minor update to libgtop2-2.28.1.
(only translations updates)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.6 2009/11/02 20:19:06 jasper Exp $
--- configure.orig	Tue Mar 30 18:14:23 2010
+++ configure	Tue Mar 30 18:17:52 2010
d89 9
a97 1
@@@@ -23391,9 +23393,9 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.6
log
@- fix a check in configure and first stab at working mountlist.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2009/10/16 10:56:04 jasper Exp $
--- configure.orig	Mon Sep 21 09:57:13 2009
+++ configure	Thu Oct 29 00:15:14 2009
@@@@ -6763,10 +6763,12 @@@@ newos6*)
d20 1
a20 1
@@@@ -12643,6 +12645,11 @@@@ echo $ECHO_N "checking for libgtop sysdeps directory..
d32 2
a33 2
@@@@ -17730,7 +17737,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d41 11
a51 2
@@@@ -19020,7 +19027,7 @@@@ if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; 
   echo $ECHO_N "(cached) $ECHO_C" >&6
d59 2
a60 2
@@@@ -19082,7 +19089,7 @@@@ if test "${ac_cv_lib_intl_ngettext+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d68 2
a69 2
@@@@ -19144,7 +19151,7 @@@@ if test "${ac_cv_lib_intl_dgettext+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d77 1
a77 1
@@@@ -19978,11 +19985,6 @@@@ glib_save_datarootdir="$datarootdir"
d89 1
a89 1
@@@@ -22536,9 +22538,9 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.5
log
@- update libgtop2 to 2.28.0
* it's not any less broken than the previous version, but at least it
gives us a recent base to hack on.

aja@@ agrees
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.4 2008/02/09 16:52:25 ajacoutot Exp $
d3 1
a3 1
+++ configure	Fri Oct 16 02:55:53 2009
d84 1
a84 1
+#include <sys/param.>
@


1.4
log
@- update to 2.20.1
Note that it does not work better than previous in-tree version but it
will give us a better base to fix it.

joint work with jasper@@
most patches adapted from NetBSD
fsusage patch from naddy@@

ok jasper@@
@
text
@d1 4
a4 5
$OpenBSD: patch-configure,v 1.3 2007/12/28 14:31:52 jasper Exp $
--- configure.orig	Sat Jan  5 14:49:53 2008
+++ configure	Sat Feb  2 00:21:13 2008
@@@@ -6192,6 +6192,16 @@@@ freebsd* | dragonfly*)
   fi
d7 3
a9 1
+openbsd*)
d14 2
a15 1
+  else
d17 1
a17 5
+  fi
+  ;;
+
 gnu*)
   lt_cv_deplibs_check_method=pass_all
d19 2
a20 3
@@@@ -21132,7 +21142,6 @@@@ echo $ECHO_N "checking for libgtop sysdeps directory..
 	  libgtop_sysdeps_dir=bsd
 	  libgtop_use_machine_h=yes
d22 1
a22 1
-	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2755 $(bindir)/libgtop_server2'
d24 5
d31 2
a32 1
@@@@ -26192,7 +26201,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d41 1
a41 1
@@@@ -27368,7 +27377,7 @@@@ if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; 
d50 1
a50 1
@@@@ -27430,7 +27439,7 @@@@ if test "${ac_cv_lib_intl_ngettext+set}" = set; then
d59 1
a59 1
@@@@ -27492,7 +27501,7 @@@@ if test "${ac_cv_lib_intl_dgettext+set}" = set; then
d68 1
a68 1
@@@@ -28326,11 +28335,7 @@@@ glib_save_datarootdir="$datarootdir"
d75 1
a75 1
   localedir=`eval echo "${datadir}/locale"`
d80 1
a80 2
@@@@ -30388,6 +30393,7 @@@@ _ACEOF
 cat confdefs.h >>conftest.$ac_ext
d83 8
a90 4
+#include <sys/param.h>
 $ac_includes_default
 #include <$ac_header>
 _ACEOF
@


1.3
log
@- convert to use gnome.port.mk
- regen patches
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2007/01/18 19:31:34 jasper Exp $
--- configure.orig	Thu Jan 11 21:37:51 2007
+++ configure	Fri Dec 28 15:29:17 2007
@@@@ -6185,6 +6185,16 @@@@ freebsd* | dragonfly*)
d11 1
a11 1
+  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
d21 2
a22 2
@@@@ -20874,7 +20884,6 @@@@ echo $ECHO_N "checking for libgtop sysdeps directory..
 	  libgtop_sysdeps_dir=freebsd
d25 1
a25 1
-	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server && chmod 2755 $(bindir)/libgtop_server'
d27 3
a29 11
 	solaris*)
 	  libgtop_sysdeps_dir=solaris
@@@@ -21382,6 +21391,7 @@@@ else
 	    for def in nothing KERNEL _KERNEL; do
 	      cat >conftest.$ac_ext <<_ACEOF
 #define $def
+#include <sys/types.h>
 #include <sys/ipc.h>
 #include <sys/msg.h>
 #include <stdio.h>
@@@@ -26161,7 +26171,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d38 8
a45 2
@@@@ -26221,7 +26231,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
 #define HAVE_STRFTIME 1
d47 5
a51 2
 
-LIBS="-lintl $LIBS"
d53 4
a56 4
 fi
 
 fi
@@@@ -27365,7 +27375,7 @@@@ if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; 
d61 1
a61 1
+LIBS="-lintl  -liconv $LIBS"
d65 20
a84 18
@@@@ -27701,7 +27711,7 @@@@ fi
         #
         if test "$gt_cv_func_dgettext_libintl" = "yes" ; then
           glib_save_LIBS="$LIBS"
-          LIBS="$LIBS -lintl $libintl_extra_libs"
+          LIBS="$LIBS -lintl -liconv $libintl_extra_libs"
           unset ac_cv_func_bind_textdomain_codeset
 
 for ac_func in bind_textdomain_codeset
@@@@ -27816,7 +27826,7 @@@@ done
       fi
 
       if test "$gt_cv_func_dgettext_libintl" = "yes"; then
-        INTLLIBS="-lintl $libintl_extra_libs"
+        INTLLIBS="-lintl -liconv $libintl_extra_libs"
       fi
 
       if test "$gt_cv_have_gettext" = "yes"; then
@


1.2
log
@update libgtop2 to 2.14.6

based on work by Alexander Wirt <alexander.wirt@@credativ.de>

ok ajacoutot@@
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.orig	Wed Jan 17 08:48:59 2007
+++ configure	Wed Jan 17 08:55:18 2007
d21 1
a21 1
@@@@ -20874,7 +20884,6 @@@@ echo $ECHO_N "checking for libgtop sysde
d37 1
a37 1
@@@@ -26161,7 +26171,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}"
d46 1
a46 1
@@@@ -26221,7 +26231,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; 
d55 1
a55 1
@@@@ -27365,7 +27375,7 @@@@ if test "${ac_cv_lib_intl_bindtextdomain
@


1.1
log
@don't try to mess with /usr/local/bin/libgtop_server in libgtop_postinstall
correctly mark special permissions of libgtop_server2
@
text
@d2 20
a21 3
--- configure.orig	Sun Apr  2 14:13:28 2006
+++ configure	Sun Apr  2 14:14:22 2006
@@@@ -20141,7 +20141,7 @@@@ echo $ECHO_N "checking for libgtop sysde
a25 1
+	  libgtop_postinstall=
d29 53
@

