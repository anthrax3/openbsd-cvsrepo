head	1.6;
access;
symbols
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2014.04.29.06.27.57;	author jasper;	state dead;
branches;
next	1.5;

1.5
date	2014.03.31.09.34.52;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2014.02.03.13.50.32;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2014.02.03.13.46.19;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.01.06.06.35;	author marcm;	state dead;
branches;
next	1.1;

1.1
date	2004.02.10.00.47.57;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to libgtop-2.30.0
@
text
@$OpenBSD: patch-libgtop-sysdeps_m4,v 1.5 2014/03/31 09:34:52 ajacoutot Exp $

RM at next release.

--- libgtop-sysdeps.m4.orig	Mon Mar 31 10:55:50 2014
+++ libgtop-sysdeps.m4	Mon Mar 31 10:55:54 2014
@@@@ -79,6 +79,8 @@@@ AC_DEFUN([GNOME_LIBGTOP_SYSDEPS],[
 	  libgtop_sysdeps_dir=openbsd
 	  libgtop_use_machine_h=yes
 	  libgtop_need_server=yes
+	  libgtop_sysdeps_private_mountlist=yes
+	  libgtop_sysdeps_private_fsusage=yes
 	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server2 && chmod 2555 $(bindir)/libgtop_server2'
 	  ;;
 	freebsd*|kfreebsd*)
@@@@ -172,7 +174,10 @@@@ AC_DEFUN([GNOME_LIBGTOP_SYSDEPS],[
 
 	  AC_SUBST(EXTRA_SYSDEPS_LIBS)
 
-	  AC_CHECK_HEADERS(net/if_var.h)
+	  AC_CHECK_HEADERS(net/if_var.h,,, [
+#include <net/if.h>
+#include <sys/types.h>
+#include <sys/socket.h>])
 	  AC_MSG_CHECKING([for I4B])
 	  AC_TRY_COMPILE([
 #include <sys/types.h>
@


1.5
log
@Tweak patching a bit and regen PLIST.
@
text
@d1 1
a1 1
$OpenBSD: patch-libgtop-sysdeps_m4,v 1.4 2014/02/03 13:50:32 ajacoutot Exp $
@


1.4
log
@Explicitely mark all files that can be removed when the next release is out.
@
text
@d1 1
a1 1
$OpenBSD: patch-libgtop-sysdeps_m4,v 1.3 2014/02/03 13:46:19 ajacoutot Exp $
d5 2
a6 2
--- libgtop-sysdeps.m4.orig	Sat Jul 27 14:40:23 2013
+++ libgtop-sysdeps.m4	Sun Feb  2 14:20:59 2014
d16 12
@


1.3
log
@Sync with what was committed upstream to bring us closer to what FreeBSD
does.
Properly use the OpenBSD-specific code instead of the common one.

ok jasper@@ (maintainer)
@
text
@d1 4
a4 1
$OpenBSD$
@


1.2
log
@Update to 2.6.0.  Get rid of the custom OpenBSD support from the
former nino@@ that has been a part of this port for some time.
Updates to the internal API finally broke it, but a huge thanks
to Nils for his work there (thanks Nils!).

Now we use the Free/NetBSD support as a base and patch from there :).
@
text
@d1 5
a5 10
$OpenBSD: patch-libgtop-sysdeps_m4,v 1.1 2004/02/10 00:47:57 espie Exp $
--- libgtop-sysdeps.m4.orig	2004-02-10 01:38:26.000000000 +0100
+++ libgtop-sysdeps.m4	2004-02-10 01:39:18.000000000 +0100
@@@@ -121,12 +121,18 @@@@ AC_DEFUN([GNOME_LIBGTOP_SYSDEPS],[
 	  fi
 	  libgtop_need_server=no
 	  ;;
-	freebsd*|netbsd*|openbsd*|bsdi*)
+	freebsd*|netbsd*|bsdi*)
 	  libgtop_sysdeps_dir=freebsd
d8 3
a10 1
 	  libgtop_postinstall='chgrp kmem $(bindir)/libgtop_server && chmod 2755 $(bindir)/libgtop_server'
d12 1
a12 9
+	openbsd*)
+	  libgtop_sysdeps_dir=openbsd
+	  libgtop_use_machine_h=yes
+	  libgtop_need_server=yes
+	  libgtop_postinstall='chgrp kmem $(DESTDIR)$(bindir)/libgtop_server && chmod 2755 $(DESTDIR)$(bindir)/libgtop_server2'
+	  ;;
 	solaris*)
 	  libgtop_sysdeps_dir=solaris
 	  libgtop_use_machine_h=yes
@


1.1
log
@try to prevent automake from running, if present.
even if it runs, ensure the OpenBSD setup will be recognized.
@
text
@d1 1
a1 1
$OpenBSD$
@

