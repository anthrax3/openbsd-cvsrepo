head	1.2;
access;
symbols
	OPENBSD_4_9:1.1.0.14
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.12
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.10
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.8
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.6
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.4
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.05.23.18.09.10;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2008.02.09.16.52.25;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@the openbsd code has diverged too much from the freebsd and generic bsd code
to be easily maintainable. so instead move it to files/ for now untill it
gets incorporated upstream.

discussed with aja@@
@
text
@$OpenBSD: patch-sysdeps_bsd_sem_limits_c,v 1.1 2008/02/09 16:52:25 ajacoutot Exp $
--- sysdeps/bsd/sem_limits.c.orig	Fri Dec 28 17:16:24 2007
+++ sysdeps/bsd/sem_limits.c	Fri Dec 28 17:26:07 2007
@@@@ -55,7 +55,10 @@@@ glibtop_get_sem_limits_p (glibtop *server, glibtop_sem
 #include <sys/sem.h>
 
 static unsigned long _glibtop_sysdeps_sem_limits =
-(1L << GLIBTOP_IPC_SEMMAP) + (1L << GLIBTOP_IPC_SEMMNI) +
+#ifndef __OpenBSD__
+(1L << GLIBTOP_IPC_SEMMAP) +
+#endif
+(1L << GLIBTOP_IPC_SEMMNI) +
 (1L << GLIBTOP_IPC_SEMMNS) + (1L << GLIBTOP_IPC_SEMMNU) +
 (1L << GLIBTOP_IPC_SEMMSL) + (1L << GLIBTOP_IPC_SEMOPM) +
 (1L << GLIBTOP_IPC_SEMUME) + (1L << GLIBTOP_IPC_SEMUSZ) +
@@@@ -103,7 +106,9 @@@@ glibtop_get_sem_limits_p (glibtop *server, glibtop_sem
 	if (server->sysdeps.sem_limits == 0)
 		return;
 
+#ifndef __OpenBSD__
 	buf->semmap = _seminfo.semmap;
+#endif
 	buf->semmni = _seminfo.semmni;
 	buf->semmns = _seminfo.semmns;
 	buf->semmnu = _seminfo.semmnu;
@


1.1
log
@- update to 2.20.1
Note that it does not work better than previous in-tree version but it
will give us a better base to fix it.

joint work with jasper@@
most patches adapted from NetBSD
fsusage patch from naddy@@

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
@

