head	1.5;
access;
symbols
	OPENBSD_5_4:1.4.0.16
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.14
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.12
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.10
	OPENBSD_5_0:1.4.0.8
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.6
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2014.02.08.10.55.31;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2009.10.16.10.56.04;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.09.16.52.25;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.02.21.17.27.54;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.18.19.31.34;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Drop unecessary checks and bring glibtop_get_proc_segment from FreeBSD.
@
text
@$OpenBSD: patch-src_daemon_gnuserv_c,v 1.4 2009/10/16 10:56:04 jasper Exp $
--- src/daemon/gnuserv.c.orig	Sun Apr 19 01:29:49 2009
+++ src/daemon/gnuserv.c	Fri Oct 16 02:28:09 2009
@@@@ -203,6 +203,12 @@@@ permitted (u_long host_addr, int fd)
 	    return FALSE;
 	}
 
+	if (auth_data_len < 1 || auth_data_len > sizeof(buf)) {
+		syslog_message(LOG_WARNING,
+			       "Invalid data length supplied by client");
+		return FALSE;
+	}
+
 	if (timed_read (fd, buf, auth_data_len, AUTH_TIMEOUT, 0) != auth_data_len)
 	    return FALSE;
 
@


1.4
log
@- update libgtop2 to 2.28.0
* it's not any less broken than the previous version, but at least it
gives us a recent base to hack on.

aja@@ agrees
@
text
@d1 1
a1 1
$OpenBSD: patch-src_daemon_gnuserv_c,v 1.3 2008/02/09 16:52:25 ajacoutot Exp $
@


1.3
log
@- update to 2.20.1
Note that it does not work better than previous in-tree version but it
will give us a better base to fix it.

joint work with jasper@@
most patches adapted from NetBSD
fsusage patch from naddy@@

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_daemon_gnuserv_c,v 1.2 2007/02/21 17:27:54 steven Exp $
--- src/daemon/gnuserv.c.orig	Sat May 12 23:54:57 2007
+++ src/daemon/gnuserv.c	Fri Dec 28 18:53:17 2007
@@@@ -206,6 +206,12 @@@@ permitted (u_long host_addr, int fd)
@


1.2
log
@fix texinfo stuff, regen patches, rerun makesum

from Moritz Grimm <mlist at scapa.dnsalias.net>

ok espie@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/daemon/gnuserv.c.orig	Tue Jan  2 23:50:27 2007
+++ src/daemon/gnuserv.c	Sun Feb 18 20:23:18 2007
@@@@ -207,6 +207,12 @@@@ permitted (u_long host_addr, int fd)
@


1.1
log
@update libgtop2 to 2.14.6

based on work by Alexander Wirt <alexander.wirt@@credativ.de>

ok ajacoutot@@
@
text
@d2 3
a4 3
--- src/daemon/gnuserv.c	2006-09-22 15:39:45.000000000 +0200
+++ src/daemon/gnuserv.c	2006-09-22 16:08:41.000000000 +0200
@@@@ -207,6 +207,12 @@@@
@

