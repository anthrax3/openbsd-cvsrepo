head	1.7;
access;
symbols
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2011.05.23.18.09.10;	author jasper;	state dead;
branches;
next	1.6;

1.6
date	2011.03.25.16.16.32;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.09.30.07.44.35;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.04.18.12.32.09;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.04.11.12.38.56;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.30.16.24.24;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.16.10.56.04;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.7
log
@the openbsd code has diverged too much from the freebsd and generic bsd code
to be easily maintainable. so instead move it to files/ for now untill it
gets incorporated upstream.

discussed with aja@@
@
text
@$OpenBSD: patch-sysdeps_bsd_Makefile_in,v 1.6 2011/03/25 16:16:32 ajacoutot Exp $
--- sysdeps/bsd/Makefile.in.orig	Fri Mar 25 15:54:07 2011
+++ sysdeps/bsd/Makefile.in	Fri Mar 25 16:25:38 2011
@@@@ -53,7 +53,8 @@@@ CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
 LTLIBRARIES = $(noinst_LTLIBRARIES)
 libgtop_sysdeps_2_0_la_LIBADD =
-am_libgtop_sysdeps_2_0_la_OBJECTS = nosuid.lo siglist.lo sysinfo.lo
+am_libgtop_sysdeps_2_0_la_OBJECTS = nosuid.lo siglist.lo sysinfo.lo \
+				    procwd.lo procaffinity.lo glibtop_private.lo
 libgtop_sysdeps_2_0_la_OBJECTS = $(am_libgtop_sysdeps_2_0_la_OBJECTS)
 libgtop_sysdeps_2_0_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
@@@@ -305,7 +306,7 @@@@ top_build_prefix = @@top_build_prefix@@
 top_builddir = @@top_builddir@@
 top_srcdir = @@top_srcdir@@
 noinst_LTLIBRARIES = libgtop_sysdeps-2.0.la libgtop_sysdeps_suid-2.0.la
-libgtop_sysdeps_2_0_la_SOURCES = nosuid.c siglist.c sysinfo.c
+libgtop_sysdeps_2_0_la_SOURCES = nosuid.c siglist.c sysinfo.c procwd.c procaffinity.c glibtop_private.c
 libgtop_sysdeps_2_0_la_LDFLAGS = $(LT_VERSION_INFO)
 libgtop_sysdeps_suid_2_0_la_LIBADD = $(KVM_LIBS)
 libgtop_sysdeps_suid_2_0_la_SOURCES = open.c close.c cpu.c mem.c swap.c \
@@@@ -317,7 +318,7 @@@@ libgtop_sysdeps_suid_2_0_la_SOURCES = open.c close.c c
 
 libgtop_sysdeps_suid_2_0_la_LDFLAGS = $(LT_VERSION_INFO)
 libgtopinclude_HEADERS = glibtop_server.h glibtop_machine.h \
-				  glibtop_suid.h
+				  glibtop_suid.h glibtop_private.h
 
 libgtopincludedir = $(includedir)/libgtop-2.0
 all: all-am
@@@@ -377,6 +378,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/close.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/cpu.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/fsusage.Plo@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/glibtop_private.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/loadavg.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/mem.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/msg_limits.Plo@@am__quote@@
@@@@ -385,6 +387,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/nosuid.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/open.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/ppp.Plo@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/procaffinity.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/procargs.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/prockernel.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/proclist.Plo@@am__quote@@
@@@@ -396,6 +399,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/procstate.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/proctime.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/procuid.Plo@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/procwd.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/sem_limits.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/shm_limits.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/siglist.Plo@@am__quote@@
@


1.6
log
@Maintenance update to libgtop2-2.28.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-sysdeps_bsd_Makefile_in,v 1.5 2010/09/30 07:44:35 ajacoutot Exp $
@


1.5
log
@Update to libgtop2-2.28.2.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-sysdeps_bsd_Makefile_in,v 1.4 2010/04/18 12:32:09 ajacoutot Exp $
--- sysdeps/bsd/Makefile.in.orig	Tue Sep 28 11:37:08 2010
+++ sysdeps/bsd/Makefile.in	Tue Sep 28 14:52:41 2010
@@@@ -49,7 +49,8 @@@@ CONFIG_CLEAN_FILES =
d14 1
a14 1
@@@@ -291,7 +292,7 @@@@ top_build_prefix = @@top_build_prefix@@
d23 1
a23 1
@@@@ -303,7 +304,7 @@@@ libgtop_sysdeps_suid_2_0_la_SOURCES = open.c close.c c
d32 1
a32 1
@@@@ -363,6 +364,7 @@@@ distclean-compile:
d40 1
a40 1
@@@@ -371,6 +373,7 @@@@ distclean-compile:
d48 1
a48 1
@@@@ -382,6 +385,7 @@@@ distclean-compile:
@


1.4
log
@Implements procwd and procopenfiles using a wrapper around lsof(8)
(from FreeBSD sysdeps directory).
Merge proctime.c patch from pkgsrc.
Several other cleanings.
@
text
@d1 3
a3 3
$OpenBSD: patch-sysdeps_bsd_Makefile_in,v 1.3 2010/04/11 12:38:56 ajacoutot Exp $
--- sysdeps/bsd/Makefile.in.orig	Tue Mar 30 17:10:14 2010
+++ sysdeps/bsd/Makefile.in	Sun Apr 18 13:54:34 2010
d14 1
a14 1
@@@@ -288,7 +289,7 @@@@ top_build_prefix = @@top_build_prefix@@
d23 1
a23 1
@@@@ -300,7 +301,7 @@@@ libgtop_sysdeps_suid_2_0_la_SOURCES = open.c close.c c
d32 1
a32 1
@@@@ -360,6 +361,7 @@@@ distclean-compile:
d40 1
a40 1
@@@@ -368,6 +370,7 @@@@ distclean-compile:
d48 1
a48 1
@@@@ -379,6 +382,7 @@@@ distclean-compile:
@


1.3
log
@Actually compile the procaffinity stub.
Fix a double free, found out while working on an upcoming
gnome-system-monitor port.
@
text
@d1 1
a1 1
$OpenBSD: patch-sysdeps_bsd_Makefile_in,v 1.2 2010/03/30 16:24:24 ajacoutot Exp $
d3 1
a3 1
+++ sysdeps/bsd/Makefile.in	Sat Apr 10 18:05:08 2010
d10 1
a10 1
+				    procaffinity.lo
d19 1
a19 1
+libgtop_sysdeps_2_0_la_SOURCES = nosuid.c siglist.c sysinfo.c procaffinity.c
d23 18
a40 1
@@@@ -368,6 +369,7 @@@@ distclean-compile:
d48 8
@


1.2
log
@Minor update to libgtop2-2.28.1.
(only translations updates)
@
text
@d1 1
a1 1
$OpenBSD: patch-sysdeps_bsd_Makefile_in,v 1.1 2009/10/16 10:56:04 jasper Exp $
d3 20
a22 20
+++ sysdeps/bsd/Makefile.in	Tue Mar 30 18:10:50 2010
@@@@ -61,7 +61,7 @@@@ am_libgtop_sysdeps_suid_2_0_la_OBJECTS = open.lo close
 	msg_limits.lo sem_limits.lo proclist.lo procstate.lo \
 	procuid.lo proctime.lo procmem.lo procsignal.lo prockernel.lo \
 	procsegment.lo procargs.lo procmap.lo netlist.lo netload.lo \
-	ppp.lo procopenfiles.lo fsusage.lo
+	ppp.lo procopenfiles.lo fsusage.lo procaffinity.lo
 libgtop_sysdeps_suid_2_0_la_OBJECTS =  \
 	$(am_libgtop_sysdeps_suid_2_0_la_OBJECTS)
 libgtop_sysdeps_suid_2_0_la_LINK = $(LIBTOOL) --tag=CC \
@@@@ -296,7 +296,8 @@@@ libgtop_sysdeps_suid_2_0_la_SOURCES = open.c close.c c
 				  sem_limits.c proclist.c procstate.c procuid.c \
 				  proctime.c procmem.c procsignal.c prockernel.c \
 				  procsegment.c procargs.c procmap.c netlist.c \
-				  netload.c ppp.c procopenfiles.c fsusage.c
+				  netload.c ppp.c procopenfiles.c fsusage.c \
+				  procaffinity.c
 
 libgtop_sysdeps_suid_2_0_la_LDFLAGS = $(LT_VERSION_INFO)
 libgtopinclude_HEADERS = glibtop_server.h glibtop_machine.h \
@


1.1
log
@- update libgtop2 to 2.28.0
* it's not any less broken than the previous version, but at least it
gives us a recent base to hack on.

aja@@ agrees
@
text
@d1 4
a4 4
$OpenBSD$
--- sysdeps/bsd/Makefile.in.orig	Fri Oct 16 12:32:38 2009
+++ sysdeps/bsd/Makefile.in	Fri Oct 16 12:33:27 2009
@@@@ -58,7 +58,7 @@@@ am_libgtop_sysdeps_suid_2_0_la_OBJECTS = open.lo close
d13 1
a13 1
@@@@ -294,7 +294,8 @@@@ libgtop_sysdeps_suid_2_0_la_SOURCES = open.c close.c c
d23 1
a23 1
@@@@ -365,6 +366,7 @@@@ distclean-compile:
@

