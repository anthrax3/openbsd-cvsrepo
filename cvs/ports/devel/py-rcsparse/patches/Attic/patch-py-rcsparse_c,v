head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.10.31.16.50.58;	author sthen;	state dead;
branches;
next	1.1;
commitid	M5CKfyi0fiAn7uNU;

1.1
date	2013.08.09.05.41.50;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to current rcsparse on github, rolling in our patches
@
text
@$OpenBSD: patch-py-rcsparse_c,v 1.1 2013/08/09 05:41:50 dcoppa Exp $

Py_ssize_t != int

On a sparc64 host, git-cvs died of a bus error due to a mismatch
in the string length argument passed to PyString_AsStringAndLength.

--- py-rcsparse.c.orig	Thu Aug  6 22:21:50 2009
+++ py-rcsparse.c	Mon Aug  5 10:59:33 2013
@@@@ -53,7 +53,7 @@@@ pyrcsrevtree_find_internal(struct pyrcsrevtree *self, 
 {
 	struct rcsrev rev;
 	struct rcstoken tok;
-	int l;
+	Py_ssize_t l;
 
 	if (!PyString_CheckExact(key))
 		return -1;
@@@@ -322,7 +322,7 @@@@ pyrcstokmap_find_internal(struct pyrcstokmap *self, Py
 {
 	struct rcstokpair pair;
 	struct rcstoken tok;
-	int l;
+	Py_ssize_t l;
 
 	if (!PyString_CheckExact(key))
 		return -1;
@


1.1
log
@
Py_ssize_t != int

On a sparc64 host, git-cvs died of a bus error due to a mismatch
in the string length argument passed to PyString_AsStringAndLength.

Spotted and fixed by uwe@@
@
text
@d1 1
a1 1
$OpenBSD$
@

