head	1.2;
access;
symbols
	OPENBSD_4_7:1.1.1.1.0.6
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.4
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20081030:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2010.05.21.11.51.09;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2008.10.30.16.28.38;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.10.30.16.28.38;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@We have strndup(3) now.
@
text
@$OpenBSD: patch-xdg-user-dirs-update_c,v 1.1 2008/10/30 16:28:38 ajacoutot Exp $
--- xdg-user-dirs-update.c.orig	Mon Aug 20 10:12:20 2007
+++ xdg-user-dirs-update.c	Thu Oct 30 17:09:24 2008
@@@@ -16,6 +16,19 @@@@
 #include <iconv.h>
 #include <langinfo.h>
 
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
+static char *strndup(const char *str, size_t len) {
+	char *ret;
+	
+	if ((str == NULL || len < 0)) return(NULL);
+	ret = (char *)malloc(len + 1);
+	if (ret == NULL) return(NULL);
+	memcpy(ret, str, len);
+	ret[len] = '\0';
+	return(ret);
+}
+#endif
+
 typedef struct {
   char *name;
   char *path;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import xdg-user-dirs-0.10

xdg-user-dirs is a tool to help manage "well known" user directories
like the desktop folder and the music folder.  It also handles
localization (i.e. translation) of the filenames.

adapted from FreeBSD port
@
text
@@
