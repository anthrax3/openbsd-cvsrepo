head	1.4;
access;
symbols
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	kurt_20050204:1.1.1.1
	kurt:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2006.11.02.10.59.17;	author espie;	state dead;
branches;
next	1.3;

1.3
date	2006.07.07.01.48.55;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.09.14.49.09;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.04.17.18.13;	author kurt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.04.17.18.13;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.4
log
@move script prior to zapping SCRIPTDIR
@
text
@#!/bin/sh
# $OpenBSD: prepatch.sh,v 1.3 2006/07/07 01:48:55 kurt Exp $
# $FreeBSD: ports/java/eclipse/scripts/configure,v 1.2 2004/07/25 08:01:09 nork Exp $

copy_file()
{
	srcfile="$1"
	dstfile="$2"

	rm -f "$dstfile"
	cat "$srcfile" | sed 's/linux/openbsd/g; s/Linux/OpenBSD/g;' > "$dstfile"
}

copy_dir()
{
	srcdir=$1
	dstdir=$2

	rm -rf $dstdir
	mkdir -p $dstdir
	cp -r $srcdir/* $dstdir || exit 1

	find $dstdir -type f -print0 | \
		xargs -0 perl -pi -e 's/linux/openbsd/g; s/Linux/OpenBSD/g'
}

prepatch()
{
	# Copy the files and rename/change them appropriately
	for src in $COPY_LIST
	do
		dst=`echo $src | sed 's/linux/openbsd/g; s/Linux/OpenBSD/g'`
		echo Copying $src into $dst
		if [ -d ${WRKSRC}/$src ]; then
			copy_dir ${WRKSRC}/$src ${WRKSRC}/$dst
		else
			copy_file ${WRKSRC}/$src ${WRKSRC}/$dst
		fi
	done

	# Files with spaces in their path...
	src="${SWTGTK}/make_linux.mak"
	dst=`echo $src | sed 's/linux/openbsd/g; s/Linux/OpenBSD/g;'`
	echo Copying $src into $dst
	copy_file "${WRKSRC}/$src" "${WRKSRC}/$dst"

	# Copy missing mpl about_files dir so PLIST is consistant
	src="features/org.eclipse.platform/about_files/openbsd.gtk.x86_64/about_files"
	dst="features/org.eclipse.platform/about_files/openbsd.gtk.x86"
	cp -r ${WRKSRC}/$src ${WRKSRC}/$dst

	find ${WRKSRC} -type f -and \
		\( -name \*.so -or -name \*.so.\* -or -name eclipse \) | xargs rm
}

COPY_LIST="
assemble.org.eclipse.sdk.linux.gtk.x86.xml
assemble.org.eclipse.sdk.linux.gtk.x86_64.xml
features/org.eclipse.platform.launchers/bin/gtk/linux/x86
features/org.eclipse.platform.launchers/bin/gtk/linux/x86_64
features/org.eclipse.platform.launchers/library/gtk/make_linux.mak
features/org.eclipse.platform/about_files/linux.gtk.x86
features/org.eclipse.platform/about_files/linux.gtk.x86_64
package.org.eclipse.sdk.linux.gtk.x86.xml
package.org.eclipse.sdk.linux.gtk.x86_64.xml
plugins/org.eclipse.core.filesystem.linux.x86
plugins/org.eclipse.core.filesystem.linux.x86/os/linux
plugins/org.eclipse.core.filesystem.linux.x86_64
plugins/org.eclipse.core.filesystem.linux.x86_64/os/linux
plugins/org.eclipse.core.filesystem/natives/unix/linux
plugins/org.eclipse.jdt.core/scripts/export-ejavac2_linux.xml
plugins/org.eclipse.jdt.core/scripts/export-ejavac_linux.xml
plugins/org.eclipse.jdt.source.linux.gtk.x86
plugins/org.eclipse.jdt.source.linux.gtk.x86_64
plugins/org.eclipse.jface/src/org/eclipse/jface/resource/jfacefonts_linux.properties
plugins/org.eclipse.jface/src/org/eclipse/jface/resource/jfacefonts_linux_gtk.properties
plugins/org.eclipse.pde.source.linux.gtk.x86
plugins/org.eclipse.pde.source.linux.gtk.x86
plugins/org.eclipse.platform.source.linux.gtk.x86
plugins/org.eclipse.platform.source.linux.gtk.x86_64
plugins/org.eclipse.rcp.source.linux.gtk.x86
plugins/org.eclipse.rcp.source.linux.gtk.x86_64
plugins/org.eclipse.swt.gtk.linux.x86
plugins/org.eclipse.swt.gtk.linux.x86_64
plugins/org.eclipse.update.core.linux
plugins/org.eclipse.update.core.linux/os/linux
"

SWTGTK="plugins/org.eclipse.swt/Eclipse SWT PI/gtk/library"

prepatch
exit 0
@


1.3
log
@- update eclipse to 3.2
- add amd64 support
Thanks to Henrik Kramshøj for providing access to amd64. Tested by ian@@.
@
text
@d2 1
a2 1
# $OpenBSD: prepatch.sh,v 1.2 2005/08/09 14:49:09 kurt Exp $
@


1.2
log
@update to 3.1
now needs 640M datasize to build

testing and okay ian@@
@
text
@d2 1
a2 1
# $OpenBSD: prepatch.sh,v 1.1.1.1 2005/02/04 17:18:13 kurt Exp $
d47 5
d58 1
d60 1
d63 10
a72 3
plugins/org.eclipse.core.resources.linux
plugins/org.eclipse.core.resources.linux/os/linux
plugins/org.eclipse.core.resources.linux/os/linux/x86
d74 1
d78 1
d80 1
d82 1
d84 1
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# $OpenBSD$
d5 9
d19 3
d23 1
a23 4
	rm -rf "$dstdir"
	cp -r "$srcdir" "$dstdir" || exit 1

	find "$dstdir" -type f -print0 | \
d34 5
a38 1
		copy_dir ${WRKSRC}/$src ${WRKSRC}/$dst
d41 5
a45 11
	# Determine the toolkit we must use
	if [ "${ECLIPSE_WS}" = "motif" ]; then
		ln -sf "${SWTMOTIF}" ${SWTSHORT}   || exit 1
		ln -sf "${SWTMOTIFGTK}"/* ${SWTSHORT} || exit 1
	else
		ln -sf "${SWTGTK}" ${SWTSHORT}   || exit 1
	fi
	ln -sf "${SWTCOMMON}"/* ${SWTSHORT} || exit 1
	ln -sf "${SWTAWT}"/* ${SWTSHORT} || exit 1
	ln -sf "${SWTMOZ}"/* ${SWTSHORT} || exit 1
	ln -sf "${SWTPROG}"/* ${SWTSHORT} || exit 1
d47 2
a48 2
	find ${WRKSRC} -name \*.so | xargs rm
	find ${WRKSRC} -name \*.so.\* | xargs rm
d52 8
a61 4
plugins/platform-launcher/library/motif/make_linux.mak
assemble.org.eclipse.sdk.linux.motif.x86.xml
assemble.org.eclipse.sdk.linux.gtk.x86.xml

a62 4
plugins/org.eclipse.pde.source.linux.motif.x86
plugins/org.eclipse.platform.source.linux.motif.x86
plugins/org.eclipse.swt.motif/os/linux
plugins/org.eclipse.jdt.source.linux.motif.x86
d64 2
a65 1
plugins/org.eclipse.jdt.source.linux.gtk.x86
a67 5
plugins/org.eclipse.core.resources.linux
plugins/org.eclipse.core.resources.linux/os/linux
plugins/org.eclipse.swt.gtk/os/linux
plugins/platform-launcher/bin/linux
features/org.eclipse.platform/linux.motif
d70 1
a70 8
SWTGTK="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT PI/gtk/library"
SWTMOTIF="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT PI/motif/library"
SWTMOTIFGTK="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT PI/motif_gtk/library"
SWTCOMMON="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT/common/library"
SWTAWT="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT AWT/gtk/library"
SWTMOZ="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT Mozilla/common/library"
SWTPROG="${WRKSRC}/plugins/org.eclipse.swt/Eclipse SWT Program/gnome/library"
SWTSHORT="${WRKSRC}/plugins/org.eclipse.swt/Eclipse_SWT"
@


1.1.1.1
log
@Eclipse sdk and three eclipse plugins

sdk:
   The Eclipse Platform is an IDE for anything, and for nothing in
   particular.

   flavors: gtk2, motif
   subpackages: -gnome, -mozilla (gtk2 only), -kde (motif only)

plugins/emf:
   Eclipse Modeling Framework (EMF)

plugins/gef:
   graphical editing environment for eclipse

plugins/uml2
   UML diagram framework for Eclipse

ok alek@@, todd@@
@
text
@@
