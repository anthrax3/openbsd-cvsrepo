head	1.7;
access;
symbols
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	jasper_20100212:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2011.08.28.19.02.29;	author naddy;	state dead;
branches;
next	1.6;

1.6
date	2011.08.24.12.05.55;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2011.04.05.14.00.58;	author jasper;	state dead;
branches;
next	1.4;

1.4
date	2011.04.02.09.06.51;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.02.08.22.28;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.02.18.41.46;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2010.12.02.10.35.04;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.12.02.10.35.04;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.7
log
@honor CC, CFLAGS, INSTALL_STRIP; ok jasper@@
@
text
@$OpenBSD: patch-Makefile,v 1.6 2011/08/24 12:05:55 jasper Exp $
--- Makefile.orig	Wed Aug 24 13:57:52 2011
+++ Makefile	Wed Aug 24 13:57:57 2011
@@@@ -16,7 +16,7 @@@@
 # along with this program; if not, write to the Free Software
 # Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
 
-CC = gcc
+CC ?= gcc
 INSTALL = /usr/bin/install
 PREFIX ?= /usr/local
 LDFLAGS ?= -s
@


1.6
log
@- update mspdebug to 0.17
@
text
@d1 1
a1 1
$OpenBSD$
@


1.5
log
@- update mspdebug to 0.15, integrating some more of our patches and adding
support for various new chips.
@
text
@d1 12
a12 15
$OpenBSD: patch-Makefile,v 1.4 2011/04/02 09:06:51 jasper Exp $

- Add missing library.

--- Makefile.orig	Sun Feb  6 23:55:37 2011
+++ Makefile	Sat Apr  2 10:56:51 2011
@@@@ -36,7 +36,7 @@@@ ifeq ($(UNAME),Darwin) # Mac OS X/MacPorts stuff
 else
   ifeq ($(UNAME),OpenBSD) # OpenBSD Ports stuff
 	PORTS_CFLAGS = `pkg-config --cflags libelf libusb`
-	PORTS_LDFLAGS = `pkg-config --libs libelf libusb`
+	PORTS_LDFLAGS = `pkg-config --libs libelf libusb` -ltermcap
   else
 	PORTS_CFLAGS =
 	PORTS_LDFLAGS =
@


1.4
log
@- tweak patch, no change to the package.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.3 2011/04/02 08:22:28 jasper Exp $
@


1.3
log
@- update mspdebug to 0.14
* most patches have been committed upstream

tested on a launchpad
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.2 2010/12/02 18:41:46 jasper Exp $
d3 1
a3 1
- Add missing libraries.
d5 3
a7 4
--- Makefile.orig	Sat Apr  2 09:59:32 2011
+++ Makefile	Sat Apr  2 10:00:10 2011
@@@@ -26,7 +26,7 @@@@ ifdef WITHOUT_READLINE
 	READLINE_LIBS =
d9 7
a15 6
 	READLINE_CFLAGS = -DUSE_READLINE
-	READLINE_LIBS = -lreadline
+	READLINE_LIBS = -lreadline -ltermcap
 endif
 
 UNAME := $(shell sh -c 'uname -s')
@


1.2
log
@- update mspdebug to 0.13
- remove support for Olimex MSP430-JTAG-ISO which requires a linux-only ioctl.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.1.1.1 2010/12/02 10:35:04 jasper Exp $
d3 1
a3 1
- Add missing libraries and cflags.
d5 3
a7 3
--- Makefile.orig	Mon Nov  8 22:40:57 2010
+++ Makefile	Thu Dec  2 13:06:08 2010
@@@@ -26,17 +26,21 @@@@ ifdef WITHOUT_READLINE
a14 1
-# Mac OS X/MacPorts stuff
a15 29
-ifeq ($(UNAME),Darwin)
-	MACPORTS_CFLAGS = -I/opt/local/include
-	MACPORTS_LDFLAGS = -L/opt/local/lib
+ifeq ($(UNAME),Darwin) # Mac OS X/MacPorts stuff
+	PORTS_CFLAGS = -I/opt/local/include
+	PORTS_LDFLAGS = -L/opt/local/lib
 else
-	MACPORTS_CFLAGS =
-	MACPORTS_LDFLAGS =
+  ifeq ($(UNAME),OpenBSD) # OpenBSD Ports stuff
+	PORTS_CFLAGS = `pkg-config --cflags libelf libusb`
+	PORTS_LDFLAGS = `pkg-config --libs libelf libusb`
+  else
+	PORTS_CFLAGS =
+	PORTS_LDFLAGS =
+  endif
 endif
 
 MSPDEBUG_CFLAGS = -O1 -Wall -Wno-char-subscripts -ggdb
@@@@ -60,7 +64,7 @@@@ mspdebug: main.o fet.o rf2500.o dis.o uif.o olimex.o i
 	  reader.o vector.o output_util.o expr.o fet_error.o binfile.o \
 	  fet_db.o usbutil.o titext.o srec.o device.o coff.o opdb.o output.o \
 	  cmddb.o stdcmd.o prog.o flash_bsl.o
-	$(CC) $(LDFLAGS) $(MACPORTS_LDFLAGS) -o $@@ $^ -lusb $(READLINE_LIBS)
+	$(CC) $(LDFLAGS) $(PORTS_LDFLAGS) -o $@@ $^ -lusb $(READLINE_LIBS)
 
 .c.o:
-	$(CC) $(CFLAGS) $(MACPORTS_CFLAGS) $(READLINE_CFLAGS) $(MSPDEBUG_CFLAGS) -o $@@ -c $*.c
+	$(CC) $(CFLAGS) $(PORTS_CFLAGS) $(READLINE_CFLAGS) $(MSPDEBUG_CFLAGS) -o $@@ -c $*.c
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 12
--- Makefile.orig	Wed Aug  4 04:08:43 2010
+++ Makefile	Thu Aug 12 12:58:14 2010
@@@@ -15,7 +15,7 @@@@
 # along with this program; if not, write to the Free Software
 # Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
 
-CC = gcc
+CC ?= gcc
 INSTALL = /usr/bin/install
 PREFIX ?= /usr/local
 
@@@@ -24,7 +24,7 @@@@ ifdef WITHOUT_READLINE
d15 25
a39 5
 # Mac OS X/MacPorts stuff
@@@@ -57,7 +57,7 @@@@ mspdebug: main.o fet.o rf2500.o dis.o uif.o olimex.o i
           util.o bsl.o sim.o symmap.o gdb.o btree.o rtools.o sym.o devcmd.o \
 	  cproc.o vector.o cproc_util.o expr.o fet_error.o binfile.o fet_db.o \
 	  usbutil.o titext.o srec.o device.o coff.o
d41 1
a41 1
+	$(CC) $(LDFLAGS) $(MACPORTS_LDFLAGS) -o $@@ $^ `pkg-config --libs libelf libusb` $(READLINE_LIBS)
d45 1
a45 1
+	$(CC) $(CFLAGS) `pkg-config --cflags libelf libusb` $(MACPORTS_CFLAGS) $(READLINE_CFLAGS) $(MSPDEBUG_CFLAGS) -o $@@ -c $*.c
@


1.1.1.1
log
@import mspdebug 0.10

MSPDebug is a free debugger for use with MSP430 MCUs. It supports
FET430UIF, eZ430, RF2500 and Olimex MSP-JTAG-TINY programmers. It can be
used as a proxy for gdb or as an independent debugger with support for
programming, disassembly and reverse engineering.

With a patch from jakemsr@@ to work around a ugen/libusb issue where
usb_bulk_read return 0 on timeout, which isn't deal with properly.

ok ajacoutot@@
@
text
@@
