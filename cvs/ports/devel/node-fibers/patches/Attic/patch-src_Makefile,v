head	1.2;
access;
symbols
	jeremy_2012-Apr-03:1.1.1.1 jeremy:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2012.06.28.17.27.51;	author jeremy;	state dead;
branches;
next	1.1;

1.1
date	2012.04.03.18.46.03;	author jeremy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.04.03.18.46.03;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update node-fibers to 0.6.8, works with node 0.8.0.

Build process changed from waf to gyp, so modify patches accordingly.
@
text
@$OpenBSD: patch-src_Makefile,v 1.1 2012/04/03 18:46:03 jeremy Exp $
--- src/Makefile.orig	Wed Jan  4 21:24:45 2012
+++ src/Makefile	Wed Feb  1 14:25:00 2012
@@@@ -9,6 +9,9 @@@@ endif
 ifeq ($(NODE_PLATFORM), darwin)
 	CPP_NODEFLAGS = -bundle -undefined dynamic_lookup
 endif
+ifeq ($(NODE_PLATFORM), openbsd)
+       CPP_NODEFLAGS = -fPIC -shared -Wl,-Bdynamic
+endif
 
 all: fibers.node
 
@@@@ -19,7 +22,7 @@@@ coroutine.o: coroutine.cc
 	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -fPIC -c -o $@@ $^
 
 fibers.node: fibers.cc coroutine.o libcoro.o
-	$(CXX) $(CPP_NODEFLAGS) $(CPPFLAGS) $^ -o $@@ -lpthread
+	$(CXX) $(CPP_NODEFLAGS) $(CPPFLAGS) $^ -o $@@ -pthread
 
 clean:
 	-$(RM) fibers.node libcoro.o coroutine.o
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import node-fibers-0.6.4.

This extension provides a fiber/coroutine implementation for nodejs.  It
also ships with a futures implementation that wraps existing nodejs
async functions, allowing synchronous style code that handles exceptions
properly and doesn't block the nodejs event loop.

OK sthen@@
@
text
@@
