head	1.7;
access;
symbols
	OPENBSD_6_0:1.6.0.6
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.4.0.6
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.4
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	ports:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2017.02.25.22.08.42;	author naddy;	state Exp;
branches;
next	1.6;
commitid	MgwW3xicw8SMh5eu;

1.6
date	2015.06.17.05.45.33;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	f0dfDROcu3sP0Ko6;

1.5
date	2015.03.31.09.44.48;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	Ea3rOcpyiLlaXbHa;

1.4
date	2013.10.11.20.36.18;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.23.07.58.50;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2012.09.02.14.37.49;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.09.02.14.13.10;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.09.02.14.13.10;	author espie;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Make c++ the default C++ compiler on OpenBSD instead of the fallback value
of g++.
@
text
@$OpenBSD: patch-OpenBSD_cf,v 1.6 2015/06/17 05:45:33 ajacoutot Exp $
--- OpenBSD.cf.orig	Tue Dec 22 02:28:02 2015
+++ OpenBSD.cf	Sat Feb 25 23:01:15 2017
@@@@ -26,10 +26,12 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
 #define LibDir			/usr/local/lib/X11
 #define UsrLibDir		/usr/local/lib
 #define ManDirectoryRoot	/usr/local/man
+#define FontDir			${LOCALBASE}/share/fonts
+#define FontEncDir		${LOCALBASE}/share/fonts/encodings
 #define LdPreLib		-L/usr/X11R6/lib -L/usr/local/lib
 #define XpmLibDir		/usr/X11R6/lib
 #define XpmIncDir		/usr/X11R6/include
-#define ConfigDir		/usr/X11R6/lib/X11/config
+#define ConfigDir		${LOCALBASE}/lib/X11/config
 #define IncRoot			/usr/local/include
 #define TopXInclude		-I/usr/X11R6/include
 #define ImakeCmd		imake -DPorts
@@@@ -172,6 +174,9 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
 #ifndef CcCmd
 #define CcCmd 			cc
 #endif
+#ifndef CplusplusCmd
+#define CplusplusCmd		c++
+#endif
 #ifndef AsCmd
 #define AsCmd			cc -c -x assembler
 #endif
@@@@ -244,9 +249,22 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
 /*
  * Documentation formatting
  */
-#define NeqnCmd			neqn -Tlatin1
-#define NroffCmd		nroff -Tlatin1
-#define	EqnCmd 			eqn -Tps
+#ifdef Ports
+# define NroffCmd		${LOCALBASE}/bin/nroff -Tascii -c
+# define TroffCmd		${LOCALBASE}/bin/nroff -Tps
+# define HTMLroffCmd		${LOCALBASE}/bin/nroff -Thtml
+# define NeqnCmd		${LOCALBASE}/bin/neqn -Tascii
+# define EqnCmd			${LOCALBASE}/bin/eqn -Tps
+# define TblCmd			${LOCALBASE}/bin/tbl
+#else
+# define NroffCmd		mandoc
+# define TroffCmd		mandoc -Tps
+# define HTMLroffCmd		mandoc -Thtml
+# define NeqnCmd		cat
+# define EqnCmd			cat
+# define TblCmd			cat
+#endif
+
 #define HasGroff		YES
 
 #ifndef HasCookieMaker
@@@@ -262,77 +280,15 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
  */
 #define ManSuffix	1
 #define FileManSuffix	5
-#define ManSourcePath	$(MANPATH)/cat
 
-#define InstallManPageLongBase(file,destdir,dest)			@@@@\
-all:: file.0								@@@@\
-									@@@@\
-file.0:: file.$(MANNEWSUFFIX)						@@@@\
-	@@if [ -f file.$(MANNEWSUFFIX) ]; \				@@@@\
-	then \								@@@@\
-	cat file.$(MANNEWSUFFIX) | $(NEQN) | $(TBL) | \			@@@@\
-		$(NROFF) $(MANMACROS) | $(COL) > file.0; \		@@@@\
-	fi 								@@@@\
-									@@@@\
-install.man::                                                           @@@@\
-	MakeDir($(DESTDIR)destdir)					@@@@\
-	-@@if [ -f file.0 ]; \						@@@@\
-	then \								@@@@\
-	$(INSTALL) -c $(INSTMANFLAGS) file.0 $(DESTDIR)destdir/dest.0; \@@@@\
-	fi								@@@@\
-									@@@@\
-clean::									@@@@\
-	RemoveFile(file.0)
-
-#define InstallManPageLong(file,destdir,dest)				@@@@\
-BuildInstallHtmlManPage(file,dest,$(MANSUFFIX))				@@@@\
-									@@@@\
-CppManTarget(file, $(EXTRAMANDEFS))					@@@@\
-									@@@@\
-InstallManPageLongBase(file,destdir,dest)
-
-#define InstallGenManPageLong(file,destdir,dest,suffix)			@@@@\
-BuildInstallHtmlManPage(file,dest,suffix)				@@@@\
-									@@@@\
-CppManTarget(file, $(EXTRAMANDEFS))					@@@@\
-									@@@@\
-InstallManPageLongBase(file,destdir,dest)
-
-#define InstallMultipleMan(list,dest)                                   @@@@\
-install.man:: 								@@@@\
-	MakeDir($(DESTDIR)dest)						@@@@\
-	case '${MFLAGS}' in *[i]*) set +e;; esac; \			@@@@\
-	for i in list; do \                                             @@@@\
-	  (MNAME=`echo $$i | cut -f1 -d.`; \				@@@@\
-	  set -x; \							@@@@\
-	  cat $$i | $(NEQN) | $(TBL) | $(NROFF) $(MANMACROS) \		@@@@\
-		| $(COL) > $${MNAME}.0; \				@@@@\
-	  $(INSTALL) -c $(INSTMANFLAGS) $${MNAME}.0 \			@@@@\
-			$(DESTDIR)dest/$${MNAME}.0; \			@@@@\
-	  $(RM) $${MNAME}.0); \						@@@@\
-	done
-
-#define InstallMultipleManSuffix(list,dest,suff)                        @@@@\
-install.man:: 								@@@@\
-	MakeDir($(DESTDIR)dest)						@@@@\
-	case '${MFLAGS}' in *[i]*) set +e;; esac; \			@@@@\
-	for i in list; do \                                             @@@@\
-	  (set -x; \							@@@@\
-	  cat $$i.suff | $(NEQN) | $(TBL) | $(NROFF) $(MANMACROS) \	@@@@\
-		| $(COL) > $$i.0; \					@@@@\
-	  $(INSTALL) -c $(INSTMANFLAGS) $$i.0	 \			@@@@\
-		$(DESTDIR)dest/$$i.0; \					@@@@\
-	  $(RM) $$i.0 ); \						@@@@\
-	done
-
 #define InstallManPageAliasesBase(file,destdir,aliases)			@@@@\
-install.man:: 								@@@@\
-	@@case '${MFLAGS}' in *[i]*) set +e;; esac; \                    @@@@\
-	for i in aliases; do \                                          @@@@\
+install.man::								@@@@\
+	@@SUFFIX=${MANSUFFIX}; \						@@@@\
+	for i in aliases; do \						@@@@\
 		(set -x; \						@@@@\
-		$(RM) $(DESTDIR)destdir/$$i.0;\  			@@@@\
-		(cd $(DESTDIR)/destdir; $(LN) file.0 $$i.0);\ 		@@@@\
-		); \							@@@@\
+		$(RM) $(DESTDIR)destdir/$$i.*; \			@@@@\
+		(cd $(DESTDIR)destdir; $(LN) file.$${SUFFIX} \		@@@@\
+		$$i.$${SUFFIX})); \					@@@@\
 	done
 
 #define InstallManPageAliases(file,destdir,aliases)			@@@@\
@@@@ -436,8 +392,6 @@@@ install:: fonts.alias							@@@@\
 #ifdef AMD64Architecture
 
 # define HasWeakSymbols		YES
-# define HasSharedLibraries	YES
-# define HasDlopen		YES
 
 # define XorgServer		YES
 
@@@@ -666,51 +620,26 @@@@ install:: fonts.alias							@@@@\
 
 
 /*
- * Definitions for the mips architecture (currently arc, pmax)
+ * Definitions for the mips architecture (currently sgi)
  */
 #ifdef MipsArchitecture
 
- /*
-  * Mips ELF shared libs need some special handling.
-  */
-# define PositionIndependentCFlags
-# define SharedLibraryLoadFlags -x -shared --whole-archive -soname `echo $@@ | sed 's/\.[0-9]*$$//'`
-# define SharedXtReqs -L$(BUILDLIBDIR) $(XONLYLIB) $(SMLIB) $(ICELIB)
-# define SharedXmuReqs $(LDPRELIB) $(XTOOLONLYLIB) $(XLIB)
+# define HasWeakSymbols		YES
 
-#endif /* MipsArchitecture */
+# define XorgServer		YES
 
-
-/*
- * Definitions for the arc architecture
- */
-#ifdef ArcArchitecture
-
-#  define ServerExtraDefines GccGasOption XFree86ServerDefines
-#  ifndef XFree86ConsoleDefines
-#    define XFree86ConsoleDefines -DPCCONS_SUPPORT
+# if XorgServer
+#  ifndef DoLoadableServer
+#    define DoLoadableServer	YES
 #  endif
+#  define XF86CardDrivers	wsfb
+#  define XFree86ConsoleDefines -DWSCONS_SUPPORT
+# endif
 
 # include <xorg.cf>
 
-#endif /* ArcArchitecture */
+#endif /* MipsArchitecture */
 
-
-/*
- * Definitions for the pmax architecture
- */
-#ifdef PmaxArchitecture
-
-# include <xf86.rules>
-# ifndef BuildServer
-#  define BuildServer		NO
-# endif
-/* For the X11R5 server */
-# define CompressAllFonts	NO
-# define InstallFontAliases	InstallFontAliasesNoComment
-# define UseRgbTxt		NO
-
-#endif /* PmaxArchitecture */
 
 /*
  * Definitions for the PowerPC architecture
@


1.6
log
@Update to imake-cf-1.0.5.
@
text
@d1 3
a3 3
$OpenBSD: patch-OpenBSD_cf,v 1.5 2015/03/31 09:44:48 ajacoutot Exp $
--- OpenBSD.cf.orig	Tue Jul 23 07:23:14 2013
+++ OpenBSD.cf	Mon Jun 15 17:47:02 2015
d18 11
a28 1
@@@@ -244,9 +246,22 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
d54 1
a54 1
@@@@ -262,77 +277,15 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
d138 1
a138 1
@@@@ -436,8 +389,6 @@@@ install:: fonts.alias							@@@@\
d147 1
a147 1
@@@@ -666,51 +617,26 @@@@ install:: fonts.alias							@@@@\
@


1.5
log
@Move fontpath from /usr/local/lib/X11/fonts to /usr/local/share/fonts to match
XDG_DATA_DIR (where Desktop tools will look for by default).

discussed with sthen@@ and matthieu@@
ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-OpenBSD_cf,v 1.4 2013/10/11 20:36:18 naddy Exp $
--- OpenBSD.cf.orig	Fri Oct 16 23:45:42 2009
+++ OpenBSD.cf	Thu Oct 10 17:25:16 2013
d198 1
a198 1
  * Definitions for the PowerPC architecture 
@


1.4
log
@For ports that build via imake, stop installing preformatted man
pages and instead install the source pages.

This change simply rips out OpenBSD's historical special rules for
preformatting man pages and restores imake's defaults.

ok espie@@ matthieu@@ sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-OpenBSD_cf,v 1.3 2012/09/23 07:58:50 matthieu Exp $
d8 2
a9 2
+#define FontDir			${LOCALBASE}/lib/X11/fonts
+#define FontEncDir		${LOCALBASE}/lib/X11/fonts/encodings
@


1.3
log
@ConfigDir is now ${LOCALBASE}. ok landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-OpenBSD_cf,v 1.2 2012/09/02 14:37:49 ajacoutot Exp $
d3 1
a3 1
+++ OpenBSD.cf	Sun Sep  2 20:30:21 2012
d44 1
a44 1
@@@@ -262,6 +277,9 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
d48 1
a48 9
+
+#ifdef Ports
+
 #define ManSourcePath	$(MANPATH)/cat
 
 #define InstallManPageLongBase(file,destdir,dest)			@@@@\
@@@@ -335,6 +353,20 @@@@ install.man:: 								@@@@\
 		); \							@@@@\
 	done
d50 65
a114 3
+#else /* Ports */
+
+#define InstallManPageAliasesBase(file,destdir,aliases)			@@@@\
d118 4
a121 1
+		(set -x; \						@@@@\
d125 2
a126 4
+	done
+
+#endif /* Ports */
+
d128 1
a128 3
 InstallHtmlManPageAliases(file,aliases,$(MANSUFFIX))			@@@@\
 									@@@@\
@@@@ -436,8 +468,6 @@@@ install:: fonts.alias							@@@@\
d137 1
a137 1
@@@@ -666,51 +696,26 @@@@ install:: fonts.alias							@@@@\
@


1.2
log
@Fix DESCR.
Don't hardcode /usr/local.
Missing NO_REGRESS.
@
text
@d1 4
a4 4
$OpenBSD: patch-OpenBSD_cf,v 1.1.1.1 2012/09/02 14:13:10 espie Exp $
--- OpenBSD.cf.orig	Thu Jan  6 05:31:00 2011
+++ OpenBSD.cf	Mon Aug  6 13:01:09 2012
@@@@ -26,6 +26,8 @@@@ XCOMM operating system:  OSName (OSMajorVersion./**/OS
d13 5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d8 2
a9 2
+#define FontDir			/usr/local/lib/X11/fonts
+#define FontEncDir		/usr/local/lib/X11/fonts/encodings
d21 6
a26 6
+# define NroffCmd		/usr/local/bin/nroff -Tascii -c
+# define TroffCmd		/usr/local/bin/nroff -Tps
+# define HTMLroffCmd		/usr/local/bin/nroff -Thtml
+# define NeqnCmd		/usr/local/bin/neqn -Tascii
+# define EqnCmd			/usr/local/bin/eqn -Tps
+# define TblCmd			/usr/local/bin/tbl
@


1.1.1.1
log
@matthieu wants to scrape imake off xenocara
imake-config files for ports
(to be finished in-tree)
@
text
@@
