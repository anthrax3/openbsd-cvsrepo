head	1.156;
access;
symbols
	OPENBSD_6_1:1.154.0.2
	OPENBSD_6_1_BASE:1.154
	OPENBSD_6_0:1.152.0.2
	OPENBSD_6_0_BASE:1.152
	OPENBSD_5_9:1.144.0.2
	OPENBSD_5_9_BASE:1.144
	OPENBSD_5_8:1.142.0.4
	OPENBSD_5_8_BASE:1.142
	OPENBSD_5_7:1.137.0.2
	OPENBSD_5_7_BASE:1.137
	OPENBSD_5_6:1.135.0.2
	OPENBSD_5_6_BASE:1.135
	OPENBSD_5_5:1.131.0.2
	OPENBSD_5_5_BASE:1.131
	OPENBSD_5_4:1.124.0.2
	OPENBSD_5_4_BASE:1.124
	OPENBSD_5_3:1.116.0.2
	OPENBSD_5_3_BASE:1.116
	OPENBSD_5_2:1.112.0.2
	OPENBSD_5_2_BASE:1.112
	OPENBSD_5_1_BASE:1.103
	OPENBSD_5_1:1.103.0.2
	OPENBSD_5_0:1.95.0.2
	OPENBSD_5_0_BASE:1.95
	OPENBSD_4_9:1.87.0.2
	OPENBSD_4_9_BASE:1.87
	OPENBSD_4_8:1.74.0.2
	OPENBSD_4_8_BASE:1.74
	OPENBSD_4_7:1.66.0.2
	OPENBSD_4_7_BASE:1.66
	OPENBSD_4_6:1.59.0.2
	OPENBSD_4_6_BASE:1.59
	OPENBSD_4_5:1.54.0.2
	OPENBSD_4_5_BASE:1.54
	OPENBSD_4_4:1.47.0.2
	OPENBSD_4_4_BASE:1.47
	OPENBSD_4_3:1.44.0.2
	OPENBSD_4_3_BASE:1.44
	OPENBSD_4_2:1.38.0.2
	OPENBSD_4_2_BASE:1.38
	OPENBSD_4_1:1.33.0.2
	OPENBSD_4_1_BASE:1.33
	OPENBSD_4_0:1.22.0.2
	OPENBSD_4_0_BASE:1.22
	OPENBSD_3_9:1.17.0.2
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.9.0.2
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	alek_20041201:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.156
date	2017.07.06.10.51.01;	author stsp;	state Exp;
branches;
next	1.155;
commitid	qFA3A8LNjZ2WtAsE;

1.155
date	2017.07.01.14.14.27;	author stsp;	state Exp;
branches;
next	1.154;
commitid	1531G3QEJiCKZ5t5;

1.154
date	2016.11.29.16.31.00;	author stsp;	state Exp;
branches
	1.154.2.1;
next	1.153;
commitid	JCd9wA1pADfZMPsv;

1.153
date	2016.09.23.09.16.54;	author sthen;	state Exp;
branches;
next	1.152;
commitid	XLnI6AbHAmyVU5mO;

1.152
date	2016.07.08.16.50.36;	author sthen;	state Exp;
branches
	1.152.2.1;
next	1.151;
commitid	mD4L7141eUrNs4nu;

1.151
date	2016.06.28.19.46.02;	author sthen;	state Exp;
branches;
next	1.150;
commitid	PD7eE1F91qOvPTLF;

1.150
date	2016.06.21.21.55.08;	author jung;	state Exp;
branches;
next	1.149;
commitid	NIgKNx8U9uRI3yZ7;

1.149
date	2016.06.14.08.36.29;	author czarkoff;	state Exp;
branches;
next	1.148;
commitid	b2pyZR5sFm3sFbqK;

1.148
date	2016.05.29.17.42.22;	author jung;	state Exp;
branches;
next	1.147;
commitid	dn0AO8LQxMeE5rwx;

1.147
date	2016.04.28.16.03.01;	author stsp;	state Exp;
branches;
next	1.146;
commitid	jvuJd9VnGMZxBNQX;

1.146
date	2016.03.12.23.23.38;	author naddy;	state Exp;
branches;
next	1.145;
commitid	6L1UlTf13rfx88NR;

1.145
date	2016.03.11.20.28.25;	author naddy;	state Exp;
branches;
next	1.144;
commitid	UYLP8TE6V7RS2GhJ;

1.144
date	2015.12.16.10.21.52;	author stsp;	state Exp;
branches
	1.144.2.1;
next	1.143;
commitid	zOXsxPKWhNqSWWf4;

1.143
date	2015.08.27.14.38.36;	author jeremy;	state Exp;
branches;
next	1.142;
commitid	5lvfuU0fXLEyjPVl;

1.142
date	2015.08.05.22.09.12;	author stsp;	state Exp;
branches
	1.142.4.1;
next	1.141;
commitid	3QJP4z6YcYvMM3yo;

1.141
date	2015.07.17.23.58.43;	author ajacoutot;	state Exp;
branches;
next	1.140;
commitid	oY2rvgPTcr4esxta;

1.140
date	2015.04.04.09.21.00;	author ajacoutot;	state Exp;
branches;
next	1.139;
commitid	kS3kwKZogsvzYmEY;

1.139
date	2015.03.31.12.17.59;	author stsp;	state Exp;
branches;
next	1.138;
commitid	kHzudgCPmSt2ON7l;

1.138
date	2015.03.19.20.25.26;	author naddy;	state Exp;
branches;
next	1.137;
commitid	zN8twHQGaJf3YJpT;

1.137
date	2014.12.17.12.17.52;	author stsp;	state Exp;
branches
	1.137.2.1;
next	1.136;
commitid	ki6SVFgf3qez6igE;

1.136
date	2014.08.11.17.36.18;	author stsp;	state Exp;
branches;
next	1.135;
commitid	9ZdvjA9Fedoyth3W;

1.135
date	2014.06.14.10.34.44;	author sthen;	state Exp;
branches
	1.135.2.1;
next	1.134;
commitid	HiKZ10xJk2o55vyF;

1.134
date	2014.05.23.09.37.40;	author stsp;	state Exp;
branches;
next	1.133;

1.133
date	2014.04.21.15.47.03;	author ajacoutot;	state Exp;
branches;
next	1.132;

1.132
date	2014.04.21.13.45.09;	author stsp;	state Exp;
branches;
next	1.131;

1.131
date	2014.02.20.21.15.31;	author stsp;	state Exp;
branches;
next	1.130;

1.130
date	2014.01.20.15.12.24;	author stsp;	state Exp;
branches;
next	1.129;

1.129
date	2013.11.25.17.08.06;	author stsp;	state Exp;
branches;
next	1.128;

1.128
date	2013.10.29.16.02.28;	author stsp;	state Exp;
branches;
next	1.127;

1.127
date	2013.10.10.09.50.17;	author stsp;	state Exp;
branches;
next	1.126;

1.126
date	2013.08.31.08.45.52;	author stsp;	state Exp;
branches;
next	1.125;

1.125
date	2013.08.08.17.55.35;	author stsp;	state Exp;
branches;
next	1.124;

1.124
date	2013.06.20.06.54.36;	author ajacoutot;	state Exp;
branches
	1.124.2.1;
next	1.123;

1.123
date	2013.06.17.19.28.36;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2013.05.31.20.59.51;	author stsp;	state Exp;
branches;
next	1.121;

1.121
date	2013.05.03.07.46.12;	author stsp;	state Exp;
branches;
next	1.120;

1.120
date	2013.04.05.14.51.35;	author stsp;	state Exp;
branches;
next	1.119;

1.119
date	2013.03.21.08.45.16;	author ajacoutot;	state Exp;
branches;
next	1.118;

1.118
date	2013.03.20.19.13.50;	author jeremy;	state Exp;
branches;
next	1.117;

1.117
date	2013.03.11.10.50.31;	author espie;	state Exp;
branches;
next	1.116;

1.116
date	2013.01.05.12.53.08;	author stsp;	state Exp;
branches
	1.116.2.1;
next	1.115;

1.115
date	2012.10.29.14.30.55;	author stsp;	state Exp;
branches;
next	1.114;

1.114
date	2012.09.01.13.40.18;	author stsp;	state Exp;
branches;
next	1.113;

1.113
date	2012.08.23.13.52.39;	author sthen;	state Exp;
branches;
next	1.112;

1.112
date	2012.06.06.14.20.36;	author stsp;	state Exp;
branches
	1.112.2.1;
next	1.111;

1.111
date	2012.05.30.12.16.14;	author stsp;	state Exp;
branches;
next	1.110;

1.110
date	2012.05.05.10.12.52;	author ajacoutot;	state Exp;
branches;
next	1.109;

1.109
date	2012.04.29.12.43.25;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2012.04.28.15.32.47;	author espie;	state Exp;
branches;
next	1.107;

1.107
date	2012.04.28.09.53.38;	author sthen;	state Exp;
branches;
next	1.106;

1.106
date	2012.04.23.17.15.18;	author espie;	state Exp;
branches;
next	1.105;

1.105
date	2012.03.12.10.28.40;	author stsp;	state Exp;
branches;
next	1.104;

1.104
date	2012.02.19.12.13.35;	author stsp;	state Exp;
branches;
next	1.103;

1.103
date	2011.12.23.10.34.36;	author stsp;	state Exp;
branches;
next	1.102;

1.102
date	2011.12.07.16.47.37;	author stsp;	state Exp;
branches;
next	1.101;

1.101
date	2011.12.04.16.06.52;	author espie;	state Exp;
branches;
next	1.100;

1.100
date	2011.10.23.09.51.56;	author stsp;	state Exp;
branches;
next	1.99;

1.99
date	2011.10.14.10.13.05;	author stsp;	state Exp;
branches;
next	1.98;

1.98
date	2011.10.13.11.22.58;	author stsp;	state Exp;
branches;
next	1.97;

1.97
date	2011.10.11.09.59.45;	author stsp;	state Exp;
branches;
next	1.96;

1.96
date	2011.09.16.09.24.58;	author espie;	state Exp;
branches;
next	1.95;

1.95
date	2011.07.22.22.21.06;	author naddy;	state Exp;
branches;
next	1.94;

1.94
date	2011.07.19.18.00.16;	author jeremy;	state Exp;
branches;
next	1.93;

1.93
date	2011.07.18.19.06.36;	author naddy;	state Exp;
branches;
next	1.92;

1.92
date	2011.06.08.17.40.08;	author jasper;	state Exp;
branches;
next	1.91;

1.91
date	2011.06.01.22.19.17;	author stsp;	state Exp;
branches;
next	1.90;

1.90
date	2011.05.02.17.13.33;	author stsp;	state Exp;
branches;
next	1.89;

1.89
date	2011.03.18.16.25.26;	author stsp;	state Exp;
branches;
next	1.88;

1.88
date	2011.03.03.20.46.32;	author stsp;	state Exp;
branches;
next	1.87;

1.87
date	2011.01.15.01.09.43;	author naddy;	state Exp;
branches
	1.87.2.1;
next	1.86;

1.86
date	2010.11.26.07.19.01;	author espie;	state Exp;
branches;
next	1.85;

1.85
date	2010.11.25.11.43.27;	author stsp;	state Exp;
branches;
next	1.84;

1.84
date	2010.11.24.21.35.14;	author jeremy;	state Exp;
branches;
next	1.83;

1.83
date	2010.11.15.19.46.09;	author espie;	state Exp;
branches;
next	1.82;

1.82
date	2010.11.08.12.26.01;	author espie;	state Exp;
branches;
next	1.81;

1.81
date	2010.10.26.21.42.14;	author jeremy;	state Exp;
branches;
next	1.80;

1.80
date	2010.10.24.15.53.55;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2010.10.18.17.48.13;	author espie;	state Exp;
branches;
next	1.78;

1.78
date	2010.10.06.22.03.19;	author stsp;	state Exp;
branches;
next	1.77;

1.77
date	2010.10.01.10.49.34;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2010.09.23.22.12.10;	author jeremy;	state Exp;
branches;
next	1.75;

1.75
date	2010.08.30.22.09.45;	author jasper;	state Exp;
branches;
next	1.74;

1.74
date	2010.07.24.23.05.08;	author naddy;	state Exp;
branches
	1.74.2.1;
next	1.73;

1.73
date	2010.07.22.09.09.34;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2010.06.29.14.26.08;	author stsp;	state Exp;
branches;
next	1.71;

1.71
date	2010.06.23.17.38.29;	author landry;	state Exp;
branches;
next	1.70;

1.70
date	2010.04.25.08.43.29;	author stsp;	state Exp;
branches;
next	1.69;

1.69
date	2010.04.23.18.05.26;	author stsp;	state Exp;
branches;
next	1.68;

1.68
date	2010.04.22.14.27.29;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2010.04.20.20.23.38;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2010.02.26.18.21.08;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2010.01.27.21.43.27;	author naddy;	state Exp;
branches;
next	1.64;

1.64
date	2009.10.27.09.06.13;	author stsp;	state Exp;
branches;
next	1.63;

1.63
date	2009.09.10.15.35.04;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2009.08.25.10.26.20;	author stsp;	state Exp;
branches;
next	1.61;

1.61
date	2009.08.11.08.14.42;	author msf;	state Exp;
branches;
next	1.60;

1.60
date	2009.08.07.22.13.36;	author steven;	state Exp;
branches;
next	1.59;

1.59
date	2009.06.22.17.00.23;	author naddy;	state Exp;
branches
	1.59.2.1;
next	1.58;

1.58
date	2009.04.28.23.43.56;	author stsp;	state Exp;
branches;
next	1.57;

1.57
date	2009.03.16.22.20.02;	author kili;	state Exp;
branches;
next	1.56;

1.56
date	2009.03.05.23.16.14;	author stsp;	state Exp;
branches;
next	1.55;

1.55
date	2009.03.05.23.14.07;	author stsp;	state Exp;
branches;
next	1.54;

1.54
date	2009.02.09.20.48.23;	author naddy;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2008.12.27.19.20.36;	author steven;	state Exp;
branches;
next	1.52;

1.52
date	2008.11.18.23.08.01;	author steven;	state Exp;
branches;
next	1.51;

1.51
date	2008.11.13.13.14.51;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2008.11.03.21.33.56;	author steven;	state Exp;
branches;
next	1.49;

1.49
date	2008.11.02.20.43.49;	author steven;	state Exp;
branches;
next	1.48;

1.48
date	2008.10.05.08.31.14;	author sturm;	state Exp;
branches;
next	1.47;

1.47
date	2008.07.04.19.57.06;	author naddy;	state Exp;
branches;
next	1.46;

1.46
date	2008.06.14.23.46.38;	author landry;	state Exp;
branches;
next	1.45;

1.45
date	2008.05.02.17.32.53;	author bernd;	state Exp;
branches;
next	1.44;

1.44
date	2008.02.22.19.16.49;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2008.01.04.18.38.51;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2008.01.04.17.48.34;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2007.10.25.10.00.03;	author steven;	state Exp;
branches;
next	1.40;

1.40
date	2007.10.08.08.22.40;	author steven;	state Exp;
branches;
next	1.39;

1.39
date	2007.09.16.02.53.14;	author merdely;	state Exp;
branches;
next	1.38;

1.38
date	2007.07.27.19.17.11;	author naddy;	state Exp;
branches;
next	1.37;

1.37
date	2007.06.18.06.34.48;	author steven;	state Exp;
branches;
next	1.36;

1.36
date	2007.04.28.16.03.21;	author bernd;	state Exp;
branches;
next	1.35;

1.35
date	2007.04.15.07.40.27;	author steven;	state Exp;
branches;
next	1.34;

1.34
date	2007.04.11.13.26.36;	author deanna;	state Exp;
branches;
next	1.33;

1.33
date	2007.02.19.09.39.48;	author dlg;	state Exp;
branches;
next	1.32;

1.32
date	2007.02.15.10.25.17;	author dlg;	state Exp;
branches;
next	1.31;

1.31
date	2007.02.14.11.51.07;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2007.01.29.16.33.36;	author steven;	state Exp;
branches;
next	1.29;

1.29
date	2007.01.05.10.57.06;	author robert;	state Exp;
branches;
next	1.28;

1.28
date	2006.12.21.08.58.04;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2006.12.01.14.10.05;	author steven;	state Exp;
branches;
next	1.26;

1.26
date	2006.11.29.08.52.38;	author msf;	state Exp;
branches;
next	1.25;

1.25
date	2006.11.24.19.52.53;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2006.09.30.06.23.58;	author steven;	state Exp;
branches;
next	1.23;

1.23
date	2006.09.18.11.50.39;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2006.08.21.17.39.00;	author aanriot;	state Exp;
branches;
next	1.21;

1.21
date	2006.08.01.23.39.08;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2006.07.15.16.55.32;	author alek;	state Exp;
branches;
next	1.19;

1.19
date	2006.06.04.00.21.58;	author steven;	state Exp;
branches;
next	1.18;

1.18
date	2006.04.15.10.27.38;	author steven;	state Exp;
branches;
next	1.17;

1.17
date	2006.01.27.10.20.56;	author alek;	state Exp;
branches;
next	1.16;

1.16
date	2006.01.07.01.10.11;	author steven;	state Exp;
branches;
next	1.15;

1.15
date	2005.11.30.19.45.07;	author sturm;	state Exp;
branches;
next	1.14;

1.14
date	2005.11.23.16.04.49;	author pvalchev;	state Exp;
branches;
next	1.13;

1.13
date	2005.11.23.15.16.30;	author robert;	state Exp;
branches;
next	1.12;

1.12
date	2005.11.04.09.42.31;	author alek;	state Exp;
branches;
next	1.11;

1.11
date	2005.10.02.09.02.05;	author alek;	state Exp;
branches;
next	1.10;

1.10
date	2005.09.16.09.51.27;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2005.07.07.14.20.34;	author alek;	state Exp;
branches;
next	1.8;

1.8
date	2005.07.05.21.29.25;	author alek;	state Exp;
branches;
next	1.7;

1.7
date	2005.07.04.22.22.00;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2005.06.10.05.41.36;	author kevlo;	state Exp;
branches;
next	1.5;

1.5
date	2005.06.09.14.47.15;	author kevlo;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.21.03.36.14;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.13.22.46.18;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.21.20.29.10;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.01.16.47.54;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.01.16.47.54;	author alek;	state Exp;
branches;
next	;

1.54.2.1
date	2009.08.16.02.21.43;	author william;	state Exp;
branches;
next	;

1.59.2.1
date	2009.11.06.01.38.18;	author william;	state Exp;
branches;
next	;

1.74.2.1
date	2010.12.01.14.17.34;	author jasper;	state Exp;
branches;
next	1.74.2.2;

1.74.2.2
date	2011.03.03.20.55.16;	author stsp;	state Exp;
branches;
next	;

1.87.2.1
date	2011.06.01.22.26.19;	author stsp;	state Exp;
branches;
next	;

1.112.2.1
date	2013.04.05.15.06.21;	author stsp;	state Exp;
branches;
next	;

1.116.2.1
date	2013.05.03.06.51.46;	author stsp;	state Exp;
branches;
next	1.116.2.2;

1.116.2.2
date	2013.05.31.21.00.53;	author stsp;	state Exp;
branches;
next	1.116.2.3;

1.116.2.3
date	2013.08.08.17.57.56;	author stsp;	state Exp;
branches;
next	1.116.2.4;

1.116.2.4
date	2013.08.31.08.46.30;	author stsp;	state Exp;
branches;
next	;

1.124.2.1
date	2013.10.30.12.54.22;	author jasper;	state Exp;
branches;
next	1.124.2.2;

1.124.2.2
date	2013.12.01.12.49.07;	author jasper;	state Exp;
branches;
next	1.124.2.3;

1.124.2.3
date	2014.02.23.14.17.05;	author stsp;	state Exp;
branches;
next	;

1.135.2.1
date	2014.12.17.13.55.14;	author stsp;	state Exp;
branches;
next	1.135.2.2;
commitid	agz3SmjY4S0jrjGC;

1.135.2.2
date	2015.04.02.19.35.56;	author stsp;	state Exp;
branches;
next	;
commitid	w5cSUqS8ttMouyFc;

1.137.2.1
date	2015.08.21.09.17.00;	author stsp;	state Exp;
branches;
next	;
commitid	tbhnJLpszknm0XLS;

1.142.4.1
date	2015.12.16.10.23.11;	author stsp;	state Exp;
branches;
next	;
commitid	vCJ4Pgh71XDZncZJ;

1.144.2.1
date	2016.04.28.17.36.00;	author stsp;	state Exp;
branches;
next	;
commitid	aAzU1aTmUvwfAxvd;

1.152.2.1
date	2016.11.29.16.51.13;	author stsp;	state Exp;
branches;
next	;
commitid	0Pr317K0WvrtTtsj;

1.154.2.1
date	2017.07.06.10.53.44;	author stsp;	state Exp;
branches;
next	;
commitid	2SeDgBPmgrEGeCEn;


desc
@@


1.156
log
@Update to Apache Subversion 1.9.6. Contains a server-side SHA1 collision fix.
@
text
@# $OpenBSD: Makefile,v 1.155 2017/07/01 14:14:27 stsp Exp $

COMMENT-main=		subversion revision control system
COMMENT-perl=		perl interface to subversion
COMMENT-python=		python interface to subversion
COMMENT-ruby=		ruby interface to subversion
COMMENT-ap2=		apache2 subversion modules
COMMENT-gnome-keyring=	GNOME keyring support for subversion

VERSION=		1.9.6
DISTNAME=		subversion-${VERSION}
PKGNAME-main=		${DISTNAME}
FULLPKGNAME-perl=	p5-SVN-${VERSION}
FULLPKGPATH-perl=	devel/subversion,-perl
FULLPKGNAME-python=	py-subversion-${VERSION}
FULLPKGPATH-python=	devel/subversion,-python
FULLPKGNAME-ruby=	ruby-subversion-${VERSION}
FULLPKGPATH-ruby=	devel/subversion,-ruby
FULLPKGNAME-ap2=	ap2-subversion-${VERSION}
FULLPKGPATH-ap2=	devel/subversion,-ap2
FULLPKGNAME-gnome-keyring= gnome-keyring-subversion-${VERSION}
FULLPKGPATH-gnome-keyring= devel/subversion,-gnome-keyring

SO_VERSION=	2.0
SVN_LIBS=	svn_client-1 svn_delta-1 svn_diff-1 svn_fs-1 \
		svn_fs_base-1 svn_fs_fs-1 svn_fs_util-1 svn_fs_x-1 \
		svn_ra-1 svn_ra_serf-1 svn_ra_local-1 \
		svn_ra_svn-1 svn_repos-1 svn_subr-1 svn_wc-1
SVN_EXT_LIBS=	svn_swig_perl-1 svn_swig_py-1 svn_swig_ruby-1 \
		svn_auth_gnome_keyring-1
.for _lib in ${SVN_LIBS} ${SVN_EXT_LIBS}
SHARED_LIBS+=	${_lib} ${SO_VERSION}
.endfor

CATEGORIES=	devel

HOMEPAGE=	http://subversion.apache.org

MAINTAINER=	Stefan Sperling <stsp@@openbsd.org>

# BSD alike + Apache License 2.0
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_APACHE:=subversion/}
EXTRACT_SUFX=	.tar.bz2

PSEUDO_FLAVORS=	no_bindings no_ap2 no_perl no_python no_ruby no_gnome-keyring
FLAVORS=	maintainer_mode
FLAVOR?=
.if ${FLAVOR:Mno_bindings}
FLAVOR += no_perl no_python no_ruby
.endif

MODULES=	devel/gettext lang/python

WANTLIB=	expat pthread z

# autogen.sh checks for libtoolize
BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
		devel/libtool

MULTI_PACKAGES = -main -ap2 -perl -python -ruby -gnome-keyring

MAINSPEC =	${PKGNAME}:devel/subversion,-main
LIB_DEPENDS-main = ${LIB_DEPENDS} \
		net/serf>=1.3.2 \
		databases/sqlite3 \
		devel/apr \
		devel/apr-util \
		security/cyrus-sasl2

WANTLIB-main=	${WANTLIB} apr-1 aprutil-1 db sasl2>=2 serf-1>=1.0 ssl sqlite3 \
		c crypto
RUN_DEPENDS-main= ${MODGETTEXT_RUN_DEPENDS}

TOOLS_HOOK_SCRIPTS=	commit-access-control.cfg.example \
	commit-access-control.pl commit-email.rb \
	log-police.py svn2feed.py svnperms.conf.example \
	svnperms.py verify-po.py
# There's also 'mailer', but we handle it separately, see post-install

TOOLS_CLIENT_SIDE_SCRIPTS=	bash_completion change-svn-wc-format.py \
	detach.py mergeinfo-sanitizer.py server-version.py svn-graph.pl \
	svn-ssl-fingerprints.sh svn-vendor.py svn-viewspec.py wcfind

WANTLIB-ap2=		${WANTLIB} apr-1 aprutil-1 db sqlite3 svn_fs_x-1
LIB_DEPENDS-ap2=	${MODGETTEXT_LIB_DEPENDS} ${MAINSPEC}
.for _lib in svn_delta-1 svn_fs-1 svn_fs_base-1 svn_fs_fs-1 \
	svn_fs_util-1 svn_repos-1 svn_subr-1
WANTLIB-ap2 +=	${_lib}>=${SO_VERSION}
.endfor
RUN_DEPENDS-ap2=	www/apache-httpd

WANTLIB-perl=		${WANTLIB} apr-1 aprutil-1 sqlite3 
RUN_DEPENDS-perl=	${MODGETTEXT_RUN_DEPENDS}
LIB_DEPENDS-perl=	${MODGETTEXT_LIB_DEPENDS} ${MAINSPEC}
.for _lib in svn_diff-1 svn_ra-1 svn_delta-1 svn_subr-1 svn_fs-1 \
	svn_repos-1 svn_wc-1 svn_client-1
WANTLIB-perl +=	${_lib}>=${SO_VERSION}
.endfor

WANTLIB-python=		${WANTLIB} apr-1 aprutil-1 \
			db m sasl2 serf-1>=1.0 \
			sqlite3 util ${MODPY_WANTLIB}
RUN_DEPENDS-python=	${MODPY_RUN_DEPENDS}
LIB_DEPENDS-python=	${MODPY_LIB_DEPENDS} ${MODGETTEXT_LIB_DEPENDS} \
			${MAINSPEC}
.for _lib in ${SVN_LIBS}
WANTLIB-python +=	${_lib}>=${SO_VERSION}
.endfor

MODRUBY_REV=		1.8
WANTLIB-ruby=		${WANTLIB} apr-1 aprutil-1 \
			db m sasl2 serf-1>=1.0 sqlite3 \
			${MODRUBY_WANTLIB}
RUN_DEPENDS-ruby=	${MODRUBY_RUN_DEPENDS}
LIB_DEPENDS-ruby=	${MODRUBY_LIB_DEPENDS} \
			${MODGETTEXT_LIB_DEPENDS} ${MAINSPEC}
.for _lib in ${SVN_LIBS}
WANTLIB-ruby +=	${_lib}>=${SO_VERSION}
.endfor

WANTLIB-gnome-keyring=	${WANTLIB} apr-1 aprutil-1 gcrypt gpg-error \
		dbus-1>=7 glib-2.0 gnome-keyring>=6 pcre>=2 sqlite3 \
		svn_subr-1>=${SO_VERSION} ffi gmodule-2.0 gobject-2.0
LIB_DEPENDS-gnome-keyring= ${MAINSPEC} \
		${MODGETTEXT_LIB_DEPENDS} \
		x11/gnome/libgnome-keyring

RUN_DEPENDS-gnome-keyring=	${MODGETTEXT_RUN_DEPENDS}

MAKE_FLAGS=	MAKE=${MAKE_PROGRAM}
AUTOCONF_VERSION=2.64
CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	PYTHON2=${MODPY_BIN} MKDIR="/bin/mkdir -p"
CONFIGURE_ARGS+=--with-sasl=${LOCALBASE} \
		--without-jikes \
		--without-jdk \
		--without-libmagic

# Maintainer mode shows files and line numbers for every error raised
# by Subversion. It is useful for debugging problems with Subversion
# but is not required for normal operation.
.if ${FLAVOR:Mmaintainer_mode}
CONFIGURE_ARGS+=--enable-maintainer-mode
.endif

.include <bsd.port.arch.mk>

.if ${BUILD_PACKAGES:M-ruby} || ${BUILD_PACKAGES:M-perl} || ${BUILD_PACKAGES:M-python}

BUILD_DEPENDS+=	devel/swig>=1.3.36
CONFIGURE_ARGS+=--with-swig
.else
CONFIGURE_ARGS+=--without-swig
.endif

.if ${BUILD_PACKAGES:M-ruby}
MODULES+=	lang/ruby
CONFIGURE_ENV+=	RUBY=ruby${MODRUBY_BINREV} RDOC=rdoc${MODRUBY_BINREV}
.endif

.if ${BUILD_PACKAGES:M-ap2}
CONFIGURE_ARGS+=--with-apxs=${LOCALBASE}/sbin/apxs2 \
		--disable-mod-activation \
		--with-apache-libexecdir=${LOCALBASE}/lib/apache2
BUILD_DEPENDS+=		www/apache-httpd
.else
CONFIGURE_ARGS+=--without-apxs
.endif

.if ${BUILD_PACKAGES:M-gnome-keyring}
CONFIGURE_ARGS+=--with-gnome-keyring
.else
CONFIGURE_ARGS+=--without-gnome-keyring
.endif

TEST_DEPENDS=${MODPY_RUN_DEPENDS}
TEST_DEPENDS+=	${FULLPKGNAME-gnome-keyring}:${BUILD_PKGPATH},-gnome-keyring
SUBST_VARS+=	LOCALBASE SO_VERSION

pre-patch:
	@@ln -s ${MODPY_BIN} ${WRKDIR}/bin/python

pre-configure:
	@@${SUBST_CMD} ${WRKSRC}/Makefile.in ${WRKSRC}/configure.ac \
		${WRKSRC}/subversion/libsvn_subr/auth.c
	@@cd ${WRKSRC} && ${SETENV} ${CONFIGURE_ENV} \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} ./autogen.sh

.if ${BUILD_PACKAGES:M-python}
TEST_DEPENDS+=	${FULLPKGNAME-python}:${BUILD_PKGPATH},-python

.if ${BUILD_PACKAGES:M-ruby}
TEST_DEPENDS+=	${FULLPKGNAME-ruby}:${BUILD_PKGPATH},-ruby
.endif

pre-build:
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} clean-swig
.endif

post-build:
.if ${BUILD_PACKAGES:M-python}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} swig-py
.endif
.if ${BUILD_PACKAGES:M-perl}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} swig-pl
.endif
.if ${BUILD_PACKAGES:M-ruby}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} swig-rb
.endif
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} svnmucc
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} svnauthz
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} svn-populate-node-origins-index

do-test:
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_TEST_FLAGS} check FS_TYPE=bdb CLEANUP=1
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_TEST_FLAGS} check FS_TYPE=fsfs CLEANUP=1
.if ${BUILD_PACKAGES:M-perl}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_TEST_FLAGS} TMPDIR=${WRKBUILD} check-swig-pl
.endif
.if ${BUILD_PACKAGES:M-python}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_TEST_FLAGS} check-swig-py
.endif
.if ${BUILD_PACKAGES:M-ruby}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_TEST_FLAGS} check-swig-rb
.endif

post-install:
.if ${BUILD_PACKAGES:M-python}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} install-swig-py
.endif
.if ${BUILD_PACKAGES:M-perl}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} install-swig-pl
.endif
.if ${BUILD_PACKAGES:M-ruby}
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} install-swig-rb
.endif
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/
	${INSTALL_DATA} ${FILESDIR}/servers \
			${PREFIX}/share/examples/subversion/servers
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/client-side
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/server-side
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/cgi
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/client-side/emacs
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/client-side/svn2cl
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/client-side/svn_load_dirs
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/hook-scripts/mailer
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/hook-scripts/mailer/tests
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/hook-scripts/enforcer
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/server-side/mod_dontdothat
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/xslt
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} install-tools
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/backup
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/bdb
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/xslt
	${INSTALL_DATA} ${WRKBUILD}/tools/backup/hot-backup.py \
			${PREFIX}/share/examples/subversion/backup
	${INSTALL_DATA} ${WRKSRC}/tools/bdb/* \
		${PREFIX}/share/examples/subversion/bdb
	${INSTALL_DATA} ${WRKSRC}/tools/examples/* \
		${PREFIX}/share/examples/subversion
.for _script in ${TOOLS_CLIENT_SIDE_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/tools/client-side/${_script} \
			${PREFIX}/share/examples/subversion/client-side
.endfor
	${INSTALL_DATA} ${WRKSRC}/tools/server-side/fsfs-reshard.py \
			${PREFIX}/share/examples/subversion/server-side
	${INSTALL_DATA} ${WRKSRC}/tools/server-side/svn-backup-dumps.py \
			${PREFIX}/share/examples/subversion/server-side
	${INSTALL_PROGRAM} ${WRKSRC}/tools/server-side/svn-populate-node-origins-index.c \
		${PREFIX}/share/examples/subversion/server-side
	${INSTALL_DATA} ${WRKSRC}/tools/xslt/* \
		${PREFIX}/share/examples/subversion/xslt
.for _hook_script in ${TOOLS_HOOK_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/${_hook_script} \
			${PREFIX}/share/examples/subversion/hook-scripts/
.endfor
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/mailer/mailer.conf.example \
			${PREFIX}/share/examples/subversion/hook-scripts/mailer
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/mailer/mailer.conf.example \
			${PREFIX}/share/examples/subversion/hook-scripts/mailer
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/mailer/mailer.py \
			${PREFIX}/share/examples/subversion/hook-scripts/mailer
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/mailer/tests/* \
			${PREFIX}/share/examples/subversion/hook-scripts/mailer/tests
	find ${PREFIX}/share/examples/subversion -type f -exec sed -Ei \
		-e "s,.*/usr/bin/ruby.*,#!${RUBY}," \
		-e "s,.*env ruby.*,#!${RUBY}," \
		-e "s,.*/usr/bin/python.*,#!${MODPY_BIN}," \
		-e "s,.*env python.*,#!${MODPY_BIN}," \
			{} +
	find ${PREFIX}/share/examples/subversion -type f -name '*\.orig' \
		-exec rm -f {} \;

.include <bsd.port.mk>
@


1.155
log
@Tell devel/subversion regress tests to clean up after themselves. Avoids
running out of space in /usr/ports/pobj when running 'make regress' here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2016/11/29 16:31:00 stsp Exp $
d10 1
a10 1
VERSION=		1.9.5
@


1.154
log
@Update to Apache Subversion 1.9.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2016/09/23 09:16:54 sthen Exp $
d225 1
a225 1
		${ALL_TEST_FLAGS} check FS_TYPE=bdb
d227 1
a227 1
		${ALL_TEST_FLAGS} check FS_TYPE=fsfs
@


1.154.2.1
log
@For 6.1-stable:
Update to Apache Subversion 1.9.6. Contains a server-side SHA1 collision fix.
Direct update for -stable discussed with danj@@ and sthen@@ a few days ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2016/11/29 16:31:00 stsp Exp $
d10 1
a10 1
VERSION=		1.9.6
@


1.153
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2016/07/08 16:50:36 sthen Exp $
d10 1
a10 1
VERSION=		1.9.4
a22 7

REVISION-ap2=	1
REVISION-gnome-keyring=	0
REVISION-main=	1
REVISION-perl=	0
REVISION-python=0
REVISION-ruby=	0
@


1.152
log
@sync WANTLIB, svn_fs_x-1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2016/06/28 19:46:02 sthen Exp $
d24 6
a29 2
REVISION-ap2=	0
REVISION-main=	0
d74 1
@


1.152.2.1
log
@For 6.0-stable: Patch CVE-2016-8734.
Already fixed in -current as part of update to Subversion 1.9.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2016/07/08 16:50:36 sthen Exp $
d24 2
a25 2
REVISION-ap2=	1
REVISION-main=	1
@


1.151
log
@add a pseudo flavour to allow building subversion without gnome-keyring, ok stsp
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2016/06/21 21:55:08 jung Exp $
d24 1
d88 1
a88 1
WANTLIB-ap2=		${WANTLIB} apr-1 aprutil-1 db sqlite3
@


1.150
log
@fix user and group

from Johan Huldtgren via czarkoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2016/06/14 08:36:29 czarkoff Exp $
d49 1
a49 1
PSEUDO_FLAVORS=	no_bindings no_ap2 no_perl no_python no_ruby
a137 1
		--with-gnome-keyring \
d171 6
@


1.149
log
@update to subversion 1.9.4

OK sthen@@, stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2016/04/28 16:03:01 stsp Exp $
d23 2
@


1.148
log
@add a svnserve rc.d script

ok stsp ajacoutot
@
text
@d10 1
a10 1
VERSION=		1.8.15
d24 1
a24 5
REVISION-main=		1
REVISION-ruby=		0
REVISION-ap2=		0

SO_VERSION=	1.4
d26 2
a27 2
		svn_fs_base-1 svn_fs_fs-1 svn_fs_util-1 svn_ra-1 \
		svn_ra_serf-1 svn_ra_local-1 \
d82 2
a83 1
	server-version.py showchange.pl svn-graph.pl
d298 6
a303 3
	find ${PREFIX}/share/examples/subversion -type f | xargs perl -pi \
		-e "s,.*/usr/bin/python.*,#!${MODPY_BIN},;" \
		-e "s,.*env python.*,#!${MODPY_BIN},;"
@


1.147
log
@No ports hackathon without a ports commit: Add patches for Subversion
security bugs CVE-2016-2167 and CVE-2016-2168 which were just released.
An update to a newer release of SVN will come later.
ok sthen@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2016/03/12 23:23:38 naddy Exp $
d24 1
a24 1
REVISION-main=		0
@


1.146
log
@trivial NO_SHARED_ARCHS and PROPERTIES:Mno_shared removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2016/03/11 20:28:25 naddy Exp $
d24 1
d26 1
@


1.145
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2015/12/16 10:21:52 stsp Exp $
a92 4

NOT_FOR_ARCHS-perl = ${NO_SHARED_ARCHS}
NOT_FOR_ARCHS-python = ${NO_SHARED_ARCHS}
NOT_FOR_ARCHS-ruby = ${NO_SHARED_ARCHS}
@


1.144
log
@Update to Apache Subversion 1.8.15. Fixes CVE-2015-5343.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2015/08/27 14:38:36 jeremy Exp $
d140 1
a140 2
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
		--with-sasl=${LOCALBASE} \
@


1.144.2.1
log
@For 5.9-stable: Add patches for Subversion security bugs CVE-2016-2167
and CVE-2016-2168 which were just released.
ok sthen@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2015/12/16 10:21:52 stsp Exp $
a23 1
REVISION-main=		0
a24 1
REVISION-ap2=		0
@


1.143
log
@Bump affected ports after change to MODRUBY_WANTLIB

Help from and OK nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2015/08/05 22:09:12 stsp Exp $
d10 1
a10 1
VERSION=		1.8.14
@


1.142
log
@Update to Subversion 1.8.14. Fixes CVE-2015-3184 and CVE-2015-3187.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2015/07/17 23:58:43 ajacoutot Exp $
d23 2
@


1.142.4.1
log
@Patch CVE-2015-5343 in Apache Subversion for 5.8-stable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2015/08/05 22:09:12 stsp Exp $
a22 1
REVISION-ap2=	0
@


1.141
log
@Bump after apache-http subpackaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2015/04/04 09:21:00 ajacoutot Exp $
d10 1
a10 1
VERSION=		1.8.13
a22 3

REVISION-gnome-keyring=	0
REVISION-ap2=		0
@


1.140
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2015/03/31 12:17:59 stsp Exp $
d25 1
@


1.139
log
@Update to Apache Subversion 1.8.13.
Fixes CVE-2015-0202, CVE-2015-0248, and CVE-2015-0251.
-stable patches will happen within the next few days.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2015/03/19 20:25:26 naddy Exp $
d23 2
@


1.138
log
@fold lib-only PFRAG.shared into PLIST, and some related cleanups
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2014/12/17 12:17:52 stsp Exp $
d10 1
a10 1
VERSION=		1.8.11
a22 1
REVISION-main=		0
@


1.137
log
@Update to Subversion 1.8.11.
Fixes CVE-2014-3580 and CVE-2014-8108 (mod_dav_svn DoS in both cases).
Stop compiling in libmagic support since it is considered unsafe.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2014/08/11 17:36:18 stsp Exp $
d23 1
@


1.137.2.1
log
@Patch several problems in devel/subversion for 5.7-stable:
CVE-2015-0202, CVE-2015-0248, CVE-2015-0251, CVE-2015-3187
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2014/12/17 12:17:52 stsp Exp $
a22 2
REVISION-ap2=	0
REVISION-main=	0
@


1.136
log
@Update to Subversion 1.8.10. -stable backports of important fixes will
follow in about a week when new files can be created in the tree again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2014/06/14 10:34:44 sthen Exp $
d10 1
a10 1
VERSION=		1.8.10
d56 1
a56 1
WANTLIB=	expat magic pthread z
d69 1
a69 2
		security/cyrus-sasl2 \
		devel/libmagic
d143 1
a143 1
		--with-libmagic=${LOCALBASE}
@


1.135
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2014/05/23 09:37:40 stsp Exp $
d10 1
a10 1
VERSION=		1.8.9
a22 1
REVISION-perl=		0
@


1.135.2.1
log
@For 5.6-stable: Add Subversion patches for CVE-2014-3580 and CVE-2014-8108,
two remotely triggerable crashes in mod_dav_svn.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2014/06/14 10:34:44 sthen Exp $
a22 1
REVISION-ap2=		0
@


1.135.2.2
log
@5.6-stable patches for Apache Subversion CVE-2015-0202, CVE-2015-0248,
and CVS-2015-0251. test + ok jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135.2.1 2014/12/17 13:55:14 stsp Exp $
d23 1
a23 2
REVISION-ap2=		1
REVISION-main=		0
@


1.134
log
@Update to Subversion 1.8.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2014/04/21 15:47:03 ajacoutot Exp $
d23 1
@


1.133
log
@Sync for kerberos removal from serf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2014/04/21 13:45:09 stsp Exp $
d10 1
a10 1
VERSION=		1.8.8
a22 4

REVISION-main=		0
REVISION-python=	0
REVISION-ruby=		0
@


1.132
log
@Maintenance update to Subversion 1.8.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2014/02/20 21:15:31 stsp Exp $
d24 4
d76 2
a77 2
WANTLIB-main=	${WANTLIB} apr-1 aprutil-1 asn1 c com_err crypto db gssapi \
		heimbase krb5 roken sasl2>=2 serf-1>=1.0 ssl sqlite3 wind
d109 3
a111 3
WANTLIB-python=		${WANTLIB} apr-1 aprutil-1 asn1 com_err crypto \
			heimbase gssapi db krb5 m roken sasl2 serf-1>=1.0 \
			sqlite3 util wind ${MODPY_WANTLIB}
d120 3
a122 3
WANTLIB-ruby=		${WANTLIB} apr-1 aprutil-1 asn1 com_err crypto gssapi \
			heimbase db krb5 m roken sasl2 serf-1>=1.0 sqlite3 \
			wind ${MODRUBY_WANTLIB}
@


1.131
log
@Fix for CVE-2014-0032, mod_dav_svn DoS vulnerability with SVNListParentPath
ok aja, jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2014/01/20 15:12:24 stsp Exp $
d10 1
a10 1
VERSION=		1.8.5
a11 2
REVISION-main = 	0
REVISION-ap2 =		0
@


1.130
log
@Fix Subversion's gnome-keyring support which was accidentally broken
during the upgrade to 1.8.
ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2013/11/25 17:08:06 stsp Exp $
d13 1
@


1.129
log
@Update to Apache Subversion 1.8.5.
Among other fixes, this release addresses two security issues:
    CVE-2013-4505: mod_dontdothat does not restrict requests from serf clients.
    CVE-2013-4558: mod_dav_svn assertion triggered by autoversioning commits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2013/10/29 16:02:28 stsp Exp $
d12 1
d179 2
a180 1
SUBST_VARS+=	LOCALBASE
@


1.128
log
@Update to Subversion 1.8.4. Maintenance release, mostly client-side fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2013/10/10 09:50:17 stsp Exp $
d10 1
a10 1
VERSION=		1.8.4
@


1.127
log
@Update to Apache Subversion 1.8.3. Newer, better, faster!
Existing working copies need to be upgraded with 'svn upgrade',
otherwise backwards compatible as usual.
http://subversion.apache.org/docs/release-notes/1.8.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2013/08/31 08:45:52 stsp Exp $
d10 1
a10 1
VERSION=		1.8.3
@


1.126
log
@Update to Subversion 1.7.13.
Fixes CVE-2013-4277 (symlink attack on svnserve's PID file).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2013/08/08 17:55:35 stsp Exp $
d10 1
a10 1
VERSION=		1.7.13
d24 1
a24 1
SO_VERSION=	1.3
d27 1
a27 1
		svn_ra_neon-1 svn_ra_local-1 svn_ra_neon-1 \
d66 1
a66 1
		net/neon>=0.26.2 \
d72 2
a73 4
WANTLIB-main=	${WANTLIB} asn1 c crypto db gssapi krb5 ssl \
		neon>=26 apr-1 aprutil-1 sasl2>=2 sqlite3 \
		m proxy stdc++ com_err heimbase \
		roken wind
d106 2
a107 2
			heimbase gssapi db krb5 m neon proxy roken sasl2 \
			sqlite3 ssl util wind ${MODPY_WANTLIB}
d117 1
a117 1
			heimbase db krb5 m neon proxy roken sasl2 sqlite3 ssl \
d170 2
a171 1
		--disable-mod-activation
d178 1
a178 1
SUBST_VARS+=	LOCALBASE SO_VERSION
d217 1
a217 1
		${MAKE_FLAGS} svnauthz-validate
@


1.125
log
@Update to Subversion-1.7.11.
Fixes CVE-2013-4131: mod_dav_svn assertion from requests against root path.
Fix WANTLIB for -python and -ruby packages while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2013/06/20 06:54:36 ajacoutot Exp $
d10 1
a10 1
VERSION=		1.7.11
@


1.124
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2013/06/17 19:28:36 ajacoutot Exp $
d10 1
a10 1
VERSION=		1.7.10
a22 2
REVISION-main=		1
REVISION-gnome-keyring=	1
d107 3
a109 2
WANTLIB-python=		${WANTLIB} apr-1 aprutil-1 asn1 crypto gssapi db \
			krb5 neon proxy sasl2 sqlite3 ssl ${MODPY_WANTLIB}
d118 3
a120 2
WANTLIB-ruby=		${WANTLIB} apr-1 aprutil-1 asn1 crypto gssapi db \
			krb5 m neon proxy sasl2 sqlite3 ssl ${MODRUBY_WANTLIB}
@


1.124.2.1
log
@Security fixes for CVE-2013-4131, CVE-2013-2112, CVE-2013-4277

ok stsp@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2013/06/20 06:54:36 ajacoutot Exp $
d23 1
a23 2
REVISION-main=		2
REVISION-ap2=		0
@


1.124.2.2
log
@Apply security fixes for CVE-2013-4558 / CVE-2013-4505

ok stsp@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124.2.1 2013/10/30 12:54:22 jasper Exp $
d24 1
a24 1
REVISION-ap2=		1
@


1.124.2.3
log
@For 5.4-stable, fix CVE-2014-0032: mod_dav_svn DoS vulnerability
requested by and ok jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124.2.2 2013/12/01 12:49:07 jasper Exp $
d24 1
a24 1
REVISION-ap2=		2
@


1.123
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2013/05/31 20:59:51 stsp Exp $
d23 2
a24 2
REVISION-main=		0
REVISION-gnome-keyring=	0
d76 2
a77 2
		m proxy stdc++ com_err heimbase heimntlm \
		hx509 roken wind
@


1.122
log
@Update to Subversion 1.7.10. The two most important fixes are:
CVE-2013-1968: fsfs repository corruption caused by newline characters
               in filenames
CVE-2013-2112: svnserve remotely triggerable DoS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2013/05/03 07:46:12 stsp Exp $
d23 2
d76 2
a77 1
		m proxy stdc++
d130 1
a130 2
		svn_subr-1>=${SO_VERSION} ffi gmodule-2.0 gobject-2.0 \
		gthread-2.0
@


1.121
log
@Update to Subversion 1.7.9 which includes the CVE patches committed earlier.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2013/04/05 14:51:35 stsp Exp $
d10 1
a10 1
VERSION=		1.7.9
@


1.120
log
@Add patches for CVE-2013-1884, CVE-2013-1845, CVE-2013-1846, CVE-2013-1847,
and CVE-2013-1849. All of these are denial-of-service vulnerabilities
which affect Subversion servers using mod_dav_svn (Apache HTTPD) only.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2013/03/21 08:45:16 ajacoutot Exp $
d10 1
a10 2
VERSION=		1.7.8
REVISION=		0
@


1.119
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2013/03/20 19:13:50 jeremy Exp $
d11 1
@


1.118
log
@Make ruby 1.9 the default ruby for non-gem/extconf ports,
for consistency with the gem/extconf ports.

Update non-gem/extconf ports that relied on the previous
default of ruby 1.8 to explicitly specify it.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2013/03/11 10:50:31 espie Exp $
a135 1
USE_LIBTOOL=	Yes
@


1.117
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2013/01/05 12:53:08 stsp Exp $
d115 1
@


1.116
log
@Update to Subversion 1.7.8. ok benoit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2012/10/29 14:30:55 stsp Exp $
a42 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d176 1
a176 1
REGRESS_DEPENDS=${MODPY_RUN_DEPENDS}
d189 1
a189 1
REGRESS_DEPENDS+=	${FULLPKGNAME-python}:${BUILD_PKGPATH},-python
d192 1
a192 1
REGRESS_DEPENDS+=	${FULLPKGNAME-ruby}:${BUILD_PKGPATH},-ruby
d220 1
a220 1
do-regress:
d222 1
a222 1
		${ALL_REGRESS_FLAGS} check FS_TYPE=bdb
d224 1
a224 1
		${ALL_REGRESS_FLAGS} check FS_TYPE=fsfs
d227 1
a227 1
		${ALL_REGRESS_FLAGS} TMPDIR=${WRKBUILD} check-swig-pl
d231 1
a231 1
		${ALL_REGRESS_FLAGS} check-swig-py
d235 1
a235 1
		${ALL_REGRESS_FLAGS} check-swig-rb
@


1.116.2.1
log
@For 5.3-stable:

Add patches for CVE-2013-1884, CVE-2013-1845, CVE-2013-1846, CVE-2013-1847,
and CVE-2013-1849. All of these are denial-of-service vulnerabilities
which affect Subversion servers using mod_dav_svn (Apache HTTPD) only.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2013/01/05 12:53:08 stsp Exp $
a10 1
REVISION=		0
@


1.116.2.2
log
@For 5.3-stable: Add patches for CVE-2013-1968 and CVE-2013-2112.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116.2.1 2013/05/03 06:51:46 stsp Exp $
d11 1
a11 1
REVISION=		1
@


1.116.2.3
log
@On the 5.3-stable branch, add security patch for
  CVE-2013-4131: mod_dav_svn assertion from requests against root path
and bump the -ap2 subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116.2.2 2013/05/31 21:00:53 stsp Exp $
a11 1
REVISION-ap2=		2
@


1.116.2.4
log
@For 5.3-stable: Patch for CVE-2013-4277 (symlink attack on svnserve's PID file).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116.2.3 2013/08/08 17:57:56 stsp Exp $
a11 1
REVISION-main=		2
@


1.115
log
@Update to Subversion-1.7.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2012/09/01 13:40:18 stsp Exp $
d10 1
a10 1
VERSION=		1.7.7
@


1.114
log
@Update to Subversion 1.7.6 and fix WANTLIB for pthread; ok sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2012/08/23 13:52:39 sthen Exp $
d10 1
a10 1
VERSION=		1.7.6
@


1.113
log
@missing wantlib/modules; p5-* thingys which are *not* just WANTLIB+=c.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2012/06/06 14:20:36 stsp Exp $
d10 1
a10 1
VERSION=		1.7.5
a12 4
REVISION-main=		0
REVISION-perl=		1
REVISION-python=	0
REVISION-ruby=		0
d59 1
a59 1
WANTLIB=	expat magic z
d76 1
a76 1
		neon>=26 pthread apr-1 aprutil-1 sasl2>=2 sqlite3 \
d101 1
a101 1
WANTLIB-perl=		${WANTLIB} apr-1 aprutil-1 c sqlite3 pthread
a136 1
CFLAGS+=	-pthread
@


1.112
log
@Fix gnome-keyring description in DESCR-main, and other various DESCR tweaks.
ok sthen mpi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2012/05/30 12:16:14 stsp Exp $
d14 1
a14 1
REVISION-perl=		0
d105 1
a105 1
WANTLIB-perl=		${WANTLIB} apr-1 aprutil-1 sqlite3
@


1.112.2.1
log
@For 5.2-stable:

Add patches for CVE-2013-1884, CVE-2013-1845, CVE-2013-1846, CVE-2013-1847,
and CVE-2013-1849. All of these are denial-of-service vulnerabilities
which affect Subversion servers using mod_dav_svn (Apache HTTPD) only.

For good measure throw in two additional fixes which were made after SVN 1.7.5,
fixing a crash in mod_dav_svn and unbound memory use in mod_authz_svn.
These fixes are already in 5.3 and -current.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2012/06/06 14:20:36 stsp Exp $
a10 1
REVISION=		0
@


1.111
log
@Update to Subversion 1.7.5 and fix WANTLIB; help and ok mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2012/05/05 10:12:52 ajacoutot Exp $
d13 4
@


1.110
log
@Fix RUN_DEPENDS-gnome-keyring; no need to depend on ruby nor python for
this subpackage.

ok stsp@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2012/04/29 12:43:25 ajacoutot Exp $
d10 1
a10 1
VERSION=		1.7.4
a12 3
REVISION=		0
REVISION-main=		1
REVISION-gnome-keyring = 3
d59 1
a59 1
WANTLIB=	expat db magic z
d75 3
a77 2
WANTLIB-main=	${WANTLIB} asn1 c crypto gssapi krb5 ssl \
		neon>=26 pthread apr-1 aprutil-1 sasl2>=2 sqlite3
d89 1
a89 1
WANTLIB-ap2=		${WANTLIB} apr-1 aprutil-1 sqlite3
d109 2
a110 2
WANTLIB-python=		${WANTLIB} apr-1 aprutil-1 asn1 crypto gssapi \
			krb5 neon sasl2 sqlite3 ssl ${MODPY_WANTLIB}
d118 2
a119 2
WANTLIB-ruby=		${WANTLIB} apr-1 aprutil-1 asn1 crypto gssapi \
			krb5 m neon sasl2 sqlite3 ssl ${MODRUBY_WANTLIB}
@


1.109
log
@Fix dependencies for -gnome-keyring; sqlite3 is in base and
libgnome-keyring already brings all the other required deps.

ok sthen@@ and no objection from stsp@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2012/04/28 15:32:47 espie Exp $
d15 1
a15 1
REVISION-gnome-keyring = 2
d136 2
@


1.108
log
@fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2012/04/28 09:53:38 sthen Exp $
d15 1
a15 1
REVISION-gnome-keyring = 1
a134 4
		databases/sqlite3 \
		devel/glib2 \
		devel/pcre \
		x11/dbus \
@


1.107
log
@Merge Subversion's gnome-keyring FLAVOR back into the main build and
use a subpackage instead. This was split previously because gnome-keyring
required linking pthread causing file-descriptor I/O issues with the main
binary.  ok stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2012/04/23 17:15:18 espie Exp $
d15 1
d25 1
a25 1
FULLPKGPATH-gnome-keyring= devel/subversion,-gnome
@


1.106
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2012/03/12 10:28:40 stsp Exp $
d8 1
d13 2
d23 2
a24 1
REVISION =		0
d28 6
a33 3
		svn_fs_base-1 svn_fs_fs-1 svn_fs_util-1 svn_ra-1 svn_ra_neon-1 \
		svn_ra_local-1 svn_ra_neon-1 svn_ra_svn-1 svn_repos-1 svn_subr-1 svn_wc-1
.for _lib in ${SVN_LIBS} svn_swig_perl-1 svn_swig_py-1 svn_swig_ruby-1
d53 1
a53 1
FLAVORS=	gnome_keyring maintainer_mode
a59 1
USE_GROFF =	Yes
a62 1

d67 1
a67 1
MULTI_PACKAGES = -main -ap2 -perl -python -ruby
d78 1
a78 1
		neon>=26 apr-1 aprutil-1 sasl2>=2 sqlite3
d128 12
a139 17
.if ${FLAVOR:Mgnome_keyring}
SHARED_ONLY=	Yes
MODULES+=	converters/libiconv
LIB_DEPENDS-main += 	x11/dbus \
			devel/glib2 \
			x11/gnome/libgnome-keyring \
			devel/pcre \
			${MODGETTEXT_LIB_DEPENDS}
WANTLIB-main+=	apr-1 aprutil-1 gcrypt gpg-error \
		dbus-1>=7 glib-2.0 gnome-keyring>=6 pcre>=2
SHARED_LIBS+=	svn_auth_gnome_keyring-1 ${SO_VERSION}
# gnome-keyring depends on dbus depends on pthread, so svn won't be able
# to load libsvn_auth_gnome_keyring without the main executable being compiled
# and linked with -pthread. We want to avoid this as it causes problems with
# our current threading implementation (which has to force stdin/stdout to
# be non-blocking). As this affects -main it must be a FLAVOR.
WANTLIB-main+=	pthread
a140 2
.endif

d148 1
a193 4

.if ${FLAVOR:Mgnome_keyring}
CONFIGURE_ARGS+=--with-gnome-keyring
.endif
@


1.105
log
@Update to 1.7.4; ok mpi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2012/02/19 12:13:35 stsp Exp $
d20 1
a69 1
		databases/sqlite3 \
@


1.104
log
@Update to 1.7.3; ok mpi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2011/12/23 10:34:36 stsp Exp $
d9 1
a9 1
VERSION=		1.7.3
@


1.103
log
@Add a maintainer_mode flavour which displays file and line-number information
for errors thrown from Subversion. This doesn't need to be built by default.
It can provide some leads when debugging Subversion problems on OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2011/12/07 16:47:37 stsp Exp $
d9 1
a9 1
VERSION=		1.7.2
@


1.102
log
@Update to 1.7.2. ok mpi sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2011/12/04 16:06:52 espie Exp $
d45 1
a45 1
FLAVORS=	gnome_keyring
d153 7
@


1.101
log
@convert to bsd.port.arch.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2011/10/23 09:51:56 stsp Exp $
d9 1
a9 1
VERSION=		1.7.1
@


1.100
log
@Update to 1.7.1 (most importantly this release fixes several bugs in
'svn upgrade'), regen patches, and add a patch queued for 1.7.2 which
fixes 'svn update' for symlinks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2011/10/14 10:13:05 stsp Exp $
d44 1
a44 1
PSEUDO_FLAVORS=	no_bindings no_ap2
d47 3
d61 1
a61 1
MULTI_PACKAGES=	-main
a84 2
.if !${FLAVOR:L:Mno_ap2}
MULTI_PACKAGES+=	-ap2
d87 1
a87 1
.  for _lib in svn_delta-1 svn_fs-1 svn_fs_base-1 svn_fs_fs-1 \
d90 1
a90 2
.  endfor
BUILD_DEPENDS+=		www/apache-httpd
a91 1
.endif
d93 3
a95 3
.if !${FLAVOR:L:Mno_bindings}
MULTI_PACKAGES+=-perl -python -ruby
SHARED_ONLY=	Yes
d100 1
a100 1
.  for _lib in svn_diff-1 svn_ra-1 svn_delta-1 svn_subr-1 svn_fs-1 \
d103 1
a103 1
.  endfor
d110 1
a110 1
.  for _lib in ${SVN_LIBS}
d112 1
a112 1
.  endfor
d119 1
a119 1
.  for _lib in ${SVN_LIBS}
d121 1
a121 1
.  endfor
d123 1
a123 5
MODULES+=	lang/ruby
BUILD_DEPENDS+=	devel/swig>=1.3.36
.endif

.if ${FLAVOR:L:Mgnome_keyring}
d153 6
a158 1
.if !${FLAVOR:L:Mno_bindings}
a159 1
CONFIGURE_ENV+=	RUBY=ruby${MODRUBY_BINREV} RDOC=rdoc${MODRUBY_BINREV}
d164 6
a169 1
.if !${FLAVOR:L:Mno_ap2}
d172 1
d189 1
a189 1
.if ${FLAVOR:L:Mgnome_keyring}
d193 6
a198 3
.if !${FLAVOR:L:Mno_bindings}
REGRESS_DEPENDS+=	${FULLPKGNAME-python}:devel/subversion,-python \
			${FULLPKGNAME-ruby}:devel/subversion,-ruby
d206 1
a206 1
.if !${FLAVOR:L:Mno_bindings}
d209 2
d213 2
d230 1
a230 1
.if !${FLAVOR:L:Mno_bindings}
d233 2
d237 2
d244 1
a244 1
.if !${FLAVOR:L:Mno_bindings}
d247 2
d251 2
@


1.99
log
@Apply a patch from upstream which fixes an assertion failure during merge.
Noticed by and ok mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2011/10/13 11:22:58 stsp Exp $
d9 1
a9 1
VERSION=		1.7.0
a19 2

REVISION-main=	0
@


1.98
log
@Update to 1.7.0. ok mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2011/10/11 09:59:45 stsp Exp $
d20 2
@


1.97
log
@Bump the -main subversion package to make sure it gets rebuilt with
fixed cyrus-sasl-2.1.25p0. Pointed out by sthen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2011/09/16 09:24:58 espie Exp $
d9 1
a9 1
VERSION=		1.6.17
d21 1
a21 7
REVISION-main=		4
REVISION-python=	1
REVISION-perl=		0
REVISION-ruby=		3
REVISION-ap2=		0

SO_VERSION=	1.2
d41 1
a41 2
# Subversion 1.6.x tarballs are still hosted at tigris.org, not apache.org
MASTER_SITES=	http://subversion.tigris.org/downloads/
d51 1
a51 1
WANTLIB=	expat db z
d66 2
a67 1
		databases/sqlite3
a72 6
CONTRIB_HOOK_SCRIPTS=	case-insensitive.py pre-commit-check.py \
	check-mime-type.pl pre-lock-require-needs-lock.py \
	commit-block-joke.py remove-zombie-locks.py \
	syntax-check.sh commit-email.pl
# There's also 'enforcer', but we handle it separately, see post-install

a78 10
CONTRIB_CLIENT_SIDE_SCRIPTS=	incremental-update.py search-svnlog.pl \
	svn-clean svn-merge-vendor.py svn_apply_autoprops.py \
	svn_export_empty_files.py

SVN_LOAD_DIRS_FILES=	LICENSE_AFL3.txt svn_load_dirs.README \
	svn_load_dirs.pl svn_load_dirs_property_table.example

CONTRIB_SERVER_SIDE_SCRIPTS=	authz_svn_group.py fsfsverify.py \
	svn-fast-backup svn-tweak-author.py

d152 1
a152 1
CONFIGURE_ENV=	PYTHON2=${MODPY_BIN}
d156 2
a157 1
		--without-jdk
d160 1
a250 28
	${INSTALL_DATA} ${WRKSRC}/contrib/cgi/* \
			${PREFIX}/share/examples/subversion/cgi
	${INSTALL_DATA} ${WRKSRC}/contrib/client-side/emacs/* \
			${PREFIX}/share/examples/subversion/client-side/emacs
	${INSTALL_DATA} ${WRKSRC}/contrib/client-side/svn2cl/* \
			${PREFIX}/share/examples/subversion/client-side/svn2cl
.for _file in ${SVN_LOAD_DIRS_FILES}
	${INSTALL_DATA} ${WRKSRC}/contrib/client-side/svn_load_dirs/${_file} \
			${PREFIX}/share/examples/subversion/client-side/svn_load_dirs
.endfor
	${INSTALL_DATA} ${WRKSRC}/contrib/server-side/mod_dontdothat/* \
			${PREFIX}/share/examples/subversion/server-side/mod_dontdothat
.for _script in ${CONTRIB_CLIENT_SIDE_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/contrib/client-side/${_script} \
			${PREFIX}/share/examples/subversion/client-side
.endfor
.for _script in ${CONTRIB_SERVER_SIDE_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/contrib/server-side/${_script} \
			${PREFIX}/share/examples/subversion/server-side
.endfor
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/enforcer/enforcer \
			${PREFIX}/share/examples/subversion/hook-scripts/enforcer/
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/enforcer/enforcer.conf \
			${PREFIX}/share/examples/subversion/hook-scripts/enforcer/
.for _hook_script in ${CONTRIB_HOOK_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/${_hook_script} \
			${PREFIX}/share/examples/subversion/hook-scripts/
.endfor
a271 2
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/README \
			${PREFIX}/share/examples/subversion/hook-scripts/
@


1.96
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2011/07/22 22:21:06 naddy Exp $
d21 1
a21 1
REVISION-main=		3
@


1.95
log
@missing bump for ruby directory change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2011/07/19 18:00:16 jeremy Exp $
d21 2
a22 2
REVISION-main=		2
REVISION-python=	0
d24 1
a24 1
REVISION-ruby=		2
@


1.94
log
@Bump after change to remove OpenBSD version from ruby SITEARCHDIR,
and use new MODRUBY_SITEDIR and MODRUBY_SITEARCHDIR variables in
PLIST.

OK landry@@, jcs@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2011/07/18 19:06:36 naddy Exp $
d21 1
a21 1
REVISION-main=		1
@


1.93
log
@bump revision for plist changes 4.9 -> 5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2011/06/08 17:40:08 jasper Exp $
d24 1
a24 1
REVISION-ruby=		1
@


1.92
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2011/06/01 22:19:17 stsp Exp $
d21 1
a21 1
REVISION-main=		0
d24 1
a24 1
REVISION-ruby=		0
@


1.91
log
@Update to 1.6.17. Fixes CVE-2011-1752, CVE-2011-1783, and CVE-2011-1921.
ok landry jasper sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2011/05/02 17:13:33 stsp Exp $
d20 6
@


1.90
log
@Use the proper autoconf version for AUTOCONF_VERSION. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2011/03/18 16:25:26 stsp Exp $
d9 1
a9 1
VERSION=		1.6.16
a16 1
REVISION-ruby=		0
@


1.89
log
@fix WANTLIB for -ruby subpackage; ok jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2011/03/03 20:46:32 stsp Exp $
d167 1
a167 2
# should be 2.63
AUTOCONF_VERSION=2.62
@


1.88
log
@SECURITY FIX: Update to 1.6.16 (fixes CVE-2011-0715)
ok jasper landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2011/01/15 01:09:43 naddy Exp $
d17 1
d133 1
a133 1
			krb5 neon sasl2 sqlite3 ssl ${MODRUBY_WANTLIB}
@


1.87
log
@bump revision for plist changes 4.8 -> 4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2010/11/26 07:19:01 espie Exp $
d9 1
a9 1
VERSION=		1.6.15
a19 2
REVISION-main=		0
REVISION-ruby=		0
@


1.87.2.1
log
@Apply patches for CVE-2011-0715, CVE-2011-1752, CVE-2011-1783,
and CVE-2011-1921 to 4.9-stable branch.
ok landry jasper sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2011/01/15 01:09:43 naddy Exp $
d20 1
a20 1
REVISION-main=		1
a21 1
REVISION-ap2=		0
@


1.86
log
@newer depends with >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2010/11/25 11:43:27 stsp Exp $
d20 2
@


1.85
log
@Update to 1.6.15. This release contains fixes for server-side crashes
which can be triggered by clients. Please update your servers (it doesn't
matter whether you use svnserve or mod_dav_svn, you need to update).
A corresponding update for -stable ports will follow.

ok jasper sthen dcoppa
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2010/11/24 21:35:14 jeremy Exp $
d63 1
a63 1
		neon->=0.26.2:net/neon \
d141 1
a141 1
BUILD_DEPENDS+=	swig->=1.3.36:devel/swig
@


1.84
log
@REVISION bump all ruby ports due to a change in the pkgspec.
Previously, we were using ruby->=1.8,<=1.9, instead of
ruby->=1.8,<1.9.  While this wouldn't cause an issue, since
our ruby-1.9.2 package isn't included in ruby->=1.8,<=1.9,
it's still wrong and should be fixed.  This also fixes the
following minor issues:

Switch from using FLAVOR to MODRUBY_FLAVOR for *_DEPENDS.
Currently we don't have a ruby port that uses FLAVORs that
would differ from MODRUBY_FLAVOR, but it's possible we will
in the future.

Switch from BASE_PKGPATH to BUILD_PKGPATH in a few cases in
REGRESS_DEPENDS.  This probably is not strictly necessary, but
BUILD_PKGPATH is used in more cases, so it is good for
consistency.

Switch to new style *_DEPENDS, with the version specification
at the end.  The remaining cases where this is not done is
because a specific version is used.

Some FULLPKGNAME added to REGRESS_DEPENDS, to make sure that if
the old version is installed when you run a regress test, it
will install the new version first.

Some conversion of spaces to tabs for consistency.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2010/11/15 19:46:09 espie Exp $
d9 1
a9 1
VERSION=		1.6.13
a130 1
REVISION-ruby=		0
@


1.83
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2010/11/08 12:26:01 espie Exp $
d131 1
@


1.82
log
@new WANTLIB. fix-up a bit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2010/10/26 21:42:14 jeremy Exp $
d57 1
a57 1
		::devel/libtool
d61 1
a61 1
MAINSPEC =	:${PKGNAME}:devel/subversion,-main
d63 5
a67 5
		:neon->=0.26.2:net/neon \
		::devel/apr \
		::devel/apr-util \
		::security/cyrus-sasl2 \
		::databases/sqlite3
d70 1
a70 1
		neon.>=26 apr-1 aprutil-1 sasl2.>=2 sqlite3
d104 1
a104 1
WANTLIB-ap2 +=	${_lib}.>=${SO_VERSION}
d106 2
a107 2
BUILD_DEPENDS+=		::www/apache-httpd
RUN_DEPENDS-ap2=	::www/apache-httpd
d119 1
a119 1
WANTLIB-perl +=	${_lib}.>=${SO_VERSION}
d128 1
a128 1
WANTLIB-python +=	${_lib}.>=${SO_VERSION}
d137 1
a137 1
WANTLIB-ruby +=	${_lib}.>=${SO_VERSION}
d141 1
a141 1
BUILD_DEPENDS+=	:swig->=1.3.36:devel/swig
d147 4
a150 4
LIB_DEPENDS-main += 	::x11/dbus \
			::devel/glib2 \
			:libgnome-keyring-*:x11/gnome/libgnome-keyring \
			::devel/pcre \
d153 1
a153 1
		dbus-1.>=7 glib-2.0 gnome-keyring.>=6 pcre.>=2
d204 2
a205 2
REGRESS_DEPENDS+=	:${PKGNAME-python}:devel/subversion,-python \
			:${PKGNAME-ruby}:devel/subversion,-ruby
@


1.81
log
@Handle the rest of the fallout from the splitting of MODRUBY_LIB_DEPENDS
into MODRUBY_WANTLIB and using CONFIGURE_STYLE = ruby gem ext.  Use the
lang/ruby module for all dependent ports, setting
MODRUBY_{BUILD,RUN}DEP=No if necessary.

ok landry, phessler, sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2010/10/24 15:53:55 sthen Exp $
a53 5
LIB_DEPENDS=	neon.>=26:neon->=0.26.2:net/neon \
		apr-1::devel/apr \
		aprutil-1::devel/apr-util \
		sasl2.>=2::security/cyrus-sasl2 \
		sqlite3::databases/sqlite3
d61 10
a70 1
WANTLIB-main=	${WANTLIB} asn1 c crypto gssapi krb5 ssl
d101 1
a101 1
LIB_DEPENDS-ap2=	${MODGETTEXT_LIB_DEPENDS}
d104 1
a104 1
LIB_DEPENDS-ap2+=	${_lib}.>=${SO_VERSION}:${PKGNAME}:devel/subversion,-main
d116 1
a116 1
LIB_DEPENDS-perl=	${MODGETTEXT_LIB_DEPENDS}
d119 1
a119 1
LIB_DEPENDS-perl+=	${_lib}.>=${SO_VERSION}:${PKGNAME}:devel/subversion,-main
d125 2
a126 1
LIB_DEPENDS-python=	${MODPY_LIB_DEPENDS} ${MODGETTEXT_LIB_DEPENDS}
d128 1
a128 1
LIB_DEPENDS-python+=	${_lib}.>=${SO_VERSION}:${PKGNAME}:devel/subversion,-main
d135 1
a135 1
			${MODGETTEXT_LIB_DEPENDS}
d137 1
a137 1
LIB_DEPENDS-ruby+=	${_lib}.>=${SO_VERSION}:${PKGNAME}:devel/subversion,-main
d147 7
a153 7
LIB_DEPENDS-main+= ${LIB_DEPENDS} \
		dbus-1.>=7::x11/dbus \
		glib-2.0::devel/glib2 \
		gnome-keyring.>=6:libgnome-keyring-*:x11/gnome/libgnome-keyring \
		pcre.>=2::devel/pcre \
		${MODGETTEXT_LIB_DEPENDS}
WANTLIB-main+=	apr-1 aprutil-1 gcrypt gpg-error
@


1.80
log
@Add MODPY_WANTLIB, adjust MODPY_LIB_DEPENDS to new-style LIB_DEPENDS,
update all ports to match. Plists don't change -> no bump.
Looks ok to jasper.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2010/10/18 17:48:13 espie Exp $
d127 1
a127 1
			krb5 neon sasl2 sqlite3 ssl
@


1.79
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2010/10/06 22:03:19 stsp Exp $
d119 1
a119 1
			krb5 neon sasl2 sqlite3 ssl
@


1.78
log
@Update to 1.6.13.  Tested with latest neon/openssl by sthen, thanks!
Minor housekeeping in MESSAGE files for ap2 subpackage while here.
ok landry, jasper, sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/10/01 10:49:34 ajacoutot Exp $
d50 1
@


1.77
log
@Unbreak after the libgnome-keyring upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/09/23 22:12:10 jeremy Exp $
d9 1
a9 1
VERSION=		1.6.12
a11 1
REVISION-main=		2
a12 1
REVISION-perl=		0
a15 1
REVISION-python=	0
a17 1
REVISION-ruby=		2
a19 1
REVISION-ap2=		0
@


1.76
log
@Handle changes caused by splitting the ruby port and bump

OK jcs@@, landry@@, jasper@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/08/30 22:09:45 jasper Exp $
d12 1
a12 1
REVISION-main=		1
d148 1
a148 1
		glib-2.0,gio-2.0,gmodule-2.0,gobject-2.0::devel/glib2 \
d152 1
a152 1
WANTLIB-main+=	apr-1 aprutil-1 dbus-glib-1 eggdbus-1 gcrypt gpg-error
@


1.75
log
@bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/07/24 23:05:08 naddy Exp $
d21 1
a21 1
REVISION-ruby=		1
@


1.74
log
@bump PKGNAME for PLIST changes 4.7 -> 4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2010/07/22 09:09:34 ajacoutot Exp $
d12 1
a12 1
REVISION-main=		0
d14 1
d18 1
d21 1
a21 1
REVISION-ruby=		0
d24 1
@


1.74.2.1
log
@Backport fixes for
bugs which can cause client-initiated crashes on the server.
Any server is affected, no matter which protocol (http[s]://,
svn[+ssh]://) is used.

original diff from stsp@@.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/07/24 23:05:08 naddy Exp $
d12 1
a12 1
REVISION-main=		1
@


1.74.2.2
log
@SECURITY FIX (CVE-2011-0715)
http://subversion.apache.org/security/CVE-2011-0715-advisory.txt
ok jasper landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74.2.1 2010/12/01 14:17:34 jasper Exp $
d12 1
a12 1
REVISION-main=		2
@


1.73
log
@No need to set MODPY_VERSION here, use the default one.

ok stsp@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2010/06/29 14:26:08 stsp Exp $
d12 1
d19 1
@


1.72
log
@Update to 1.6.12.
diff was quietly sitting on ports@@ for a week
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2010/06/23 17:38:29 landry Exp $
d181 1
a181 2
REGRESS_DEPENDS=::lang/python/${MODPY_VERSION}
MODPY_VERSION?=	2.5
@


1.71
log
@Add libtool to BUILD_DEPENDS as autogen.sh checks for libtoolize.
Builds fine with ports libtool otherwise..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2010/04/25 08:43:29 stsp Exp $
d9 1
a9 1
VERSION=		1.6.11
@


1.70
log
@Add MODGNU_AUTOCONF_DEPENDS to BUILD_DEPENDS. Fixes build if autoconf
isn't already installed. The dependency on autoconf used to be
implicit until CONFIGURE_STYLE was switched from autoconf to gnu
during the 1.6.11 update.
From Daniel Dickman.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/04/23 18:05:26 stsp Exp $
d59 3
a61 1
BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS}
@


1.69
log
@Update to 1.6.11 and update home page URL.
Also change the configure style to 'gnu' instead of 'autoconf'
to avoid running autoconf twice (autoconf is run by the autogen.sh
script in the pre-configure target). landy@@ says this fixes the
build on hppa for some reason.

ok aja, landry (for the configure-style bit some time ago)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/04/22 14:27:29 ajacoutot Exp $
d58 2
@


1.68
log
@Fix DEPENDS/WANTLIB after recent gnome-keyring split.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/04/20 20:23:38 ajacoutot Exp $
d9 1
a9 1
VERSION=		1.6.6
d11 2
a12 2
PKGNAME-main=		${DISTNAME}p2
FULLPKGNAME-perl=	p5-SVN-${VERSION}p0
d14 1
a14 1
FULLPKGNAME-python=	py-subversion-${VERSION}p0
d16 1
a16 1
FULLPKGNAME-ruby=	ruby-subversion-${VERSION}p1
d18 1
a18 1
FULLPKGNAME-ap2=	ap2-subversion-${VERSION}p0
d31 1
a31 1
HOMEPAGE=	http://subversion.tigris.org/
d41 2
a42 1
MASTER_SITES=	${HOMEPAGE}/downloads/
d158 1
a158 1
CONFIGURE_STYLE=autoconf
@


1.67
log
@Missed this in previous gnome-keyring coping.

reminded by stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/02/26 18:21:08 espie Exp $
d11 1
a11 1
PKGNAME-main=		${DISTNAME}p1
d135 1
d138 1
a138 1
		glib-2.0::devel/glib2 \
d142 1
a142 1
zWANTLIB-main+=	apr-1 aprutil-1 iconv
@


1.66
log
@fix FULLPKGPATH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/01/27 21:43:27 naddy Exp $
d11 1
a11 1
PKGNAME-main=		${DISTNAME}p0
d138 1
a138 1
		gnome-keyring.>=4::x11/gnome/keyring \
@


1.65
log
@bump PKGNAME for PLIST changes 4.6 -> 4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2009/10/27 09:06:13 stsp Exp $
d12 8
a19 4
FULLPKGNAME-perl=	p5-SVN-${VERSION}
FULLPKGNAME-python=	py-subversion-${VERSION}
FULLPKGNAME-ruby=	ruby-subversion-${VERSION}p0
FULLPKGNAME-ap2=	ap2-subversion-${VERSION}
@


1.64
log
@Update to 1.6.6.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2009/09/10 15:35:04 sthen Exp $
d11 1
a11 1
PKGNAME-main=		${DISTNAME}
d14 1
a14 1
FULLPKGNAME-ruby=	ruby-subversion-${VERSION}
@


1.63
log
@- convert gnome-shared-keyring to a true FLAVOR rather than a
pseudo-flavour, it affects the -main package by building with pthread
(we don't want that by default, it affects e.g. svn diff | less).

- roll various PFRAG.shared-foo for the subpackages into PLIST-foo

- add a comment noting that autoconf should be 2.63

- bump PKGNAMEs

ok stsp (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2009/08/25 10:26:20 stsp Exp $
d9 1
a9 1
VERSION=		1.6.5
d11 5
a15 5
PKGNAME-main=		${DISTNAME}p0
FULLPKGNAME-perl=	p5-SVN-${VERSION}p0
FULLPKGNAME-python=	py-subversion-${VERSION}p0
FULLPKGNAME-ruby=	ruby-subversion-${VERSION}p0
FULLPKGNAME-ap2=	ap2-subversion-${VERSION}p0
d75 3
d245 1
d257 4
@


1.62
log
@Update to 1.6.5.
Also:
* Native make now works fine so don't use gmake.
* Disable storing of plaintext passwords for all servers in the system-wide
  'servers' config file, instead of disabling storage of all kinds of
  passwords in the system-wide 'config' config file.
  The new store-plaintext-passwords=no option, which has existed since 1.6.0,
  overrides a yes/no prompt which subversion now usually presents before
  storing passwords in plaintext. gnome-keyring stores passwords encrypted.
* Update the main DESCR to reflect current reality.
* Add a patch which fixes a broken regression test in the ruby bindings
  which accidentally slipped into 1.6.5 release.
* Put the gnome-keyring subpackage into REGRESS_DEPENDS to make
  auth-test pass (it loads DSOs at runtime and can't find them if
  the gnome-keyring subpackage isn't installed).

Tested on i386 by me and alek@@, on i386/amd64 by steven@@,
and on sparc64 by Edd Barrett.
ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2009/08/11 08:14:42 msf Exp $
a7 1
COMMENT-gnome-keyring=	gnome-keyring support for subversion
d11 5
a15 7
PKGNAME=		${DISTNAME}
PKGNAME-main=		${DISTNAME}
PKGNAME-perl=		p5-SVN-${VERSION}
PKGNAME-python=		py-subversion-${VERSION}
PKGNAME-ruby=		ruby-subversion-${VERSION}
PKGNAME-ap2=		ap2-subversion-${VERSION}
PKGNAME-gnome-keyring=	gnome-keyring-subversion-${VERSION}
d40 2
a41 1
PSEUDO_FLAVORS=	no_bindings no_ap2 no_gnome-keyring
d46 1
a46 1
WANTLIB=	expat db z sqlite3
d56 1
a56 2
WANTLIB-main=	${WANTLIB} c crypto iconv intl ssl \
		asn1 gssapi krb5
d83 1
a83 1
WANTLIB-ap2=		${WANTLIB} apr-1 aprutil-1 expat
d97 1
a97 1
WANTLIB-perl=	${WANTLIB} apr-1 aprutil-1
d105 2
a106 2
WANTLIB-python=	${WANTLIB} apr-1 aprutil-1 crypto neon sasl2 ssl \
		asn1 gssapi krb5
d113 2
a114 2
WANTLIB-ruby=	${WANTLIB} apr-1 aprutil-1 crypto neon sasl2 ssl \
		asn1 gssapi krb5
d126 1
a126 2
.if !${FLAVOR:L:Mno_gnome-keyring}
MULTI_PACKAGES+=	-gnome-keyring
d128 7
a134 7
LIB_DEPENDS-gnome-keyring=	dbus-1.>=7::x11/dbus \
				glib-2.0::devel/glib2 \
				gnome-keyring.>=4::x11/gnome/keyring \
				pcre.>=2::devel/pcre \
				${MODGETTEXT_LIB_DEPENDS} \
				svn_subr-1.>=${SO_VERSION}:${PKGNAME}:devel/subversion,-main
WANTLIB-gnome-keyring=	${WANTLIB} apr-1 aprutil-1 iconv
d137 4
a140 1
# to load libsvn_auth_gnome_keyring without this:
d147 1
d181 1
a181 1
.if !${FLAVOR:L:Mno_gnome-keyring}
a182 1
REGRESS_DEPENDS+=:${PKGNAME-gnome-keyring}:devel/subversion,-gnome-keyring
@


1.61
log
@respect MODRUBY_LIB_DEPENDS, no plist change

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2009/08/07 22:13:36 steven Exp $
d10 1
a10 1
VERSION=		1.6.4
a145 2
# BSD make cannot build target autogen-swig to regenerate bindings
USE_GMAKE=	Yes
a167 4
.if !${FLAVOR:L:Mno_gnome-keyring}
CONFIGURE_ARGS+=--with-gnome-keyring
.endif

d181 5
d235 2
a236 2
	${INSTALL_DATA} ${FILESDIR}/config \
			${PREFIX}/share/examples/subversion/config
@


1.60
log
@security update to 1.6.4

http://subversion.tigris.org/security/CVE-2009-2411-advisory.txt

from Stefan Sperling (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/04/28 23:43:56 stsp Exp $
d119 2
a120 1
LIB_DEPENDS-ruby=	ruby.>=2::lang/ruby ${MODGETTEXT_LIB_DEPENDS}
@


1.59
log
@bump PKGNAME for PLIST changes 4.5 -> 4.6
@
text
@d10 1
a10 1
VERSION=		1.6.1
d16 1
a16 1
PKGNAME-ruby=		ruby-subversion-${VERSION}p0
d40 1
a40 1
MASTER_SITES=	${HOMEPAGE}/tarballs/
@


1.59.2.1
log
@SECURITY FIX

Resolves CVE-2009-2411

ok stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/06/22 17:00:23 naddy Exp $
d13 6
a18 6
PKGNAME-main=		${DISTNAME}p0
PKGNAME-perl=		p5-SVN-${VERSION}p0
PKGNAME-python=		py-subversion-${VERSION}p0
PKGNAME-ruby=		ruby-subversion-${VERSION}p1
PKGNAME-ap2=		ap2-subversion-${VERSION}p0
PKGNAME-gnome-keyring=	gnome-keyring-subversion-${VERSION}p0
@


1.58
log
@Update to 1.6.1.
Help by ajacoutot@@ and steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/03/16 22:20:02 kili Exp $
d16 1
a16 1
PKGNAME-ruby=		ruby-subversion-${VERSION}
@


1.57
log
@
Bump for python deps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/03/05 23:16:14 stsp Exp $
d3 16
a18 14
COMMENT-main=	subversion revision control system
COMMENT-perl=	perl interface to subversion
COMMENT-python=	python interface to subversion
COMMENT-ruby=	ruby interface to subversion
COMMENT-ap2=	apache2 subversion modules

VERSION=	1.5.6
DISTNAME=	subversion-${VERSION}
PKGNAME=	${DISTNAME}
PKGNAME-main=	${DISTNAME}
PKGNAME-perl=	p5-SVN-${VERSION}
PKGNAME-python=	py-subversion-${VERSION}p0
PKGNAME-ruby=	ruby-subversion-${VERSION}
PKGNAME-ap2=	ap2-subversion-${VERSION}
d20 1
a20 1
SO_VERSION=	1.1
d41 1
d43 1
a43 1
PSEUDO_FLAVORS=	no_bindings no_ap2
d48 1
a48 1
WANTLIB=	expat db z
d53 2
a54 1
		sasl2.>=2::security/cyrus-sasl2
d65 1
a65 1
	syntax-check.sh
d69 1
a69 1
	commit-access-control.pl commit-email.pl commit-email.rb \
d128 17
d153 1
d169 4
d175 1
a175 1
SUBST_VARS=	LOCALBASE
d181 2
a182 1
	@@${SUBST_CMD} ${WRKSRC}/Makefile.in ${WRKSRC}/configure.ac
@


1.56
log
@Woops, forgot to reset patch level for ruby subpackage during update to 1.5.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/03/05 23:14:07 stsp Exp $
d14 1
a14 1
PKGNAME-python=	py-subversion-${VERSION}
@


1.55
log
@Update to 1.5.6.
ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/02/09 20:48:23 naddy Exp $
d15 1
a15 1
PKGNAME-ruby=	ruby-subversion-${VERSION}p0
@


1.54
log
@bump PKGNAME for PLIST changes 4.4 -> 4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2008/12/27 19:20:36 steven Exp $
d9 1
a9 1
VERSION=	1.5.5
d30 1
a30 1
MAINTAINER=	Stefan Sperling <stsp@@stsp.name>
@


1.54.2.1
log
@SECURITY FIX

Resolves CVE-2009-2411

from Stefan Sperling

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/02/09 20:48:23 naddy Exp $
d11 6
a16 6
PKGNAME=	${DISTNAME}p0
PKGNAME-main=	${DISTNAME}p0
PKGNAME-perl=	p5-SVN-${VERSION}p0
PKGNAME-python=	py-subversion-${VERSION}p0
PKGNAME-ruby=	ruby-subversion-${VERSION}p1
PKGNAME-ap2=	ap2-subversion-${VERSION}p0
@


1.53
log
@update to 1.5.5

also,
- add various utilities from contrib/ and tools/
- update svn2cl to version 0.11 (has a fix for OpenBSD ksh)
- install SVN::Fs man page

from maintainer Stefan Sperling, tweaked a bit by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2008/11/18 23:08:01 steven Exp $
d15 1
a15 1
PKGNAME-ruby=	ruby-subversion-${VERSION}
@


1.52
log
@fix build with no_bindings flavor

from maintainer Stefan Sperling
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2008/11/03 21:33:56 steven Exp $
d9 1
a9 1
VERSION=	1.5.4
d12 1
a12 1
PKGNAME-main=	${DISTNAME}p0
d14 3
a16 3
PKGNAME-python=	py-subversion-${VERSION}p0
PKGNAME-ruby=	ruby-subversion-${VERSION}p0
PKGNAME-ap2=	ap2-subversion-${VERSION}p0
d60 1
a60 1
	commit-block-joke.py remove-zombie-locks.py detect-merge-conflicts.sh \
d62 1
a62 2
# There's also 'enforcer', but it has its own subdir in contrib/hook-scripts/
# So we handle it separately, see post-install
d65 14
a78 5
	commit-access-control.pl svn2feed.py commit-access-control.pl.in \
	svnperms.conf.example commit-email.pl svnperms.py commit-email.pl.in \
	verify-po.py commit-email.rb
# There's also 'mailer', but it has its own subdir in contrib/hook-scripts/
# So we handle it separately, see post-install
d86 1
a86 1
LIB_DEPENDS-ap2+=	${_lib}.>=${SO_VERSION}:subversion-${VERSION}:devel/subversion,-main
d101 1
a101 1
LIB_DEPENDS-perl+=	${_lib}.>=${SO_VERSION}:subversion-${VERSION}:devel/subversion,-main
d109 1
a109 1
LIB_DEPENDS-python+=	${_lib}.>=${SO_VERSION}:subversion-${VERSION}:devel/subversion,-main
d117 1
a117 1
LIB_DEPENDS-ruby+=	${_lib}.>=${SO_VERSION}:subversion-${VERSION}:devel/subversion,-main
d166 1
d169 1
d176 7
d189 1
d207 5
a211 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/subversion/backup
d213 3
d219 18
a236 8
	${INSTALL_DATA} ${FILESDIR}/config \
			${PREFIX}/share/examples/subversion/config
	${INSTALL_DATA} ${WRKBUILD}/tools/backup/hot-backup.py \
			${PREFIX}/share/examples/subversion/backup/
	${INSTALL_DATA} ${WRKSRC}/tools/server-side/svn-backup-dumps.py \
			${PREFIX}/share/examples/subversion/backup/
	${INSTALL_DATA} ${WRKSRC}/contrib/server-side/svn-fast-backup \
			${PREFIX}/share/examples/subversion/backup/svn-fast-backup
d241 2
a242 2
.for hook_script in ${CONTRIB_HOOK_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/${hook_script} \
d245 21
d268 4
a271 2
.for hook_script in ${TOOLS_HOOK_SCRIPTS}
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/${hook_script} \
d276 2
d285 2
@


1.51
log
@- fix WANTLIB after neon update
@
text
@d43 1
a43 1
MODULES=	devel/gettext
d112 1
a112 1
MODULES+=	lang/ruby lang/python
@


1.50
log
@add some guidance to enable/disable the svn modules for apache2

slightly tweaked diff from Brad Walker, also reminded by Stefan Sperling.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/11/02 20:43:49 steven Exp $
d12 1
a12 1
PKGNAME-main=	${DISTNAME}
d14 2
a15 2
PKGNAME-python=	py-subversion-${VERSION}
PKGNAME-ruby=	ruby-subversion-${VERSION}
d54 2
a55 1
WANTLIB-main=	${WANTLIB} c crypto iconv intl ssl
d96 2
a97 1
WANTLIB-python=	${WANTLIB} apr-1 aprutil-1 crypto neon sasl2 ssl
d104 2
a105 1
WANTLIB-ruby=	${WANTLIB} apr-1 aprutil-1 crypto neon sasl2 ssl
@


1.49
log
@update to 1.5.4

joint work with new maintainer Stefan Sperling
and Brad Walker (me at bradwalker.com)

tested by several
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/07/04 19:57:06 naddy Exp $
d16 1
a16 1
PKGNAME-ap2=	ap2-subversion-${VERSION}
@


1.48
log
@bump p5-SVN so that it gets rebuilt with perl 5.10
@
text
@d9 1
a9 1
VERSION=	1.4.4
d12 5
a16 5
PKGNAME-main=	${DISTNAME}p0
PKGNAME-perl=	p5-SVN-${VERSION}p2
PKGNAME-python=	py-subversion-${VERSION}p3
PKGNAME-ruby=	ruby-subversion-${VERSION}p4
PKGNAME-ap2=	ap2-subversion-${VERSION}p0
d18 1
a18 1
SO_VERSION=	1.0
d20 2
a21 2
		svn_fs_base-1 svn_fs_fs-1 svn_ra-1 svn_ra_dav-1 \
		svn_ra_local-1 svn_ra_svn-1 svn_repos-1 svn_subr-1 svn_wc-1
d30 1
a30 1
MAINTAINER=	Sigfred Haversen <bsdlist@@mumak.com>
d45 1
a45 1
WANTLIB=	apr-1 expat db z
d47 4
a50 2
LIB_DEPENDS=	neon.>=24:neon->=0.24.7:net/neon \
		aprutil-1::devel/apr-util
d54 1
a54 1
WANTLIB-main=	${WANTLIB} c crypto ssl
d57 14
d73 1
a73 1
WANTLIB-ap2=		${WANTLIB} iconv aprutil-1 expat
d76 1
a76 1
	svn_repos-1 svn_subr-1
d78 1
a80 1
.  endfor
d87 1
a87 1
WANTLIB-perl=	${WANTLIB} aprutil-1
d95 1
a95 1
WANTLIB-python=	${WANTLIB} crypto ssl neon aprutil-1
d102 1
a102 1
WANTLIB-ruby=	${WANTLIB} crypto expat ssl neon aprutil-1
d104 1
a104 1
LIB_DEPENDS-ruby=	${MODGETTEXT_LIB_DEPENDS}
d110 1
a110 1
BUILD_DEPENDS+=	::devel/swig
d113 3
d117 2
a118 2
SEPARATE_BUILD=	simple
CONFIGURE_STYLE=gnu
d121 1
a121 4
		--with-neon=${LOCALBASE} \
		--with-apr=${LOCALBASE} \
		--with-apr-util=${LOCALBASE} \
		--with-zlib \
d124 1
a124 2
CONFIGURE_ARGS+=--enable-swig-bindings=perl,python,ruby \
		--with-swig=${LOCALBASE}
d126 1
a126 2
CONFIGURE_ARGS+=--disable-swig-bindings \
		--without-swig
d130 2
a131 1
CONFIGURE_ARGS+=--with-apxs=${LOCALBASE}/sbin/apxs2
d138 4
d144 3
a146 5
	@@perl -pi -e "s,!!LOCALBASE!!,${LOCALBASE}," ${WRKSRC}/configure
	@@perl -pi -e "s,!!MODPY_VERSION!!,${MODPY_VERSION}," ${WRKSRC}/configure

pre-build:
	@@perl -pi -e "s,!!MODPY_VERSION!!,${MODPY_VERSION}," ${WRKBUILD}/Makefile
d149 1
a149 2
REGRESS_DEPENDS+=	::devel/p5-IO-String \
			:${PKGNAME-python}:devel/subversion,-python \
d152 4
d195 1
a195 1
			${PREFIX}/share/examples/subversion/backup
d197 1
a197 1
			${PREFIX}/share/examples/subversion/backup
d200 8
a207 8
	${INSTALL_DATA} ${WRKBUILD}/tools/hook-scripts/* \
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/enforcer/* \
			${PREFIX}/share/examples/subversion/hook-scripts/enforcer
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/check-case-insensitive.* \
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/contrib/hook-scripts/detect-merge-conflicts.sh \
			${PREFIX}/share/examples/subversion/hook-scripts
d209 5
a213 11
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/commit-access-control.cfg.example \
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/commit-email.rb \
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/log-police.py \
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/svnperms.conf.example \
			${PREFIX}/share/examples/subversion/hook-scripts
	${INSTALL_DATA} ${WRKSRC}/tools/hook-scripts/svnperms.py \
			${PREFIX}/share/examples/subversion/hook-scripts
d220 3
@


1.47
log
@bump PKGNAME for PLIST changes 4.3 -> 4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2008/06/14 23:46:38 landry Exp $
d13 1
a13 1
PKGNAME-perl=	p5-SVN-${VERSION}p1
@


1.46
log
@bump PKGNAMEs after lang/ruby module change.
Fix CATEGORIES in rdt eclipse plugin.
in subversion, only bump subpackages that use lang/ruby module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2008/05/02 17:32:53 bernd Exp $
d15 1
a15 1
PKGNAME-ruby=	ruby-subversion-${VERSION}p3
@


1.45
log
@Adjust WANTLIB after net/neon switched from libxml2 to system expat.

Noticed by Markus Lude.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2008/02/22 19:16:49 naddy Exp $
d13 3
a15 3
PKGNAME-perl=	p5-SVN-${VERSION}p0
PKGNAME-python=	py-subversion-${VERSION}p2
PKGNAME-ruby=	ruby-subversion-${VERSION}p2
@


1.44
log
@bump PKGNAME for PLIST changes 4.2 -> 4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2008/01/04 18:38:51 espie Exp $
d12 5
a16 5
PKGNAME-main=	${DISTNAME}
PKGNAME-perl=	p5-SVN-${VERSION}
PKGNAME-python=	py-subversion-${VERSION}p1
PKGNAME-ruby=	ruby-subversion-${VERSION}p1
PKGNAME-ap2=	ap2-subversion-${VERSION}
d52 1
a52 1
WANTLIB-main=	${WANTLIB} c crypto m ssl xml2
d79 1
a79 1
WANTLIB-python=	${WANTLIB} crypto m ssl neon xml2 aprutil-1
d86 1
a86 1
WANTLIB-ruby=	${WANTLIB} crypto expat m ssl neon xml2 aprutil-1
@


1.43
log
@do the same thing with REGRESS_FLAGS as FAKE_FLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2008/01/04 17:48:34 espie Exp $
d15 1
a15 1
PKGNAME-ruby=	ruby-subversion-${VERSION}p0
@


1.42
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/10/25 10:00:03 steven Exp $
d146 1
a146 1
		${REGRESS_FLAGS} check FS_TYPE=bdb
d148 1
a148 1
		${REGRESS_FLAGS} check FS_TYPE=fsfs
d150 1
a150 1
		${REGRESS_FLAGS} TMPDIR=${WRKBUILD} check-swig-pl
d152 1
a152 1
		${REGRESS_FLAGS} check-swig-py
d154 1
a154 1
		${REGRESS_FLAGS} check-swig-rb
@


1.41
log
@make this use the python module, and switch to python 2.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/10/08 08:22:40 steven Exp $
d160 1
a160 1
		${FAKE_FLAGS} install-swig-py
d162 1
a162 1
		${FAKE_FLAGS} install-swig-pl
d164 1
a164 1
		${FAKE_FLAGS} install-swig-rb
@


1.40
log
@bump PKGNAME after python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/09/16 02:53:14 merdely Exp $
d14 1
a14 1
PKGNAME-python=	py-subversion-${VERSION}p0
a42 4
PYTHON_VER=	2.4

SUBST_VARS=	PYTHON_VER

d80 2
a81 3
RUN_DEPENDS-python=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
LIB_DEPENDS-python=	python${PYTHON_VER}:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
			${MODGETTEXT_LIB_DEPENDS}
d93 2
a94 3
MODULES+=	lang/ruby
BUILD_DEPENDS+=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
		::devel/swig
d100 1
a100 1
CONFIGURE_ENV=	PYTHON2=${LOCALBASE}/bin/python${PYTHON_VER}
d121 2
a122 1
REGRESS_DEPENDS=::lang/python/${PYTHON_VER}
d126 1
a126 1
	@@perl -pi -e "s,!!PYTHON_VER!!,${PYTHON_VER}," ${WRKSRC}/configure
d129 1
a129 1
	@@perl -pi -e "s,!!PYTHON_VER!!,${PYTHON_VER}," ${WRKBUILD}/Makefile
@


1.39
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/07/27 19:17:11 naddy Exp $
d14 1
a14 1
PKGNAME-python=	py-subversion-${VERSION}
@


1.38
log
@bump package name to accommodate OpenBSD 4.1 -> 4.2 change in MODRUBY_ARCH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2007/06/18 06:34:48 steven Exp $
d3 5
a7 5
COMMENT-main=	"subversion revision control system"
COMMENT-perl=	"perl interface to subversion"
COMMENT-python=	"python interface to subversion"
COMMENT-ruby=	"ruby interface to subversion"
COMMENT-ap2=	"apache2 subversion modules"
@


1.37
log
@update to subversion 1.4.4

ok kili@@, simon@@
maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2007/04/28 16:03:21 bernd Exp $
d15 1
a15 1
PKGNAME-ruby=	ruby-subversion-${VERSION}
@


1.36
log
@Use xenocara expat.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2007/04/15 07:40:27 steven Exp $
d9 1
a9 1
VERSION=	1.4.3
d11 6
a16 6
PKGNAME=	${DISTNAME}p2
PKGNAME-main=	${DISTNAME}p3
PKGNAME-perl=	p5-SVN-${VERSION}p0
PKGNAME-python=	py-subversion-${VERSION}p0
PKGNAME-ruby=	ruby-subversion-${VERSION}p1
PKGNAME-ap2=	ap2-subversion-${VERSION}p0
@


1.35
log
@mention the -ap2 package here too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/04/11 13:26:36 deanna Exp $
d11 6
a16 6
PKGNAME=	${DISTNAME}p1
PKGNAME-main=	${DISTNAME}p2
PKGNAME-perl=	p5-SVN-${VERSION}
PKGNAME-python=	py-subversion-${VERSION}
PKGNAME-ruby=	ruby-subversion-${VERSION}p0
PKGNAME-ap2=	ap2-subversion-${VERSION}
d49 1
a49 1
WANTLIB=	apr-1 db z
d52 1
a52 2
		aprutil-1::devel/apr-util \
		expat.>=4::textproc/expat
d77 1
a77 2
LIB_DEPENDS-perl=	expat.>=4::textproc/expat \
			${MODGETTEXT_LIB_DEPENDS}
d85 1
a85 2
LIB_DEPENDS-python=	expat.>=4::textproc/expat \
			python${PYTHON_VER}:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
@


1.34
log
@Add -ap2 subpackage that allows building of mod_dav_svn and
mod_authz_svn, for use with www/apache-httpd (apache2).

From dlg@@, ok steven@@, maintainer timeout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/02/19 09:39:48 dlg Exp $
d12 1
a12 1
PKGNAME-main=	${DISTNAME}p1
@


1.33
log
@note that we're changing the default for auth credential caching in our
package.

steven requested i add ruby to the list of subpackages while im here.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/02/15 10:25:17 dlg Exp $
d7 1
d16 1
d40 1
a40 1
PSEUDO_FLAVORS=	no_bindings
d60 12
d102 1
a102 1
BUILD_DEPENDS=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
a114 2
		--without-apache \
		--without-apxs \
d122 6
@


1.32
log
@by default subversion caches passwords in cleartext under ~/.subversion.
the doco claims this is safe cos the directory has extremely restricted
permissions, but noone i know agrees with this or feels safe. this change
installs a config under /etc/subversion/config that disables this
behaviour.

discussed with pval@@ ckuethe@@ ok robert@@ sturm@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/01/29 16:33:36 steven Exp $
d10 2
a11 2
PKGNAME=	${DISTNAME}p0
PKGNAME-main=	${DISTNAME}p0
@


1.31
log
@bump PKGNAME due to PLIST changes after 4.0 -> 4.1

"feel free to bump whatever is needed" espie@@
@
text
@d10 2
a11 2
PKGNAME=	${DISTNAME}
PKGNAME-main=	${DISTNAME}
d162 2
@


1.30
log
@maintenance update to subversion 1.4.3

tested/ok simon@@, maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/01/05 10:57:06 robert Exp $
d14 1
a14 1
PKGNAME-ruby=	ruby-subversion-${VERSION}
@


1.29
log
@fix a type (RUB_DEPENDS->RUN_DEPENDS) and remove some whitespaces
at the end of lines; bump PKGNAME because of the dependency change;

noticed by dlg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/12/21 08:58:04 steven Exp $
d8 1
a8 1
VERSION=	1.4.2
d14 1
a14 1
PKGNAME-ruby=	ruby-subversion-${VERSION}p0
@


1.28
log
@update to subversion 1.4.2

maintainer didn't have time
also tested by simon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/12/01 14:10:05 steven Exp $
d14 1
a14 1
PKGNAME-ruby=	ruby-subversion-${VERSION}
d21 1
a21 1
SHARED_LIBS+=	${_lib} ${SO_VERSION} 
d43 1
a43 1
SUBST_VARS=	PYTHON_VER 
d81 1
a81 1
RUB_DEPENDS-ruby=	${MODRUBY_RUN_DEPENDS}
d89 1
a89 1
		::devel/swig 
d118 1
a118 1
pre-build: 
d126 1
a126 1
post-build: 
@


1.27
log
@make only the ruby bindings depend on ruby.

pointed out by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/11/29 08:52:38 msf Exp $
d8 1
a8 1
VERSION=	1.4.0
d10 4
a13 4
PKGNAME=	${DISTNAME}p1
PKGNAME-main=	${DISTNAME}p1
PKGNAME-perl=	p5-SVN-${VERSION}p1
PKGNAME-python=	py-subversion-${VERSION}p0
d88 1
a88 1
BUILD_DEPENDS=	::lang/python/${PYTHON_VER} \
d123 2
a124 2
			::devel/subversion,-python \
			::devel/subversion,-ruby
@


1.26
log
@build ruby bindings and put them in their own subpackage.

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/11/24 19:52:53 steven Exp $
d10 3
a12 2
PKGNAME-main=	${DISTNAME}p0
PKGNAME-perl=	p5-SVN-${VERSION}p0
d45 1
a45 1
MODULES=	devel/gettext lang/ruby
d56 1
d63 1
d81 1
a81 1
RUB_DEPENDS-ruby=	::lang/ruby
d87 1
a88 1
		::lang/ruby \
@


1.25
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/09/30 06:23:58 steven Exp $
d6 1
d13 1
d19 1
a19 1
.for _lib in ${SVN_LIBS} svn_swig_perl-1 svn_swig_py-1
a40 1
SUBST_VARS=	PYTHON_VER
d42 3
a44 1
MODULES=	devel/gettext
d57 1
a57 1
MULTI_PACKAGES+=-perl -python
d77 7
d85 2
a86 1
		::devel/swig
d102 1
a102 1
CONFIGURE_ARGS+=--enable-swig-bindings=perl,python \
d120 2
a121 1
			::devel/subversion,-python
d128 2
d140 2
d150 2
@


1.24
log
@update to subversion 1.4.0

for details, read http://subversion.tigris.org/svn_1.4_releasenotes.html

from maintainer Sigfred Haversen <bsdlist at mumak.com>

go ahead pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/08/21 17:39:00 aanriot Exp $
d3 1
a3 1
COMMENT=	"subversion revision control system"
d9 3
a11 2
PKGNAME-perl=	p5-SVN-${VERSION}
PKGNAME-python=	py-subversion-${VERSION}
a31 1
WANTLIB=		apr-1 db z
d43 2
d49 4
d54 2
a55 2
MULTI_PACKAGES=	-perl -python
SUBPACKAGE?=
d57 4
a60 4
.  if defined(PACKAGING) && !empty(SUBPACKAGE)
SHARED_ONLY=	Yes
LIB_DEPENDS=	expat.>=4::textproc/expat
.    for _lib in svn_diff-1 svn_ra-1 svn_delta-1 svn_subr-1 svn_fs-1 \
d62 11
a72 13
LIB_DEPENDS+=	${_lib}.>=${SO_VERSION}:subversion-${VERSION}:devel/subversion 
.    endfor
WANTLIB+=	aprutil-1

.    if ${SUBPACKAGE} == "-python"
RUN_DEPENDS+=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
.      for _lib in ${SVN_LIBS}
LIB_DEPENDS+=	${_lib}.>=${SO_VERSION}:subversion-${VERSION}:devel/subversion
.      endfor
LIB_DEPENDS+=	python${PYTHON_VER}:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
WANTLIB+=	neon xml2 m ssl crypto
.    endif
.  endif
a73 1
.  if !defined(PACKAGING)
a75 5
.  endif
.endif

.if defined(PACKAGING) && (!defined(SUBPACKAGE) || empty(SUBPACKAGE))
WANTLIB+=	crypto m ssl xml2 c
@


1.23
log
@zap unneeded 0.0
@
text
@d7 1
a7 1
VERSION=	1.3.2
d9 1
a9 1
PKGNAME-perl=	p5-SVN-${VERSION}p0
d11 8
a18 15
SHARED_LIBS=	svn_client-1	0.0	\
		svn_delta-1	0.0	\
		svn_diff-1	0.0	\
		svn_fs-1	0.0	\
		svn_fs_base-1	0.0	\
		svn_fs_fs-1	0.0	\
		svn_ra-1	0.0	\
		svn_ra_dav-1	0.0	\
		svn_ra_local-1	0.0	\
		svn_ra_svn-1	0.0	\
		svn_repos-1	0.0	\
		svn_subr-1	0.0	\
		svn_swig_perl-1	0.0	\
		svn_swig_py-1	0.0	\
		svn_wc-1	0.0
d53 5
a57 2
LIB_DEPENDS=	svn_diff-1,svn_ra-1,svn_delta-1,svn_subr-1,svn_fs-1,svn_repos-1,svn_wc-1,svn_client-1::devel/subversion \
		expat.>=4::textproc/expat
d62 3
a64 1
LIB_DEPENDS+=	svn_diff-1,svn_ra-1,svn_delta-1,svn_subr-1,svn_fs-1,svn_repos-1,svn_wc-1,svn_client-1,svn_fs_fs-1,svn_ra_svn-1,svn_ra_local-1,svn_fs_base-1,svn_ra_dav-1::devel/subversion
d84 1
a84 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
d142 1
d145 2
d151 6
d162 2
@


1.22
log
@The following diff removes a call to utf_initialize() used in Core.pm by
the swig-generated perl modules, which is causing a Segmentation Fault,
as reported in PR #5071 .

ok naddy@@ , Sigfred Haversen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/08/01 23:39:08 espie Exp $
d67 1
a67 1
LIB_DEPENDS+=	python${PYTHON_VER}.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
@


1.21
log
@new libspecs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/07/15 16:55:32 alek Exp $
d9 1
a9 1
PKGNAME-perl=	p5-SVN-${VERSION}
@


1.20
log
@Update to 1.3.2; from Sigfred Haversen <bsdlist@@mumak.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/06/04 00:21:58 steven Exp $
d50 3
a52 3
LIB_DEPENDS=	neon.24:neon->=0.24.7:net/neon \
		aprutil-1.0::devel/apr-util \
		expat.4::textproc/expat
d61 1
a61 1
		expat.4::textproc/expat
@


1.19
log
@switch to python 2.4 and bump py-subversion PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/04/15 10:27:38 steven Exp $
d7 1
a7 1
VERSION=	1.3.1
d10 1
a10 1
PKGNAME-python=	py-subversion-${VERSION}p0
d121 1
a121 1
post-regress:
d123 3
a125 1
		${REGRESS_FLAGS} check FSTYPE=bdb
d146 2
@


1.18
log
@update to subversion 1.3.1
enable python regression tests

from maintainer Sigfred Haversen

ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/01/27 10:20:56 alek Exp $
d10 1
a10 1
PKGNAME-python=	py-subversion-${VERSION}
d45 1
a45 1
PYTHON_VER=	2.3
d67 1
a67 1
LIB_DEPENDS+=	python2.3.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
@


1.17
log
@Update to 1.3.0

From Sigfred Haversen <bsdlist@@mumak.com>

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/01/07 01:10:11 steven Exp $
d7 1
a7 1
VERSION=	1.3.0
d102 1
a102 2
REGRESS_DEPENDS=::lang/python/${PYTHON_VER} \
		::devel/p5-IO-String
d106 1
d112 3
d125 3
a127 1
		${REGRESS_FLAGS} check-swig-pl
@


1.16
log
@- pass MAKE_ENV and MAKE_FLAGS/FAKE_FLAGS when calling make in
  post-build, post-install and post-regress targets.
- SHARED_LIBS (which definitely requires the above...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/11/30 19:45:07 sturm Exp $
d7 1
a7 1
VERSION=	1.2.3
a8 1
PKGNAME=	${DISTNAME}p1
d67 1
a103 1
REGRESS_FLAGS=	LD_LIBRARY_PATH=`find ${WRKBUILD} -name .libs | tr '\012' :`
a106 1
	@@perl -pi -e "s,!!LOCALBASE!!,${LOCALBASE}," ${WRKSRC}/configure.in
a109 1
	@@perl -pi -e "s,!!WRKBUILD!!,${WRKBUILD}," ${WRKBUILD}/Makefile
@


1.15
log
@work around around a bug on alpha (in binutils?), where some relocations
end up in .rodata

solution from kurt@@, closes ports/4569
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/11/23 16:04:49 pvalchev Exp $
d12 16
d116 4
a119 2
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} swig-py
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} swig-pl
d122 4
a125 2
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} ${REGRESS_FLAGS} check FSTYPE=bdb
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} ${REGRESS_FLAGS} check-swig-pl
d130 4
a133 2
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} install-swig-py
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} install-swig-pl
@


1.14
log
@remove bullshit BROKEN on alpha -- fix it instead!!!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/11/23 15:16:30 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
@


1.13
log
@Mark broken on alpha; svnversion segfaults during fake;
from Michael Knudsen
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.12 2005/11/04 09:42:31 alek Exp $

.if ${MACHINE_ARCH} == "alpha"
BROKEN=		"svnversion segfaults during fake"
.endif
@


1.12
log
@- USE_LIBTOOL
- Bump PKGNAME

From Sigfred Haversen <bsdlist@@mumak.com> (MAINTAINER)
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.11 2005/10/02 09:02:05 alek Exp $
@


1.11
log
@Update to 1.2.3

From Sigfred Haversen <bsdlist@@mumak.com> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/09/16 09:51:27 espie Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}
d66 1
d89 4
@


1.10
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/07/07 14:20:34 alek Exp $
d7 1
a7 1
VERSION=	1.2.1
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
d62 1
a62 1
.if defined(PACKAGING) && empty(SUBPACKAGE)
d98 5
d104 1
a106 4

post-regress:
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} ${REGRESS_FLAGS} check FSTYPE=bdb
	@@cd ${WRKBUILD} && ${MAKE_PROGRAM} ${REGRESS_FLAGS} check-swig-pl
d108 25
@


1.9
log
@Update to 1.2.1

From steven mestdagh <steven.mestdagh@@esat.kuleuven.be>

ok Sigfred Haversen <bsdlist@@mumak.com> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/07/05 21:29:25 alek Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}
@


1.8
log
@Fix WANTLIB marker

Problem spotted by Sigfred Haversen <bsdlist@@mumak.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/07/04 22:22:00 alek Exp $
d7 1
a7 1
VERSION=	1.2.0
@


1.7
log
@Update to 1.2.0

From Sigfred Haversen <bsdlist@@mumak.com> (MAINTAINER)

ok msf@@
@
text
@d1 1
a1 1
# $OpenBSD$
d51 2
a52 2
WANTLIB+=	svn_fs_fs-1 svn_ra_svn-1 svn_ra_local-1 neon xml2 m ssl \
		svn_fs_base-1 crypto svn_ra_dav-1
@


1.6
log
@oops, forgot to add swig dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/06/09 14:47:15 kevlo Exp $
d7 1
a7 1
VERSION=	1.1.4
d51 2
d91 1
d103 1
@


1.5
log
@remove libswig dependencies after updating swig to 1.3.24.
Pointed out by msf@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/04/21 03:36:14 alek Exp $
d55 2
a56 1
BUILD_DEPENDS=	::lang/python/${PYTHON_VER}
@


1.4
log
@- Update to 1.1.4: http://svn.collab.net/repos/svn/tags/1.1.4/CHANGES
- New maintainer

From steven mestdagh <steven.mestdagh@@esat.kuleuven.ac.be> and
Sigfred Haversen <bsdlist@@mumak.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/03/13 22:46:18 alek Exp $
a50 3
LIB_DEPENDS+=	swigpy.0::devel/swig
.    else
LIB_DEPENDS+=	swigpl.0::devel/swig
a54 1
LIB_DEPENDS+=	swigpy.0,swigpl.0::devel/swig
@


1.3
log
@- Fix WANTLIB marker
- Better *DEPENDS
- Bump PKGNAME

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/01/21 20:29:10 alek Exp $
d7 1
a7 1
VERSION=	1.1.3
d9 3
a11 3
PKGNAME=	${DISTNAME}p0
PKGNAME-perl=	p5-SVN-${VERSION}p0
PKGNAME-python=	py-subversion-${VERSION}p0
d16 1
a16 1
MAINTAINER=	Aleksander Piotrowski <alek@@openbsd.org>
d86 2
a87 1
REGRESS_DEPENDS=::lang/python/${PYTHON_VER}
@


1.2
log
@- Update to 1.1.3 (patch from Steven Mestdagh)
- Enable perl regression tests

help & ok msf@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/12/01 16:47:54 alek Exp $
d9 3
a11 2
PKGNAME-perl=	p5-SVN-${VERSION}
PKGNAME-python=	py-subversion-${VERSION}
d23 1
a23 1
WANTLIB=		apr-1 c crypto db expat m pthread ssl xml2 z
d37 1
a39 3
LIB_DEPENDS+=	swigpy.0,swigpl.0::devel/swig
BUILD_DEPENDS=	::lang/python/${PYTHON_VER}

d45 3
a47 3
RUN_DEPENDS=	::devel/subversion
LIB_DEPENDS=
MODULES=
d51 3
d56 9
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
VERSION=	1.1.1
d89 3
@


1.1.1.1
log
@Import Subversion 1.1.1

Subversion is a free/open-source version control system. That is,
Subversion manages files and directories over time. A tree of files
is placed into a central repository. The repository is much like an
ordinary file server, except that it remembers every change ever made
to your files and directories. This allows you to recover older versions
of your data, or examine the history of how your data changed.
In this regard, many people think of a version control system as a
sort of time machine.

Joint work with msf@@, Sigfred H?versen, Alex Holst and Steven Mestdagh

ok naddy@@, go ahead msf@@
@
text
@@
