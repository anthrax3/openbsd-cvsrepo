head	1.3;
access;
symbols
	OPENBSD_4_4:1.2.0.8
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.6
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2008.11.02.20.43.49;	author steven;	state dead;
branches;
next	1.2;

1.2
date	2006.09.30.06.23.58;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2006.08.21.17.39.00;	author aanriot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to 1.5.4

joint work with new maintainer Stefan Sperling
and Brad Walker (me at bradwalker.com)

tested by several
@
text
@$OpenBSD: patch-subversion_bindings_swig_perl_native_Core_pm,v 1.2 2006/09/30 06:23:58 steven Exp $
--- subversion/bindings/swig/perl/native/Core.pm.orig	Thu Sep 21 16:04:11 2006
+++ subversion/bindings/swig/perl/native/Core.pm	Thu Sep 21 16:12:24 2006
@@@@ -50,7 +50,8 @@@@ BEGIN {
     SVN::_Core::apr_initialize();
 }
 
-our $gpool = SVN::Pool->new_default;
+my $gpool = SVN::Pool->new_default;
+sub gpool { $gpool } # holding the reference to gpool
 SVN::Core::utf_initialize($gpool);
 
 END {
@@@@ -404,9 +405,13 @@@@ sub _wrap {
     $npool;
 }
 
+use Scalar::Util 'reftype';
+
 sub DESTROY {
     return if $globaldestroy;
     my $self = shift;
+    # for some reason, REF becomes SCALAR in perl -c or after apr_terminate
+    return if reftype($self) eq 'SCALAR';
     if ($$self eq $SVN::_Core::current_pool) {
 	$SVN::_Core::current_pool = pop @@POOLSTACK;
     }
@


1.2
log
@update to subversion 1.4.0

for details, read http://subversion.tigris.org/svn_1.4_releasenotes.html

from maintainer Sigfred Haversen <bsdlist at mumak.com>

go ahead pval
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@The following diff removes a call to utf_initialize() used in Core.pm by
the swig-generated perl modules, which is causing a Segmentation Fault,
as reported in PR #5071 .

ok naddy@@ , Sigfred Haversen
@
text
@d2 3
a4 3
--- subversion/bindings/swig/perl/native/Core.pm.orig	Mon Aug 14 15:23:49 2006
+++ subversion/bindings/swig/perl/native/Core.pm	Mon Aug 14 15:23:57 2006
@@@@ -50,9 +50,6 @@@@ BEGIN {
d9 4
a12 2
-SVN::Core::utf_initialize($gpool);
-
d14 2
a15 1
     SVN::_Core::apr_terminate();
d17 11
@

