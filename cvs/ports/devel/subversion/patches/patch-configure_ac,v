head	1.10;
access;
symbols
	OPENBSD_6_1:1.10.0.4
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.2
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.8.0.16
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.18
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.14
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.12
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.10
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.8
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.6
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.4
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.10
date	2016.06.14.08.36.29;	author czarkoff;	state Exp;
branches;
next	1.9;
commitid	b2pyZR5sFm3sFbqK;

1.9
date	2016.04.28.16.03.01;	author stsp;	state Exp;
branches;
next	1.8;
commitid	jvuJd9VnGMZxBNQX;

1.8
date	2011.10.23.09.51.59;	author stsp;	state Exp;
branches;
next	1.7;

1.7
date	2011.10.13.11.23.01;	author stsp;	state Exp;
branches;
next	1.6;

1.6
date	2010.09.23.22.12.10;	author jeremy;	state Exp;
branches;
next	1.5;

1.5
date	2010.09.03.19.49.12;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.08.25.10.26.20;	author stsp;	state Exp;
branches
	1.4.4.1;
next	1.3;

1.3
date	2009.08.07.22.13.36;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.28.23.43.56;	author stsp;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.02.20.43.49;	author steven;	state Exp;
branches;
next	;

1.4.4.1
date	2010.12.01.14.17.35;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.10
log
@update to subversion 1.9.4

OK sthen@@, stsp@@
@
text
@$OpenBSD: patch-configure_ac,v 1.9 2016/04/28 16:03:01 stsp Exp $
--- configure.ac.orig	Mon Jul 27 01:03:10 2015
+++ configure.ac	Thu May  5 15:04:58 2016
@@@@ -23,7 +23,7 @@@@ AC_PREREQ(2.59)
 dnl Get the version of Subversion, using m4's esyscmd() command to do this
 dnl at m4-time, since AC_INIT() requires it then.
 AC_INIT([subversion],
-     [esyscmd(python build/getversion.py SVN subversion/include/svn_version.h)],
+     [esyscmd(${MODPY_BIN} build/getversion.py SVN subversion/include/svn_version.h)],
      [http://subversion.apache.org/])
 
 AC_CONFIG_SRCDIR(subversion/include/svn_types.h)
@@@@ -1271,7 +1271,7 @@@@ AS_HELP_STRING([--enable-gprof],
 # Python: Used for testsuite, and bindings
 
 
-PYTHON="`$abs_srcdir/build/find_python.sh`"
+PYTHON=${MODPY_BIN}
 if test -z "$PYTHON"; then
   AC_MSG_WARN([Python 2.7 or later is required to run the testsuite])
   AC_MSG_WARN([or to use the Subversion Python bindings])
@


1.9
log
@No ports hackathon without a ports commit: Add patches for Subversion
security bugs CVE-2016-2167 and CVE-2016-2168 which were just released.
An update to a newer release of SVN will come later.
ok sthen@@ aja@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.8 2011/10/23 09:51:59 stsp Exp $
--- configure.ac.orig	Sat Feb 14 05:00:33 2015
+++ configure.ac	Thu Apr 28 17:16:21 2016
d13 1
a13 1
@@@@ -1225,7 +1225,7 @@@@ AS_HELP_STRING([--enable-gprof],
d20 1
a20 1
   AC_MSG_WARN([Python 2.5 or later is required to run the testsuite])
@


1.8
log
@Update to 1.7.1 (most importantly this release fixes several bugs in
'svn upgrade'), regen patches, and add a patch queued for 1.7.2 which
fixes 'svn update' for symlinks.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.7 2011/10/13 11:23:01 stsp Exp $
--- configure.ac.orig	Wed Aug 17 15:01:30 2011
+++ configure.ac	Sat Oct 22 10:40:13 2011
d13 1
a13 1
@@@@ -1088,7 +1088,7 @@@@ AS_HELP_STRING([--enable-gprof],
d20 1
a20 1
   AC_MSG_WARN([Python 2.4 or later is required to run the testsuite])
@


1.7
log
@Update to 1.7.0. ok mpi@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.6 2010/09/23 22:12:10 jeremy Exp $
--- configure.ac.orig	Fri May 20 11:28:57 2011
+++ configure.ac	Sat Jun  4 16:42:55 2011
d13 1
a13 1
@@@@ -1021,7 +1021,7 @@@@ AS_HELP_STRING([--enable-gprof],
@


1.6
log
@Handle changes caused by splitting the ruby port and bump

OK jcs@@, landry@@, jasper@@, sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.5 2010/09/03 19:49:12 sthen Exp $
--- configure.ac.orig	Tue Oct 13 09:09:30 2009
+++ configure.ac	Thu Sep 16 14:06:25 2010
@@@@ -6,7 +6,7 @@@@ AC_PREREQ(2.58)
d10 1
a10 1
      [http://subversion.tigris.org/])
d13 1
a13 10
@@@@ -60,7 +60,7 @@@@ if test "$INSTALL" = "build/install-sh -c"; then
   INSTALL="$abs_srcdir/$INSTALL"
 fi
 
-AC_SUBST([MKDIR], ["$INSTALL -d"])
+AC_SUBST([MKDIR], ["/bin/mkdir -p"])
 
 # ==== Libraries, for which we may have source to build ======================
 
@@@@ -769,7 +769,7 @@@@ AS_HELP_STRING([--enable-gprof],
a21 13
@@@@ -787,10 +787,10 @@@@ SVN_CHECK_JDK($JAVA_OLDEST_WORKING_VER)
 
 AC_PATH_PROG(PERL, perl, none)
 
-AC_PATH_PROG(RUBY, ruby, none)
+AC_PATH_PROG(RUBY, ruby18, none)
 if test "$RUBY" != "none"; then
   if "$RUBY" -r mkmf -e 'exit(have_func("rb_hash_foreach") ? 0 : 1)'; then
-    AC_PATH_PROG(RDOC, rdoc, none)
+    AC_PATH_PROG(RDOC, rdoc18, none)
     AC_CACHE_CHECK([for Ruby major version], [svn_cv_ruby_major],[
     svn_cv_ruby_major="`$RUBY -rrbconfig -e 'print Config::CONFIG.fetch(%q(MAJOR))'`"
     ])
@


1.5
log
@regenerate patches
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.4 2009/08/25 10:26:20 stsp Exp $
--- configure.ac.orig	Tue Oct 13 17:09:30 2009
+++ configure.ac	Fri Sep  3 20:48:24 2010
d31 13
@


1.4
log
@Update to 1.6.5.
Also:
* Native make now works fine so don't use gmake.
* Disable storing of plaintext passwords for all servers in the system-wide
  'servers' config file, instead of disabling storage of all kinds of
  passwords in the system-wide 'config' config file.
  The new store-plaintext-passwords=no option, which has existed since 1.6.0,
  overrides a yes/no prompt which subversion now usually presents before
  storing passwords in plaintext. gnome-keyring stores passwords encrypted.
* Update the main DESCR to reflect current reality.
* Add a patch which fixes a broken regression test in the ruby bindings
  which accidentally slipped into 1.6.5 release.
* Put the gnome-keyring subpackage into REGRESS_DEPENDS to make
  auth-test pass (it loads DSOs at runtime and can't find them if
  the gnome-keyring subpackage isn't installed).

Tested on i386 by me and alek@@, on i386/amd64 by steven@@,
and on sparc64 by Edd Barrett.
ok steven@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.3 2009/08/07 22:13:36 steven Exp $
--- configure.ac.orig	Tue Aug 18 20:07:47 2009
+++ configure.ac	Thu Aug 20 13:51:18 2009
d13 1
a13 1
@@@@ -56,7 +56,7 @@@@ if test "$INSTALL" = "build/install-sh -c"; then
d22 1
a22 1
@@@@ -765,7 +765,7 @@@@ AS_HELP_STRING([--enable-gprof],
@


1.4.4.1
log
@Backport fixes for
bugs which can cause client-initiated crashes on the server.
Any server is affected, no matter which protocol (http[s]://,
svn[+ssh]://) is used.

original diff from stsp@@.
ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.4 2009/08/25 10:26:20 stsp Exp $
--- configure.ac.orig	Tue Oct 13 18:09:30 2009
+++ configure.ac	Wed Nov 24 17:59:51 2010
d13 1
a13 1
@@@@ -60,7 +60,7 @@@@ if test "$INSTALL" = "build/install-sh -c"; then
d22 1
a22 1
@@@@ -769,7 +769,7 @@@@ AS_HELP_STRING([--enable-gprof],
@


1.3
log
@security update to 1.6.4

http://subversion.tigris.org/security/CVE-2009-2411-advisory.txt

from Stefan Sperling (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.1 2008/11/02 20:43:49 steven Exp $
--- configure.ac.orig	Mon Jun  8 18:33:29 2009
+++ configure.ac	Thu Aug  6 17:10:17 2009
d22 1
a22 15
@@@@ -448,10 +448,13 @@@@ if test "$enable_nls" = "yes"; then
                     enable_nls="no"
                    ])
     if test "$enable_nls" = "no"; then
+      # Destroy the cached result so we can test again
+      unset ac_cv_search_bindtextdomain
       # On some systems, libintl needs libiconv to link properly,
       # so try again with -liconv.
       AC_SEARCH_LIBS(bindtextdomain, [intl],
                      [
+                      enable_nls="yes"
                       # This is here so that -liconv ends up in LIBS
                       # if it worked with -liconv.
                       AC_CHECK_LIB(iconv, libiconv_open)
@@@@ -762,7 +765,7 @@@@ AS_HELP_STRING([--enable-gprof],
@


1.2
log
@Update to 1.6.1.
Help by ajacoutot@@ and steven@@
@
text
@d2 2
a3 2
--- configure.ac.orig	Sat Feb  7 20:46:30 2009
+++ configure.ac	Thu Feb 19 19:37:20 2009
d18 1
a18 1
+AC_SUBST([MKDIR], ["mkdir -p"])
d22 1
a22 3
@@@@ -447,7 +447,8 @@@@ if test "$enable_nls" = "yes"; then
                    [
                     AC_MSG_WARN([bindtextdomain() not found.  Disabling NLS.])
d24 13
a36 7
-                   ])
+                   ], -liconv)
+    AC_CHECK_LIB(iconv, libiconv_open)
     if test "$enable_nls" = "yes"; then
       AC_DEFINE(ENABLE_NLS, 1,
                 [Define to 1 if translation of program messages to the user's
@@@@ -749,7 +750,7 @@@@ AS_HELP_STRING([--enable-gprof],
@


1.1
log
@update to 1.5.4

joint work with new maintainer Stefan Sperling
and Brad Walker (me at bradwalker.com)

tested by several
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.ac.orig	Tue Aug 26 19:27:56 2008
+++ configure.ac	Sat Oct 25 22:08:16 2008
d8 3
a10 3
-        [esyscmd(python build/getversion.py subversion/include/svn_version.h)],
+        [esyscmd(${MODPY_BIN} build/getversion.py subversion/include/svn_version.h)],
         [http://subversion.tigris.org/])
d13 1
a13 1
@@@@ -48,7 +48,7 @@@@ if test "$INSTALL" = "build/install-sh -c"; then
d20 1
d22 1
a22 2
 dnl find Apache with a recent-enough magic module number.
@@@@ -309,7 +309,8 @@@@ if test "$enable_nls" = "yes"; then
d32 1
a32 1
@@@@ -540,7 +541,7 @@@@ AS_HELP_STRING([--enable-gprof],
d39 1
a39 1
   AC_MSG_WARN([Python 2.2 or later is required to run the testsuite])
@

