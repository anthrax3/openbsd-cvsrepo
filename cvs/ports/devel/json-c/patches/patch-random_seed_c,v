head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.6
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.05.17.16.59.23;	author jca;	state Exp;
branches;
next	;
commitid	9wlJU14OdxvXISuL;


desc
@@


1.1
log
@Use arc4random in libjson-c.

Idea and initial patch from Kristaps Dzonsons who wants to safely use
json-c from within a chroot.  Autohell glue added by yours truly.

ok sthen@@
@
text
@$OpenBSD$
--- random_seed.c.orig	Fri Apr 11 02:41:08 2014
+++ random_seed.c	Mon May  9 20:43:17 2016
@@@@ -227,6 +227,9 @@@@ int json_c_get_random_seed()
 #if HAVE_RDRAND
     if (has_rdrand()) return get_rdrand_seed();
 #endif
+#if HAVE_ARC4RANDOM
+    return arc4random();
+#endif
 #if HAVE_DEV_RANDOM
     if (has_dev_urandom()) return get_dev_random_seed();
 #endif
@
