head	1.13;
access;
symbols
	OPENBSD_6_2:1.13.0.4
	OPENBSD_6_2_BASE:1.13
	OPENBSD_6_1:1.13.0.2
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.12.0.8
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.4
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.6
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.11.0.4
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.13
date	2016.11.28.09.15.13;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	jOocuc05F30hpQ6W;

1.12
date	2014.09.11.10.24.38;	author dcoppa;	state Exp;
branches;
next	1.11;
commitid	m0ESeGbhnaGm45G1;

1.11
date	2013.10.14.12.58.03;	author dcoppa;	state Exp;
branches;
next	1.10;

1.10
date	2013.09.30.11.18.10;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2013.06.06.12.47.06;	author dcoppa;	state Exp;
branches;
next	1.8;

1.8
date	2013.05.30.08.34.32;	author dcoppa;	state Exp;
branches;
next	1.7;

1.7
date	2012.12.05.11.32.04;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2012.11.15.08.43.25;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2012.11.11.17.13.32;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2012.08.31.12.28.31;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2012.05.07.07.06.20;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2011.03.13.18.23.02;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.28.20.21.48;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.13
log
@
Update to CMake-3.7.0

Thanks to naddy@@ who ran a bulk build with it
@
text
@$OpenBSD: patch-Modules_FindTCL_cmake,v 1.12 2014/09/11 10:24:38 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Fri Nov 11 15:37:13 2016
+++ Modules/FindTCL.cmake	Fri Nov 25 22:31:45 2016
@@@@ -48,19 +48,36 @@@@ include(${CMAKE_CURRENT_LIST_DIR}/CMakeFindFrameworks.
 include(${CMAKE_CURRENT_LIST_DIR}/FindTclsh.cmake)
 include(${CMAKE_CURRENT_LIST_DIR}/FindWish.cmake)
 
+set(MODTCL_VERSION $ENV{MODTCL_VERSION})
+set(MODTK_VERSION $ENV{MODTK_VERSION})
+set(MODTCL_INCDIR $ENV{MODTCL_INCDIR})
+set(MODTK_INCDIR $ENV{MODTK_INCDIR})
+set(MODTCL_LIB $ENV{MODTCL_LIB})
+set(MODTK_LIB $ENV{MODTK_LIB})
+set(MODTCL_LIBDIR $ENV{MODTCL_LIBDIR})
+set(MODTK_LIBDIR $ENV{MODTK_LIBDIR})
+
 if(TCLSH_VERSION_STRING)
   set(TCL_TCLSH_VERSION "${TCLSH_VERSION_STRING}")
 else()
   get_filename_component(TCL_TCLSH_PATH "${TCL_TCLSH}" PATH)
   get_filename_component(TCL_TCLSH_PATH_PARENT "${TCL_TCLSH_PATH}" PATH)
-  string(REGEX REPLACE
-    "^.*tclsh([0-9]\\.*[0-9]).*$" "\\1" TCL_TCLSH_VERSION "${TCL_TCLSH}")
+  if(MODTCL_VERSION)
+    set(TCL_TCLSH_VERSION "${MODTCL_VERSION}")
+  else(MODTCL_VERSION)
+    string(REGEX REPLACE
+      "^.*tclsh([0-9]\\.*[0-9]).*$" "\\1" TCL_TCLSH_VERSION "${TCL_TCLSH}")
+  endif(MODTCL_VERSION)
 endif()
 
 get_filename_component(TK_WISH_PATH "${TK_WISH}" PATH)
 get_filename_component(TK_WISH_PATH_PARENT "${TK_WISH_PATH}" PATH)
-string(REGEX REPLACE
-  "^.*wish([0-9]\\.*[0-9]).*$" "\\1" TK_WISH_VERSION "${TK_WISH}")
+if(MODTK_VERSION)
+  set(TK_WISH_VERSION "${MODTK_VERSION}")
+else(MODTK_VERSION)
+  string(REGEX REPLACE
+    "^.*wish([0-9]\\.*[0-9]).*$" "\\1" TK_WISH_VERSION "${TK_WISH}")
+endif(MODTK_VERSION)
 
 get_filename_component(TCL_INCLUDE_PATH_PARENT "${TCL_INCLUDE_PATH}" PATH)
 get_filename_component(TK_INCLUDE_PATH_PARENT "${TK_INCLUDE_PATH}" PATH)
@@@@ -75,19 +92,37 @@@@ get_filename_component(TK_LIBRARY_PATH_PARENT "${TK_LI
 string(REGEX REPLACE
   "^.*tk([0-9]\\.*[0-9]).*$" "\\1" TK_LIBRARY_VERSION "${TK_LIBRARY}")
 
-set(TCLTK_POSSIBLE_LIB_PATHS
-  "${TCL_INCLUDE_PATH_PARENT}/lib"
-  "${TK_INCLUDE_PATH_PARENT}/lib"
-  "${TCL_LIBRARY_PATH}"
-  "${TK_LIBRARY_PATH}"
-  "${TCL_TCLSH_PATH_PARENT}/lib"
-  "${TK_WISH_PATH_PARENT}/lib"
-  /usr/local/lib/tcl/tcl8.5
-  /usr/local/lib/tcl/tk8.5
-  /usr/local/lib/tcl/tcl8.4
-  /usr/local/lib/tcl/tk8.4
-  )
+set(TCLTK_OPENBSD_LIB_PATHS)
 
+if(MODTCL_LIBDIR)
+  list(APPEND TCLTK_OPENBSD_LIB_PATHS "${MODTCL_LIBDIR}")
+endif()
+
+if(MODTK_LIBDIR)
+  list(APPEND TCLTK_OPENBSD_LIB_PATHS "${MODTK_LIBDIR}")
+endif()
+
+if(NOT "${TCLTK_OPENBSD_LIB_PATHS}" STREQUAL "")
+  set(TCLTK_POSSIBLE_LIB_PATHS
+    "${TCLTK_OPENBSD_LIB_PATHS}"
+    )
+else()
+  set(TCLTK_POSSIBLE_LIB_PATHS
+    "${TCL_INCLUDE_PATH_PARENT}/lib"
+    "${TK_INCLUDE_PATH_PARENT}/lib"
+    "${TCL_LIBRARY_PATH}"
+    "${TK_LIBRARY_PATH}"
+    "${TCL_TCLSH_PATH_PARENT}/lib"
+    "${TK_WISH_PATH_PARENT}/lib"
+    ${LOCALBASE}/lib/tcl/tcl8.6
+    ${LOCALBASE}/lib/tcl/tk8.6
+    ${LOCALBASE}/lib/tcl/tcl8.5
+    ${LOCALBASE}/lib/tcl/tk8.5
+    ${LOCALBASE}/lib/tcl/tcl8.4
+    ${LOCALBASE}/lib/tcl/tk8.4
+    )
+endif()
+
 if(WIN32)
   get_filename_component(
     ActiveTcl_CurrentVersion
@@@@ -107,31 +142,47 @@@@ if(WIN32)
     )
 endif()
 
-find_library(TCL_LIBRARY
-  NAMES
-  tcl
-  tcl${TCL_LIBRARY_VERSION} tcl${TCL_TCLSH_VERSION} tcl${TK_WISH_VERSION}
-  tcl86 tcl8.6
-  tcl85 tcl8.5
-  tcl84 tcl8.4
-  tcl83 tcl8.3
-  tcl82 tcl8.2
-  tcl80 tcl8.0
-  PATHS ${TCLTK_POSSIBLE_LIB_PATHS}
-  )
+if(MODTCL_LIB)
+  find_library(TCL_LIBRARY
+    NAMES
+    ${MODTCL_LIB}
+    PATHS ${TCLTK_POSSIBLE_LIB_PATHS}
+    )
+else(MODTCL_LIB)
+  find_library(TCL_LIBRARY
+    NAMES
+    tcl
+    tcl${TCL_LIBRARY_VERSION} tcl${TCL_TCLSH_VERSION} tcl${TK_WISH_VERSION}
+    tcl86 tcl8.6
+    tcl85 tcl8.5
+    tcl84 tcl8.4
+    tcl83 tcl8.3
+    tcl82 tcl8.2
+    tcl80 tcl8.0
+    PATHS ${TCLTK_POSSIBLE_LIB_PATHS}
+    )
+endif(MODTCL_LIB)
 
-find_library(TK_LIBRARY
-  NAMES
-  tk
-  tk${TK_LIBRARY_VERSION} tk${TCL_TCLSH_VERSION} tk${TK_WISH_VERSION}
-  tk86 tk8.6
-  tk85 tk8.5
-  tk84 tk8.4
-  tk83 tk8.3
-  tk82 tk8.2
-  tk80 tk8.0
-  PATHS ${TCLTK_POSSIBLE_LIB_PATHS}
-  )
+if(MODTK_LIB)
+  find_library(TK_LIBRARY
+    NAMES
+    ${MODTK_LIB}
+    PATHS ${TCLTK_POSSIBLE_LIB_PATHS}
+    )
+else(MODTK_LIB)
+  find_library(TK_LIBRARY
+    NAMES
+    tk
+    tk${TK_LIBRARY_VERSION} tk${TCL_TCLSH_VERSION} tk${TK_WISH_VERSION}
+    tk86 tk8.6
+    tk85 tk8.5
+    tk84 tk8.4
+    tk83 tk8.3
+    tk82 tk8.2
+    tk80 tk8.0
+    PATHS ${TCLTK_POSSIBLE_LIB_PATHS}
+    )
+endif(MODTK_LIB)
 
 CMAKE_FIND_FRAMEWORKS(Tcl)
 CMAKE_FIND_FRAMEWORKS(Tk)
@@@@ -155,30 +206,46 @@@@ if(Tk_FRAMEWORKS)
   endif()
 endif()
 
-set(TCLTK_POSSIBLE_INCLUDE_PATHS
-  "${TCL_LIBRARY_PATH_PARENT}/include"
-  "${TK_LIBRARY_PATH_PARENT}/include"
-  "${TCL_INCLUDE_PATH}"
-  "${TK_INCLUDE_PATH}"
-  ${TCL_FRAMEWORK_INCLUDES}
-  ${TK_FRAMEWORK_INCLUDES}
-  "${TCL_TCLSH_PATH_PARENT}/include"
-  "${TK_WISH_PATH_PARENT}/include"
-  /usr/include/tcl${TK_LIBRARY_VERSION}
-  /usr/include/tcl${TCL_LIBRARY_VERSION}
-  /usr/include/tcl8.6
-  /usr/include/tcl8.5
-  /usr/include/tcl8.4
-  /usr/include/tcl8.3
-  /usr/include/tcl8.2
-  /usr/include/tcl8.0
-  /usr/local/include/tcl8.6
-  /usr/local/include/tk8.6
-  /usr/local/include/tcl8.5
-  /usr/local/include/tk8.5
-  /usr/local/include/tcl8.4
-  /usr/local/include/tk8.4
-  )
+set(TCLTK_OPENBSD_INCLUDE_PATHS)
+
+if(MODTCL_INCDIR)
+  list(APPEND TCLTK_OPENBSD_INCLUDE_PATHS "${MODTCL_INCDIR}")
+endif()
+
+if(MODTK_INCDIR)
+  list(APPEND TCLTK_OPENBSD_INCLUDE_PATHS "${MODTK_INCDIR}")
+endif()
+
+if(NOT "${TCLTK_OPENBSD_INCLUDE_PATHS}" STREQUAL "")
+  set(TCLTK_POSSIBLE_INCLUDE_PATHS
+    "${TCLTK_OPENBSD_INCLUDE_PATHS}"
+    )
+else()
+  set(TCLTK_POSSIBLE_INCLUDE_PATHS
+    "${TCL_LIBRARY_PATH_PARENT}/include"
+    "${TK_LIBRARY_PATH_PARENT}/include"
+    "${TCL_INCLUDE_PATH}"
+    "${TK_INCLUDE_PATH}"
+    ${TCL_FRAMEWORK_INCLUDES}
+    ${TK_FRAMEWORK_INCLUDES}
+    "${TCL_TCLSH_PATH_PARENT}/include"
+    "${TK_WISH_PATH_PARENT}/include"
+    /usr/include/tcl${TK_LIBRARY_VERSION}
+    /usr/include/tcl${TCL_LIBRARY_VERSION}
+    /usr/include/tcl8.6
+    /usr/include/tcl8.5
+    /usr/include/tcl8.4
+    /usr/include/tcl8.3
+    /usr/include/tcl8.2
+    /usr/include/tcl8.0
+    ${LOCALBASE}/include/tcl8.6
+    ${LOCALBASE}/include/tk8.6
+    ${LOCALBASE}/include/tcl8.5
+    ${LOCALBASE}/include/tk8.5
+    ${LOCALBASE}/include/tcl8.4
+    ${LOCALBASE}/include/tk8.4
+    )
+endif()
 
 if(WIN32)
   set(TCLTK_POSSIBLE_INCLUDE_PATHS ${TCLTK_POSSIBLE_INCLUDE_PATHS}
@


1.12
log
@
Update to cmake-3.0.1

Tested in a bulk build by landry@@
OK landry@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.11 2013/10/14 12:58:03 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Thu Jul 31 17:03:56 2014
+++ Modules/FindTCL.cmake	Wed Sep  3 08:10:09 2014
@@@@ -58,19 +58,36 @@@@ include(${CMAKE_CURRENT_LIST_DIR}/CMakeFindFrameworks.
d45 1
a45 1
@@@@ -85,19 +102,37 @@@@ get_filename_component(TK_LIBRARY_PATH_PARENT "${TK_LI
d95 1
a95 1
@@@@ -117,31 +152,47 @@@@ if(WIN32)
d167 1
a167 1
@@@@ -165,30 +216,46 @@@@ if(Tk_FRAMEWORKS)
@


1.11
log
@Update to cmake-2.8.12.
Tested in a bulk build by the usual suspects, Thanks!

ok espie@@, kili@@
ok zhuk@@ for kde4
@
text
@d1 4
a4 4
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.10 2013/09/30 11:18:10 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Wed Oct  9 10:09:18 2013
+++ Modules/FindTCL.cmake	Wed Oct  9 10:09:54 2013
@@@@ -48,19 +48,36 @@@@ include(${CMAKE_CURRENT_LIST_DIR}/CMakeFindFrameworks.
d45 1
a45 1
@@@@ -75,19 +92,37 @@@@ get_filename_component(TK_LIBRARY_PATH_PARENT "${TK_LI
d95 1
a95 1
@@@@ -107,31 +142,47 @@@@ if(WIN32)
d167 1
a167 1
@@@@ -155,30 +206,46 @@@@ if(Tk_FRAMEWORKS)
@


1.10
log
@
FindTCL: Add OpenBSD paths for Tcl/Tk 8.6
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.9 2013/06/06 12:47:06 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Tue Jul  2 15:41:39 2013
+++ Modules/FindTCL.cmake	Mon Sep 30 12:52:28 2013
d167 1
a167 1
@@@@ -155,28 +206,46 @@@@ if(Tk_FRAMEWORKS)
d188 2
@


1.9
log
@Update to cmake-2.8.11.

Tested in a bulk build by landry@@
Tested with KDE4 by zhuk@@
OK zhuk@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.8 2013/05/30 08:34:32 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Wed May 15 19:38:12 2013
+++ Modules/FindTCL.cmake	Wed May 29 09:29:16 2013
d45 1
a45 1
@@@@ -75,19 +92,35 @@@@ get_filename_component(TK_LIBRARY_PATH_PARENT "${TK_LI
d83 2
d95 1
a95 1
@@@@ -107,31 +140,47 @@@@ if(WIN32)
d167 1
a167 1
@@@@ -155,28 +204,44 @@@@ if(Tk_FRAMEWORKS)
d225 2
@


1.8
log
@Simplification
Minor fixes and cleanups
Put stuff where it belongs
Zap some useless patches

(in preparation for cmake-2.8.11)
@
text
@d1 6
a6 6
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.7 2012/12/05 11:32:04 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Tue Nov 27 14:26:32 2012
+++ Modules/FindTCL.cmake	Wed May 29 13:16:33 2013
@@@@ -48,19 +48,36 @@@@ include(CMakeFindFrameworks)
 include(FindTclsh)
 include(FindWish)
d45 1
a45 1
@@@@ -75,15 +92,35 @@@@ get_filename_component(TK_LIBRARY_PATH_PARENT "${TK_LI
d56 4
d93 1
a93 1
@@@@ -103,31 +140,47 @@@@ if(WIN32)
d165 1
a165 1
@@@@ -151,24 +204,44 @@@@ if(Tk_FRAMEWORKS)
d186 4
@


1.7
log
@Bugfix update to cmake-2.8.10.2.
Sync patches with what has been committed upstream (kudos to Amit)
@
text
@d1 1
a1 1
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.6 2012/11/15 08:43:25 dcoppa Exp $
d3 1
a3 1
+++ Modules/FindTCL.cmake	Wed Dec  5 10:21:21 2012
d19 1
a19 2
-else()
+else(TCLSH_VERSION_STRING)
a23 1
-endif()
d30 1
a30 1
+endif(TCLSH_VERSION_STRING)
@


1.6
log
@Update to cmake-2.8.10.1 (plus some fixes)

Thanks Vadim, landry@@

OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.5 2012/11/11 17:13:32 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Tue Nov  6 20:41:36 2012
+++ Modules/FindTCL.cmake	Mon Nov 12 14:05:36 2012
a208 4
+    ${LOCALBASE}/include/tcl8.5
+    ${LOCALBASE}/include/tk8.5
+    ${LOCALBASE}/include/tcl8.4
+    ${LOCALBASE}/include/tk8.4
d217 4
@


1.5
log
@Update to cmake-2.8.10.
Successfully gone through a bulk build.

Feedback landry@@, Vadim Zhukov, Amit Kulkarni
Bulk build and OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.4 2012/08/31 12:28:31 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Wed Oct 31 16:32:05 2012
+++ Modules/FindTCL.cmake	Sat Nov  3 17:38:54 2012
@


1.4
log
@Update to cmake-2.8.9.

"There was no cmake fallout in the bulk on amd64" jasper@@
Also tested by Brad with a handful of CMake using ports
@
text
@d1 23
a23 13
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.3 2012/05/07 07:06:20 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Thu Aug 23 11:47:12 2012
+++ Modules/FindTCL.cmake	Thu Aug 23 12:02:49 2012
@@@@ -48,19 +48,36 @@@@ INCLUDE(CMakeFindFrameworks)
 INCLUDE(FindTclsh)
 INCLUDE(FindWish)
 
-IF(TCLSH_VERSION_STRING)
-  SET(TCL_TCLSH_VERSION "${TCLSH_VERSION_STRING}")
-ELSE(TCLSH_VERSION_STRING)
-  GET_FILENAME_COMPONENT(TCL_TCLSH_PATH "${TCL_TCLSH}" PATH)
-  GET_FILENAME_COMPONENT(TCL_TCLSH_PATH_PARENT "${TCL_TCLSH_PATH}" PATH)
-  STRING(REGEX REPLACE
d25 5
a29 19
-ENDIF(TCLSH_VERSION_STRING)
+SET(MODTCL_VERSION $ENV{MODTCL_VERSION})
+SET(MODTK_VERSION $ENV{MODTK_VERSION})
+SET(MODTCL_INCDIR $ENV{MODTCL_INCDIR})
+SET(MODTK_INCDIR $ENV{MODTK_INCDIR})
+SET(MODTCL_LIB $ENV{MODTCL_LIB})
+SET(MODTK_LIB $ENV{MODTK_LIB})
+SET(MODTCL_LIBDIR $ENV{MODTCL_LIBDIR})
+SET(MODTK_LIBDIR $ENV{MODTK_LIBDIR})
 
+IF(MODTCL_VERSION)
+  SET(TCL_TCLSH_VERSION "${MODTCL_VERSION}")
+ELSE(MODTCL_VERSION)
+  IF(TCLSH_VERSION_STRING)
+    SET(TCL_TCLSH_VERSION "${TCLSH_VERSION_STRING}")
+  ELSE(TCLSH_VERSION_STRING)
+    GET_FILENAME_COMPONENT(TCL_TCLSH_PATH "${TCL_TCLSH}" PATH)
+    GET_FILENAME_COMPONENT(TCL_TCLSH_PATH_PARENT "${TCL_TCLSH_PATH}" PATH)
+    STRING(REGEX REPLACE
d31 6
a36 6
+  ENDIF(TCLSH_VERSION_STRING)
+ENDIF(MODTCL_VERSION)
+
 GET_FILENAME_COMPONENT(TK_WISH_PATH "${TK_WISH}" PATH)
 GET_FILENAME_COMPONENT(TK_WISH_PATH_PARENT "${TK_WISH_PATH}" PATH)
-STRING(REGEX REPLACE 
d38 4
a41 4
+IF(MODTK_VERSION)
+  SET(TK_WISH_VERSION "${MODTK_VERSION}")
+ELSE(MODTK_VERSION)
+  STRING(REGEX REPLACE 
d43 1
a43 1
+ENDIF(MODTK_VERSION)
d45 4
a48 4
 GET_FILENAME_COMPONENT(TCL_INCLUDE_PATH_PARENT "${TCL_INCLUDE_PATH}" PATH)
 GET_FILENAME_COMPONENT(TK_INCLUDE_PATH_PARENT "${TK_INCLUDE_PATH}" PATH)
@@@@ -75,15 +92,35 @@@@ GET_FILENAME_COMPONENT(TK_LIBRARY_PATH_PARENT "${TK_LI
 STRING(REGEX REPLACE 
d51 1
a51 1
-SET(TCLTK_POSSIBLE_LIB_PATHS
d59 1
a59 6
+IF(MODTCL_LIBDIR)
+  SET(TCLTK_OPENBSD_LIB_PATHS
+    "${TCLTK_OPENBSD_LIB_PATHS}"
+    "${MODTCL_LIBDIR}"
+    )
+ENDIF(MODTCL_LIBDIR)
d61 7
a67 6
+IF(MODTK_LIBDIR)
+  SET(TCLTK_OPENBSD_LIB_PATHS
+    "${TCLTK_OPENBSD_LIB_PATHS}"
+    "${MODTK_LIBDIR}"
+    )
+ENDIF(MODTK_LIBDIR)
d69 2
a70 2
+IF(TCLTK_OPENBSD_LIB_PATHS)
+  SET(TCLTK_POSSIBLE_LIB_PATHS
d73 2
a74 2
+ELSE(TCLTK_OPENBSD_LIB_PATHS)
+  SET(TCLTK_POSSIBLE_LIB_PATHS
d81 4
d86 1
a86 1
+ENDIF(TCLTK_OPENBSD_LIB_PATHS)
d88 4
a91 4
 IF(WIN32)
   GET_FILENAME_COMPONENT(
     ActiveTcl_CurrentVersion 
@@@@ -103,31 +140,47 @@@@ IF(WIN32)
d93 1
a93 1
 ENDIF(WIN32)
d95 3
a97 3
-FIND_LIBRARY(TCL_LIBRARY
-  NAMES 
-  tcl   
d99 5
a103 5
-  tcl86 tcl8.6 
-  tcl85 tcl8.5 
-  tcl84 tcl8.4 
-  tcl83 tcl8.3 
-  tcl82 tcl8.2 
d107 3
a109 3
+IF(MODTCL_LIB)
+  FIND_LIBRARY(TCL_LIBRARY
+    NAMES 
d113 4
a116 4
+ELSE(MODTCL_LIB)
+  FIND_LIBRARY(TCL_LIBRARY
+    NAMES 
+    tcl   
d118 5
a122 5
+    tcl86 tcl8.6 
+    tcl85 tcl8.5 
+    tcl84 tcl8.4 
+    tcl83 tcl8.3 
+    tcl82 tcl8.2 
d126 1
a126 1
+ENDIF(MODTCL_LIB)
d128 2
a129 2
-FIND_LIBRARY(TK_LIBRARY 
-  NAMES 
d133 4
a136 4
-  tk85 tk8.5 
-  tk84 tk8.4 
-  tk83 tk8.3 
-  tk82 tk8.2 
d140 3
a142 3
+IF(MODTK_LIB)
+  FIND_LIBRARY(TK_LIBRARY 
+    NAMES 
d146 3
a148 3
+ELSE(MODTK_LIB)
+  FIND_LIBRARY(TK_LIBRARY 
+    NAMES 
d152 4
a155 4
+    tk85 tk8.5 
+    tk84 tk8.4 
+    tk83 tk8.3 
+    tk82 tk8.2 
d159 1
a159 1
+ENDIF(MODTK_LIB)
d163 3
a165 3
@@@@ -151,24 +204,44 @@@@ IF(Tk_FRAMEWORKS)
   ENDIF(NOT TK_INCLUDE_PATH)
 ENDIF(Tk_FRAMEWORKS)
d167 1
a167 1
-SET(TCLTK_POSSIBLE_INCLUDE_PATHS
d172 2
a173 2
-  ${TCL_FRAMEWORK_INCLUDES} 
-  ${TK_FRAMEWORK_INCLUDES} 
d185 5
a189 6
+IF(MODTCL_INCDIR)
+  SET(TCLTK_OPENBSD_INCLUDE_PATHS
+    "${TCLTK_OPENBSD_INCLUDE_PATHS}"
+    "${MODTCL_INCDIR}"
+    )
+ENDIF(MODTCL_INCDIR)
d191 3
a193 6
+IF(MODTK_INCDIR)
+  SET(TCLTK_OPENBSD_INCLUDE_PATHS
+    "${TCLTK_OPENBSD_INCLUDE_PATHS}"
+    "${MODTK_INCDIR}"
+    )
+ENDIF(MODTK_INCDIR)
d195 2
a196 2
+IF(TCLTK_OPENBSD_INCLUDE_PATHS)
+  SET(TCLTK_POSSIBLE_INCLUDE_PATHS
d199 2
a200 2
+ELSE(TCLTK_OPENBSD_INCLUDE_PATHS)
+  SET(TCLTK_POSSIBLE_INCLUDE_PATHS
d205 2
a206 2
+    ${TCL_FRAMEWORK_INCLUDES} 
+    ${TK_FRAMEWORK_INCLUDES} 
d209 4
d222 1
a222 1
+ENDIF(TCLTK_OPENBSD_INCLUDE_PATHS)
d224 2
a225 2
 IF(WIN32)
   SET(TCLTK_POSSIBLE_INCLUDE_PATHS ${TCLTK_POSSIBLE_INCLUDE_PATHS}
@


1.3
log
@Update to cmake-2.8.8

OK sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.2 2011/03/13 18:23:02 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Mon Apr 30 11:24:38 2012
+++ Modules/FindTCL.cmake	Mon Apr 30 11:35:24 2012
d51 1
a51 1
@@@@ -75,17 +92,37 @@@@ GET_FILENAME_COMPONENT(TK_LIBRARY_PATH_PARENT "${TK_LI
a61 2
-  /usr/lib 
-  /usr/local/lib
a88 2
+    /usr/lib 
+    /usr/local/lib
d95 1
a95 1
@@@@ -105,31 +142,47 @@@@ IF(WIN32)
d167 1
a167 1
@@@@ -153,26 +206,46 @@@@ IF(Tk_FRAMEWORKS)
a179 2
-  /usr/include
-  /usr/local/include
a216 2
+    /usr/include
+    /usr/local/include
@


1.2
log
@Update to cmake-2.8.4.
Tested in a bulk build by landry@@.
Lot of feedback from various people on ports@@: thanks!

OK landry@@, sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Modules_FindTCL_cmake,v 1.1 2010/05/28 20:21:48 dcoppa Exp $
--- Modules/FindTCL.cmake.orig	Tue Feb 15 18:47:27 2011
+++ Modules/FindTCL.cmake	Wed Mar  9 14:36:39 2011
@@@@ -48,15 +48,32 @@@@ INCLUDE(CMakeFindFrameworks)
d8 8
d24 1
a24 5
+
 GET_FILENAME_COMPONENT(TCL_TCLSH_PATH "${TCL_TCLSH}" PATH)
 GET_FILENAME_COMPONENT(TCL_TCLSH_PATH_PARENT "${TCL_TCLSH_PATH}" PATH)
-STRING(REGEX REPLACE 
-  "^.*tclsh([0-9]\\.*[0-9]).*$" "\\1" TCL_TCLSH_VERSION "${TCL_TCLSH}")
d28 8
a35 2
+  STRING(REGEX REPLACE 
+    "^.*tclsh([0-9]\\.*[0-9]).*$" "\\1" TCL_TCLSH_VERSION "${TCL_TCLSH}")
d37 1
a37 1
 
d51 1
a51 1
@@@@ -71,17 +88,37 @@@@ GET_FILENAME_COMPONENT(TK_LIBRARY_PATH_PARENT "${TK_LI
d99 1
a99 1
@@@@ -101,31 +138,47 @@@@ IF(WIN32)
d171 1
a171 1
@@@@ -149,26 +202,46 @@@@ IF(Tk_FRAMEWORKS)
@


1.1
log
@Update to cmake 2.8.1 (I also take maintainership).

"This is good, commit." espie@@
@
text
@d1 3
a3 3
$OpenBSD$
--- Modules/FindTCL.cmake.orig	Tue Apr  6 16:45:31 2010
+++ Modules/FindTCL.cmake	Tue May 11 13:54:34 2010
d96 1
a96 1
-  tcl${TK_LIBRARY_VERSION} tcl${TCL_TCLSH_VERSION} tcl${TK_WISH_VERSION}
d107 1
a107 1
+    NAMES
d115 1
a115 1
+    tcl${TK_LIBRARY_VERSION} tcl${TCL_TCLSH_VERSION} tcl${TK_WISH_VERSION}
d129 1
a129 1
-  tk${TCL_LIBRARY_VERSION} tk${TCL_TCLSH_VERSION} tk${TK_WISH_VERSION}
d139 2
a140 2
+  FIND_LIBRARY(TK_LIBRARY
+    NAMES
d148 1
a148 1
+    tk${TCL_LIBRARY_VERSION} tk${TCL_TCLSH_VERSION} tk${TK_WISH_VERSION}
@

