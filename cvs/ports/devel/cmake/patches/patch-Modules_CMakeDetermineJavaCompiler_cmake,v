head	1.13;
access;
symbols
	OPENBSD_6_0:1.12.0.6
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.2
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.4
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.11.0.2
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.10.0.2
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.8.0.2
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.13
date	2016.11.28.09.15.13;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	jOocuc05F30hpQ6W;

1.12
date	2015.06.24.06.39.03;	author dcoppa;	state Exp;
branches;
next	1.11;
commitid	lTyLqWBmal97eHrV;

1.11
date	2014.12.31.11.06.02;	author dcoppa;	state Exp;
branches;
next	1.10;
commitid	q283NDlM4qiVneVU;

1.10
date	2014.05.12.14.47.49;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2014.05.07.15.42.15;	author kurt;	state Exp;
branches;
next	1.8;

1.8
date	2013.08.16.10.37.22;	author dcoppa;	state Exp;
branches;
next	1.7;

1.7
date	2013.06.06.12.47.06;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2012.12.05.11.32.04;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2012.11.15.08.43.25;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2012.11.11.17.13.31;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2012.01.07.22.14.51;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2011.10.14.17.22.10;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.28.20.21.48;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.13
log
@
Update to CMake-3.7.0

Thanks to naddy@@ who ran a bulk build with it
@
text
@$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.12 2015/06/24 06:39:03 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Fri Nov 11 15:37:13 2016
+++ Modules/CMakeDetermineJavaCompiler.cmake	Fri Nov 25 22:31:44 2016
@@@@ -6,6 +6,8 @@@@
 # NOTE, a generator may set CMAKE_Java_COMPILER before
 # loading this file to force a compiler.
 
+set(MODJAVA_VER $ENV{MODJAVA_VER})
+
 if(NOT CMAKE_Java_COMPILER)
   # prefer the environment variable CC
   if(NOT $ENV{JAVA_COMPILER} STREQUAL "")
@@@@ -32,30 +34,38 @@@@ if(NOT CMAKE_Java_COMPILER)
     endif()
   endif()
 
-  set(Java_BIN_PATH
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\2.0;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.9;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.8;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.7;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.6;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.5;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/bin"
-    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/bin"
-    $ENV{JAVA_HOME}/bin
-    /usr/bin
-    /usr/lib/java/bin
-    /usr/share/java/bin
-    /usr/local/bin
-    /usr/local/java/bin
-    /usr/local/java/share/bin
-    /usr/java/j2sdk1.4.2_04
-    /usr/lib/j2sdk1.4-sun/bin
-    /usr/java/j2sdk1.4.2_09/bin
-    /usr/lib/j2sdk1.5-sun/bin
-    /opt/sun-jdk-1.5.0.04/bin
-    /usr/local/jdk-1.7.0/bin
-    /usr/local/jdk-1.6.0/bin
-    )
+  if(MODJAVA_VER)
+    if(MODJAVA_VER MATCHES "^1\\.8\\+?$")
+      set(Java_BIN_PATH ${LOCALBASE}/jdk-1.8.0/bin)
+    else()
+      set(Java_BIN_PATH ${LOCALBASE}/jdk-1.7.0/bin)
+    endif()
+  else(MODJAVA_VER)
+    set(Java_BIN_PATH
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\2.0;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.9;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.8;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.7;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.6;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.5;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/bin"
+      "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/bin"
+      $ENV{JAVA_HOME}/bin
+      /usr/bin
+      /usr/lib/java/bin
+      /usr/share/java/bin
+      /usr/local/bin
+      /usr/local/java/bin
+      /usr/local/java/share/bin
+      /usr/java/j2sdk1.4.2_04
+      /usr/lib/j2sdk1.4-sun/bin
+      /usr/java/j2sdk1.4.2_09/bin
+      /usr/lib/j2sdk1.5-sun/bin
+      /opt/sun-jdk-1.5.0.04/bin
+      ${LOCALBASE}/jdk-1.7.0/bin
+      ${LOCALBASE}/jdk-1.8.0/bin
+      )
+  endif(MODJAVA_VER)
   # if no compiler has been specified yet, then look for one
   if(CMAKE_Java_COMPILER_INIT)
     set(CMAKE_Java_COMPILER ${CMAKE_Java_COMPILER_INIT} CACHE PATH "Java Compiler")
@


1.12
log
@
jdk-1.8 bits for CMake
@
text
@d1 4
a4 4
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.11 2014/12/31 11:06:02 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Mon Jun  1 17:56:08 2015
+++ Modules/CMakeDetermineJavaCompiler.cmake	Wed Jun 24 07:51:41 2015
@@@@ -16,6 +16,8 @@@@
d13 1
a13 1
@@@@ -42,30 +44,38 @@@@ if(NOT CMAKE_Java_COMPILER)
@


1.11
log
@
Update to cmake-3.1.0

Bulk build by landry@@
KDE-related fixes by zhuk@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.10 2014/05/12 14:47:49 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Mon Dec 15 14:07:43 2014
+++ Modules/CMakeDetermineJavaCompiler.cmake	Thu Dec 18 05:37:11 2014
d13 1
a13 1
@@@@ -42,30 +44,33 @@@@ if(NOT CMAKE_Java_COMPILER)
d42 6
a47 2
+    set(Java_BIN_PATH ${LOCALBASE}/jdk-1.7.0/bin)
+  else()
d70 1
d72 1
a72 1
+  endif()
@


1.10
log
@kurt@@ forgot Modules/FindJava.cmake in his commit (and, while here,
fix style).
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.9 2014/05/07 15:42:15 kurt Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Thu Jan 16 18:15:08 2014
+++ Modules/CMakeDetermineJavaCompiler.cmake	Mon May 12 16:44:16 2014
d12 1
a12 1
   if($ENV{JAVA_COMPILER} MATCHES ".+")
@


1.9
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.8 2013/08/16 10:37:22 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Thu Jan 16 12:15:08 2014
+++ Modules/CMakeDetermineJavaCompiler.cmake	Thu May  1 13:16:46 2014
d43 1
a43 1
+  else(MODJAVA_VER)
d67 1
a67 1
+  endif(MODJAVA_VER)
@


1.8
log
@Missed in previous commit.
okay zhuk@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.7 2013/06/06 12:47:06 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Tue Jul  2 15:41:39 2013
+++ Modules/CMakeDetermineJavaCompiler.cmake	Fri Aug 16 11:53:55 2013
d13 1
a13 1
@@@@ -42,30 +44,38 @@@@ if(NOT CMAKE_Java_COMPILER)
d42 1
a42 5
+    if(MODJAVA_VER MATCHES "^1\\.6\\+?$")
+      set(Java_BIN_PATH ${LOCALBASE}/jdk-1.6.0/bin)
+    else()
+      set(Java_BIN_PATH ${LOCALBASE}/jdk-1.7.0/bin)
+    endif()
a65 1
+      ${LOCALBASE}/jdk-1.6.0/bin
@


1.7
log
@Update to cmake-2.8.11.

Tested in a bulk build by landry@@
Tested with KDE4 by zhuk@@
OK zhuk@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.6 2012/12/05 11:32:04 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Tue Nov 27 14:26:32 2012
+++ Modules/CMakeDetermineJavaCompiler.cmake	Wed Dec  5 10:15:58 2012
d13 1
a13 1
@@@@ -42,30 +44,43 @@@@ if(NOT CMAKE_Java_COMPILER)
d42 1
a42 1
+    if(MODJAVA_VER MATCHES "^1\\.6$")
d44 1
a44 6
+    elseif(MODJAVA_VER MATCHES "^1\\.6\\+$")
+      set(Java_BIN_PATH
+        ${LOCALBASE}/jdk-1.7.0/bin
+        ${LOCALBASE}/jdk-1.6.0/bin
+        )
+    else(MODJAVA_VER MATCHES "^1\\.6$")
d46 1
a46 1
+    endif(MODJAVA_VER MATCHES "^1\\.6$")
@


1.6
log
@Bugfix update to cmake-2.8.10.2.
Sync patches with what has been committed upstream (kudos to Amit)
@
text
@d1 1
a1 1
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.5 2012/11/15 08:43:25 dcoppa Exp $
d13 1
a13 1
@@@@ -42,28 +44,43 @@@@ if(NOT CMAKE_Java_COMPILER)
d38 2
@


1.5
log
@Update to cmake-2.8.10.1 (plus some fixes)

Thanks Vadim, landry@@

OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.4 2012/11/11 17:13:31 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Tue Nov  6 20:41:36 2012
+++ Modules/CMakeDetermineJavaCompiler.cmake	Mon Nov 12 14:08:32 2012
a60 2
+      ${LOCALBASE}/jdk-1.7.0/bin
+      ${LOCALBASE}/jdk-1.6.0/bin
d72 2
@


1.4
log
@Update to cmake-2.8.10.
Successfully gone through a bulk build.

Feedback landry@@, Vadim Zhukov, Amit Kulkarni
Bulk build and OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.3 2012/01/07 22:14:51 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Wed Oct 31 16:32:05 2012
+++ Modules/CMakeDetermineJavaCompiler.cmake	Fri Nov  2 08:11:22 2012
@


1.3
log
@Update to cmake-2.8.7.

Tested in a bulk build by naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.2 2011/10/14 17:22:10 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Fri Dec 30 17:49:56 2011
+++ Modules/CMakeDetermineJavaCompiler.cmake	Tue Jan  3 11:26:41 2012
d8 1
a8 1
+SET(MODJAVA_VER $ENV{MODJAVA_VER})
d10 1
a10 1
 IF(NOT CMAKE_Java_COMPILER)
d12 4
a15 4
   IF($ENV{JAVA_COMPILER} MATCHES ".+")
@@@@ -42,28 +44,43 @@@@ IF(NOT CMAKE_Java_COMPILER)
     ENDIF(NOT EXISTS ${CMAKE_Java_ARCHIVE_INIT})
   ENDIF($ENV{JAVA_ARCHIVE} MATCHES ".+")
d17 1
a17 1
-  SET(Java_BIN_PATH
d39 5
a43 5
+  IF(MODJAVA_VER)
+    IF(MODJAVA_VER MATCHES "^1\\.6$")
+      SET(Java_BIN_PATH ${LOCALBASE}/jdk-1.6.0/bin)
+    ELSEIF(MODJAVA_VER MATCHES "^1\\.6\\+$")
+      SET(Java_BIN_PATH
d47 5
a51 5
+    ELSE(MODJAVA_VER MATCHES "^1\\.6$")
+      SET(Java_BIN_PATH ${LOCALBASE}/jdk-1.7.0/bin)
+    ENDIF(MODJAVA_VER MATCHES "^1\\.6$")
+  ELSE(MODJAVA_VER)
+    SET(Java_BIN_PATH
d75 1
a75 1
+  ENDIF(MODJAVA_VER)
d77 2
a78 2
   IF(CMAKE_Java_COMPILER_INIT)
     SET(CMAKE_Java_COMPILER ${CMAKE_Java_COMPILER_INIT} CACHE PATH "Java Compiler")
@


1.2
log
@Update to cmake-2.8.6

Fixed FindRuby.cmake module (from Vadim Zhukov)

Fixed FindJava.cmake and FindJNI.cmake modules when cmake is used
outside of our ports tree (problem reported and fix tested by
pirofti@@)

Still "100% tests passed, 0 tests failed out of 197".

No fallout in a bulk build.

OK jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_CMakeDetermineJavaCompiler_cmake,v 1.1 2010/05/28 20:21:48 dcoppa Exp $
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Tue Oct  4 18:09:24 2011
+++ Modules/CMakeDetermineJavaCompiler.cmake	Fri Oct 14 09:40:03 2011
d13 1
a13 1
@@@@ -42,28 +44,41 @@@@ IF(NOT CMAKE_Java_COMPILER)
d40 1
a40 3
+    IF(MODJAVA_VER MATCHES "^1\\.5.*")
+      SET(Java_BIN_PATH ${LOCALBASE}/jdk-1.5.0/bin)
+    ELSEIF(MODJAVA_VER MATCHES "^1\\.6.*")
d42 6
a47 1
+    ELSE(MODJAVA_VER MATCHES "^1\\.5.*")
d49 1
a49 1
+    ENDIF(MODJAVA_VER MATCHES "^1\\.5.*")
a62 1
+      ${LOCALBASE}/jdk-1.5.0/bin
@


1.1
log
@Update to cmake 2.8.1 (I also take maintainership).

"This is good, commit." espie@@
@
text
@d1 3
a3 3
$OpenBSD$
--- Modules/CMakeDetermineJavaCompiler.cmake.orig	Tue Apr  6 16:45:30 2010
+++ Modules/CMakeDetermineJavaCompiler.cmake	Tue May 11 15:47:14 2010
d13 1
a13 1
@@@@ -42,28 +44,38 @@@@ IF(NOT CMAKE_Java_COMPILER)
d41 1
a41 1
+      SET(Java_BIN_PATH /usr/local/jdk-1.5.0/bin)
d43 1
a43 1
+      SET(Java_BIN_PATH /usr/local/jdk-1.6.0/bin)
d45 1
a45 1
+      SET(Java_BIN_PATH /usr/local/jdk-1.7.0/bin)
d58 3
@

