head	1.19;
access;
symbols
	OPENBSD_6_0:1.17.0.4
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.19
date	2016.11.28.09.15.13;	author dcoppa;	state Exp;
branches;
next	1.18;
commitid	jOocuc05F30hpQ6W;

1.18
date	2016.08.08.07.44.48;	author dcoppa;	state Exp;
branches;
next	1.17;
commitid	r4e0Be8ugQYraWeW;

1.17
date	2015.12.08.17.18.59;	author dcoppa;	state Exp;
branches;
next	1.16;
commitid	AX6ONjs8OJ4jyAD6;

1.16
date	2015.06.24.06.39.03;	author dcoppa;	state Exp;
branches;
next	1.15;
commitid	lTyLqWBmal97eHrV;

1.15
date	2015.03.26.07.10.02;	author dcoppa;	state Exp;
branches;
next	1.14;
commitid	RC163bs6emik8Gf9;

1.14
date	2014.09.11.14.45.12;	author dcoppa;	state Exp;
branches;
next	1.13;
commitid	LDQT0jjzrJNXIIXR;

1.13
date	2014.09.11.10.24.38;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	m0ESeGbhnaGm45G1;

1.12
date	2014.05.13.05.55.30;	author dcoppa;	state Exp;
branches;
next	1.11;

1.11
date	2014.05.07.15.42.15;	author kurt;	state Exp;
branches;
next	1.10;

1.10
date	2013.08.12.16.09.50;	author zhuk;	state Exp;
branches;
next	1.9;

1.9
date	2013.06.06.12.47.06;	author dcoppa;	state Exp;
branches;
next	1.8;

1.8
date	2012.12.05.11.32.04;	author dcoppa;	state Exp;
branches;
next	1.7;

1.7
date	2012.11.15.08.43.25;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2012.11.11.17.13.31;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2012.01.07.22.14.51;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2011.10.14.17.22.10;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.20.11.32.36;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2010.11.15.11.39.09;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.28.20.21.48;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.19
log
@
Update to CMake-3.7.0

Thanks to naddy@@ who ran a bulk build with it
@
text
@$OpenBSD: patch-Modules_FindJNI_cmake,v 1.18 2016/08/08 07:44:48 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Fri Nov 11 15:37:13 2016
+++ Modules/FindJNI.cmake	Fri Nov 25 22:31:44 2016
@@@@ -25,6 +25,8 @@@@
 #   JAVA_INCLUDE_PATH2    = the include path to jni_md.h
 #   JAVA_AWT_INCLUDE_PATH = the include path to jawt.h
 
+set(MODJAVA_VER $ENV{MODJAVA_VER})
+
 # Expand {libarch} occurences to java_libarch subdirectory(-ies) and set ${_var}
 macro(java_append_library_directories _var)
     # Determine java arch-specific library subdir
@@@@ -70,8 +72,10 @@@@ macro(java_append_library_directories _var)
 
     # Append default list architectures if CMAKE_SYSTEM_PROCESSOR was empty or
     # system is non-Linux (where the code above has not been well tested)
-    if(NOT _java_libarch OR NOT (CMAKE_SYSTEM_NAME MATCHES "Linux"))
-        list(APPEND _java_libarch "i386" "amd64" "ppc")
+    if(NOT MODJAVA_VER)
+      if(NOT _java_libarch OR NOT (CMAKE_SYSTEM_NAME MATCHES "Linux"))
+          list(APPEND _java_libarch "i386" "amd64" "ppc")
+      endif()
     endif()
 
     # Sometimes ${CMAKE_SYSTEM_PROCESSOR} is added to the list to prefer
@@@@ -107,58 +111,73 @@@@ if(_JAVA_HOME_EXPLICIT)
   set(CMAKE_FIND_FRAMEWORK NEVER)
 endif()
 
-set(JAVA_AWT_LIBRARY_DIRECTORIES)
-if(_JAVA_HOME)
+if(MODJAVA_VER)
+  set(JAVA_AWT_LIBRARY_DIRECTORIES)
+  if(MODJAVA_VER MATCHES "^1\\.8\\+?$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
+      ${LOCALBASE}/jdk-1.8.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.8.0/lib/{libarch}
+      )
+  else()
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
+      ${LOCALBASE}/jdk-1.7.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.7.0/lib/{libarch}
+      )
+  endif()
+else(MODJAVA_VER)
+  set(JAVA_AWT_LIBRARY_DIRECTORIES)
+  if(_JAVA_HOME)
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
+      ${_JAVA_HOME}/jre/lib/{libarch}
+      ${_JAVA_HOME}/jre/lib
+      ${_JAVA_HOME}/lib/{libarch}
+      ${_JAVA_HOME}/lib
+      ${_JAVA_HOME}
+      )
+  endif()
+  get_filename_component(java_install_version
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit;CurrentVersion]" NAME)
+
+  list(APPEND JAVA_AWT_LIBRARY_DIRECTORIES
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/lib"
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/lib"
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/lib"
+    )
   JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
-    ${_JAVA_HOME}/jre/lib/{libarch}
-    ${_JAVA_HOME}/jre/lib
-    ${_JAVA_HOME}/lib/{libarch}
-    ${_JAVA_HOME}/lib
-    ${_JAVA_HOME}
+    /usr/lib
+    /usr/local/lib
+    /usr/lib/jvm/java/lib
+    /usr/lib/java/jre/lib/{libarch}
+    /usr/lib/jvm/jre/lib/{libarch}
+    /usr/local/lib/java/jre/lib/{libarch}
+    /usr/local/share/java/jre/lib/{libarch}
+    /usr/lib/j2sdk1.4-sun/jre/lib/{libarch}
+    /usr/lib/j2sdk1.5-sun/jre/lib/{libarch}
+    /opt/sun-jdk-1.5.0.04/jre/lib/{libarch}
+    /usr/lib/jvm/java-6-sun/jre/lib/{libarch}
+    /usr/lib/jvm/java-1.5.0-sun/jre/lib/{libarch}
+    /usr/lib/jvm/java-6-sun-1.6.0.00/jre/lib/{libarch}       # can this one be removed according to #8821 ? Alex
+    /usr/lib/jvm/java-6-openjdk/jre/lib/{libarch}
+    /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/{libarch}        # fedora
+    # Debian specific paths for default JVM
+    /usr/lib/jvm/default-java/jre/lib/{libarch}
+    /usr/lib/jvm/default-java/jre/lib
+    /usr/lib/jvm/default-java/lib
+    # Ubuntu specific paths for default JVM
+    /usr/lib/jvm/java-8-openjdk-{libarch}/jre/lib/{libarch}     # Ubuntu 15.10
+    /usr/lib/jvm/java-7-openjdk-{libarch}/jre/lib/{libarch}     # Ubuntu 15.10
+    /usr/lib/jvm/java-6-openjdk-{libarch}/jre/lib/{libarch}     # Ubuntu 15.10
+    # OpenBSD specific paths for default JVM
+    ${LOCALBASE}/jdk-1.7.0/jre/lib/{libarch}
+    ${LOCALBASE}/jre-1.7.0/lib/{libarch}
+    ${LOCALBASE}/jdk-1.8.0/jre/lib/{libarch}
+    ${LOCALBASE}/jre-1.8.0/lib/{libarch}
+    # SuSE specific paths for default JVM
+    /usr/lib64/jvm/java/jre/lib/{libarch}
+    /usr/lib64/jvm/jre/lib/{libarch}
     )
-endif()
-get_filename_component(java_install_version
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit;CurrentVersion]" NAME)
+endif(MODJAVA_VER)
 
-list(APPEND JAVA_AWT_LIBRARY_DIRECTORIES
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/lib"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/lib"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/lib"
-  )
-JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
-  /usr/lib
-  /usr/local/lib
-  /usr/lib/jvm/java/lib
-  /usr/lib/java/jre/lib/{libarch}
-  /usr/lib/jvm/jre/lib/{libarch}
-  /usr/local/lib/java/jre/lib/{libarch}
-  /usr/local/share/java/jre/lib/{libarch}
-  /usr/lib/j2sdk1.4-sun/jre/lib/{libarch}
-  /usr/lib/j2sdk1.5-sun/jre/lib/{libarch}
-  /opt/sun-jdk-1.5.0.04/jre/lib/{libarch}
-  /usr/lib/jvm/java-6-sun/jre/lib/{libarch}
-  /usr/lib/jvm/java-1.5.0-sun/jre/lib/{libarch}
-  /usr/lib/jvm/java-6-sun-1.6.0.00/jre/lib/{libarch}       # can this one be removed according to #8821 ? Alex
-  /usr/lib/jvm/java-6-openjdk/jre/lib/{libarch}
-  /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/{libarch}        # fedora
-  # Debian specific paths for default JVM
-  /usr/lib/jvm/default-java/jre/lib/{libarch}
-  /usr/lib/jvm/default-java/jre/lib
-  /usr/lib/jvm/default-java/lib
-  # Ubuntu specific paths for default JVM
-  /usr/lib/jvm/java-8-openjdk-{libarch}/jre/lib/{libarch}     # Ubuntu 15.10
-  /usr/lib/jvm/java-7-openjdk-{libarch}/jre/lib/{libarch}     # Ubuntu 15.10
-  /usr/lib/jvm/java-6-openjdk-{libarch}/jre/lib/{libarch}     # Ubuntu 15.10
-  # OpenBSD specific paths for default JVM
-  /usr/local/jdk-1.7.0/jre/lib/{libarch}
-  /usr/local/jre-1.7.0/lib/{libarch}
-  /usr/local/jdk-1.6.0/jre/lib/{libarch}
-  /usr/local/jre-1.6.0/lib/{libarch}
-  # SuSE specific paths for default JVM
-  /usr/lib64/jvm/java/jre/lib/{libarch}
-  /usr/lib64/jvm/jre/lib/{libarch}
-  )
-
 set(JAVA_JVM_LIBRARY_DIRECTORIES)
 foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
   list(APPEND JAVA_JVM_LIBRARY_DIRECTORIES
@@@@ -171,41 +190,55 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
     )
 endforeach()
 
-set(JAVA_AWT_INCLUDE_DIRECTORIES)
-if(_JAVA_HOME)
-  list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES ${_JAVA_HOME}/include)
-endif()
-list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/include"
-)
-
-JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_INCLUDE_DIRECTORIES
-  /usr/include
-  /usr/local/include
-  /usr/lib/java/include
-  /usr/local/lib/java/include
-  /usr/lib/jvm/java/include
-  /usr/lib/jvm/java-6-sun/include
-  /usr/lib/jvm/java-1.5.0-sun/include
-  /usr/lib/jvm/java-6-sun-1.6.0.00/include       # can this one be removed according to #8821 ? Alex
-  /usr/lib/jvm/java-6-openjdk/include
-  /usr/lib/jvm/java-8-openjdk-{libarch}/include  # ubuntu 15.10
-  /usr/lib/jvm/java-7-openjdk-{libarch}/include  # ubuntu 15.10
-  /usr/lib/jvm/java-6-openjdk-{libarch}/include  # ubuntu 15.10
-  /usr/local/share/java/include
-  /usr/lib/j2sdk1.4-sun/include
-  /usr/lib/j2sdk1.5-sun/include
-  /opt/sun-jdk-1.5.0.04/include
-  # Debian specific path for default JVM
-  /usr/lib/jvm/default-java/include
-  # OpenBSD specific path for default JVM
-  /usr/local/jdk-1.7.0/include
-  /usr/local/jdk-1.6.0/include
-  # SuSE specific paths for default JVM
-  /usr/lib64/jvm/java/include
+if(MODJAVA_VER)
+  set(JAVA_AWT_INCLUDE_DIRECTORIES)
+  if(MODJAVA_VER MATCHES "^1\\.8\\+?$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_INCLUDE_DIRECTORIES
+      ${LOCALBASE}/jdk-1.8.0/include
+      )
+  else()
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_INCLUDE_DIRECTORIES
+      ${LOCALBASE}/jdk-1.7.0/include
+      )
+  endif()
+else(MODJAVA_VER)
+  set(JAVA_AWT_INCLUDE_DIRECTORIES)
+  if(_JAVA_HOME)
+    list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES ${_JAVA_HOME}/include)
+  endif()
+  list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/include"
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/include"
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/include"
+    "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/include"
   )
+
+  JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_INCLUDE_DIRECTORIES
+    /usr/include
+    /usr/local/include
+    /usr/lib/java/include
+    /usr/local/lib/java/include
+    /usr/lib/jvm/java/include
+    /usr/lib/jvm/java-6-sun/include
+    /usr/lib/jvm/java-1.5.0-sun/include
+    /usr/lib/jvm/java-6-sun-1.6.0.00/include       # can this one be removed according to #8821 ? Alex
+    /usr/lib/jvm/java-6-openjdk/include
+    /usr/lib/jvm/java-8-openjdk-{libarch}/include  # ubuntu 15.10
+    /usr/lib/jvm/java-7-openjdk-{libarch}/include  # ubuntu 15.10
+    /usr/lib/jvm/java-6-openjdk-{libarch}/include  # ubuntu 15.10
+    /usr/local/share/java/include
+    /usr/lib/j2sdk1.4-sun/include
+    /usr/lib/j2sdk1.5-sun/include
+    /opt/sun-jdk-1.5.0.04/include
+    # Debian specific path for default JVM
+    /usr/lib/jvm/default-java/include
+    # OpenBSD specific path for default JVM
+    ${LOCALBASE}/jdk-1.7.0/include
+    ${LOCALBASE}/jdk-1.8.0/include
+    # SuSE specific paths for default JVM
+    /usr/lib64/jvm/java/include
+    )
+endif(MODJAVA_VER)
 
 foreach(JAVA_PROG "${JAVA_RUNTIME}" "${JAVA_COMPILE}" "${JAVA_ARCHIVE}")
   get_filename_component(jpath "${JAVA_PROG}" PATH)
@


1.18
log
@
Update to CMake-3.6.1.

Tested in a bulk build by naddy@@: the one and only fallout has been
fixed.
@
text
@d1 6
a6 6
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.17 2015/12/08 17:18:59 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Fri Jul 22 15:50:22 2016
+++ Modules/FindJNI.cmake	Thu Aug  4 13:08:52 2016
@@@@ -35,6 +35,8 @@@@
 # (To distribute this file outside of CMake, substitute the full
 #  License text for the above reference.)
d13 1
a13 1
@@@@ -80,8 +82,10 @@@@ macro(java_append_library_directories _var)
d26 1
a26 1
@@@@ -117,58 +121,73 @@@@ if(_JAVA_HOME_EXPLICIT)
d149 1
a149 1
@@@@ -181,41 +200,55 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
@


1.17
log
@
Update to cmake-3.4.0

tested in a bulk build by naddy@@
kde4-related failures proactively fixed by zhuk@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.16 2015/06/24 06:39:03 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Fri Dec  4 11:03:50 2015
+++ Modules/FindJNI.cmake	Fri Dec  4 11:03:15 2015
d26 1
a26 1
@@@@ -113,54 +117,69 @@@@ if(_JAVA_HOME_EXPLICIT)
d89 4
d132 4
d149 1
a149 1
@@@@ -173,35 +192,48 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d161 3
d173 3
a186 1
-  )
d190 1
a190 1
+    list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES
d194 1
a194 1
+    list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES
d207 4
d220 3
@


1.16
log
@
jdk-1.8 bits for CMake
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.15 2015/03/26 07:10:02 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Mon Jun  1 17:56:08 2015
+++ Modules/FindJNI.cmake	Wed Jun 24 07:52:23 2015
d13 1
a13 1
@@@@ -76,8 +78,10 @@@@ macro(java_append_library_directories _var)
d26 1
a26 1
@@@@ -109,51 +113,66 @@@@ if(_JAVA_HOME_EXPLICIT)
d94 3
d133 3
d141 1
a141 1
@@@@ -163,33 +182,46 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d171 2
d212 2
@


1.15
log
@
Update to CMake-3.2.1

Tested in a bulk build by landry@@
OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.14 2014/09/11 14:45:12 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Tue Mar 10 09:38:44 2015
+++ Modules/FindJNI.cmake	Wed Mar 18 06:23:04 2015
d26 1
a26 1
@@@@ -109,51 +113,57 @@@@ if(_JAVA_HOME_EXPLICIT)
d34 12
a45 10
   JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
-    ${_JAVA_HOME}/jre/lib/{libarch}
-    ${_JAVA_HOME}/jre/lib
-    ${_JAVA_HOME}/lib/{libarch}
-    ${_JAVA_HOME}/lib
-    ${_JAVA_HOME}
+    ${LOCALBASE}/jdk-1.7.0/jre/lib/{libarch}
+    ${LOCALBASE}/jre-1.7.0/lib/{libarch}
     )
+else()
d64 6
a69 1
+  JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
d92 4
a95 2
+    )
 endif()
d98 1
d135 1
a135 1
@@@@ -163,33 +173,39 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d142 24
d168 10
a177 4
+  list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES
+    ${LOCALBASE}/jdk-1.7.0/include
+    )
+else()
d203 1
d205 1
a205 24
 endif()
-list(APPEND JAVA_AWT_INCLUDE_DIRECTORIES
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/include"
-  /usr/include
-  /usr/local/include
-  /usr/lib/java/include
-  /usr/local/lib/java/include
-  /usr/lib/jvm/java/include
-  /usr/lib/jvm/java-6-sun/include
-  /usr/lib/jvm/java-1.5.0-sun/include
-  /usr/lib/jvm/java-6-sun-1.6.0.00/include       # can this one be removed according to #8821 ? Alex
-  /usr/lib/jvm/java-6-openjdk/include
-  /usr/local/share/java/include
-  /usr/lib/j2sdk1.4-sun/include
-  /usr/lib/j2sdk1.5-sun/include
-  /opt/sun-jdk-1.5.0.04/include
-  # Debian specific path for default JVM
-  /usr/lib/jvm/default-java/include
-  # OpenBSD specific path for default JVM
-  /usr/local/jdk-1.7.0/include
-  /usr/local/jdk-1.6.0/include
-  )
@


1.14
log
@
cleanup comments; zap a couple of now meaningless comments related
to java 1.6
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.13 2014/09/11 10:24:38 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Wed Sep  3 09:13:14 2014
+++ Modules/FindJNI.cmake	Wed Sep  3 09:28:03 2014
d26 1
a26 1
@@@@ -109,50 +113,56 @@@@ if(_JAVA_HOME_EXPLICIT)
d37 1
d49 1
d125 1
a125 1
@@@@ -162,33 +172,39 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
@


1.13
log
@
Update to cmake-3.0.1

Tested in a bulk build by landry@@
OK landry@@
@
text
@d1 1
a1 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.12 2014/05/13 05:55:30 dcoppa Exp $
Note: we always build with Java 1.6 even when 1.6+ requested; "+" is meaningful
for run-time only.
@


1.12
log
@
Fix uninitialized variable
@
text
@d1 1
a1 1
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.11 2014/05/07 15:42:15 kurt Exp $
d4 3
a6 3
--- Modules/FindJNI.cmake.orig	Thu Jan 16 18:15:08 2014
+++ Modules/FindJNI.cmake	Tue May 13 07:45:35 2014
@@@@ -26,6 +26,8 @@@@
d15 1
a15 1
@@@@ -65,8 +67,10 @@@@ macro(java_append_library_directories _var)
d28 3
a30 3
@@@@ -88,44 +92,49 @@@@ endmacro()
 get_filename_component(java_install_version
   "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit;CurrentVersion]" NAME)
d32 2
a33 38
-set(JAVA_AWT_LIBRARY_DIRECTORIES
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/lib"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/lib"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/lib"
-  )
-
 file(TO_CMAKE_PATH "$ENV{JAVA_HOME}" _JAVA_HOME)
 
-JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
-  ${_JAVA_HOME}/jre/lib/{libarch}
-  ${_JAVA_HOME}/jre/lib
-  ${_JAVA_HOME}/lib
-  ${_JAVA_HOME}
-  /usr/lib
-  /usr/local/lib
-  /usr/lib/jvm/java/lib
-  /usr/lib/java/jre/lib/{libarch}
-  /usr/lib/jvm/jre/lib/{libarch}
-  /usr/local/lib/java/jre/lib/{libarch}
-  /usr/local/share/java/jre/lib/{libarch}
-  /usr/lib/j2sdk1.4-sun/jre/lib/{libarch}
-  /usr/lib/j2sdk1.5-sun/jre/lib/{libarch}
-  /opt/sun-jdk-1.5.0.04/jre/lib/{libarch}
-  /usr/lib/jvm/java-6-sun/jre/lib/{libarch}
-  /usr/lib/jvm/java-1.5.0-sun/jre/lib/{libarch}
-  /usr/lib/jvm/java-6-sun-1.6.0.00/jre/lib/{libarch}       # can this one be removed according to #8821 ? Alex
-  /usr/lib/jvm/java-6-openjdk/jre/lib/{libarch}
-  /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/{libarch}        # fedora
-  # Debian specific paths for default JVM
-  /usr/lib/jvm/default-java/jre/lib/{libarch}
-  /usr/lib/jvm/default-java/jre/lib
-  /usr/lib/jvm/default-java/lib
-  # OpenBSD specific paths for default JVM
-  /usr/local/jdk-1.7.0/jre/lib/{libarch}
-  /usr/local/jre-1.7.0/lib/{libarch}
-  /usr/local/jdk-1.6.0/jre/lib/{libarch}
-  /usr/local/jre-1.6.0/lib/{libarch}
-  )
d36 5
a40 1
+  JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
d43 1
a43 1
+    )
d45 13
a57 1
+  set(JAVA_AWT_LIBRARY_DIRECTORIES
a62 4
+    ${_JAVA_HOME}/jre/lib/{libarch}
+    ${_JAVA_HOME}/jre/lib
+    ${_JAVA_HOME}/lib
+    ${_JAVA_HOME}
d86 3
a88 1
+endif()
d90 32
d124 2
a125 1
@@@@ -137,31 +146,35 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d129 3
a131 25
-
-set(JAVA_AWT_INCLUDE_DIRECTORIES
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/include"
-  ${_JAVA_HOME}/include
-  /usr/include
-  /usr/local/include
-  /usr/lib/java/include
-  /usr/local/lib/java/include
-  /usr/lib/jvm/java/include
-  /usr/lib/jvm/java-6-sun/include
-  /usr/lib/jvm/java-1.5.0-sun/include
-  /usr/lib/jvm/java-6-sun-1.6.0.00/include       # can this one be removed according to #8821 ? Alex
-  /usr/lib/jvm/java-6-openjdk/include
-  /usr/local/share/java/include
-  /usr/lib/j2sdk1.4-sun/include
-  /usr/lib/j2sdk1.5-sun/include
-  /opt/sun-jdk-1.5.0.04/include
-  # Debian specific path for default JVM
-  /usr/lib/jvm/default-java/include
-  # OpenBSD specific path for default JVM
-  /usr/local/jdk-1.7.0/include
-  /usr/local/jdk-1.6.0/include
-  )
d133 2
a134 1
+  set(JAVA_AWT_INCLUDE_DIRECTORIES
d138 5
a142 1
+  set(JAVA_AWT_INCLUDE_DIRECTORIES
a145 1
+    ${_JAVA_HOME}/include
d164 24
a187 1
+endif()
@


1.11
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.10 2013/08/12 16:09:50 zhuk Exp $
d4 2
a5 2
--- Modules/FindJNI.cmake.orig	Thu Jan 16 12:15:08 2014
+++ Modules/FindJNI.cmake	Fri May  2 07:27:01 2014
d28 1
a28 1
@@@@ -88,44 +92,48 @@@@ endmacro()
d71 1
d114 1
a114 1
@@@@ -137,31 +145,35 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
@


1.10
log
@Unbreak (bulk) builds of Java-based apps using CMake: we force using JDK 1.6
to build MODJAVA_VER=1.6+ ports, and CMake should do the same. Otherwise we
could, e.g., pick up co-installed JDK 1.7, start build using it, and while
build process goes, JDK 1.7 may disappear...

Discovered while working on OpenCV 2.4, which contains Java bindings.

okay dcoppa@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.9 2013/06/06 12:47:06 dcoppa Exp $
d4 2
a5 2
--- Modules/FindJNI.cmake.orig	Fri Jun  7 19:21:34 2013
+++ Modules/FindJNI.cmake	Sat Jul 27 21:46:41 2013
d28 1
a28 1
@@@@ -88,44 +92,57 @@@@ endmacro()
d71 4
a74 11
+  if(MODJAVA_VER MATCHES "^1\\.6\\+?$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
+      ${LOCALBASE}/jdk-1.6.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.6.0/lib/{libarch}
+      )
+  else()
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
+      ${LOCALBASE}/jdk-1.7.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.7.0/lib/{libarch}
+      )
+  endif()
a107 2
+    ${LOCALBASE}/jdk-1.6.0/jre/lib/{libarch}
+    ${LOCALBASE}/jre-1.6.0/lib/{libarch}
d113 1
a113 1
@@@@ -137,31 +154,42 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d143 3
a145 9
+  if(MODJAVA_VER MATCHES "^1\\.6\\+?$")
+    set(JAVA_AWT_INCLUDE_DIRECTORIES
+      ${LOCALBASE}/jdk-1.6.0/include
+      )
+  else()
+    set(JAVA_AWT_INCLUDE_DIRECTORIES
+      ${LOCALBASE}/jdk-1.7.0/include
+      )
+  endif()
a168 1
+    ${LOCALBASE}/jdk-1.6.0/include
@


1.9
log
@Update to cmake-2.8.11.

Tested in a bulk build by landry@@
Tested with KDE4 by zhuk@@
OK zhuk@@
@
text
@d1 5
a5 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.8 2012/12/05 11:32:04 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Wed May 15 19:38:12 2013
+++ Modules/FindJNI.cmake	Tue May 28 20:02:18 2013
d28 1
a28 1
@@@@ -88,44 +92,64 @@@@ endmacro()
d71 1
a71 1
+  if(MODJAVA_VER MATCHES "^1\\.6$")
d76 1
a76 8
+  elseif(MODJAVA_VER MATCHES "^1\\.6\\+$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
+      ${LOCALBASE}/jdk-1.7.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.7.0/lib/{libarch}
+      ${LOCALBASE}/jdk-1.6.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.6.0/lib/{libarch}
+      )
+  else(MODJAVA_VER MATCHES "^1\\.6$")
d81 2
a82 2
+  endif(MODJAVA_VER MATCHES "^1\\.6$")
+else(MODJAVA_VER)
d118 1
a118 1
+endif(MODJAVA_VER)
d122 1
a122 1
@@@@ -137,31 +161,47 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d152 1
a152 1
+  if(MODJAVA_VER MATCHES "^1\\.6$")
d156 1
a156 6
+  elseif(MODJAVA_VER MATCHES "^1\\.6\\+$")
+    set(JAVA_AWT_INCLUDE_DIRECTORIES
+      ${LOCALBASE}/jdk-1.7.0/include
+      ${LOCALBASE}/jdk-1.6.0/include
+      )
+  else(MODJAVA_VER MATCHES "^1\\.6$")
d160 2
a161 2
+  endif(MODJAVA_VER MATCHES "^1\\.6$")
+else(MODJAVA_VER)
d186 1
a186 1
+endif(MODJAVA_VER)
@


1.8
log
@Bugfix update to cmake-2.8.10.2.
Sync patches with what has been committed upstream (kudos to Amit)
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.7 2012/11/15 08:43:25 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Tue Nov 27 14:26:32 2012
+++ Modules/FindJNI.cmake	Wed Dec  5 10:18:21 2012
d26 1
a26 1
@@@@ -88,39 +92,64 @@@@ endmacro()
d62 5
d127 1
a127 1
@@@@ -132,29 +161,48 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d131 25
a197 22
-set(JAVA_AWT_INCLUDE_DIRECTORIES
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.4;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\1.3;JavaHome]/include"
-  "[HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\\${java_install_version};JavaHome]/include"
-  ${_JAVA_HOME}/include
-  /usr/include
-  /usr/local/include
-  /usr/lib/java/include
-  /usr/local/lib/java/include
-  /usr/lib/jvm/java/include
-  /usr/lib/jvm/java-6-sun/include
-  /usr/lib/jvm/java-1.5.0-sun/include
-  /usr/lib/jvm/java-6-sun-1.6.0.00/include       # can this one be removed according to #8821 ? Alex
-  /usr/lib/jvm/java-6-openjdk/include
-  /usr/local/share/java/include
-  /usr/lib/j2sdk1.4-sun/include
-  /usr/lib/j2sdk1.5-sun/include
-  /opt/sun-jdk-1.5.0.04/include
-  # Debian specific path for default JVM
-  /usr/lib/jvm/default-java/include
-  )
-
a199 9
   foreach(JAVA_INC_PATH ../include ../java/include ../share/java/include)
@@@@ -227,6 +275,7 @@@@ find_path(JAVA_INCLUDE_PATH2 jni_md.h
   ${JAVA_INCLUDE_PATH}/win32
   ${JAVA_INCLUDE_PATH}/linux
   ${JAVA_INCLUDE_PATH}/freebsd
+  ${JAVA_INCLUDE_PATH}/openbsd
   ${JAVA_INCLUDE_PATH}/solaris
   ${JAVA_INCLUDE_PATH}/hp-ux
   ${JAVA_INCLUDE_PATH}/alpha
@


1.7
log
@Update to cmake-2.8.10.1 (plus some fixes)

Thanks Vadim, landry@@

OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.6 2012/11/11 17:13:31 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Tue Nov  6 20:41:36 2012
+++ Modules/FindJNI.cmake	Tue Nov 13 15:17:12 2012
d26 1
a26 1
@@@@ -88,39 +92,63 @@@@ endmacro()
a92 4
+    ${LOCALBASE}/jdk-1.7.0/jre/lib/{libarch}
+    ${LOCALBASE}/jre-1.7.0/lib/{libarch}
+    ${LOCALBASE}/jdk-1.6.0/jre/lib/{libarch}
+    ${LOCALBASE}/jre-1.6.0/lib/{libarch}
d112 5
d122 1
a122 1
@@@@ -132,29 +160,47 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
a146 2
+    ${LOCALBASE}/jdk-1.7.0/include
+    ${LOCALBASE}/jdk-1.6.0/include
d162 3
d193 1
a193 1
@@@@ -227,6 +273,7 @@@@ find_path(JAVA_INCLUDE_PATH2 jni_md.h
@


1.6
log
@Update to cmake-2.8.10.
Successfully gone through a bulk build.

Feedback landry@@, Vadim Zhukov, Amit Kulkarni
Bulk build and OK landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.5 2012/01/07 22:14:51 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Wed Oct 31 16:32:05 2012
+++ Modules/FindJNI.cmake	Fri Nov  2 10:35:02 2012
d13 14
a26 1
@@@@ -88,39 +90,63 @@@@ endmacro()
d65 1
a65 1
+    set(JAVA_AWT_LIBRARY_DIRECTORIES
d70 1
a70 1
+    set(JAVA_AWT_LIBRARY_DIRECTORIES
d77 1
a77 1
+    set(JAVA_AWT_LIBRARY_DIRECTORIES
d121 1
a121 1
@@@@ -132,29 +158,47 @@@@ foreach(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d191 1
a191 1
@@@@ -227,6 +271,7 @@@@ find_path(JAVA_INCLUDE_PATH2 jni_md.h
@


1.5
log
@Update to cmake-2.8.7.

Tested in a bulk build by naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.4 2011/10/14 17:22:10 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Fri Dec 30 17:49:56 2011
+++ Modules/FindJNI.cmake	Tue Jan  3 10:57:13 2012
d8 1
a8 1
+SET(MODJAVA_VER $ENV{MODJAVA_VER})
d11 1
a11 1
 MACRO(java_append_library_directories _var)
d13 2
a14 2
@@@@ -88,40 +90,65 @@@@ ENDMACRO(java_append_library_directories)
 GET_FILENAME_COMPONENT(java_install_version
d17 1
a17 1
-SET(JAVA_AWT_LIBRARY_DIRECTORIES
d23 1
a23 1
 FILE(TO_CMAKE_PATH "$ENV{JAVA_HOME}" _JAVA_HOME)
d50 3
a52 3
+IF(MODJAVA_VER)
+  IF(MODJAVA_VER MATCHES "^1\\.6$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
d56 2
a57 2
+  ELSEIF(MODJAVA_VER MATCHES "^1\\.6\\+$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
d63 2
a64 2
+  ELSE(MODJAVA_VER MATCHES "^1\\.6$")
+    JAVA_APPEND_LIBRARY_DIRECTORIES(JAVA_AWT_LIBRARY_DIRECTORIES
d68 3
a70 3
+  ENDIF(MODJAVA_VER MATCHES "^1\\.6$")
+ELSE(MODJAVA_VER)
+  SET(JAVA_AWT_LIBRARY_DIRECTORIES
a74 1
 
d81 1
a82 1
+    ${LOCALBASE}/jre-1.7.0/lib/{libarch}
d104 5
a108 6
+ENDIF(MODJAVA_VER)
+
 SET(JAVA_JVM_LIBRARY_DIRECTORIES)
 FOREACH(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
   SET(JAVA_JVM_LIBRARY_DIRECTORIES
@@@@ -132,29 +159,47 @@@@ FOREACH(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d110 1
a110 1
 ENDFOREACH(dir)
d112 3
a114 3
+IF(MODJAVA_VER)
+  IF(MODJAVA_VER MATCHES "^1\\.6$")
+    SET(JAVA_AWT_INCLUDE_DIRECTORIES
d117 2
a118 2
+  ELSEIF(MODJAVA_VER MATCHES "^1\\.6\\+$")
+    SET(JAVA_AWT_INCLUDE_DIRECTORIES
d122 2
a123 2
+  ELSE(MODJAVA_VER MATCHES "^1\\.6$")
+    SET(JAVA_AWT_INCLUDE_DIRECTORIES
d126 3
a128 3
+  ENDIF(MODJAVA_VER MATCHES "^1\\.6$")
+ELSE(MODJAVA_VER)
+  SET(JAVA_AWT_INCLUDE_DIRECTORIES
d135 1
a135 1
+    /usr/include 
d151 1
a151 1
+ENDIF(MODJAVA_VER)
d153 1
a153 1
-SET(JAVA_AWT_INCLUDE_DIRECTORIES
d158 1
a158 1
-  /usr/include 
d175 4
a178 4
 FOREACH(JAVA_PROG "${JAVA_RUNTIME}" "${JAVA_COMPILE}" "${JAVA_ARCHIVE}")
   GET_FILENAME_COMPONENT(jpath "${JAVA_PROG}" PATH)
   FOREACH(JAVA_INC_PATH ../include ../java/include ../share/java/include)
@@@@ -227,6 +272,7 @@@@ FIND_PATH(JAVA_INCLUDE_PATH2 jni_md.h 
@


1.4
log
@Update to cmake-2.8.6

Fixed FindRuby.cmake module (from Vadim Zhukov)

Fixed FindJava.cmake and FindJNI.cmake modules when cmake is used
outside of our ports tree (problem reported and fix tested by
pirofti@@)

Still "100% tests passed, 0 tests failed out of 197".

No fallout in a bulk build.

OK jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.3 2011/09/20 11:32:36 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Tue Oct  4 18:09:24 2011
+++ Modules/FindJNI.cmake	Fri Oct 14 09:48:33 2011
d51 1
a51 1
+  IF(MODJAVA_VER MATCHES "^1\\.5.*")
d53 2
a54 2
+      ${LOCALBASE}/jdk-1.5.0/jre/lib/{libarch}
+      ${LOCALBASE}/jre-1.5.0/lib/{libarch}
d56 1
a56 1
+  ELSEIF(MODJAVA_VER MATCHES "^1\\.6.*")
d58 2
d63 1
a63 1
+  ELSE(MODJAVA_VER MATCHES "^1\\.5.*")
d68 1
a68 1
+  ENDIF(MODJAVA_VER MATCHES "^1\\.5.*")
a82 1
+    ${LOCALBASE}/jdk-1.5.0/jre/lib/{libarch}
a84 1
+    ${LOCALBASE}/jre-1.5.0/lib/{libarch}
d115 1
a115 1
+  IF(MODJAVA_VER MATCHES "^1\\.5.*")
d117 1
a117 1
+      ${LOCALBASE}/jdk-1.5.0/include
d119 1
a119 1
+  ELSEIF(MODJAVA_VER MATCHES "^1\\.6.*")
d121 1
d124 1
a124 1
+  ELSE(MODJAVA_VER MATCHES "^1\\.5.*")
d128 1
a128 1
+  ENDIF(MODJAVA_VER MATCHES "^1\\.5.*")
a136 1
+    ${LOCALBASE}/jdk-1.5.0/include
@


1.3
log
@Update to cmake-2.8.5

Went in a bulk without issues, ok landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.2 2010/11/15 11:39:09 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Fri Jul  8 14:21:44 2011
+++ Modules/FindJNI.cmake	Fri Sep  9 10:02:12 2011
d13 10
a22 2
@@@@ -96,31 +98,53 @@@@ SET(JAVA_AWT_LIBRARY_DIRECTORIES
 
d53 2
a54 3
+      ${JAVA_AWT_LIBRARY_DIRECTORIES}
+      /usr/local/jdk-1.5.0/jre/lib/{libarch}
+      /usr/local/jre-1.5.0/lib/{libarch}
d58 2
a59 3
+      ${JAVA_AWT_LIBRARY_DIRECTORIES}
+      /usr/local/jdk-1.6.0/jre/lib/{libarch}
+      /usr/local/jre-1.6.0/lib/{libarch}
d63 2
a64 3
+      ${JAVA_AWT_LIBRARY_DIRECTORIES}
+      /usr/local/jdk-1.7.0/jre/lib/{libarch}
+      /usr/local/jre-1.7.0/lib/{libarch}
d68 6
d79 6
d106 1
a106 1
 
d109 2
a110 1
@@@@ -132,29 +156,47 @@@@ FOREACH(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d117 1
a117 2
+      ${JAVA_AWT_INCLUDE_DIRECTORIES}
+      /usr/local/jdk-1.5.0/include
d121 1
a121 2
+      ${JAVA_AWT_INCLUDE_DIRECTORIES}
+      /usr/local/jdk-1.6.0/include
d125 1
a125 2
+      ${JAVA_AWT_INCLUDE_DIRECTORIES}
+      /usr/local/jdk-1.7.0/include
d134 3
d180 1
a180 1
@@@@ -227,6 +269,7 @@@@ FIND_PATH(JAVA_INCLUDE_PATH2 jni_md.h 
@


1.2
log
@Update to cmake-2.8.3

OK sthen@@, landry@@ (who also tested this in a bulk build)
@
text
@d1 3
a3 3
$OpenBSD: patch-Modules_FindJNI_cmake,v 1.1 2010/05/28 20:21:48 dcoppa Exp $
--- Modules/FindJNI.cmake.orig	Wed Nov  3 20:58:27 2010
+++ Modules/FindJNI.cmake	Wed Nov 10 09:01:25 2010
d13 1
a13 1
@@@@ -96,29 +98,51 @@@@ SET(JAVA_AWT_LIBRARY_DIRECTORIES
d26 1
d36 1
d72 1
d82 1
d92 1
a92 1
@@@@ -130,29 +154,47 @@@@ FOREACH(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d162 1
a162 1
@@@@ -225,6 +267,7 @@@@ FIND_PATH(JAVA_INCLUDE_PATH2 jni_md.h 
d168 2
a169 2
 )
 
@


1.1
log
@Update to cmake 2.8.1 (I also take maintainership).

"This is good, commit." espie@@
@
text
@d1 3
a3 3
$OpenBSD$
--- Modules/FindJNI.cmake.orig	Tue Apr  6 16:45:31 2010
+++ Modules/FindJNI.cmake	Tue May 11 15:42:37 2010
d5 1
a5 1
 # (To distributed this file outside of CMake, substitute the full
d13 1
a13 1
@@@@ -71,29 +73,51 @@@@ SET(JAVA_AWT_LIBRARY_DIRECTORIES
d88 1
a88 1
@@@@ -105,29 +129,47 @@@@ FOREACH(dir ${JAVA_AWT_LIBRARY_DIRECTORIES})
d158 1
a158 1
@@@@ -200,6 +242,7 @@@@ FIND_PATH(JAVA_INCLUDE_PATH2 jni_md.h 
@

