head	1.2;
access;
symbols
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	kde:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2006.12.18.16.04.31;	author espie;	state dead;
branches;
next	1.1;

1.1
date	2006.07.20.09.23.13;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.07.20.09.23.13;	author espie;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to cmake 2.4.5, quite a few patches vanish since cmake can now
build stuff with system libraries, so we no longer have to repair
curl/zlib... just xmlrpc which cmake can't find without help.
@
text
@$OpenBSD: patch-Source_cmGeneratedFileStream_cxx,v 1.1 2006/07/20 09:23:13 espie Exp $
--- Source/cmGeneratedFileStream.cxx.orig	Mon Jul  3 13:15:38 2006
+++ Source/cmGeneratedFileStream.cxx	Mon Jul  3 13:16:03 2006
@@@@ -27,7 +27,7 @@@@
 #endif
 
 #if defined(CMAKE_BUILD_WITH_CMAKE)
-# include <cmzlib/zlib.h>
+# include <zlib.h>
 #endif
 
 //----------------------------------------------------------------------------
@@@@ -213,7 +213,7 @@@@ void cmGeneratedFileStreamBase::Close()
 int cmGeneratedFileStreamBase::CompressFile(const char* oldname,
                                             const char* newname)
 {
-  gzFile gf = cm_zlib_gzopen(newname, "w");
+  gzFile gf = gzopen(newname, "w");
   if ( !gf )
     {
     return 0;
@@@@ -228,15 +228,15 @@@@ int cmGeneratedFileStreamBase::CompressF
   char buffer[BUFFER_SIZE];
   while ( (res = fread(buffer, 1, BUFFER_SIZE, ifs)) > 0 )
     {
-    if ( !cm_zlib_gzwrite(gf, buffer, res) )
+    if ( !gzwrite(gf, buffer, res) )
       {
       fclose(ifs);
-      cm_zlib_gzclose(gf);
+      gzclose(gf);
       return 0;
       }
     }
   fclose(ifs);
-  cm_zlib_gzclose(gf);
+  gzclose(gf);
   return 1;
 }
 #else
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@cmake, a `new' build system. Used by KDE4.

Easier to work with than autoconf/automake/libtool.
@
text
@@
