head	1.3;
access;
symbols
	OPENBSD_4_0:1.2.0.8
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.6
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	pedro_20041216:1.1.1.1
	pedro:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2006.10.11.21.03.24;	author pedro;	state dead;
branches;
next	1.2;

1.2
date	2005.01.10.20.17.07;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.16.21.21.14;	author pedro;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.16.21.21.14;	author pedro;	state Exp;
branches;
next	;


desc
@@


1.3
log
@luaposix-20060408, okay jolan@@
@
text
@$OpenBSD: patch-Makefile,v 1.2 2005/01/10 20:17:07 jolan Exp $
--- Makefile.orig	Wed Nov  5 18:26:49 2003
+++ Makefile	Mon Jan 10 12:45:02 2005
@@@@ -7,29 +7,23 @@@@ LUALIB= $(LUA)/lib
 LUABIN= $(LUA)/bin
 
 # no need to change anything below here
-CFLAGS= -fPIC $(INCS) $(WARN) -O2 $G
-WARN= -pedantic -Wall
-INCS= -I$(LUAINC)
-
+CFLAGS+= -I$(LOCALBASE)/include -fPIC -DPIC
 MYNAME= posix
-MYLIB= l$(MYNAME)
+MYLIB= lua$(MYNAME)
 
-OBJS= $(MYLIB).o
+OBJS= l$(MYNAME).o
 
 T= $(MYLIB).so
 
-all:	test
+all:	$T
 
-test:	$T
-	$(LUABIN)/lua -l$(MYNAME) test.lua
-
 $T:	$(OBJS)
-	$(CC) -o $@@ -shared $(OBJS)
+	$(CC) -o $@@ -shared -fPIC $(OBJS)
 
 $(OBJS): modemuncher.c
 
 tree:	$T
-	$(LUABIN)/lua -l$(MYNAME) tree.lua .
+	lua -l$(MYNAME) tree.lua .
 
 clean:
 	rm -f $(OBJS) $T core core.* a.out
@


1.2
log
@compile and link with -fPIC for shared objs

naddy tested, pedro approved
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.1.1.1 2004/12/16 21:21:14 pedro Exp $
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.orig	Wed Nov  5 22:26:49 2003
+++ Makefile	Thu Dec 16 16:33:18 2004
d12 1
a12 1
+CFLAGS+= -I$(LOCALBASE)/include
d29 2
a30 1
 	$(CC) -o $@@ -shared $(OBJS)
@


1.1.1.1
log
@posix library for lua, ok jolan@@
@
text
@@
