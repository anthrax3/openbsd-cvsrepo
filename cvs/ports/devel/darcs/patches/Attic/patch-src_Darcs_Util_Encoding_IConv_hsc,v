head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2016.01.31.17.47.49;	author kili;	state dead;
branches;
next	1.2;
commitid	81k7k3E25KrS8jLQ;

1.2
date	2015.12.30.22.04.11;	author kili;	state Exp;
branches;
next	1.1;
commitid	BjpQp1CiZa3p6YQa;

1.1
date	2015.12.29.12.54.38;	author kili;	state Exp;
branches;
next	;
commitid	DREmzcwPMwacDWML;


desc
@@


1.3
log
@Update to darcs-2.10.3.
@
text
@$OpenBSD: patch-src_Darcs_Util_Encoding_IConv_hsc,v 1.2 2015/12/30 22:04:11 kili Exp $

Don't assume nl_items ((from nl_types.h) is 32 bit everywhere.

http://bugs.darcs.net/patch1416

--- src/Darcs/Util/Encoding/IConv.hsc.orig	Mon Nov  9 14:53:00 2015
+++ src/Darcs/Util/Encoding/IConv.hsc	Wed Dec 30 22:45:31 2015
@@@@ -37,7 +37,8 @@@@ import Foreign
     , with, maybeWith
     , ForeignPtr, withForeignPtr, newForeignPtr
     , FunPtr
-    , Int32, Word8
+    , #type nl_item
+    , Word8
     )
 import Control.Exception ( bracket )
 import Data.ByteString ( ByteString, useAsCStringLen, append )
@


1.2
log
@Remove patches i forgot to remove.
Better patch for  IConv.hsc (from Ganesh Sittampalam).
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Darcs_Util_Encoding_IConv_hsc,v 1.1 2015/12/29 12:54:38 kili Exp $
@


1.1
log
@Update to darcs-2.10.2 and unbreak.

Unfortunately, it doesn't build on i386.
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 2
nl_items (from nl_types.h) appears to be an int on Linux (and mapped
to Int32) but a long on OpenBSD.
d8 2
a9 2
+++ src/Darcs/Util/Encoding/IConv.hsc	Wed Dec 23 19:22:59 2015
@@@@ -37,7 +37,7 @@@@ import Foreign
d14 2
a15 1
+    , Int64, Word8
@

