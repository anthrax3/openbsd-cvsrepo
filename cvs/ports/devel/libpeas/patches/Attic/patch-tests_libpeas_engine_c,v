head	1.5;
access;
symbols
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2015.04.02.19.22.41;	author jasper;	state dead;
branches;
next	1.4;
commitid	i1sqNfyOXkf4psz7;

1.4
date	2014.11.12.10.47.12;	author jasper;	state Exp;
branches;
next	1.3;
commitid	zf3ncqxUQAZSQj6X;

1.3
date	2014.08.10.11.59.17;	author jasper;	state Exp;
branches;
next	1.2;
commitid	5Ov09ME059mzVqra;

1.2
date	2014.03.31.11.18.47;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2014.03.31.10.16.55;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to libpeas-1.14.0
@
text
@$OpenBSD: patch-tests_libpeas_engine_c,v 1.4 2014/11/12 10:47:12 jasper Exp $

Add error messages on OpenBSD to test log hooks
https://bugzilla.gnome.org/show_bug.cgi?id=727380

--- tests/libpeas/engine.c.orig	Mon Sep 22 15:52:54 2014
+++ tests/libpeas/engine.c	Wed Nov 12 10:22:28 2014
@@@@ -248,8 +248,7 @@@@ test_engine_not_loadable_plugin (PeasEngine *engine)
   GError *error = NULL;
   PeasPluginInfo *info;
 
-  testing_util_push_log_hook ("*libnot-loadable.so: cannot open shared "
-                              "object file: No such file or directory");
+  testing_util_push_log_hook ("Failed to load module 'not-loadable'*");
   testing_util_push_log_hook ("Error loading plugin 'not-loadable'");
 
   info = peas_engine_get_plugin_info (engine, "not-loadable");
@


1.4
log
@rework local patches with proposed patch from upstream
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@update to libpeas-1.10.1
@
text
@d1 1
a1 1
$OpenBSD: patch-tests_libpeas_engine_c,v 1.2 2014/03/31 11:18:47 jasper Exp $
d6 3
a8 3
--- tests/libpeas/engine.c.orig	Fri Aug  1 15:26:46 2014
+++ tests/libpeas/engine.c	Sun Aug 10 13:51:49 2014
@@@@ -248,8 +248,12 @@@@ test_engine_not_loadable_plugin (PeasEngine *engine)
d12 3
a14 6
+#ifndef __OpenBSD__
   testing_util_push_log_hook ("*libnot-loadable.so: cannot open shared "
                               "object file: No such file or directory");
+#else
+  testing_util_push_log_hook ("not-loadable: File not found");
+#endif /* !__OpenBSD__ */
a17 8
@@@@ -387,6 +391,7 @@@@ test_engine_nonexistent_loader (PeasEngine *engine)
   PeasPluginInfo *info;
 
   testing_util_push_log_hook ("Could not load plugin loader 'does-not-exist'*");
+  testing_util_push_log_hook ("does-not-existloader: File not found");
 
   info = peas_engine_get_plugin_info (engine, "nonexistent-loader");
   peas_engine_enable_loader (engine, "does-not-exist");
@


1.2
log
@submitted upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-tests_libpeas_engine_c,v 1.1 2014/03/31 10:16:55 jasper Exp $
d6 2
a7 2
--- tests/libpeas/engine.c.orig	Mon Mar 31 12:11:42 2014
+++ tests/libpeas/engine.c	Mon Mar 31 12:15:33 2014
d21 2
a22 1
@@@@ -388,6 +392,7 @@@@ test_engine_nonexistent_loader (PeasEngine *engine)
a24 1
   testing_util_push_log_hook ("Could not find loader 'does-not-exist' for*");
@


1.1
log
@unbreak engine and extension-c tests
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 1
Add OpenBSD's error messages to log hooks.
@

