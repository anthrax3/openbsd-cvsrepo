head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.8
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.1.1.0.4
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	zhuk_20140709:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2015.07.10.18.28.14;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	q97xBzHinj0iylec;

1.1
date	2014.07.09.11.30.28;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;
commitid	ehkvhoiYFwV8G8h2;

1.1.1.1
date	2014.07.09.11.30.28;	author zhuk;	state Exp;
branches;
next	;
commitid	ehkvhoiYFwV8G8h2;


desc
@@


1.2
log
@Update KDevPlatform 1.7.1 and KDevelop to 4.7.1.
@
text
@$OpenBSD: patch-app_kdevelop!,v 1.1.1.1 2014/07/09 11:30:28 zhuk Exp $
Make it more portable and less error-prone.
--- app/kdevelop!.orig	Mon Feb  2 17:19:46 2015
+++ app/kdevelop!	Fri Jul  3 03:51:15 2015
@@@@ -18,17 +18,14 @@@@
 # the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 # Boston, MA 02110-1301, USA.
 
-export KDEV_BASEDIR=$(dirname $0)
+export KDEV_BASEDIR=${0%/*}
 export APPLICATION=KDevelop
 
 if ! [ "$KDEV_ATTACHED_PID" ]; then
-    ARGS=""
     if [ $# -eq 0 ]; then
-        ARGS="-pss"
-    else
-        ARGS="$@@"
+        set -- -pss
     fi
-    export KDEV_ATTACHED_PID=$($KDEV_BASEDIR/kdevelop $ARGS --pid)
+    export KDEV_ATTACHED_PID=$($KDEV_BASEDIR/kdevelop "$@@" --pid)
 fi
 
 if ! [ "$KDEV_ATTACHED_PID" ]; then
@@@@ -38,16 +35,16 @@@@ fi
 
 # Make sure we didn't capture garbage instead of the pid (must be 1 word only)
 # note: keep compatible on FreeBSD: https://bugs.kde.org/show_bug.cgi?id=311186
-if [ "$(echo $KDEV_ATTACHED_PID | wc -w | sed 's/ //g')" != 1 ]; then
+if [ 1 -ne "$(echo $KDEV_ATTACHED_PID | wc -w | sed 's/ //g')" ]; then
     echo "Error: Got no valid pid."
     exit 6
 fi
 
-if ! [ "$(which qdbus)" ]; then
+if [ -z "$(command -v qdbus)" ]; then
     echo "Error: The qdbus utility is missing."
     exit 7
 fi
 
 export KDEV_DBUS_ID="org.kdevelop.kdevelop-$KDEV_ATTACHED_PID"
 
-bash --init-file $KDEV_BASEDIR/kdevplatform_shell_environment.sh -i
+env ENV="$KDEV_BASEDIR/kdevplatform_shell_environment.sh" ksh -i
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
Make it more portable and error-prone.
--- app/kdevelop!.orig	Sat Dec  7 22:51:45 2013
+++ app/kdevelop!	Tue Jan 21 21:02:30 2014
d10 1
a10 1
+export KDEV_BASEDIR=$(dirname "$0")
d15 1
a15 1
-    if ! [ "$@@" ]; then
a18 1
+    if [ $# -eq 0 ]; then
d22 1
a22 1
+    export KDEV_ATTACHED_PID=$("$KDEV_BASEDIR"/kdevelop "$@@" --pid)
@


1.1.1.1
log
@KDevelop is a free, open source cross-platform IDE. It is a
feature-full, plugin extensible IDE for C/C++ and other programming
languages. It is based on KDevPlatform, and the KDE and Qt libraries
and is under development since 1998.

This and previous (devel/kdevplatform) were okay landry@@.
@
text
@@
