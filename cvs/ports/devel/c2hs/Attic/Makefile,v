head	1.30;
access;
symbols
	OPENBSD_5_8:1.28.0.6
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.28.0.2
	OPENBSD_5_7_BASE:1.28
	OPENBSD_5_6:1.27.0.4
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.27.0.2
	OPENBSD_5_5_BASE:1.27
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.20.0.4
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.10
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.8
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.6
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.5.0.6
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.4
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.2
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	dons_2004-May-08:1.1.1.1
	dons:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2016.01.25.21.36.19;	author kili;	state dead;
branches;
next	1.29;
commitid	4QQWbcxbn132NQEa;

1.29
date	2015.10.13.20.17.04;	author kili;	state Exp;
branches;
next	1.28;
commitid	AvwOHm9h9FBEMjIh;

1.28
date	2014.12.15.16.37.59;	author kili;	state Exp;
branches;
next	1.27;
commitid	i7kHrxVBR4gY2r8a;

1.27
date	2013.11.30.20.00.23;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2013.07.19.06.47.04;	author kili;	state Exp;
branches;
next	1.25;

1.25
date	2013.07.06.20.54.15;	author kili;	state Exp;
branches;
next	1.24;

1.24
date	2013.03.11.10.50.02;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2012.10.11.13.31.28;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2012.09.27.17.26.05;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.08.18.12.41.37;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.12.27.21.11.17;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2011.12.07.18.25.38;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2011.06.30.21.30.20;	author kili;	state Exp;
branches;
next	1.17;

1.17
date	2011.04.11.14.45.16;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2011.04.05.14.34.45;	author kili;	state Exp;
branches;
next	1.15;

1.15
date	2011.04.03.12.57.28;	author kili;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.15.19.45.56;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.08.01.22.36;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.18.17.47.51;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.04.22.21.45.07;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2007.11.28.21.04.36;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2007.11.18.16.30.36;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.16.11.14.46;	author simon;	state Exp;
branches;
next	1.7;

1.7
date	2007.07.21.17.11.46;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2006.11.20.13.07.19;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2005.05.19.02.41.29;	author dons;	state Exp;
branches;
next	1.4;

1.4
date	2005.03.25.05.53.21;	author dons;	state Exp;
branches;
next	1.3;

1.3
date	2004.11.23.11.22.00;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.10.08.23.37;	author xsa;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.08.07.21.03;	author dons;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.05.08.07.21.03;	author dons;	state Exp;
branches;
next	;


desc
@@


1.30
log
@Remove devel/c2hs. Broken and not used by anything.
@
text
@# $OpenBSD: Makefile,v 1.29 2015/10/13 20:17:04 kili Exp $

BROKEN=			will be removed soon

COMMENT=		interface generator for Haskell to C bindings

V=			0.16.6
DISTNAME=		c2hs-${V}
CATEGORIES=		devel
MAINTAINER=		Matthias Kilian <kili@@openbsd.org>
HOMEPAGE=		http://www.cse.unsw.edu.au/~chak/haskell/c2hs/

MODULES=		lang/ghc converters/libiconv
MODGHC_BUILD=		cabal hackage nort

SUBST_VARS=		V

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c m pthread util

BUILD_DEPENDS=		devel/hs-language-c>=0.4.2,<0.5 \
			textproc/docbook-xsl


USE_GMAKE=		Yes

post-build:
	@@cd ${WRKSRC}/doc && ${MAKE_PROGRAM}
	@@perl -pi -e 's,/usr/share/doc/c2hs.*,${PREFIX}/share/doc/c2hs/,' \
		${WRKSRC}/doc/man1/c2hs.1

post-install:
	${INSTALL_MAN} ${WRKSRC}/doc/man1/c2hs.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/c2hs
	${INSTALL_DATA} ${WRKSRC}/doc/users_guide/*.html ${PREFIX}/share/doc/c2hs

# Note: tests are still broken (not maintained by upstream?)
# Note 2: and (at least) the tests don't work with ghc-7 (because ghc
# now defaults to Haskell-2010).
do-test:
	@@cd ${WRKDIST}/tests/system && ${MAKE_PROGRAM}

.include <bsd.port.mk>
@


1.29
log
@Mark as broken. It either needs an update (which requires more
hs-ports) or will just get removed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/12/15 16:37:59 kili Exp $
@


1.28
log
@Update to cpphs-0.16.6.
(*not* 0.20.1 for now)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.27 2013/11/30 20:00:23 naddy Exp $
@


1.27
log
@drop unused dependency; ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/07/19 06:47:04 kili Exp $
d5 1
a5 1
V=			0.16.4
d21 1
a21 1
BUILD_DEPENDS=		devel/hs-language-c>=0.3.1.1,<0.4.0 \
d23 1
@


1.26
log
@Update to c2hs-0.16.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/07/06 20:54:15 kili Exp $
d22 1
a22 2
			textproc/docbook-xsl \
			textproc/sgmlformat
@


1.25
log
@Typo in comment... Haskell isn't *that* old.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/03/11 10:50:02 espie Exp $
d5 1
a5 1
V=			0.16.3
a6 1
REVISION=		3
d21 1
a21 3
BUILD_DEPENDS=		devel/alex \
			devel/happy \
			devel/hs-language-c \
@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/10/11 13:31:28 dcoppa Exp $
d42 1
a42 1
# now defaults to Haskell-1010).
@


1.23
log
@Fix fallout of haskell ports, now that devel/gmp is no more a
dependency for ghc - devel category

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/09/27 17:26:05 ajacoutot Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d43 1
a43 1
do-regress:
@


1.22
log
@docbook-xsl already comes with libxslt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/08/18 12:41:37 ajacoutot Exp $
d7 1
a7 1
REVISION=		2
d23 1
a23 3
WANTLIB=		c gmp m pthread util

LIB_DEPENDS=		devel/gmp
@


1.21
log
@Remove irrelevant $FreeBSD RCS ids.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/12/27 21:11:17 kili Exp $
a30 2
			textproc/libxml \
			textproc/libxslt \
@


1.20
log
@Bump to enforce updates.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.19 2011/12/07 18:25:38 jasper Exp $
# $FreeBSD: ports/devel/hs-c2hs/Makefile,v 1.20 2004/03/25 08:29:28 obraun Exp $
@


1.19
log
@- add missing build dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/06/30 21:30:20 kili Exp $
d8 1
a8 1
REVISION=		1
@


1.18
log
@Bump after ghc update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/04/11 14:45:16 kili Exp $
d31 1
@


1.17
log
@Bump after ghc update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/04/05 14:34:45 kili Exp $
d8 1
a8 1
REVISION=		0
@


1.16
log
@Add missing BUILD_DEPENDS.

Noticed by landry@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/04/03 12:57:28 kili Exp $
d8 1
d48 2
@


1.15
log
@Update to 0.16.3. This builds fine with ghc (6.12) again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/15 19:45:56 espie Exp $
d29 1
@


1.14
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/08 01:22:36 espie Exp $
d6 1
a6 3
BROKEN=			CLDouble missing in GHC

V=			0.15.0
d11 4
a14 12
MASTER_SITES=		${HOMEPAGE}
MASTER_SITES0=		http://openbsd.dead-parrot.de/distfiles/
DISTFILES=		${DISTNAME}.tar.gz \
			${DISTNAME}-doc.tgz:0 \
			${DISTNAME}-tests.tgz:0

MODULES=		lang/ghc
MODGHC_RUNTIME=		No

SETUP_CONF_ARGS=	configure -g --prefix=${PREFIX}
SETUP_CONF_ENV=		HOME=${PORTHOME} ${CONFIGURE_ENV}
SETUP_PROG=		${WRKSRC}/Setup
a15 1
USE_GROFF =		Yes
d17 1
a17 2

# GPL
d23 1
a23 1
WANTLIB=		c m gmp
d27 5
a31 6
BUILD_DEPENDS=		devel/alex devel/happy textproc/sgmlformat

do-configure:
	@@cd ${WRKSRC} && ghc --make -o ${SETUP_PROG} Setup.hs
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
		${SETUP_PROG} ${SETUP_CONF_ARGS}
d33 1
a33 2
do-build:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} ${SETUP_PROG} build
d36 3
a38 8
	@@cd ${WRKSRC}/doc/c2hs && \
		sed 's!@@VERSION@@!$V!g;s!@@DOCDIR@@!${PREFIX}/share/doc/c2hs!g' \
			man1/c2hs.1.in > man1/c2hs.1 && \
		sgmlfmt -f html c2hs.sgml

do-install:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} copy --destdir=${DESTDIR}
d41 3
a43 7
	@@cd ${WRKSRC}/doc/c2hs && \
		${INSTALL_MAN} man1/c2hs.1 ${PREFIX}/man/man1
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/c2hs
	@@${INSTALL_DATA} ${WRKSRC}/doc/c2hs/*.html ${PREFIX}/share/doc/c2hs
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/c2hs/lib
	@@${INSTALL_DATA} ${WRKSRC}/doc/c2hs/lib/*.hs \
		${PREFIX}/share/doc/c2hs/lib
d45 1
d47 1
a47 1
	@@cd ${WRKDIST}/c2hs/tests && ${MAKE_PROGRAM}
@


1.13
log
@LIB_DEPENDS cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/10/18 17:47:51 espie Exp $
d26 1
a26 1
USE_GROFF =	Yes
d37 1
a37 1
LIB_DEPENDS=		::devel/gmp
d39 1
a39 1
BUILD_DEPENDS=		::devel/alex ::devel/happy ::textproc/sgmlformat
@


1.12
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/04/22 21:45:07 kili Exp $
d35 1
a35 1
WANTLIB=		c m
d37 1
a37 1
LIB_DEPENDS=		gmp::devel/gmp
@


1.11
log
@Mark as broken for now. ghc doesn't have CLDouble any longer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/11/28 21:04:36 kili Exp $
d26 1
@


1.10
log
@
Really unbreak by adding the necessary BUILD_DEPENDS.
Problem found by steven@@. Sorry for the mess.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/11/18 16:30:36 kili Exp $
d5 2
@


1.9
log
@
Update to 0.15.0 and unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/16 11:14:46 simon Exp $
d36 1
a36 1
BUILD_DEPENDS=		::textproc/sgmlformat
@


1.8
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/07/21 17:11:46 kili Exp $
d6 1
a6 4
# Don't panic, this will be fixed soon.
BROKEN=			Doesn't build with ghc-6.6.1

V=			0.13.6
d9 1
a9 1
MAINTAINER=		Don Stewart <dons@@openbsd.org>
d12 4
d18 1
d20 3
a22 3
USE_GMAKE=		Yes
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--prefix=${PREFIX}
d25 21
d47 8
a54 1
	@@cd ${WRKSRC}/doc/c2hs && ${MAKE_PROGRAM} man1/c2hs-config.1 man1/c2hs.1
d57 7
a63 2
	@@cd ${WRKSRC}/doc/c2hs/man1 && \
		${INSTALL_MAN} c2hs-config.1 c2hs.1 ${PREFIX}/man/man1
a66 7

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c gmp m
@


1.7
log
@
BROKEN for ghc-6.6.1. Upstream promised to make a new release in a few
days, so don't panic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/11/20 13:07:19 espie Exp $
d7 1
a7 1
BROKEN=			"Doesn't build with ghc-6.6.1"
@


1.6
log
@fix a few obviously wrong dependencies, and remove extra shells in ghc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/05/19 02:41:29 dons Exp $
d4 4
a7 1
COMMENT=		"interface generator for Haskell to C bindings"
@


1.5
log
@Update to latest stable c2hs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/03/25 05:53:21 dons Exp $
d21 1
a21 1
	@@(cd ${WRKSRC}/doc/c2hs && ${MAKE_PROGRAM} man1/c2hs-config.1 man1/c2hs.1)
d24 2
a25 2
	@@(cd ${WRKSRC}/doc/c2hs/man1 && \
		${INSTALL_MAN} c2hs-config.1 c2hs.1 ${PREFIX}/man/man1)
d28 1
a28 1
	@@(cd ${WRKDIST}/c2hs/tests && ${MAKE_PROGRAM})
@


1.4
log
@Update devel/c2hs. All our patches have gone upstream :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/11/23 11:22:00 espie Exp $
d6 1
a6 1
V=			0.13.4
@


1.3
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/08/10 08:23:37 xsa Exp $
d6 1
a6 1
V=			0.12.0
d18 1
@


1.2
log
@
MODULES= lang/ghc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/05/08 07:21:03 dons Exp $
d34 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d13 1
a13 1
MODULES=		ghc
@


1.1.1.1
log
@Import C->Haskell (c2hs)

C->Haskell is an interface generator that simplifies the development
of Haskell bindings to C libraries.  The tool processes existing C
header files that determine data layout and function signatures on the
C side, in conjunction with Haskell modules that specify Haskell-side
type signatures and marshaling details. Hooks embedded in the Haskell
code signal access to C structures and functions; they are expanded by
the interfacing tool in conjunction with information in the
corresponding C header file. 

ok pvalchev@@
@
text
@@
