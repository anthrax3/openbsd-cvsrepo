head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.10
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.01.06.21.28.05;	author sthen;	state Exp;
branches;
next	1.1;
commitid	RYKU0l8E4J620m0S;

1.1
date	2013.11.11.21.54.57;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to libevent 2.0.22, various fixes including CVE-2014-6272 (integer
overflow in evbuffer_add() and related functions).
@
text
@$OpenBSD: patch-include_event2_util_h,v 1.1 2013/11/11 21:54:57 landry Exp $
--- include/event2/util.h.orig	Mon Jan  5 15:17:40 2015
+++ include/event2/util.h	Mon Jan  5 23:01:59 2015
@@@@ -690,22 +690,6 @@@@ int evutil_secure_rng_init(void);
  */
 int evutil_secure_rng_set_urandom_device_file(char *fname);
 
-/** Seed the random number generator with extra random bytes.
-
-    You should almost never need to call this function; it should be
-    sufficient to invoke evutil_secure_rng_init(), or let Libevent take
-    care of calling evutil_secure_rng_init() on its own.
-
-    If you call this function as a _replacement_ for the regular
-    entropy sources, then you need to be sure that your input
-    contains a fairly large amount of strong entropy.  Doing so is
-    notoriously hard: most people who try get it wrong.  Watch out!
-
-    @@param dat a buffer full of a strong source of random numbers
-    @@param datlen the number of bytes to read from datlen
- */
-void evutil_secure_rng_add_bytes(const char *dat, size_t datlen);
-
 #ifdef __cplusplus
 }
 #endif
@


1.1
log
@Instead of shuffling things around after arc4random_addrandom() removal,
take a stronger stance and remove evutil_secure_rng_add_bytes() from
libevent's API. Nothing calls it anyway, and there's even a big scary
warning (tm) in libevent's header..

---
You should almost never need to call this function; it should be
sufficient to invoke evutil_secure_rng_init(), or let Libevent take
care of calling evutil_secure_rng_init() on its own.

If you call this function as a _replacement_ for the regular
entropy sources, then you need to be sure that your input
contains a fairly large amount of strong entropy.  Doing so is
notoriously hard: most people who try get it wrong.  Watch out!
---

Bump event_core major, and remove the now useless configure.in patch.

Discussed with/ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD$
--- include/event2/util.h.orig	Mon Nov 11 22:39:31 2013
+++ include/event2/util.h	Mon Nov 11 22:40:21 2013
@@@@ -672,22 +672,6 @@@@ void evutil_secure_rng_get_bytes(void *buf, size_t n);
d6 1
a6 1
 int evutil_secure_rng_init(void);
@

