head	1.3;
access;
symbols
	OPENBSD_3_2:1.2.0.12
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.10
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.8
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.6
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.4
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2003.02.15.14.07.52;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2000.03.24.20.48.20;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.21.07.13.49;	author brad;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Say goodbye to old stuff
@
text
@--- autoheader.sh.orig	Tue Jan  5 08:28:39 1999
+++ autoheader.sh	Mon Mar 20 21:02:16 2000
@@@@ -110,19 +110,10 @@@@
   use_localdir=
 fi
 
-# Use the frozen version of Autoconf if available.
-r= f=
-# Some non-GNU m4's don't reject the --help option, so give them /dev/null.
-case `$M4 --help < /dev/null 2>&1` in
-*reload-state*) test -r $AC_MACRODIR/autoheader.m4f && { r=--reload f=f; } ;;
-*traditional*) ;;
-*) echo Autoconf requires GNU m4 1.1 or later >&2; exit 1 ;;
-esac
-
 # Extract assignments of SYMS, TYPES, FUNCS, HEADERS, and LIBS from the
 # modified autoconf processing of the input file.  The sed hair is
 # necessary to win for multi-line macro invocations.
-eval "`$M4 -I$AC_MACRODIR $use_localdir $r autoheader.m4$f $infile |
+eval "`$M4 -g -D__gnu__ -I$AC_MACRODIR $use_localdir autoheader.m4 $infile |
        sed -n -e '
 		: again
 		/^@@@@@@.*@@@@@@$/s/^@@@@@@\(.*\)@@@@@@$/\1/p
@


1.2
log
@Put back mktemp patches as SEPARATE patches.

Brad, next time, ask me, THANKS...

Turn m4 -g test around, so that it actually works on a machine without
enough gm4 compatibility.
@
text
@@


1.1
log
@- get rid of overlaping patches
- fix autoheader for use with our new intree m4
@
text
@a23 9
@@@@ -194,7 +185,7 @@@@
   # Some fgrep's have limits on the number of lines that can be in the
   # pattern on the command line, so use a temporary file containing the
   # pattern.
-  (fgrep_tmp=${TMPDIR-/tmp}/autoh$$
+  (fgrep_tmp=`mktemp ${TMPDIR-/tmp}/autoh.XXXXXXXXXX` || exit 1
    trap "rm -f $fgrep_tmp; exit 1" 1 2 15
    cat > $fgrep_tmp <<EOF
 $syms
@

