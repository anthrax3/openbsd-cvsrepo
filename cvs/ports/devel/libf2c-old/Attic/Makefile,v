head	1.14;
access;
symbols
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.8.0.2
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.6.0.2
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	ports:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2013.08.09.10.59.30;	author naddy;	state dead;
branches;
next	1.13;

1.13
date	2013.07.07.21.25.27;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2013.07.02.08.21.43;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.11.10.50.09;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2013.02.01.16.34.36;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2012.09.01.12.02.27;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2012.06.21.13.56.57;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2012.01.13.00.55.14;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2011.07.18.19.06.36;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2011.01.15.01.09.43;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.15.19.45.59;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.07.24.23.05.08;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.27.09.14.00;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.27.08.36.54;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.05.27.08.36.54;	author espie;	state Exp;
branches;
next	;


desc
@@


1.14
log
@remove GCC2 FORTRAN compiler and libraries that had been used on GCC2 archs
@
text
@# $OpenBSD: Makefile,v 1.13 2013/07/07 21:25:27 naddy Exp $

V =		2.95.3
CONFIG = 	${MACHINE_ARCH}-unknown-openbsd${OSREV}
SUBST_VARS += 	CONFIG V
PKGNAME =	libf2c-$V
REVISION =	9
DISTFILES = 	libf2c-openbsd-$V.tgz
MASTER_SITES =	http://spacehopper.org/mirrors/

ONLY_FOR_ARCHS =	${GCC2_ARCHS}
COMMENT =	GNU fortran 77 libraries
CATEGORIES =	devel math
PERMIT_PACKAGE_CDROM = Yes

MAJOR =	8
MINOR =	0
SHARED_LIBS =	g2c	${MAJOR}.${MINOR}

WRKDIST =	${WRKDIR}/libf2c
BUILD_DEPENDS =	lang/g77-old:patch
LIBIBERTY_INCLUDES =	${WRKDIR}/lang/g77-old/libiberty/include
EGCS_DIR = ${WRKDIR}/lang/g77-old/g77

MAKE_FILE = ${WRKDIST}/Makefile.bsd-wrapper

post-extract:
	if test -e ${EGCS_DIR}/gcc; then \
		ln -sf ${EGCS_DIR}/gcc ${WRKDIR}/gcc; \
	else \
		exit 1; \
	fi
	ln -sf ${EGCS_DIR}/install-sh ${WRKDIR}/install-sh
	ln -sf ${EGCS_DIR}/config.sub ${WRKDIR}/config.sub
	ln -sf ${EGCS_DIR}/config.guess ${WRKDIR}/config.guess

do-configure:
	cd ${WRKDIST} && ${MAKE} ${MAKE_FLAGS} -f ${MAKE_FILE} obj
	cd ${WRKDIST} && ${MAKE} ${MAKE_FLAGS} -f ${MAKE_FILE} depend

MAKE_FLAGS = MANDIR=${TRUEPREFIX}/man/cat \
	INSTALL_LIBGCC= LIBGCC= \
	COMPILERS=f771 \
	USE_COLLECT2= \
	LIBDIR=${TRUEPREFIX}/lib \
	LIBIBERTY_INCLUDES=${LIBIBERTY_INCLUDES} \
	major=${MAJOR} minor=${MINOR}

post-install:
	cd ${WRKBUILD}/obj && ${INSTALL_DATA} g2c.h ${PREFIX}/include
	${INSTALL_DATA_DIR} ${PREFIX}/lib/gcc-lib/${CONFIG}/$V
.for i in libfrtbegin.a libfrtbegin_pic.a libfrtbegin_p.a libg2c.a \
	libg2c_p.a libg2c_pic.a libg2c.so.*
	if test -e ${DESTDIR}${TRUEPREFIX}/lib/$i; then \
	  ln -sf ${TRUEPREFIX}/lib/$i ${PREFIX}/lib/gcc-lib/${CONFIG}/$V; \
	fi
.endfor

.include <bsd.port.mk>
@


1.13
log
@bump for plist changes 5.3 -> 5.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/07/02 08:21:43 espie Exp $
@


1.12
log
@this obviously did not build...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 10:50:09 espie Exp $
d7 1
a7 1
REVISION =	8
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/02/01 16:34:36 naddy Exp $
d7 1
a7 1
REVISION =	7
d54 1
a54 1
	if test -e ${TRUEPREFIX}/lib/$i; then \
@


1.10
log
@bump for plist changes 5.2 -> 5.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/09/01 12:02:27 naddy Exp $
a13 1
PERMIT_DISTFILES_CDROM = Yes
a14 2
PERMIT_DISTFILES_FTP =	Yes
PERMIT_PACKAGE_FTP =	Yes
@


1.9
log
@bsd.lib.mk does not build _pic.a libraries any longer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/06/21 13:56:57 sthen Exp $
d7 1
a7 1
REVISION =	6
@


1.8
log
@bump for plist changes 5.1 -> 5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/01/13 00:55:14 naddy Exp $
d7 1
a7 1
REVISION =	5
@


1.7
log
@bump revision for plist changes 5.0 -> 5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/07/18 19:06:36 naddy Exp $
d7 1
a7 1
REVISION =	4
@


1.6
log
@bump revision for plist changes 4.9 -> 5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/01/15 01:09:43 naddy Exp $
d7 1
a7 1
REVISION =	3
@


1.5
log
@bump revision for plist changes 4.8 -> 4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/15 19:45:59 espie Exp $
d7 1
a7 1
REVISION =	2
@


1.4
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/07/24 23:05:08 naddy Exp $
d7 1
a7 1
REVISION =	1
@


1.3
log
@bump PKGNAME for PLIST changes 4.7 -> 4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/05/27 09:14:00 ajacoutot Exp $
d24 1
a24 1
BUILD_DEPENDS =	::lang/g77-old:patch
@


1.2
log
@full-stop.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/05/27 08:36:54 espie Exp $
d6 2
a7 1
PKGNAME =	libf2c-$Vp0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/05/25 00:29:09 espie Exp $
d6 1
a6 1
PKGNAME =	libf2c-$V
@


1.1.1.1
log
@libs for old g77 2.95.3
@
text
@@
