head	1.6;
access;
symbols
	OPENBSD_6_2:1.6.0.4
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.10
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.8
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.6
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.6
date	2016.10.09.11.39.20;	author pascal;	state Exp;
branches;
next	1.5;
commitid	dpuc8ehj7jbPomZ8;

1.5
date	2015.09.09.19.47.17;	author pascal;	state Exp;
branches;
next	1.4;
commitid	QOcSOWMdJ55ocUc1;

1.4
date	2015.03.15.02.58.07;	author pascal;	state Exp;
branches;
next	1.3;
commitid	JEF8iy2onUjBiZwf;

1.3
date	2014.08.14.07.50.24;	author pascal;	state Exp;
branches;
next	1.2;
commitid	KQaNS6voAHVXm9lG;

1.2
date	2014.03.09.19.49.21;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2011.10.28.14.42.43;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to GDB 7.12.
@
text
@$OpenBSD: patch-bfd_peXXigen_c,v 1.5 2015/09/09 19:47:17 pascal Exp $
Fix out-of-bounds memcpys (FILNMLEN is 18, sizeof x_fname is 14).
--- bfd/peXXigen.c.orig	Fri Oct  7 19:09:21 2016
+++ bfd/peXXigen.c	Fri Oct  7 20:53:14 2016
@@@@ -311,7 +311,7 @@@@ _bfd_XXi_swap_aux_in (bfd *	abfd,
 	  in->x_file.x_n.x_offset = H_GET_32 (abfd, ext->x_file.x_n.x_offset);
 	}
       else
-	memcpy (in->x_file.x_fname, ext->x_file.x_fname, FILNMLEN);
+	memcpy (in->x_file.x_fname, ext->x_file.x_fname, sizeof in->x_file.x_fname);
       return;
 
     case C_STAT:
@@@@ -385,7 +385,7 @@@@ _bfd_XXi_swap_aux_out (bfd *  abfd,
 	  H_PUT_32 (abfd, in->x_file.x_n.x_offset, ext->x_file.x_n.x_offset);
 	}
       else
-	memcpy (ext->x_file.x_fname, in->x_file.x_fname, FILNMLEN);
+	memcpy (ext->x_file.x_fname, in->x_file.x_fname, sizeof ext->x_file.x_fname);
 
       return AUXESZ;
 
@


1.5
log
@Update to GDB 7.10.
@
text
@d1 1
a1 1
$OpenBSD: patch-bfd_peXXigen_c,v 1.4 2015/03/15 02:58:07 pascal Exp $
d3 3
a5 3
--- bfd/peXXigen.c.orig	Fri Aug 28 23:22:06 2015
+++ bfd/peXXigen.c	Tue Sep  1 10:51:15 2015
@@@@ -310,7 +310,7 @@@@ _bfd_XXi_swap_aux_in (bfd *	abfd,
d14 1
a14 1
@@@@ -384,7 +384,7 @@@@ _bfd_XXi_swap_aux_out (bfd *  abfd,
@


1.4
log
@Update to gdb 7.9.
@
text
@d1 1
a1 1
$OpenBSD: patch-bfd_peXXigen_c,v 1.3 2014/08/14 07:50:24 pascal Exp $
d3 3
a5 3
--- bfd/peXXigen.c.orig	Fri Feb 20 18:11:44 2015
+++ bfd/peXXigen.c	Fri Feb 20 22:12:26 2015
@@@@ -307,7 +307,7 @@@@ _bfd_XXi_swap_aux_in (bfd *	abfd,
d14 1
a14 1
@@@@ -381,7 +381,7 @@@@ _bfd_XXi_swap_aux_out (bfd *  abfd,
@


1.3
log
@Update to GDB 7.8.
@
text
@d1 1
a1 1
$OpenBSD: patch-bfd_peXXigen_c,v 1.2 2014/03/09 19:49:21 pascal Exp $
d3 3
a5 3
--- bfd/peXXigen.c.orig	Tue Jul 29 14:37:42 2014
+++ bfd/peXXigen.c	Tue Jul 29 20:27:50 2014
@@@@ -292,7 +292,7 @@@@ _bfd_XXi_swap_aux_in (bfd *	abfd,
d14 1
a14 1
@@@@ -366,7 +366,7 @@@@ _bfd_XXi_swap_aux_out (bfd *  abfd,
@


1.2
log
@Update to gdb 7.7.
@
text
@d1 1
a1 1
$OpenBSD: patch-bfd_peXXigen_c,v 1.1 2011/10/28 14:42:43 espie Exp $
d3 3
a5 3
--- bfd/peXXigen.c.orig	Wed Jan  8 10:23:36 2014
+++ bfd/peXXigen.c	Fri Feb  7 18:43:41 2014
@@@@ -256,7 +256,7 @@@@ _bfd_XXi_swap_aux_in (bfd *	abfd,
d14 1
a14 1
@@@@ -330,7 +330,7 @@@@ _bfd_XXi_swap_aux_out (bfd *  abfd,
@


1.1
log
@real fix for the actual problem, from upstream, as found by Pascal Stumpf
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- bfd/peXXigen.c.orig	Tue Oct 25 15:31:49 2011
+++ bfd/peXXigen.c	Tue Oct 25 15:32:39 2011
@@@@ -249,7 +249,7 @@@@ _bfd_XXi_swap_aux_in (bfd *	abfd,
d14 1
a14 1
@@@@ -323,7 +323,7 @@@@ _bfd_XXi_swap_aux_out (bfd *  abfd,
@

