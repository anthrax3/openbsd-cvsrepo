head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.10.16.05.52.46;	author dcoppa;	state dead;
branches;
next	1.1;

1.1
date	2013.07.06.09.14.12;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to ninja-1.4.0

Tested in different bulk builds by naddy@@, kili@@, etc.

ok kili@@, zhuk@@
maintainer timeout.
@
text
@$OpenBSD: patch-src_build_log_cc,v 1.1 2013/07/06 09:14:12 landry Exp $

Work-around unaligned accesses on strict arches such as hppa

--- src/build_log.cc.orig	Sat Jul  6 03:03:31 2013
+++ src/build_log.cc	Sat Jul  6 03:08:13 2013
@@@@ -57,7 +57,8 @@@@ uint64_t MurmurHash64A(const void* key, size_t len) {
   const uint64_t * data = (const uint64_t *)key;
   const uint64_t * end = data + (len/8);
   while (data != end) {
-    uint64_t k = *data++;
+    uint64_t k;
+    memcpy(&k, data++, sizeof k);
     k *= m;
     k ^= k >> r;
     k *= m;
@


1.1
log
@Fix build on hppa by applying the same dark magic as used on
sparc64/mips64el in patch-src_hash_map_h, cluestick from espie@@
@
text
@d1 1
a1 1
$OpenBSD$
@

