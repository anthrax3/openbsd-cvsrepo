head	1.19;
access;
symbols
	OPENBSD_6_1:1.15.0.2
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	dcoppa_20150326:1.1.1.1
	dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.19
date	2017.07.23.09.26.26;	author espie;	state Exp;
branches;
next	1.18;
commitid	FZPR2Emws5uDqXzb;

1.18
date	2017.07.16.19.18.51;	author espie;	state Exp;
branches;
next	1.17;
commitid	tt0GhWK5c4uf9ILG;

1.17
date	2017.06.30.10.45.49;	author dcoppa;	state Exp;
branches;
next	1.16;
commitid	5dvTFMBNvQ905HTd;

1.16
date	2017.04.10.11.45.26;	author sthen;	state Exp;
branches;
next	1.15;
commitid	XDh1zlSBq0boKsHk;

1.15
date	2017.02.23.13.48.26;	author dcoppa;	state Exp;
branches;
next	1.14;
commitid	ELoLR0Q7g7dubpAe;

1.14
date	2016.11.23.14.40.47;	author dcoppa;	state Exp;
branches;
next	1.13;
commitid	OdSvOgxTlvmaThku;

1.13
date	2016.09.14.08.38.22;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	bqX665DqTXWF1nF2;

1.12
date	2016.06.29.10.10.48;	author dcoppa;	state Exp;
branches;
next	1.11;
commitid	q31BdFO5S9A6MVRv;

1.11
date	2016.06.03.13.25.26;	author dcoppa;	state Exp;
branches;
next	1.10;
commitid	cmlVEYqCwkbceUVS;

1.10
date	2016.04.11.07.41.13;	author dcoppa;	state Exp;
branches;
next	1.9;
commitid	jC18M6kEzpbIquPM;

1.9
date	2016.03.24.13.21.45;	author dcoppa;	state Exp;
branches;
next	1.8;
commitid	Cwf714T7EFDOnB0j;

1.8
date	2016.03.18.23.12.16;	author naddy;	state Exp;
branches;
next	1.7;
commitid	KZAl4KEiw6a3Jixw;

1.7
date	2016.01.20.09.37.13;	author dcoppa;	state Exp;
branches;
next	1.6;
commitid	ey0Ro6PskHGbhmUS;

1.6
date	2015.12.29.19.49.39;	author jasper;	state Exp;
branches;
next	1.5;
commitid	qnWWfNxRwuFA0B7n;

1.5
date	2015.07.24.14.49.16;	author dcoppa;	state Exp;
branches;
next	1.4;
commitid	7TpA0jen1nx619Id;

1.4
date	2015.07.15.15.41.34;	author dcoppa;	state Exp;
branches;
next	1.3;
commitid	PRMXB6c80vMIwB0w;

1.3
date	2015.04.23.09.05.25;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	01FqdQQA2sXcKqnc;

1.2
date	2015.04.05.13.31.13;	author sthen;	state Exp;
branches;
next	1.1;
commitid	1hQJnDR1GYYQ0MPE;

1.1
date	2015.03.26.06.49.11;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;
commitid	Ytxoaug3vmAotAN3;

1.1.1.1
date	2015.03.26.06.49.11;	author dcoppa;	state Exp;
branches;
next	;
commitid	Ytxoaug3vmAotAN3;


desc
@@


1.19
log
@add pthread to COMPILER_LIBCXX.
white lie, but it allows clang and gcc to be more similar
bump accordingly.
@
text
@# $OpenBSD: Makefile,v 1.18 2017/07/16 19:18:51 espie Exp $

COMMENT =		JSON parsing C++ API

GH_ACCOUNT =		open-source-parsers
GH_PROJECT =		jsoncpp
GH_TAGNAME =		1.8.1
SUBST_VARS +=		GH_TAGNAME
REVISION =		0

# no upstream revision
SHARED_LIBS =		jsoncpp 2.1

CATEGORIES =		devel

HOMEPAGE =		https://github.com/open-source-parsers/jsoncpp/wiki

MAINTAINER =		David Coppa <dcoppa@@openbsd.org>

# Public Domain / MIT
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		m ${COMPILER_LIBCXX}

MODULES =		devel/scons
MODSCONS_FLAGS =	platform=linux-gcc

MAKE_ENV +=		CXX="${CXX}" CXXFLAGS="${CXXFLAGS}" \
			LIBjsoncpp_VERSION=${LIBjsoncpp_VERSION}

TEST_TARGET =		check

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/include/jsoncpp/json/
	${INSTALL_DATA} ${WRKSRC}/include/json/*.h \
	    ${PREFIX}/include/jsoncpp/json/
	${INSTALL_DATA} \
	    ${WRKSRC}/libs/linux-gcc-4.2.1/libjsoncpp.so.${LIBjsoncpp_VERSION} \
	    ${PREFIX}/lib/
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig/
	${SUBST_CMD} -c -o ${SHAREOWN} -g ${SHAREGRP} -m ${SHAREMODE} \
	    ${FILESDIR}/jsoncpp.pc.in ${PREFIX}/lib/pkgconfig/jsoncpp.pc
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/jsoncpp/
	${INSTALL_DATA} ${WRKSRC}/{AUTHORS,LICENSE,NEWS.txt,README.md} \
	    ${PREFIX}/share/doc/jsoncpp/

# XXX: should be in the scons module?
do-test:
	${SETENV} ${MAKE_ENV} ${MODSCONS_BIN} -C ${WRKSRC} ${MODSCONS_ENV} \
	    ${MODSCONS_FLAGS} ${TEST_TARGET} ${TEST_LOG}

.include <bsd.port.mk>
@


1.18
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2017/06/30 10:45:49 dcoppa Exp $
d9 1
@


1.17
log
@
Update to jsoncpp-1.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2017/04/10 11:45:26 sthen Exp $
d22 1
a22 1
WANTLIB =		m ${LIBCXX}
@


1.16
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2017/02/23 13:48:26 dcoppa Exp $
d7 1
a7 1
GH_TAGNAME =		1.8.0
@


1.15
log
@
Update to jsoncpp-1.8.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2016/11/23 14:40:47 dcoppa Exp $
d22 1
a22 1
WANTLIB =		m stdc++
@


1.14
log
@
Update to jsoncpp-1.7.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/09/14 08:38:22 dcoppa Exp $
d7 1
a7 1
GH_TAGNAME =		1.7.7
@


1.13
log
@
Update to jsoncpp-1.7.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/06/29 10:10:48 dcoppa Exp $
d7 1
a7 1
GH_TAGNAME =		1.7.5
@


1.12
log
@
Update to jsoncpp-1.7.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/06/03 13:25:26 dcoppa Exp $
d7 1
a7 1
GH_TAGNAME =		1.7.3
d11 1
a11 1
SHARED_LIBS =		jsoncpp 2.0
@


1.11
log
@
Generalize setting of JSONCPP_OVERRIDE to all compilers
(upstream git commit ba6fa48d31091a151b10dd47986602889731a893)

Fix int->char conversions
(upstream git commit ea4af183171bcc1d775af301d9e8bd8db9405cc7)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/04/11 07:41:13 dcoppa Exp $
d7 1
a7 2
GH_TAGNAME =		1.7.2
REVISION =		0
d11 1
a11 1
SHARED_LIBS =		jsoncpp 1.0
@


1.10
log
@
Update to jsoncpp-1.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/03/24 13:21:45 dcoppa Exp $
d8 1
@


1.9
log
@
Update to jsoncpp-1.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/03/18 23:12:16 naddy Exp $
d7 1
a7 1
GH_TAGNAME =		1.7.1
@


1.8
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/01/20 09:37:13 dcoppa Exp $
d7 1
a7 1
GH_TAGNAME =		0.10.5
a9 2
REVISION =		0

d11 1
a11 1
SHARED_LIBS =		jsoncpp 0.0
@


1.7
log
@
Merge bugfixes from upstream:

Fix cases where the most negative signed integer was negated, causing
undefined behavior.
(upstream git commit 1b32e3e869059e437c43ba0f8765c3e5857801f7)

Tests: fix undefined behavior from a left shift of a negative value.
(upstream git commit 22ec823cc707f38ee465805cfb158879e56758a3)
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.6 2015/12/29 19:49:39 jasper Exp $

# assumes it can build static and shared libs out of the same (pic) obj files
SHARED_ONLY =		Yes
@


1.6
log
@DISTNAME is set by bsd.port.mk for these ports now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/07/24 14:49:16 dcoppa Exp $
d12 2
@


1.5
log
@
Maintenance update to jsoncpp-0.10.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/07/15 15:41:34 dcoppa Exp $
a11 1
DISTNAME =		${GH_PROJECT}-${GH_TAGNAME}
@


1.4
log
@
Update to jsoncpp-0.10.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/04/23 09:05:25 dcoppa Exp $
d10 1
a10 1
GH_TAGNAME =		0.10.4
@


1.3
log
@
Bugfixing update to jsoncpp-0.10.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/04/05 13:31:13 sthen Exp $
d10 2
a11 1
GH_TAGNAME =		0.10.2
@


1.2
log
@drop GH_COMMIT lines which are hidden behind GH_TAGNAME,
discussed with a few in the room.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2015/03/26 06:49:11 dcoppa Exp $
d10 1
a10 1
GH_TAGNAME =		0.10.0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a10 1
GH_COMMIT =		1021ff66d34f2a17c9adfe41c5e25489d82a075e
@


1.1.1.1
log
@
Import devel/jsoncpp, a JSON parsing C++ API

New dependency of the upcoming update to CMake-3.2.1

Based on a previous port by jca@@
(https://github.com/jasperla/openbsd-wip/tree/master/devel/jsoncpp)

OK landry@@

@
text
@@
