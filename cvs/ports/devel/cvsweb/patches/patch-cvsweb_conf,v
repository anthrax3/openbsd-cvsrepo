head	1.13;
access;
symbols
	OPENBSD_6_0:1.13.0.10
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.6
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.8
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.4
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.2
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.30
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.28
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.26
	OPENBSD_5_0:1.10.0.24
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.22
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.20
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.18
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.16
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.14
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.12
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.10
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.8
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.6
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.4
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.2
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.9.0.10
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.8
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.6
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.8.0.8
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.6
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.4
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_TRACKING_SWITCH:1.8
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.1.1.1.0.2
	OPENBSD_2_8_BASE:1.1.1.1
	naddy_20001001:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2014.07.26.19.38.03;	author naddy;	state Exp;
branches;
next	1.12;
commitid	R7QWrSO9abXyimb9;

1.12
date	2013.10.29.16.30.16;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2013.04.07.20.07.24;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2006.02.04.17.01.36;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2003.08.16.18.12.10;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.01.19.59.25;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2001.07.09.16.55.04;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2001.03.24.22.39.04;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2001.01.12.00.13.09;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.01.06.13.29.25;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.01.03.00.51.41;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2000.12.30.15.39.13;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2000.10.01.19.18.53;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.10.01.19.18.53;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Fix chroot instructions to work with the perl version we ship in 5.6.
While here, drop some obsolete configuration examples and tweak the
default man.cgi URL.
ok espie@@
@
text
@$OpenBSD: patch-cvsweb_conf,v 1.12 2013/10/29 16:30:16 naddy Exp $
--- cvsweb.conf.orig	Mon Sep 23 07:30:17 2002
+++ cvsweb.conf	Sat Jul 26 03:08:50 2014
@@@@ -81,8 +81,7 @@@@ $cvstreedefault = $CVSrepositories[2 * 0];    # The fi
 ##############
 # Manual gateway
 ##############
-$mancgi =
-    "http://www.FreeBSD.org/cgi/man.cgi?apropos=0&sektion=%s&query=%s&manpath=FreeBSD+5.0-current&format=html";
+$mancgi = "http://www.openbsd.org/cgi-bin/man.cgi?&sec=%s&query=%s";
 
 ##############
 # Defaults for UserSettings
@@@@ -115,7 +114,6 @@@@ $mancgi =
 	#   h      Human readable
 	#   u      Unified diff
 	#   c      Context diff
-	#   s      Side by side
 	"f" => "u",
 
 	# hidecvsroot: Don't show the CVSROOT directory
@@@@ -200,7 +198,7 @@@@ EOT
 # These default icons are coming with apache.
 # If these icons are too large, check out the miniicons in the
 # icons/ directory; they have a width/height of 16/16
-my $iconsdir = "/icons";
+my $iconsdir = "/cvsweb/icons";
 
 # format:             TEXT      ICON-URL              width height
 %ICONS = (
@@@@ -290,19 +288,6 @@@@ $use_descriptions = 0;
 # exceed the width of the browser
 $hr_breakable = 1;
 
-# give out function names in diffs
-# this just makes sense if we have C-files, otherwise
-# diff's heuristic doesn't work well ..
-# ( '-p' option to diff)
-$showfunc = 1;
-
-# For each pair of regexps, files that match the first regexp will be diff'ed
-# with an '-F' option with the second regexp.
-%funcline_regexp = (
-	"\\.(4th|fr)\$" => "\\(^\\|[ \t]\\): ",
-	"\\.rb\$"       => "^[\t ]*\\(class\\|module\\|def\\) ",
-);
-
 # ignore whitespaces for human readable diffs
 # (indendation and stuff ..)
 # ( '-w' option to diff)
@@@@ -335,7 +320,7 @@@@ $inputTextSize = 12;
 # cvsweb to guess the correct mime-type on
 # checkout; you can use the mime.types from
 # apache here:
-$mime_types = '/usr/local/etc/apache/mime.types';
+$mime_types = '/var/www/conf/mime.types';
 
 # quick mime-type lookup; maps file-suffices to
 # mime-types for displaying checkouts in the browser.
@


1.12
log
@move icons to /cvsweb/icons so they are accessible by both httpd and nginx
@
text
@d1 1
a1 1
$OpenBSD: patch-cvsweb_conf,v 1.11 2013/04/07 20:07:24 naddy Exp $
d3 3
a5 2
+++ cvsweb.conf	Mon Oct 28 23:27:17 2013
@@@@ -82,7 +82,7 @@@@ $cvstreedefault = $CVSrepositories[2 * 0];    # The fi
d8 1
a8 1
 $mancgi =
d10 1
a10 1
+    "http://www.OpenBSD.org/cgi-bin/man.cgi?apropos=0&sektion=%s&query=%s&manpath=OpenBSD+Current&arch=i386&format=html";
d14 1
a14 1
@@@@ -115,7 +115,6 @@@@ $mancgi =
d22 1
a22 1
@@@@ -200,7 +199,7 @@@@ EOT
d31 1
a31 1
@@@@ -290,19 +289,6 @@@@ $use_descriptions = 0;
d51 1
a51 1
@@@@ -335,7 +321,7 @@@@ $inputTextSize = 12;
@


1.11
log
@More perl 5.16 fixes:
* Add further modules to README so that "annotate" will work.
* Fix a deprecation warning.
ok tobias@@, sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-cvsweb_conf,v 1.10 2006/02/04 17:01:36 naddy Exp $
d3 1
a3 1
+++ cvsweb.conf	Sun Apr  7 14:09:30 2013
d26 1
a26 1
+my $iconsdir = "/icons/cvsweb";
@


1.10
log
@* Use OpenBSD's man pages instead of FreeBSD's in the sample configuration.
From: Jasper Lievisse Adriaanse

* Fix sample URL for NetBSD man pages.
@
text
@d1 1
a1 1
$OpenBSD: patch-cvsweb_conf,v 1.9 2003/08/16 18:12:10 naddy Exp $
d3 2
a4 2
+++ cvsweb.conf	Sat Feb  4 17:51:39 2006
@@@@ -82,7 +82,7 @@@@ $cvstreedefault = $CVSrepositories[2 * 0
@


1.9
log
@excise functions that require GNU diff; prodding by jolan@@
@
text
@d1 12
a12 3
$OpenBSD: patch-cvsweb_conf,v 1.8 2001/08/01 19:59:25 naddy Exp $
--- cvsweb.conf.orig	2002-09-23 07:30:17.000000000 +0200
+++ cvsweb.conf	2003-08-16 18:25:42.000000000 +0200
@


1.8
log
@Update to knu-cvsweb 1.112.1.82:
* Chdir to TMPDIR so it works even when the cgi-bin directory is unreadable.
* Let the module/path box appear and work properly when there is
only one repository.
* perltidy -i=8 -t -pt=2 -bt=2 -sbt=2 -ci=4 -noll -sfs -nasc -ce
* MFZ 1.111, but introduce @@ForbiddenFiles instead of @@DissallowRead
to forbid user to cvs checkout/diff/annotate specified files.
* MFZ 1.112: A couple of trivial fixes.
@
text
@d1 12
a12 4
$OpenBSD: patch-cvsweb_conf,v 1.7 2001/07/09 16:55:04 naddy Exp $
--- cvsweb.conf.orig	Wed Aug  1 21:36:14 2001
+++ cvsweb.conf	Wed Aug  1 21:37:16 2001
@@@@ -212,7 +212,7 @@@@ EOT
d21 21
a41 1
@@@@ -346,7 +346,7 @@@@ $inputTextSize = 12;
@


1.7
log
@Update to knu-cvsweb 1.110.1.78.
- MFZ 1.109.  Preset the global variable the stores the per file
  cvs info to avoid accumulating cruft under modperl.
- Get rid of a potential "uninitialized variable usage" warning.
- MFZ 1.110.  But the bug had already been fixed in knu-cvsweb.
- Support "zip" as an additional archiver.
@
text
@d1 4
a4 4
$OpenBSD: patch-cvsweb_conf,v 1.6 2001/03/24 22:39:04 naddy Exp $
--- cvsweb.conf.orig	Fri Jul  6 11:44:28 2001
+++ cvsweb.conf	Mon Jul  9 18:26:56 2001
@@@@ -209,7 +209,7 @@@@ EOT
d10 1
d12 2
a13 3
 %ICONS  = (
 	   back => [ ("[BACK]", "$iconsdir/back.gif", 20,   22) ],
@@@@ -329,7 +329,7 @@@@ $inputTextSize = 12;
@


1.6
log
@Update to knu-cvsweb 1.106.1.68:
- Clean up URI parser.
- Workaround thttpd's buggy SCRIPT_NAME / PATH_INFO parser.
- Allow downloading a single port/pkgsrc in tarball by default.
- Remove an obsolete notice: CVSWEB_CONFIG is disused.
- One leftover substitution: "cvs" -> $CMD{cvs}.
- Use a fixed-width font in the colored diff view.
- Do closedir() properly.
- Encode colons in file names properly.
@
text
@d1 3
a3 12
$OpenBSD: patch-cvsweb_conf,v 1.5 2001/01/12 00:13:09 naddy Exp $
--- cvsweb.conf.orig	Sun Jan 14 10:04:04 2001
+++ cvsweb.conf	Sat Mar 24 23:14:31 2001
@@@@ -15,7 +15,7 @@@@
 #   uname, cvs, rlog, rcsdiff
 #   gzip (if you enable $allow_compress)
 #   tar,rm (if you enable $allow_tar)
-$command_path = '/bin:/usr/bin:/usr/local/bin';
+$command_path = '/bin:/usr/bin';
 
 # Search the above directories for each command
 for (qw(uname cvs rlog rcsdiff gzip tar rm)) {
@


1.5
log
@Update to 1.104.1.62.
- Run "tar cf - ... | gzip -c" rather than "tar zcf - ..." to avoid
  tar(1)'s automatic padding of nulls to align with the block size,
  which is just garbage for a receiver.
- Have $uname variable to hold the OS implementation name and wrap
  FreeBSD or OpenBSD specific features in conditional blocks using
  $uname.
- Miscellaneous small fixes.
@
text
@d1 3
a3 3
$OpenBSD: patch-cvsweb_conf,v 1.4 2001/01/06 13:29:25 naddy Exp $
--- cvsweb.conf.orig	Thu Jan 11 03:00:55 2001
+++ cvsweb.conf	Thu Jan 11 18:14:54 2001
d13 1
a13 1
@@@@ -206,7 +206,7 @@@@ EOT
d22 1
a22 1
@@@@ -326,7 +326,7 @@@@ $inputTextSize = 12;
@


1.4
log
@Update to 1.104.1.59.
- Put a text field on each directory view that allows users to jump
  directly to an arbitrary module, which can be specified either
  by a full module/file path or by a module alias.
- Don't rely on perl's $ENV{PATH} search.  Search commands for
  itself and specify them by full paths
- Miscellaneous fixes.
@
text
@d1 13
a13 4
$OpenBSD: patch-cvsweb_conf,v 1.3 2001/01/03 00:51:41 naddy Exp $
--- cvsweb.conf.orig	Wed Jan  3 09:57:49 2001
+++ cvsweb.conf	Sat Jan  6 00:21:53 2001
@@@@ -192,7 +192,7 @@@@ EOT
d22 1
a22 1
@@@@ -312,7 +312,7 @@@@ $inputTextSize = 12;
a30 18
@@@@ -384,7 +384,7 @@@@ $edit_option_form = (not $dirtable);
 #   cvs, rlog, rcsdiff
 #   gzip (if you enable $allow_compress)
 #   tar,rm (if you enable $allow_tar)
-$command_path = '/bin:/usr/bin:/usr/local/bin';
+$command_path = '/bin:/usr/bin';
 
 # If you have files which automatically refers to other files
 # (such as HTML) then this allows you to browse the checked
@@@@ -443,7 +443,7 @@@@ $allow_tar = '';
 #      GNU tar has some useful options against unexpected errors.
 
 # Options to pass to cvs(1).
-@@cvs_options = qw(-l);
+@@cvs_options = qw(-R -l);
 # e.g. @@cvs_options = qw(-R -l);
 #      -R (read only access mode) is implemented only in FreeBSD's and
 #      OpenBSD's cvs(1).
@


1.3
log
@Port changes:
- Install icons.
- Additional MASTER_SITES.
Update to 1.104.1.55:
- Move configuration files to cvsweb subdirectory.
- Add cvsweb.conf-{freebsd,netbsd,openbsd,ruby} examples.
- Add $prkeyword variable to specify the bug report identifier.
- Run under perl -T.
- Turn $allow_compress off by default.
- Miscellaneous fixes.
@
text
@d1 4
a4 4
$OpenBSD$
--- cvsweb.conf.orig	Tue Jan  2 23:10:01 2001
+++ cvsweb.conf	Wed Jan  3 00:04:41 2001
@@@@ -200,7 +200,7 @@@@ EOT
d13 1
a13 1
@@@@ -320,7 +320,7 @@@@ $inputTextSize = 12;
d22 1
a22 1
@@@@ -392,7 +392,7 @@@@ $edit_option_form = (not $dirtable);
d26 2
a27 2
-$ENV{'PATH'} = '/bin:/usr/bin:/usr/local/bin';
+$ENV{'PATH'} = '/bin:/usr/bin';
d31 1
a31 1
@@@@ -451,7 +451,7 @@@@ $allow_tar = '';
@


1.2
log
@Update to 1.104.1.52:
- Add automatic tarball generation feature (default: off).
- Suck in configuration files with "require" instead of "do".
- Add charset to all text/* output.
- Add @@tar_options and @@cvs_options.
- Add $preformat_in_markup variable (default: off).
- Miscellaneous fixes.
@
text
@d1 6
a6 63
$OpenBSD: patch-cvsweb_conf,v 1.1.1.1 2000/10/01 19:18:53 naddy Exp $
--- cvsweb.conf.orig	Sat Dec 30 00:42:29 2000
+++ cvsweb.conf	Sat Dec 30 15:00:14 2000
@@@@ -26,12 +26,12 @@@@
 # 'symbolic_name' 'path_to_the_actual_repository'
 %CVSROOT = (
 	    'local'     => '/home/cvs',
-	    'freebsd'   => '/home/ncvs',
+	    'openbsd'   => '/home/ncvs',
 	   );
 
 %CVSROOTdescr = (
 		 'local'     => 'Local Repository',
-		 'freebsd'   => 'FreeBSD',
+		 'openbsd'   => 'OpenBSD',
 		);
 
 # This tree is enabled by default when
@@@@ -42,28 +42,32 @@@@ $cvstreedefault = 'local';
 # PR categoties
 ##############
 @@prcategories = qw(
-		   advocacy
-		   alpha
-		   bin
-		   conf
-		   docs
-		   gnu
-		   i386
-		   kern
-		   misc
+		   system
+		   user
+		   library
+		   documentation
 		   ports
+		   kernel
 		   sparc
+		   i386
+		   m68k
+		   mips
+		   ppc
+		   arm
+		   alpha
+		   ns32k
+		   vax
 		  );
 
 ##############
 # query-pr.cgi
 ##############
-$prcgi = "http://www.FreeBSD.org/cgi/query-pr.cgi?pr=%s";
+$prcgi = "http://cvs.openbsd.org/cgi-bin/wwwgnats.pl/full?pr=%s";
 
 ##############
 # man.cgi
 ##############
-$mancgi = "http://www.FreeBSD.org/cgi/man.cgi?apropos=0&sektion=%s&query=%s&manpath=FreeBSD+5.0-current&format=html";
+$mancgi = "http://www.openbsd.org/cgi-bin/man.cgi?apropos=0&sektion=%s&query=%s&manpath=OpenBSD+Current&format=html";
 
 ##############
 # Defaults for UserSettings
@@@@ -194,9 +198,9 @@@@ EOT
d8 3
a10 1
 # format:               TEXT      ICON-URL          width height
d12 2
a13 10
-	   back => [ ("[BACK]", "/icons/cvsweb/back.gif", 20,   22) ],
-	   dir  => [ ("[DIR]",  "/icons/cvsweb/dir.gif",  20,   22) ],
-	   file => [ ("[TXT]",  "/icons/cvsweb/text.gif", 20,   22) ],
+	   back => [ ("[BACK]", "/icons/back.gif", 20,   22) ],
+	   dir  => [ ("[DIR]",  "/icons/dir.gif",  20,   22) ],
+	   file => [ ("[TXT]",  "/icons/text.gif", 20,   22) ],
 	   );
 
 # the length to which the last logentry should
@@@@ -309,7 +313,7 @@@@ $inputTextSize = 12;
d22 10
a31 1
@@@@ -438,7 +442,7 @@@@ $allow_tar = '';
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- cvsweb.conf.orig	Fri Sep 22 13:13:18 2000
+++ cvsweb.conf	Mon Sep 25 23:09:37 2000
d85 9
@


1.1.1.1
log
@Import of cvsweb revision 1.103(zeller)-1.30(knu).

The cvsweb WWW CGI script allows remote users to browse a CVS
repository tree via the web.  It can display the revision history
of a file, as well as diffs between revisions, and download the
whole file.
@
text
@@
