head	1.5;
access;
symbols
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2006.07.30.04.54.51;	author pedro;	state dead;
branches;
next	1.4;

1.4
date	2006.03.26.04.47.43;	author pedro;	state Exp;
branches;
next	1.3;

1.3
date	2006.03.21.21.32.25;	author pedro;	state dead;
branches;
next	1.2;

1.2
date	2005.09.06.13.09.27;	author pedro;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.22.23.58.56;	author pedro;	state Exp;
branches;
next	;


desc
@@


1.5
log
@luacompat can go now, okay jolan@@
@
text
@$OpenBSD: patch-compat-5_1_lua,v 1.4 2006/03/26 04:47:43 pedro Exp $
--- compat-5.1.lua.orig	Sat Sep  3 10:15:56 2005
+++ compat-5.1.lua	Sat Sep  3 10:17:12 2005
@@@@ -26,11 +26,11 @@@@ package.path = LUA_PATH or os.getenv("LU
               "/usr/local/share/lua/5.0/?/?.lua;" ..
               "/usr/local/share/lua/5.0/?/init.lua" )
  
-package.cpath = os.getenv("LUA_CPATH") or
-             "./?.so;" ..
+package.cpath = LUA_CPATH or os.getenv("LUA_CPATH") or
+             ("./?.so;" ..
              "./l?.so;" ..
              "/usr/local/lib/lua/5.0/?.so;" ..
-             "/usr/local/lib/lua/5.0/l?.so"
+             "/usr/local/lib/lua/5.0/l?.so")
 
 --
 -- make sure require works with standard libraries
@


1.4
log
@Temporarily revert to luacompat-5.1r4 until all the stuff we have
in-tree is prepared to use luacompat-5.1r5, okay jolan@@
@
text
@d1 1
a1 1
$OpenBSD: patch-compat-5_1_lua,v 1.2 2005/09/06 13:09:27 pedro Exp $
@


1.3
log
@luacompat-5.1r5, okay jolan@@
@
text
@@


1.2
log
@luacompat-5.1r4, okay jolan@@
@
text
@d1 1
a1 1
$OpenBSD: patch-compat-5_1_lua,v 1.1 2005/04/22 23:58:56 pedro Exp $
@


1.1
log
@honour previous setting of lua_cpath if it existed
@
text
@d1 18
a18 17
$OpenBSD$
--- compat-5.1.lua.orig	Fri Apr 22 20:51:03 2005
+++ compat-5.1.lua	Fri Apr 22 20:51:41 2005
@@@@ -13,10 +13,10 @@@@ package.path = LUA_PATH or os.getenv("LU
               "/usr/local/share/lua/5.0/?.lua;" ..
               "/usr/local/share/lua/5.0/?/init.lua" )
  
-package.cpath = os.getenv("LUA_CPATH") or
-             "./?.so;" ..
+package.cpath = LUA_CPATH or os.getenv("LUA_CPATH") or
+             ("./?.so;" ..
              "/usr/local/lib/lua/5.0/?.so;" ..
-             "/usr/local/lib/lua/5.0/lib?.so"
+             "/usr/local/lib/lua/5.0/lib?.so" )
 
 --
 -- make sure require works with standard libraries
@

