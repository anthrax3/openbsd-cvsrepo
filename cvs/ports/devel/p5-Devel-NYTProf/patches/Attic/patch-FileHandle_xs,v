head	1.3;
access;
symbols
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2011.01.09.13.53.27;	author bluhm;	state dead;
branches;
next	1.2;

1.2
date	2010.10.19.18.56.36;	author bluhm;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.20.20.04.35;	author bluhm;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update p5-Devel-NYTProf to 4.06
ok espie@@
@
text
@$OpenBSD: patch-FileHandle_xs,v 1.2 2010/10/19 18:56:36 bluhm Exp $
--- FileHandle.xs.orig	Thu Sep 16 18:48:31 2010
+++ FileHandle.xs	Thu Oct  7 01:12:09 2010
@@@@ -603,8 +603,9 @@@@ NYTP_close(NYTP_file file, int discard) {
         const double ratio = file->zs.total_in / (double) file->zs.total_out;
         flush_output(file, Z_FINISH);
         fprintf(raw_file, "#\n"
-                "# Compressed %lu bytes to %lu, ratio %f:1, data shrunk by %f%%\n",
-                file->zs.total_in, file->zs.total_out, ratio,
+                "# Compressed %ju bytes to %ju, ratio %f:1, data shrunk by %f%%\n",
+                (uintmax_t)file->zs.total_in, 
+                (uintmax_t)file->zs.total_out, ratio,
                 100 * (1 - 1 / ratio));
     }
 
@


1.2
log
@update p5-Devel-NYTProf to 4.05
@
text
@d1 1
a1 1
$OpenBSD: patch-FileHandle_xs,v 1.1 2010/05/20 20:04:35 bluhm Exp $
@


1.1
log
@update p5-Devel-NYTProf to 3.11
ok espie@@
@
text
@d1 4
a4 12
$OpenBSD$
--- FileHandle.xs.orig	Fri Mar 12 11:34:38 2010
+++ FileHandle.xs	Thu May 20 00:00:08 2010
@@@@ -26,6 +26,7 @@@@
 
 #ifdef HAS_ZLIB
 #  include <zlib.h>
+#  include <stdint.h>
 #endif
 
 #define NYTP_FILE_STDIO         0
@@@@ -603,10 +604,11 @@@@ NYTP_close(NYTP_file file, int discard) {
d8 1
a8 5
-                "# Total uncompressed bytes %lu\n"
-                "# Total compressed bytes %lu\n"
+                "# Total uncompressed bytes %ju\n"
+                "# Total compressed bytes %ju\n"
                 "# Compression ratio 1:%2f, data shrunk by %.2f%%\n",
d10 1
@

