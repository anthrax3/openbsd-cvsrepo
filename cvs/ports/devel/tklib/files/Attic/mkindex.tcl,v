head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.1.1.0.18
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.16
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.14
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.12
	OPENBSD_5_0:1.1.1.1.0.10
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.8
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.6
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.4
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.2
	OPENBSD_4_6_BASE:1.1.1.1
	stuart_20090318:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2013.11.14.09.43.09;	author stu;	state dead;
branches;
next	1.1;

1.1
date	2009.03.18.09.10.27;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.03.18.09.10.27;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 0.6.
Installation changes like with tcllib.
Mentry and wcb are now in tklib.
Too many patches for stupidities.

Thanks to Steve Havelka for distfile hosting.

ok landry@@
@
text
@# Generate 'index' manpage
# Stuart Cassoff
# Version 0.1
# Winter 2009

package require doctools

lassign $argv dir descrfn outfn name title version

set modules {}
foreach fn [glob -nocomplain -dir $dir *.n] {
	set data [read [set f [open $fn]]][close $f]
	if {[regexp {.SH NAME\n(.*?) \\- (.*?)\n} $data -> shname shtitle] &&
			[regexp -line {^\.TH.*$} $data th]} {
		lappend modules [list [string map {_ ::} $shname] [lindex $th 3] [lindex $th 5] $shtitle]
	}
}
set modules [lsort -dictionary -index 0 $modules]

set mp ""
append mp {[comment {-*- tcl -*- doctools manpage}]}
append mp "\[manpage_begin $name n $version\]"
append mp "\[titledesc {$title}\]"
append mp "\[moddesc {$title}\]"

append mp {[description]} \n [read [set f [open $descrfn]]][close $f]
append mp {
To locate a manual page for a package with "::", replace "::" with "_".
For example, the manual page for package "foo::bar" would be "foo_bar".
}

append mp {[section MODULES] [list_begin options]}
foreach module $modules {
	append mp "\[opt_def {[lindex $module 0]} [lindex $module 1]\] [lindex $module 2] - [lindex $module 3]" \n
}
append mp {[list_end]}

append mp {[manpage_end]}

set f [open $outfn w]
puts -nonewline $f [[::doctools::new mp -format nroff] format $mp]
close $f


# EOF
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@import devel/tklib, from maintainer Stuart Cassoff

A collection of pure-Tcl utility modules and widgets for Tk that provide
a wide variety of functionality. The intent is to collect commonly used
functions into a single library, which users can rely on to be available
and stable.
@
text
@@
