head	1.3;
access;
symbols
	OPENBSD_5_6:1.2.0.8
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2014.11.22.20.48.00;	author kili;	state dead;
branches;
next	1.2;
commitid	hQehp0WpIXh9BgjJ;

1.2
date	2012.12.02.20.27.19;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2012.11.06.21.24.16;	author kili;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to network-2.4.2.3.
@
text
@$OpenBSD: patch-configure_ac,v 1.2 2012/12/02 20:27:19 kili Exp $

ucred is sockpeercred on OpenBSD

--- configure.ac.orig	Thu Aug 16 18:06:46 2012
+++ configure.ac	Wed Nov 21 21:18:41 2012
@@@@ -70,16 +70,16 @@@@ AC_EGREP_HEADER(in_addr_t, netinet/in.h,
  AC_MSG_RESULT(no))
 
 dnl --------------------------------------------------
-dnl * test for SO_PEERCRED and struct ucred
+dnl * test for SO_PEERCRED and struct sockpeercred
 dnl --------------------------------------------------
-AC_MSG_CHECKING(for SO_PEERCRED and struct ucred in sys/socket.h)
+AC_MSG_CHECKING(for SO_PEERCRED and struct sockpeercred in sys/socket.h)
 AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/types.h>
 #include <sys/socket.h>
 #ifndef SO_PEERCRED
 # error no SO_PEERCRED
 #endif
-struct ucred u;]])],ac_cv_ucred=yes,ac_cv_ucred=no)
-if test "x$ac_cv_ucred" = xno; then
+struct sockpeercred u;]])],ac_cv_sockpeercred=yes,ac_cv_sockpeercred=no)
+if test "x$ac_cv_sockpeercred" = xno; then
     old_CFLAGS="$CFLAGS"
     CFLAGS="-D_GNU_SOURCE $CFLAGS"
     AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/types.h>
@@@@ -87,18 +87,18 @@@@ if test "x$ac_cv_ucred" = xno; then
 #ifndef SO_PEERCRED
 # error no SO_PEERCRED
 #endif
-struct ucred u;]])],ac_cv_ucred=yes,ac_cv_ucred=no)
-    if test "x$ac_cv_ucred" = xyes; then
+struct sockpeercred u;]])],ac_cv_sockpeercred=yes,ac_cv_sockpeercred=no)
+    if test "x$ac_cv_sockpeercred" = xyes; then
         EXTRA_CPPFLAGS=-D_GNU_SOURCE
     fi
 else
     old_CFLAGS="$CFLAGS"
 fi
-if test "x$ac_cv_ucred" = xno; then
+if test "x$ac_cv_sockpeercred" = xno; then
     CFLAGS="$old_CFLAGS"
     AC_MSG_RESULT(no)
 else
-    AC_DEFINE([HAVE_STRUCT_UCRED], [1], [Define to 1 if you have both SO_PEERCRED and struct ucred.])
+    AC_DEFINE([HAVE_STRUCT_SOCKPEERCRED], [1], [Define to 1 if you have both SO_PEERCRED and struct sockpeercred.])
     AC_MSG_RESULT(yes)
 fi
 
@


1.2
log
@Update to network-2.3.1.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.1 2012/11/06 21:24:16 kili Exp $
@


1.1
log
@Patch configure.ac and use CONFIGURE_STYLE and AUTOCONF_VERSION
instead of patching configure, to minize headaches for updates
of this port.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- configure.ac.orig	Tue Apr 24 05:19:39 2012
+++ configure.ac	Tue Nov  6 22:06:51 2012
@@@@ -64,16 +64,16 @@@@ AC_EGREP_HEADER(in_addr_t, netinet/in.h,
d28 1
a28 1
@@@@ -81,18 +81,18 @@@@ if test "x$ac_cv_ucred" = xno; then
@

