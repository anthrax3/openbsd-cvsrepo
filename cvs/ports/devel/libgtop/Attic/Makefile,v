head	1.33;
access;
symbols
	OPENBSD_4_1:1.31.0.2
	OPENBSD_4_1_BASE:1.31
	OPENBSD_4_0:1.26.0.2
	OPENBSD_4_0_BASE:1.26
	OPENBSD_3_9:1.25.0.2
	OPENBSD_3_9_BASE:1.25
	OPENBSD_3_8:1.21.0.4
	OPENBSD_3_8_BASE:1.21
	OPENBSD_3_7:1.21.0.2
	OPENBSD_3_7_BASE:1.21
	OPENBSD_3_6:1.19.0.2
	OPENBSD_3_6_BASE:1.19
	OPENBSD_3_5:1.17.0.4
	OPENBSD_3_5_BASE:1.17
	OPENBSD_3_4:1.17.0.2
	OPENBSD_3_4_BASE:1.17
	OPENBSD_3_3:1.16.0.2
	OPENBSD_3_3_BASE:1.16
	OPENBSD_3_2:1.14.0.2
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.11.0.2
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	libgtop_1_0_12:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2007.05.01.20.54.25;	author bernd;	state dead;
branches;
next	1.32;

1.32
date	2007.03.15.11.30.07;	author jolan;	state Exp;
branches;
next	1.31;

1.31
date	2007.02.21.17.27.53;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2006.11.11.21.04.27;	author steven;	state Exp;
branches;
next	1.29;

1.29
date	2006.10.31.10.07.43;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2006.10.31.08.41.54;	author sturm;	state Exp;
branches;
next	1.27;

1.27
date	2006.10.28.11.19.21;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2006.08.01.22.55.53;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2006.02.08.19.42.21;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2006.01.04.22.09.55;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2006.01.03.18.07.28;	author bernd;	state Exp;
branches;
next	1.22;

1.22
date	2005.12.04.12.17.47;	author alek;	state Exp;
branches;
next	1.21;

1.21
date	2004.11.23.21.34.27;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2004.09.15.19.38.49;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2004.08.10.12.42.22;	author xsa;	state Exp;
branches;
next	1.18;

1.18
date	2004.08.02.12.30.45;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2003.05.10.02.46.54;	author marcm;	state Exp;
branches;
next	1.16;

1.16
date	2002.12.03.22.45.33;	author pvalchev;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2002.12.03.19.26.34;	author nino;	state Exp;
branches;
next	1.14;

1.14
date	2002.09.20.08.15.15;	author nino;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2002.06.09.05.36.28;	author wilfried;	state Exp;
branches;
next	1.12;

1.12
date	2002.05.13.18.50.40;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2001.11.28.12.38.58;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2001.11.27.23.07.01;	author todd;	state Exp;
branches;
next	1.9;

1.9
date	2001.10.25.01.58.55;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2001.10.11.21.47.12;	author espie;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2001.10.11.21.14.43;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2001.10.07.20.55.11;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.20.18.39.13;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.09.19.14.37.49;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.14.14.41.29;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.14.13.44.46;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.13.20.45.46;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.09.13.20.45.46;	author todd;	state Exp;
branches;
next	;

1.8.2.1
date	2001.12.03.01.08.38;	author naddy;	state Exp;
branches;
next	;

1.14.2.1
date	2003.05.12.05.10.02;	author brad;	state Exp;
branches;
next	;

1.16.2.1
date	2003.05.10.23.15.45;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.33
log
@Remove some old and broken gnome-1.x stuff.

ok robert@@, sturm@@, steven@@, espie@@
@
text
@# $OpenBSD: Makefile,v 1.32 2007/03/15 11:30:07 jolan Exp $

COMMENT=		"portable library for obtaining system information"

DISTNAME=		libgtop-1.0.13
PKGNAME=		${DISTNAME}p6
SHARED_LIBS +=	gnomesupport         0.0      # .0.0
SHARED_LIBS +=	gtop_sysdeps         1.12     # .1.12
SHARED_LIBS +=	gtop_sysdeps_suid    1.12     # .1.12
SHARED_LIBS +=	gtop_common          1.12     # .1.12
SHARED_LIBS +=	gtop_suid_common     1.12     # .1.12
SHARED_LIBS +=	gtop_names           1.12     # .1.12
SHARED_LIBS +=	gtop_guile_names     1.12     # .1.12
SHARED_LIBS +=	gtop_guile           1.12     # .1.12
SHARED_LIBS +=	gtop                 1.12     # .1.12

CATEGORIES=		devel

MASTER_SITES=		${MASTER_SITE_GNOME:=sources/libgtop/1.0/}

FLAVORS= 		gnome guile
FLAVOR?=

PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c kvm Xau

CONFIGURE_STYLE= 	gnu
CONFIGURE_ARGS+= 	${CONFIGURE_SHARED}
CONFIGURE_ENV=  	CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

MODULES=		devel/gettext
LIB_DEPENDS=		glib.>=1.2::devel/glib
USE_LIBTOOL=		Yes
USE_X11=		Yes

.if ${FLAVOR:L:Mgnome}
LIB_DEPENDS+=   	gnomesupport::x11/gnome/libs
WANTLIB+=		m z
.else
CONFIGURE_ARGS+= 	--without-gnome
.endif

.if ${FLAVOR:L:Mguile}
BUILD_DEPENDS+= 	:guile-*:lang/guile
RUN_DEPENDS+= 		:guile-*:lang/guile
CONFIGURE_ARGS+=	--with-libgtop-guile=yes
WANTLIB+=		m
.else
CONFIGURE_ARGS+=	--with-libgtop-guile=no
.endif

.include <bsd.port.mk>
@


1.32
log
@remove Jim Geovedi as maintainer from all ports' Makefiles per his
request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/02/21 17:27:53 steven Exp $
@


1.31
log
@fix texinfo stuff, regen patches, rerun makesum

from Moritz Grimm <mlist at scapa.dnsalias.net>

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/11/11 21:04:27 steven Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p5
a17 2

MAINTAINER=		Jim Geovedi <jim@@corebsd.or.id>
@


1.30
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/10/31 10:07:43 espie Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p4
@


1.29
log
@unsort
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/10/31 08:41:54 sturm Exp $
d40 1
@


1.28
log
@bad espie and sort SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/10/28 11:19:21 espie Exp $
d8 2
a9 1
SHARED_LIBS +=	gtop                 1.12     # .1.12
d11 3
d15 1
a15 5
SHARED_LIBS +=	gtop_guile_names     1.12     # .1.12
SHARED_LIBS +=	gtop_names           1.12     # .1.12
SHARED_LIBS +=	gtop_suid_common     1.12     # .1.12
SHARED_LIBS +=	gtop_sysdeps         1.12     # .1.12
SHARED_LIBS +=	gtop_sysdeps_suid    1.12     # .1.12
@


1.27
log
@a few more SHARED_LIBS reformat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/08/01 22:55:53 espie Exp $
d8 6
a15 4
SHARED_LIBS +=	gtop_common          1.12     # .1.12
SHARED_LIBS +=	gtop_suid_common     1.12     # .1.12
SHARED_LIBS +=	gtop_names           1.12     # .1.12
SHARED_LIBS +=	gtop                 1.12     # .1.12
@


1.26
log
@new libspecs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/02/08 19:42:21 steven Exp $
d7 7
a13 9
SHARED_LIBS=		gtop			1.12 \
			gtop_common		1.12 \
			gtop_guile		1.12 \
			gtop_guile_names	1.12 \
			gtop_names		1.12 \
			gtop_suid_common	1.12 \
			gtop_sysdeps		1.12 \
			gtop_sysdeps_suid	1.12 \
			gnomesupport		0.0
@


1.25
log
@add missing libXau in WANTLIB, remove MODGNU_SHARED_LIBS while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/01/04 22:09:55 naddy Exp $
d38 1
a38 1
LIB_DEPENDS=		glib.1.2::devel/glib
@


1.24
log
@omitted package version bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/01/03 18:07:28 bernd Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p3
a15 9
MODGNU_SHARED_LIBS=	gtop			'' \
			gtop_common		'' \
			gtop_guile		'' \
			gtop_guile_names	'' \
			gtop_names		'' \
			gtop_suid_common	'' \
			gtop_sysdeps		'' \
			gtop_sysdeps_suid	'' \
			gnomesupport		''
d30 1
a30 1
WANTLIB=		c kvm
@


1.23
log
@- Use new SHARED_LIBS framework
- USE_LIBTOOL and bump PKGNAME where appropriate
- regen PLIST with new gettext for libgtop and libgtop2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/12/04 12:17:47 alek Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p2
@


1.22
log
@- Don't build libgtop always as static library
- Don't include bundled gettext headers
- Fix LIB_DEPENDS
- Remove HOMEPAGE that no longer exists
- USE_LIBTOOL
- Bump PKGNAME

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2004/11/23 21:34:27 espie Exp $
d7 19
@


1.21
log
@some more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2004/09/15 19:38:49 espie Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
a8 1
HOMEPAGE=		http://www.gnome.org/softwaremap/projects/libgtop/
d29 1
d32 1
a32 1
LIB_DEPENDS+=   	gnome.36,gnomesupport::x11/gnome/libs
@


1.20
log
@missed theses.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2004/08/10 12:42:22 xsa Exp $
d21 1
d33 1
d42 1
@


1.19
log
@
more new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2004/08/02 12:30:45 espie Exp $
a44 16

.if ${FLAVOR:L:Mguile}
.  if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
SED_PLIST+=-e '/%%SHARED-guile%%/d'
.  else
SED_PLIST+=-e '/%%SHARED-guile%%/r${PKGDIR}/PFRAG.shared.guile' -e '//d'
.  endif
.endif

.if !${FLAVOR:L:Mgnome}
.  if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
SED_PLIST+=-e '/%%SHARED-no-gnome%%/d'
.  else
SED_PLIST+=-e '/%%SHARED-no-gnome%%/r${PKGDIR}/PFRAG.shared.no-gnome' -e '//d'
.  endif
.endif
@


1.18
log
@NO_SHARED_LIBS always defined
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/05/10 02:46:54 marcm Exp $
d27 1
a27 1
MODULES=		gettext
@


1.17
log
@Security fix: addresses remote buffer overflow referenced here:
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2001-0928

from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/12/03 22:45:33 pvalchev Exp $
d46 4
a49 1
.if ${FLAVOR:L:Mguile} && !defined(NO_SHARED_LIBS)
d51 1
a51 2
.elif ${FLAVOR:L:Mguile}
SED_PLIST+=-e '/%%SHARED-guile%%/d'
d54 4
a57 1
.if !${FLAVOR:L:Mgnome} && !defined(NO_SHARED_LIBS)
d59 1
a59 2
.elif !${FLAVOR:L:Mgnome}
SED_PLIST+=-e '/%%SHARED-no-gnome%%/d'
@


1.16
log
@Update Jim's address in those as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/12/03 19:26:34 nino Exp $
d6 1
d9 1
a9 1
HOMEPAGE=		http://www.home-of-linux.org/gnome/libgtop/
@


1.16.2.1
log
@MFC:
Security fix: addresses remote buffer overflow referenced here:
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2001-0928
@
text
@d1 1
a1 1
# $OpenBSD$
a5 1
PKGNAME=		${DISTNAME}p1
d8 1
a8 1
HOMEPAGE=		http://www.gnome.org/softwaremap/projects/libgtop/
@


1.15
log
@Transfer maintainership to Jim Geovedi <negative@@magnesium.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/09/20 08:15:15 nino Exp $
d9 1
a9 1
MAINTAINER=		Jim Geovedi <negative@@magnesium.net>
@


1.14
log
@Update email and MASTER_SITES, zap NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/06/09 05:36:28 wilfried Exp $
d9 1
a9 1
MAINTAINER=		Nils Nordman <nino@@openbsd.org>
@


1.14.2.1
log
@MFC:
Security fix: addresses remote buffer overflow referenced here:
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2001-0928
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/09/20 08:15:15 nino Exp $
a5 1
PKGNAME=		${DISTNAME}p1
d8 1
a8 1
HOMEPAGE=		http://www.gnome.org/softwaremap/projects/libgtop/
@


1.13
log
@add specifier to RUN_DEPENDS and BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/05/13 18:50:40 espie Exp $
d4 2
a5 2
V=			1.0.13
DISTNAME=		libgtop-${V}
d7 1
a7 1
NEED_VERSION=   	1.498
d9 1
a9 1
MAINTAINER=		Nils Nordman <nino@@nforced.com>
d11 1
a11 1
MASTER_SITES=		${MASTER_SITE_GNOME:=stable/sources/libgtop/}
@


1.12
log
@Kill a few SUBDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/11/28 12:38:58 naddy Exp $
d36 2
a37 2
BUILD_DEPENDS+= 	::lang/guile
RUN_DEPENDS+= 		::lang/guile
@


1.11
log
@Oops, invert the second test for non-gnome flavor.
From maintainer Nils Nordman <nino@@nforced.com>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/11/27 23:07:01 todd Exp $
d11 1
a11 2
MASTER_SITES=		${MASTER_SITE_GNOME}
MASTER_SITE_SUBDIR= 	stable/sources/libgtop
@


1.10
log
@Security update for libgtop to libgtop-1.0.13:

The Laboratory intexxia found a remote exploitable format string
vulnerability in libgtop_daemon which could cause privilege escalation
on a remote system.

The libgtop_daemon is not running by default if you run GNOME.

New since last version:

- security fix
- update for parallel install with libgtop-2.0
+ Only install shared libraries on shared arches.

From maintainer (Nils Nordman <nino@@nforced.com>).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/10/25 01:58:55 brad Exp $
d54 1
a54 1
.elif ${FLAVOR:L:Mgnome}
@


1.9
log
@use gettext module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/10/11 21:47:12 espie Exp $
d4 1
a4 1
V=			1.0.12
d7 1
a7 1
NEED_VERSION=   	1.474
a13 4
PATCH_LIST=	${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltconfig \
		${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltmain_sh \
		patch-*

d45 12
@


1.8
log
@Fix that as a conflict between libgtop-*-!gnome and gnome-libs-*
(note that we can't write libgtop-*-!gnome as a pkgcfl, but it doesn't
matter, because the check is done at gnome-libs-* install time, at which
point libgtop-*-gnome is definitely not going to be around yet).

Thanks to naddy@@ for setting me straight.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/10/11 21:14:43 espie Exp $
d7 1
a7 1
NEED_VERSION=   	1.473
d31 2
a32 2
LIB_DEPENDS=		intl.1::devel/gettext \
			glib.1.2::devel/glib
@


1.8.2.1
log
@MFC:
Security update for libgtop to libgtop-1.0.13:
The Laboratory intexxia found a remote exploitable format string
vulnerability in libgtop_daemon which could cause privilege escalation
on a remote system.
The libgtop_daemon is not running by default if you run GNOME.

From maintainer Nils Nordman <nino@@nforced.com>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/10/11 21:47:12 espie Exp $
d4 1
a4 1
V=			1.0.13
d14 4
a48 12

.if ${FLAVOR:L:Mguile} && !defined(NO_SHARED_LIBS)
SED_PLIST+=-e '/%%SHARED-guile%%/r${PKGDIR}/PFRAG.shared.guile' -e '//d'
.elif ${FLAVOR:L:Mguile}
SED_PLIST+=-e '/%%SHARED-guile%%/d'
.endif

.if !${FLAVOR:L:Mgnome} && !defined(NO_SHARED_LIBS)
SED_PLIST+=-e '/%%SHARED-no-gnome%%/r${PKGDIR}/PFRAG.shared.no-gnome' -e '//d'
.elif !${FLAVOR:L:Mgnome}
SED_PLIST+=-e '/%%SHARED-no-gnome%%/d'
.endif
@


1.7
log
@libgtop,gnome ought to depend on gnomesupport as well.
However, it reinstall files that are part of gnome/libs,
so it's broken.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/10/07 20:55:11 naddy Exp $
a34 1
BROKEN="Package conflicts with gnome/libs"
@


1.6
log
@* Use in-tree libtool patches
* Bump NEED_VERSION
* Fix and improve CATEGORIES
Submitted by maintainer Nils Nordman <nino@@nforced.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/09/20 18:39:13 naddy Exp $
d35 2
a36 1
LIB_DEPENDS+=   	gnome.36::x11/gnome/libs
@


1.5
log
@remove gratuitous gmake dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/09/19 14:37:49 naddy Exp $
d7 1
a7 1
NEED_VERSION=   	1.455
d14 3
a16 1
LIB_DEPENDS=
d31 3
d41 2
a42 2
BUILD_DEPENDS+= 	guile::lang/guile
RUN_DEPENDS+= 		guile::lang/guile
@


1.4
log
@- fix message catalog installation
- sync libtool patches
- UVM is no longer an option
- remove useless install message
- add RCS Ids, clean up
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/09/14 14:41:29 todd Exp $
a23 1
USE_GMAKE=		Yes
@


1.3
log
@crank NEED_VERSION= because these require current
use ${HOMEPAGE} in pkg/DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/09/14 13:44:46 todd Exp $
d27 1
a27 1
CONFIGURE_ENV=  	CPPFLAGS="-I${LOCALBASE}/include -DUVM" \
a42 7

pre-fetch:
        @@echo \
        echo "  WARNING: This application requires a kernel compiled" \
        echo "  with 'option UVM' for proper operation.  The GENERIC" \
        echo "  kernel contains this option." \
        echo
@


1.2
log
@x11/gnome-libs -> x11/gnome/libs, my bad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/09/13 20:45:46 todd Exp $
d7 1
a7 1
NEED_VERSION=   	1.384
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d31 1
a31 1
LIB_DEPENDS+=   	gnome.36::x11/gnome-libs
@


1.1.1.1
log
@portable library for obtaining system information
@
text
@@
