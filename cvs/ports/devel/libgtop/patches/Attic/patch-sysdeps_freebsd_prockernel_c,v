head	1.4;
access;
symbols
	OPENBSD_4_1:1.3.0.20
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.18
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.16
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.14
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.12
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.10
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.8
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.6
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2007.05.01.20.54.25;	author bernd;	state dead;
branches;
next	1.3;

1.3
date	2002.09.11.16.45.08;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2001.11.27.23.07.02;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.29.13.01.56;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Remove some old and broken gnome-1.x stuff.

ok robert@@, sturm@@, steven@@, espie@@
@
text
@$OpenBSD: patch-sysdeps_freebsd_prockernel_c,v 1.3 2002/09/11 16:45:08 pvalchev Exp $
--- sysdeps/freebsd/prockernel.c.orig	Mon Nov 26 15:37:59 2001
+++ sysdeps/freebsd/prockernel.c	Tue Sep 10 22:31:22 2002
@@@@ -34,7 +34,7 @@@@
 #if (!defined __OpenBSD__) && (!defined __bsdi__)
 #include <sys/user.h>
 #endif
-#if !defined(__bsdi__) && !(defined(__FreeBSD__) && defined(__alpha__))
+#if !defined(__bsdi__) && !((defined(__FreeBSD__) || defined(__OpenBSD__)) && defined(__alpha__))
 #include <machine/pcb.h>
 #endif
 #if defined(__FreeBSD__) && !defined(__alpha__)
@@@@ -68,7 +68,9 @@@@ void
 glibtop_init_proc_kernel_p (glibtop *server)
 {
 	server->sysdeps.proc_kernel = _glibtop_sysdeps_proc_kernel_pstats |
+#if (!defined __OpenBSD__) || (defined __i386__)
 		_glibtop_sysdeps_proc_kernel_pcb |
+#endif			
 		_glibtop_sysdeps_proc_kernel_wchan;
 }
 
@@@@ -167,14 +169,20 @@@@ glibtop_get_proc_kernel_p (glibtop *serv
 			/*xxx FreeBSD/Alpha? */
 #endif
 #else
+#if (!defined __OpenBSD__) || (defined __i386__)
 			buf->kstk_esp = (u_int64_t) pcb.pcb_tss.tss_esp0;
+#endif		       
 #ifdef __bsdi__
 			buf->kstk_eip = (u_int64_t) pcb.pcb_tss.tss_eip;
 #else
+#if (!defined __OpenBSD__) || (defined __i386__)
 			buf->kstk_eip = (u_int64_t) pcb.pcb_tss.__tss_eip;
+#endif			
 #endif
 
+#if (!defined __OpenBSD__) || (defined __i386__)
 			buf->flags |= _glibtop_sysdeps_proc_kernel_pcb;
+#endif			
 #endif
 		}
 
@


1.3
log
@fix for alpha support; ok maintainer nino
@
text
@d1 1
a1 1
$OpenBSD: patch-sysdeps_freebsd_prockernel_c,v 1.2 2001/11/27 23:07:02 todd Exp $
@


1.2
log
@Security update for libgtop to libgtop-1.0.13:

The Laboratory intexxia found a remote exploitable format string
vulnerability in libgtop_daemon which could cause privilege escalation
on a remote system.

The libgtop_daemon is not running by default if you run GNOME.

New since last version:

- security fix
- update for parallel install with libgtop-2.0
+ Only install shared libraries on shared arches.

From maintainer (Nils Nordman <nino@@nforced.com>).
@
text
@d1 12
a12 3
$OpenBSD$
--- sysdeps/freebsd/prockernel.c.orig	Fri Sep 28 20:14:49 2001
+++ sysdeps/freebsd/prockernel.c	Fri Sep 28 20:38:18 2001
@


1.1
log
@Only provide this sysdep if we're on i386 (there's nothing wrong
with not providing it).
By maintainer Nils Nordman <nino@@nforced.com>; ok pvalchev@@
@
text
@@

