head	1.7;
access;
symbols
	OPENBSD_6_0:1.6.0.12
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.8
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.10
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.6
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.4
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.24
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.22
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.20
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.18
	OPENBSD_5_0:1.5.0.16
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.14
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.12
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.10
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.6
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.4.0.26
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.24
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.22
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.20
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.18
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.16
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.14
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.12
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.10
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.8
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.6
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.4
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3;
locks; strict;
comment	@# @;


1.7
date	2016.08.30.11.04.42;	author ajacoutot;	state dead;
branches;
next	1.6;
commitid	aQEp5GDnFHOpYQFR;

1.6
date	2013.11.03.07.52.01;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2007.12.11.10.57.25;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2001.10.06.03.46.35;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2001.04.03.14.42.48;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.07.22.51.24;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2001.02.19.20.34.47;	author danh;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Remove glib1.
As jasper puts it, "we no longer party like it's 1998".

ok jasper@@
@
text
@$OpenBSD: patch-configure,v 1.6 2013/11/03 07:52:01 ajacoutot Exp $
--- configure.orig	Thu Mar 15 07:44:01 2001
+++ configure	Sun Oct 21 01:39:52 2007
@@@@ -4385,6 +4385,13 @@@@ else
 fi
 
 fi
+
+if test "x`uname -s`" = "xOpenBSD" -a "x$enable_shared" = "xyes"; then
+  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+    G_MODULE_LDFLAGS="-Wl,-E"
+  fi
+fi
+
 if test "$G_MODULE_IMPL" = "G_MODULE_IMPL_DL"; then
 	case "$host_os" in
 	  linux*)
@@@@ -5183,6 +5190,13 @@@@ G_THREAD_CFLAGS="$G_THREAD_CFLAGS -D_REENTRANT" # good
 		# FreeBSD 2.2.x shiped with gcc 2.7.2.x, which doesn't support
 		# -mthreads flag.
 		;;
+	*-openbsd*)
+		G_THREAD_CFLAGS="$G_THREAD_CFLAGS -D_THREAD_SAFE"
+		  if test "x$G_THREAD_LIBS" = "x-lc_r" -o \
+			"x$G_THREAD_LIBS" = "x-lpthread" ; then
+		    G_THREAD_LIBS="-lpthread"
+		  fi
+		;;
     esac
 
     # if we are not finding the ctime_r function, then we probably are
@@@@ -5468,8 +5482,6 @@@@ EOF
 
 
 
-
-CFLAGS="$CFLAGS $G_THREAD_CFLAGS"
 
 
         case "$mutex_has_default" in
@


1.6
log
@No need for /-lpthread/-pthread
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.5 2007/12/11 10:57:25 jakemsr Exp $
@


1.5
log
@use -pthread instead of -lpthread for pthread linkage

bulk build tested by steven@@

sync w/update-patches while here
@
text
@d1 1
a1 1
$OpenBSD$
d26 1
a26 1
+		    G_THREAD_LIBS="-pthread"
@


1.4
log
@pthreads related fixes.
@
text
@d1 3
a3 2
--- configure.orig	Thu Mar 15 10:44:01 2001
+++ configure	Mon Oct  1 21:52:58 2001
d18 1
a18 1
@@@@ -5183,6 +5190,12 @@@@ G_THREAD_CFLAGS="$G_THREAD_CFLAGS -D_REE
d24 2
a25 1
+		  if test "x$G_THREAD_LIBS" = "x-lc_r"; then
d32 1
a32 1
@@@@ -5468,8 +5481,6 @@@@ EOF
@


1.3
log
@upgrade to glib 1.2.10
@
text
@a0 1
$OpenBSD: patch-configure,v 1.2 2001/03/07 22:51:24 brad Exp $
d2 2
a3 2
+++ configure	Tue Apr  3 10:18:32 2001
@@@@ -4911,7 +4911,7 @@@@ LIBS="$ac_save_LIBS"
d5 1
a5 6
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  G_THREAD_LIBS="-lc_r"
+  G_THREAD_LIBS="-pthread"
 else
   echo "$ac_t""no" 1>&6
d7 32
@


1.2
log
@upgrade to glib 1.2.9

!!NOTE!!: header files for glib have changed locations so this WILL cause
breakage.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1 2001/02/19 20:34:47 danh Exp $
--- configure.orig	Wed Feb 28 16:57:36 2001
+++ configure	Tue Mar  6 12:56:09 2001
@@@@ -4910,7 +4910,7 @@@@
@


1.1
log
@rename patches; sync with libtool
@
text
@d1 4
a4 4
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
--- configure.orig	Wed May 24 20:30:06 2000
+++ configure	Mon Feb 19 15:32:17 2001
@@@@ -4836,7 +4836,7 @@@@ LIBS="$ac_save_LIBS"
@

