head	1.3;
access;
symbols
	OPENBSD_6_1:1.2.0.20
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.18
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.14
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.16
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.12
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.10
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.8
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.6
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.08.03.14.39.39;	author sthen;	state Exp;
branches;
next	1.2;
commitid	BCiGtlDxXYmSuuAC;

1.2
date	2012.05.01.15.25.26;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.08.11.32.17;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to nasm-2.13.01, from Brad
(needed for an x264 update, nothing depends on this currently)
@
text
@$OpenBSD: patch-doc_Makefile_in,v 1.2 2012/05/01 15:25:26 ajacoutot Exp $
Index: doc/Makefile.in
--- doc/Makefile.in.orig
+++ doc/Makefile.in
@@@@ -9,7 +9,7 @@@@ prefix		= @@prefix@@
 exec_prefix	= @@exec_prefix@@
 bindir		= @@bindir@@
 mandir		= @@mandir@@
-docdir		= $(prefix)/doc/nasm
+docdir		= $(prefix)/share/doc/nasm
 infodir		= @@infodir@@
 datarootdir	= @@datarootdir@@
 
@@@@ -24,13 +24,13 @@@@ PDFOPT		= @@PDFOPT@@
 RM_F		= rm -f
 RM_RF		= rm -rf
 CP_F		= cp -f
-CP_UF		= cp -ufv
+CP_UF		= cp -fv
 
 # Auxiliary files referenced by the HTML files
 HTMLAUX		= nasmdoc.css local.css nasmlogw.png
 
 SRCS		= nasmdoc.src inslist.src changes.src version.src
-OUT		= html nasmdoc.txt nasmdoc.pdf
+OUT		= html nasmdoc.txt # nasmdoc.pdf
 
 .SUFFIXES: .pfa .ph
 
@@@@ -71,7 +71,6 @@@@ nasmdoc.pdf: nasmdoc.ps pspdf.pl
 	$(PERL) $(srcdir)/pspdf.pl $(PDFOPT) nasmdoc.ps nasmdoc.pdf
 
 clean:
-	-$(RM_F) *.rtf *.hpj *.texi *.gid *.ipf *.dip
 	-$(RM_F) *.aux *.cp *.fn *.ky *.pg *.log *.toc *.tp *.vr
 	-$(RM_F) inslist.src version.src
 	-$(RM_F) nasmdoc*.ps
@@@@ -83,4 +82,4 @@@@ spotless: clean
 install: all
 	mkdir -p $(INSTALLROOT)$(docdir)/html
 	$(INSTALL_DATA) html/* $(INSTALLROOT)$(docdir)/html
-	$(INSTALL_DATA) nasmdoc.pdf nasmdoc.txt $(INSTALLROOT)$(docdir)
+	$(INSTALL_DATA) internal.doc nasmdoc.txt $(INSTALLROOT)$(docdir)
@


1.2
log
@Update to nasm 2.10.

Bulk testing by sthen@@
from Brad, ok maintainer
@
text
@d1 5
a5 4
$OpenBSD: patch-doc_Makefile_in,v 1.1 2011/07/08 11:32:17 jasper Exp $
--- doc/Makefile.in.orig	Mon Mar 12 16:44:04 2012
+++ doc/Makefile.in	Wed Apr 25 16:26:57 2012
@@@@ -8,7 +8,7 @@@@ prefix		= @@prefix@@
d14 13
a26 2
@@@@ -27,12 +27,8 @@@@ PSTOPDF		= @@PSTOPDF@@		# BSD/MacOS X utility
 PS2PDF          = @@PS2PDF@@		# Part of GhostScript
d28 4
a31 52
 SRCS		= nasmdoc.src inslist.src changes.src
-OUT		= info html nasmdoc.txt nasmdoc.ps nasmdoc.pdf
+OUT		= info html nasmdoc.txt # nasmdoc.ps nasmdoc.pdf
 
-# exports
-export srcdir
-export PERL
-
 all: $(OUT)
 
 os2: nasm.inf
@@@@ -45,17 +41,17 @@@@ html: html/nasmdoc0.html
 
 html/nasmdoc0.html: $(SRCS) rdsrc.pl
 	mkdir -p html
-	$(PERL) $(srcdir)/rdsrc.pl html < $<
+	$(PERL) $(srcdir)/rdsrc.pl html < $(srcdir)/nasmdoc.src
 	mv -f *.html html
 
 nasmdoc.dip: $(SRCS) rdsrc.pl
-	$(PERL) $(srcdir)/rdsrc.pl dip < $<
+	$(PERL) $(srcdir)/rdsrc.pl dip < $(srcdir)/nasmdoc.src
 
 nasmdoc.texi: $(SRCS) rdsrc.pl
-	$(PERL) $(srcdir)/rdsrc.pl texi < $<
+	$(PERL) $(srcdir)/rdsrc.pl texi < $(srcdir)/nasmdoc.src
 
 nasmdoc.txt: $(SRCS) rdsrc.pl
-	$(PERL) $(srcdir)/rdsrc.pl txt < $<
+	$(PERL) $(srcdir)/rdsrc.pl txt < $(srcdir)/nasmdoc.src
 
 nasmdoc.ps: nasmdoc.dip nasmlogo.eps $(srcdir)/../version genpsdriver.pl \
 	    genps.pl psfonts.ph pswidth.ph head.ps
@@@@ -71,7 +67,7 @@@@ info: info/nasm.info
 
 info/nasm.info: nasmdoc.texi
 	mkdir -p info
-	$(MAKEINFO) $<
+	$(MAKEINFO) $?
 	mv -f *.info *.info-* info
 
 # DVI output from texinfo (optional)
@@@@ -80,13 +76,12 @@@@ nasmdoc.dvi: nasmdoc.texi
 
 # Rules for building an OS/2 book
 nasmdoc.ipf: nasmdoc.texi
-	$(TEXI2IPF) $< >$@@
+	$(TEXI2IPF) $? >$@@
 
 nasm.inf: nasmdoc.ipf
-	$(IPFC) -i -s $< $@@
+	$(IPFC) -i -s $? $@@
d34 6
a39 6
-	-rm -f *.rtf *.hpj *.texi *.gid *.ipf *.dip
 	-rm -f *.aux *.cp *.fn *.ky *.pg *.log *.toc *.tp *.vr
 	-rm -f inslist.src
 
@@@@ -100,4 +95,4 @@@@ install: all
 	$(INSTALL_DATA) info/* $(INSTALLROOT)$(infodir)
d42 1
a42 1
-	$(INSTALL_DATA) nasmdoc.ps nasmdoc.pdf nasmdoc.txt $(INSTALLROOT)$(docdir)
@


1.1
log
@- fix patch names, no binary change
@
text
@d1 3
a3 3
$OpenBSD$
--- doc/Makefile.in.orig	Wed Mar 10 23:24:07 2010
+++ doc/Makefile.in	Fri Jul  8 13:28:21 2011
d72 1
d74 1
a74 2
 spotless: clean
@@@@ -99,4 +94,4 @@@@ install: all
@

