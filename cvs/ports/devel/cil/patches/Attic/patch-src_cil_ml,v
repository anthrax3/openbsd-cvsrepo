head	1.3;
access;
symbols
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2005.10.16.15.52.31;	author avsm;	state dead;
branches;
next	1.2;

1.2
date	2005.10.08.08.06.52;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.27.06.31.52;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- remove patch that is duplicated in distro
- trim configure patch for dup
- bump PKGNAME
From <andreas@@zzlevo.net>
@
text
@$OpenBSD: patch-src_cil_ml,v 1.2 2005/10/08 08:06:52 pvalchev Exp $
--- src/cil.ml.orig	Wed Jun  1 06:37:13 2005
+++ src/cil.ml	Sat Oct  8 02:22:14 2005
@@@@ -2566,6 +2566,7 @@@@ let gccBuiltins : (string, typ * typ lis
   (* When we parse builtin_next_arg we drop the second argument *)
   H.add h "__builtin_next_arg" 
     ((if hasbva then TBuiltin_va_list [] else voidPtrType), [], false);
+  H.add h "__builtin_frame_address" (voidPtrType, [ uintType ], false);
   H.add h "__builtin_alloca" (voidPtrType, [ uintType ], false);
   H.add h "__builtin_constant_p" (intType, [ intType ], false);
   H.add h "__builtin_expect" (longType, [ longType; longType ], false);
@


1.2
log
@sync patches (linenumbers)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cil_ml,v 1.1 2005/05/27 06:31:52 avsm Exp $
@


1.1
log
@Add a 'kernel function call tracer' to automatically insert a call to
log() to certain functions in the kernel to help debugging.

An example use when building a kernel would be:
$ make CC='/usr/local/bin/cilly --trace-regexp=^cache_ --trace-level=0'
to instrument all functions starting with cache_* to notify syslog at
emergency log level.  The output also includes the contents of any
char/int/long arguments (pointers and structs not followed yet, too
verbose).

A full kernel build doesnt quite work with CIL yet so use selectively.
@
text
@d1 4
a4 4
$OpenBSD$
--- src/cil.ml.orig	Thu May 26 08:47:56 2005
+++ src/cil.ml	Thu May 26 08:48:27 2005
@@@@ -1979,6 +1979,7 @@@@ let gccBuiltins : (string, typ * typ lis
@

