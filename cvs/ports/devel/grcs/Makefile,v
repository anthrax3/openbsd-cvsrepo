head	1.11;
access;
symbols
	OPENBSD_6_1:1.9.0.4
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.9.0.2
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.6.0.10
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.12
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.8
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.6
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.4
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.5.0.10
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.8
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.6
	OPENBSD_5_0:1.5.0.4
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.3.0.12
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jolan_20060528:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2017.06.05.19.44.26;	author schwarze;	state Exp;
branches;
next	1.10;
commitid	1pQBXS8X52cdWV3e;

1.10
date	2017.06.04.00.26.16;	author schwarze;	state Exp;
branches;
next	1.9;
commitid	5XjVTQzGvS0g3IzF;

1.9
date	2016.04.12.15.13.43;	author naddy;	state Exp;
branches;
next	1.8;
commitid	iT9iPktpO8me2jQ8;

1.8
date	2016.03.19.13.02.48;	author bluhm;	state Exp;
branches;
next	1.7;
commitid	j1J1p6ajDmZBDw8E;

1.7
date	2016.03.05.14.30.47;	author rpe;	state Exp;
branches;
next	1.6;
commitid	2pb0Pj23pimhlhsB;

1.6
date	2013.03.11.10.50.06;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.15.19.45.58;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.18.17.47.53;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2007.09.16.02.52.59;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2006.09.25.23.23.10;	author ray;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.28.07.03.39;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.05.28.07.03.39;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.11
log
@BUILD_DEPENDS += textproc/groff
because soelim(1) is used at build time.
No bump needed because *if* it built, the package was correct.
Problem reported and patch OK'ed by naddy@@.
@
text
@# $OpenBSD: Makefile,v 1.10 2017/06/04 00:26:16 schwarze Exp $

COMMENT=	GNU versions of the rcs utilities

DISTNAME=	rcs-5.9.4
PKGNAME=	g${DISTNAME}
REVISION=	3

CATEGORIES=	devel

HOMEPAGE=	https://www.gnu.org/software/rcs/

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c

MASTER_SITES=	${MASTER_SITE_GNU:=rcs/}
EXTRACT_SUFX=	.tar.xz

RUN_DEPENDS=	textproc/gdiff
BUILD_DEPENDS=	textproc/gdiff

# Uses soelim(1) and pic(1) for preprocessing at build time,
# but the resulting man(7) manuals work with mandoc(1),
# so USE_GROFF is not needed.
BUILD_DEPENDS+=	textproc/groff

USE_GMAKE=	Yes

CONFIGURE_STYLE=autoconf
AUTOCONF_VERSION=2.69
CONFIGURE_ARGS= --program-prefix=g
CONFIGURE_ENV=  CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		DIFF="${LOCALBASE}/bin/gdiff" \
		DIFF3="${LOCALBASE}/bin/gdiff3"
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/build-aux

pre-install:
.for f in ci co rcsclean rcsdiff rcsmerge rlog
	sed -i 's/d"rcs/d"grcs/' ${WRKSRC}/src/${f}
.endfor

# handle --program-prefix: The tests use the commands in ${WRKSRC}/src without
# prefix but the wrapper scripts like gci call the command with the prefix.
pre-test:
.for f in ci co ident merge rcs rcsclean rcsdiff rcsmerge rlog
	ln -fs ${WRKSRC}/src/$f ${WRKSRC}/src/g$f
.endfor

.include <bsd.port.mk>
@


1.10
log
@mandoc groks .ec and .eo now; drop USE_GROFF and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/04/12 15:13:43 naddy Exp $
d23 5
@


1.9
log
@drop gettext module, there is no NLS support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/03/19 13:02:48 bluhm Exp $
d7 1
a7 1
REVISION=	2
a23 1
USE_GROFF=	Yes
@


1.8
log
@In the new GNU RCS port the checkout during grcsdiff failed because
it cannot find a /usr/local/bin/rcs binary.  The peer_super struct
is used to locate the grcs binary for various operations.  So patch
the "g" prefix there.
OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/03/05 14:30:47 rpe Exp $
d7 1
a7 1
REVISION=	1
a26 2
MODULES=	devel/gettext

d34 1
@


1.7
log
@Update grcs to version 5.9.4

- switch HOME_PAGE and MASTER_SITES to www.gnu.org
- update license info
- add dependencies to devel/gdiff
- use CONFIGURE_STYLE=autoconf to ensure gdiff and gdiff3 are use
- add pre-install target to ensure the g* commands are used in the wrapper scripts
- ensure that tests find g* commands

feedback and OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/11 10:50:06 espie Exp $
d7 1
@


1.6
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/15 19:45:58 espie Exp $
d4 2
a5 1
DISTNAME=	rcs-5.7
d7 1
a7 2
REVISION =	0
EXTRACT_SUFX=	.tar.Z
a8 1
MASTER_SITES=	${HOMEPAGE}
d10 1
a10 1
HOMEPAGE=	http://www.cs.purdue.edu/homes/trinkle/RCS/
d12 1
a12 1
# GPL
d17 5
a21 2
USE_GROFF =	Yes
NO_TEST=	Yes
d23 2
a24 1
CONFIGURE_STYLE=simple
d26 18
a43 1
do-install:
d45 1
a45 2
	${INSTALL_PROGRAM} ${WRKSRC}/src/${f} ${PREFIX}/bin/g${f}
	${INSTALL_MAN} ${WRKSRC}/man/${f}.1 ${PREFIX}/man/man1/g${f}.1
@


1.5
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/10/18 17:47:53 espie Exp $
a13 1
PERMIT_PACKAGE_FTP=	Yes
a14 2
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
d19 1
a19 1
NO_REGRESS=	Yes
@


1.4
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/09/16 02:52:59 merdely Exp $
d5 2
a6 1
PKGNAME=	g${DISTNAME}p0
@


1.3
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/09/25 23:23:10 ray Exp $
d20 1
@


1.2
log
@Use /usr/local/bin/g{co,merge} and /usr/bin/diff{,3} instead of the
(possibly nonexistent) /usr/local/bin/{co,merge,diff,diff3} programs.

OK jolan@@ and pval@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/05/28 07:03:39 jolan Exp $
d3 1
a3 1
COMMENT=	"GNU versions of the rcs utilities"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
PKGNAME=	g${DISTNAME}
@


1.1.1.1
log
@rcs-5.7, GNU versions of the rcs utilities

requested by ray@@
@
text
@@
