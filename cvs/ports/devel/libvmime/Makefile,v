head	1.28;
access;
symbols
	OPENBSD_6_1:1.28.0.2
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.24.0.2
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.22.0.4
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.13.0.2
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.4
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.6.0.4
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	ajacoutot_20081009:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2017.02.18.17.33.51;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	kjw4RQ4AAUYktD89;

1.27
date	2017.02.18.17.32.37;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	bw6Y0vDo3oixdVWL;

1.26
date	2016.07.09.08.57.11;	author sthen;	state Exp;
branches;
next	1.25;
commitid	uxbjHaVdG1wkV1Fx;

1.25
date	2016.03.11.19.59.13;	author naddy;	state Exp;
branches;
next	1.24;
commitid	pguKLBEFv33DrgKU;

1.24
date	2015.07.19.20.57.43;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	OMbc0BvceXtyM6Sx;

1.23
date	2015.03.16.18.07.43;	author naddy;	state Exp;
branches;
next	1.22;
commitid	IJdm3Zowcdkcxp5X;

1.22
date	2014.03.13.22.03.37;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2013.11.06.13.40.33;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2013.11.03.07.52.01;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.21.08.45.16;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.10.50.11;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.01.27.13.07.10;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2012.10.08.10.39.24;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.08.25.14.45.08;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2012.08.06.17.47.57;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2012.07.12.16.31.00;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2012.07.09.15.25.57;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.06.14.22.29.15;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.05.04.12.52.50;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.04.15.16.13.23;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.15.19.46.00;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.08.09.57.40;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2009.10.11.13.18.36;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.11.06.19.12.24;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.04.15.35.56;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.27.22.03.40;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.27.20.59.33;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.09.15.16.03;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.10.09.15.16.03;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Missed bump.
@
text
@# $OpenBSD: Makefile,v 1.27 2017/02/18 17:32:37 ajacoutot Exp $

COMMENT=	C++ class library for working with Internet mail

VMIME_V=	0.9.2
DISTNAME=	libvmime-${VMIME_V}+svn603
EXTRACT_SUFX=	.tar.bz2

PKGNAME=	libvmime-${VMIME_V}
REVISION=	8

SHARED_LIBS+=  vmime    2.0     # 0.0

### needed for mail/zarafa (FLAVOR is possible if needed in the future)
#MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=vmime/}
MASTER_SITES_ZARAFA=http://download.zarafa.com/community/final/7.1/7.1.7-42779/sourcecode/
MASTER_SITES=	${MASTER_SITES_ZARAFA}
MASTER_SITES0=	${MASTER_SITES_ZARAFA:=/vmime-patches/}
PATCH_DIST_STRIP= -p1
PATCHFILES= \
	vmime-0.9.2-header-value-on-next-line.diff:0 \
	vmime-0.9.2-phf-stop-on-whitespace.diff:0 \
	vmime-0.9.2-qp-in-buffers.diff:0 \
	vmime-mixed-qp-in-parameter.diff:0
###

CATEGORIES=	devel mail

HOMEPAGE=	http://www.vmime.org/

MAINTAINER=	Robert Nagy <robert@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ffi gmp gnutls hogweed idn2 m nettle p11-kit pthread stdc++
WANTLIB += tasn1 z

MODULES=	devel/gettext

WRKDIST=	${WRKDIR}/libvmime-${VMIME_V}

# our old gcc is <cxx0x; so "-pedantic" warnings are turned into errors
CFLAGS +=	-fpermissive

USE_GMAKE=	Yes

BUILD_DEPENDS=	archivers/bzip2
LIB_DEPENDS=	security/gnutls

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		EXTRA_CFLAGS="${CFLAGS}"

# security/libgsasl; not real need for this so far
CONFIGURE_ARGS += --disable-sasl

.include <bsd.port.mk>
@


1.27
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/07/09 08:57:11 sthen Exp $
d10 1
a10 1
REVISION=	7
@


1.26
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/03/11 19:59:13 naddy Exp $
d36 1
a36 1
WANTLIB += ffi gmp gnutls hogweed idn m nettle p11-kit pthread stdc++
@


1.25
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/07/19 20:57:43 ajacoutot Exp $
d10 1
a10 1
REVISION=	6
d36 1
a36 1
WANTLIB += ffi gmp gnutls hogweed m nettle p11-kit pthread stdc++
@


1.24
log
@Enable tls, it seems to work fine now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/03/16 18:07:43 naddy Exp $
a54 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
@


1.23
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/03/13 22:03:37 ajacoutot Exp $
d10 1
a10 1
REVISION=	5
d36 4
a39 1
WANTLIB += m stdc++
d49 1
a58 4

# XXX www/apache-httpd crashes with php-mapi from mail/zarafa/zarafa,-webaccess
# /usr/local/lib/libvmime.so.2.0: undefined symbol '_ZN5vmime3net12serviceInfosD2Ev
CONFIGURE_ARGS += --disable-tls
@


1.22
log
@Fix comment, no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/11/06 13:40:33 ajacoutot Exp $
d10 1
a10 1
REVISION=	4
@


1.21
log
@Sync with zarafa.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/11/03 07:52:01 ajacoutot Exp $
d56 2
a57 2
# XXX Apache crashes with php-mapi from mail/zarafa/zarafa,-webaccess
# /usr/sbin/httpd:/usr/local/lib/libvmime.so.2.0: undefined symbol '_ZN5vmime3net12serviceInfosD2Ev'
@


1.20
log
@No need for /-lpthread/-pthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/21 08:45:16 ajacoutot Exp $
d16 1
a16 1
MASTER_SITES_ZARAFA=http://download.zarafa.com/community/final/7.1/7.1.3-40304/sourcecode/
@


1.19
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 10:50:11 espie Exp $
d10 1
a10 1
REVISION=	3
a58 4

pre-configure:
	perl -pi -e 's,-l\$${ost_cv_thread_library},-\$${ost_cv_thread_library},g;' \
		-e 's,-lpthread,-pthread,g' ${WRKSRC}/configure
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/01/27 13:07:10 robert Exp $
a42 1
USE_LIBTOOL=	Yes
@


1.17
log
@add the latest libvmime patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/10/08 10:39:24 ajacoutot Exp $
a34 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.16
log
@Offer this to robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/08/25 14:45:08 ajacoutot Exp $
d10 1
a10 1
REVISION=	2
d16 1
a16 1
MASTER_SITES_ZARAFA=http://download.zarafa.com/community/final/7.1/7.1.0-36420/sourcecode/
d22 1
@


1.15
log
@Change MASTER_SITES_ZARAFA.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/08/06 17:47:57 ajacoutot Exp $
d10 1
a10 1
REVISION=	1
d30 1
a30 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@bsdfrog.org>
@


1.14
log
@Disable tls for now has it triggers a crash in httpd(8) with the php-mapi
module.

crash reported by viq at viq dot im
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/07/12 16:31:00 ajacoutot Exp $
d16 1
a16 1
MASTER_SITES_ZARAFA=http://download.zarafa.com/community/final/7.0/7.0.8-35178/sourcecode/
@


1.13
log
@We actually have security/libgsasl.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/07/09 15:25:57 ajacoutot Exp $
d10 1
a10 1
REVISION=	0
d38 1
a38 3
WANTLIB += gmp gnutls hogweed m nettle p11-kit stdc++ tasn1 z

MODULES=	devel/gettext
a48 1
LIB_DEPENDS=	security/gnutls
d58 4
@


1.12
log
@Update to libvmime-0.9.2 by merging mail/zarafa/libvmime.
It works much better with the new gnutls.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/09/29 17:12:11 ajacoutot Exp $
d59 1
a59 1
# SASL support needs GNU SASL
@


1.11
log
@Missing BUILD_DEPENDS, spotted by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/05/04 12:52:50 ajacoutot Exp $
d5 8
a12 2
DISTNAME=	libvmime-0.9.1
CATEGORIES=	devel mail
d14 11
a24 1
SHARED_LIBS+=	vmime	1.0	# .0.0
d26 1
a26 1
EXTRACT_SUFX=	.tar.bz2
d30 3
a32 1
# GPLv2
d38 1
a38 3
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=vmime/}

WANTLIB += gmp gnutls hogweed m nettle stdc++ tasn1 z
d42 1
a42 2
# "#include <gcrypt.h>" in src/net/tls/TLSSession.cpp
BUILD_DEPENDS=	security/libgcrypt
d44 2
a45 1
LIB_DEPENDS=	security/gnutls
d50 3
d57 1
a57 8
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--enable-tls \
		--enable-messaging-proto-pop3 \
		--enable-messaging-proto-smtp \
		--enable-messaging-proto-imap \
		--enable-messaging-proto-maildir \
		--enable-messaging-proto-sendmail \
		--enable-platform-posix
d60 5
a64 1
CONFIGURE_ARGS+= --disable-sasl
@


1.10
log
@Update to libvmime-0.9.1 and drop maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/04/15 16:13:23 ajacoutot Exp $
d25 3
@


1.9
log
@Fix build after gnutls update.

ok jasper@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/15 19:46:00 espie Exp $
d5 1
a5 2
DISTNAME=	libvmime-0.9.0
REVISION =	2
a12 2

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.8
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/08 09:57:40 espie Exp $
d6 1
a6 1
REVISION =	1
d25 1
a25 1
WANTLIB=	gcrypt gpg-error tasn1 z gnutls>=14
a48 4

# XXX check on update whether this is still necessary
post-extract:
	${INSTALL} -m 555 ${FILESDIR}/libgnutls-config ${WRKDIR}/bin
@


1.7
log
@kill a few libspecs in LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/10/11 13:18:36 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d25 1
a25 1
WANTLIB=	gcrypt gpg-error tasn1 z gnutls.>=14
d29 1
a29 1
LIB_DEPENDS=	::security/gnutls
@


1.6
log
@Provide a minimal libgnutls-config script to unbreak with newer gnutls.

breakapge reported by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/11/06 19:12:24 sturm Exp $
d25 1
a25 1
WANTLIB=	gcrypt gpg-error tasn1 z
d29 1
a29 1
LIB_DEPENDS=	gnutls.>=14::security/gnutls
@


1.5
log
@fix build on sparc64

ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/11/04 15:35:56 ajacoutot Exp $
d49 4
@


1.4
log
@- s/lpthread/pthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/10/27 22:03:40 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.3
log
@- update to libvmime-0.9.0
somehow I missed this new version, reminded by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/10/27 20:59:33 ajacoutot Exp $
d6 1
@


1.2
log
@- fix build with latest gnutls
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/10/09 15:16:03 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	libvmime-0.8.1
PKGNAME=	${DISTNAME}p0
d8 1
a8 1
SHARED_LIBS+=	vmime	0.0	# .0.0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d25 1
a25 1
WANTLIB=	gcrypt gpg-error z
d29 1
a29 1
LIB_DEPENDS=	gnutls.>=13::security/gnutls
@


1.1.1.1
log
@Import libvmime-0.8.1

VMime is a powerful C++ class library for working with MIME messages and
Internet messaging services like IMAP, POP or SMTP.  With VMime you can
parse, generate and modify messages, and also connect to store and
transport services to receive or send messages over the Internet.  The
library offers all the features to build a complete mail client.

<...>

feedback from and ok landry@@
@
text
@@
