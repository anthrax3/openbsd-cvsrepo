head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_0:1.1.1.1.0.6
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.4
	OPENBSD_5_8_BASE:1.1.1.1
	jca_20150412:1.1.1.1
	jca:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2015.04.12.15.02.32;	author jca;	state Exp;
branches
	1.1.1.1;
next	;
commitid	gaWyZZN6GvqLVigg;

1.1.1.1
date	2015.04.12.15.02.32;	author jca;	state Exp;
branches;
next	;
commitid	gaWyZZN6GvqLVigg;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$

XXX not portable, but used by tests only.

--- tests/common/thread-id.h.orig	Tue Nov  4 16:04:53 2014
+++ tests/common/thread-id.h	Fri Apr  3 00:47:51 2015
@@@@ -43,6 +43,14 @@@@ unsigned long urcu_get_thread_id(void)
 {
 	return (unsigned long) pthread_getthreadid_np();
 }
+#elif defined(__OpenBSD__)
+# include <unistd.h>
+
+static inline
+unsigned long urcu_get_thread_id(void)
+{
+	return (unsigned long) getthrid();
+}
 #else
 # warning "use pid as thread ID"
 static inline
@


1.1.1.1
log
@Import liburcu, needed for the upcoming net/knot port.

Feedback from landry@@ and sthen@@, ok sthen@@
@
text
@@
