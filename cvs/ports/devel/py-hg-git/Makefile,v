head	1.25;
access;
symbols
	OPENBSD_6_1:1.24.0.2
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.23.0.2
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.14.0.2
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.13.0.2
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	millert_2010_Sep-03:1.1.1.1
	millert:1.1.1;
locks; strict;
comment	@# @;


1.25
date	2017.05.03.23.03.44;	author juanfra;	state Exp;
branches;
next	1.24;
commitid	YA0wjg5m0Wtd16Dj;

1.24
date	2016.10.09.00.42.14;	author czarkoff;	state Exp;
branches;
next	1.23;
commitid	o4Wu95SdwH2gdj7u;

1.23
date	2016.06.14.10.01.31;	author czarkoff;	state Exp;
branches;
next	1.22;
commitid	IYKnLqnvTJULpUzm;

1.22
date	2016.01.18.21.58.51;	author czarkoff;	state Exp;
branches;
next	1.21;
commitid	5aEyAf7fOwAXiZbt;

1.21
date	2016.01.11.11.04.21;	author czarkoff;	state Exp;
branches;
next	1.20;
commitid	yrIwsaxKHXO81ltZ;

1.20
date	2015.12.21.22.16.10;	author czarkoff;	state Exp;
branches;
next	1.19;
commitid	E16fINuKlNEV3Krm;

1.19
date	2015.09.29.10.51.54;	author sthen;	state Exp;
branches;
next	1.18;
commitid	NBCOrQyZLwl2eNgm;

1.18
date	2015.09.23.07.18.21;	author czarkoff;	state Exp;
branches;
next	1.17;
commitid	uvMTOUGOg8dYdzin;

1.17
date	2015.03.18.18.04.55;	author czarkoff;	state Exp;
branches;
next	1.16;
commitid	AA6f4DNsqv2ICzM1;

1.16
date	2015.01.12.08.02.55;	author benoit;	state Exp;
branches;
next	1.15;
commitid	9hPR1yMGv5nZeGCD;

1.15
date	2014.10.12.21.00.13;	author juanfra;	state Exp;
branches;
next	1.14;
commitid	VAJrbNXAW6O04SBA;

1.14
date	2014.03.25.16.19.15;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2013.10.03.16.37.16;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2013.09.05.11.20.20;	author edd;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.11.10.50.25;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2013.01.04.01.30.47;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2012.06.26.07.26.41;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2011.09.16.09.24.55;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2011.06.08.17.39.25;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2010.12.07.23.08.03;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.15.19.46.07;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.17.01.42.59;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2010.09.14.15.11.22;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.09.14.14.47.59;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.03.18.26.56;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.09.03.18.26.56;	author millert;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Update to hg-git 0.8.6. Fix the problem with https:// repos after the
update to mercurial 4.1 and 4.2. Maintainer timeout.
@
text
@# $OpenBSD: Makefile,v 1.24 2016/10/09 00:42:14 czarkoff Exp $

COMMENT =		mercurial extension to work with git repositories

MODPY_EGG_VERSION =	0.8.6
DISTNAME =		${MODPY_PY_PREFIX}hg-git-${MODPY_EGG_VERSION}

CATEGORIES =		devel

HOMEPAGE =		https://bitbucket.org/durin42/hg-git

MAINTAINER =		Dmitrij D. Czarkoff <czarkoff@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		https://bitbucket.org/durin42/hg-git/get/
DISTFILES =		${DISTNAME}{${MODPY_EGG_VERSION}}${EXTRACT_SUFX}

MODULES =		lang/python
MODPY_SETUPTOOLS =	Yes

RUN_DEPENDS =		devel/py-dulwich>=0.10.1 \
			devel/mercurial
TEST_DEPENDS =		${RUN_DEPENDS} \
			archivers/bzip2 \
			archivers/unzip \
			devel/git,-main

# Instead of updating WRKDIST manually on every update, just move the directory
post-extract:
	@@mv ${WRKDIR}/durin42-hg-git-???????????? ${WRKDIST}

do-test:
	cd ${WRKSRC}/tests && ${SETENV} ${MAKE_ENV} PYTHONPATH="${WRKSRC}" \
	    ${MODPY_BIN} run-tests.py --with-hg=${LOCALBASE}/bin/hg

.include <bsd.port.mk>
@


1.24
log
@unclutter test target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/06/14 10:01:31 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.5
@


1.23
log
@update to py-hg-git 0.8.5

apply patch from upstream to unbreak after mercurial-3.8.3 update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/01/18 21:58:51 czarkoff Exp $
a27 1
			devel/py-nose \
a32 3

pre-test:
	ln -s ${MODPY_BIN} ${WRKDIR}/bin/python
@


1.22
log
@update to py-hg-git-0.8.4

Also, update website and change workaround for weird auto-generated directory
name in archives from bitbucket.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/01/11 11:04:21 czarkoff Exp $
d5 2
a6 2
MODPY_EGG_VERSION =	0.8.4
DISTNAME =		py-hg-git-${MODPY_EGG_VERSION}
@


1.21
log
@change my email address
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/12/21 22:16:10 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.3
a6 1
REVISION =		0
d10 1
a10 1
HOMEPAGE =		https://hg-git.github.io/
a22 2
WRKDIST =		${WRKDIR}/durin42-hg-git-d7ad67f850b2

d30 4
@


1.20
log
@update to hggit 0.8.3

OK juanfra@@, shadchin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/09/29 10:51:54 sthen Exp $
d7 1
d13 1
a13 1
MAINTAINER =		Dmitrij D. Czarkoff <czarkoff@@gmail.com>
@


1.19
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/09/23 07:18:21 czarkoff Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.2
a6 1
REVISION =		0
d23 1
a23 1
WRKDIST =		${WRKDIR}/durin42-hg-git-e183fdc198f0
@


1.18
log
@Update to 0.8.2

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/03/18 18:04:55 czarkoff Exp $
d7 1
@


1.17
log
@update to 0.8.0

OK sthen@@, juanfra@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/01/12 08:02:55 benoit Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.8.0
d23 1
a23 1
WRKDIST =		${WRKDIR}/durin42-hg-git-cf3dafce0611
d25 1
a25 1
RUN_DEPENDS =		devel/py-dulwich>=0.9.5 \
d37 2
a38 2
	cd ${WRKSRC}/tests && ${SETENV} ${MAKE_ENV} ${MODPY_BIN} run-tests.py \
	    --with-hg=${LOCALBASE}/bin/hg
@


1.16
log
@Update to py-hg-git-0.7.0.

from Dmitrij D. Czarkoff (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/10/12 21:00:13 juanfra Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.7.0
d23 1
a23 1
WRKDIST =		${WRKDIR}/durin42-hg-git-fc63d0e2653d
d25 1
a25 1
RUN_DEPENDS =		devel/py-dulwich>=0.9.4 \
@


1.15
log
@Update to hg-git 0.6.1. From MAINTAINER. Tweaks by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/03/25 16:19:15 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.6.1
d23 1
a23 1
WRKDIST =		${WRKDIR}/durin42-hg-git-f67747f18f20
@


1.14
log
@update to py-hg-git, from new maintainer Dmitrij D. Czarkoff, with a
small tweak from me to handle running tests on a system which does not
have a python->python2.7 symlink.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/10/03 16:37:16 dcoppa Exp $
d3 1
a3 1
COMMENT =	push/pull from a Git server repository using Mercurial
d5 1
a5 1
MODPY_EGG_VERSION =	0.5.0
d10 1
a10 1
HOMEPAGE =		http://hg-git.github.com/
d15 1
a15 1
PERMIT_PACKAGE_CDROM =		Yes
d23 1
a23 1
WRKDIST =		${WRKDIR}/durin42-hg-git-ef41e87ea11a
d25 1
a25 1
RUN_DEPENDS =		devel/py-dulwich>=0.9.5 \
d37 1
a37 1
	cd ${WRKSRC}/tests && env ${MAKE_ENV} ${MODPY_BIN} run-tests.py \
@


1.13
log
@Bye bye MODPY_BADEGGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/09/05 11:20:20 edd Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.3.4
a6 1
REVISION =		0
d12 2
d17 2
a18 2
# Ugly gymnastics to give a more sensible filename than "0.3.4.tar.gz"..
MASTER_SITES =	https://bitbucket.org/durin42/hg-git/get/${MODPY_EGG_VERSION}${EXTRACT_SUFX}?dummy=/
d23 1
a23 1
WRKDIST =		${WRKDIR}/durin42-hg-git-586b7aa96466
d25 1
a25 1
RUN_DEPENDS =		devel/py-dulwich \
d27 1
a27 1
TEST_DEPENDS =	${RUN_DEPENDS} \
d30 1
d34 1
a34 2
	perl -pi -e 's|python |python${MODPY_VERSION} |g' \
	    ${WRKSRC}/tests/test-*
d37 2
a38 2
	cd ${WRKSRC}/tests && ${MODPY_BIN} run-tests.py \
	    --with-hg=${LOCALBASE}/hg
@


1.12
log
@Several tweaks to the mercurial port:

 * Make graphical tooling for mercurial a subpackage (like the git port).
 * Bump all RUN/LIB dependants of mercurial to reflect new pkgpath.
 * Make 'hg view' work without custom paths in hgrc.
 * Substitute some shebangs in the example mercurial scripts.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 10:50:25 espie Exp $
a29 2

MODPY_BADEGGS =		hg-git
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/01/04 01:30:47 sthen Exp $
d7 1
@


1.10
log
@Update py-hg-git to 0.3.4, from Dmitrij D. Czarkoff, plus an ugly tweak to get
a sensible distfile name from me. (Previous version doesn't work with current
Mercurial).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/06/26 07:26:41 landry Exp $
a13 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d25 1
a25 1
REGRESS_DEPENDS =	${RUN_DEPENDS} \
d32 1
a32 1
pre-regress:
d36 1
a36 1
do-regress:
@


1.9
log
@Update to py-hg-git 0.3.1 and unbreak it, since it doesn't work with our
current mercurial....
From viq
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/09/16 09:24:55 espie Exp $
d5 2
a6 3
MODPY_EGG_VERSION =	0.3.1
DISTNAME =		schacon-hg-git-${MODPY_EGG_VERSION}
PKGNAME =		py-hg-git-${MODPY_EGG_VERSION}
d18 2
a19 1
MASTER_SITES =	http://github.com/schacon/hg-git/tarball/${MODPY_EGG_VERSION}/
d24 1
a24 1
WRKDIST =		${WRKDIR}/${DISTNAME:S/-${MODPY_EGG_VERSION}/-6dc5f17/}
d28 1
a28 1
REGRESS_DEPENDS = 	${RUN_DEPENDS} \
@


1.8
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/06/08 17:39:25 jasper Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.2.5
a7 1
REVISION =		1
d24 1
a24 1
WRKDIST =		${WRKDIR}/${DISTNAME:S/-${MODPY_EGG_VERSION}/-0ed3c70/}
@


1.7
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/12/07 23:08:03 millert Exp $
d8 1
a8 1
REVISION =	0
@


1.6
log
@Update py-hg-git to 0.2.5 to work with current mercurial.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/15 19:46:07 espie Exp $
d8 1
@


1.5
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/09/17 01:42:59 fgsch Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.2.3
a7 1
REVISION =		0
d24 1
a24 1
WRKDIST =		${WRKDIR}/${DISTNAME:S/-${MODPY_EGG_VERSION}/-4097609/}
@


1.4
log
@- Mark with MODPY_BADEGGS
- Make dependencies more readable
- Add missing dependency for regression and correct all tests
- Change to 80 cols
millert@@ ok previous diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/09/14 15:11:22 jasper Exp $
d27 2
a28 2
RUN_DEPENDS =		::devel/py-dulwich \
			::devel/mercurial
d30 3
a32 3
			::archivers/bzip2 \
			::archivers/unzip \
			::devel/git,-main
@


1.3
log
@- dependencies changed, so please bump!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/09/14 14:47:59 millert Exp $
a24 1
RUN_DEPENDS =		::devel/py-dulwich ::devel/mercurial
d27 8
a34 1
REGRESS_DEPENDS = 	${RUN_DEPENDS} ::archivers/bzip2 ::archivers/unzip
d37 2
a38 1
	perl -pi -e 's|python -c|python${MODPY_VERSION} -c|g' ${WRKSRC}/tests/*
d41 2
a42 1
	cd ${WRKSRC}/tests && ${MODPY_BIN} run-tests.py --with-hg=${LOCALBASE}/hg
@


1.2
log
@Add missing dependency on setuptools.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/09/03 18:26:56 millert Exp $
d8 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d21 2
a22 3
MODULES =	lang/python
RUN_DEPENDS =	::devel/py-dulwich ::devel/mercurial
WRKDIST =	${WRKDIR}/${DISTNAME:S/-${MODPY_EGG_VERSION}/-4097609/}
d24 4
a27 1
REGRESS_DEPENDS = ${RUN_DEPENDS} ::archivers/bzip2 ::archivers/unzip
@


1.1.1.1
log
@py-hg-git port
@
text
@@
