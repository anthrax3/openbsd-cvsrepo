head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.2
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	sthen_20160803:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2017.07.05.10.22.05;	author sthen;	state Exp;
branches;
next	1.4;
commitid	FBpcyC2Rj3fOECYI;

1.4
date	2017.03.28.14.36.04;	author sthen;	state Exp;
branches;
next	1.3;
commitid	6gHRFng6E3zF8etH;

1.3
date	2016.08.30.15.05.41;	author sthen;	state Exp;
branches;
next	1.2;
commitid	Bh0TlDHHjGoZ9fGx;

1.2
date	2016.08.05.17.53.40;	author kili;	state Exp;
branches;
next	1.1;
commitid	F4SQhuGd8bKhiibP;

1.1
date	2016.08.03.12.43.46;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	N9S17DtAP3s5uUAk;

1.1.1.1
date	2016.08.03.12.43.46;	author sthen;	state Exp;
branches;
next	;
commitid	N9S17DtAP3s5uUAk;


desc
@@


1.5
log
@drop MAINTAINER on a few things
@
text
@# $OpenBSD: Makefile,v 1.4 2017/03/28 14:36:04 sthen Exp $

COMMENT=	tool for editing version-control repository history

DISTNAME=	reposurgeon-3.42
REVISION=	0
EXTRACT_SUFX=	.tar.xz

CATEGORIES=	devel

HOMEPAGE=	http://www.catb.org/esr/reposurgeon/

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c ${MODPY_WANTLIB}

MASTER_SITES=	http://www.catb.org/esr/reposurgeon/

USE_GMAKE=	Yes
MODULES=	lang/python
CONFIGURE_STYLE= x	# bad python.port.mk
BUILD_DEPENDS=	lang/cython \
		textproc/asciidoc \
		textproc/xmlto

MAKE_FLAGS=	mandir=man
ALL_TARGET=	all cyreposurgeon
INSTALL_TARGET=	install install-cyreposurgeon

TEST_DEPENDS=	devel/pylint \
		shells/bash \
		sysutils/coreutils
TEST_TARGET=	check
TEST_FLAGS=	HOME=${WRKDIR}

pre-test:
	sed -i s,/usr/local,${LOCALBASE},g ${WRKSRC}/test/setpython
	-ln -s ${MODPY_BIN} ${WRKDIR}/bin/python
	-ln -s ${LOCALBASE}/python${MODPY_DEFAULT_VERSION_3} ${WRKDIR}/bin/python3
.for i in realpath make
	-ln -s ${LOCALBASE}/bin/g$i ${WRKDIR}/bin/$i
.endfor

MODPY_ADJ_FILES= repocutter repodiffer repomapper reposurgeon

.include <bsd.port.mk>
@


1.4
log
@update to reposurgeon-3.42
- enable tests since they're in the distfile now, some failures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/08/30 15:05:41 sthen Exp $
d6 1
a11 2

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>
@


1.3
log
@update to reposurgeon-3.38
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/08/05 17:53:40 kili Exp $
d5 1
a5 1
DISTNAME=	reposurgeon-3.38
a31 7
# there are tests in the repo, but not in the tar.xz.
# scaffolding left in place for people who want to fetch and run it,
# but: the pylint check fails (modify the Makefile to skip it or to
# allow other tests to continue), and the setpython script doesn't
# work with our sh.
NO_TEST=	Yes

d33 1
d39 1
@


1.2
log
@Add missing build dependency textproc/asciidoc.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/08/03 12:43:46 sthen Exp $
d5 1
a5 1
DISTNAME=	reposurgeon-3.37
d37 1
a37 1
MO_TEST=	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
@


1.1.1.1
log
@import devel/reposurgeon, ok landry@@
@
text
@@
