head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.05.17.20.23.45;	author sthen;	state Exp;
branches;
next	;
commitid	xoeqLAjoP6wk3O2t;


desc
@@


1.1
log
@Unbreak protobuf tests following the gtest update, from Greg Steuck with some
tweaks by me. Greg contacted the maintainer who said he's no longer interested,
so drop MAINTAINER and bump REVISION while there. Also switch MASTER_SITES from
googlecode to github.
@
text
@$OpenBSD$

Index: src/google/protobuf/compiler/cpp/cpp_unittest.cc
--- src/google/protobuf/compiler/cpp/cpp_unittest.cc.orig
+++ src/google/protobuf/compiler/cpp/cpp_unittest.cc
@@@@ -493,6 +493,9 @@@@ TEST(GeneratedMessageTest, NonEmptyMergeFrom) {
   TestUtil::ExpectAllFieldsSet(message1);
 }
 
+// Older version of protobuf incompatible with new version of gtest.
+// https://groups.google.com/d/msg/protobuf/xgGBG-_WYy8/ruf1MKDr-sIJ
+#undef GTEST_HAS_DEATH_TEST
 #ifdef GTEST_HAS_DEATH_TEST
 
 TEST(GeneratedMessageTest, MergeFromSelf) {
@
