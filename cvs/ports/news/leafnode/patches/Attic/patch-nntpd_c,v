head	1.4;
access;
symbols
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2004.01.12.21.33.12;	author sturm;	state dead;
branches;
next	1.3;

1.3
date	2003.07.26.13.24.08;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2002.10.21.16.49.06;	author marcm;	state dead;
branches;
next	1.1;

1.1
date	2002.09.24.10.17.47;	author naddy;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.01.22.07.02.47;	author marcm;	state dead;
branches;
next	;


desc
@@


1.4
log
@update to leafnode 1.9.49

from rohee@@
@
text
@$OpenBSD: patch-nntpd_c,v 1.3 2003/07/26 13:24:08 sturm Exp $
--- nntpd.c.orig	Wed Jul 23 09:08:24 2003
+++ nntpd.c	Wed Jul 23 09:09:54 2003
@@@@ -294,7 +294,7 @@@@ buildpseudoart(const char *grp)
 
     fprintf(f, "Path: %s\n", fqdn);
     fprintf(f, "Newsgroups: %s\n", grp);
-    fprintf(f, "From: Leafnode <news@@%s>\n", fqdn);
+    fprintf(f, "From: Leafnode <_news@@%s>\n", fqdn);
     fprintf(f, "Subject: Leafnode placeholder for group %s\n", grp);
     fprintf(f, "Date: %s\n", rfctime());
     fprintf(f, "Message-ID: <leafnode:placeholder:%s@@%s>\n", grp, fqdn);
@@@@ -838,7 +838,7 @@@@ list(struct newsgroup *g, int what, cons
 		    printf("%s\t%s\r\n", g->name, g->desc ? g->desc : "-x-");
 		    break;
 		case 2:
-		    printf("%s %lu news@@%s\r\n", g->name, (unsigned long)g->age, fqdn);
+		    printf("%s %lu _news@@%s\r\n", g->name, (unsigned long)g->age, fqdn);
 		    break;
 		default:
 		    break;
@@@@ -1469,7 +1469,7 @@@@ doxhdr(char *arg)
 	    if (n == 0)		/* Subject: */
 		printf("Leafnode placeholder for group %s\r\n", group->name);
 	    else if (n == 1)	/* From: */
-		printf("Leafnode <news@@%s>\r\n", fqdn);
+		printf("Leafnode <_news@@%s>\r\n", fqdn);
 	    else if (n == 2)	/* Date: */
 		printf("%s\r\n", rfctime());
 	    else if (n == 3)	/* Message-ID: */
@@@@ -1657,13 +1657,13 @@@@ doxover(char *arg)
 		   "postings %lu-%lu:", group->first, group->first);
 	printf("%lu\t"
 	       "Leafnode placeholder for group %s\t"
-	       "news@@%s (Leafnode)\t%s\t"
+	       "_news@@%s (Leafnode)\t%s\t"
 	       "<leafnode:placeholder:%s@@%s>\t\t1000\t40\r\n", group->first,
 	       group->name, fqdn, rfctime(), group->name, fqdn);
 	printf(".\r\n");
 	if (debugmode)
 	    syslog(LOG_DEBUG, ">%lu\tLeafnode placeholder for group %s\t"
-		   "news@@%s (Leafnode)\t%s\t<leafnode:placeholder:%s@@%s>\t\t1000\t40",
+		   "_news@@%s (Leafnode)\t%s\t<leafnode:placeholder:%s@@%s>\t\t1000\t40",
 		   group->first, group->name, fqdn, rfctime(), group->name, fqdn);
     }
 }
@


1.3
log
@- leafnode has its username hardcoded, change this to '_news'
- bump PKGNAME

reported and tested by Marco S Hyman,  maintainer timeout
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Update to 1.9.27.

This version natively includes the patches/bugfixes that were frantically
added pre-3.2 (includung the 64-bit fixes from naddy@@).

ok pvalchev@@
@
text
@d1 13
a13 4
$OpenBSD: patch-nntpd_c,v 1.1 2002/09/24 10:17:47 naddy Exp $
--- nntpd.c.orig	Tue Sep 24 01:20:12 2002
+++ nntpd.c	Tue Sep 24 01:20:53 2002
@@@@ -828,7 +828,7 @@@@ list(struct newsgroup *g, int what, cons
d17 2
a18 2
-		    printf("%s %lu news@@%s\r\n", g->name, g->age, fqdn);
+		    printf("%s %lu news@@%s\r\n", g->name, (unsigned long)g->age, fqdn);
d22 25
@


1.1
log
@Fix format string problems on 64-bit archs.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@SECURITY fix:
Update to 1.9.32 to fix Bugtraq #6490, a DoS vulnerability.

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-nntpd_c,v 1.1 2002/09/24 10:17:47 naddy Exp $
@


