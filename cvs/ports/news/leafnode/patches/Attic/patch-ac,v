head	1.6;
access;
symbols
	OPENBSD_2_7:1.5.0.6
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.5.0.4
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	leadnode1_0_2:1.1.1.1
	leafnode:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2000.06.10.19.00.15;	author fgsch;	state dead;
branches;
next	1.5;

1.5
date	99.03.17.03.46.26;	author brad;	state Exp;
branches
	1.5.6.1;
next	1.4;

1.4
date	99.02.21.20.26.36;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	99.01.31.01.38.07;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.07.25.06.16.15;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.12.20.02.03.09;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.20.02.03.09;	author joey;	state Exp;
branches;
next	;

1.5.6.1
date	2000.09.15.05.11.46;	author marc;	state dead;
branches;
next	;


desc
@@


1.6
log
@Update to 1.9.14; fake.
@
text
@--- miscutil.c.orig	Tue Mar 16 22:33:40 1999
+++ miscutil.c	Tue Mar 16 22:34:36 1999
@@@@ -85,8 +85,8 @@@@
 	    return FALSE;
 	}
 
-	setregid( pw->pw_gid, pw->pw_gid );
-	setreuid( pw->pw_uid, pw->pw_uid );
+	setgid( pw->pw_gid );
+	setuid( pw->pw_uid );
 	if ( getuid() != pw->pw_uid || getgid() != pw->pw_gid ) {
 	    fprintf( stderr, "%s: must be run as news or root\n", progname );
 	    return FALSE;
@


1.5
log
@upgrade to leafnode 1.9.2
@
text
@@


1.5.6.1
log
@bring news as of cut-over date into 2.7 branch
@
text
@@


1.4
log
@update to version 1.9; Bob Pepin <bob@@sendar.prophecy.lu>
@
text
@d1 3
a3 3
--- miscutil.c.orig	Mon Feb 15 17:34:08 1999
+++ miscutil.c	Mon Feb 15 17:34:33 1999
@@@@ -79,8 +79,8 @@@@
@


1.3
log
@leafnode 1.8.1; ob Pepin <bob@@sendar.prophecy.lu>
@
text
@d1 5
a5 5
--- fetch.c.orig	Fri Jan  8 22:34:46 1999
+++ fetch.c	Fri Jan  8 22:08:02 1999
@@@@ -1226,8 +1226,8 @@@@
 	exit( 1 );
     }
d7 7
a13 7
-    setregid( pw->pw_gid, pw->pw_gid );
-    setreuid( pw->pw_uid, pw->pw_uid );
+    setgid( pw->pw_gid );
+    setuid( pw->pw_uid );
 
     if ( getuid() != pw->pw_uid || getgid() != pw->pw_gid ) {
 	fprintf( stderr, "%s: must be run as news or root\n", argv[0] );
@


1.2
log
@update to 1.4-7; generate news user if necessary;
use BSD install programs, not cp; mktemp -> mkstemp;
setreuid -> setuid; update packing list; don't
even try to build a package as it won't install
correctly
@
text
@d1 3
a3 3
--- fetch.c.~1~	Sun Mar  1 09:32:00 1998
+++ fetch.c	Fri Jul 24 22:18:05 1998
@@@@ -918,8 +918,8 @@@@
@


1.1
log
@Initial revision
@
text
@d1 13
a13 69
*** Makefile.orig	Tue May 27 09:50:36 1997
--- Makefile	Fri Jul  4 10:50:49 1997
***************
*** 4,11 ****
  DEBUG = -O2 -m486 -fno-strength-reduce -Wall -Wformat -Wstrict-prototypes -Wmissing-prototypes  
  CFLAGS = $(DEBUG)
  LIBS = 
! BINDIR = /usr/sbin
! MANDIR = /usr/man
  VERSION = 1.0.2
  #
  # this is the directory where the news is stored.
--- 4,11 ----
  DEBUG = -O2 -m486 -fno-strength-reduce -Wall -Wformat -Wstrict-prototypes -Wmissing-prototypes  
  CFLAGS = $(DEBUG)
  LIBS = 
! BINDIR = $(PREFIX)/sbin
! MANDIR = $(PREFIX)/man
  VERSION = 1.0.2
  #
  # this is the directory where the news is stored.
***************
*** 13,19 ****
  #
  # this is the directory where the configuration and group information is
  # kept.  It should preferably not be on the same partition as spooldir
! LIBDIR = /usr/lib/leafnode
  
  all: nntpd fetch texpire
  
--- 13,19 ----
  #
  # this is the directory where the configuration and group information is
  # kept.  It should preferably not be on the same partition as spooldir
! LIBDIR = $(PREFIX)/lib/leafnode
  
  all: nntpd fetch texpire
  
***************
*** 41,54 ****
  	cp texpire $(BINDIR)
  	cp *.8 $(MANDIR)/man8
  	-mkdir -p $(SPOOLDIR) $(LIBDIR)
! 	-mkdir -p $(SPOOLDIR)/{message.id,interesting.groups,out.going}
  	@@echo This is actually quite fast, for _small_ servers.
! 	mkdir -p /var/spool/news/message.id/{0,1,2,3,4,5,6,7,8,9}{0,12,3,4,5,6,7,8,9}{0,1,2,3,4,5,6,7,8,9}
! 	cp config.example /usr/lib/leafnode/config
  	chown -R news.news $(LIBDIR) $(SPOOLDIR)
  	chmod 2750 $(SPOOLDIR)
! 	chmod 750 $(BINDIR)/{leafnode,fetch,texpire}
! 	chown news.news $(BINDIR)/{leafnode,fetch,texpire}
  	@@echo edit /etc/inetd.conf to start $(BINDIR)/leafnode
  
  dist:
--- 41,54 ----
  	cp texpire $(BINDIR)
  	cp *.8 $(MANDIR)/man8
  	-mkdir -p $(SPOOLDIR) $(LIBDIR)
! 	-csh -c 'mkdir -p $(SPOOLDIR)/{message.id,interesting.groups,out.going}'
  	@@echo This is actually quite fast, for _small_ servers.
! 	csh -c 'mkdir -p /var/spool/news/message.id/{0,1,2,3,4,5,6,7,8,9}{0,1,2,3,4,5,6,7,8,9}{0,1,2,3,4,5,6,7,8,9}'
! 	cp config.example $(LIBDIR)/config.example
  	chown -R news.news $(LIBDIR) $(SPOOLDIR)
  	chmod 2750 $(SPOOLDIR)
! 	csh -c 'chmod 750 $(BINDIR)/{leafnode,fetch,texpire}'
! 	csh -c 'chown news.news $(BINDIR)/{leafnode,fetch,texpire}'
  	@@echo edit /etc/inetd.conf to start $(BINDIR)/leafnode
  
  dist:
@


1.1.1.1
log
@
@
text
@@
