head	1.5;
access;
symbols
	OPENBSD_2_7:1.4.0.6
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.4
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	leadnode1_0_2:1.1.1.1
	leafnode:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2000.06.10.19.00.15;	author fgsch;	state dead;
branches;
next	1.4;

1.4
date	99.02.21.20.26.36;	author marc;	state Exp;
branches
	1.4.6.1;
next	1.3;

1.3
date	99.01.31.01.38.07;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.07.25.06.16.16;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.12.20.02.03.09;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.20.02.03.09;	author joey;	state Exp;
branches;
next	;

1.4.6.1
date	2000.09.15.05.11.46;	author marc;	state dead;
branches;
next	;


desc
@@


1.5
log
@Update to 1.9.14; fake.
@
text
@--- update.sh.orig	Mon Feb 15 17:13:27 1999
+++ update.sh	Mon Feb 15 17:14:42 1999
@@@@ -1,4 +1,4 @@@@
-#!/bin/bash
+#!/bin/sh
 # This script updates leafnode installations < 1.6
 
 if [ $# -ne 2 ]
@@@@ -34,13 +34,13 @@@@
     echo Creating new file for main server ...
     server=`awk '{ if ($1 == "server") printf("%s\n", substr($0,index($0,"=")+1)); }' < ${LIBDIR}/config | tr -d '	 '`
     cd ${SPOOLDIR}/interesting.groups
-    ls -c1 | xargs -i@@@@ grep @@@@\  ${LIBDIR}/groupinfo | \
+    ls -c1 | xargs apply 'grep %1 ${LIBDIR}/groupinfo' | \
 	cut -d\  -f 1,4 > ${SPOOLDIR}/leaf.node/$server
     echo Converting groupinfo file ... your old groupinfo file will be in ${SPOOLDIR}/leaf.node/groupinfo.old
     awk '{ printf("%s %d %d 0", $1, $2, $3); for (i = 5; i <= NF; i++) printf(" %s", $i); printf("\n"); }' < ${LIBDIR}/groupinfo > ${SPOOLDIR}/leaf.node/groupinfo
     mv ${LIBDIR}/groupinfo ${SPOOLDIR}/leaf.node/groupinfo.old
     echo Move other files ...
-    find ${LIBDIR} -type f -not -name 'config*' -exec mv '{}' ${SPOOLDIR}/leaf.node/ \;
+    find ${LIBDIR} -type f \! -name 'config*' -exec mv '{}' ${SPOOLDIR}/leaf.node/ \;
     chown news.news ${SPOOLDIR}/leaf.node/*
     chmod 664 ${SPOOLDIR}/leaf.node/*
     echo Done.
@


1.4
log
@update to version 1.9; Bob Pepin <bob@@sendar.prophecy.lu>
@
text
@@


1.4.6.1
log
@bring news as of cut-over date into 2.7 branch
@
text
@@


1.3
log
@leafnode 1.8.1; ob Pepin <bob@@sendar.prophecy.lu>
@
text
@d1 6
a6 4
--- checkgroups.c.orig	Fri Jan  8 22:33:30 1999
+++ checkgroups.c	Fri Jan  8 22:08:22 1999
@@@@ -75,7 +75,7 @@@@
     }
d8 17
a24 6
     setgid( pw->pw_gid );
-    setreuid( pw->pw_uid, pw->pw_uid );
+    setuid( pw->pw_uid );
 
     if ( getuid() != pw->pw_uid || getgid() != pw->pw_gid ) {
         fprintf( stderr, "%s: must be run as news or root\n", argv[0] );
@


1.2
log
@update to 1.4-7; generate news user if necessary;
use BSD install programs, not cp; mktemp -> mkstemp;
setreuid -> setuid; update packing list; don't
even try to build a package as it won't install
correctly
@
text
@d1 3
a3 3
--- checkgroups.c.~1~	Wed Jul 23 11:35:26 1997
+++ checkgroups.c	Fri Jul 24 22:20:15 1998
@@@@ -72,7 +72,7 @@@@
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
--- util.c.orig	Tue Oct 29 20:26:36 1996
+++ util.c	Fri Dec 19 16:52:20 1997
@@@@ -1331,7 +1331,7 @@@@
 		    error, getcwd( s, 1024 ) );
d6 3
a8 5
 	strcpy( newfile, ".overview.XXXXXX" );
-	if ( (wfd=open( mktemp(newfile), O_WRONLY|O_CREAT|O_EXCL, 0664 )) ) {
+	if ( (wfd=open( mkstemp(newfile), O_WRONLY|O_CREAT|O_EXCL, 0664 )) ) {
 	    struct iovec oooh[UIO_MAXIOV];
 	    int vi, vc, va;
d10 2
@


1.1.1.1
log
@
@
text
@@
