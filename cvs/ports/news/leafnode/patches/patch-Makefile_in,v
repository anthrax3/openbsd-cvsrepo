head	1.22;
access;
symbols
	OPENBSD_6_2:1.22.0.10
	OPENBSD_6_2_BASE:1.22
	OPENBSD_6_1:1.22.0.8
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.22.0.6
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.22.0.4
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.21.0.16
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.14
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.12
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.10
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.21.0.8
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.21.0.6
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.4
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.20.0.10
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.8
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.20.0.6
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.20.0.4
	OPENBSD_4_6_BASE:1.20
	OPENBSD_4_5:1.20.0.2
	OPENBSD_4_5_BASE:1.20
	OPENBSD_4_4:1.19.0.12
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.10
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.8
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.19.0.6
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.19.0.4
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.19.0.2
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.18.0.2
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.16.0.2
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.10.0.2
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.9.0.2
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.4.0.4
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.4
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3;
locks; strict;
comment	@# @;


1.22
date	2015.04.06.16.26.22;	author jca;	state Exp;
branches;
next	1.21;
commitid	olDrecDDhk4YfGqV;

1.21
date	2011.06.20.08.52.31;	author fgsch;	state Exp;
branches;
next	1.20;

1.20
date	2009.02.12.13.33.07;	author giovanni;	state Exp;
branches;
next	1.19;

1.19
date	2005.11.24.20.06.32;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2005.05.03.17.43.25;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2005.03.22.21.43.12;	author sturm;	state Exp;
branches;
next	1.16;

1.16
date	2005.01.24.11.48.31;	author sturm;	state Exp;
branches;
next	1.15;

1.15
date	2004.10.07.05.15.25;	author sturm;	state Exp;
branches;
next	1.14;

1.14
date	2004.06.14.05.06.20;	author sturm;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2004.05.07.20.46.59;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2004.01.12.21.33.12;	author sturm;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2003.11.08.21.55.50;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2003.05.21.06.51.43;	author marcm;	state Exp;
branches;
next	1.9;

1.9
date	2003.02.22.22.32.12;	author rohee;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2003.02.19.22.34.26;	author rohee;	state Exp;
branches;
next	1.7;

1.7
date	2003.01.21.16.58.11;	author marcm;	state Exp;
branches;
next	1.6;

1.6
date	2002.10.21.16.49.06;	author marcm;	state Exp;
branches;
next	1.5;

1.5
date	2002.09.24.00.24.19;	author marcm;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2001.06.10.21.32.26;	author rohee;	state Exp;
branches
	1.4.4.1;
next	1.3;

1.3
date	2001.03.12.15.44.34;	author wilfried;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.07.03.00.00;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2001.02.24.18.04.55;	author fgsch;	state Exp;
branches;
next	;

1.4.4.1
date	2003.01.28.19.11.52;	author marcm;	state Exp;
branches;
next	;

1.5.2.1
date	2003.01.22.07.02.47;	author marcm;	state Exp;
branches;
next	;

1.9.2.1
date	2003.06.01.04.05.06;	author marcm;	state Exp;
branches;
next	;

1.12.2.1
date	2005.05.06.14.46.44;	author robert;	state Exp;
branches;
next	;

1.14.2.1
date	2005.05.06.14.46.04;	author robert;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Update to leafnode-1.11.10

ok ajacoutot@@
@
text
@$OpenBSD: patch-Makefile_in,v 1.21 2011/06/20 08:52:31 fgsch Exp $
--- Makefile.in.orig	Tue Jun 11 23:32:46 2013
+++ Makefile.in	Fri Jan  2 21:45:49 2015
@@@@ -1435,7 +1435,7 @@@@ info-am:
 
 install-data-am: install-man
 	@@$(NORMAL_INSTALL)
-	$(MAKE) $(AM_MAKEFLAGS) install-data-hook
+
 install-dvi: install-dvi-recursive
 
 install-dvi-am:
@


1.21
log
@Update to leafnode 1.11.8.
giovanni@@ ok
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.in.orig	Thu Jun 16 09:36:56 2011
+++ Makefile.in	Thu Jun 16 09:36:58 2011
@@@@ -1412,7 +1412,7 @@@@ info-am:
@


1.20
log
@
Update to 1.11.6
Tweaks and ok by jasper@@
@
text
@d1 4
a4 5
$OpenBSD: patch-Makefile_in,v 1.19 2005/11/24 20:06:32 sturm Exp $

--- Makefile.in.orig	Sat Mar 17 12:53:37 2007
+++ Makefile.in	Sun Feb  8 09:59:42 2009
@@@@ -1264,7 +1264,6 @@@@ info-am:
d9 2
d12 1
a12 2
 install-exec-am: install-binPROGRAMS install-sbinPROGRAMS \
 	install-sysconfDATA
@


1.19
log
@update to leafnode 1.11.4

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.18 2005/05/03 17:43:25 sturm Exp $
d3 3
a5 3
--- Makefile.in.orig	Wed Nov 23 12:00:09 2005
+++ Makefile.in	Thu Nov 24 21:00:10 2005
@@@@ -1229,7 +1229,6 @@@@ info-am:
@


1.18
log
@update to 1.11.1

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.17 2005/03/22 21:43:12 sturm Exp $
d3 3
a5 14
--- Makefile.in.orig	Tue Apr 26 00:58:28 2005
+++ Makefile.in	Tue May  3 19:41:04 2005
@@@@ -1351,14 +1351,7 @@@@ install-data-hook: amiroot
 	set -e ; for i in . leaf.node failed.postings interesting.groups \
 		out.going message.id temp.files ; do \
         mkdir -p $(DESTDIR)$(SPOOLDIR)/$$i ; \
-	if ./amiroot ; then \
-	 chown @@NEWS_USER@@:@@NEWS_GROUP@@ $(DESTDIR)$(SPOOLDIR)/$$i ; \
-	 chmod 2775      $(DESTDIR)$(SPOOLDIR)/$$i ; fi ; \
 	done
-	d="`dirname $(DESTDIR)@@LOCKFILE@@`" ; mkdir -p "$${d}" && \
-	if ./amiroot ; then \
-          chown @@NEWS_USER@@:@@NEWS_GROUP@@ "$${d}" ; \
-	  chmod 2775 "$${d}" ; fi
d7 6
a12 2
 uninstall-local:
 	rm -rf $(DESTDIR)$(SPOOLDIR) $(DESTDIR)@@LOCKFILE@@
@


1.17
log
@update to leafnode 1.11.0, which brings support for ipv6 in fetchnews

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.16 2005/01/24 11:48:31 sturm Exp $
d3 3
a5 3
--- Makefile.in.orig	Wed Mar 16 17:14:32 2005
+++ Makefile.in	Tue Mar 22 22:22:40 2005
@@@@ -1344,14 +1344,7 @@@@ install-data-hook: amiroot
@


1.16
log
@update to 1.10.8

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.15 2004/10/07 05:15:25 sturm Exp $
d3 3
a5 3
--- Makefile.in.orig	Fri Jan 21 16:43:36 2005
+++ Makefile.in	Mon Jan 24 12:34:44 2005
@@@@ -1332,14 +1332,7 @@@@ install-data-hook: amiroot
@


1.15
log
@update to leafnode 1.10.6

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.14 2004/06/14 05:06:20 sturm Exp $
d3 3
a5 3
--- Makefile.in.orig	Wed Sep 22 17:30:34 2004
+++ Makefile.in	Tue Oct  5 00:33:27 2004
@@@@ -1329,14 +1329,7 @@@@ install-data-hook: amiroot
@


1.14
log
@update to leafnode 1.10.0

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- Makefile.in.orig	2004-06-11 00:05:35.000000000 +0200
+++ Makefile.in	2004-06-13 18:40:54.000000000 +0200
@@@@ -1361,14 +1361,7 @@@@ install-data-hook: amiroot
@


1.14.2.1
log
@SECURITY:
update to 1.11.2; fixes a denial of service vulnerability
http://www.vuxml.org/openbsd/92248e4e-bd88-11d9-985a-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.14 2004/06/14 05:06:20 sturm Exp $
d3 3
a5 3
--- Makefile.in.orig	Wed May  4 16:36:22 2005
+++ Makefile.in	Thu May  5 22:11:47 2005
@@@@ -1352,14 +1352,7 @@@@ install-data-hook: amiroot
@


1.13
log
@update to leafnode 1.9.53

from rohee@@
@
text
@d1 5
a5 3
--- Makefile.in.orig	Tue Apr 20 07:40:25 2004
+++ Makefile.in	Tue Apr 20 07:42:01 2004
@@@@ -1358,14 +1358,7 @@@@ install-data-hook: amiroot
@


1.12
log
@update to leafnode 1.9.49

from rohee@@
@
text
@d1 3
a3 4
$OpenBSD: patch-Makefile_in,v 1.11 2003/11/08 21:55:50 sturm Exp $
--- Makefile.in.orig	2004-01-09 17:18:28.000000000 +0100
+++ Makefile.in	2004-01-12 18:38:27.000000000 +0100
@@@@ -1346,15 +1346,7 @@@@ install-data-hook: quickmkdir amiroot
d8 1
a8 1
-	 chown news:news $(DESTDIR)$(SPOOLDIR)/$$i ; \
d13 1
a13 1
-          chown news:news "$${d}" ; \
a14 1
-	./quickmkdir $(DESTDIR)
@


1.12.2.1
log
@SECURITY:
update to 1.11.2; fixes a denial of service vulnerability
http://www.vuxml.org/openbsd/92248e4e-bd88-11d9-985a-00065bd5b0b6.html

ok brad@@
@
text
@d1 4
a4 5
$OpenBSD$

--- Makefile.in.orig	Wed May  4 16:36:22 2005
+++ Makefile.in	Thu May  5 22:11:47 2005
@@@@ -1352,14 +1352,7 @@@@ install-data-hook: amiroot
d9 1
a9 1
-	 chown @@NEWS_USER@@:@@NEWS_GROUP@@ $(DESTDIR)$(SPOOLDIR)/$$i ; \
d14 1
a14 1
-          chown @@NEWS_USER@@:@@NEWS_GROUP@@ "$${d}" ; \
d16 1
@


1.11
log
@update to leafnode 1.9.46

from rohee@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.10 2003/05/21 06:51:43 marcm Exp $
--- Makefile.in.orig	2003-10-30 16:00:28.000000000 +0100
+++ Makefile.in	2003-10-30 21:07:38.000000000 +0100
@@@@ -1378,15 +1378,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.10
log
@Update to 1.9.40.

Among other things this fixes the annoying "cannot parse
server reply" error messages that come spewing forth on server replies that
should otherwise be parsed just fine.

ok rohee@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.9 2003/02/22 22:32:12 rohee Exp $
--- Makefile.in.orig	Thu May  8 02:45:27 2003
+++ Makefile.in	Fri May 16 09:45:41 2003
@@@@ -1360,15 +1360,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.9
log
@Update to 1.9.35 and take maintainership from marcm@@ who have more
than enough work with Gnome.
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.8 2003/02/19 22:34:26 rohee Exp $
--- Makefile.in.orig	Fri Feb 21 01:35:13 2003
+++ Makefile.in	Sat Feb 22 22:50:39 2003
@@@@ -1330,15 +1330,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.9.2.1
log
@MFC: Fix an issue where leafnode would error with "cannot parse
server reply" on server replies that should have otherwise been parsed
just fine.

ok rohee@@ brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.9 2003/02/22 22:32:12 rohee Exp $
--- Makefile.in.orig	Thu May  8 02:45:27 2003
+++ Makefile.in	Fri May 16 09:19:35 2003
@@@@ -1360,15 +1360,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.8
log
@Update to leafnode 1.9.33
CVSfnod: ----------------------------------------------------------------------
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.7 2003/01/21 16:58:11 marcm Exp $
--- Makefile.in.orig	Mon Feb  3 01:23:43 2003
+++ Makefile.in	Mon Feb 17 23:59:12 2003
@@@@ -1292,15 +1292,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.7
log
@Update to 1.9.32.  In addition to the general updates this fixes
Bugtraq #6490, a DoS vulnerability.

Also thanks to margarita@@ for the SYSCONFDIR cluestick :)

ok brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.6 2002/10/21 16:49:06 marcm Exp $
--- Makefile.in.orig	Wed Jan  8 14:56:56 2003
+++ Makefile.in	Fri Jan 10 13:35:04 2003
@@@@ -1244,15 +1244,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.6
log
@Update to 1.9.27.

This version natively includes the patches/bugfixes that were frantically
added pre-3.2 (includung the 64-bit fixes from naddy@@).

ok pvalchev@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.5 2002/09/24 00:24:19 marcm Exp $
--- Makefile.in.orig	Tue Sep 24 15:08:40 2002
+++ Makefile.in	Sat Oct 19 23:21:48 2002
@@@@ -1086,15 +1086,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.5
log
@Update to 1.9.26.  This fixes numerous bugs (security and otherwise)
since version 1.9.19 as mentioned by the developer on ports@@.

Also brought the port itself up to date and added myself as maintainer.

ok pvalchev@@ naddy@@
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.in.orig	Fri Sep 20 03:49:58 2002
+++ Makefile.in	Sat Sep 21 20:16:58 2002
@@@@ -1062,15 +1062,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.5.2.1
log
@SECURITY fix:
Update to 1.9.32 to fix Bugtraq #6490, a DoS vulnerability.

ok brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.6 2002/10/21 16:49:06 marcm Exp $
--- Makefile.in.orig	Wed Jan  8 14:56:56 2003
+++ Makefile.in	Fri Jan 10 13:35:04 2003
@@@@ -1244,15 +1244,7 @@@@ install-data-hook: quickmkdir amiroot
@


1.4
log
@update to version 1.9.19, a bugfix release
@
text
@d1 16
a16 10
$OpenBSD: patch-Makefile_in,v 1.3 2001/03/12 15:44:34 wilfried Exp $
--- Makefile.in.orig	Tue Jun  5 17:36:14 2001
+++ Makefile.in	Thu Jun  7 23:50:19 2001
@@@@ -19,7 +19,7 @@@@ PCRELIB = @@PCRELIB@@
 # Flags
 DEBUG  = -g
 STRIP  = -s
-CFLAGS = -I. @@DEFS@@ @@GCC_FLAGS@@ $(DEBUG)
+CFLAGS = -I. @@DEFS@@ @@CFLAGS@@
 LIBS   = @@LIBS@@
d18 2
a19 73
 # Directories and Paths
@@@@ -32,7 +32,9 @@@@ BINDIR = $(PREFIX_USR)/sbin
 MANDIR = $(PREFIX_USR)/man
 SPOOLDIR = $(PREFIX_VAR)/spool/news
 LIBDIR   = /etc/leafnode
-LOCKFILE = /var/lock/news/fetchnews.lck
+LOCKFILE = $(SPOOLDIR)/fetchnews.lck
+
+INSTALLROOT = $(DESTDIR)
 
 # RPM crap
 RPM = @@RPM@@
@@@@ -122,51 +124,15 @@@@ config.o: config.c Makefile
 		-DVERSION=\"$(VERSION)\" $<
 
 install: liblnutil.a nntpd fetchnews texpire checkgroups applyfilter newsq
-	$(INSTALL) -d -o root -g 0 -m 755 $(INSTALLROOT)$(MANDIR)/man1
-	$(INSTALL) -d -o root -g 0 -m 755 $(INSTALLROOT)$(MANDIR)/man7
-	$(INSTALL) -d -o root -g 0 -m 755 $(INSTALLROOT)$(MANDIR)/man8
-	$(INSTALL) -d -o root -g bin -m 755 $(INSTALLROOT)$(BINDIR)
-	$(INSTALL) -d -o root -g bin -m 755 $(INSTALLROOT)$(USRDIR)
-	$(INSTALL) -c -g news -m 750 -o news $(STRIP) nntpd $(INSTALLROOT)$(BINDIR)/leafnode
-	$(INSTALL) -c -g news -m 750 -o news $(STRIP) fetchnews $(INSTALLROOT)$(BINDIR)/fetchnews
-	$(INSTALL) -c -g news -m 750 -o news $(STRIP) texpire $(INSTALLROOT)$(BINDIR)/texpire
-	$(INSTALL) -c -g news -m 750 -o news $(STRIP) checkgroups $(INSTALLROOT)$(BINDIR)/checkgroups
-	$(INSTALL) -c -g news -m 750 -o news $(STRIP) applyfilter $(INSTALLROOT)$(BINDIR)/applyfilter
-	$(INSTALL) -c -g news -m 755 -o news $(STRIP) newsq $(INSTALLROOT)$(USRDIR)/newsq
-	$(INSTALL) -c -m 644 $(srcdir)/*.8 $(INSTALLROOT)$(MANDIR)/man8
-	if test $(PCRELIB) ; then $(INSTALL) -c -m 644 $(srcdir)/pcre/pcre.7 $(INSTALLROOT)$(MANDIR)/man7 ; fi
-	$(INSTALL) -c -m 644 $(srcdir)/*.1 $(INSTALLROOT)$(MANDIR)/man1
-	-mkdir -p `dirname $(INSTALLROOT)$(LOCKFILE)`
-	-mkdir -p $(INSTALLROOT)$(SPOOLDIR) $(INSTALLROOT)$(LIBDIR)
-	-mkdir -p $(INSTALLROOT)$(SPOOLDIR)/leaf.node
-	-mkdir -p $(INSTALLROOT)$(SPOOLDIR)/failed.postings
-	-mkdir -p $(INSTALLROOT)$(SPOOLDIR)/message.id
-	-mkdir -p $(INSTALLROOT)$(SPOOLDIR)/interesting.groups
-	-mkdir -p $(INSTALLROOT)$(SPOOLDIR)/out.going
-	-chown news:news `dirname $(INSTALLROOT)$(LOCKFILE)`
-	-chown news:news $(INSTALLROOT)$(SPOOLDIR) $(INSTALLROOT)$(LIBDIR)
-	-chown news:news $(INSTALLROOT)$(SPOOLDIR)/leaf.node
-	-chown news:news $(INSTALLROOT)$(SPOOLDIR)/failed.postings
-	-chown news:news $(INSTALLROOT)$(SPOOLDIR)/message.id
-	-chown news:news $(INSTALLROOT)$(SPOOLDIR)/interesting.groups
-	-chown news:news $(INSTALLROOT)$(SPOOLDIR)/out.going
-	cd $(INSTALLROOT)$(SPOOLDIR)/message.id ; for a in 0 1 2 3 4 5 6 7 8 9 ; do \
-		for b in 0 1 2 3 4 5 6 7 8 9 ; do \
-			mkdir -p $${a}$${b}0 $${a}$${b}1 $${a}$${b}2 \
-				$${a}$${b}3 $${a}$${b}4 $${a}$${b}5 \
-				$${a}$${b}6 $${a}$${b}7 $${a}$${b}8 \
-				$${a}$${b}9 ; \
-			chown news:news $${a}$${b}0 $${a}$${b}1 $${a}$${b}2 \
-				$${a}$${b}3 $${a}$${b}4 $${a}$${b}5 \
-				$${a}$${b}6 $${a}$${b}7 $${a}$${b}8 \
-				$${a}$${b}9 ; \
-			done ; done
-	cp $(srcdir)/config.example $(INSTALLROOT)$(LIBDIR)
-	-chown root:news $(INSTALLROOT)$(LIBDIR)/config.example
-	-chmod 640 $(INSTALLROOT)$(LIBDIR)/config.example
-	chmod 2755 $(INSTALLROOT)$(SPOOLDIR)
-	@@echo Edit /etc/inetd.conf to start $(BINDIR)/leafnode and restart inetd
-	@@echo If you update from a leafnode version \< 1.9.3, do a \"make update\"
+	$(INSTALL) -m 750 $(STRIP) nntpd $(INSTALLROOT)$(BINDIR)/leafnode
+	$(INSTALL) -m 750 $(STRIP) fetchnews $(INSTALLROOT)$(BINDIR)/fetchnews
+	$(INSTALL) -m 750 $(STRIP) texpire $(INSTALLROOT)$(BINDIR)/texpire
+	$(INSTALL) -m 750 $(STRIP) checkgroups $(INSTALLROOT)$(BINDIR)/checkgroups
+	$(INSTALL) -m 750 $(STRIP) applyfilter $(INSTALLROOT)$(BINDIR)/applyfilter
+	$(INSTALL) -m 755 $(STRIP) newsq $(INSTALLROOT)$(USRDIR)/newsq
+	$(BSD_INSTALL_MAN) $(srcdir)/*.8 $(INSTALLROOT)$(MANDIR)/man8
+	if test $(PCRELIB) ; then $(BSD_INSTALL_MAN) $(srcdir)/pcre/pcre.7 $(INSTALLROOT)$(MANDIR)/man7 ; fi
+	$(BSD_INSTALL_MAN) $(srcdir)/*.1 $(INSTALLROOT)$(MANDIR)/man1
 
 uninstall: uninstall-bins
 	-rm -r $(SPOOLDIR)/leaf.node
@


1.4.4.1
log
@SECURITY fix:
Update to 1.9.32 to fix Bugtraq #6490, a DoS vulnerability.

ok brad@@
@
text
@d1 10
a10 16
$OpenBSD: patch-Makefile_in,v 1.7 2003/01/21 16:58:11 marcm Exp $
--- Makefile.in.orig	Wed Jan  8 14:56:56 2003
+++ Makefile.in	Fri Jan 10 13:35:04 2003
@@@@ -1244,15 +1244,7 @@@@ install-data-hook: quickmkdir amiroot
 	set -e ; for i in . leaf.node failed.postings interesting.groups \
 		out.going message.id temp.files ; do \
         mkdir -p $(DESTDIR)$(SPOOLDIR)/$$i ; \
-	if ./amiroot ; then \
-	 chown news:news $(DESTDIR)$(SPOOLDIR)/$$i ; \
-	 chmod 2775      $(DESTDIR)$(SPOOLDIR)/$$i ; fi ; \
 	done
-	d="`dirname $(DESTDIR)@@LOCKFILE@@`" ; mkdir -p "$${d}" && \
-	if ./amiroot ; then \
-          chown news:news "$${d}" ; \
-	  chmod 2775 "$${d}" ; fi
-	./quickmkdir $(DESTDIR)
d12 73
a84 2
 uninstall-local:
 	rm -rf $(DESTDIR)$(SPOOLDIR) $(DESTDIR)@@LOCKFILE@@
@


1.3
log
@respect CFLAGS
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile_in,v 1.2 2001/03/07 03:00:00 fgsch Exp $
--- Makefile.in.orig	Mon Jan  8 08:37:44 2001
+++ Makefile.in	Mon Mar 12 16:39:04 2001
d24 1
a24 1
@@@@ -123,51 +125,15 @@@@ config.o: config.c Makefile
@


1.2
log
@Don't use /var/run/leafnode for storing the lockfile, use leafnode's
spool dir instead; found by marcm@@lectroid.net.
@
text
@d1 12
a12 3
$OpenBSD: patch-Makefile_in,v 1.1 2001/02/24 18:04:55 fgsch Exp $
--- Makefile.in.orig	Mon Jan  8 04:37:44 2001
+++ Makefile.in	Tue Mar  6 23:39:02 2001
@


1.1
log
@Update to rel. 1.9.18; regen patches.
Thanks to Shell Hung <i@@shellhung.org> for the info.
@
text
@d1 1
a1 1
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
d3 1
a3 1
+++ Makefile.in	Sat Feb 24 14:50:13 2001
d9 1
a9 1
+LOCKFILE = $(PREFIX_VAR)/run/news/fetchnews.lck
@

