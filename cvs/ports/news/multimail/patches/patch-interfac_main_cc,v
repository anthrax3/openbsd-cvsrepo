head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.2
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.1.1.1.0.4
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.2
	OPENBSD_6_0_BASE:1.1.1.1
	awolk_20160314:1.1.1.1
	awolk:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.04.18.08.54.17;	author fcambus;	state Exp;
branches;
next	1.1;
commitid	A645tQzWnnOQQ9eL;

1.1
date	2016.03.14.19.04.40;	author awolk;	state Exp;
branches
	1.1.1.1;
next	;
commitid	CNjQKnGh8sqVxYAJ;

1.1.1.1
date	2016.03.14.19.04.40;	author awolk;	state Exp;
branches;
next	;
commitid	CNjQKnGh8sqVxYAJ;


desc
@@


1.2
log
@Honour CXX and CXXFLAGS, fix build with Clang (convert new.h to new).
@
text
@$OpenBSD: patch-interfac_main_cc,v 1.1.1.1 2016/03/14 19:04:40 awolk Exp $
--- interfac/main.cc.orig	Mon Jul 16 19:19:36 2007
+++ interfac/main.cc	Tue Apr 18 08:58:02 2017
@@@@ -12,10 +12,11 @@@@
 #include "interfac.h"
 
 #ifdef USE_NEWHANDLER
-# include <new.h>
+# include <new>
 #endif
 
 #include <locale.h>
+#include <unistd.h>
 
 Interface *ui = 0;
 const chtype *ColorArray = 0;
@@@@ -40,7 +41,7 @@@@ ErrorType::ErrorType()
 	srand((unsigned) starttime);
 
 #ifdef USE_NEWHANDLER
-	set_new_handler(memError);
+	std::set_new_handler(memError);
 #endif
 	origdir = mygetcwd();
 }
@@@@ -95,6 +96,11 @@@@ int main(int argc, char **argv)
 	int ARGC = argc;
 
 	setlocale(LC_ALL, "");
+
+	if (pledge("stdio tty cpath rpath wpath fattr proc exec", NULL) == -1) {
+		perror("pledge");
+		exit(EXIT_FAILURE);
+	}
 
 	while ((ARGC > 2) && ('-' == ARGV[1][0])) {
 		char *resName = ARGV[1] + 1;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 7
a9 2
+++ interfac/main.cc	Wed Jan 20 13:36:01 2016
@@@@ -16,6 +16,7 @@@@
d17 9
@


1.1.1.1
log
@Import news/multimail

offline mail reader for Blue Wave, QWK, OMEN, SOUP and OPX

OK abieber@@

@
text
@@
