head	1.24;
access;
symbols
	OPENBSD_6_1:1.24.0.8
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.24.0.6
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.24.0.2
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.20.0.2
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.16.0.4
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.2
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.6.0.12
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.10
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.8
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.6
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	steven-20070109:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2015.03.27.08.11.25;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	mHt3hIg3nxq5XDcy;

1.23
date	2014.11.04.14.58.39;	author dcoppa;	state Exp;
branches;
next	1.22;
commitid	SmaLK0m1XuEUeM4u;

1.22
date	2014.07.15.09.02.36;	author espie;	state Exp;
branches;
next	1.21;
commitid	dPNjj1EYKZ077Lv3;

1.21
date	2014.07.13.13.03.20;	author armani;	state Exp;
branches;
next	1.20;
commitid	JSLuoqNa1T8QDFV4;

1.20
date	2013.12.12.20.21.45;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2013.10.11.11.26.47;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.04.03.07.13.33;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.10.23.04.45;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2012.06.15.08.32.14;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.04.28.14.08.54;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.12.03.19.26.37;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.05.04.11.59.45;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2011.05.03.18.31.14;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.15.00.22.49;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.24.21.04.39;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.10.23.18.35.23;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.19.19.45.54;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2008.02.02.09.51.05;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.15.21.36.57;	author simon;	state Exp;
branches;
next	1.4;

1.4
date	2007.04.16.14.13.14;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.02.11.00.21.11;	author steven;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2007.02.06.07.16.34;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.09.16.12.55;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.09.16.12.55;	author steven;	state Exp;
branches;
next	;

1.3.2.1
date	2007.06.10.17.55.00;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.24
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@# $OpenBSD: Makefile,v 1.23 2014/11/04 14:58:39 dcoppa Exp $

COMMENT-main=	schematic and PCB editing software
COMMENT-docs=	documentation for the kicad library of components

V=		2010-05-05
S=		BZR2356-stable
DISTNAME=	kicad-sources-${V}-${S}
PKGNAME=	kicad-${V:S/-//g}
PKGNAME-main=	kicad-${V:S/-//g}
PKGNAME-docs=	kicad-docs-${V:S/-//g}

REVISION-main=	5
REVISION-docs=	1

CATEGORIES=	cad

HOMEPAGE=	http://www.kicad-pcb.org/

# LGPLv2.1
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	http://iut-tice.ujf-grenoble.fr/cao/sources/old_versions/
MASTER_SITES0=	http://distfiles.nl/

DOCDIST=	doc_components-${V}-${S}.tgz
DISTFILES=	${DISTNAME}.zip ${DOCDIST}:0
EXTRACT_ONLY=	${DISTNAME}.zip
DIST_SUBDIR=	kicad

MULTI_PACKAGES=	-main -docs

MODULES=	devel/cmake \
		devel/gettext

# kicad includes some boost headers, but somehow
# randomly fails if boost is present then junked
BUILD_DEPENDS =	devel/boost

RUN_DEPENDS-main=	cad/kicad-library \
			devel/desktop-file-utils \
			misc/shared-mime-info \
			x11/gtk+3,-guic

LIB_DEPENDS=	x11/wxWidgets

WANTLIB-main += ${WANTLIB} GL GLU c m pthread stdc++
WANTLIB-main += ICE SM X11 Xext wx_base wx_base_net wx_gtk2_adv wx_gtk2_aui
WANTLIB-main += wx_gtk2_core wx_gtk2_gl wx_gtk2_html z
WANTLIB-docs=
RUN_DEPENDS-docs=
LIB_DEPENDS-docs=
PKG_ARCH-docs=	*

WRKDIST=	${WRKDIR}/kicad-sources-${V}-${S:S/-stable//}

MAKE_FLAGS=	CC=${CXX} CXX=${CXX} LD=${CXX} \
		CXXFLAGS="${CXXFLAGS}" X11BASE=${X11BASE}

LANGS=		ca cs de es fi fr hu it ko nl pl pt ru sl sv zh_CN

pre-configure:
	${SUBST_CMD} ${WRKSRC}/CMakeLists.txt ${WRKSRC}/common/gestfich.cpp

post-build:
.for l in ${LANGS}
	cd ${WRKSRC}/internat/$l && rm -f *.mo && \
		msgfmt -o kicad.mo kicad.po
.endfor

post-install:
.for l in ${LANGS}
	${INSTALL_DATA_DIR} ${PREFIX}/share/locale/$l/LC_MESSAGES
	${INSTALL_DATA} ${WRKSRC}/internat/$l/kicad.mo \
		${PREFIX}/share/locale/$l/LC_MESSAGES
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/kicad/library
	cd ${PREFIX}/share/doc/kicad/library && \
		tar -xzf ${FULLDISTDIR}/${DOCDIST}
	cd ${PREFIX}/share/doc/kicad/library/doc && \
		mv analog_mux\&switches analog_mux_and_switches
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/kicad \
		${PREFIX}/share/doc/kicad

.include <bsd.port.mk>
@


1.23
log
@
Zap '-O2' optimization
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/07/15 09:02:36 espie Exp $
d13 2
a14 2
REVISION-main=	4
REVISION-docs=	0
d43 1
a43 1
			x11/gtk+2,-guic
@


1.22
log
@bad armani. if you're going to make typos, you should TEST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/07/13 13:03:20 armani Exp $
d13 1
a13 1
REVISION-main=	3
@


1.21
log
@Fix homepage

ok bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/12/12 20:21:45 landry Exp $
d14 1
a14 1
REVISION-doc=	0
@


1.20
log
@Add boost to BDEP, kicad supposedly bundles the parts of boost it needs in
the version we have in-tree, but experience has shown that if systemwide
boost was installed at some point during build then junked by dpb build
was failing. Boo.
Note that in newer releases of kicad those bundled boost headers were removed,
and now cmake downloads boost tarball during build and patch its headers on
the fly. Yay.
https://lists.launchpad.net/kicad-developers/msg10503.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/10/11 11:26:47 sthen Exp $
d13 2
a14 1
REVISION-main=	2
d18 1
a18 1
HOMEPAGE=	http://kicad.sourceforge.net/
@


1.19
log
@fix MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/04/03 07:13:33 ajacoutot Exp $
d34 4
@


1.18
log
@Uneeded build_depends on misc/shared-mime-info.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/10 23:04:45 espie Exp $
d22 1
a22 1
MASTER_SITES=	ftp://iut-tice.ujf-grenoble.fr/cao/
@


1.17
log
@PERMIT/ REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/06/15 08:32:14 ajacoutot Exp $
a34 1
BUILD_DEPENDS=		misc/shared-mime-info
@


1.16
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/04/28 14:08:54 ajacoutot Exp $
a20 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.15
log
@Regen PLIST.

req by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/12/03 19:26:37 ajacoutot Exp $
d13 1
a13 1
REVISION-main=	1
@


1.14
log
@Add dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/05/04 11:59:45 jasper Exp $
d13 1
a13 1
REVISION-main=	0
@


1.13
log
@add master site for the docs. spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/05/03 18:31:14 jasper Exp $
d13 2
d41 2
a42 1
			misc/shared-mime-info
@


1.12
log
@- update kicad to 20100505
* update homepage
* re-order Makefile
* various other tweaks/fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/15 00:22:49 espie Exp $
d24 1
d27 1
a27 1
DISTFILES=	${DISTNAME}.zip ${DOCDIST}
@


1.11
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/11/06 16:07:00 espie Exp $
d3 1
a3 1
COMMENT-main=	circuit drawing and schematic capture
d6 6
a11 6
V=		2007-01-15
DISTNAME=	kicad-sources-${V}
PKGNAME=	kicad-20070115
PKGNAME-main=	kicad-20070115
REVISION-main=	0
PKGNAME-docs=	kicad-docs-20070115
d15 1
a15 1
HOMEPAGE=	http://www.lis.inpg.fr/realise_au_lis/kicad/
d17 1
a17 1
# GPL 
d23 1
a23 2
MASTER_SITES=	ftp://iut-tice.ujf-grenoble.fr/cao/sources/
MASTER_SITES0=	ftp://iut-tice.ujf-grenoble.fr/cao/
d25 4
a28 1
MODULES=	devel/gettext
d32 13
a44 1
WANTLIB-main=	${WANTLIB} GL GLU c m pthread stdc++
d50 1
a50 15
LIB_DEPENDS = x11/wxWidgets
WANTLIB-main += wx_base wx_base_net wx_base_odbc wx_base_xml
WANTLIB-main += wx_gtk2_adv wx_gtk2_core wx_gtk2_dbgrid wx_gtk2_gl 
WANTLIB-main += wx_gtk2_html wx_gtk2_qa wx_gtk2_xrc wx_gtk2_aui 
WANTLIB-main += wx_gtk2_richtext

DOCDIST=	doc_components-2006-12-08.zip
PKGDIST=	kicad-${V}.tgz
DISTFILES=	${DISTNAME}.zip ${PKGDIST}:0 ${DOCDIST}:0
EXTRACT_ONLY=	${DISTNAME}.zip ${PKGDIST}
DIST_SUBDIR=	kicad

WRKDIST=	${WRKDIR}/kicad-dev
MAKE_FILE=	makefile.gtk
USE_GMAKE=	Yes
d55 1
a55 5
KICADBIN=	eeschema pcbnew cvpcb kicad gerbview
LANGS=		de es fr hu it ko pl pt sl

pre-patch:
	@@find ${WRKSRC} -type f -exec perl -pi -e 's/\r$$//' {} \;
d58 1
a58 4
	@@perl -pi -e 's,/usr/bin,${LOCALBASE}/bin,g' \
		${WRKSRC}/common/eda_doc.cpp
	@@perl -pi -e 's,!!LOCALBASE!!,${LOCALBASE},g' \
		${WRKSRC}/common/edaappl.cpp ${WRKSRC}/common/gestfich.cpp
d62 1
a62 1
	cd ${WRKDIR}/kicad/internat/$l && rm -f *.mo && \
d66 1
a66 10
do-install:
.for k in ${KICADBIN}
	${INSTALL_PROGRAM} ${WRKBUILD}/$k/$k ${PREFIX}/bin
.endfor
	${INSTALL_PROGRAM} ${WRKBUILD}/eeschema/plugins/netlist_form_pads-pcb \
		${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/kicad
	cd ${WRKDIR}/kicad && tar -cf - help library modules | tar \
		-C ${PREFIX}/share/kicad -xf -
	rmdir ${PREFIX}/share/kicad/modules/packages3d/conn_HExx
d69 1
a69 1
	${INSTALL_DATA} ${WRKDIR}/kicad/internat/$l/kicad.mo \
d74 1
a74 1
		unzip -q ${FULLDISTDIR}/${DOCDIST}
@


1.10
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/10/24 21:04:39 ajacoutot Exp $
d36 1
a36 1
LIB_DEPENDS = ::x11/wxWidgets
@


1.9
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/10/23 18:35:23 sthen Exp $
d30 1
a30 1
WANTLIB-main=	GL GLU c m pthread stdc++
@


1.8
log
@revision/new lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/19 19:45:54 espie Exp $
a50 1
USE_X11=	Yes
@


1.7
log
@LIB_DEPENDS -> WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/02/02 09:51:05 steven Exp $
d9 2
a10 1
PKGNAME-main=	kicad-20070115p0
@


1.6
log
@fix LIB_DEPENDS after wxWidgets update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/15 21:36:57 simon Exp $
d35 5
a39 1
LIB_DEPENDS= wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_gl,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc,wx_gtk2_aui,wx_gtk2_richtext::x11/wxWidgets
@


1.5
log
@remove surrounding quotes from COMMENT/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/04/16 14:13:14 steven Exp $
d9 1
a9 1
PKGNAME-main=	kicad-20070115
d35 1
a35 1
LIB_DEPENDS= wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_gl,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc::x11/wxWidgets
@


1.4
log
@use .tgz instead of .zip archive which is no longer available
pointed out by david@@ some time ago

regen patches while here. no bump needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/02/11 00:21:11 steven Exp $
d3 2
a4 2
COMMENT-main=	"circuit drawing and schematic capture"
COMMENT-docs=	"documentation for the kicad library of components"
@


1.3
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/02/06 07:16:34 steven Exp $
d38 1
a38 1
PKGDIST=	kicad-${V}.zip
@


1.3.2.1
log
@one distfile changed from .zip to .tgz, no PKGNAME bump needed

noticed by Antti Harri <iku at openbsd.fi>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/02/11 00:21:11 steven Exp $
d38 1
a38 1
PKGDIST=	kicad-${V}.tgz
@


1.2
log
@update to kicad-2007-01-15

also tested by simon@@ and Benoit Lecocq <blq at arcane-labs.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/01/09 16:12:55 steven Exp $
d46 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
V=		2006-08-28
d8 3
a10 3
PKGNAME=	kicad-20060828
PKGNAME-main=	kicad-20060828
PKGNAME-docs=	kicad-docs-20060828
@


1.1.1.1
log
@import kicad-2006-08-28

Kicad is an open source software for the creation of electronic schematic
diagrams and printed circuit board artwork.

with some ideas from freebsd.
also tested by Antti Harri <iku at openbsd.fi>, thanks
@
text
@@
