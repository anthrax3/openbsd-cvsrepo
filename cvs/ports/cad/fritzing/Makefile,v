head	1.30;
access;
symbols
	OPENBSD_6_2:1.30.0.2
	OPENBSD_6_2_BASE:1.30
	OPENBSD_6_1:1.27.0.2
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.24.0.2
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.20.0.6
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.18.0.2
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.17.0.4
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.17.0.2
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.15.0.2
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.2
	OPENBSD_5_0:1.9.0.2
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	jasper_20101509:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.07.26.22.45.16;	author sthen;	state Exp;
branches;
next	1.29;
commitid	tD4MFrpYYDDL2UFT;

1.29
date	2017.07.16.19.18.49;	author espie;	state Exp;
branches;
next	1.28;
commitid	tt0GhWK5c4uf9ILG;

1.28
date	2017.04.10.11.45.24;	author sthen;	state Exp;
branches;
next	1.27;
commitid	XDh1zlSBq0boKsHk;

1.27
date	2017.01.21.18.25.02;	author zhuk;	state Exp;
branches;
next	1.26;
commitid	Ye8Ic6lrVSCce6MA;

1.26
date	2016.03.26.20.37.35;	author zhuk;	state Exp;
branches;
next	1.25;
commitid	OEdThNVtQpfieDxV;

1.25
date	2016.03.07.11.54.12;	author zhuk;	state Exp;
branches;
next	1.24;
commitid	OoxWjxQek5gFTQD0;

1.24
date	2016.01.18.16.49.38;	author sthen;	state Exp;
branches;
next	1.23;
commitid	7IIGpUQpehzm6oNj;

1.23
date	2016.01.18.16.35.54;	author sthen;	state Exp;
branches;
next	1.22;
commitid	p1xbVAUI2OfWa4bS;

1.22
date	2016.01.17.17.29.08;	author sthen;	state Exp;
branches;
next	1.21;
commitid	bS2FIbTCCkF3XjOq;

1.21
date	2015.11.24.15.02.23;	author abieber;	state Exp;
branches;
next	1.20;
commitid	XrLsFt9lYDN1pEjG;

1.20
date	2014.11.04.22.01.53;	author abieber;	state Exp;
branches;
next	1.19;
commitid	ZhJerg50CLbnYSg5;

1.19
date	2014.08.10.09.58.04;	author espie;	state Exp;
branches;
next	1.18;
commitid	jyyOLTDxRdjpw44n;

1.18
date	2014.03.26.16.00.31;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2013.05.10.20.30.30;	author rpe;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.10.23.04.44;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.12.10.54.57;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2012.06.14.09.47.23;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2012.04.26.19.08.00;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2012.04.05.21.02.25;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.09.16.08.48.02;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2011.08.19.07.58.00;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2011.07.20.06.54.43;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.17.14.02.51;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2011.03.15.20.39.58;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.02.06.26.04;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.29.15.21.39;	author edd;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.15.00.22.49;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.24.21.04.39;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.11.09.16.28;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.15.07.14.13;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.09.15.07.14.13;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.30
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.29 2017/07/16 19:18:49 espie Exp $

COMMENT=	interactive electronics designing software

V=		0.9.2
REVISION=	2

GH_ACCOUNT=	fritzing
GH_PROJECT=	fritzing-app
GH_TAGNAME=	${V}b

DISTNAME=	fritzing-$Vb
CATEGORIES=	cad

DISTFILES=	${DISTNAME}.tar.gz \
		fritzing-parts-${GH_TAGNAME}${EXTRACT_SUFX}:0

HOMEPAGE=	http://fritzing.org/

MAINTAINER=	Aaron Bieber <abieber@@openbsd.org>

MASTER_SITES0= https://github.com/fritzing/fritzing-parts/archive/${GH_TAGNAME}/

# Code: GPLv3+
# Rest: CreativeCommons:BY-SA
PERMIT_PACKAGE_CDROM =	Yes

MODULES=        devel/qmake x11/qt4
NO_TEST=	Yes

LIB_DEPENDS=	comms/qtserialport
BUILD_DEPENDS=	devel/boost
RUN_DEPENDS=	devel/desktop-file-utils

# avoid picking up /src/serialport/qt4support/serialport.prf
MODQMAKE_ARGS+=	QTSERIALPORT_PROJECT_ROOT=${WRKDIR}

post-extract:
	mv ${WRKDIR}/fritzing-parts-${GH_TAGNAME}/* ${WRKSRC}/parts

pre-configure:
	${SUBST_CMD} ${WRKSRC}/phoenix.pro ${WRKSRC}/src/fapplication.cpp

WANTLIB += ICE QtGui QtNetwork QtSql QtSvg QtXml SM X11 Xext Xi
WANTLIB += Xinerama Xrender c fontconfig freetype m pthread ${COMPILER_LIBCXX}
WANTLIB += z lib/qt4/QtSerialPort

# -DLINUX_32 gets added to CFLAGS, though it's only used to figure out
# if there is a newer version of the 32-bit Linux binary on the upstream
# webpage. So it's safe to set it on all arches (for now).

do-install:
	${SUBST_PROGRAM} ${FILESDIR}/fritzing.sh ${PREFIX}/bin/fritzing
	${INSTALL_PROGRAM} ${WRKBUILD}/Fritzing ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/fritzing/
	cd ${WRKSRC}; tar cf - bins help parts pdb resources sketches tools translations | \
		tar xf - -C ${PREFIX}/share/fritzing/
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	${SUBST_DATA} ${FILESDIR}/fritzing.desktop \
		${PREFIX}/share/applications/fritzing.desktop

.include <bsd.port.mk>
@


1.29
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/04/10 11:45:24 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.28
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2017/01/21 18:25:02 zhuk Exp $
d45 1
a45 1
WANTLIB += Xinerama Xrender c fontconfig freetype m pthread ${LIBCXX}
@


1.27
log
@Having comms/qtserialport and x11/qt5/qtserialport not conflicting
is not enough for stable builds: all their dependees should depend
on either <5.6 or >=5.6 version as well.

Issue reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/03/26 20:37:35 zhuk Exp $
d45 1
a45 1
WANTLIB += Xinerama Xrender c fontconfig freetype m pthread stdc++
@


1.26
log
@Zap more lines from qmake-based ports by moving them from
the "MODULES=x11/qtX + CONFIGURE_STYLE=qmake" logic to
the "MODULES=devel/qmake x11/qtX" logic.

Discussed with espie@@ a few weeks ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/03/07 11:54:12 zhuk Exp $
d6 1
a6 1
REVISION=	0
@


1.25
log
@Move to MODQMAKE, +3 Makefile lines - but we have a bonus of "cp => mv"
converstion here, reducing build time significantly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/01/18 16:49:38 sthen Exp $
d28 1
a28 2
MODULES=        x11/qt4
CONFIGURE_STYLE=qmake
@


1.24
log
@third time lucky: comms/qtserialport should be an LDEP not a BDEP
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/01/17 17:29:08 sthen Exp $
d29 1
d36 6
a42 1
	cp -rp ${WRKDIR}/fritzing-parts-${GH_TAGNAME}/* ${WRKSRC}/parts
a51 3
do-configure:
	cd ${WRKSRC} && \
		${LOCALBASE}/bin/qmake4 -o Makefile phoenix.pro
d55 1
a55 1
	${INSTALL_PROGRAM} ${WRKSRC}/Fritzing ${PREFIX}/bin
@


1.23
log
@obviously I didn't have enough coffee yesterday -
WANTLIB should be lib/qt4/QtSerialPort not just QtSerialPort.
@
text
@d31 2
a32 3
BUILD_DEPENDS=	comms/qtserialport \
		devel/boost

@


1.22
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/11/24 15:02:23 abieber Exp $
d42 1
a42 1
WANTLIB += z QtSerialPort
@


1.21
log
@Update fritzing to the latest. Releases have moved to github, so should
be less churn in the weird whay they cut their dist files (now zip.. now
tar_1.bz2.. now..)

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/11/04 22:01:53 abieber Exp $
d6 1
d42 1
a42 1
WANTLIB += z
@


1.20
log
@Update to the latest version.
Changlog here: http://fritzing.org/download/history-changes/

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/08/10 09:58:04 espie Exp $
d5 7
a11 3
V=		0.9.0
DISTNAME=	fritzing-$Vb.source
PKGNAME=	fritzing-$V
d14 3
d21 2
a26 8
MASTER_SITES=	${HOMEPAGE}download/$Vb/source-tarball/
EXTRACT_SUFX=	.tar_1.bz2

EXTRACT_CASES=	*.tar_1.bz2) tar -jxf ${FULLDISTDIR}/$$archive ;;

WANTLIB += QtGui QtNetwork QtSql QtSvg QtXml c m pthread stdc++ z
WANTLIB += ICE SM X11 Xext Xi Xinerama Xrender fontconfig freetype

d30 3
a32 1
BUILD_DEPENDS=	devel/boost
d36 1
d38 4
@


1.19
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/03/26 16:00:31 jasper Exp $
d5 1
a5 1
V=		0.8.7
d12 2
d19 3
a21 1
EXTRACT_SUFX=	.tar.bz2
@


1.18
log
@update to fritzing-0.8.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/05/10 20:30:30 rpe Exp $
d39 1
a39 2
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} -c \
		${FILESDIR}/fritzing.sh ${PREFIX}/bin/fritzing
d45 1
a45 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/fritzing.desktop \
@


1.17
log
@Use -m mode with ${SUBST_CMD} instead of two-step process
SUBST_CMD / chmod. Replace -o root -g bin with -o ${BINOWN}
and -g ${BINGRP}.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/10 23:04:44 espie Exp $
d5 1
a5 1
V=		0.7.7
a27 3
# XXX: Sigh...words fail me.
WRKDIST=	${WRKDIR}/fritzing-0.7.6b.source

a29 1
	cd ${WRKSRC} && rm -r src/lib/boost_1_43_0
d43 1
a43 1
	cd ${WRKSRC}; tar cf - bins parts resources sketches tools translations | \
@


1.16
log
@PERMIT/ REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/09/12 10:54:57 jasper Exp $
d43 2
a44 3
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -c ${FILESDIR}/fritzing.sh \
		${PREFIX}/bin/fritzing
	chmod ${BINMODE} ${PREFIX}/bin/fritzing
@


1.15
log
@- update to 0.7.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/06/14 09:47:23 landry Exp $
a14 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d23 1
a23 1
NO_REGRESS=	Yes
@


1.14
log
@x11/qt4,-sqlite was folded back to x11/qt4, remove explicit dependencies
on it and bump REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/04/26 19:08:00 jasper Exp $
d5 1
a5 1
V=		0.7.4
a8 1
REVISION=	0
a11 2
MAINTAINER=	Jasper Lievisse Adriaanse <jasper@@openbsd.org>

d30 3
@


1.13
log
@- update to 0.7.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/04/05 21:02:25 jasper Exp $
d9 1
d32 1
a32 2
RUN_DEPENDS=	devel/desktop-file-utils \
		x11/qt4,-sqlite
@


1.12
log
@- update to 0.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/09/16 08:48:02 espie Exp $
d5 1
a5 1
V=		0.7.1
@


1.11
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/08/19 07:58:00 jasper Exp $
d5 2
a6 2
V=		0.6.3
DISTNAME=	fritzing.$V.source
a8 1
REVISION =	0
d21 1
a21 1
MASTER_SITES=	${HOMEPAGE}/download/$Vb/source-tarball/
d24 2
a25 1
WANTLIB +=	QtGui QtNetwork QtSql QtSvg QtXml c m pthread stdc++ z
a32 2

WRKDIST= 	${WRKDIR}/fritzing.2011.08.18.source/
@


1.10
log
@- update to 0.6.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/07/20 06:54:43 jasper Exp $
d9 1
@


1.9
log
@- update fritzing to 0.6.2
* among the many changes are support for SMD parts and a sparkfun parts bin
- remove ONLY_FOR_ARCHS since it doesn't depend on qtwebkit anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/03/17 14:02:51 jasper Exp $
d5 2
a6 2
V=		0.6.2b
DISTNAME=	fritzing.2011.07.11.source
d21 1
a21 1
MASTER_SITES=	${HOMEPAGE}/download/$V/source-tarball/
d32 2
@


1.8
log
@passing '-unix' to qmake4 is deprecated so remove it.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.7 2011/03/15 20:39:58 jasper Exp $

ONLY_FOR_ARCHS =${GCC4_ARCHS}
d5 2
a6 2
V=		0.5.2b
DISTNAME=	fritzing.2011.02.18.source
a7 1
REVISION=	0
d24 1
a24 2
WANTLIB +=	QtGui QtNetwork QtSql QtSvg QtWebKit QtXml
WANTLIB +=	c m pthread stdc++ z
d35 1
a35 1
	cd ${WRKSRC} && rm -fr src/lib/boost_1_43_0
@


1.7
log
@- don't use the internal boost copy

from fedora
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/03/02 06:26:04 jasper Exp $
d46 1
a46 1
		${LOCALBASE}/bin/qmake4 -unix -o Makefile phoenix.pro
@


1.6
log
@- update fritzing to 0.5.2b

(ports is unlocked, but no new files/directories/imports!, if in doubt, ask!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/12/29 15:21:39 edd Exp $
d10 1
d33 1
d38 2
a39 1
	${SUBST_CMD} ${WRKSRC}/src/fapplication.cpp
@


1.5
log
@Fix missing sqlite run depend for fritzing. Also fix WANTLIB while we are at it.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/15 00:22:49 espie Exp $
d7 2
a8 3
V=		0.4.3b
DISTNAME=	fritzing.2010.10.01.source
REVISION =	0
@


1.4
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/24 21:04:39 ajacoutot Exp $
d9 1
d27 2
a28 2
WANTLIB +=	QtDBus QtGui QtNetwork QtSql QtSvg QtWebKit QtXml QtXmlPatterns
WANTLIB +=	phonon c m pthread sqlite3 stdc++ z
d33 2
a34 1
RUN_DEPENDS=	devel/desktop-file-utils
@


1.3
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/11 09:16:28 jasper Exp $
a28 2
LIB_DEPENDS=	::x11/qt4

d32 1
a32 1
RUN_DEPENDS=	::devel/desktop-file-utils
@


1.2
log
@- update fritzing to 0.4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/09/15 07:14:13 jasper Exp $
a31 1
USE_X11=	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 2
a8 2
V=		0.4.2b
DISTNAME=	fritzing.2010.08.06.source
@


1.1.1.1
log
@import fritzing 0.4.2

Fritzing is essentially Electronic Design Automation software suited to the 
needs of designers and artists. It uses the metaphor of the breadboard, 
so that it is easy to transfer a hardware sketch to the software by using a 
drag-and-drop-based GUI to copy your sketch. From there it is possible 
to create PCB layouts for turning your prototype into a robust PCB, 
either on your own, or with the help of a manufacturer.

ok ajacoutot@@
@
text
@@
