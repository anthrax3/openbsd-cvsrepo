head	1.3;
access;
symbols
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.1.1.0.4
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.2
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	naddy_20010811:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2002.12.09.17.35.57;	author margarida;	state dead;
branches;
next	1.2;

1.2
date	2002.05.17.18.39.46;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.11.14.45.26;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.08.11.14.45.26;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to version 1.5.4;

Changes:
Examples installed in $PREFIX/examples/qcad.
Uses qt3, so respective patches are now deprecated.
Larger library of premade objects included.
Better font and translation support.
Various bugfixes.

From: MAINTAINER.

brad@@ ok
@
text
@$OpenBSD: patch-rconfig_cpp,v 1.2 2002/05/17 18:39:46 naddy Exp $
--- rconfig.cpp.orig	Sun Mar 25 03:17:10 2001
+++ rconfig.cpp	Wed May 15 00:34:59 2002
@@@@ -29,6 +29,8 @@@@
 #include "rinitialdialog.h"
 #include "rlog.h"
 
+QString instPrefix = PREFIX;
+
 /**
  * \class RConfig
  * Class RConfig provides access to global settings.
@@@@ -176,7 +178,7 @@@@ RConfig::ini()
   addSetting( "Print:PrintAdjustmentFactor", "1.0");
 
   addSetting( "Paths:BrowserPath", (RUNNING_WINDOWS ? "C:\\Progra~1\\Intern~1\\Iexplore.exe" : "netscape"));
-  addSetting( "Paths:LibraryPath1", "/usr/share/qcad/libraries" );
+  addSetting( "Paths:LibraryPath1", instPrefix+"/share/qcad/libraries" );
 
   verbose=false;
 }
@@@@ -404,7 +406,7 @@@@ RConfig::createLanguageList()
     newLanguage = new languageStruct;
     newLanguage->name = "English";
     newLanguage->sign = "en";
-    newLanguage->charset = QFont::Latin1;
+    //    newLanguage->charset = QFont::Latin1;
     languageList.append(newLanguage);
     
     if (langFile.open(IO_ReadOnly)) {
@@@@ -421,7 +423,7 @@@@ RConfig::createLanguageList()
             newLanguage = new languageStruct;
             newLanguage->name = name;
             newLanguage->sign = sign;
-            newLanguage->charset = mtStringToCharset(charset);
+	    //      newLanguage->charset = mtStringToCharset(charset);
 
             languageList.append(newLanguage);
         }
@@@@ -457,34 +459,33 @@@@ RConfig::readQmFile()
     }
 
     // Add charset for this language to the settings
+   /*
+    * CharSet is obsolete because Qt now does this for us
+    *
     if (getSetting("Application:Charset").isEmpty()) {
         addSetting("Application:Charset",
                    mtCharsetToString(getLanguageCharset(getLanguageName(getSetting("Language:Language")))));
     }
+    */
 
     // Ini fonts:
     //
     font0 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize0"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
+                       false );
     font1 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize1"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
+                       false );
     font2 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize2"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
+                       false );
     font3 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize3"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
-
+                       false );
     return true;
 }
 
@@@@ -514,7 +515,7 @@@@ const
 
   // Search in /usr/share/qcad/... dir:
   if(!QFileInfo(path).exists()) {
-    path = QString("/usr/share/")+DEF_APPNAME_L+"/"+_relPath;
+    path = instPrefix+"/share/"+DEF_APPNAME_L+"/"+_relPath;
   }
 #endif
 
@@@@ -559,7 +560,9 @@@@ RConfig::getLanguageName( QString _langu
 }
 
 
-
+/*
+ * Now handeled my Qt internally
+ *
 QFont::CharSet
 RConfig::getLanguageCharset( QString _languageName )
 {
@@@@ -572,7 +575,7 @@@@ RConfig::getLanguageCharset( QString _la
 
   return QFont::Latin1;
 }
-
+*/
 
 
 
@


1.2
log
@* qt2 -> qt3; from maintainer Jacob Meuser <jakemsr@@jakemsr.com>
* don't install useless docs
@
text
@d1 1
a1 1
$OpenBSD: patch-rconfig_cpp,v 1.1.1.1 2001/08/11 14:45:26 naddy Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ rconfig.cpp	Thu Aug  9 03:32:20 2001
d22 62
a83 1
@@@@ -514,7 +516,7 @@@@ const
d91 20
@


1.1.1.1
log
@Import of QCad 1.4.7.
Submitted by Jacob Meuser <jakemsr@@clipper.net>.

QCad is a free open-source 2D CAD system for *nix.  The developers' main
goals are to build a stable, fast and easy to use CAD for everyone.  One
doesn't need any knowledge of a CAD program to start working with QCad.
@
text
@@
