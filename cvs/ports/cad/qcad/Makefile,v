head	1.26;
access;
symbols
	OPENBSD_6_0:1.25.0.14
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.25.0.10
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.25.0.12
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.25.0.8
	OPENBSD_5_7_BASE:1.25
	OPENBSD_5_6:1.25.0.6
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.25.0.4
	OPENBSD_5_5_BASE:1.25
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.24.0.4
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.2
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.21.0.4
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.21.0.2
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.19.0.2
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.17.0.2
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.16.0.8
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.6
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.4
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.2
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.15.0.4
	OPENBSD_4_2_BASE:1.15
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.11.0.8
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.6
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.4
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.11.0.2
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.9.0.6
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.4
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.9.0.2
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	naddy_20010811:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2017.03.04.11.38.42;	author espie;	state Exp;
branches;
next	1.25;
commitid	xgoEtgZ8fzdsApJm;

1.25
date	2013.03.10.23.04.45;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2012.06.09.11.26.02;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.12.02.20.58.45;	author kili;	state Exp;
branches;
next	1.22;

1.22
date	2011.09.16.08.48.02;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.24.21.04.39;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.23.18.35.23;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2010.07.06.22.25.53;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.06.07.20.08.09;	author kili;	state Exp;
branches;
next	1.17;

1.17
date	2009.08.10.06.30.30;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2007.09.15.21.36.57;	author simon;	state Exp;
branches;
next	1.15;

1.15
date	2007.01.09.16.30.37;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2006.12.02.20.24.17;	author pvalchev;	state Exp;
branches;
next	1.13;

1.13
date	2006.11.13.10.08.12;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2006.11.04.19.19.15;	author kili;	state Exp;
branches;
next	1.11;

1.11
date	2004.11.21.21.41.23;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2004.08.10.08.12.09;	author xsa;	state Exp;
branches;
next	1.9;

1.9
date	2003.02.26.10.41.11;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2002.12.09.17.35.57;	author margarida;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.17.18.38.55;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.11.00.31.22;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2002.04.07.15.32.34;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.11.14.07.43.59;	author heko;	state Exp;
branches;
next	1.3;

1.3
date	2001.10.28.12.30.13;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.27.09.29.28;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.11.14.45.21;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.08.11.14.45.21;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.26
log
@let qcad build without the gcc/g++ links
ironically enough, this has nothing to do with qmake.
@
text
@# $OpenBSD: Makefile,v 1.25 2013/03/10 23:04:45 espie Exp $

COMMENT=	Qt-based 2D CAD system

V=		2.0.5.0
DISTNAME=	qcad-${V}-1-community.src
PKGNAME=	qcad-${V}
REVISION=	4
CATEGORIES=	cad graphics

HOMEPAGE=	http://www.ribbonsoft.com/qcad.html

# Source code is GPLv2 and data not specified
PERMIT_PACKAGE_CDROM=	Non-free data files
PERMIT_PACKAGE_FTP=	Non-free data files
PERMIT_DISTFILES_FTP=	Non-free data files

WANTLIB=		X11 Xext c m pthread stdc++

MASTER_SITES=	http://www.ribbonsoft.com/archives/qcad/

MODULES=	x11/qt3

USE_GMAKE=	Yes
NO_TEST=	Yes

PORTHOME=	${WRKDIR}

MAKE_ENV+=	QTDIR=${MODQT_LIBDIR} \
		MAKE=${MAKE_PROGRAM}

SUBST_VARS=	CXXFLAGS LOCALBASE MODQT_LIBDIR

pre-configure:
	${SUBST_CMD} ${WRKSRC}/mkspecs/defs.pro \
		${WRKSRC}/qcadlib/src/engine/rs_system.h \
		${WRKSRC}/qcadlib/src/engine/rs_system.cpp \
		${WRKSRC}/qcad/src/qc_applicationwindow.cpp

do-build:
	cd ${WRKBUILD}/scripts && \
		${SETENV} ${MAKE_ENV} /bin/sh ./build_qcad.sh

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/qcad/qcad ${PREFIX}/bin
.for dir in fonts patterns qm
	${INSTALL_DATA_DIR} ${PREFIX}/share/qcad/${dir}
	${INSTALL_DATA} ${WRKSRC}/qcad/${dir}/* ${PREFIX}/share/qcad/${dir}
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/qcad
	${INSTALL_DATA} ${WRKSRC}/qcad/data/* ${PREFIX}/share/examples/qcad
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/qcad
	cd ${WRKSRC}/qcad/doc && tar cf - . | \
		tar -C ${PREFIX}/share/doc/qcad -xf -
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/doc/qcad/*

.include <bsd.port.mk>
@


1.25
log
@PERMIT/ REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/06/09 11:26:02 sthen Exp $
d8 1
a8 1
REVISION=	3
@


1.24
log
@zap quotes in PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/12/02 20:58:45 kili Exp $
a15 1
PERMIT_DISTFILES_CDROM=	Non-free data files
d25 1
a25 1
NO_REGRESS=	Yes
@


1.23
log
@Not quite QPL. Noticed by Antti Harri, who also has a new port
cad/librecad (a fork of qcad) in work.

Some more details about the license problens are available at:

        http://www.ribbonsoft.com/qcad_downloads.html

and

        http://blog.librecad.org/2011/10/1-0-0-rc4-released/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/09/16 08:48:02 espie Exp $
d14 4
a17 4
PERMIT_PACKAGE_CDROM=	"Non-free data files"
PERMIT_PACKAGE_FTP=	"Non-free data files"
PERMIT_DISTFILES_CDROM=	"Non-free data files"
PERMIT_DISTFILES_FTP=	"Non-free data files"
@


1.22
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/24 21:04:39 ajacoutot Exp $
d8 1
a8 1
REVISION=	2
d13 5
a17 5
# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.21
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/23 18:35:23 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.20
log
@revision/new lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/07/06 22:25:53 espie Exp $
a25 1
USE_X11=	Yes
@


1.19
log
@zap reeeally old variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/06/07 20:08:09 kili Exp $
d7 2
a8 1
PKGNAME=	qcad-${V}p1
d18 1
@


1.18
log
@Fix build for gcc4.

Add some cleanups from Antti Harri <iku@@openbsd.fi>.

This does not include the patch that reorders recently
used files for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/08/10 06:30:30 kili Exp $
a21 1
MODQT_MT=	Yes
@


1.17
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/09/15 21:36:57 simon Exp $
d7 1
a7 1
PKGNAME=	qcad-${V}p0
d12 1
a12 1
# GPL
d17 1
a17 1
WANTLIB=		X11 Xext c m pthread pthread-stubs stdc++ xcb
d33 2
d36 3
a38 6
	@@perl -pi -e 's,!!CXXFLAGS!!,${CXXFLAGS},' ${WRKSRC}/mkspecs/defs.pro
	@@perl -pi -e 's,!!DOCDIR!!,${PREFIX}/share/doc/qcad,' \
		${WRKSRC}/qcadlib/src/engine/rs_system.h
	@@perl -pi -e 's,!!LOCALBASE!!,${LOCALBASE},' \
		${WRKSRC}/qcadlib/src/engine/rs_system.cpp
	@@perl -pi -e 's,!!QTDIR!!,${MODQT_LIBDIR},' \
@


1.16
log
@remove surrounding quotes from COMMENT/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/01/09 16:30:37 steven Exp $
d7 1
a7 1
PKGNAME=	qcad-${V}
d17 1
a17 1
WANTLIB=		X11 Xext c m pthread stdc++
@


1.15
log
@update to qcad 2.0.5.0

problem on amd64 fixed by Martynas Venckus, thanks

also tested by ckuethe, ajacoutot, Antti Harri, and Andreas Bihlmaier
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=	"Qt-based 2D CAD system"
@


1.14
log
@Remove jakemsr@@ from maintainer position, as he has been inactive and
email has been bouncing for several months.  Jacob, if you get this
and/or get back to things, let us know.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/11/13 10:08:12 steven Exp $
d3 1
a3 1
COMMENT=		"Qt-based 2D CAD system"
d5 4
a8 4
DISTNAME=		qcad-1.5.4
PKGNAME=		${DISTNAME}p0
DISTFILES=		${DISTNAME}-src.tar.gz
CATEGORIES=     	cad x11
d10 1
a10 1
HOMEPAGE=		http://www.qcad.org/
d13 5
a17 5
PERMIT_PACKAGE_CDROM=	Yes 
PERMIT_PACKAGE_FTP=	Yes 
PERMIT_DISTFILES_CDROM=	Yes 
PERMIT_DISTFILES_FTP=	Yes 
WANTLIB=		X11 c m pthread stdc++
d19 1
a19 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=qcad/}
d23 2
d26 3
d30 2
a31 8
MAKE_FLAGS= \
	CXX='${CXX}' \
	CXXFLAGS='${CXXFLAGS} -pthread -Wall -DQT_NO_DEBUG -DDATADIR=\"${PREFIX}/share\"' \
	INCPATH='-I${MODQT_INCDIR}' \
	LINK='${CXX}' \
	LFLAGS='' \
	LIBS='-pthread -L${MODQT_LIBDIR} -L${LOCALBASE}/lib -lqt-mt -L${X11BASE}/lib -lX11' \
	AR='ar cq'
d33 12
a44 2
ALL_TARGET=		qcad
NO_REGRESS=		Yes
d47 2
a48 5
	chmod ${DIRMODE} ${WRKSRC}/libraries/mechanical/screws/chc
	${INSTALL_PROGRAM} ${WRKBUILD}/qcad ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/qcad
	${INSTALL_DATA} ${WRKSRC}/examples/* ${PREFIX}/share/examples/qcad
.for dir in cur fonts hatches messages xpm
d50 1
a50 1
	${INSTALL_DATA} ${WRKSRC}/${dir}/* ${PREFIX}/share/qcad/${dir}
d52 2
a53 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/qcad/libraries
	cd ${WRKSRC}/libraries; cp -R * ${PREFIX}/share/qcad/libraries 
d55 3
a57 1
	cd ${WRKSRC}/doc; cp -R * ${PREFIX}/share/doc/qcad 
@


1.13
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/11/04 19:19:15 kili Exp $
d6 1
a10 2

MAINTAINER=		Jacob Meuser <jakemsr@@jakemsr.com>
@


1.12
log
@Avoid references to PKGNAME.
Remove noops like WRKDIST=${WRKDIR}/${DISTNAME}.
Drop DIST_SUBDIR where appropriate.

Problem mentioned by naddy.
Some simplifications and ok, steven.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/11/21 21:41:23 espie Exp $
d24 1
@


1.11
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/08/10 08:12:09 xsa Exp $
d5 2
a6 2
PKGNAME=		${DISTNAME:S/-src//}
DISTNAME=		qcad-1.5.4-src
a35 1
WRKDIST=		${WRKDIR}/${PKGNAME}
@


1.10
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/02/26 10:41:11 espie Exp $
d18 1
@


1.9
log
@switch to qt3-mt, ok maint.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/12/09 17:35:57 margarida Exp $
d21 1
a21 1
MODULES=	qt3
@


1.8
log
@Update to version 1.5.4;

Changes:
Examples installed in $PREFIX/examples/qcad.
Uses qt3, so respective patches are now deprecated.
Larger library of premade objects included.
Better font and translation support.
Various bugfixes.

From: MAINTAINER.

brad@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/05/17 18:38:55 naddy Exp $
d22 1
d26 1
a26 1
	CXXFLAGS='${CXXFLAGS} -Wall -DQT_NO_DEBUG -DDATADIR=\"${PREFIX}/share\"' \
d30 1
a30 1
	LIBS='-L${MODQT_LIBDIR} -L${LOCALBASE}/lib -lqt -L${X11BASE}/lib -lX11' \
@


1.7
log
@* qt2 -> qt3; from maintainer Jacob Meuser <jakemsr@@jakemsr.com>
* don't install useless docs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/05/11 00:31:22 espie Exp $
d6 1
a6 1
DISTNAME=		qcad-1.4.7-src
a7 1
NEED_VERSION=		1.528
d19 1
a19 1
MASTER_SITES=		${HOMEPAGE}archives/
d24 2
a25 2
	CC='${CXX}' \
	CFLAGS='-Wall ${CXXFLAGS} -DPREFIX=\"${PREFIX}\"' \
d29 2
a30 1
	LIBS='-L${MODQT_LIBDIR} -L${LOCALBASE}/lib -lqt -L${X11BASE}/lib -lX11' 
d32 1
d34 1
d37 1
d39 3
a41 1
.for dir in cur fonts hatches messages examples xpm
@


1.6
log
@uniformize maintainer addresses.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.5 2002/04/07 15:32:34 naddy Exp $

NOT_FOR_ARCHS=	alpha
d8 1
a8 1
NEED_VERSION=		1.497
d22 1
a22 1
MODULES=	qt2
d26 2
a27 2
	CFLAGS='${CXXFLAGS} -DPREFIX=\"${PREFIX}\"' \
	INCPATH='-I${LOCALBASE}/include -I${MODQT_INCDIR}' \
a33 2
DOCS=			AUTHORS COPYING INSTALL MANIFEST README TODO

a43 1
	cd ${WRKSRC}; ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/qcad
@


1.5
log
@Broken on alpha.
gcc 2.95.3 won't even build it with standard -O2 optimization,
and when compiled without it still crashes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/11/14 07:43:59 heko Exp $
d14 1
a14 1
MAINTAINER=		Jacob Meuser <jakemsr@@clipper.net>
@


1.4
log
@NO_REGRESS from maintainer Jacob Meuser <jakemsr@@clipper.net>
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.2 2001/08/27 09:29:28 espie Exp $
@


1.3
log
@Use full path for libqt and libqt2
Bump need version.
@
text
@d8 1
a8 1
NEED_VERSION=		1.483
d31 2
@


1.2
log
@Use module qt2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/08/11 14:45:21 naddy Exp $
d8 1
a8 1
NEED_VERSION=		1.447
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
NEED_VERSION=		1.427
d22 1
a22 1
LIB_DEPENDS=		qt.2::x11/qt2
d27 1
a27 1
	INCPATH='-I${LOCALBASE}/include -I${LOCALBASE}/include/X11/qt2' \
d30 1
a30 2
	LIBS='-L${LOCALBASE}/lib/qt2 -L${LOCALBASE}/lib -lqt -L${X11BASE}/lib -lX11' \
	MOC='${LOCALBASE}/lib/qt2/bin/moc'
@


1.1.1.1
log
@Import of QCad 1.4.7.
Submitted by Jacob Meuser <jakemsr@@clipper.net>.

QCad is a free open-source 2D CAD system for *nix.  The developers' main
goals are to build a stable, fast and easy to use CAD for everyone.  One
doesn't need any knowledge of a CAD program to start working with QCad.
@
text
@@
