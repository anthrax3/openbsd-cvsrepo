head	1.4;
access;
symbols
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.4
date	2014.11.29.07.38.18;	author brad;	state dead;
branches;
next	1.3;
commitid	sCBU2ZBlW8fz9pOW;

1.3
date	2013.03.23.23.28.14;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2013.01.08.23.55.14;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2011.08.29.09.54.51;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to libdvdcss 1.3.0.
@
text
@$OpenBSD: patch-configure_ac,v 1.3 2013/03/23 23:28:14 brad Exp $
--- configure.ac.orig	Wed Feb 27 05:05:35 2013
+++ configure.ac	Sun Mar 10 22:32:05 2013
@@@@ -222,12 +222,14 @@@@ CC_FLAG_VISIBILITY([
 AM_CONDITIONAL(SYS_MSVC, test "${SYS_MSVC}" = "1")
 
 AC_ARG_ENABLE([doc],
-  AS_HELP_STRING([--disable-apidoc], [Disable building (with Doxygen) and intalling API documentation @@<:@@default=auto@@:@@>]))
+  AS_HELP_STRING([--disable-doc], [Disable building (with Doxygen) and intalling API documentation @@<:@@default=auto@@:@@>]))
 
-AC_PATH_PROG([DOXYGEN], [doxygen])
+AS_IF([test "x$enable_doc" != "xno"], [
+  AC_PATH_PROG([DOXYGEN], [doxygen])
+])
 
 AS_IF([test "x$DOXYGEN" = "x"], [
-  AS_IF([test "x$enable_apidoc" = "xyes"], [
+  AS_IF([test "x$enable_doc" = "xyes"], [
     AC_MSG_ERROR([You need Doxygen to build API documentation])
   ])
 ])
@


1.3
log
@Update to libdvdcss 1.2.13.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.2 2013/01/08 23:55:14 brad Exp $
@


1.2
log
@Back port the ELF visibility support.

ok sthen@@
@
text
@d1 5
a5 6
$OpenBSD: patch-configure_ac,v 1.1 2011/08/29 09:54:51 espie Exp $
--- configure.ac.orig	Sun Mar 11 19:07:47 2012
+++ configure.ac	Wed Oct  3 03:11:03 2012
@@@@ -1,4 +1,4 @@@@
-AC_INIT(src/libdvdcss.c)
+AC_INIT(libdvdcss, 1.2.12)
d7 3
a9 25
 AC_PREREQ(2.50)
 AC_CONFIG_AUX_DIR(.auto)
@@@@ -180,6 +180,24 @@@@ AC_CACHE_CHECK([if \$CC accepts -Wsign-compare],
      AC_TRY_COMPILE([],,ac_cv_c_Wsign_compare=yes, ac_cv_c_Wsign_compare=no)])
 if test "${ac_cv_c_Wsign_compare}" != "no"; then
     CFLAGS_save="-Wsign-compare ${CFLAGS_save}"
+fi
+
+CFLAGS="${CFLAGS_save}"
+
+dnl
+dnl  Check if the compiler supports ELF visibility
+dnl
+CFLAGS_save="$CFLAGS"
+
+AC_CACHE_CHECK([if \$CC supports ELF visibility],
+    [ac_cv_c_visibility],
+    [CFLAGS="-fvisibility=hidden ${CFLAGS_save}"
+     AC_TRY_COMPILE([],
+                    [__attribute__((visibility("default"))) extern int visible],
+                    ac_cv_c_visibility=yes, ac_cv_c_visibility=no)])
+if test "${ac_cv_c_visibility}" != "no"; then
+    CFLAGS_save="-fvisibility=hidden ${CFLAGS_save}";
+    AC_DEFINE(HAVE_VISIBILITY, 1, Support ELF visibility.)
 fi
d11 11
a21 1
 CFLAGS="${CFLAGS_save}"
@


1.1
log
@update to 1.2.10, add negative caching to keys
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.ac.orig	Fri Aug 29 20:59:00 2008
+++ configure.ac	Wed Aug 17 11:51:22 2011
d6 1
a6 1
+AC_INIT(libdvdcss, 1.2.10)
d10 25
@

