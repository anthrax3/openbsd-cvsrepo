head	1.2;
access;
symbols
	OPENBSD_3_1:1.1.1.1.0.16
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.14
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.12
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.10
	OPENBSD_2_8_BASE:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.8
	OPENBSD_2_7_BASE:1.1.1.1
	OPENBSD_2_6:1.1.1.1.0.6
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.4
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	angelos_04291998:1.1.1.1
	mpack:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2002.08.09.01.15.19;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	98.04.29.05.07.09;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.04.29.05.07.09;	author angelos;	state Exp;
branches
	1.1.1.1.16.1;
next	;

1.1.1.1.16.1
date	2002.08.09.21.01.50;	author naddy;	state dead;
branches;
next	;


desc
@@


1.2
log
@SECURITY fixes, submitted by Nick Nauwelaerts <nick@@wanadoo.be>:

* Fix buffer overflow.  (Obtained from Debian)
* Strip leading "../" when creating new files.  (Obtained from Debian)

Clean-up by yours truly:

* Parameter parsing fix.  (Obtained from Debian)
* Prefer native getopt() and MD5 functions over the included ones.
* Make munpack synopsis agree with actual parameters.
* Respect CC.
@
text
@*** unixos.c.bak	Fri Feb 17 00:39:50 1995
--- unixos.c	Mon Nov 11 10:19:28 1996
***************
*** 89,95 ****
--- 89,99 ----
  	strcpy(buf, getenv("TMPDIR"));
      }
      else {
+ #ifdef __OpenBSD__
+ 	strcpy(buf, "/var/tmp");
+ #else
  	strcpy(buf, "/usr/tmp");
+ #endif
      }
      strcat(buf, "/m-prts-");
      p = getenv("USER");
*** unixpk.man.bak	Fri Feb 17 00:39:50 1995
--- unixpk.man	Mon Nov 11 10:19:46 1996
***************
*** 136,142 ****
  .SH ENVIRONMENT
  .TP
  .B TMPDIR
! Directory to store temporary files.  Default is /usr/tmp.
  .TP
  .B SPLITSIZE
  Default value of the -m switch.
--- 136,142 ----
  .SH ENVIRONMENT
  .TP
  .B TMPDIR
! Directory to store temporary files.  Default is /var/tmp.
  .TP
  .B SPLITSIZE
  Default value of the -m switch.
*** unixunpk.man.bak	Fri Feb 17 00:39:50 1995
--- unixunpk.man	Mon Nov 11 10:19:59 1996
***************
*** 107,113 ****
  .SH ENVIRONMENT
  .TP
  .B TMPDIR
! Directory to store temporary files.  Default is /usr/tmp.
  .SH FILES
  .TP
  .B $TMPDIR/m-prts-$USER/
--- 107,113 ----
  .SH ENVIRONMENT
  .TP
  .B TMPDIR
! Directory to store temporary files.  Default is /var/tmp.
  .SH FILES
  .TP
  .B $TMPDIR/m-prts-$USER/
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@mpack port.
@
text
@@


1.1.1.1.16.1
log
@SECURITY fixes, submitted by Nick Nauwelaerts <nick@@wanadoo.be>:
* Fix buffer overflow.  (Obtained from Debian)
* Strip leading "../" when creating new files.  (Obtained from Debian)
@
text
@@

