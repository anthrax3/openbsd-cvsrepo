head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2017.07.17.21.02.08;	author fcambus;	state dead;
branches;
next	1.1;
commitid	udkx1M3JReS1ybWl;

1.1
date	2017.05.04.13.55.32;	author espie;	state Exp;
branches;
next	;
commitid	GF48Mx4hTa1QK4G6;


desc
@@


1.2
log
@Remove chinese/crxvt.

We recently removed mrxvt and rxvt due to the fact that upstream is
dead and that thee code is vulnerable to CVE-2017-7483.

On top of that, crxvt is very unstable: it dumps core after entering
a few commands or pressing enter repeatedly a couple of times.

OK jca@@, dcoppa@@, bcallah@@, kevlo@@, bentley@@
@
text
@$OpenBSD: patch-src_utmp_c,v 1.1 2017/05/04 13:55:32 espie Exp $

Index: src/utmp.c
--- src/utmp.c.orig
+++ src/utmp.c
@@@@ -54,6 +54,7 @@@@
 #include <pwd.h>
 #include <string.h>
 #include <stdio.h>
+#include <stdlib.h>
 #include <memory.h>
 #include <signal.h>
 
@@@@ -172,7 +173,7 @@@@ int     write_utmp(char *ttyname, struct utmp *u)
     FILE   *utmp;
 
     if (no_utmp)
-	return;
+	return -1;
     if ((utmp = fopen(UTMP, "r+")) == NULL)
 	return -1;
     utmp_pos = get_tslot(ttyname) * sizeof(struct utmp);
@


1.1
log
@simplify substitutions and prevent them from interfering with update-patches
fix build with clang
@
text
@d1 1
a1 1
$OpenBSD$
@

