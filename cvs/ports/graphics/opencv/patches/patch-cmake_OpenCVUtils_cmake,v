head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.10
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.6
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.06.03.20.41.36;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	yaC4poq6LCZO15Ua;

1.1
date	2013.10.21.22.46.27;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update OpenCV to 2.4.9. Initial patch from Rafael Sadowski (MAINTAINER),
with some tweaks from me, including enabling -java back on i386.

Tested on i386 and amd64.
@
text
@$OpenBSD: patch-cmake_OpenCVUtils_cmake,v 1.1 2013/10/21 22:46:27 zhuk Exp $
--- cmake/OpenCVUtils.cmake.orig	Wed Nov  6 15:26:39 2013
+++ cmake/OpenCVUtils.cmake	Sun Jan  5 09:13:06 2014
@@@@ -250,11 +250,31 @@@@ macro(CHECK_MODULE module_name define)
         endif()
       endforeach()
 
-      foreach(P "${ALIAS_LIBRARY_DIRS}")
-        if(${P})
-          list(APPEND HIGHGUI_LIBRARY_DIRS ${${P}})
-        endif()
-      endforeach()
+      # Find exact libraries to allow building OpenCV when another
+      # version is installed.
+      set(LL)
+      set(LDIRS)
+      foreach(L ${${ALIAS_LIBRARIES}})
+        set("${ALIAS}_LIBRARY_${L}")
+        find_library("${ALIAS}_LIBRARY_${L}" NAMES ${L}
+          HINTS ${${ALIAS_LIBRARY_DIRS}}
+          )
+        if(${ALIAS}_LIBRARY_${L})
+          list(APPEND LL "${${ALIAS}_LIBRARY_${L}}")
+        else(${ALIAS}_LIBRARY_${L})
+          list(APPEND LL "${L}")
+          set(LDIRS ${${ALIAS_LIBRARY_DIRS}})
+        endif(${ALIAS}_LIBRARY_${L})
+      endforeach(L ${ALIAS_LIBRARIES})
+      set(${ALIAS_LIBRARIES} ${LL}
+        CACHE INTERNAL "Libraries to link to ${module_name}")
+      set(${ALIAS_LIBRARY_DIRS} ${LDIRS}
+        CACHE INTERNAL "Library directories to use when linking to ${module_name}")
+      if(${ALIAS_LIBRARY_DIRS})
+        message("-- Adding ${${ALIAS_LIBRARY_DIRS}} to link_directories for ${module_name}.")
+        message("   This could break build if OpenCV is already installed!")
+        link_directories(${${ALIAS_LIBRARY_DIRS}})
+      endif(${ALIAS_LIBRARY_DIRS})
 
       list(APPEND HIGHGUI_LIBRARIES ${${ALIAS_LIBRARIES}})
     endif()
@


1.1
log
@Update to 2.4.6.1. Sat in my tree until sthen@@ helped me to realize that.
Key notes:

  * OpenCV now has separate "opencv_nonfree" module, which contains all of
    the patented algorithms. It was decided on ports@@ to not create "nonfree"
    FLAVOR but just set PERMIT_PACKAGE_CDROM=No, while allowing FTP
    distribution.

  * OpenCV now have its own Java bindings. You could avoid building them by
    using the "no_java" PSEUDO_FLAVOR.

  * Documentation placement was cleaned up, too.

Input from sthen@@ and naddy@@. Tested on i386 and amd64 with Digikam from WIP.

Okay sthen@@ and Rafael Sadowski (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD$
--- cmake/OpenCVUtils.cmake.orig	Fri Jun 28 19:47:30 2013
+++ cmake/OpenCVUtils.cmake	Sat Jul 27 21:43:25 2013
@@@@ -227,11 +227,31 @@@@ macro(CHECK_MODULE module_name define)
@

