head	1.67;
access;
symbols
	OPENBSD_6_2:1.67.0.2
	OPENBSD_6_2_BASE:1.67
	OPENBSD_6_1:1.61.0.2
	OPENBSD_6_1_BASE:1.61
	OPENBSD_6_0:1.57.0.2
	OPENBSD_6_0_BASE:1.57
	OPENBSD_5_9:1.56.0.2
	OPENBSD_5_9_BASE:1.56
	OPENBSD_5_8:1.55.0.4
	OPENBSD_5_8_BASE:1.55
	OPENBSD_5_7:1.52.0.2
	OPENBSD_5_7_BASE:1.52
	OPENBSD_5_6:1.49.0.2
	OPENBSD_5_6_BASE:1.49
	OPENBSD_5_5:1.48.0.2
	OPENBSD_5_5_BASE:1.48
	OPENBSD_5_4:1.45.0.2
	OPENBSD_5_4_BASE:1.45
	OPENBSD_5_3:1.42.0.4
	OPENBSD_5_3_BASE:1.42
	OPENBSD_5_2:1.42.0.2
	OPENBSD_5_2_BASE:1.42
	OPENBSD_5_1_BASE:1.41
	OPENBSD_5_1:1.41.0.2
	OPENBSD_5_0:1.39.0.2
	OPENBSD_5_0_BASE:1.39
	OPENBSD_4_9:1.38.0.2
	OPENBSD_4_9_BASE:1.38
	OPENBSD_4_8:1.31.0.2
	OPENBSD_4_8_BASE:1.31
	OPENBSD_4_7:1.30.0.2
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.29.0.2
	OPENBSD_4_6_BASE:1.29
	OPENBSD_4_5:1.27.0.2
	OPENBSD_4_5_BASE:1.27
	OPENBSD_4_4:1.26.0.2
	OPENBSD_4_4_BASE:1.26
	OPENBSD_4_3:1.24.0.2
	OPENBSD_4_3_BASE:1.24
	OPENBSD_4_2:1.21.0.4
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.21.0.2
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.17.0.2
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.13.0.2
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.9.0.2
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.7.0.2
	OPENBSD_3_7_BASE:1.7
	djm_200411111:1.1.1.1
	djm:1.1.1;
locks; strict;
comment	@# @;


1.67
date	2017.09.23.10.27.35;	author nigel;	state Exp;
branches;
next	1.66;
commitid	jeky95SH4Ed4myzY;

1.66
date	2017.09.22.20.45.32;	author sthen;	state Exp;
branches;
next	1.65;
commitid	yTSAgHn7nLRN3iCz;

1.65
date	2017.07.26.22.45.24;	author sthen;	state Exp;
branches;
next	1.64;
commitid	tD4MFrpYYDDL2UFT;

1.64
date	2017.07.23.09.26.27;	author espie;	state Exp;
branches;
next	1.63;
commitid	FZPR2Emws5uDqXzb;

1.63
date	2017.07.16.19.18.57;	author espie;	state Exp;
branches;
next	1.62;
commitid	tt0GhWK5c4uf9ILG;

1.62
date	2017.04.10.11.46.21;	author sthen;	state Exp;
branches;
next	1.61;
commitid	BLsh88fJB8thZTwY;

1.61
date	2017.02.24.13.46.22;	author shadchin;	state Exp;
branches;
next	1.60;
commitid	E5gvhsu0rNVE1o20;

1.60
date	2017.01.03.19.21.18;	author landry;	state Exp;
branches;
next	1.59;
commitid	4DhVkqkiKi7pRQRO;

1.59
date	2016.11.16.13.50.12;	author shadchin;	state Exp;
branches;
next	1.58;
commitid	zsKgVG7H3M62naqh;

1.58
date	2016.11.14.18.55.50;	author shadchin;	state Exp;
branches;
next	1.57;
commitid	g5IEfCbX2LofZRCC;

1.57
date	2016.03.29.09.44.59;	author sthen;	state Exp;
branches;
next	1.56;
commitid	r2lrBsmFI63URBxf;

1.56
date	2015.09.29.10.52.13;	author sthen;	state Exp;
branches;
next	1.55;
commitid	xbfDwwa9BDEzVq2B;

1.55
date	2015.07.01.08.57.07;	author ajacoutot;	state Exp;
branches;
next	1.54;
commitid	FvHpRTt9TwpVAIqC;

1.54
date	2015.05.04.22.03.20;	author daniel;	state Exp;
branches;
next	1.53;
commitid	AjPeQ9a7RjL0xNXZ;

1.53
date	2015.03.26.12.14.15;	author sthen;	state Exp;
branches;
next	1.52;
commitid	qYDTmzXxLoW0kaEv;

1.52
date	2014.12.24.14.21.15;	author sthen;	state Exp;
branches;
next	1.51;
commitid	iflvzAEzcjAVkCRT;

1.51
date	2014.12.23.13.48.54;	author daniel;	state Exp;
branches;
next	1.50;
commitid	2rHtKfglS88791se;

1.50
date	2014.08.14.07.06.00;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	Ox5isqCVDwHCpoCU;

1.49
date	2014.04.06.21.10.30;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2014.01.10.19.05.07;	author landry;	state Exp;
branches;
next	1.47;

1.47
date	2014.01.04.21.21.55;	author jasper;	state Exp;
branches;
next	1.46;

1.46
date	2013.11.25.14.16.23;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2013.06.04.18.41.50;	author naddy;	state Exp;
branches;
next	1.44;

1.44
date	2013.05.31.12.29.41;	author edd;	state Exp;
branches;
next	1.43;

1.43
date	2013.03.11.11.10.55;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2012.02.28.23.01.23;	author rpointel;	state Exp;
branches;
next	1.41;

1.41
date	2011.11.02.09.57.22;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2011.09.16.10.02.37;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2011.06.08.17.35.28;	author jasper;	state Exp;
branches;
next	1.38;

1.38
date	2011.01.06.19.11.22;	author sebastia;	state Exp;
branches;
next	1.37;

1.37
date	2010.12.22.14.54.03;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.11.17.08.05.15;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2010.11.09.18.22.27;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2010.10.24.21.21.01;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2010.10.11.08.14.43;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2010.08.30.21.24.15;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2010.04.02.16.02.28;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2009.08.10.06.31.45;	author kili;	state Exp;
branches;
next	1.29;

1.29
date	2009.04.11.08.16.58;	author eric;	state Exp;
branches;
next	1.28;

1.28
date	2009.03.16.08.56.32;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2009.01.19.07.10.28;	author djm;	state Exp;
branches;
next	1.26;

1.26
date	2008.07.30.17.51.21;	author martynas;	state Exp;
branches;
next	1.25;

1.25
date	2008.06.29.20.44.52;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2007.11.13.17.10.25;	author steven;	state Exp;
branches;
next	1.23;

1.23
date	2007.10.12.11.07.43;	author djm;	state Exp;
branches;
next	1.22;

1.22
date	2007.09.15.20.09.43;	author simon;	state Exp;
branches;
next	1.21;

1.21
date	2007.01.04.20.19.54;	author steven;	state Exp;
branches;
next	1.20;

1.20
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2006.11.13.11.20.25;	author steven;	state Exp;
branches;
next	1.18;

1.18
date	2006.09.18.11.50.40;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2006.08.16.11.42.06;	author steven;	state Exp;
branches;
next	1.16;

1.16
date	2006.08.03.12.53.18;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2006.06.13.13.25.31;	author bernd;	state Exp;
branches;
next	1.14;

1.14
date	2006.06.03.09.36.00;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2006.01.20.07.58.06;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2005.11.17.19.02.47;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2005.09.19.02.05.20;	author djm;	state Exp;
branches;
next	1.10;

1.10
date	2005.09.19.01.42.11;	author djm;	state Exp;
branches;
next	1.9;

1.9
date	2005.07.09.06.14.04;	author djm;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.09.11.47.50;	author djm;	state Exp;
branches;
next	1.7;

1.7
date	2005.03.15.07.17.38;	author sturm;	state Exp;
branches;
next	1.6;

1.6
date	2005.02.02.23.16.18;	author djm;	state Exp;
branches;
next	1.5;

1.5
date	2005.01.28.00.17.26;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2005.01.17.23.56.43;	author djm;	state Exp;
branches;
next	1.3;

1.3
date	2004.11.30.01.06.39;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.11.12.41.33;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2004.11.11.04.05.25;	author djm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.11.11.04.05.25;	author djm;	state Exp;
branches;
next	;


desc
@@


1.67
log
@fix python3 flavor WANTLIB

Ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.66 2017/09/22 20:45:32 sthen Exp $

COMMENT=	Python charting and plotting API

MODPY_EGG_VERSION =	1.5.3
DISTNAME =		matplotlib-${MODPY_EGG_VERSION}
PKGNAME =		py-${DISTNAME}
REVISION =		6
CATEGORIES =		graphics devel math

HOMEPAGE=	http://matplotlib.sourceforge.net/

MAINTAINER =	Daniel Dickman <daniel@@openbsd.org>

# BSD-like
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ${MODPY_WANTLIB} ${COMPILER_LIBCXX}
WANTLIB += freetype m png z

MODULES=	lang/python

FLAVORS=	python3
FLAVOR?=

MODPY_PI =		Yes
MODPY_SETUPTOOLS =	Yes

COMMON_DEPENDS=	devel/py-tz${MODPY_FLAVOR} \
		devel/py-dateutil${MODPY_FLAVOR} \
		devel/py-parsing${MODPY_FLAVOR} \
		devel/py-six${MODPY_FLAVOR} \
		math/py-numpy${MODPY_FLAVOR} \
		graphics/py-Pillow${MODPY_FLAVOR} \
		graphics/py-cycler${MODPY_FLAVOR} \
		${MODPY_TKINTER_DEPENDS}

BUILD_DEPENDS=	${COMMON_DEPENDS}
RUN_DEPENDS=	${COMMON_DEPENDS}
LIB_DEPENDS=	graphics/png

.if ${FLAVOR:Mpython3}
COMMON_DEPENDS +=	devel/py-cairocffi${MODPY_FLAVOR} \
			devel/py-gobject3${MODPY_FLAVOR}
# pygobject GTK3 introspection (not provided by indirect dependencies)
COMMON_DEPENDS +=	x11/gtk+3
.else
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 cairo expat ffi
WANTLIB += fontconfig gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 graphite2 gtk-x11-2.0
WANTLIB += harfbuzz intl pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 pthread-stubs xcb xcb-render xcb-shm
COMMON_DEPENDS +=	x11/py-gtk2
LIB_DEPENDS +=	x11/gtk+2
.endif

TEST_DEPENDS =	${RUN_DEPENDS} \
		devel/py-nose${MODPY_FLAVOR}

MAKE_ENV+=	LDSHARED="${CC} -shared -fPIC"

EXAMPLESDIR=	${PREFIX}/share/examples/${MODPY_PY_PREFIX}matplotlib

pre-configure:
	@@find ${WRKSRC}/examples -name \*.py | xargs ${MODPY_BIN_ADJ}
	${SUBST_CMD} ${WRKSRC}/setupext.py
	${SUBST_CMD} ${WRKSRC}/lib/matplotlib/sphinxext/tests/test_tinypages.py

post-install:
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}
	cd ${WRKSRC}/examples && pax -rw * ${EXAMPLESDIR}

# http://matplotlib.org/devel/testing.html
do-test: fake
	cd ${WRKSRC} && ${MAKE_ENV} PYTHONPATH=${WRKINST}${MODPY_SITEPKG} \
		${MODPY_BIN} -c 'import matplotlib ; matplotlib.test()'

.include <bsd.port.mk>
@


1.66
log
@add a whole raft of missing wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2017/07/26 22:45:24 sthen Exp $
d8 1
a8 1
REVISION =		5
d19 1
a19 7
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 cairo expat ffi
WANTLIB += fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 graphite2 gtk-x11-2.0
WANTLIB += harfbuzz intl m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread-stubs xcb xcb-render xcb-shm
WANTLIB += z
d40 1
d48 6
d55 1
a57 1
LIB_DEPENDS=	graphics/png
@


1.65
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2017/07/23 09:26:27 espie Exp $
d8 1
a8 1
REVISION =		4
d18 8
a25 2
WANTLIB += ${MODPY_WANTLIB}
WANTLIB += freetype m png ${COMPILER_LIBCXX} z
@


1.64
log
@add pthread to COMPILER_LIBCXX.
white lie, but it allows clang and gcc to be more similar
bump accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2017/07/16 19:18:57 espie Exp $
d8 1
a8 1
REVISION =		3
@


1.63
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2017/04/10 11:46:21 sthen Exp $
d8 1
a8 1
REVISION =		2
@


1.62
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2017/02/24 13:46:22 shadchin Exp $
d19 1
a19 1
WANTLIB += freetype m png ${LIBCXX} z
@


1.61
log
@Fix Gtk3 backend for python3 flavor.

ok daniel@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2017/01/03 19:21:18 landry Exp $
d19 1
a19 1
WANTLIB += freetype m png stdc++ z
@


1.60
log
@bump ports depending on python3 in graphics
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/11/16 13:50:12 shadchin Exp $
d8 1
a8 1
REVISION =		1
d42 2
a43 1
COMMON_DEPENDS +=	devel/py-gobject3${MODPY_FLAVOR}
@


1.59
log
@Fix bdep, spotted by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/11/14 18:55:50 shadchin Exp $
d8 1
a8 1
REVISION =		0
@


1.58
log
@Update to py-matplotlib 1.5.3.

ok daniel@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/03/29 09:44:59 sthen Exp $
d8 1
d42 1
a42 1
RUN_DEPENDS +=	devel/py-gobject3${MODPY_FLAVOR}
d44 1
a44 1
RUN_DEPENDS +=	x11/gtk+3
d46 1
a46 1
RUN_DEPENDS +=	x11/py-gtk2
@


1.57
log
@bump REVISION to force updates; works around
http://marc.info/?l=openbsd-ports&m=145924293531003&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2015/09/29 10:52:13 sthen Exp $
d5 1
a5 2
MODPY_EGG_VERSION =	1.4.2
REVISION =		5
d17 1
a17 1
WANTLIB += ${MODPY_WANTLIB} ${MODTK_WANTLIB}
d20 1
a20 4
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=matplotlib/}

MODULES=	lang/python \
		x11/tk
d25 2
a26 1
MODPY_SETUPTOOLS = Yes
d34 1
d48 1
a48 2
LIB_DEPENDS=	${MODTK_LIB_DEPENDS} \
		graphics/png
d52 1
a52 2
MAKE_ENV+=	EXTRA_INCLUDES="${WRKSRC} ${MODTCL_INCDIR} ${MODTK_INCDIR}" \
		LDSHARED="${CC} -shared -fPIC"
d59 1
d67 2
a68 2
	${MAKE_ENV} PYTHONPATH=${WRKINST}${MODPY_SITEPKG} ${MODPY_BIN} -c \
		'import matplotlib ; matplotlib.test()'
@


1.56
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2015/07/01 08:57:07 ajacoutot Exp $
d6 1
a6 1
REVISION =		4
@


1.55
log
@Rework WANTLIB/DEPENDS.
By default we depend on py-gtk+2 except for the python3 FLAVOR where we depend
on py-gobject3 and gtk+3. We don't want to depend on all possible toolkits for
obvious reason, so people will have to manually install py-qt4 for example to
use the qt4 toolkit.

changes triggered by a mail from Predrag Punosevac
ok daniel@@ (maintainer) who may revisit this port if needed in a few days
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2015/05/04 22:03:20 daniel Exp $
d6 1
a6 1
REVISION =		3
@


1.54
log
@Add python3 flavor. Diff provided by Dawe. Thanks!

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2015/03/26 12:14:15 sthen Exp $
d6 1
a6 1
REVISION =		2
d18 2
a19 4
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender ffi fontconfig freetype 
WANTLIB += m pixman-1 png pthread pthread-stubs ${MODPY_WANTLIB}
WANTLIB += stdc++ tcl85 tk85 xcb xcb-render xcb-shm z
a23 1
		devel/gettext \
d31 1
a31 1
RUN_DEPENDS=	devel/py-tz${MODPY_FLAVOR} \
d39 9
a47 6
.if ! ${FLAVOR:Mpython3}
WANTLIB += atk-1.0 cairo gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gtk-x11-2.0 harfbuzz
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
LIB_DEPENDS += x11/gtk+2
RUN_DEPENDS += x11/py-gtk2
d50 2
a51 2
BUILD_DEPENDS=	${RUN_DEPENDS}
LIB_DEPENDS+=	graphics/png
@


1.53
log
@REVISION bumps for py-Pillow RDEP change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2014/12/24 14:21:15 sthen Exp $
d6 1
a6 1
REVISION =		1
d19 3
a21 6
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 cairo ffi
WANTLIB += fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gtk-x11-2.0 harfbuzz
WANTLIB += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs ${MODPY_WANTLIB} stdc++ tcl85 tk85
WANTLIB += xcb xcb-render xcb-shm z
d29 3
d34 6
a39 7
RUN_DEPENDS=	devel/py-tz \
		devel/py-dateutil \
		devel/py-parsing \
		devel/py-six \
		math/py-numpy \
		x11/py-gtk2 \
		graphics/py-Pillow \
d41 9
d51 1
a51 1
LIB_DEPENDS=	graphics/png
d53 1
a53 1
		devel/py-nose
d58 2
d65 2
a66 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-matplotlib
	cd ${WRKSRC}/examples && pax -rw * \
	    ${PREFIX}/share/examples/py-matplotlib
@


1.52
log
@move py-six from test dep to run dep; spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2014/12/23 13:48:54 daniel Exp $
d6 1
a6 1
REVISION =		0
@


1.51
log
@Update matplotlib to 1.4.2:
- take MAINTAINER
- switch regress tests to the new maintained test suite

tweaks and ok shadchin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2014/08/14 07:06:00 ajacoutot Exp $
d6 1
d37 1
a44 1
		devel/py-six \
@


1.50
log
@Bump after py-Pillow sub-packaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/04/06 21:10:30 sthen Exp $
d5 1
a5 2
MODPY_EGG_VERSION =	1.2.1
REVISION =		1
d12 2
d31 2
d35 1
d42 3
a44 1
TEST_DEPENDS =	${RUN_DEPENDS}
d58 1
d60 2
a61 3
	cd ${WRKSRC}/examples/tests && ${MAKE_ENV} \
	    PYTHONPATH=${WRKINST}${MODPY_SITEPKG} \
	    ${MODPY_BIN} backend_driver.py
@


1.49
log
@switch py-Imaging to py-Pillow, plus some "s/import Image/from PIL import Image/" patches where necessary
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/01/10 19:05:07 landry Exp $
d6 1
a6 1
REVISION =		0
@


1.48
log
@Pass ${X11BASE}/include when building tkagg extension.
Fixes build with newer freetype.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/01/04 21:21:55 jasper Exp $
d6 1
d34 1
a34 1
		graphics/py-Imaging \
@


1.47
log
@use ${MODPY_WANTLIB}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/11/25 14:16:23 sthen Exp $
d44 1
@


1.46
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2013/06/04 18:41:50 naddy Exp $
d20 1
a20 1
WANTLIB += png pthread pthread-stubs python2.7 stdc++ tcl85 tk85
@


1.45
log
@the png headers are now directly under include/
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.44 2013/05/31 12:29:41 edd Exp $

VMEM_WARNING=	Yes
@


1.44
log
@Update to py-matplotlib-1.2.1

A single test is failing, however, the test code works fine when run
outside of the test harness. I raised a bug here:
https://github.com/matplotlib/matplotlib/issues/2101

OK sthen@@ and lots of input from fgs@@. Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2012/02/28 23:01:23 rpointel Exp $
d41 1
a41 1
MAKE_ENV+=	EXTRA_INCLUDES="${WRKSRC} ${LOCALBASE}/include/libpng ${MODTCL_INCDIR} ${MODTK_INCDIR}" \
@


1.43
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d7 4
a10 4
DISTNAME=	matplotlib-0.98.5.2
PKGNAME=	py-${DISTNAME}
REVISION=	11
CATEGORIES=	graphics devel math
d17 7
a23 8
WANTLIB=	X11 Xau Xcomposite Xcursor Xdmcp Xext Xfixes Xi Xinerama \
		Xrandr Xrender Xdamage expat fontconfig freetype m z stdc++ \
		atk-1.0 gdk-x11-2.0 cairo \
		gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gobject-2.0 gtk-x11-2.0 ${MODPY_WANTLIB} \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 \
		pthread-stubs tcl85 tk85 xcb ffi png>=3 \
		GL Xxf86vm drm gthread-2.0 xcb-render xcb-shm
d31 3
a33 1
RUN_DEPENDS=	math/py-numpy \
d35 1
a35 2
		devel/py-tz \
		devel/py-dateutil \
d39 1
d44 2
a45 2

NO_TEST=	Yes
a47 6
	# Make examples use MODPY_VER
	(set -ex ; for fn in `find ${WRKSRC}/examples -name \*.py` ; do \
	    sed "1s/python\$$/python${MODPY_VERSION}/" < $${fn} > $${fn}__ ; \
	    mv $${fn}__ $${fn} ; \
	done)
	# examples
d49 7
a55 2
	(set -e ; cd ${WRKSRC}/examples ; tar cf - . | \
	    (set -e ; cd ${PREFIX}/share/examples/py-matplotlib ; tar xf - ))
@


1.42
log
@Permit to build with Python 2.7.2.
Spotted by nigel@@, diff from upstream by me and ok nigel@@ (thanks!).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/11/02 09:57:22 jasper Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d44 1
a44 1
NO_REGRESS=	Yes
@


1.41
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/09/16 10:02:37 espie Exp $
d9 1
a9 1
REVISION=	10
@


1.40
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/06/08 17:35:28 jasper Exp $
d9 1
a9 1
REVISION=	9
d24 1
a24 1
		gobject-2.0 gtk-x11-2.0 \
@


1.39
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/01/06 19:11:22 sebastia Exp $
d9 1
a9 1
REVISION=	8
@


1.38
log
@Fix py-matplotlib after tcl layout change.
It was broken before too.
Based on initial patch by stsp@@

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/12/22 14:54:03 espie Exp $
d9 1
a9 1
REVISION=	7
@


1.37
log
@fix package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/11/17 08:05:15 espie Exp $
d9 1
a9 1
REVISION=	6
d26 2
a27 1
		pthread-stubs tcl85 tk85 xcb ffi png>=3
d32 2
a33 1
		devel/gettext
d43 1
a43 1
MAKE_ENV+=	EXTRA_INCLUDES="${WRKSRC} ${LOCALBASE}/include/libpng" \
@


1.36
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/11/09 18:22:27 espie Exp $
d9 1
a9 1
REVISION=	5
d26 1
a26 1
		pthread-stubs tcl84 tk84 xcb ffi png>=3
@


1.35
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/10/24 21:21:01 ajacoutot Exp $
d26 1
a26 1
		pthread-stubs tcl84 tk84 xcb ffi png.>=3
d33 4
a36 4
RUN_DEPENDS=	::math/py-numpy \
		::x11/py-gtk2 \
		::devel/py-tz \
		::devel/py-dateutil \
d39 1
a39 1
LIB_DEPENDS=	::graphics/png
@


1.34
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/10/11 08:14:43 jasper Exp $
d26 1
a26 1
		pthread-stubs tcl84 tk84 xcb ffi
d39 1
a39 1
LIB_DEPENDS=	png.>=3::graphics/png
@


1.33
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/08/30 21:24:15 jasper Exp $
a43 1
USE_X11=	Yes
@


1.32
log
@- bump for pythonia
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/04/02 16:02:28 sthen Exp $
d9 1
a9 1
REVISION=	4
d22 1
a22 1
		atk-1.0 gdk-x11-2.0 cairo glitz \
@


1.31
log
@sync WANTLIB (mostly libffi) and bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/08/10 06:31:45 kili Exp $
d8 2
a9 1
PKGNAME=	py-${DISTNAME}p3
@


1.30
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/04/11 08:16:58 eric Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p2
d25 1
a25 1
		pthread-stubs tcl84 tk84 xcb
@


1.29
log
@fix build issue spotted by jasper@@: need explicit dependency on
python-tkinter.

ok djm@@ ajacoutot@@
library cleanup suggested by and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/03/16 08:56:32 espie Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p1
d25 1
a25 1
		tcl84 tk84
@


1.28
log
@fix depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/01/19 07:10:28 djm Exp $
a3 1
SHARED_ONLY=	Yes
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p0
d25 1
a25 1
		tcl84
d35 2
a36 1
		::devel/py-dateutil
d38 1
a38 2
LIB_DEPENDS=	png.>=3::graphics/png \
		tk84.>=1:tk->=8.4,<8.5:x11/tk/8.4
@


1.27
log
@update to matplotlib-0.98.5.2, reorder to Makefile.template,
drop MAINTAINERship
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/07/30 17:51:21 martynas Exp $
d9 1
a9 1
PKGNAME=	py-${DISTNAME}
d39 1
a39 1
		tk84.>=1::x11/tk/8.4
@


1.26
log
@update plist to include missing libs;  ok wcmaier@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/06/29 20:44:52 sthen Exp $
d3 1
d8 3
a10 3
DISTNAME=	matplotlib-0.90.1
PKGNAME=	py-${DISTNAME}p2
CATEGORIES=	graphics devel
a13 5
MAINTAINER=	Damien Miller <djm@@openbsd.org>

MODULES=	lang/python \
		devel/gettext

d23 1
a23 1
		gdk_pixbuf-2.0 glib-2.0 gmodule-2.0 \
d25 2
a26 1
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1
d30 3
d38 2
a39 3
LIB_DEPENDS=	png.>=3::graphics/png

USE_X11=	Yes
d44 3
a46 5
# The matplotlib distributors seem to have an uncanny knack for breaking 
# update-patches by shipping .orig and .rej files, over several releases...
post-extract:
	@@find ${WRKSRC} -type f -name \*.orig -o -name \*.rej -print0 | \
	    xargs -r0 rm -f
d56 2
a57 21
	${INSTALL_DATA} ${WRKSRC}/examples/README \
	    ${PREFIX}/share/examples/py-matplotlib
	${INSTALL_SCRIPT} ${WRKSRC}/examples/*.py \
	    ${PREFIX}/share/examples/py-matplotlib
	# examples/data
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-matplotlib/data
	${INSTALL_DATA} ${WRKSRC}/examples/data/* \
	    ${PREFIX}/share/examples/py-matplotlib/data
	# examples/data
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-matplotlib/units
	${INSTALL_SCRIPT} ${WRKSRC}/examples/units/*.py \
	    ${PREFIX}/share/examples/py-matplotlib/units
	# examples/widgets
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-matplotlib/widgets
	${INSTALL_DATA} ${WRKSRC}/examples/widgets/README \
	    ${PREFIX}/share/examples/py-matplotlib/widgets
	${INSTALL_SCRIPT} ${WRKSRC}/examples/widgets/*.py \
	    ${PREFIX}/share/examples/py-matplotlib/widgets

VMEM_WARNING=	Yes
NO_REGRESS=	Yes
@


1.25
log
@sync WANTLIB following cairo update. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/11/13 17:10:25 steven Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p1
@


1.24
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/10/12 11:07:43 djm Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p0
d29 1
a29 1
		pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.23
log
@update to matplotlib-0.90.1
use numpy instead of deprecated Numeric
make examples use python${MODPY_VERSION}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/09/15 20:09:43 simon Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}
d24 6
a29 6
WANTLIB=		X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama \
			Xrandr Xrender expat fontconfig freetype m z stdc++ \
			atk-1.0 gdk-x11-2.0 cairo glitz \
			gdk_pixbuf-2.0 glib-2.0 gmodule-2.0 \
			gobject-2.0 gtk-x11-2.0 \
			pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.22
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/01/04 20:19:54 steven Exp $
d7 2
a8 2
DISTNAME=	matplotlib-0.83.2
PKGNAME=	py-${DISTNAME}p5
d23 3
a25 1
WANTLIB=		X11 Xext Xrender fontconfig freetype m z stdc++ \
d33 1
a33 1
RUN_DEPENDS=	::math/py-Numeric \
d48 2
a49 1
	@@find ${WRKSRC} -type f -name \*.orig -o -name \*.rej | xargs -r rm -f
d52 5
d59 1
a59 1
	${INSTALL_DATA} ${WRKSRC}/examples/README ${WRKSRC}/examples/*.glade \
d67 4
@


1.21
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/12/16 12:22:34 espie Exp $
d5 1
a5 1
COMMENT=	"Python charting and plotting API"
@


1.20
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/11/13 11:20:25 steven Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p4
d23 2
a24 2
WANTLIB=		X11 fontconfig freetype m z stdc++ \
			atk-1.0 gdk-x11-2.0 cairo \
@


1.19
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/09/18 11:50:40 espie Exp $
d35 1
a35 2
BUILD_DEPENDS=	${RUN_DEPENDS} \
		::devel/pkgconfig
@


1.18
log
@zap unneeded 0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/08/16 11:42:06 steven Exp $
d38 2
@


1.17
log
@pass -fPIC flag when generating shared objects; fixes build on amd64.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/08/03 12:53:18 espie Exp $
d24 4
a27 4
			atk-1.0.0.0 gdk-x11-2.0.0.0 cairo \
			gdk_pixbuf-2.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 \
			gobject-2.0.0.0 gtk-x11-2.0.0.0 \
			pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0
@


1.16
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/06/13 13:25:31 bernd Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p3
d39 2
a40 1
MAKE_ENV+=      EXTRA_INCLUDES="${WRKSRC} ${LOCALBASE}/include/libpng"
@


1.15
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/06/03 09:36:00 alek Exp $
d37 1
a37 1
LIB_DEPENDS=	png.3::graphics/png
@


1.14
log
@Bump PKGNAMEs after recent python switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/01/20 07:58:06 steven Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p2
d23 2
a24 2
WANTLIB=		X11 Xext Xft Xrender fontconfig freetype m z stdc++ \
			atk-1.0.0.0 gdk-x11-2.0.0.0 \
d27 1
a27 2
			pango-1.0.0.0 pangox-1.0.0.0 pangoft2-1.0.0.0 \
			pangoxft-1.0.0.0
@


1.13
log
@fix WANTLIB after gtk+2 downgrade
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/11/17 19:02:47 naddy Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p1
@


1.12
log
@WANTLIB fix after GTK update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/09/19 02:05:20 djm Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}p0
d23 2
a24 2
WANTLIB=		X11 atk-1.0.0.0 cairo \
			fontconfig freetype gdk-x11-2.0.0.0 \
d26 3
a28 3
			gobject-2.0.0.0 gtk-x11-2.0.0.0 intl m \
			pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0 \
			stdc++ z
@


1.11
log
@matplotlib-0.83.2 (a minor release that fixes a few more bugs that I missed)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/09/19 01:42:11 djm Exp $
d8 1
a8 1
PKGNAME=	py-${DISTNAME}
d23 1
a23 1
WANTLIB=		X11 Xft Xrender atk-1.0.0.0 \
d27 2
a28 1
			pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0 stdc++ z
@


1.10
log
@matplotlib-0.83, fixes a few bugs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/07/09 06:14:04 djm Exp $
d7 1
a7 1
DISTNAME=	matplotlib-0.83
@


1.9
log
@update to matplotlib-0.82, set SHARED_ONLY, make demos usable in-place
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/05/09 11:47:50 djm Exp $
d7 1
a7 1
DISTNAME=	matplotlib-0.82
d23 1
a23 1
WANTLIB=		X11 Xcursor Xext Xft Xinerama Xrender atk-1.0.0.0 \
d42 1
a42 1
# update-patches by shipping .orig files, over several releases...
d44 1
a44 1
	@@find ${WRKSRC} -type f -name \*.orig | xargs rm -f
@


1.8
log
@update to matplotlib-0.80
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.7 2005/03/15 07:17:38 sturm Exp $
d7 1
a7 1
DISTNAME=	matplotlib-0.80
d41 2
a42 1
# This file interferes with update-patches
d44 1
a44 1
	@@rm -f ${WRKSRC}/lib/matplotlib/legend.py.orig
d47 1
d49 5
a54 2
	${INSTALL_DATA} ${WRKSRC}/examples/*.* ${WRKSRC}/examples/README \
	    ${PREFIX}/share/examples/py-matplotlib
d57 6
@


1.7
log
@missing BUILD_DEPENDS on pkgconfig

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/02/02 23:16:18 djm Exp $
d5 1
a5 1
DISTNAME=	matplotlib-0.71
@


1.6
log
@matplotlib-0.71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/01/28 00:17:26 alek Exp $
d33 2
a34 1
BUILD_DEPENDS=	${RUN_DEPENDS}
@


1.5
log
@- Use devel/gettext MODULE
- Fix LIB_DEPENDS
- Bump PKGNAME

ok djm@@, xsa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/01/17 23:56:43 djm Exp $
d5 2
a6 2
DISTNAME=	matplotlib-0.64
PKGNAME=	py-${DISTNAME}p2
d21 5
a25 5
WANTLIB=		X11 Xext Xft Xinerama Xrender atk-1.0.0.0 fontconfig \
			freetype gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 \
			glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
			gtk-x11-2.0.0.0 Xcursor m pango-1.0.0.0 \
			pangox-1.0.0.0 pangoxft-1.0.0.0 stdc++ z
@


1.4
log
@work around compilation failure when py-Gtk is installed, caused by
stupid include path detection. Reported by espie@@
Also add VMEM_WARNING, because gcc3 causes compilation to blow up
later when building ft2font.cpp
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/11/30 01:06:39 espie Exp $
d6 1
a6 1
PKGNAME=	py-${DISTNAME}p1
d13 2
a14 1
MODULES=	lang/python
d24 1
a24 1
			gtk-x11-2.0.0.0 iconv intl m pango-1.0.0.0 \
d34 1
a34 3
LIB_DEPENDS=	tiff.35::graphics/tiff \
		png.3::graphics/png \
		jpeg.62::graphics/jpeg
@


1.3
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/11/11 12:41:33 alek Exp $
d6 1
a6 1
PKGNAME=	py-${DISTNAME}p0
d51 1
@


1.2
log
@- Typo in directory name
- Bump PKGNAME

ok djm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/11/11 04:05:25 djm Exp $
d20 5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
PKGNAME=	${DISTNAME:S/^/py-/}
d39 2
a40 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-mathplotlib
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-mathplotlib/data
d42 1
a42 1
	    ${PREFIX}/share/examples/py-mathplotlib
d44 1
a44 1
	    ${PREFIX}/share/examples/py-mathplotlib/data
@


1.1.1.1
log
@import matplotlib-0.64:

matplotlib is a python 2D plotting library which produces publication
quality figures using in a variety of hardcopy formats (PNG, JPG, PS,
SVG). matplotlib can be used in python scripts, interactively from the
python shell (ala matlab or mathematica), in web application servers
generating dynamic charts, or embedded in GUI applications.

feedback and ok xsa@@ alek@@
@
text
@@
