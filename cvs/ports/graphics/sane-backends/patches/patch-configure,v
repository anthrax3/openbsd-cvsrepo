head	1.16;
access;
symbols
	OPENBSD_6_1:1.16.0.6
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.4
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.14.0.10
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.6
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.4
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.2
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.13.0.4
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.12.0.6
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.4
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.7.0.4
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.6.0.6
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.5.0.6
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.4
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5;
locks; strict;
comment	@# @;


1.16
date	2016.01.09.09.52.03;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	lSFI3UxwoJRqAALX;

1.15
date	2015.10.09.07.06.52;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	Rl8XoJhkYtTyIxf9;

1.14
date	2013.10.01.08.59.11;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2012.08.28.08.26.40;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.03.03.13.43.50;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.27.11.36.00;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.20.10.40.05;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.04.26.10.41.28;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.03.21.09.53.19;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.05.06.10.23.21;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2008.02.13.13.23.58;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2006.07.21.10.31.09;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2006.04.23.13.32.13;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2006.04.23.10.29.53;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2005.11.15.21.04.58;	author wilfried;	state dead;
branches;
next	1.1;

1.1
date	2005.11.15.20.10.46;	author wilfried;	state Exp;
branches;
next	;


desc
@@


1.16
log
@This picked up libv4l but did not build libsane-v4l.so; so fix that.
@
text
@$OpenBSD: patch-configure,v 1.15 2015/10/09 07:06:52 ajacoutot Exp $
--- configure.orig	Sun Oct  4 15:18:39 2015
+++ configure	Sat Jan  9 10:38:47 2016
@@@@ -7494,18 +7494,6 @@@@ if test "${with_group+set}" = set; then :
 
 fi
 
-    # check if the group does exist
-    lasterror=""
-    touch sanetest.file
-    chgrp $LOCKPATH_GROUP sanetest.file 2>/dev/null || lasterror=$?
-    rm -f sanetest.file
-    if test ! -z "$lasterror"; then
-      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&5
-$as_echo "$as_me: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&2;}
-      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Locking feature will be disabled." >&5
-$as_echo "$as_me: WARNING: Locking feature will be disabled." >&2;}
-      use_locking=no
-    fi
   fi
   if test $use_locking = yes ; then
     INSTALL_LOCKPATH=install-lockpath
@@@@ -8158,7 +8146,7 @@@@ $as_echo "#define STDC_HEADERS 1" >>confdefs.h
 
 fi
 
-for ac_header in fcntl.h unistd.h libc.h sys/dsreq.h sys/select.h \
+for ac_header in fcntl.h unistd.h sys/dsreq.h sys/select.h \
     sys/time.h sys/shm.h sys/ipc.h sys/signal.h sys/scanio.h os2.h \
     sys/socket.h sys/io.h sys/hw.h sys/types.h linux/ppdev.h \
     dev/ppbus/ppi.h machine/cpufunc.h sys/bitypes.h sys/sem.h sys/poll.h \
@@@@ -8416,6 +8404,7 @@@@ $as_echo_n "checking for socklen_t in <sys/socket.h>..
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
+#include <sys/types.h>
 #include <sys/socket.h>
 
 int
@@@@ -18182,8 +18171,7 @@@@ for be in ${BACKENDS}; do
     ;;
 
     v4l)
-    if test "${have_linux_ioctl_defines}" != "yes" \
-      || test "${have_libv4l1}" != "yes"; then
+    if test "${have_libv4l1}" != "yes"; then
       echo "*** $be backend requires v4l libraries - $DISABLE_MSG"
       backend_supported="no"
     fi
@


1.15
log
@Update to sane-backends-1.0.25.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.14 2013/10/01 08:59:11 ajacoutot Exp $
d3 1
a3 1
+++ configure	Thu Oct  8 07:59:29 2015
d40 10
@


1.14
log
@Update to sane-backends-1.0.24.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.13 2012/08/28 08:26:40 ajacoutot Exp $
--- configure.orig	Tue Oct  1 03:01:13 2013
+++ configure	Tue Oct  1 10:18:32 2013
@@@@ -7450,18 +7450,6 @@@@ if test "${with_group+set}" = set; then :
d23 1
a23 1
@@@@ -8114,7 +8102,7 @@@@ $as_echo "#define STDC_HEADERS 1" >>confdefs.h
d32 1
a32 1
@@@@ -8372,6 +8360,7 @@@@ $as_echo_n "checking for socklen_t in <sys/socket.h>..
a39 9
@@@@ -9650,7 +9639,7 @@@@ $as_echo "#define HAVE_DEV_URANDOM 1" >>confdefs.h
 fi
 
 $as_echo "checking for cups"
-if test -e /usr/include/cups/cups.h ; then
+if test -e ${LOCALBASE}/include/cups/cups.h ; then
 
 $as_echo "#define HAVE_CUPS 1" >>confdefs.h
 
@


1.13
log
@Update to sane-backends-1.0.23.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.12 2011/03/03 13:43:50 ajacoutot Exp $
--- configure.orig	Sun Aug 19 22:45:11 2012
+++ configure	Tue Aug 28 09:11:02 2012
@@@@ -7353,18 +7353,6 @@@@ if test "${with_group+set}" = set; then :
d23 1
a23 1
@@@@ -8009,7 +7997,7 @@@@ $as_echo "#define STDC_HEADERS 1" >>confdefs.h
d32 1
a32 1
@@@@ -8267,6 +8255,7 @@@@ $as_echo_n "checking for socklen_t in <sys/socket.h>..
d40 2
a41 1
@@@@ -9548,7 +9537,7 @@@@ fi
a42 1
 nl added by PN 3/2/12 to detect cups
@


1.12
log
@Update to sane-backends-1.0.22.
Add snmp support.
Fix username in README.
@
text
@d1 4
a4 30
$OpenBSD: patch-configure,v 1.11 2010/11/27 11:36:00 ajacoutot Exp $
--- configure.orig	Mon Feb 14 02:27:52 2011
+++ configure	Mon Feb 14 06:50:54 2011
@@@@ -7202,13 +7202,13 @@@@ if test "x$ac_cv_header_pthread_h" = x""yes; then :
 #define HAVE_PTHREAD_H 1
 _ACEOF
 
-       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -lpthread" >&5
-$as_echo_n "checking for pthread_create in -lpthread... " >&6; }
+       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -pthread" >&5
+$as_echo_n "checking for pthread_create in -pthread... " >&6; }
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -7239,7 +7239,7 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_create" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_create" >&6; }
 if test "x$ac_cv_lib_pthread_pthread_create" = x""yes; then :
-  PTHREAD_LIBS="-lpthread"
+  PTHREAD_LIBS="-pthread"
 fi
 
        have_pthread=yes
@@@@ -7319,18 +7319,6 @@@@ if test "${with_group+set}" = set; then :
d23 1
a23 1
@@@@ -7971,7 +7959,7 @@@@ $as_echo "#define STDC_HEADERS 1" >>confdefs.h
d32 1
a32 1
@@@@ -8216,6 +8204,7 @@@@ $as_echo_n "checking for socklen_t in <sys/socket.h>..
d40 9
@


1.11
log
@Fix a few warnings.
@
text
@d1 5
a5 5
$OpenBSD: patch-configure,v 1.10 2010/05/20 10:40:05 espie Exp $
--- configure.orig	Mon Apr 26 02:57:49 2010
+++ configure	Sat Nov 27 11:25:18 2010
@@@@ -11687,13 +11687,13 @@@@ as_val=`eval 'as_val=${'$as_ac_Header'}
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
d8 1
a8 1
-       { $as_echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
d10 1
a10 1
+       { $as_echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
d12 1
a12 1
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
d18 5
a22 5
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -11753,7 +11753,7 @@@@ fi
 { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_pthread_pthread_create" >&5
d24 1
a24 1
 if test "x$ac_cv_lib_pthread_pthread_create" = x""yes; then
d30 1
a30 1
@@@@ -11927,18 +11927,6 @@@@ if test "${with_group+set}" = set; then
d40 1
a40 1
-      { $as_echo "$as_me:$LINENO: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&5
d42 1
a42 1
-      { $as_echo "$as_me:$LINENO: WARNING: Locking feature will be disabled." >&5
d49 1
a49 2
@@@@ -12752,7 +12740,7 @@@@ fi
 
d51 1
d58 2
a59 2
@@@@ -14056,6 +14044,7 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
@


1.10
log
@fix auto-detection of socket.h
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.9 2010/04/26 10:41:28 ajacoutot Exp $
d3 1
a3 1
+++ configure	Tue May 11 08:33:39 2010
d49 9
@


1.9
log
@Update to sane-backends-1.0.21.
* new backends
* lots of bugfixes
* 224 more scanner models supported

If you have any regression with your device, let me know.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.8 2010/03/21 09:53:19 ajacoutot Exp $
d3 1
a3 1
+++ configure	Mon Apr 26 08:31:07 2010
d49 8
@


1.8
log
@Re-enable the pixma backend.

spotted by kolaloka at netbsd dot sk
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2009/05/06 10:23:21 ajacoutot Exp $
--- configure.orig	Tue May  5 10:03:09 2009
+++ configure	Tue May  5 10:04:50 2009
@@@@ -11606,13 +11606,13 @@@@ as_val=`eval 'as_val=${'$as_ac_Header'}
d21 1
a21 1
@@@@ -11672,7 +11672,7 @@@@ fi
d30 1
a30 1
@@@@ -11843,18 +11843,6 @@@@ if test "${with_group+set}" = set; then
@


1.7
log
@- major update to sane-backends-1.0.20:
* new and updated backends
* 75 more scanner models supported
* epson backend deprecated, use epson2
* coolscan2 backend deprecated, use coolscan3
* improved saned configuration
* updated translations and documentations
* bugfixes
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.6 2008/02/13 13:23:58 ajacoutot Exp $
a48 9
@@@@ -34117,7 +34105,7 @@@@ ALL_BACKENDS="abaton agfafocus apple artec artec_eplus
         hp5590 hpsj5s hpljm1005 hs2p ibm leo lexmark ma1509 \
         matsushita microtek microtek2 mustek mustek_pp \
         mustek_usb mustek_usb2 nec net niash pie pint \
-        pixma plustek plustek_pp qcam ricoh rts8891 s9036 \
+        plustek plustek_pp qcam ricoh rts8891 s9036 \
         sceptre sharp sm3600 sm3840 snapscan sp15c st400 \
         stv680 tamarack teco1 teco2 teco3 test u12 umax
         umax_pp umax1220u v4l xerox_mfp"
@


1.6
log
@- update to sane-backends-1.0.19
(it should be the last release of the SANE 1.0 series)
- some port cleanups while here
@
text
@d1 5
a5 13
$OpenBSD: patch-configure,v 1.5 2006/07/21 10:31:09 alek Exp $
--- configure.orig	Mon Feb 11 00:02:31 2008
+++ configure	Tue Feb 12 11:47:39 2008
@@@@ -6388,7 +6388,7 @@@@ done
 
   #check if links for dynamic libs should be created
   case "${host_os}" in
-  darwin*)
+  darwin* | openbsd* )
     USE_LINKS=no
     ;;
   *)
@@@@ -7657,13 +7657,13 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d8 4
a11 5
 
-{ echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6; }
+{ echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6; }
d13 1
a13 1
   echo $ECHO_N "(cached) $ECHO_C" >&6
d21 6
a26 7
@@@@ -7723,7 +7723,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
 #define HAVE_LIBPTHREAD 1
 _ACEOF
 
-  LIBS="-lpthread $LIBS"
+  LIBS="-pthread $LIBS"
 
d29 2
a30 1
@@@@ -7884,18 +7884,6 @@@@ if test "${with_group+set}" = set; then
d40 4
a43 4
-      { echo "$as_me:$LINENO: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&5
-echo "$as_me: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&2;}
-      { echo "$as_me:$LINENO: WARNING: Locking feature will be disabled." >&5
-echo "$as_me: WARNING: Locking feature will be disabled." >&2;}
d49 9
a57 9
@@@@ -27050,7 +27038,7 @@@@ echo "$as_me: Manually selected backends: ${BACKENDS}"
 	  hp hp3500 hp3900 hp4200 hp5400 hp5590 hpljm1005 hs2p \
 	  ibm leo lexmark \
 	  ma1509 matsushita microtek microtek2 mustek mustek_usb \
-	  nec niash pie pixma plustek ricoh \
+	  nec niash pie plustek ricoh \
 	  s9036 sceptre sharp sm3600 sm3840 snapscan sp15c st400 stv680 \
 	  tamarack teco1 teco2 teco3 test u12 umax umax_pp umax1220u"
 
@


1.5
log
@Update to 1.0.18 from Antoine Jacoutot <ajacoutot@@lphp.org>
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Mon Jul  3 00:22:09 2006
+++ configure	Mon Jul  3 16:43:49 2006
@@@@ -5779,7 +5779,7 @@@@ done
d13 24
a36 1
@@@@ -7549,17 +7549,17 @@@@ if test "${with_group+set}" = set; then
d39 5
a43 1
     # check if the group does exist
a54 11
+#    lasterror=""
+#    touch sanetest.file
+#    chgrp $LOCKPATH_GROUP sanetest.file 2>/dev/null || lasterror=$?
+#    rm -f sanetest.file
+#    if test ! -z "$lasterror"; then
+#      { echo "$as_me:$LINENO: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&5
+#echo "$as_me: WARNING: Group $LOCKPATH_GROUP does not exist on this system." >&2;}
+#      { echo "$as_me:$LINENO: WARNING: Locking feature will be disabled." >&5
+#echo "$as_me: WARNING: Locking feature will be disabled." >&2;}
+#      use_locking=no
+#    fi
d58 9
a66 9
@@@@ -28966,7 +28966,7 @@@@ echo "$as_me: Manually selected backends
     BACKENDS="abaton agfafocus apple artec as6e avision bh canon \
           canon630u coolscan coolscan2 dc25 dmc \
           epson fujitsu genesys gt68xx hp leo lexmark matsushita microtek \
-          microtek2 mustek mustek_usb nec pie pixma plustek \
+          microtek2 mustek mustek_usb nec pie plustek \
           plustek_pp ricoh s9036 sceptre sharp \
           sp15c st400 tamarack test teco1 teco2 teco3 umax umax_pp umax1220u \
           artec_eplus48u ma1509 ibm hp5400 u12 snapscan niash sm3840 hp4200 \
@


1.4
log
@- Fix build when _saned group doesn't exist
- Bump PKGNAME
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2006/04/23 10:29:53 alek Exp $
--- configure.orig	Sun Dec 18 14:16:04 2005
+++ configure	Sun Apr 23 15:39:34 2006
@@@@ -4929,7 +4929,7 @@@@ done
d13 2
a14 2
@@@@ -6381,18 +6381,6 @@@@ if test "${with_group+set}" = set; then
   LOCKPATH_GROUP="$withval"
d16 1
a16 2
 fi;
-    # check if the group does exist
d28 11
d42 9
@


1.3
log
@Update to 1.0.17

From Antoine Jacoutot <ajacoutot@@lphp.org> (MAINTAINER)
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.orig	Mon Dec 19 15:02:38 2005
+++ configure	Mon Dec 19 15:02:54 2005
d13 19
@


1.2
log
@the real culprit
@
text
@d1 12
a12 11
$OpenBSD: patch-configure,v 1.1 2005/11/15 20:10:46 wilfried Exp $
--- configure.orig	Sun Aug  7 11:50:27 2005
+++ configure	Tue Nov 15 20:57:13 2005
@@@@ -14772,7 +14772,6 @@@@ openbsd*)
   need_lib_prefix=no
   need_version=no
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     case $host_os in
@


1.1
log
@don't call ldconfig when building the port
@
text
@d1 1
a1 1
$OpenBSD$
@

