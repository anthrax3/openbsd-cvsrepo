head	1.79;
access;
symbols
	OPENBSD_6_2:1.79.0.2
	OPENBSD_6_2_BASE:1.79
	OPENBSD_6_1:1.76.0.4
	OPENBSD_6_1_BASE:1.76
	OPENBSD_6_0:1.76.0.2
	OPENBSD_6_0_BASE:1.76
	OPENBSD_5_9:1.73.0.2
	OPENBSD_5_9_BASE:1.73
	OPENBSD_5_8:1.69.0.4
	OPENBSD_5_8_BASE:1.69
	OPENBSD_5_7:1.65.0.4
	OPENBSD_5_7_BASE:1.65
	OPENBSD_5_6:1.65.0.2
	OPENBSD_5_6_BASE:1.65
	OPENBSD_5_5:1.62.0.2
	OPENBSD_5_5_BASE:1.62
	OPENBSD_5_4:1.60.0.2
	OPENBSD_5_4_BASE:1.60
	OPENBSD_5_3:1.54.0.2
	OPENBSD_5_3_BASE:1.54
	OPENBSD_5_2:1.51.0.2
	OPENBSD_5_2_BASE:1.51
	OPENBSD_5_1_BASE:1.49
	OPENBSD_5_1:1.49.0.2
	OPENBSD_5_0:1.46.0.2
	OPENBSD_5_0_BASE:1.46
	OPENBSD_4_9:1.38.0.2
	OPENBSD_4_9_BASE:1.38
	OPENBSD_4_8:1.24.0.2
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.21.0.4
	OPENBSD_4_7_BASE:1.21
	OPENBSD_4_6:1.21.0.2
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.17.0.6
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.17.0.4
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.2
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.14.0.4
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.14.0.2
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.12.0.2
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	alek_20051003:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.79
date	2017.06.01.07.42.48;	author sthen;	state Exp;
branches;
next	1.78;
commitid	kWaOotnSJ8fH1vQt;

1.78
date	2017.05.27.14.39.34;	author ajacoutot;	state Exp;
branches;
next	1.77;
commitid	g6zj9XrjOTGWjn16;

1.77
date	2017.05.23.13.00.46;	author ajacoutot;	state Exp;
branches;
next	1.76;
commitid	NC0FUknvzq58Se0n;

1.76
date	2016.05.18.20.02.27;	author sthen;	state Exp;
branches;
next	1.75;
commitid	j9bfsiSBfoGsmrqp;

1.75
date	2016.04.04.22.57.45;	author naddy;	state Exp;
branches;
next	1.74;
commitid	FILF1LJRoZlYu0JV;

1.74
date	2016.03.11.20.28.26;	author naddy;	state Exp;
branches;
next	1.73;
commitid	UYLP8TE6V7RS2GhJ;

1.73
date	2016.01.09.09.52.03;	author ajacoutot;	state Exp;
branches;
next	1.72;
commitid	lSFI3UxwoJRqAALX;

1.72
date	2015.12.21.08.39.59;	author ajacoutot;	state Exp;
branches;
next	1.71;
commitid	T7SiyEjOkDCHyqrl;

1.71
date	2015.12.02.11.00.50;	author ajacoutot;	state Exp;
branches;
next	1.70;
commitid	7EWxZbHjuzgo8Uzg;

1.70
date	2015.10.09.07.06.52;	author ajacoutot;	state Exp;
branches;
next	1.69;
commitid	Rl8XoJhkYtTyIxf9;

1.69
date	2015.07.07.14.33.34;	author ajacoutot;	state Exp;
branches;
next	1.68;
commitid	ICGMqQ1oNDB5Gm5S;

1.68
date	2015.06.10.22.04.04;	author sthen;	state Exp;
branches;
next	1.67;
commitid	1lorqgApMYj9zjuA;

1.67
date	2015.05.22.11.31.16;	author ajacoutot;	state Exp;
branches;
next	1.66;
commitid	2khjHXfpTaOuNVcx;

1.66
date	2015.04.04.09.21.01;	author ajacoutot;	state Exp;
branches;
next	1.65;
commitid	kS3kwKZogsvzYmEY;

1.65
date	2014.07.11.16.59.35;	author ajacoutot;	state Exp;
branches;
next	1.64;
commitid	6IFaboerh81Q66W0;

1.64
date	2014.07.10.13.09.06;	author ajacoutot;	state Exp;
branches;
next	1.63;
commitid	Xpirey71VpT09196;

1.63
date	2014.04.21.12.24.07;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2013.10.01.08.59.10;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2013.09.05.06.24.34;	author landry;	state Exp;
branches;
next	1.60;

1.60
date	2013.06.20.06.54.36;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2013.06.17.19.28.36;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2013.04.27.15.44.21;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2013.03.21.08.45.19;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2013.03.11.11.10.55;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2013.03.08.06.44.18;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2013.01.05.12.53.09;	author ajacoutot;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2012.08.28.08.26.40;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2012.08.04.15.08.45;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2012.04.28.10.51.44;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2012.02.16.22.29.15;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2011.11.13.13.54.04;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2011.09.16.10.02.38;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2011.07.25.14.36.45;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.06.16.10.14.58;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2011.06.02.13.41.38;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.05.11.06.56.43;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2011.04.25.09.34.39;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2011.03.09.13.05.20;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2011.03.03.14.05.48;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2011.03.03.13.43.50;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2011.01.17.23.26.50;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.12.27.14.50.22;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.12.20.11.40.39;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2010.12.11.12.57.37;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2010.12.06.18.51.09;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.11.30.08.14.05;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.27.11.36.00;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.25.13.55.57;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.17.08.05.16;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2010.11.06.07.58.40;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2010.10.29.12.54.43;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.28.12.32.57;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2010.10.18.18.13.15;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.04.27.14.29.44;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.04.26.10.41.28;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.03.21.09.53.19;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.06.08.19.42.32;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.05.11.15.22.07;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2009.05.06.10.23.21;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.03.05.07.54.13;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2008.02.13.13.23.58;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2007.10.25.20.43.14;	author winiger;	state Exp;
branches;
next	1.15;

1.15
date	2007.09.15.20.09.43;	author simon;	state Exp;
branches;
next	1.14;

1.14
date	2007.01.29.08.27.38;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.27.12.53.01;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2006.08.14.12.55.30;	author kurt;	state Exp;
branches;
next	1.11;

1.11
date	2006.08.03.12.53.18;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2006.07.22.11.52.49;	author steven;	state Exp;
branches;
next	1.9;

1.9
date	2006.07.21.10.31.08;	author alek;	state Exp;
branches;
next	1.8;

1.8
date	2006.04.23.13.32.13;	author alek;	state Exp;
branches;
next	1.7;

1.7
date	2006.04.23.10.29.53;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2006.01.08.00.29.38;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2005.12.26.14.09.47;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2005.10.09.09.12.19;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2005.10.06.22.37.45;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2005.10.04.21.42.38;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2005.10.03.21.15.04;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.10.03.21.15.04;	author alek;	state Exp;
branches;
next	;

1.54.2.1
date	2013.05.01.07.43.44;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.79
log
@un-tedu graphics/sane-backends, removing sys/scanio.h caused one of the backends
not to be built, breaking packaging and knocking out about 15 ports.  ok aja
@
text
@# $OpenBSD: Makefile,v 1.78 2017/05/27 14:39:34 ajacoutot Exp $

BROKEN-alpha=		ICE hp5590.c:1141: error: unrecognizable insn

COMMENT=		API for accessing scanners, backends

DISTNAME=		sane-backends-1.0.27
REVISION=		0

SHARED_LIBS +=  sane                 2.0      # unknown

CATEGORIES=		graphics

HOMEPAGE=		http://www.sane-project.org/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c execinfo jpeg m png pthread tiff usb-1.0 v4l1 v4l2
WANTLIB += v4lconvert z

MASTER_SITES=		https://alioth.debian.org/frs/download.php/file/4224/ \
			https://distfiles.bsdfrog.org/

BUILD_DEPENDS=		devel/gettext-tools

LIB_DEPENDS=		devel/libusb1 \
			graphics/png \
			graphics/tiff \
			multimedia/libv4l

FLAVORS=		snmp
FLAVOR?=

USE_GMAKE=		Yes

LOCALSTATEDIR=		${BASELOCALSTATEDIR}/spool

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=		--sbindir=${PREFIX}/libexec \
			--with-docdir=${PREFIX}/share/doc/sane-backends \
			--without-api-spec \
			--without-gphoto2 \
			--with-group=553 \
			--enable-pthread \
			--disable-latex

# XXX doesn't work
#CONFIGURE_ARGS +=	--enable-avahi

.if ${FLAVOR:Msnmp}
LIB_DEPENDS +=		net/net-snmp
WANTLIB += crypto netsnmp
CONFIGURE_ARGS +=	--with-snmp
.else
CONFIGURE_ARGS +=	--without-snmp
.endif

# missing check in configure for config.h.in
CFLAGS +=		-DHAVE_SYS_SOCKET_H

FAKE_FLAGS=		configdir=${PREFIX}/share/examples/sane-backends/sane.d

post-install:
	# removing the microtek2 backend which needs a Linux kernel module
	find ${PREFIX} -name \*microtek2\* | xargs rm
	cp -R ${WRKSRC}/tools/openbsd/ \
		${PREFIX}/share/examples/sane-backends/hotplug
	rm ${PREFIX}/share/doc/sane-backends/README*
	rm ${PREFIX}/share/examples/sane-backends/hotplug/{attach,detach}.orig
	rm ${PREFIX}/lib/sane/*.{a,la}

.include <bsd.port.mk>
@


1.78
log
@--without-api-spec in case we detect ghostscript, transig and/or texlive
which may break the port if dpb junks one of them.

reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2017/05/23 13:00:46 ajacoutot Exp $
d8 1
@


1.77
log
@Update to sane-backends-1.0.27.
- now uses libusb1, so ping me if you see a regression
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2016/05/18 20:02:27 sthen Exp $
d45 1
@


1.76
log
@Make sure we pull in errno.h for all files in sane-backends that use
errno. This is a requirement on OpenBSD now that errno is stored in the
TIB; most uses have already been taken care of, but this slipped through
the cracks as it only provides a dlopen()'d module rather than object
code which is linked during build.  ok guenther@@ ajacoutot@@

Note to readers, if you see "undefined symbol 'errno'" messages when you
run or use programs on OpenBSD following this change (libc 87.0 etc.),
please report them, even if the program appears to otherwise run normally.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2016/04/04 22:57:45 naddy Exp $
d7 1
a7 2
DISTNAME=		sane-backends-1.0.25
REVISION=		4
d20 2
a21 2
WANTLIB += c jpeg m png pthread tiff usb usb-1.0 v4l1 v4l2 v4lconvert
WANTLIB += z
d23 2
a24 2
MASTER_SITES=		http://fossies.org/linux/misc/ \
			https://alioth.debian.org/frs/download.php/file/4146/
d28 1
a28 1
LIB_DEPENDS=		devel/libusb-compat \
@


1.75
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2016/03/11 20:28:26 naddy Exp $
d8 1
a8 1
REVISION=		3
@


1.74
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2016/01/09 09:52:03 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
@


1.73
log
@This picked up libv4l but did not build libsane-v4l.so; so fix that.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/12/21 08:39:59 ajacoutot Exp $
d44 1
a44 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--sbindir=${PREFIX}/libexec \
@


1.72
log
@Enable pthread to support kvs40xx amd mustek_usb2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/12/02 11:00:50 ajacoutot Exp $
d8 1
a8 1
REVISION=		1
d21 2
a22 1
WANTLIB += c jpeg m png pthread tiff usb usb-1.0 z
d31 2
a32 1
			graphics/tiff
@


1.71
log
@Move the `-a' flags from daemon_flags to daemon; it is always required to
run in standalone daemon mode.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2015/10/09 07:06:52 ajacoutot Exp $
d8 1
a8 1
REVISION=		0
d47 1
a64 3

pre-configure:
	${SUBST_CMD} ${WRKSRC}/configure
@


1.70
log
@Update to sane-backends-1.0.25.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2015/07/07 14:33:34 ajacoutot Exp $
d8 1
@


1.69
log
@Change some obvious sudo usage to '#' in READMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2015/06/10 22:04:04 sthen Exp $
d3 1
a3 1
BROKEN-alpha =	ICE hp5590.c:1141: error: unrecognizable insn
d5 1
a5 1
COMMENT=	API for accessing scanners, backends
d7 1
a7 2
DISTNAME=	sane-backends-1.0.24
REVISION=	6
d11 1
a11 1
CATEGORIES=	graphics
d13 1
a13 1
HOMEPAGE=	http://www.sane-project.org/
d15 1
a15 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d20 1
a20 2
WANTLIB += avahi-client avahi-common c cups dbus-1 ffi gmp gnutls hogweed
WANTLIB += jpeg m nettle p11-kit pthread tasn1 tiff usb usb-1.0 z
d22 2
a23 2
MASTER_SITES=	https://distfiles.bsdfrog.org/ \
		ftp://ftp2.sane-project.org/pub/sane/${DISTNAME}/
d25 1
a25 1
MODULES=	devel/gettext
d27 3
a29 3
LIB_DEPENDS=	graphics/tiff \
		devel/libusb-compat \
		print/cups,-libs
d31 1
a31 1
FLAVORS=	snmp
d34 1
a34 1
USE_GMAKE=	Yes
d36 1
a36 1
LOCALSTATEDIR=	${BASELOCALSTATEDIR}/spool
d38 9
a46 9
CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--sbindir=${PREFIX}/libexec \
		--with-docdir=${PREFIX}/share/doc/sane-backends \
		--without-gphoto2 \
		--with-group=553 \
		--disable-latex
d49 1
a49 1
#CONFIGURE_ARGS+=--enable-avahi
d52 3
a54 3
LIB_DEPENDS +=	net/net-snmp
WANTLIB +=	crypto netsnmp
CONFIGURE_ARGS += --with-snmp
d56 1
a56 1
CONFIGURE_ARGS += --without-snmp
d60 1
a60 1
CFLAGS +=	-DHAVE_SYS_SOCKET_H
d62 1
a62 1
FAKE_FLAGS=	configdir=${PREFIX}/share/examples/sane-backends/sane.d
d74 1
@


1.68
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2015/05/22 11:31:16 ajacoutot Exp $
d8 1
a8 1
REVISION=	5
@


1.67
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2015/04/04 09:21:01 ajacoutot Exp $
d8 1
a8 1
REVISION=	4
d21 2
a22 2
WANTLIB += avahi-client avahi-common c crypto cups dbus-1 jpeg
WANTLIB += m pthread ssl tiff usb usb-1.0 z
@


1.66
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/07/11 16:59:35 ajacoutot Exp $
d8 1
a8 1
REVISION=	3
@


1.65
log
@Remove unneeded chunk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/07/10 13:09:06 ajacoutot Exp $
d8 1
a8 1
REVISION=	2
@


1.64
log
@rc.conf.local is in man(1) section 8, at least for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2014/04/21 12:24:07 ajacoutot Exp $
d8 1
a8 1
REVISION=	1
@


1.63
log
@Sync wantlib after kerberos removal from cups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2013/10/01 08:59:10 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
@


1.62
log
@Update to sane-backends-1.0.24.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2013/09/05 06:24:34 landry Exp $
d8 1
d21 2
a22 3
WANTLIB += asn1 c crypto cups gssapi jpeg krb5 m pthread ssl tiff
WANTLIB += usb usb-1.0 z avahi-client avahi-common dbus-1
WANTLIB += com_err heimbase roken wind
@


1.61
log
@Mark as BROKEN-alpha:

hp5590.c: In function 'sane_hp5590_start':
hp5590.c:1141: error: unrecognizable insn:
(insn 2143 2142 2144 196 (set (reg:DI 929)
        (plus:DI (reg/f:DI 65 virtual-stack-vars)
            (const_int -131110 [0xfffffffffffdffda]))) -1 (nil)
    (nil))
hp5590.c:1141: internal compiler error: in extract_insn, at recog.c:2077

(yeah, right..)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.60 2013/06/20 06:54:36 ajacoutot Exp $
a5 1
BROKEN-alpha =	ICE hp5590.c:1141: error: unrecognizable insn
d7 3
a9 2
DISTNAME=	sane-backends-1.0.23
REVISION=	4
a10 1
SHARED_LIBS=	sane 2.0 # .1.0
d24 2
a25 12
# XXX
# README.txt: Due to limitations in alioth's file upload software, the
# release has been divided into 3 parts. Download all three, and the
# .md5sum. Join them using the following command:
# cat sane-backends-1.0.23.tar.gz.[1-3] > sane-backends-1.0.23.tar.gz
# Then check the md5sum as follows:
# md5sum -c sane-backends-1.0.23.tar.gz.md5
# MASTER_SITES=	https://alioth.debian.org/frs/download.php/3752/ \
#		ftp://ftp.sane-project.org/pub/sane/${DISTNAME}/ \
#		ftp://ftp.sane-project.org/pub/sane/old-versions/${DISTNAME}/ \
#		ftp://ftp2.sane-project.org/pub/sane/${DISTNAME}/
MASTER_SITES=	http://distfiles.bsdfrog.org/
a36 2
USE_GROFF=	Yes
NO_TEST=	Yes
d61 3
d74 1
@


1.60
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/06/17 19:28:36 ajacoutot Exp $
d4 1
@


1.59
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/04/27 15:44:21 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
d20 1
a20 1
WANTLIB += com_err heimbase heimntlm hx509 roken wind
@


1.58
log
@Tweak MESSAGEs/READMEs now that inetd(8) is off by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/03/21 08:45:19 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
d20 1
@


1.57
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/03/11 11:10:55 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.56
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/03/08 06:44:18 ajacoutot Exp $
a42 1
USE_LIBTOOL=	Yes
@


1.55
log
@Fix pnm corruption due to error being sent to stdout.

from Jeremie Courreges-Anglas, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/01/05 12:53:09 ajacoutot Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d46 1
a46 1
NO_REGRESS=	Yes
@


1.54
log
@Adapt dependencies after recent print/cups change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2012/08/28 08:26:40 ajacoutot Exp $
d6 1
a6 1
REVISION=	0
@


1.54.2.1
log
@Fix pnm corruption due to error being sent to stdout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/01/05 12:53:09 ajacoutot Exp $
d6 1
a6 1
REVISION=	1
@


1.53
log
@Update to sane-backends-1.0.23.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2012/08/04 15:08:45 ajacoutot Exp $
d6 1
d22 1
a22 1
WANTLIB += usb usb-1.0 z
d36 2
@


1.52
log
@Tweak README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/04/28 10:51:44 ajacoutot Exp $
d5 1
a5 3
DISTNAME=	sane-backends-1.0.22

REVISION=	9
d20 2
a21 1
WANTLIB += c jpeg m tiff usb z pthread usb-1.0
d23 12
a34 3
MASTER_SITES=	ftp://ftp.sane-project.org/pub/sane/${DISTNAME}/ \
		ftp://ftp.sane-project.org/pub/sane/old-versions/${DISTNAME}/ \
		ftp://ftp2.sane-project.org/pub/sane/${DISTNAME}/
d37 2
a38 1
		devel/libusb-compat
a45 1

d52 1
a52 2
		LDFLAGS="-L${LOCALBASE}/lib -pthread" \
		ac_cv_path_MAKEDEPEND="no"
d73 3
d81 1
@


1.51
log
@Use LOCALSTATEDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/02/16 22:29:15 ajacoutot Exp $
d7 1
a7 1
REVISION=	8
@


1.50
log
@Extend DESCR and tweak hotplugd(8) scripts accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/12/02 14:36:14 espie Exp $
d40 2
a48 1
		--localstatedir=/var/spool \
@


1.49
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/11/13 13:54:04 ajacoutot Exp $
d7 1
a7 1
REVISION=	7
@


1.48
log
@Sync dependencies after move from libusb to libusb-compat and fix a
couple of fallouts. Note that these ports are only the ones that used to
have a direct dependency on devel/libusb so there may be some other
hidden ports that may break because of the switch. If that's the case,
no need to start ranting all over but instead tell me which one(s)
break. Thanks.

Note: sysutils/nut hasn't been fixed yet but will be today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/09/16 10:02:38 espie Exp $
d55 1
a55 1
.if ${FLAVOR:L:Msnmp}
@


1.47
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/07/25 14:36:45 ajacoutot Exp $
d7 1
a7 1
REVISION=	6
d22 1
a22 1
WANTLIB += c jpeg m tiff usb z
d29 1
a29 1
		devel/libusb
d42 1
a42 1
		LDFLAGS="-L${LOCALBASE}/lib" \
@


1.46
log
@Add a MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/06/16 10:14:58 ajacoutot Exp $
d7 1
a7 1
REVISION=	5
@


1.45
log
@Disable the gphoto2 backend which doesn't really make sense nowadays.
Do not enable avahi support, it's broken for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/06/02 13:41:38 ajacoutot Exp $
d25 2
a26 1
		ftp://ftp.sane-project.org/pub/sane/old-versions/${DISTNAME}/
@


1.44
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/05/11 06:56:43 ajacoutot Exp $
d7 1
a7 1
REVISION=	4
d22 1
a22 2
WANTLIB += avahi-client avahi-common c dbus-1 exif gphoto2
WANTLIB += gphoto2_port jpeg ltdl m pthread tiff usb z
d28 1
a28 4
		graphics/libgphoto2 \
		net/avahi

MODULES=	devel/gettext
d35 1
a35 1
USE_GROFF =	Yes
d47 1
a47 1
		--with-gphoto2 \
a48 1
		--enable-avahi \
d50 3
@


1.43
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/04/25 09:34:39 ajacoutot Exp $
d7 1
a7 1
REVISION=	3
@


1.42
log
@Don't compile with net-snmp by default, instead create an "snmp" FLAVOR
for people who need snmp network scanner support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/03/09 13:05:20 ajacoutot Exp $
d7 1
a7 1
REVISION=	2
@


1.41
log
@Use the same trick as in nut to identify the /dev/{ugen,usb}* we want.

discussed with and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/03/03 14:05:48 ajacoutot Exp $
d7 1
a7 1
REVISION=	1
d22 2
a23 2
WANTLIB += avahi-client avahi-common c crypto dbus-1 exif gphoto2
WANTLIB += gphoto2_port jpeg ltdl m netsnmp pthread tiff usb z
d30 1
a30 2
		net/avahi \
		net/net-snmp
d34 3
d55 8
@


1.40
log
@device -> device node.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/03/03 13:43:50 ajacoutot Exp $
d7 1
a7 1
REVISION=	0
@


1.39
log
@Update to sane-backends-1.0.22.
Add snmp support.
Fix username in README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/01/17 23:26:50 ajacoutot Exp $
d6 2
@


1.38
log
@Missed bump, spotted by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/12/27 14:50:22 ajacoutot Exp $
d5 1
a5 5
DISTNAME=	sane-backends-1.0.21
REVISION=	12

PATCHFILES=	sane-backends-1.0.21-i18n.patch
PATCH_DIST_STRIP= -p1
d20 2
a21 2
WANTLIB += c dbus-1 exif jpeg ltdl m pthread usb z tiff
WANTLIB += gphoto2 gphoto2_port avahi-client avahi-common
a23 3
		ftp://ftp.ibiblio.org/pub/Linux/apps/graphics/capture/ \
		http://gd.tuwien.ac.at/hci/sane/${DISTNAME}/ \
		ftp://gd.tuwien.ac.at/hci/sane/${DISTNAME}/ \
d28 2
a29 1
		net/avahi
@


1.37
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/12/24 10:40:05 ajacoutot Exp $
d6 1
a6 1
REVISION=	11
@


1.36
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/12/20 11:40:39 ajacoutot Exp $
d6 1
a6 1
REVISION=	10
@


1.35
log
@Extend README.
Remove rc_pre and rc_post, uscanner(4) is disabled by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/12/11 12:57:37 ajacoutot Exp $
d6 1
a6 1
REVISION=	9
@


1.34
log
@Move these to rc_reload=NO.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/12/06 18:51:09 ajacoutot Exp $
d6 1
a6 1
REVISION=	8
@


1.33
log
@Tweak the README now that we have an rc script for saned.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/11/30 08:14:05 ajacoutot Exp $
d6 1
a6 1
REVISION=	7
@


1.32
log
@Give ownership to the _saned user by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/27 11:36:00 ajacoutot Exp $
d6 1
a6 1
REVISION=	6
@


1.31
log
@Fix a few warnings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/25 13:55:57 ajacoutot Exp $
d6 1
a6 1
REVISION=	5
@


1.30
log
@Remove the microtek2 backend which needs a Linux kernel module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/17 08:05:16 espie Exp $
d6 1
a6 1
REVISION=	4
@


1.29
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/11/06 07:58:40 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
d61 2
@


1.28
log
@Move to pkg-readmes.
Remove references to ss(4) which is gone now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/10/29 12:54:43 ajacoutot Exp $
d33 3
a35 3
LIB_DEPENDS=	::graphics/tiff \
		::graphics/libgphoto2 \
		::net/avahi
@


1.27
log
@Add RCS IDs to rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/10/28 12:32:57 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
a60 3
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/doc/sane-backends/README.OpenBSD
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/doc/sane-backends
@


1.26
log
@Add rc script for the sane network scanner daemon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/10/18 18:13:15 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.25
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/04/27 14:29:44 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d24 2
a25 1
WANTLIB += c dbus-1 exif jpeg ltdl m pthread usb z
d33 3
a35 3
LIB_DEPENDS=	tiff.>=38::graphics/tiff \
		gphoto2.>=2,gphoto2_port.>=5::graphics/libgphoto2 \
		avahi-client,avahi-common::net/avahi
@


1.24
log
@Bring translations back using patch provided upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/04/26 10:41:28 ajacoutot Exp $
d40 1
@


1.23
log
@Update to sane-backends-1.0.21.
* new backends
* lots of bugfixes
* 224 more scanner models supported

If you have any regression with your device, let me know.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/03/21 09:53:19 ajacoutot Exp $
d6 4
@


1.22
log
@Re-enable the pixma backend.

spotted by kolaloka at netbsd dot sk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/06/08 19:42:32 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	sane-backends-1.0.20
PKGNAME=	${DISTNAME}p2
@


1.21
log
@Add avahi support.
Left over from c2k9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/05/11 15:22:07 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.20
log
@- fix xsane build:
while being deprecated and undocumented, SANE_CAP_ALWAYS_SETTABLE is
still used by (at least) xsane

note to self: stop using frankenstein system to test ports!

breakage reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/05/06 10:23:21 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d21 1
a21 1
WANTLIB += c exif jpeg ltdl m pthread usb z
d30 2
a31 1
		gphoto2.>=2,gphoto2_port.>=5::graphics/libgphoto2
d50 1
a50 1
		--disable-avahi \
@


1.19
log
@- major update to sane-backends-1.0.20:
* new and updated backends
* 75 more scanner models supported
* epson backend deprecated, use epson2
* coolscan2 backend deprecated, use coolscan3
* improved saned configuration
* updated translations and documentations
* bugfixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/03/05 07:54:13 ajacoutot Exp $
d6 2
@


1.18
log
@- tweak MESSAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/02/13 13:23:58 ajacoutot Exp $
d5 2
a6 3
DISTNAME=	sane-backends-1.0.19
PKGNAME=	${DISTNAME}p0
SHARED_LIBS=	sane 1.17 # .0.0
d19 2
d27 1
a27 5
WANTLIB=	c m pthread exif ltdl z

LIB_DEPENDS=	usb.>=7::devel/libusb \
		jpeg.>=62::graphics/jpeg \
		tiff.>=38::graphics/tiff \
d46 3
a48 1
		--with-group=553
d51 7
@


1.17
log
@- update to sane-backends-1.0.19
(it should be the last release of the SANE 1.0 series)
- some port cleanups while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/10/25 20:43:14 winiger Exp $
d6 1
@


1.16
log
@fix WANTLIB, bump PKGNAME

ok mbalmer@@ and ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/09/15 20:09:43 simon Exp $
d5 2
a6 3
DISTNAME=	sane-backends-1.0.18
PKGNAME=	${DISTNAME}p3
SHARED_LIBS=	sane 1.17
d24 1
d33 1
d36 3
a39 1

d44 2
a45 2
		--sbindir=${LOCALBASE}/libexec \
		--with-docdir=${LOCALBASE}/share/doc/sane-backends \
d50 1
a50 1
NO_REGRESS=	Yes
@


1.15
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/01/29 08:27:38 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d25 1
a25 1
WANTLIB=	c m pthread exif z
@


1.14
log
@- add a note in MESSAGE about file locking so that people using plustek
backends can actually scan
- bump PKGNAME

Issue spotted and debugged by Antti Harri <iku at openbsd dot fi>, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/10/27 12:53:01 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"API for accessing scanners, backends"
@


1.13
log
@- update my email address
- bump PKGNAME

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/08/14 12:55:30 kurt Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.12
log
@- fix build on macppc by using the correct define for a tmpnam(3) buffer
w/debugging help from drahn@@
- remove "libtool --finish" which messed up the shared library directories
- remove obsolete mandir fix
libtool/mandir fixes from naddy@@. okay mantainer and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/08/03 12:53:18 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d12 1
a12 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@lphp.org>
@


1.11
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/07/22 11:52:49 steven Exp $
d6 1
@


1.10
log
@add a working master site.

from Matthias Kilian <kili at outback.escape.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/07/21 10:31:08 alek Exp $
d26 4
a29 4
LIB_DEPENDS=	usb.7::devel/libusb \
		jpeg.62::graphics/jpeg \
		tiff.38::graphics/tiff \
		gphoto2.2,gphoto2_port.5::graphics/libgphoto2
@


1.9
log
@Update to 1.0.18 from Antoine Jacoutot <ajacoutot@@lphp.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/04/23 13:32:13 alek Exp $
d20 1
@


1.8
log
@- Fix build when _saned group doesn't exist
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/04/23 10:29:53 alek Exp $
d5 1
a5 2
DISTNAME=	sane-backends-1.0.17
PKGNAME=	${DISTNAME}p0
d23 1
a23 1
WANTLIB=	c m pthread exif
d27 1
@


1.7
log
@Update to 1.0.17

From Antoine Jacoutot <ajacoutot@@lphp.org> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/01/08 00:29:38 steven Exp $
d6 1
@


1.6
log
@remove MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/12/26 14:09:47 steven Exp $
d5 2
a6 3
DISTNAME=	sane-backends-1.0.16
PKGNAME=	${DISTNAME}p2
SHARED_LIBS=	sane 1.16
d23 1
a23 1
WANTLIB=	c m
d26 2
a27 1
		jpeg.62::graphics/jpeg
d29 1
d35 2
a36 1
		LDFLAGS="-L${LOCALBASE}/lib"
d41 1
a43 12
FLAVORS=	gphoto2
FLAVOR?=

.if ${FLAVOR:L} == "gphoto2"
LIB_DEPENDS+=	gphoto2,gphoto2_port::graphics/libgphoto2
CONFIGURE_ARGS+=--with-gphoto2
WANTLIB+=	exif
MODULES=	devel/gettext
.else
CONFIGURE_ARGS+=--without-gphoto2
.endif

a44 8

MKFILES=	lib/Makefile.in sanei/Makefile.in backend/Makefile.in \
		frontend/Makefile.in tools/Makefile.in japi/Makefile.in

pre-build:
.for i in ${MKFILES}
	perl -pi -e "s,\.\.\/libtool,${LIBTOOL},g" ${WRKSRC}/${i}
.endfor
@


1.5
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/10/09 09:12:19 alek Exp $
d7 1
a7 2
SHARED_LIBS=		sane	1.16
MODGNU_SHARED_LIBS=	sane	''
@


1.4
log
@- Fix locking to protect device access from more than one frontend
- Bump PKGNAME

From Antoine Jacoutot <ajacoutot@@lphp.org> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/10/06 22:37:45 alek Exp $
d7 2
@


1.3
log
@- Fix manpage
- Better MASTER_SITES
- Bump PKGNAME

From Antoine Jacoutot <ajacoutot@@lphp.org> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/10/04 21:42:38 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d37 2
a38 2
		--localstatedir=/var \
		--with-group=dialer
@


1.2
log
@- Fix modules names
- Better dependencies for -gphoto FLAVOR
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/10/03 21:15:04 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d21 2
a22 1
		ftp://gd.tuwien.ac.at/hci/sane/${DISTNAME}/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d46 1
d56 1
a56 1
post-patch:
@


1.1.1.1
log
@Import sane-backends 1.0.16

SANE stands for "Scanner Access Now Easy" and is an application
programming interface (API) that provides standardized access to any
raster image scanner hardware (flatbed scanner, hand-held scanner,
video- and still-cameras, frame-grabbers, etc.).

From Antoine Jacoutot <ajacoutot@@lphp.org>
@
text
@@
