head	1.2;
access;
symbols
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2016.11.09.14.53.00;	author jca;	state dead;
branches;
next	1.1;
commitid	6UdxbjNCF4z7TyQn;

1.1
date	2016.07.01.13.04.32;	author jasper;	state Exp;
branches
	1.1.2.1;
next	;
commitid	ysXuvWjjduuDt9Cf;

1.1.2.1
date	2016.07.01.13.05.50;	author jasper;	state Exp;
branches;
next	;
commitid	HWgfAUZWKDD9r51u;


desc
@@


1.2
log
@Update to imlib2-1.4.9

Drop patches:
- gcc 2.95
- .a modules support
- CVEs fixed upstream
@
text
@$OpenBSD: patch-src_lib_image_h,v 1.1 2016/07/01 13:04:32 jasper Exp $

CVE-2016-4024
https://git.enlightenment.org/legacy/imlib2.git/commit/?id=7eba2e4c8ac0e20838947f10f29d0efe1add8227

--- src/lib/image.h.orig	Fri Jul  1 14:59:56 2016
+++ src/lib/image.h	Fri Jul  1 15:00:21 2016
@@@@ -188,7 +188,8 @@@@ void                __imlib_SaveImage(ImlibImage * im,
 
 /* The maximum pixmap dimension is 65535. */
 /* However, for now, use 46340 (46340^2 < 2^31) to avoid buffer overflow issues. */
-#define X_MAX_DIM 46340
+/* Reduced further to 32767, so that (w * h * sizeof(DATA32)) won't exceed ULONG_MAX */
+#define X_MAX_DIM 32767
 
 #define IMAGE_DIMENSIONS_OK(w, h) \
    ( ((w) > 0) && ((h) > 0) && ((w) < X_MAX_DIM) && ((h) < X_MAX_DIM) )
@


1.1
log
@fixes for CVE-2011-5326, CVE-2016-3993, CVE-2016-3994, CVE-2016-4024
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@fixes for CVE-2011-5326, CVE-2016-3993, CVE-2016-3994, CVE-2016-4024
@
text
@@

