head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.8
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.12
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.10
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.8
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.26
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.24
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.22
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.20
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.18
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.16
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.14
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.12
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.10
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.8
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2015.03.14.21.30.54;	author naddy;	state Exp;
branches;
next	1.4;
commitid	O3eFo0PH2cNYdbpV;

1.4
date	2014.04.08.13.59.32;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2013.04.13.08.53.10;	author ajacoutot;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	2010.06.29.22.40.45;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2004.01.11.08.20.06;	author brad;	state Exp;
branches;
next	;

1.3.4.1
date	2014.05.20.08.56.38;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@remove patches or patch fragments for make -C
@
text
@$OpenBSD: patch-pbmtools_Makefile,v 1.4 2014/04/08 13:59:32 sthen Exp $
--- pbmtools/Makefile.orig	Thu Mar 27 18:47:15 2014
+++ pbmtools/Makefile	Tue Apr  8 14:54:55 2014
@@@@ -10,7 +10,7 @@@@ CPPFLAGS = -I../libjbig 
 .SUFFIXES: .1 .5 .txt $(SUFFIXES)
 .PHONY: txt test test82 test85 clean
 
-all: pbmtojbg jbgtopbm pbmtojbg85 jbgtopbm85 txt
+all: pbmtojbg jbgtopbm pbmtojbg85 jbgtopbm85
 
 txt: pbmtojbg.txt jbgtopbm.txt pbm.txt pgm.txt
 
@@@@ -111,8 +111,11 @@@@ test85: pbmtojbg jbgtopbm pbmtojbg85 jbgtopbm85 test-t
 	make IMG=t82 "OPTIONSP=-Y -1 1920" dotest85
 	make IMG=t82 "OPTIONSP=-Y -1 1949" dotest85
 	make IMG=t82 "OPTIONSP=-Y -1 1950" dotest85
+	make IMG=ccitt1 dotest1
 	make IMG=ccitt1 dotest85
+	make IMG=ccitt2 dotest1
 	make IMG=ccitt2 dotest85
+	make IMG=ccitt3 dotest1
 	make IMG=ccitt3 dotest85
 	rm -f test-*.jbg test-*.jbg85 test-*.pbm
 	@@echo
@


1.4
log
@SECURITY update to jbigkit 2.1 (no ABI change)

  - fixed a buffer-overflow vulnerability in the jbig.c decoder,
    reported by Florian Weimer (Red Hat): CVE-2013-6369

  - fixed ability of corrupted input data to force jbig85.c decoder
    into an end-less loop

  - fixed a bug in the processing of private deterministic-prediction
    tables (DPPRIV=1) in jbig.c decoder

  - fixed integer-type mismatches in printf arguments on 64-bit systems

  - fuzz-testing script added
@
text
@d1 1
a1 1
$OpenBSD$
a12 14
@@@@ -33,11 +33,11 @@@@ pbmtojbg85.o: pbmtojbg85.c ../libjbig/jbig85.h
 
 ../libjbig/libjbig.a: ../libjbig/jbig.c ../libjbig/jbig.h \
 	../libjbig/jbig_ar.c ../libjbig/jbig_ar.h
-	make -C ../libjbig libjbig.a
+	cd ../libjbig; $(MAKE) libjbig.a
 
 ../libjbig/libjbig85.a: ../libjbig/jbig85.c ../libjbig/jbig85.h \
 	../libjbig/jbig_ar.c ../libjbig/jbig_ar.h
-	make -C ../libjbig libjbig85.a
+	cd ../libjbig; $(MAKE) libjbig85.a
 
 analyze:
 	clang $(CPPFLAGS) --analyze *.c
a24 9
@@@@ -147,7 +150,7 @@@@ test-%.pbm: ../examples/%.jbg
 	./jbgtopbm $< $@@
 
 test-t82.pbm:
-	make -C ../libjbig tstcodec
+	cd ../libjbig; $(MAKE) tstcodec
 	../libjbig/tstcodec $@@
 
 FOPT=-c 1000 -p 300000 -m 3
@


1.3
log
@Update to jbigkit-2.0.
This adds the lightweitgh version of the jbig library: jbig85 which is
needed by a WIP update of graphics/splix.

from Martin Crossley with some tweaks
@
text
@d1 4
a4 5
$OpenBSD: patch-pbmtools_jbgtopbm_c,v 1.1 2010/06/29 22:40:45 naddy Exp $
--- pbmtools/Makefile.orig	Mon Aug 25 23:26:39 2008
+++ pbmtools/Makefile	Fri Apr 12 15:05:35 2013
@@@@ -9,8 +9,7 @@@@ CFLAGS = -g -Wall -ansi -pedantic -I../libjbig # --cov
 
d6 1
d8 1
a8 2
-all: pbmtojbg jbgtopbm pbmtojbg85 jbgtopbm85 \
-	pbmtojbg.txt jbgtopbm.txt pbm.txt pgm.txt
d11 37
a47 2
 pbmtojbg: pbmtojbg.o ../libjbig/libjbig.a
 	$(CC) $(CFLAGS) -o pbmtojbg pbmtojbg.o -L../libjbig -ljbig
@


1.3.4.1
log
@SECURITY update to jbigkit 2.1 (no ABI change)

ok sthen@@
@
text
@d1 5
a5 4
$OpenBSD: patch-pbmtools_Makefile,v 1.4 2014/04/08 13:59:32 sthen Exp $
--- pbmtools/Makefile.orig	Thu Mar 27 18:47:15 2014
+++ pbmtools/Makefile	Tue Apr  8 14:54:55 2014
@@@@ -10,7 +10,7 @@@@ CPPFLAGS = -I../libjbig 
a6 1
 .PHONY: txt test test82 test85 clean
d8 2
a9 1
-all: pbmtojbg jbgtopbm pbmtojbg85 jbgtopbm85 txt
d12 2
a13 37
 txt: pbmtojbg.txt jbgtopbm.txt pbm.txt pgm.txt
 
@@@@ -33,11 +33,11 @@@@ pbmtojbg85.o: pbmtojbg85.c ../libjbig/jbig85.h
 
 ../libjbig/libjbig.a: ../libjbig/jbig.c ../libjbig/jbig.h \
 	../libjbig/jbig_ar.c ../libjbig/jbig_ar.h
-	make -C ../libjbig libjbig.a
+	cd ../libjbig; $(MAKE) libjbig.a
 
 ../libjbig/libjbig85.a: ../libjbig/jbig85.c ../libjbig/jbig85.h \
 	../libjbig/jbig_ar.c ../libjbig/jbig_ar.h
-	make -C ../libjbig libjbig85.a
+	cd ../libjbig; $(MAKE) libjbig85.a
 
 analyze:
 	clang $(CPPFLAGS) --analyze *.c
@@@@ -111,8 +111,11 @@@@ test85: pbmtojbg jbgtopbm pbmtojbg85 jbgtopbm85 test-t
 	make IMG=t82 "OPTIONSP=-Y -1 1920" dotest85
 	make IMG=t82 "OPTIONSP=-Y -1 1949" dotest85
 	make IMG=t82 "OPTIONSP=-Y -1 1950" dotest85
+	make IMG=ccitt1 dotest1
 	make IMG=ccitt1 dotest85
+	make IMG=ccitt2 dotest1
 	make IMG=ccitt2 dotest85
+	make IMG=ccitt3 dotest1
 	make IMG=ccitt3 dotest85
 	rm -f test-*.jbg test-*.jbg85 test-*.pbm
 	@@echo
@@@@ -147,7 +150,7 @@@@ test-%.pbm: ../examples/%.jbg
 	./jbgtopbm $< $@@
 
 test-t82.pbm:
-	make -C ../libjbig tstcodec
+	cd ../libjbig; $(MAKE) tstcodec
 	../libjbig/tstcodec $@@
 
 FOPT=-c 1000 -p 300000 -m 3
@


1.2
log
@LP64 fixes for format strings
@
text
@d1 4
a4 4
$OpenBSD: patch-pbmtools_Makefile,v 1.1 2004/01/11 08:20:06 brad Exp $
--- pbmtools/Makefile.orig	Wed Jun 11 11:27:22 2003
+++ pbmtools/Makefile	Tue Jun 29 16:19:46 2010
@@@@ -9,7 +9,7 @@@@ CFLAGS = -g -Wall -ansi -pedantic -I../libjbig
d8 3
a10 2
-all: pbmtojbg jbgtopbm pbmtojbg.txt jbgtopbm.txt pbm.txt pgm.txt
+all: pbmtojbg jbgtopbm
@


1.1
log
@- add license comment
- set LD_LIBRARY_PATH via MAKE_ENV
- remove test target
- sync patch names with update-patches
@
text
@d1 4
a4 4
$OpenBSD$
--- pbmtools/Makefile.orig	2000-04-08 07:15:52.000000000 -0400
+++ pbmtools/Makefile	2004-01-11 03:03:23.000000000 -0500
@@@@ -9,7 +9,7 @@@@ CFLAGS = -g -Wall -ansi -pedantic -I../l
@

