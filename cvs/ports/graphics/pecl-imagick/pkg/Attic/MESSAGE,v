head	1.4;
access;
symbols
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.4
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.1.1.1.0.6
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.4
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	jolan_20090816:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2012.06.16.11.38.03;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2011.07.18.09.19.48;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2011.07.08.20.19.14;	author robert;	state dead;
branches;
next	1.1;

1.1
date	2009.08.16.05.50.30;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.08.16.05.50.30;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.4
log
@MESSAGE -> README and remove bogus part that is now handled by the php/pecl
MODULE.
@
text
@You can enable this module by creating a symbolic
link from ${SYSCONFDIR}/php-${PV}.sample/${MODULE_NAME}.ini to
${SYSCONFDIR}/php-${PV}/${MODULE_NAME}.ini.

ln -fs ${SYSCONFDIR}/php-${PV}.sample/${MODULE_NAME}.ini \
	${SYSCONFDIR}/php-${PV}/${MODULE_NAME}.ini

When using the OpenBSD Apache server, the runtime loader will need to
pre-load the pthread shared library. While the php binary is linked with
-pthread, httpd is not and the pecl-imagick module uses libraries from
ImageMagick which need pthread functions.
To do so, create a login(1) class under /etc/login.conf(5) named after
the Apache rc.d(8) script, i.e. "httpd":

httpd:\
	:setenv=LD_PRELOAD=/usr/lib/libpthread.so:\
	:tc=daemon:
@


1.3
log
@- sync WANTLIB following the recent ImageMagick update

- override MESSAGE with one that also tells people to preload
pthread (you can do this via login.conf and rc scripts), text was
borrowed from ports/mail/zarafa.

Note! Without this, if you use pecl-imagick with the httpd from base,
the web server will fail to start:

/usr/sbin/httpd:/usr/local/lib/libMagickCore.so.2.0: undefined symbol 'pthread_mutexattr_init'

Users of Horde/IMP will need to take care of this.
Problem found the hard way by viq.
@
text
@@


1.2
log
@switch to lang/php
@
text
@d2 2
a3 2
link from ${PREFIX}/conf/php5.sample/imagick.ini to
${PREFIX}/conf/php5/imagick.ini.
d5 2
a6 2
ln -fs ${PREFIX}/conf/php5.sample/imagick.ini \
        ${PREFIX}/conf/php5/imagick.ini
d8 10
a17 3
If you already have Apache running on your machine,
you should not use "apachectl restart" - instead,
you should fully stop and then restart the server.
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@pecl-imagick-2.3.0, PHP support for the ImageMagick library
@
text
@@
