head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.18
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.16
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.12
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.14
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.10
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.8
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.6
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.4
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2012.11.20.12.01.07;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.04.06.38.03;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.30.09.18.17;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.28.13.43.03;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Maintenance update to ffmpegthumbnailer-2.0.8.

OK landry@@
@
text
@$OpenBSD: patch-configure_ac,v 1.3 2012/09/04 06:38:03 ajacoutot Exp $
--- configure.ac.orig	Sat Aug 25 15:00:19 2012
+++ configure.ac	Tue Nov 20 12:18:46 2012
@@@@ -128,7 +128,7 @@@@ AC_ARG_ENABLE(debug,
 AM_CONDITIONAL(DEBUG, test "$enable_debug" = "yes")
 if test "$DEBUG" = "yes"; then
     AC_DEFINE(ENABLE_DEBUG, [], "Enable debug mode")
-    CXXFLAGS="$CXXFLAGS -g -O1 -Wall -Werror -Wfatal-errors"
+    CXXFLAGS="$CXXFLAGS -g -Wall -Werror -Wfatal-errors"
 fi
 
 AC_ARG_ENABLE(unittests,
@


1.3
log
@Remove --as-needed and -pthread patching.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.2 2011/09/30 09:18:17 dcoppa Exp $
--- configure.ac.orig	Sun Jul 24 18:32:46 2011
+++ configure.ac	Tue Sep  4 08:34:57 2012
@@@@ -118,7 +118,7 @@@@ AC_ARG_ENABLE(debug,
@


1.2
log
@Bugfixing update to ffmpegthumbnailer-2.0.7
@
text
@d1 4
a4 23
$OpenBSD: patch-configure_ac,v 1.1 2011/06/28 13:43:03 dcoppa Exp $
--- configure.ac.orig	Thu Sep 29 21:04:13 2011
+++ configure.ac	Thu Sep 29 21:06:21 2011
@@@@ -46,6 +46,18 @@@@ if test "x$enable_as_needed" != "xno"; then
   esac
 fi
 
+AC_CHECK_HEADER(pthread.h, have_pthread_h=yes)
+if test "X$have_pthread_h" = "Xyes" ; then
+    save_LDFLAGS="${LDFLAGS}";
+    LDFLAGS="${LDFLAGS} -pthread"
+    AC_LINK_IFELSE(
+      [AC_LANG_PROGRAM(
+        [[#include <pthread.h>
+        pthread_t thr;]],
+        [pthread_create(&thr, NULL, NULL, NULL);])],,
+      [LDFLAGS="${save_LDFLAGS}"])
+fi
+
 #########################################################################
 # Check ffmpeg libraries
 #########################################################################
@@@@ -118,7 +130,7 @@@@ AC_ARG_ENABLE(debug,
@


1.1
log
@Update to ffmpegthumbnailer-2.0.6.

Ok landry@@
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.ac.orig	Thu Jan  6 20:03:14 2011
+++ configure.ac	Tue Jun 28 15:24:27 2011
a22 9
@@@@ -106,7 +118,7 @@@@ fi
 ########################################################################
 # Compiler flags
 ########################################################################
-CXXFLAGS=-D__STDC_CONSTANT_MACROS
+CXXFLAGS="${CXXFLAGS} -D__STDC_CONSTANT_MACROS"
 
 ########################################################################
 # Check debug mode
d27 2
a28 2
-    CXXFLAGS+=" -g -O1 -Wall -Werror -Wfatal-errors"
+    CXXFLAGS="${CXXFLAGS} -g -Wall -Werror -Wfatal-errors"
@

