head	1.16;
access;
symbols
	OPENBSD_6_1:1.15.0.6
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.15.0.4
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.13.0.8
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.4
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.2
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	ajacoutot_20111106:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.16
date	2017.05.26.21.17.12;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	NkG16oa7ypeJoFAY;

1.15
date	2015.11.16.14.31.29;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	tYrUfQrOJCidr3FB;

1.14
date	2015.09.20.07.36.50;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	cU64c6cJ1hmh9omS;

1.13
date	2014.03.18.08.16.51;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2014.01.25.14.02.35;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2014.01.25.13.20.52;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2014.01.25.10.00.05;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2014.01.03.10.22.12;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.09.16.15.48.29;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2013.08.09.17.39.44;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2013.04.05.07.02.08;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.21.08.45.17;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.11.10.51;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.25.19.51.31;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2011.11.13.13.54.04;	author ajacoutot;	state Exp;
branches
	1.2.2.1
	1.2.4.1;
next	1.1;

1.1
date	2011.11.06.17.35.53;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.11.06.17.35.53;	author ajacoutot;	state Exp;
branches;
next	;

1.2.2.1
date	2012.09.25.20.02.24;	author kili;	state Exp;
branches;
next	;

1.2.4.1
date	2012.09.25.19.57.07;	author kili;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Update to argyllcms-1.9.2.
@
text
@# $OpenBSD: Makefile,v 1.15 2015/11/16 14:31:29 ajacoutot Exp $

COMMENT=	ICC compatible color management system

V=		1.9.2
DISTNAME=	Argyll_V${V}_src
PKGNAME=	argyllcms-${V}
EXTRACT_SUFX=	.zip
WRKDIST=	${WRKDIR}/${DISTNAME:S/_src//}

CATEGORIES=	graphics sysutils

HOMEPAGE=	http://www.argyllcms.com/

# AGPLv3 (GNU Affero Public License)
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += X11 Xau Xdmcp Xext Xinerama Xrandr Xss Xxf86vm c jpeg
WANTLIB += m png pthread ssl tiff z

MASTER_SITES=	${HOMEPAGE}

BUILD_DEPENDS=	devel/jam

LIB_DEPENDS=	graphics/png \
		graphics/tiff

MAKE_ENV=	CCOPTFLAG="${CFLAGS} -I${X11BASE}/include" \
		REFSUBDIR="share/color/argyll/ref"

NO_TEST=	Yes

do-build:
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${LOCALBASE}/bin/jam -q -fJambase

do-install:
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${ALL_FAKE_FLAGS} DESTDIR="${WRKINST}" \
		PREFIX="${TRUEPREFIX}" ${LOCALBASE}/bin/jam -q -fJambase install
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/argyllcms
	cd ${WRKSRC}/doc && \
		for i in $$(cat afiles); do ${INSTALL_DATA} $${i} ${PREFIX}/share/doc/argyllcms; done
	rm ${PREFIX}/bin/License.txt

.include <bsd.port.mk>
@


1.15
log
@Update to argyllcms-1.8.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/09/20 07:36:50 ajacoutot Exp $
d5 1
a5 1
V=		1.8.3
@


1.14
log
@Update to argyllcms-1.8.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/03/18 08:16:51 ajacoutot Exp $
d5 1
a5 1
V=		1.8.2
@


1.13
log
@Update to argyllcms-1.6.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/01/25 14:02:35 ajacoutot Exp $
d5 1
a5 1
V=		1.6.3
d19 1
a19 1
WANTLIB += m pthread tiff
d25 2
a26 1
LIB_DEPENDS=	graphics/tiff
a31 3

pre-configure:
	${SUBST_CMD} ${WRKSRC}/Jamtop
@


1.12
log
@No need for -sEXEMODE=755 anymore, jam got fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/01/25 13:20:52 sthen Exp $
d5 1
a5 1
V=		1.6.2
a7 1
REVISION =	0
@


1.11
log
@mode set in jam, workaround no longer needed here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/01/25 10:00:05 espie Exp $
d41 1
a41 1
		PREFIX="${TRUEPREFIX}" ${LOCALBASE}/bin/jam -q -sEXEMODE=755 -fJambase install
@


1.10
log
@jam thinks 711 is fine for executables... 755 is better
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/01/03 10:22:12 ajacoutot Exp $
d37 1
a37 1
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${LOCALBASE}/bin/jam -sEXEMODE=755 -q -fJambase
@


1.9
log
@Update to argyllcms-1.6.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/09/16 15:48:29 ajacoutot Exp $
d8 1
d37 1
a37 1
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${LOCALBASE}/bin/jam -q -fJambase
d41 1
a41 1
		PREFIX="${TRUEPREFIX}" ${LOCALBASE}/bin/jam -q -fJambase install
@


1.8
log
@Update to argyllcms-1.6.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/08/09 17:39:44 ajacoutot Exp $
d5 1
a5 1
V=		1.6.0
@


1.7
log
@Remove -lpthread patching.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/04/05 07:02:08 ajacoutot Exp $
d5 5
a9 4
V=		1.1.0-20100201
DISTNAME=	hargyllcms-${V}
PKGNAME=	argyll-${V:S/-/./}
REVISION=	3
d18 2
a19 2
WANTLIB += X11 Xext Xinerama Xrandr Xrender Xss Xxf86vm c jpeg
WANTLIB += m pthread tiff usb xcb z usb-1.0
d21 1
a21 23
# Fedora:
# Switch to using the hargyllcms friendly fork sources as upstream
# refuses to switch away from jam, or stop bundling other projects
# (yajl) and libraries (libusb, libtiff).
MASTER_SITES=	http://pkgs.fedoraproject.org/repo/pkgs/argyllcms/${DISTNAME}${EXTRACT_SUFX}/59cdfbefa1c905967b0848634c2fb509/
#MASTER_SITES=	https://github.com/hughsie/hargyllcms

LIB_DEPENDS=	devel/libusb-compat \
		graphics/tiff


CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
CONFIGURE_ARGS=	${CONFIGURE_SHARED}

# XXX used at the end of the build
BUILD_DEPENDS +=${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}
AUTOCONF_VERSION=2.65
AUTOMAKE_VERSION=1.11
MAKE_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION}
d23 8
a30 1
BUILD_DEPENDS+=	textproc/gsed
d33 12
a44 8
	perl -pi -e 's,sed -i,gsed -i,' ${WRKSRC}/legal.sh
	cd ${WRKSRC} && /bin/sh ./legal.sh
	perl -pi -e 's,/var/lib,/var/db,g;' \
		-e 's,/lib/firmware,/etc/firmware,g' \
		${WRKSRC}/spectro/{spyd2setup.h,spyd2en.c}
# remove udev rules
post-install:
	rm -rf ${WRKINST}/lib
@


1.6
log
@Use gsed in pre-configure.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/21 08:45:17 ajacoutot Exp $
d8 1
a8 1
REVISION=	2
a48 1
	perl -pi -e 's,-lpthread,-pthread,g' ${WRKSRC}/configure
@


1.5
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:10:51 espie Exp $
d8 1
a8 1
REVISION=	1
d44 2
d47 1
a47 1
	perl -pi -e 's,sed -i,perl -pi -e,' ${WRKSRC}/legal.sh
@


1.4
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/09/25 19:51:31 kili Exp $
a29 1
USE_LIBTOOL=	Yes
@


1.3
log
@SECURITY for CVE-2012-4405, from Redhat.

Note that our ghostscript port isn't affected by this bug (because
it doesn't build/use libicc).

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/11/13 13:54:04 ajacoutot Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.2
log
@Sync dependencies after move from libusb to libusb-compat and fix a
couple of fallouts. Note that these ports are only the ones that used to
have a direct dependency on devel/libusb so there may be some other
hidden ports that may break because of the switch. If that's the case,
no need to start ranting all over but instead tell me which one(s)
break. Thanks.

Note: sysutils/nut hasn't been fixed yet but will be today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/11/06 17:35:53 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
@


1.2.2.1
log
@MFC:
SECURITY for CVE-2012-4405, from Redhat.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/11/13 13:54:04 ajacoutot Exp $
d8 1
a8 1
REVISION=	1
@


1.2.4.1
log
@MFC:
SECURITY for CVE-2012-4405, from Redhat.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/11/13 13:54:04 ajacoutot Exp $
d8 1
a8 1
REVISION=	1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
d21 1
a21 1
WANTLIB += m pthread tiff usb xcb z
d30 1
a30 1
LIB_DEPENDS=	devel/libusb \
@


1.1.1.1
log
@Import argyll-1.1.0.20100201, with patches from Debian.

ArgyllCMS is an ICC compatible color management system, available as
Open Source.
<...>

ok jasper@@
@
text
@@
