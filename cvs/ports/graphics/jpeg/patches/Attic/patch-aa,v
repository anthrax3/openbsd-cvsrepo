head	1.6;
access;
symbols
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.4.0.8
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.6
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.4
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.3.0.2
	OPENBSD_2_3_BASE:1.3
	jpeg6a:1.1.1.1
	angelos:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2001.02.20.22.21.08;	author danh;	state dead;
branches;
next	1.5;

1.5
date	2000.10.21.19.28.25;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	98.05.06.02.48.19;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.02.07.07.16.59;	author don;	state Exp;
branches;
next	1.2;

1.2
date	98.02.07.06.39.14;	author don;	state Exp;
branches;
next	1.1;

1.1
date	97.12.03.02.30.52;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.03.02.30.52;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.6
log
@rename patches; sync with libtool.
@
text
@--- ltmain.sh.orig	Wed Mar 25 10:25:39 1998
+++ ltmain.sh	Sat Oct 21 14:18:54 2000
@@@@ -1002,7 +1002,15 @@@@
 
       # Add libc to deplibs on all systems.
       dependency_libs="$deplibs"
-      deplibs="$deplibs -lc"
+      case "$host_os" in
+      openbsd*)
+		# do not include libc due to us having libc/libc_r.
+      ;;
+      *)
+		# Add libc to deplibs on all other systems.
+		deplibs="$deplibs -lc"
+      ;;
+      esac
 
       if test "$build_libtool_libs" = yes; then
         # Get the real and link names of the library.
@@@@ -2023,37 +2031,6 @@@@
       done
     fi
 
-    echo "------------------------------------------------------------------------------"
-    echo "Libraries have been installed in:"
-    for libdir in $libdirs; do
-      echo "   $libdir"
-    done
-    echo
-    echo "To link against installed libraries in a given directory, LIBDIR,"
-    echo "you must use the \`-LLIBDIR' flag during linking."
-    echo
-    echo " You will also need to do one of the following:"
-    if test -n "$shlibpath_var"; then
-      echo "   - add LIBDIR to the \`$shlibpath_var' environment variable"
-      echo "     during execution"
-    fi
-    if test -n "$runpath_var"; then
-      echo "   - add LIBDIR to the \`$runpath_var' environment variable"
-      echo "     during linking"
-    fi
-    if test -n "$hardcode_libdir_flag_spec"; then
-      libdir=LIBDIR
-      eval flag=\"$hardcode_libdir_flag_spec\"
-
-      echo "   - use the \`$flag' linker flag"
-    fi
-    if test -f /etc/ld.so.conf; then
-      echo "   - have your system administrator add LIBDIR to \`/etc/ld.so.conf'"
-    fi
-    echo
-    echo "See any operating system documentation about shared libraries for"
-    echo "more information, such as the ld(1) and ld.so(8) manual pages."
-    echo "------------------------------------------------------------------------------"
     exit 0
     ;;
 
@


1.5
log
@do not assume it's ok to link shared libraries with libc.
@
text
@@


1.4
log
@update jpeg lib to version 6b
@
text
@d1 20
a20 3
--- ltmain.sh.~1~	Wed Mar 25 07:25:39 1998
+++ ltmain.sh	Mon May  4 09:55:45 1998
@@@@ -2023,37 +2023,6 @@@@
@


1.3
log
@More alpha .so fixes...
@
text
@d1 40
a40 141
*** makefile.cfg.orig	Wed Feb  7 19:09:39 1996
--- makefile.cfg	Sat Feb  7 01:20:18 1998
***************
*** 116,122 ****
--- 116,128 ----
  TROBJECTS= jpegtran.o rdswitch.o cdjpeg.o
  
  
+ .if (${MACHINE_ARCH} != "alpha")
+ OUTLIB = libjpeg.so.7.0
+ all: @@ANSI2KNR@@ libjpeg.a libjpeg.so.7.0 cjpeg djpeg jpegtran rdjpgcom wrjpgcom
+ .else
+ OUTLIB = libjpeg.a
  all: @@ANSI2KNR@@ libjpeg.a cjpeg djpeg jpegtran rdjpgcom wrjpgcom
+ .endif
  
  # This rule causes ansi2knr to be invoked.
  @@ISANSICOM@@.c.o:
***************
*** 125,130 ****
--- 131,141 ----
  @@ISANSICOM@@	$(RM) T$*.c $*.o
  @@ISANSICOM@@	$(MV) T$*.o $*.o
  
+ .SUFFIXES: .c .so .o
+ 
+ .c.so:
+ 	${CC} -fpic -DPIC ${CFLAGS} -c ${.IMPSRC} -o ${.TARGET}
+ 
  ansi2knr: ansi2knr.c
  	$(CC) $(CFLAGS) $(ANSI2KNRFLAGS) -o ansi2knr ansi2knr.c
  
***************
*** 133,146 ****
  	$(AR) libjpeg.a  $(LIBOBJECTS)
  	$(AR2) libjpeg.a
  
! cjpeg: $(COBJECTS) libjpeg.a
! 	$(LN) $(LDFLAGS) -o cjpeg $(COBJECTS) libjpeg.a $(LDLIBS)
  
! djpeg: $(DOBJECTS) libjpeg.a
! 	$(LN) $(LDFLAGS) -o djpeg $(DOBJECTS) libjpeg.a $(LDLIBS)
  
! jpegtran: $(TROBJECTS) libjpeg.a
! 	$(LN) $(LDFLAGS) -o jpegtran $(TROBJECTS) libjpeg.a $(LDLIBS)
  
  rdjpgcom: rdjpgcom.o
  	$(LN) $(LDFLAGS) -o rdjpgcom rdjpgcom.o $(LDLIBS)
--- 144,160 ----
  	$(AR) libjpeg.a  $(LIBOBJECTS)
  	$(AR2) libjpeg.a
  
! libjpeg.so.7.0: @@ANSI2KNR@@  $(LIBOBJECTS:S/o$/so/g)
! 	ld -Bshareable -o libjpeg.so.7.0 $(LIBOBJECTS:S/o$/so/g)
! 
! cjpeg: $(COBJECTS) $(OUTLIB)
! 	$(LN) $(LDFLAGS) -o cjpeg $(COBJECTS) -L. -ljpeg $(LDLIBS)
  
! djpeg: $(DOBJECTS) $(OUTLIB)
! 	$(LN) $(LDFLAGS) -o djpeg $(DOBJECTS) -L. -ljpeg $(LDLIBS)
  
! jpegtran: $(TROBJECTS) $(OUTLIB)
! 	$(LN) $(LDFLAGS) -o jpegtran $(TROBJECTS) -L. -ljpeg $(LDLIBS)
  
  rdjpgcom: rdjpgcom.o
  	$(LN) $(LDFLAGS) -o rdjpgcom rdjpgcom.o $(LDLIBS)
***************
*** 165,172 ****
--- 179,192 ----
  	$(INSTALL_DATA) $(srcdir)/rdjpgcom.1 $(mandir)/$(manprefix)rdjpgcom.$(manext)
  	$(INSTALL_DATA) $(srcdir)/wrjpgcom.1 $(mandir)/$(manprefix)wrjpgcom.$(manext)
  
+ .if (${MACHINE_ARCH} != "alpha")
+ install-lib: libjpeg.a libjpeg.so.7.0 install-headers
+ 	$(INSTALL_DATA) libjpeg.so.7.0 $(libdir)/$(binprefix)libjpeg.so.7.0
+ .else
  install-lib: libjpeg.a install-headers
+ .endif
  	$(INSTALL_DATA) libjpeg.a $(libdir)/$(binprefix)libjpeg.a
+ 	ranlib $(libdir)/$(binprefix)libjpeg.a
  
  install-headers: jconfig.h
  	$(INSTALL_DATA) jconfig.h $(includedir)/jconfig.h
***************
*** 203,208 ****
--- 223,277 ----
  # GNU Make likes to know which target names are not really files to be made:
  .PHONY: all install install-lib install-headers clean distribute test check
  
+ jcapimin.so: jcapimin.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcapistd.so: jcapistd.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jccoefct.so: jccoefct.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jccolor.so: jccolor.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcdctmgr.so: jcdctmgr.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jchuff.so: jchuff.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jchuff.h
+ jcinit.so: jcinit.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcmainct.so: jcmainct.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcmarker.so: jcmarker.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcmaster.so: jcmaster.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcomapi.so: jcomapi.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcparam.so: jcparam.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcphuff.so: jcphuff.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jchuff.h
+ jcprepct.so: jcprepct.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jcsample.so: jcsample.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jctrans.so: jctrans.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdapimin.so: jdapimin.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdapistd.so: jdapistd.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdatadst.so: jdatadst.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jerror.h
+ jdatasrc.so: jdatasrc.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jerror.h
+ jdcoefct.so: jdcoefct.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdcolor.so: jdcolor.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jddctmgr.so: jddctmgr.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jdhuff.so: jdhuff.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdhuff.h
+ jdinput.so: jdinput.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdmainct.so: jdmainct.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdmarker.so: jdmarker.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdmaster.so: jdmaster.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdmerge.so: jdmerge.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdphuff.so: jdphuff.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdhuff.h
+ jdpostct.so: jdpostct.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdsample.so: jdsample.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jdtrans.so: jdtrans.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jerror.so: jerror.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jversion.h jerror.h
+ jfdctflt.so: jfdctflt.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jfdctfst.so: jfdctfst.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jfdctint.so: jfdctint.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jidctflt.so: jidctflt.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jidctfst.so: jidctfst.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jidctint.so: jidctint.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jidctred.so: jidctred.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jdct.h
+ jquant1.so: jquant1.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jquant2.so: jquant2.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jutils.so: jutils.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
+ jmemmgr.so: jmemmgr.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jmemsys.h
+ jmemansi.so: jmemansi.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jmemsys.h
+ jmemname.so: jmemname.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jmemsys.h
+ jmemnobs.so: jmemnobs.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jmemsys.h
+ jmemdos.so: jmemdos.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h jmemsys.h
  
  jcapimin.o: jcapimin.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
  jcapistd.o: jcapistd.c jinclude.h jconfig.h jpeglib.h jmorecfg.h jpegint.h jerror.h
@


1.2
log
@Don't build shared libs on alpha
@
text
@d2 1
a2 1
--- makefile.cfg	Fri Feb  6 19:15:52 1998
d5 1
a5 1
--- 116,126 ----
d10 1
d13 1
d21 1
a21 1
--- 129,139 ----
d49 1
a49 1
--- 142,158 ----
d56 1
a56 1
! cjpeg: $(COBJECTS) libjpeg.so.7.0
d59 1
a59 1
! djpeg: $(DOBJECTS) libjpeg.so.7.0
d62 1
a62 1
! jpegtran: $(TROBJECTS) libjpeg.so.7.0
d69 1
d73 6
a78 11
! install-lib: libjpeg.a install-headers
  	$(INSTALL_DATA) libjpeg.a $(libdir)/$(binprefix)libjpeg.a
  
  install-headers: jconfig.h
  	$(INSTALL_DATA) jconfig.h $(includedir)/jconfig.h
--- 177,186 ----
  	$(INSTALL_DATA) $(srcdir)/rdjpgcom.1 $(mandir)/$(manprefix)rdjpgcom.$(manext)
  	$(INSTALL_DATA) $(srcdir)/wrjpgcom.1 $(mandir)/$(manprefix)wrjpgcom.$(manext)
  
! install-lib: libjpeg.a libjpeg.so.7.0 install-headers
! 	$(INSTALL_DATA) libjpeg.so.7.0 $(libdir)/$(binprefix)libjpeg.so.7.0
d86 1
a86 1
--- 217,271 ----
@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
*** makefile.cfg.orig	Tue Jul 25 03:07:32 1995
--- makefile.cfg	Wed Oct  4 05:50:21 1995
d4 2
a5 1
*** 115,121 ****
d9 5
a13 9
! all: @@ANSI2KNR@@ libjpeg.a cjpeg djpeg jpegtran rdjpgcom wrjpgcom
  
  # This rule causes ansi2knr to be invoked.
  @@ISANSICOM@@.c.o:
--- 115,121 ----
  TROBJECTS= jpegtran.o rdswitch.o cdjpeg.o
  
  
! all: @@ANSI2KNR@@ libjpeg.a libjpeg.so.7.0 cjpeg djpeg jpegtran rdjpgcom wrjpgcom
d18 2
a19 2
*** 124,129 ****
--- 124,134 ----
d32 1
a32 1
*** 132,145 ****
d47 1
a47 1
--- 137,153 ----
d66 1
a66 1
*** 164,171 ****
d75 1
a75 1
--- 172,181 ----
d87 2
a88 2
*** 202,207 ****
--- 212,266 ----
@


1.1.1.1
log
@Add jpeg lib port.
@
text
@@
