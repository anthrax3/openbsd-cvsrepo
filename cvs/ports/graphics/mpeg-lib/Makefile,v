head	1.34;
access;
symbols
	OPENBSD_6_2:1.34.0.6
	OPENBSD_6_2_BASE:1.34
	OPENBSD_6_1:1.34.0.4
	OPENBSD_6_1_BASE:1.34
	OPENBSD_6_0:1.34.0.2
	OPENBSD_6_0_BASE:1.34
	OPENBSD_5_9:1.33.0.2
	OPENBSD_5_9_BASE:1.33
	OPENBSD_5_8:1.33.0.4
	OPENBSD_5_8_BASE:1.33
	OPENBSD_5_7:1.32.0.8
	OPENBSD_5_7_BASE:1.32
	OPENBSD_5_6:1.32.0.6
	OPENBSD_5_6_BASE:1.32
	OPENBSD_5_5:1.32.0.4
	OPENBSD_5_5_BASE:1.32
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.31.0.10
	OPENBSD_5_3_BASE:1.31
	OPENBSD_5_2:1.31.0.8
	OPENBSD_5_2_BASE:1.31
	OPENBSD_5_1_BASE:1.31
	OPENBSD_5_1:1.31.0.6
	OPENBSD_5_0:1.31.0.4
	OPENBSD_5_0_BASE:1.31
	OPENBSD_4_9:1.31.0.2
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.30.0.12
	OPENBSD_4_8_BASE:1.30
	OPENBSD_4_7:1.30.0.10
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.30.0.8
	OPENBSD_4_6_BASE:1.30
	OPENBSD_4_5:1.30.0.6
	OPENBSD_4_5_BASE:1.30
	OPENBSD_4_4:1.30.0.4
	OPENBSD_4_4_BASE:1.30
	OPENBSD_4_3:1.30.0.2
	OPENBSD_4_3_BASE:1.30
	OPENBSD_4_2:1.28.0.8
	OPENBSD_4_2_BASE:1.28
	OPENBSD_4_1:1.28.0.6
	OPENBSD_4_1_BASE:1.28
	OPENBSD_4_0:1.28.0.4
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.28.0.2
	OPENBSD_3_9_BASE:1.28
	OPENBSD_3_8:1.26.0.2
	OPENBSD_3_8_BASE:1.26
	OPENBSD_3_7:1.25.0.4
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.25.0.2
	OPENBSD_3_6_BASE:1.25
	OPENBSD_3_5:1.23.0.6
	OPENBSD_3_5_BASE:1.23
	OPENBSD_3_4:1.23.0.4
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.23.0.2
	OPENBSD_3_3_BASE:1.23
	OPENBSD_3_2:1.22.0.8
	OPENBSD_3_2_BASE:1.22
	OPENBSD_3_1:1.22.0.6
	OPENBSD_3_1_BASE:1.22
	OPENBSD_3_0:1.22.0.4
	OPENBSD_3_0_BASE:1.22
	OPENBSD_2_9_TRACKING_SWITCH:1.22
	OPENBSD_2_9:1.22.0.2
	OPENBSD_2_9_BASE:1.22
	OPENBSD_2_8:1.20.0.2
	OPENBSD_2_8_BASE:1.20
	OPENBSD_2_7:1.14.0.2
	OPENBSD_2_7_BASE:1.14
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	mpeg-lib_1_2_1:1.1.1.1
	mpeg-lib:1.1.1;
locks; strict;
comment	@# @;


1.34
date	2016.03.10.21.58.51;	author naddy;	state Exp;
branches;
next	1.33;
commitid	g78OHI8ulpVtt3HS;

1.33
date	2015.03.16.18.07.48;	author naddy;	state Exp;
branches;
next	1.32;
commitid	IJdm3Zowcdkcxp5X;

1.32
date	2013.03.11.11.10.54;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.17.08.05.15;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2008.01.04.17.48.35;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2007.09.15.20.09.42;	author simon;	state Exp;
branches;
next	1.28;

1.28
date	2005.12.26.18.02.44;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2005.10.30.00.10.41;	author fgsch;	state Exp;
branches;
next	1.26;

1.26
date	2005.08.17.16.10.03;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2004.07.05.23.11.31;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2004.06.22.03.14.12;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2002.12.29.20.08.46;	author fgsch;	state Exp;
branches;
next	1.22;

1.22
date	2001.04.21.14.57.48;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2001.03.16.18.54.31;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2000.09.24.07.04.08;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.09.24.02.13.09;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2000.09.14.13.31.16;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.07.04.02.09.24;	author krw;	state Exp;
branches;
next	1.16;

1.16
date	2000.06.15.18.48.57;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.06.14.18.43.11;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.08.01.13.13;	author espie;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2000.02.15.05.04.33;	author turan;	state Exp;
branches;
next	1.12;

1.12
date	2000.02.12.06.29.55;	author turan;	state Exp;
branches;
next	1.11;

1.11
date	2000.01.09.05.56.33;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.10.27.03.23.52;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.05.08.17.53.13;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.04.06.03.49.21;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	99.04.06.01.11.39;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	99.03.25.05.08.33;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	99.03.02.04.41.04;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	99.02.21.04.26.12;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	99.02.18.02.37.30;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.06.30.22.29.09;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.12.20.03.17.26;	author don;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.20.03.17.26;	author don;	state Exp;
branches;
next	;

1.14.2.1
date	2000.09.15.04.53.35;	author marc;	state Exp;
branches;
next	;


desc
@@


1.34
log
@remove various instances of NO_SHARED_LIBS and PROPERTIES:Mno_shared,
fold PFRAG.shared into PLIST
@
text
@# $OpenBSD: Makefile,v 1.33 2015/03/16 18:07:48 naddy Exp $

COMMENT=	collection of C routines to decode MPEG movies

DISTNAME=	mpeg_lib-1.3.1
PKGNAME=	${DISTNAME:S/_/-/}
REVISION =	1
SHARED_LIBS=	mpeg	13.1
CATEGORIES=	graphics

# BSD
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	ftp://ftp.bic.mni.mcgill.ca/pub/mpeg/ \
		http://starship.python.net/~gward/mpeglib/

CONFIGURE_STYLE= gnu
CONFIGURE_ENV=	OPTIMIZE="${CFLAGS}"

MAKE_FLAGS=	SHLIB=libmpeg.so.${LIBmpeg_VERSION}

do-test:
	@@cd ${WRKSRC} && env LD_LIBRARY_PATH=${WRKSRC} ./mpegtest -checksum test.mpg

.include <bsd.port.mk>
@


1.33
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/03/11 11:10:54 espie Exp $
a25 4

.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
MAKE_ENV+=	NO_SHARED_LIBS=Yes
.endif
@


1.32
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/17 08:05:15 espie Exp $
d7 1
a7 1
REVISION =	0
@


1.31
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2008/01/04 17:48:35 espie Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d22 1
a22 1
do-regress:
@


1.30
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/09/15 20:09:42 simon Exp $
d6 2
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p0
@


1.29
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/12/26 18:02:44 steven Exp $
a22 2
FAKE_FLAGS=	SHLIB=libmpeg.so.${LIBmpeg_VERSION} \
		${DESTDIRNAME}=${WRKINST}
@


1.28
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/10/30 00:10:41 fgsch Exp $
d3 1
a3 1
COMMENT=	"collection of C routines to decode MPEG movies"
@


1.27
log
@after querying brad@@ he decided to drop maintainership for these.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/08/17 16:10:03 espie Exp $
d7 1
d21 4
@


1.26
log
@those packages have not changed names since 3.6, even though their
packing-lists was changes in significant ways, and they do not have
enough dependencies that pkg_add can detect they changed through their
signature.

Bump the pkgname, so that pkg_add -r will choose to update them.

okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/07/05 23:11:31 brad Exp $
a7 2

MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.25
log
@better
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2004/06/22 03:14:12 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.24
log
@this comes with a test program.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/12/29 20:08:46 fgsch Exp $
d6 1
@


1.23
log
@guess what? more NEED_VERSION rm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/04/21 14:57:48 brad Exp $
a6 2
MASTER_SITES=	ftp://ftp.bic.mni.mcgill.ca/pub/mpeg/ \
		http://starship.python.net/~gward/mpeglib/
d10 1
d16 3
d21 3
@


1.22
log
@- integrate COMMENT
- bump NEED_VERSION
- MAKE_ENV= -> MAKE_ENV+=; should fix problem art@@ has been seeing.
--
Ok'd by: espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/03/16 18:54:31 brad Exp $
a6 1
NEED_VERSION=	1.384
@


1.21
log
@respect CFLAGS
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.20 2000/09/24 07:04:08 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.336
d24 1
a24 1
MAKE_ENV=	NO_SHARED_LIBS=Yes
@


1.20
log
@add name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/09/24 02:13:09 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.330
d17 1
@


1.19
log
@revert switch to libtool, use "cc -shared" to create shared libraries
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/09/14 13:31:16 brad Exp $
d9 1
a9 1
MAINTAINER=	brad@@openbsd.org
@


1.18
log
@switch to libtool for shared library creation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/07/04 02:09:24 krw Exp $
d5 1
a5 1
NEED_VERSION=	1.320
a15 1
USE_LIBTOOL=	Yes
d19 4
@


1.17
log
@Change PFRAG.shared ldconfig invocation(s) to
DYNLIBDIR() invocations.

Bump NEED_VERSION to 1.310 so DYNLIBDIR() works.

As requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/06/15 18:48:57 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.310
d16 2
a17 1
CONFIGURE_STYLE= gnu dest
a19 4

.if defined(NO_SHARED_LIBS) & ${NO_SHARED_LIBS:U} == YES
MAKE_ENV=	NO_SHARED_LIBS=Yes
.endif
@


1.16
log
@fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/06/14 18:43:11 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.301
@


1.15
log
@- remove license type
- remove FAKE=Yes
- HAS_CONFIGURE -> CONFIGURE_STYLE
- use new framework for PLISTs
- add @@comment with RCS id to PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/03/08 01:13:13 espie Exp $
d16 1
a16 1
CONFIGURE_STYLE= gnu old
@


1.14
log
@Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/15 05:04:33 turan Exp $
d5 1
a5 1
NEED_VERSION=	1.218
a8 1

a10 1
LICENSE_TYPE=		BSD
d16 1
a16 3
FAKE=		Yes
HAS_CONFIGURE=	Yes
CONFIGURE_ARGS=	--prefix='$${DESTDIR}${PREFIX}' --sysconfdir='${DESTDIR}/etc'
@


1.14.2.1
log
@bring graphics as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/07/04 02:09:24 krw Exp $
d5 1
a5 1
NEED_VERSION=	1.310
d9 1
d12 1
d18 3
a20 1
CONFIGURE_STYLE= gnu dest
@


1.13
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/02/12 06:29:55 turan Exp $
d5 1
a8 1
NEED_VERSION=	1.73
d13 8
a20 9
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES

GNU_CONFIGURE=	yes

post-install:
	@@${LDCONFIG} -m ${PREFIX}/lib
@


1.12
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/01/09 05:56:33 brad Exp $
d13 4
a16 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.11
log
@upgrade to mpeg_lib 1.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/10/27 03:23:52 brad Exp $
d11 6
@


1.10
log
@- cleanup Makefile
- change maintainer to me (brad@@), Ok'd by the previous maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/05/08 17:53:13 brad Exp $
d3 1
a3 1
DISTNAME=	mpeg_lib-1.2.1
d5 2
a6 1
MASTER_SITES=	ftp://ftp.mni.mcgill.ca/pub/mpeg/
d8 1
a8 1
NEED_VERSION=	1.64
d12 1
a12 14
HAS_CONFIGURE=	yes
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --prefix=${PREFIX}

WRKSRC=	${WRKDIR}/mpeg_lib

# post-patch must be defined before bsd.port.mk is included so it will
# be called.  However, we need to have the body of the target after
# bsd.port.mk is included so NO_SHARED_LIBS is defined.
# Define the target twice, using :
post-patch:

pre-install:
	@@${MKDIR} -p ${PREFIX}/bin ${PREFIX}/lib ${PREFIX}/include
d19 2
a20 6
# The patches assumed shared libs would be build.  If building
# on a host that does not support shared libs, e.g. the alpha,
# apply one more patch.
post-patch:
.if defined(NO_SHARED_LIBS)
	@@(cd ${DISTDIR}; ${PATCH} ${PATCH_DIST_ARGS} < ${FILESDIR}/patch)
@


1.9
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/04/06 03:49:21 marc Exp $
d5 1
d9 1
a9 3
MAINTAINER=	marc@@OpenBSD.ORG

MASTER_SITES=	ftp://ftp.mni.mcgill.ca/pub/mpeg/
d12 2
a13 1
CONFIGURE_ARGS=	--prefix=${PREFIX} ${CONFIGURE_SHARED}
d15 1
a15 1
WRKSRC=		${WRKDIR}/mpeg_lib
d27 1
a27 1
	${LDCONFIG} -m ${PREFIX}/lib
@


1.8
log
@do disgusting things to make a target that must be
after the include of bsd.port.mk still be recognized by bsd.port.mk;
Fixes alpha generation problem
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.7 1999/04/06 01:11:39 marc Exp $
#
d20 2
a21 3
# Define the target twice, using ::
#
post-patch::
d34 1
a34 2
#
post-patch::
@


1.7
log
@add CONFIGURE_SHARED to CONFIGURE_ARGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/03/25 05:08:33 marc Exp $
d18 6
d37 1
a38 1
post-patch:
@


1.6
log
@replace GNU_CONFIGURE with HAS_CONFIGURE and explicit
CONFIUGRE_ARGS to work with current bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/03/02 04:41:04 marc Exp $
d14 1
a14 1
CONFIGURE_ARGS=	--prefix=${PREFIX}
@


1.5
log
@fix earlier bogus changes to Makefile where a value that
was defined in bsd.port.mk was checked before bsd.port.mk was included;
this should make ports with optional shared libs build on the alpha,
again.  However, chages require the latest bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/02/21 04:26:12 marc Exp $
d13 2
a14 2
GNU_CONFIGURE=	yup
CONFIGURE_ENV=	${SETENV}
@


1.4
log
@needs version 1.64 (or later) of bsd.port.mk
to build/install correctly; PLIST.noshared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/02/18 02:37:30 marc Exp $
d19 8
a34 8

pre-install:
	@@${MKDIR} -p ${PREFIX}/bin ${PREFIX}/lib ${PREFIX}/include

post-install:
	${LDCONFIG} -m ${PREFIX}/lib

.include <bsd.port.mk>
@


1.3
log
@use NO_SHARED_LIBS instead of test for alpha;
use PLIST.noshared instead of PLIST.alpha
@
text
@d1 1
a1 6
# OpenBSD makefile for:	mpeg_lib
# Version required:	1.2.1
# Date created:		December 17, 1997
# Whom:			Don Schmidt
#
# $OpenBSD: Makefile,v 1.2 1998/06/30 22:29:09 marc Exp $
d6 2
@


1.2
log
@don't build shared libs on the alpha; only one patch per patch file
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1997/12/20 03:17:26 don Exp $
d26 1
a26 1
.if (${MACHINE_ARCH} == "alpha")
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD$
d11 3
d16 2
a17 1
MAINTAINER= don@@OpenBSD.ORG
a20 1
GNU_CONFIGURE= yup
d22 8
@


1.1.1.1
log
@Initial import.
@
text
@@
