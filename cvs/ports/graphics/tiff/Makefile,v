head	1.80;
access;
symbols
	OPENBSD_6_1:1.79.0.2
	OPENBSD_6_1_BASE:1.79
	OPENBSD_6_0:1.77.0.2
	OPENBSD_6_0_BASE:1.77
	OPENBSD_5_9:1.75.0.2
	OPENBSD_5_9_BASE:1.75
	OPENBSD_5_8:1.73.0.4
	OPENBSD_5_8_BASE:1.73
	OPENBSD_5_7:1.71.0.8
	OPENBSD_5_7_BASE:1.71
	OPENBSD_5_6:1.71.0.6
	OPENBSD_5_6_BASE:1.71
	OPENBSD_5_5:1.71.0.4
	OPENBSD_5_5_BASE:1.71
	OPENBSD_5_4:1.71.0.2
	OPENBSD_5_4_BASE:1.71
	OPENBSD_5_3:1.67.0.2
	OPENBSD_5_3_BASE:1.67
	OPENBSD_5_2:1.65.0.2
	OPENBSD_5_2_BASE:1.65
	OPENBSD_5_1_BASE:1.60
	OPENBSD_5_1:1.60.0.4
	OPENBSD_5_0:1.60.0.2
	OPENBSD_5_0_BASE:1.60
	OPENBSD_4_9:1.57.0.2
	OPENBSD_4_9_BASE:1.57
	OPENBSD_4_8:1.54.0.2
	OPENBSD_4_8_BASE:1.54
	OPENBSD_4_7:1.52.0.2
	OPENBSD_4_7_BASE:1.52
	OPENBSD_4_6:1.51.0.2
	OPENBSD_4_6_BASE:1.51
	OPENBSD_4_5:1.49.0.2
	OPENBSD_4_5_BASE:1.49
	OPENBSD_4_4:1.47.0.4
	OPENBSD_4_4_BASE:1.47
	OPENBSD_4_3:1.47.0.2
	OPENBSD_4_3_BASE:1.47
	OPENBSD_4_2:1.46.0.6
	OPENBSD_4_2_BASE:1.46
	OPENBSD_4_1:1.46.0.4
	OPENBSD_4_1_BASE:1.46
	OPENBSD_4_0:1.46.0.2
	OPENBSD_4_0_BASE:1.46
	OPENBSD_3_9:1.41.0.2
	OPENBSD_3_9_BASE:1.41
	OPENBSD_3_8:1.38.0.2
	OPENBSD_3_8_BASE:1.38
	OPENBSD_3_7:1.31.0.2
	OPENBSD_3_7_BASE:1.31
	OPENBSD_3_6:1.29.0.2
	OPENBSD_3_6_BASE:1.29
	OPENBSD_3_5:1.28.0.2
	OPENBSD_3_5_BASE:1.28
	OPENBSD_3_4:1.25.0.4
	OPENBSD_3_4_BASE:1.25
	OPENBSD_3_3:1.25.0.2
	OPENBSD_3_3_BASE:1.25
	OPENBSD_3_2:1.24.0.4
	OPENBSD_3_2_BASE:1.24
	OPENBSD_3_1:1.24.0.2
	OPENBSD_3_1_BASE:1.24
	OPENBSD_3_0:1.22.0.2
	OPENBSD_3_0_BASE:1.22
	OPENBSD_2_9_TRACKING_SWITCH:1.21
	OPENBSD_2_9:1.21.0.2
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_8:1.20.0.2
	OPENBSD_2_8_BASE:1.20
	OPENBSD_2_7:1.14.0.2
	OPENBSD_2_7_BASE:1.14
	brad_1999-10-26:1.1.1.2
	brad:1.1.1
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	tiff3_3:1.1.1.1
	angelos:1.1.1;
locks; strict;
comment	@# @;


1.80
date	2017.04.10.11.46.21;	author sthen;	state Exp;
branches;
next	1.79;
commitid	BLsh88fJB8thZTwY;

1.79
date	2016.11.30.22.40.31;	author naddy;	state Exp;
branches;
next	1.78;
commitid	qbFtvbTdF9Qi4qcd;

1.78
date	2016.11.29.20.00.35;	author naddy;	state Exp;
branches;
next	1.77;
commitid	3rYO2yYEq9TuBxfZ;

1.77
date	2016.07.01.11.23.44;	author jasper;	state Exp;
branches
	1.77.2.1;
next	1.76;
commitid	uiTnsFuJVTLXiESc;

1.76
date	2016.03.11.20.28.26;	author naddy;	state Exp;
branches;
next	1.75;
commitid	UYLP8TE6V7RS2GhJ;

1.75
date	2016.01.24.16.48.48;	author naddy;	state Exp;
branches
	1.75.2.1;
next	1.74;
commitid	9i2aWLjoSlOEXDeK;

1.74
date	2015.11.04.20.51.36;	author naddy;	state Exp;
branches;
next	1.73;
commitid	153WTW8OyW7UOkpg;

1.73
date	2015.07.08.19.36.54;	author naddy;	state Exp;
branches
	1.73.4.1;
next	1.72;
commitid	pCU3S8EYHo6g9JDw;

1.72
date	2015.03.29.17.39.22;	author naddy;	state Exp;
branches;
next	1.71;
commitid	DVvDfC6c0cv0tIBV;

1.71
date	2013.05.03.11.00.39;	author jasper;	state Exp;
branches
	1.71.6.1
	1.71.8.1;
next	1.70;

1.70
date	2013.03.27.16.37.09;	author naddy;	state Exp;
branches;
next	1.69;

1.69
date	2013.03.21.08.45.19;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2013.03.11.11.10.55;	author espie;	state Exp;
branches;
next	1.67;

1.67
date	2012.11.06.21.31.06;	author jasper;	state Exp;
branches
	1.67.2.1;
next	1.66;

1.66
date	2012.09.24.19.51.03;	author naddy;	state Exp;
branches;
next	1.65;

1.65
date	2012.06.27.14.27.02;	author jasper;	state Exp;
branches
	1.65.2.1;
next	1.64;

1.64
date	2012.04.14.15.09.55;	author naddy;	state Exp;
branches;
next	1.63;

1.63
date	2012.04.09.17.35.38;	author naddy;	state Exp;
branches;
next	1.62;

1.62
date	2012.04.09.17.21.05;	author naddy;	state Exp;
branches;
next	1.61;

1.61
date	2012.03.29.13.38.40;	author sthen;	state Exp;
branches;
next	1.60;

1.60
date	2011.05.09.08.14.43;	author giovanni;	state Exp;
branches
	1.60.4.1;
next	1.59;

1.59
date	2011.03.23.08.08.50;	author jasper;	state Exp;
branches;
next	1.58;

1.58
date	2011.03.19.18.41.05;	author jasper;	state Exp;
branches;
next	1.57;

1.57
date	2010.11.17.08.05.16;	author espie;	state Exp;
branches
	1.57.2.1;
next	1.56;

1.56
date	2010.11.09.19.00.28;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2010.10.18.18.13.15;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2010.07.21.06.46.33;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2010.06.30.17.10.07;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2009.07.22.13.15.00;	author jasper;	state Exp;
branches
	1.52.2.1;
next	1.51;

1.51
date	2009.06.23.07.49.31;	author jasper;	state Exp;
branches
	1.51.2.1;
next	1.50;

1.50
date	2009.03.07.15.31.57;	author naddy;	state Exp;
branches;
next	1.49;

1.49
date	2008.10.25.09.39.29;	author naddy;	state Exp;
branches
	1.49.2.1;
next	1.48;

1.48
date	2008.08.27.18.09.36;	author jasper;	state Exp;
branches;
next	1.47;

1.47
date	2007.09.15.20.09.43;	author simon;	state Exp;
branches;
next	1.46;

1.46
date	2006.08.03.12.53.18;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2006.06.12.17.31.34;	author naddy;	state Exp;
branches;
next	1.44;

1.44
date	2006.03.31.20.38.29;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2006.03.26.10.45.18;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2006.03.18.17.40.02;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2006.01.14.00.07.30;	author espie;	state Exp;
branches
	1.41.2.1;
next	1.40;

1.40
date	2006.01.08.00.29.38;	author steven;	state Exp;
branches;
next	1.39;

1.39
date	2005.12.27.16.42.43;	author steven;	state Exp;
branches;
next	1.38;

1.38
date	2005.07.17.20.54.36;	author naddy;	state Exp;
branches
	1.38.2.1;
next	1.37;

1.37
date	2005.06.19.12.19.30;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2005.06.18.21.24.40;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2005.04.17.13.37.42;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2005.03.27.06.13.07;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2005.03.27.05.12.15;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2005.03.27.03.59.00;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2004.12.22.06.31.05;	author espie;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2004.10.20.20.37.48;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2004.05.18.23.35.35;	author brad;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2004.02.25.00.08.10;	author brad;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	2004.02.24.00.06.43;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2003.12.23.23.45.41;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2002.10.27.00.03.16;	author naddy;	state Exp;
branches;
next	1.24;

1.24
date	2002.01.24.04.55.50;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2002.01.19.09.34.42;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2001.10.10.19.28.50;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2001.04.13.23.53.27;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2000.09.24.07.04.09;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.07.04.02.09.25;	author krw;	state Exp;
branches;
next	1.18;

1.18
date	2000.06.28.01.48.22;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.06.14.18.24.55;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2000.06.11.08.49.50;	author fgsch;	state Exp;
branches;
next	1.15;

1.15
date	2000.05.21.10.57.40;	author fgsch;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.24.23.28.11;	author espie;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2000.03.24.22.11.45;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.03.06.21.17.45;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.06.16.48.26;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.05.18.30.29;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2000.02.15.05.04.34;	author turan;	state Exp;
branches;
next	1.8;

1.8
date	2000.02.12.06.29.56;	author turan;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.05.03.59.04;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2000.01.01.21.28.30;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.10.26.22.05.20;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.05.31.17.05.56;	author brad;	state dead;
branches;
next	1.3;

1.3
date	99.03.09.18.15.49;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.06.10.02.56.21;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.12.03.02.37.00;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.03.02.37.00;	author angelos;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	99.10.26.22.01.26;	author brad;	state Exp;
branches;
next	;

1.14.2.1
date	2000.09.15.04.53.42;	author marc;	state Exp;
branches;
next	;

1.28.2.1
date	2004.05.18.23.38.50;	author brad;	state Exp;
branches;
next	1.28.2.2;

1.28.2.2
date	2005.03.31.22.02.44;	author sturm;	state Exp;
branches;
next	;

1.29.2.1
date	2005.03.31.22.08.46;	author sturm;	state Exp;
branches;
next	1.29.2.2;

1.29.2.2
date	2005.07.29.17.51.26;	author brad;	state Exp;
branches;
next	1.29.2.3;

1.29.2.3
date	2005.08.31.19.46.33;	author sturm;	state Exp;
branches;
next	;

1.31.2.1
date	2005.05.25.05.37.32;	author robert;	state Exp;
branches;
next	1.31.2.2;

1.31.2.2
date	2005.07.29.17.38.59;	author brad;	state Exp;
branches;
next	1.31.2.3;

1.31.2.3
date	2005.10.20.20.45.39;	author sturm;	state Exp;
branches;
next	;

1.38.2.1
date	2006.06.15.11.23.24;	author sturm;	state Exp;
branches;
next	;

1.41.2.1
date	2006.06.15.11.23.45;	author sturm;	state Exp;
branches;
next	;

1.49.2.1
date	2009.08.22.17.24.28;	author william;	state Exp;
branches;
next	;

1.51.2.1
date	2009.11.02.01.50.00;	author william;	state Exp;
branches;
next	;

1.52.2.1
date	2010.07.26.00.01.33;	author william;	state Exp;
branches;
next	;

1.57.2.1
date	2011.03.19.18.42.29;	author jasper;	state Exp;
branches;
next	1.57.2.2;

1.57.2.2
date	2011.03.23.08.08.58;	author jasper;	state Exp;
branches;
next	;

1.60.4.1
date	2012.04.13.07.18.06;	author jasper;	state Exp;
branches;
next	1.60.4.2;

1.60.4.2
date	2012.06.27.14.33.35;	author jasper;	state Exp;
branches;
next	;

1.65.2.1
date	2012.11.06.21.31.25;	author jasper;	state Exp;
branches;
next	;

1.67.2.1
date	2013.05.03.11.04.00;	author jasper;	state Exp;
branches;
next	;

1.71.6.1
date	2015.03.29.20.58.58;	author naddy;	state Exp;
branches;
next	;
commitid	yV7LOUcjZFa2iAbX;

1.71.8.1
date	2015.03.29.19.41.56;	author naddy;	state Exp;
branches;
next	;
commitid	tay2jRrbkJ3GxbDm;

1.73.4.1
date	2016.01.25.16.08.35;	author jasper;	state Exp;
branches;
next	;
commitid	lZDo9FLWFeOiEZlI;

1.75.2.1
date	2016.07.01.11.26.07;	author jasper;	state Exp;
branches;
next	1.75.2.2;
commitid	NpzcbySaJV7iAd6d;

1.75.2.2
date	2016.11.30.22.14.18;	author naddy;	state Exp;
branches;
next	;
commitid	HYFVXR4DcvEOAZJj;

1.77.2.1
date	2016.11.30.21.36.35;	author naddy;	state Exp;
branches;
next	;
commitid	SSUFe7wdxWokBCcs;


desc
@@


1.80
log
@use LIBCXX
@
text
@# $OpenBSD: Makefile,v 1.79 2016/11/30 22:40:31 naddy Exp $

COMMENT=	tools and library routines for working with TIFF images

DISTNAME=	tiff-4.0.7
REVISION=	0
SHARED_LIBS=	tiff	40.0	# 7.5
SHARED_LIBS+=	tiffxx	40.1	# 7.5
CATEGORIES=	graphics

MASTER_SITES=	http://download.osgeo.org/libtiff/

HOMEPAGE=	http://www.simplesystems.org/libtiff/

LIB_DEPENDS=	graphics/jpeg
WANTLIB=	c m ${LIBCXX} z jpeg

# BSD
PERMIT_PACKAGE_CDROM=	Yes

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--disable-jbig \
		--disable-lzma \
		--with-docdir="${PREFIX}/share/doc/tiff" \
		--with-jpeg-include-dir="${LOCALBASE}/include" \
		--with-jpeg-lib-dir="${LOCALBASE}/lib" \
		--without-x
SEPARATE_BUILD=	Yes
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/config

post-install:
	cd ${PREFIX}/share/doc/tiff && mv html/* . && rmdir html

.include <bsd.port.mk>
@


1.79
log
@bump REVISION to clearly distinguish this from the -stable package,
which has a different shared library major version; ok jca@@ kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2016/11/29 20:00:35 naddy Exp $
d16 1
a16 1
WANTLIB=	c m stdc++ z jpeg
@


1.78
log
@Update to 4.0.7.
* Multiple security fixes, including
  CVE-2016-3622, CVE-2014-8127, CVE-2016-9273, CVE-2016-9448,
  MSVR 35094, MSVR 35095, MSVR 35105
* Remove obsolete tools bmp2tiff, gif2tiff, ras2tiff, sgi2tiff, sgisv, ycbcr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2016/07/01 11:23:44 jasper Exp $
d6 1
@


1.77
log
@fixes for CVE-2016-3186 and CVE-2016-5875
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2016/03/11 20:28:26 naddy Exp $
d5 3
a7 4
DISTNAME=	tiff-4.0.6
REVISION=	1
SHARED_LIBS=	tiff	39.2	# 7.4
SHARED_LIBS+=	tiffxx	40.1	# 7.4
d12 1
a12 1
HOMEPAGE=	http://www.remotesensing.org/libtiff/
@


1.77.2.1
log
@Update to 4.0.7.
* Multiple security fixes, including
CVE-2016-3622, CVE-2014-8127, CVE-2016-9273, CVE-2016-9448,
MSVR 35094, MSVR 35095, MSVR 35105
* Remove obsolete tools bmp2tiff, gif2tiff, ras2tiff, sgi2tiff, sgisv, ycbcr

Minor patches to maintain ABI compatibility with 4.0.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2016/11/29 20:00:35 naddy Exp $
d5 4
a8 3
DISTNAME=	tiff-4.0.7
SHARED_LIBS=	tiff	39.2	# 7.5
SHARED_LIBS+=	tiffxx	40.1	# 7.5
d13 1
a13 1
HOMEPAGE=	http://www.simplesystems.org/libtiff/
@


1.76
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2016/01/24 16:48:48 naddy Exp $
d6 1
a6 1
REVISION=	0
@


1.75
log
@Fix a number of out-of-bound reads and writes, including CVE-2015-8665 and
CVE-2015-8683.  From upstream CVS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2015/11/04 20:51:36 naddy Exp $
d22 1
a22 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-jbig \
@


1.75.2.1
log
@fixes for CVE-2016-3186 and CVE-2016-5875
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2016/01/24 16:48:48 naddy Exp $
d6 1
a6 1
REVISION=	1
@


1.75.2.2
log
@Update to 4.0.7.
* Multiple security fixes, including
CVE-2016-3622, CVE-2014-8127, CVE-2016-9273, CVE-2016-9448,
MSVR 35094, MSVR 35095, MSVR 35105
* Remove obsolete tools bmp2tiff, gif2tiff, ras2tiff, sgi2tiff, sgisv, ycbcr

Minor patches to maintain ABI compatibility with 4.0.6.
@
text
@d1 1
a1 1
# $OpenBSD$
d5 4
a8 3
DISTNAME=	tiff-4.0.7
SHARED_LIBS=	tiff	39.2	# 7.5
SHARED_LIBS+=	tiffxx	40.1	# 7.5
d13 1
a13 1
HOMEPAGE=	http://www.simplesystems.org/libtiff/
@


1.74
log
@update to 4.0.6, no major changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/07/08 19:36:54 naddy Exp $
d6 1
@


1.73
log
@Update to 4.0.4.  No major changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/03/29 17:39:22 naddy Exp $
d5 3
a7 3
DISTNAME=	tiff-4.0.4
SHARED_LIBS=	tiff	39.2	# 7.1
SHARED_LIBS+=	tiffxx	40.1	# 7.1
@


1.73.4.1
log
@Fix a number of out-of-bound reads and writes, including CVE-2015-8665 and
CVE-2015-8683.  From upstream CVS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/07/08 19:36:54 naddy Exp $
a5 1
REVISION=	0
@


1.72
log
@Security update to 4.0.4beta (plus one further upstream fix).
Should fix CVE-2014-8127, CVE-2014-8128, CVE-2014-8129, CVE-2014-8130,
CVE-2014-9655, CVE-2015-1547.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/05/03 11:00:39 jasper Exp $
d5 1
a5 1
DISTNAME=	tiff-4.0.4beta
@


1.71
log
@Security fixes for
CVE-2013-1960 - Heap-based buffer overflow
CVE-2013-1961 - Stack-based buffer overflow

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/03/27 16:37:09 naddy Exp $
d5 3
a7 4
DISTNAME=	tiff-4.0.3
SHARED_LIBS=	tiff	39.2	# 7.0
SHARED_LIBS+=	tiffxx	40.1	# 7.0
REVISION=	2
d20 1
a20 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
d30 3
@


1.71.6.1
log
@Security update to 4.0.4beta (plus one further upstream fix).
Should fix CVE-2014-8127, CVE-2014-8128, CVE-2014-8129, CVE-2014-8130,
CVE-2014-9655, CVE-2015-1547.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71.8.1 2015/03/29 19:41:56 naddy Exp $
d5 4
a8 3
DISTNAME=	tiff-4.0.4beta
SHARED_LIBS=	tiff	39.2	# 7.1
SHARED_LIBS+=	tiffxx	40.1	# 7.1
d21 2
a22 1
CONFIGURE_STYLE=gnu
a31 3

post-install:
	cd ${PREFIX}/share/doc/tiff && mv html/* . && rmdir html
@


1.71.8.1
log
@Security update to 4.0.4beta (plus one further upstream fix).
Should fix CVE-2014-8127, CVE-2014-8128, CVE-2014-8129, CVE-2014-8130,
CVE-2014-9655, CVE-2015-1547.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/03/29 17:39:22 naddy Exp $
d5 4
a8 3
DISTNAME=	tiff-4.0.4beta
SHARED_LIBS=	tiff	39.2	# 7.1
SHARED_LIBS+=	tiffxx	40.1	# 7.1
d21 2
a22 1
CONFIGURE_STYLE=gnu
a31 3

post-install:
	cd ${PREFIX}/share/doc/tiff && mv html/* . && rmdir html
@


1.70
log
@Reinstate the interlibrary dependencies, fix .pc files.
Parts/help/input from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/03/21 08:45:19 ajacoutot Exp $
d8 1
a8 1
REVISION=	1
@


1.69
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/03/11 11:10:55 espie Exp $
d8 1
a8 1
REVISION=	0
d21 2
a22 1
CONFIGURE_STYLE=gnu
@


1.68
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/11/06 21:31:06 jasper Exp $
a20 1
USE_LIBTOOL=	Yes
@


1.67
log
@Security fix for CVE-2012-4564
libtiff: Missing return value check in ppm2tiff leading to heap-buffer overflow when reading a tiff file

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2012/09/24 19:51:03 naddy Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.67.2.1
log
@Security fixes for
CVE-2013-1960 - Heap-based buffer overflow
CVE-2013-1961 - Stack-based buffer overflow

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/11/06 21:31:06 jasper Exp $
d8 1
a8 1
REVISION=	1
@


1.66
log
@Update to 4.0.3.
* A number of security issues have been resolved, including CVE-2012-3401.
* Accessor functions for TIFF field information have been added to
  support functionality which was available in libtiff 3.9.X.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/06/27 14:27:02 jasper Exp $
d8 1
@


1.65
log
@Update tiff to 4.0.2, includes a fix for CVE-2012-2113,
LibTIFF "tiff2pdf" Integer Overflow Vulnerability
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2012/04/14 15:09:55 naddy Exp $
d5 3
a7 3
DISTNAME=	tiff-4.0.2
SHARED_LIBS=	tiff	39.1	# 5.6
SHARED_LIBS+=	tiffxx	40.1	# 5.6
@


1.65.2.1
log
@Security fix for CVE-2012-4564
libtiff: Missing return value check in ppm2tiff leading to heap-buffer overflow when reading a tiff file

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/06/27 14:27:02 jasper Exp $
a7 1
REVISION=	0
@


1.64
log
@Major update to 4.0.1, which adds BigTIFF support and includes some API
changes.  Also include upstream fix for CVE-2012-1173.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2012/04/09 17:35:38 naddy Exp $
d5 3
a7 3
DISTNAME=	tiff-4.0.1
SHARED_LIBS=	tiff	39.0	# 5.6
SHARED_LIBS+=	tiffxx	40.0	# 5.6
@


1.63
log
@SECURITY fix for CVE-2012-1173 (integer overflow).
From upstream, via Sebastien Marie.
http://bugzilla.maptools.org/show_bug.cgi?id=2369
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/04/09 17:21:05 naddy Exp $
d5 3
a7 4
DISTNAME=	tiff-3.9.6
REVISION=	0
SHARED_LIBS=	tiff	38.3	# 39.6
SHARED_LIBS+=	tiffxx	39.3	# 39.6
d15 1
a15 1
WANTLIB=	c m stdc++ z jpeg>=64
a23 1
USE_GROFF =	Yes
d27 1
@


1.62
log
@maintenance update to 3.9.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2012/03/29 13:38:40 sthen Exp $
d6 1
@


1.61
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/05/09 08:14:43 giovanni Exp $
d5 3
a7 3
DISTNAME=	tiff-3.9.5
SHARED_LIBS=	tiff	38.3	# 39.5
SHARED_LIBS+=	tiffxx	39.3	# 39.5
@


1.60
log
@
Update to 3.9.5, help and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/03/23 08:08:50 jasper Exp $
d32 1
a32 1
SEPARATE_BUILD=	simple
@


1.60.4.1
log
@Security fix for CVE-2012-1173
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/05/09 08:14:43 giovanni Exp $
a7 1
REVISION=	0
@


1.60.4.2
log
@Apply patches for CVE-2012-2113,
LibTIFF "tiff2pdf" Integer Overflow Vulnerability
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60.4.1 2012/04/13 07:18:06 jasper Exp $
d8 1
a8 1
REVISION=	1
@


1.59
log
@Security fix for CVE-2011-1167, libtiff heap-based buffer overflow
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/03/19 18:41:05 jasper Exp $
d5 3
a7 4
DISTNAME=	tiff-3.9.4
REVISION=	1
SHARED_LIBS=	tiff	38.3	# 39.4
SHARED_LIBS+=	tiffxx	39.3	# 39.4
@


1.58
log
@Security fix for CVE-2011-0192: buffer overflow in Fax4Decode.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/11/17 08:05:16 espie Exp $
d6 1
a6 1
REVISION=	0
@


1.57
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/11/09 19:00:28 espie Exp $
d6 1
@


1.57.2.1
log
@Security fix for CVE-2011-0192: buffer overflow in Fax4Decode.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/11/17 08:05:16 espie Exp $
a5 1
REVISION=	0
@


1.57.2.2
log
@Security fix for CVE-2011-1167, libtiff heap-based buffer overflow
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57.2.1 2011/03/19 18:42:29 jasper Exp $
d6 1
a6 1
REVISION=	1
@


1.56
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/10/18 18:13:15 espie Exp $
d14 2
a15 2
LIB_DEPENDS=	::graphics/jpeg
WANTLIB=	c m stdc++ z jpeg.>=64
@


1.55
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/07/21 06:46:33 ajacoutot Exp $
d14 2
a15 2
LIB_DEPENDS=	jpeg.>=64::graphics/jpeg
WANTLIB=	c m stdc++ z
@


1.54
log
@Fix MASTER_SITES.

from patrick keshishian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/06/30 17:10:07 naddy Exp $
d24 1
@


1.53
log
@SECURITY:
Update to 3.9.4, which includes fixes for CVE-2009-2347 and CVE-2010-1411.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/07/22 13:15:00 jasper Exp $
d10 1
a10 1
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/
@


1.52
log
@- SECURITY FIX for CVE-2009-2347 (integer overflows in tiff tools)

patch taken from upstream bugreport:
http://bugzilla.maptools.org/show_bug.cgi?id=2079

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2009/06/23 07:49:31 jasper Exp $
d5 3
a7 4
DISTNAME=	tiff-3.8.2
PKGNAME=	${DISTNAME}p5
SHARED_LIBS=	tiff	38.2 \
		tiffxx	39.2
d10 1
a10 2
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/ \
		ftp://ftp.remotesensing.org/pub/libtiff/old/
d14 2
a15 3
LIB_DEPENDS=	jpeg.>=62::graphics/jpeg
WANTLIB=	c m z
FAKE=		lib
d25 5
a29 3
CONFIGURE_ARGS=	--with-docdir="${PREFIX}/share/doc/tiff" \
		--with-jpeg-include-dir="${DEPBASE}/include" \
		--with-jpeg-lib-dir="${DEPBASE}/lib" \
@


1.52.2.1
log
@SECURITY FIX

Resolves CVE-2010-1411
merged from upstream via redhat

reads ok to stephan@@, ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/07/22 13:15:00 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p6
@


1.51
log
@SECURITY FIX for for SA35515,
LibTIFF "LZWDecodeCompat()" Buffer Underflow Vulnerability

Patch from upstream bugreport #2065 (committed to CVS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/03/07 15:31:57 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
@


1.51.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2009-2347:

Fix several places in tiff2rgba and rgb2ycbcr that were being careless about
possible integer overflow in calculation of buffer sizes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/07/22 13:15:00 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
@


1.50
log
@fix a silly C99-ism to allow building with gcc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/10/25 09:39:29 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
@


1.49
log
@SECURITY fixes for CVE-2006-2656 and CVE-2006-3459 through 3465.
Man page fixes.

Mostly via FreeBSD.  Approving noises from bernd@@ and jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/08/27 18:09:36 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.49.2.1
log
@MFC:

SECURITY FIX

Resolves:

SA35515:
LibTIFF "LZWDecodeCompat()" Buffer Underflow Vulnerability

CVE-2009-2347:
Fix several places in tiff2rgba and rgb2ycbcr that were being careless about
possible integer overflow in calculation of buffer sizes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/07/22 13:15:00 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
@


1.48
log
@Security fix for SA31610
http://secunia.com/advisories/31610
LibTIFF LZW Decoder Buffer Underflow Vulnerability

Patch extracted from Debian's tiff_3.8.2-7+etch1

"looks fine" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2007/09/15 20:09:43 simon Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.47
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2006/08/03 12:53:18 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.46
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2006/06/12 17:31:34 naddy Exp $
d3 1
a3 1
COMMENT=	"tools and library routines for working with TIFF images"
@


1.45
log
@SECURITY:
Prevent sign extension on integer promotion that leads to a buffer overflow.
Minimal fix from upstream CVS.  CVE-2006-2193.
prodded by bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2006/03/31 20:38:29 naddy Exp $
d16 1
a16 1
LIB_DEPENDS=	jpeg.62::graphics/jpeg
@


1.44
log
@update to 3.8.2: bugfix release
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2006/03/26 10:45:18 espie Exp $
d6 1
@


1.43
log
@fix broken manpages, found out because makewhatis was complaining...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/03/18 17:40:02 naddy Exp $
d5 3
a7 4
DISTNAME=	tiff-3.8.1
PKGNAME=	${DISTNAME}p0
SHARED_LIBS=	tiff	38.1 \
		tiffxx	39.0
@


1.42
log
@update to 3.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/01/14 00:07:30 espie Exp $
d6 1
@


1.41
log
@more C++ libs bumps. Done thru mail, plus lizards.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/01/08 00:29:38 steven Exp $
d5 3
a7 4
DISTNAME=	tiff-3.7.3
PKGNAME=	$(DISTNAME)p0
SHARED_LIBS=	tiff	37.3 \
		tiffxx	38.0
d32 1
@


1.41.2.1
log
@MFC:
SECURITY:
Prevent sign extension on integer promotion that leads to a buffer overflow.
Minimal fix from upstream CVS.  CVE-2006-2193.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/01/14 00:07:30 espie Exp $
d6 1
a6 1
PKGNAME=	$(DISTNAME)p1
@


1.40
log
@remove MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2005/12/27 16:42:43 steven Exp $
d6 1
d8 1
a8 1
		tiffxx	37.3
@


1.39
log
@SHARED_LIBS
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/07/17 20:54:36 naddy Exp $
d6 2
a7 4
SHARED_LIBS=		tiff	37.3	\
			tiffxx	37.3
MODGNU_SHARED_LIBS=	tiff	'-no-undefined'	\
			tiffxx	'-no-undefined'
@


1.38
log
@Update to 3.7.3; from Bernd Ahlers <b.ahlers@@ba-net.org>.

Major changes:
* Replace runtime endianess check with the compile time one.
* Added support for the new predictor type (floating point predictor),
  defined at the TIFF Technical Note 3.
* Added Support for custom tags, passed by value. Added support for
  all DNG tags.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2005/06/19 12:19:30 naddy Exp $
d6 4
@


1.38.2.1
log
@MFC:
SECURITY:
Prevent sign extension on integer promotion that leads to a buffer overflow.
Minimal fix from upstream CVS.  CVE-2006-2193.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/07/17 20:54:36 naddy Exp $
a5 1
PKGNAME=	${DISTNAME}p1
@


1.37
log
@new master site mirror, from FreeBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/06/18 21:24:40 naddy Exp $
d5 1
a5 1
DISTNAME=	tiff-3.7.2
d9 1
a9 1
		http://dl1.maptools.org/dl/libtiff/
@


1.36
log
@update to 3.7.2 which integrates the numerous security patches
brad@@ drops maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/04/17 13:37:42 espie Exp $
d9 1
a9 1
		ftp://ftp.remotesensing.org/pub/libtiff/old/
@


1.35
log
@this stuff builds without really installing it now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/03/27 06:13:07 brad Exp $
d5 1
a5 3
VERSION=	3.6.1
DISTNAME=	tiff-v${VERSION}
PKGNAME=	tiff-${VERSION}p7
d8 2
a9 1
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/old/
d11 1
a11 1
HOMEPAGE=	http://www.libtiff.org/
d13 1
a13 1
LIB_DEPENDS=    jpeg.62::graphics/jpeg
d15 1
a16 3
MAINTAINER=	Brad Smith <brad@@openbsd.org>

FAKE=lib
d23 7
a29 22
CONFIGURE_STYLE= simple
CONFIGURE_ARGS=	--prefix="${PREFIX}" --with-ZIP --with-JPEG \
		--with-CC="${CC}" --with-GCOPTS="${CFLAGS}" \
		--with-DIRS_LIBINC="${DEPBASE}/include" \
		--with-OPTIMIZER="" --with-DIR_GZLIB="/usr/lib" \
		--with-DIR_JPEGLIB="${DEPBASE}/lib" \
		--with-LIBGL="no" --with-LIBIMAGE="no" \
		--with-INSTALL="sh ${WRKSRC}/port/install.sh" \
		--noninteractive

DOCDIR=	${PREFIX}/share/doc/tiff

post-extract:
	@@cp -f ${PORTSDIR}/infrastructure/db/{config.guess,config.sub} ${WRKSRC}

NO_REGRESS=	Yes

post-install:
	${INSTALL_DATA_DIR} ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/html/*.html ${DOCDIR}
	${INSTALL_DATA} ${WRKSRC}/html/images/*.gif ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/html/images/*.jpg ${DOCDIR}/images
@


1.34
log
@missed part of the alpha channels fix.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/03/27 05:12:15 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p6
d19 1
d29 1
a29 1
		--with-DIRS_LIBINC="${LOCALBASE}/include" \
d31 1
a31 1
		--with-DIR_JPEGLIB="${LOCALBASE}/lib" \
@


1.33
log
@fix an issue with not being able to open some valid TIFF files.

http://www.sigmasoft.com/~openbsd/archive/openbsd-ports/200503/msg00090.html

From: Bernd Ahlers <b dot ahlers at ba-net dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/03/27 03:59:00 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p5
@


1.32
log
@- bump PKGNAME
- fix MASTER_SITES; From: Bernd Ahlers <b dot ahlers at ba-net dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/12/22 06:31:05 espie Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p4
@


1.31
log
@fix a few WANTLIB issues.
Install librpmbuild since lib/rpmgettext wants it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/10/20 20:37:48 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p3
d10 1
a10 1
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/
@


1.31.2.1
log
@SECURITY:
fix multiple vulnerabilities; bump PKGNAME
http://www.vuxml.org/openbsd/d045aeb6-9ea6-11d9-9623-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/12/22 06:31:05 espie Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p4
@


1.31.2.2
log
@Fix a Denial of Service vulnerability and a buffer overflow.

- Check for zero YCbCr subsampling values which cause a division by zero crash.
- Properly check the BitsPerSample tag.

CAN-2005-1544
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31.2.1 2005/05/25 05:37:32 robert Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p5
@


1.31.2.3
log
@ups, forgot to commit this PKGNAME bump:

updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31.2.2 2005/07/29 17:38:59 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p6
@


1.30
log
@Fix memory allocation problems and numerous integer overflows.

CAN-2004-0803, CAN-2004-0804, CAN-2004-0886
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/05/18 23:35:35 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p2
d15 1
@


1.29
log
@Add a patch to fix libtiff 3.6.1 with HylaFAX.

http://bugs.hylafax.org/bugzilla/show_bug.cgi?id=500
http://bugzilla.remotesensing.org/show_bug.cgi?id=483

Thanks to Uwe Dippel <udippel at uniten dot edu dot my> for
bringing this to my attention.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/02/25 00:08:10 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p1
@


1.29.2.1
log
@cumulative update with patches of recent months

MFC:
fix an issue with not being able to open some valid TIFF files.

http://www.sigmasoft.com/~openbsd/archive/openbsd-ports/200503/msg00090.html

From: Bernd Ahlers <b dot ahlers at ba-net dot org>
---
Integer overflow in tif_dirread.c and tif_fax3.c for libtiff allows remote
attackers to execute arbitrary code via a TIFF file containing a TIFF_ASCII
or TIFF_UNDEFINED directory entry with a -1 entry count, which leads to a
heap-based buffer overflow.

CAN-2004-1308
---
fix an issue with alpha channels.

http://bugzilla.remotesensing.org/show_bug.cgi?id=718
---
fix MASTER_SITES; From: Bernd Ahlers <b dot ahlers at ba-net dot org>
---
Fix memory allocation problems and numerous integer overflows.

CAN-2004-0803, CAN-2004-0804, CAN-2004-0886

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/05/18 23:35:35 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p6
d10 1
a10 1
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/old/
@


1.29.2.2
log
@Fix a Denial of Service vulnerability and a buffer overflow.

- Check for zero YCbCr subsampling values which cause a division by zero crash.
- Properly check the BitsPerSample tag.

CAN-2005-1544
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29.2.1 2005/03/31 22:08:46 sturm Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p7
@


1.29.2.3
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29.2.2 2005/07/29 17:51:26 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p8
@


1.28
log
@upgrade to libtiff 3.6.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/12/23 23:45:41 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}
@


1.28.2.1
log
@Add a patch to fix libtiff 3.6.1 with HylaFAX.

http://bugs.hylafax.org/bugzilla/show_bug.cgi?id=500
http://bugzilla.remotesensing.org/show_bug.cgi?id=483

Thanks to Uwe Dippel <udippel at uniten dot edu dot my> for
bringing this to my attention.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/05/18 23:35:35 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p1
@


1.28.2.2
log
@cumulative update with patches of recent months

MFC:
fix an issue with not being able to open some valid TIFF files.

http://www.sigmasoft.com/~openbsd/archive/openbsd-ports/200503/msg00090.html

From: Bernd Ahlers <b dot ahlers at ba-net dot org>
---
Integer overflow in tif_dirread.c and tif_fax3.c for libtiff allows remote
attackers to execute arbitrary code via a TIFF file containing a TIFF_ASCII
or TIFF_UNDEFINED directory entry with a -1 entry count, which leads to a
heap-based buffer overflow.

CAN-2004-1308
---
fix an issue with alpha channels.

http://bugzilla.remotesensing.org/show_bug.cgi?id=718
---
fix MASTER_SITES; From: Bernd Ahlers <b dot ahlers at ba-net dot org>
---
Fix memory allocation problems and numerous integer overflows.

CAN-2004-0803, CAN-2004-0804, CAN-2004-0886

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28.2.1 2004/05/18 23:38:50 brad Exp $
d7 1
a7 1
PKGNAME=	tiff-${VERSION}p6
d10 1
a10 1
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/old/
@


1.27
log
@remove workarounds for gcc2.95/sparc64 optimizer bugs
@
text
@d5 1
a5 1
VERSION=	3.6.0
d18 1
d37 1
a37 1
	@@cp -f ${PORTSDIR}/infrastructure/db/config.guess ${WRKSRC}
@


1.26
log
@upgrade to libtiff 3.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2002/10/27 00:03:16 naddy Exp $
a31 5

# Internal Compiler Error
.if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=	patch-* sup-sparc64
.endif
@


1.25
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/01/24 04:55:50 brad Exp $
d5 3
a7 2
DISTNAME=	tiff-v3.5.7
PKGNAME=	tiff-3.5.7
@


1.24
log
@- add workaround for optimization bug in GCC for sparc64; problem pointed out by marc@@
- fpic -> fPIC for sparc64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/01/19 09:34:42 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.500
d41 2
@


1.23
log
@upgrade to libtiff 3.5.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/10/10 19:28:50 brad Exp $
d31 5
@


1.22
log
@Use our in-tree copy instead of patching the one that comes with libtiff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/04/13 23:53:27 brad Exp $
d3 1
a3 1
COMMENT=	"Tools and library routines for working with TIFF images"
d5 2
a6 2
DISTNAME=	tiff-v3.5.5
PKGNAME=	tiff-3.5.5
d8 2
a9 2
NEED_VERSION=	1.460
MASTER_SITES=	http://www.libtiff.org/
d23 1
a23 5
CONFIGURE_ARGS=	--with-ZIP --with-JPEG \
		--with-DIR_BIN='$${DESTDIR}${PREFIX}/bin' \
		--with-DIR_LIB='$${DESTDIR}${PREFIX}/lib' \
		--with-DIR_INC='$${DESTDIR}${PREFIX}/include' \
		--with-DIR_MAN='$${DESTDIR}${PREFIX}/man' \
d25 3
a27 3
		--with-DIRS_LIBINC="${PREFIX}/include" \
		--with-DIR_GZLIB="/usr/lib" \
		--with-DIR_JPEGLIB="${PREFIX}/lib" \
@


1.21
log
@- integrate COMMENT
- bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/09/24 07:04:09 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.384
d37 3
@


1.20
log
@add name to MAINTAINER
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2000/07/04 02:09:25 krw Exp $
d8 1
a8 1
NEED_VERSION=	1.330
@


1.19
log
@Change PFRAG.shared ldconfig invocation(s) to
DYNLIBDIR() invocations.

Bump NEED_VERSION to 1.310 so DYNLIBDIR() works.

As requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/06/28 01:48:22 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.310
d13 1
a13 1
MAINTAINER=	brad@@openbsd.org
@


1.18
log
@add HOMEPAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/06/14 18:24:55 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.301
@


1.17
log
@- remove license type
- use new framework for PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/06/11 08:49:50 fgsch Exp $
d8 2
@


1.16
log
@CONFIGURE_STYLE, NEED_VERSION and tag; remove FAKE=yes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/05/21 10:57:40 fgsch Exp $
d9 2
a12 1
LICENSE_TYPE=		BSD
d18 1
a18 3
LIB_DEPENDS=    jpeg.62::graphics/jpeg

CONFIGURE_STYLE=	simple
@


1.15
log
@Update to tiff 3.5.5; see www.libtiff.org/v3.5.5.html for changelog.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/03/24 23:28:11 espie Exp $
d6 1
a6 1
NEED_VERSION=	1.230
a8 1

d19 1
a19 3
FAKE=	Yes

HAS_CONFIGURE=	Yes
@


1.14
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/03/24 22:11:45 espie Exp $
d3 2
a4 2
DISTNAME=	tiff-v3.5.4
PKGNAME=	tiff-3.5.4
d6 1
a6 1
NEED_VERSION=	 1.230
d23 2
a24 1
CONFIGURE_ARGS=	--with-ZIP --with-JPEG --with-DIR_BIN='$${DESTDIR}${PREFIX}/bin' \
@


1.14.2.1
log
@bring graphics as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/07/04 02:09:25 krw Exp $
d3 2
a4 2
DISTNAME=	tiff-v3.5.5
PKGNAME=	tiff-3.5.5
d6 1
a6 1
NEED_VERSION=	1.310
a8 3
HOMEPAGE=	http://www.libtiff.org/

LIB_DEPENDS=    jpeg.62::graphics/jpeg
d12 1
d18 6
a23 3
CONFIGURE_STYLE= simple
CONFIGURE_ARGS=	--with-ZIP --with-JPEG \
		--with-DIR_BIN='$${DESTDIR}${PREFIX}/bin' \
@


1.13
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/03/06 21:17:45 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.223
d18 1
a18 1
LIB_DEPENDS=    jpeg.62:graphics/jpeg
@


1.12
log
@- Marc managed to revert the ${PORTSDIR} change with the previous commit
to enable the use of Fake
- ldconfig is no longer needed for post-install target with the use of Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/03/06 16:48:26 espie Exp $
d6 1
a8 1
NEED_VERSION=	1.223
@


1.11
log
@Fake... a bit more hairy, since tiff is writing Makefiles at a weird point.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/02/15 05:04:34 turan Exp $
d8 1
a8 1
NEED_VERSION=	1.64
d18 3
a20 1
LIB_DEPENDS=    jpeg.62:${PORTSDIR}/graphics/jpeg
a36 2
FAKE=Yes

a41 1
	@@${LDCONFIG} -m ${PREFIX}/lib
@


1.10
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@a5 1
NEED_VERSION=	1.223
d8 2
d18 1
a18 1
LIB_DEPENDS=    jpeg.62:graphics/jpeg
d21 4
a24 4
CONFIGURE_ARGS=	--with-ZIP --with-JPEG --with-DIR_BIN="${PREFIX}/bin" \
		--with-DIR_LIB="${PREFIX}/lib" \
		--with-DIR_INC="${PREFIX}/include" \
		--with-DIR_MAN="${PREFIX}/man" \
d34 2
@


1.9
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/02/12 06:29:56 turan Exp $
d6 1
a8 2
NEED_VERSION=	1.64

d12 4
a15 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d17 1
a17 1
LIB_DEPENDS=    jpeg.62:${PORTSDIR}/graphics/jpeg
d19 1
a19 1
HAS_CONFIGURE=	yes
@


1.8
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/02/05 03:59:04 brad Exp $
d13 4
a16 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.7
log
@${MKDIR} -> ${INSTALL_DATA_DIR}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/01/01 21:28:30 brad Exp $
d11 6
@


1.6
log
@upgrade to libtiff 3.5.4, biggest change:
- Removed LZW Compression to comply with Unisys patent extortion
- Changed default compression in tools to TIFF_PACKBITS, and changed usage
descriptions in tools to reflect removal of LZW compression
- Added Pixar tag support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/10/26 22:05:20 brad Exp $
d30 1
a30 1
	@@${MKDIR} ${DOCDIR}/images
@


1.5
log
@add libtiff v3.5.2
@
text
@d1 1
a1 1
# $OpenBSD$
d3 2
a4 2
DISTNAME=	tiff-v3.5.2
PKGNAME=	tiff-3.5.2
d24 1
a24 1
		--with-INSTALL="${SH} ${WRKSRC}/port/install.sh" \
@


1.4
log
@remove useless tiff Makefile
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.3 1999/03/09 18:15:49 marc Exp $
#
d3 2
a4 1
PKGNAME=	tiff
d6 1
a6 2
IGNORE=		"has been superseded by tiff34"
MIRROR_DISTFILE=no
d8 27
a34 1
MAINTAINER=	marc@@OpenBSD.org
@


1.3
log
@Don't mirror distfile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1998/06/10 02:56:21 marc Exp $
@


1.2
log
@1) remove tiff from graphics makefile as there is nothing to make
2) change tiff/Makefile to spit out message saying to use tiff34
   remove all tiff files, patches, and pkg data; they're no longer needed
3) install tiff34 as libtiff, tiff.h, and tiffio.h; add symbolic links
   so the old names of libtiff34, tiff34.h, and tiffio34.h still work.
4) Change ImageMagick to use -ltiff, not -ltiff34; remove the patch
   files and directory as they are no longer needed.
5) Change gimp to use -ltiff, not -ltiff34; remove the patch files and
   directory as they are no longer needed.

NOTE: with these changes ImageMagick and gimp require the updated tiff34
      port.
@
text
@d1 1
a1 6
# OpenBSD makefile for:	tiff
# Version required:	--none--
# Date created:		December 2, 1997
# Whom:			Angelos D. Keromytis
#
# $OpenBSD: Makefile,v 1.1.1.1 1997/12/03 02:37:00 angelos Exp $
d7 1
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# Version required:	3.3 beta 021
d6 1
a6 1
# $OpenBSD$
d9 1
a9 2
DISTNAME=	v3.3beta021.src
PKGNAME=	tiff-3.3
d11 1
a11 5
MASTER_SITES=   ftp://ftp.isri.unlv.edu/pub/mirror/tiff/ \
		ftp://ftp.coli.uni-sb.de/pub/graphics/ \
		ftp://ftp.funet.fi/pub/graphics/packages/tiff/
# Original master site not keeps old versions
# MASTER_SITES=   ftp://ftp.sgi.com/graphics/tiff/
d13 1
a13 22
NO_WRKSUBDIR=	yes
MAN1=		fax2tiff.1 gif2tiff.1 pal2rgb.1 ppm2tiff.1 ras2tiff.1 \
		rgb2ycbcr.1 sgi2tiff.1 thumbnail.1 tiff2bw.1 tiff2ps.1 \
		tiffcmp.1 tiffcp.1 tiffdither.1 tiffdump.1 tiffgt.1 \
		tiffinfo.1 tiffmedian.1 tiffsplit.1 tiffsv.1
MAN3=		TIFFClose.3 TIFFError.3 TIFFFlush.3 TIFFGetField.3 \
		TIFFOpen.3 TIFFPrintDirectory.3 TIFFReadDirectory.3 \
		TIFFReadEncodedStrip.3 TIFFReadEncodedTile.3 \
		TIFFReadRGBAImage.3 TIFFReadRawStrip.3 TIFFReadRawTile.3 \
		TIFFReadScanline.3 TIFFReadTile.3 TIFFSetDirectory.3 \
		TIFFSetField.3 TIFFWarning.3 TIFFWriteDirectory.3 \
		TIFFWriteEncodedStrip.3 TIFFWriteEncodedTile.3 \
		TIFFWriteRawStrip.3 TIFFWriteRawTile.3 TIFFWriteScanline.3 \
		TIFFintro.3 TIFFquery.3 TIFFsize.3 TIFFstrip.3 \
		TIFFswab.3 TIFFtile.3

pre-configure:
	@@(cd ${WRKSRC}/libtiff ; ln -s Makefile.gcc Makefile)
	@@(cd ${WRKSRC}/tools ; ln -s Makefile.sun Makefile)

post-install:
	${LDCONFIG} -m ${PREFIX}/lib
@


1.1.1.1
log
@libtiff port.
@
text
@@


1.1.1.2
log
@add port of libtiff v3.5.2
@
text
@d1 5
d7 1
d9 2
a10 2
DISTNAME=	tiff-v3.5.2
PKGNAME=	tiff-3.5.2
d12 25
a36 22
MASTER_SITES=	http://www.libtiff.org/

NEED_VERSION=	1.64

MAINTAINER=	brad@@openbsd.org

LIB_DEPENDS=    jpeg.62:${PORTSDIR}/graphics/jpeg

HAS_CONFIGURE=	yes
CONFIGURE_ARGS=	--with-ZIP --with-JPEG --with-DIR_BIN="${PREFIX}/bin" \
		--with-DIR_LIB="${PREFIX}/lib" \
		--with-DIR_INC="${PREFIX}/include" \
		--with-DIR_MAN="${PREFIX}/man" \
		--with-CC="${CC}" --with-GCOPTS="${CFLAGS}" \
		--with-DIRS_LIBINC="${PREFIX}/include" \
		--with-DIR_GZLIB="/usr/lib" \
		--with-DIR_JPEGLIB="${PREFIX}/lib" \
		--with-LIBGL="no" --with-LIBIMAGE="no" \
		--with-INSTALL="${SH} ${WRKSRC}/port/install.sh" \
		--noninteractive

DOCDIR=	${PREFIX}/share/doc/tiff
d39 1
a39 5
	@@${MKDIR} ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/html/*.html ${DOCDIR}
	${INSTALL_DATA} ${WRKSRC}/html/images/*.gif ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/html/images/*.jpg ${DOCDIR}/images
	@@${LDCONFIG} -m ${PREFIX}/lib
@

