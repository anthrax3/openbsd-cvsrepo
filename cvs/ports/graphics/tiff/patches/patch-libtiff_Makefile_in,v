head	1.16;
access;
symbols
	OPENBSD_6_1:1.16.0.6
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.4
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.14.0.8
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.6
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.12.0.2
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.4
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.9.0.4
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.16
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.14
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.12
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.10
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.8
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.6
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.4
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.2
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.7.0.4
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.2
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.5.0.6
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.4
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.5.0.2
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.2.0.8
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.6
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.4
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.16
date	2015.11.04.20.51.36;	author naddy;	state Exp;
branches;
next	1.15;
commitid	153WTW8OyW7UOkpg;

1.15
date	2015.03.29.17.39.22;	author naddy;	state Exp;
branches;
next	1.14;
commitid	DVvDfC6c0cv0tIBV;

1.14
date	2013.03.27.16.37.09;	author naddy;	state Exp;
branches
	1.14.6.1
	1.14.8.1;
next	1.13;

1.13
date	2012.09.24.19.51.04;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2012.04.14.15.09.55;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2012.04.09.17.21.05;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2011.05.09.08.14.43;	author giovanni;	state Exp;
branches;
next	1.9;

1.9
date	2010.06.30.17.10.07;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2006.03.18.17.40.02;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2005.07.17.20.54.36;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2005.06.18.21.24.40;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2004.02.25.00.08.10;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2003.12.23.23.48.55;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2003.12.23.23.45.41;	author brad;	state dead;
branches;
next	1.2;

1.2
date	2002.01.19.09.34.42;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2001.10.10.15.15.00;	author wilfried;	state Exp;
branches;
next	;

1.14.6.1
date	2015.03.29.20.58.58;	author naddy;	state Exp;
branches;
next	;
commitid	yV7LOUcjZFa2iAbX;

1.14.8.1
date	2015.03.29.19.41.56;	author naddy;	state Exp;
branches;
next	;
commitid	tay2jRrbkJ3GxbDm;


desc
@@


1.16
log
@update to 4.0.6, no major changes
@
text
@$OpenBSD: patch-libtiff_Makefile_in,v 1.15 2015/03/29 17:39:22 naddy Exp $

* Avoid picking up an old libtiff in ${LOCALBASE}.

--- libtiff/Makefile.in.orig	Sat Sep 12 21:48:44 2015
+++ libtiff/Makefile.in	Wed Nov  4 17:33:52 2015
@@@@ -345,10 +345,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
 INSTALL_SCRIPT = @@INSTALL_SCRIPT@@
 INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
 LD = @@LD@@
-LDFLAGS = @@LDFLAGS@@
+LDFLAGS =
 LIBDIR = @@LIBDIR@@
 LIBOBJS = @@LIBOBJS@@
-LIBS = @@LIBS@@
+LIBS = @@LDFLAGS@@ @@LIBS@@
 LIBTIFF_ALPHA_VERSION = @@LIBTIFF_ALPHA_VERSION@@
 LIBTIFF_DOCDIR = @@LIBTIFF_DOCDIR@@
 LIBTIFF_MAJOR_VERSION = @@LIBTIFF_MAJOR_VERSION@@
@


1.15
log
@Security update to 4.0.4beta (plus one further upstream fix).
Should fix CVE-2014-8127, CVE-2014-8128, CVE-2014-8129, CVE-2014-8130,
CVE-2014-9655, CVE-2015-1547.
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.14 2013/03/27 16:37:09 naddy Exp $
d5 3
a7 3
--- libtiff/Makefile.in.orig	Mon Jan 26 13:17:48 2015
+++ libtiff/Makefile.in	Sun Mar 29 16:57:13 2015
@@@@ -344,10 +344,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.14
log
@Reinstate the interlibrary dependencies, fix .pc files.
Parts/help/input from brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.13 2012/09/24 19:51:04 naddy Exp $
d5 3
a7 3
--- libtiff/Makefile.in.orig	Sat Sep 22 18:08:19 2012
+++ libtiff/Makefile.in	Mon Sep 24 21:30:29 2012
@@@@ -288,10 +288,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.14.6.1
log
@Security update to 4.0.4beta (plus one further upstream fix).
Should fix CVE-2014-8127, CVE-2014-8128, CVE-2014-8129, CVE-2014-8130,
CVE-2014-9655, CVE-2015-1547.
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.14.8.1 2015/03/29 19:41:56 naddy Exp $
d5 3
a7 3
--- libtiff/Makefile.in.orig	Mon Jan 26 13:17:48 2015
+++ libtiff/Makefile.in	Sun Mar 29 16:57:13 2015
@@@@ -344,10 +344,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.14.8.1
log
@Security update to 4.0.4beta (plus one further upstream fix).
Should fix CVE-2014-8127, CVE-2014-8128, CVE-2014-8129, CVE-2014-8130,
CVE-2014-9655, CVE-2015-1547.
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.15 2015/03/29 17:39:22 naddy Exp $
d5 3
a7 3
--- libtiff/Makefile.in.orig	Mon Jan 26 13:17:48 2015
+++ libtiff/Makefile.in	Sun Mar 29 16:57:13 2015
@@@@ -344,10 +344,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.13
log
@Update to 4.0.3.
* A number of security issues have been resolved, including CVE-2012-3401.
* Accessor functions for TIFF field information have been added to
  support functionality which was available in libtiff 3.9.X.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.12 2012/04/14 15:09:55 naddy Exp $
a3 1
* Do not record inter-library dependencies.
d16 1
a16 1
+LIBS = 
@


1.12
log
@Major update to 4.0.1, which adds BigTIFF support and includes some API
changes.  Also include upstream fix for CVE-2012-1173.
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.11 2012/04/09 17:21:05 naddy Exp $
d6 3
a8 3
--- libtiff/Makefile.in.orig	Sat Feb 18 23:02:56 2012
+++ libtiff/Makefile.in	Wed Apr 11 19:06:03 2012
@@@@ -254,10 +254,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.11
log
@maintenance update to 3.9.6
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.10 2011/05/09 08:14:43 giovanni Exp $
d6 3
a8 3
--- libtiff/Makefile.in.orig	Sat Feb 18 23:27:08 2012
+++ libtiff/Makefile.in	Mon Apr  9 19:13:44 2012
@@@@ -238,10 +238,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.10
log
@
Update to 3.9.5, help and ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.9 2010/06/30 17:10:07 naddy Exp $
d6 3
a8 3
--- libtiff/Makefile.in.orig	Sat Apr  9 22:00:48 2011
+++ libtiff/Makefile.in	Thu Apr 21 15:35:54 2011
@@@@ -230,10 +230,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.9
log
@SECURITY:
Update to 3.9.4, which includes fixes for CVE-2009-2347 and CVE-2010-1411.
@
text
@d1 1
a1 1
$OpenBSD: patch-libtiff_Makefile_in,v 1.8 2006/03/18 17:40:02 naddy Exp $
d6 3
a8 3
--- libtiff/Makefile.in.orig	Tue Jun 15 20:58:54 2010
+++ libtiff/Makefile.in	Sun Jun 27 05:25:54 2010
@@@@ -231,10 +231,10 @@@@ INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
@


1.8
log
@update to 3.8.1
@
text
@d1 13
a13 5
$OpenBSD: patch-libtiff_Makefile_in,v 1.7 2005/07/17 20:54:36 naddy Exp $
--- libtiff/Makefile.in.orig	Mon Mar 13 15:58:39 2006
+++ libtiff/Makefile.in	Thu Mar 16 16:08:40 2006
@@@@ -196,7 +196,7 @@@@ LD = @@LD@@
 LDFLAGS = @@LDFLAGS@@
@


1.7
log
@Update to 3.7.3; from Bernd Ahlers <b.ahlers@@ba-net.org>.

Major changes:
* Replace runtime endianess check with the compile time one.
* Added support for the new predictor type (floating point predictor),
  defined at the TIFF Technical Note 3.
* Added Support for custom tags, passed by value. Added support for
  all DNG tags.
@
text
@d1 4
a4 4
$OpenBSD: patch-libtiff_Makefile_in,v 1.6 2005/06/18 21:24:40 naddy Exp $
--- libtiff/Makefile.in.orig	Tue Jul  5 18:38:08 2005
+++ libtiff/Makefile.in	Wed Jul 13 18:52:48 2005
@@@@ -193,7 +193,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_P
@


1.6
log
@update to 3.7.2 which integrates the numerous security patches
brad@@ drops maintainership
@
text
@d1 4
a4 5
$OpenBSD$
--- libtiff/Makefile.in.orig	Tue May 24 16:38:41 2005
+++ libtiff/Makefile.in	Tue May 24 16:38:56 2005
@@@@ -188,7 +188,7 @@@@ INSTALL_SCRIPT = @@INSTALL_SCRIPT@@
 INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
d6 1
@


1.5
log
@upgrade to libtiff 3.6.1
@
text
@d1 12
a12 12
$OpenBSD: patch-libtiff_Makefile_in,v 1.4 2003/12/23 23:48:55 brad Exp $
--- libtiff/Makefile.in.orig	2003-11-17 04:24:41.000000000 -0500
+++ libtiff/Makefile.in	2004-02-24 18:26:44.000000000 -0500
@@@@ -246,7 +246,7 @@@@ OSFdso: ${OBJS}
 	${LD} -o libtiff.@@DSOSUF@@ -shared -error_unresolved ${OBJS} @@LIBJPEG@@ @@LIBGZ@@ -lc -lm
 
 OPENBSDdso: ${OBJS}
-	${CC} -shared @@LIBCOPTS@@ -o libtiff.@@DSOSUF_VERSION@@ ${OBJS} @@LIBJPEG@@ @@LIBGZ@@ -lm
+	${CC} -shared @@LIBCOPTS@@ -o libtiff.@@DSOSUF_VERSION@@ ${OBJS}
 	touch $@@
 
 OPENSERVERdso:  ${OBJS}
@


1.4
log
@argh, damn cvs. this should have been updated and not removed.
@
text
@d1 4
a4 4
$OpenBSD$
--- libtiff/Makefile.in.orig	2003-12-19 22:18:52.000000000 -0500
+++ libtiff/Makefile.in	2003-12-19 22:19:48.000000000 -0500
@@@@ -244,7 +244,7 @@@@ OSFdso: ${OBJS}
@


1.3
log
@upgrade to libtiff 3.6.0
@
text
@d1 5
a5 3
--- libtiff/Makefile.in.orig	Sun Sep  9 11:56:04 2001
+++ libtiff/Makefile.in	Tue Dec  4 00:01:22 2001
@@@@ -364,15 +364,15 @@@@ installPrivateHdrs: ${INCS_PRIVATE}
d7 4
a10 16
 installDSO: @@DSO@@dso
 	if [ @@DSOSUF_VERSION@@ != @@DSOSUF@@ ]; then			\
-	    ${INSTALL} -idb tiff.sw.tools -m 555 -F ${DESTDIR}@@DIR_LIB@@	\
-		-O libtiff.@@DSOSUF_VERSION@@;				\
+	    ${INSTALL} -idb tiff.sw.tools.nostrip -m 555 -F		\
+		${DESTDIR}@@DIR_LIB@@ -O libtiff.@@DSOSUF_VERSION@@;	\
 	    ${INSTALL} -idb tiff.sw.tools -F ${DESTDIR}@@DIR_LIB@@	\
 		-lns libtiff.@@DSOSUF_VERSION@@ -O libtiff.@@DSOSUF@@;	\
 	    ${INSTALL} -idb tiff.sw.tools -F ${DESTDIR}@@DIR_LIB@@	\
 		-lns libtiff.@@DSOSUF@@ -O libtiff.so;			\
 	else								\
-	    ${INSTALL} -idb tiff.sw.tools -m 555 -F ${DESTDIR}@@DIR_LIB@@	\
-		-O libtiff.@@DSOSUF@@;					\
+	    ${INSTALL} -idb tiff.sw.tools.nostrip -m 555 -F		\
+		${DESTDIR}@@DIR_LIB@@ -O libtiff.@@DSOSUF@@;		\
 	fi
d12 1
a12 1
 install: all installHdrs
@


1.2
log
@upgrade to libtiff 3.5.7
@
text
@@


1.1
log
@use -fPIC rather than -fpic
regenerate the patches with update-patches
ok naddy@@
@
text
@d1 3
a3 14
$OpenBSD$
--- libtiff/Makefile.in.orig	Sun Nov 28 21:15:36 1999
+++ libtiff/Makefile.in	Wed Oct 10 17:07:22 2001
@@@@ -62,7 +62,6 @@@@ IPATH	= -I. -I${SRCDIR} @@COPT_LIBINC@@
 #
 CONF_LIBRARY=@@CONF_JPEG@@ @@CONF_ZIP@@
 COPTS	= @@GCOPTS@@
-OPTIMIZER=-O
 CFLAGS	= @@ENVOPTS@@ @@LIBCOPTS@@ ${COPTS} ${OPTIMIZER} ${IPATH} ${CONF_LIBRARY}
 #
 SRCS	= \
@@@@ -216,6 +215,9 @@@@ LINUXdso:  ${OBJS}
 OSFdso: ${OBJS}
 	${LD} -o libtiff.@@DSOSUF@@ -shared -error_unresolved ${OBJS} @@LIBJPEG@@ @@LIBGZ@@ -lc -lm
a4 9
+OPENBSDdso: ${OBJS}
+	${CC} -shared @@LIBCOPTS@@ -o libtiff.@@DSOSUF_VERSION@@ ${OBJS} @@LIBJPEG@@ @@LIBGZ@@
+	touch $@@
 
 ${OBJS}: ${SRCDIR}/tiffio.h ${SRCDIR}/tiff.h ${SRCDIR}/tif_dir.h
 ${OBJS}: ${SRCDIR}/tiffcomp.h ${SRCDIR}/tiffiop.h ${SRCDIR}/tiffconf.h
@@@@ -323,15 +325,9 @@@@ installHdrs: ${INCS}
 		-src $$i -O $$f;					\
 	done
d6 11
a16 8
-	if [ @@DSOSUF_VERSION@@ != @@DSOSUF@@ ]; then			\
-	    ${INSTALL} -idb tiff.sw.tools -m 555 -F @@DIR_LIB@@		\
+	${INSTALL} -idb tiff.sw.tools.nostrip -m 555 -F @@DIR_LIB@@	\
 		-O libtiff.@@DSOSUF_VERSION@@;				\
-	    ${INSTALL} -idb tiff.sw.tools -F @@DIR_LIB@@			\
-		-ln libtiff.@@DSOSUF_VERSION@@ -O libtiff.@@DSOSUF@@;	\
-	else								\
-	    ${INSTALL} -idb tiff.sw.tools -m 555 -F @@DIR_LIB@@		\
d18 4
a21 2
-	fi
+
a22 2
 	${INSTALL} -idb tiff.sw.dev -m 755 -dir @@DIR_LIB@@
 	${INSTALL} -idb tiff.sw.dev -m 444 -F @@DIR_LIB@@ -O libtiff.a
@

