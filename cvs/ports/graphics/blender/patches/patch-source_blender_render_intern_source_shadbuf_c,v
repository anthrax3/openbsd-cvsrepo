head	1.9;
access;
symbols
	OPENBSD_6_0:1.9.0.8
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.4
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.6
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.2
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.8.0.6
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.4
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.2
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.10
	OPENBSD_5_0:1.4.0.8
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.6
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.3.0.10
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.4
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.1.0.2
	OPENBSD_3_9_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2015.01.10.00.30.49;	author pascal;	state Exp;
branches;
next	1.8;
commitid	jtZqTBXbXND1YM3p;

1.8
date	2013.05.18.22.01.28;	author pascal;	state Exp;
branches;
next	1.7;

1.7
date	2012.10.31.17.45.55;	author pascal;	state Exp;
branches;
next	1.6;

1.6
date	2012.05.07.15.45.42;	author pascal;	state Exp;
branches;
next	1.5;

1.5
date	2012.02.26.20.37.26;	author pascal;	state Exp;
branches;
next	1.4;

1.4
date	2009.10.25.22.41.25;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.25.12.19.14;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.07.26.06.45.27;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2005.11.24.22.22.57;	author steven;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Update to blender 2.73.
@
text
@$OpenBSD: patch-source_blender_render_intern_source_shadbuf_c,v 1.8 2013/05/18 22:01:28 pascal Exp $
--- source/blender/render/intern/source/shadbuf.c.orig	Sun Jan  4 15:13:39 2015
+++ source/blender/render/intern/source/shadbuf.c	Fri Jan  9 19:50:19 2015
@@@@ -1039,7 +1039,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
 {
 	float temp;
 	int *rz, ofs;
-	int zsamp=0;
+	long zsamp=0;
 	char *ct, *cz;
 
 	/* simpleclip */
@@@@ -1068,7 +1068,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
 	else if (*ct==2) {
 		ct= ((char *)rz);
 		ct+= 4+2*16*(ys & 15)+2*(xs & 15);
-		zsamp= *rz;
+		zsamp= (long)*rz;
 	
 		cz= (char *)&zsamp;
 		cz[BCOMP]= ct[0];
@@@@ -1077,7 +1077,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
 	else if (*ct==1) {
 		ct= ((char *)rz);
 		ct+= 4+16*(ys & 15)+(xs & 15);
-		zsamp= *rz;
+		zsamp= (long)*rz;
 
 		cz= (char *)&zsamp;
 		cz[GCOMP]= ct[0];
@@@@ -1226,7 +1226,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
 {
 	float temp;
 	int *rz, ofs;
-	int bias, zbias, zsamp;
+	int bias, zbias;
+	long zsamp;
 	char *ct, *cz;
 
 	/* negative! The other side is more important */
@@@@ -1252,7 +1253,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
 	else if (*ct==2) {
 		ct= ((char *)rz);
 		ct+= 4+2*16*(ys & 15)+2*(xs & 15);
-		zsamp= *rz;
+		zsamp= (long)*rz;
 	
 		cz= (char *)&zsamp;
 		cz[BCOMP]= ct[0];
@@@@ -1261,7 +1262,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
 	else if (*ct==1) {
 		ct= ((char *)rz);
 		ct+= 4+16*(ys & 15)+(xs & 15);
-		zsamp= *rz;
+		zsamp= (long)*rz;
 
 		cz= (char *)&zsamp;
 		cz[GCOMP]= ct[0];
@


1.8
log
@Update to blender 2.67.
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_render_intern_source_shadbuf_c,v 1.7 2012/10/31 17:45:55 pascal Exp $
--- source/blender/render/intern/source/shadbuf.c.orig	Thu Jan 24 22:57:13 2013
+++ source/blender/render/intern/source/shadbuf.c	Fri May  3 22:39:46 2013
@@@@ -1040,7 +1040,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d13 1
a13 1
@@@@ -1069,7 +1069,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d22 1
a22 1
@@@@ -1078,7 +1078,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d31 1
a31 1
@@@@ -1227,7 +1227,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d41 1
a41 1
@@@@ -1253,7 +1254,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d50 1
a50 1
@@@@ -1262,7 +1263,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
@


1.7
log
@Update to blender 2.64a.
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_render_intern_source_shadbuf_c,v 1.6 2012/05/07 15:45:42 pascal Exp $
--- source/blender/render/intern/source/shadbuf.c.orig	Tue Oct  9 20:38:25 2012
+++ source/blender/render/intern/source/shadbuf.c	Fri Oct 12 18:01:14 2012
@@@@ -1041,7 +1041,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d13 1
a13 1
@@@@ -1070,7 +1070,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d22 1
a22 1
@@@@ -1079,7 +1079,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d31 1
a31 1
@@@@ -1228,7 +1228,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d41 1
a41 1
@@@@ -1254,7 +1255,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d50 1
a50 1
@@@@ -1263,7 +1264,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
@


1.6
log
@Update to blender 2.63.  Get rid of ffmpeg flavour since it doesn't compile on
mips64el anyway, and enable ffmpeg unconditionally.
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_render_intern_source_shadbuf_c,v 1.5 2012/02/26 20:37:26 pascal Exp $
--- source/blender/render/intern/source/shadbuf.c.orig	Thu Apr 26 22:48:08 2012
+++ source/blender/render/intern/source/shadbuf.c	Mon Apr 30 23:03:53 2012
@@@@ -1038,7 +1038,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d13 1
a13 1
@@@@ -1067,7 +1067,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d22 1
a22 1
@@@@ -1076,7 +1076,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d31 1
a31 1
@@@@ -1225,7 +1225,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d41 1
a41 1
@@@@ -1251,7 +1252,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d50 1
a50 1
@@@@ -1260,7 +1261,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
@


1.5
log
@Update blender to 2.62.

tested by armani@@

minor tweaks and ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD$
--- source/blender/render/intern/source/shadbuf.c.orig	Tue Nov 15 22:12:47 2011
+++ source/blender/render/intern/source/shadbuf.c	Tue Nov 15 22:15:15 2011
@@@@ -1036,7 +1036,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d13 2
a14 2
@@@@ -1065,7 +1065,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
 	else if(*ct==2) {
d22 2
a23 2
@@@@ -1074,7 +1074,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
 	else if(*ct==1) {
d31 1
a31 1
@@@@ -1223,7 +1223,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d41 2
a42 2
@@@@ -1249,7 +1250,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
 	else if(*ct==2) {
d50 2
a51 2
@@@@ -1258,7 +1259,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
 	else if(*ct==1) {
@


1.4
log
@update to 2.49b (done at p2k9)
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_render_intern_source_shadbuf_c,v 1.2 2006/07/26 06:45:27 steven Exp $
--- source/blender/render/intern/source/shadbuf.c.orig	Tue Sep  1 17:20:59 2009
+++ source/blender/render/intern/source/shadbuf.c	Sat Oct 10 19:25:01 2009
@@@@ -592,7 +592,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d13 1
a13 1
@@@@ -618,7 +618,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d18 1
a18 1
+		zsamp= (long) *rz;
d22 1
a22 1
@@@@ -627,7 +627,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d27 1
a27 1
+		zsamp= (long) *rz;
d31 1
a31 1
@@@@ -772,7 +772,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d41 1
a41 1
@@@@ -798,7 +799,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d46 1
a46 1
+		zsamp= (long) *rz;
d50 1
a50 1
@@@@ -807,7 +808,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d55 1
a55 1
+		zsamp= (long) *rz;
@


1.3
log
@update to 2.44
@
text
@d2 3
a4 3
--- source/blender/render/intern/source/shadbuf.c.orig	Mon Apr 30 16:51:20 2007
+++ source/blender/render/intern/source/shadbuf.c	Sun May 20 15:02:42 2007
@@@@ -483,7 +483,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d13 1
a13 1
@@@@ -509,7 +509,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d22 1
a22 1
@@@@ -518,7 +518,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
d31 1
a31 10
@@@@ -527,7 +527,7 @@@@ static float readshadowbuf(ShadBuf *shb, ShadSampleBuf
 	else {
 		/* got warning on this for 64 bits.... */
 		/* but it's working code! in this case rz is not a pointer but zvalue (ton) */
- 		zsamp= (int) rz;
+ 		zsamp= (long) rz;
 	}
 
 	/* tricky stuff here; we use ints which can overflow easily with bias values */
@@@@ -660,7 +660,8 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d41 1
a41 1
@@@@ -686,7 +687,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
d50 1
a50 1
@@@@ -695,7 +696,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
a58 9
@@@@ -704,7 +705,7 @@@@ static float readshadowbuf_halo(ShadBuf *shb, ShadSamp
 	else {
 		/* same as before */
 		/* still working code! (ton) */
- 		zsamp= (int) rz;
+ 		zsamp= (long) rz;
 	}
 
 	/* NO schadow when sampled at 'eternal' distance */
@


1.2
log
@update to blender 2.42
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_render_intern_source_shadbuf_c,v 1.1 2005/11/24 22:22:57 steven Exp $
--- source/blender/render/intern/source/shadbuf.c.orig	Sun May 14 12:13:58 2006
+++ source/blender/render/intern/source/shadbuf.c	Fri Jul 21 16:51:11 2006
@@@@ -368,7 +368,7 @@@@ static float readshadowbuf(ShadBuf *shb,
d13 1
a13 1
@@@@ -394,7 +394,7 @@@@ static float readshadowbuf(ShadBuf *shb,
d22 1
a22 1
@@@@ -403,7 +403,7 @@@@ static float readshadowbuf(ShadBuf *shb,
d31 1
a31 1
@@@@ -412,7 +412,7 @@@@ static float readshadowbuf(ShadBuf *shb,
d33 2
a34 2
 		/* got warning on this from DEC alpha (64 bits).... */
 		/* but it's working code! (ton) */
d39 2
a40 2
 	/* if(zsamp >= 0x7FFFFE00) return 1.0; */	/* no shaduw when sampling at eternal distance */
@@@@ -540,7 +540,8 @@@@ static float readshadowbuf_halo(ShadBuf 
d50 1
a50 1
@@@@ -566,7 +567,7 @@@@ static float readshadowbuf_halo(ShadBuf 
d59 1
a59 1
@@@@ -575,7 +576,7 @@@@ static float readshadowbuf_halo(ShadBuf 
d68 1
a68 1
@@@@ -584,7 +585,7 @@@@ static float readshadowbuf_halo(ShadBuf 
@


1.1
log
@update to 2.37a; native build

help and ok naddy@@, "looks good" aanriot@@
@
text
@d1 4
a4 4
$OpenBSD$
--- source/blender/render/intern/source/shadbuf.c.orig	Mon Nov 21 22:36:42 2005
+++ source/blender/render/intern/source/shadbuf.c	Mon Nov 21 22:38:40 2005
@@@@ -375,7 +375,7 @@@@ static float readshadowbuf(struct ShadBu
d13 1
a13 1
@@@@ -401,7 +401,7 @@@@ static float readshadowbuf(struct ShadBu
d22 1
a22 1
@@@@ -410,7 +410,7 @@@@ static float readshadowbuf(struct ShadBu
d31 1
a31 1
@@@@ -419,7 +419,7 @@@@ static float readshadowbuf(struct ShadBu
d40 1
a40 1
@@@@ -540,7 +540,8 @@@@ static float readshadowbuf_halo(struct S
d50 1
a50 1
@@@@ -566,7 +567,7 @@@@ static float readshadowbuf_halo(struct S
d59 1
a59 1
@@@@ -575,7 +576,7 @@@@ static float readshadowbuf_halo(struct S
d68 1
a68 1
@@@@ -584,7 +585,7 @@@@ static float readshadowbuf_halo(struct S
@

