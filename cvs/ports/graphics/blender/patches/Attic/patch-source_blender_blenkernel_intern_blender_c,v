head	1.11;
access;
symbols
	OPENBSD_5_5:1.9.0.4
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.7.0.2
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.10
	OPENBSD_5_0:1.5.0.8
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.6
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.10
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.8
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.6
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.4
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.4
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.1.0.2
	OPENBSD_3_9_BASE:1.1;
locks; strict;
comment	@# @;


1.11
date	2014.07.03.14.41.48;	author pascal;	state dead;
branches;
next	1.10;
commitid	FNg5RBnCCCFoe4Qt;

1.10
date	2014.03.24.21.16.15;	author pascal;	state Exp;
branches;
next	1.9;

1.9
date	2013.05.18.22.01.28;	author pascal;	state Exp;
branches;
next	1.8;

1.8
date	2012.10.31.17.45.55;	author pascal;	state Exp;
branches;
next	1.7;

1.7
date	2012.05.07.15.45.42;	author pascal;	state Exp;
branches;
next	1.6;

1.6
date	2012.02.26.20.37.26;	author pascal;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.25.22.41.25;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2007.05.25.12.19.14;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.07.26.06.45.27;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.06.06.12.36.49;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2005.11.24.22.22.57;	author steven;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Update to blender 2.71.
@
text
@$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.10 2014/03/24 21:16:15 pascal Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Wed Mar 19 23:05:25 2014
+++ source/blender/blenkernel/intern/blender.c	Thu Mar 20 22:28:32 2014
@@@@ -803,7 +803,7 @@@@ int BKE_undo_save_file(const char *filename)
 {
 	UndoElem *uel;
 	MemFileChunk *chunk;
-	const int flag = O_BINARY + O_WRONLY + O_CREAT + O_TRUNC + O_EXCL;
+	const int flag = O_BINARY | O_WRONLY | O_CREAT | O_TRUNC | O_EXCL;
 	int file;
 
 	if ((U.uiflag & USER_GLOBALUNDO) == 0) {
@


1.10
log
@Update to latest version, blender 2.70.  Switch to gcc 4.8.
@
text
@d1 1
a1 1
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.9 2013/05/18 22:01:28 pascal Exp $
@


1.9
log
@Update to blender 2.67.
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.8 2012/10/31 17:45:55 pascal Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Tue Mar 19 15:25:12 2013
+++ source/blender/blenkernel/intern/blender.c	Wed May  8 19:55:50 2013
@@@@ -820,7 +820,7 @@@@ int BKE_undo_save_file(const char *filename)
@


1.8
log
@Update to blender 2.64a.
@
text
@d1 5
a5 4
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.7 2012/05/07 15:45:42 pascal Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Tue Oct  9 20:39:05 2012
+++ source/blender/blenkernel/intern/blender.c	Fri Oct 12 18:02:44 2012
@@@@ -728,7 +728,7 @@@@ void BKE_undo_save_quit(void)
a7 1
 	char str[FILE_MAX];
@


1.7
log
@Update to blender 2.63.  Get rid of ffmpeg flavour since it doesn't compile on
mips64el anyway, and enable ffmpeg unconditionally.
@
text
@d1 10
a10 6
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.6 2012/02/26 20:37:26 pascal Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Thu Apr 26 22:49:26 2012
+++ source/blender/blenkernel/intern/blender.c	Mon Apr 30 23:05:07 2012
@@@@ -722,7 +722,7 @@@@ void BKE_undo_save_quit(void)
 		
 	BLI_make_file_string("/", str, BLI_temporary_dir(), "quit.blend");
d12 1
a12 5
-	file = BLI_open(str,O_BINARY+O_WRONLY+O_CREAT+O_TRUNC, 0666);
+	file = BLI_open(str,O_BINARY|O_WRONLY|O_CREAT|O_TRUNC, 0666);
 	if (file == -1) {
 		//XXX error("Unable to save %s, check you have permissions", str);
 		return;
@


1.6
log
@Update blender to 2.62.

tested by armani@@

minor tweaks and ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD$
--- source/blender/blenkernel/intern/blender.c.orig	Tue Dec 13 20:49:12 2011
+++ source/blender/blenkernel/intern/blender.c	Thu Dec 15 11:37:07 2011
@@@@ -717,7 +717,7 @@@@ void BKE_undo_save_quit(void)
d8 3
a10 3
-	file = open(str,O_BINARY+O_WRONLY+O_CREAT+O_TRUNC, 0666);
+	file = open(str,O_WRONLY|O_CREAT|O_TRUNC, 0666);
 	if(file == -1) {
@


1.5
log
@update to 2.49b (done at p2k9)
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.3 2006/07/26 06:45:27 steven Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Tue Sep  1 17:21:17 2009
+++ source/blender/blenkernel/intern/blender.c	Sat Oct 10 20:40:48 2009
@@@@ -769,7 +769,7 @@@@ void BKE_undo_save_quit(void)
d6 1
a6 1
 	BLI_make_file_string("/", str, btempdir, "quit.blend");
d11 1
a11 1
 		error("Unable to save %s, check you have permissions", str);
@


1.4
log
@update to 2.44
@
text
@d2 3
a4 5
--- source/blender/blenkernel/intern/blender.c.orig	Mon Apr  2 18:06:02 2007
+++ source/blender/blenkernel/intern/blender.c	Sun May 20 14:53:09 2007
@@@@ -712,9 +712,10 @@@@ void BKE_undo_save_quit(void)
 	/* no undo state to save */
 	if(undobase.first==undobase.last) return;
d6 1
a6 2
+	strlcpy(U.tempdir, BLI_gethome(), sizeof(U.tempdir));
 	BLI_make_file_string("/", str, U.tempdir, "quit.blend");
d11 1
a11 1
 		printf("Unable to save %s\n", str);
@


1.3
log
@update to blender 2.42
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.2 2006/06/06 12:36:49 steven Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Tue Jul  4 12:19:26 2006
+++ source/blender/blenkernel/intern/blender.c	Fri Jul 21 16:51:10 2006
@@@@ -681,9 +681,10 @@@@ void BKE_undo_save_quit(void)
@


1.2
log
@update to blender 2.41

from Matthias Kilian <kili at outback.escape.de>
@
text
@d1 4
a4 4
$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.1 2005/11/24 22:22:57 steven Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Mon Dec  5 16:46:25 2005
+++ source/blender/blenkernel/intern/blender.c	Tue Jan  3 16:03:52 2006
@@@@ -683,9 +683,10 @@@@ void BKE_undo_save_quit(void)
@


1.1
log
@update to 2.37a; native build

help and ok naddy@@, "looks good" aanriot@@
@
text
@d1 4
a4 4
$OpenBSD$
--- source/blender/blenkernel/intern/blender.c.orig	Mon May 30 15:20:13 2005
+++ source/blender/blenkernel/intern/blender.c	Thu Nov 24 10:54:56 2005
@@@@ -696,9 +696,10 @@@@ void BKE_undo_save_quit(void)
@

