head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.0.12
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.8
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.6
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.09.18.20.07.09;	author landry;	state dead;
branches;
next	1.1;
commitid	N263cXg5vtZIzI4i;

1.1
date	2013.07.15.17.09.16;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to mapnik 3.0.5.

Switch to use gcc 4.9 since it now requires c++11. Thx ajacoutot for
the build-testing - note that it requires more than 4gb of memory to
build, and might not build on i386.
@
text
@$OpenBSD: patch-tests_cpp_tests_conversions_test_cpp,v 1.1 2013/07/15 17:09:16 landry Exp $
Fix build failure on 32bits
--- tests/cpp_tests/conversions_test.cpp.orig	Tue Jun  4 03:35:27 2013
+++ tests/cpp_tests/conversions_test.cpp	Sun Jul 14 22:07:07 2013
@@@@ -166,31 +166,31 @@@@ int main(int argc, char** argv)
         BOOST_TEST_EQ( out,  "1e+09" );
         out.clear();
 
-        to_string(out, double(10000000000));
+        to_string(out, 10000000000.0);
         BOOST_TEST_EQ( out,  "1e+10" );
         out.clear();
 
-        to_string(out, double(100000000000));
+        to_string(out, 100000000000.0);
         BOOST_TEST_EQ( out,  "1e+11" );
         out.clear();
 
-        to_string(out, double(1000000000000));
+        to_string(out, 100000000000.0);
         BOOST_TEST_EQ( out,  "1e+12" );
         out.clear();
 
-        to_string(out, double(10000000000000));
+        to_string(out, 10000000000000.0);
         BOOST_TEST_EQ( out,  "1e+13" );
         out.clear();
 
-        to_string(out, double(100000000000000));
+        to_string(out, 100000000000000.0);
         BOOST_TEST_EQ( out,  "1e+14" );
         out.clear();
 
-        to_string(out, double(1000000000000005));
+        to_string(out, 1000000000000005.0);
         BOOST_TEST_EQ( out,  "1e+15" );
         out.clear();
 
-        to_string(out, double(-1000000000000000));
+        to_string(out, -1000000000000000.0);
         BOOST_TEST_EQ( out,  "-1e+15" );
         out.clear();
 
@@@@ -210,7 +210,7 @@@@ int main(int argc, char** argv)
         BOOST_TEST_EQ( out,  "67.35" );
         out.clear();
 
-        to_string(out, double(1234000000000000));
+        to_string(out, 1234000000000000.0);
         BOOST_TEST_EQ( out,  "1.234e+15" );
         out.clear();
 
@@@@ -258,9 +258,11 @@@@ int main(int argc, char** argv)
         BOOST_TEST_EQ( out, "-2" );
         out.clear();
 
+/*
         to_string(out,mapnik::value_integer(9223372036854775807));
         BOOST_TEST_EQ( out, "9223372036854775807" );
         out.clear();
+*/
 #else
   #ifdef _MSC_VER
     #pragma NOTE("BIGINT not defined so skipping large number conversion tests")
@


1.1
log
@Fix build on 32-bits archs. One of the python tests still does an abort
trap, but at least this packages now, tested on i386 & powerpc. To be
refined...
@
text
@d1 1
a1 1
$OpenBSD$
@

