head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2013.03.31.19.41.23;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2013.03.08.06.58.38;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to colord-0.1.32.
@
text
@$OpenBSD: patch-contrib_session-helper_cd-main_c,v 1.1 2013/03/08 06:58:38 ajacoutot Exp $

From e17d3f90a12e6ac002a3b0adb819fe0a88ff86f3 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Tue, 5 Mar 2013 10:29:33 +0000
Subject: [PATCH] Fix build on OpenBSD

--- contrib/session-helper/cd-main.c.orig	Tue Mar  5 08:39:52 2013
+++ contrib/session-helper/cd-main.c	Tue Mar  5 08:40:18 2013
@@@@ -1123,7 +1123,7 @@@@ cd_main_generate_profile (CdMainPrivate *priv, GError 
 {
 	gboolean ret;
 	gchar *command;
-	gchar *stderr = NULL;
+	gchar *stderr_data = NULL;
 	gint exit_status = 0;
 	gchar *cmd_debug = NULL;
 	GPtrArray *array = NULL;
@@@@ -1159,7 +1159,7 @@@@ cd_main_generate_profile (CdMainPrivate *priv, GError 
 			    0,
 			    NULL, NULL,
 			    NULL,
-			    &stderr,
+			    &stderr_data,
 			    &exit_status,
 			    error);
 	if (!ret)
@@@@ -1169,14 +1169,14 @@@@ cd_main_generate_profile (CdMainPrivate *priv, GError 
 		g_set_error (error,
 			     CD_SESSION_ERROR,
 			     CD_SESSION_ERROR_FAILED_TO_GENERATE_PROFILE,
-			     "colprof failed: %s", stderr);
+			     "colprof failed: %s", stderr_data);
 		goto out;
 	}
 out:
 	if (array != NULL)
 		g_ptr_array_unref (array);
 	g_free (command);
-	g_free (stderr);
+	g_free (stderr_data);
 	g_free (cmd_debug);
 	return ret;
 }
@


1.1
log
@Update to colord-0.1.30.
@
text
@d1 1
a1 1
$OpenBSD$
@

