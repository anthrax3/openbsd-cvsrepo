head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.8
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.4
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.6
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_4_1:1.3.0.8
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.6
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.4
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.1.0.2
	OPENBSD_3_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2014.10.29.16.45.09;	author espie;	state Exp;
branches;
next	1.4;
commitid	BnUv7vNiltKHEjOJ;

1.4
date	2007.05.29.21.16.03;	author naddy;	state dead;
branches;
next	1.3;

1.3
date	2005.06.23.20.23.06;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.12.17.28.04;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2004.09.21.18.46.04;	author sturm;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.05.23.20.23.54;	author robert;	state dead;
branches;
next	;


desc
@@


1.5
log
@fix problems with Nikon D7100 pictures, they don't create correct exif
information (multiple APP1 chunks). xv reads them all, but libjpeg frowns
about writing multiple APP1.

So,
- ignore subsequent chunks (like exiv2 does)
- add a small framework to report error messages from libjpeg
(might be adaptable to other gfx formats).

okay sthen@@
@
text
@$OpenBSD$
--- xv.h.orig	Tue Oct 28 14:44:22 2014
+++ xv.h	Tue Oct 28 14:45:15 2014
@@@@ -1689,7 +1689,8 @@@@ char *GetDirFullName       PARM((void));
 void SetDirSaveMode        PARM((int, int));
 int  Globify               PARM((char *));
 FILE *OpenOutFile          PARM((const char *));
-int  CloseOutFile          PARM((FILE *, const char *, int));
+int  CloseOutFileWhy          PARM((FILE *, const char *, int, const char *));
+#define CloseOutFile(fp, name, fail) CloseOutFileWhy((fp), (name), (fail), NULL)
 
 byte *GenSavePic           PARM((int*, int*,int*, int*, int*,
 				 byte**, byte**, byte**));
@


1.4
log
@update to jumbo patches 20070520
@
text
@d1 10
a10 5
$OpenBSD: patch-xv_h,v 1.3 2005/06/23 20:23:06 sturm Exp $
--- xv.h.orig	Thu Jun 23 21:59:31 2005
+++ xv.h	Thu Jun 23 21:59:32 2005
@@@@ -345,7 +345,7 @@@@
 #endif
d12 2
a13 6
 #ifndef S_IRWUSR
-#  define S_IRWUSR	(S_IRUSR|__S_IWRITE)
+#  define S_IRWUSR	(S_IRUSR|S_IWUSR)
 #endif
 
 #ifndef MAXPATHLEN
@


1.3
log
@update jumbo patches to version 20050501

from maintainer rohee@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@SECURITY:
Fixes for multiple vulnerabilities.  Switch to centralized jumbo patch.
From rohee@@
@
text
@d1 5
a5 10
$OpenBSD: patch-xv_h,v 1.1 2004/09/21 18:46:04 sturm Exp $
--- xv.h.orig	Tue Sep 21 06:49:20 2004
+++ xv.h	Tue Sep 21 06:50:28 2004
@@@@ -159,7 +159,8 @@@@
      !defined(bsd43)                     && \
      !defined(aux)                       && \
      !defined(__bsdi__)                  && \
-     !defined(sequent)
+     !defined(sequent)                   && \
+     !defined(__OpenBSD__)
d7 6
a12 2
 #  if defined(hp300) || defined(hp800) || defined(NeXT)
 #   include <sys/malloc.h>                /* it's in 'sys' on HPs and NeXT */
@


1.1
log
@Add some sanity checking in XV. Patches from Marcus Meissner
adapted by rohee@@ by way of millert@@

while here, adapt patches to regular naming scheme
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@SECURITY:
Fixes for multiple vulnerabilities. Switch to centralized jumbo patch.
bump PKGNAME
http://www.vuxml.org/openbsd/e9b45990-abff-11d9-a42d-080020f8e4df.html

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-xv_h,v 1.1 2004/09/21 18:46:04 sturm Exp $
@


