head	1.11;
access;
symbols
	OPENBSD_6_1:1.9.0.2
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.8.0.2
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.12
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.8
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.6
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.4
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	edd_20120709:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2017.07.16.19.18.56;	author espie;	state Exp;
branches;
next	1.10;
commitid	tt0GhWK5c4uf9ILG;

1.10
date	2017.04.10.11.46.21;	author sthen;	state Exp;
branches;
next	1.9;
commitid	BLsh88fJB8thZTwY;

1.9
date	2017.03.04.16.38.16;	author jca;	state Exp;
branches;
next	1.8;
commitid	vPFmiUh7Qfm6920o;

1.8
date	2016.04.04.22.57.45;	author naddy;	state Exp;
branches;
next	1.7;
commitid	FILF1LJRoZlYu0JV;

1.7
date	2015.10.08.12.02.03;	author jasper;	state Exp;
branches;
next	1.6;
commitid	Fd81pQbB9Yvd8TB7;

1.6
date	2013.03.11.11.10.53;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2012.09.19.08.15.09;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.08.18.18.57.38;	author edd;	state Exp;
branches;
next	1.3;

1.3
date	2012.07.12.21.58.20;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2012.07.09.16.21.32;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.07.09.15.56.34;	author edd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.07.09.15.56.34;	author edd;	state Exp;
branches;
next	;


desc
@@


1.11
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.10 2017/04/10 11:46:21 sthen Exp $

COMMENT =		extensible drawing editor

V =			7.1.2
SUBST_VARS +=		V
DISTNAME =		ipe-${V}-src
PKGNAME =		ipe-${V}
REVISION =		4

# their libraries would be installed as libxxx.so.${V}, overide this.
SHLIB_VERSION =	0.0

SHARED_LIBS +=		ipe		${SHLIB_VERSION}
SHARED_LIBS +=		ipecairo	${SHLIB_VERSION}
SHARED_LIBS +=		ipecanvas	${SHLIB_VERSION}
SHARED_LIBS +=		ipelua		${SHLIB_VERSION}
SHARED_LIBS +=		ipeui		${SHLIB_VERSION}

CATEGORIES =		graphics math
HOMEPAGE =		http://ipe7.sourceforge.net/
MAINTAINER =		Edd Barrett <edd@@openbsd.org>

# GPLv3+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += GL QtGui X11 Xrender c cairo expat fontconfig freetype
WANTLIB += glib-2.0 gobject-2.0 ${MODLUA_WANTLIB} m pixman-1 png
WANTLIB += pthread pthread-stubs ${COMPILER_LIBCXX} xcb xcb-render xcb-shm
WANTLIB += z

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=ipe7/}

# Dependencies
MODULES =		lang/lua \
			x11/qt4 \
			devel/gettext
LIB_DEPENDS =		${MODLUA_LIB_DEPENDS} \
			${MODQT4_LIB_DEPENDS}
RUN_DEPENDS =		print/texlive/base \
			x11/xvkbd

MAKE_FLAGS +=		CXX="${CXX}" \
			IPEPREFIX=${PREFIX} \
			IPE_USE_ICONV=-DIPE_USE_ICONV \
			ICONV_CFLAGS=-I${LOCALBASE}/include \
			ICONV_LIBS="-L${LOCALBASE}/lib -liconv" \
			SHLIB_VERSION=${SHLIB_VERSION}
MAKE_ENV +=		PKG_CONFIG_PATH=${LOCALBASE}/lib/qt4/pkgconfig
FAKE_FLAGS +=		INSTALL_ROOT=${WRKINST} \
			SHLIB_VERSION=${SHLIB_VERSION} \
			IPEMANDIR=${PREFIX}/man/man1 \
			IPEDOCDIR=${PREFIX}/share/doc/ipe

USE_GMAKE =		Yes
NO_TEST =		Yes

WRKDIST = ${WRKDIR}/${PKGNAME}
WRKSRC = ${WRKDIST}/src

post-install:
	sed -i "s,/usr/share/,${LOCALBASE}/share/," \
		${WRKDIST}/fontmaps/texlive-fontmap.xml
	${INSTALL_DATA} -c ${WRKDIST}/fontmaps/texlive-fontmap.xml \
		${PREFIX}/share/ipe/7.1.2/fontmap.xml

.include <bsd.port.mk>
@


1.10
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2017/03/04 16:38:16 jca Exp $
d29 1
a29 1
WANTLIB += pthread pthread-stubs ${LIBCXX} xcb xcb-render xcb-shm
@


1.9
log
@Honour CXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/04/04 22:57:45 naddy Exp $
d29 1
a29 1
WANTLIB += pthread pthread-stubs stdc++ xcb xcb-render xcb-shm
@


1.8
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/10/08 12:02:03 jasper Exp $
d43 2
a44 1
MAKE_FLAGS +=		IPEPREFIX=${PREFIX} \
@


1.7
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/11 11:10:53 espie Exp $
d9 1
a9 1
REVISION =		3
@


1.6
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/09/19 08:15:09 jasper Exp $
d61 1
a61 1
	perl -pi -e "s,/usr/share/,${LOCALBASE}/share/," \
@


1.5
log
@sync after recent lua.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/08/18 18:57:38 edd Exp $
a25 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d55 1
a55 1
NO_REGRESS =		Yes
@


1.4
log
@Build with big -fPIC.

From Brad, thanks.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/07/12 21:58:20 jasper Exp $
d9 1
a9 1
REVISION =		2
@


1.3
log
@fixup wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/07/09 16:21:32 ajacoutot Exp $
d9 1
a9 1
REVISION =		1
@


1.2
log
@Use the devel/gettext MODULE.

ok edd@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/07/09 15:56:34 edd Exp $
d9 1
a9 1
REVISION =		0
d31 1
a31 1
WANTLIB += glib-2.0 gobject-2.0 lua m pixman-1 png
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.61 2012/03/29 13:41:58 sthen Exp $
d7 1
a7 1
DISTNAME =		ipe-7.1.2-src
d9 1
d31 1
a31 1
WANTLIB += glib-2.0 gobject-2.0 iconv intl lua m pixman-1 png
d39 2
a40 1
			x11/qt4
d42 1
a42 2
			${MODQT4_LIB_DEPENDS} \
			converters/libiconv
@


1.1.1.1
log
@import the Ipe extensible drawing editor.
OK sebastia@@

@
text
@@
