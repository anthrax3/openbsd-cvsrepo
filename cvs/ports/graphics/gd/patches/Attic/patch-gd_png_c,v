head	1.2;
access;
symbols
	OPENBSD_4_0:1.1.0.4
	OPENBSD_4_1:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2007.07.02.10.46.04;	author steven;	state dead;
branches;
next	1.1;

1.1
date	2007.05.31.18.32.06;	author rui;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2007.06.06.06.07.18;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2007.06.06.06.07.43;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 2.0.35

ok simon@@
@
text
@$OpenBSD: patch-gd_png_c,v 1.1 2007/05/31 18:32:06 rui Exp $
--- gd_png.c.orig	Thu May 31 16:03:54 2007
+++ gd_png.c	Thu May 31 16:05:09 2007
@@@@ -81,7 +81,11 @@@@ gdPngErrorHandler (png_structp png_ptr, png_const_char
 static void
 gdPngReadData (png_structp png_ptr, png_bytep data, png_size_t length)
 {
-  gdGetBuf (data, length, (gdIOCtx *) png_get_io_ptr (png_ptr));
+  int check;
+  check = gdGetBuf (data, length, (gdIOCtx *) png_get_io_ptr (png_ptr));
+  if (check != length) {
+    png_error(png_ptr, "Read Error: truncated data");
+  }
 }
 
 static void
@


1.1
log
@roll in a distribution patch which fixes:

CVE-2007-2756 gdPngReadData function allows user-assisted attackers to cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2756

ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.4.1
log
@MFC:
roll in a distribution patch which fixes:

CVE-2007-2756 gdPngReadData function allows user-assisted attackers to
cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2756
@
text
@d1 4
a4 4
$OpenBSD: patch-gd_png_c,v 1.1 2007/05/31 18:32:06 rui Exp $
--- gd_png.c.orig	Sat Feb  3 02:41:00 2007
+++ gd_png.c	Wed Jun  6 08:03:44 2007
@@@@ -81,7 +81,11 @@@@ gdPngErrorHandler (png_structp png_ptr, 
@


1.1.2.1
log
@MFC:
roll in a distribution patch which fixes:

CVE-2007-2756 gdPngReadData function allows user-assisted attackers to
cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2756
@
text
@d1 4
a4 4
$OpenBSD: patch-gd_png_c,v 1.1 2007/05/31 18:32:06 rui Exp $
--- gd_png.c.orig	Sat Feb  3 02:41:00 2007
+++ gd_png.c	Wed Jun  6 08:05:11 2007
@@@@ -81,7 +81,11 @@@@ gdPngErrorHandler (png_structp png_ptr, 
@

