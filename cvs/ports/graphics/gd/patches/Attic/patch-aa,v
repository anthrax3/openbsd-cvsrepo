head	1.12;
access;
symbols
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.1.1.1.0.2
	OPENBSD_2_5_BASE:1.1.1.1
	brad-1999-02-21:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2000.06.25.02.45.33;	author brad;	state dead;
branches;
next	1.11;

1.11
date	2000.06.22.09.53.55;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2000.06.22.09.08.17;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2000.06.22.06.18.39;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2000.06.22.03.48.45;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2000.06.12.17.25.49;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.15.19.12.48;	author brad;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2000.03.04.23.58.55;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.11.26.16.50.03;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.11.16.08.03.36;	author kevlo;	state Exp;
branches;
next	1.2;

1.2
date	99.07.26.00.36.34;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	99.02.21.23.28.05;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.02.21.23.28.05;	author brad;	state Exp;
branches;
next	;

1.6.2.1
date	2000.09.15.04.53.12;	author marc;	state dead;
branches;
next	;


desc
@@


1.12
log
@- use --mode option with libtool
- use better names for the patches
@
text
@--- Makefile.orig	Sat Jun  3 15:26:12 2000
+++ Makefile	Thu Jun 22 05:26:45 2000
@@@@ -51,13 +51,13 @@@@
 LIBDIRS=-L. -L/usr/local/lib -L/usr/lib/X11 -L/usr/X11R6/lib
 
 #Location where libgd.a should be installed by "make install".
-INSTALL_LIB=/usr/local/lib
+INSTALL_LIB=$(prefix)/lib
 
 #Location where .h files should be installed by "make install".
-INSTALL_INCLUDE=/usr/local/include
+INSTALL_INCLUDE=$(prefix)/include
 
 #Location where useful non-test programs should be installed by "make install".
-INSTALL_BIN=/usr/local/bin
+INSTALL_BIN=$(prefix)/bin
 
 #
 #
@@@@ -78,68 +78,68 @@@@
 all: libgd.a $(PROGRAMS)
 
 install: libgd.a $(BIN_PROGRAMS)
-	sh ./install-item 644 libgd.a $(INSTALL_LIB)/libgd.a
-	sh ./install-item 755 pngtogd $(INSTALL_BIN)/pngtogd
-	sh ./install-item 755 pngtogd2 $(INSTALL_BIN)/pngtogd2
-	sh ./install-item 755 gdtopng $(INSTALL_BIN)/gdtopng
-	sh ./install-item 755 gd2topng $(INSTALL_BIN)/gd2topng
-	sh ./install-item 755 gd2copypal $(INSTALL_BIN)/gd2copypal
-	sh ./install-item 755 gdparttopng $(INSTALL_BIN)/gdparttopng
-	sh ./install-item 755 webpng $(INSTALL_BIN)/webpng
-	sh ./install-item 755 bdftogd $(INSTALL_BIN)/bdftogd
-	sh ./install-item 644 gd.h $(INSTALL_INCLUDE)/gd.h
-	sh ./install-item 644 gdcache.h $(INSTALL_INCLUDE)/gdcache.h
-	sh ./install-item 644 gd_io.h $(INSTALL_INCLUDE)/gd_io.h
-	sh ./install-item 644 gdfontg.h $(INSTALL_INCLUDE)/gdfontg.h
-	sh ./install-item 644 gdfontl.h $(INSTALL_INCLUDE)/gdfontl.h
-	sh ./install-item 644 gdfontmb.h $(INSTALL_INCLUDE)/gdfontmb.h
-	sh ./install-item 644 gdfonts.h $(INSTALL_INCLUDE)/gdfonts.h
-	sh ./install-item 644 gdfontt.h $(INSTALL_INCLUDE)/gdfontt.h
-
-gddemo: gddemo.o libgd.a
-	$(CC) gddemo.o -o gddemo	$(LIBDIRS) $(LIBS)
-
-pngtogd: pngtogd.o libgd.a
-	$(CC) pngtogd.o -o pngtogd	$(LIBDIRS) $(LIBS) 
-
-webpng: webpng.o libgd.a
-	$(CC) webpng.o -o webpng	$(LIBDIRS) $(LIBS)
-
-pngtogd2: pngtogd2.o libgd.a
-	$(CC) pngtogd2.o -o pngtogd2	$(LIBDIRS) $(LIBS)
-
-gdtopng: gdtopng.o libgd.a
-	$(CC) gdtopng.o -o gdtopng	$(LIBDIRS) $(LIBS)
-
-gd2topng: gd2topng.o libgd.a
-	$(CC) gd2topng.o -o gd2topng	$(LIBDIRS) $(LIBS)
-
-gd2copypal: gd2copypal.o libgd.a
-	$(CC) gd2copypal.o -o gd2copypal	$(LIBDIRS) $(LIBS)
-
-gdparttopng: gdparttopng.o libgd.a
-	$(CC) gdparttopng.o -o gdparttopng	$(LIBDIRS) $(LIBS)
-
-gdtest: gdtest.o libgd.a
-	$(CC) gdtest.o -o gdtest	$(LIBDIRS) $(LIBS)
-
-gd2time: gd2time.o libgd.a
-	$(CC) gd2time.o -o gd2time	$(LIBDIRS) $(LIBS)
-
-gdtestttf: gdtestttf.o libgd.a
-	$(CC) gdtestttf.o -o gdtestttf	$(LIBDIRS) $(LIBS)
-
-libgd.a: gd.o gd_gd.o gd_gd2.o gd_io.o gd_io_dp.o gd_io_file.o gd_ss.o \
-	gd_io_ss.o gd_png.o gd_jpeg.o gdxpm.o gdfontt.o gdfonts.o gdfontmb.o gdfontl.o \
-	gdfontg.o gdtables.o gdttf.o gdcache.o gdkanji.o  wbmp.o gd_wbmp.o \
-	gd.h gdfontt.h gdfonts.h gdfontmb.h gdfontl.h gdfontg.h
-	rm -f libgd.a
-	$(AR) rc libgd.a gd.o gd_gd.o gd_gd2.o gd_io.o gd_io_dp.o \
-		gd_io_file.o gd_ss.o gd_io_ss.o gd_png.o gd_jpeg.o gdxpm.o \
-		gdfontt.o gdfonts.o gdfontmb.o gdfontl.o gdfontg.o \
-		gdtables.o gdttf.o gdcache.o gdkanji.o wbmp.o gd_wbmp.o
-	-ranlib libgd.a
+	libtool $(BSD_INSTALL_DATA) libgd.la $(DESTDIR)$(INSTALL_LIB)
+	libtool $(BSD_INSTALL_PROGRAM) pngtogd $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) pngtogd2 $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gdtopng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gd2topng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gd2copypal $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gdparttopng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) webpng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) bdftogd $(DESTDIR)$(INSTALL_BIN)
+	$(BSD_INSTALL_DATA) gd.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdcache.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gd_io.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontg.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontl.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontmb.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfonts.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontt.h $(DESTDIR)$(INSTALL_INCLUDE)
+
+gddemo: gddemo.lo libgd.a
+	libtool $(CC) gddemo.lo -o gddemo $(LIBDIRS) $(LIBS)
+
+pngtogd: pngtogd.lo libgd.a
+	libtool $(CC) pngtogd.lo -o pngtogd $(LIBDIRS) $(LIBS) 
+
+webpng: webpng.lo libgd.a
+	libtool $(CC) webpng.lo -o webpng $(LIBDIRS) $(LIBS)
+
+pngtogd2: pngtogd2.lo libgd.a
+	libtool $(CC) pngtogd2.lo -o pngtogd2 $(LIBDIRS) $(LIBS)
+
+gdtopng: gdtopng.lo libgd.a
+	libtool $(CC) gdtopng.lo -o gdtopng $(LIBDIRS) $(LIBS)
+
+gd2topng: gd2topng.lo libgd.a
+	libtool $(CC) gd2topng.lo -o gd2topng $(LIBDIRS) $(LIBS)
+
+gd2copypal: gd2copypal.lo libgd.a
+	libtool $(CC) gd2copypal.lo -o gd2copypal $(LIBDIRS) $(LIBS)
+
+gdparttopng: gdparttopng.lo libgd.a
+	libtool $(CC) gdparttopng.lo -o gdparttopng $(LIBDIRS) $(LIBS)
+
+gdtest: gdtest.lo libgd.a
+	libtool $(CC) gdtest.lo -o gdtest $(LIBDIRS) $(LIBS)
+
+gd2time: gd2time.lo libgd.a
+	libtool $(CC) gd2time.lo -o gd2time $(LIBDIRS) $(LIBS)
+
+gdtestttf: gdtestttf.lo libgd.a
+	libtool $(CC) gdtestttf.lo -o gdtestttf $(LIBDIRS) $(LIBS)
+
+libgd.a: gd.lo gd_gd.lo gd_gd2.lo gd_io.lo gd_io_dp.lo gd_io_file.lo gd_ss.lo \
+	gd_io_ss.lo gd_png.lo gd_jpeg.lo gdxpm.lo gdfontt.lo gdfonts.lo \
+	gdfontmb.lo gdfontl.lo gdfontg.lo gdtables.lo gdttf.lo gdcache.lo \
+	gdkanji.lo wbmp.lo gd_wbmp.lo
+	libtool $(CC) $(CFLAGS) -o libgd.la $(.ALLSRC) \
+	 -version-info 18:3:0 -rpath $(INSTALL_LIB)
 
 clean:
-	rm -f *.o *.a ${PROGRAMS} test/gdtest.jpg test/gdtest.wbmp
+	rm -f *.o *.lo ${PROGRAMS} libgd.a test/gdtest.jpg test/gdtest.wbmp
 
+.SUFFIXES: .c .lo
+
+.c.lo:
+	libtool $(CC) $(CFLAGS) -c $(.IMPSRC)
@


1.11
log
@fixup gd's Makefile
@
text
@@


1.10
log
@make gd's Makefile make use of DESTDIR
@
text
@d2 1
a2 1
+++ Makefile	Thu Jun 22 04:52:01 2000
d41 2
a42 19
+	libtool $(BSD_INSTALL_DATA) libgd.la $(DESTDIR)$(INSTALL_LIB)
+	libtool $(BSD_INSTALL_PROGRAM) pngtogd $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) pngtogd2 $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gdtopng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gd2topng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gd2copypal $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gdparttopng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) webpng $(DESTDIR)$(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) bdftogd $(DESTDIR)$(INSTALL_BIN)
+	$(BSD_INSTALL_DATA) gd.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdcache.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gd_io.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontg.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontl.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontmb.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfonts.h $(DESTDIR)$(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontt.h $(DESTDIR)$(INSTALL_INCLUDE)
 
 gddemo: gddemo.o libgd.a
d44 2
a45 3
+	libtool $(CC) gddemo.o -o gddemo $(LIBDIRS) $(LIBS)
 
 pngtogd: pngtogd.o libgd.a
d47 2
a48 3
+	libtool $(CC) pngtogd.o -o pngtogd $(LIBDIRS) $(LIBS) 
 
 webpng: webpng.o libgd.a
d50 2
a51 3
+	libtool $(CC) webpng.o -o webpng $(LIBDIRS) $(LIBS)
 
 pngtogd2: pngtogd2.o libgd.a
d53 2
a54 3
+	libtool $(CC) pngtogd2.o -o pngtogd2 $(LIBDIRS) $(LIBS)
 
 gdtopng: gdtopng.o libgd.a
d56 2
a57 3
+	libtool $(CC) gdtopng.o -o gdtopng $(LIBDIRS) $(LIBS)
 
 gd2topng: gd2topng.o libgd.a
d59 2
a60 3
+	libtool $(CC) gd2topng.o -o gd2topng $(LIBDIRS) $(LIBS)
 
 gd2copypal: gd2copypal.o libgd.a
d62 2
a63 3
+	libtool $(CC) gd2copypal.o -o gd2copypal $(LIBDIRS) $(LIBS)
 
 gdparttopng: gdparttopng.o libgd.a
d65 2
a66 3
+	libtool $(CC) gdparttopng.o -o gdparttopng $(LIBDIRS) $(LIBS)
 
 gdtest: gdtest.o libgd.a
d68 2
a69 3
+	libtool $(CC) gdtest.o -o gdtest $(LIBDIRS) $(LIBS)
 
 gd2time: gd2time.o libgd.a
d71 2
a72 3
+	libtool $(CC) gd2time.o -o gd2time $(LIBDIRS) $(LIBS)
 
 gdtestttf: gdtestttf.o libgd.a
d74 1
a74 2
+	libtool $(CC) gdtestttf.o -o gdtestttf $(LIBDIRS) $(LIBS)
 
d85 51
d140 1
a140 1
+	libtool $(CC) ${CFLAGS} -o libgd.la ${.ALLSRC} \
d145 1
a145 1
+	rm -f *.o ${PROGRAMS} libgd.a libgd.so.18.3 test/gdtest.jpg test/gdtest.wbmp
d150 1
a150 1
+	libtool ${CC} ${CFLAGS} -c ${.IMPSRC}
@


1.9
log
@switch to libtool for shared library creation
@
text
@d2 1
a2 1
+++ Makefile	Thu Jun 22 02:01:40 2000
d8 1
a8 1
+INSTALL_LIB=$(PREFIX)/lib
d12 1
a12 1
+INSTALL_INCLUDE=$(PREFIX)/include
d16 1
a16 1
+INSTALL_BIN=$(PREFIX)/bin
d41 17
a57 17
+	libtool $(BSD_INSTALL_DATA) libgd.la $(INSTALL_LIB)
+	libtool $(BSD_INSTALL_PROGRAM) pngtogd $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) pngtogd2 $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gdtopng $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gd2topng $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gd2copypal $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) gdparttopng $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) webpng $(INSTALL_BIN)
+	libtool $(BSD_INSTALL_PROGRAM) bdftogd $(INSTALL_BIN)
+	$(BSD_INSTALL_DATA) gd.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdcache.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gd_io.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontg.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontl.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontmb.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfonts.h $(INSTALL_INCLUDE)
+	$(BSD_INSTALL_DATA) gdfontt.h $(INSTALL_INCLUDE)
@


1.8
log
@add a no_x11 flavor build which can be very useful for people wanting to
use MRTG on system(s) without X11 being installed.
@
text
@d2 1
a2 1
+++ Makefile	Wed Jun 21 23:09:24 2000
d20 1
a20 7
@@@@ -74,27 +74,39 @@@@
 
 BIN_PROGRAMS=pngtogd pngtogd2 gdtopng gd2topng gd2copypal gdparttopng webpng
 TEST_PROGRAMS=gdtest gddemo gd2time gdtestttf
+VER=18.3
 
+.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:U} == YES
a21 3
+.else
+all: libgd.a libgd.so.${VER} $(PROGRAMS)
+.endif
a22 1
+.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:U} == YES
d41 9
a49 15
+.else
+install: libgd.a libgd.so.${VER} $(BIN_PROGRAMS)
+.endif
+	$(BSD_INSTALL_DATA) -m 644 libgd.a $(INSTALL_LIB)
+	@@if [ -f libgd.so.${VER} ]; then \
+	 $(BSD_INSTALL_DATA) -m 644 libgd.so.${VER} $(INSTALL_LIB); \
+	fi
+	$(BSD_INSTALL_PROGRAM) pngtogd $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) pngtogd2 $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) gdtopng $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) gd2topng $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) gd2copypal $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) gdparttopng $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) webpng $(INSTALL_BIN)
+	$(BSD_INSTALL_PROGRAM) bdftogd $(INSTALL_BIN)
d60 42
a101 2
 	$(CC) gddemo.o -o gddemo	$(LIBDIRS) $(LIBS)
@@@@ -131,15 +143,23 @@@@
d103 2
a104 2
 libgd.a: gd.o gd_gd.o gd_gd2.o gd_io.o gd_io_dp.o gd_io_file.o gd_ss.o \
 	gd_io_ss.o gd_png.o gd_jpeg.o gdxpm.o gdfontt.o gdfonts.o gdfontmb.o gdfontl.o \
d113 6
a118 11
+	gdfontg.o gdtables.o gdttf.o gdcache.o gdkanji.o wbmp.o gd_wbmp.o
+	rm -f ${.TARGET}
+	$(AR) rc ${.TARGET} ${.ALLSRC}
+	-ranlib ${.TARGET}
+
+libgd.so.${VER}: gd.so gd_gd.so gd_gd2.so gd_io.so gd_io_dp.so gd_io_file.so \
+	gd_ss.so gd_io_ss.so gd_png.so gd_jpeg.so gdxpm.so gdfontt.so gdfonts.so \
+	gdfontmb.so gdfontl.so gdfontg.so gdtables.so gdttf.so gdcache.so \
+	gdkanji.so wbmp.o gd_wbmp.so
+	rm -f ${.TARGET}
+	ld -Bshareable -Bforcearchive -o ${.TARGET} ${.ALLSRC}
d122 1
a122 1
+	rm -f *.o ${PROGRAMS} libgd.a libgd.so.${VER} test/gdtest.jpg test/gdtest.wbmp
d124 4
a127 5
+.SUFFIXES: .c .o .so
+.c.o:
+	${CC} ${CFLAGS} -c ${.IMPSRC} -o ${.TARGET}
+.c.so:
+	${CC} ${CFLAGS} -fpic -DPIC -c ${.IMPSRC} -o ${.TARGET}
@


1.7
log
@upgrade to gd 1.8.3
@
text
@d2 3
a4 46
+++ Makefile	Mon Jun 12 13:10:45 2000
@@@@ -11,10 +11,10 @@@@
 
 #If you don't have FreeType, libjpeg and/or Xpm installed, including the
 #header files, uncomment this (default).
-CFLAGS=-O
+#CFLAGS=-O
 #If you do have FreeType, libjpeg and/or Xpm fully installed, uncomment a
 #variation of this and comment out the line above. See also LIBS below.
-#CFLAGS=-O  -DHAVE_XPM -DHAVE_JPEG -DHAVE_LIBTTF
+CFLAGS+=-DHAVE_XPM -DHAVE_JPEG -DHAVE_LIBTTF
 
 #If you don't have FreeType and/or Xpm fully installed, uncomment this
 #(default).
@@@@ -23,7 +23,7 @@@@
 #Some systems are very picky about link order. They don't all agree
 #on the right order, either.
 
-LIBS=-lm -lgd -lpng -lz
+#LIBS=-lm -lgd -lpng -lz
 
 #If you do have FreeType, JPEG and/or Xpm fully installed, uncomment a 
 #variation of this and comment out the line above. Note that
@@@@ -33,14 +33,14 @@@@
 #Some systems are very picky about link order. They don't all agree
 #on the right order, either.
 
-#LIBS=-lm -lgd -lpng -lz -ljpeg -lttf -lXpm -lX11
+LIBS=-lm -lgd -lpng -lz -ljpeg -lttf -lXpm -lX11
 
 #Typical install locations for freetype, zlib, xpm, libjpeg and libpng header files.
 #If yours are somewhere else, change this. 
 #-I. is important to ensure that the version of gd you are installing
 #is used, and not an older release in your directory tree somewhere.
 
-INCLUDEDIRS=-I. -I/usr/local/include -I/usr/include/X11 -I/usr/X11R6/include/X11
+INCLUDEDIRS=-I. -I/usr/local/include -I/usr/X11R6/include -I/usr/X11R6/include/X11
 
 #Typical install locations for freetype, zlib, xpm and libpng libraries.
 #If yours are somewhere else, other than a standard location
@@@@ -48,16 +48,16 @@@@
 #-L. as this allows the gd library itself to be found.
 #Put -L. first so that old versions of the gd library elsewhere
 #on your system can't cause conflicts while building a new one.
-LIBDIRS=-L. -L/usr/local/lib -L/usr/lib/X11 -L/usr/X11R6/lib
+LIBDIRS=-L. -L/usr/local/lib -L/usr/X11R6/lib
@


1.6
log
@upgrade to gd 1.8.1
@
text
@d1 3
a3 3
--- Makefile.orig	Mon Mar 13 13:25:57 2000
+++ Makefile	Wed Mar 15 09:01:03 2000
@@@@ -15,23 +15,23 @@@@
d11 1
a11 1
-#CFLAGS=-O -DHAVE_XPM -DHAVE_JPEG -DHAVE_LIBTTF
d16 4
d25 4
a28 1
 #Xpm requires X11. See also CFLAGS above.
d34 5
a38 2
-INCLUDEDIRS=-I/usr/local/include -I/usr/include/X11 -I/usr/X11R6/include/X11
+INCLUDEDIRS=-I/usr/local/include -I/usr/X11R6/include -I/usr/X11R6/include/X11
d42 1
a42 1
@@@@ -39,16 +39,16 @@@@
d63 1
a63 1
@@@@ -65,27 +65,39 @@@@
d67 1
a67 1
+SOLIBGD=libgd.so.18.1
d72 1
a72 1
+all: libgd.a $(SOLIBGD) $(PROGRAMS)
d77 17
a93 17
-	$(INSTALL) -m 644 libgd.a $(INSTALL_LIB)/libgd.a
-	$(INSTALL) -m 755 pngtogd $(INSTALL_BIN)/pngtogd
-	$(INSTALL) -m 755 pngtogd2 $(INSTALL_BIN)/pngtogd2
-	$(INSTALL) -m 755 gdtopng $(INSTALL_BIN)/gdtopng
-	$(INSTALL) -m 755 gd2topng $(INSTALL_BIN)/gd2topng
-	$(INSTALL) -m 755 gd2copypal $(INSTALL_BIN)/gd2copypal
-	$(INSTALL) -m 755 gdparttopng $(INSTALL_BIN)/gdparttopng
-	$(INSTALL) -m 755 webpng $(INSTALL_BIN)/webpng
-	$(INSTALL) -m 755 bdftogd $(INSTALL_BIN)/bdftogd
-	$(INSTALL) -m 644 gd.h $(INSTALL_INCLUDE)/gd.h
-	$(INSTALL) -m 644 gdcache.h $(INSTALL_INCLUDE)/gdcache.h
-	$(INSTALL) -m 644 gd_io.h $(INSTALL_INCLUDE)/gd_io.h
-	$(INSTALL) -m 644 gdfontg.h $(INSTALL_INCLUDE)/gdfontg.h
-	$(INSTALL) -m 644 gdfontl.h $(INSTALL_INCLUDE)/gdfontl.h
-	$(INSTALL) -m 644 gdfontmb.h $(INSTALL_INCLUDE)/gdfontmb.h
-	$(INSTALL) -m 644 gdfonts.h $(INSTALL_INCLUDE)/gdfonts.h
-	$(INSTALL) -m 644 gdfontt.h $(INSTALL_INCLUDE)/gdfontt.h
d95 1
a95 1
+install: libgd.a $(SOLIBGD) $(BIN_PROGRAMS)
d98 2
a99 2
+	@@if [ -f $(SOLIBGD) ]; then \
+	 $(BSD_INSTALL_DATA) -m 644 $(SOLIBGD) $(INSTALL_LIB); \
d120 1
a120 1
@@@@ -122,15 +134,23 @@@@
d124 1
a124 1
-	gdfontg.o gdtables.o gdttf.o gdcache.o gdkanji.o \
d130 1
a130 1
-		gdtables.o gdttf.o gdcache.o gdkanji.o
d132 1
a132 1
+	gdfontg.o gdtables.o gdttf.o gdcache.o gdkanji.o
d137 4
a140 4
+$(SOLIBGD): gd.so gd_gd.so gd_gd2.so gd_io.so gd_io_dp.so gd_io_file.so \
+	gd_ss.so gd_io_ss.so gd_png.so gd_jpeg.so gdxpm.so gdfontt.so \
+	gdfonts.so  gdfontmb.so gdfontl.so gdfontg.so gdtables.so gdttf.so \
+	gdcache.so gdkanji.so
d145 2
a146 2
-	rm -f *.o *.a ${PROGRAMS}
+	rm -f *.o ${PROGRAMS} libgd.a $(SOLIBGD)
@


1.6.2.1
log
@bring graphics as of cut-over date into 2.7 branch
@
text
@@


1.5
log
@- add license info
- add NO_CONFIGURE
- Fake
- check if NO_SHARED_LIBS is set to yes instead of just being defined
@
text
@d1 3
a3 8
--- Makefile.orig	Wed Oct 13 17:20:11 1999
+++ Makefile	Sun Mar  5 10:54:51 2000
@@@@ -11,27 +11,27 @@@@
 
 #If the install command is not in your path, provide
 #an explicit path for it here, or install manually.
-INSTALL=install
+#INSTALL=install
d5 1
a5 1
 #If you don't have FreeType and/or Xpm installed, including the
d9 1
a9 1
 #If you do have FreeType and/or Xpm fully installed, uncomment a
d11 2
a12 2
-#CFLAGS=-O -DHAVE_XPM -DHAVE_LIBTTF
+CFLAGS+=-DHAVE_XPM -DHAVE_LIBTTF $(INCLUDEDIRS)
d19 1
a19 1
 #If you do have FreeType and/or Xpm fully installed, uncomment a 
d22 2
a23 2
-#LIBS=-lm -lgd -lpng -lz -lttf -lXpm -lX11
+LIBS=-lm -lgd -lpng -lz -lttf -lXpm -lX11
d25 1
a25 1
 #Typical install locations for freetype, zlib, xpm and libpng header files.
d53 1
a53 9
@@@@ -58,79 +58,99 @@@@
 
 VERSION=1.7
 
-CC=$(COMPILER) $(INCLUDEDIRS)
+#CC=$(COMPILER) $(INCLUDEDIRS)
 LINK=$(CC) $(LIBDIRS) $(LIBS)
 
 PROGRAMS=$(BIN_PROGRAMS) $(TEST_PROGRAMS)
d57 1
a57 1
+SOLIBGD=libgd.so.17.3
d87 1
a87 1
+	$(INSTALL) -m 644 libgd.a $(INSTALL_LIB)
d89 1
a89 1
+	$(INSTALL) -m 644 $(SOLIBGD) $(INSTALL_LIB);\
d91 16
a106 16
+	$(INSTALL) -m 755 pngtogd $(INSTALL_BIN)
+	$(INSTALL) -m 755 pngtogd2 $(INSTALL_BIN)
+	$(INSTALL) -m 755 gdtopng $(INSTALL_BIN)
+	$(INSTALL) -m 755 gd2topng $(INSTALL_BIN)
+	$(INSTALL) -m 755 gd2copypal $(INSTALL_BIN)
+	$(INSTALL) -m 755 gdparttopng $(INSTALL_BIN)
+	$(INSTALL) -m 755 webpng $(INSTALL_BIN)
+	$(INSTALL) -m 755 bdftogd $(INSTALL_BIN)
+	$(INSTALL) -m 644 gd.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gdcache.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gd_io.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gdfontg.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gdfontl.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gdfontmb.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gdfonts.h $(INSTALL_INCLUDE)
+	$(INSTALL) -m 644 gdfontt.h $(INSTALL_INCLUDE)
d109 2
a110 42
-	$(CC) gddemo.o -o gddemo	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gddemo.o -o gddemo $(LIBDIRS) $(LIBS)
 
 pngtogd: pngtogd.o libgd.a
-	$(CC) pngtogd.o -o pngtogd	$(LIBDIRS) $(LIBS) 
+	$(CC) $(CFLAGS) pngtogd.o -o pngtogd $(LIBDIRS) $(LIBS) 
 
 webpng: webpng.o libgd.a
-	$(CC) webpng.o -o webpng	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) webpng.o -o webpng $(LIBDIRS) $(LIBS)
 
 pngtogd2: pngtogd2.o libgd.a
-	$(CC) pngtogd2.o -o pngtogd2	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) pngtogd2.o -o pngtogd2 $(LIBDIRS) $(LIBS)
 
 gdtopng: gdtopng.o libgd.a
-	$(CC) gdtopng.o -o gdtopng	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gdtopng.o -o gdtopng $(LIBDIRS) $(LIBS)
 
 gd2topng: gd2topng.o libgd.a
-	$(CC) gd2topng.o -o gd2topng	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gd2topng.o -o gd2topng $(LIBDIRS) $(LIBS)
 
 gd2copypal: gd2copypal.o libgd.a
-	$(CC) gd2copypal.o -o gd2copypal	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gd2copypal.o -o gd2copypal $(LIBDIRS) $(LIBS)
 
 gdparttopng: gdparttopng.o libgd.a
-	$(CC) gdparttopng.o -o gdparttopng	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gdparttopng.o -o gdparttopng $(LIBDIRS) $(LIBS)
 
 gdtest: gdtest.o libgd.a
-	$(CC) gdtest.o -o gdtest	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gdtest.o -o gdtest $(LIBDIRS) $(LIBS)
 
 gd2time: gd2time.o libgd.a
-	$(CC) gd2time.o -o gd2time	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gd2time.o -o gd2time $(LIBDIRS) $(LIBS)
 
 gdtestttf: gdtestttf.o libgd.a
-	$(CC) gdtestttf.o -o gdtestttf	$(LIBDIRS) $(LIBS)
+	$(CC) $(CFLAGS) gdtestttf.o -o gdtestttf $(LIBDIRS) $(LIBS)
d113 1
a113 1
 	gd_io_ss.o gd_png.o gdxpm.o gdfontt.o gdfonts.o gdfontmb.o gdfontl.o \
d118 1
a118 1
-		gd_io_file.o gd_ss.o gd_io_ss.o gd_png.o gdxpm.o \
d121 1
d125 2
a126 2
 	-ranlib libgd.a
 
d128 3
a130 3
+	gd_ss.so gd_io_ss.so gd_png.so gdxpm.so gdfontt.so gdfonts.so \
+	gdfontmb.so gdfontl.so gdfontg.so gdtables.so gdttf.so gdcache.so \
+	gdkanji.so
d133 1
a133 1
+
d136 1
a136 1
+	rm -f *.o *.so ${PROGRAMS} libgd.a $(SOLIBGD)
@


1.4
log
@- add support for a shared library
- make gd respect CFLAGS
- add patch to suppress malloc.h warnings
@
text
@d2 1
a2 1
+++ Makefile	Fri Nov 26 10:50:12 1999
d72 1
a72 1
+.if defined(NO_SHARED_LIBS)
d78 1
a78 1
+.if defined(NO_SHARED_LIBS)
@


1.3
log
@Update to version 1.7.3. Fix PLIST.
@
text
@d1 8
a8 3
--- Makefile.orig	Wed Oct 13 21:20:11 1999
+++ Makefile	Tue Nov 16 15:51:06 1999
@@@@ -15,19 +15,21 @@@@
d16 2
a17 2
 #CFLAGS=-O -DHAVE_XPM -DHAVE_LIBTTF
+CFLAGS=-O -DHAVE_LIBTTF
d27 2
a28 2
 #LIBS=-lm -lgd -lpng -lz -lttf -lXpm -lX11
+LIBS=-lm -lgd -lpng -lz -lttf -lX11
d32 163
@


1.2
log
@upgrade to gd 1.6.2;

- this version now generates the .PNG graphics file format and NOT .GIF,
this is due to the patent Unisys has on LZW compression.
@
text
@d1 23
a23 4
--- Makefile.in.orig	Fri Jul 23 18:13:22 1999
+++ Makefile.in	Sun Jul 25 15:56:58 1999
@@@@ -88,7 +88,7 @@@@
 libgd_la_SOURCES = gd.c gd_io.c gd_io_file.c gd_io_dp.c gd_io_ss.c 	gd_png.c gd_ss.c gd_gd.c gd_gd2.c gdfontt.c gdfonts.c gdfontmb.c 	gdfontl.c gdfontg.c gdttf.c gdcache.c 	gd.h gdcache.h gdfontl.h gdfonts.h gd_io.h gdfontg.h 	gdfontmb.h gdfontt.h
d25 2
a26 20
 
-libgd_la_LIBADD = @@LIBS@@ -lm
+libgd_la_LIBADD = @@LIBS@@ -lm -L$(libdir) -lpng
 
 bin_PROGRAMS = pngtogd pngtogd2 gdtopng gd2topng gd2copypal gdparttopng webpng
 
@@@@ -138,11 +138,11 @@@@
 LTLIBRARIES =  $(lib_LTLIBRARIES)
 
 
-DEFS = @@DEFS@@ -I. -I$(srcdir) 
+DEFS = @@DEFS@@ -I. -I$(srcdir) -I$(includedir)
 CPPFLAGS = @@CPPFLAGS@@
 LDFLAGS = @@LDFLAGS@@
 LIBS = @@LIBS@@
-libgd_la_LDFLAGS = 
+libgd_la_LDFLAGS = -version-info 1:6:0
 libgd_la_DEPENDENCIES = 
 libgd_la_OBJECTS =  gd.lo gd_io.lo gd_io_file.lo gd_io_dp.lo gd_io_ss.lo \
 gd_png.lo gd_ss.lo gd_gd.lo gd_gd2.lo gdfontt.lo gdfonts.lo gdfontmb.lo \
@


1.1
log
@Initial revision
@
text
@d1 25
a25 28
--- Makefile.orig	Tue Aug  8 14:28:27 1995
+++ Makefile	Sat Jun 14 18:19:04 1997
@@@@ -7,9 +7,9 @@@@
 #If the ar command fails on your system, consult the ar manpage
 #for your system. 
 
-CC=gcc 
-AR=ar
-CFLAGS=-O
+#CC=gcc 
+#AR=ar
+#CFLAGS=-O
 LIBS=-L./ -lgd -lm
 
 all: libgd.a gddemo giftogd webgif
@@@@ -32,3 +32,11 @@@@
 clean:
 	rm -f *.o *.a gddemo giftogd 
 
+install:
+	install -cs -o bin -g bin gddemo giftogd webgif ${PREFIX}/bin
+	install -c -o bin -g bin libgd.a ${PREFIX}/lib
+	install -c -o bin -g bin gd.h gdfonts.h ${PREFIX}/include/gd
+	install -c -o bin -g bin gdfontt.h gdfontmb.h ${PREFIX}/include/gd
+	install -c -o bin -g bin gdfontl.h gdfontg.h ${PREFIX}/include/gd
+	install -c -o bin -g bin index.html ${PREFIX}/share/examples/gd
+	install -c -o bin -g bin demoin.gif ${PREFIX}/share/examples/gd

@


1.1.1.1
log
@add gd port
@
text
@@
