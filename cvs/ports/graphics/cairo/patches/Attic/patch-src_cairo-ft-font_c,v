head	1.2;
access;
symbols
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.06.23.08.01.50;	author eric;	state dead;
branches;
next	1.1;

1.1
date	2009.01.30.09.32.30;	author eric;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to cairo 1.8.8

prodded by Brad, ok ajacoutot@@ naddy@@
@
text
@$OpenBSD: patch-src_cairo-ft-font_c,v 1.1 2009/01/30 09:32:30 eric Exp $
--- src/cairo-ft-font.c.orig	Mon Jan 26 11:35:11 2009
+++ src/cairo-ft-font.c	Mon Jan 26 11:34:58 2009
@@@@ -528,7 +528,7 @@@@ _has_unlocked_face (void *entry)
 {
     cairo_ft_unscaled_font_t *unscaled = entry;
 
-    return (unscaled->lock_count == 0 && unscaled->face);
+    return (!unscaled->from_face && unscaled->lock_count == 0 && unscaled->face);
 }
 
 /* Ensures that an unscaled font has a face object. If we exceed
@


1.1
log
@Add patch from upstream.

 "2008-12-17 [ft] Don't call FT_Done_Face() on faces we did not create"

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
@

