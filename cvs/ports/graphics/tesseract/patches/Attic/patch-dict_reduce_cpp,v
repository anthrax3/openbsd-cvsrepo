head	1.2;
access;
symbols
	OPENBSD_4_8:1.1.0.6
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.4
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2010.10.22.19.31.43;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2009.03.05.08.09.40;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to tesseract-3.00.

from Sergey Bronnikov with tweaks.
@
text
@$OpenBSD: patch-dict_reduce_cpp,v 1.1 2009/03/05 08:09:40 ajacoutot Exp $

Fix crash -- cf. http://www.win.tue.nl/~aeb/linux/ocr/tesseract.html

--- dict/reduce.cpp.orig	Mon Mar 10 17:22:00 2008
+++ dict/reduce.cpp	Sat Feb 28 08:28:07 2009
@@@@ -335,6 +335,9 @@@@ void reduce_node_input (EDGE_ARRAY dawg,
     }
   }
 
+  if (!edge_occupied(dawg,node))	/* aeb */
+    return;
+
   qsort ((void *) &edge_of (dawg, node + forward_edges),
          backward_edges,
          sizeof (EDGE_RECORD),
@


1.1
log
@- prevent several crashes
patches from http://www.win.tue.nl/~aeb/linux/ocr/tesseract.html
@
text
@d1 1
a1 1
$OpenBSD$
@

