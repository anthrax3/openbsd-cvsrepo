head	1.47;
access;
symbols
	OPENBSD_6_1:1.45.0.2
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.44.0.2
	OPENBSD_6_0_BASE:1.44
	OPENBSD_5_9:1.43.0.2
	OPENBSD_5_9_BASE:1.43
	OPENBSD_5_8:1.41.0.4
	OPENBSD_5_8_BASE:1.41
	OPENBSD_5_7:1.37.0.2
	OPENBSD_5_7_BASE:1.37
	OPENBSD_5_6:1.34.0.2
	OPENBSD_5_6_BASE:1.34
	OPENBSD_5_5:1.28.0.2
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.15.0.2
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	jasper_20090215:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.47
date	2017.09.25.09.16.13;	author robert;	state Exp;
branches;
next	1.46;
commitid	xOeDnABBxynvFYIF;

1.46
date	2017.05.21.17.47.53;	author jasper;	state Exp;
branches;
next	1.45;
commitid	C7jiXWbN0R9p0xgl;

1.45
date	2016.09.08.08.49.10;	author jasper;	state Exp;
branches;
next	1.44;
commitid	tU6iSGhUB4nXvOLl;

1.44
date	2016.04.25.09.35.31;	author jasper;	state Exp;
branches;
next	1.43;
commitid	P3zefqlEHGE4UGOW;

1.43
date	2015.10.14.17.24.10;	author jasper;	state Exp;
branches;
next	1.42;
commitid	jMTgdKVsEVpCA0Id;

1.42
date	2015.09.19.11.06.43;	author jasper;	state Exp;
branches;
next	1.41;
commitid	6RaS4GI8N31m452O;

1.41
date	2015.06.30.10.53.17;	author jasper;	state Exp;
branches;
next	1.40;
commitid	kf4rIVVoCVMTAz0z;

1.40
date	2015.05.12.12.46.02;	author jasper;	state Exp;
branches;
next	1.39;
commitid	E8MLxU3I9ctPPJFH;

1.39
date	2015.04.15.09.40.52;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	dfR1rb9OtImYnGFF;

1.38
date	2015.04.03.16.31.56;	author jasper;	state Exp;
branches;
next	1.37;
commitid	HYKjQti02egdjkpi;

1.37
date	2014.10.05.18.01.35;	author jasper;	state Exp;
branches;
next	1.36;
commitid	rofmPVWi8pysYevk;

1.36
date	2014.10.05.13.34.40;	author jasper;	state Exp;
branches;
next	1.35;
commitid	HWTg2bzTaR2KgoJ7;

1.35
date	2014.08.14.06.51.33;	author jasper;	state Exp;
branches;
next	1.34;
commitid	AGlqdd0m38jUGydp;

1.34
date	2014.04.15.07.35.36;	author jasper;	state Exp;
branches;
next	1.33;

1.33
date	2014.04.02.09.36.11;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2014.04.01.18.06.29;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2014.04.01.15.31.46;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2014.04.01.13.21.45;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2014.03.27.13.07.44;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2014.01.25.08.32.27;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2013.11.19.17.29.18;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2013.09.26.14.56.10;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2013.05.31.15.34.46;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.05.15.07.05.39;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2013.04.17.15.06.59;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2013.04.16.13.17.01;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2013.03.28.19.33.47;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.11.11.10.51;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2012.10.17.11.32.42;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2012.09.27.13.00.40;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2012.09.27.11.48.23;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2012.09.24.19.22.27;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2012.07.08.08.01.55;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2012.07.07.12.49.17;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2012.01.31.09.24.23;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.11.01.20.30.49;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.09.23.08.04.51;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2011.04.07.11.38.42;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2011.04.07.07.44.46;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.17.08.05.13;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.11.08.14.42;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2010.09.30.07.25.57;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2010.09.27.15.11.08;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2009.10.10.23.19.25;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2009.08.10.06.31.44;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.07.13.57.49;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.15.17.41.13;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.15.17.41.13;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.47
log
@Unbreak autoconf checks with clang by not using nested functions
in the checks.

Someone clearly did not read the autoconf documentation because
using the following functions with a function declaration inside
the body will end up declaring a function inside a function.

- AC_TRY_COMPILE( [], [ int main() { return 0; } ],
- AC_LANG_PROGRAM([[]], [[int main (void) { return 0; }]])],
- AC_TRY_LINK([], [int main (void) { return 0; }],

Result:

int
main ()
{
int main (void) { return 0; }
  ;
  return 0;
}

nested functions is a gcc extension which is not supported by
clang.

test.c:4:17: error: function definition is not allowed here
int main (void) { return 0; }
                ^
1 error generated.

This causes tests to fail in the configure scripts resulting in
missing compile and link time flags from the builds.

This resulted in weird behaviour of several software, like gnome
hanging completely due to gtk+3 not being built properly.

This change intrudces the following fixes:

- remove int main() declaration from AC_TRY_COMPILE, AC_LANG_PROGRAM, AC_TRY_LINK
  as it comes with a declaration already, and people misused them

- change to use AC_LANG_SOURCE when needed in case a complete source block is specified

Most of the changes are in configure.(ac|in), however there were some cases
where autoconf is either broken or the build failed because of an autoconf
generated configure script. Everytihng else is switched to autoconf, so
the maintainers can go ahead and upstream these diffs.

There are more to come, we are continously checking the tree for these issues
and in the future the infrastructure will error if such a case is found.
@
text
@# $OpenBSD: Makefile,v 1.46 2017/05/21 17:47:53 jasper Exp $

COMMENT=		OpenGL-based interactive canvas library

GNOME_PROJECT=		clutter
GNOME_VERSION=		1.26.2

REVISION=		0

SHARED_LIBS +=  clutter-1.0          6.1   # 2600.0

WANTLIB += EGL X11 X11-xcb Xcomposite Xcursor Xdamage Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 cairo cairo-gobject
WANTLIB += cogl cogl-pango cogl-path drm epoxy expat ffi fontconfig
WANTLIB += freetype gbm gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 graphite2 gthread-2.0 harfbuzz
WANTLIB += iconv intl json-glib-1.0 m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png pthread pthread-stubs
WANTLIB += xcb xcb-dri2 xcb-render xcb-shm xcb-xfixes z

MODGNOME_TOOLS +=	gobject-introspection

LIB_DEPENDS=		devel/json-glib \
			graphics/clutter/cogl>=1.22.0 \
			x11/gtk+3

MODGNOME_CPPFLAGS=	-I${X11BASE}/include
MODGNOME_LDFLAGS=	-L${X11BASE}/lib

AUTOCONF_VERSION=	2.69
CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS=		--enable-x11-backend \
			--enable-egl-backend

TEST_IS_INTERACTIVE=	X11

pre-configure:
	${SUBST_CMD} ${WRKSRC}/clutter/Makefile.in

.include <bsd.port.mk>
@


1.46
log
@update to clutter-1.26.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/09/08 08:49:10 jasper Exp $
d8 2
d30 2
@


1.45
log
@regen and re-order WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2016/04/25 09:35:31 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		1.26.0
REVISION=		0
@


1.44
log
@update to clutter-1.26.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/10/14 17:24:10 jasper Exp $
d7 1
d11 8
a18 9
WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB += Xrandr Xrender atk-1.0 cairo cairo-gobject cogl cogl-pango
WANTLIB += expat ffi fontconfig freetype gdk-3 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 graphite2
WANTLIB += gthread-2.0 harfbuzz json-glib-1.0 cogl-path
WANTLIB += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs xcb xcb-render xcb-shm z
WANTLIB += EGL X11-xcb drm gbm xcb-dri2 xcb-shape
WANTLIB += xcb-xfixes epoxy iconv intl
@


1.43
log
@update to clutter-1.24.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/09/19 11:06:43 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		1.24.2
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          6.0   # 2400.2
d17 2
a18 2
WANTLIB += EGL X11-xcb Xau Xdmcp drm gbm glapi xcb-dri2 xcb-shape
WANTLIB += xcb-xfixes epoxy
@


1.42
log
@- update to clutter-1.24.0

tested in a bulk/ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/06/30 10:53:17 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		1.24.0
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          6.0   # 2400.0
@


1.41
log
@update to clutter-1.22.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/05/12 12:46:02 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		1.22.4
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          5.2   # 2204.0
d23 1
a23 1
			graphics/clutter/cogl>=1.20.0 \
@


1.40
log
@update to clutter-1.22.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/04/15 09:40:52 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		1.22.2
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          5.1   # 2200.0
@


1.39
log
@Bump after libepoxy moved from ports to xenocara.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/04/03 16:31:56 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		1.22.0
REVISION=		0
@


1.38
log
@- update to clutter-1.22.0
* if there's any fallout it'll be dealt with shortly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/10/05 18:01:35 jasper Exp $
d7 1
@


1.37
log
@- update to clutter-1.20.0
* enable EGL backend, needed for upcoming mutter update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/10/05 13:34:40 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		1.20.0
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          5.0   # 2000.0
d18 1
a18 1
WANTLIB += xcb-xfixes
d23 1
a23 1
			graphics/clutter/cogl>=1.18.2p0 \
@


1.36
log
@remove ${MAJOR}, it's not really used in a way that doesn't confuse
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/08/14 06:51:33 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		1.18.4
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          4.0   # 1800.0
d17 2
d23 1
a23 1
			graphics/clutter/cogl>=1.18 \
d29 2
a30 1
CONFIGURE_ARGS=		--enable-x11-backend
@


1.35
log
@update to clutter-1.18.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/04/15 07:35:36 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.4
d21 1
a21 1
			graphics/clutter/cogl>=${MAJOR} \
@


1.34
log
@update to clutter-1.18.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/04/02 09:36:11 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.2
@


1.33
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/04/01 18:06:29 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		${MAJOR}.0
REVISION=		0
@


1.32
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/04/01 15:31:46 jasper Exp $
d19 1
a19 1
MODGNOME_TOOLS +=		gobject-introspection
@


1.31
log
@start to make MODGNOME_TOOLS resemble the name of the tools actually used.
rename 'gi' to 'gobject-introspection'.

discussed with aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/04/01 13:21:45 ajacoutot Exp $
d19 1
a19 1
MODGNOME_TOOLS=		gobject-introspection
@


1.30
log
@In x11/gnome ports we use disable-static inconsistently, usually to get
rid of static module archives; but since we end up manually removing the
libtool la files anyway, just don't bother setting up the tag.
part 2/2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/03/27 13:07:44 jasper Exp $
d19 1
a19 1
MODGNOME_TOOLS=		gi
@


1.29
log
@update to clutter-1.18.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/01/25 08:32:27 jasper Exp $
d7 1
@


1.28
log
@update to clutter-1.16.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/11/19 17:29:18 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.4
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          3.0   # 1600.0
d14 1
a14 1
WANTLIB += gthread-2.0 harfbuzz json-glib-1.0
@


1.27
log
@update to clutter-1.16.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/09/26 14:56:10 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.2
@


1.26
log
@update to clutter-1.16.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/05/31 15:34:46 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.0
@


1.25
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/05/15 07:05:39 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		${MAJOR}.4
REVISION=		0
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          2.1   # 1404.0
@


1.24
log
@update to clutter-1.14.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/04/17 15:06:59 jasper Exp $
d7 1
d15 1
a15 1
WANTLIB += gthread-2.0 harfbuzz icudata icule icuuc json-glib-1.0
@


1.23
log
@- update to clutter-1.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/04/16 13:17:01 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.2
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          2.0   # 1400.0
@


1.22
log
@goi -> gi (gnome MODULE change).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/03/28 19:33:47 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.0
@


1.21
log
@- update to clutter-1.14.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/11 11:10:51 espie Exp $
d18 1
a18 1
MODGNOME_TOOLS=		goi
@


1.20
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/10/17 11:32:42 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		${MAJOR}.2
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          1.0   # 1200.2
d10 4
a13 4
WANTLIB += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0 cairo cairo-gobject
WANTLIB += cogl cogl-pango drm expat ffi fontconfig freetype gdk-3
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
d16 1
a16 2
WANTLIB += png pthread pthread-stubs stdc++ xcb xcb-render xcb-shm
WANTLIB += z
@


1.19
log
@- update to clutter-1.12.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/09/27 13:00:40 jasper Exp $
d30 1
a30 1
REGRESS_IS_INTERACTIVE=	X11
@


1.18
log
@hobbits take maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/09/27 11:48:23 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		${MAJOR}.0
REVISION=		0
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          1.0   # 1200.8
@


1.17
log
@- update to clutter-1.12.0
* includes a fix for the dreaded threading issues
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/07/08 08:01:55 ajacoutot Exp $
d7 1
@


1.16
log
@remove explict CONFIGURE_ENV, it's been taken care of by gnome.port.mk
for a while now.
@
text
@d6 1
a6 2
GNOME_VERSION=		${MAJOR}.8
REVISION=		0
d8 1
a8 1
SHARED_LIBS +=  clutter-1.0          0.0   # 1000.8
d14 4
a17 3
WANTLIB += gthread-2.0 json-glib-1.0 m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png pthread-stubs stdc++
WANTLIB += xcb xcb-render xcb-shm z
d29 2
@


1.15
log
@Our pkg-config(1) now accepts variables in Requires.
Needs a current pkg-config.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/07/07 12:49:17 ajacoutot Exp $
a26 3

CONFIGURE_ENV=          CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
                        LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
@


1.14
log
@unsigned long long overdue update to clutter-1.10.8.

joint work with jasper@@ and robert@@ ; mpi@@ made it all possible!
ok jasper@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/04/07 11:38:42 jasper Exp $
d7 1
@


1.13
log
@Fix conflicts.

reported by naddy@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/11/01 20:30:49 jasper Exp $
d5 21
a25 26
DISTNAME=		clutter-${MAJOR}.6
REVISION=		7
SHARED_LIBS +=  clutter-glx-1.0      0.0      # .0.6

MASTER_SITES=		${MASTER_SITES_CLUTTER:=clutter/1.0/}

MODULES=		devel/gettext

WANTLIB += GL X11 Xau Xcomposite Xdamage Xdmcp Xext Xfixes
WANTLIB += Xrender expat fontconfig freetype gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 gthread-2.0 m pangoft2-1.0
WANTLIB += pcre pixman-1 png xcb-render ffi stdc++ xcb-shm
WANTLIB += pthread-stubs xcb z Xxf86vm drm json-glib-1.0
WANTLIB += gdk_pixbuf-2.0 cairo pango-1.0 pangocairo-1.0

BUILD_DEPENDS=          devel/gobject-introspection
LIB_DEPENDS+=		devel/json-glib \
			devel/pango \
			graphics/gdk-pixbuf2

CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--enable-introspection \
			--with-json=check \
			--enable-manual=no \
			--with-imagebackend=gdk-pixbuf \
			--with-flavour=glx
d30 4
a33 2
# XXX fix building with glib2 >= 2.29 (G_CONST_RETURN is deprecated)
CFLAGS +=      "-DG_CONST_RETURN=const"
@


1.12
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/09/23 08:04:51 jasper Exp $
d6 1
a6 1
REVISION=		6
@


1.11
log
@fix build with new glib2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/04/07 11:38:42 jasper Exp $
d6 1
a6 1
REVISION=		5
d16 1
a16 1
WANTLIB += pcre pixman-1 png xcb-render xcb-render-util
@


1.10
log
@- fix the cogl pkg-config file, so gnome-games can use it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/04/07 07:44:46 jasper Exp $
d6 1
a6 1
REVISION=		4
d34 3
@


1.9
log
@- Add introspection support (needed for on-going GNOME 3 work).
- Add a bunch of patches to allow doing introspection on the external json-glib instead of the local copy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/17 08:05:13 espie Exp $
d6 1
a6 1
REVISION=		3
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/11 08:14:42 jasper Exp $
d6 1
a6 1
REVISION=		2
d20 1
d26 1
a26 1
			--enable-introspection=no \
@


1.7
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/09/30 07:25:57 jasper Exp $
d20 3
a22 3
LIB_DEPENDS+=		::devel/json-glib \
			::devel/pango \
			::graphics/gdk-pixbuf2
@


1.6
log
@- fix build after gdk-pixbuf2 split
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/09/27 15:11:08 jasper Exp $
d6 1
a6 1
REVISION=		1
d18 1
a18 1
WANTLIB += gdk_pixbuf-2.0 glitz cairo pango-1.0 pangocairo-1.0
@


1.5
log
@- switch to REVISION/new-style DEPENDS
- regen plist
to reduce the update diff a bit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/10/10 23:19:25 landry Exp $
d6 1
a6 1
REVISION=		0
d14 3
a16 3
WANTLIB += Xrender cairo expat fontconfig freetype gio-2.0 glib-2.0
WANTLIB += glitz gmodule-2.0 gobject-2.0 gthread-2.0 m pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png
d18 1
a18 1
WANTLIB += gdk_pixbuf-2.0
d21 2
a22 1
			::x11/gtk+2
@


1.4
log
@Update to clutter 1.0.6:
disable gobject-introspection by default.
fix for newer json-glib proper inclusion while here.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/08/10 06:31:44 kili Exp $
d5 2
a6 1
DISTNAME=		clutter-1.0.6
d17 2
a18 1
WANTLIB += pthread-stubs xcb z Xxf86vm drm
d20 2
a21 2
LIB_DEPENDS+=		json-glib-1.0::devel/json-glib \
			gdk_pixbuf-2.0::x11/gtk+2
@


1.3
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/04/07 13:57:49 jasper Exp $
d5 2
a6 3
DISTNAME=		clutter-${MAJOR}.8
PKGNAME=		${DISTNAME}p0
SHARED_LIBS +=  clutter-glx-0.8      0.0      # .808.0
d8 1
a8 1
MASTER_SITES=		${MASTER_SITES_CLUTTER:=clutter/${MAJOR}/}
d12 1
a12 1
WANTLIB += GL X11 Xau Xcomposite Xdamage Xdmcp Xext Xfixes Xi
d16 1
a16 1
WANTLIB += pthread-stubs xcb z
d22 1
@


1.2
log
@- update clutter to 0.8.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/02/15 17:41:13 jasper Exp $
d6 1
d16 2
a17 1
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png z
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 2
DISTNAME=		clutter-${MAJOR}.6
SHARED_LIBS +=  clutter-glx-0.8      0.0      # .806.0
@


1.1.1.1
log
@import clutter 0.8.6

Clutter is an open source software library for creating fast, visually
rich and animated graphical user interfaces.

Clutter uses OpenGL (and optionally OpenGL ES for use on Mobile and
embedded platforms) for rendering but with an API which hides the
underlying GL complexity from the developer. The Clutter API is intended
to be easy to use, efficient and flexible.
@
text
@@
