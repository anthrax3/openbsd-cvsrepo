head	1.26;
access;
symbols
	OPENBSD_6_1:1.23.0.2
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.21.0.2
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.9.0.2
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	zhuk_20140709:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2017.07.11.20.42.34;	author rsadowski;	state Exp;
branches;
next	1.25;
commitid	t931kgkDfMKlDegV;

1.25
date	2017.05.28.15.54.08;	author rsadowski;	state Exp;
branches;
next	1.24;
commitid	Ynx2x4ZeA0lUi3RC;

1.24
date	2017.04.29.09.24.28;	author rsadowski;	state Exp;
branches;
next	1.23;
commitid	B6rLZ0cvYJCO5f3a;

1.23
date	2017.02.02.12.57.28;	author sthen;	state Exp;
branches;
next	1.22;
commitid	AMuNICqGx1rC6Rrb;

1.22
date	2016.11.27.17.37.35;	author kirby;	state Exp;
branches;
next	1.21;
commitid	jVcuFNwEH2krUXea;

1.21
date	2016.05.06.21.39.03;	author sthen;	state Exp;
branches;
next	1.20;
commitid	SQKkVAkQS2xPvJnu;

1.20
date	2015.11.20.17.17.50;	author sthen;	state Exp;
branches
	1.20.2.1;
next	1.19;
commitid	5jJ7D9qeiviUpxXN;

1.19
date	2015.11.06.20.37.34;	author sthen;	state Exp;
branches;
next	1.18;
commitid	PjPpZyw8X2OGSgMF;

1.18
date	2015.09.12.13.52.13;	author zhuk;	state Exp;
branches;
next	1.17;
commitid	LZUtcOcslDUjDdOx;

1.17
date	2015.08.12.12.33.02;	author zhuk;	state Exp;
branches;
next	1.16;
commitid	ce7KTgaEH5THY5ES;

1.16
date	2015.08.12.10.00.50;	author zhuk;	state Exp;
branches;
next	1.15;
commitid	Pk7qR6tOWzdl1MAm;

1.15
date	2015.07.13.16.33.03;	author zhuk;	state Exp;
branches;
next	1.14;
commitid	cIl14CYq24yn5yzU;

1.14
date	2015.07.10.18.34.27;	author zhuk;	state Exp;
branches;
next	1.13;
commitid	ApPkRyvzrNOSYsly;

1.13
date	2015.07.07.13.47.32;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	2DREHGVsdpdRoqRo;

1.12
date	2015.06.26.09.18.39;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	4UFVMYhVwKp0qm6z;

1.11
date	2015.05.28.10.17.23;	author pascal;	state Exp;
branches;
next	1.10;
commitid	020U4lCPk8wUkCOz;

1.10
date	2015.03.27.08.11.28;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	mHt3hIg3nxq5XDcy;

1.9
date	2014.11.02.08.01.32;	author zhuk;	state Exp;
branches;
next	1.8;
commitid	D7cEXs0x3yZjJXpn;

1.8
date	2014.09.13.18.09.21;	author brad;	state Exp;
branches;
next	1.7;
commitid	PpbRjVZdAmlrmi8q;

1.7
date	2014.07.25.17.45.58;	author zhuk;	state Exp;
branches;
next	1.6;
commitid	uJrTio8yBBJP2VI2;

1.6
date	2014.07.25.15.05.32;	author zhuk;	state Exp;
branches;
next	1.5;
commitid	FuNG5wpS3GgHVxFY;

1.5
date	2014.07.23.23.31.53;	author zhuk;	state Exp;
branches;
next	1.4;
commitid	QLUT5cENspCyIKne;

1.4
date	2014.07.18.04.40.58;	author espie;	state Exp;
branches;
next	1.3;
commitid	rfeiVaSEm6DuoX0l;

1.3
date	2014.07.10.08.53.36;	author zhuk;	state Exp;
branches;
next	1.2;
commitid	nPuNQlCSUi5CVaHY;

1.2
date	2014.07.10.08.06.40;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	isAPndlK8HnrxwxQ;

1.1
date	2014.07.09.21.29.33;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;
commitid	NkAdfdNVOLS8U3K9;

1.1.1.1
date	2014.07.09.21.29.33;	author zhuk;	state Exp;
branches;
next	;
commitid	NkAdfdNVOLS8U3K9;

1.20.2.1
date	2016.05.06.21.35.59;	author sthen;	state Exp;
branches;
next	;
commitid	vDjdgur9VOwg5QQm;


desc
@@


1.26
log
@Bump all and adjust WANTLIB and patches after qca update
OK sthen@@
@
text
@# $OpenBSD: Makefile,v 1.25 2017/05/28 15:54:08 rsadowski Exp $

COMMENT-kipi =		KDE image plugins collection
COMMENT-main =		KDE photo management utility
COMMENT-mediawiki =	KIPI interface for MediaWiki

CATEGORIES =		graphics
HOMEPAGE =		http://www.digikam.org/
VERSION =		4.13.0
DISTNAME =		digikam-${VERSION}

PKGSPEC-main =		digikam->=1
PKGSPEC-kipi =		kipi-plugins->=1

PKGNAME-kipi =		kipi-plugins-${VERSION}
PKGNAME-main =		${PKGNAME}
PKGNAME-mediawiki =	libmediawiki-1.0.0

REVISION-main =		1
REVISION-kipi =		2
REVISION-mediawiki =	4

EXTRACT_SUFX =		.tar.bz2

# LGPL, GPL and many others
PERMIT_PACKAGE_CDROM =		Yes

SHARED_LIBS =	kipiplugins		0.1
SHARED_LIBS +=  digikamcore		0.1
SHARED_LIBS +=  digikamdatabase		0.1
SHARED_LIBS +=  mediawiki		0.1

MASTER_SITES =	${MASTER_SITE_KDE:=stable/digikam/} \
		${MASTER_SITE_KDE:=Attic/digikam/}

MULTI_PACKAGES =	-main -kipi -mediawiki

MODULES =		x11/kde4 multimedia/phonon devel/gettext

# Do not use WANTLIB due to gettext module automatically adding to it

WANTLIB-common =  ${MODQT4_WANTLIB} ${MODKDE4_WANTLIB}
WANTLIB-common += m pthread ${MODGCC4_CPPWANTLIB}
WANTLIB-common += lib/qt4/QtDBus lib/qt4/QtGui lib/qt4/QtSvg
WANTLIB-common += ${KDE4LIB}/kdeui

WANTLIB-kipi =  ${WANTLIB-common}
WANTLIB-kipi += ${MODGETTEXT_WANTLIB} ${MODPHONON_WANTLIB}
WANTLIB-kipi += c GL GLU ICE SM X11 Xext Xrandr expat z
WANTLIB-kipi += lib/qt4/QtNetwork lib/qt4/QtOpenGL lib/qt4/QtXmlPatterns
WANTLIB-kipi += lib/qt4/QtTest lib/qt4/QtXml
WANTLIB-kipi += ${KDE4LIB}/kcalcore ${KDE4LIB}/kdcraw ${KDE4LIB}/kexiv2
WANTLIB-kipi += ${KDE4LIB}/kfile ${KDE4LIB}/khtml
WANTLIB-kipi += ${KDE4LIB}/kio ${KDE4LIB}/kipi ${KDE4LIB}/kjs ${KDE4LIB}/kparts
WANTLIB-kipi += ${KDE4LIB}/ksane
WANTLIB-kipi += ${KDE4LIB}/nepomuk ${KDE4LIB}/nepomukutils ${KDE4LIB}/solid
WANTLIB-kipi += ${KDE4LIB}/threadweaver
WANTLIB-kipi += opencv_core opencv_highgui opencv_imgproc opencv_objdetect
WANTLIB-kipi += exslt gdk_pixbuf-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gpod
WANTLIB-kipi += gthread-2.0 jpeg
WANTLIB-kipi += qjson kgeomap kqoauth kvkontakte mediawiki png qca soprano
WANTLIB-kipi += tiff xml2 xslt MagickCore-6.Q16
WANTLIB-kipi += QtGLib-2.0 QtGStreamer-1.0 QtGStreamerUtils-1.0

WANTLIB-main =  ${WANTLIB-common} ${MODPHONON_WANTLIB}
WANTLIB-main += c ICE SM X11 Xext z
WANTLIB-main += lib/qt4/QtNetwork lib/qt4/QtSql
WANTLIB-main += lib/qt4/QtTest lib/qt4/QtXml
WANTLIB-main += ${KDE4LIB}/kabc ${KDE4LIB}/kcalcore ${KDE4LIB}/kcmutils
WANTLIB-main += ${KDE4LIB}/kdcraw ${KDE4LIB}/kemoticons
WANTLIB-main += ${KDE4LIB}/kexiv2 ${KDE4LIB}/kfile
WANTLIB-main += ${KDE4LIB}/khtml ${KDE4LIB}/kidletime ${KDE4LIB}/kio
WANTLIB-main += ${KDE4LIB}/kipi ${KDE4LIB}/kjs ${KDE4LIB}/kmime
WANTLIB-main += ${KDE4LIB}/knotifyconfig ${KDE4LIB}/kparts
WANTLIB-main += ${KDE4LIB}/kpimutils ${KDE4LIB}/kprintutils
WANTLIB-main += ${KDE4LIB}/kresources ${KDE4LIB}/kutils
WANTLIB-main += ${KDE4LIB}/nepomuk ${KDE4LIB}/nepomukutils
WANTLIB-main += ${KDE4LIB}/solid ${KDE4LIB}/threadweaver
WANTLIB-main += opencv_calib3d opencv_contrib opencv_core opencv_features2d
WANTLIB-main += opencv_flann opencv_gpu opencv_highgui opencv_imgproc
WANTLIB-main += opencv_legacy opencv_ml opencv_nonfree opencv_objdetect
WANTLIB-main += opencv_ocl opencv_photo opencv_video
WANTLIB-main += akonadi-contact akonadi-kde baloocore baloofiles baloopim
WANTLIB-main += balooqueryparser exif gphoto2 gphoto2_port jasper jpeg
WANTLIB-main += kface kgeomap lcms2 lensfun lqr-1 pgf png qca soprano
WANTLIB-main += sqlite tiff usb

WANTLIB-mediawiki =  ${WANTLIB-common}
WANTLIB-mediawiki += lib/qt4/QtNetwork lib/qt4/QtXml
WANTLIB-mediawiki += ${KDE4LIB}/kio

# Define dependencies manually per subpackage
# TODO: fix kde4.port.mk to allow such grained tuning

BUILD_DEPENDS =		devel/bison \
			devel/boost \
			math/eigen3 \
			misc/shared-desktop-ontologies

RUN_DEPENDS-kipi =	${MODGETTEXT_RUN_DEPENDS} \
			${MODKDE4_RUN_DEPENDS} \
			devel/desktop-file-utils \
			misc/shared-desktop-ontologies \
			x11/gtk+3,-guic \
			${MODKDE4_DEP_DIR}/pim-runtime

RUN_DEPENDS-main =	${MODGETTEXT_RUN_DEPENDS} \
			${MODKDE4_RUN_DEPENDS} \
			devel/desktop-file-utils \
			misc/shared-desktop-ontologies \
			x11/gtk+3,-guic \
			${MODKDE4_DEP_DIR}/pim-runtime

LIBS_DEPENDS-common =	${MODQT4_LIB_DEPENDS} \
			${MODKDE4_LIB_DEPENDS}

LIB_DEPENDS-kipi =	${LIB_DEPENDS-common} \
			${MODGETTEXT_LIB_DEPENDS} \
			${MODPHONON_LIB_DEPENDS} \
			${BASE_PKGPATH},-mediawiki \
			audio/libgpod \
			devel/glib2 \
			devel/qjson>=0.7 \
			graphics/gdk-pixbuf2 \
			graphics/ImageMagick \
			graphics/opencv>=2.4.9 \
			graphics/png \
			graphics/tiff \
			multimedia/qt-gstreamer \
			net/libkvkontakte \
			security/qca \
			security/kqoauth \
			x11/kde-applications/libkgeomap>=15.04.3 \
			${MODKDE4_DEP_DIR}/libkdcraw \
			${MODKDE4_DEP_DIR}/libkexiv2 \
			${MODKDE4_DEP_DIR}/libkipi \
			${MODKDE4_DEP_DIR}/libksane \
			${MODKDE4_DEP_DIR}/pimlibs

LIB_DEPENDS-main =	${LIB_DEPENDS-common} \
			${MODPHONON_LIB_DEPENDS} \
			databases/sqlite \
			devel/glib2 \
			devel/libusb-compat \
			graphics/jasper \
			graphics/lcms2 \
			graphics/lensfun>=0.2.6 \
			graphics/libgphoto2 \
			graphics/liblqr \
			graphics/libpgf \
			graphics/opencv>=2.4.9 \
			graphics/png \
			graphics/tiff \
			x11/kde-applications/libkface>=15.04.3 \
			x11/kde-applications/libkgeomap>=15.04.3 \
			${MODKDE4_DEP_DIR}/baloo \
			${MODKDE4_DEP_DIR}/libkdcraw>=4.13 \
			${MODKDE4_DEP_DIR}/libkexiv2>=4.13 \
			${MODKDE4_DEP_DIR}/libkipi>=4.13 \
			${MODKDE4_DEP_DIR}/pimlibs

LIB_DEPENDS-mediawiki =	${LIB_DEPENDS-common}

CONFIGURE_ARGS =	-DCMAKE_DISABLE_FIND_PACKAGE_Hupnp:Bool=Yes \
			-DCMAKE_DISABLE_FIND_PACKAGE_QtSoap:Bool=Yes \
			-DENABLE_INTERNALMYSQL:Bool=No \
			-DENABLE_KDEPIMLIBSSUPPORT:Bool=Yes \
			-DCMAKE_DISABLE_FIND_PACKAGE_Doxygen:Bool=Yes \
			-DENABLE_LCMS2:Bool=Yes

# no official release yet
CONFIGURE_ARGS +=	-DDIGIKAMSC_COMPILE_LIBMEDIAWIKI=Yes

# XXX Don't treat ``DEFINITIONS`` as a built-in directory property
CONFIGURE_ARGS +=	-DCMAKE_POLICY_DEFAULT_CMP0059=OLD

FLAVOR ?=

TEST_IS_INTERACTIVE =	X11

.include <bsd.port.arch.mk>

#.if ${ARCH} == "i386"
CONFIGURE_ENV =		CXXFLAGS="${CXXFLAGS} -DOPENBSD_LIBKDCRAW_NO_CRASH=0"
#.else
#CONFIGURE_ENV =		CXXFLAGS="${CXXFLAGS} -DOPENBSD_LIBKDCRAW_NO_CRASH=1"
#.endif

post-extract:
	# use our Kexiv2Config.cmake instead
	rm ${WRKSRC}/cmake/modules/FindKexiv2.cmake

# XXX because OBJECT_DEPENDS doesn't work as it should in
# the patches/patch-extra_kipi-plugins_common_libkipiplugins_CMakeLists_txt
pre-build:
	@@${MODCMAKE_BUILD_TARGET:S,^${ALL_TARGET}$,kipiplugins-gitversion,}

post-install:
	# these are installed by kde-l10n-* packages
	@@find ${PREFIX}/share/locale -name libkipi.mo | xargs -t rm

.include <bsd.port.mk>
@


1.25
log
@zap opencv XXX tag

After the last opencv update the XXX tag is not more necessary.

ok jca@@, "go for it" zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2017/04/29 09:24:28 rsadowski Exp $
d19 2
a20 2
REVISION-main =		0
REVISION-kipi =		1
d61 1
a61 1
WANTLIB-kipi += qjson kgeomap kqoauth kvkontakte mediawiki png qca2 soprano
d85 1
a85 1
WANTLIB-main += kface kgeomap lcms2 lensfun lqr-1 pgf png soprano
d131 1
a131 1
			security/qca2 \
@


1.24
log
@disable doxygen

ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2017/02/02 12:57:28 sthen Exp $
a181 5

# XXX should fix OpenCV CMake config on Java-enabled archs instead!
.if ${ARCH} == "amd64"
BUILD_DEPENDS +=        graphics/opencv,-java
.endif
@


1.23
log
@backport upstream patch to fix digikam-kde4 with newer lensfun.
diff from rsadowski with minor tweak in patch comment by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/11/27 17:37:35 kirby Exp $
a96 1
			devel/doxygen \
d168 1
@


1.22
log
@Add alternative MASTER_SITES. Our digikam version was moved to Attic
by upstream.
Noticed by Rafael Sadowski, thanks!
Committed on behalf of zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/05/06 21:39:03 sthen Exp $
d19 1
@


1.21
log
@make sure -current pkgname/revision are higher than stable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/11/20 17:17:50 sthen Exp $
d32 2
a33 1
MASTER_SITES =	${MASTER_SITE_KDE:=stable/digikam/}
@


1.20
log
@remove the remaining devel/flex build deps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/11/06 20:37:34 sthen Exp $
d19 1
a19 1
REVISION-kipi =		0
@


1.20.2.1
log
@bump users of MagickWand-6.Q16 and Magick++-6.Q16 in -stable due to
shlib major bump in ImageMagick update; thanks jasper for the list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/11/20 17:17:50 sthen Exp $
d19 1
a19 1
REVISION-kipi =		1
@


1.19
log
@fix following ImageMagick update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/09/12 13:52:13 zhuk Exp $
a95 1
			devel/flex \
@


1.18
log
@Update to Digikam 4.13.0.

Beware: MySQL/MariaDB support dropped (disabled by default upstream),
so make sure you're using SQLite for you Digikam database before update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/08/12 12:33:02 zhuk Exp $
d19 1
d60 1
a60 1
WANTLIB-kipi += tiff xml2 xslt MagickCore
@


1.17
log
@MODGETTEXT_TOOLS is already set by default. Pointed out by aja@@.

It looks like I need to stop juicing and restart coffeing...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/08/12 10:00:50 zhuk Exp $
d9 1
a9 1
VERSION =		4.11.0
d19 1
a19 3
REVISION-main =		0
REVISION-kipi =		0
REVISION-mediawiki =	3
a95 1
			databases/mariadb,-server \
a108 1
			databases/mariadb,-server \
d172 3
a194 2
	# doesn't work with recent versions of libvkontakte
	rm ${WRKSRC}/cmake/modules/FindLibKVkontakte.cmake
@


1.16
log
@More gettext-tools love for KDE4 ports.

Inspired by recent aja@@ commit in ktorrent-kde4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/07/13 16:33:03 zhuk Exp $
a37 1
MODGETTEXT_TOOLS =	Yes
@


1.15
log
@Add another missing dependency, that was hiding behind the RUN_DEPENDS
curtains.

Noticed&reminded by nigel@@, who was as much kind as possible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/07/10 18:34:27 zhuk Exp $
d38 1
@


1.14
log
@Update KDE4 version of Digikam to 4.11.0.

This time we have three libraries previously shipped as a part
of Digikam SC separated, this commit links them to build altogether.

Thanks to sthen@@ and czarkoff@@ for reviewing considerable part of work.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/07/07 13:47:32 ajacoutot Exp $
d19 2
d106 2
a107 1
			x11/gtk+3,-guic
d114 2
a115 1
			x11/gtk+3,-guic
d159 1
@


1.13
log
@libusb-compat is not provided by libgphoto2 anymore, so add it explicitely.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/06/26 09:18:39 ajacoutot Exp $
a2 2
COMMENT-face =		Qt/C++ wrapper around LibFace
COMMENT-geomap =	KIPI interface library for Marble
a5 1
COMMENT-vkontakte =	KIPI interface for VK.com
d9 1
a9 1
VERSION =		4.4.0
a14 2
PKGNAME-face =		libkface-3.4.0
PKGNAME-geomap =	libkgeomap-2.0.0
a17 7
PKGNAME-vkontakte =	libkvkontakte-1.0.0
REVISION-face =		2
REVISION-kipi =		2
REVISION-main =		3
REVISION-mediawiki =	2
REVISION-vkontakte =	2
REVISION-geomap =	1
d19 1
a19 1
REVISION-geomap =	2
d26 4
a29 7
SHARED_LIBS =	kipiplugins		0.0
SHARED_LIBS +=  digikamcore		0.0 # 2.0
SHARED_LIBS +=  digikamdatabase		0.0 # 2.0
SHARED_LIBS +=  kface			0.0 # 1.0
SHARED_LIBS +=  kgeomap			0.0 # 1.0
SHARED_LIBS +=  kvkontakte		0.0 # 1.0
SHARED_LIBS +=  mediawiki		0.0 # 1.0
d33 1
a33 1
MULTI_PACKAGES =	-main -face -geomap -kipi -mediawiki -vkontakte
a43 15
WANTLIB-face =	${WANTLIB-common}
WANTLIB-face +=	lib/qt4/QtSql lib/qt4/QtXml
WANTLIB-face += opencv_contrib opencv_core opencv_highgui
WANTLIB-face += opencv_calib3d opencv_features2d opencv_flann
WANTLIB-face += opencv_gpu opencv_imgproc opencv_legacy opencv_ml opencv_nonfree
WANTLIB-face += opencv_objdetect opencv_ocl opencv_photo opencv_video

WANTLIB-geomap =  ${WANTLIB-common} ${MODPHONON_WANTLIB}
WANTLIB-geomap += lib/qt4/QtNetwork lib/qt4/QtXml
WANTLIB-geomap += ${KDE4LIB}/khtml ${KDE4LIB}/kio ${KDE4LIB}/kjs
WANTLIB-geomap += ${KDE4LIB}/kparts
WANTLIB-geomap += ${KDE4LIB}/marblewidget ${KDE4LIB}/nepomuk
WANTLIB-geomap += ${KDE4LIB}/nepomukutils
WANTLIB-geomap += soprano

d66 18
a83 14
WANTLIB-main += ${KDE4LIB}/kabc ${KDE4LIB}/kcmutils ${KDE4LIB}/kdcraw
WANTLIB-main += ${KDE4LIB}/kemoticons ${KDE4LIB}/kexiv2
WANTLIB-main += ${KDE4LIB}/kfile ${KDE4LIB}/khtml
WANTLIB-main += ${KDE4LIB}/kidletime ${KDE4LIB}/kio
WANTLIB-main += ${KDE4LIB}/kipi ${KDE4LIB}/kjs ${KDE4LIB}/knotifyconfig
WANTLIB-main += ${KDE4LIB}/kparts ${KDE4LIB}/kprintutils
WANTLIB-main += ${KDE4LIB}/kresources ${KDE4LIB}/kutils ${KDE4LIB}/nepomuk
WANTLIB-main += ${KDE4LIB}/nepomukutils ${KDE4LIB}/solid
WANTLIB-main += ${KDE4LIB}/threadweaver
WANTLIB-main += ${KDE4LIB}/nepomukcore
WANTLIB-main += opencv_core opencv_highgui opencv_imgproc
WANTLIB-main += exif glib-2.0 gphoto2 gphoto2_port jasper jpeg kface kgeomap
WANTLIB-main += lcms2 lensfun lqr-1 pgf png soprano sqlite tiff usb
WANTLIB-main += sopranoclient
a88 6
WANTLIB-vkontakte =  ${WANTLIB-common}
WANTLIB-vkontakte += lib/qt4/QtNetwork lib/qt4/QtWebKit lib/qt4/QtXml
WANTLIB-vkontakte += ${KDE4LIB}/kdewebkit ${KDE4LIB}/kio ${KDE4LIB}/kparts
WANTLIB-vkontakte += ${KDE4LIB}/nepomuk ${KDE4LIB}/nepomukutils
WANTLIB-vkontakte += qjson soprano

a99 4
RUN_DEPENDS-face =	${MODKDE4_RUN_DEPENDS}

RUN_DEPENDS-geomap =	${MODGETTEXT_RUN_DEPENDS}

a112 2
RUN_DEPENDS-vkontakte =	${MODKDE4_RUN_DEPENDS}

a115 7
LIB_DEPENDS-face =	${LIB_DEPENDS-common} \
			graphics/opencv>=2.4.9

LIB_DEPENDS-geomap =	${LIB_DEPENDS-common} \
			${MODPHONON_LIB_DEPENDS} \
			${MODKDE4_DEP_DIR}/marble

a118 1
			${BASE_PKGPATH},-geomap \
a119 1
			${BASE_PKGPATH},-vkontakte \
d129 1
d132 1
a140 2
			${BASE_PKGPATH},-face \
			${BASE_PKGPATH},-geomap \
d153 2
a161 3
LIB_DEPENDS-vkontakte = ${LIB_DEPENDS-common} \
			devel/qjson>=0.7

d163 1
a163 1
			-DDIGIKAMSC_USE_PRIVATE_KDEGRAPHICS:Bool=No \
d166 4
a169 2
			-DENABLE_LCMS2:Bool=Yes \
			-DWITH_OpenMP:Bool=No
a172 4
.if ${FLAVOR:Mdebug}
CONFIGURE_ARGS +=	-DENABLE_ADVANCEDDEBUGMSG:Bool=Yes
.endif

a176 6
.if ${ARCH} == "i386"
CONFIGURE_ENV =		CXXFLAGS="${CXXFLAGS} -DOPENBSD_LIBKDCRAW_NO_CRASH=0"
.else
CONFIGURE_ENV =		CXXFLAGS="${CXXFLAGS} -DOPENBSD_LIBKDCRAW_NO_CRASH=1"
.endif

d182 6
d191 2
@


1.12
log
@Bump after the recent phonon MODULE change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/05/28 10:17:23 pascal Exp $
d26 1
a26 1
REVISION-main =		2
d190 1
@


1.11
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/03/27 08:11:28 ajacoutot Exp $
d24 6
a29 6
REVISION-face =		1
REVISION-kipi =		1
REVISION-main =		1
REVISION-mediawiki =	1
REVISION-vkontakte =	1
REVISION-geomap =	0
@


1.10
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/11/02 08:01:32 zhuk Exp $
d24 6
a29 5
REVISION-face =		0
REVISION-kipi =		0
REVISION-main =		0
REVISION-mediawiki =	0
REVISION-vkontakte =	0
d31 1
a31 1
REVISION-geomap =	1
@


1.9
log
@Update Digikam to 4.4.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/09/13 18:09:21 brad Exp $
d24 5
d30 1
a30 1
REVISION-geomap =	0
d139 1
a139 1
			x11/gtk+2,-guic
d146 1
a146 1
			x11/gtk+2,-guic
@


1.8
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/07/25 17:45:58 zhuk Exp $
d12 1
a12 1
VERSION =		4.1.0
d18 1
a18 1
PKGNAME-face =		libkface-3.1.0
d25 1
a25 3
REVISION-main =		2
REVISION-kipi =		0
REVISION-face =		0
d84 1
a84 1
WANTLIB-kipi += QtGLib-2.0 QtGStreamer-0.10 QtGStreamerUtils-0.10
d206 1
a207 1
			-DENABLE_NEPOMUKSUPPORT:Bool=Yes \
@


1.7
log
@Apply a hammer to kdevelop and digikam-kde4 since OBJECT_DEPENDS
doesn't work as advertised. To be investigated later, and we need
reliable builds now.

okay naddy@@ who probably hates those ports now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/07/25 15:05:32 zhuk Exp $
d25 1
a25 1
REVISION-main =		1
d124 1
a124 1
			databases/mysql,-server \
d141 1
a141 1
			databases/mysql,-server \
@


1.6
log
@Bring back BUILD_DEPENDS+=graphics/opencv,-java hack; will be dealt
properly in OpenCV post-release.

failed again at naddy@@'s
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/07/23 23:31:53 zhuk Exp $
d236 5
@


1.5
log
@Make sure no extra OpenCV libraries are picked up during linking.
Reduces WANTLIB-kipi back to something realistic. Went upstream already.

okay sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/07/18 04:40:58 espie Exp $
d226 5
@


1.4
log
@work-around to get digikam to build on amd64 until Vadim finds a better
way.

okay zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/07/10 08:53:36 zhuk Exp $
d25 3
a27 1
REVISION-main =		0
d81 1
a81 3
WANTLIB-kipi += opencv_core opencv_highgui opencv_legacy
WANTLIB-kipi += opencv_calib3d opencv_features2d opencv_flann
WANTLIB-kipi += opencv_imgproc opencv_ml opencv_video
a225 4
.endif

.if ${ARCH} == "amd64"
BUILD_DEPENDS += graphics/opencv,-java
@


1.3
log
@A slightly more correct define, removes unnecessary complilation warnings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/07/10 08:06:40 zhuk Exp $
d226 4
@


1.2
log
@Add back patches that disable KDcraw usage on i386 until issues with ld.so
are resolved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/07/09 21:29:33 zhuk Exp $
d222 3
a224 1
.if ${ARCH} != "i386"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
d219 6
@


1.1.1.1
log
@digiKam is an advanced digital photo management application for
KDE, which makes importing and organizing digital photos a "snap".
The photos are organized in albums which can be sorted chronologically,
by folder layout or by custom collections.

digiKam supports tagging, KIPI plugins, import from digital cameras.
It also has Light Table feature.

This commit is dedicated to the espie@@, who prodded me with this port for
more than a year.
@
text
@@
