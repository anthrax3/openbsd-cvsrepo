head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.26
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.24
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.22
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.18
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.20
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.16
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.14
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.12
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.10
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.8
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.6
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.1.1.1.0.28
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.26
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.24
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.22
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.20
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.18
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.16
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.14
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.12
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.10
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.8
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.6
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.4
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.2
	OPENBSD_3_6_BASE:1.1.1.1
	robert_20040701:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2011.07.08.11.25.47;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2004.07.01.21.53.16;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.07.01.21.53.16;	author robert;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- fix patch names, no binary change
- regen others while here
@
text
@$OpenBSD: patch-src_main_c,v 1.1.1.1 2004/07/01 21:53:16 robert Exp $
--- src/main.c.orig	Mon Jun 23 14:05:48 2003
+++ src/main.c	Fri Jul  8 13:22:30 2011
@@@@ -426,28 +426,28 @@@@ im_printf(char *str, struct tm *tm,
       switch (*c) {
         case 'f':
           if (filename_im)
-            strcat(ret, filename_im);
+            strlcat(ret, filename_im, sizeof(ret));
           break;
         case 'm': /* t was allready taken, so m as in mini */
           if (filename_thumb)
-            strcat(ret, filename_thumb);
+            strlcat(ret, filename_thumb, sizeof(ret));
           break;
         case 'n':
           if (filename_im) {
             tmp = strrchr(filename_im, '/');
             if (tmp)
-              strcat(ret, tmp + 1);
+              strlcat(ret, tmp + 1, sizeof(ret));
             else
-              strcat(ret, filename_im);
+              strlcat(ret, filename_im, sizeof(ret));
           }
           break;
         case 'w':
           snprintf(buf, sizeof(buf), "%d", gib_imlib_image_get_width(im));
-          strcat(ret, buf);
+          strlcat(ret, buf, sizeof(ret));
           break;
         case 'h':
           snprintf(buf, sizeof(buf), "%d", gib_imlib_image_get_height(im));
-          strcat(ret, buf);
+          strlcat(ret, buf, sizeof(ret));
           break;
         case 's':
           if (filename_im) {
@@@@ -456,22 +456,22 @@@@ im_printf(char *str, struct tm *tm,
 
               size = st.st_size;
               snprintf(buf, sizeof(buf), "%d", size);
-              strcat(ret, buf);
+              strlcat(ret, buf, sizeof(ret));
             } else
-              strcat(ret, "[err]");
+              strlcat(ret, "[err]", sizeof(ret));
           }
           break;
         case 'p':
           snprintf(buf, sizeof(buf), "%d",
                    gib_imlib_image_get_width(im) *
                    gib_imlib_image_get_height(im));
-          strcat(ret, buf);
+          strlcat(ret, buf, sizeof(ret));
           break;
         case 't':
-          strcat(ret, gib_imlib_image_format(im));
+          strlcat(ret, gib_imlib_image_format(im), sizeof(ret));
           break;
         case '$':
-          strcat(ret, "$");
+          strlcat(ret, "$", sizeof(ret));
           break;
         default:
           strncat(ret, c, 1);
@@@@ -482,7 +482,7 @@@@ im_printf(char *str, struct tm *tm,
       switch (*c) {
         case 'n':
           if (filename_im)
-            strcat(ret, "\n");
+            strlcat(ret, "\n", sizeof(ret));
           break;
         default:
           strncat(ret, c, 1);
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- src/main.c.orig	Thu Jul  1 23:19:39 2004
+++ src/main.c	Thu Jul  1 23:21:16 2004
@@@@ -426,28 +426,28 @@@@
d39 1
a39 1
@@@@ -456,22 +456,22 @@@@
d67 1
a67 1
@@@@ -482,7 +482,7 @@@@
@


1.1.1.1
log
@Import of scrot-0.8

scrot is a commandline screen capture util like "import", but using
imlib2. It has lots of options for autogenerating filenames, and can
do fun stuff like taking screenshots of multiple displays and glueing
them together.

from Victor Sahlstedt <cvss@@home.se>; ok naddy@@
@
text
@@
