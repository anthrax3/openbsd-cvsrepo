head	1.52;
access;
symbols
	OPENBSD_6_1:1.48.0.2
	OPENBSD_6_1_BASE:1.48
	OPENBSD_6_0:1.45.0.2
	OPENBSD_6_0_BASE:1.45
	OPENBSD_5_9:1.42.0.2
	OPENBSD_5_9_BASE:1.42
	OPENBSD_5_8:1.39.0.4
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.35.0.2
	OPENBSD_5_7_BASE:1.35
	OPENBSD_5_6:1.34.0.2
	OPENBSD_5_6_BASE:1.34
	OPENBSD_5_5:1.32.0.4
	OPENBSD_5_5_BASE:1.32
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.28.0.2
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	kde:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.52
date	2017.09.07.16.57.51;	author sthen;	state Exp;
branches;
next	1.51;
commitid	yQovIqHnZfI3DXcu;

1.51
date	2017.07.26.22.45.23;	author sthen;	state Exp;
branches;
next	1.50;
commitid	tD4MFrpYYDDL2UFT;

1.50
date	2017.07.16.19.18.56;	author espie;	state Exp;
branches;
next	1.49;
commitid	tt0GhWK5c4uf9ILG;

1.49
date	2017.04.10.11.46.20;	author sthen;	state Exp;
branches;
next	1.48;
commitid	BLsh88fJB8thZTwY;

1.48
date	2017.02.06.20.20.23;	author sthen;	state Exp;
branches;
next	1.47;
commitid	5y3PZ7bZF4hgO1nQ;

1.47
date	2016.09.17.09.52.37;	author sthen;	state Exp;
branches;
next	1.46;
commitid	RO1Twd7aHaGHXloi;

1.46
date	2016.09.13.15.29.01;	author naddy;	state Exp;
branches;
next	1.45;
commitid	ZR0IP7QclqedYIO6;

1.45
date	2016.06.11.11.48.17;	author sthen;	state Exp;
branches;
next	1.44;
commitid	lst90kWa7AqGB8fI;

1.44
date	2016.03.18.21.38.23;	author naddy;	state Exp;
branches;
next	1.43;
commitid	BVkebQSTXSZokeRG;

1.43
date	2016.03.11.11.48.28;	author naddy;	state Exp;
branches;
next	1.42;
commitid	me9dZDhw9spZRyJ6;

1.42
date	2015.12.17.09.47.22;	author ajacoutot;	state Exp;
branches
	1.42.2.1;
next	1.41;
commitid	07HbLD13cXxzPcaC;

1.41
date	2015.10.15.22.53.48;	author sthen;	state Exp;
branches;
next	1.40;
commitid	dSMpEVhEeULINkRH;

1.40
date	2015.10.08.12.02.03;	author jasper;	state Exp;
branches;
next	1.39;
commitid	Fd81pQbB9Yvd8TB7;

1.39
date	2015.06.08.06.11.11;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	0M0APrghriLxL9Ql;

1.38
date	2015.06.01.07.45.25;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	bKYPf1hjuvKFuS8f;

1.37
date	2015.05.15.06.54.56;	author ajacoutot;	state Exp;
branches;
next	1.36;
commitid	CtHn8SmVxhYTEOKK;

1.36
date	2015.05.13.09.41.58;	author sthen;	state Exp;
branches;
next	1.35;
commitid	yfQQSP3wCNrdGH4l;

1.35
date	2014.09.10.00.07.39;	author brad;	state Exp;
branches;
next	1.34;
commitid	GWPEl3fJPzACvYI2;

1.34
date	2014.06.14.10.34.45;	author sthen;	state Exp;
branches;
next	1.33;
commitid	HiKZ10xJk2o55vyF;

1.33
date	2014.03.27.02.15.34;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2013.06.04.18.41.46;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2013.04.15.01.58.32;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2013.03.21.08.45.17;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.11.11.10.51;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2012.12.23.20.40.39;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2012.12.22.19.37.35;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2012.08.28.15.18.25;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2012.07.03.13.36.28;	author okan;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2012.06.19.13.20.19;	author okan;	state Exp;
branches;
next	1.23;

1.23
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2011.11.01.20.30.49;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2011.09.16.10.02.36;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2011.07.07.01.06.59;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.03.14.09.17.00;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2011.01.15.16.17.33;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.17.08.05.12;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.09.09.14.31;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.24.21.20.59;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.18.18.13.13;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.03.28.17.17.15;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2009.09.01.14.22.27;	author okan;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.10.06.31.44;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2009.04.22.13.19.12;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2009.01.08.19.57.36;	author okan;	state Exp;
branches;
next	1.8;

1.8
date	2008.12.07.18.13.01;	author okan;	state Exp;
branches;
next	1.7;

1.7
date	2008.02.27.08.04.51;	author bernd;	state Exp;
branches;
next	1.6;

1.6
date	2008.02.26.18.45.28;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.20.14.29.06;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2007.09.19.05.58.14;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.09.15.20.09.40;	author simon;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.30.09.25.10;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.29.10.53.40;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.29.10.53.40;	author espie;	state Exp;
branches;
next	;

1.25.2.1
date	2012.08.28.15.19.37;	author jasper;	state Exp;
branches;
next	;

1.42.2.1
date	2016.06.11.20.37.50;	author sthen;	state Exp;
branches;
next	;
commitid	I1yb1fSgHP5NvcAT;


desc
@@


1.52
log
@update to GraphicsMagick-1.3.26, from Brad.

CVE-2016-7800, CVE-2016-7997, CVE-2016-9830, CVE-2017-6335, CVE-2017-8350,
CVE-2017-10794, CVE-2017-10799, CVE-2017-10800
@
text
@# $OpenBSD: Makefile,v 1.51 2017/07/26 22:45:23 sthen Exp $

COMMENT=	image processing tools with stable ABI

DISTNAME=	GraphicsMagick-1.3.26
CATEGORIES=	graphics devel
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=graphicsmagick/}
EXTRACT_SUFX=	.tar.xz

SHARED_LIBS=	GraphicsMagick		5.1 \
		GraphicsMagick++	5.1 \
		GraphicsMagickWand	3.5 \

HOMEPAGE=	http://www.graphicsmagick.org/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# http://www.graphicsmagick.org/www/Copyright.html
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		ICE SM X11 Xau Xdmcp Xext bz2 c freetype iconv \
			jasper jbig jpeg lcms2 ltdl lzma m png16 pthread \
			pthread-stubs ${COMPILER_LIBCXX} tiff webp wmflite-0.2 xcb xml2 z
WANTLIB+= perl # uses perl ABI

LIB_DEPENDS=		archivers/bzip2 \
			archivers/xz \
			converters/libiconv \
			devel/libtool,-ltdl \
			graphics/jasper \
			graphics/jbigkit \
			graphics/lcms2 \
			graphics/libwebp \
			graphics/libwmf \
			graphics/png \
			graphics/tiff \
			textproc/libxml
RUN_DEPENDS=		print/ghostscript/gnu \
			print/transfig
BUILD_DEPENDS=		${RUN_DEPENDS}

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--enable-shared \
			--with-gs-font-dir=${LOCALBASE}/share/fonts/ghostscript \
			--with-ltdl-include=${LOCALBASE}/include \
			--with-ltdl-lib=${LOCALBASE}/lib \
			--with-modules \
			--with-perl \
			--with-quantum-depth=16 \
			--without-dps \
			--without-fpx \
			--without-gslib \
			--without-trio \
			--disable-ltdl-install \
			--disable-openmp
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${WRKBUILD}/magick/.libs -L${WRKBUILD}/wand/.libs -L${LOCALBASE}/lib" \
			ac_cv_path_LaunchDelegate=no

post-build:
	@@cd ${WRKBUILD}/PerlMagick && perl Makefile.PL && \
	sed -i s,'^LDLOADLIBS = ','LDLOADLIBS = -lGraphicsMagick ', \
		Makefile && ${MAKE} ${MAKE_FLAGS}

post-install:
	@@cd ${WRKBUILD}/PerlMagick && ${MAKE} ${MAKE_FLAGS} ${FAKE_TARGET}
	@@perl -pi -e s,'-L${WRKBUILD}/(magick|wand)/.libs','',g \
		${PREFIX}/bin/GraphicsMagick++-config \
		${PREFIX}/bin/GraphicsMagick-config
	@@find ${PREFIX}/lib/GraphicsMagick/modules-Q16 -name '*.a' -print | xargs rm

.include <bsd.port.mk>
@


1.51
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2017/07/16 19:18:56 espie Exp $
d5 1
a5 2
DISTNAME=	GraphicsMagick-1.3.25
REVISION=	1
d12 1
a12 1
		GraphicsMagickWand	3.4 \
@


1.50
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2017/04/10 11:46:20 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.49
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2017/02/06 20:20:23 sthen Exp $
d24 1
a24 1
			pthread-stubs ${LIBCXX} tiff webp wmflite-0.2 xcb xml2 z
@


1.48
log
@Add perl to WANTLIB, first batch. This used to be done automatically but
since SHARED_ONLY support was removed across the ports tree the perl module
no longer adds it, so it must be done manually for any perl ports that
provide perl shared-library modules (i.e. libdata/perl5/site_perl/$ARCH/*.so)
and you must not remove them from WANTLIB even if they show as "Extra".
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/09/17 09:52:37 sthen Exp $
d24 1
a24 1
			pthread-stubs stdc++ tiff webp wmflite-0.2 xcb xml2 z
@


1.47
log
@update to GraphicsMagick 1.3.25, from Brad - CVE-2016-2317 and a few other
security-related fixes noted in changelog.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/09/13 15:29:01 naddy Exp $
d6 1
d25 1
@


1.46
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/06/11 11:48:17 sthen Exp $
d5 1
a5 1
DISTNAME=	GraphicsMagick-1.3.24
@


1.45
log
@update to GraphicsMagick-1.3.24, from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2016/03/18 21:38:23 naddy Exp $
d21 3
a23 5
WANTLIB=		ICE SM X11 Xau Xdmcp Xext bz2 c freetype jasper jbig \
			jpeg lcms2 ltdl lzma m png16 pthread pthread-stubs \
			stdc++ tiff webp wmflite-0.2 xcb xml2 z

MODULES=		converters/libiconv
d27 1
@


1.44
log
@remove SHARED_ONLY from simple ports that use the gettext or libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2016/03/11 11:48:28 naddy Exp $
d5 1
a5 1
DISTNAME=	GraphicsMagick-1.3.23
d10 3
a12 3
SHARED_LIBS=	GraphicsMagick		5.0 \
		GraphicsMagick++	5.0 \
		GraphicsMagickWand	3.3 \
@


1.43
log
@requires --enable-shared
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.42 2015/12/17 09:47:22 ajacoutot Exp $

SHARED_ONLY=	Yes
@


1.42
log
@Update to GraphicsMagick-1.3.23.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/10/15 22:53:48 sthen Exp $
d45 1
a45 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
@


1.42.2.1
log
@update GraphicsMagick in -stable to 1.3.24 (it has various vulnerability
fixes and hardening), Brad agrees.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.45 2016/06/11 11:48:17 sthen Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.24
d12 3
a14 3
SHARED_LIBS=	GraphicsMagick		5.1 \
		GraphicsMagick++	5.1 \
		GraphicsMagickWand	3.4 \
d45 1
a45 1
CONFIGURE_ARGS+=	--enable-shared \
@


1.41
log
@update to GraphicsMagick 1.3.22, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/10/08 12:02:03 jasper Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.22
@


1.40
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/06/08 06:11:11 ajacoutot Exp $
d7 1
a7 2
DISTNAME=	GraphicsMagick-1.3.21
REVISION=	0
d12 3
a14 3
SHARED_LIBS=	GraphicsMagick		4.3 \
		GraphicsMagick++	4.0 \
		GraphicsMagickWand	3.2 \
@


1.39
log
@Make sure we don't pick up openmp.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/06/01 07:45:25 ajacoutot Exp $
d65 1
a65 1
	perl -pi -e s,'^LDLOADLIBS = ','LDLOADLIBS = -lGraphicsMagick ', \
@


1.38
log
@Set the correct GhostScript fonts path.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2015/05/15 06:54:56 ajacoutot Exp $
d57 2
a58 1
			--disable-ltdl-install
@


1.37
log
@Do not need to add the libxml2 header path to CPPFLAGS anymore. The
autoconf script uses xml2-config to determine the path.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/05/13 09:41:58 sthen Exp $
d8 1
d47 1
@


1.36
log
@update to GraphicsMagick 1.3.21, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/09/10 00:07:39 brad Exp $
d56 1
a56 1
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include/libxml2 -I${LOCALBASE}/include" \
@


1.35
log
@Update to GraphicsMagick 1.3.20.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/06/14 10:34:45 sthen Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.20
d12 2
a13 2
SHARED_LIBS=	GraphicsMagick		4.2 \
		GraphicsMagick++	3.1 \
@


1.34
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/03/27 02:15:34 brad Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.19
a10 1
REVISION=	0
d12 3
a14 3
SHARED_LIBS=	GraphicsMagick		4.1 \
		GraphicsMagick++	3.0 \
		GraphicsMagickWand	3.1 \
d23 3
a25 3
WANTLIB=		ICE SM X11 Xext bz2 c freetype jasper jbig jpeg lcms2 \
			ltdl lzma m png16 pthread stdc++ tiff webp wmflite-0.2 \
			xcb xml2 z
@


1.33
log
@Update to GraphicsMagick 1.3.19.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/06/04 18:41:46 naddy Exp $
d11 1
@


1.32
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/04/15 01:58:32 brad Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.18
d24 1
a24 1
			ltdl lzma m png pthread stdc++ tiff wmflite-0.2 \
d35 1
@


1.31
log
@Update to GraphicsMagick 1.3.18.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/03/21 08:45:17 ajacoutot Exp $
d55 1
a55 1
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include/libxml2 -I${LOCALBASE}/include" \
@


1.30
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/11 11:10:51 espie Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.17
d12 1
a12 1
SHARED_LIBS=	GraphicsMagick		4.0 \
d14 1
a14 1
		GraphicsMagickWand	3.0 \
@


1.29
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/12/23 20:40:39 brad Exp $
a42 1
USE_LIBTOOL=		Yes
@


1.28
log
@- Re-add some paths to LDFLAGS to allow GraphicsMagick to build if a previous
  copy is not already installed.
- Remove the PTHREAD_LIBS override.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/12/22 19:37:35 brad Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.27
log
@Update to GraphicsMagick 1.3.17.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/08/28 15:18:25 jasper Exp $
d60 1
a60 2
			LDFLAGS="-L${LOCALBASE}/lib" \
			PTHREAD_LIBS="-pthread" \
@


1.26
log
@Security fix for CVE-2012-3438,
GraphicsMagick: png_IM_malloc() size argument

ok brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/07/03 13:36:28 okan Exp $
d7 1
a7 2
DISTNAME=	GraphicsMagick-1.3.15
REVISION=	0
d60 1
a60 1
			LDFLAGS="-L${WRKBUILD}/magick/.libs -L${WRKBUILD}/wand/.libs -L${LOCALBASE}/lib" \
@


1.25
log
@update to 1.3.15; from Brad

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/06/19 13:20:19 okan Exp $
d8 1
@


1.25.2.1
log
@Security fix for CVE-2012-3438,
GraphicsMagick: png_IM_malloc() size argument

ok brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/07/03 13:36:28 okan Exp $
a7 1
REVISION=	0
@


1.24
log
@remove no_x11 FLAVOR and USE_GROFF; ok maintainer Brad.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/12/02 14:36:14 espie Exp $
d7 1
a7 2
DISTNAME=	GraphicsMagick-1.3.12
REVISION=	4
d10 1
d26 3
a28 3
WANTLIB=		bz2 c jasper jbig lcms ltdl jpeg xcb \
			m png pthread stdc++ tiff xml2 z \
			ICE SM X11 Xext freetype wmflite-0.2 xcb
d33 1
d37 1
a37 1
			graphics/lcms \
a41 1

d48 6
a53 3
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--with-quantum-depth=16 \
			--with-wmf \
a57 4
			--with-modules \
			--with-perl \
			--with-ltdl-include=${LOCALBASE}/include \
			--with-ltdl-lib=${LOCALBASE}/lib \
a58 1

d61 1
a61 1
			PTHREAD_CFLAGS="-pthread" PTHREAD_LIBS="-pthread" \
d74 1
@


1.23
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/11/01 20:30:49 jasper Exp $
d8 1
a8 1
REVISION=	3
d27 2
a28 1
			m png pthread stdc++ tiff xml2 z ${MODLIBICONV_WANTLIB}
d37 1
d42 4
a46 1
USE_GROFF=		Yes
d50 1
d60 1
d63 1
a63 1
			PTHREAD_LIBS="-pthread" \
a65 25
FLAVORS=		no_x11
FLAVOR?=

.if ${FLAVOR:Mno_x11}
BUILD_DEPENDS+=		print/ghostscript/gnu,no_x11
RUN_DEPENDS+=		print/ghostscript/gnu,no_x11
CONFIGURE_ENV+=		ac_cv_path_FIGDecodeDelegate=no
CONFIGURE_ARGS+=	--without-x \
			--without-ttf \
			--without-wmf
PKG_ARGS+=		-Dx11=0
.else
WANTLIB+=		ICE SM X11 Xext freetype wmflite-0.2 xcb
LIB_DEPENDS+=		graphics/libwmf
BUILD_DEPENDS+=		print/ghostscript/gnu \
			print/transfig
RUN_DEPENDS+=		print/ghostscript/gnu \
			print/transfig
CONFIGURE_ARGS+=	--with-wmf
PKG_ARGS+=		-Dx11=1
.endif

# with FLAVOR=no_x11, some regession tests do not pass
# due to the absence of freetype

d67 3
a69 1
	@@cd ${WRKBUILD}/PerlMagick && perl Makefile.PL && ${MAKE} ${MAKE_FLAGS}
d73 3
@


1.22
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/09/16 10:02:36 espie Exp $
d62 1
a62 1
.if ${FLAVOR:L:Mno_x11}
@


1.21
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/07/07 01:06:59 ajacoutot Exp $
d8 1
a8 1
REVISION=	2
d26 1
a26 1
WANTLIB=		bz2 c jasper jbig lcms ltdl jpeg \
d71 1
a71 2
WANTLIB+=		ICE SM X11 Xau Xdmcp Xext freetype pthread-stubs \
			wmflite-0.2 xcb
@


1.20
log
@Remove some duplicate wantlibs, use the libiconv MODULE where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/03/14 09:17:00 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.19
log
@fix various typos, from Anthony J. Bentley with a few tweaks by myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/01/15 16:17:33 jasper Exp $
d8 1
a8 1
REVISION=	0
d26 4
a29 2
WANTLIB=		bz2 c iconv jasper jbig lcms ltdl jpeg \
			m png pthread stdc++ tiff xml2 z
@


1.18
log
@- update GraphicsMagick to 1.3.12

from new maintainer, brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/17 08:05:12 espie Exp $
d8 1
@


1.17
log
@new depends
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.16 2010/11/09 09:14:31 espie Exp $
d7 1
a7 1
DISTNAME=	GraphicsMagick-1.3.8
d9 1
d11 3
a13 3
SHARED_LIBS +=	GraphicsMagick       3.0      # .6.0
SHARED_LIBS +=	GraphicsMagick++     3.0      # .6.0
SHARED_LIBS +=	GraphicsMagickWand   3.0      # .4.1
d16 2
a17 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=graphicsmagick/}
d25 2
a26 2
WANTLIB +=		c iconv jpeg m z bz2>=10 jbig>=1.2 png>=4 \
			tiff>=36 lcms>=1 jasper>=1 xml2>=9
d28 3
a30 1
LIB_DEPENDS =		archivers/bzip2 \
d32 1
a34 2
			graphics/lcms \
			graphics/jasper \
d38 1
a38 1
USE_GROFF =		Yes
a43 2
			--without-modules \
			--without-threads \
d45 2
a50 1

d53 1
d60 4
a63 4
BUILD_DEPENDS +=	print/ghostscript/gnu,no_x11
RUN_DEPENDS +=		print/ghostscript/gnu,no_x11
CONFIGURE_ENV +=	ac_cv_path_FIGDecodeDelegate=no
CONFIGURE_ARGS +=	--without-x \
d66 1
d68 9
a76 8
WANTLIB +=		ICE SM X11 Xau Xdmcp Xext freetype pthread-stubs xcb \
			wmflite>=7
LIB_DEPENDS +=		graphics/libwmf
BUILD_DEPENDS +=	print/ghostscript/gnu
BUILD_DEPENDS +=	print/transfig
RUN_DEPENDS +=		print/ghostscript/gnu
RUN_DEPENDS +=		print/transfig
CONFIGURE_ARGS +=	--with-wmf
@


1.16
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/24 21:20:59 ajacoutot Exp $
d21 2
a22 2
WANTLIB +=		c iconv jpeg m z bz2.>=10 jbig.>=1.2 png.>=4 \
			tiff.>=36 lcms.>=1 jasper.>=1 xml2.>=9
d24 7
a30 7
LIB_DEPENDS =		::archivers/bzip2 \
			::graphics/jbigkit \
			::graphics/png \
			::graphics/tiff \
			::graphics/lcms \
			::graphics/jasper \
			::textproc/libxml
d55 2
a56 2
BUILD_DEPENDS +=	:ghostscript-*:print/ghostscript/gnu,no_x11
RUN_DEPENDS +=		:ghostscript-*:print/ghostscript/gnu,no_x11
d63 6
a68 6
			wmflite.>=7
LIB_DEPENDS +=		::graphics/libwmf
BUILD_DEPENDS +=	:ghostscript-*:print/ghostscript/gnu
BUILD_DEPENDS +=	:transfig-*:print/transfig
RUN_DEPENDS +=		:ghostscript-*:print/ghostscript/gnu
RUN_DEPENDS +=		:transfig-*:print/transfig
@


1.15
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/18 18:13:13 espie Exp $
d21 2
a22 1
WANTLIB+=		c iconv jpeg m z
d24 7
a30 7
LIB_DEPENDS=		bz2.>=10::archivers/bzip2 \
			jbig.>=1.2::graphics/jbigkit \
			png.>=4::graphics/png \
			tiff.>=36::graphics/tiff \
			lcms.>=1::graphics/lcms \
			jasper.>=1::graphics/jasper \
			xml2.>=9::textproc/libxml
d33 1
a33 1
USE_GROFF =	Yes
d55 4
a58 4
BUILD_DEPENDS+=		:ghostscript-*:print/ghostscript/gnu,no_x11
RUN_DEPENDS+=		:ghostscript-*:print/ghostscript/gnu,no_x11
CONFIGURE_ENV+=		ac_cv_path_FIGDecodeDelegate=no
CONFIGURE_ARGS+=	--without-x \
d62 8
a69 7
WANTLIB+=		ICE SM X11 Xau Xdmcp Xext freetype pthread-stubs xcb
LIB_DEPENDS+=		wmflite.>=7::graphics/libwmf
BUILD_DEPENDS+=		:ghostscript-*:print/ghostscript/gnu
BUILD_DEPENDS+=		:transfig-*:print/transfig
RUN_DEPENDS+=		:ghostscript-*:print/ghostscript/gnu
RUN_DEPENDS+=		:transfig-*:print/transfig
CONFIGURE_ARGS+=	--with-wmf
@


1.14
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/03/28 17:17:15 jasper Exp $
a61 1
USE_X11=		Yes
@


1.13
log
@- update GraphicsMagick to 1.3.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/09/01 14:22:27 okan Exp $
d32 1
@


1.12
log
@update to 1.3.6

"looks fine" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/08/10 06:31:44 kili Exp $
d5 1
a5 1
DISTNAME=	GraphicsMagick-1.3.6
d8 3
a10 3
SHARED_LIBS +=	GraphicsMagick       2.0      # .3.3
SHARED_LIBS +=	GraphicsMagick++     2.0      # .3.0
SHARED_LIBS +=	GraphicsMagickWand   2.0      # .2.1
@


1.11
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/04/22 13:19:12 jasper Exp $
d5 1
a5 2
DISTNAME=	GraphicsMagick-1.3.3
PKGNAME=	${DISTNAME}p1
d8 3
a10 3
SHARED_LIBS +=	GraphicsMagick       1.0      # .3.3
SHARED_LIBS +=	GraphicsMagick++     1.0      # .3.0
SHARED_LIBS +=	GraphicsMagickWand   1.0      # .2.1
d40 1
a40 1
			--with-perl=/usr/bin/perl \
d73 2
a74 1
REGRESS_DEPENDS=	:${PKGNAME}:${BASE_PKGPATH}
d77 1
a77 6
	@@perl -pi -e s,'-L${WRKBUILD}/(magick|wand)/.libs','',g \
		${PREFIX}/bin/GraphicsMagick{,++}-config 
.for f in GraphicsMagick++ GraphicsMagick GraphicsMagickWand
	@@perl -pi -e s,'-L${WRKBUILD}/(magick|wand)/.libs','',g \
		${PREFIX}/lib/lib${f}.la
.endfor
@


1.10
log
@- add a SECURITY FIX for graphicsmagick for SA33697, which could lead to
a DoS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/01/08 19:57:36 okan Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d61 1
a61 1
WANTLIB+=		ICE SM X11 Xau Xdmcp Xext freetype
@


1.9
log
@update to latest stable version, 1.3.3.

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/12/07 18:13:01 okan Exp $
d6 1
@


1.8
log
@- update to 1.1.14
- build perl module
- add libwmf support

also brings port a bit closer to graphics/ImageMagick

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/02/27 08:04:51 bernd Exp $
d5 1
a5 1
DISTNAME=	GraphicsMagick-1.1.14
d8 3
a10 3
SHARED_LIBS +=	GraphicsMagick       0.3      # .1.14
SHARED_LIBS +=	GraphicsMagick++     0.2      # .0.4
SHARED_LIBS +=	GraphicsMagickWand   0.2      # .1.3
d32 1
a32 3
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.61
USE_LIBTOOL=		Yes
a34 1
			--without-dot \
d74 8
@


1.7
log
@Missing minor library bump. Sorry.

Noticed by and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/02/26 18:45:28 bernd Exp $
a2 2
HOMEPAGE=	http://www.graphicsmagick.org/
CATEGORIES=	devel graphics
a3 2
DISTNAME=	GraphicsMagick-1.1.11
PKGNAME=	${DISTNAME}p0
d5 6
a10 3
SHARED_LIBS +=	GraphicsMagick       0.2      # .1.11
SHARED_LIBS +=	GraphicsMagickWand   0.1      # .0.4
SHARED_LIBS +=	GraphicsMagick++     0.1      # .1.3
d12 2
a13 2
MASTER_SITES=	ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/ \
		${MASTER_SITE_SOURCEFORGE:=graphicsmagick/}
a14 1
# very detailed licence info on:
a15 1

d21 14
a41 2
			--without-perl \
			--without-wmf \
d43 3
a54 14
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.61
USE_LIBTOOL=		Yes

WANTLIB+=		c iconv jpeg m z
LIB_DEPENDS=		bz2.>=10::archivers/bzip2 \
			jbig.>=1.2::graphics/jbigkit \
			png.>=4::graphics/png \
			tiff.>=36::graphics/tiff \
			xml2.>=9::textproc/libxml \
			lcms.>=1::graphics/lcms \
			jasper.>=1::graphics/jasper


a57 1
CONFIGURE_ARGS+=	--without-x --without-ttf
d59 3
d63 3
d67 1
a68 1
USE_X11=		Yes
d70 1
a70 2
BUILD_DEPENDS+=		:transfig-*:print/transfig
WANTLIB+=		ICE SM X11 Xau Xdmcp Xext freetype
d72 5
@


1.6
log
@Security update to GraphicsMagick-1.1.11.

CVE-2007-4985, CVE-2007-4986, CVE-2007-4987, CVE-2007-4988

More info:
http://secunia.com/advisories/29094/

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/20 14:29:06 steven Exp $
d7 1
d9 1
a9 1
SHARED_LIBS +=	GraphicsMagick       0.1      # .1.11
@


1.5
log
@update to 1.1.10, fixes image rotation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/09/19 05:58:14 steven Exp $
d6 1
a6 1
DISTNAME=	GraphicsMagick-1.1.10
d8 1
a8 1
SHARED_LIBS +=	GraphicsMagick       0.1      # .1.10
@


1.4
log
@update to 1.1.9

tested by sthen@@ and merdely@@, ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/09/15 20:09:40 simon Exp $
d6 1
a6 1
DISTNAME=	GraphicsMagick-1.1.9
d8 1
a8 1
SHARED_LIBS +=	GraphicsMagick       0.1      # .1.9
@


1.3
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/10/30 09:25:10 brad Exp $
d6 1
a6 1
DISTNAME=	GraphicsMagick-1.1.7
d8 3
a10 3
SHARED_LIBS +=	GraphicsMagick       0.0      # .1.7
SHARED_LIBS +=	GraphicsMagickWand   0.0      # .0.3
SHARED_LIBS +=	GraphicsMagick++     0.0      # .1.2
d43 1
a43 1
AUTOCONF_VERSION=	2.59
d67 1
a67 1
WANTLIB+=		ICE SM X11 Xext freetype
@


1.2
log
@add sourceforge mirrors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/10/29 10:53:40 espie Exp $
d5 1
a5 1
COMMENT=	"image processing tools with stable ABI"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d12 2
a13 1
MASTER_SITES=	ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/
@


1.1.1.1
log
@GraphicsMagick is a fork of ImageMagick intended to have a more stable API
for 3rd party developers.

This port is mostly a clone of the ImageMagick port.

It's a prerequisite for koffice 1.6

@
text
@@
