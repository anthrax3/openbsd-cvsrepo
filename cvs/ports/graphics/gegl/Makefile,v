head	1.57;
access;
symbols
	OPENBSD_6_1:1.54.0.4
	OPENBSD_6_1_BASE:1.54
	OPENBSD_6_0:1.54.0.2
	OPENBSD_6_0_BASE:1.54
	OPENBSD_5_9:1.52.0.2
	OPENBSD_5_9_BASE:1.52
	OPENBSD_5_8:1.51.0.4
	OPENBSD_5_8_BASE:1.51
	OPENBSD_5_7:1.47.0.2
	OPENBSD_5_7_BASE:1.47
	OPENBSD_5_6:1.45.0.2
	OPENBSD_5_6_BASE:1.45
	OPENBSD_5_5:1.43.0.2
	OPENBSD_5_5_BASE:1.43
	OPENBSD_5_4:1.42.0.2
	OPENBSD_5_4_BASE:1.42
	OPENBSD_5_3:1.40.0.2
	OPENBSD_5_3_BASE:1.40
	OPENBSD_5_2:1.37.0.2
	OPENBSD_5_2_BASE:1.37
	OPENBSD_5_1_BASE:1.36
	OPENBSD_5_1:1.36.0.2
	OPENBSD_5_0:1.31.0.2
	OPENBSD_5_0_BASE:1.31
	OPENBSD_4_9:1.26.0.2
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.12.0.4
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.2
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.7.0.2
	OPENBSD_4_4_BASE:1.7
	ajacoutot_20080410:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.57
date	2017.07.16.19.18.56;	author espie;	state Exp;
branches;
next	1.56;
commitid	tt0GhWK5c4uf9ILG;

1.56
date	2017.05.17.09.58.26;	author ajacoutot;	state Exp;
branches;
next	1.55;
commitid	U0Wi40YTxIUOm3DD;

1.55
date	2017.04.10.11.46.20;	author sthen;	state Exp;
branches;
next	1.54;
commitid	BLsh88fJB8thZTwY;

1.54
date	2016.03.18.23.12.17;	author naddy;	state Exp;
branches;
next	1.53;
commitid	KZAl4KEiw6a3Jixw;

1.53
date	2016.03.11.20.28.26;	author naddy;	state Exp;
branches;
next	1.52;
commitid	UYLP8TE6V7RS2GhJ;

1.52
date	2015.09.22.18.47.52;	author pascal;	state Exp;
branches;
next	1.51;
commitid	rLFV4JCgkelUH8yf;

1.51
date	2015.06.05.11.52.33;	author ajacoutot;	state Exp;
branches;
next	1.50;
commitid	QplFWp1KJHpNR1ju;

1.50
date	2015.04.28.06.35.06;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	tr3XsOq5EJv6iti7;

1.49
date	2015.04.26.08.30.17;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	scnEuBL8Q3pijZna;

1.48
date	2015.04.03.22.48.15;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	uuuQhtuaGRruwxtj;

1.47
date	2014.09.13.16.36.53;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	N2TalFGi4jKRwS2u;

1.46
date	2014.08.20.07.28.03;	author ajacoutot;	state Exp;
branches;
next	1.45;
commitid	jC0iuOBGOyvDoAk3;

1.45
date	2014.04.07.06.50.40;	author brad;	state Exp;
branches;
next	1.44;

1.44
date	2014.04.01.14.52.10;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2013.08.26.13.16.20;	author landry;	state Exp;
branches;
next	1.42;

1.42
date	2013.03.21.08.45.18;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2013.03.11.11.10.52;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2012.11.06.12.59.09;	author jasper;	state Exp;
branches;
next	1.39;

1.39
date	2012.10.20.20.05.44;	author naddy;	state Exp;
branches;
next	1.38;

1.38
date	2012.09.21.14.48.05;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2012.06.06.07.58.57;	author giovanni;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2011.12.28.09.31.58;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2011.12.10.09.13.43;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2011.11.02.21.07.16;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2011.11.01.20.30.49;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2011.09.16.10.02.36;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2011.06.24.11.17.05;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2011.06.02.17.09.31;	author kili;	state Exp;
branches;
next	1.29;

1.29
date	2011.04.18.23.11.53;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2011.03.29.23.22.17;	author jakemsr;	state Exp;
branches;
next	1.27;

1.27
date	2011.03.02.06.43.25;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2010.11.17.08.05.13;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.11.19.41.31;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.09.18.22.26;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.24.21.21.00;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.10.11.08.14.42;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2010.09.30.07.44.20;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2010.09.28.10.55.46;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2010.08.25.23.27.21;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.05.26.21.48.19;	author jakemsr;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.24.13.07.54;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.10.14.14.19.37;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.08.10.06.31.44;	author kili;	state Exp;
branches;
next	1.14;

1.14
date	2009.07.19.22.49.12;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2009.07.19.12.42.04;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.01.03.14.58.42;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2008.11.18.13.45.41;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2008.10.27.21.39.27;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2008.10.27.13.15.58;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2008.10.03.10.13.48;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2008.07.13.12.09.14;	author sturm;	state Exp;
branches;
next	1.6;

1.6
date	2008.07.09.02.09.59;	author jakemsr;	state Exp;
branches;
next	1.5;

1.5
date	2008.07.02.14.03.40;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2008.06.29.20.44.51;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.04.11.20.38.29;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.11.11.18.01;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.10.14.12.35;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.04.10.14.12.35;	author ajacoutot;	state Exp;
branches;
next	;

1.37.2.1
date	2012.11.06.12.59.20;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.57
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.56 2017/05/17 09:58:26 ajacoutot Exp $

PORTROACH=		limit:^0\.2

COMMENT-main=		graph based image processing framework
COMMENT-plugins=	gegl plugins

API_VERSION=		0.2
SUBST_VARS=		API_VERSION

V=			${API_VERSION}.0
DISTNAME=		gegl-${V}
EXTRACT_SUFX=		.tar.bz2

CATEGORIES=		graphics devel

PKGNAME-main=		gegl-${V}
PKGNAME-plugins=	gegl-plugins-${V}

REVISION-main=		3
REVISION-plugins=	6

SHARED_LIBS +=  gegl-${API_VERSION}		0.0 # 199.1


HOMEPAGE=		http://gegl.org/

# GPLv3/LGPLv3
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		http://download.gimp.org/pub/gegl/${V:R}/

MULTI_PACKAGES=		-main -plugins

WANTLIB += ffi gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 m pcre z

MODULES=		devel/gettext \
			textproc/intltool

USE_GMAKE=		Yes

WANTLIB-main +=	${WANTLIB}
WANTLIB-main += X11 Xrender c cairo croco-0.6 expat fontconfig
WANTLIB-main += freetype gdk_pixbuf-2.0 jpeg pango-1.0 lzma
WANTLIB-main += pangocairo-1.0 pangoft2-1.0 pixman-1 png pthread
WANTLIB-main += pthread-stubs xcb xml2 xcb-render rsvg-2 babl-0.1
WANTLIB-main += Xext jasper xcb-shm graphite2 harfbuzz

BUILD_DEPENDS=		graphics/exiv2

LIB_DEPENDS-main= 	${LIB_DEPENDS} \
			x11/gnome/librsvg \
			graphics/babl>=0.1.10

WANTLIB-plugins += ${WANTLIB} ${COMPILER_LIBCXX} ${COMPILER_LIBCXX}
WANTLIB-plugins += gsm mp3lame ogg IlmImf avutil bz2 speex
WANTLIB-plugins += vorbis vorbisenc x264 avcodec avformat vpx
WANTLIB-plugins += Half Iex IexMath IlmThread Imath xvidcore
WANTLIB-plugins += crypto opus pthread ssl swresample x265

RUN_DEPENDS-plugins= 	${BUILD_PKGPATH},-main
LIB_DEPENDS-plugins= 	${LIB_DEPENDS} \
			graphics/ilmbase \
			graphics/openexr \
			graphics/ffmpeg

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib" \
			ac_cv_header_execinfo_h="no" \
			ac_cv_path_ASCIIDOC="no" \
			ac_cv_path_W3M="no" \
			ac_cv_path_ENSCRIPT="no" \
			ac_cv_prog_RUBY="" \
			ac_cv_path_DOT="no"

CONFIGURE_ARGS=		--disable-docs \
			--without-umfpack \
			--without-sdl \
			--without-lua \
			--without-libopenraw \
			--without-graphviz \
			--without-libv4l \
			--without-libspiro

# be safe until proven stable
CONFIGURE_ARGS +=	--enable-mmx \
			--disable-sse

# https://bugzilla.gnome.org/show_bug.cgi?id=673580
CONFIGURE_ARGS +=	--without-vala \
			--disable-introspection

post-install:
	rm ${PREFIX}/lib/gegl-0.2/*.{a,la}

.include <bsd.port.mk>
@


1.56
log
@Sync WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2017/04/10 11:46:20 sthen Exp $
d56 1
a56 1
WANTLIB-plugins += ${WANTLIB} ${LIBCXX} ${LIBECXX}
@


1.55
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/03/18 23:12:17 naddy Exp $
d21 1
a21 1
REVISION-plugins=	5
d56 1
a56 1
WANTLIB-plugins += ${WANTLIB}
d60 1
a60 1
WANTLIB-plugins += crypto opus pthread ${LIBCXX} ssl swresample x265
@


1.54
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/03/11 20:28:26 naddy Exp $
d60 1
a60 1
WANTLIB-plugins += crypto opus pthread stdc++ ssl swresample x265
@


1.53
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/09/22 18:47:52 pascal Exp $
a3 2

SHARED_ONLY=		Yes
@


1.52
log
@sync WANTLIB after openexr update

ok zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/06/05 11:52:33 ajacoutot Exp $
d80 1
a80 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--disable-docs \
@


1.51
log
@PORTROACH annotation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/04/28 06:35:06 ajacoutot Exp $
d23 1
a23 1
REVISION-plugins=	4
d61 1
a61 1
WANTLIB-plugins += Half Iex IlmThread Imath xvidcore
@


1.50
log
@Cope with FFmpeg 20150412.

from brad
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.49 2015/04/26 08:30:17 ajacoutot Exp $
@


1.49
log
@Don't pick up libexecinfo.
breakage reoported by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/04/03 22:48:15 ajacoutot Exp $
d21 1
a21 1
REVISION-plugins=	3
d57 1
a57 2
WANTLIB-plugins += gsm mp3lame ogg orc-0.4 IlmImf avutil bz2
WANTLIB-plugins += schroedinger-1.0 speex theoradec theoraenc
@


1.48
log
@Make this Makefile readable by a huma being.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/09/13 16:36:53 ajacoutot Exp $
d72 1
@


1.47
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/08/20 07:28:03 ajacoutot Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
d5 2
a6 2
COMMENT-main=	graph based image processing framework
COMMENT-plugins=gegl plugins
d8 2
a9 4
API_VERSION=	0.2
V=		${API_VERSION}.0
DISTNAME=	gegl-${V}
CATEGORIES=	graphics devel
d11 3
a13 2
PKGNAME-main=	gegl-${V}
PKGNAME-plugins=gegl-plugins-${V}
d15 7
a21 2
REVISION-main=		2
REVISION-plugins=	2
a24 1
EXTRACT_SUFX=	.tar.bz2
d26 1
a26 1
HOMEPAGE=	http://gegl.org/
d31 1
a31 1
MASTER_SITES=	http://download.gimp.org/pub/gegl/${V:R}/
d33 1
a33 1
MULTI_PACKAGES=	-main -plugins
d35 2
a36 2
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 m pcre z execinfo ffi
d38 2
a39 2
MODULES=	devel/gettext \
		textproc/intltool
d41 1
a41 3
USE_GMAKE=	Yes

SUBST_VARS=	API_VERSION
d45 1
a45 1
WANTLIB-main += freetype gdk_pixbuf-2.0 jpeg pango-1.0
d50 1
a50 2
BUILD_DEPENDS=	graphics/exiv2
LIB_DEPENDS=	devel/libexecinfo
d61 1
a61 1
WANTLIB-plugins += crypto opus pthread stdc++ ssl
d67 1
a67 1
			graphics/ffmpeg>=20130319
d69 18
a86 23
CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -lexecinfo" \
		ac_cv_path_ASCIIDOC="no" \
		ac_cv_path_W3M="no" \
		ac_cv_path_ENSCRIPT="no" \
		ac_cv_prog_RUBY="" \
		ac_cv_path_DOT="no"
CONFIGURE_ARGS+= ${CONFIGURE_SHARED} \
		--disable-docs \
		--without-umfpack \
		--without-sdl \
		--without-lua \
		--without-libopenraw \
		--without-graphviz \
		--without-libv4l \
		--without-libspiro

# XXX https://bugzilla.gnome.org/show_bug.cgi?id=673580
#BUILD_DEPENDS += lang/vala \
#		devel/gobject-introspection
CONFIGURE_ARGS += --without-vala \
		--disable-introspection
d89 6
a94 2
CONFIGURE_ARGS+= --enable-mmx \
		--disable-sse
@


1.46
log
@Fix MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/04/07 06:50:40 brad Exp $
a77 1
		--disable-gtk-doc \
a85 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.45
log
@Update gegl to deal with newer FFmpeg API.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/04/01 14:52:10 ajacoutot Exp $
d28 1
a28 3
MASTER_SITES=	ftp://ftp.gimp.org/pub/gegl/${V:R}/ \
		ftp://ftp.sunet.se/pub/gnu/babl/${V:R}/ \
		ftp://ftp.cs.umn.edu/pub/gimp/pub/babl/${V:R}/
@


1.44
log
@Some PLISTs have brazillions of @@comment entries for .la files; sanitize
some of the ports a bit and rm at post-install time, it is way simpler to
maintain.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/08/26 13:16:20 landry Exp $
d17 1
a17 1
REVISION-plugins=	1
d69 1
a69 1
			graphics/ffmpeg>=20100512
@


1.43
log
@Add missing hidden BDEP on graphics/exiv2. Sync WANTLIB while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/03/21 08:45:18 ajacoutot Exp $
d16 2
a17 2
REVISION-main=	1
REVISION-plugins=	0
a39 2
LIBTOOL_FLAGS=	--tag=disable-static

a80 1
		--disable-static \
d105 3
@


1.42
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/03/11 11:10:52 espie Exp $
d16 2
a17 1
REVISION-main=	0
d35 1
a35 1
WANTLIB += gthread-2.0 m pcre z execinfo ffi stdc++
d47 1
a47 1
WANTLIB-main += X11 Xau Xdmcp Xrender c cairo croco-0.6 expat fontconfig
d51 1
a51 1
WANTLIB-main += GL Xdamage Xext Xfixes Xxf86vm drm jasper xcb-shm
d53 1
d65 1
@


1.41
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2012/11/06 12:59:09 jasper Exp $
a38 1
USE_LIBTOOL=	Yes
@


1.40
log
@Security fix for
CVE-2012-4433 gegl: Integer overflow, leading to heap-based buffer overflow by parsing PPM image headers

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2012/10/20 20:05:44 naddy Exp $
a25 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.39
log
@requires intltool to build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/09/21 14:48:05 ajacoutot Exp $
d15 2
@


1.38
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/06/06 07:58:57 giovanni Exp $
d37 2
a38 1
MODULES=	devel/gettext
@


1.37
log
@
Update to 0.2.0, initial diff from ajacoutot@@
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/12/28 09:31:58 ajacoutot Exp $
d90 6
@


1.37.2.1
log
@Security fix for
CVE-2012-4433 gegl: Integer overflow, leading to heap-based buffer overflow by parsing PPM image headers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/06/06 07:58:57 giovanni Exp $
a14 2

REVISION-main=	0
@


1.36
log
@Move exr-save to -plugins where it belongs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/12/10 09:13:43 ajacoutot Exp $
d8 2
a9 1
V=		0.1.8
d16 1
a16 4
REVISION-main=	0
REVISION-plugins=0

SHARED_LIBS=	gegl-0.1	1.1 # .105.1
d44 2
d50 1
a50 2
WANTLIB-main += pthread-stubs xcb xml2 xcb-render
WANTLIB-main += rsvg-2 babl-0.1 Half Iex IlmThread Imath
a52 3
BUILD_DEPENDS=	devel/gobject-introspection \
		lang/vala

d57 1
a57 2
			graphics/babl \
			graphics/ilmbase
d60 1
a60 1
WANTLIB-plugins += Half Iex IlmThread Imath gsm mp3lame ogg orc-0.4
d62 2
a63 2
WANTLIB-plugins += vorbis vorbisenc x264 IlmImf avcodec avformat
WANTLIB-plugins += avutil bz2 vpx 
d67 1
d77 2
a78 1
		ac_cv_prog_RUBY=""
d90 6
@


1.35
log
@Bugfix update to gegl-0.1.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/11/02 21:07:16 naddy Exp $
d14 3
@


1.34
log
@missing bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/11/01 20:30:49 jasper Exp $
d8 1
a8 1
V=		0.1.6
a9 1
REVISION=	0
a13 1
REVISION-plugins=4
d15 1
a15 1
SHARED_LIBS=	gegl-0.1	1.0 # .105.1
d48 1
a48 1
WANTLIB-main += rsvg-2 babl-0.1
d51 3
d58 2
a59 1
			graphics/babl
d83 1
@


1.33
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/09/16 10:02:36 espie Exp $
d15 1
a15 1
REVISION-plugins=3
@


1.32
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/06/24 11:17:05 sthen Exp $
d10 1
d36 1
a36 1
WANTLIB += gthread-2.0 m pcre z execinfo
d61 1
a61 1
WANTLIB-plugins += schroedinger-1.0 speex stdc++ theoradec theoraenc
d63 1
a63 1
WANTLIB-plugins += avutil bz2 vpx
@


1.31
log
@Chase ffmpeg dep changes. Mostly from Brad ok dcoppa@@, plus opencv from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/06/02 17:09:31 kili Exp $
d14 1
a14 1
REVISION-plugins=2
@


1.30
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/04/18 23:11:53 sthen Exp $
d14 1
a14 1
REVISION-plugins=1
d59 4
a62 4
WANTLIB-plugins += Half Iex IlmThread Imath faac gsm mp3lame ogg
WANTLIB-plugins += orc-0.4 schroedinger-1.0 speex stdc++ theoradec
WANTLIB-plugins += theoraenc vorbis vorbisenc x264 IlmImf avcodec
WANTLIB-plugins += avformat avutil bz2 vpx
@


1.29
log
@sync WANTLIB (re: ffmpeg update), from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/03/29 23:22:17 jakemsr Exp $
a77 1
		--disable-silent-rules \
@


1.28
log
@more ports that need faad removed from WANTLIB after ffmpeg update,
as noted on ports@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/03/02 06:43:25 ajacoutot Exp $
d14 1
a14 1
REVISION-plugins=0
d60 3
a62 3
WANTLIB-plugins += orc-0.4 schroedinger-1.0 speex stdc++ theora
WANTLIB-plugins += vorbis vorbisenc x264 IlmImf>=4 avcodec>=14
WANTLIB-plugins += avformat avutil bz2
@


1.27
log
@Update to gegl-0.1.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/11/17 08:05:13 espie Exp $
d14 1
d59 1
a59 1
WANTLIB-plugins += Half Iex IlmThread Imath faac faad gsm mp3lame ogg
@


1.26
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/11 19:41:31 espie Exp $
d8 1
a8 1
V=		0.1.2
a12 1
REVISION-main=	2
a13 1
REVISION-plugins=	1
d15 1
a15 1
SHARED_LIBS=	gegl-0.1	0.0 # .101.1
d27 3
a29 1
MASTER_SITES=	ftp://ftp.gimp.org/pub/gegl/${V:R}/
d33 1
a33 1
WANTLIB += bz2 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
d47 1
a47 1
WANTLIB-main += pthread-stubs xcb xml2 xcb-render xcb-render-util
d49 1
d61 1
a61 1
WANTLIB-plugins += avformat>=13 avutil>=7
d63 2
a64 2
RUN_DEPENDS-plugins= ${BUILD_PKGPATH},-main
LIB_DEPENDS-plugins	= ${LIB_DEPENDS} \
d76 2
a78 1
		--disable-silent-rules \
a79 1
		--disable-gtk-doc \
@


1.25
log
@missed execinfo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/09 18:22:26 espie Exp $
d50 1
a50 1
LIB_DEPENDS=	::devel/libexecinfo
d53 2
a54 2
			::x11/gnome/librsvg \
			::graphics/babl
d59 2
a60 2
WANTLIB-plugins += vorbis vorbisenc x264 IlmImf.>=4 avcodec.>=14
WANTLIB-plugins += avformat.>=13 avutil.>=7
d62 1
a62 1
RUN_DEPENDS-plugins= ::${BUILD_PKGPATH},-main
d64 2
a65 2
			::graphics/openexr \
			:ffmpeg->=20100512:graphics/ffmpeg
@


1.24
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/10/24 21:21:00 ajacoutot Exp $
d34 1
a34 1
WANTLIB += gthread-2.0 m pcre z
d50 1
a50 1
LIB_DEPENDS=	execinfo::devel/libexecinfo
@


1.23
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/10/11 08:14:42 jasper Exp $
d48 1
d52 3
a54 3
LIB_DEPENDS-main= ${LIB_DEPENDS} \
		rsvg-2::x11/gnome/librsvg \
		babl-0.1::graphics/babl
d59 2
a60 1
WANTLIB-plugins += vorbis vorbisenc x264
d63 3
a65 3
LIB_DEPENDS-plugins= ${LIB_DEPENDS} \
		IlmImf.>=4::graphics/openexr \
		avcodec.>=14,avformat.>=13,avutil.>=7:ffmpeg->=20100512:graphics/ffmpeg
@


1.22
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/09/30 07:44:20 landry Exp $
a41 1
USE_X11=	Yes
@


1.21
log
@Bump -main after gtk+2/gdk-pixbuf split
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/09/28 10:55:46 landry Exp $
d13 1
a13 1
REVISION-main=	1
d46 1
a46 1
WANTLIB-main += freetype gdk_pixbuf-2.0 glitz jpeg pango-1.0
@


1.20
log
@Fix WANTLIB after librsvg update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/08/25 23:27:21 sthen Exp $
d13 1
a13 1
REVISION-main=	0
@


1.19
log
@- chase the library change in multimedia/schroedinger; oil->orc
- add various other missing WANTLIB (and LIB_DEPENDS in some cases)
- while there move PKGNAME=..pX to REVISION, and move some ports
to new-style LIB_DEPENDS

original diff from Brad, extensive checking by me (clean build of everything
related to liboil).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/05/26 21:48:19 jakemsr Exp $
d13 1
d46 1
a46 1
WANTLIB-main += freetype gdk_pixbuf-2.0 glitz gsf-1 jpeg pango-1.0
@


1.18
log
@wantlib/libdepends changes due to ffmpeg update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/04/24 13:07:54 ajacoutot Exp $
d13 2
a14 1
PKGNAME-plugins=gegl-plugins-${V}p0
d57 1
a57 1
WANTLIB-plugins += oil-0.3 schroedinger-1.0 speex stdc++ theora
@


1.17
log
@Update to gegl-0.1.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/10/14 14:19:37 ajacoutot Exp $
d13 1
a13 1
PKGNAME-plugins=gegl-plugins-${V}
d55 3
a57 3
WANTLIB-plugins += Half Iex IlmThread Imath a52 faac faad mp3lame ogg
WANTLIB-plugins += oil-0.3 schroedinger-1.0 stdc++ theora vorbis vorbisenc
WANTLIB-plugins += x264
d62 1
a62 1
		avcodec.>=13.1,avformat.>=12,avutil.>=6:ffmpeg->=20080620p10:graphics/ffmpeg
@


1.16
log
@Update to gegl-0.1.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/08/10 06:31:44 kili Exp $
d8 1
a8 1
V=		0.1.0
d15 1
a15 1
SHARED_LIBS=	gegl-0.0	3.0 # .100.0
d46 4
a49 1
WANTLIB-main += pthread-stubs xcb xml2
d52 1
a52 1
		babl-0.0::graphics/babl
d58 1
d66 1
a66 1
		LDFLAGS="-L${LOCALBASE}/lib" \
d73 1
@


1.15
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/07/19 22:49:12 sthen Exp $
d8 1
a8 1
V=		0.0.22
d12 2
a13 2
PKGNAME-main=	gegl-${V}p0
PKGNAME-plugins=gegl-plugins-${V}p2
d15 1
a15 1
SHARED_LIBS=	gegl-0.0	2.0 # .22.0
d31 2
a32 2
WANTLIB=	X11 Xau Xdmcp Xext Xrandr Xrender glib-2.0 gmodule-2.0 \
		gio-2.0 gobject-2.0 gthread-2.0 m pcre pthread-stubs xcb z
d42 5
a46 5
WANTLIB-main=	${WANTLIB} Xcomposite Xcursor Xdamage Xfixes Xi \
		Xinerama atk-1.0 bz2 c cairo croco-0.6 expat \
		fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 \
		glitz gsf-1 gtk-x11-2.0 jpeg pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread xml2
d51 4
a54 3
WANTLIB-plugins=${WANTLIB} Half Iex IlmThread Imath SDL a52 bz2 faac faad \
		mp3lame ogg sndio stdc++ theora usbhid vorbis vorbisenc \
		x264 oil-0.3 schroedinger-1.0
d67 1
a67 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
d71 10
a80 4
		--with-libopenraw=no \
		--with-graphviz=no \
		--with-libv4l=no \
		--with-libspiro=no
@


1.14
log
@set the pkgspec for LIB_DEPENDS on ffmpeg to a version with schroedinger
included, so the tools know that old ffmpeg versions won't satisfy the
dependencies listed in WANTLIB.

this way, attempting to install these packages with old ffmpeg will
no longer give you a cryptic error message as seen by dhill@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/07/19 12:42:04 sthen Exp $
d12 2
a13 2
PKGNAME-main=	gegl-${V}
PKGNAME-plugins=gegl-plugins-${V}p1
d32 1
a32 1
		gio-2.0 gobject-2.0 gthread-2.0 m pcre z
@


1.13
log
@add schroedinger/oil WANTLIB, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/01/03 14:58:42 ajacoutot Exp $
d13 1
a13 1
PKGNAME-plugins=gegl-plugins-${V}p0
d57 1
a57 1
		avcodec.>=11,avformat,avutil::graphics/ffmpeg
@


1.12
log
@- update to gegl-0.0.22
(needed for upcoming gnome-scan update)

gimp is still happy with this update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/11/18 13:45:41 landry Exp $
d13 1
a13 1
PKGNAME-plugins=gegl-plugins-${V}
d53 1
a53 1
		x264
@


1.11
log
@Fix after no_gnome FLAVOR removal in x11/gnome/librsvg.
While here, shrink/reorganize WANTLIB and bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/10/27 21:39:27 ajacoutot Exp $
d8 1
a8 1
V=		0.0.20
d12 2
a13 2
PKGNAME-main=	gegl-${V}p1
PKGNAME-plugins=gegl-plugins-${V}p0
d15 1
a15 1
SHARED_LIBS=	gegl-0.0	1.1 # .20.0
d52 2
a53 1
		mp3lame ogg stdc++ theora usbhid vorbis vorbisenc x264
d65 1
a65 1
		ac_cv_path_GRAPHVIZ="no"
d69 5
a73 1
		--disable-gtk-doc
@


1.10
log
@- fix build with latest glib2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/10/27 13:15:58 ajacoutot Exp $
d12 1
a12 1
PKGNAME-main=	gegl-${V}p0
d42 5
a46 6
WANTLIB-main=	${WANTLIB} ORBit-2 Xcomposite Xcursor Xdamage Xfixes \
		Xi Xinerama atk-1.0 bz2 c cairo croco-0.6 crypto \
		dbus-1 dbus-glib-1 expat fontconfig freetype gconf-2 \
		gdk-x11-2.0 gdk_pixbuf-2.0 glitz gnomevfs-2 gsf-1 \
		gtk-x11-2.0 jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png pthread ssl util xml2
d48 1
a48 1
		rsvg-2:librsvg-*-!no_gnome:x11/gnome/librsvg \
@


1.9
log
@- gegl 0.0.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/10/03 10:13:48 ajacoutot Exp $
d12 2
a13 2
PKGNAME-main=	gegl-${V}
PKGNAME-plugins=gegl-plugins-${V}
@


1.8
log
@- update babl to version 0.0.22

from Giovanni Bechis
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/07/13 12:09:14 sturm Exp $
d8 1
a8 1
V=		0.0.18
d15 1
a15 1
SHARED_LIBS=	gegl-0.0	1.0 # .18.0
@


1.7
log
@missing PKGNAME bump after adding @@bin to PLIST-main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/07/09 02:09:59 jakemsr Exp $
d8 1
a8 1
V=		0.0.16
d12 2
a13 2
PKGNAME-main=	gegl-${V}p2
PKGNAME-plugins=gegl-plugins-${V}p2
d15 1
a15 1
SHARED_LIBS=	gegl-0.0	0.0 # .16.0
d32 1
a32 1
		gobject-2.0 gthread-2.0 m pcre z
@


1.6
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* add @@bin markers in PLISTs
* bump PKGNAMEs

feedback/ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/07/02 14:03:40 merdely Exp $
d12 1
a12 1
PKGNAME-main=	gegl-${V}p1
@


1.5
log
@Implement the same fix jakemsr@@ used to make audio/jack work with alpha.
(va_list cannot be NULL)
Bump -main subpackage.

input from jakemsr@@
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/06/29 20:44:51 sthen Exp $
d13 1
a13 1
PKGNAME-plugins=gegl-plugins-${V}p1
d52 2
a53 2
WANTLIB-plugins=${WANTLIB} Half Iex IlmThread Imath SDL a52 faac faad mp3lame \
		ogg stdc++ theora usbhid vorbis vorbisenc x264
@


1.4
log
@sync WANTLIB following cairo update. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/04/11 20:38:29 ajacoutot Exp $
d12 1
a12 1
PKGNAME-main=	gegl-${V}p0
@


1.3
log
@- fix WANTLIB after ilmbase dependency_libs change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/04/11 11:18:01 jasper Exp $
d12 1
a12 1
PKGNAME-main=	gegl-${V}
d47 1
a47 1
		png pthread ssl util xml2
@


1.2
log
@- fix WANTLIB/LIB_DEPENDS after recent openexr update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/04/10 14:12:35 ajacoutot Exp $
d13 1
a13 1
PKGNAME-plugins=gegl-plugins-${V}p0
d53 1
a53 1
		ogg theora usbhid vorbis vorbisenc x264
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d13 1
a13 1
PKGNAME-plugins=gegl-plugins-${V}
d52 2
a53 2
WANTLIB-plugins=${WANTLIB} SDL a52 faac faad mp3lame ogg theora usbhid \
		vorbis vorbisenc x264
d56 1
a56 1
		Half.>=3,Iex,IlmImf,Imath::graphics/openexr \
@


1.1.1.1
log
@Import gegl-0.0.16

GEGL (GEneric Graphics Library) is a graph based image processing
framework.
GEGL's original design was made to scratch GIMP's itches for a new
compositing and processing core. This core is being designed to have
minimal dependencies and a simple well defined API.

ok jasper@@
@
text
@@
