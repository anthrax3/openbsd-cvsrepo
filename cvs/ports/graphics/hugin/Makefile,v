head	1.53;
access;
symbols
	OPENBSD_6_1:1.50.0.2
	OPENBSD_6_1_BASE:1.50
	OPENBSD_6_0:1.47.0.2
	OPENBSD_6_0_BASE:1.47
	OPENBSD_5_9:1.45.0.2
	OPENBSD_5_9_BASE:1.45
	OPENBSD_5_8:1.44.0.4
	OPENBSD_5_8_BASE:1.44
	OPENBSD_5_7:1.42.0.2
	OPENBSD_5_7_BASE:1.42
	OPENBSD_5_6:1.41.0.2
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.39.0.2
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.36.0.2
	OPENBSD_5_4_BASE:1.36
	OPENBSD_5_3:1.33.0.2
	OPENBSD_5_3_BASE:1.33
	OPENBSD_5_2:1.27.0.2
	OPENBSD_5_2_BASE:1.27
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.2
	OPENBSD_5_0:1.25.0.2
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.23.0.2
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	sthen_20090419:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.53
date	2017.05.31.08.08.16;	author espie;	state Exp;
branches;
next	1.52;
commitid	ij92FtFXiSiT1ani;

1.52
date	2017.05.29.15.43.21;	author espie;	state Exp;
branches;
next	1.51;
commitid	vDZY5oFzOJGoubRB;

1.51
date	2017.05.28.19.29.27;	author espie;	state Exp;
branches;
next	1.50;
commitid	il4pdJ8ECIdaKMF3;

1.50
date	2016.11.24.19.21.27;	author sthen;	state Exp;
branches;
next	1.49;
commitid	1ApBSLZ38M4M1WUQ;

1.49
date	2016.11.24.15.16.04;	author kirby;	state Exp;
branches;
next	1.48;
commitid	M2zbljHZooGSGfJ3;

1.48
date	2016.11.24.08.20.38;	author kirby;	state Exp;
branches;
next	1.47;
commitid	ESlZzdVWWhUKvu7G;

1.47
date	2016.07.06.21.25.23;	author sthen;	state Exp;
branches;
next	1.46;
commitid	mkwl1ywikYPdHba2;

1.46
date	2016.03.20.16.12.24;	author naddy;	state Exp;
branches;
next	1.45;
commitid	guiZq8cnNbVyyHzx;

1.45
date	2015.10.10.08.44.39;	author kirby;	state Exp;
branches;
next	1.44;
commitid	FRVO5W98WoAPh1kv;

1.44
date	2015.07.01.08.42.52;	author jasper;	state Exp;
branches;
next	1.43;
commitid	rDivgtUROSRGsCxk;

1.43
date	2015.03.27.08.11.28;	author ajacoutot;	state Exp;
branches;
next	1.42;
commitid	mHt3hIg3nxq5XDcy;

1.42
date	2014.11.07.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	QYJaNcIko4VHoTIl;

1.41
date	2014.07.11.22.17.08;	author sthen;	state Exp;
branches;
next	1.40;
commitid	IvQiaWga6vh22SEx;

1.40
date	2014.07.11.21.25.23;	author kirby;	state Exp;
branches;
next	1.39;
commitid	oL1Z0yh1jP0kXt8k;

1.39
date	2014.01.14.04.20.20;	author kirby;	state Exp;
branches;
next	1.38;

1.38
date	2013.11.25.14.16.22;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2013.08.20.22.05.55;	author zhuk;	state Exp;
branches;
next	1.36;

1.36
date	2013.05.14.22.55.11;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2013.04.28.08.18.55;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2013.03.11.11.10.53;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2012.12.21.18.50.37;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2012.11.18.16.55.27;	author dcoppa;	state Exp;
branches;
next	1.31;

1.31
date	2012.11.13.16.11.17;	author dcoppa;	state Exp;
branches;
next	1.30;

1.30
date	2012.11.06.09.37.14;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2012.11.05.11.15.11;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2012.10.12.21.44.51;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2012.03.29.13.38.31;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2011.09.16.10.02.37;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2011.05.30.09.06.28;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2011.03.02.08.30.27;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.17.08.05.14;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.10.27.13.25.01;	author steven;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.24.21.21.01;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.20.15.32.40;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.18.18.13.14;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.06.10.08.24.49;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.06.07.20.36.33;	author edd;	state Exp;
branches;
next	1.16;

1.16
date	2010.06.05.12.38.48;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.05.29.01.23.55;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.04.15.20.47.17;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2010.04.13.09.03.08;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.12.22.16.06.41;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.10.06.31.44;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2009.07.18.11.29.11;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.07.14.10.28.25;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.06.21.15.54.31;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.06.08.20.06.02;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.06.04.21.12.07;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.04.16.21.45;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.06.03.13.45.14;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.05.09.19.28.55;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.29.23.48.53;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.19.11.18.40;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.04.19.11.18.40;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.53
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@# $OpenBSD: Makefile,v 1.52 2017/05/29 15:43:21 espie Exp $

BROKEN-hppa =	run dep on enblend-enfuse which will not build on hppa

COMMENT =	panorama image stitcher

DISTNAME =	hugin-2016.2.0
REVISION =	0
EXTRACT_SUFX =	.tar.bz2

# not needed for releases, but makes RCs/betas easier to work with
PKGNAME =	${DISTNAME:S/_//:L}
WRKDIST =	${WRKDIR}/${DISTNAME:C/_.*//}

SHARED_LIBS +=  celeste                   3.0
SHARED_LIBS +=  flann_cpp                 3.0
SHARED_LIBS +=  huginbase                 4.0
SHARED_LIBS +=  huginbasewx               3.0
SHARED_LIBS +=  huginlines                3.0
SHARED_LIBS +=  icpfindlib                3.0
SHARED_LIBS +=  localfeatures             3.0
SHARED_LIBS +=  hugin_python_interface    2.0

CATEGORIES =	graphics x11

HOMEPAGE =	http://hugin.sourceforge.net/

MAINTAINER =	Kirill Bychkov <kirby@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

# lensfun is dlopened, so don't remove it from WANTLIB and LIB_DEPENDS
WANTLIB += GL GLEW GLU Half Iex Imath IlmImf IlmThread X11
WANTLIB += boost_filesystem-mt boost_system-mt c exiv2 fftw3
WANTLIB += jpeg lcms2  lensfun m pano13>=3.0
WANTLIB += png pthread sqlite3 tiff vigraimpex wx_base>=3
WANTLIB += wx_base_net>=3 wx_base_xml>=3 wx_gtk2_adv>=3
WANTLIB += wx_gtk2_aui>=3 wx_gtk2_core>=3 wx_gtk2_gl>=3
WANTLIB += wx_gtk2_qa wx_gtk2_html>=3 wx_gtk2_xrc>=3 z ${MODPY_WANTLIB}
WANTLIB += ${LIBECXX}

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=hugin/}

BUILD_DEPENDS =		devel/gettext-tools \
			devel/swig>=2 \
			graphics/p5-Image-ExifTool
RUN_DEPENDS =		devel/desktop-file-utils \
			graphics/enblend-enfuse \
			graphics/p5-Image-ExifTool \
			misc/shared-mime-info \
			x11/gtk+3,-guic
RUN_DEPENDS +=		x11/py-wxPython # required for launching python scripts

LIB_DEPENDS =		devel/boost>=1.58 \
			graphics/exiv2>=0.12 \
			graphics/glew \
			graphics/lcms2 \
			graphics/libpano13>=2.9.19 \
			graphics/lensfun \
			graphics/vigra \
			x11/wxWidgets>=2.8.12p7

MODULES =		devel/cmake lang/python
COMPILER =		gcc

CONFIGURE_ENV =		MANDIR=man
CONFIGURE_ARGS +=	-DBUILD_HSI=ON
NO_TEST =		Yes

MODPY_ADJ_FILES =	src/hugin_script_interface/hpi.py \
			src/hugin_script_interface/plugins/shooting_pattern.py \
			src/hugin_script_interface/plugins/woa.py \
			src/hugin_script_interface/plugins/crop_cp.py \
			src/hugin_script_interface/plugins/top_five.py \
			src/hugin_script_interface/plugins-dev/dual_use.py \
			src/hugin_script_interface/plugins-dev/plugin_skeleton.py

pre-patch:
	rm ${WRKSRC}/CMakeModules/FindPNG.cmake
	rm ${WRKSRC}/CMakeModules/FindGLEW.cmake
	rm ${WRKSRC}/CMakeModules/FindZLIB.cmake
	find ${WRKSRC} -name '*.orig' | xargs rm
	cd ${WRKSRC}/CMakeModules; perl -i -pe 's/\r$$//' `find . -type f` \
	    ../src/CMakeLists.txt

post-install:
	${MODPY_BIN} ${MODPY_LIBDIR}/compileall.py \
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages \
		${PREFIX}/share/hugin/data/plugins/

.include <bsd.port.mk>
@


1.52
log
@unbreak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2017/05/28 19:29:27 espie Exp $
d65 2
a66 1
WANT_CXX =		base gcc
@


1.51
log
@more WANT_CXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2016/11/24 19:21:27 sthen Exp $
d65 1
@


1.50
log
@bump REVISION; it did build, just not with dpb.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/11/24 15:16:04 kirby Exp $
d41 1
d64 1
a64 3
MODULES =		devel/cmake lang/python gcc4
MODGCC4_ARCHS = 	*
MODGCC4_LANGS += 	c++
@


1.49
log
@unbreak dbp build (add graphics/lcms2 LDEP)
WANTLIB cleanup
no build -> no bump
reported by nigel@@, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/11/24 08:20:38 kirby Exp $
d8 1
@


1.48
log
@Update to hugin-2016.2.0.
 - drop gettext module while here
 - take maintainer (suggested by sthen@@, former maintainer)
OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/07/06 21:25:23 sthen Exp $
d35 1
a35 1
WANTLIB += iconv intl jpeg lcms2  lensfun m pano13>=3.0
d56 1
@


1.47
log
@wantlib syncs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/03/20 16:12:24 naddy Exp $
d7 1
a7 2
DISTNAME =	hugin-2014.0.0
REVISION =	0
d14 8
a21 10
SHARED_LIBS +=  celeste                   2.0
SHARED_LIBS +=  flann_cpp                 2.0
SHARED_LIBS +=  huginbase                 3.0
SHARED_LIBS +=  huginbasewx               2.0
SHARED_LIBS +=  huginlines                2.0
SHARED_LIBS +=  huginvigraimpex           2.0
SHARED_LIBS +=  icpfindlib                2.0
SHARED_LIBS +=  localfeatures             2.0
SHARED_LIBS +=  makefilelib               2.0
SHARED_LIBS +=  hugin_python_interface    1.0
d27 1
a27 1
MAINTAINER =	Stuart Henderson <sthen@@openbsd.org>
d33 7
a39 9
WANTLIB += GL GLEW GLU Half Iex Imath IlmImf IlmThread Xi Xmu
WANTLIB += boost_date_time-mt boost_filesystem-mt boost_chrono-mt
WANTLIB += boost_iostreams-mt boost_regex-mt boost_atomic-mt
WANTLIB += boost_system-mt boost_thread-mt c exiv2 glut>=4.1
WANTLIB += jpeg lensfun m pano13>=3.0 png pthread stdc++ tiff
WANTLIB += wx_base>=3 wx_base_net>=3 wx_base_xml>=3
WANTLIB += wx_gtk2_adv>=3 wx_gtk2_aui>=3 wx_gtk2_core>=3
WANTLIB += wx_gtk2_gl>=3 wx_gtk2_html>=3 wx_gtk2_xrc>=3 z
WANTLIB += ${MODPY_WANTLIB}
d43 2
a44 1
BUILD_DEPENDS =		devel/swig>=2 \
d50 1
a50 2
			x11/gtk+3,-guic \
			devel/gmake # yes, really a RUN_DEPENDS
a55 3
			graphics/freeglut \
			graphics/ilmbase \
			graphics/jpeg \
d58 1
a58 3
			graphics/openexr \
			graphics/png \
			graphics/tiff \
d61 3
a63 1
MODULES =		devel/cmake devel/gettext lang/python
@


1.46
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/10/10 08:44:39 kirby Exp $
d5 1
a5 1
COMMENT =		panorama image stitcher
d7 3
a9 2
DISTNAME =		hugin-2014.0.0
EXTRACT_SUFX =		.tar.bz2
d12 2
a13 2
PKGNAME =		${DISTNAME:S/_//:L}
WRKDIST =		${WRKDIR}/${DISTNAME:C/_.*//}
d26 1
a26 1
CATEGORIES =		graphics x11
d28 1
a28 1
HOMEPAGE =		http://hugin.sourceforge.net/
d30 1
a30 1
MAINTAINER =		Stuart Henderson <sthen@@openbsd.org>
d37 2
a38 2
WANTLIB += boost_date_time-mt boost_filesystem-mt
WANTLIB += boost_iostreams-mt boost_regex-mt boost_signals-mt
@


1.45
log
@update to hugin-2014.0.0
add missing build dependency (from sthen@@)
ok sthen@@, maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/07/01 08:42:52 jasper Exp $
a3 2

SHARED_ONLY =		Yes
@


1.44
log
@- Use Boost::Phoenix V3 in Boost Spirit for expression parsing (from upstream)
- bump boost dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/03/27 08:11:28 ajacoutot Exp $
d9 1
a9 2
DISTNAME =		hugin-2013.0.0
REVISION =		2
d16 10
a25 10
SHARED_LIBS +=  celeste                   1.0
SHARED_LIBS +=  flann_cpp                 1.0
SHARED_LIBS +=  huginbase                 2.0
SHARED_LIBS +=  huginbasewx               1.0
SHARED_LIBS +=  huginlines                1.0
SHARED_LIBS +=  huginvigraimpex           1.0
SHARED_LIBS +=  icpfindlib                1.0
SHARED_LIBS +=  localfeatures             1.0
SHARED_LIBS +=  makefilelib               1.0
SHARED_LIBS +=  hugin_python_interface    0.0
d37 2
a38 2
WANTLIB += GL GLEW GLU Half Iex Imath IlmImf IlmThread ICE SM X11
WANTLIB += Xext Xi Xmu boost_date_time-mt boost_filesystem-mt
d41 1
a41 1
WANTLIB += jpeg lensfun m pano13>=2.0 png pthread stdc++ tiff
d49 2
a50 1
BUILD_DEPENDS =		devel/swig>=2
d65 1
a65 1
			graphics/libpano13>=2.9.18beta1 \
d88 1
d95 2
a96 1
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages
@


1.43
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/11/07 10:40:05 ajacoutot Exp $
d10 1
a10 1
REVISION =		1
d59 1
a59 1
LIB_DEPENDS =		devel/boost \
@


1.42
log
@No need for default CMAKE_BUILD_TYPE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/07/11 22:17:08 sthen Exp $
d10 1
a10 1
REVISION =		0
d55 1
a55 1
			x11/gtk+2,-guic \
@


1.41
log
@whitespace tweaks, and merge post-extract and pre-patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/07/11 21:25:23 kirby Exp $
d74 1
a74 2
CONFIGURE_ARGS +=	-DCMAKE_BUILD_TYPE=Release \
			-DBUILD_HSI=ON
@


1.40
log
@ - add python scripting support.
 - don't use patch and SUBSD_CMD for CMake modules, just use ones from
our CMake installation
OK sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/01/14 04:20:20 kirby Exp $
d10 1
a10 1
REVISION = 		0
d50 1
a50 1
BUILD_DEPENDS = 	devel/swig>=2
d57 1
a57 1
RUN_DEPENDS += 		x11/py-wxPython # required for launching python scripts
d78 1
a78 1
MODPY_ADJ_FILES = 	src/hugin_script_interface/hpi.py \
d83 2
a84 7
			src/hugin_script_interface/plugins-dev/plugin_skeleton.py \
			src/hugin_script_interface/plugins-dev/dual_use.py


post-extract:
	@@rm ${WRKSRC}/CMakeModules/FindPNG.cmake
	@@rm ${WRKSRC}/CMakeModules/FindGLEW.cmake
d87 2
@


1.39
log
@update hugin to 2013.0.0
ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/11/25 14:16:22 sthen Exp $
d10 1
d26 1
d46 1
d50 1
d57 1
d72 1
a72 1
MODULES =		devel/cmake
d74 2
a75 2
CONFIGURE_ARGS +=	-DCMAKE_BUILD_TYPE:STRING=Release \
			-DBUILD_HSI=OFF
d78 13
d96 3
a98 3
pre-configure:
	${SUBST_CMD} ${WRKSRC}/CMakeModules/FindPNG.cmake \
	    ${WRKSRC}/CMakeModules/FindGLEW.cmake
@


1.38
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/08/20 22:05:55 zhuk Exp $
d9 1
a9 1
DISTNAME =		hugin-2011.4.0
a10 1
REVISION =		3
d16 9
a24 9
SHARED_LIBS +=  celeste                   0.0
SHARED_LIBS +=  flann_cpp                 0.0
SHARED_LIBS +=  huginbase                 1.0
SHARED_LIBS +=  huginbasewx               0.0
SHARED_LIBS +=  huginlines                0.0
SHARED_LIBS +=  huginvigraimpex           0.0
SHARED_LIBS +=  icpfindlib                0.0
SHARED_LIBS +=  localfeatures             0.0
SHARED_LIBS +=  makefilelib               0.0
d35 1
d40 1
a40 1
WANTLIB += jpeg m pano13>=2.0 png pthread stdc++ tiff
d61 1
a65 1
BUILD_DEPENDS +=	devel/tclap
d67 1
a67 2
USE_GROFF =		Yes
MODULES +=		devel/cmake
d69 2
a70 1
CONFIGURE_ARGS +=	-DCMAKE_BUILD_TYPE:STRING=Release
@


1.37
log
@Fixup handling of FreeDesktop goo: desktop-file-utils, gtk-update-icon-cache
and shared-mime-info. Found by portcheck.

A lot of input from and okay ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/05/14 22:55:11 sthen Exp $
a4 1
VMEM_WARNING =		Yes
@


1.36
log
@unbreak now that cmake shared lib support has been fixed
breakage spotted by naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/04/28 08:18:55 ajacoutot Exp $
d12 1
a12 1
REVISION =		2
d51 2
d54 1
@


1.35
log
@No need for gtar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/03/11 11:10:53 espie Exp $
d12 1
a12 1
REVISION =		1
a17 1
SHARED_LIBS +=  huginbasewx               0.0
d19 1
d21 2
@


1.34
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/12/21 18:50:37 sthen Exp $
a12 3

TAR =			${LOCALBASE}/bin/gtar
BUILD_DEPENDS +=	archivers/gtar
@


1.33
log
@mark BROKEN-hppa; if enblend-enfuse (run dep for this) is broken
there's no point wasting time on this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/11/18 16:55:27 dcoppa Exp $
a36 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d70 1
a70 1
NO_REGRESS =		Yes
@


1.32
log
@Add "-pthread" to compiler flags only where it's needed and remove
'CFLAGS += -pthread' from port's Makefile.

While here, remove superfluous SEPARATE_BUILD and CONFIGURE_STYLE
variables: cmake module already takes care of them.

ok sthen@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.31 2012/11/13 16:11:17 dcoppa Exp $
@


1.31
log
@"LDFLAGS += -L${X11BASE}/lib" is useless.

OK sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/11/06 09:37:14 dcoppa Exp $
d10 1
a10 1
REVISION =		0
a68 2
SEPARATE_BUILD =	Yes
CONFIGURE_STYLE =	cmake
a71 1
CFLAGS +=		-pthread
@


1.30
log
@For x11/wxWidgets, avoid using '-Wl,--version-script'.
When used in conjunction with PIE, symbol versioning triggers weird
linking problems in dependent ports.
This appears to unbreak graphics/hugin.
Bump all the majors of wx shared libraries and amend graphics/hugin
accordingly.

Kudos to naddy@@: a 2009 message to misc@@ from him put me on the
right track.

OK sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/11/05 11:15:11 sthen Exp $
a74 1
LDFLAGS +=		-L${X11BASE}/lib
@


1.29
log
@Really mark hugin as BROKEN on PIE arches, like I thought I did earlier.
- pointed out by dcoppa@@

Hugin doesn't build with PIE:

/usr/bin/ld: /usr/ports/pobj/hugin-2011.4.0/build-amd64/src/hugin1/base_wx/libhuginbasewx.so.0.0: invalid string offset 3068412456 >= 54218 for section `.dynstr'

and neither Hugin nor wxWidgets build with CFLAGS -fno-pie / LDFLAGS -nopie
(ld segfaults).
@
text
@d1 1
a1 7
# $OpenBSD: Makefile,v 1.28 2012/10/12 21:44:51 sthen Exp $

# can't build with PIE, can't build either hugin or wxWidgets with
# CFLAGS+=-fno-pie LDFLAGS+=-nopie
.for i in alpha amd64 hppa mips64 mips64el sh sparc64
BROKEN-$i =		hugin or possibly wxWidgets is broken with PIE
.endfor
d10 1
d43 4
a46 3
WANTLIB += jpeg m pano13>=2.0 png pthread stdc++ tiff wx_base
WANTLIB += wx_base_net wx_base_xml wx_gtk2_adv wx_gtk2_aui
WANTLIB += wx_gtk2_core wx_gtk2_gl wx_gtk2_html wx_gtk2_xrc z
d64 1
a64 1
			x11/wxWidgets>=2.7
d72 1
d74 1
a74 1
CFLAGS +=		-pthread -fno-pie -fPIC
@


1.28
log
@update to hugin 2011.4.0

* still broken on PIE arches, mark as BROKEN-... for them to stop wasting
time in builds until it can be repaired.
@
text
@d1 7
a7 1
# $OpenBSD: Makefile,v 1.27 2012/03/29 13:38:31 sthen Exp $
@


1.27
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/09/16 10:02:37 espie Exp $
d8 1
a8 2
DISTNAME =		hugin-2011.0.0
REVISION=		0
d11 3
a19 1
SHARED_LIBS +=  huginANN                  0.0
d63 1
d71 1
a71 1
CFLAGS +=		-pthread
@


1.26
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/05/30 09:06:28 sthen Exp $
d65 1
a65 1
SEPARATE_BUILD =	simple
@


1.25
log
@update Hugin to 2011.0.0 final. RC was tested by Kirill Bychkov, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/17 08:05:14 espie Exp $
d9 1
@


1.24
log
@update Hugin to 2010.4.0, tested by Kirill Bychkov, thanks!
This version introduces cpfind, a patent-free control point
generator (i.e.  tool to automatically find matching points
between two images for stitching together).
@
text
@d4 1
d8 1
a8 1
DISTNAME =		hugin-2010.4.0
d39 3
a41 3
WANTLIB += boost_system-mt boost_thread-mt c
WANTLIB += exiv2 glut>=4.1 jpeg m pano13>=2.0 png pthread
WANTLIB += stdc++ tiff wx_base wx_base_net wx_base_xml wx_gtk2_adv
d56 1
a56 1
			graphics/libpano13>=2.9.17rc1 \
d60 1
a60 1
			x11/wxWidgets
@


1.23
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/10/27 13:25:01 steven Exp $
d7 2
a8 1
DISTNAME =		hugin-2010.2.0
d10 1
a11 1
REVISION =		0
d19 3
d36 3
a38 1
WANTLIB += Xext Xi Xmu boost_date_time-mt boost_thread-mt c
a45 1
			graphics/autopano-sift-c \
@


1.22
log
@bump revision

this was using -O3 before the recent change in cmake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/24 21:21:01 ajacoutot Exp $
d33 1
a33 1
WANTLIB += exiv2 glut.>=4.1 jpeg m pano13.>=2.0 png pthread
d39 16
a54 16
RUN_DEPENDS =		:desktop-file-utils-*:devel/desktop-file-utils \
			::graphics/autopano-sift-c \
			::graphics/enblend-enfuse \
			::graphics/p5-Image-ExifTool \
			::devel/gmake # yes, really a RUN_DEPENDS
LIB_DEPENDS =		::devel/boost \
			:exiv2->=0.12:graphics/exiv2 \
			::graphics/glew \
			::graphics/freeglut \
			::graphics/ilmbase \
			::graphics/jpeg \
			:libpano13->=2.9.17rc1:graphics/libpano13 \
			::graphics/openexr \
			::graphics/png \
			::graphics/tiff \
			::x11/wxWidgets
@


1.21
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/20 15:32:40 sthen Exp $
d10 1
@


1.20
log
@update Hugin to 2010.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/18 18:13:14 espie Exp $
a55 1
USE_X11	=		Yes
@


1.19
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/06/10 08:24:49 sthen Exp $
d7 1
a7 1
DISTNAME =		hugin-2010.0.0
d9 1
a9 1
PKGNAME =		${DISTNAME:S/_//:L}p1
d12 5
a16 5
SHARED_LIBS =		celeste 0.0 \
			huginANN 0.0 \
			huginbase 1.0 \
			huginjhead 0.0 \
			huginvigraimpex 0.0
d30 5
a34 1
WANTLIB =		GL GLU ICE SM X11 Xext Xi Xmu c m pthread stdc++ z
d43 11
a53 11
LIB_DEPENDS =		boost_thread-mt::devel/boost \
			exiv2.>=0.1:exiv2->=0.12:graphics/exiv2 \
			GLEW::graphics/glew \
			glut.>=4.1::graphics/freeglut \
			Half,Iex,Imath,IlmThread::graphics/ilmbase \
			jpeg::graphics/jpeg \
			pano13::graphics/libpano13 \
			IlmImf::graphics/openexr \
			png::graphics/png \
			tiff::graphics/tiff \
			wx_base,wx_base_net,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_gl,wx_gtk2_html,wx_gtk2_xrc::x11/wxWidgets
d55 2
a56 2
USE_X11=		Yes
USE_GROFF =	Yes
@


1.18
log
@- SEPARATE_BUILD works for this (and should for most CMake projects),
use it, it's preferable.

- PERMIT_*_CDROM=Yes, the deghosting code has been replaced since then

- don't automatically RUN_DEPENDS on autopano-sift-c; add an install
message instead. Although it's a timesaver, hugin can work well without
this, and it's still subject to a USA patent, so don't force it.

bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/06/07 20:36:33 edd Exp $
d52 1
@


1.17
log
@Remove cmake-2.8 from BUILD depends as the cmake MODULE now implies it.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/06/05 12:38:48 sthen Exp $
d9 1
a9 1
PKGNAME =		${DISTNAME:S/_//:L}p0
d25 1
a25 3
# see post at http://permalink.gmane.org/gmane.comp.misc.ptx/15757 
# (http://www.faqs.org/patents/app/20080267494 in the deghosting code)
PERMIT_PACKAGE_CDROM =	patents
d27 1
a27 1
PERMIT_DISTFILES_CDROM =patents
d53 1
@


1.16
log
@glut is a LIB_DEPENDS, not a WANTLIB.
Build problem reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/05/29 01:23:55 sthen Exp $
a35 1
BUILD_DEPENDS =		:cmake->=2.8.1:devel/cmake
@


1.15
log
@Update Hugin to 2010.0.0 (dcoppa, thanks for the cmake update!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/04/15 20:47:17 dcoppa Exp $
d9 1
a9 1
PKGNAME =		${DISTNAME:S/_//:L}
d32 1
a32 1
WANTLIB =		GL GLU ICE SM X11 Xext Xi Xmu c glut m pthread stdc++ z
d45 1
@


1.14
log
@update-plist and bump because of cmake diff.

OK landry@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/04/13 09:03:08 sthen Exp $
d7 4
a10 4
DISTNAME =		hugin-0.8.0
PKGNAME=		${DISTNAME}p2
#PKGNAME =		${DISTNAME:S/_//}
#WRKDIST =		${WRKDIR}/${DISTNAME:C/_.*//}
d32 1
a32 2
WANTLIB =		GL GLU ICE SM X11 Xext c m pthread pthread-stubs xcb \
			stdc++ z
d36 1
d40 2
a41 1
			::graphics/p5-Image-ExifTool
d56 1
d59 1
d63 2
a64 1
	cd ${WRKSRC}/CMakeModules; perl -i -pe 's/\r$$//' `find . -type f`
d67 2
a68 1
	${SUBST_CMD} ${WRKSRC}/CMakeModules/FindPNG.cmake
@


1.13
log
@VMEM_WARNING, requested by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/12/22 16:06:41 ajacoutot Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
@


1.12
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.11 2009/08/10 06:31:44 kili Exp $
@


1.11
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/07/18 11:29:11 sthen Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
@


1.10
log
@Switch to the release tarball/naming; identical to previous release candidate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/07/14 10:28:25 sthen Exp $
d6 1
d30 2
a31 1
WANTLIB += GL GLU ICE SM X11 Xext c m pthread stdc++ z
@


1.9
log
@update Hugin to 0.8.0rc5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/06/21 15:54:31 sthen Exp $
d5 3
a7 3
DISTNAME =		hugin-0.8.0_rc5
PKGNAME =		${DISTNAME:S/_//}
WRKDIST =		${WRKDIR}/${DISTNAME:C/_.*//}
@


1.8
log
@update Hugin to 0.8.0rc4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/06/08 20:06:02 sthen Exp $
d5 1
a5 1
DISTNAME =		hugin-0.8.0_rc4
@


1.7
log
@0.8.0rc3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/06/04 21:12:07 ajacoutot Exp $
d5 1
a5 1
DISTNAME =		hugin-0.8.0_rc3
d29 1
a29 1
WANTLIB += GL GLU ICE SM X11 Xext c g2c m pthread stdc++ z
a45 2
			blas::math/blas \
			lapack::math/lapack \
@


1.6
log
@- no need to set VERBOSE anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/06/04 16:21:45 sthen Exp $
d5 2
a6 2
DISTNAME =		hugin-0.8.0_rc2
PKGNAME =		${DISTNAME:S/_//}p0
@


1.5
log
@set VERBOSE=1 so cmake displays the compiler command lines (suggestion
from landry@@), remove bogus comment in Makefile, remove dead @@comment in
PFRAG.shared (plist change -> bump).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/06/03 13:45:14 sthen Exp $
a52 1
MAKE_ENV +=		VERBOSE=1
@


1.4
log
@update to 0.8.0RC2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/05/09 19:28:55 sthen Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME:S/_//}
d53 1
a53 1
# doesnt work CONFIGURE_ARGS =	-DLAPACK_FOUND:Strings=NO
@


1.3
log
@update to 0.80rc1; thanks Gerry Patterson on the hugin-ptx list for the
missing clue I needed :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/04/29 23:48:53 sthen Exp $
d5 1
a5 1
DISTNAME =		hugin-0.8.0_rc1
d29 1
a29 1
WANTLIB += GL GLU ICE SM X11 Xext c m pthread stdc++ z
d46 2
d53 1
@


1.2
log
@uses some method which may be patented, so kill PERMIT_*_CDROM
see http://permalink.gmane.org/gmane.comp.misc.ptx/15757
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/04/19 11:18:40 sthen Exp $
d5 2
a6 2
DISTNAME =		hugin-0.8.0_beta3
PKGNAME =		${DISTNAME:C/_beta/b/}p0
d11 1
a11 1
			huginbase 0.0 \
a33 1
			::devel/gmake \
d46 1
a46 1
			wx_base,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_gl,wx_gtk2_html,wx_gtk2_xrc::x11/wxWidgets
d55 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.53 2007/09/17 09:44:42 ajacoutot Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME:C/_beta/b/}
d22 3
a24 1
PERMIT_PACKAGE_CDROM =	Yes
d26 1
a26 1
PERMIT_DISTFILES_CDROM =Yes
@


1.1.1.1
log
@import graphics/hugin: this port was made possible by Emmanuel Viaud's
work on enblend-enfuse, big thanks!

Goal: an easy to use cross-platform panoramic imaging toolchain
based on the Panorama Tools library.

With hugin you can assemble a mosaic of photographs into a
complete immersive panorama, stitch any series of overlapping
pictures and much more.

This package contains the following programs:

 - hugin, The main program, a GUI for the panorama tools suite
   and some programs included here.

 - nona, a simple replacement for PTStitcher (doesn't support most
   features of PTStitcher, but is faster, opensource and
   will be extended in the future).
 
 - nona_gui, nona with a graphical progress bar.

 - autooptimiser, optimise a panorama pairwise, starting from an
   anchor image. cmd line version of the pairwise mode in hugin

will be hooked to the build after tests on additional arch.
@
text
@@
