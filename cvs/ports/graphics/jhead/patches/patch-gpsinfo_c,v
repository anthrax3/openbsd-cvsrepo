head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.30
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.28
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.24
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.26
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.22
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.20
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.18
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.16
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.14
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.12
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.10
	OPENBSD_5_0:1.4.0.8
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.6
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.3.0.4
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.0.8
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.6
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2009.10.01.20.20.27;	author benoit;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.21.23.47.52;	author okan;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.24.19.36.14;	author okan;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.29.17.40.24;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update jhead to 2.87
- update & regen patches

ok ajacoutot@@, okan@@
@
text
@$OpenBSD: patch-gpsinfo_c,v 1.3 2008/10/21 23:47:52 okan Exp $
--- gpsinfo.c.orig	Mon Mar  2 08:34:10 2009
+++ gpsinfo.c	Wed Sep 30 16:49:45 2009
@@@@ -145,9 +145,10 @@@@ void ProcessGpsInfo(unsigned char * DirStart, int Byte
                     FmtString[3+a*7] = (char)('0'+digits);
 
                     Values[a] = ConvertAnyFormat(ValuePtr+a*ComponentSize, Format);
-                }
+                }
 
-                sprintf(TempString, FmtString, Values[0], Values[1], Values[2]);
+                snprintf(TempString, sizeof(TempString),
+                    FmtString, Values[0], Values[1], Values[2]);
 
                 if (Tag == TAG_GPS_LAT){
                     strncpy(ImageInfo.GpsLat+2, TempString, 29);
@@@@ -161,8 +162,8 @@@@ void ProcessGpsInfo(unsigned char * DirStart, int Byte
                 break;
 
             case TAG_GPS_ALT:
-                sprintf(ImageInfo.GpsAlt + 1, "%.2fm", 
-                    ConvertAnyFormat(ValuePtr, Format));
+                snprintf(ImageInfo.GpsAlt + 1, sizeof(ImageInfo.GpsAlt) + 1,
+                    "%dm", Get32s(ValuePtr));
                 break;
         }
 
@


1.3
log
@- update to 2.84
- sync patches
- take maintainership

ok merdely
@
text
@d1 4
a4 4
$OpenBSD: patch-gpsinfo_c,v 1.2 2008/04/24 19:36:14 okan Exp $
--- gpsinfo.c.orig	Sat Oct  4 12:10:35 2008
+++ gpsinfo.c	Tue Oct 21 11:53:21 2008
@@@@ -144,9 +144,10 @@@@ void ProcessGpsInfo(unsigned char * DirStart, int Byte
d17 1
a17 1
@@@@ -160,8 +161,8 @@@@ void ProcessGpsInfo(unsigned char * DirStart, int Byte
@


1.2
log
@- update to 2.82
- remove no longer needed sparc64 workaround
- add graphics/jpeg RUN_DEPENDS (for jpegtran)
- simplify build
- remove MAINTAINER, as requested

ok xsa@@ merdely@@
@
text
@d1 5
a5 4
$OpenBSD: patch-gpsinfo_c,v 1.1 2006/05/29 17:40:24 sturm Exp $
--- gpsinfo.c.orig	Thu Apr  3 10:52:21 2008
+++ gpsinfo.c	Thu Apr 24 09:13:11 2008
@@@@ -146,7 +146,8 @@@@ void ProcessGpsInfo(unsigned char * DirStart, int Byte
d8 3
a10 1
                 }
d13 1
a13 1
+		    FmtString, Values[0], Values[1], Values[2]);
d17 1
a17 1
@@@@ -160,7 +161,8 @@@@ void ProcessGpsInfo(unsigned char * DirStart, int Byte
d21 2
a22 1
-                sprintf(ImageInfo.GpsAlt + 1, "%dm", Get32s(ValuePtr));
d24 1
a24 1
+		    "%dm", Get32s(ValuePtr));
@


1.1
log
@update to jhead 2.6

from reyk, xsa is too busy to take of this
@
text
@d1 4
a4 4
$OpenBSD$
--- gpsinfo.c.orig	Tue May 23 09:13:33 2006
+++ gpsinfo.c	Tue May 23 09:13:52 2006
@@@@ -152,7 +152,8 @@@@ void ProcessGpsInfo(unsigned char * DirS
d14 1
a14 1
@@@@ -166,7 +167,8 @@@@ void ProcessGpsInfo(unsigned char * DirS
@

