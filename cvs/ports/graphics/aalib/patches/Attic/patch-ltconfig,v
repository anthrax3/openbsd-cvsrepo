head	1.4;
access;
symbols
	OPENBSD_3_8:1.3.0.20
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.18
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.16
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.14
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.12
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.10
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.8
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.6
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.4
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2005.12.26.15.14.12;	author steven;	state dead;
branches;
next	1.3;

1.3
date	2001.02.20.21.38.54;	author danh;	state Exp;
branches;
next	1.2;

1.2
date	2000.12.25.21.01.33;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2000.10.21.17.46.33;	author brad;	state Exp;
branches;
next	;


desc
@@


1.4
log
@SHARED_LIBS and USE_LIBTOOL
@
text
@$OpenBSD: patch-ltconfig,v 1.3 2001/02/20 21:38:54 danh Exp $
--- ltconfig.orig	Thu Sep 25 08:22:04 1997
+++ ltconfig	Tue Feb 20 16:28:56 2001
@@@@ -451,12 +451,13 @@@@ else
   esac
 fi
 
-case "$host_cpu" in
-rs6000 | powerpc | powerpcle)
-  # Yippee! All RS/6000 and PowerPC code is position-independent.
-  pic_flag=
-  ;;
-esac
+# Bogus
+#case "$host_cpu" in
+#rs6000 | powerpc | powerpcle)
+#  # Yippee! All RS/6000 and PowerPC code is position-independent.
+#  pic_flag=
+#  ;;
+#esac
 
 if test -n "$pic_flag"; then
   echo $ac_t "$pic_flag" 1>&6
@@@@ -575,6 +576,12 @@@@ hardcode_runpath_var=no
 hardcode_shlibpath_var=unsupported
 runpath_var=
 
+case "$host_os" in
+openbsd*)
+   with_gnu_ld=no
+   ;;
+esac
+
 ld_shlibs=yes
 if test "$with_gnu_ld" = yes; then
   # See if GNU ld supports shared libraries.
@@@@ -666,7 +673,7 @@@@ else
     hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
     ;;
 
-  netbsd* | openbsd*)
+  netbsd*)
     # Tested with NetBSD 1.2 ld
     archive_cmds='$LD -Bshareable -o $lib$libobjs$deplibs'
     hardcode_libdir_flag_spec='-R$libdir'
@@@@ -674,6 +681,24 @@@@ else
     hardcode_shlibpath_var=no
     ;;
 
+   openbsd*)
+    hardcode_direct=yes
+    hardcode_shlibpath_var=no
+    case "$host_os" in
+      openbsd[01].* | openbsd2.[0-7] | openbsd2.[0-7].*)
+       archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts'
+       hardcode_libdir_flag_spec='-R$libdir'
+      ;;
+      *)
+       archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linkopts'
+       hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+       if [ "`/usr/bin/file /usr/lib/libc.so.* | grep ELF`" != "" ]; then
+         export_dynamic_flag_spec='${wl}-E'
+       fi
+      ;;
+    esac
+    ;;
+
   osf3* | osf4*)
     allow_undefined_flag=' -expect_unresolved'
     archive_cmds='$LD -shared${allow_undefined_flag} -o $lib -soname $soname -set_version $verstring$libobjs -lc$deplibs'
@@@@ -827,6 +852,7 @@@@ netbsd* | openbsd*)
   library_names_spec='$libname.so.$versuffix'
   finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
+  deplibs_check_method='pass_all'
   ;;
 
 osf3* | osf4*)
@@@@ -946,6 +972,9 @@@@ host="$host"
 
 # The archiver.
 AR='$AR'
+
+# The default C compiler.
+CC=$CC
 
 # The linker used to build libraries.
 LD='$LD'
@


1.3
log
@- break jumbo patch down and rename.
- sync with libtool.
@
text
@d1 1
a1 1
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
@


1.2
log
@spaces -> tab
@
text
@d1 1
d3 2
a4 2
+++ ltconfig	Mon Dec 25 16:00:59 2000
@@@@ -451,12 +451,13 @@@@
d24 1
a24 1
@@@@ -575,6 +576,12 @@@@
d37 1
a37 1
@@@@ -666,7 +673,7 @@@@
d46 1
a46 1
@@@@ -674,6 +681,21 @@@@
d54 3
a56 3
+      openbsd2.[01234567])
+	archive_cmds='$LD -Bshareable -o $lib$libobjs$deplibs'
+	hardcode_libdir_flag_spec='-R$libdir'
d59 5
a63 2
+	archive_cmds='$CC -shared $pic_flag -o $lib$libobjs$deplibs'
+	hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
d71 9
a79 1
@@@@ -946,6 +968,9 @@@@
@


1.1
log
@use "cc -shared" on 2.8 and up to create shared libraries.
@
text
@d2 1
a2 1
+++ ltconfig	Sat Oct 21 13:17:57 2000
d59 1
a59 1
+        hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
@

