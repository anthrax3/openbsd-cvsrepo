head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2015.05.31.06.35.02;	author kirby;	state Exp;
branches
	1.1.2.1;
next	;
commitid	MXFj1FRlUvcT4bK1;

1.1.2.1
date	2015.06.01.07.51.22;	author jasper;	state Exp;
branches;
next	;
commitid	HLsBt1IdEJ66zClb;


desc
@@


1.1
log
@fix CVE-2015-3885 for embedded dcraw.
reported by Sevan / Venture37 on ports@@, thanks
looks ok to kili@@
@
text
@$OpenBSD$

fix CVE-2015-3885

--- src/dcraw.cc.orig	Tue May 26 13:45:37 2015
+++ src/dcraw.cc	Tue May 26 13:46:31 2015
@@@@ -916,7 +916,8 @@@@ struct jhead {
 
 int CLASS ljpeg_start (struct jhead *jh, int info_only)
 {
-  int c, tag, len;
+  int c, tag;
+  ushort len;
   uchar data[0x10000], *dp;
 
   if (!info_only) init_decoder();
@


1.1.2.1
log
@Security fixes for CVE-2015-3885
@
text
@d1 1
a1 1
$OpenBSD: patch-src_dcraw_cc,v 1.1 2015/05/31 06:35:02 kirby Exp $
@

