head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.6
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.06.27.11.20.49;	author jasper;	state Exp;
branches;
next	;
commitid	afmW3YxOpc8izYvb;


desc
@@


1.1
log
@update to evince-3.20.1
@
text
@$OpenBSD$

error: #pragma GCC diagnostic not allowed inside functions

--- libdocument/ev-document-misc.c.orig	Mon Jun 27 13:10:24 2016
+++ libdocument/ev-document-misc.c	Mon Jun 27 13:12:36 2016
@@@@ -528,8 +528,10 @@@@ ev_document_misc_format_date (GTime utime)
 	char s[256];
 	const char fmt_hack[] = "%c";
 	size_t len;
+#if defined(__GNUC__) && (__GNUC__ > 4)
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wformat-y2k"
+#endif
 #ifdef HAVE_LOCALTIME_R
 	struct tm t;
 	if (time == 0 || !localtime_r (&time, &t)) return NULL;
@@@@ -539,7 +541,9 @@@@ ev_document_misc_format_date (GTime utime)
 	if (time == 0 || !(t = localtime (&time)) ) return NULL;
 	len = strftime (s, sizeof (s), fmt_hack, t);
 #endif
+#if defined(__GNUC__) && (__GNUC__ > 4)
 #pragma GCC diagnostic pop
+#endif
 
 	if (len == 0 || s[0] == '\0') return NULL;
 
@
