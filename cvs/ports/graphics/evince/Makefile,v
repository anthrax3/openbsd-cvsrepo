head	1.148;
access;
symbols
	OPENBSD_6_1:1.144.0.2
	OPENBSD_6_1_BASE:1.144
	OPENBSD_6_0:1.140.0.2
	OPENBSD_6_0_BASE:1.140
	OPENBSD_5_9:1.137.0.2
	OPENBSD_5_9_BASE:1.137
	OPENBSD_5_8:1.130.0.4
	OPENBSD_5_8_BASE:1.130
	OPENBSD_5_7:1.123.0.2
	OPENBSD_5_7_BASE:1.123
	OPENBSD_5_6:1.113.0.2
	OPENBSD_5_6_BASE:1.113
	OPENBSD_5_5:1.103.0.2
	OPENBSD_5_5_BASE:1.103
	OPENBSD_5_4:1.97.0.2
	OPENBSD_5_4_BASE:1.97
	OPENBSD_5_3:1.88.0.2
	OPENBSD_5_3_BASE:1.88
	OPENBSD_5_2:1.81.0.2
	OPENBSD_5_2_BASE:1.81
	OPENBSD_5_1_BASE:1.77
	OPENBSD_5_1:1.77.0.2
	OPENBSD_5_0:1.61.0.2
	OPENBSD_5_0_BASE:1.61
	OPENBSD_4_9:1.56.0.2
	OPENBSD_4_9_BASE:1.56
	OPENBSD_4_8:1.43.0.2
	OPENBSD_4_8_BASE:1.43
	OPENBSD_4_7:1.36.0.2
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.30.0.2
	OPENBSD_4_6_BASE:1.30
	OPENBSD_4_5:1.19.0.2
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.14.0.2
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	alek_20060618:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.148
date	2017.07.13.12.25.52;	author ajacoutot;	state Exp;
branches;
next	1.147;
commitid	JQ1uEC0reEgenC57;

1.147
date	2017.04.23.21.45.58;	author ajacoutot;	state Exp;
branches;
next	1.146;
commitid	4N0Od7n8h7NJOk3g;

1.146
date	2017.04.17.11.42.20;	author jasper;	state Exp;
branches;
next	1.145;
commitid	G3igqCa6VZprK0pd;

1.145
date	2017.04.10.11.46.20;	author sthen;	state Exp;
branches;
next	1.144;
commitid	BLsh88fJB8thZTwY;

1.144
date	2017.02.22.14.03.57;	author ajacoutot;	state Exp;
branches
	1.144.2.1;
next	1.143;
commitid	ocb1AU9HUncxz5Mo;

1.143
date	2017.02.19.14.43.49;	author ajacoutot;	state Exp;
branches;
next	1.142;
commitid	jyPxpI44E8W5VufM;

1.142
date	2016.12.17.16.54.25;	author zhuk;	state Exp;
branches;
next	1.141;
commitid	RWXfO4g4EmWj7MSj;

1.141
date	2016.10.31.12.18.16;	author jasper;	state Exp;
branches;
next	1.140;
commitid	EnaGQcA47JYHBVYg;

1.140
date	2016.06.27.11.20.49;	author jasper;	state Exp;
branches;
next	1.139;
commitid	afmW3YxOpc8izYvb;

1.139
date	2016.04.25.14.41.31;	author jasper;	state Exp;
branches;
next	1.138;
commitid	34fn1NT5Z0yBzAOv;

1.138
date	2016.03.18.23.12.17;	author naddy;	state Exp;
branches;
next	1.137;
commitid	KZAl4KEiw6a3Jixw;

1.137
date	2015.11.12.13.01.28;	author jasper;	state Exp;
branches;
next	1.136;
commitid	25eqh49pWWEKAsus;

1.136
date	2015.10.25.11.30.32;	author ajacoutot;	state Exp;
branches;
next	1.135;
commitid	bFoCsGCPf4hyk2Id;

1.135
date	2015.10.25.07.46.59;	author ajacoutot;	state Exp;
branches;
next	1.134;
commitid	X6zQbH0tuGMbtGGK;

1.134
date	2015.10.23.15.23.16;	author jasper;	state Exp;
branches;
next	1.133;
commitid	jknecR2179Jxi997;

1.133
date	2015.10.13.17.18.29;	author ajacoutot;	state Exp;
branches;
next	1.132;
commitid	W7MExBTKohUMSL9L;

1.132
date	2015.10.12.06.09.31;	author ajacoutot;	state Exp;
branches;
next	1.131;
commitid	WNeWHgR7b58hjFWz;

1.131
date	2015.08.17.19.10.12;	author sthen;	state Exp;
branches;
next	1.130;
commitid	4CippZtWcqcVBaoK;

1.130
date	2015.07.17.16.26.47;	author ajacoutot;	state Exp;
branches;
next	1.129;
commitid	h8li6bdUCtPBmQPx;

1.129
date	2015.05.29.09.40.58;	author jasper;	state Exp;
branches;
next	1.128;
commitid	H6Ld4hXSqHaMgImD;

1.128
date	2015.04.15.09.40.52;	author ajacoutot;	state Exp;
branches;
next	1.127;
commitid	dfR1rb9OtImYnGFF;

1.127
date	2015.04.04.09.21.01;	author ajacoutot;	state Exp;
branches;
next	1.126;
commitid	kS3kwKZogsvzYmEY;

1.126
date	2015.04.03.11.55.12;	author jasper;	state Exp;
branches;
next	1.125;
commitid	PfMcaVwPkXnuxfa4;

1.125
date	2015.03.27.08.11.28;	author ajacoutot;	state Exp;
branches;
next	1.124;
commitid	mHt3hIg3nxq5XDcy;

1.124
date	2015.03.15.10.05.19;	author jasper;	state Exp;
branches;
next	1.123;
commitid	P560S0ebeMbLcWZP;

1.123
date	2014.12.21.11.39.13;	author ajacoutot;	state Exp;
branches;
next	1.122;
commitid	X2T672CJJwo9JIrl;

1.122
date	2014.11.07.12.52.21;	author ajacoutot;	state Exp;
branches;
next	1.121;
commitid	Wd84vJYU8tD5a3uD;

1.121
date	2014.11.05.08.04.28;	author ajacoutot;	state Exp;
branches;
next	1.120;
commitid	Yv3YzKyJmKdGWBLw;

1.120
date	2014.10.31.23.05.36;	author ajacoutot;	state Exp;
branches;
next	1.119;
commitid	aq0FNhc1UGTnx5k9;

1.119
date	2014.10.15.13.54.57;	author ajacoutot;	state Exp;
branches;
next	1.118;
commitid	DzRRXujzuzs0b2wB;

1.118
date	2014.10.15.13.48.21;	author ajacoutot;	state Exp;
branches;
next	1.117;
commitid	C90Y4RcWFRPsoWTM;

1.117
date	2014.10.15.13.12.46;	author ajacoutot;	state Exp;
branches;
next	1.116;
commitid	dJakYM5eaWIBUhob;

1.116
date	2014.10.15.10.12.37;	author ajacoutot;	state Exp;
branches;
next	1.115;
commitid	8e8MBeM7ZDiaMly3;

1.115
date	2014.10.15.08.50.23;	author jasper;	state Exp;
branches;
next	1.114;
commitid	UlbejxmsJUVP4tBG;

1.114
date	2014.08.10.11.57.05;	author jasper;	state Exp;
branches;
next	1.113;
commitid	Z9qMCV7RSw89K96U;

1.113
date	2014.04.14.18.13.23;	author jasper;	state Exp;
branches;
next	1.112;

1.112
date	2014.04.04.09.03.36;	author ajacoutot;	state Exp;
branches;
next	1.111;

1.111
date	2014.04.02.09.36.11;	author jasper;	state Exp;
branches;
next	1.110;

1.110
date	2014.04.01.18.38.53;	author jasper;	state Exp;
branches;
next	1.109;

1.109
date	2014.04.01.18.06.29;	author jasper;	state Exp;
branches;
next	1.108;

1.108
date	2014.04.01.17.03.13;	author jasper;	state Exp;
branches;
next	1.107;

1.107
date	2014.04.01.15.31.46;	author jasper;	state Exp;
branches;
next	1.106;

1.106
date	2014.04.01.13.21.45;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2014.03.30.13.37.34;	author ajacoutot;	state Exp;
branches;
next	1.104;

1.104
date	2014.03.27.12.14.31;	author jasper;	state Exp;
branches;
next	1.103;

1.103
date	2013.11.16.21.00.43;	author jasper;	state Exp;
branches;
next	1.102;

1.102
date	2013.11.14.15.05.43;	author jasper;	state Exp;
branches;
next	1.101;

1.101
date	2013.10.15.09.44.20;	author ajacoutot;	state Exp;
branches;
next	1.100;

1.100
date	2013.09.28.08.50.41;	author ajacoutot;	state Exp;
branches;
next	1.99;

1.99
date	2013.09.27.06.30.43;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2013.09.26.16.06.47;	author jasper;	state Exp;
branches;
next	1.97;

1.97
date	2013.07.09.09.40.53;	author jasper;	state Exp;
branches;
next	1.96;

1.96
date	2013.05.31.15.34.47;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2013.05.15.07.57.57;	author jasper;	state Exp;
branches;
next	1.94;

1.94
date	2013.04.16.13.17.01;	author ajacoutot;	state Exp;
branches;
next	1.93;

1.93
date	2013.04.02.16.16.47;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2013.04.01.10.33.59;	author jasper;	state Exp;
branches;
next	1.91;

1.91
date	2013.03.26.14.04.36;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2013.03.22.06.44.39;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2013.03.11.11.10.52;	author espie;	state Exp;
branches;
next	1.88;

1.88
date	2013.02.09.17.38.24;	author bcallah;	state Exp;
branches;
next	1.87;

1.87
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.86;

1.86
date	2013.02.08.17.12.31;	author bcallah;	state Exp;
branches;
next	1.85;

1.85
date	2012.10.15.09.48.31;	author jasper;	state Exp;
branches;
next	1.84;

1.84
date	2012.09.29.13.14.04;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2012.09.28.11.44.52;	author jasper;	state Exp;
branches;
next	1.82;

1.82
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2012.07.13.15.11.41;	author kili;	state Exp;
branches;
next	1.80;

1.80
date	2012.07.08.10.33.49;	author jasper;	state Exp;
branches;
next	1.79;

1.79
date	2012.06.15.08.32.16;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2012.03.29.07.03.30;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2011.12.05.23.01.30;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2011.12.03.20.30.09;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2011.11.18.12.37.19;	author espie;	state Exp;
branches;
next	1.74;

1.74
date	2011.11.17.11.42.31;	author jasper;	state Exp;
branches;
next	1.73;

1.73
date	2011.10.17.18.40.16;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2011.09.28.09.51.36;	author jasper;	state Exp;
branches;
next	1.71;

1.71
date	2011.09.27.13.14.00;	author jasper;	state Exp;
branches;
next	1.70;

1.70
date	2011.09.22.14.23.21;	author jasper;	state Exp;
branches;
next	1.69;

1.69
date	2011.09.20.21.04.24;	author jasper;	state Exp;
branches;
next	1.68;

1.68
date	2011.09.20.20.51.51;	author jasper;	state Exp;
branches;
next	1.67;

1.67
date	2011.09.19.07.31.45;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2011.09.16.10.02.36;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2011.09.13.13.38.07;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.09.13.12.37.37;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2011.09.12.12.07.25;	author jasper;	state Exp;
branches;
next	1.62;

1.62
date	2011.09.12.07.26.19;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2011.05.28.08.15.53;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2011.04.07.11.30.22;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2011.04.05.16.37.58;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2011.03.26.15.05.31;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2011.03.25.09.13.43;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2011.01.06.22.55.31;	author jasper;	state Exp;
branches;
next	1.55;

1.55
date	2010.12.01.14.46.59;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2010.11.17.08.05.13;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.09.18.22.26;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.08.10.34.53;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2010.10.27.11.04.39;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2010.10.23.14.10.16;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2010.10.18.21.50.39;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2010.10.18.18.13.13;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2010.10.18.13.51.01;	author jasper;	state Exp;
branches;
next	1.46;

1.46
date	2010.10.14.14.31.01;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2010.10.11.08.14.42;	author jasper;	state Exp;
branches;
next	1.44;

1.44
date	2010.10.01.09.13.12;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2010.06.26.03.43.58;	author ajacoutot;	state Exp;
branches
	1.43.2.1;
next	1.42;

1.42
date	2010.06.21.19.15.54;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2010.06.09.08.48.13;	author kevlo;	state Exp;
branches;
next	1.40;

1.40
date	2010.05.20.09.57.21;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2010.04.26.17.39.16;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2010.04.20.22.06.50;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2010.04.20.20.11.53;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2009.12.22.16.06.40;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2009.12.16.17.20.47;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2009.10.19.20.44.59;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2009.10.13.11.00.39;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2009.08.17.09.57.44;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2009.08.10.06.31.44;	author kili;	state Exp;
branches;
next	1.30;

1.30
date	2009.06.11.18.26.44;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2009.06.11.05.25.13;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2009.06.10.20.46.36;	author kili;	state Exp;
branches;
next	1.27;

1.27
date	2009.06.08.16.58.15;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2009.06.07.05.32.02;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2009.04.16.08.11.13;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2009.04.14.21.34.42;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2009.04.06.16.15.13;	author stsp;	state Exp;
branches;
next	1.22;

1.22
date	2009.04.06.10.09.06;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.03.14.11.36.24;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.03.14.10.40.51;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2009.02.13.21.42.55;	author martynas;	state Exp;
branches;
next	1.18;

1.18
date	2009.01.08.20.09.33;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2008.12.17.18.41.51;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2008.12.16.11.05.28;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2008.12.14.19.33.48;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2008.06.29.20.44.51;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2008.06.02.14.10.07;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2008.05.21.22.13.35;	author bernd;	state Exp;
branches;
next	1.11;

1.11
date	2008.04.17.08.10.10;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2007.12.11.10.08.18;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2007.12.07.20.00.40;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2007.10.01.11.42.30;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.15.20.09.40;	author simon;	state Exp;
branches;
next	1.6;

1.6
date	2007.05.13.19.11.19;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.30.12.41.39;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2006.12.16.12.22.33;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.09.18.11.50.40;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2006.08.02.10.10.35;	author espie;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2006.06.18.14.22.26;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.06.18.14.22.26;	author alek;	state Exp;
branches;
next	;

1.2.2.1
date	2007.01.01.18.02.51;	author sturm;	state Exp;
branches;
next	;

1.43.2.1
date	2011.01.06.22.55.38;	author jasper;	state Exp;
branches;
next	;

1.144.2.1
date	2017.07.13.12.51.44;	author ajacoutot;	state Exp;
branches;
next	;
commitid	rmQc07JHzSwU3RNK;


desc
@@


1.148
log
@SECURITY fix for CVE-2017-1000083): Evince command injection vulnerability
in CBT handler (comics: Remove support for tar and tar-like commands).
@
text
@# $OpenBSD: Makefile,v 1.147 2017/04/23 21:45:58 ajacoutot Exp $

COMMENT=		GNOME document viewer

GNOME_PROJECT=		evince
GNOME_VERSION=		3.24.0

REVISION=		0

MAJ_V=			3.0
SUBST_VARS=		MAJ_V

SHARED_LIBS +=  evdocument3               0.2 # 4.0
SHARED_LIBS +=  evview3                   0.0 # 3.0

CATEGORIES=		graphics print

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>, \
			Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ICE SM X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi
WANTLIB += Xinerama Xrandr Xrender atk-1.0 atk-bridge-2.0 atspi
WANTLIB += avahi-common c cairo cairo-gobject dbus-1 expat ffi
WANTLIB += fontconfig freetype gcrypt gdk-3 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gpg-error graphite2
WANTLIB += gs gthread-2.0 gtk-3 harfbuzz jpeg lcms2 lzma m openjp2
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png poppler poppler-glib pthread pthread-stubs secret-1
WANTLIB += spectre ${LIBCXX} tiff xcb xcb-render xcb-shm xml2 z unistring
WANTLIB += gmp hogweed nettle p11-kit tasn1 epoxy iconv intl
WANTLIB += gstbase-1.0 gstreamer-1.0 gstvideo-1.0 orc-0.4 idn2

MODULES=		devel/dconf \
			x11/gnome

MODGNOME_TOOLS +=	desktop-file-utils gobject-introspection
MODGNOME_TOOLS +=	gtk-update-icon-cache shared-mime-info

BUILD_DEPENDS=		devel/gsettings-desktop-schemas

LIB_DEPENDS=		multimedia/gstreamer1/plugins-base \
			print/libspectre \
			print/poppler \
			x11/gnome/libsecret \
			x11/gtk+3

RUN_DEPENDS=		archivers/unrar \
			archivers/unzip \
			devel/gsettings-desktop-schemas \
			print/ghostscript/gnu

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include"

# modern browsers can already display PDF
CONFIGURE_ARGS +=	--disable-browser-plugin

# Not much point in installing systemd service files
FAKE_FLAGS +=		systemd_user_in_files=""

# fix build with clang
CFLAGS +=		-Wno-error=format-nonliteral

FLAVORS=		light
FLAVOR?=

.if ${FLAVOR:Mlight}
BUILD_DEPENDS +=	textproc/itstool
CONFIGURE_ARGS +=	--disable-dbus \
			--disable-libgnome-desktop \
			--disable-nautilus \
			--disable-thumbnailer \
			--disable-djvu \
			--disable-dvi \
			--disable-comics \
			--disable-xps
.else
MODGNOME_TOOLS +=	yelp
LIB_DEPENDS +=		graphics/djvulibre \
			graphics/libgxps \
			print/texlive/base \
			x11/gnome/nautilus
WANTLIB += archive bz2 djvulibre gnome-desktop-3 gxps kpathsea
WANTLIB += nautilus-extension gnome-autoar-0 crypto lz4
.endif

post-install:
.if ! ${FLAVOR:Mlight}
	rm ${PREFIX}/lib/nautilus/extensions-${MAJ_V}/*.{a,la}
.endif
	rm ${PREFIX}/lib/evince/4/backends/*.{a,la}

.include <bsd.port.mk>
@


1.147
log
@Fix build with clang by passing -Wno-error=format-nonliteral to CFLAGS.

breakage reported by espie@@
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2017/04/17 11:42:20 jasper Exp $
d7 2
@


1.146
log
@update to evince-3.24.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2017/04/10 11:46:20 sthen Exp $
d61 3
@


1.145
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2017/02/22 14:03:57 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		3.22.1
REVISION=		2
d82 1
a82 1
WANTLIB += nautilus-extension gnome-autoar-0 crypto lzo2 lz4
@


1.144
log
@Some WANTLIB do not belong to the "light" FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2017/02/19 14:43:49 ajacoutot Exp $
d31 1
a31 1
WANTLIB += spectre stdc++ tiff xcb xcb-render xcb-shm xml2 z unistring
@


1.144.2.1
log
@SECURITY fix for CVE-2017-1000083): Evince command injection vulnerability
in CBT handler (comics: Remove support for tar and tar-like commands).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2017/02/22 14:03:57 ajacoutot Exp $
d7 1
a7 1
REVISION=		3
@


1.143
log
@First shot at fixing the idn -> idn2 failure after gnutls dependency change.
List provided by naddy@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2016/12/17 16:54:25 zhuk Exp $
d7 1
a7 1
REVISION=		1
d28 1
a28 1
WANTLIB += gs gthread-2.0 gtk-3 harfbuzz jpeg lcms2 lzma lzo2 m openjp2
d31 3
a33 3
WANTLIB += spectre stdc++ tiff xcb xcb-render xcb-shm xml2 z
WANTLIB += gmp hogweed nettle p11-kit tasn1 epoxy iconv intl lz4
WANTLIB += gstbase-1.0 gstreamer-1.0 gstvideo-1.0 orc-0.4 idn2 crypto
d83 1
a83 1
WANTLIB += nautilus-extension gnome-autoar-0
@


1.142
log
@Tweak WANTLIB after poppler switch from openjpeg to openjp2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2016/10/31 12:18:16 jasper Exp $
d7 1
a7 1
REVISION=		0
d33 1
a33 1
WANTLIB += gstbase-1.0 gstreamer-1.0 gstvideo-1.0 orc-0.4 idn crypto
@


1.141
log
@update to evince-3.22.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2016/06/27 11:20:49 jasper Exp $
d7 1
d28 1
a28 1
WANTLIB += gs gthread-2.0 gtk-3 harfbuzz jpeg lcms2 lzma lzo2 m openjpeg
@


1.140
log
@update to evince-3.20.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2016/04/25 14:41:31 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		3.20.1
d31 2
a32 2
WANTLIB += gmp hogweed nettle p11-kit tasn1 epoxy iconv intl
WANTLIB += gstbase-1.0 gstreamer-1.0 gstvideo-1.0 orc-0.4 idn
d82 1
a82 1
WANTLIB += nautilus-extension
@


1.139
log
@update to evince-3.20.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2016/03/18 23:12:17 naddy Exp $
d6 1
a6 1
GNOME_VERSION=		3.20.0
@


1.138
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2015/11/12 13:01:28 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		3.18.2
d31 2
a32 2
WANTLIB += gmp hogweed nettle p11-kit tasn1 epoxy
WANTLIB += gstbase-1.0 gstreamer-1.0 gstvideo-1.0 orc-0.4
a34 1
			devel/gettext \
d58 3
@


1.137
log
@update to evince-3.18.2
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.136 2015/10/25 11:30:32 ajacoutot Exp $

SHARED_ONLY=		Yes
@


1.136
log
@base -> plugins-base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2015/10/25 07:46:59 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.18.1
REVISION=		0
@


1.135
log
@Add multimedia/gstreamer1/base to LIB_DEPENDS to fix "light" flavor packaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2015/10/23 15:23:16 jasper Exp $
d46 1
a46 1
LIB_DEPENDS=		multimedia/gstreamer1/base \
@


1.134
log
@update to evince-3.18.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2015/10/13 17:18:29 ajacoutot Exp $
d9 1
d46 2
a47 1
LIB_DEPENDS=		print/libspectre \
@


1.133
log
@Add a LIB_DEPENDS to x11/gtk+3 to unbreak the -light FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2015/10/12 06:09:31 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.1
REVISION=		3
d34 1
@


1.132
log
@Fix hich CPU usage when selecting text.

reported by mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2015/08/17 19:10:12 sthen Exp $
d9 1
a9 1
REVISION=		2
d47 2
a48 1
			x11/gnome/libsecret
@


1.131
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2015/07/17 16:26:47 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.130
log
@Do not RUN_DEPENDS on yelp for the light FLAVOR.

requested by jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2015/05/29 09:40:58 jasper Exp $
d9 1
a9 1
REVISION=		0
d30 1
a30 1
WANTLIB += gs gthread-2.0 gtk-3 harfbuzz jpeg lcms2 lzma m openjpeg
@


1.129
log
@update to evince-3.16.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2015/04/15 09:40:52 ajacoutot Exp $
d9 1
d40 1
a40 1
MODGNOME_TOOLS +=	desktop-file-utils gobject-introspection yelp
d64 1
d74 1
@


1.128
log
@Bump after libepoxy moved from ports to xenocara.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2015/04/04 09:21:01 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.0
REVISION=		1
@


1.127
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2015/04/03 11:55:12 jasper Exp $
d9 1
a9 1
REVISION=		0
@


1.126
log
@update to evince-3.16.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2015/03/27 08:11:28 ajacoutot Exp $
d9 1
@


1.125
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2015/03/15 10:05:19 jasper Exp $
d8 1
a8 2
GNOME_VERSION=		3.14.2
REVISION=		0
d33 1
a33 1
WANTLIB += gmp hogweed nettle p11-kit tasn1
@


1.124
log
@update to evince-3.14.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2014/12/21 11:39:13 ajacoutot Exp $
d9 1
@


1.123
log
@Document the 'light' FLAVOR.
prodded by Mihai Popescu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2014/11/07 12:52:21 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.14.1
REVISION=		6
d33 1
@


1.122
log
@Unbreak light FLAVOR by adding an explicit dependency on x11/gnome/libsecret.

breakage reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2014/11/05 08:04:28 ajacoutot Exp $
d9 1
a9 1
REVISION=		5
@


1.121
log
@Drop graphics/evince from @@pkgpath to fix updating.

spotted by nigel@@ and fix from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2014/10/31 23:05:36 ajacoutot Exp $
d9 1
a9 1
REVISION=		4
d45 2
a46 1
			print/poppler
@


1.120
log
@Add a "light" FLAVOR to evince so that !GNOME kids can read+print+...

requested by and OK mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2014/10/15 13:54:57 ajacoutot Exp $
d9 1
a9 1
REVISION=		3
@


1.119
log
@evince-nautilus -> nautilus-evince
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2014/10/15 13:48:21 ajacoutot Exp $
d5 1
a5 2
COMMENT-main=		GNOME document viewer
COMMENT-dvi=		evince dvi backend
d9 1
a9 6

PKGNAME-main=		${DISTNAME}
PKGNAME-dvi=		evince-dvi-${GNOME_VERSION}

REVISION-main=		2
REVISION-dvi=		1
a13 2
CATEGORIES=		graphics print

d17 2
d25 9
a33 7
WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes gtk-3 pango-1.0
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 cairo expat fontconfig
WANTLIB += freetype gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gobject-2.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png pthread-stubs
WANTLIB += xcb-shm xcb xcb-render z gthread-2.0 cairo-gobject m ffi
WANTLIB += atk-bridge-2.0 atspi harfbuzz ICE SM gs gmodule-2.0 jpeg
WANTLIB += graphite2 avahi-common dbus-1 pthread spectre
d45 1
a45 11
			x11/gtk+3

WANTLIB-main +=	${WANTLIB} c gnome-desktop-3 gcrypt gpg-error stdc++
WANTLIB-main +=	secret-1 tiff xml2 lcms2 openjpeg poppler poppler-glib
WANTLIB-main +=	djvulibre archive bz2 gxps lzma nautilus-extension

LIB_DEPENDS-main=	${LIB_DEPENDS} \
			print/poppler \
			graphics/djvulibre \
			graphics/libgxps \
			x11/gnome/nautilus
d47 1
a47 2
RUN_DEPENDS-main=	${RUN_DEPENDS} \
			archivers/unrar \
a51 8
WANTLIB-dvi += ${WANTLIB} evdocument3 kpathsea

LIB_DEPENDS-dvi=	${LIB_DEPENDS} \
			${BASE_PKGPATH} \
			print/texlive/base

RUN_DEPENDS-dvi=	${MODGETTEXT_RUN_DEPENDS}

d53 1
d58 2
a59 1
CONFIGURE_ENV=		CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include"
d61 17
a77 1
MULTI_PACKAGES=		-main -dvi
d80 1
d82 1
@


1.118
log
@Stop trying to pretend we can still make a small package out of this:
- merge -nautilus into -main
- add XPS support
- add missing dependency on gnome-desktop
- fixup DEPS/WANTLIB

There are many alternatives in-tree for those of want a small PDF viewer.
discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2014/10/15 13:12:46 ajacoutot Exp $
d14 1
a14 1
REVISION-main=		1
@


1.117
log
@Ident before upcoming big changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2014/10/15 10:12:37 ajacoutot Exp $
d5 2
a6 3
COMMENT-main=		viewer for multiple document formats
COMMENT-dvi=		evince document viewer backend for dvi documents
COMMENT-nautilus= 	evince plugin for nautilus
a12 1
PKGNAME-nautilus= 	nautilus-evince-${GNOME_VERSION}
d14 2
a15 3
REVISION-main=		0
REVISION-dvi=		0
REVISION-nautilus=	0
d36 2
a37 2
WANTLIB += atk-bridge-2.0 atspi harfbuzz
WANTLIB += gmodule-2.0 graphite2
d43 2
a44 2
MODGNOME_TOOLS += 	desktop-file-utils gobject-introspection yelp
MODGNOME_TOOLS += 	gtk-update-icon-cache shared-mime-info
d48 2
a49 1
LIB_DEPENDS=		x11/gtk+3
d51 3
a53 3
WANTLIB-main += ${WANTLIB} ICE SM c dbus-1 gs gcrypt gpg-error stdc++
WANTLIB-main += secret-1 jpeg pthread tiff xml2 lcms2 openjpeg poppler
WANTLIB-main += poppler-glib spectre avahi-common djvulibre
d55 2
a56 2
LIB_DEPENDS-main=	print/poppler \
			print/libspectre \
d58 2
a59 1
			${LIB_DEPENDS}
d67 1
a67 2
WANTLIB-dvi += ${WANTLIB} gs evdocument3 kpathsea spectre ICE SM jpeg
WANTLIB-dvi += avahi-common dbus-1 pthread
d71 1
a71 2
			print/texlive/base \
			print/libspectre
a74 9
WANTLIB-nautilus += ${WANTLIB} gthread-2.0 nautilus-extension evdocument3
WANTLIB-nautilus += ICE SM dbus-1 pthread

LIB_DEPENDS-nautilus=	${BASE_PKGPATH} \
			${LIB_DEPENDS} \
			x11/gnome/nautilus

RUN_DEPENDS-nautilus=	${MODGETTEXT_RUN_DEPENDS}

a79 1
MODGNOME_CPPFLAGS=${CFLAGS}
d82 1
a82 16
MULTI_PACKAGES=		-main -dvi -nautilus
PSEUDO_FLAVORS=		no_dvi no_nautilus light
FLAVOR?=
.if ${FLAVOR:Mlight}
FLAVOR +=		no_dvi no_nautilus
.endif

.include <bsd.port.arch.mk>

.for s in -nautilus -dvi
.  if ${BUILD_PACKAGES:M$s}
CONFIGURE_ARGS+=	--enable$s
.  else
CONFIGURE_ARGS+=	--disable$s
.  endif
.endfor
a84 3
# This will fail if no_nautilus is found in FLAVOR, so make sure we don't
# do it if it is.
.if ${BUILD_PACKAGES:M-nautilus}
a85 1
.endif
@


1.116
log
@Only the useless browser plugin needs c++11 for now; so disable it.
Regen WANTLIB while here.

input from/ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2014/10/15 08:50:23 jasper Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
d5 3
a7 3
COMMENT-main=	viewer for multiple document formats
COMMENT-dvi=	evince document viewer backend for dvi documents
COMMENT-nautilus= evince plugin for nautilus
d9 2
a10 2
GNOME_PROJECT=	evince
GNOME_VERSION=	3.14.1
d12 3
a14 3
PKGNAME-main=	${DISTNAME}
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}
PKGNAME-nautilus= nautilus-evince-${GNOME_VERSION}
d20 2
a21 2
MAJ_V=		3.0
SUBST_VARS=	MAJ_V
d23 1
a23 1
CATEGORIES=	graphics print
d28 2
a29 2
MAINTAINER=	Jasper Lievisse Adriaanse <jasper@@openbsd.org>, \
		Antoine Jacoutot <ajacoutot@@openbsd.org>
a33 6
MODULES=	devel/dconf \
		devel/gettext \
		x11/gnome

BUILD_DEPENDS=	devel/gsettings-desktop-schemas

d42 38
a79 2
MODGNOME_TOOLS += desktop-file-utils gobject-introspection yelp
MODGNOME_TOOLS += gtk-update-icon-cache shared-mime-info
d81 3
a83 1
LIB_DEPENDS=	x11/gtk+3
d85 1
a85 29
WANTLIB-main=	${WANTLIB} ICE SM c dbus-1 \
		gs gcrypt gpg-error stdc++ secret-1 \
		jpeg pthread tiff xml2 lcms2 openjpeg \
		poppler poppler-glib spectre avahi-common \
		djvulibre
LIB_DEPENDS-main= print/poppler \
		print/libspectre \
		graphics/djvulibre \
		${LIB_DEPENDS}
RUN_DEPENDS-main= ${RUN_DEPENDS} \
		archivers/unrar \
		archivers/unzip \
		devel/gsettings-desktop-schemas \
		print/ghostscript/gnu

WANTLIB-dvi=	${WANTLIB} gs evdocument3 kpathsea spectre ICE SM \
		jpeg avahi-common dbus-1 pthread
LIB_DEPENDS-dvi= ${LIB_DEPENDS} \
		${BASE_PKGPATH} \
		print/texlive/base \
		print/libspectre
RUN_DEPENDS-dvi=${MODGETTEXT_RUN_DEPENDS}

WANTLIB-nautilus= ${WANTLIB} gthread-2.0 nautilus-extension evdocument3 \
		ICE SM dbus-1 pthread
LIB_DEPENDS-nautilus= ${BASE_PKGPATH} \
		${LIB_DEPENDS} \
		x11/gnome/nautilus
RUN_DEPENDS-nautilus=${MODGETTEXT_RUN_DEPENDS}
d87 1
a87 1
CONFIGURE_STYLE=gnu
d93 1
a93 1
CONFIGURE_ENV=	CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include"
d95 2
a96 2
MULTI_PACKAGES=	-main -dvi -nautilus
PSEUDO_FLAVORS=	no_dvi no_nautilus light
d99 1
a99 1
FLAVOR += no_dvi no_nautilus
d106 1
a106 1
CONFIGURE_ARGS+= --enable$s
d108 1
a108 1
CONFIGURE_ARGS+= --disable$s
@


1.115
log
@update to evince-3.14.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2014/08/10 11:57:05 jasper Exp $
d16 4
a37 9
# -std=c++11 needed
MODULES +=		gcc4 lang/clang
MODGCC4_ARCHS =		powerpc sparc64 alpha
MODGCC4_LANGS =		c c++
MODCLANG_ARCHS =	amd64 i386
MODCLANG_LANGS =	c c++

USE_GROFF =	Yes

d53 1
a53 1
WANTLIB-main=	${WANTLIB} ICE SM c dbus-1 gailutil-3 \
d85 1
a85 6
# disable -Werror:
#     warning: argument unused during compilation: '-I .'
CONFIGURE_ARGS +=       --enable-compile-warnings=no \
			--enable-cxx-warnings=no

# XXX: Re-enable when it actually builds
@


1.114
log
@update to evince-3.12.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2014/04/14 18:13:23 jasper Exp $
d10 1
a10 1
GNOME_VERSION=	3.12.2
d30 10
a39 3
MODULES=	devel/gettext \
		x11/gnome \
		devel/dconf
d89 8
@


1.113
log
@update to evince-3.12.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2014/04/04 09:03:36 ajacoutot Exp $
d10 1
a10 1
GNOME_VERSION=	3.12.1
@


1.112
log
@Don't crash when trying to save a copy (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2014/04/02 09:36:11 jasper Exp $
d10 1
a10 1
GNOME_VERSION=	3.12.0
a14 4

REVISION-main=	2
REVISION-dvi=	0
REVISION-nautilus=0
@


1.111
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2014/04/01 18:38:53 jasper Exp $
d16 1
a16 1
REVISION-main=	1
@


1.110
log
@switch over port to MODGNOME_TOOLS that didnt have it yet
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2014/04/01 18:06:29 jasper Exp $
d50 1
a50 1
MODGNOME_TOOLS += gobject-introspection yelp desktop-file-utils
@


1.109
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2014/04/01 17:03:13 jasper Exp $
d50 2
a51 1
MODGNOME_TOOLS += gobject-introspection yelp
a84 1
  desktop-file-utils  gtk-update-icon-cache  shared-mime-info
@


1.108
log
@move more bits and bobs into MODGNOME_TOOLS to make it more clear which
tools are actually used.

This commit replaces
MODGNOME_DESKTOP_FILE with MODGNOME_TOOLS += desktop-file-utils
MODGNOME_MIME_FILE with MODGNOME_TOOLS += shared-mime-info
MODGNOME_ICON_CACHE with MODGNOME_TOOLS += gtk-update-icon-cache

(some prettyfication will follow shortly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2014/04/01 15:31:46 jasper Exp $
d50 1
a50 1
MODGNOME_TOOLS= gobject-introspection yelp
d84 1
a84 4
MODGNOME_TOOLS +=	desktop-file-utils
MODGNOME_TOOLS +=	gtk-update-icon-cache
MODGNOME_TOOLS +=	shared-mime-info

@


1.107
log
@start to make MODGNOME_TOOLS resemble the name of the tools actually used.
rename 'gi' to 'gobject-introspection'.

discussed with aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2014/04/01 13:21:45 ajacoutot Exp $
d84 3
a86 3
MODGNOME_DESKTOP_FILE=	Yes
MODGNOME_ICON_CACHE=	Yes
MODGNOME_MIME_FILE=	Yes
@


1.106
log
@In x11/gnome ports we use disable-static inconsistently, usually to get
rid of static module archives; but since we end up manually removing the
libtool la files anyway, just don't bother setting up the tag.
part 2/2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2014/03/30 13:37:34 ajacoutot Exp $
d50 1
a50 1
MODGNOME_TOOLS= gi yelp
@


1.105
log
@Fix a possible crash during the build with introspection enabled (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2014/03/27 12:14:31 jasper Exp $
d16 3
a18 1
REVISION-main=	0
a87 2
LIBTOOL_FLAGS=	--tag=disable-static

a88 1
CONFIGURE_ARGS+= --disable-static
d114 1
a114 1
	rm ${PREFIX}/lib/nautilus/extensions-${MAJ_V}/*.la
d116 1
a116 1
	rm ${PREFIX}/lib/evince/4/backends/*.la
@


1.104
log
@update to evince-3.12.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2013/11/16 21:00:43 jasper Exp $
d12 6
a21 4

PKGNAME-main=	${DISTNAME}
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}
PKGNAME-nautilus= nautilus-evince-${GNOME_VERSION}
@


1.103
log
@updat eto evince-3.10.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2013/11/14 15:05:43 jasper Exp $
d10 1
a10 1
GNOME_VERSION=	3.10.3
@


1.102
log
@update to evince-3.10.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2013/10/15 09:44:20 ajacoutot Exp $
d10 1
a10 1
GNOME_VERSION=	3.10.2
@


1.101
log
@Use MODGNOME_MIME_FILE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2013/09/28 08:50:41 ajacoutot Exp $
d10 1
a10 1
GNOME_VERSION=	3.10.0
a19 4

REVISION-main=		2
REVISION-nautilus=	2
REVISION-dvi=		1
@


1.100
log
@Remove hardcoded HOMEPAGE and use the one from the x11/gnome MODULE
instead. It is just too hard to maintain a coherent list of still
reachable homepages for GNOME projects so use wiki.gnome.org which is
the entry point for *all* GNOME apps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2013/09/27 06:30:43 ajacoutot Exp $
d21 3
a23 3
REVISION-main=		1
REVISION-nautilus=	1
REVISION-dvi=		0
d67 1
a67 3
		misc/shared-mime-info \
		print/ghostscript/gnu \
		${MODGNOME_RUN_DEPENDS_yelp}
d75 1
d82 1
a82 1
RUN_DEPENDS-nautilus=
d86 1
@


1.99
log
@Merge -djvu into -main ; it is a small dependency and renders packaging
less complex.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2013/09/26 16:06:47 jasper Exp $
d21 3
a23 2
REVISION-main=		0
REVISION-nautilus=	0
a26 2

HOMEPAGE=	http://www.gnome.org/projects/evince/
@


1.98
log
@update to evince-3.10.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2013/07/09 09:40:53 jasper Exp $
a5 1
COMMENT-djvu=	evince document viewer backend for djvu documents
a17 1
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}
d21 3
d58 2
a59 1
		poppler poppler-glib spectre avahi-common
d62 1
a71 6
WANTLIB-djvu=	${WANTLIB} jpeg evdocument3 djvulibre ICE SM \
		dbus-1 pthread
LIB_DEPENDS-djvu= ${LIB_DEPENDS} \
		${BASE_PKGPATH} \
		graphics/djvulibre

d97 2
a98 2
MULTI_PACKAGES=	-main -djvu -dvi -nautilus
PSEUDO_FLAVORS=	no_djvu no_dvi no_nautilus light
d101 1
a101 1
FLAVOR += no_djvu no_dvi no_nautilus
d106 1
a106 1
.for s in -nautilus -djvu -dvi
@


1.97
log
@update to evince-3.8.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2013/05/31 15:34:47 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	3.8.3
d23 1
a23 1
SHARED_LIBS +=  evdocument3               0.1 # 4.0
@


1.96
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2013/05/15 07:57:57 jasper Exp $
d11 1
a11 1
GNOME_VERSION=	3.8.2
a21 5

REVISION-main=	0
REVISION-djvu=	0
REVISION-dvi=	0
REVISION-nautilus=	0
@


1.95
log
@update to evince-3.8.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2013/04/16 13:17:01 ajacoutot Exp $
d23 5
d52 1
a52 1
WANTLIB += atk-bridge-2.0 atspi harfbuzz icudata icule icuuc
@


1.94
log
@goi -> gi (gnome MODULE change).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2013/04/02 16:16:47 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	3.8.0
a21 2

REVISION-main=	0
@


1.93
log
@No need to explicitely depend on gnome-icon-theme anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/04/01 10:33:59 jasper Exp $
d52 1
a52 1
MODGNOME_TOOLS= goi yelp
@


1.92
log
@- update to evince-3.8.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2013/03/26 14:04:36 ajacoutot Exp $
d23 2
d42 1
a42 2
BUILD_DEPENDS=	x11/gnome/icon-theme \
		devel/gsettings-desktop-schemas
a68 1
		x11/gnome/icon-theme \
@


1.91
log
@Remove NoDiplay from the desktop file so that evince is properly
registered as a PDF viewer; upstream finally agreed to make this change.

Regen WANTLIB while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/03/22 06:44:39 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	3.6.1
d23 1
a23 6
REVISION-main=	0
REVISION-djvu=	0
REVISION-dvi=	0
REVISION-nautilus=	0

SHARED_LIBS +=  evdocument3               0.0 # 3.0
d56 1
a56 1
		gnome-keyring gs gcrypt gpg-error stdc++ \
d58 1
a58 2
		poppler poppler-glib spectre gnome-keyring \
		avahi-common
a60 1
		x11/gnome/libgnome-keyring \
d63 2
d72 1
a72 1
		 dbus-1 pthread
d97 1
a97 2
CONFIGURE_ARGS+= --disable-static \
		--disable-comics
@


1.90
log
@Remove outdated comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/03/11 11:10:52 espie Exp $
d23 5
d48 1
a48 1
WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes drm stdc++
d50 1
a50 2
WANTLIB += freetype gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 gtk-3 pango-1.0 Xau Xdmcp Xxf86vm
d52 1
a52 1
WANTLIB += GL xcb-shm xcb xcb-render z gthread-2.0 cairo-gobject m ffi
d54 1
d61 1
a61 1
		gnome-keyring gs gcrypt gpg-error \
d63 2
a64 1
		poppler poppler-glib spectre gnome-keyring
d83 1
a83 1
		jpeg
@


1.89
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/02/09 17:38:24 bcallah Exp $
a71 2
# port-lib-depends-check misses these ones because the depending lib
# is under lib/evince/3/backends/
a77 2
# port-lib-depends-check misses these ones because the depending lib
# is under lib/evince/3/backends/
@


1.88
log
@Do this the right way, as noted by espie@@ on ports@@

ok aja@@ jasper@@ (the two MAINTAINERS)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/02/09 14:49:51 sthen Exp $
a31 1
PERMIT_PACKAGE_FTP=	Yes
a32 2
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
@


1.87
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/02/08 17:12:31 bcallah Exp $
d129 1
a129 1
.if !${FLAVOR:Mno_nautilus}
@


1.86
log
@Fix 'make fake' when no_nautilus is found in FLAVORS.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/10/15 09:48:31 jasper Exp $
d129 1
a129 1
.if !${FLAVOR:L:Mno_nautilus}
@


1.85
log
@- update to evince-3.6.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2012/09/29 13:14:04 ajacoutot Exp $
d127 3
d131 1
@


1.84
log
@@@comment -> post-install rm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/09/28 11:44:52 jasper Exp $
d11 1
a11 1
GNOME_VERSION=	3.6.0
a21 5

REVISION-main=	0
REVISION-djvu=	0
REVISION-dvi=	0
REVISION-nautilus=0
@


1.83
log
@- update to evince-3.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2012/09/01 14:36:57 ajacoutot Exp $
d23 5
d130 4
@


1.82
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2012/07/13 15:11:41 kili Exp $
d11 1
a11 1
GNOME_VERSION=	3.4.0
a22 5
REVISION-main=	2
REVISION-djvu=	1
REVISION-dvi=	0
REVISION-nautilus=0

d52 1
d73 2
a74 1
WANTLIB-djvu=	${WANTLIB} jpeg evdocument3 djvulibre
d90 2
a91 1
WANTLIB-nautilus= ${WANTLIB} gthread-2.0 nautilus-extension evdocument3
@


1.81
log
@Adjust WANTLIB for poppler-0.20.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/07/08 10:33:49 jasper Exp $
d23 4
a26 2
REVISION-main=	1
REVISION-djvu=	0
@


1.80
log
@unbreak, no_x11 was removed from djvulibre
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/06/15 08:32:16 ajacoutot Exp $
d23 1
a23 1
REVISION-main=	0
d62 1
a62 1
		jpeg pthread tiff xml2 lcms openjpeg \
@


1.79
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2012/03/29 07:03:30 ajacoutot Exp $
d24 1
a77 1
# we don't need qt3 support in djvulibre, hence no_x11
d80 1
a80 1
		graphics/djvulibre,no_x11
@


1.78
log
@Update to evince-3.4.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/12/05 23:01:30 ajacoutot Exp $
d22 2
@


1.77
log
@Update WANTLIB to unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/12/03 20:30:09 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	3.2.1
a21 5

REVISION-main=	1
REVISION-djvu=	0
REVISION-dvi=	0
REVISION-nautilus=	0
@


1.76
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/11/18 12:37:19 espie Exp $
d23 4
a26 1
REVISION-main=	0
d51 1
a51 1
WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes
d54 1
a54 1
WANTLIB += gmodule-2.0 gobject-2.0 gtk-3 pango-1.0
d62 1
a62 1
WANTLIB-main=	${WANTLIB} ICE SM c dbus-1 gailutil-3 gdk-x11-2.0 \
d65 1
a65 2
		poppler poppler-glib spectre gnome-keyring \
		stdc++
d86 1
a86 1
		c jpeg
@


1.75
log
@use bsd.port.arch.mk for pseudo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/11/17 11:42:31 jasper Exp $
d23 2
d98 2
a99 1
MODGNOME_DESKTOP_FILE=		Yes
@


1.74
log
@- move away from gnu libtool now that gobject-introspection has been fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/10/17 18:40:16 ajacoutot Exp $
d102 1
a102 4
		--disable-comics \
		--enable-nautilus \
		--enable-djvu \
		--enable-dvi
d107 2
a108 2
MULTI_PACKAGES=	-main
PSEUDO_FLAVORS=	light
d110 5
d116 7
a122 10
.if ${FLAVOR:L:Mlight}
CONFIGURE_ARGS+= --disable-nautilus \
		--disable-djvu \
		--disable-dvi
.else
MULTI_PACKAGES+= -djvu -dvi -nautilus
CONFIGURE_ARGS+= --enable-nautilus \
		--enable-djvu \
		--enable-dvi
.endif
@


1.73
log
@Update to evince-3.2.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/09/28 09:51:36 jasper Exp $
a98 4

# XXX: the libtool wrapper script is passed as argument to g-ir-scanner,
# instead of the actual library
USE_LIBTOOL=	gnu
@


1.72
log
@sync after recent gnome.port.mk CONFIGURE_ENV changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/09/27 13:14:00 jasper Exp $
d11 1
a11 1
GNOME_VERSION=	3.2.0
d51 1
a51 1
WANTLIB += GL xcb-shm xcb xcb-render z gthread-2.0 cairo-gobject m ffi kvm
@


1.71
log
@- update to 3.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/09/22 14:23:21 jasper Exp $
d111 2
a112 3
CONFIGURE_ENV=	CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
		CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.70
log
@MODGNOME_TOOLS+=yelp, as originally intended.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/09/20 21:04:24 jasper Exp $
d11 1
a11 1
GNOME_VERSION=	3.0.2
d13 1
a13 1
MAJ_V=		${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
a22 5
REVISION-main=	6
REVISION-djvu=	2
REVISION-dvi=	1
REVISION-nautilus=1

a36 2
EXTRACT_SUFX=		.tar.bz2

d46 1
a46 1
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
d51 1
a51 2
WANTLIB += GL  Xxf86vm drm xcb-shm
WANTLIB += xcb xcb-render z gthread-2.0 cairo-gobject m
@


1.69
log
@CONFIGURE_SHARED is now implied by gnome.port.mk, so no need to make it explicit anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/09/20 20:51:51 jasper Exp $
d23 1
a23 1
REVISION-main=	5
d61 1
a61 1
MODGNOME_TOOLS= 	goi
@


1.68
log
@switch to MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/09/19 07:31:45 ajacoutot Exp $
d113 1
a113 2
CONFIGURE_ARGS+= ${CONFIGURE_SHARED} \
		--disable-static \
@


1.67
log
@DESKTOP_FILES => MODGNOME_DESKTOP_FILE, like it should always have been.

discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/09/16 10:02:36 espie Exp $
d23 1
a23 1
REVISION-main=	4
a50 1
		devel/gobject-introspection \
d61 2
d78 2
a79 1
		x11/gnome/icon-theme
a103 1
MODGNOME_HELP_FILES= 	Yes
a113 1
		--disable-gtk-doc \
a115 1
		--enable-introspection \
@


1.66
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/09/13 13:38:07 ajacoutot Exp $
d103 1
a103 1
DESKTOP_FILES=		Yes
@


1.65
log
@I got slapped by espie@@, it's bad for ze bulk!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/09/13 12:37:37 ajacoutot Exp $
d23 4
a26 4
REVISION-main=	3
REVISION-djvu=	1
REVISION-dvi=	0
REVISION-nautilus=0
@


1.64
log
@we don't need qt3 nor qt4 support in poppler.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/09/12 12:07:25 jasper Exp $
d23 1
a23 1
REVISION-main=	2
d69 1
a69 2
# we don't need qt3 nor qt4 support in poppler
LIB_DEPENDS-main= print/poppler,no_qt,no_qt4 \
@


1.63
log
@switch the rest of the ports using gnome.port.mk over to .tar.xz where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/09/12 07:26:19 ajacoutot Exp $
d23 2
a24 2
REVISION-main=	1
REVISION-djvu=	0
d69 2
a70 1
LIB_DEPENDS-main= print/poppler \
@


1.62
log
@Start the GNOME3 merge armageddon... breakage expected.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/06/13 15:52:15 ajacoutot Exp $
d41 2
@


1.61
log
@Redirect the glib-compile-schemas goo stdout to /dev/null, no need to
be chatty here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/04/07 11:30:22 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	2.32.0
d23 2
a24 2
REVISION-main=	4
REVISION-nautilus= 0
d26 1
d28 2
a29 2
SHARED_LIBS +=  evdocument 1.0                   # .2.0
SHARED_LIBS +=  evview     1.0                   # .2.0
a43 1
		devel/gconf2 \
d49 2
a50 1
		devel/gobject-introspection
d54 2
a55 2
WANTLIB += freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 gtk-x11-2.0 m pango-1.0
d57 2
a58 2
WANTLIB += GL X11-xcb Xxf86vm drm xcb-shm
WANTLIB += xcb xcb-render z gthread-2.0
d60 3
a62 1
WANTLIB-main=	${WANTLIB} ICE ORBit-2 SM c dbus-1 \
d66 1
a66 1
		gailutil stdc++ ${MODGCONF2_WANTLIB}
d70 1
a70 2
		${MODGCONF2_LIB_DEPENDS} \
		${MODGETTEXT_LIB_DEPENDS}
d72 1
d77 1
a77 1
WANTLIB-djvu=	${WANTLIB} jpeg evdocument djvulibre
d81 1
a81 1
LIB_DEPENDS-djvu= ${MODGETTEXT_LIB_DEPENDS} \
a83 1
RUN_DEPENDS-djvu= ${MODGCONF2_RUN_DEPENDS}
d85 2
a86 1
WANTLIB-dvi=	${WANTLIB} gs evdocument kpathsea spectre ICE SM
d89 1
a89 1
LIB_DEPENDS-dvi= ${MODGETTEXT_LIB_DEPENDS} \
a92 1
RUN_DEPENDS-dvi= ${MODGCONF2_RUN_DEPENDS}
d94 1
a94 1
WANTLIB-nautilus= ${WANTLIB} gthread-2.0 nautilus-extension evdocument
d96 1
a96 2
		${MODGETTEXT_LIB_DEPENDS} \
		${MODLIBICONV_LIB_DEPENDS} \
a101 2
MODGCONF2_SCHEMAS_DIR=  evince
MODGCONF2_LIBDEP= 	No
a113 1
		--disable-impress \
d117 1
a117 2
		--enable-dvi \
		--enable-pixbuf
@


1.60
log
@Add introspection support (needed for on-going GNOME 3 work).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/04/05 16:37:58 ajacoutot Exp $
d23 1
a23 1
REVISION-main=	3
@


1.59
log
@--disable-scrollkeeper is not needed when rarian is in the dependency
chain (scrollkeer is a compatility wrapper that does nothing).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/03/26 15:05:31 ajacoutot Exp $
d23 1
a23 1
REVISION-main=	2
d48 2
a49 1
BUILD_DEPENDS=	x11/gnome/icon-theme
d106 4
a112 1
		--disable-introspection \
d116 1
@


1.58
log
@Tweak COMMENT.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/03/25 09:13:43 ajacoutot Exp $
a112 1
		--disable-scrollkeeper \
@


1.57
log
@Use the new dconf MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/01/06 22:55:31 jasper Exp $
d5 1
a5 1
COMMENT-main=	document viewer for multiple document formats
d23 1
a23 1
REVISION-main=	1
@


1.56
log
@SECURITY FIXES for CVE-2010-2640, CVE-2010-2641, CVE-2010-2642, CVE-2010-2643.

Patches from upstream git.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/12/01 14:46:59 ajacoutot Exp $
d23 1
a23 1
REVISION-main=	0
d43 3
a45 1
		devel/gconf2
d71 1
a71 2
		x11/gnome/icon-theme \
		devel/dconf
a108 1
		--disable-schemas-compile \
@


1.55
log
@No need to install libtool file for dlopen module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/11/17 08:05:13 espie Exp $
d25 1
@


1.54
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/09 18:22:26 espie Exp $
d24 1
@


1.53
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/08 10:34:53 espie Exp $
d44 1
a44 1
BUILD_DEPENDS=	::x11/gnome/icon-theme
d59 3
a61 3
LIB_DEPENDS-main= ::print/poppler \
		::print/libspectre \
		::x11/gnome/libgnome-keyring \
d65 4
a68 4
		:shared-mime-info-*:misc/shared-mime-info \
		:ghostscript-*:print/ghostscript/gnu \
		::x11/gnome/icon-theme \
		::devel/dconf
d75 2
a76 2
		::${BASE_PKGPATH} \
		::graphics/djvulibre,no_x11
d83 3
a85 3
		::${BASE_PKGPATH} \
		::print/texlive/base \
		::print/libspectre
d89 1
a89 1
LIB_DEPENDS-nautilus= ::${BASE_PKGPATH} \
d92 1
a92 1
		::x11/gnome/nautilus
@


1.52
log
@restore gconf2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/10/27 11:04:39 ajacoutot Exp $
d88 2
a89 2
WANTLIB-nautilus= ${WANTLIB} gthread-2.0 nautilus-extension
LIB_DEPENDS-nautilus= evdocument::${BASE_PKGPATH} \
@


1.51
log
@Add a run dependency on dconf now that we have it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/10/23 14:10:16 ajacoutot Exp $
d58 1
a58 1
		gailutil stdc++
@


1.50
log
@Explicitely set --disable-schemas-compile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/10/18 21:50:39 sthen Exp $
d23 2
d67 2
a68 1
		::x11/gnome/icon-theme
@


1.49
log
@fix tabs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/10/18 18:13:13 espie Exp $
d103 1
@


1.48
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/10/18 13:51:01 jasper Exp $
d40 1
a40 1
		USE_GROFF =	Yes
@


1.47
log
@- use_x11 comes from gnome.port.mk now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/10/14 14:31:01 ajacoutot Exp $
d40 1
@


1.46
log
@Update to evince-2.32.0, one of the last missing part of the GNOME update to 2.32.0.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/10/11 08:14:42 jasper Exp $
a90 1
USE_X11=		Yes
@


1.45
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/10/01 09:13:12 ajacoutot Exp $
d11 4
a14 1
GNOME_VERSION=	2.30.3
a22 5
REVISION-main=	1
REVISION-djvu=	0
REVISION-dvi=	0
REVISION-nautilus=	0

d48 2
a49 1
WANTLIB += xcb xcb-render xcb-render-util z gthread-2.0
d51 1
a51 1
WANTLIB-main=	${WANTLIB} ICE ORBit-2 SM c dbus-1 dbus-glib-1 \
d53 6
a58 4
		jpeg pthread tiff xml2 lcms openjpeg
LIB_DEPENDS-main= poppler.>=3,poppler-glib.>=3::print/poppler \
		spectre::print/libspectre \
		gnome-keyring.>=6:libgnome-keyring-*:x11/gnome/libgnome-keyring \
d66 1
a66 1
WANTLIB-djvu=	${WANTLIB} jpeg
d68 2
a69 1
# is under lib/evince/2/backends/
d71 2
a72 2
		evdocument::${BASE_PKGPATH} \
		djvulibre.>=21::graphics/djvulibre
d75 1
a75 1
WANTLIB-dvi=	${WANTLIB} pthread gs
d77 1
a77 1
# is under lib/evince/2/backends/
d79 3
a81 3
		evdocument::${BASE_PKGPATH} \
		kpathsea.>=1::print/texlive/base \
		spectre::print/libspectre
d84 1
a84 1
WANTLIB-nautilus= ${WANTLIB} gthread-2.0
d88 1
a88 1
		nautilus-extension.>=2::x11/gnome/nautilus
d101 2
a102 1
		--enable-gtk-doc=no \
a110 3

# needs recent py-gobject
CONFIGURE_ARGS+= --enable-introspection=no
@


1.44
log
@Unbreak my fixing WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/06/26 03:43:58 ajacoutot Exp $
d20 4
a23 1
REVISION-main=	0
d48 1
a48 1
WANTLIB += glitz gmodule-2.0 gobject-2.0 gtk-x11-2.0 m pango-1.0
@


1.43
log
@Bugfix update to evince-2.30.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/06/21 19:15:54 ajacoutot Exp $
d20 2
d50 1
a50 1
		gnome-keyring gs eggdbus-1 gcrypt gpg-error \
@


1.43.2.1
log
@SECURITY FIXES for CVE-2010-2640, CVE-2010-2641, CVE-2010-2642, CVE-2010-2643.

Patches from upstream git.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/06/26 03:43:58 ajacoutot Exp $
a21 2

REVISION-dvi=	0
@


1.42
log
@Bugfix update to evince-2.30.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/06/09 08:48:13 kevlo Exp $
d11 1
a11 1
GNOME_VERSION=	2.30.2
@


1.41
log
@Make sure dot_dir exists before creating last_settings file.
Patch from upstream.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/05/20 09:57:21 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	2.30.1
d15 1
a15 1
PKGNAME-main=	${DISTNAME}p1
@


1.40
log
@Add a "light" PSEUDO_FLAVOR to be able to build only the -main
subpackage (without the need to have nautilus, texlive and djvulibre).
Regen WANTLIB for -main while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/04/26 17:39:16 ajacoutot Exp $
d15 1
a15 1
PKGNAME-main=	${DISTNAME}p0
@


1.39
log
@Bugfix update to evince-2.30.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/04/20 22:06:50 jasper Exp $
d15 1
a15 1
PKGNAME-main=	${DISTNAME}
a39 2
MULTI_PACKAGES=	-main -djvu -dvi -nautilus

d49 1
a49 1
		jpeg pthread tiff xml2 lcms
d94 1
d110 15
@


1.38
log
@- update evince to 2.30.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2009/12/22 16:06:40 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	2.30.0
d15 1
a15 1
PKGNAME-main=	${DISTNAME}p0
d47 1
a47 1
WANTLIB += xcb xcb-render xcb-render-util z
d50 1
a50 1
		gnome-keyring gs gthread-2.0 \
@


1.37
log
@Cope with recent gnome-keyring changes.
@
text
@d11 1
a11 1
GNOME_VERSION=	2.28.2
d15 1
a15 1
PKGNAME-main=	${DISTNAME}p1
d20 2
a21 2
SHARED_LIBS +=  evdocument 0.0                   # .1.0
SHARED_LIBS +=  evview     0.0                   # .1.0
d47 1
a47 1
WANTLIB += xcb z
d64 1
a64 1
# is under lib/evince/1/backends/
d70 1
a70 1
WANTLIB-dvi=	${WANTLIB} gs
d72 1
a72 1
# is under lib/evince/1/backends/
d86 5
a90 5
USE_X11=	Yes
MODGNOME_HELP_FILES= Yes
DESKTOP_FILES=	Yes
MODGCONF2_SCHEMAS_DIR= evince
MODGCONF2_LIBDEP= No
@


1.36
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/12/16 17:20:47 ajacoutot Exp $
d15 1
a15 1
PKGNAME-main=	${DISTNAME}p0
d54 1
a54 1
		gnome-keyring::x11/gnome/keyring \
@


1.35
log
@Maintenance update to evince-2.28.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/10/19 20:44:59 ajacoutot Exp $
d15 1
a15 1
PKGNAME-main=	${DISTNAME}
@


1.34
log
@Update to evince-2.28.1.
Fix dependencies of the nautilus subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/10/13 11:00:39 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	2.28.1
@


1.33
log
@Major update to evince-2.28.0.
Add a nautilus-evince subpackage (evince plugiun for nautilus).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2009/08/17 09:57:44 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=	2.28.0
d79 1
a79 1
WANTLIB-nautilus= ${WANTLIB}
d81 2
@


1.32
log
@Major update to evince-2.26.2.
Sanitise dependencies of the subpackages.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/08/10 06:31:44 kili Exp $
d8 1
d11 1
a11 1
GNOME_VERSION=	2.26.2
d18 1
d40 1
a40 1
MULTI_PACKAGES=	-main -djvu -dvi
d42 19
a60 19
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender atk-1.0 cairo expat \
		fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 \
		glib-2.0 glitz gmodule-2.0 gobject-2.0 gtk-x11-2.0 \
		m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre \
		pixman-1 png pthread-stubs xcb z

WANTLIB-main=		${WANTLIB} ICE ORBit-2 SM c dbus-1 dbus-glib-1 \
			gnome-keyring gs gthread-2.0 \
			jpeg pthread tiff xml2
LIB_DEPENDS-main=	poppler.>=3,poppler-glib.>=3::print/poppler \
			spectre::print/libspectre \
			gnome-keyring::x11/gnome/keyring \
			${MODGCONF2_LIB_DEPENDS} \
			${MODGETTEXT_LIB_DEPENDS}
RUN_DEPENDS-main=	${RUN_DEPENDS} \
			:shared-mime-info-*:misc/shared-mime-info \
			:ghostscript-*:print/ghostscript/gnu \
			::x11/gnome/icon-theme
d62 1
a62 1
WANTLIB-djvu=		${WANTLIB} jpeg
d65 4
a68 4
LIB_DEPENDS-djvu=	${MODGETTEXT_LIB_DEPENDS} \
			evdocument::${BASE_PKGPATH} \
			djvulibre.>=21::graphics/djvulibre
RUN_DEPENDS-djvu=	${MODGCONF2_RUN_DEPENDS}
d70 1
a70 1
WANTLIB-dvi=		${WANTLIB} gs
d73 16
a88 11
LIB_DEPENDS-dvi=	${MODGETTEXT_LIB_DEPENDS} \
			evdocument::${BASE_PKGPATH} \
			kpathsea.>=1::print/texlive/base \
			spectre::print/libspectre
RUN_DEPENDS-dvi=	${MODGCONF2_RUN_DEPENDS}

USE_X11=		Yes
MODGNOME_HELP_FILES=	Yes
DESKTOP_FILES=		Yes
MODGCONF2_SCHEMAS_DIR=	evince
MODGCONF2_LIBDEP=	No
d90 1
a90 1
LIBTOOL_FLAGS=		--tag=disable-static
d93 1
a93 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
d97 1
a97 2
		--enable-nautilus=no \
		--disable-schemas-install \
d102 3
@


1.31
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/06/11 18:26:44 ajacoutot Exp $
d10 1
a10 1
GNOME_VERSION=	2.24.2
d14 3
a16 3
PKGNAME-main=	${DISTNAME}p12
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}p4
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}p4
d18 2
a19 1
SHARED_LIBS=	evbackend	0.0 # .0.0
d45 1
a45 1
		pixman-1 png pthread-stubs xcb xml2 z
d49 1
a49 1
			jpeg pthread tiff
a52 1
			glade-2.0::devel/libglade2 \
d61 5
a65 3
LIB_DEPENDS-djvu=	evbackend::${BASE_PKGPATH} \
			djvulibre::graphics/djvulibre \
			${MODGETTEXT_LIB_DEPENDS}
d68 7
a74 4
WANTLIB-dvi=		${WANTLIB} gs spectre
LIB_DEPENDS-dvi=	evbackend::${BASE_PKGPATH} \
			kpathsea::print/texlive/base \
			${MODGETTEXT_LIB_DEPENDS}
d81 1
@


1.30
log
@Tweak after recent gconf2 MODULE change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/06/11 05:25:13 ajacoutot Exp $
d14 3
a16 3
PKGNAME-main=	${DISTNAME}p11
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}p3
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}p3
d44 1
a44 1
		pixman-1 png xml2 z
@


1.29
log
@Also add run_depends on gconf-2 for !-main.
While here, regen PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/06/10 20:46:36 kili Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p10
d55 2
a56 1
RUN_DEPENDS-main=	:shared-mime-info-*:misc/shared-mime-info \
d58 1
a58 2
			::x11/gnome/icon-theme \
			${MODGNOME_RUN_DEPENDS}
@


1.28
log
@
-main depends on gconf2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/06/08 16:58:15 ajacoutot Exp $
d14 3
a16 3
PKGNAME-main=	${DISTNAME}p9
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}p2
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}p2
d64 1
a64 1
RUN_DEPENDS-djvu=	# empty
d70 1
a70 1
RUN_DEPENDS-dvi=	# empty
@


1.27
log
@Bump after recent gconf2 MODULE changes.

"yep, bumps are cheap" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/06/07 05:32:02 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p8
d53 1
@


1.26
log
@Convert to using the new gconf2.port.mk module.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/04/16 08:11:13 ajacoutot Exp $
d14 3
a16 3
PKGNAME-main=	${DISTNAME}p7
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}p1
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}p1
@


1.25
log
@- now that we have rarian, the 'scrollkeeper-update -> /bin/true' hack
is not needed as the legacy scrollkeeper-update provided by rarian does
not do anything anymore

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/04/14 21:34:42 jasper Exp $
d14 3
a16 3
PKGNAME-main=	${DISTNAME}p6
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}p0
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}p0
d32 2
a33 1
		x11/gnome
d47 1
a47 1
			gconf-2 gnome-keyring gs gthread-2.0 \
d74 1
d88 1
a88 2
		--enable-pixbuf \
		--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/evince/
@


1.24
log
@- when a hobbit bumps a pkgname, the other two pkgnames want to get some too..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/04/06 16:15:13 stsp Exp $
a91 3

post-patch:
	@@ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
@


1.23
log
@Add patch which prevents focus stealing while reloading a document.
Bump patch level.

While here, add ajacoutot@@ and jasper@@ as maintainers,
requested by ajacoutot@@.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/04/06 10:09:06 ajacoutot Exp $
d15 2
a16 2
PKGNAME-djvu=	evince-djvu-${GNOME_VERSION}
PKGNAME-dvi=	evince-dvi-${GNOME_VERSION}
@


1.22
log
@- cope with recent gnome.port.mk / MODGNOME_HELP_FILES changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/03/14 11:36:24 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p5
d21 3
@


1.21
log
@- nothing should have to run_depends on rarian anymore
- explicitely add build_depends on rarian where gnome-doc-utils is also a
build dependency as it does not itself run_depends on rarian anymore

This was the 2nd and hopefully last pass of rarian/scrollkeeper cleaning.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/03/14 10:40:51 ajacoutot Exp $
d31 1
a31 3
BUILD_DEPENDS=	::textproc/rarian \
		:gnome-doc-utils-*:x11/gnome/doc-utils \
		::x11/gnome/icon-theme
@


1.20
log
@- first pass at cleaning rarian/scrollkeeper handling
remove rarian-sk-update from PLIST ; it is only a wrapper that does
noting: librarian takes care of everything now.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/02/13 21:42:55 martynas Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p4
d52 1
a52 2
RUN_DEPENDS-main=	::textproc/rarian \
			:shared-mime-info-*:misc/shared-mime-info \
@


1.19
log
@does not build for me on a clean system due to missing LIB_DEPENDS;
fix.  ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/01/08 20:09:33 sturm Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p3
@


1.18
log
@missing LIB_DEPENDS on gnome-keyring
unbreak BUILD_DEPENDS
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/12/17 18:41:51 jasper Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p2
d45 1
a45 1
			gconf-2 glade-2.0 gnome-keyring gs gthread-2.0 \
d50 1
@


1.17
log
@- switch to rarian instead of scrollkeeper
- regen PLIST

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/12/16 11:05:28 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p1
d31 2
a32 1
BUILD_DEPENDS=	:gnome-doc-utils-*:x11/gnome/doc-utils \
a43 2
BUILD_DEPENDS=		::textproc/rarian

d49 1
@


1.16
log
@- missing build_depends on scrollkeeper
spotted by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/12/14 19:33:48 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p0
d43 1
a43 1
BUILD_DEPENDS=	:scrollkeeper-*:textproc/scrollkeeper
d51 1
a51 1
RUN_DEPENDS-main=	:scrollkeeper-*:textproc/scrollkeeper \
@


1.15
log
@- update to evince-2.24.2
- use gnome MODULE
- add missing desktop-file-utils run_depends
- this is a SHARED_ONLY port, add --disable-static
- remove dot.desktop patch, evince should be in graphics, not office
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/06/29 20:44:51 sthen Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}
d42 2
@


1.14
log
@sync WANTLIB following cairo update. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/06/02 14:10:07 ajacoutot Exp $
d9 3
a11 2
V=		2.22.1.1
DISTNAME=	evince-${V}
d14 3
a16 3
PKGNAME-main=	${DISTNAME}p1
PKGNAME-djvu=	evince-djvu-${V}p0
PKGNAME-dvi=	evince-dvi-${V}p0
d28 2
a29 3
MASTER_SITES=	${MASTER_SITE_GNOME:=sources/evince/${V:C,\.[0-9]\.[0-9]*$,,}/}

MODULES=	devel/gettext textproc/intltool
a31 1
		:ghostscript-*:print/ghostscript/gnu \
d36 12
a47 15
WANTLIB=	ORBit-2 ORBitCosNaming-2 X11 Xau Xcomposite \
		Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr \
		Xrender atk-1.0 audiofile bonobo-2 \
		bonobo-activation cairo crypto dbus-1 dbus-glib-1 \
		esd expat fontconfig freetype gconf-2 gdk-x11-2.0 \
		gdk_pixbuf-2.0 gio-2.0 glib-2.0 glitz gmodule-2.0 \
		gnome-2 gnomevfs-2 gobject-2.0 \
		gthread-2.0 gtk-x11-2.0 m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pcre pixman-1 png popt ssl util xml2 z

WANTLIB-main=		${WANTLIB} ICE SM art_lgpl_2 bonoboui-2 c gailutil \
			glade-2.0 gnome-keyring gnomecanvas-2 jpeg pthread \
			tiff
LIB_DEPENDS-main=	gnomeui-2.>=2000::x11/gnome/libgnomeui \
			poppler.>=3,poppler-glib.>=3::print/poppler \
d53 1
a53 1
			:yelp-*:x11/gnome/yelp
d59 1
d61 1
a61 1
WANTLIB-dvi=		${WANTLIB}
d65 7
d74 3
a76 1
CONFIGURE_ARGS=	--disable-comics \
d78 1
a78 1
		--disable-nautilus \
d85 1
a88 5


USE_LIBTOOL=	Yes
USE_X11=	Yes
USE_GMAKE=	Yes
@


1.13
log
@- remove support for MODGNOME_DEVHELP_FILES from the gnome MODULE ;
it makes more sense to add devhelp as run_depends for gnome-session and
leave it to the user to install it manually for other packages

"if you're as happy as a pig in poop, commit it" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/05/21 22:13:35 bernd Exp $
d13 3
a15 3
PKGNAME-main=	${DISTNAME}p0
PKGNAME-djvu=	evince-djvu-${V}
PKGNAME-dvi=	evince-dvi-${V}
d45 1
a45 1
		pangoft2-1.0 pcre png popt ssl util xml2 z
@


1.12
log
@Update to evince-2.22.1.1 and put djvu and dvi backends into subpackages.

help & ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/04/17 08:10:10 ajacoutot Exp $
d13 1
a13 1
PKGNAME-main=	${DISTNAME}
a56 1
			:devhelp-*:x11/gnome/devhelp \
@


1.11
log
@- tweak the way the gtk-update-icon-cache goo is run

gtk-update-icon-cache is part of gtk+2: adding gtk+2 to run_depends just
to update the icon cache (which only gtk apps can use) is overkill to
say the least!
As from now, each time icons are installed under %D/share/icons, we try
to execute gtk-update-icon-cache and if it is not there, we just ignore
the error.
What it means is that if you have gtk+2 installed, then it'll run fine
and your apps will be able to use the cache. Otherwise, it will silently
fails which is fine since it means none of your apps would have been
able to take advantage of the cache anyway.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/12/11 10:08:18 landry Exp $
d3 1
a3 1
COMMENT=	document viewer for multiple document formats
d5 6
a10 3
V=		2.20.2
DISTNAME=	evince-$V
PKGNAME=	${DISTNAME}p1
d13 6
d21 1
a21 1
# GPL
d27 3
a29 1
MASTER_SITES=	${MASTER_SITE_GNOME:=sources/evince/${V:C,\.[0-9]*$,,}/}
d31 3
a33 1
MODULES=	devel/gettext
d35 1
a35 15
BUILD_DEPENDS=	:ghostscript-*:print/ghostscript/gnu \
		:gnome-doc-utils-*:x11/gnome/doc-utils \
		:p5-XML-Parser-*:textproc/p5-XML-Parser
LIB_DEPENDS=	audiofile::devel/libaudiofile \
		djvulibre::graphics/djvulibre \
		esd.>=2::audio/esound \
		gnome-keyring.>=2::x11/gnome/keyring \
		gnomeprintui-2-2::x11/gnome/libgnomeprintui \
		gnomeui-2.>=2000::x11/gnome/libgnomeui \
		gnomevfs-2.>=2000::x11/gnome/vfs2 \
		kpathsea::print/texlive/base \
		poppler.>=3,poppler-glib.>=3::print/poppler
RUN_DEPENDS=	:ghostscript-*:print/ghostscript/gnu \
		:scrollkeeper-*:textproc/scrollkeeper \
		:shared-mime-info-*:misc/shared-mime-info
d37 1
a37 1
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite \
d39 30
a68 7
		Xrender art_lgpl_2 atk-1.0 bonobo-2 bonobo-activation \
		bonoboui-2 c cairo crypto dbus-1 dbus-glib-1 expat \
		fontconfig freetype gailutil gconf-2 gdk-x11-2.0 \
		gdk_pixbuf-2.0 glade-2.0 glib-2.0 glitz gmodule-2.0 \
		gnome-2 gnomecanvas-2 gnomeprint-2-2 gobject-2.0 \
		gthread-2.0 gtk-x11-2.0 jpeg m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pcre png popt pthread ssl tiff util xml2 z 
d71 3
a73 1
CONFIGURE_ARGS=	--disable-nautilus \
d79 1
a79 2
		--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/evince/ \
		--with-print=gtk
a87 1
NO_REGRESS=	Yes
@


1.10
log
@Remove the reference to the non-existent no_libgnome flavor in DESCR.
(People wanting a gtk-based pdf viewer with less dependencies should try
epdfview.)
spotted by fgsch@@, reminded by kili@@ and ok eric@@ fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/12/07 20:00:40 kili Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
@


1.9
log
@
Update to 2.20.2 (lots of bugfixes and required due to the poppler
update).

Based on an update to 0.9.* from Mikolaj Kucharski several months ago.

Note that this doesn not include the no_libgnome FLAVOR suggested by
Mikolaj, because it saves much less dependencies and space than it did
for the 0.9.* version.

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/10/01 11:42:30 steven Exp $
d7 1
@


1.8
log
@switch teTeX -> texlive

discussed with sturm and mbalmer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/15 20:09:40 simon Exp $
d5 2
a6 2
DISTNAME=	evince-0.8.1
PKGNAME=	${DISTNAME}p0
d17 1
a17 1
MASTER_SITES=	${MASTER_SITE_GNOME:=sources/evince/0.8/}
d20 2
a21 1
BUILD_DEPENDS=	:p5-XML-Parser-*:textproc/p5-XML-Parser \
d23 5
a27 4
		:ghostscript-*:print/ghostscript/gnu \
		::print/texlive/base
LIB_DEPENDS=	poppler.>=1,poppler-glib.>=1::print/poppler \
		gnomeui-2::x11/gnome/libgnomeui \
d29 6
a34 5
		esd.>=2::audio/esound \
		audiofile::devel/libaudiofile
RUN_DEPENDS=	:scrollkeeper-*:textproc/scrollkeeper \
		:ghostscript-*:print/ghostscript/gnu \
		::print/texlive/base \
d37 7
a43 7
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcursor \
		Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender \
		art_lgpl_2 atk-1.0 bonobo-2 bonobo-activation bonoboui-2 \
		c cairo crypto dbus-1 dbus-glib-1 expat fontconfig \
		freetype gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 glade-2.0 \
		glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring \
		gnomecanvas-2 gnomeprint-2-2 gnomevfs-2 gobject-2.0 \
d45 1
a45 1
		pangoft2-1.0 png popt pthread ssl tiff util xml2 z 
d48 1
a48 1
CONFIGURE_ARGS=	--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/evince/ \
d50 3
a52 2
		--disable-nautilus \
		--disable-gnome-print \
d54 2
a55 1
		--enable-dvi
d60 1
d64 1
@


1.7
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/05/13 19:11:19 kili Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
d23 1
a23 1
		:teTeX_base-*:print/teTeX/base
d31 1
a31 1
		:teTeX_base-*:print/teTeX/base \
@


1.6
log
@
Update to 0.8.1, unbreaking it for the latest gnome updates.

RUN_DEPENDS += shared-mime-info, spotted by Lawrence Teo; wrong
PKGNAME spotted by him, too. Thanks!

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/12/30 12:41:39 steven Exp $
d3 1
a3 1
COMMENT=	"document viewer for multiple document formats"
@


1.5
log
@fix buffer overflow in the get_next_text() function (CVE-2006-5864)

from evince CVS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/12/16 12:22:33 espie Exp $
d5 2
a6 2
DISTNAME=	evince-0.5.2
PKGNAME=	${DISTNAME}p0
d17 1
a17 1
MASTER_SITES=	${MASTER_SITE_GNOME:=sources/evince/0.5/}
d26 1
d31 2
a32 1
		:teTeX_base-*:print/teTeX/base
d34 9
a42 10
WANTLIB=	freetype crypto c Xext fontconfig pthread SM ICE \
		Xrender X11 m ssl z \
		gnomevfs-2 gnome-2 glib-2.0 gnome-keyring png \
		pango-1.0 pangoft2-1.0 pangocairo-1.0 \
		bonoboui-2 popt gdk-x11-2.0 gnomecanvas-2 xml2 \
		ORBit-2 tiff glitz ORBitCosNaming-2 \
		gtk-x11-2.0 cairo gdk_pixbuf-2.0 \
		gthread-2.0 bonobo-activation art_lgpl_2 jpeg \
		bonobo-2 gobject-2.0 atk-1.0 glade-2.0 \
		gconf-2 gmodule-2.0
@


1.4
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/09/18 11:50:40 espie Exp $
d6 1
@


1.3
log
@zap unneeded 0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/08/02 10:10:35 espie Exp $
a19 1
		:pkgconfig-*:devel/pkgconfig \
@


1.2
log
@more new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/06/18 14:22:26 alek Exp $
d25 1
a25 1
		gnomeui-2.0.0::x11/gnome/libgnomeui \
d34 8
a41 8
		gnomevfs-2.0.0 gnome-2.0.0 glib-2.0.0.0 gnome-keyring png \
		pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0 \
		bonoboui-2.0.0 popt gdk-x11-2.0.0.0 gnomecanvas-2.0.0 xml2 \
		ORBit-2.0.0 tiff glitz ORBitCosNaming-2.0.0 \
		gtk-x11-2.0.0.0 cairo gdk_pixbuf-2.0.0.0 \
		gthread-2.0.0.0 bonobo-activation art_lgpl_2 jpeg \
		bonobo-2.0.0 gobject-2.0.0.0 atk-1.0.0.0 glade-2.0.0.0 \
		gconf-2.0.0 gmodule-2.0.0.0
@


1.2.2.1
log
@MFC:
fix buffer overflow in the get_next_text() function (CVE-2006-5864)

from evince CVS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/08/02 10:10:35 espie Exp $
a5 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d24 1
a24 1
LIB_DEPENDS=	poppler.1,poppler-glib.1::print/poppler \
d26 2
a27 2
		esd.2::audio/esound \
		audiofile.0::devel/libaudiofile
@


1.1.1.1
log
@Import evince 0.5.2

Evince is a document viewer for multiple document formats.
The goal of evince is to replace the multiple document viewers that
exist on the GNOME Desktop with a single simple application.
@
text
@@
