head	1.7;
access;
symbols
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.6
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2012.09.12.08.15.57;	author ajacoutot;	state dead;
branches;
next	1.6;

1.6
date	2012.04.28.08.41.32;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.12.30.17.34.39;	author edd;	state Exp;
branches;
next	1.4;

1.4
date	2011.04.12.22.59.07;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.29.20.01.43;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.26.21.38.52;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2009.01.24.11.00.41;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.7
log
@* Remove bogus use of -rpath and replace with utilization of the
  -rpath-link linker flag
* Remove unnecessary patch for ffplay

from Brad (maintainer)
@
text
@$OpenBSD: patch-ffplay_c,v 1.6 2012/04/28 08:41:32 ajacoutot Exp $
--- ffplay.c.orig	Sat Apr 21 23:53:38 2012
+++ ffplay.c	Sun Apr 22 00:45:39 2012
@@@@ -2114,7 +2114,7 @@@@ static int stream_component_open(VideoState *is, int s
     AVFormatContext *ic = is->ic;
     AVCodecContext *avctx;
     AVCodec *codec;
-    SDL_AudioSpec wanted_spec, spec;
+    SDL_AudioSpec wanted_spec;
 
     if (stream_index < 0 || stream_index >= ic->nb_streams)
         return -1;
@@@@ -2171,11 +2171,11 @@@@ static int stream_component_open(VideoState *is, int s
         wanted_spec.samples = SDL_AUDIO_BUFFER_SIZE;
         wanted_spec.callback = sdl_audio_callback;
         wanted_spec.userdata = is;
-        if (SDL_OpenAudio(&wanted_spec, &spec) < 0) {
+        if (SDL_OpenAudio(&wanted_spec, NULL) < 0) {
             fprintf(stderr, "SDL_OpenAudio: %s\n", SDL_GetError());
             return -1;
         }
-        is->audio_hw_buf_size = spec.size;
+        is->audio_hw_buf_size = wanted_spec.size;
         is->audio_src_fmt= AV_SAMPLE_FMT_S16;
     }
 
@


1.6
log
@Update to ffmpeg-20120422 (0.7 branch).
* fix a whole lot of security related issues and bugs

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-ffplay_c,v 1.5 2011/12/30 17:34:39 edd Exp $
@


1.5
log
@update ffmpeg to a stable snapshot, from brad, OK aja@@
@
text
@d1 4
a4 4
$OpenBSD: patch-ffplay_c,v 1.4 2011/04/12 22:59:07 sthen Exp $
--- ffplay.c.orig	Tue Aug 30 19:59:43 2011
+++ ffplay.c	Tue Aug 30 20:25:16 2011
@@@@ -2110,7 +2110,7 @@@@ static int stream_component_open(VideoState *is, int s
a9 2
     AVDictionary *opts;
     AVDictionaryEntry *t = NULL;
d11 3
a13 1
@@@@ -2169,11 +2169,11 @@@@ static int stream_component_open(VideoState *is, int s
@


1.4
log
@Update FFmpeg to 20110408 snapshot.

- Enable WebM encoding.
- Stop stripping the shared libraries which explains why I was
   seeing no symbol table with the shared libraries.
- Build all of FFmpeg with -fomit-frame-pointer on i386 instead of
   hacking the various Makefile's and having to add more files as
   further updates are made. Use default CFLAGS (-O2) on i386 now too
   instead of overriding with -O.
- Remove the UINT64_C hack.
- Update HOMEPAGE to use the ffmpeg.org domain.
- Various other cleaning up and fixes for the port.

From Brad, ok dcoppa@@
@
text
@d1 4
a4 4
$OpenBSD: patch-ffplay_c,v 1.3 2011/03/29 20:01:43 edd Exp $
--- ffplay.c.orig	Fri Apr  8 16:05:20 2011
+++ ffplay.c	Fri Apr  8 16:12:46 2011
@@@@ -2211,7 +2211,7 @@@@ static int stream_component_open(VideoState *is, int s
d10 2
d13 1
a13 3
     if (stream_index < 0 || stream_index >= ic->nb_streams)
         return -1;
@@@@ -2256,11 +2256,11 @@@@ static int stream_component_open(VideoState *is, int s
@


1.3
log
@Update to a newer snapshot of ffmpeg. Maintainer timed out.
OK jakemsr@@, landry@@
@
text
@d1 4
a4 4
$OpenBSD: patch-ffplay_c,v 1.2 2010/05/26 21:38:52 jakemsr Exp $
--- ffplay.c.orig	Sun Mar  6 23:03:48 2011
+++ ffplay.c	Sun Mar  6 23:54:06 2011
@@@@ -2198,7 +2198,7 @@@@ static int stream_component_open(VideoState *is, int s
d13 1
a13 1
@@@@ -2243,11 +2243,11 @@@@ static int stream_component_open(VideoState *is, int s
@


1.2
log
@update to ffmpeg subversion snapshot from 2010-05-12

update needed for newer x264 and for gcc4.  this causes yet more
fallout as some libav* functions other ports were using have been
fully deprecated.  commits coming rsn ...

mostly from new MAINTAINER
@
text
@d1 4
a4 4
$OpenBSD: patch-ffplay_c,v 1.1 2009/01/24 11:00:41 jakemsr Exp $
--- ffplay.c.orig	Tue May 11 19:21:00 2010
+++ ffplay.c	Wed May 12 19:43:20 2010
@@@@ -2174,7 +2174,7 @@@@ static int stream_component_open(VideoState *is, int s
d13 1
a13 1
@@@@ -2219,11 +2219,11 @@@@ static int stream_component_open(VideoState *is, int s
d24 1
a24 1
         is->audio_src_fmt= SAMPLE_FMT_S16;
@


1.1
log
@there's no reason to stop SDL from doing audio playback conversions
@
text
@d1 4
a4 4
$OpenBSD$
--- ffplay.c.orig	Thu Jan 22 02:43:05 2009
+++ ffplay.c	Thu Jan 22 03:31:11 2009
@@@@ -1684,7 +1684,7 @@@@ static int stream_component_open(VideoState *is, int s
d6 1
a6 1
     AVCodecContext *enc;
d13 1
a13 1
@@@@ -1725,11 +1725,11 @@@@ static int stream_component_open(VideoState *is, int s
d24 1
a26 1
     if(thread_count>1)
@

