head	1.5;
access;
symbols
	OPENBSD_4_9:1.4.0.4
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2011.04.12.22.59.07;	author sthen;	state dead;
branches;
next	1.4;

1.4
date	2010.05.26.21.38.52;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2008.07.09.01.57.44;	author jakemsr;	state dead;
branches;
next	1.2;

1.2
date	2007.05.25.15.54.14;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.23.09.34.45;	author robert;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update FFmpeg to 20110408 snapshot.

- Enable WebM encoding.
- Stop stripping the shared libraries which explains why I was
   seeing no symbol table with the shared libraries.
- Build all of FFmpeg with -fomit-frame-pointer on i386 instead of
   hacking the various Makefile's and having to add more files as
   further updates are made. Use default CFLAGS (-O2) on i386 now too
   instead of overriding with -O.
- Remove the UINT64_C hack.
- Update HOMEPAGE to use the ffmpeg.org domain.
- Various other cleaning up and fixes for the port.

From Brad, ok dcoppa@@
@
text
@$OpenBSD: patch-libswscale_Makefile,v 1.4 2010/05/26 21:38:52 jakemsr Exp $
--- libswscale/Makefile.orig	Tue May 11 16:21:03 2010
+++ libswscale/Makefile	Mon May 17 17:58:39 2010
@@@@ -20,3 +20,14 @@@@ TESTPROGS = colorspace swscale
 DIRS = bfin mlib ppc sparc x86
 
 include $(SUBDIR)../subdir.mak
+
+ifdef ARCH_X86_32
+ifeq (,$(findstring -O,$(CFLAGS)))
+libswscale/rgb2rgb.o: CFLAGS += -O
+libswscale/swscale.o: CFLAGS += -O
+libswscale/x86/yuv2rgb_mmx.o: CFLAGS += -O
+endif
+libswscale/rgb2rgb.o: CFLAGS += -fomit-frame-pointer
+libswscale/swscale.o: CFLAGS += -fomit-frame-pointer
+libswscale/x86/yuv2rgb_mmx.o: CFLAGS += -fomit-frame-pointer
+endif
@


1.4
log
@update to ffmpeg subversion snapshot from 2010-05-12

update needed for newer x264 and for gcc4.  this causes yet more
fallout as some libav* functions other ports were using have been
fully deprecated.  commits coming rsn ...

mostly from new MAINTAINER
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@
update to subversion snapshot from 2008-06-20.

added since last update:

- AVM2 (Flash 9) SWF muxer
- QT variant of IMA ADPCM encoder
- VFW grabber
- Ipod/Iphone compatible mp4 muxer
- Mimic decoder
- MSN TCP Webcam stream demuxer
- RL2 demuxer / decoder
- IFF demuxer
- 8SVX audio decoder
- BFI demuxer
- MAXIS EA XA (.xa) demuxer / decoder
- BFI video decoder
- OMA demuxer

also:
* headers have been moved to library specific subdirectories instead
  of all under ffmpeg.
* libswscale is now enabled in the build.


feedback/ok brad@@
@
text
@d1 5
a5 5
$OpenBSD: patch-libswscale_Makefile,v 1.2 2007/05/25 15:54:14 jakemsr Exp $
--- libswscale/Makefile.orig	Wed Apr  4 21:25:05 2007
+++ libswscale/Makefile	Thu Apr 19 05:00:48 2007
@@@@ -2,7 +2,7 @@@@
 include ../config.mak
d7 12
a18 6
 NAME=swscale
-LIBVERSION=$(SWSVERSION)
+LIBVERSION=$(LIBswscale_VERSION)
 LIBMAJOR=$(SWSMAJOR)
 
 EXTRALIBS := -L$(BUILD_ROOT)/libavutil -lavutil$(BUILDSUF) $(EXTRALIBS)
@


1.2
log
@update to SVN snapshot from 20070501

several new codecs added, including an WMA encoder, Theora
encoding via libtheora, and H.264 encoding via x264

with feedback from brad@@, jolan@@, naddy@@ and Nikns Sainkin
<nikns at secure dot lv>

OK jolan@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libswscale_Makefile,v 1.1 2007/01/23 09:34:45 robert Exp $
@


1.1
log
@- update to version 20070110 (cvs snapshot)
- Nikns Siankin <nikns@@secure.lv> takes mainteinership
- add support for several external codecs
- fix regress target
- and many more

from Nikns Siankin <nikns@@secure.lv>
@
text
@d1 5
a5 4
$OpenBSD$
--- libswscale/Makefile.orig	Tue Jan  2 19:01:04 2007
+++ libswscale/Makefile	Tue Jan  2 19:02:35 2007
@@@@ -3,11 +3,9 @@@@ include ../config.mak
a7 1
 ifeq ($(BUILD_SHARED),yes)
a10 3
 endif
-
-EXTRALIBS := -L$(BUILD_ROOT)/libavutil -lavutil$(BUILDSUF) $(EXTRALIBS)
d12 1
a12 2
 OBJS= swscale.o rgb2rgb.o
 ifeq ($(TARGET_ALTIVEC),yes)
@

