head	1.4;
access;
symbols
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2011.12.30.17.34.39;	author edd;	state dead;
branches;
next	1.3;

1.3
date	2011.09.12.21.04.49;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2007.01.23.09.34.45;	author robert;	state dead;
branches;
next	1.1;

1.1
date	2006.07.31.15.03.15;	author millert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update ffmpeg to a stable snapshot, from brad, OK aja@@
@
text
@$OpenBSD: patch-libavcodec_mpegaudiodec_c,v 1.3 2011/09/12 21:04:49 sthen Exp $

Dont spam the user on multiple MP3 frames.

--- libavcodec/mpegaudiodec.c.orig	Thu Sep  8 16:10:04 2011
+++ libavcodec/mpegaudiodec.c	Thu Sep  8 16:10:39 2011
@@@@ -2068,7 +2068,7 @@@@ static int decode_frame(AVCodecContext * avctx,
         av_log(avctx, AV_LOG_ERROR, "incomplete frame\n");
         return -1;
     }else if(s->frame_size < buf_size){
-        av_log(avctx, AV_LOG_ERROR, "incorrect frame size\n");
+        av_log(avctx, AV_LOG_DEBUG, "incorrect frame size - multiple frames in buffer?\n");
         buf_size= s->frame_size;
     }
 
@


1.3
log
@Some FFmpeg security and bug fixes from upstream, from Brad:

- jpegdec: Actually search for and parse RSTn.
- mpeg4: Adjust dummy frame threshold for packed DivX.
- mpeg4: Fix another packed DivX issue.
- jpegdec: Better RSTn skiping.
- Fix memory corruption in case of memory allocation failure.
- cavsdec: Avoid possible crash with crafted input.
- rtp: Fix integer underflow that could allow remote code execution. MSVR-11-008
8
- rtpdec_asf: Fix memleak.
- mp3dec: Dont spam the user on multiple MP3 frames.
- wavpack: Fixed invalid access with corrupted extra bits sub-blocks.
- wavpack: Fixed invalid writes with corrupted bitstreams.
- wavpack: Fixed invalid access with corrupted bitstream.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@- update to version 20070110 (cvs snapshot)
- Nikns Siankin <nikns@@secure.lv> takes mainteinership
- add support for several external codecs
- fix regress target
- and many more

from Nikns Siankin <nikns@@secure.lv>
@
text
@d1 15
a15 12
$OpenBSD: patch-libavcodec_mpegaudiodec_c,v 1.1 2006/07/31 15:03:15 millert Exp $
--- libavcodec/mpegaudiodec.c.orig	Sun Jul 30 19:39:08 2006
+++ libavcodec/mpegaudiodec.c	Sun Jul 30 15:44:14 2006
@@@@ -1650,7 +1650,7 @@@@ static int huffman_decode(MPADecodeConte
             if (get_bits_count(&s->gb) >= end_pos)
                 break;
             if (code_table) {
-                code = get_vlc2(&s->gb, vlc->table, 8, 2);
+                code = get_vlc2(&s->gb, vlc->table, 8, 3);
                 if (code < 0)
                     return -1;
                 y = code_table[code];
@


1.1
log
@Fix a core dump during mpeg audio decoding; from revision 5658 of
the ffmpeg svn repo.  OK brad@@
@
text
@d1 1
a1 1
$OpenBSD$
@

