head	1.6;
access;
symbols
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.8
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.6
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.4
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2013.01.14.02.14.41;	author brad;	state dead;
branches;
next	1.5;

1.5
date	2012.04.28.08.41.32;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.12.30.17.34.39;	author edd;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.12.22.59.07;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.26.21.38.52;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2008.07.09.01.57.44;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to FFmpeg 20121026 snapshot. From 0.10 branch.

ok sthen@@
@
text
@$OpenBSD: patch-subdir_mak,v 1.5 2012/04/28 08:41:32 ajacoutot Exp $
--- subdir.mak.orig	Sat Apr 21 23:53:40 2012
+++ subdir.mak	Sun Apr 22 00:47:52 2012
@@@@ -41,7 +41,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
 
 $(SUBDIR)$(SLIBNAME_WITH_MAJOR): $(OBJS) $(SUBDIR)lib$(NAME).ver
 	$(SLIB_CREATE_DEF_CMD)
-	$$(LD) $(SHFLAGS) $(FFLDFLAGS) -o $$@@ $$(filter %.o,$$^) $(FFEXTRALIBS) $(EXTRAOBJS)
+	$$(LD) $(SHFLAGS) $(FFLDFLAGS) -o $$@@ $$(filter %.o,$$^) $(LIB$(NAME)_EXTRALIBS) $(EXTRAOBJS)
 	$(SLIB_EXTRA_CMD)
 
 ifdef SUBDIR
@@@@ -60,11 +60,6 @@@@ distclean:: clean
 install-lib$(NAME)-shared: $(SUBDIR)$(SLIBNAME)
 	$(Q)mkdir -p "$(SHLIBDIR)"
 	$$(INSTALL) -m 755 $$< "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
-	$$(STRIP) "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
-	$(Q)cd "$(SHLIBDIR)" && \
-		$(LN_S) $(SLIBNAME_WITH_VERSION) $(SLIBNAME_WITH_MAJOR)
-	$(Q)cd "$(SHLIBDIR)" && \
-		$(LN_S) $(SLIBNAME_WITH_VERSION) $(SLIBNAME)
 	$(SLIB_INSTALL_EXTRA_CMD)
 
 install-lib$(NAME)-static: $(SUBDIR)$(LIBNAME)
@


1.5
log
@Update to ffmpeg-20120422 (0.7 branch).
* fix a whole lot of security related issues and bugs

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-subdir_mak,v 1.4 2011/12/30 17:34:39 edd Exp $
@


1.4
log
@update ffmpeg to a stable snapshot, from brad, OK aja@@
@
text
@d1 4
a4 4
$OpenBSD: patch-subdir_mak,v 1.3 2011/04/12 22:59:07 sthen Exp $
--- subdir.mak.orig	Tue Aug 30 19:57:43 2011
+++ subdir.mak	Tue Aug 30 20:51:57 2011
@@@@ -42,7 +42,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d8 2
a9 2
-	$$(LD) $(SHFLAGS) $(LDFLAGS) -o $$@@ $$(filter %.o,$$^) $(FFEXTRALIBS) $(EXTRAOBJS)
+	$$(LD) $(SHFLAGS) $(LDFLAGS) -o $$@@ $$(filter %.o,$$^) $(LIB$(NAME)_EXTRALIBS) $(EXTRAOBJS)
d13 1
a13 1
@@@@ -61,7 +61,6 @@@@ distclean:: clean
d16 9
a24 5
 	$$(INSTALL) -m 755 $$< "$(SHLIBDIR)/$(SLIB_INSTALL_NAME)"
-	$$(STRIP) "$(SHLIBDIR)/$(SLIB_INSTALL_NAME)"
 	$(Q)$(foreach F,$(SLIB_INSTALL_LINKS),cd "$(SHLIBDIR)" && $(LN_S) $(SLIB_INSTALL_NAME) $(F);)
 	$(if $(SLIB_INSTALL_EXTRA_SHLIB),$$(INSTALL) -m 644 $(SLIB_INSTALL_EXTRA_SHLIB:%=$(SUBDIR)%) "$(SHLIBDIR)")
 	$(if $(SLIB_INSTALL_EXTRA_LIB),$(Q)mkdir -p "$(LIBDIR)")
@


1.3
log
@Update FFmpeg to 20110408 snapshot.

- Enable WebM encoding.
- Stop stripping the shared libraries which explains why I was
   seeing no symbol table with the shared libraries.
- Build all of FFmpeg with -fomit-frame-pointer on i386 instead of
   hacking the various Makefile's and having to add more files as
   further updates are made. Use default CFLAGS (-O2) on i386 now too
   instead of overriding with -O.
- Remove the UINT64_C hack.
- Update HOMEPAGE to use the ffmpeg.org domain.
- Various other cleaning up and fixes for the port.

From Brad, ok dcoppa@@
@
text
@d1 4
a4 4
$OpenBSD: patch-subdir_mak,v 1.2 2010/05/26 21:38:52 jakemsr Exp $
--- subdir.mak.orig	Mon Mar 28 19:23:17 2011
+++ subdir.mak	Fri Apr  1 16:00:06 2011
@@@@ -41,7 +41,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d8 2
a9 2
-	$$(LD) $(SHFLAGS) $(FFLDFLAGS) -o $$@@ $$(filter %.o,$$^) $(FFEXTRALIBS) $(EXTRAOBJS)
+	$$(LD) $(SHFLAGS) $(FFLDFLAGS) -o $$@@ $$(filter %.o,$$^) $(LIB$(NAME)_EXTRALIBS) $(EXTRAOBJS)
d13 1
a13 1
@@@@ -60,11 +60,6 @@@@ distclean:: clean
d16 5
a20 9
 	$$(INSTALL) -m 755 $$< "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
-	$$(STRIP) "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
-	$(Q)cd "$(SHLIBDIR)" && \
-		$(LN_S) $(SLIBNAME_WITH_VERSION) $(SLIBNAME_WITH_MAJOR)
-	$(Q)cd "$(SHLIBDIR)" && \
-		$(LN_S) $(SLIBNAME_WITH_VERSION) $(SLIBNAME)
 	$(SLIB_INSTALL_EXTRA_CMD)
 
 install-lib$(NAME)-static: $(SUBDIR)$(LIBNAME)
@


1.2
log
@update to ffmpeg subversion snapshot from 2010-05-12

update needed for newer x264 and for gcc4.  this causes yet more
fallout as some libav* functions other ports were using have been
fully deprecated.  commits coming rsn ...

mostly from new MAINTAINER
@
text
@d1 3
a3 3
$OpenBSD: patch-subdir_mak,v 1.1 2008/07/09 01:57:44 jakemsr Exp $
--- subdir.mak.orig	Tue May 11 19:21:00 2010
+++ subdir.mak	Wed May 12 19:51:20 2010
d13 2
a14 1
@@@@ -61,10 +61,6 @@@@ install-lib$(NAME)-shared: $(SUBDIR)$(SLIBNAME)
d17 1
a17 1
 	$$(STRIP) "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
@


1.1
log
@
update to subversion snapshot from 2008-06-20.

added since last update:

- AVM2 (Flash 9) SWF muxer
- QT variant of IMA ADPCM encoder
- VFW grabber
- Ipod/Iphone compatible mp4 muxer
- Mimic decoder
- MSN TCP Webcam stream demuxer
- RL2 demuxer / decoder
- IFF demuxer
- 8SVX audio decoder
- BFI demuxer
- MAXIS EA XA (.xa) demuxer / decoder
- BFI video decoder
- OMA demuxer

also:
* headers have been moved to library specific subdirectories instead
  of all under ffmpeg.
* libswscale is now enabled in the build.


feedback/ok brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- subdir.mak.orig	Fri Jun 20 19:40:11 2008
+++ subdir.mak	Sat Jun 21 10:06:50 2008
@@@@ -29,7 +29,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d6 1
a6 1
 $(SUBDIR)$(SLIBNAME_WITH_MAJOR): $(OBJS)
d8 2
a9 2
-	$(CC) $(SHFLAGS) $(FFLDFLAGS) -o $$@@ $$^ $(FFEXTRALIBS) $(EXTRAOBJS)
+	$(CC) $(SHFLAGS) $(FFLDFLAGS) -o $$@@ $(sort $(OBJS)) $(LIB$(NAME)_EXTRALIBS) $(EXTRAOBJS)
d13 5
a17 8
@@@@ -39,12 +39,8 @@@@ endif
 
 install-lib$(NAME)-shared: $(SUBDIR)$(SLIBNAME)
 	install -d "$(SHLIBDIR)"
-	install -m 755 $(SUBDIR)$(SLIBNAME) "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
+	install -m 755 $(SUBDIR)$(SLIBNAME_WITH_VERSION) "$(SHLIBDIR)"
 	$(STRIP) "$(SHLIBDIR)/$(SLIBNAME_WITH_VERSION)"
-	cd "$(SHLIBDIR)" && \
d19 1
a19 1
-	cd "$(SHLIBDIR)" && \
@

