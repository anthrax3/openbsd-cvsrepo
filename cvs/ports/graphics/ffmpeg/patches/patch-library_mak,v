head	1.7;
access;
symbols
	OPENBSD_6_0:1.7.0.4
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2015.09.10.07.10.04;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	BDuwSNknZHV1yp3r;

1.6
date	2015.07.26.07.22.15;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	dkXFOkRDvjfRGOaD;

1.5
date	2015.04.28.06.32.47;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	A9iBYMQ3XssEpdrF;

1.4
date	2014.05.16.01.34.50;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2013.04.08.17.06.56;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.13.02.26.45;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2013.01.14.02.14.41;	author brad;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to ffmpeg-20150909.

from Brad (maintainer)
@
text
@$OpenBSD: patch-library_mak,v 1.6 2015/07/26 07:22:15 ajacoutot Exp $
--- library.mak.orig	Mon Sep  7 21:58:02 2015
+++ library.mak	Wed Sep  9 03:07:49 2015
@@@@ -58,7 +58,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
 
 $(SUBDIR)$(SLIBNAME_WITH_MAJOR): $(OBJS) $(SLIBOBJS) $(SUBDIR)lib$(NAME).ver
 	$(SLIB_CREATE_DEF_CMD)
-	$$(LD) $(SHFLAGS) $(LDFLAGS) $(LDLIBFLAGS) $$(LD_O) $$(filter %.o,$$^) $(FFEXTRALIBS)
+	$$(LD) $(SHFLAGS) $(LDFLAGS) $(LDLIBFLAGS) $$(LD_O) $$(filter %.o,$$^) $(LIB$(NAME)_EXTRALIBS)
 	$(SLIB_EXTRA_CMD)
 
 ifdef SUBDIR
@@@@ -75,8 +75,6 @@@@ distclean:: clean
 install-lib$(NAME)-shared: $(SUBDIR)$(SLIBNAME)
 	$(Q)mkdir -p "$(SHLIBDIR)"
 	$$(INSTALL) -m 755 $$< "$(SHLIBDIR)/$(SLIB_INSTALL_NAME)"
-	$$(STRIP) "$(SHLIBDIR)/$(SLIB_INSTALL_NAME)"
-	$(Q)$(foreach F,$(SLIB_INSTALL_LINKS),(cd "$(SHLIBDIR)" && $(LN_S) $(SLIB_INSTALL_NAME) $(F));)
 	$(if $(SLIB_INSTALL_EXTRA_SHLIB),$$(INSTALL) -m 644 $(SLIB_INSTALL_EXTRA_SHLIB:%=$(SUBDIR)%) "$(SHLIBDIR)")
 	$(if $(SLIB_INSTALL_EXTRA_LIB),$(Q)mkdir -p "$(LIBDIR)")
 	$(if $(SLIB_INSTALL_EXTRA_LIB),$$(INSTALL) -m 644 $(SLIB_INSTALL_EXTRA_LIB:%=$(SUBDIR)%) "$(LIBDIR)")
@


1.6
log
@Update to FFmpeg 20150723 (2.7.2).

from Brad (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-library_mak,v 1.5 2015/04/28 06:32:47 ajacoutot Exp $
--- library.mak.orig	Thu Jul 23 19:37:50 2015
+++ library.mak	Thu Jul 23 19:43:44 2015
d8 2
a9 2
-	$$(LD) $(SHFLAGS) $(LDFLAGS) $$(LD_O) $$(filter %.o,$$^) $(FFEXTRALIBS)
+	$$(LD) $(SHFLAGS) $(LDFLAGS) $$(LD_O) $$(filter %.o,$$^) $(LIB$(NAME)_EXTRALIBS)
@


1.5
log
@Update to FFmpeg 20150412: a snapshot from the 2.6 branch currently at the 2.6.2
release.

Two of the lib dependencies got removed:
- libschroedinger: currently broken because of an issue with mutexes;
unmaintained upstream and its a niche codec
- libtheora: modern replacements such as VP8 / VP9 are more than good enough to
replace VP3 use

from brad (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-library_mak,v 1.4 2014/05/16 01:34:50 brad Exp $
--- library.mak.orig	Wed Mar 25 18:11:40 2015
+++ library.mak	Wed Mar 25 18:16:17 2015
@@@@ -57,7 +57,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d13 1
a13 1
@@@@ -74,8 +74,6 @@@@ distclean:: clean
@


1.4
log
@Update to FFmpeg 20140412 snapshot. From 2.2 branch.

Update to MPlayer 20140412 snapshot.

Take MAINTAINER for MPlayer. ok edd@@

ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-library_mak,v 1.3 2013/04/08 17:06:56 brad Exp $
--- library.mak.orig	Tue Mar 11 01:57:35 2014
+++ library.mak	Tue Mar 11 02:39:44 2014
@@@@ -53,7 +53,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d13 1
a13 1
@@@@ -70,8 +70,6 @@@@ distclean:: clean
@


1.3
log
@Update to FFmpeg 20130319 snapshot. From 1.2 branch.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-library_mak,v 1.2 2013/03/13 02:26:45 brad Exp $
--- library.mak.orig	Tue Mar 12 22:35:44 2013
+++ library.mak	Tue Mar 12 23:30:11 2013
@@@@ -54,7 +54,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d6 1
a6 1
 $(SUBDIR)$(SLIBNAME_WITH_MAJOR): $(OBJS) $(SUBDIR)lib$(NAME).ver
d13 1
a13 1
@@@@ -71,8 +71,6 @@@@ distclean:: clean
@


1.2
log
@Update to FFmpeg 20130214 snapshot. From 1.1 branch.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-library_mak,v 1.1 2013/01/14 02:14:41 brad Exp $
--- library.mak.orig	Sun Jan 13 21:30:15 2013
+++ library.mak	Tue Jan 15 02:04:32 2013
@@@@ -53,7 +53,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d13 1
a13 1
@@@@ -70,8 +70,6 @@@@ distclean:: clean
d18 1
a18 1
-	$(Q)$(foreach F,$(SLIB_INSTALL_LINKS),cd "$(SHLIBDIR)" && $(LN_S) $(SLIB_INSTALL_NAME) $(F);)
@


1.1
log
@Update to FFmpeg 20121026 snapshot. From 0.10 branch.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD$
--- library.mak.orig	Thu Sep 13 23:19:10 2012
+++ library.mak	Thu Sep 13 23:23:29 2012
@@@@ -42,7 +42,7 @@@@ $(SUBDIR)$(SLIBNAME): $(SUBDIR)$(SLIBNAME_WITH_MAJOR)
d8 2
a9 2
-	$$(LD) $(SHFLAGS) $(LDFLAGS) -o $$@@ $$(filter %.o,$$^) $(FFEXTRALIBS) $(EXTRAOBJS)
+	$$(LD) $(SHFLAGS) $(LDFLAGS) -o $$@@ $$(filter %.o,$$^) $(LIB$(NAME)_EXTRALIBS) $(EXTRAOBJS)
d13 1
a13 1
@@@@ -61,8 +61,6 @@@@ distclean:: clean
@

