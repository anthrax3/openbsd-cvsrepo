head	1.9;
access;
symbols
	OPENBSD_6_0:1.8.0.2
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.5.0.8
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.6
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.4
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2016.07.30.14.27.55;	author ajacoutot;	state dead;
branches;
next	1.8;
commitid	HvBU1iDTWFpYmvGP;

1.8
date	2016.06.21.12.38.07;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	RMrv4sjYb4eKelhQ;

1.7
date	2016.04.26.11.10.56;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	2KftL1H9xXu2UFbX;

1.6
date	2015.03.24.08.03.55;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	tHjVybWUFSKm0KZ8;

1.5
date	2013.03.23.15.19.45;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.09.24.20.32.49;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2012.02.27.19.41.55;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.12.18.22.19;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.05.18.43.43;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Update to shotwell-0.23.4.
@
text
@$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.8 2016/06/21 12:38:07 ajacoutot Exp $

drop -nostdlib: shotwell-publishing.so: undefined symbol '__guard_local'

--- plugins/Makefile.plugin.mk.orig	Mon Jun 20 20:50:50 2016
+++ plugins/Makefile.plugin.mk	Tue Jun 21 14:28:59 2016
@@@@ -32,7 +32,7 @@@@ CFILES := $(notdir $(SRC_FILES:.vala=.c))
 OFILES := $(notdir $(SRC_FILES:.vala=.o))
 
 CFLAGS := $(shell pkg-config --print-errors --cflags $(EXT_PKGS) $(PLUGIN_PKGS)) \
-	-nostdlib -export-dynamic $(PLUGIN_CFLAGS)
+	-export-dynamic $(PLUGIN_CFLAGS)
 LIBS := $(shell pkg-config --print-errors --libs $(EXT_PKGS) $(PLUGIN_PKGS))
 DEFINES := -D_VERSION='"$(PLUGINS_VERSION)"' -DGETTEXT_PACKAGE='"shotwell"'
 
@


1.8
log
@Update to shotwell-0.23.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.7 2016/04/26 11:10:56 ajacoutot Exp $
@


1.7
log
@Update to shotwell-0.23.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.6 2015/03/24 08:03:55 ajacoutot Exp $
d5 3
a7 3
--- plugins/Makefile.plugin.mk.orig	Mon Apr 25 22:25:45 2016
+++ plugins/Makefile.plugin.mk	Tue Apr 26 12:44:30 2016
@@@@ -35,7 +35,7 @@@@ CFILES := $(notdir $(SRC_FILES:.vala=.c))
@


1.6
log
@Update to shotwell-0.22.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.5 2013/03/23 15:19:45 ajacoutot Exp $
d5 3
a7 4
--- plugins/Makefile.plugin.mk.orig	Tue Mar  4 23:54:12 2014
+++ plugins/Makefile.plugin.mk	Tue Mar 24 08:57:23 2015
@@@@ -34,7 +34,7 @@@@ SRC_FILES := ../common/Resources.vala $(SRC_FILES)
 CFILES := $(notdir $(SRC_FILES:.vala=.c))
d10 4
a13 3
-CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS) $(PLUGIN_PKGS)` -nostdlib -export-dynamic $(PLUGIN_CFLAGS)
+CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS) $(PLUGIN_PKGS)` -I${LOCALBASE}/include -export-dynamic $(PLUGIN_CFLAGS)
 LIBS := `pkg-config --print-errors --libs $(EXT_PKGS) $(PLUGIN_PKGS)`
@


1.5
log
@Update to shotwell-0.14.0.
@
text
@d1 6
a6 3
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.4 2012/09/24 20:32:49 jasper Exp $
--- plugins/Makefile.plugin.mk.orig	Mon Mar 18 19:48:16 2013
+++ plugins/Makefile.plugin.mk	Sat Mar 23 16:01:41 2013
d12 1
a12 1
+CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS) $(PLUGIN_PKGS)` -I${LOCALBASE}/include -nostdlib -export-dynamic $(PLUGIN_CFLAGS)
@


1.4
log
@- update to shotwell-0.13.0
@
text
@d1 4
a4 4
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.3 2012/02/27 19:41:55 ajacoutot Exp $
--- plugins/Makefile.plugin.mk.orig	Wed Sep 19 21:08:59 2012
+++ plugins/Makefile.plugin.mk	Mon Sep 24 21:32:25 2012
@@@@ -34,16 +34,16 @@@@ SRC_FILES := ../common/Resources.vala $(SRC_FILES)
a12 11
 all: $(PLUGIN).so
 
 .stamp: $(SRC_FILES) $(MAKE_FILES) $(HEADER_FILES)
-	$(VALAC) --target-glib=$(MIN_GLIB_VERSION) -g --enable-checking --fatal-warnings --save-temps --enable-deprecated --compile \
+	$(VALAC) --target-glib=$(MIN_GLIB_VERSION) -g --enable-checking --save-temps --enable-deprecated --compile \
 		--vapidir=../ $(foreach pkg,$(PKGS),--pkg=$(pkg)) $(foreach pkg,$(CUSTOM_VAPI_PKGS),--pkg=$(pkg)) \
-		-X -I../.. -X -fPIC \
+		-X -I${LOCALBASE}/include -X -I../.. -X -fPIC \
 		$(foreach dfn,$(DEFINES),-X $(dfn)) \
 		$(USER_VALAFLAGS) \
 		--vapidir=../../vapi \
@


1.3
log
@Update to shotwell-0.11.92.20120226, git snapshot to cope with recent
vala update. This now uses gtk+3.

ok landry@@ (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.2 2011/09/12 18:22:19 jasper Exp $
--- plugins/Makefile.plugin.mk.orig	Sun Feb 26 15:04:33 2012
+++ plugins/Makefile.plugin.mk	Sun Feb 26 15:08:49 2012
d16 2
a17 2
-	$(VALAC) -g --enable-checking --fatal-warnings --save-temps --compile \
+	$(VALAC) -g --enable-checking --save-temps --compile \
@


1.2
log
@
- update to 0.11.1
@
text
@d1 4
a4 4
$OpenBSD: patch-plugins_Makefile_plugin_mk,v 1.1 2011/04/05 18:43:43 ajacoutot Exp $
--- plugins/Makefile.plugin.mk.orig	Thu Sep  8 20:56:57 2011
+++ plugins/Makefile.plugin.mk	Mon Sep 12 18:46:08 2011
@@@@ -32,16 +32,16 @@@@ SRC_FILES := ../common/Resources.vala $(SRC_FILES)
d8 3
a10 3
-CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS)` -nostdlib -export-dynamic $(PLUGIN_CFLAGS)
+CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS)` -I${LOCALBASE}/include -nostdlib -export-dynamic $(PLUGIN_CFLAGS)
 LDFLAGS := `pkg-config --print-errors --libs $(EXT_PKGS)` $(LDFLAGS)
d18 1
a18 1
 		--vapidir=../ $(foreach pkg,$(PKGS),--pkg=$(pkg)) \
d23 1
a23 1
 		$(SRC_FILES)
@


1.1
log
@Update to shotwell-0.9.1.

input from and ok landry@@ (maintainer)
@
text
@d1 4
a4 4
$OpenBSD$
--- plugins/Makefile.plugin.mk.orig	Mon Apr  4 19:54:27 2011
+++ plugins/Makefile.plugin.mk	Tue Apr  5 11:13:32 2011
@@@@ -32,7 +32,7 @@@@ SRC_FILES := ../common/Resources.vala $(SRC_FILES)
d13 2
a14 1
@@@@ -41,7 +41,7 @@@@ all: $(PLUGIN).so
d16 2
a17 1
 	$(VALAC) -g --enable-checking --fatal-warnings --save-temps --compile \
@

