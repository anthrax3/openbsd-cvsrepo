head	1.3;
access;
symbols
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.1.1.0.8
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.6
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	alek_20050522:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2009.03.06.08.54.22;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2007.07.17.12.45.49;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.22.11.32.11;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.22.11.32.11;	author alek;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- update xzgv to 0.9
* this makes this port switch to gtk+2, and get ride of ancient gtk+1
- update ${HOMEPAGE} and ${MASTER_SITES}

from Julian Leyh (MAINTAINER), thanks
@
text
@$OpenBSD: patch-src_filedetails_c,v 1.2 2007/07/17 12:45:49 ajacoutot Exp $
--- src/filedetails.c.orig	Sat Nov 18 18:58:39 2000
+++ src/filedetails.c	Tue Jul 17 14:26:29 2007
@@@@ -26,7 +26,7 @@@@ static char buf[10];
 int f,shift,submode;
 char *execptr;
 
-strcpy(buf,"---------");
+strlcpy(buf,"---------",sizeof(buf));
 
 for(f=0,shift=6;f<3;f++,shift-=3)
   {
@@@@ -73,14 +73,14 @@@@ char *ptr;
 
 if((ptr=strrchr(filename,'/'))==NULL)
   {
-  strcpy(buf,".xvpics/");
-  strcat(buf,filename);
+  strlcpy(buf,".xvpics/",sizeof(buf));
+  strlcat(buf,filename,sizeof(buf));
   }
 else
   {
-  strcpy(buf,filename);
-  strcpy(strrchr(buf,'/')+1,".xvpics/");
-  strcat(buf,ptr+1);
+  strlcpy(buf,filename,sizeof(buf));
+  strlcat(buf,".xvpics/",sizeof(buf));
+  strlcat(buf,ptr+1,sizeof(buf));
   }
 
 if((tn=fopen(buf,"rb"))!=NULL)
@@@@ -174,11 +174,11 @@@@ DO_TBL_LEFT(os_tbl,tbl_row,"Filename:");
 DO_TBL_RIGHT(os_tbl,tbl_row,filename);
 tbl_row++;
 
-strcpy(buf,"unknown");
+strlcpy(buf,"unknown",sizeof(buf));
 
 DO_TBL_LEFT(os_tbl,tbl_row,"Size:");
 if(got_stat_info)
-  sprintf(buf,"%d  (%dk)",(int)sbuf.st_size,((int)sbuf.st_size+1023)/1024);
+  snprintf(buf,sizeof(buf),"%d  (%dk)",(int)sbuf.st_size,((int)sbuf.st_size+1023)/1024);
 DO_TBL_RIGHT(os_tbl,tbl_row,buf);
 tbl_row++;
 
@@@@ -186,9 +186,9 @@@@ DO_TBL_LEFT(os_tbl,tbl_row,"Last modified:");
 if(got_stat_info)
   {
   if((ctime=localtime(&sbuf.st_mtime))==NULL)	/* can't happen? */
-    strcpy(buf,"unknown");
+    strlcpy(buf,"unknown",sizeof(buf));
   else
-    sprintf(buf,"%d-%02d-%02d  %02d:%02d",
+    snprintf(buf,sizeof(buf),"%d-%02d-%02d  %02d:%02d",
             1900+ctime->tm_year,ctime->tm_mon+1,ctime->tm_mday,
             ctime->tm_hour,ctime->tm_min);
   }
@@@@ -197,7 +197,7 @@@@ tbl_row++;
 
 DO_TBL_LEFT(os_tbl,tbl_row,"Permissions:");
 if(got_stat_info)
-  sprintf(buf,"%s  (%o)",
+  snprintf(buf,sizeof(buf),"%s  (%o)",
           make_perms_string(sbuf.st_mode&07777),sbuf.st_mode&07777);
 DO_TBL_RIGHT(os_tbl,tbl_row,buf);
 tbl_row++;
@@@@ -232,9 +232,9 @@@@ tbl_row=0;
 
 DO_TBL_LEFT(tn_tbl,tbl_row,"Dimensions:");
 if(got_dimensions)
-  sprintf(buf,"%d x %d",w,h);
+  snprintf(buf,sizeof(buf),"%d x %d",w,h);
 else
-  strcpy(buf,"unknown");
+  strlcpy(buf,"unknown",sizeof(buf));
 DO_TBL_RIGHT(tn_tbl,tbl_row,buf);
 tbl_row++;
 
@


1.2
log
@SECURITY - fix a heap overflow

While here:
- remove quotes around COMMENT
- change MAINTAINER's email
- update patches
- reformat dependencies/WANTLIB
- don't use hardcoded patches in man and info pages

based on a diff from Julian Leyh <julian at vgai dot de> (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_filedetails_c,v 1.1.1.1 2005/05/22 11:32:11 alek Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ src/filedetails.c	Thu May 12 15:32:46 2005
d47 1
a47 1
@@@@ -186,9 +186,9 @@@@ DO_TBL_LEFT(os_tbl,tbl_row,"Last modifie
@


1.1.1.1
log
@Import xzgv 0.8

xzgv is a picture viewer for X, with a thumbnail-based file selector.
It uses GTK+ and Imlib. Most file formats are supported, and the
thumbnails used are compatible with xv, zgv, and the Gimp. It can also
be used with `xzgv file(s)', to effectively bypass the file selector.

From Julian Leyh <oenone@@oenone.de>
@
text
@@
