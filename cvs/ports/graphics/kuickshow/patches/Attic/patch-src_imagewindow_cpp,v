head	1.2;
access;
symbols
	OPENBSD_3_1:1.1.1.1.0.4
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.2
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	kevlo_2001-Jun-27:1.1.1.1
	kevlo:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2002.07.01.02.07.13;	author kevlo;	state dead;
branches;
next	1.1;

1.1
date	2001.06.27.02.37.16;	author kevlo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.06.27.02.37.16;	author kevlo;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Bye bye. x11/kde/graphics3 includes kuickshow.
@
text
@--- src/imagewindow.cpp.orig	Fri May  4 13:12:14 2001
+++ src/imagewindow.cpp	Wed Jun 27 09:51:55 2001
@@@@ -42,6 +42,7 @@@@
 #include <klocale.h>
 #include <kstdaccel.h>
 #include <kstddirs.h>
+#include <ktempfile.h>
 #include <kwin.h>
 #include <netwm.h>
 
@@@@ -779,13 +780,15 @@@@
   info.xjustification = 512;  // center
   info.yjustification = 512;  // center
 
+  KTempFile tmpFile;
+  tmpFile.setAutoDelete( true );
   QString tmpName;
   if ( ofile ) // user just wants to print to file
     tmpName = p.outputFileName();
   else
-    tmpName = QString::fromLocal8Bit( tmpnam( NULL ));
+    tmpName = tmpFile.name();
 
-  char *file = (char *) tmpName.data();
+  char *file = (char *) QFile::encodeName( tmpName ).data();
   if ( Imlib_save_image( id, kuim->imlibImage(), file, &info ) == 0 )
   {
     debug(i18n("KuickShow: Couldn't print image.")); // FIXME, show messagebox
@@@@ -799,7 +802,7 @@@@
   QString cmdline = printCmd + " -P\"" + printerName + "\" " + tmpName;
   debug("KuickShow: print commandline: %s", cmdline.data() );
   for ( int i=0; i < copies; i++ ) // FIXME: better use a switch in lpr...
-    system( cmdline.data() );
+    system( QFile::encodeName( cmdline).data() );
 }
 
 
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Initial import of kuickshow 0.8.1.

KuickShow is an image browser/viewer with a nice filebrowser to select 
images to be shown, slideshow support and the ability to display the 
following image formats: jpg, gif, tiff, png, bmp, psd, xpm, xbm, pbm 
and eim. 
@
text
@@
