head	1.118;
access;
symbols
	OPENBSD_6_1:1.117.0.2
	OPENBSD_6_1_BASE:1.117
	OPENBSD_6_0:1.112.0.2
	OPENBSD_6_0_BASE:1.112
	OPENBSD_5_9:1.110.0.2
	OPENBSD_5_9_BASE:1.110
	OPENBSD_5_8:1.104.0.4
	OPENBSD_5_8_BASE:1.104
	OPENBSD_5_7:1.103.0.2
	OPENBSD_5_7_BASE:1.103
	OPENBSD_5_6:1.99.0.2
	OPENBSD_5_6_BASE:1.99
	OPENBSD_5_5:1.97.0.2
	OPENBSD_5_5_BASE:1.97
	OPENBSD_5_4:1.94.0.2
	OPENBSD_5_4_BASE:1.94
	OPENBSD_5_3:1.88.0.2
	OPENBSD_5_3_BASE:1.88
	OPENBSD_5_2:1.86.0.2
	OPENBSD_5_2_BASE:1.86
	OPENBSD_5_1_BASE:1.83
	OPENBSD_5_1:1.83.0.2
	OPENBSD_5_0:1.80.0.2
	OPENBSD_5_0_BASE:1.80
	OPENBSD_4_9:1.77.0.2
	OPENBSD_4_9_BASE:1.77
	OPENBSD_4_8:1.75.0.2
	OPENBSD_4_8_BASE:1.75
	OPENBSD_4_7:1.74.0.2
	OPENBSD_4_7_BASE:1.74
	OPENBSD_4_6:1.71.0.2
	OPENBSD_4_6_BASE:1.71
	OPENBSD_4_5:1.70.0.2
	OPENBSD_4_5_BASE:1.70
	OPENBSD_4_4:1.68.0.2
	OPENBSD_4_4_BASE:1.68
	OPENBSD_4_3:1.67.0.2
	OPENBSD_4_3_BASE:1.67
	OPENBSD_4_2:1.63.0.2
	OPENBSD_4_2_BASE:1.63
	OPENBSD_4_1:1.60.0.2
	OPENBSD_4_1_BASE:1.60
	OPENBSD_4_0:1.57.0.2
	OPENBSD_4_0_BASE:1.57
	OPENBSD_3_9:1.54.0.2
	OPENBSD_3_9_BASE:1.54
	OPENBSD_3_8:1.52.0.2
	OPENBSD_3_8_BASE:1.52
	OPENBSD_3_7:1.50.0.2
	OPENBSD_3_7_BASE:1.50
	OPENBSD_3_6:1.47.0.2
	OPENBSD_3_6_BASE:1.47
	OPENBSD_3_5:1.44.0.2
	OPENBSD_3_5_BASE:1.44
	OPENBSD_3_4:1.42.0.4
	OPENBSD_3_4_BASE:1.42
	OPENBSD_3_3:1.42.0.2
	OPENBSD_3_3_BASE:1.42
	OPENBSD_3_2:1.40.0.2
	OPENBSD_3_2_BASE:1.40
	OPENBSD_3_1:1.37.0.2
	OPENBSD_3_1_BASE:1.37
	OPENBSD_3_0:1.33.0.2
	OPENBSD_3_0_BASE:1.33
	OPENBSD_2_9_TRACKING_SWITCH:1.33
	OPENBSD_2_9:1.31.0.2
	OPENBSD_2_9_BASE:1.31
	OPENBSD_2_8:1.26.0.2
	OPENBSD_2_8_BASE:1.26
	OPENBSD_2_7:1.16.0.2
	OPENBSD_2_7_BASE:1.16
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	png0_96:1.1.1.1
	angelos:1.1.1;
locks; strict;
comment	@# @;


1.118
date	2017.04.11.14.15.09;	author naddy;	state Exp;
branches;
next	1.117;
commitid	G51iyJdz6yllZUKW;

1.117
date	2017.01.18.22.12.32;	author naddy;	state Exp;
branches;
next	1.116;
commitid	5kybycodLigKDXPC;

1.116
date	2016.12.31.16.51.27;	author naddy;	state Exp;
branches;
next	1.115;
commitid	TNlTgBqwn4SMkxMy;

1.115
date	2016.11.01.17.29.38;	author naddy;	state Exp;
branches;
next	1.114;
commitid	mXIWgtxUoWG3SVUN;

1.114
date	2016.09.06.11.45.12;	author sthen;	state Exp;
branches;
next	1.113;
commitid	QBoo3fvky4XzwFlE;

1.113
date	2016.08.20.20.52.53;	author naddy;	state Exp;
branches;
next	1.112;
commitid	68juUEz6I18PWakT;

1.112
date	2016.06.14.17.26.19;	author naddy;	state Exp;
branches
	1.112.2.1;
next	1.111;
commitid	Ogp0OcpfWrISyT4p;

1.111
date	2016.03.11.19.59.15;	author naddy;	state Exp;
branches;
next	1.110;
commitid	pguKLBEFv33DrgKU;

1.110
date	2015.12.04.21.27.58;	author naddy;	state Exp;
branches;
next	1.109;
commitid	YTVg1SK512K3P7OL;

1.109
date	2015.11.14.20.27.09;	author naddy;	state Exp;
branches;
next	1.108;
commitid	T96vyIWaBlsBTsDS;

1.108
date	2015.10.09.15.28.24;	author naddy;	state Exp;
branches;
next	1.107;
commitid	Cnz13WuL8RaTwdqr;

1.107
date	2015.10.08.23.45.30;	author sthen;	state Exp;
branches;
next	1.106;
commitid	91YXMQWcAL7vAWI7;

1.106
date	2015.10.08.12.02.03;	author jasper;	state Exp;
branches;
next	1.105;
commitid	Fd81pQbB9Yvd8TB7;

1.105
date	2015.08.13.20.59.38;	author naddy;	state Exp;
branches;
next	1.104;
commitid	rvddClGrBSj98tRq;

1.104
date	2015.05.06.20.17.48;	author naddy;	state Exp;
branches
	1.104.4.1;
next	1.103;
commitid	YrvdHGyiUDebHlQK;

1.103
date	2015.01.26.12.08.06;	author brad;	state Exp;
branches
	1.103.2.1;
next	1.102;
commitid	qqDBPp5kIhRq0JY8;

1.102
date	2014.11.25.22.41.50;	author brad;	state Exp;
branches;
next	1.101;
commitid	LBScT3GRV5eCVBh4;

1.101
date	2014.11.02.03.12.42;	author brad;	state Exp;
branches;
next	1.100;
commitid	bSfHH1IcVioSwd4Y;

1.100
date	2014.10.16.17.18.42;	author brad;	state Exp;
branches;
next	1.99;
commitid	fRsQv0350PgmFdOb;

1.99
date	2014.07.17.23.01.58;	author brad;	state Exp;
branches;
next	1.98;
commitid	WxH92WVSDcURshiO;

1.98
date	2014.04.18.02.54.05;	author brad;	state Exp;
branches;
next	1.97;

1.97
date	2014.01.03.15.53.04;	author naddy;	state Exp;
branches
	1.97.2.1;
next	1.96;

1.96
date	2013.10.05.22.04.44;	author naddy;	state Exp;
branches;
next	1.95;

1.95
date	2013.09.16.20.10.01;	author brad;	state Exp;
branches;
next	1.94;

1.94
date	2013.06.09.15.13.03;	author naddy;	state Exp;
branches
	1.94.2.1;
next	1.93;

1.93
date	2013.06.08.19.39.28;	author naddy;	state Exp;
branches;
next	1.92;

1.92
date	2013.06.03.02.46.25;	author naddy;	state Exp;
branches;
next	1.91;

1.91
date	2013.04.15.02.38.43;	author brad;	state Exp;
branches;
next	1.90;

1.90
date	2013.03.25.00.21.37;	author brad;	state Exp;
branches;
next	1.89;

1.89
date	2013.03.11.11.10.55;	author espie;	state Exp;
branches;
next	1.88;

1.88
date	2012.10.12.15.06.37;	author sthen;	state Exp;
branches;
next	1.87;

1.87
date	2012.09.26.15.04.09;	author sthen;	state Exp;
branches;
next	1.86;

1.86
date	2012.03.30.18.58.03;	author naddy;	state Exp;
branches;
next	1.85;

1.85
date	2012.02.26.14.57.54;	author naddy;	state Exp;
branches;
next	1.84;

1.84
date	2012.02.17.15.44.13;	author sthen;	state Exp;
branches;
next	1.83;

1.83
date	2012.02.03.18.23.14;	author gsoares;	state Exp;
branches
	1.83.2.1;
next	1.82;

1.82
date	2011.11.14.17.48.59;	author rpointel;	state Exp;
branches;
next	1.81;

1.81
date	2011.09.23.21.00.28;	author sthen;	state Exp;
branches;
next	1.80;

1.80
date	2011.07.15.11.10.40;	author naddy;	state Exp;
branches
	1.80.2.1;
next	1.79;

1.79
date	2011.07.08.20.34.36;	author naddy;	state Exp;
branches;
next	1.78;

1.78
date	2011.07.01.17.09.36;	author jasper;	state Exp;
branches;
next	1.77;

1.77
date	2010.10.19.21.04.52;	author naddy;	state Exp;
branches
	1.77.2.1;
next	1.76;

1.76
date	2010.10.18.18.13.15;	author espie;	state Exp;
branches;
next	1.75;

1.75
date	2010.06.27.19.55.04;	author kili;	state Exp;
branches;
next	1.74;

1.74
date	2009.12.06.21.43.11;	author naddy;	state Exp;
branches
	1.74.2.1;
next	1.73;

1.73
date	2009.10.12.10.17.16;	author naddy;	state Exp;
branches;
next	1.72;

1.72
date	2009.08.23.14.44.18;	author naddy;	state Exp;
branches;
next	1.71;

1.71
date	2009.03.04.20.17.16;	author naddy;	state Exp;
branches;
next	1.70;

1.70
date	2008.12.02.16.45.59;	author naddy;	state Exp;
branches
	1.70.2.1;
next	1.69;

1.69
date	2008.09.28.14.43.22;	author naddy;	state Exp;
branches;
next	1.68;

1.68
date	2008.05.07.14.29.39;	author naddy;	state Exp;
branches;
next	1.67;

1.67
date	2008.01.04.17.48.35;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2007.10.16.20.32.18;	author naddy;	state Exp;
branches;
next	1.65;

1.65
date	2007.10.06.19.33.28;	author naddy;	state Exp;
branches;
next	1.64;

1.64
date	2007.09.15.20.09.42;	author simon;	state Exp;
branches;
next	1.63;

1.63
date	2007.05.16.19.46.59;	author naddy;	state Exp;
branches;
next	1.62;

1.62
date	2007.04.08.15.02.36;	author naddy;	state Exp;
branches;
next	1.61;

1.61
date	2007.03.15.19.19.23;	author naddy;	state Exp;
branches;
next	1.60;

1.60
date	2006.11.30.17.24.13;	author bernd;	state Exp;
branches
	1.60.2.1;
next	1.59;

1.59
date	2006.11.30.11.25.32;	author bernd;	state Exp;
branches;
next	1.58;

1.58
date	2006.11.18.16.06.26;	author bernd;	state Exp;
branches;
next	1.57;

1.57
date	2006.06.29.14.33.47;	author bernd;	state Exp;
branches
	1.57.2.1;
next	1.56;

1.56
date	2006.05.13.13.52.48;	author bernd;	state Exp;
branches;
next	1.55;

1.55
date	2006.05.10.13.50.01;	author bernd;	state Exp;
branches;
next	1.54;

1.54
date	2005.12.26.22.33.17;	author steven;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2005.10.30.00.10.41;	author fgsch;	state Exp;
branches;
next	1.52;

1.52
date	2005.07.24.04.55.35;	author brad;	state Exp;
branches
	1.52.2.1;
next	1.51;

1.51
date	2005.04.17.13.37.42;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2004.10.15.04.41.13;	author brad;	state Exp;
branches;
next	1.49;

1.49
date	2004.09.22.21.08.20;	author brad;	state Exp;
branches;
next	1.48;

1.48
date	2004.09.20.01.24.10;	author brad;	state Exp;
branches;
next	1.47;

1.47
date	2004.08.05.19.17.14;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2004.07.06.22.17.48;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	2004.05.03.05.13.04;	author robert;	state Exp;
branches;
next	1.44;

1.44
date	2004.02.24.23.18.57;	author brad;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2003.12.18.00.09.48;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2003.01.25.05.52.21;	author brad;	state Exp;
branches
	1.42.4.1;
next	1.41;

1.41
date	2002.10.30.23.55.27;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2002.07.17.22.39.03;	author brad;	state Exp;
branches;
next	1.39;

1.39
date	2002.05.13.23.31.24;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2002.04.26.02.19.04;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	2002.02.07.04.50.55;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2002.02.06.16.40.38;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	2002.01.19.03.36.22;	author brad;	state Exp;
branches;
next	1.34;

1.34
date	2001.11.19.02.40.52;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2001.06.10.17.36.00;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2001.05.23.23.57.45;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2001.04.21.00.59.11;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2001.04.03.14.08.30;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2001.03.25.17.32.23;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2001.03.18.02.07.45;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2001.03.04.06.21.38;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2000.09.24.07.04.08;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2000.09.16.11.45.25;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2000.07.25.08.56.14;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2000.07.03.09.41.31;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2000.06.28.17.22.52;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2000.06.22.08.21.49;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2000.06.10.06.34.37;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.06.10.06.15.37;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2000.05.21.10.40.21;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	2000.05.16.18.49.39;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.19.00.31.33;	author espie;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2000.03.06.04.06.32;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2000.02.15.05.04.34;	author turan;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.12.06.29.55;	author turan;	state Exp;
branches;
next	1.12;

1.12
date	2000.02.10.10.37.59;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.02.05.03.56.58;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.05.09.07.24.21;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.05.08.18.13.49;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.03.13.19.08.34;	author csapuntz;	state Exp;
branches;
next	1.7;

1.7
date	99.02.21.04.26.12;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	98.09.11.21.11.07;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	98.03.21.04.59.59;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	98.03.13.00.37.52;	author jason;	state Exp;
branches;
next	1.3;

1.3
date	98.02.12.14.38.32;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	98.02.06.19.17.43;	author don;	state Exp;
branches;
next	1.1;

1.1
date	97.12.03.03.39.50;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.03.03.39.50;	author angelos;	state Exp;
branches;
next	;

1.16.2.1
date	2000.09.15.04.53.38;	author marc;	state Exp;
branches;
next	;

1.42.4.1
date	2004.05.03.11.42.13;	author robert;	state Exp;
branches;
next	1.42.4.2;

1.42.4.2
date	2004.07.10.23.41.49;	author brad;	state Exp;
branches;
next	1.42.4.3;

1.42.4.3
date	2004.08.05.19.53.27;	author brad;	state Exp;
branches;
next	;

1.44.2.1
date	2004.05.03.11.30.13;	author robert;	state Exp;
branches;
next	1.44.2.2;

1.44.2.2
date	2004.07.10.23.31.22;	author brad;	state Exp;
branches;
next	1.44.2.3;

1.44.2.3
date	2004.08.05.19.32.37;	author brad;	state Exp;
branches;
next	;

1.52.2.1
date	2006.07.02.15.30.43;	author sturm;	state Exp;
branches;
next	;

1.54.2.1
date	2006.07.02.15.31.23;	author sturm;	state Exp;
branches;
next	1.54.2.2;

1.54.2.2
date	2006.11.18.07.59.44;	author sturm;	state Exp;
branches;
next	;

1.57.2.1
date	2006.11.18.16.30.39;	author sturm;	state Exp;
branches;
next	1.57.2.2;

1.57.2.2
date	2007.05.20.17.36.02;	author sturm;	state Exp;
branches;
next	;

1.60.2.1
date	2007.05.20.17.39.24;	author sturm;	state Exp;
branches;
next	;

1.70.2.1
date	2009.06.12.01.59.57;	author william;	state Exp;
branches;
next	;

1.74.2.1
date	2010.07.22.02.31.07;	author william;	state Exp;
branches;
next	;

1.77.2.1
date	2011.07.01.17.10.43;	author jasper;	state Exp;
branches;
next	;

1.80.2.1
date	2011.09.24.23.43.05;	author william;	state Exp;
branches;
next	1.80.2.2;

1.80.2.2
date	2012.02.03.22.29.09;	author gsoares;	state Exp;
branches;
next	;

1.83.2.1
date	2012.04.12.12.58.38;	author jasper;	state Exp;
branches;
next	;

1.94.2.1
date	2014.01.10.22.02.33;	author naddy;	state Exp;
branches;
next	1.94.2.2;

1.94.2.2
date	2014.04.18.10.19.59;	author brad;	state Exp;
branches;
next	;

1.97.2.1
date	2014.04.18.10.19.31;	author brad;	state Exp;
branches;
next	;

1.103.2.1
date	2015.11.14.20.36.13;	author naddy;	state Exp;
branches;
next	1.103.2.2;
commitid	Fhb01JW4vnIGTZGD;

1.103.2.2
date	2015.12.04.21.32.03;	author naddy;	state Exp;
branches;
next	;
commitid	uGf8QqEN41tcjmVb;

1.104.4.1
date	2015.11.14.20.35.42;	author naddy;	state Exp;
branches;
next	1.104.4.2;
commitid	TUswJTy4WmB7PB1u;

1.104.4.2
date	2015.12.04.21.31.33;	author naddy;	state Exp;
branches;
next	;
commitid	0EovYPWceojugSsH;

1.112.2.1
date	2017.01.01.21.02.12;	author naddy;	state Exp;
branches;
next	;
commitid	EtxWR2V4ielTDITK;


desc
@@


1.118
log
@maintenance update to 1.6.29
@
text
@# $OpenBSD: Makefile,v 1.117 2017/01/18 22:12:32 naddy Exp $

COMMENT=	library for manipulating PNG images

VERSION=	1.6.29
DISTNAME=	libpng-${VERSION}
PKGNAME=	png-${VERSION}
CATEGORIES=	graphics
DPB_PROPERTIES=	parallel
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=libpng/}
EXTRACT_SUFX=	.tar.xz

SHARED_LIBS=	png16	17.3 \
		png	17.3

HOMEPAGE=	http://www.libpng.org/pub/png/libpng.html

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c m z

SEPARATE_BUILD=	Yes
CONFIGURE_STYLE=gnu

post-install:
	cd ${PREFIX}/lib; \
	    ln -s libpng16.so.${LIBpng16_VERSION} libpng.so.${LIBpng_VERSION}; \
	    rm libpng.la; cp -p libpng16.la libpng.la; \
	    sed -i 's/libpng16/libpng/g' libpng.la

.include <bsd.port.mk>
@


1.117
log
@maintenance update to 1.6.28; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2016/12/31 16:51:27 naddy Exp $
d5 1
a5 1
VERSION=	1.6.28
@


1.116
log
@security update to 1.6.27 for null-pointer-dereference bug; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2016/11/01 17:29:38 naddy Exp $
d5 1
a5 1
VERSION=	1.6.27
@


1.115
log
@maintenance update to 1.6.26; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2016/09/06 11:45:12 sthen Exp $
d5 1
a5 1
VERSION=	1.6.26
@


1.114
log
@update to libpng-1.6.25
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2016/08/20 20:52:53 naddy Exp $
d5 1
a5 1
VERSION=	1.6.25
@


1.113
log
@maintenance update to 1.6.24; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2016/06/14 17:26:19 naddy Exp $
d5 1
a5 1
VERSION=	1.6.24
@


1.112
log
@maintenance update to 1.6.23 after Brad sent me an equivalent diff for .22
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2016/03/11 19:59:15 naddy Exp $
d5 1
a5 1
VERSION=	1.6.23
@


1.112.2.1
log
@security update to 1.6.27 for null pointer dereference bug
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2016/12/31 16:51:27 naddy Exp $
d5 1
a5 1
VERSION=	1.6.27
@


1.111
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2015/12/04 21:27:58 naddy Exp $
d5 1
a5 1
VERSION=	1.6.20
d13 2
a14 2
SHARED_LIBS=	png16	17.2 \
		png	17.2
@


1.110
log
@SECURITY update to 1.6.20:
Complete fix for CVE-2015-8126: buffer overflow in png_set_PLTE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2015/11/14 20:27:09 naddy Exp $
a24 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
@


1.109
log
@SECURITY update to 1.6.19:
Multiple buffer overflows in the png_set_PLTE and png_get_PLTE functions
CVE-2015-8126

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2015/10/09 15:28:24 naddy Exp $
d5 1
a5 1
VERSION=	1.6.19
@


1.108
log
@explicitly replace symlink with file and use sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2015/10/08 23:45:30 sthen Exp $
d5 1
a5 1
VERSION=	1.6.18
@


1.107
log
@revert previous; libpng.la is a symlink and sed -i doesn't operate on these
(so build as-is fails), switching to operating on libpng16.la results in a
plist change, and the installed files from the previous package do actually
have a difference between libpng.la and libpng16.la(?!).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2015/08/13 20:59:38 naddy Exp $
d30 2
a31 1
	    perl -pi -e 's/libpng16/libpng/g' libpng.la
@


1.106
log
@sed -i
@
text
@d30 1
a30 1
	    sed -i 's/libpng16/libpng/g' libpng.la
@


1.105
log
@maintenance update to 1.6.18; from Brad, carefully checked by yours truly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2015/05/06 20:17:48 naddy Exp $
d30 1
a30 1
	    perl -pi -e 's/libpng16/libpng/g' libpng.la
@


1.104
log
@maintenance update to 1.6.17; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2015/01/26 12:08:06 brad Exp $
d5 1
a5 1
VERSION=	1.6.17
@


1.104.4.1
log
@SECURITY update to 1.6.19:
Multiple buffer overflows in the png_set_PLTE and png_get_PLTE functions
CVE-2015-8126
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2015/05/06 20:17:48 naddy Exp $
d5 1
a5 1
VERSION=	1.6.19
@


1.104.4.2
log
@SECURITY update to 1.6.20:
Complete fix for CVE-2015-8126: buffer overflow in png_set_PLTE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104.4.1 2015/11/14 20:35:42 naddy Exp $
d5 1
a5 1
VERSION=	1.6.20
@


1.103
log
@Update to png 1.6.16.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2014/11/25 22:41:50 brad Exp $
d5 1
a5 1
VERSION=	1.6.16
@


1.103.2.1
log
@SECURITY update to 1.6.19:
Multiple buffer overflows in the png_set_PLTE and png_get_PLTE functions
CVE-2015-8126
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2015/01/26 12:08:06 brad Exp $
d5 1
a5 1
VERSION=	1.6.19
@


1.103.2.2
log
@SECURITY update to 1.6.20:
Complete fix for CVE-2015-8126: buffer overflow in png_set_PLTE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103.2.1 2015/11/14 20:36:13 naddy Exp $
d5 1
a5 1
VERSION=	1.6.20
@


1.102
log
@Update to png 1.6.15.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2014/11/02 03:12:42 brad Exp $
d5 1
a5 1
VERSION=	1.6.15
@


1.101
log
@Update to png 1.6.14.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2014/10/16 17:18:42 brad Exp $
d5 1
a5 1
VERSION=	1.6.14
@


1.100
log
@Update to png 1.6.13.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2014/07/17 23:01:58 brad Exp $
d5 1
a5 1
VERSION=	1.6.13
@


1.99
log
@Update to png 1.6.12.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2014/04/18 02:54:05 brad Exp $
d5 1
a5 1
VERSION=	1.6.12
@


1.98
log
@SECURITY Update to png 1.6.10:
libpng will hang when reading images that have zero-length IDAT chunks with
the progressive (streaming) reader; a malicious web site could use this bug
to cause a (minor) denial of service. (CVE-2014-0333)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2014/01/03 15:53:04 naddy Exp $
d5 1
a5 1
VERSION=	1.6.10
a7 2
SHARED_LIBS=	png16	17.1 \
		png	17.1
d12 3
@


1.97
log
@SECURITY update to 1.6.8:
Fix a null pointer dereference (CVE-2013-6954)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2013/10/05 22:04:44 naddy Exp $
d5 1
a5 1
VERSION=	1.6.8
d13 1
@


1.97.2.1
log
@libpng will hang when reading images that have zero-length IDAT chunks with
the progressive (streaming) reader; a malicious web site could use this bug
to cause a (minor) denial of service. (CVE-2014-0333)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2014/01/03 15:53:04 naddy Exp $
a7 1
REVISION=	0
@


1.96
log
@Update to 1.6.6: fixes build on ARM, no other changes.
From: Juan Francisco Cantero Hurtado
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2013/09/16 20:10:01 brad Exp $
d5 1
a5 1
VERSION=	1.6.6
@


1.95
log
@Update to png 1.6.5.

pngfix is commented out as it requires a newer zlib release.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2013/06/09 15:13:03 naddy Exp $
d5 1
a5 1
VERSION=	1.6.5
@


1.94
log
@also s/libpng16/libpng/ in libpng.la, otherwise libtool produces -lpng16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2013/06/08 19:39:28 naddy Exp $
d5 1
a5 1
VERSION=	1.6.2
d8 2
a9 3
REVISION=	0
SHARED_LIBS=	png16	17.0 \
		png	17.0
d19 1
a19 1
WANTLIB=	m z
@


1.94.2.1
log
@Fix a null pointer dereference (CVE-2013-6954).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2013/06/09 15:13:03 naddy Exp $
d8 1
a8 1
REVISION=	1
@


1.94.2.2
log
@libpng will hang when reading images that have zero-length IDAT chunks with
the progressive (streaming) reader; a malicious web site could use this bug
to cause a (minor) denial of service. (CVE-2014-0333)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94.2.1 2014/01/10 22:02:33 naddy Exp $
d8 1
a8 1
REVISION=	2
@


1.93
log
@Major update to 1.6.2 on the new png 1.6 branch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/06/03 02:46:25 naddy Exp $
d8 1
d28 2
a29 1
	    ln -s libpng16.so.${LIBpng16_VERSION} libpng.so.${LIBpng_VERSION}
@


1.92
log
@switch to autotools-based build and follow the upstream install layout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2013/04/15 02:38:43 brad Exp $
d5 1
a5 2
VERSION=	1.5.15
REVISION=	1
d8 2
a9 2
SHARED_LIBS=	png15	16.0 \
		png	16.0
d27 1
a27 1
	    ln -s libpng15.so.${LIBpng15_VERSION} libpng.so.${LIBpng_VERSION}
@


1.91
log
@Update to png 1.5.15.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/03/25 00:21:37 brad Exp $
d6 1
d9 2
a10 1
SHARED_LIBS=	png	15.1
d22 7
a28 12
SUBST_VARS=	VERSION

FAKE_FLAGS=	PREFIX="${PREFIX}"

MAKE_ENV=	CC="${CC}"
MAKE_FILE=	scripts/makefile.openbsd
MAKE_FLAGS=	SHLIB_MAJOR=${LIBpng_VERSION:R} \
		SHLIB_MINOR=${LIBpng_VERSION:E} \
		PNGLIB_VERSION=${VERSION}

do-configure:
	cp ${WRKSRC}/scripts/pnglibconf.h.prebuilt ${WRKBUILD}/pnglibconf.h
@


1.90
log
@Update to png 1.5.14.

Reinstates inter-library dependencies and corrects the libpng-config
and pkg-config files for static vs shared linking.

WANTLIB update and Ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/03/11 11:10:55 espie Exp $
d5 1
a5 1
VERSION=	1.5.14
d8 1
a8 1
SHARED_LIBS=	png	15.0
@


1.89
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2012/10/12 15:06:37 sthen Exp $
d5 1
a5 2
VERSION=	1.5.10
REVISION=	0
d17 2
@


1.88
log
@bump various packages with static libs which frequently get pulled in;
this is to force pkg_add -u to pick them up because moving to PIE does change
these files but since there are no library bumps, the package signature stays
the same.

there are probably others, these are just ones I've run into. not a great
fix, and needs to be repeated when other arch move, but it's the simplest low
impact fix and I'm fed up with "relocation R_X86_64_32S can not be used
when making a shared object; recompile with -fPIC"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2012/09/26 15:04:09 sthen Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.87
log
@add DPB_PROPERTIES=Parallel for some things high in the dependency tree
which benefit from it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2012/03/30 18:58:03 naddy Exp $
d6 1
@


1.86
log
@SECURITY update to 1.5.10.
libpng failed to correctly handle malloc() failure for text chunks,
which can lead to memory corruption and the possibility of execution
of hostile code. (CVE-2011-3048)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/02/26 14:57:54 naddy Exp $
d10 1
@


1.85
log
@update to 1.5.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2012/02/17 15:44:13 sthen Exp $
d5 1
a5 1
VERSION=	1.5.9
d8 1
a8 1
SHARED_LIBS=	png	14.0
@


1.84
log
@png SECURITY fix: CVE-2011-3026, heap-buffer-overflow in png_decompress_chunk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/02/03 18:23:14 gsoares Exp $
d5 1
a5 2
REVISION=	1
VERSION=	1.5.6
d8 1
a8 1
SHARED_LIBS=	png	13.0
@


1.83
log
@Fix for CVE-2011-3464
(libpng "png_formatted_warning()" Off-by-One Vulnerability)

patch came from upstream git:
(http://libpng.git.sourceforge.net/git/gitweb.cgi?p=libpng/libpng;a=commit;h=
00c6a9a62c1825617c35c03ceb408114fffeca32)

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2011/11/14 17:48:59 rpointel Exp $
d5 1
a5 1
REVISION=	0
@


1.83.2.1
log
@Security fix for libpng "png_set_text_2()" Memory Corruption Vulnerability,
CVE-2011-3048.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/02/03 18:23:14 gsoares Exp $
d5 1
a5 1
REVISION=	1
@


1.82
log
@Update libpng to 1.5.6.
bump major version of shared libs.
ok naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2011/09/23 21:00:28 sthen Exp $
d5 1
@


1.81
log
@SECURITY update to png 1.5.5, fixing a divide-by-zero with malformed cHRM
chunks, this bug was introduced in 1.5.4 - CVE-2011-3328. Clues from naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/07/15 11:10:40 naddy Exp $
d5 1
a5 1
VERSION=	1.5.5
d8 1
a8 1
SHARED_LIBS=	png	12.1
@


1.80
log
@SECURITY update to png-1.5.4:
1. buffer overwrite in png_rgb_to_gray (CVE-2011-2690)
2. crash in png_default_error due to use of NULL Pointer (CVE-2011-2691)
3. memory corruption when handling empty sCAL chunks (CVE-2011-2692)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/07/08 20:34:36 naddy Exp $
d5 1
a5 1
VERSION=	1.5.4
d8 1
a8 1
SHARED_LIBS=	png	12.0
@


1.80.2.1
log
@SECURITY FIX

Resolve CVE-2011-3328, from upstream

ok jasper sthen (who had the same diff)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/07/15 11:10:40 naddy Exp $
a7 1
REVISION=	0
@


1.80.2.2
log
@Fix for CVE-2011-3464
(libpng "png_formatted_warning()" Off-by-One Vulnerability)

patch came from upstream git:
(http://libpng.git.sourceforge.net/git/gitweb.cgi?p=libpng/libpng;a=commit;h=
00c6a9a62c1825617c35c03ceb408114fffeca32)

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.1 2011/09/24 23:43:05 william Exp $
d8 1
a8 1
REVISION=	1
@


1.79
log
@Update to png 1.5.2.  Lots of improvements, but also significant
API incompatibility:

"The libpng 1.5.x series finally hides the contents of the venerable
and hoary png_struct and png_info data structures inside private
(i.e., non-installed) header files. Instead of direct struct-access,
applications should be using the various png_get_xxx() and png_set_xxx()
accessor functions, which have existed for almost as long as libpng
itself."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/07/01 17:09:36 jasper Exp $
d5 1
a5 1
VERSION=	1.5.2
d8 1
a8 1
SHARED_LIBS=	png	11.0
@


1.78
log
@Fix for CVE-2011-2501
libpng "png_format_buffer()" Denial of Service Vulnerability

from upstream git
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/10/19 21:04:52 naddy Exp $
d5 1
a5 1
VERSION=	1.2.44
d8 1
a8 2
REVISION=	0
SHARED_LIBS=	png	10.0
d29 3
@


1.77
log
@ports that preformat man pages with mandoc via bsd.man.mk don't need groff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/10/18 18:13:15 espie Exp $
d8 1
@


1.77.2.1
log
@Fix for CVE-2011-2501
libpng "png_format_buffer()" Denial of Service Vulnerability

from upstream git
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/10/19 21:04:52 naddy Exp $
a7 1
REVISION=	0
@


1.76
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/06/27 19:55:04 kili Exp $
a21 1
USE_GROFF =	Yes
@


1.75
log
@SECRUTY update to 1.22.44

Fixes CVE-2010-1205.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2009/12/06 21:43:11 naddy Exp $
d22 1
@


1.74
log
@maintenance update to 1.2.41
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2009/10/12 10:17:16 naddy Exp $
d5 1
a5 1
VERSION=	1.2.41
d8 1
a8 1
SHARED_LIBS=	png	9.0
@


1.74.2.1
log
@SECURITY FIX

Resolves CVE-2010-0205, CVE-2010-1205, and CVE-2010-2249

patches from upstream

started by stephan@@ and reads fine to kili@@ (thanks)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2009/12/06 21:43:11 naddy Exp $
d7 1
a7 1
PKGNAME=	png-${VERSION}p0
@


1.73
log
@minor maintenance update to 1.2.40
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2009/08/23 14:44:18 naddy Exp $
d5 1
a5 1
VERSION=	1.2.40
d8 1
a8 1
SHARED_LIBS=	png	8.1
@


1.72
log
@maintenance update to 1.2.39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2009/03/04 20:17:16 naddy Exp $
d5 1
a5 1
VERSION=	1.2.39
@


1.71
log
@Security update to 1.2.35: Fix an uninitialized data bug; CVE-2009-0040.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2008/12/02 16:45:59 naddy Exp $
d5 1
a5 1
VERSION=	1.2.35
@


1.70
log
@update to 1.2.33, which fixes a minor memory leak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2008/09/28 14:43:22 naddy Exp $
d5 1
a5 1
VERSION=	1.2.33
d8 1
a8 1
SHARED_LIBS=	png	8.0
a28 3

post-extract:
	@@rm -f ${WRKSRC}/*.orig
@


1.70.2.1
log
@security update to png-1.3.33p0; patches from debian
resolves CVE-2008-5907 and CVE-2009-0040
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2008/12/02 16:45:59 naddy Exp $
d7 1
a7 1
PKGNAME=	png-${VERSION}p0
@


1.69
log
@Maintenance update to 1.2.32.
Library bump because png_struct has been extended.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2008/05/07 14:29:39 naddy Exp $
d5 1
a5 1
VERSION=	1.2.32
@


1.68
log
@Update to 1.2.28 which fixes a number of "security and crash bugs".
Bump library version since struct png_struct has changed--this shouldn't be
used externally, but you never know.

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2008/01/04 17:48:35 espie Exp $
d5 1
a5 1
VERSION=	1.2.28
d8 1
a8 1
SHARED_LIBS=	png	7.0
@


1.67
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2007/10/16 20:32:18 naddy Exp $
d5 1
a5 1
VERSION=	1.2.22
d8 1
a8 1
SHARED_LIBS=	png	6.0
d29 3
@


1.66
log
@SECURITY update to 1.2.22.
Fixes a number of out-of-bounds reads in certain chunk-handlers.
CVE-2007-5266, CVE-2007-5267, CVE-2007-5268, CVE-2007-5269.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2007/10/06 19:33:28 naddy Exp $
d22 1
a22 1
FAKE_FLAGS=	${MAKE_FLAGS} DESTDIR="${WRKINST}" PREFIX="${PREFIX}"
@


1.65
log
@maintenance update to 1.2.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2007/09/15 20:09:42 simon Exp $
d5 1
a5 1
VERSION=	1.2.20
@


1.64
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2007/05/16 19:46:59 naddy Exp $
d5 1
a5 1
VERSION=	1.2.18
d8 1
a8 1
SHARED_LIBS=	png	5.2
d19 2
@


1.63
log
@SECURITY update to 1.2.18:
Fix a NULL pointer dereference vulnerability involving palette
images with a malformed tRNS chunk (CVE-2007-2445).
ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2007/04/08 15:02:36 naddy Exp $
d3 1
a3 1
COMMENT=	"library for manipulating PNG images"
@


1.62
log
@Hardcode our build options in pngconf.h so everything sees really the same
interface.  ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2007/03/15 19:19:23 naddy Exp $
d5 1
a5 1
VERSION=	1.2.16
d7 1
a7 1
PKGNAME=	png-${VERSION}p0
@


1.61
log
@update to 1.2.16:
- minor bug fixes
- we now use the same API no matter whether asm optimizations are enabled
  or not
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2006/11/30 17:24:13 bernd Exp $
d7 1
a7 1
PKGNAME=	png-${VERSION}
@


1.60
log
@The libpng people re-rolled the distfile of png-1.2.14. They fixed
some fuckup in their autoconf stuff (which we don't use) and changed
dates in comments. Bump PKGNAME.

Noticed by aanriot@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2006/11/30 11:25:32 bernd Exp $
d5 1
a5 1
VERSION=	1.2.14
d7 2
a8 2
PKGNAME=	${DISTNAME:S/lib//}p0
SHARED_LIBS=	png	5.1
a26 3

post-extract:
	@@rm -f ${WRKSRC}/scripts/*.orig
@


1.60.2.1
log
@Fix a NULL pointer dereference vulnerability involving palette
images with a malformed tRNS chunk (CVE-2007-2445).

from steven
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2006/11/30 17:24:13 bernd Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/lib//}p1
@


1.59
log
@Update to png-1.2.14.

'fine with me' steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2006/11/18 16:06:26 bernd Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/lib//}
@


1.58
log
@Security update to libpng-1.2.13. (CVE-2006-3334)

Libpng versions 1.0.6 through 1.2.12 can crash while decoding
the sPLT chunk.  This is due to an incorrect calculation of
the buffer size for storing the palette entries.

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2006/06/29 14:33:47 bernd Exp $
d5 1
a5 1
VERSION=	1.2.13
@


1.57
log
@Security update to png-1.2.12.

Fixes a buffer overflow vulnerability.

More information:
http://www.securityfocus.com/bid/18698/

ok steven@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2006/05/13 13:52:48 bernd Exp $
d5 1
a5 1
VERSION=	1.2.12
@


1.57.2.1
log
@security fix

Libpng versions 1.0.6 through 1.2.12 can crash while decoding
the sPLT chunk.  This is due to an incorrect calculation of
the buffer size for storing the palette entries.
This bug has been given the identifier CVE-2006-3334.

from libpng via bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2006/06/29 14:33:47 bernd Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/lib//}p0
@


1.57.2.2
log
@Fix a NULL pointer dereference vulnerability involving palette
images with a malformed tRNS chunk (CVE-2007-2445).

from steven
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57.2.1 2006/11/18 16:30:39 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/lib//}p1
@


1.56
log
@We compile png with -DPNG_NO_ASSEMBLER_CODE. Unfortunately, the libpng build
system doesn't install a pngconf.h appropriate to the options passed to the
build.
So we have to put a PNG_NO_ASSEMBLER_CODE define into pngconf.h manually.
This unbreaks (at least) ImageMagick on amd64.

Some more information about this problem can be found here:

http://sourceforge.net/mailarchive/forum.php?thread_id=10314069&forum_id=43850

Since we don't want to compile pentium specific code,
remove -DPNG_USE_PNGGCCRD.

Bump major lib version and PKGNAME.

with help & ok steven@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2006/05/10 13:50:01 bernd Exp $
d5 1
a5 1
VERSION=	1.2.10
d7 2
a8 2
PKGNAME=	${DISTNAME:S/lib//}p0
SHARED_LIBS=	png	5.0
@


1.55
log
@Update to png-1.2.10 and better DESCR.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2005/12/26 22:33:17 steven Exp $
d7 2
a8 2
PKGNAME=	${DISTNAME:S/lib//}
SHARED_LIBS=	png	4.3
@


1.54
log
@SHARED_LIBS
feedback and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2005/10/30 00:10:41 fgsch Exp $
d5 2
a6 1
DISTNAME=	libpng-1.2.8
d8 1
a8 1
SHARED_LIBS=	png	4.2
d25 5
a29 1
		SHLIB_MINOR=${LIBpng_VERSION:E}
@


1.54.2.1
log
@MFC:
Fixes a buffer overflow vulnerability.

More information:
http://www.securityfocus.com/bid/18698/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2005/12/26 22:33:17 steven Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p0
@


1.54.2.2
log
@security fix

Libpng versions 1.0.6 through 1.2.12 can crash while decoding
the sPLT chunk.  This is due to an incorrect calculation of
the buffer size for storing the palette entries.
This bug has been given the identifier CVE-2006-3334.

from libpng via bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.1 2006/07/02 15:31:23 sturm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p1
@


1.53
log
@after querying brad@@ he decided to drop maintainership for these.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2005/07/24 04:55:35 brad Exp $
d7 1
d19 1
a19 1
FAKE_FLAGS=	DESTDIR="${WRKINST}" PREFIX="${PREFIX}"
d23 2
@


1.52
log
@upgrade to png 1.2.8

From: Simon Dassow <janus at area319 dot de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2005/04/17 13:37:42 espie Exp $
a10 2

MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.52.2.1
log
@MFC:
Fixes a buffer overflow vulnerability.

More information:
http://www.securityfocus.com/bid/18698/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2005/07/24 04:55:35 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p0
@


1.51
log
@this stuff builds without really installing it now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2004/10/15 04:41:13 brad Exp $
d5 2
a6 2
DISTNAME=	libpng-1.2.7
PKGNAME=	${DISTNAME:S/lib//}p2
@


1.50
log
@install pkgconfig file for png.

From: Jacob Meuser <jakemsr at jakemsr dot com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2004/09/22 21:08:20 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p1
@


1.49
log
@bad bad me, I managed to kill the PKGNAME with the previous commit

noticed by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2004/09/20 01:24:10 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}
@


1.48
log
@upgrade to png 1.2.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2004/08/05 19:17:14 brad Exp $
d6 1
@


1.47
log
@Add pieces of the libpng jumbo security patch not already in the port.

http://www.us-cert.gov/cas/techalerts/TA04-217A.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2004/07/06 22:17:48 brad Exp $
d5 1
a5 2
DISTNAME=	libpng-1.2.5
PKGNAME=	${DISTNAME:S/lib//}p5
@


1.46
log
@fix buffer overflows with 16-bit and greyscale samples.

CAN-2002-1363

http://www.openpkg.org/security/OpenPKG-SA-2003.001-png.html
http://www.openpkg.org/security/OpenPKG-SA-2004.030-png.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2004/05/03 05:13:04 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p4
@


1.45
log
@Fix for CAN-2004-0421:
Steve Grubb reports a buffer read overrun in libpng's
png_format_buffer function. A specially constructed PNG image
processed by an application using libpng may trigger the buffer
read overrun and possibly result in an application crash.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2004/02/24 23:18:57 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p3
@


1.44
log
@- add license marker
- remove REGRESS_TARGET and add a check target to the png Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2003/12/18 00:09:48 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p2
@


1.44.2.1
log
@Fix for CAN-2004-0421:
Steve Grubb reports a buffer read overrun in libpng's
png_format_buffer function. A specially constructed PNG image
processed by an application using libpng may trigger the buffer
read overrun and possibly result in an application crash.

bump PKGNAME; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2004/02/24 23:18:57 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p3
@


1.44.2.2
log
@MFC:
- fix buffer overflows with 16-bit and greyscale samples, CAN-2002-1363.
- use upstream patch for older CAN-2004-0421 issue.

http://www.openpkg.org/security/OpenPKG-SA-2003.001-png.html
http://www.openpkg.org/security/OpenPKG-SA-2004.030-png.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44.2.1 2004/05/03 11:30:13 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p4
@


1.44.2.3
log
@Add pieces of the libpng jumbo security patch not already in the port.

http://www.us-cert.gov/cas/techalerts/TA04-217A.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44.2.2 2004/07/10 23:31:22 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p5
@


1.43
log
@Unlink png from zlib, bump major number.
Breaks lbreakout2 and pdflib, we don't really care, we'll fix them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2003/01/25 05:52:21 brad Exp $
d14 1
a23 2

REGRESS_TARGET=	test
@


1.42
log
@- strip out some useless docs
- install libpng-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2002/10/30 23:55:27 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p1
@


1.42.4.1
log
@Log message:
Fix for CAN-2004-0421:
Steve Grubb reports a buffer read overrun in libpng's
png_format_buffer function. A specially constructed PNG image
processed by an application using libpng may trigger the buffer
read overrun and possibly result in an application crash.

bump PKGNAME; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2003/01/25 05:52:21 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p2
@


1.42.4.2
log
@MFC:
- fix buffer overflows with 16-bit and greyscale samples, CAN-2002-1363.
- use upstream patch for older CAN-2004-0421 issue.

http://www.openpkg.org/security/OpenPKG-SA-2003.001-png.html
http://www.openpkg.org/security/OpenPKG-SA-2004.030-png.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42.4.1 2004/05/03 11:42:13 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p3
@


1.42.4.3
log
@Add pieces of the libpng jumbo security patch not already in the port.

http://www.us-cert.gov/cas/techalerts/TA04-217A.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42.4.2 2004/07/10 23:41:49 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}p4
@


1.41
log
@upgrade to png 1.2.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2002/07/17 22:39:03 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/lib//}
@


1.40
log
@upgrade to png 1.2.4
--
compat symlinks have been removed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2002/05/13 23:31:24 espie Exp $
d5 1
a5 1
DISTNAME=	libpng-1.2.4
@


1.39
log
@More MASTER_SITES_SUBDIR out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2002/04/26 02:19:04 brad Exp $
d5 1
a5 1
DISTNAME=	libpng-1.2.2
a7 1
NEED_VERSION=	1.522
a24 8

# short term compatibility sym-links
# will be removed once all ports have been checked
# for proper operation without the sym-links
post-install:
	@@cd ${PREFIX}/include && \
		ln -sf libpng/png.h png.h && \
		ln -sf libpng/pngconf.h pngconf.h
@


1.38
log
@upgrade to png 1.2.2
--
headers have been moved from include/ to include/libpng/.
for the short term sym-links have been created in include/ but will
be removed once all ports have been checked. porters should @@comment out
the sym-links to check ports locally.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2002/02/07 04:50:55 brad Exp $
d9 1
a9 2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR= libpng
@


1.37
log
@proper HOMEPAGE URL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2002/02/06 16:40:38 brad Exp $
d5 1
a5 1
DISTNAME=	libpng-1.2.1
d8 1
a8 1
NEED_VERSION=	1.500
d28 7
a34 2
post-extract:
	@@cp -f ${FILESDIR}/makefile.openbsd ${WRKSRC}/scripts
@


1.36
log
@make sure the png port honors CC.
--
Pointed out by: naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2002/01/19 03:36:22 brad Exp $
d12 1
a12 1
HOMEPAGE=	http://www.libpng.org/pub/png/
@


1.35
log
@upgrade to png 1.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/11/19 02:40:52 brad Exp $
d23 1
@


1.34
log
@upgrade to png 1.2.0
--
Thanks to naddy@@ for doing a full tree build and finding out that nothing
broke because of this upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/06/10 17:36:00 brad Exp $
d5 1
a5 1
DISTNAME=	libpng-1.2.0
d8 1
a8 1
NEED_VERSION=	1.489
@


1.33
log
@upgrade to png 1.0.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2001/05/23 23:57:45 brad Exp $
d5 1
a5 1
DISTNAME=	libpng-1.0.12
d8 1
a8 1
NEED_VERSION=	1.413
d21 1
a21 2
MAKE_FLAGS=	CC="${CC}" CFLAGS="${CFLAGS}" LDFLAGS="-L. -lpng -lz -lm"
FAKE_FLAGS+=	${MAKE_FLAGS} prefix="${PREFIX}"
d23 1
a23 1
MAKE_FILE=	scripts/makefile.std
d25 1
a25 6
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/png
	cd ${WRKSRC}; ${INSTALL_MAN} libpng.3 libpngpf.3 ${PREFIX}/man/man3
	${INSTALL_MAN} ${WRKSRC}/png.5 ${PREFIX}/man/man5
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/png
	${INSTALL_DATA} ${WRKSRC}/libpng.txt ${PREFIX}/share/doc/png
d27 2
a28 2
test:	build
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE} ${MAKE_FLAGS} -f ${MAKE_FILE} test
a30 4

.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
MAKE_ENV+=	NO_SHARED_LIBS=Yes
.endif
@


1.32
log
@upgrade to png 1.0.11
- bump shared lib major rev, should have happened way back at 1.0.6 but
the libpng maintainers seemed to have overlooked this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/04/21 00:59:11 brad Exp $
d5 1
a5 1
DISTNAME=	libpng-1.0.11
d8 1
a8 1
NEED_VERSION=	1.402
@


1.31
log
@= -> +=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2001/04/03 14:08:30 brad Exp $
d5 2
a6 2
DISTNAME=	libpng-1.0.10
PKGNAME=	png-1.0.10
d8 1
a8 1
NEED_VERSION=	1.384
@


1.30
log
@upgrade to png 1.0.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2001/03/25 17:32:23 brad Exp $
d39 1
a39 1
MAKE_ENV=	NO_SHARED_LIBS=Yes
@


1.29
log
@integrate COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/03/18 02:07:45 brad Exp $
d5 2
a6 2
DISTNAME=	libpng-1.0.9
PKGNAME=	png-1.0.9
d8 2
a9 3
NEED_VERSION=	1.363
MASTER_SITES=	ftp://ftp.libpng.org/pub/png/src/ \
		${MASTER_SITE_SOURCEFORGE}
@


1.28
log
@oops, make sure this respects PREFIX on install.
--
Pointed out by: Matt Behrens <matt@@zigg.com>
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.27 2001/03/04 06:21:38 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.336
@


1.27
log
@upgrade to png 1.0.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/09/24 07:04:08 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.330
d21 1
a21 1
FAKE_FLAGS+=	${MAKE_FLAGS}
@


1.26
log
@add name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/09/16 11:45:25 brad Exp $
d3 2
a4 2
DISTNAME=	libpng-1.0.8
PKGNAME=	png-1.0.8
@


1.25
log
@revert switch to libtool, use "cc -shared" to create shared libraries
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/07/25 08:56:14 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.310
d13 1
a13 1
MAINTAINER=	brad@@openbsd.org
@


1.24
log
@upgrade to png 1.0.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/07/03 09:41:31 brad Exp $
d20 2
a21 2
USE_LIBTOOL=	Yes
MAKE_FLAGS=	CC="${CC}" CFLAGS="${CFLAGS}" LDFLAGS="libpng.la -lz -lm"
d36 4
@


1.23
log
@upgrade to png 1.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/06/28 17:22:52 brad Exp $
d3 2
a4 2
DISTNAME=	libpng-1.0.7
PKGNAME=	png-1.0.7
d6 1
a6 1
NEED_VERSION=	1.301
@


1.22
log
@- remove unnecessary -L. from LDFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/06/22 08:21:49 brad Exp $
d3 2
a4 2
DISTNAME=	libpng-1.0.6
PKGNAME=	png-1.0.6
d7 3
a9 5
MASTER_SITES=	ftp://ftp.uu.net/graphics/png/src/

PATCHFILES=	libpng-1.0.6-patch-a.txt.gz \
		libpng-1.0.6-patch-b.txt.gz \
		libpng-1.0.6-patch-c.txt.gz
@


1.21
log
@- remove license type
- remove FAKE=Yes
- remove unnecessary pre-patch target and replace with usage of MAKE_FILE
- switch to libtool for shared library creation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/06/10 06:34:37 brad Exp $
d23 1
a23 1
MAKE_FLAGS=	CC="${CC}" CFLAGS="${CFLAGS}" LDFLAGS="-L. libpng.la -lz -lm"
d35 1
a35 1
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE} ${MAKE_FLAGS} -f ${MAKE_FILE} test
@


1.20
log
@add HOMEPAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/06/10 06:15:37 brad Exp $
d3 5
a7 5
DISTNAME=       libpng-1.0.6
PKGNAME=        png-1.0.6
CATEGORIES=     graphics
NEED_VERSION=	1.223
MASTER_SITES=   ftp://ftp.uu.net/graphics/png/src/
a16 1
LICENSE_TYPE=		BSD
a20 1
FAKE=			Yes
d22 4
a25 2
pre-patch:
	@@cd ${WRKSRC} && cp scripts/makefile.std Makefile
d34 3
a37 7

# The patches assumed shared libs would be build.  If building
# on a host that does not support shared libs, e.g. the alpha,
# apply one more patch.
.if defined(NO_SHARED_LIBS)
PATCH_LIST+=noshared-patch
.endif
@


1.19
log
@takeover as maintainer of this port, Ok'd by angelos@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/05/21 10:40:21 fgsch Exp $
d12 2
@


1.18
log
@Update to png-1.0.6; too many changes to list here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/05/16 18:49:39 espie Exp $
d13 1
a13 1
MAINTAINER=     angelos@@openbsd.org
@


1.17
log
@Erroneous ldconfig
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/03/19 00:31:33 espie Exp $
d3 2
a4 2
DISTNAME=       libpng-1.0.3
PKGNAME=        png-1.0.3
d9 3
a20 3

post-extract:
	@@chmod +w ${WRKSRC}/scripts
@


1.16
log
@Use PATCH_LIST to handle supplementary patch.
Playing around with multiple definitions of post-patch is a bad idea...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/03/06 04:06:32 espie Exp $
a30 1
	@@${LDCONFIG} -m ${PREFIX}/lib
@


1.16.2.1
log
@bring graphics as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/07/25 08:56:14 brad Exp $
d3 5
a7 7
DISTNAME=	libpng-1.0.8
PKGNAME=	png-1.0.8
CATEGORIES=	graphics
NEED_VERSION=	1.310
MASTER_SITES=	ftp://ftp.libpng.org/pub/png/src/ \
		${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR= libpng
a8 1
HOMEPAGE=	http://www.libpng.org/pub/png/
d10 1
a10 1
MAINTAINER=	brad@@openbsd.org
d12 1
d17 1
d19 2
a20 2
USE_LIBTOOL=	Yes
MAKE_FLAGS=	CC="${CC}" CFLAGS="${CFLAGS}" LDFLAGS="libpng.la -lz -lm"
d22 2
a23 1
MAKE_FILE=	scripts/makefile.std
d31 1
d33 1
a33 2
test:	build
	@@cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ${MAKE} ${MAKE_FLAGS} -f ${MAKE_FILE} test
d35 6
a40 1
.include <bsd.port.mk>
@


1.15
log
@Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/02/15 05:04:34 turan Exp $
d23 1
a23 7
	@@cp ${WRKSRC}/scripts/makefile.std $(WRKSRC)/Makefile

# post-patch must be defined before bsd.port.mk is included so it will
# be called.  However, we need to have the body of the target after
# bsd.port.mk is included so NO_SHARED_LIBS is defined.
# Define the target twice, using :
post-patch:
a37 1
post-patch:
d39 1
a39 1
	@@cd ${DISTDIR}; patch ${PATCH_DIST_ARGS} < ${FILESDIR}/patch
@


1.14
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/12 06:29:55 turan Exp $
d6 1
a8 1
NEED_VERSION=	1.64
d13 5
a17 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
@


1.13
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/02/10 10:37:59 espie Exp $
d13 4
a16 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.12
log
@Unneeded subshell
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/02/05 03:56:58 brad Exp $
d11 6
@


1.11
log
@- style
- ${MKDIR} -> ${INSTALL_DATA_DIR}
- ${PATCH} -> patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/05/09 07:24:21 brad Exp $
d39 1
a39 1
	@@(cd ${DISTDIR}; patch ${PATCH_DIST_ARGS} < ${FILESDIR}/patch)
@


1.10
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/05/08 18:13:49 brad Exp $
d16 1
a16 1
	cp ${WRKSRC}/scripts/makefile.std $(WRKSRC)/Makefile
d25 2
a26 2
	${INSTALL_MAN} ${WRKSRC}/libpng.3 ${PREFIX}/man/man3
	${INSTALL_MAN} ${WRKSRC}/libpngpf.3 ${PREFIX}/man/man3
a27 1
	${MKDIR} ${PREFIX}/share/doc/png
d30 1
a30 1
	${LDCONFIG} -m ${PREFIX}/lib
d39 1
a39 1
	@@(cd ${DISTDIR}; ${PATCH} ${PATCH_DIST_ARGS} < ${FILESDIR}/patch)
@


1.9
log
@- fixup non-shared lib situation so the port will not make shared
libs on any arch that does not have shared libs, not just alpha.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.8 1999/03/13 19:08:34 csapuntz Exp $
#
d6 1
a10 2

MASTER_SITES=   ftp://ftp.uu.net/graphics/png/src/
@


1.8
log
@

updated for libpng-1.0.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/02/21 04:26:12 marc Exp $
d20 6
d36 8
@


1.7
log
@needs version 1.64 (or later) of bsd.port.mk
to build/install correctly; PLIST.noshared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1998/09/11 21:11:07 marc Exp $
d4 2
a5 2
DISTNAME=       libpng-1.0.2
PKGNAME=        png-1.0.2
@


1.6
log
@update to version 1.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1998/03/21 04:59:59 marc Exp $
d7 2
a8 1
MASTER_SITES=   ftp://ftp.uu.net/graphics/png/src/
d11 2
@


1.5
log
@update to 1.0.1 as 1.0.0 is no longer available;
Install man pages and doc.
@
text
@d1 1
a1 6
# OpenBSD makefile for:    PNG images library
# Version required:     1.0.0
# Date created:         December 2, 1997
# Whom:                 Angelos D. Keromytis
#
# $OpenBSD: Makefile,v 1.4 1998/03/13 00:37:52 jason Exp $
d4 2
a5 2
DISTNAME=       libpng-1.0.1
PKGNAME=        png-1.0.1
d10 3
@


1.4
log
@updated to png-1.0.0
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1998/02/12 14:38:32 niklas Exp $
d9 2
a10 2
DISTNAME=       libpng-1.0.0
PKGNAME=        png-1.0.0
d20 6
@


1.3
log
@ldconfig after installation
@
text
@d2 1
a2 1
# Version required:     0.96
d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1998/02/06 19:17:43 don Exp $
d9 2
a10 2
DISTNAME=       libpng-0.96
PKGNAME=        png-0.96
a12 1
EXTRACT_SUFX=   .tgz
d16 2
a17 1
MAKEFILE=       makefile
@


1.2
log
@ldconfig is already run in the real makefile properly.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1997/12/03 03:39:50 angelos Exp $
d18 3
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD$
a17 3

post-install:
	${LDCONFIG} -m ${PREFIX}/lib
@


1.1.1.1
log
@Add libpng port.
@
text
@@

