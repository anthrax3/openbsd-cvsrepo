head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.05.06.14.10.16;	author espie;	state Exp;
branches;
next	;
commitid	dJTFZaIWKav4xp1D;


desc
@@


1.1
log
@hack for clang...
@
text
@$OpenBSD$
XXX borrow variables from system getopt, work-around clang bug.

Index: deps/getopt.c
--- deps/getopt.c.orig
+++ deps/getopt.c
@@@@ -33,11 +33,10 @@@@ const int no_argument = 0;
 const int required_argument = 1;
 const int optional_argument = 2;
 
-char* optarg;
-int optopt;
-/* The variable optind [...] shall be initialized to 1 by the system. */
-int optind = 1;
-int opterr;
+extern char *optarg;
+extern int optopt;
+extern int optind;
+extern int opterr;
 
 static char* optcursor = NULL;
 
@
