head	1.46;
access;
symbols
	OPENBSD_4_7:1.45.0.2
	OPENBSD_4_7_BASE:1.45
	OPENBSD_4_6:1.44.0.4
	OPENBSD_4_6_BASE:1.44
	OPENBSD_4_5:1.44.0.2
	OPENBSD_4_5_BASE:1.44
	OPENBSD_4_4:1.43.0.4
	OPENBSD_4_4_BASE:1.43
	OPENBSD_4_3:1.43.0.2
	OPENBSD_4_3_BASE:1.43
	OPENBSD_4_2:1.41.0.2
	OPENBSD_4_2_BASE:1.41
	OPENBSD_4_1:1.40.0.2
	OPENBSD_4_1_BASE:1.40
	OPENBSD_4_0:1.38.0.2
	OPENBSD_4_0_BASE:1.38
	OPENBSD_3_9:1.37.0.2
	OPENBSD_3_9_BASE:1.37
	OPENBSD_3_8:1.33.0.4
	OPENBSD_3_8_BASE:1.33
	OPENBSD_3_7:1.33.0.2
	OPENBSD_3_7_BASE:1.33
	OPENBSD_3_6:1.31.0.2
	OPENBSD_3_6_BASE:1.31
	OPENBSD_3_5:1.30.0.2
	OPENBSD_3_5_BASE:1.30
	OPENBSD_3_4:1.26.0.2
	OPENBSD_3_4_BASE:1.26
	OPENBSD_3_3:1.25.0.2
	OPENBSD_3_3_BASE:1.25
	OPENBSD_3_2:1.21.0.2
	OPENBSD_3_2_BASE:1.21
	OPENBSD_3_1:1.14.0.2
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_TRACKING_SWITCH:1.4
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	tom_20001226:1.1.1.1
	reinhard:1.1.1;
locks; strict;
comment	@# @;


1.46
date	2010.04.30.17.06.56;	author jasper;	state dead;
branches;
next	1.45;

1.45
date	2009.08.10.06.31.44;	author kili;	state Exp;
branches;
next	1.44;

1.44
date	2009.01.09.17.43.39;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2007.11.28.21.36.26;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2007.09.15.20.09.40;	author simon;	state Exp;
branches;
next	1.41;

1.41
date	2007.06.05.14.48.06;	author naddy;	state Exp;
branches;
next	1.40;

1.40
date	2006.11.26.10.42.52;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2006.11.13.11.20.24;	author steven;	state Exp;
branches;
next	1.38;

1.38
date	2006.08.03.12.43.20;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2006.01.22.10.38.55;	author steven;	state Exp;
branches;
next	1.36;

1.36
date	2005.12.26.15.35.01;	author steven;	state Exp;
branches;
next	1.35;

1.35
date	2005.11.21.20.20.53;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2005.09.16.09.51.27;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2005.01.18.12.30.57;	author alek;	state Exp;
branches
	1.33.2.1
	1.33.4.1;
next	1.32;

1.32
date	2004.09.19.23.41.32;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2004.06.20.20.00.18;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2004.03.02.07.57.21;	author brad;	state Exp;
branches
	1.30.2.1;
next	1.29;

1.29
date	2003.12.19.19.48.32;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2003.12.19.19.22.58;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2003.12.14.09.26.11;	author sturm;	state Exp;
branches;
next	1.26;

1.26
date	2003.05.12.04.47.26;	author brad;	state Exp;
branches
	1.26.2.1;
next	1.25;

1.25
date	2003.01.19.23.22.26;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2003.01.18.23.15.43;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2002.11.14.21.03.41;	author marcm;	state Exp;
branches;
next	1.22;

1.22
date	2002.11.13.16.05.49;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2002.08.25.22.30.40;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2002.08.08.12.00.47;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2002.05.31.02.41.44;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2002.05.31.00.03.35;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2002.05.27.02.11.55;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2002.05.26.17.18.10;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2002.05.13.23.31.24;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2002.04.07.17.25.36;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2002.03.26.04.14.34;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2002.03.23.06.22.17;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2002.02.25.18.39.41;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2001.12.10.21.29.16;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2001.10.24.12.19.22;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2001.09.14.14.41.30;	author todd;	state Exp;
branches;
next	1.7;

1.7
date	2001.09.14.03.41.29;	author heko;	state Exp;
branches;
next	1.6;

1.6
date	2001.09.13.20.35.34;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.01.02.33.59;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2001.05.24.02.27.53;	author kevlo;	state Exp;
branches;
next	1.3;

1.3
date	2001.04.01.20.18.06;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.27.11.45.07;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2000.12.26.12.52.18;	author reinhard;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.12.26.12.52.18;	author reinhard;	state Exp;
branches;
next	;

1.26.2.1
date	2004.09.29.23.55.00;	author brad;	state Exp;
branches;
next	;

1.30.2.1
date	2004.09.29.23.52.07;	author brad;	state Exp;
branches;
next	;

1.33.2.1
date	2005.11.24.18.38.40;	author sturm;	state Exp;
branches;
next	;

1.33.4.1
date	2005.11.24.18.38.59;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.46
log
@- remove old port from the gtk1/glib1 days

ok ajacoutot@@
maintained timed-out long-ago
@
text
@# $OpenBSD: Makefile,v 1.45 2009/08/10 06:31:44 kili Exp $

COMMENT=	GdkPixbuf graphics library

DISTNAME=	gdk-pixbuf-0.22.0
PKGNAME=	${DISTNAME}p9
SHARED_LIBS=	gdk_pixbuf		2.0	\
		gdk_pixbuf_xlib		2.0
CATEGORIES=	graphics

HOMEPAGE=	http://developer.gnome.org/arch/imaging/gdkpixbuf.html

MAINTAINER=	Tom Knienieder <tom@@knienieder.com>

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	${MASTER_SITE_GNOME:=sources/gdk-pixbuf/0.22/}

WANTLIB=	X11 Xau Xdmcp Xext Xi glib gmodule iconv intl m pthread-stubs \
		xcb z
LIB_DEPENDS=	jpeg.>=62::graphics/jpeg \
		png.>=2::graphics/png \
		tiff.>=35.::graphics/tiff \
		gtk.>=1.2,gdk.>=1.2::x11/gtk+

SEPARATE_BUILD=	simple
USE_X11=	Yes
USE_LIBTOOL=	Yes
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --disable-modules \
		 --disable-mmx \
		 --disable-gtk-doc \
		 --with-html-dir="${PREFIX}/share/doc"
CONFIGURE_ENV=  CPPFLAGS="-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		ac_cv_path_GNOME_CONFIG=no

.include <bsd.port.mk>
@


1.45
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/01/09 17:43:39 naddy Exp $
@


1.44
log
@fix "underquoted definition" warnings from newer aclocal and
regen some patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/11/28 21:36:26 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p8
d23 2
a24 1
WANTLIB=	X11 Xau Xdmcp Xext Xi glib gmodule iconv intl m z
@


1.43
log
@typo in @@pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/09/15 20:09:40 simon Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p7
@


1.42
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/06/05 14:48:06 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p6
@


1.41
log
@remove obsolete gnome subpackage; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/11/26 10:42:52 espie Exp $
d3 1
a3 1
COMMENT=	"GdkPixbuf graphics library"
@


1.40
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/11/13 11:20:24 steven Exp $
d3 1
a3 2
COMMENT-main=	"GdkPixbuf graphics library"
COMMENT-gnome=	"GdkPixbuf graphics library (GNOME Canvas)"
d5 2
a6 4
VERSION=	0.22.0
DISTNAME=	gdk-pixbuf-${VERSION}
PKGNAME-main=	${DISTNAME}p5
PKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}p0
d8 1
a8 3
		gdk_pixbuf_xlib		2.0	\
		gnomecanvaspixbuf	1.0

a19 1
WANTLIB=		iconv intl glib m X11 gmodule Xi Xext z
d23 6
d32 1
a32 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.52
d39 2
a40 23
		LDFLAGS="-L${LOCALBASE}/lib"

PSEUDO_FLAVORS=	no_gnome
FLAVOR?=

MULTI_PACKAGES=	-main
.if !${FLAVOR:L:Mno_gnome}
MULTI_PACKAGES+= -gnome
.endif

.if ${FLAVOR:L:Mno_gnome}
CONFIGURE_ENV+=	ac_cv_path_GNOME_CONFIG=no
.endif

LIB_DEPENDS+=	jpeg.>=62::graphics/jpeg \
		png.>=2::graphics/png \
		tiff.>=35.::graphics/tiff \
		gtk.>=1.2,gdk.>=1.2::x11/gtk+

LIB_DEPENDS-gnome= ${LIB_DEPENDS} \
		gnome.>=36,art_lgpl,gnomesupport,gnomeui::x11/gnome/libs \
		gdk_pixbuf.>=2::graphics/gdk-pixbuf
WANTLIB-gnome=	${WANTLIB} esd ungif ICE audiofile gdk_imlib SM
@


1.39
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/08/03 12:43:20 espie Exp $
d3 1
a3 1
COMMENT=	"GdkPixbuf graphics library"
d8 1
a8 1
PKGNAME=	${DISTNAME}p4
d45 1
a45 1
MULTI_PACKAGES=
a48 1
SUBPACKAGE?=
d59 2
a60 3
.if defined(PACKAGING)
. if ${SUBPACKAGE} == "-gnome"
LIB_DEPENDS+=	gnome.>=36,art_lgpl,gnomesupport,gnomeui::x11/gnome/libs \
d62 1
a62 7
WANTLIB+=	esd ungif ICE audiofile gdk_imlib SM
. endif
.else
. if ${MULTI_PACKAGES:M-gnome}
LIB_DEPENDS+=	gnome.>=36,art_lgpl,gnomesupport,gnomeui::x11/gnome/libs
. endif
.endif
@


1.38
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/01/22 10:38:55 steven Exp $
d30 1
@


1.37
log
@remove unneeded MODGNU_SHARED_LIBS and related hacks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/12/26 15:35:01 steven Exp $
d54 4
a57 4
LIB_DEPENDS+=	jpeg.62::graphics/jpeg \
		png.2::graphics/png \
		tiff.35.::graphics/tiff \
		gtk.1.2,gdk.1.2::x11/gtk+
d61 2
a62 2
LIB_DEPENDS+=	gnome.36,art_lgpl,gnomesupport,gnomeui::x11/gnome/libs \
		gdk_pixbuf.2::graphics/gdk-pixbuf
d67 1
a67 1
LIB_DEPENDS+=	gnome.36,art_lgpl,gnomesupport,gnomeui::x11/gnome/libs
@


1.36
log
@SHARED_LIBS and USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/11/21 20:20:53 naddy Exp $
d10 3
a12 9
SHARED_LIBS=		gdk_pixbuf		2.0	\
			gdk_pixbuf_xlib		2.0	\
			gnomecanvaspixbuf	1.0
MODGNU_SHARED_LIBS=	gdk_pixbuf		''	\
			gdk_pixbuf_xlib		''	\
			gnomecanvaspixbuf	''
LIBgdk_pixbuf_ALIAS=		realgdk_pixbuf
LIBgdk_pixbuf_xlib_ALIAS=	realgdk_pixbuf_xlib
LIBgnomecanvaspixbuf_ALIAS=	realgnomecanvaspixbuf
@


1.35
log
@SECURITY:
Fix
- double free() in BMP handler (CVE-2005-0891),
- endless loop (CVE-2005-2975) and
- integer overflows in XPM loader (CVE-2005-2976, CVE-2005-3186).

From Ubuntu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/09/16 09:51:27 espie Exp $
d8 12
a19 2
PKGNAME=	${DISTNAME}p3
PKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}
d36 1
@


1.34
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/01/18 12:30:57 alek Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
@


1.33
log
@Add/fix WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/09/19 23:41:32 brad Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.33.4.1
log
@MFC:
SECURITY:
Fix
- double free() in BMP handler (CVE-2005-0891),
- endless loop (CVE-2005-2975) and
- integer overflows in XPM loader (CVE-2005-2976, CVE-2005-3186).

From Ubuntu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/01/18 12:30:57 alek Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
@


1.33.2.1
log
@MFC:
SECURITY:
Fix
- double free() in BMP handler (CVE-2005-0891),
- endless loop (CVE-2005-2975) and
- integer overflows in XPM loader (CVE-2005-2976, CVE-2005-3186).

From Ubuntu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/01/18 12:30:57 alek Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
@


1.32
log
@fixes a DoS issue with the BMP decoder, integer overflow and heap-based
buffer overflow with the XPM decoder, and integer overflow with the ICO
decoder.

CAN-2004-0753, CAN-2004-0782, CAN-2004-0788
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/06/20 20:00:18 naddy Exp $
d21 1
d58 1
@


1.31
log
@make no_gnome flavor really ignore gnome
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/03/02 07:57:21 brad Exp $
d8 1
@


1.30
log
@AUTOCONF_NEW -> AUTOCONF_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/12/19 19:48:32 brad Exp $
d23 1
a23 1
SEPARATE_BUILD=	concurrent
d42 4
@


1.30.2.1
log
@fixes a DoS issue with the BMP decoder, integer overflow and heap-based
buffer overflow with the XPM decoder, and integer overflow with the ICO
decoder.

CAN-2004-0753, CAN-2004-0782, CAN-2004-0788
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/03/02 07:57:21 brad Exp $
a7 1
PKGNAME=	${DISTNAME}p1
@


1.29
log
@don't need to specify --enable-static, enabled by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/12/19 19:22:58 brad Exp $
d25 1
a25 1
AUTOCONF_NEW=	Yes
@


1.28
log
@remove bogus CONFIGURE_ARGS option
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2003/12/14 09:26:11 sturm Exp $
d27 1
a27 2
CONFIGURE_ARGS+= --enable-static \
		 --disable-modules \
@


1.27
log
@-gnome subpackage actually depends on the main package, also allows for
clean pkg_delete
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/05/12 04:47:26 brad Exp $
a57 4
.endif

.if ${MULTI_PACKAGES:M-gnome}
CONFIGURE_ARGS+= --with-gnome
@


1.26
log
@upgrade gdk-pixbuf to 0.22.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/01/19 23:22:26 brad Exp $
d51 2
a52 1
LIB_DEPENDS+=	gnome.36,art_lgpl,gnomesupport,gnomeui::x11/gnome/libs
@


1.26.2.1
log
@fixes a DoS issue with the BMP decoder, integer overflow and heap-based
buffer overflow with the XPM decoder, and integer overflow with the ICO
decoder.

CAN-2004-0753, CAN-2004-0782, CAN-2004-0788
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/05/12 04:47:26 brad Exp $
a7 1
PKGNAME=	${DISTNAME}p1
@


1.25
log
@bump the GNOME sub-package PKGNAME too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/01/18 23:15:43 brad Exp $
d6 1
a6 1
VERSION=	0.21.0
d8 1
a8 2
PKGNAME=	${DISTNAME}p1
PKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}p1
d21 1
a21 1
MASTER_SITES=	${MASTER_SITE_GNOME:=sources/gdk-pixbuf/0.21/}
@


1.24
log
@Move headers path back to the intended spot, it was just too easy
to have them picked up in the current spot instead of Gtk+2 headers.
This was originally done to prevent potential breakage from an upgrade
when the headers path was changed to prevent this kind of problem in
the first place but it looks like all ports deal with this gracefully
since they use "gdk-pixbuf-config --cflags" to find the path.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/11/14 21:03:41 marcm Exp $
d9 1
a9 1
PKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}
d16 1
@


1.23
log
@Update to 0.21, from MAINTAINER with libtool/ELF fix from me.

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/11/13 16:05:49 brad Exp $
d8 1
d36 1
a36 1
FLAVOR?=	
@


1.22
log
@fix distsite URL now that the site has undergone a reorganization.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/08/25 22:30:40 brad Exp $
d6 1
a6 1
VERSION=	0.17.0
d20 1
a20 1
MASTER_SITES=	${MASTER_SITE_GNOME:=sources/gdk-pixbuf/0.17/}
@


1.21
log
@share/html/gdk-pixbuf -> share/doc/gdk-pixbuf
--
Brought to my attention by: espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/08/08 12:00:47 naddy Exp $
d20 1
a20 1
MASTER_SITES=	${MASTER_SITE_GNOME:=unstable/sources/gdk-pixbuf/}
@


1.20
log
@use pseudo flavor; ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2002/05/31 02:41:44 brad Exp $
d29 2
a30 1
		 --with-html-dir="${PREFIX}/share/html"
@


1.19
log
@put gdk-pixbuf 0.17.0 back in the tree.
--
Workaround for the libtool relinking problem thanks to Marc Matteo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2002/05/27 02:11:55 brad Exp $
d8 1
a8 2
FULLPKGNAME=	${DISTNAME}
FULLPKGNAME-gnome= gdk-pixbuf-gnome-${VERSION}
a9 2
NEED_VERSION=	1.525
MASTER_SITES=	${MASTER_SITE_GNOME:=unstable/sources/gdk-pixbuf/}
d20 2
d33 1
a33 1
FLAVORS=	no_gnome
@


1.18
log
@revert back to gdk-pixbuf 0.10.1 until I can figure out what the f%#k
is wrong with libtool. this worked just fine and then I updated my powerpc
box to more recent -current and I was able to reproduce the problem
as reported to me by a handful of people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/05/13 23:31:24 espie Exp $
d6 1
a6 1
VERSION=	0.10.1
d8 2
a9 2
FULLPKGNAME=	${DISTNAME}p1
FULLPKGNAME-gnome= gdk-pixbuf-gnome-${VERSION}p1
a22 4
PATCH_LIST=	${PORTSDIR}/infrastructure/patches/patch-lt1.3.4-ltconfig \
		${PORTSDIR}/infrastructure/patches/patch-lt1.3.4-ltmain_sh \
		patch-*

d24 2
a25 1
CONFIGURE_STYLE= gnu
d29 2
a30 1
		 --disable-mmx
a60 5

pre-patch:
	@@find ${WRKSRC} -name "Makefile.in" | xargs perl -pi -e \
		's|\$$\(datadir\)/gnome/|\$$\(datadir\)/|g ; \
		 s|\$$\(datadir\)/aclocal|\$$\(prefix\)/share/aclocal|g'
@


1.17
log
@PKGNAME -> FULLPKGNAME
--
Problem pointed out by: Jacob Meuser <jakemsr@@jakemsr.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/05/26 17:18:10 brad Exp $
d6 1
a6 1
VERSION=	0.17.0
d8 2
a9 2
FULLPKGNAME=	${DISTNAME}
FULLPKGNAME-gnome= gdk-pixbuf-gnome-${VERSION}
d23 4
d28 1
a28 2
CONFIGURE_STYLE= autoconf
AUTOCONF_NEW=	Yes
d32 1
a32 2
		 --disable-mmx \
		 --with-html-dir="${PREFIX}/share/html"
d63 5
@


1.16
log
@upgrade gdk-pixbuf to 0.17.0
--
Mostly from MAINTAINER with libtool and a few other fixes from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/05/13 23:31:24 espie Exp $
d8 2
a9 1
PKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}
@


1.15
log
@More MASTER_SITES_SUBDIR out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/04/07 17:25:36 brad Exp $
d6 1
a6 1
VERSION=	0.10.1
d8 1
a8 2
PKGNAME=	${DISTNAME}p1
PKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}p1
d10 1
a10 1
NEED_VERSION=	1.500
a21 4
PATCH_LIST=	${PORTSDIR}/infrastructure/patches/patch-lt1.3.4-ltconfig \
		${PORTSDIR}/infrastructure/patches/patch-lt1.3.4-ltmain_sh \
		patch-*

d23 2
a24 1
CONFIGURE_STYLE= gnu
d28 3
a30 2
		 --disable-mmx
CONFIGURE_ENV=  CPPFLAGS="-I${LOCALBASE}/include" \
a59 5

pre-patch:
	@@find ${WRKSRC} -name "Makefile.in" | xargs perl -pi -e \
		's|\$$\(datadir\)/gnome/|\$$\(datadir\)/|g ; \
		 s|\$$\(datadir\)/aclocal|\$$\(prefix\)/share/aclocal|g'
@


1.14
log
@change the way dependencies are checked to the way XMMS does it.
--
Patch from: Marc Matteo <marcm@@lectroid.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/03/26 04:14:34 brad Exp $
d12 1
a12 2
MASTER_SITES=	${MASTER_SITE_GNOME}
MASTER_SITE_SUBDIR= unstable/sources/gdk-pixbuf
@


1.13
log
@oops, fix the registered dependencies, gnome-libs was being registered for
the main package which is wrong and fix the PKGNAME for the -gnome
sub-package as well.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/03/23 06:22:17 brad Exp $
d51 2
a52 1
.if !defined(PACKAGING) || ${SUBPACKAGE} == "-gnome"
d54 5
a58 4
.endif

.if defined(PACKAGING) && ${SUBPACKAGE} == "-gnome"
LIB_DEPENDS+=	gdk_pixbuf.2::graphics/gdk-pixbuf
a62 2
.else
CONFIGURE_ARGS+= --without-gnome
@


1.12
log
@change gnome FLAVOR to a sub-package to remove one real pain when doing bulk
builds. adds a no_gnome pseudo FLAVOR to disable the sub-package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/02/25 18:39:41 brad Exp $
a6 2
FULLPKGNAME=	${DISTNAME}p1
FULLPKGNAME-gnome=	gdk-pixbuf-gnome-${VERSION}
d8 2
d51 1
a51 2
.if ${SUBPACKAGE} == "" && ${FLAVOR} != "no_gnome" || \
	${SUBPACKAGE} == "-gnome"
@


1.11
log
@- remove some unnecessary patches
- when trying to remove lib/gdk-pixbuf deal with it in a more graceful
manner if the user has added some files to the directory
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/12/10 21:29:16 naddy Exp $
d3 2
a4 1
COMMENT=	"replacement library for Imlib"
d6 4
a9 2
PKGNAME=	${DISTNAME}p1
DISTNAME=	gdk-pixbuf-0.10.1
a16 8
LIB_DEPENDS=	jpeg.62::graphics/jpeg \
		png.2::graphics/png \
		tiff.35.::graphics/tiff \
		gtk.1.2,gdk.1.2::x11/gtk+

FLAVORS=	gnome
FLAVOR?=	

d32 2
a33 1
		 --disable-modules
d37 16
a52 1
.if ${FLAVOR:L:Mgnome}
d54 7
a71 7

.if ${FLAVOR:L:Mgnome} && !defined(NO_SHARED_LIBS)
SED_PLIST+=-e '/%%SHARED-gnome%%/r${PKGDIR}/PFRAG.gnome.shared' -e '//d'
.elif ${FLAVOR:L:Mgnome} && defined(NO_SHARED_LIBS) && \
	${NO_SHARED_LIBS:L} == "yes"
SED_PLIST+=-e '/%%SHARED-gnome%%/d'
.endif
@


1.10
log
@* Fix list of required libraries in gdk_pixbufConf.sh; from Nils
  Nordman <nino@@nforced.com>.
* distinfo
* Use in-tree libtool patches.
ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/10/24 12:19:22 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.475
d14 2
a15 1
LIB_DEPENDS=	png.2::graphics/png \
d35 3
a37 1
CONFIGURE_ARGS= ${CONFIGURE_SHARED} --enable-static --disable-modules
@


1.9
log
@full lib depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/09/14 14:41:30 todd Exp $
d5 1
d28 4
a51 1
# From PostgreSQL port Makefile.
a57 2


@


1.8
log
@crank NEED_VERSION= because these require current
use ${HOMEPAGE} in pkg/DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/09/14 03:41:29 heko Exp $
d7 1
a7 1
NEED_VERSION=	1.455
d15 1
a15 1
		gtk.1.2::x11/gtk+
d34 1
a34 1
LIB_DEPENDS+=	gnome.36::x11/gnome/libs
@


1.7
log
@o Remove duplicate FLAVORS= and FLAVOR?= declaration.
o Combine two .if ${FLAVOR}s into one.
o Pass --without-gnome if not building the gnome flavor to be
  on the safe side.
o Only include gnome shared libraries in the final PLIST if
  we're on a shared arch.
o Remove gnome stuff from default PLIST and PFRAG.shared.
ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/09/01 02:33:59 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.435
@


1.6
log
@add gnome flavor, required by gnome
@
text
@a34 6
.endif 

FLAVORS= gnome
FLAVOR?=

.if ${FLAVOR:L} == "gnome"
d36 2
d46 10
@


1.5
log
@- use MASTER_SITE_GNOME
- remove redundant dependency entry
- sync libtool patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/05/24 02:27:53 kevlo Exp $
d17 3
d32 11
@


1.4
log
@Bump major rev in png dependeny entries after upgrade of png:
png.1 -> png.2
--
Ok'd by: brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/04/01 20:18:06 naddy Exp $
d3 1
a3 1
COMMENT=	"replacement library for imlib"
d7 3
a9 2
NEED_VERSION=	1.378
MASTER_SITES=	ftp://ftp.gnome.org/pub/GNOME/unstable/sources/gdk-pixbuf/
a13 1
		jpeg.62::graphics/jpeg \
@


1.3
log
@Sync libtool, put loaders back into lib; wilfried@@ and me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/03/27 11:45:07 naddy Exp $
d12 1
a12 1
LIB_DEPENDS=	png.1::graphics/png \
@


1.2
log
@Update to 0.10.1.
From Couderc Damien <couderc.damien@@wanadoo.fr>.
ok MAINTAINER, obecian@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/12/26 12:52:18 reinhard Exp $
d7 1
a7 1
NEED_VERSION=	1.346
d26 1
a26 2
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --enable-static 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/09/10 11:30:35 brad Exp $
d3 1
a3 1
DISTNAME=	gdk-pixbuf-0.9.0
@


1.1.1.1
log
@The GdkPixbuf library is a replacement for Imlib. GdkPixbuf provides
the following: a basic data structure to provide reference-counted images,
functions to load images synchronously from disk or progressively from
arbitrary data buffers, and convenience functions to transform pixbufs
and render them to drawables.

From: Tom Knienieder <tom@@knienieder.com>
@
text
@@
