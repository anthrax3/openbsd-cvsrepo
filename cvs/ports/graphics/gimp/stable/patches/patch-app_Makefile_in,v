head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.2
	OPENBSD_6_2_BASE:1.5
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2017.06.01.22.26.08;	author giovanni;	state Exp;
branches;
next	1.4;
commitid	XGDhmQeONUu884IU;

1.4
date	2017.05.04.11.46.39;	author espie;	state Exp;
branches;
next	1.3;
commitid	ZypuK4DHjQorLHio;

1.3
date	2007.12.20.22.54.28;	author kili;	state dead;
branches;
next	1.2;

1.2
date	2007.07.01.15.42.17;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2006.09.26.21.36.39;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to 2.8.22
hints and ok tb@@
@
text
@$OpenBSD: patch-app_Makefile_in,v 1.4 2017/05/04 11:46:39 espie Exp $
Pass linker flags without support from compiler

Index: app/Makefile.in
--- app/Makefile.in.orig
+++ app/Makefile.in
@@@@ -728,33 +728,33 @@@@ INCLUDES = \
 
 # FIXME: core should not depend on xcf
 workaround_that_core_depends_on_xcf = \
-	-u $(SYMPREFIX)xcf_init
+	-Wl,-u,$(SYMPREFIX)xcf_init
 
 
 # FIXME: core should not depend on pdb
 workaround_that_core_depends_on_pdb = \
-	-u $(SYMPREFIX)internal_procs_init		\
-	-u $(SYMPREFIX)gimp_plug_in_manager_restore
+	-Wl,-u,$(SYMPREFIX)internal_procs_init		\
+	-Wl,-u,$(SYMPREFIX)gimp_plug_in_manager_restore
 
 
 # FIXME: plug-in should not depend on pdb
 workaround_that_plug_in_depends_on_pdb = \
-	-u $(SYMPREFIX)gimp_pdb_compat_param_spec
+	-Wl,-u,$(SYMPREFIX)gimp_pdb_compat_param_spec
 
 
 # FIXME: file should not depend on plug-in
 workaround_that_file_depends_on_plug_in = \
-	-u $(SYMPREFIX)plug_in_icc_profile_apply_rgb	\
-	-u $(SYMPREFIX)gimp_image_map_config_get_type
+	-Wl,-u,$(SYMPREFIX)plug_in_icc_profile_apply_rgb	\
+	-Wl,-u,$(SYMPREFIX)gimp_image_map_config_get_type
 
 
 # core, vectors and gegl are on the same architectural layer, prevent
 # the linker from panicing
 calm_down_linker = \
-	-u $(SYMPREFIX)gimp_vectors_undo_get_type	\
-	-u $(SYMPREFIX)gimp_vectors_mod_undo_get_type	\
-	-u $(SYMPREFIX)gimp_vectors_prop_undo_get_type	\
-	-u $(SYMPREFIX)gimp_curve_map_pixels
+	-Wl,-u,$(SYMPREFIX)gimp_vectors_undo_get_type	\
+	-Wl,-u,$(SYMPREFIX)gimp_vectors_mod_undo_get_type	\
+	-Wl,-u,$(SYMPREFIX)gimp_vectors_prop_undo_get_type	\
+	-Wl,-u,$(SYMPREFIX)gimp_curve_map_pixels
 
 AM_LDFLAGS = \
 	$(munix)					\
@


1.4
log
@clang doesn't pass -u thru. Fixes build
@
text
@d1 1
a1 1
$OpenBSD$
d7 1
a7 1
@@@@ -653,33 +653,33 @@@@ INCLUDES = \
@


1.3
log
@
Update to 2.4.3.
From (and based on previous 2.4.1 submission) Giovanni Bechis.
sse enabled and tested for amd64 by fgsch@@.

ok fgsch@@
@
text
@d1 50
a50 11
$OpenBSD: patch-app_Makefile_in,v 1.2 2007/07/01 15:42:17 steven Exp $
--- app/Makefile.in.orig	Sat May 26 16:12:22 2007
+++ app/Makefile.in	Wed Jun 27 08:39:08 2007
@@@@ -555,6 +555,7 @@@@ INCLUDES = \
 
 gimp_2_2_LDFLAGS = $(mwindows)
 gimp_2_2_LDADD = \
+	-pthread			\
 	gui/libappgui.a			\
 	actions/libappactions.a		\
 	dialogs/libappdialogs.a		\
@


1.2
log
@maintenance update to 2.2.15

ok simon@@
@
text
@d1 1
a1 1
$OpenBSD: patch-app_Makefile_in,v 1.1 2006/09/26 21:36:39 kurt Exp $
@


1.1
log
@link gimp with -pthread so it can dlopen threaded shlibs. fixes gimp when
used under gnome. From Mikolaj Kucharski <eth0 at o2.pl>
@
text
@d1 4
a4 4
$OpenBSD$
--- app/Makefile.in.orig	Sun Sep  3 19:45:11 2006
+++ app/Makefile.in	Sun Sep  3 19:46:53 2006
@@@@ -554,6 +554,7 @@@@ INCLUDES = \
@

