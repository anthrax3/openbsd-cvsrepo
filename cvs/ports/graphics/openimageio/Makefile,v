head	1.24;
access;
symbols
	OPENBSD_6_1:1.23.0.2
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.20.0.2
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.10.0.2
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.7.0.2
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	pascal_20120905:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2017.04.10.11.46.21;	author sthen;	state Exp;
branches;
next	1.23;
commitid	BLsh88fJB8thZTwY;

1.23
date	2016.10.28.02.15.51;	author jca;	state Exp;
branches;
next	1.22;
commitid	wpYpVGoYgPVT4IYc;

1.22
date	2016.08.15.09.24.45;	author pascal;	state Exp;
branches;
next	1.21;
commitid	Ngd7DSNl5jli7HC1;

1.21
date	2016.08.08.14.14.01;	author pascal;	state Exp;
branches;
next	1.20;
commitid	SAsdOUlmT2DrbxUA;

1.20
date	2016.07.06.21.30.41;	author sthen;	state Exp;
branches;
next	1.19;
commitid	AkHXk7UmsfLjy41Y;

1.19
date	2016.05.07.12.40.57;	author pascal;	state Exp;
branches;
next	1.18;
commitid	Fec0PsLcTwj1Q99H;

1.18
date	2016.03.20.16.12.24;	author naddy;	state Exp;
branches;
next	1.17;
commitid	guiZq8cnNbVyyHzx;

1.17
date	2015.10.08.12.02.03;	author jasper;	state Exp;
branches;
next	1.16;
commitid	Fd81pQbB9Yvd8TB7;

1.16
date	2015.10.04.12.59.15;	author pascal;	state Exp;
branches;
next	1.15;
commitid	Zut6MyPl6AninB1D;

1.15
date	2015.05.19.15.41.47;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	dqNQNmxscwNmIfEN;

1.14
date	2015.05.12.11.58.51;	author pascal;	state Exp;
branches;
next	1.13;
commitid	6cvy9gFa6mLthO0i;

1.13
date	2015.04.05.13.31.14;	author sthen;	state Exp;
branches;
next	1.12;
commitid	1hQJnDR1GYYQ0MPE;

1.12
date	2014.12.23.12.34.42;	author dcoppa;	state Exp;
branches;
next	1.11;
commitid	8HsIkCJygydwqLSH;

1.11
date	2014.08.25.16.18.07;	author kirby;	state Exp;
branches;
next	1.10;
commitid	vagZ6hxSZfxqUEyg;

1.10
date	2014.07.23.08.38.51;	author pascal;	state Exp;
branches;
next	1.9;
commitid	2ARfKCkTSorWjPLI;

1.9
date	2014.04.02.09.56.01;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2014.03.25.10.37.39;	author pascal;	state Exp;
branches;
next	1.7;

1.7
date	2013.08.07.21.31.58;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2013.05.18.22.00.52;	author pascal;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.11.11.10.54;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2013.01.18.08.12.33;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2013.01.09.23.24.08;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.12.21.17.59.00;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2012.05.09.12.42.06;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.05.09.12.42.06;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.24
log
@use LIBCXX
@
text
@# $OpenBSD: Makefile,v 1.23 2016/10/28 02:15:51 jca Exp $

BROKEN-powerpc =	undefined reference to __atomic_fetch_add_8

COMMENT =		library for reading and writing images

GH_ACCOUNT = 		OpenImageIO
GH_PROJECT = 		oiio
V =			1.6.16
GH_TAGNAME =		Release-$V
DISTNAME =		openimageio-${V}

SHARED_LIBS +=		OpenImageIO		4.0 # 1.0
SHARED_LIBS +=  	OpenImageIO_Util	1.0 # 1.5

CATEGORIES =		graphics devel

HOMEPAGE =		https://sites.google.com/site/openimageio/

MAINTAINER =		Pascal Stumpf <pascal@@stumpf.co>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += GL GLEW GLU Half Iex IlmImf IlmThread Imath OpenColorIO
WANTLIB += QtGui QtOpenGL avcodec avformat avutil boost_filesystem-mt
WANTLIB += boost_python-mt boost_regex-mt boost_system-mt boost_thread-mt
WANTLIB += boost_atomic-mt boost_chrono-mt boost_date_time-mt
WANTLIB += c freetype gif jpeg m openjpeg png pthread ${MODPY_WANTLIB}
WANTLIB += raw_r ${LIBCXX} swscale tiff webp z

MODULES =		devel/cmake \
			lang/python \
			x11/qt4 \
			gcc4

MODGCC4_ARCHS =		*
MODGCC4_LANGS =		c c++

BUILD_DEPENDS =		textproc/txt2man

LIB_DEPENDS =		devel/boost \
			graphics/openjpeg \
			graphics/tiff \
			graphics/libwebp \
			graphics/glew \
			graphics/ilmbase \
			graphics/openexr \
			graphics/giflib \
			graphics/opencolorio \
			graphics/ffmpeg \
			graphics/libraw

CONFIGURE_ARGS +=	-DPYLIB_INSTALL_DIR="lib/python${MODPY_VERSION}/site-packages" \
			-DUSE_OPENCV=OFF

CXXFLAGS +=		-pthread
.if ${MACHINE_ARCH} == "i386"
CXXFLAGS +=		-march=i686
.endif
WRKDIST =		${WRKDIR}/oiio-Release-$V

pre-configure:
	sed -i 's,share/man,man,' ${WRKSRC}/CMakeLists.txt

post-install:
	find ${PREFIX} -name '*.orig' -exec rm -f {} \;

.include <bsd.port.mk>
@


1.23
log
@Mark as broken on powerpc: undefined reference to __atomic_fetch_add_8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/08/15 09:24:45 pascal Exp $
d30 1
a30 1
WANTLIB += raw_r stdc++ swscale tiff webp z
@


1.22
log
@"Fix" on i386; this now requires 64-bit atomics.  Found by sthen@@.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.21 2016/08/08 14:14:01 pascal Exp $
@


1.21
log
@Update to OpenImageIO 1.6.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/07/06 21:30:41 sthen Exp $
d56 3
@


1.20
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/05/07 12:40:57 pascal Exp $
d7 1
a7 1
V =			1.5.20
a9 1
REVISION =		1
d11 2
a12 2
SHARED_LIBS +=		OpenImageIO		3.0 # 1.0
SHARED_LIBS +=  	OpenImageIO_Util	0.0 # 1.5
d32 5
a36 1
			x11/qt4
a52 1
			-DNOTHREADS=ON \
@


1.19
log
@Update my mail address.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/03/20 16:12:24 naddy Exp $
d10 1
a10 1
REVISION =		0
d27 1
@


1.18
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/10/08 12:02:03 jasper Exp $
d10 1
d19 1
a19 1
MAINTAINER =		Pascal Stumpf <Pascal.Stumpf@@cubes.de>
@


1.17
log
@sed -i
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.16 2015/10/04 12:59:15 pascal Exp $

SHARED_ONLY =		Yes
@


1.16
log
@Update to OIIO 1.5.20.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/05/19 15:41:47 ajacoutot Exp $
d57 1
a57 1
	perl -pi -e 's,share/man,man,' ${WRKSRC}/CMakeLists.txt
@


1.15
log
@textproc/txt2man gets picked up to create man pages if it's there at
configure time; so add it as a BUILD_DEPENDS.
Regen WANTLIB while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/05/12 11:58:51 pascal Exp $
d9 1
a9 1
V =			1.3.12
a11 1
REVISION =		1
d13 2
a14 1
SHARED_LIBS +=		OpenImageIO	2.0 # 1.0
d26 4
a29 4
WANTLIB += QtGui QtOpenGL boost_filesystem-mt boost_python-mt
WANTLIB += boost_regex-mt boost_system-mt boost_thread-mt c crypto
WANTLIB += freetype gif jpeg m openjpeg png pthread ${MODPY_WANTLIB}
WANTLIB += ssl stdc++ tiff webp z
d45 3
a47 1
			graphics/opencolorio
@


1.14
log
@Fix a bunch of my ports in preparation for decoupling CXXFLAGS from CFLAGS.

found by naddy@@ in a bulk with jsg@@'s diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/04/05 13:31:14 sthen Exp $
d12 1
a12 1
REVISION =		0
d25 2
a26 2
WANTLIB += GL GLEW GLU Half ICE Iex IlmImf IlmThread Imath OpenColorIO
WANTLIB += QtGui QtOpenGL SM X11 Xext boost_filesystem-mt boost_python-mt
d34 3
d53 3
@


1.13
log
@drop GH_COMMIT lines which are hidden behind GH_TAGNAME,
discussed with a few in the room.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/12/23 12:34:42 dcoppa Exp $
d48 1
a48 1
CFLAGS +=		-pthread
@


1.12
log
@
Fix compilation with freetype>=2.5.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/08/25 16:18:07 kirby Exp $
a10 1
GH_COMMIT = 		e7b18284770ea51d6d63d7caa4d93c7820620e19
@


1.11
log
@use GH_* vars.
ok pascal@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/07/23 08:38:51 pascal Exp $
d13 1
@


1.10
log
@Do not pick up OpenCV if found.

noticed by naddy@@ and sthen@@, ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/04/02 09:56:01 jasper Exp $
d7 2
d10 3
a12 2
DISTNAME =		Release-$V
PKGNAME =		openimageio-${V}
a29 3

MASTER_SITES =		https://github.com/OpenImageIO/oiio/archive/
DIST_SUBDIR =		openimageio
@


1.9
log
@use MODPY_WANTLIB instead of hardcoding python2.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/03/25 10:37:39 pascal Exp $
d45 2
a46 1
			-DNOTHREADS=ON
@


1.8
log
@Update to OpenImageIO 1.3.12, enable OCIO support.  Disable threads,
eliminating the need for atomic ops.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/08/07 21:31:58 naddy Exp $
d25 1
a25 1
WANTLIB += freetype gif jpeg m openjpeg png pthread python2.7
@


1.7
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/05/18 22:00:52 pascal Exp $
a5 2
BROKEN-hppa =		missing atomic ops
BROKEN-mips64 =		missing atomic ops
d7 2
a8 2
V =			1.1.10
DISTNAME =		Release-${V}
a9 1
REVISION =		0
d11 1
a11 1
SHARED_LIBS +=		OpenImageIO	1.0 # 1.0
d22 5
a26 5
WANTLIB += GL GLEW GLU Half ICE Iex IlmImf IlmThread Imath QtGui
WANTLIB += QtOpenGL SM X11 Xext boost_filesystem-mt boost_python-mt
WANTLIB += boost_regex-mt boost_system-mt boost_thread-mt c jpeg
WANTLIB += m openjpeg png pthread ${MODPY_WANTLIB} stdc++ tiff webp z
WANTLIB += freetype
d40 3
a42 1
			graphics/openexr
d44 2
a45 1
CONFIGURE_ARGS +=	-DPYLIB_INSTALL_DIR="lib/python${MODPY_VERSION}/site-packages"
a48 1
WRKSRC =		${WRKDIST}/src
@


1.6
log
@Update to openimageio 1.1.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/11 11:10:54 espie Exp $
d12 1
d18 1
a18 1
HOMEPAGE =		http://sites.google.com/site/openimageio/
@


1.5
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/01/18 08:12:33 jasper Exp $
d9 2
a10 4
MAJ =			1.0
V =			${MAJ}.4
REV =			513d0dd
DISTNAME =		OpenImageIO-oiio-Release-${V}-0-g${REV}
a11 1
REVISION =		0
d13 1
a13 1
SHARED_LIBS +=		OpenImageIO	0.0 # 1.0
d28 1
d30 2
a31 1
MASTER_SITES =		https://github.com/OpenImageIO/oiio/tarball/RB-${MAJ}/
d47 1
a47 1
WRKDIST =		${WRKDIR}/OpenImageIO-oiio-${REV}
d49 3
@


1.4
log
@mark broken on mips64 due to missing atomic ops.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/01/09 23:24:08 sthen Exp $
a25 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.3
log
@mark conflict: textproc/idiff, graphics/openimageio
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/12/21 17:59:00 landry Exp $
d7 1
@


1.2
log
@Mark as BROKEN-hppa: it never built there.
Probably missing atomic ops ?
src/include/tbb/machine/gcc_generic.h:97: error: '__TBB_atomic' does not name a type
src/include/tbb/machine/gcc_generic.h:99: error: '__TBB_machine_try_lock_byte' declared as an 'inline' variable
src/include/tbb/machine/gcc_generic.h:99: error: '__TBB_atomic_flag' was not declared in this scope
etc etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/05/09 12:42:06 pascal Exp $
d13 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@OpenImageIO is a library for reading and writing images, and a bunch
of related classes, utilities, and applications.  There is a
particular emphasis on formats and functionality used in professional,
large-scale animation and visual effects work for film.  OpenImageIO
is used extensively in animation and VFX studios all over the world,
and is also incorporated into several commercial products.

ok ajacoutot@@
@
text
@@
