head	1.4;
access;
symbols
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.2.0.6
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.4
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.1.1.2.0.2
	OPENBSD_2_5_BASE:1.1.1.2
	brad_1999-03-18:1.1.1.2
	brad:1.1.1
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	form_980514:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2001.10.03.03.09.31;	author brad;	state dead;
branches;
next	1.3;

1.3
date	2001.01.08.22.12.31;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.06.01.14.28.46;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	98.05.14.05.41.13;	author form;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.05.14.05.41.13;	author form;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	99.03.19.01.31.48;	author brad;	state Exp;
branches;
next	;


desc
@@


1.4
log
@upgrade to netpbm 9.19
@
text
@--- pbm/Makefile.orig	Sat Nov 20 09:59:20 1993
+++ pbm/Makefile	Mon Jan  8 15:24:26 2001
@@@@ -18,14 +18,16 @@@@
 TIFFDEF =       -DLIBTIFF
 #LDFLAGS =	-s
 LDFLAGS =	
-INSTALLBINARIES =	/usr/new/pbm
-INSTALLMANUALS1 =	/usr/man/man1
+INSTALLBINARIES =	$(PREFIX)/bin
+INSTALLMANUALS1 =	$(PREFIX)/man/man1
 SUFFIXMANUALS1 =	1
-INSTALLMANUALS3 =	/usr/man/man3
+INSTALLMANUALS3 =	$(PREFIX)/man/man3
 SUFFIXMANUALS3 =	3
-INSTALLMANUALS5 =	/usr/man/man5
+INSTALLMANUALS5 =	$(PREFIX)/man/man5
 SUFFIXMANUALS5 =	5
-MANCP =			cp
+MANCP =			install -c -m 0644
+INSTALLLIBS =		$(PREFIX)/lib
+INSTALLDEFS =		$(PREFIX)/include
 
 SHELL =		/bin/sh
 INCLUDE =	-I..
@@@@ -67,17 +69,19 @@@@
 MANUALS5 =	pbm
 
 
-#all:		binaries
-all:		merge
-#install:	install.bin
-install:	install.merge
+all:		binaries
+#all:		merge
+install:	install.bin
+#install:	install.merge
 
 
 binaries:	$(BINARIES)
 
 install.bin:	binaries
 	cd $(INSTALLBINARIES) ; rm -f $(BINARIES)
-	cp $(BINARIES) $(INSTALLBINARIES)
+	install -c -s -m 0755 $(BINARIES) $(INSTALLBINARIES)
+	install -c -m 0644 $(LIBPBM) $(INSTALLLIBS)
+	install -c -m 0644 $(DEFPBM) $(INSTALLDEFS)
 
 
 merge:		pbmmerge
@@@@ -184,4 +188,4 @@@@
 pbmtoepsi pbmtoepsi.o:		pbmtoepsi.c
 
 clean:
-	-rm -f *.o *.a *.cat *~ core $(BINARIES) pbmmerge
+	-rm -f *.o *.a *.cat *~ core *.core $(BINARIES) pbmmerge
@


1.3
log
@- install pbmplus.h header; requested by d@@ a long time ago.
- simplify Makefiles a bit while I'm here.
@
text
@@


1.2
log
@- Fix handling of comments in rgb.txt
- Add support for more xbm files
- Make this port respect CC and CFLAGS
@
text
@d2 2
a3 12
+++ pbm/Makefile	Tue Jun  1 09:26:48 1999
@@@@ -10,28 +10,31 @@@@
 # implied warranty.
 
 # Default values, usually overridden by top-level Makefile.
-CC =		cc
+#CC =		gcc
 #CC =		gcc -ansi -pedantic -fcombine-regs -fpcc-struct-return
 #CFLAGS =	-O
-CFLAGS =	-g
+#CFLAGS =	-O2
 #CFLAGS =	-g -O
d25 1
a25 9
 ALLCFLAGS =	$(CFLAGS) $(TIFFDEF) $(INCLUDE)
 LIBPBM =	libpbm.a
-DEFPBM =	pbm.h ../pbmplus.h
+DEFPBM =	pbm.h
+DEFPBMPLUS =	../pbmplus.h
 
 PORTBINARIES =	atktopbm brushtopbm cmuwmtopbm g3topbm \
 		icontopbm gemtopbm macptopbm mgrtopbm \
@@@@ -67,18 +70,19 @@@@
a43 1
-
d48 1
a49 41
 pbmmerge:	pbmmerge.c $(OBJECTS) $(LIBPBM)
@@@@ -107,15 +111,15 @@@@
 	done
 
 # Rule for plain programs.
-$(PORTBINARIES):	$(DEFPBM) $(LIBPBM)
+$(PORTBINARIES):	$(DEFPBM) $(DEFPBMPLUS) $(LIBPBM)
 	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c $(LIBPBM)
 
 # Rule for math-dependent programs.
-$(MATHBINARIES):	$(DEFPBM) $(LIBPBM)
+$(MATHBINARIES):	$(DEFPBM) $(DEFPBMPLUS) $(LIBPBM)
 	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c -lm $(LIBPBM)
 
 # Rule for objects.
-$(OBJECTS):	$(DEFPBM)
+$(OBJECTS):	$(DEFPBM) $(DEFPBMPLUS)
 	$(CC) $(ALLCFLAGS) "-Dmain=$*_main" -c $*.c
 
 # And library.
@@@@ -125,15 +129,15 @@@@
 	ar rc $(LIBPBM) libpbm1.o libpbm2.o libpbm3.o libpbm4.o libpbm5.o
 	-ranlib $(LIBPBM)
 
-libpbm1.o:	$(DEFPBM) ../version.h ../compile.h libpbm.h libpbm1.c
+libpbm1.o:	$(DEFPBM) $(DEFPBMPLUS) ../version.h ../compile.h libpbm.h libpbm1.c
 	$(CC) $(ALLCFLAGS) -c libpbm1.c
-libpbm2.o:	$(DEFPBM) libpbm.h libpbm2.c
+libpbm2.o:	$(DEFPBM) $(DEFPBMPLUS) libpbm.h libpbm2.c
 	$(CC) $(ALLCFLAGS) -c libpbm2.c
-libpbm3.o:	$(DEFPBM) libpbm.h libpbm3.c
+libpbm3.o:	$(DEFPBM) $(DEFPBMPLUS) libpbm.h libpbm3.c
 	$(CC) $(ALLCFLAGS) -c libpbm3.c
-libpbm4.o:	$(DEFPBM) libpbm.h libpbm4.c
+libpbm4.o:	$(DEFPBM) $(DEFPBMPLUS) libpbm.h libpbm4.c
 	$(CC) $(ALLCFLAGS) -c libpbm4.c
-libpbm5.o:	$(DEFPBM) pbmfont.h libpbm5.c
+libpbm5.o:	$(DEFPBM) $(DEFPBMPLUS) pbmfont.h libpbm5.c
 	$(CC) $(ALLCFLAGS) -c libpbm5.c
 
 # Other dependencies.
@


1.1
log
@Initial revision
@
text
@d1 114
a114 66
*** pnm/Makefile.orig	Mon Jan 31 23:47:32 1994
--- pnm/Makefile	Thu May 14 12:01:28 1998
***************
*** 60,69 ****
  		pnmcut pnmdepth pnmenlarge pnmfile pnmflip pnmhistmap \
  		pnminvert pnmnoraw pnmpad pnmpaste \
  		pnmtile pnmtoddif pnmtofits pnmtops pnmtorast \
! 		pnmtosgi pnmtosir pnmtoxwd \
! 		rasttopnm sgitopnm sirtopnm xwdtopnm zeisstopnm
  MATHBINARIES =	pnmgamma pnmnlfilt pnmrotate pnmscale pnmshear
! BINARIES =      $(PORTBINARIES) $(MATHBINARIES) $(TIFFBINARIES)
  SCRIPTS =	anytopnm pnmindex pnmmargin pnmsmooth pstopnm
  
  PORTOBJECTS =	fitstopnm.o giftopnm.o \
--- 60,70 ----
  		pnmcut pnmdepth pnmenlarge pnmfile pnmflip pnmhistmap \
  		pnminvert pnmnoraw pnmpad pnmpaste \
  		pnmtile pnmtoddif pnmtofits pnmtops pnmtorast \
! 		pnmtorle pnmtosgi pnmtosir pnmtoxwd \
! 		rasttopnm rletopnm sgitopnm sirtopnm xwdtopnm zeisstopnm
  MATHBINARIES =	pnmgamma pnmnlfilt pnmrotate pnmscale pnmshear
! PNGBINARIES =	pngtopnm pnmtopng
! BINARIES =      $(PORTBINARIES) $(MATHBINARIES) $(PNGBINARIES) $(TIFFBINARIES)
  SCRIPTS =	anytopnm pnmindex pnmmargin pnmsmooth pstopnm
  
  PORTOBJECTS =	fitstopnm.o giftopnm.o \
***************
*** 74,80 ****
  		pnmtosgi.o pnmtosir.o pnmtoxwd.o \
  		rasttopnm.o sgitopnm.o sirtopnm.o xwdtopnm.o zeisstopnm.o \
  		pnmgamma.o pnmnlfilt.o pnmrotate.o pnmscale.o pnmshear.o
! OBJECTS =	$(PORTOBJECTS) $(TIFFOBJECTS)
  
  MANUALS1 =	$(BINARIES) $(SCRIPTS)
  MANUALS3 =	libpnm
--- 75,81 ----
  		pnmtosgi.o pnmtosir.o pnmtoxwd.o \
  		rasttopnm.o sgitopnm.o sirtopnm.o xwdtopnm.o zeisstopnm.o \
  		pnmgamma.o pnmnlfilt.o pnmrotate.o pnmscale.o pnmshear.o
! OBJECTS =	$(PORTOBJECTS)
  
  MANUALS1 =	$(BINARIES) $(SCRIPTS)
  MANUALS3 =	libpnm
***************
*** 128,134 ****
  
  
  # Rules for plain programs.
! $(PORTBINARIES) $(TIFFBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) $(TIFFLIB)
  	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) $(TIFFLIB)
  
  # Rule for math-dependent programs.
--- 129,141 ----
  
  
  # Rules for plain programs.
! $(PORTBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
! 	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
! 
! $(PNGBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
! 	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) -L/usr/local/lib -lpng -lz
! 
! $(TIFFBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
  	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) $(TIFFLIB)
  
  # Rule for math-dependent programs.
@


1.1.1.1
log
@netpbm-94.3.1, image converter of many formats
@
text
@@


1.1.1.2
log
@add netpbm port
@
text
@d1 66
a66 114
--- pbm/Makefile.orig	Sat Nov 20 15:59:20 1993
+++ pbm/Makefile	Mon Jan 11 00:18:43 1999
@@@@ -10,28 +10,31 @@@@
 # implied warranty.
 
 # Default values, usually overridden by top-level Makefile.
-CC =		cc
+CC =		gcc
 #CC =		gcc -ansi -pedantic -fcombine-regs -fpcc-struct-return
 #CFLAGS =	-O
-CFLAGS =	-g
+CFLAGS =	-O2
 #CFLAGS =	-g -O
 TIFFDEF =       -DLIBTIFF
 #LDFLAGS =	-s
 LDFLAGS =	
-INSTALLBINARIES =	/usr/new/pbm
-INSTALLMANUALS1 =	/usr/man/man1
+INSTALLBINARIES =	$(PREFIX)/bin
+INSTALLMANUALS1 =	$(PREFIX)/man/man1
 SUFFIXMANUALS1 =	1
-INSTALLMANUALS3 =	/usr/man/man3
+INSTALLMANUALS3 =	$(PREFIX)/man/man3
 SUFFIXMANUALS3 =	3
-INSTALLMANUALS5 =	/usr/man/man5
+INSTALLMANUALS5 =	$(PREFIX)/man/man5
 SUFFIXMANUALS5 =	5
-MANCP =			cp
+MANCP =			install -c -m 0644
+INSTALLLIBS =		$(PREFIX)/lib
+INSTALLDEFS =		$(PREFIX)/include
 
 SHELL =		/bin/sh
 INCLUDE =	-I..
 ALLCFLAGS =	$(CFLAGS) $(TIFFDEF) $(INCLUDE)
 LIBPBM =	libpbm.a
-DEFPBM =	pbm.h ../pbmplus.h
+DEFPBM =	pbm.h
+DEFPBMPLUS =	../pbmplus.h
 
 PORTBINARIES =	atktopbm brushtopbm cmuwmtopbm g3topbm \
 		icontopbm gemtopbm macptopbm mgrtopbm \
@@@@ -67,18 +70,19 @@@@
 MANUALS5 =	pbm
 
 
-#all:		binaries
-all:		merge
-#install:	install.bin
-install:	install.merge
+all:		binaries
+#all:		merge
+install:	install.bin
+#install:	install.merge
 
 
 binaries:	$(BINARIES)
 
 install.bin:	binaries
 	cd $(INSTALLBINARIES) ; rm -f $(BINARIES)
-	cp $(BINARIES) $(INSTALLBINARIES)
-
+	install -c -s -m 0755 $(BINARIES) $(INSTALLBINARIES)
+	install -c -m 0644 $(LIBPBM) $(INSTALLLIBS)
+	install -c -m 0644 $(DEFPBM) $(INSTALLDEFS)
 
 merge:		pbmmerge
 pbmmerge:	pbmmerge.c $(OBJECTS) $(LIBPBM)
@@@@ -107,15 +111,15 @@@@
 	done
 
 # Rule for plain programs.
-$(PORTBINARIES):	$(DEFPBM) $(LIBPBM)
+$(PORTBINARIES):	$(DEFPBM) $(DEFPBMPLUS) $(LIBPBM)
 	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c $(LIBPBM)
 
 # Rule for math-dependent programs.
-$(MATHBINARIES):	$(DEFPBM) $(LIBPBM)
+$(MATHBINARIES):	$(DEFPBM) $(DEFPBMPLUS) $(LIBPBM)
 	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@@ $@@.c -lm $(LIBPBM)
 
 # Rule for objects.
-$(OBJECTS):	$(DEFPBM)
+$(OBJECTS):	$(DEFPBM) $(DEFPBMPLUS)
 	$(CC) $(ALLCFLAGS) "-Dmain=$*_main" -c $*.c
 
 # And library.
@@@@ -125,15 +129,15 @@@@
 	ar rc $(LIBPBM) libpbm1.o libpbm2.o libpbm3.o libpbm4.o libpbm5.o
 	-ranlib $(LIBPBM)
 
-libpbm1.o:	$(DEFPBM) ../version.h ../compile.h libpbm.h libpbm1.c
+libpbm1.o:	$(DEFPBM) $(DEFPBMPLUS) ../version.h ../compile.h libpbm.h libpbm1.c
 	$(CC) $(ALLCFLAGS) -c libpbm1.c
-libpbm2.o:	$(DEFPBM) libpbm.h libpbm2.c
+libpbm2.o:	$(DEFPBM) $(DEFPBMPLUS) libpbm.h libpbm2.c
 	$(CC) $(ALLCFLAGS) -c libpbm2.c
-libpbm3.o:	$(DEFPBM) libpbm.h libpbm3.c
+libpbm3.o:	$(DEFPBM) $(DEFPBMPLUS) libpbm.h libpbm3.c
 	$(CC) $(ALLCFLAGS) -c libpbm3.c
-libpbm4.o:	$(DEFPBM) libpbm.h libpbm4.c
+libpbm4.o:	$(DEFPBM) $(DEFPBMPLUS) libpbm.h libpbm4.c
 	$(CC) $(ALLCFLAGS) -c libpbm4.c
-libpbm5.o:	$(DEFPBM) pbmfont.h libpbm5.c
+libpbm5.o:	$(DEFPBM) $(DEFPBMPLUS) pbmfont.h libpbm5.c
 	$(CC) $(ALLCFLAGS) -c libpbm5.c
 
 # Other dependencies.
@@@@ -184,4 +188,4 @@@@
 pbmtoepsi pbmtoepsi.o:		pbmtoepsi.c
 
 clean:
-	-rm -f *.o *.a *.cat *~ core $(BINARIES) pbmmerge
+	-rm -f *.o *.a *.cat *~ core *.core $(BINARIES) pbmmerge
@

