head	1.2;
access;
symbols
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.10
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.8
	OPENBSD_2_8_BASE:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.6
	OPENBSD_2_7_BASE:1.1.1.1
	OPENBSD_2_6:1.1.1.1.0.4
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.2
	OPENBSD_2_5_BASE:1.1.1.1
	brad_1999-03-18:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2001.10.03.03.09.31;	author brad;	state dead;
branches;
next	1.1;

1.1
date	99.03.19.01.32.04;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.03.19.01.32.04;	author brad;	state Exp;
branches;
next	;


desc
@@


1.2
log
@upgrade to netpbm 9.19
@
text
@--- pnm/pnmtotiff.c.orig	Thu Jan 27 17:59:25 1994
+++ pnm/pnmtotiff.c	Sun Jan 10 23:48:40 1999
@@@@ -196,6 +196,7 @@@@
 	    samplesperpixel = 1;
 	    bitspersample = pm_maxvaltobits( maxval );
 	    photometric = PHOTOMETRIC_MINISBLACK;
+	    i = 8 / bitspersample;
 	    bytesperrow = ( cols + i - 1 ) / i;
 	    }
 	else
@@@@ -276,20 +277,20 @@@@
 		for ( col = 0, xP = xels[row], tP = buf;
 		      col < cols; ++col, ++xP )
 		    {
-		    register unsigned char s;
+		    register xelval s;
 
 		    s = PPM_GETR( *xP );
 		    if ( maxval != 255 )
-			s = (long) s * 255 / maxval;
-		    *tP++ = s;
+			s = s * 255 / maxval;
+		    *tP++ = (unsigned char)s;
 		    s = PPM_GETG( *xP );
 		    if ( maxval != 255 )
-			s = (long) s * 255 / maxval;
-		    *tP++ = s;
+			s = s * 255 / maxval;
+		    *tP++ = (unsigned char)s;
 		    s = PPM_GETB( *xP );
 		    if ( maxval != 255 )
-			s = (long) s * 255 / maxval;
-		    *tP++ = s;
+			s = s * 255 / maxval;
+		    *tP++ = (unsigned char)s;
 		    }
 		}
 	    else
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@add netpbm port
@
text
@@
