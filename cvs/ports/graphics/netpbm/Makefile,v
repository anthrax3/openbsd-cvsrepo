head	1.79;
access;
symbols
	OPENBSD_6_0:1.75.0.2
	OPENBSD_6_0_BASE:1.75
	OPENBSD_5_9:1.73.0.2
	OPENBSD_5_9_BASE:1.73
	OPENBSD_5_8:1.71.0.4
	OPENBSD_5_8_BASE:1.71
	OPENBSD_5_7:1.67.0.2
	OPENBSD_5_7_BASE:1.67
	OPENBSD_5_6:1.66.0.2
	OPENBSD_5_6_BASE:1.66
	OPENBSD_5_5:1.65.0.2
	OPENBSD_5_5_BASE:1.65
	OPENBSD_5_4:1.63.0.2
	OPENBSD_5_4_BASE:1.63
	OPENBSD_5_3:1.60.0.2
	OPENBSD_5_3_BASE:1.60
	OPENBSD_5_2:1.59.0.2
	OPENBSD_5_2_BASE:1.59
	OPENBSD_5_1_BASE:1.57
	OPENBSD_5_1:1.57.0.2
	OPENBSD_5_0:1.54.0.2
	OPENBSD_5_0_BASE:1.54
	OPENBSD_4_9:1.53.0.2
	OPENBSD_4_9_BASE:1.53
	OPENBSD_4_8:1.51.0.2
	OPENBSD_4_8_BASE:1.51
	OPENBSD_4_7:1.50.0.2
	OPENBSD_4_7_BASE:1.50
	OPENBSD_4_6:1.49.0.4
	OPENBSD_4_6_BASE:1.49
	OPENBSD_4_5:1.49.0.2
	OPENBSD_4_5_BASE:1.49
	OPENBSD_4_4:1.48.0.2
	OPENBSD_4_4_BASE:1.48
	OPENBSD_4_3:1.47.0.2
	OPENBSD_4_3_BASE:1.47
	OPENBSD_4_2:1.43.0.2
	OPENBSD_4_2_BASE:1.43
	OPENBSD_4_1:1.42.0.2
	OPENBSD_4_1_BASE:1.42
	OPENBSD_4_0:1.39.0.2
	OPENBSD_4_0_BASE:1.39
	OPENBSD_3_9:1.36.0.2
	OPENBSD_3_9_BASE:1.36
	OPENBSD_3_8:1.34.0.2
	OPENBSD_3_8_BASE:1.34
	OPENBSD_3_7:1.32.0.2
	OPENBSD_3_7_BASE:1.32
	OPENBSD_3_6:1.30.0.4
	OPENBSD_3_6_BASE:1.30
	OPENBSD_3_5:1.30.0.2
	OPENBSD_3_5_BASE:1.30
	OPENBSD_3_4:1.28.0.2
	OPENBSD_3_4_BASE:1.28
	OPENBSD_3_3:1.27.0.2
	OPENBSD_3_3_BASE:1.27
	OPENBSD_3_2:1.25.0.2
	OPENBSD_3_2_BASE:1.25
	OPENBSD_3_1:1.24.0.2
	OPENBSD_3_1_BASE:1.24
	OPENBSD_3_0:1.23.0.2
	OPENBSD_3_0_BASE:1.23
	OPENBSD_2_9_TRACKING_SWITCH:1.22
	OPENBSD_2_9:1.21.0.2
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_8:1.19.0.2
	OPENBSD_2_8_BASE:1.19
	OPENBSD_2_7:1.12.0.2
	OPENBSD_2_7_BASE:1.12
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	brad_1999-03-18:1.1.1.2
	brad:1.1.1
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	form_980514:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.79
date	2016.11.19.15.42.46;	author naddy;	state Exp;
branches;
next	1.78;
commitid	4QvmpMZ44gi2DvYA;

1.78
date	2016.09.02.22.18.13;	author naddy;	state Exp;
branches;
next	1.77;
commitid	acHk43fgTQWjHCbh;

1.77
date	2016.09.01.08.56.49;	author naddy;	state Exp;
branches;
next	1.76;
commitid	5U0zqmWV19x2F1uD;

1.76
date	2016.08.31.22.12.43;	author naddy;	state Exp;
branches;
next	1.75;
commitid	xA1NzX6xEoxzPitd;

1.75
date	2016.04.26.17.59.50;	author naddy;	state Exp;
branches;
next	1.74;
commitid	1x7q1N65e6q2cZf5;

1.74
date	2016.03.09.18.22.52;	author naddy;	state Exp;
branches;
next	1.73;
commitid	XBXEIJ0GnZ4xQnqu;

1.73
date	2015.10.29.11.46.49;	author jca;	state Exp;
branches;
next	1.72;
commitid	hqwJihEa8tmwwJCa;

1.72
date	2015.10.08.11.48.39;	author jasper;	state Exp;
branches;
next	1.71;
commitid	FbEPmylHCJNzHSkv;

1.71
date	2015.07.08.20.48.57;	author naddy;	state Exp;
branches;
next	1.70;
commitid	AIgIEWDNObFeZ7OA;

1.70
date	2015.05.18.11.29.38;	author jasper;	state Exp;
branches;
next	1.69;
commitid	g3eYBWefuCrWTDW1;

1.69
date	2015.05.02.20.06.00;	author ajacoutot;	state Exp;
branches;
next	1.68;
commitid	FVQRPuwZLbaloEM2;

1.68
date	2015.04.21.18.24.22;	author sthen;	state Exp;
branches;
next	1.67;
commitid	aorv38MSXkwQIPuw;

1.67
date	2014.11.02.15.42.14;	author naddy;	state Exp;
branches
	1.67.2.1;
next	1.66;
commitid	2d4V2Wm6G3QYMoIR;

1.66
date	2014.04.20.16.55.07;	author naddy;	state Exp;
branches;
next	1.65;

1.65
date	2014.01.03.20.16.31;	author naddy;	state Exp;
branches;
next	1.64;

1.64
date	2013.08.23.10.48.06;	author naddy;	state Exp;
branches;
next	1.63;

1.63
date	2013.04.13.08.53.47;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2013.03.27.21.53.59;	author naddy;	state Exp;
branches;
next	1.61;

1.61
date	2013.03.11.11.10.54;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2012.08.04.21.17.40;	author naddy;	state Exp;
branches;
next	1.59;

1.59
date	2012.07.11.09.53.52;	author giovanni;	state Exp;
branches;
next	1.58;

1.58
date	2012.04.14.20.24.02;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2011.12.13.21.39.17;	author naddy;	state Exp;
branches;
next	1.56;

1.56
date	2011.11.13.12.33.11;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2011.09.16.10.02.37;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2011.03.26.15.43.18;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.17.08.05.15;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.09.18.22.26;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2010.07.02.02.54.59;	author naddy;	state Exp;
branches;
next	1.50;

1.50
date	2009.10.11.19.36.15;	author naddy;	state Exp;
branches;
next	1.49;

1.49
date	2008.10.25.11.25.10;	author naddy;	state Exp;
branches;
next	1.48;

1.48
date	2008.04.22.19.20.59;	author naddy;	state Exp;
branches;
next	1.47;

1.47
date	2008.01.04.17.48.35;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2007.10.15.19.29.52;	author naddy;	state Exp;
branches;
next	1.45;

1.45
date	2007.09.24.16.42.17;	author naddy;	state Exp;
branches;
next	1.44;

1.44
date	2007.09.15.20.09.42;	author simon;	state Exp;
branches;
next	1.43;

1.43
date	2007.05.09.15.47.57;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2007.01.17.20.25.23;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2006.10.19.16.05.19;	author naddy;	state Exp;
branches;
next	1.40;

1.40
date	2006.10.02.16.00.21;	author naddy;	state Exp;
branches;
next	1.39;

1.39
date	2006.08.03.12.53.18;	author espie;	state Exp;
branches
	1.39.2.1;
next	1.38;

1.38
date	2006.06.20.18.11.02;	author naddy;	state Exp;
branches;
next	1.37;

1.37
date	2006.06.11.18.22.06;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2005.12.29.15.45.42;	author steven;	state Exp;
branches;
next	1.35;

1.35
date	2005.10.30.00.10.41;	author fgsch;	state Exp;
branches;
next	1.34;

1.34
date	2005.08.31.19.55.37;	author sturm;	state Exp;
branches;
next	1.33;

1.33
date	2005.08.11.15.54.46;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2005.01.18.12.30.57;	author alek;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2004.11.30.01.06.38;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2004.02.23.08.20.11;	author pvalchev;	state Exp;
branches
	1.30.4.1;
next	1.29;

1.29
date	2003.09.23.00.12.51;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2003.03.29.04.13.54;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2002.10.27.00.03.16;	author naddy;	state Exp;
branches
	1.27.2.1;
next	1.26;

1.26
date	2002.10.04.13.10.34;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2002.05.13.23.31.24;	author espie;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2002.03.01.22.49.19;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2001.10.03.03.09.31;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2001.05.24.02.27.41;	author kevlo;	state Exp;
branches;
next	1.21;

1.21
date	2001.04.14.02.26.49;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2001.04.01.19.01.38;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.09.24.07.04.08;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2000.09.14.00.05.48;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.08.07.10.05.05;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2000.06.25.22.30.07;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.06.20.17.34.14;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2000.06.16.23.06.05;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.05.21.12.39.01;	author fgsch;	state Exp;
branches;
next	1.12;

1.12
date	2000.03.24.23.28.10;	author espie;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2000.03.13.18.57.14;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.05.18.30.29;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2000.02.16.10.52.10;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2000.02.11.00.37.26;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	99.10.27.00.09.15;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.06.01.22.36.26;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.03.25.04.58.06;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	99.03.19.01.57.41;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	98.10.20.08.39.46;	author form;	state Exp;
branches;
next	1.2;

1.2
date	98.06.14.08.10.29;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.05.14.05.41.13;	author form;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.05.14.05.41.13;	author form;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	99.03.19.01.31.46;	author brad;	state Exp;
branches;
next	;

1.12.2.1
date	2000.09.15.04.53.37;	author marc;	state Exp;
branches;
next	;

1.25.2.1
date	2003.03.29.23.25.06;	author brad;	state Exp;
branches;
next	;

1.27.2.1
date	2003.05.03.03.19.04;	author brad;	state Exp;
branches;
next	;

1.30.4.1
date	2005.08.16.18.03.02;	author sturm;	state Exp;
branches;
next	1.30.4.2;

1.30.4.2
date	2005.08.31.19.46.33;	author sturm;	state Exp;
branches;
next	;

1.32.2.1
date	2005.08.16.18.02.11;	author sturm;	state Exp;
branches;
next	1.32.2.2;

1.32.2.2
date	2005.08.31.19.51.41;	author sturm;	state Exp;
branches;
next	;

1.39.2.1
date	2007.01.20.09.32.50;	author sturm;	state Exp;
branches;
next	;

1.67.2.1
date	2015.07.08.22.42.11;	author naddy;	state Exp;
branches;
next	;
commitid	Uj52OkZZpSzfZ3Xu;


desc
@@


1.79
log
@maintenance update to 10.76.00
@
text
@# $OpenBSD: Makefile,v 1.78 2016/09/02 22:18:13 naddy Exp $

COMMENT=	toolkit for manipulation and conversion of graphic images

DISTNAME=	netpbm-10.76.00
SHARED_LIBS=	netpbm	3.1
CATEGORIES=	graphics
HOMEPAGE=	http://netpbm.sourceforge.net/

PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	X11 c jasper jbig jpeg m png tiff xml2 z

MASTER_SITES=	http://shell.uugrn.org/~naddy/
EXTRACT_SUFX=	.tar.xz

LIB_DEPENDS=	graphics/tiff \
		graphics/jpeg \
		graphics/png \
		graphics/jbigkit \
		graphics/jasper \
		textproc/libxml

USE_GMAKE=	Yes
MAKE_FILE=	GNUmakefile
INSTALL_TARGET=	install.bin install.lib install.data \
		install.hdr install.staticlib

MAKE_FLAGS=	CC="${CC}" \
		LIBnetpbm_VERSION=${LIBnetpbm_VERSION}
# programs can take seed on command line
MAKE_FLAGS+=	CFLAGS_CONFIG="-Dsrand=srand_deterministic"

FAKE_FLAGS=	pkgdir="${WRKINST}${TRUEPREFIX}"

do-configure:
	cp ${FILESDIR}/config.mk ${WRKSRC}

TEST_DEPENDS=	shells/bash sysutils/coreutils
TEST_TARGET=	check
TEST_FLAGS=	pkgdir="${WRKINST}${PREFIX}" \
		resultdir="${WRKDIR}/tests" \
          	RGBDEF="${WRKINST}${PREFIX}/share/netpbm/rgb.txt"

# cp -v, head -c, mv -T, seq
pre-test:
	@@for i in cp head mv seq; do \
		ln -sf ${LOCALBASE}/bin/g$$i ${WRKDIR}/bin/$$i; \
	done
	@@sed -i '1 s:^.*bin/bash:#!${LOCALBASE}/bin/bash:' \
	    ${WRKSRC}/test/Execute-Tests ${WRKSRC}/test/*.test

# must run after fake
test: fake

# Get the latest release in a release series from Netpbm Subversion.
# Requires devel/subversion.
distfile:
	@@REPO=https://svn.code.sf.net/p/netpbm/code; \
	SERIES=advanced; \
	REV=`svn info $$REPO/$$SERIES/version.mk | \
	    sed -n 's/Last Changed Rev: //p'`; \
	VERSION=`(svn cat -r$$REV $$REPO/$$SERIES/version.mk; \
	    echo 'all:'; \
	    echo '	@@printf "%02d.%02d.%02d" \\'; \
	    echo '	    $${NETPBM_MAJOR_RELEASE} \\'; \
	    echo '	    $${NETPBM_MINOR_RELEASE} \\'; \
	    echo '	    $${NETPBM_POINT_RELEASE}'; \
	    ) | make -f-`; \
	svn export -r$$REV $$REPO/$$SERIES "netpbm-$$VERSION"; \
	tar cf - "netpbm-$$VERSION" | xz >"netpbm-$$VERSION".tar.xz; \
	rm -rf "netpbm-$$VERSION"

.include <bsd.port.mk>
@


1.78
log
@update to 10.75.03: fixes have been integrated upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2016/09/01 08:56:49 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.75.03
@


1.77
log
@sync with upstream commits
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2016/08/31 22:12:43 naddy Exp $
d5 1
a5 2
DISTNAME=	netpbm-10.75.01
REVISION=	0
@


1.76
log
@update to 10.75.01
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2016/04/26 17:59:50 naddy Exp $
d6 1
@


1.75
log
@Big, big update to 10.74.02.  Years worth of changes.  The port now
follows the "advanced" release series and we will have to create our
own distfiles accordingly.

Use srand_deterministic() to fix programs that can take a seed value
on the command line.

ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2016/03/09 18:22:52 naddy Exp $
d5 2
a6 2
DISTNAME=	netpbm-10.74.02
SHARED_LIBS=	netpbm	3.0
d48 1
a48 1
		ln -s ${LOCALBASE}/bin/g$$i ${WRKDIR}/bin/$$i; \
@


1.74
log
@all architectures have shared libraries now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/10/29 11:46:49 jca Exp $
d3 1
a3 1
COMMENT=	toolkit for converting images between different formats
d5 2
a6 2
DISTNAME=	netpbm-10.35.97
SHARED_LIBS=	netpbm	2.0
d12 1
a12 2
WANTLIB += X11 Xau Xdmcp c jasper jbig jpeg m png pthread pthread-stubs
WANTLIB += tiff xcb xml2 z
d14 2
a15 2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=netpbm/}
EXTRACT_SUFX=	.tgz
a16 1
MODULES=	converters/libiconv
d20 1
a20 1
		graphics/jbigkit>=2.0 \
a25 1
ALL_TARGET=
d31 2
a32 1
FAKE_FLAGS=	PKGDIR="${WRKINST}${TRUEPREFIX}"
d34 1
a34 5
pre-build:
	${SUBST_CMD} ${WRKSRC}/pm_config.in.h
	cp ${FILESDIR}/Makefile.config.OpenBSD ${WRKSRC}/Makefile.config
# Missing in some releases
	cd ${WRKSRC}; buildtools/stamp-date >lib/compile.h
d36 37
a72 1
NO_TEST=	Yes
@


1.73
log
@Update to netpbm-10.35.97; ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/10/08 11:48:39 jasper Exp $
a34 8

.include <bsd.port.arch.mk>

.if ${NO_SHARED_LIBS:L} == "yes"
MAKE_FLAGS+=	NETPBMLIBTYPE=unixstatic
.else
MAKE_FLAGS+=	NETPBMLIBTYPE=unixshared
.endif
@


1.72
log
@use SUBST_CMD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/07/08 20:48:57 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.96
@


1.71
log
@Update to netpbm-10.35.96.
This features a large number of buffer/arithmetic overflow fixes,
including one for CVE-2015-3885.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2015/05/18 11:29:38 jasper Exp $
d45 1
a45 3
	perl -i -p \
	    -e 's#%%X11BASE%%#${X11BASE}#g;' \
	    -e 's#%%PREFIX%%#${PREFIX}#g;' ${WRKSRC}/pm_config.in.h
@


1.70
log
@remove another bunch of @@rm -f, some of which were hiding the arguments no
longer existed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2015/05/02 20:06:00 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.95
a42 3

pre-patch:
	rm ${WRKSRC}/converter/other/jpeg2000/libjasper/include/jasper/jas_types.h.orig
@


1.69
log
@Minor update to "super stable" netpbm-10.35.95.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2015/04/21 18:24:22 sthen Exp $
d45 1
a45 1
	@@rm -f ${WRKSRC}/converter/other/jpeg2000/libjasper/include/jasper/jas_types.h.orig
@


1.68
log
@add some missing pthread to WANTLIB
(using modified portbump, thanks zhuk@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2014/11/02 15:42:14 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.94
a8 1
REVISION=	0
@


1.67
log
@update to 10.35.94 for minor bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2014/04/20 16:55:07 naddy Exp $
d9 1
d13 3
a19 2
WANTLIB=	X11 Xau Xdmcp c jasper jbig jpeg m png pthread-stubs \
		tiff xcb xml2 z
@


1.67.2.1
log
@Update to netpbm-10.35.96.
This features a large number of buffer/arithmetic overflow fixes,
including one for CVE-2015-3885.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/07/08 20:48:57 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.96
a11 3
WANTLIB += X11 Xau Xdmcp c jasper jbig jpeg m png pthread-stubs
WANTLIB += tiff xcb xml2 z

d16 2
d42 3
@


1.66
log
@maintenance update to 10.35.92
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/01/03 20:16:31 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.92
@


1.65
log
@* convert ppmquantall script from bash to sh syntax; from FreeBSD
* update to 10.35.91: minor bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2013/08/23 10:48:06 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.91
@


1.64
log
@maintenance update to 10.35.89
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2013/04/13 08:53:47 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.89
d52 1
a52 1
#	cd ${WRKSRC}; buildtools/stamp-date >lib/compile.h
@


1.63
log
@Fix build after jbigkit update to 2.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2013/03/27 21:53:59 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.88
a8 1
REVISION=	0
@


1.62
log
@update to 10.35.88 for miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2013/03/11 11:10:54 espie Exp $
d9 1
d22 1
a22 1
		graphics/jbigkit \
@


1.61
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2012/08/04 21:17:40 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.86
d16 2
a17 2
WANTLIB=	X11 Xau Xdmcp c m pthread-stubs xcb z tiff>=38 jpeg>=64 \
		png>=10 jbig>=2 jasper>=2 xml2>=11
d51 2
a52 1
	cd ${WRKSRC}; buildtools/stamp-date >lib/compile.h
@


1.60
log
@update to 10.35.86, fixes ppmtobmp
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/07/11 09:53:52 giovanni Exp $
a9 3
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
d53 1
a53 1
NO_REGRESS=	Yes
@


1.59
log
@
update to 10.35.85
help and ok naddy@@, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2012/04/14 20:24:02 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.85
d54 1
@


1.58
log
@update to 10.35.84 (minor bug fixes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/12/13 21:39:17 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.84
a53 1
	cd ${WRKSRC}; buildtools/stamp-date >lib/compile.h
@


1.57
log
@maintenance update to 10.35.83
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/11/13 12:33:11 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.83
d54 1
@


1.56
log
@update to 10.35.82 for minor bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2011/09/16 10:02:37 espie Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.82
d38 8
a53 1
	cd ${WRKSRC}; buildtools/stamp-date >lib/compile.h
a57 6

.if ${NO_SHARED_LIBS:L} == "yes"
MAKE_FLAGS+=	NETPBMLIBTYPE=unixstatic
.else
MAKE_FLAGS+=	NETPBMLIBTYPE=unixshared
.endif
@


1.55
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/03/26 15:43:18 naddy Exp $
d5 1
a5 2
DISTNAME=	netpbm-10.35.80
REVISION=		0
d42 5
a46 3
	@@perl -i -pe 's#%%X11BASE%%#${X11BASE}#g;' \
		-e 's#%%PREFIX%%#${PREFIX}#g;' ${WRKSRC}/pm_config.in.h
	@@cp ${FILESDIR}/Makefile.config.OpenBSD ${WRKSRC}/Makefile.config
@


1.54
log
@maintenance update to 10.35.80
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/17 08:05:15 espie Exp $
d6 1
@


1.53
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/09 18:22:26 espie Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.35.75
@


1.52
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/07/02 02:54:59 naddy Exp $
d19 8
a26 8
WANTLIB=	X11 Xau Xdmcp c m pthread-stubs xcb z tiff.>=38 jpeg.>=64 \
		png.>=10 jbig.>=2 jasper.>=2 xml2.>=11
LIB_DEPENDS=	::graphics/tiff \
		::graphics/jpeg \
		::graphics/png \
		::graphics/jbigkit \
		::graphics/jasper \
		::textproc/libxml
@


1.51
log
@Update to 10.35.75.  This jumps to the latest "super stable" branch
and adds pamx, a minimal X11 viewer for files in the various netpbm
formats.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/10/11 19:36:15 naddy Exp $
d19 8
a26 7
WANTLIB=	X11 Xau Xdmcp c m pthread-stubs xcb z
LIB_DEPENDS=	tiff.>=38::graphics/tiff \
		jpeg.>=64::graphics/jpeg \
		png.>=10::graphics/png \
		jbig.>=2::graphics/jbigkit \
		jasper.>=2::graphics/jasper \
		xml2.>=11::textproc/libxml
@


1.50
log
@update to 10.26.64 (miscellaneous bug fixes) and prepare for jpeg7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/10/25 11:25:10 naddy Exp $
d5 2
a6 2
DISTNAME=	netpbm-10.26.64
SHARED_LIBS=	netpbm	1.0
d18 5
a22 4
WANTLIB=	c m z
LIB_DEPENDS=	tiff.>=35::graphics/tiff \
		jpeg.>=62::graphics/jpeg \
		png.>=2::graphics/png \
d24 2
a25 1
		jasper.>=1::graphics/jasper
d36 3
@


1.49
log
@update to 10.26.57: miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/04/22 19:20:59 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.57
@


1.48
log
@update to 10.26.53: miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/01/04 17:48:35 espie Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.53
@


1.47
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/10/15 19:29:52 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.46
@


1.46
log
@Update to 10.26.46:
* pamstack: accept Standard Input properly
* bmptopnm: fix crash with 16 bit images
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/09/24 16:42:17 naddy Exp $
d33 1
a33 1
FAKE_FLAGS=	${MAKE_FLAGS} PKGDIR="${WRKINST}${TRUEPREFIX}"
@


1.45
log
@maintenance update to 10.26.44
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/09/15 20:09:42 simon Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.44
@


1.44
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/05/09 15:47:57 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.42
@


1.43
log
@Update to 10.26.42: fixes for ppmtogif, libnetpbm (PBM on amd64),
pamcomp, and pnmtopclxl.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/01/17 20:25:23 naddy Exp $
d3 1
a3 1
COMMENT=	"toolkit for converting images between different formats"
@


1.42
log
@update to 10.26.38: fixes various crashes and buffer overruns and renames a
misnamed function
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/10/19 16:05:19 naddy Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.38
@


1.41
log
@update to 10.26.32 (minor bug fixes) and revert to -fpic
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/10/02 16:00:21 naddy Exp $
d5 2
a6 2
DISTNAME=	netpbm-10.26.32
SHARED_LIBS=	netpbm	0.1
@


1.40
log
@- update to 10.26.31: bug fixes
- drop no longer required workaround for alpha; from brad@@
- switch to -fPIC, required by alpha
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/08/03 12:53:18 espie Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.31
@


1.39
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/06/20 18:11:02 naddy Exp $
d5 2
a6 2
DISTNAME=	netpbm-10.26.29
SHARED_LIBS=	netpbm	0.0
a47 5
.endif

# multiple internal compiler errors
.if ${MACHINE_ARCH} == "alpha"
CFLAGS:=	${CFLAGS:N-O*}
@


1.39.2.1
log
@MFC:
update to 10.26.38: fixes various crashes and buffer overruns and renames a
misnamed function
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/08/03 12:53:18 espie Exp $
d5 2
a6 2
DISTNAME=	netpbm-10.26.38
SHARED_LIBS=	netpbm	1.0
@


1.38
log
@maintenance update to 10.26.29: tiny bugfix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/06/11 18:22:06 naddy Exp $
d19 5
a23 5
LIB_DEPENDS=	tiff.35::graphics/tiff \
		jpeg.62::graphics/jpeg \
		png.2::graphics/png \
		jbig.2::graphics/jbigkit \
		jasper.1::graphics/jasper
@


1.37
log
@update to 10.26.28, more than four years worth of changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/12/29 15:45:42 steven Exp $
d5 1
a5 1
DISTNAME=	netpbm-10.26.28
@


1.36
log
@SHARED_LIBS, sync with update-patches
ok naddy@@
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.35 2005/10/30 00:10:41 fgsch Exp $
# $NetBSD: Makefile,v 1.25 1999/03/04 14:18:54 tron Exp $
a3 10
COMMENT-hpcd=	"convert photo CD images into ppm format"

VERSION=	9.24
DISTNAME=	netpbm-${VERSION}
PKGNAME=	${DISTNAME}p3
PKGNAME-hpcd=	hpcdtoppm-${VERSION}p1
SHARED_LIBS=	pbm	1.0	\
		pgm	1.0	\
		pnm	1.0	\
		ppm	1.0
d5 2
a7 3
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=netpbm/}
EXTRACT_SUFX=	.tgz

a9 8
LIB_DEPENDS=	tiff.35::graphics/tiff \
		jpeg.62::graphics/jpeg \
		png.2::graphics/png

MULTI_PACKAGES=	-hpcd
SUBPACKAGE?=

WANTLIB=		c
d12 1
a12 5
PERMIT_DISTFILES_CDROM=	"no fee"
.if ${SUBPACKAGE} == "-hpcd"
PERMIT_PACKAGE_CDROM=	"no fee"
.else
WANTLIB+=		m z
a13 1
.endif
d15 9
a23 11
MAKE_FLAGS=	CC="${CC}" \
		LIBpbm_VERSION=${LIBpbm_VERSION} \
		LIBpgm_VERSION=${LIBpgm_VERSION} \
		LIBpnm_VERSION=${LIBpnm_VERSION} \
		LIBppm_VERSION=${LIBppm_VERSION}
FAKE_FLAGS=	${MAKE_FLAGS} PREFIX="${WRKINST}${TRUEPREFIX}"

# gcc3 ICE on exif.c
.if ${MACHINE_ARCH} == "sparc64"
MAKE_FLAGS+=	CFLAGS="${CFLAGS} -O0"
.endif
d26 4
d31 3
a33 1
MAKE_FILE=	GNUmakefile
d36 3
a38 9
	@@mv -f ${WRKSRC}/pm_config.h ${WRKSRC}/pm_config.h.new
	@@mv -f ${WRKSRC}/pbm/pm.h ${WRKSRC}/pbm/pm.h.new
	@@sed -e s#!!X11R6!!#${X11BASE}#g \
		${WRKSRC}/pm_config.h.new > ${WRKSRC}/pm_config.h
	@@sed -e 's#<shhopt.h>#<pm_shhopt.h>#g' \
		${WRKSRC}/pbm/pm.h.new > ${WRKSRC}/pbm/pm.h
	@@cp -f ${FILESDIR}/Makefile.config.OpenBSD \
		${WRKSRC}/Makefile.config
	@@cd ${WRKSRC}/shhopt; ln -sf shhopt.h pm_shhopt.h
a41 4
.if defined(PACKAGING) && ${SUBPACKAGE} == "-hpcd"
LIB_DEPENDS=	pbm.1,pgm.1,ppm.1::graphics/netpbm
.endif

d44 1
a44 1
.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
d48 5
@


1.35
log
@after querying brad@@ he decided to drop maintainership for these.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/08/31 19:55:37 sturm Exp $
d11 5
d40 5
a44 1
MAKE_FLAGS=	CC="${CC}"
@


1.34
log
@bump PKGNAME so that 3.7 won't have higher PKGNAMEs than 3.8

suggested by espie@@, ok pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/08/11 15:54:46 naddy Exp $
a19 2

MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.33
log
@SECURITY:
pstopnm called the ghostscript interpreter on potentially untrusted
PostScript without specifying the -dSAFER option.  Not running under
-dSAFER allows PostScript code to do file IO and to open pipes to
arbitrary external programs, including /bin/sh.

Originally reported by Max Vozeler/Debian Linux; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/01/18 12:30:57 alek Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
@


1.32
log
@Add/fix WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/11/30 01:06:38 espie Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p1
@


1.32.2.1
log
@MFC:
SECURITY:
pstopnm called the ghostscript interpreter on potentially untrusted
PostScript without specifying the -dSAFER option.  Not running under
-dSAFER allows PostScript code to do file IO and to open pipes to
arbitrary external programs, including /bin/sh.

Originally reported by Max Vozeler/Debian Linux

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/01/18 12:30:57 alek Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
@


1.32.2.2
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32.2.1 2005/08/16 18:02:11 sturm Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p3
@


1.31
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/02/23 08:20:11 pvalchev Exp $
d26 1
d33 1
a35 1
WANTLIB=		c m z
@


1.30
log
@workaround gcc3 ICE by compiling with -O0 for now; ok brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/09/23 00:12:51 naddy Exp $
d34 1
@


1.30.4.1
log
@MFC:
SECURITY:
pstopnm called the ghostscript interpreter on potentially untrusted
PostScript without specifying the -dSAFER option.  Not running under
-dSAFER allows PostScript code to do file IO and to open pipes to
arbitrary external programs, including /bin/sh.

Originally reported by Max Vozeler/Debian Linux

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/02/23 08:20:11 pvalchev Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
@


1.30.4.2
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30.4.1 2005/08/16 18:03:02 sturm Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p3
@


1.29
log
@spin off hpcdtoppm into subpackage for licensing reasons; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/03/29 04:13:54 brad Exp $
d37 5
@


1.28
log
@Several math overflow errors were found in NetPBM by Al Viro and Alan
Cox.  While these programs are not installed suid root, they are often
used to prepare data for processing.  These errors may permit remote
attackers to cause a denial of service or execute arbitrary code in
any programs or scripts that use these graphics conversion tools.

http://marc.theaimsgroup.com/?l=bugtraq&m=104644687816522&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/10/27 00:03:16 naddy Exp $
d5 1
d7 2
a8 1
DISTNAME=	netpbm-9.24
d10 1
d23 3
d28 4
a31 1
PERMIT_DISTFILES_CDROM=	Yes
d33 1
d54 4
@


1.27
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/10/04 13:10:34 brad Exp $
d7 1
@


1.27.2.1
log
@MFC:
Several math overflow errors were found in NetPBM by Al Viro and Alan
Cox.  While these programs are not installed suid root, they are often
used to prepare data for processing.  These errors may permit remote
attackers to cause a denial of service or execute arbitrary code in
any programs or scripts that use these graphics conversion tools.

http://marc.theaimsgroup.com/?l=bugtraq&m=104644687816522&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/03/29 04:13:54 brad Exp $
a6 1
PKGNAME=	${DISTNAME}p1
@


1.26
log
@better sed usage.
--
From: Waba <wabasoft@@yahoo.fr>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2002/05/13 23:31:24 espie Exp $
d41 2
@


1.25
log
@More MASTER_SITES_SUBDIR out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/03/01 22:49:19 brad Exp $
a7 1
NEED_VERSION=	1.500
d36 1
a36 1
	@@sed -e s#shhopt.h#pm_shhopt.h#g \
@


1.25.2.1
log
@MFC:
Several math overflow errors were found in NetPBM by Al Viro and Alan
Cox.  While these programs are not installed suid root, they are often
used to prepare data for processing.  These errors may permit remote
attackers to cause a denial of service or execute arbitrary code in
any programs or scripts that use these graphics conversion tools.

http://marc.theaimsgroup.com/?l=bugtraq&m=104644687816522&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/03/29 04:13:54 brad Exp $
a6 1
PKGNAME=	${DISTNAME}p1
d8 1
d37 1
a37 1
	@@sed -e 's#<shhopt.h>#<pm_shhopt.h>#g' \
a41 2

NO_REGRESS=	Yes
@


1.24
log
@upgrade to netpbm 9.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/10/03 03:09:31 brad Exp $
d9 1
a9 2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR= netpbm
@


1.23
log
@upgrade to netpbm 9.19
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/05/24 02:27:41 kevlo Exp $
d6 1
a6 1
DISTNAME=	netpbm-9.19
d8 1
a8 1
NEED_VERSION=	1.460
d16 1
d33 3
a35 3
post-patch:
	@@mv -f ${WRKSRC}/pm_config.h ${WRKSRC}/pm_config.h.bak
	@@mv -f ${WRKSRC}/pbm/pm.h ${WRKSRC}/pbm/pm.h.bak
d37 1
a37 1
		${WRKSRC}/pm_config.h.bak > ${WRKSRC}/pm_config.h
d39 1
a39 1
		${WRKSRC}/pbm/pm.h.bak > ${WRKSRC}/pbm/pm.h
@


1.22
log
@Bump major rev in png dependeny entries after upgrade of png:
png.1 -> png.2
--
Ok'd by: brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/04/14 02:26:49 brad Exp $
d6 1
a6 2
DISTNAME=	netpbm-1mar1994
PKGNAME=	netpbm-19940301
d8 4
a11 9
NEED_VERSION=	1.384
MASTER_SITES=	ftp://ftp.informatik.uni-oldenburg.de/pub/netpbm/
MASTER_SITES0=	ftp://ftp.informatik.uni-oldenburg.de/pub/netpbm/ \
		ftp://ftp.x.org/contrib/utilities/
MASTER_SITES1=	ftp://swrinde.nde.swri.edu/pub/png/applications/ \
		ftp://ftp.libpng.org/pub/png/src/
DISTFILES=	${DISTNAME}.tar.gz:0 pcxtoppm.tar.gz rletopnm.tar.gz \
		pnmtopng-2.37.5.tar.gz:1
DIST_SUBDIR=	netpbm
d13 3
a15 2
LIB_DEPENDS=	jpeg.62::graphics/jpeg \
		tiff.35::graphics/tiff \
d22 20
a41 16
# Jumble of licenses, some of them don't allow for commercial redistribution
# TODO: Sort out, maybe separate into two distinct packages ?
PERMIT_DISTFILES_CDROM=	No
PERMIT_PACKAGE_CDROM=	No

MAKE_FLAGS=	PREFIX="${PREFIX}" MANCP="${INSTALL_MAN}"
FAKE_FLAGS= 	PREFIX="${WRKINST}${PREFIX}" MANCP="${INSTALL_MAN}"

WRKDIST=	${WRKDIR}/netpbm

post-extract:
	@@cd ${WRKSRC} && \
	  mv ../pnmtopng-2.37.5/* .. && \
	  mv ../*pcx*.? ppm && \
	  mv ../*rle*.? ../*png*.? pnm && \
	  mv ../version.h pnm
d44 6
@


1.21
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/04/01 19:01:38 brad Exp $
d21 1
a21 1
		png.1::graphics/png
@


1.20
log
@- integrate COMMENT
- bump NEED_VERSION
- MAKE_ENV -> MAKE_FLAGS
- upgrade pnmtopng to v2.37.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/09/24 07:04:08 brad Exp $
d9 1
a9 1
NEED_VERSION=	1.378
@


1.19
log
@add name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/09/14 00:05:48 brad Exp $
d4 2
d9 1
a9 1
NEED_VERSION=	1.330
d16 1
a16 1
		pnmtopng-2.37.4.tar.gz:1
d32 1
a32 1
MAKE_ENV=	PREFIX="${PREFIX}" MANCP="${INSTALL_MAN}"
d39 1
a39 1
	  mv ../pnmtopng-2.37.4/* .. && \
@


1.18
log
@add another distsite for pnmtopng; From: louis@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/08/07 10:05:05 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.310
d21 1
a21 1
MAINTAINER=	brad@@openbsd.org
@


1.17
log
@- upgrade pnmtopng to v2.37.4
- make use of DIST_SUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/06/25 22:30:07 brad Exp $
d11 2
a12 1
MASTER_SITES1=	ftp://swrinde.nde.swri.edu/pub/png/applications/
@


1.16
log
@change dependency, png.1.6 -> png.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/06/20 17:34:14 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.301
d13 2
a14 1
		pnmtopng-2.37.3.tar.gz:1
d29 2
a30 2
MAKE_ENV=	PREFIX=${PREFIX} MANCP="${INSTALL_MAN}"
FAKE_FLAGS= 	PREFIX=${WRKINST}${PREFIX} MANCP="${INSTALL_MAN}"
d36 1
a36 1
	  mv ../pnmtopng-2.37.3/* .. && \
d38 2
a39 1
	  mv ../*rle*.? ../*png*.? pnm
@


1.15
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/06/16 23:06:05 espie Exp $
d17 1
a17 1
		png.1.6::graphics/png
@


1.14
log
@Remove NO_CONFIGURE/NO_PATCH/NO_EXTRACT/NO_MTREE

Kill corresponding FAKE=Yes and switch to CONFIGURE_STYLE while I'm at it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/05/21 12:39:01 fgsch Exp $
d7 1
a7 1
NEED_VERSION=	 1.230
d15 4
a22 1

a26 4

LIB_DEPENDS=	jpeg.62::graphics/jpeg \
		tiff.35::graphics/tiff \
		png.1.6::graphics/png
@


1.13
log
@update libpng dependency since minor changed; sigh sigh.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/03/24 23:28:10 espie Exp $
a28 1
NO_CONFIGURE=	Yes
a29 1
FAKE=		Yes
@


1.12
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/03/13 18:57:14 espie Exp $
d27 1
a27 1
		png.1.3::graphics/png
@


1.12.2.1
log
@bring graphics as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/08/07 10:05:05 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.310
d13 1
a13 6
		pnmtopng-2.37.4.tar.gz:1
DIST_SUBDIR=	netpbm

LIB_DEPENDS=	jpeg.62::graphics/jpeg \
		tiff.35::graphics/tiff \
		png.1::graphics/png
d19 1
d25 8
a32 2
MAKE_ENV=	PREFIX="${PREFIX}" MANCP="${INSTALL_MAN}"
FAKE_FLAGS= 	PREFIX="${WRKINST}${PREFIX}" MANCP="${INSTALL_MAN}"
d38 1
a38 1
	  mv ../pnmtopng-2.37.4/* .. && \
d40 1
a40 2
	  mv ../*rle*.? ../*png*.? pnm && \
	  mv ../version.h pnm
@


1.11
log
@Fake.
PERMIT*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/03/05 18:30:29 espie Exp $
d7 1
a7 1
NEED_VERSION=	1.223
d25 3
a27 3
LIB_DEPENDS=	jpeg.62:graphics/jpeg \
		tiff.35:graphics/tiff \
		png.1.3:graphics/png
@


1.10
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/02/16 10:52:10 espie Exp $
d17 8
d31 2
@


1.9
log
@All the Makefiles cvs missed first time around...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/02/11 00:37:26 espie Exp $
d7 1
a14 2
NEED_VERSION=	1.191

d17 3
a19 3
LIB_DEPENDS=	jpeg.62:${PORTSDIR}/graphics/jpeg \
		tiff.35:${PORTSDIR}/graphics/tiff \
		png.1.3:${PORTSDIR}/graphics/png
d21 1
a21 1
NO_CONFIGURE=	yes
d27 1
a27 1
	@@(cd ${WRKSRC} && \
d30 1
a30 1
	  mv ../*rle*.? ../*png*.? pnm)
@


1.8
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/10/27 00:09:15 brad Exp $
d29 3
a31 3
	  ${MV} ../pnmtopng-2.37.3/* .. && \
	  ${MV} ../*pcx*.? ppm && \
	  ${MV} ../*rle*.? ../*png*.? pnm)
@


1.7
log
@- use multiple MASTER_SITES
- make use of new libtiff
- upgrade pnmtopng to v2.37.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/06/01 22:36:26 brad Exp $
d14 1
a14 1
NEED_VERSION=	1.121
d25 1
a25 1
WRKSRC=	${WRKDIR}/netpbm
@


1.6
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/03/25 04:58:06 marc Exp $
d7 2
a8 2
MASTER_SITES=	ftp://ftp.informatik.uni-oldenburg.de/pub/netpbm/ \
		ftp://swrinde.nde.swri.edu/pub/png/applications/ \
d10 5
a14 2
DISTFILES=	${DISTNAME}.tar.gz pcxtoppm.tar.gz rletopnm.tar.gz \
		pnmtopng-2.37.2.tar.gz
d19 1
a19 1
		tiff.3.4:${PORTSDIR}/graphics/tiff34 \
a21 2
WRKSRC=		${WRKDIR}/netpbm
MAKE_ENV +=	PREFIX=${PREFIX} MANCP="${INSTALL_MAN}"
d23 3
d29 1
a29 1
	  ${MV} ../pnmtopng-2.37.2/* .. && \
@


1.5
log
@update MASTER_SITES so all DISTFILES can be found;
change pnmtopng to version 2.37.2 (latest version);
fix post-extract so the package will compile;
verify install and uninstall
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/03/19 01:57:41 brad Exp $
a6 3

MAINTAINER=	brad@@openbsd.org

d10 1
a10 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} pcxtoppm.tar.gz rletopnm.tar.gz \
d13 5
a17 3
LIB_DEPENDS=	tiff:${PORTSDIR}/graphics/tiff34 \
		jpeg:${PORTSDIR}/graphics/jpeg \
		png:${PORTSDIR}/graphics/png
@


1.4
log
@fix conflicts
@
text
@d1 1
a1 1
# $OpenBSD$
a6 2
MASTER_SITES=	ftp://ftp.wustl.edu/graphics/graphics/packages/NetPBM/ \
		ftp://ftp.informatik.uni-oldenburg.de/pub/netpbm/
d8 1
a8 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} pcxtoppm.tar.gz rletopnm.tar.gz pnmtopng-2.37.1.tar.gz
d10 5
a14 1
MAINTAINER=	brad@@openbsd.org
d25 4
a28 3
	cd ${WRKSRC}; \
	${MV} ../*pcx*.? ppm; \
	${MV} ../*rle*.? ../*png*.? pnm;
@


1.3
log
@form@@vs.itam.nsc.ru -> form@@openbsd.org
@
text
@d1 2
a2 8
# New ports collection makefile for:	netpbm
# Version required:	netpbm-94.3.1
# Date created:		14 May 1998
# Whom:			Oleg Safiullin <form@@OpenBSD.ORG>
#
# $OpenBSD: Makefile,v 1.2 1998/06/14 08:10:29 marc Exp $
# NetBSD: Makefile,v 1.14 1998/04/22 14:22:43 agc Exp
#
d4 2
a5 2
DISTNAME=	netpbm
PKGNAME=	netpbm-94.3.1
d7 10
a16 13
MASTER_SITES=	ftp://ftp.wustl.edu//graphics/graphics/packages/NetPBM/ \
		ftp://ftp.informatik.uni-oldenburg.de/pub/netpbm/ \
		ftp://ftp.informatik.uni-oldenburg.de/pub/grafik/png/applications/
DISTFILES=	netpbm-1mar1994.tar.gz \
		pcxtoppm.tar.gz \
		rletopnm.tar.gz \
		pnmtopng-2.36.tar.gz

MAINTAINER=	form@@OpenBSD.ORG

LIB_DEPENDS=    jpeg\\.62\\.:${PORTSDIR}/graphics/jpeg \
		tiff\\.3\\.4:${PORTSDIR}/graphics/tiff34 \
		png\\.1\\.:${PORTSDIR}/graphics/png
d19 2
a20 49
MAKE_ENV +=	PREFIX=${PREFIX} INSTALL_MAN="${INSTALL_MAN}"

MAN1=	atktopbm.1 g3topbm.1 brushtopbm.1 cmuwmtopbm.1 \
	icontopbm.1 gemtopbm.1 macptopbm.1 mgrtopbm.1 \
	pbmclean.1 pbmlife.1 pbmmake.1 pbmmask.1 \
	pbmpscale.1 pbmreduce.1 pbmtext.1 pbmto10x.1 \
	pbmto4425.1 pbmtoascii.1 pbmtoatk.1 pbmtobbnbg.1 \
	pbmtocmuwm.1 pbmtoepsi.1 pbmtoepson.1 pbmtog3.1 \
	pbmtogem.1 pbmtogo.1 pbmtoicon.1 pbmtolj.1 \
	pbmtoln03.1 pbmtolps.1 pbmtomacp.1 pbmtomgr.1 \
	pbmtopi3.1 pbmtopk.1 pbmtoplot.1 pbmtoptx.1 \
	pbmtox10bm.1 pbmtoxbm.1 pbmtoybm.1 pbmtozinc.1 \
	pbmupc.1 pi3topbm.1 pktopbm.1 xbmtopbm.1 \
	ybmtopbm.1 asciitopgm.1 bioradtopgm.1 fstopgm.1 \
	hipstopgm.1 lispmtopgm.1 pbmtopgm.1 pgmbentley.1 \
	pgmenhance.1 pgmhist.1 pgmkernel.1 pgmnoise.1 \
	pgmnorm.1 pgmoil.1 pgmramp.1 pgmtofs.1 \
	pgmtolispm.1 pgmtopbm.1 psidtopgm.1 rawtopgm.1 \
	spottopgm.1 pgmcrater.1 pgmedge.1 pgmtexture.1 \
	bmptoppm.1 gouldtoppm.1 hpcdtoppm.1 ilbmtoppm.1 \
	imgtoppm.1 mtvtoppm.1 pcxtoppm.1 pgmtoppm.1 \
	pi1toppm.1 picttoppm.1 pjtoppm.1 ppm3d.1 \
	ppmbrighten.1 ppmchange.1 ppmdim.1 ppmdist.1 \
	ppmdither.1 ppmflash.1 ppmhist.1 ppmmake.1 \
	ppmmix.1 ppmnorm.1 ppmntsc.1 ppmquant.1 \
	ppmrelief.1 ppmshift.1 ppmspread.1 ppmtoacad.1 \
	ppmtobmp.1 ppmtogif.1 ppmtoicr.1 ppmtoilbm.1 \
	ppmtomitsu.1 ppmtopcx.1 ppmtopgm.1 ppmtopi1.1 \
	ppmtopict.1 ppmtopj.1 ppmtopjxl.1 ppmtopuzz.1 \
	ppmtorgb3.1 ppmtosixel.1 ppmtotga.1 ppmtouil.1 \
	ppmtoxpm.1 ppmtoyuv.1 ppmtoyuvsplit.1 qrttoppm.1 \
	rawtoppm.1 rgb3toppm.1 sldtoppm.1 spctoppm.1 \
	sputoppm.1 tgatoppm.1 ximtoppm.1 xpmtoppm.1 \
	xvminitoppm.1 yuvtoppm.1 yuvsplittoppm.1 \
	ppmforge.1 ppmpat.1 ppmqvga.1 ppmtomap.1 \
	ppmquantall.1 fitstopnm.1 giftopnm.1 pnmalias.1 \
	pnmarith.1 pnmcat.1 pnmcomp.1 pnmconvol.1 \
	pnmcrop.1 pnmcut.1 pnmdepth.1 pnmenlarge.1 \
	pnmfile.1 pnmflip.1 pnmhistmap.1 pnminvert.1 \
	pnmnlfilt.1 pnmnoraw.1 pnmpad.1 pnmpaste.1 \
	pnmscale.1 pnmtile.1 pngtopnm.1 pnmtoddif.1 \
	pnmtofits.1 pnmtopng.1 pnmtops.1 pnmtorast.1 \
	pnmtorle.1 pnmtosgi.1 pnmtosir.1 pnmtoxwd.1 \
	rasttopnm.1 rletopnm.1 sgitopnm.1 sirtopnm.1 \
	xwdtopnm.1 zeisstopnm.1 pnmgamma.1 pnmrotate.1 \
	pnmshear.1 anytopnm.1 pnmindex.1 pnmmargin.1 \
	pnmsmooth.1 tifftopnm.1 pnmtotiff.1 pstopnm.1
MAN3=	libpbm.3 libpgm.3 libppm.3 libpnm.3
MAN5=	pbm.5 pgm.5 ppm.5 pnm.5
d23 3
a25 6
# make sure our TIFF library is used
	${MV} -f ${WRKSRC}/libtiff ${WRKSRC}/libtiff.notused
# move updates into source tree
	cd ${WRKSRC};\
	${MV} ../*pcx*.? ppm;\
	${MV} ../*rle*.? ../*png*.? pnm
@


1.2
log
@when previously updating tiff34 to install as libtiff the shared
version was left at 1.0.  Oops.  The old tiff (3.3) installed as
libtiff.so.3.3. Install tiff34 as libtiff.so.3.4 but keep the libtiff34
link at version 1.0.  confusing but it seems to work correctly.
Update all ports that depend upon tiff so the dependency is on
tiff.3.4.
@
text
@d4 1
a4 1
# Whom:			Oleg Safiullin <form@@vs.itam.nsc.ru>
d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/05/14 05:41:13 form Exp $
d21 1
a21 1
MAINTAINER=	form@@vs.itam.nsc.ru
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.0 1998/05/14 11:20:23 form Exp $
d24 1
a24 1
		tiff34\\.1:${PORTSDIR}/graphics/tiff34 \
@


1.1.1.1
log
@netpbm-94.3.1, image converter of many formats
@
text
@@


1.1.1.2
log
@add netpbm port
@
text
@d1 8
a8 2
# $OpenBSD$
# $NetBSD: Makefile,v 1.25 1999/03/04 14:18:54 tron Exp $
d10 2
a11 2
DISTNAME=	netpbm-1mar1994
PKGNAME=	netpbm-19940301
d13 13
a25 2
MASTER_SITES=	ftp://ftp.wustl.edu/graphics/graphics/packages/NetPBM/ \
		ftp://ftp.informatik.uni-oldenburg.de/pub/netpbm/
d27 2
a28 3
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} pcxtoppm.tar.gz rletopnm.tar.gz pnmtopng-2.37.1.tar.gz

MAINTAINER=	brad@@openbsd.org
d30 47
a76 7
LIB_DEPENDS=	tiff:${PORTSDIR}/graphics/tiff34 \
		jpeg:${PORTSDIR}/graphics/jpeg \
		png:${PORTSDIR}/graphics/png

WRKSRC=		${WRKDIR}/netpbm
MAKE_ENV +=	PREFIX=${PREFIX} MANCP="${INSTALL_MAN}"
NO_CONFIGURE=	yes
d79 6
a84 3
	cd ${WRKSRC}; \
	${MV} ../*pcx*.? ppm; \
	${MV} ../*rle*.? ../*png*.? pnm;
@

