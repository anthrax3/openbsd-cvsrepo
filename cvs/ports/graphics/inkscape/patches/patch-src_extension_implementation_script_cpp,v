head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.2
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.4.0.6
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2;
locks; strict;
comment	@# @;


1.5
date	2017.02.24.08.05.34;	author landry;	state Exp;
branches;
next	1.4;
commitid	dFRJD7zj7jKlAOCL;

1.4
date	2015.03.24.18.45.12;	author landry;	state Exp;
branches;
next	1.3;
commitid	ZZBbL5YaVjtff4Ad;

1.3
date	2013.10.24.23.28.21;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2013.10.22.00.15.00;	author edd;	state Exp;
branches;
next	1.1;

1.1
date	2013.01.07.20.03.42;	author jasper;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2013.01.07.20.45.40;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to inkscape 0.92.0, from Rafael Sadowski.
@
text
@$OpenBSD: patch-src_extension_implementation_script_cpp,v 1.4 2015/03/24 18:45:12 landry Exp $
--- src/extension/implementation/script.cpp.orig	Mon Jan  2 10:44:59 2017
+++ src/extension/implementation/script.cpp	Tue Jan 24 22:01:33 2017
@@@@ -83,14 +83,14 @@@@ void Script::pump_events (void) {
     the given interpreter to a custom one per user.
 */
 Script::interpreter_t const Script::interpreterTab[] = {
-        {"perl",   "perl-interpreter",   "perl"   },
+        {"perl",   "perl-interpreter",   "/usr/bin/perl"   },
 #ifdef WIN32
         {"python", "python-interpreter", "pythonw" },
 #else
-        {"python", "python-interpreter", "python" },
+        {"python", "python-interpreter", "${MODPY_BIN}" },
 #endif
-        {"ruby",   "ruby-interpreter",   "ruby"   },
-        {"shell",  "shell-interpreter",  "sh"     },
+        {"ruby",   "ruby-interpreter",   "${RUBY}"   },
+        {"shell",  "shell-interpreter",  "/bin/sh"     },
         { NULL,    NULL,                  NULL    }
 };
 
@


1.4
log
@Update to inkscape 0.91.

See https://inkscape.org/en/news/2015/01/30/inkscape-version-091-is-released/
and http://wiki.inkscape.org/wiki/index.php/Release_notes/0.91 for details

ok jung@@ abieber@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/extension/implementation/script.cpp.orig	Tue Mar 17 22:42:05 2015
+++ src/extension/implementation/script.cpp	Tue Mar 17 22:42:58 2015
@@@@ -79,14 +79,14 @@@@ void Script::pump_events (void) {
@


1.3
log
@Fix inkscape extensions.

OK sthen@@, zhuk@@ and with input from Kirill Bychk and James Turner.
@
text
@d1 4
a4 12
$OpenBSD: patch-src_extension_implementation_script_cpp,v 1.2 2013/10/22 00:15:00 edd Exp $

Security fix for CVE-2012-6076 inkscape: Reads .eps files from /tmp instead of current working directory

Patch taken from Debian:
http://patch-tracker.debian.org/patch/series/view/inkscape/0.48.3.1-1.3/04-fix-LP911146.diff

Also patch in correct interpreter paths.

--- src/extension/implementation/script.cpp.orig	Thu Dec 13 17:00:46 2012
+++ src/extension/implementation/script.cpp	Tue Oct 22 13:02:20 2013
@@@@ -85,14 +85,14 @@@@ void Script::pump_events (void) {
a22 16
@@@@ -956,7 +956,14 @@@@ int Script::execute (const std::list<std::string> &in_
     // assemble the rest of argv
     std::copy(in_params.begin(), in_params.end(), std::back_inserter(argv));
     if (!filein.empty()) {
-        argv.push_back(filein);
+        if(Glib::path_is_absolute(filein))
+            argv.push_back(filein);
+        else {
+            std::vector<std::string> buildargs;
+            buildargs.push_back(Glib::get_current_dir());
+            buildargs.push_back(filein);
+            argv.push_back(Glib::build_filename(buildargs));
+        }
     }
 
     int stdout_pipe, stderr_pipe;
@


1.2
log
@Update to inkscape-0.48.4.

OK zhuk@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_extension_implementation_script_cpp,v 1.1 2013/01/07 20:03:42 jasper Exp $
d8 2
d11 20
a30 1
+++ src/extension/implementation/script.cpp	Thu Oct 10 14:50:24 2013
@


1.1
log
@Security fix for CVE-2012-6076 inkscape: Reads .eps files from /tmp instead of current working directory
@
text
@d1 1
a1 1
$OpenBSD$
d8 3
a10 3
--- src/extension/implementation/script.cpp.orig	Fri Jul  8 20:25:09 2011
+++ src/extension/implementation/script.cpp	Mon Jan  7 19:10:54 2013
@@@@ -936,7 +936,14 @@@@ int Script::execute (const std::list<std::string> &in_
@


1.1.2.1
log
@Security fix for CVE-2012-6076 inkscape: Reads .eps files from /tmp instead of current working directory
@
text
@d1 1
a1 1
$OpenBSD: patch-src_extension_implementation_script_cpp,v 1.1 2013/01/07 20:03:42 jasper Exp $
@

