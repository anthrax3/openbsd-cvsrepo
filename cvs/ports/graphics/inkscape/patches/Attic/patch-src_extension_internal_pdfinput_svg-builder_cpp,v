head	1.3;
access;
symbols
	OPENBSD_5_4:1.2.0.6
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2013.10.22.00.15.00;	author edd;	state dead;
branches;
next	1.2;

1.2
date	2012.07.13.15.10.47;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.08.20.38.00;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to inkscape-0.48.4.

OK zhuk@@
@
text
@$OpenBSD: patch-src_extension_internal_pdfinput_svg-builder_cpp,v 1.2 2012/07/13 15:10:47 kili Exp $

Fix build with poppler-0.20 (from arch linux) png-1.5.

--- src/extension/internal/pdfinput/svg-builder.cpp.orig	Fri Jul  8 20:25:09 2011
+++ src/extension/internal/pdfinput/svg-builder.cpp	Thu Jul 12 18:28:52 2012
@@@@ -961,9 +961,7 @@@@ void SvgBuilder::updateFont(GfxState *state) {
     _font_style = sp_repr_css_attr_new();
     GfxFont *font = state->getFont();
     // Store original name
-    if (font->getOrigName()) {
-        _font_specification = font->getOrigName()->getCString();
-    } else if (font->getName()) {
+    if (font->getName()) {
         _font_specification = font->getName()->getCString();
     } else {
         _font_specification = (char*) "Arial";
@@@@ -1443,7 +1441,7 @@@@ Inkscape::XML::Node *SvgBuilder::_createImage(Stream *
         return NULL;
     }
     // Set error handler
-    if (setjmp(png_ptr->jmpbuf)) {
+    if (setjmp(png_jmpbuf(png_ptr))) {
         png_destroy_write_struct(&png_ptr, &info_ptr);
         return NULL;
     }
@


1.2
log
@Fix build with poppler-0.20.

ok aja@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_extension_internal_pdfinput_svg-builder_cpp,v 1.1 2011/07/08 20:38:00 naddy Exp $
@


1.1
log
@Fix build with png-1.5.
All fixes by yours truly.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
Fix build with png-1.5.
d5 14
a18 3
--- src/extension/internal/pdfinput/svg-builder.cpp.orig	Wed Jul  6 19:01:29 2011
+++ src/extension/internal/pdfinput/svg-builder.cpp	Wed Jul  6 19:01:45 2011
@@@@ -1443,7 +1443,7 @@@@ Inkscape::XML::Node *SvgBuilder::_createImage(Stream *
@

