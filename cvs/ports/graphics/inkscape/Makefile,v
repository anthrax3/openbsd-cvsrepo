head	1.62;
access;
symbols
	OPENBSD_6_1:1.58.0.2
	OPENBSD_6_1_BASE:1.58
	OPENBSD_6_0:1.52.0.2
	OPENBSD_6_0_BASE:1.52
	OPENBSD_5_9:1.48.0.2
	OPENBSD_5_9_BASE:1.48
	OPENBSD_5_8:1.44.0.4
	OPENBSD_5_8_BASE:1.44
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.39.0.2
	OPENBSD_5_6_BASE:1.39
	OPENBSD_5_5:1.38.0.2
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.34.0.2
	OPENBSD_5_4_BASE:1.34
	OPENBSD_5_3:1.29.0.2
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.26.0.2
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.2
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.13.0.4
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	landry_20080404:1.1.1.1
	benoitc:1.1.1;
locks; strict;
comment	@# @;


1.62
date	2017.07.16.19.18.56;	author espie;	state Exp;
branches;
next	1.61;
commitid	tt0GhWK5c4uf9ILG;

1.61
date	2017.05.31.08.08.16;	author espie;	state Exp;
branches;
next	1.60;
commitid	ij92FtFXiSiT1ani;

1.60
date	2017.05.22.15.02.40;	author espie;	state Exp;
branches;
next	1.59;
commitid	wo3Z1oJQadUFE2n1;

1.59
date	2017.04.10.11.46.21;	author sthen;	state Exp;
branches;
next	1.58;
commitid	BLsh88fJB8thZTwY;

1.58
date	2017.03.25.11.45.47;	author landry;	state Exp;
branches;
next	1.57;
commitid	tdoav8YaCMcAKP9w;

1.57
date	2017.03.10.20.09.50;	author naddy;	state Exp;
branches;
next	1.56;
commitid	XqHgxYwldVKppjMg;

1.56
date	2017.02.27.19.42.43;	author naddy;	state Exp;
branches;
next	1.55;
commitid	7nXvvMMtnnvu1iXl;

1.55
date	2017.02.25.20.44.13;	author naddy;	state Exp;
branches;
next	1.54;
commitid	lN5JgGsyiD8XaUWc;

1.54
date	2017.02.24.08.05.34;	author landry;	state Exp;
branches;
next	1.53;
commitid	dFRJD7zj7jKlAOCL;

1.53
date	2016.12.17.19.06.28;	author zhuk;	state Exp;
branches;
next	1.52;
commitid	2tbIWhRa2x2aDx58;

1.52
date	2016.07.04.17.38.40;	author landry;	state Exp;
branches;
next	1.51;
commitid	xLmkTxHzDDISOuqv;

1.51
date	2016.07.04.16.57.46;	author landry;	state Exp;
branches;
next	1.50;
commitid	LGRRas0kOH17qtrG;

1.50
date	2016.06.04.07.00.28;	author landry;	state Exp;
branches;
next	1.49;
commitid	Z2VkdKOVTyvzf8f4;

1.49
date	2016.04.18.07.57.55;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	cd7r8vJEarApwyhX;

1.48
date	2016.02.05.22.27.25;	author sthen;	state Exp;
branches
	1.48.2.1;
next	1.47;
commitid	t6Iyj5kjarsHRgOE;

1.47
date	2015.11.29.10.45.22;	author sthen;	state Exp;
branches;
next	1.46;
commitid	l5iI7PIfKGwRMqud;

1.46
date	2015.11.06.20.37.34;	author sthen;	state Exp;
branches;
next	1.45;
commitid	PjPpZyw8X2OGSgMF;

1.45
date	2015.09.24.10.38.17;	author ajacoutot;	state Exp;
branches;
next	1.44;
commitid	VqLgEMoCXzaVJ14E;

1.44
date	2015.05.29.12.24.37;	author ajacoutot;	state Exp;
branches;
next	1.43;
commitid	gSknIzPzUaJoiEik;

1.43
date	2015.03.30.22.48.12;	author sthen;	state Exp;
branches;
next	1.42;
commitid	OKB9lt6ZnKq8vy4F;

1.42
date	2015.03.27.08.11.28;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	mHt3hIg3nxq5XDcy;

1.41
date	2015.03.24.18.45.11;	author landry;	state Exp;
branches;
next	1.40;
commitid	ZZBbL5YaVjtff4Ad;

1.40
date	2014.12.13.18.58.37;	author kili;	state Exp;
branches;
next	1.39;
commitid	YPltmhZ0X914VUC3;

1.39
date	2014.07.10.10.19.45;	author robert;	state Exp;
branches;
next	1.38;
commitid	pDo6ryS5FvVJMc3R;

1.38
date	2013.10.24.23.28.21;	author edd;	state Exp;
branches;
next	1.37;

1.37
date	2013.10.22.00.14.59;	author edd;	state Exp;
branches;
next	1.36;

1.36
date	2013.10.01.09.07.18;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2013.08.20.22.05.55;	author zhuk;	state Exp;
branches;
next	1.34;

1.34
date	2013.06.28.12.02.30;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2013.06.04.18.41.48;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2013.04.07.10.37.14;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2013.03.21.08.45.18;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2013.03.11.11.10.53;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2013.01.11.13.44.24;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2013.01.07.20.03.42;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2012.08.26.07.19.26;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2012.07.13.15.10.47;	author kili;	state Exp;
branches
	1.26.2.1;
next	1.25;

1.25
date	2012.03.23.13.28.25;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2011.11.02.08.46.37;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.16.10.02.37;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2011.09.11.11.19.12;	author armani;	state Exp;
branches;
next	1.21;

1.21
date	2011.06.02.17.09.31;	author kili;	state Exp;
branches;
next	1.20;

1.20
date	2011.05.16.19.39.18;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.17.08.05.14;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.24.21.21.01;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.18.13.14;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.11.08.14.42;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.05.08.57.47;	author armani;	state Exp;
branches;
next	1.14;

1.14
date	2010.09.13.17.52.53;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2009.12.22.16.06.41;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.12.04.20.12.35;	author kili;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.10.06.31.45;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2009.06.24.22.44.45;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.01.25.00.29.03;	author stsp;	state Exp;
branches;
next	1.8;

1.8
date	2009.01.11.22.59.42;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2008.11.20.18.24.20;	author okan;	state Exp;
branches;
next	1.6;

1.6
date	2008.11.20.13.32.17;	author okan;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.03.11.17.17;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2008.07.25.20.48.12;	author martynas;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.29.20.29.53;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.05.10.23.01;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.04.14.37.26;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.04.04.14.37.26;	author landry;	state Exp;
branches;
next	;

1.26.2.1
date	2013.01.07.20.45.40;	author jasper;	state Exp;
branches;
next	;

1.48.2.1
date	2016.05.06.21.35.59;	author sthen;	state Exp;
branches;
next	;
commitid	vDjdgur9VOwg5QQm;


desc
@@


1.62
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.61 2017/05/31 08:08:16 espie Exp $

COMMENT =	SVG vector drawing application

DISTNAME =	inkscape-0.92.1
CATEGORIES =	graphics

MASTER_SITES =	https://media.inkscape.org/dl/resources/file/
HOMEPAGE =	https://www.inkscape.org/
EXTRACT_SUFX =	.tar.bz2
DISTFILES =	${DISTNAME}${EXTRACT_SUFX}{${DISTNAME}.tar_XlpI7qT.bz2}

MAINTAINER =	Rafael Sadowski <rafael@@sizeofvoid.org>

# GPLv2 and LGPLv2.1
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += ICE Magick++-6.Q16 MagickCore-6.Q16 MagickWand-6.Q16
WANTLIB += SM X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB += Xrandr Xrender Xt aspell atk-1.0 atkmm-1.6 bz2 c cairo
WANTLIB += cairomm-1.0 djvulibre enchant exif expat ffi fftw3
WANTLIB += fontconfig freetype gc gdk-x11-2.0 gdk_pixbuf-2.0 gdkmm-2.4
WANTLIB += gio-2.0 giomm-2.4 glib-2.0 glibmm-2.4 gmodule-2.0 gobject-2.0
WANTLIB += graphite2 gsl gslcblas gthread-2.0 gtk-x11-2.0 gtkmm-2.4
WANTLIB += gtkspell harfbuzz iconv intl jbig jpeg lcms2 lzma m
WANTLIB += openjp2 pango-1.0 pangocairo-1.0 pangoft2-1.0 pangomm-1.4
WANTLIB += pcre pixman-1 png poppler poppler-glib popt potrace
WANTLIB += pthread pthread-stubs sigc-2.0 ${LIBCXX} tiff webp xcb
WANTLIB += xcb-render xcb-shm xml2 xslt ${COMPILER_LIBCXX}

MODULES=	textproc/intltool \
		lang/python \
		lang/ruby

COMPILER =	gcc

# We are just substituting paths at build time
MODPY_BUILDDEP =	No
MODRUBY_BUILDDEP =	No

# There are no (enabled) ruby extensions yet, but users may like
# to write their own extensions. Add Ruby as a soft dependency.
# Note that Python is already pulled in indirectly by py-lxml.
MODRUBY_RUNDEP =	No

BUILD_DEPENDS =	${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS} \
		devel/libtool \
		devel/boost

LIB_DEPENDS =	devel/boehm-gc \
		devel/gsl \
		devel/popt \
		devel/pango \
		graphics/ImageMagick \
		graphics/lcms2 \
		graphics/libexif \
		graphics/png \
		graphics/potrace \
		print/poppler \
		textproc/aspell/core \
		textproc/gtkspell \
		textproc/libxslt \
		x11/gtk2mm>=2.24.4

RUN_DEPENDS =	devel/desktop-file-utils \
		textproc/py-lxml \
		x11/gtk+3,-guic

USE_GMAKE =	Yes

CONFIGURE_STYLE = gnu

AUTOCONF_VERSION =	2.69
AUTOMAKE_VERSION =	1.11

CONFIGURE_ARGS =	-without-gnome-vfs
CONFIGURE_ENV =	CPPFLAGS="-I${LOCALBASE}/include/ImageMagick \
			-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"

# XXX todo
NO_TEST =	Yes

# As discussed on the ports mailing list, remove internationalised manual
# pages, as our mandoc implementation does not yet deal with them properly.
RM_MANS =	man/el man/fr man/ja man/man1/inkscape.*.1 \
		man/sk man/zh_TW  man/de

SUBST_VARS +=	RUBY MODRUBY_REV
pre-configure:
	find ${WRKDIST} -name i18n.py \
		-exec sed -i 's,python,${MODPY_BIN},' {} +;
	${SUBST_CMD} ${WRKSRC}/src/extension/implementation/script.cpp \
		${WRKSRC}/src/main.cpp
	cd ${WRKSRC} && AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} ./autogen.sh

post-install:
.for i in ${RM_MANS}
	rm -Rf ${PREFIX}/${i}
.endfor

.include <bsd.port.mk>
@


1.61
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2017/05/22 15:02:40 espie Exp $
d29 1
a29 1
WANTLIB += xcb-render xcb-shm xml2 xslt ${LIBECXX}
@


1.60
log
@allow build with clang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2017/04/10 11:46:21 sthen Exp $
d35 1
a35 1
WANT_CXX =	base gcc
@


1.59
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2017/03/25 11:45:47 landry Exp $
d29 1
a29 1
WANTLIB += xcb-render xcb-shm xml2 xslt
d33 1
a33 2
		lang/ruby \
		gcc4
d35 1
a35 2
MODGCC4_ARCHS=	*
MODGCC4_LANGS=	c++
@


1.58
log
@Update to inkscape 0.92.1, from Rafael Sadowski, tested by edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2017/03/10 20:09:50 naddy Exp $
d28 1
a28 1
WANTLIB += pthread pthread-stubs sigc-2.0 stdc++ tiff webp xcb
@


1.57
log
@Add dependency on graphics/potrace, which was already picked up by
configure if installed.  From maintainer Rafael Sadowski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2017/02/27 19:42:43 naddy Exp $
d5 1
a5 1
DISTNAME =	inkscape-0.92.0
a6 1
REVISION =	0
d8 1
a8 1
MASTER_SITES =	https://inkscape.org/gallery/item/10552/
d11 1
@


1.56
log
@autoconf also needs libtool.m4; from maintainer Rafael Sadowski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2017/02/25 20:44:13 naddy Exp $
d7 1
d27 3
a29 3
WANTLIB += pcre pixman-1 png poppler poppler-glib popt pthread
WANTLIB += pthread-stubs sigc-2.0 stdc++ tiff webp xcb xcb-render
WANTLIB += xcb-shm xml2 xslt z
d61 1
@


1.55
log
@add missing autotool dependencies; from maintainer Rafael Sadowski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2017/02/24 08:05:34 landry Exp $
d49 1
@


1.54
log
@Update to inkscape 0.92.0, from Rafael Sadowski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/12/17 19:06:28 zhuk Exp $
d47 3
a49 1
BUILD_DEPENDS =	devel/boost
@


1.53
log
@Unbreak after poppler switch from openjpeg to openjp2.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.52 2016/07/04 17:38:40 landry Exp $

# XXX check if still needed at next update
CXXFLAGS +=	-std=c++11
d5 1
a5 1
DISTNAME =	inkscape-0.91
a6 1
REVISION =	10
d8 3
a10 2
MASTER_SITES =	https://inkscape.org/en/gallery/item/3854/
HOMEPAGE =	http://www.inkscape.org/
d25 4
a28 4
WANTLIB += openjp2 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pangomm-1.4 pcre pixman-1 png poppler poppler-glib
WANTLIB += popt pthread pthread-stubs sigc-2.0 stdc++ tiff webp
WANTLIB += xcb xcb-render xcb-shm xml2 xslt z
d32 2
a33 1
		lang/ruby
d35 2
a36 4
# c++11
MODULES +=	gcc4
MODGCC4_ARCHS =	*
MODGCC4_LANGS =	c++
d52 1
d68 1
d70 3
a72 1
AUTOCONF_VERSION = 2.69
d76 1
a76 1
			  -I${LOCALBASE}/include -I${X11BASE}/include" \
d79 1
d85 1
a85 1
		man/sk man/zh_TW
d89 6
a94 1
	${SUBST_CMD} ${WRKSRC}/src/extension/implementation/script.cpp
@


1.52
log
@Tidy up Makefile, also from Rafael Sadowski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/07/04 16:57:46 landry Exp $
d10 1
a10 1
REVISION =	9
d28 1
a28 1
WANTLIB += openjp2 openjpeg pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.51
log
@Add null check for boost::optional<Geom::Crossing> and return empty
OptCrossing to fix a crash with snapping, all from Rafael Sadowski,
thanks!

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2016/06/04 07:00:28 landry Exp $
d4 1
a4 1
CXXFLAGS +=		-std=c++11
d6 1
a6 1
COMMENT=	SVG vector drawing application
d8 3
a10 3
DISTNAME=	inkscape-0.91
CATEGORIES=	graphics
REVISION=	9
d13 1
a13 1
HOMEPAGE=	http://www.inkscape.org/
d18 1
a18 1
PERMIT_PACKAGE_CDROM=	Yes
d38 3
a40 3
MODULES +=		gcc4
MODGCC4_ARCHS=		*
MODGCC4_LANGS=		c++
d51 3
a53 2
BUILD_DEPENDS=	devel/boost
LIB_DEPENDS=	devel/boehm-gc \
d65 2
a66 1
RUN_DEPENDS=	devel/desktop-file-utils \
d70 6
a75 5
USE_GMAKE=	Yes
CONFIGURE_STYLE= gnu
#AUTOCONF_VERSION= 2.69
CONFIGURE_ARGS=	--without-gnome-vfs
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/ImageMagick \
d79 1
a79 1
NO_TEST=	Yes
d83 1
a83 1
RM_MANS=	man/el man/fr man/ja man/man1/inkscape.*.1 \
@


1.50
log
@Backport bugfix from https://bugs.launchpad.net/inkscape/+bug/1587311 to
fix crashes edd@@ was experiencing.

From Rafael Sadowski (who takes maintainership) thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/04/18 07:57:55 ajacoutot Exp $
d10 1
a10 1
REVISION=	8
@


1.49
log
@Fix build with glib2 >=2.48.0.
Drop the gettext module while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/02/05 22:27:25 sthen Exp $
d10 1
a10 1
REVISION=	7
d14 2
@


1.48
log
@Add a patch to inkscape from Rafael Sadowski, fixing very frequent segfaults
with spinbuttons with malloc's "baby junking" default (indicating a likely
use-after-free). Additional testing from Laurence Tratt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/11/29 10:45:22 sthen Exp $
d10 1
a10 1
REVISION=	6
d25 5
a29 5
WANTLIB += gtkspell harfbuzz jbig jpeg lcms2 lzma m openjp2 openjpeg
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 pangomm-1.4 pcre
WANTLIB += pixman-1 png poppler poppler-glib popt pthread pthread-stubs
WANTLIB += sigc-2.0 stdc++ tiff webp xcb xcb-render xcb-shm xml2
WANTLIB += xslt z
d31 1
a31 2
MODULES=	devel/gettext \
		textproc/intltool \
@


1.48.2.1
log
@bump users of MagickWand-6.Q16 and Magick++-6.Q16 in -stable due to
shlib major bump in ImageMagick update; thanks jasper for the list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/02/05 22:27:25 sthen Exp $
d10 1
a10 1
REVISION=	7
@


1.47
log
@sync WANTLIB; ImageMagick changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/11/06 20:37:34 sthen Exp $
d10 1
a10 1
REVISION=	5
@


1.46
log
@fix following ImageMagick update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/09/24 10:38:17 ajacoutot Exp $
d10 1
a10 1
REVISION=	4
d18 8
a25 8
WANTLIB += ICE Magick++-6.Q16 MagickCore-6.Q16 MagickWand-6.Q16 SM X11
WANTLIB += Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama Xrandr Xrender
WANTLIB += Xt aspell atk-1.0 atkmm-1.6 bz2 c cairo cairomm-1.0
WANTLIB += djvulibre enchant exif expat ffi fftw3 fontconfig freetype
WANTLIB += gc gdk-x11-2.0 gdk_pixbuf-2.0 gdkmm-2.4 gio-2.0 giomm-2.4
WANTLIB += glib-2.0 glibmm-2.4 gmodule-2.0 gobject-2.0 graphite2
WANTLIB += gsl gslcblas gthread-2.0 gtk-x11-2.0 gtkmm-2.4 gtkspell
WANTLIB += harfbuzz jasper jbig jpeg lcms2 ltdl lzma m openjpeg
d28 2
a29 2
WANTLIB += sigc-2.0 stdc++ tiff webp wmf-0.2 wmflite-0.2 xcb xcb-render
WANTLIB += xcb-shm xml2 xslt z
@


1.45
log
@Needs the gcc4 MODULE for c++11 support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/05/29 12:24:37 ajacoutot Exp $
d10 1
a10 1
REVISION=	3
d18 2
a19 2
WANTLIB += ICE Magick++ MagickCore MagickWand SM X11 Xcomposite
WANTLIB += Xcursor Xdamage Xext Xfixes Xi Xinerama Xrandr Xrender
@


1.44
log
@Regen WANTLIB to unbreak runtime because of missing libs.

reported by Jona Joachim
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.43 2015/03/30 22:48:12 sthen Exp $
d10 1
a10 1
REVISION=	2
d35 5
@


1.43
log
@missing dep on libexif. regen/tidy wantlib while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/03/27 08:11:28 ajacoutot Exp $
d7 1
a7 1
REVISION=	1
d15 11
a25 5
WANTLIB += ICE SM X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi
WANTLIB += Xinerama Xrandr Xrender Xt bz2 c expat ffi fontconfig
WANTLIB += freetype gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 gthread-2.0 jasper jpeg lzma m pcre pixman-1
WANTLIB += png pthread pthread-stubs stdc++ tiff xcb xcb-render
@


1.42
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/03/24 18:45:11 landry Exp $
d7 1
a7 1
REVISION=	0
d15 6
a20 12
WANTLIB += Magick++ MagickCore X11 Xcomposite Xcursor Xdamage
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender aspell atk-1.0
WANTLIB += atkmm-1.6 c cairo cairomm-1.0 fontconfig freetype gc
WANTLIB += gdk-x11-2.0 gdk_pixbuf-2.0 gdkmm-2.4 gio-2.0 giomm-2.4
WANTLIB += glib-2.0 glibmm-2.4 gobject-2.0 gsl gslcblas gthread-2.0
WANTLIB += gtk-x11-2.0 gtkmm-2.4 gtkspell lcms2 m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pangomm-1.4 png poppler poppler-glib popt
WANTLIB += pthread sigc-2.0 stdc++ xml2 xslt z
WANTLIB += ICE MagickWand SM Xt bz2 djvulibre enchant expat ffi
WANTLIB += fftw3 gmodule-2.0 graphite2 harfbuzz jasper jbig jpeg
WANTLIB += ltdl lzma openjpeg pcre pixman-1 pthread-stubs tiff
WANTLIB += webp wmf-0.2 wmflite-0.2 xcb xcb-render xcb-shm
d42 1
@


1.41
log
@Update to inkscape 0.91.

See https://inkscape.org/en/news/2015/01/30/inkscape-version-091-is-released/
and http://wiki.inkscape.org/wiki/index.php/Release_notes/0.91 for details

ok jung@@ abieber@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/12/13 18:58:37 kili Exp $
d7 1
d56 1
a56 1
		x11/gtk+2,-guic
@


1.40
log
@Update to inkscape-0.48.5, and patch to let it work with poppler-0.29.

Tested by Fred (openbsd at crowsons.com), thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/07/10 10:19:45 robert Exp $
d5 1
a5 1
DISTNAME=	inkscape-0.48.5
a6 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=inkscape/}
d8 1
d22 4
d58 2
a59 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
@


1.39
log
@unbreak after boehm-gc update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/10/24 23:28:21 edd Exp $
d5 1
a5 2
DISTNAME=	inkscape-0.48.4
REVISION =	1
@


1.38
log
@Fix inkscape extensions.

OK sthen@@, zhuk@@ and with input from Kirill Bychk and James Turner.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/10/22 00:14:59 edd Exp $
d6 1
a6 1
REVISION =	0
@


1.37
log
@Update to inkscape-0.48.4.

OK zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/10/01 09:07:18 ajacoutot Exp $
d6 1
d25 12
a36 1
		textproc/intltool
d68 4
@


1.36
log
@distfiles.bsdfrog.org: http -> https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/08/20 22:05:55 zhuk Exp $
d5 1
a5 2
DISTNAME=	inkscape-0.48.2
REVISION=	8
a8 6
# error: #error "Only <glib.h> can be included directly."
# (patch from Fedora)
PATCHFILES=	inkscape-glib-2.32.patch:0
PATCH_DIST_STRIP=-p1
MASTER_SITES0=	https://distfiles.bsdfrog.org/

d19 1
a19 1
WANTLIB += gtk-x11-2.0 gtkmm-2.4 gtkspell lcms m pango-1.0 pangocairo-1.0
d31 1
a31 1
		graphics/lcms \
a42 1
USE_GROFF=	Yes
d44 1
a44 1
AUTOCONF_VERSION= 2.68
d51 10
@


1.35
log
@Fixup handling of FreeDesktop goo: desktop-file-utils, gtk-update-icon-cache
and shared-mime-info. Found by portcheck.

A lot of input from and okay ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/06/28 12:02:30 ajacoutot Exp $
d14 1
a14 1
MASTER_SITES0=	http://distfiles.bsdfrog.org/
@


1.34
log
@Remove the gtkmm PATCHFILES, it's not needed anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/06/04 18:41:48 naddy Exp $
d6 1
a6 1
REVISION=	7
d46 2
a47 1
		textproc/py-lxml
@


1.33
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/04/07 10:37:14 ajacoutot Exp $
d6 1
a6 1
REVISION=	6
d12 1
a12 3
# Fix build with gtk2mm>=2.24.3
PATCHFILES=	inkscape-glib-2.32.patch:0 \
		inkscape-gtkmm-2.24.3.patch:0
a35 1
		devel/pangomm \
d44 1
a44 2
		x11/gtk2mm \
		x11/gtk+2
@


1.32
log
@Fix build with gtk2mm>=2.24.3.
Regen WANTLIB/PLIST while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/03/21 08:45:18 ajacoutot Exp $
d57 1
a57 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include/ImageMagick \
@


1.31
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/03/11 11:10:53 espie Exp $
d6 1
a6 1
REVISION=	5
d12 3
a14 1
PATCHFILES=	inkscape-glib-2.32.patch:0
d23 8
a30 9
WANTLIB=	GL Magick++ MagickCore X11 Xcomposite Xcursor Xdamage \
		Xext Xfixes Xi Xinerama Xrandr Xrender \
		aspell atk-1.0 atkmm-1.6 c cairo cairomm-1.0 expat \
		fontconfig freetype gc gdk-x11-2.0 gdk_pixbuf-2.0 gdkmm-2.4 \
		gio-2.0 giomm-2.4 glib-2.0 glibmm-2.4 gobject-2.0 \
		gsl gslcblas gthread-2.0 gtk-x11-2.0 gtkmm-2.4 gtkspell \
		lcms m pango-1.0 pangocairo-1.0 pangoft2-1.0 pangomm-1.4 \
		pixman-1 png poppler poppler-glib popt pthread pthread-stubs \
		sigc-2.0 stdc++ xcb xcb-render xcb-shm xml2 xslt z
@


1.30
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/01/11 13:44:24 ajacoutot Exp $
a51 1
USE_LIBTOOL=	Yes
@


1.29
log
@Bump after libsigc++-2 -docs => -main merge.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/01/07 20:03:42 jasper Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d61 1
a61 1
NO_REGRESS=	Yes
@


1.28
log
@Security fix for CVE-2012-6076 inkscape: Reads .eps files from /tmp instead of current working directory
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/08/26 07:19:26 ajacoutot Exp $
d6 1
a6 1
REVISION=	4
@


1.27
log
@Remove uneeded patch and set proper autoconf version.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/07/13 15:10:47 kili Exp $
d6 1
a6 1
REVISION=	3
@


1.26
log
@Fix build with poppler-0.20.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/03/23 13:28:25 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
d58 1
a58 1
AUTOCONF_VERSION= 2.67
@


1.26.2.1
log
@Security fix for CVE-2012-6076 inkscape: Reads .eps files from /tmp instead of current working directory
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/07/13 15:10:47 kili Exp $
d6 1
a6 1
REVISION=	3
@


1.25
log
@Fix build with glib >= 2.31.20.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/11/02 08:46:37 jasper Exp $
d6 1
a6 1
REVISION=	1
d28 1
a28 1
		gio-2.0 giomm-2.4 glib-2.0 glibmm-2.4 gmodule-2.0 gobject-2.0 \
@


1.24
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/09/16 10:02:37 espie Exp $
d9 6
@


1.23
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/09/11 11:19:12 armani Exp $
d6 1
a6 1
REVISION=		0
d18 3
a20 3
WANTLIB=	GL Magick++ MagickCore X11 Xau Xcomposite Xcursor Xdamage \
		Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender Xxf86vm \
		aspell atk-1.0 atkmm-1.6 c cairo cairomm-1.0 drm expat \
@


1.22
log
@Bugfix update to inkscape 0.48.2 which resolves annoying segfaults on amd64.
Makes Inkscape fully usable again.

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/06/02 17:09:31 kili Exp $
d6 1
@


1.21
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/05/16 19:39:18 kili Exp $
d5 1
a5 1
DISTNAME=	inkscape-0.48.1
@


1.20
log
@Update to inkscape-0.48.1.

From brad, who had a similar but better diff than me.

ok by Benoit Chesneau (maintainer) who wants to drop maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/17 08:05:14 espie Exp $
d52 1
a52 2
CONFIGURE_ARGS=	--disable-silent-rules \
		--without-gnome-vfs
@


1.19
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/24 21:21:01 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	inkscape-0.48.0
REVISION=	0
d7 1
a7 2

MAINTAINER=	Benoit Chesneau <benoitc@@metavers.net>
d11 1
a11 3
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=inkscape/}

# GPLv2/LGPLv2.1
d17 9
a25 10
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender aspell atk-1.0 c cairo \
		cairomm-1.0 expat fontconfig freetype glib-2.0 glibmm-2.4 \
		gmodule-2.0 gobject-2.0 gsl gslcblas gthread-2.0 m \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 pthread \
		sigc-2.0 stdc++ xml2 z gio-2.0 giomm-2.4 \
		pthread-stubs xcb gc>=3 popt MagickCore Magick++ \
		lcms png xslt poppler poppler-glib atkmm-1.6 gdkmm-2.4 \
		gtkmm-2.4 pangomm-1.4 gdk-x11-2.0 gdk_pixbuf-2.0 gtk-x11-2.0 \
		gtkspell xcb-render xcb-render-util
d49 9
a57 1
USE_GROFF =	Yes
a58 10

CONFIGURE_STYLE= 	gnu
CONFIGURE_ARGS=		--disable-silent-rules --without-gnome-vfs

CPPFLAGS=		-I${LOCALBASE}/include -I${X11BASE}/include \
			-I${LOCALBASE}/include/libpng \
			-I${LOCALBASE}/include/ImageMagick

CONFIGURE_ENV=		CPPFLAGS="${CPPFLAGS}" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
@


1.18
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 18:13:14 espie Exp $
d27 1
a27 1
		pthread-stubs xcb gc.>=3 popt MagickCore Magick++ \
d35 16
a50 16
BUILD_DEPENDS=	::devel/boost
LIB_DEPENDS=	::devel/boehm-gc \
		::devel/gsl \
		::devel/pangomm \
		::devel/popt \
		::graphics/ImageMagick \
		::graphics/lcms \
		::graphics/png \
		::print/poppler \
		::textproc/aspell/core \
		::textproc/gtkspell \
		::textproc/libxslt \
		::x11/gtk2mm \
		::x11/gtk+2
RUN_DEPENDS=	::devel/desktop-file-utils \
		::textproc/py-lxml
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/11 08:14:42 jasper Exp $
a53 1
USE_X11=	Yes
@


1.16
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/05 08:57:47 armani Exp $
d55 1
@


1.15
log
@Update inkscape to 0.48.0, from brad

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/09/13 17:52:53 jasper Exp $
d6 1
d24 1
a24 1
		glitz gmodule-2.0 gobject-2.0 gsl gslcblas gthread-2.0 m \
@


1.14
log
@- remove unneeded patch
- switch to new LIB_DEPENDS/REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/12/22 16:06:41 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	inkscape-0.46
REVISION=	12
d21 1
a21 1
		Xft Xi Xinerama Xrandr Xrender atk-1.0 c cairo \
d23 1
a23 1
		glitz gmodule-2.0 gobject-2.0 gthread-2.0 m \
d26 1
a26 1
		pthread-stubs xcb gc.>=3 popt MagickCore Magick++ MagickWand \
a34 1

d36 2
d42 3
a45 1
		::print/poppler \
d47 1
a47 6
		::devel/pangomm \
		::x11/gtk+2 \
		::textproc/gtkspell

FAKE_FLAGS=	itlocaledir="${PREFIX}/share/locale/"

d56 2
a57 6
CONFIGURE_STYLE= 	autoconf gnu
AUTOCONF_VERSION=	2.61

CONFIGURE_ARGS=		--with-popt --mandir=${PREFIX}/man \
			--with-xft --without-gnome-print \
			--without-gnome-vfs --enable-lcms
d64 1
a64 4
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
			PKG_CONFIG_PATH="${X11BASE}/lib/pkgconfig" \
			GMSGFMT="${LOCALBASE}/bin/msgfmt" \
			MSGFMT="${LOCALBASE}/bin/msgfmt"
@


1.13
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/12/04 20:12:35 kili Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p11
d27 4
a30 1
		pthread-stubs xcb
d37 13
a49 11
LIB_DEPENDS=	gc.>=3::devel/boehm-gc \
		popt::devel/popt \
		MagickCore,Magick++,MagickWand::graphics/ImageMagick \
		lcms::graphics/lcms \
		png::graphics/png \
		xslt::textproc/libxslt \
		poppler.>=7.0,poppler-glib::print/poppler \
		atkmm-1.6,gdkmm-2.4,gtkmm-2.4::x11/gtk2mm \
		pangomm-1.4::devel/pangomm \
		gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		gtkspell::textproc/gtkspell
@


1.12
log
@Unbreak after the latest poppler update.
While here, update license marker.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/08/10 06:31:45 kili Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p10
@


1.11
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/06/24 22:44:45 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p9
d15 1
a15 1
# GPL
d40 1
a40 1
		poppler,poppler-glib::print/poppler \
@


1.10
log
@sync WANTLIB, bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/01/25 00:29:03 stsp Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p8
d26 2
a27 1
		sigc-2.0 stdc++ xml2 z gio-2.0 giomm-2.4
@


1.9
log
@Fix build. Including <gtk/gtkclist.h> directly causes a circular include
dependency: gtkclist.h depends on gtk.h depends on gtkctree.h depends on
gtkclist.h -> boom. Simply including <gtk/gtk.h> works, though.
OK maintainer, and also tested on amd64 by Jonathan Armani, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/01/11 22:59:42 landry Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p7
d26 1
a26 1
		sigc-2.0 stdc++ xml2 z
@


1.8
log
@Fix LIB_DEPENDS nom that pangomm is in its own port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/11/20 18:24:20 okan Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p6
@


1.7
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/11/20 13:32:17 okan Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
d40 2
a41 1
		atkmm-1.6,gdkmm-2.4,gtkmm-2.4,pangomm-1.4::x11/gtk2mm \
@


1.6
log
@- adapt for updated ImageMagick
- fixup WANTLIB

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/03 11:17:17 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
d21 2
a22 2
WANTLIB=	ICE SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xft Xi Xinerama Xrandr Xrender Xt atk-1.0 bz2 c cairo \
d24 1
a24 1
		glitz gmodule-2.0 gobject-2.0 gthread-2.0 jasper jbig jpeg m \
d26 1
a26 1
		sigc-2.0 stdc++ tiff wmflite xml2 z
@


1.5
log
@Add patch from upstream to fix build with perl 5.10.0.
Regen plist while there. ok phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/07/25 20:48:12 martynas Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d35 1
a35 1
		Magick,Magick++,Wand::graphics/ImageMagick \
d60 2
a61 1
			-I${LOCALBASE}/include/libpng
@


1.4
log
@math.h has macros for isinf, isnan, isnormal, isfinite.  remove teh
patches, it will just work.  ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/06/29 20:29:53 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.3
log
@WANTLIB+=pixman-1, and add LIB_DEPENDS on gtkspell which gets pulled
in by configure if it's installed.  ok landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/04/05 10:23:01 landry Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.2
log
@Add missing RUN_DEPENDS on textproc/py-lxml, needed by various plugins.

Spotted by ian@@, ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/04/04 14:37:26 landry Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d25 2
a26 2
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pthread sigc-2.0 stdc++ \
		tiff wmflite xml2 z
d41 2
a42 1
		gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d43 2
a44 1
RUN_DEPENDS=	::devel/desktop-file-utils
@


1.1.1.1
log
@Import inkscape-0.46, the open-source vector graphics editor.
From MAINTAINER Benoit Chesneau (benoitc at metavers dot net), Thanks !!

With tweaks and testing from ian@@, simon@@ and myself.
ok ian@@ sthen@@
@
text
@@
