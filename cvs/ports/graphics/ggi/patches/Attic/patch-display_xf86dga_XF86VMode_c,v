head	1.5;
access;
symbols
	OPENBSD_5_2:1.4.0.10
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.8
	OPENBSD_5_0:1.4.0.6
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.4
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.22
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.20
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.18
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.16
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.14
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.12
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.10
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.8
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.6
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2012.08.13.08.22.52;	author jasper;	state dead;
branches;
next	1.4;

1.4
date	2010.04.29.19.50.14;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2005.01.31.14.20.26;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.20.13.50.53;	author todd;	state dead;
branches;
next	1.1;

1.1
date	2002.12.28.19.34.51;	author todd;	state Exp;
branches;
next	;


desc
@@


1.5
log
@remove dead/unused/etc cruft

prompted by brad
ok aja@@
@
text
@$OpenBSD: patch-display_xf86dga_XF86VMode_c,v 1.4 2010/04/29 19:50:14 matthieu Exp $
--- display/xf86dga/XF86VMode.c.orig	Sat Sep 18 12:50:34 2004
+++ display/xf86dga/XF86VMode.c	Tue Apr 27 23:29:50 2010
@@@@ -1,4 +1,4 @@@@
-/* $Id: patch-display_xf86dga_XF86VMode_c,v 1.4 2010/04/29 19:50:14 matthieu Exp $
+/* $Id: patch-display_xf86dga_XF86VMode_c,v 1.4 2010/04/29 19:50:14 matthieu Exp $
 
 This is a modified version of the XF86VMode API functions for use
 internally by the LibGGI xf86dga target.  Mods by Marcus Sundberg and
@@@@ -55,7 +55,8 @@@@ from Kaleb S. KEITHLEY.
 #define NEED_EVENTS
 #define NEED_REPLIES
 #include <X11/Xlibint.h>
-#include <X11/extensions/xf86vmstr.h>
+#include <X11/extensions/xf86vmproto.h>
+#include <X11/extensions/xf86vmode.h>
 #include <X11/extensions/Xext.h>
 #include "extutil.h"
 
@@@@ -79,7 +80,8 @@@@ static char *xf86vidmode_extension_name = XF86VIDMODEN
  *                                                                           *
  *****************************************************************************/
 
-static int close_display();
+static XEXT_GENERATE_CLOSE_DISPLAY(close_display, xf86vidmode_info)
+
 static /* const */ XExtensionHooks xf86vidmode_extension_hooks = {
 	NULL,			/* create_gc */
 	NULL,			/* copy_gc */
@@@@ -98,17 +100,32 @@@@ static XEXT_GENERATE_FIND_DISPLAY(find_display, xf86vi
 				  xf86vidmode_extension_name,
 				  &xf86vidmode_extension_hooks, 0, NULL)
 
-static XEXT_GENERATE_CLOSE_DISPLAY(close_display, xf86vidmode_info)
-
-
 /*****************************************************************************
  *                                                                           *
  *		    public XFree86-VidMode Extension routines                *
  *                                                                           *
  *****************************************************************************/
- static Bool _ggi_XF86VidModeQueryExtension(Display * dpy,
-					    int *event_basep,
-					    int *error_basep)
+/* prototypes added to suppress compiler warnings */
+Bool _ggi_XF86VidModeQueryExtension(Display * dpy,
+				    int *event_basep, int *error_basep);
+Bool _ggi_XF86VidModeSetClientVersion(Display * dpy);
+Bool _ggi_XF86VidModeQueryVersion(Display * dpy, int *majorVersion,
+				  int *minorVersion);
+Bool _ggi_XF86VidModeSetGamma(Display * dpy,
+			      int screen, XF86VidModeGamma * Gamma);
+Bool _ggi_XF86VidModeGetGamma(Display * dpy,
+			      int screen, XF86VidModeGamma * Gamma);
+Bool _ggi_XF86VidModeGetAllModeLines(Display * dpy, int screen,
+				     int *modecount,
+				     XF86VidModeModeInfo *** modelinesPtr);
+Bool _ggi_XF86VidModeSwitchToMode(Display * dpy, int screen,
+				  XF86VidModeModeInfo * modeline);
+Bool _ggi_XF86VidModeLockModeSwitch(Display * dpy, int screen, int lock);
+Bool _ggi_XF86VidModeSetViewPort(Display * dpy, int screen, int x, int y);
+
+
+Bool _ggi_XF86VidModeQueryExtension(Display * dpy,
+				    int *event_basep, int *error_basep)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 
@@@@ -122,7 +139,7 @@@@ static XEXT_GENERATE_CLOSE_DISPLAY(close_display, xf86
 }
 
 
-static Bool _ggi_XF86VidModeSetClientVersion(Display * dpy)
+Bool _ggi_XF86VidModeSetClientVersion(Display * dpy)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeSetClientVersionReq *req;
@@@@ -141,8 +158,8 @@@@ static Bool _ggi_XF86VidModeSetClientVersion(Display *
 }
 
 
-static Bool _ggi_XF86VidModeQueryVersion(Display * dpy, int *majorVersion,
-					 int *minorVersion)
+Bool _ggi_XF86VidModeQueryVersion(Display * dpy, int *majorVersion,
+				  int *minorVersion)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeQueryVersionReply rep;
@@@@ -168,8 +185,8 @@@@ static Bool _ggi_XF86VidModeQueryVersion(Display * dpy
 	return True;
 }
 
-static Bool _ggi_XF86VidModeSetGamma(Display * dpy,
-				     int screen, XF86VidModeGamma * Gamma)
+Bool _ggi_XF86VidModeSetGamma(Display * dpy,
+			      int screen, XF86VidModeGamma * Gamma)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeSetGammaReq *req;
@@@@ -190,8 +207,8 @@@@ static Bool _ggi_XF86VidModeSetGamma(Display * dpy,
 }
 
 
-static Bool _ggi_XF86VidModeGetGamma(Display * dpy,
-				     int screen, XF86VidModeGamma * Gamma)
+Bool _ggi_XF86VidModeGetGamma(Display * dpy,
+			      int screen, XF86VidModeGamma * Gamma)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeGetGammaReply rep;
@@@@ -219,10 +236,9 @@@@ static Bool _ggi_XF86VidModeGetGamma(Display * dpy,
 
 /* We don't need XF86VidModeGetModeLine */
 
-static Bool _ggi_XF86VidModeGetAllModeLines(Display * dpy, int screen,
-					    int *modecount,
-					    XF86VidModeModeInfo ***
-					    modelinesPtr)
+Bool _ggi_XF86VidModeGetAllModeLines(Display * dpy, int screen,
+				     int *modecount,
+				     XF86VidModeModeInfo *** modelinesPtr)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeGetAllModeLinesReply rep;
@@@@ -322,8 +338,7 @@@@ static Bool _ggi_XF86VidModeGetAllModeLines(Display * 
 						Xfree(modelines[i]->
 						      private);
 					} else {
-						_XRead32(dpy,
-							 (char *)
+						_XRead32(dpy, (char *)
 							 modelines[i]->
 							 private,
 							 oldxmdline.
@@@@ -364,8 +379,7 @@@@ static Bool _ggi_XF86VidModeGetAllModeLines(Display * 
 						Xfree(modelines[i]->
 						      private);
 					} else {
-						_XRead(dpy,
-						       (char *)
+						_XRead(dpy, (char *)
 						       modelines[i]->
 						       private,
 						       xmdline.privsize *
@@@@ -415,8 +429,8 @@@@ static Bool _ggi_XF86VidModeGetAllModeLines(Display * 
  * bother with those functions.  
  */
 
-static Bool _ggi_XF86VidModeSwitchToMode(Display * dpy, int screen,
-					 XF86VidModeModeInfo * modeline)
+Bool _ggi_XF86VidModeSwitchToMode(Display * dpy, int screen,
+				  XF86VidModeModeInfo * modeline)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeSwitchToModeReq *req;
@@@@ -498,8 +512,7 @@@@ static Bool _ggi_XF86VidModeSwitchToMode(Display * dpy
 }
 
 
-static Bool _ggi_XF86VidModeLockModeSwitch(Display * dpy, int screen,
-					   int lock)
+Bool _ggi_XF86VidModeLockModeSwitch(Display * dpy, int screen, int lock)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeLockModeSwitchReq *req;
@@@@ -518,8 +531,7 @@@@ static Bool _ggi_XF86VidModeLockModeSwitch(Display * d
 }
 
 
-static Bool _ggi_XF86VidModeSetViewPort(Display * dpy, int screen,
-					int x, int y)
+Bool _ggi_XF86VidModeSetViewPort(Display * dpy, int screen, int x, int y)
 {
 	XExtDisplayInfo *info = find_display(dpy);
 	xXF86VidModeSetViewPortReq *req;
@


1.4
log
@Fix after recent X haders updates. ok naddy@@, todd@@ (MAINTAINER).
@
text
@d1 1
a1 1
$OpenBSD: patch-display_xf86dga_XF86VMode_c,v 1.3 2005/01/31 14:20:26 todd Exp $
d5 2
a6 2
-/* $Id: XF86VMode.c,v 1.10 2004/09/18 10:50:34 cegger Exp $
+/* $Id: patch-display_xf86dga_XF86VMode_c,v 1.3 2005/01/31 14:20:26 todd Exp $
@


1.3
log
@bring in patches from libggi-stable, prompted by broken GGI_DISPLAY=dga target
in the last release
@
text
@d1 3
a3 3
$OpenBSD$
--- display/xf86dga/XF86VMode.c.orig	Sat Sep 18 05:50:34 2004
+++ display/xf86dga/XF86VMode.c	Sun Jan 30 15:40:46 2005
d6 1
a6 1
+/* $Id: XF86VMode.c,v 1.10.2.2 2005/01/29 09:35:12 cegger Exp $
d10 11
a20 1
@@@@ -79,7 +79,8 @@@@ static char *xf86vidmode_extension_name 
d30 1
a30 1
@@@@ -98,17 +99,32 @@@@ static XEXT_GENERATE_FIND_DISPLAY(find_d
d69 1
a69 1
@@@@ -122,7 +138,7 @@@@ static XEXT_GENERATE_CLOSE_DISPLAY(close
d78 1
a78 1
@@@@ -141,8 +157,8 @@@@ static Bool _ggi_XF86VidModeSetClientVer
d89 1
a89 1
@@@@ -168,8 +184,8 @@@@ static Bool _ggi_XF86VidModeQueryVersion
d100 1
a100 1
@@@@ -190,8 +206,8 @@@@ static Bool _ggi_XF86VidModeSetGamma(Dis
d111 1
a111 1
@@@@ -219,10 +235,9 @@@@ static Bool _ggi_XF86VidModeGetGamma(Dis
d125 1
a125 1
@@@@ -322,8 +337,7 @@@@ static Bool _ggi_XF86VidModeGetAllModeLi
d135 1
a135 1
@@@@ -364,8 +378,7 @@@@ static Bool _ggi_XF86VidModeGetAllModeLi
d145 1
a145 1
@@@@ -415,8 +428,8 @@@@ static Bool _ggi_XF86VidModeGetAllModeLi
d156 1
a156 1
@@@@ -498,8 +511,7 @@@@ static Bool _ggi_XF86VidModeSwitchToMode
d166 1
a166 1
@@@@ -518,8 +530,7 @@@@ static Bool _ggi_XF86VidModeLockModeSwit
@


1.2
log
@update to 2.0.4; prompted & supplied by Eric Faurot
@
text
@d1 165
a165 14
$OpenBSD: patch-display_xf86dga_XF86VMode_c,v 1.1 2002/12/28 19:34:51 todd Exp $
--- display/xf86dga/XF86VMode.c.orig	Sat Dec 28 02:04:05 2002
+++ display/xf86dga/XF86VMode.c	Sat Dec 28 02:11:46 2002
@@@@ -37,8 +37,10 @@@@ from Kaleb S. KEITHLEY.
 /* THIS IS NOT AN X CONSORTIUM STANDARD */
 
 #define _POSIX_C_SOURCE	199309L
+#if !defined(__OpenBSD__)
 #define _POSIX_SOURCE
 #define _XOPEN_SOURCE	500L
+#endif
 #define _BSD_SOURCE
 #define _SVID_SOURCE  
 #define FUNCPROTO	15
@


1.1
log
@update to 2.0.2; based on a patch to 2.0.1 from Jim Geovedi <jim@@corebsd.or.id>
and prompting from Christoph_Egger@@t-online.de (Christoph Egger)
@
text
@d1 1
a1 1
$OpenBSD$
@

