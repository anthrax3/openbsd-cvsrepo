head	1.24;
access;
symbols
	OPENBSD_4_4:1.22.0.2
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3:1.21.0.2
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.17.0.2
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.16.0.2
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.13.0.2
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.12.0.2
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.10.0.2
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.1.1.1.0.6
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.4
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.2
	OPENBSD_3_2_BASE:1.1.1.1
	brad_2002-08-28:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2008.11.20.13.43.49;	author okan;	state dead;
branches;
next	1.23;

1.23
date	2008.10.02.20.36.04;	author simon;	state Exp;
branches;
next	1.22;

1.22
date	2008.04.01.20.47.30;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2007.11.22.17.20.56;	author okan;	state Exp;
branches;
next	1.20;

1.20
date	2007.11.19.20.11.41;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.19.18.52.05;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2007.09.15.20.09.42;	author simon;	state Exp;
branches;
next	1.17;

1.17
date	2007.05.20.19.44.47;	author steven;	state Exp;
branches;
next	1.16;

1.16
date	2007.01.31.14.34.58;	author bernd;	state Exp;
branches;
next	1.15;

1.15
date	2006.12.06.18.18.18;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2006.10.28.16.20.52;	author steven;	state Exp;
branches;
next	1.13;

1.13
date	2006.08.03.12.53.18;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2006.02.06.22.10.24;	author bernd;	state Exp;
branches;
next	1.11;

1.11
date	2006.01.27.17.40.05;	author bernd;	state Exp;
branches;
next	1.10;

1.10
date	2005.06.28.18.08.23;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2005.06.04.14.39.21;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.15.21.02.46;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2005.05.08.18.48.28;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2005.03.31.04.24.34;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2004.11.30.01.06.38;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2004.07.09.19.44.14;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.13.00.50.45;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.17.15.58.08;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.08.28.20.51.17;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.08.28.20.51.17;	author brad;	state Exp;
branches;
next	;


desc
@@


1.24
log
@graphics/ImageMagick now includes these modules, so this goes.
@
text
@# $OpenBSD: Makefile,v 1.23 2008/10/02 20:36:04 simon Exp $

SHARED_ONLY=		Yes

COMMENT=		object-oriented Perl interface to ImageMagick

VER=			6.3.6
DASHVER=		10
DISTNAME=		ImageMagick-${VER}-${DASHVER}
PKGNAME=		p5-PerlMagick-${VER}.${DASHVER}p1
CATEGORIES=		graphics devel

HOMEPAGE=		http://www.imagemagick.org
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=imagemagick/}

# http://www.imagemagick.org/script/license.php
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		freetype

RUN_DEPENDS=		:ImageMagick-${VER}.${DASHVER}:graphics/ImageMagick
BUILD_DEPENDS=		${RUN_DEPENDS} \
			::print/ghostscript/gnu:patch
LIB_DEPENDS=		Magick.>=12.1,Wand.>=12.1::graphics/ImageMagick
USE_X11=		Yes

MODULES=		cpan

WRKDIST=		${WRKDIR}/${DISTNAME:S/-${DASHVER}$//}
WRKSRC=			${WRKDIST}/PerlMagick

CFLAGS+=		-I${WRKDIR}

pre-configure:
	@@cd ${WRKDIR} && ln -s print/ghostscript/gnu/ghostscript-8.62/src ghostscript
	@@perl -pi -e 's|%%LOCALBASE%%|${LOCALBASE}|g; \
		s|%%X11BASE%%|${X11BASE}|g; \
		s|%%CFLAGS%%|${CFLAGS}|g;' ${WRKSRC}/Makefile.PL

pre-regress:
	@@perl -pi -e 's|\@@abs_top_srcdir\@@|${WRKDIST}|g; \
		s|\@@abs_top_builddir\@@|${WRKDIST}|g; \
		s|\@@MAGICK_CODER_MODULE_PATH\@@|${WRKDIST}/coder|g; \
		s|\@@MAGICK_CONFIGURE_SRC_PATH\@@|${WRKDIST}/config|g; \
		s|\@@MAGICK_CONFIGURE_BUILD_PATH\@@|${WRKDIST}/config|g; \
		s|\@@MAGICK_FILTER_MODULE_PATH\@@|${WRKDIST}/filters|g;'\
		 < ${WRKDIST}/magick.sh.in > ${WRKDIST}/magick.sh

.include <bsd.port.mk>
@


1.23
log
@bump SHARED_ONLY ports so they get updated and work with the new perl

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/04/01 20:47:30 kili Exp $
@


1.22
log
@
Necessary change after ghostscript update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/11/22 17:20:56 okan Exp $
d10 1
a10 1
PKGNAME=		p5-PerlMagick-${VER}.${DASHVER}p0
@


1.21
log
@- update to 6.3.6-10
- add libwmf support
- fix-up WANTLIB/LIB_DEPENDS

ok simon@@ merdely@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2007/11/19 20:11:41 kili Exp $
d10 1
a10 1
PKGNAME=		p5-PerlMagick-${VER}.${DASHVER}
d37 1
a37 1
	@@cd ${WRKDIR} && ln -s print/ghostscript/gnu/ghostscript-8.60/src ghostscript
@


1.20
log
@
Unbreak after the ghostscript update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/09/19 18:52:05 sthen Exp $
d7 2
a8 2
VER=			6.3.5
DASHVER=		9
d10 1
a10 1
PKGNAME=		p5-PerlMagick-${VER}.${DASHVER}p0
d21 1
a21 2
WANTLIB=		ICE SM X11 Xext bz2 freetype jasper jbig jpeg \
			lcms m png tiff xml2 z Xt
d26 1
a26 1
LIB_DEPENDS=		Magick.>=10::graphics/ImageMagick
@


1.19
log
@update to 6.3.5-9 from Giovanni Bechis; this fixes various bugs
including a number of security vulnerabilities; see
http://www.imagemagick.org/script/changelog.php

ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/09/15 20:09:42 simon Exp $
d10 1
a10 1
PKGNAME=		p5-PerlMagick-${VER}.${DASHVER}
d38 1
a38 1
	@@cd ${WRKDIR} && ln -s print/ghostscript/gnu/ghostscript-8.54-gpl/src ghostscript
@


1.18
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/05/20 19:44:47 steven Exp $
d7 2
a8 2
VER=			6.3.4
DASHVER=		1
@


1.17
log
@update to 6.3.4.1

feedback/ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/01/31 14:34:58 bernd Exp $
d5 1
a5 1
COMMENT=		"object-oriented Perl interface to ImageMagick"
@


1.16
log
@Update to ImageMagick/p5-PerlMagick 6.3.2.1.

Initial diff from steven@@, updated to -1 by me.
Tested by steven@@ and Joachim Schipper. Thanks!

Removed myself from MAINTAINER.

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/12/06 18:18:18 jasper Exp $
d7 1
a7 1
VER=			6.3.2
@


1.15
log
@final graphics/ cpanification.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/10/28 16:20:52 steven Exp $
d7 2
a8 2
VER=			6.3.0
DASHVER=		0
a14 2

MAINTAINER=		Bernd Ahlers <bernd@@openbsd.org>
@


1.14
log
@update to ImageMagick 6.3.0.0

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/08/03 12:53:18 espie Exp $
d31 2
a32 1
CONFIGURE_STYLE=	perl
@


1.13
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/02/06 22:10:24 bernd Exp $
d7 2
a8 2
VER=			6.2.6
DASHVER=		1
d18 1
a18 1
# http://www.imagemagick.org/www/Copyright.html
d27 2
a28 1
BUILD_DEPENDS=		${RUN_DEPENDS}
d36 2
d39 1
@


1.12
log
@Security update to ImageMagick/p5-PerlMagick 6.2.6-1. (CVE-2006-0082)

More info:

http://studio.imagemagick.org/pipermail/magick-users/2006-January/017083.html

from jakemsr@@, ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/01/27 17:40:05 bernd Exp $
d28 1
a28 1
LIB_DEPENDS=		Magick.10::graphics/ImageMagick
@


1.11
log
@Update to ImageMagick and p5-PerlMagick version 6.2.6.0.

help, testing and "go ahead" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/06/28 18:08:23 naddy Exp $
d8 1
a8 1
DASHVER=		0
@


1.10
log
@update to 6.2.3.3; from maintainer Bernd Ahlers <b.ahlers@@ba-net.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/06/04 14:39:21 naddy Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
d5 1
a5 1
COMMENT=	"object-oriented Perl interface to ImageMagick"
d7 5
a11 6
VER=		6.2.3
DASHVER=	3
DISTNAME=	ImageMagick-${VER}-${DASHVER}
PKGNAME=	p5-PerlMagick-${VER}.${DASHVER}
CATEGORIES=	graphics devel
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=imagemagick/}
d13 2
a14 1
HOMEPAGE=	http://www.imagemagick.org
d16 1
a16 5
BUILD_DEPENDS=	:ImageMagick-${VER}.${DASHVER}:graphics/ImageMagick
RUN_DEPENDS=	:ImageMagick-${VER}.${DASHVER}:graphics/ImageMagick
LIB_DEPENDS=	Magick.8::graphics/ImageMagick

MAINTAINER=	Bernd Ahlers <b.ahlers@@ba-net.org>
d23 2
a24 2
WANTLIB=		ICE SM X11 Xext bz2 freetype iconv jasper jbig jpeg \
			lcms m png tiff xml2 z
d26 5
a30 1
CONFIGURE_STYLE= perl
d32 2
a33 2
WRKDIST=	${WRKDIR}/${DISTNAME:S/-${DASHVER}$//}
WRKSRC=		${WRKDIST}/PerlMagick
d35 1
a35 1
post-patch:
d37 2
a38 1
		s|%%X11BASE%%|${X11BASE}|g;' ${WRKSRC}/Makefile.PL
@


1.9
log
@Update to 6.2.3:
* Fixed an obscure heap-overflow vulnerability in the PNM reader.
* Avoid infinite loop if bogus XWD rad/green/blue masks are 0.

Also:
* Regression test fixes.
* No need to remove previously installed ImageMagick.

From new maintainer Bernd Ahlers <b.ahlers@@ba-net.org>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/05/15 21:02:46 naddy Exp $
d8 1
a8 1
DASHVER=	0
@


1.8
log
@sync with ImageMagick: update to 6.2.2-0
From: Bernd Ahlers <b.ahlers@@ba-net.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/05/08 18:48:28 brad Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
d7 1
a7 1
VER=		6.2.2
d18 1
a18 1
LIB_DEPENDS=	Magick.6::graphics/ImageMagick
d20 1
a20 1
MAINTAINER=	Dan Brosemer <odin@@svartalfheim.net>
d34 13
@


1.7
log
@fix PKGNAME.

From: Bernd Ahlers <b.ahlers at ba-net dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/03/31 04:24:34 pvalchev Exp $
d7 2
a8 2
VER=		6.2.0
DASHVER=	8
d16 2
a17 2
BUILD_DEPENDS=	:ImageMagick-${VER}:graphics/ImageMagick
RUN_DEPENDS=	:ImageMagick-${VER}:graphics/ImageMagick
@


1.6
log
@update to p5-PerlMagick-6.2.0-8; from Bernd Ahlers <b.ahlers@@ba-net.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/11/30 01:06:38 espie Exp $
d10 1
a10 1
PKGNAME=	p5-PerlMagick-${VER}-${DASHVER}
@


1.5
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/07/09 19:44:14 brad Exp $
d7 2
a8 2
VER=		6.0.0
DASHVER=	2
d14 1
a14 1
HOMEPAGE=	http://www.simplesystems.org/ImageMagick/
d32 1
a32 1
WRKDIST=	${WRKDIR}/${DISTNAME:S/-${DASHVER}//}
@


1.4
log
@upgrade to PerlMagick 6.0.0-2

From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/04/13 00:50:45 brad Exp $
d27 2
@


1.3
log
@- don't link with libpthread, fixes a crashing issue.
- use MASTER_SITE_BACKUP
- new MAINTAINER, Dan Brosemer <odin at svartalfheim dot net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/01/17 15:58:08 naddy Exp $
d7 4
a10 3
VERSION=	5.2.9
DISTNAME=	ImageMagick-${VERSION}
PKGNAME=	p5-PerlMagick-${VERSION}p1
d12 1
a12 1
MASTER_SITES=	${MASTER_SITE_BACKUP}
d16 3
a18 3
BUILD_DEPENDS=	:ImageMagick-${VERSION}:graphics/ImageMagick
RUN_DEPENDS=	:ImageMagick-${VERSION}:graphics/ImageMagick
LIB_DEPENDS=	Magick.5::graphics/ImageMagick
d22 1
d30 2
a31 1
WRKSRC=	${WRKDIST}/PerlMagick
@


1.2
log
@Don't attempt to build perl ports that load dynamic modules
on architectures that support static linking only.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/08/28 20:51:17 brad Exp $
d9 1
a9 1
PKGNAME=	p5-PerlMagick-${VERSION}
d11 1
a11 1
MASTER_SITES=	ftp://openbsd.comstyle.com/pub/brad/source/
d19 1
a19 1
MAINTAINER=	Sam Smith <s@@msmith.net>
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
# $OpenBSD$
@


1.1.1.1
log
@add p5-PerlMagick port
-
PerlMagick is an objected-oriented Perl interface to ImageMagick. Use
the module to read, manipulate, or write an image or image sequence from
within a Perl script.
--
From: Sam Smith <s@@msmith.net>
@
text
@@
