head	1.8;
access;
symbols
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.6.0.6
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.4
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.4
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2012.04.23.18.50.36;	author ajacoutot;	state dead;
branches;
next	1.7;

1.7
date	2011.12.18.19.18.39;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.03.20.16.53.22;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.01.21.17.39;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.11.10.05.47;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.30.17.10.41;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.05.16.11.55.29;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.18.14.18.40;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Remove some useless patches.
@
text
@$OpenBSD: patch-app_commands_c,v 1.7 2011/12/18 19:18:39 ajacoutot Exp $
--- app/commands.c.orig	Sat Dec 17 17:30:38 2011
+++ app/commands.c	Sun Dec 18 19:57:02 2011
@@@@ -648,7 +648,7 @@@@ help_manual_callback (GtkAction *action)
   const char *dentry;
   GError *error = NULL;
 
-  helpdir = dia_get_data_directory("help");
+  helpdir = g_strdup("${PREFIX}/share/doc/dia/html");
   if (!helpdir) {
     message_warning(_("Could not find help directory"));
     return;
@


1.7
log
@Update to dia-0.97.2.
* lots of bugfixes, see here for details:
http://bugzilla.gnome.org/buglist.cgi?product=dia&target_milestone=0.97.2
@
text
@d1 1
a1 1
$OpenBSD: patch-app_commands_c,v 1.6 2010/03/20 16:53:22 ajacoutot Exp $
@


1.6
log
@Update to dia-0.97.1.
@
text
@d1 4
a4 4
$OpenBSD: patch-app_commands_c,v 1.5 2009/06/01 21:17:39 ajacoutot Exp $
--- app/commands.c.orig	Sat Nov  7 18:13:53 2009
+++ app/commands.c	Sun Jan 24 20:14:59 2010
@@@@ -641,7 +641,7 @@@@ help_manual_callback (GtkAction *action)
@


1.5
log
@- major update to dia-0.97
(ChangeLog available in the tarball)
- enable cairo backend now that it is stable; there is still a small
bug wrt printing uml classes which is beeing investigated.

Tested for several weeks.
ok giovanni@@ simon@@ (some time ago)
@
text
@d1 3
a3 3
$OpenBSD: patch-app_commands_c,v 1.4 2009/04/11 10:05:47 ajacoutot Exp $
--- app/commands.c.orig	Sun Mar  8 13:38:35 2009
+++ app/commands.c	Tue Apr 14 22:57:59 2009
a12 18
@@@@ -690,7 +690,7 @@@@ help_manual_callback (GtkAction *action)
   ShellExecuteA (0, "open", helpindex, NULL, helpdir, SW_SHOWNORMAL);
 #else
   command = getenv("BROWSER");
-  command = g_strdup_printf("%s 'file://%s' &", command ? command : "gnome-open", helpindex);
+  command = g_strdup_printf("%s 'file://%s' &", command ? command : "xdg-open", helpindex);
   system(command);
   g_free(command);
 #endif
@@@@ -708,7 +708,7 @@@@ activate_url (GtkAboutDialog *about,
   ShellExecuteA (0, "open", link, NULL, NULL, SW_SHOWNORMAL);
 #else
   gchar *command = getenv("BROWSER");
-  command = g_strdup_printf("%s '%s' &", command ? command : "gnome-open", link);
+  command = g_strdup_printf("%s '%s' &", command ? command : "xdg-open", link);
   system(command);
   g_free(command);
 #endif
@


1.4
log
@- several fixes:
* xdg-utils is only needed to the !gnome FLAVOR
* regen WANTLIB, esd is no more a dependency (unbreak gnome FLAVOR)
* use yelp for the gnome FLAVOR
* regen PLIST
@
text
@d1 4
a4 4
$OpenBSD: patch-app_commands_c,v 1.3 2008/10/30 17:10:41 ajacoutot Exp $
--- app/commands.c.orig	Sun Mar 18 20:49:14 2007
+++ app/commands.c	Sat Apr 11 11:16:22 2009
@@@@ -532,7 +532,7 @@@@ help_manual_callback (GtkAction *action)
d13 1
a13 1
@@@@ -581,7 +581,7 @@@@ help_manual_callback (GtkAction *action)
d22 1
a22 1
@@@@ -599,7 +599,7 @@@@ activate_url (GtkAboutDialog *about,
@


1.3
log
@- use xdg-open instead of previous hack
- move some files around and regen PLIST
- bump
@
text
@d1 1
a1 1
$OpenBSD: patch-app_commands_c,v 1.2 2008/05/16 11:55:29 ajacoutot Exp $
d3 2
a4 11
+++ app/commands.c	Thu Oct 30 17:48:05 2008
@@@@ -523,16 +523,13 @@@@ edit_redo_callback (GtkAction *action)
 void
 help_manual_callback (GtkAction *action)
 {
-#ifdef GNOME
-  gnome_help_display("dia", NULL, NULL);
-#else
   char *helpdir, *helpindex = NULL, *command;
   guint bestscore = G_MAXINT;
   GDir *dp;
d13 1
a13 1
@@@@ -581,13 +578,12 @@@@ help_manual_callback (GtkAction *action)
d22 1
a22 7
 
   g_free(helpindex);
-#endif
 }
 
 static void 
@@@@ -599,7 +595,7 @@@@ activate_url (GtkAboutDialog *about,
@


1.2
log
@- some cleanings:
 * precise license marker
 * indent
 * tweak DESCR
- use SUBST_VAR
- add gnomeprint support to the gnome FLAVOR
- use textproc/intltool MODULE
- fix a memleak that would lead to a crash when trying to export using
pixbux(png, jpg...); from GNOME svn
@
text
@d1 1
a1 1
$OpenBSD: patch-app_commands_c,v 1.1 2007/10/18 14:18:40 ajacoutot Exp $
d3 1
a3 1
+++ app/commands.c	Thu Oct 18 14:02:37 2007
d22 1
a22 1
@@@@ -581,13 +578,16 @@@@ help_manual_callback (GtkAction *action)
d26 2
a27 5
+#ifdef GNOME
   command = g_strdup_printf("%s 'file://%s' &", command ? command : "gnome-open", helpindex);
+#else
+  command = g_strdup_printf("%s '%s' &", command ? command : "xterm -e lynx", helpindex);
+#endif
d37 1
a37 1
@@@@ -599,7 +599,11 @@@@ activate_url (GtkAboutDialog *about,
d41 2
a42 5
+#ifdef GNOME
   command = g_strdup_printf("%s '%s' &", command ? command : "gnome-open", link);
+#else
+  command = g_strdup_printf("%s '%s' &", command ? command : "xterm -e lynx", link);
+#endif
@


1.1
log
@- make help button actually work and display help
- add update-mime goo
- take over maintainership

feedback and ok landry
@
text
@d1 1
a1 1
$OpenBSD$
d18 1
a18 1
+  helpdir = g_strdup("!!PREFIX!!/share/doc/dia/html");
@

