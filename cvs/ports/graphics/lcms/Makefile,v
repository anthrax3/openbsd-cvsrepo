head	1.30;
access;
symbols
	OPENBSD_6_0:1.30.0.2
	OPENBSD_6_0_BASE:1.30
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.28.0.4
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.26.0.8
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.6
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.4
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.24.0.2
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.23.0.8
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.6
	OPENBSD_5_0:1.23.0.4
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.23.0.2
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.19.0.6
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.19.0.4
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.19.0.2
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.17.0.4
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.17.0.2
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.15.0.2
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.12.0.4
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.2
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.11.0.2
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.8.0.4
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.2
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.6.0.4
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.4.0.4
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	brad_2001-12-03:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2016.03.11.19.59.14;	author naddy;	state Exp;
branches;
next	1.29;
commitid	pguKLBEFv33DrgKU;

1.29
date	2015.11.20.14.22.23;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	FFlhdj0zdRmqihtN;

1.28
date	2015.05.18.06.56.04;	author jasper;	state Exp;
branches;
next	1.27;
commitid	gAYnzELIhocRzVlO;

1.27
date	2015.03.16.18.07.47;	author naddy;	state Exp;
branches;
next	1.26;
commitid	IJdm3Zowcdkcxp5X;

1.26
date	2013.03.21.08.45.18;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.11.11.10.53;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2012.08.05.13.47.04;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.17.08.05.14;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.09.18.22.26;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.18.18.13.14;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2010.09.26.13.40.11;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2009.05.14.08.13.37;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2009.04.09.13.10.49;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2008.07.19.11.18.23;	author espie;	state Exp;
branches
	1.17.4.1;
next	1.16;

1.16
date	2008.06.10.00.42.40;	author okan;	state Exp;
branches;
next	1.15;

1.15
date	2007.09.15.20.09.41;	author simon;	state Exp;
branches;
next	1.14;

1.14
date	2007.08.05.19.04.52;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2007.08.02.19.22.12;	author mbalmer;	state Exp;
branches;
next	1.12;

1.12
date	2006.03.16.11.03.07;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2006.01.08.01.01.18;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2005.12.26.17.27.24;	author steven;	state Exp;
branches;
next	1.9;

1.9
date	2005.10.30.00.10.41;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2005.03.14.08.46.54;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2004.11.30.01.06.37;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2004.02.03.05.15.16;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.12.04.10.54;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2002.08.25.23.08.40;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2002.02.21.17.17.09;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.12.05.18.38.58;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2001.12.03.16.35.47;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.12.03.16.35.47;	author brad;	state Exp;
branches;
next	;

1.17.4.1
date	2009.06.20.01.34.27;	author william;	state Exp;
branches;
next	;


desc
@@


1.30
log
@garbage collect CONFIGURE_SHARED
@
text
@# $OpenBSD: Makefile,v 1.29 2015/11/20 14:22:23 ajacoutot Exp $

COMMENT =	color management library

DISTNAME =	lcms-1.19
CATEGORIES =	graphics
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=lcms/}

SHARED_LIBS +=  lcms                 2.0      # 1.19

HOMEPAGE =	http://www.littlecms.com/

LIB_DEPENDS +=	graphics/jpeg \
		graphics/tiff

# MIT
PERMIT_PACKAGE_CDROM =	Yes
WANTLIB =		c m z jpeg tiff

CONFIGURE_STYLE = 	gnu
CONFIGURE_ENV +=	CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

#WRKDIST =		${WRKDIR}/lcms-1.18

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/lcms
	${INSTALL_DATA} ${WRKSRC}/doc/* ${PREFIX}/share/doc/lcms

.include <bsd.port.mk>
@


1.29
log
@Update to lcms-1.19.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/05/18 06:56:04 jasper Exp $
a20 1
CONFIGURE_ARGS += 	${CONFIGURE_SHARED}
@


1.28
log
@- zap a bunch of '@@rm -fr' cases that were masking files that have long since been removed
- pre-emptively fix a few other cases while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/03/16 18:07:47 naddy Exp $
d5 1
a5 2
DISTNAME =	lcms-1.18a
SHARED_LIBS =	lcms	2.0
d8 2
a9 1
REVISION =	0
d25 1
a25 5
WRKDIST =		${WRKDIR}/lcms-1.18

# Unconfuse update-patches
post-extract:
	rm ${WRKSRC}/src/cmsxform.c.orig
@


1.27
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/03/21 08:45:18 ajacoutot Exp $
d29 1
a29 1
	rm -f ${WRKSRC}/src/cmsxform.c.orig
@


1.26
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/03/11 11:10:53 espie Exp $
d9 1
@


1.25
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/08/05 13:47:04 naddy Exp $
a18 1
USE_LIBTOOL =		Yes
@


1.24
log
@no need for groff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/17 08:05:14 espie Exp $
a16 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.23
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/09 18:22:26 espie Exp $
a22 1
USE_GROFF =		Yes
@


1.22
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/18 18:13:14 espie Exp $
d12 2
a13 2
LIB_DEPENDS +=	::graphics/jpeg \
		::graphics/tiff
@


1.21
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/09/26 13:40:11 naddy Exp $
d12 2
a13 2
LIB_DEPENDS +=	jpeg::graphics/jpeg \
		tiff::graphics/tiff
d20 1
a20 1
WANTLIB =		c m z
d23 1
a23 1
USE_GROFF =	Yes
@


1.20
log
@remove -Lxxx/.libs workarounds required with GNU libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/05/14 08:13:37 jasper Exp $
d23 1
@


1.19
log
@- update lcms to 1.18a

from brad, with a tweak by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/04/09 13:10:49 jasper Exp $
d26 1
a26 1
			LDFLAGS="-L${WRKBUILD}/src/.libs -L${LOCALBASE}/lib"
@


1.18
log
@- update lcms to 1.18
* includes security fixes for CVE-2009-0581, CVE-2009-0723 and CVE-2009-0733.
(which could cause a memory leak, buffer overflows and code execution)

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/07/19 11:18:23 espie Exp $
d5 1
a5 1
DISTNAME =	lcms-1.18
d27 6
@


1.17
log
@zap stupid warnings during further compilation using lcms.
Kill the darn noise !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/06/10 00:42:40 okan Exp $
d5 1
a5 1
DISTNAME =	lcms-1.17
a6 1
PKGNAME =	${DISTNAME}p0
@


1.17.4.1
log
@SECURITY FIX

Resolves CVE-2009-0581, CVE-2009-0723, and CVE-2009-0733

patch from upstream via debian

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/07/19 11:18:23 espie Exp $
d7 1
a7 1
PKGNAME =	${DISTNAME}p1
@


1.16
log
@update to 1.17 from brad@@

ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/09/15 20:09:41 simon Exp $
d3 1
a3 1
COMMENT=	color management library
d5 5
a9 4
DISTNAME=	lcms-1.17
SHARED_LIBS=	lcms	2.0
CATEGORIES=	graphics
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=lcms/}
d11 1
a11 1
HOMEPAGE=	http://www.littlecms.com/
d13 1
a13 1
LIB_DEPENDS+=	jpeg::graphics/jpeg \
d17 11
a27 11
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c m z

USE_LIBTOOL=	Yes
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${WRKBUILD}/src/.libs -L${LOCALBASE}/lib"
@


1.15
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/08/05 19:04:52 espie Exp $
d5 2
a6 3
DISTNAME=	lcms-1.15
PKGNAME=	${DISTNAME}
SHARED_LIBS=	lcms	1.15
@


1.14
log
@revert unokay'ed update that breaks at least digikam.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/03/16 11:03:07 espie Exp $
d3 1
a3 1
COMMENT=	"color management library"
@


1.13
log
@Update to LCMS 1.17
@
text
@d5 1
a5 1
DISTNAME=	lcms-1.17
d7 1
a7 1
SHARED_LIBS=	lcms	2.0
@


1.12
log
@update to 1.15, okay brad@@, mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/01/08 01:01:18 steven Exp $
d5 1
a5 1
DISTNAME=	lcms-1.15
d7 1
a7 1
SHARED_LIBS=	lcms	1.15
@


1.11
log
@remove MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/12/26 17:27:24 steven Exp $
d5 3
a7 3
DISTNAME=	lcms-1.12
PKGNAME=	${DISTNAME}p1
SHARED_LIBS=	lcms	1.12
d27 1
a27 1
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.10
log
@SHARED_LIBS and USE_LIBTOOL
remove -O3 from CFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/10/30 00:10:41 fgsch Exp $
d7 1
a7 2
SHARED_LIBS=		lcms	1.12
MODGNU_SHARED_LIBS=	lcms	'-no-undefined'
@


1.9
log
@after querying brad@@ he decided to drop maintainership for these.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/03/14 08:46:54 espie Exp $
d6 3
a8 1
PKGNAME=	${DISTNAME}p0
d24 1
@


1.8
log
@kill annoying warnings
okay pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/11/30 01:06:37 espie Exp $
a13 2

MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.7
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/02/03 05:15:16 brad Exp $
d6 1
@


1.6
log
@upgrade to lcms 1.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/05/12 04:10:54 brad Exp $
d21 1
@


1.5
log
@upgrade to lcms 1.09
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/08/25 23:08:40 brad Exp $
d5 1
a5 1
DISTNAME=	lcms-1.09
d7 1
a7 1
MASTER_SITES=	ftp://openbsd.comstyle.com/pub/brad/source/
d11 3
d16 1
a16 1
# LGPL
d22 4
a25 9
FAKE_FLAGS=	DESTDIR="${WRKINST}" PREFIX="${PREFIX}"

MAKE_ENV=	CC="${CC}"
MAKE_FILE=	Makefile.openbsd

WRKDIST=	${WRKDIR}/${DISTNAME}/src

post-extract:
	@@cp -f ${FILESDIR}/Makefile.openbsd ${WRKSRC}
d29 1
a29 5
	${INSTALL_DATA} ${WRKSRC}/../doc/* ${PREFIX}/share/doc/lcms

do-regress:
	@@cd ${WRKSRC}/../testbed && \
		${MAKE_PROGRAM} CFLAGS="${CFLAGS} -I../include" test
@


1.4
log
@remove bad dqc.org distsite.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/02/21 17:17:09 brad Exp $
d5 1
a5 1
DISTNAME=	lcms-1.08
d7 1
a7 1
MASTER_SITES=   ftp://openbsd.comstyle.com/pub/brad/source/
d13 1
@


1.3
log
@- obey CC
- workaround for when DEBUGLIBS is defined
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/12/05 18:38:58 brad Exp $
d7 1
a7 3
NEED_VERSION=	1.500
MASTER_SITES=   ftp://openbsd.comstyle.com/pub/brad/source/ \
                ftp://ftp.dqc.org/pub/brad/source/
@


1.2
log
@another author who's an idiot and does not seem to understand the concept
of version numbers and distfiles, so mirror this distfile elsewhere.
--
Checksum issue pointed out by: naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/12/03 16:35:47 brad Exp $
d22 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 3
a9 1
MASTER_SITES=	http://www.littlecms.com/
@


1.1.1.1
log
@add lcms port
--
LCMS is the Little Color Management System, a Color Matching Method
(CMM) library which implements fast transforms between ICC profiles.

Color management refers to techniques that ensure consistent color
as images are transferred from scanners or cameras to monitors and
printers.
@
text
@@
