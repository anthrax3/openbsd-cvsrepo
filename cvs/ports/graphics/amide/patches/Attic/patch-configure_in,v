head	1.6;
access;
symbols
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.6
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2014.04.03.19.53.07;	author brad;	state dead;
branches;
next	1.5;

1.5
date	2014.03.16.11.21.28;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.11.03.10.31.01;	author benoit;	state Exp;
branches;
next	1.3;

1.3
date	2013.01.18.07.56.17;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.19.15.28.27;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.05.16.07.42.50;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to amide 1.0.5.

ok benoit@@
@
text
@--- configure.in.orig	Fri Oct  5 00:17:23 2012
+++ configure.in	Sun Mar 16 10:31:17 2014
@@@@ -53,7 +53,7 @@@@ dnl esac
 dnl specify optimization level, added 2010.02.20
 OPTIMIZATION_LEVEL="-O3"
 echo "setting optimization level to $OPTIMIZATION_LEVEL"
-CFLAGS="$CFLAGS $OPTIMIZATION_LEVEL"
+CFLAGS="${CFLAGS}"
 
 if test $CC = "gcc"; then
    echo -n "checking version of gcc... "
@@@@ -101,7 +101,7 @@@@ AM_PATH_XMEDCON(0.10.0, FOUND_XMEDCON=yes, FOUND_XMEDC
 dnl switch to C++ for DCMTK library stuff - also, if pthread is on the platform, probably need that
 dnl autoconf doesn't have a nice macro for checking for c++ libraries, therefore the below:
 AC_CHECK_LIB(pthread, pthread_mutex_init, THREAD_LIBS="-lpthread", THREAD_LIBS="")
-AMIDE_LIBDCMDATA_LIBS="-L/usr/local/dicom/lib -L/usr/lib64/dcmtk -L/usr/lib/dcmtk -ldcmdata -loflog -lofstd -lz $THREAD_LIBS"
+AMIDE_LIBDCMDATA_LIBS=""
 AMIDE_LIBDCMDATA_CFLAGS="-I/usr/local/dicom/include"
 dnl 2010.02.20	AMIDE_LIBDCMDATA_CFLAGS="-I/usr/local/dicom/include/dcmtk/dcmdata -I/usr/local/dicom/include/dcmtk/ofstd -I/usr/local/dicom/include -I/usr/include/dcmtk/dcmdata -I/usr/local/include/dcmtk/ofstd -I/sw/include/dcmtk/dcmdata -I/sw/include/dcmtk/ofstd -I/sw/include/dcmtk"
 saved_libs="${LIBS}"
@@@@ -348,11 +348,8 @@@@ fi
 ## add in gnome-vfs if not on win32 or gtk-osx
 ## gnome-vfs is only used by amide_gnome.c and only on unix
 if (test $native_win32 = no) && (test $enable_native_gtk_osx = no); then
-   PKG_CHECK_MODULES(AMIDE_GTK_EXTRA_GVFS,[
-		gnome-vfs-2.0   >= 2.16.0
-   ])
-   AMIDE_GTK_LIBS="$AMIDE_GTK_LIBS $AMIDE_GTK_EXTRA_GVFS_LIBS"
-   AMIDE_GTK_CFLAGS="$AMIDE_GTK_CFLAGS $AMIDE_GTK_EXTRA_GVFS_CFLAGS"
+   AMIDE_GTK_LIBS="$AMIDE_GTK_LIBS"
+   AMIDE_GTK_CFLAGS="$AMIDE_GTK_CFLAGS"
 fi
  
 AC_SUBST(AMIDE_GTK_LIBS)
@


1.5
log
@Simplify by using the x11/gnome MODULE.
Regen patches while here.
Drop USE_GROFF.

ok benoit@@ (maintainer)
@
text
@@


1.4
log
@Update to amide 1.0.4.
@
text
@d2 2
a3 2
+++ configure.in	Mon May 20 12:05:41 2013
@@@@ -53,7 +53,7 @@@@
d12 1
a12 1
@@@@ -101,7 +101,7 @@@@
d21 1
a21 1
@@@@ -348,11 +348,8 @@@@
@


1.3
log
@- Update for newer FFmpeg API.
- Remove pthread patch.

ok benoit@@
@
text
@d1 8
a8 16
$OpenBSD: patch-configure_in,v 1.2 2011/05/19 15:28:27 ajacoutot Exp $

- Remove over-the-top optimization
- Remove gnome-vfs2 dependency.

--- configure.in.orig	Wed Dec  9 01:34:33 2009
+++ configure.in	Wed May 18 20:41:16 2011
@@@@ -45,8 +45,8 @@@@ dnl the library paths with strings that have longer le
 case "$host_os" in
 darwin*) 	CFLAGS="-g -O2 -Wall"
 		LDFLAGS="-headerpad_max_install_names";;
-*)		CFLAGS="-g -O6 -Wall"
-		CXXFLAGS="-g -O6 -Wall";;
+*)		CFLAGS="${CFLAGS} -Wall"
+		CXXFLAGS="${CXXFLAGS} -Wall";;
 esac
d11 15
a25 4
@@@@ -286,7 +286,6 @@@@ PKG_CHECK_MODULES(AMIDE_GTK,[
 ## gconf stuff is encapsulated in amide_gconf.c
 if (test $native_win32 = no); then
    PKG_CHECK_MODULES(AMIDE_GTK_EXTRA,[
d27 8
a34 3
 		gconf-2.0	>= 2.14.0
    ])
    AMIDE_GTK_LIBS="$AMIDE_GTK_LIBS $AMIDE_GTK_EXTRA_LIBS"
@


1.2
log
@No need to set both autoconf and gnu in CONFIGURE_STYLE, autoconf is
enough.
Correctly respect C{,XX}FLAGS.

from Brad
maintainer timeout
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.1 2011/05/16 07:42:50 jasper Exp $
a3 1
- Fix pthread library
a18 9
@@@@ -92,7 +92,7 @@@@ AM_PATH_XMEDCON(0.10.0, FOUND_XMEDCON=yes, FOUND_XMEDC
 
 dnl switch to C++ for DCMTK library stuff - also, if pthread is on the platform, probably need that
 AC_LANG_CPLUSPLUS
-AC_CHECK_LIB(pthread, pthread_mutex_init, THREAD_LIBS="-lpthread", THREAD_LIBS="")
+AC_CHECK_LIB(pthread, pthread_mutex_init, THREAD_LIBS="-pthread", THREAD_LIBS="")
 AC_CHECK_LIB(dcmdata, main, FOUND_DCMDATA=yes, FOUND_DCMDATA=no, -lofstd  -lz -L/usr/local/dicom/lib -L/sw/lib $THREAD_LIBS)
 
 dnl trying to phase out libfame use in favor of ffmpeg
@


1.1
log
@don't build amide_gnome.c, it's the only reason why this still depends on
the ancient and deprecated gnome-vfs2. upstream seems too lazy to properly fix
this, so point users to the online help instead.

ok aja@@ benoit@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
d7 2
a8 2
--- configure.in.orig	Sun May 15 23:21:42 2011
+++ configure.in	Sun May 15 23:22:19 2011
d15 2
a16 2
+*)		CFLAGS="-g -Wall"
+		CXXFLAGS="-g -Wall";;
@

