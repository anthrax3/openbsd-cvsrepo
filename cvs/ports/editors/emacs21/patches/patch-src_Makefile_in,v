head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.36
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.32
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.34
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.30
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.28
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.26
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.24
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.22
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.20
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.18
	OPENBSD_5_0:1.3.0.16
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.14
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.12
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.14
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.12
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.10
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.8
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.6
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.4
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2008.01.01.15.08.43;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.11.21.14.01;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.19.15.10.09;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove half-bogus ordering that trips equivalence names in make.
@
text
@$OpenBSD: patch-src_Makefile_in,v 1.2 2004/08/11 21:14:01 pvalchev Exp $
--- src/Makefile.in.orig	Thu Jan 23 11:34:06 2003
+++ src/Makefile.in	Tue Jan  1 15:52:01 2008
@@@@ -875,6 +875,7 @@@@ temacs: MAKE_PARALLEL $(LOCALCPP) $(STARTFILES) stamp-
 	$(LD) YMF_PASS_LDFLAGS (${STARTFLAGS} ${ALL_LDFLAGS}) \
     -o temacs ${STARTFILES} ${obj} ${otherobj}  \
     OBJECTS_MACHINE ${LIBES}
+	strip temacs
 
 /* We don't use ALL_LDFLAGS because LD_SWITCH_SYSTEM and LD_SWITCH_MACHINE
    often contain options that have to do with using Emacs's crt0,
@@@@ -900,12 +901,8 @@@@ prefix-args: prefix-args.c $(config_h)
    and remake temacs if lwlib gets changed by this.  */
 stamp-oldxmenu: ${OLDXMENU} ../src/$(OLDXMENU) 
 	touch stamp-oldxmenu
-/* Supply an ordering for parallel make.  */
-../src/$(OLDXMENU): ${OLDXMENU}
 
 #ifdef USE_X_TOOLKIT
-$(OLDXMENU): really-lwlib
-
 /* Encode the values of these two macros in Make variables,
    so we can use $(...) to substitute their values within "...".  */
 C_SWITCH_MACHINE_1 = C_SWITCH_MACHINE
@@@@ -914,7 +911,7 @@@@ C_SWITCH_SITE_1 = C_SWITCH_SITE
 C_SWITCH_X_SITE_1 = C_SWITCH_X_SITE
 C_SWITCH_X_MACHINE_1 = C_SWITCH_X_MACHINE
 C_SWITCH_X_SYSTEM_1 = C_SWITCH_X_SYSTEM
-really-lwlib:
+$(OLDXMENU):
 	cd ${lwlibdir}; ${MAKE} ${MFLAGS} LWLIB_OPTIONS \
     CC='${CC}' CFLAGS='${CFLAGS}' MAKE='${MAKE}' \
     "C_SWITCH_X_SITE=$(C_SWITCH_X_SITE_1)" \
@@@@ -923,11 +920,7 @@@@ really-lwlib:
     "C_SWITCH_SITE=$(C_SWITCH_SITE_1)" \
     "C_SWITCH_MACHINE=$(C_SWITCH_MACHINE_1)" \
     "C_SWITCH_SYSTEM=$(C_SWITCH_SYSTEM_1)"
-	@@true  /* make -t should not create really-lwlib.  */
-.PHONY: really-lwlib
 #else /* not USE_X_TOOLKIT */
-$(OLDXMENU): really-oldXMenu
-
 /* Encode the values of these two macros in Make variables,
    so we can use $(...) to substitute their values within "...".  */
 C_SWITCH_MACHINE_1 = C_SWITCH_MACHINE
@@@@ -936,7 +929,7 @@@@ C_SWITCH_SITE_1 = C_SWITCH_SITE
 C_SWITCH_X_SITE_1 = C_SWITCH_X_SITE
 C_SWITCH_X_MACHINE_1 = C_SWITCH_X_MACHINE
 C_SWITCH_X_SYSTEM_1 = C_SWITCH_X_SYSTEM
-really-oldXMenu:
+$(OLDXMENU):
 	cd ${oldXMenudir}; ${MAKE} ${MFLAGS} OLDXMENU_OPTIONS \
     CC='${CC}' CFLAGS='${CFLAGS}' MAKE='${MAKE}' \
     "C_SWITCH_X_SITE=$(C_SWITCH_X_SITE_1)" \
@@@@ -945,8 +938,6 @@@@ really-oldXMenu:
     "C_SWITCH_SITE=$(C_SWITCH_SITE_1)" \
     "C_SWITCH_MACHINE=$(C_SWITCH_MACHINE_1)" \
     "C_SWITCH_SYSTEM=$(C_SWITCH_SYSTEM_1)"
-	@@true  /* make -t should not create really-oldXMenu.  */
-.PHONY: really-oldXMenu
 #endif /* not USE_X_TOOLKIT */
 #else /* not (HAVE_X_WINDOWS && HAVE_X11 && HAVE_MENUS) */
 
@


1.2
log
@do not strip emacs, it breaks a lot of architectures.
instead, strip temacs before it undumps to emacs

fixes at least sparc, noticed by marc@@, but nobody tested
and i only know it starts up now
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.1 2003/11/19 15:10:09 naddy Exp $
--- src/Makefile.in.orig	Thu Jan 23 03:34:06 2003
+++ src/Makefile.in	Tue Aug  3 12:22:29 2004
@@@@ -875,6 +875,7 @@@@ temacs: MAKE_PARALLEL $(LOCALCPP) $(STAR
d12 6
a17 2
@@@@ -904,8 +905,6 @@@@ stamp-oldxmenu: ${OLDXMENU} ../src/$(OLD
 ../src/$(OLDXMENU): ${OLDXMENU}
d25 1
a25 1
@@@@ -914,7 +913,7 @@@@ C_SWITCH_SITE_1 = C_SWITCH_SITE
d34 1
a34 1
@@@@ -923,11 +922,7 @@@@ really-lwlib:
d46 1
a46 1
@@@@ -936,7 +931,7 @@@@ C_SWITCH_SITE_1 = C_SWITCH_SITE
d55 1
a55 1
@@@@ -945,8 +940,6 @@@@ really-oldXMenu:
@


1.1
log
@untangle build so our make produces the same result as gmake
@
text
@d1 12
a12 4
$OpenBSD$
--- src/Makefile.in.orig	2003-11-19 15:12:49.000000000 +0100
+++ src/Makefile.in	2003-11-19 15:14:07.000000000 +0100
@@@@ -904,8 +904,6 @@@@ stamp-oldxmenu: ${OLDXMENU} ../src/$(OLD
d21 1
a21 1
@@@@ -914,7 +912,7 @@@@ C_SWITCH_SITE_1 = C_SWITCH_SITE
d30 1
a30 1
@@@@ -923,11 +921,7 @@@@ really-lwlib:
d42 1
a42 1
@@@@ -936,7 +930,7 @@@@ C_SWITCH_SITE_1 = C_SWITCH_SITE
d51 1
a51 1
@@@@ -945,8 +939,6 @@@@ really-oldXMenu:
@

