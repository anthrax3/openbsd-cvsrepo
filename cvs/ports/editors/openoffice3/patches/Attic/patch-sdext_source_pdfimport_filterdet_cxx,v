head	1.5;
access;
symbols
	OPENBSD_5_0:1.4.0.4
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2011.11.16.13.38.22;	author robert;	state dead;
branches;
next	1.4;

1.4
date	2010.11.09.18.40.04;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2010.06.26.15.48.12;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.30.11.03.07;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2009.11.28.18.33.57;	author kili;	state Exp;
branches;
next	;


desc
@@


1.5
log
@remove the dead openoffice ports
@
text
@$OpenBSD: patch-sdext_source_pdfimport_filterdet_cxx,v 1.4 2010/11/09 18:40:04 robert Exp $
--- sdext/source/pdfimport/filterdet.cxx.orig.port	Thu Oct 21 14:03:08 2010
+++ sdext/source/pdfimport/filterdet.cxx	Sat Oct 23 18:40:07 2010
@@@@ -710,48 +710,6 @@@@ uno::Reference< io::XStream > getAdditionalStream( con
                         OSL_ENSURE( pObject, "object not found\n" );
                         if( pObject )
                         {
-                            if( pPDFFile->isEncrypted() )
-                            {
-                                bool bAuthenticated = false;
-                                if( io_rPwd.getLength() )
-                                {
-                                    rtl::OString aIsoPwd = rtl::OUStringToOString( io_rPwd,
-                                                                                   RTL_TEXTENCODING_ISO_8859_1 );
-                                    bAuthenticated = pPDFFile->setupDecryptionData( aIsoPwd.getStr() );
-                                }
-                                if( ! bAuthenticated )
-                                {
-                                    const beans::PropertyValue* pAttribs = rFilterData.getConstArray();
-                                    sal_Int32 nAttribs = rFilterData.getLength();
-                                    uno::Reference< task::XInteractionHandler > xIntHdl;
-                                    for( sal_Int32 i = 0; i < nAttribs; i++ )
-                                    {
-                                        if( pAttribs[i].Name.equalsAscii( "InteractionHandler" ) )
-                                            pAttribs[i].Value >>= xIntHdl;
-                                    }
-                                    if( ! bMayUseUI || ! xIntHdl.is() )
-                                    {
-                                        rOutMimetype = pMimeType->getFilteredName();
-                                        xEmbed.clear();
-                                        break;
-                                    }
-                                    
-                                    rtl::OUString aDocName( rInPDFFileURL.copy( rInPDFFileURL.lastIndexOf( sal_Unicode('/') )+1 ) );
-
-                                    bool bEntered = false;
-                                    do
-                                    {
-                                        bEntered = getPassword( xIntHdl, io_rPwd, ! bEntered, aDocName );
-                                        rtl::OString aIsoPwd = rtl::OUStringToOString( io_rPwd,
-                                                                                       RTL_TEXTENCODING_ISO_8859_1 );
-                                        bAuthenticated = pPDFFile->setupDecryptionData( aIsoPwd.getStr() );
-                                    } while( bEntered && ! bAuthenticated );
-                                }
-
-                                OSL_TRACE( "password: %s\n", bAuthenticated ? "matches" : "does not match" );
-                                if( ! bAuthenticated )
-                                    continue;
-                            }
                             rOutMimetype = pMimeType->getFilteredName();
                             FileEmitContext aContext( rInPDFFileURL,
                                                       xContext,
@


1.4
log
@- update to openoffice.org 3.3rc3
- rework a port a little bit to be sync in the openoffice linux
  code and remove some hacks that we don't need anymore
- also use --as-needed while linking (which results in at least a 50% speed
  improovement)
- depend on more libraries from the system instead of using the internal
  ones
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Update to OpenOffice.Org 3.2.1
@
text
@d1 4
a4 4
$OpenBSD: patch-sdext_source_pdfimport_filterdet_cxx,v 1.2 2010/03/30 11:03:07 robert Exp $
--- sdext/source/pdfimport/filterdet.cxx.orig.port	Wed May 26 20:29:30 2010
+++ sdext/source/pdfimport/filterdet.cxx	Fri Jun 25 23:56:14 2010
@@@@ -710,46 +710,6 @@@@ uno::Reference< io::XStream > getAdditionalStream( con
d33 2
d39 1
a39 1
-                                        bEntered = getPassword( xIntHdl, io_rPwd, ! bEntered );
@


1.2
log
@Update to openoffice 3.2;
this is a major update that introduced many cool stuff and it's
speed is awesome compared to the previous versions
@
text
@d1 4
a4 4
$OpenBSD: patch-sdext_source_pdfimport_filterdet_cxx,v 1.1 2009/11/28 18:33:57 kili Exp $
--- sdext/source/pdfimport/filterdet.cxx.orig.port	Sun Jan 24 16:12:34 2010
+++ sdext/source/pdfimport/filterdet.cxx	Sun Jan 24 19:15:08 2010
@@@@ -714,46 +714,6 @@@@ uno::Reference< io::XStream > getAdditionalStream( con
@


1.1
log
@Security fix: Use the xpdf version from our portstree for the pdf
importer. This basically updates the xpdf version used by the
importer from xpdf-3.02pl3 to xpdf-3.02pl4 and probably addresses
CVE-2009-3603, CVE-2009-3604, CVE-2009-3605, CVE-2009-3606,
CVE-2009-3608, and CVE-2009-3609.

I tried to build the pdf importer with poppler, but it failed badly
on PDF files containing any graphics.

While here, disable the (snake oil) DRM "feature", like we already
do in xpdf and poppler, and pass the correct flags to the xpdf
build.

Note: the extension concept of this software is stupid^W"enterprise
ready". If you ever enabled the pdf importing extension, you will
have to disable and re-enable it to get the new extension installed
(somewhere under ~/.openoffice.org or similar).

"just fucking commit you slacker ;)" robert@@
@
text
@d1 4
a4 4
$OpenBSD$
--- sdext/source/pdfimport/filterdet.cxx.orig.port	Thu Aug 14 18:56:31 2008
+++ sdext/source/pdfimport/filterdet.cxx	Sun Nov 22 13:31:15 2009
@@@@ -713,46 +713,6 @@@@ uno::Reference< io::XStream > getAdditionalStream( con
d13 1
a13 1
-                                    rtl::OString aIsoPwd = rtl::OUStringToOString( io_rPwd, 
d33 1
a33 1
-    
d38 1
a38 1
-                                        rtl::OString aIsoPwd = rtl::OUStringToOString( io_rPwd, 
d49 2
a50 2
                             FileEmitContext aContext( rInPDFFileURL, 
                                                       xContext, 
@

