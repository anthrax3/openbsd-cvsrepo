head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.2
	OPENBSD_6_2_BASE:1.2
	edd_20170502:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.05.12.09.56.33;	author edd;	state Exp;
branches;
next	1.1;
commitid	9eXRS0UP7dEFe09w;

1.1
date	2017.05.02.20.58.42;	author edd;	state Exp;
branches
	1.1.1.1;
next	;
commitid	MFzYmKhAnyHqL6Xb;

1.1.1.1
date	2017.05.02.20.58.42;	author edd;	state Exp;
branches;
next	;
commitid	MFzYmKhAnyHqL6Xb;


desc
@@


1.2
log
@Neovim: Fix various bits in ':CheckHealth', including detection of Python.

Issue found by tb@@ when the ${LOCALBASE}/bin/python symlink is not existing.
Upstream fixed a couple of other bugs in the same PR. Thanks all.

OK tb@@
@
text
@# $OpenBSD: Makefile,v 1.1.1.1 2017/05/02 20:58:42 edd Exp $

COMMENT =	a continuation and extension of Vim

GH_ACCOUNT =	neovim
GH_PROJECT =	neovim
GH_TAGNAME =	v0.2.0
REVISION =	0

CATEGORIES =	editors devel
HOMEPAGE =	http://neovim.org
MAINTAINER =	Edd Barrett <edd@@openbsd.org>

# Apache 2.0 + Vim License
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += c m msgpackc pthread termkey unibilium util uv vterm

MODULES =		devel/cmake \
			devel/gettext \
			lang/lua \
			textproc/intltool
BUILD_DEPENDS =		${RUN_DEPENDS} \
			devel/gperf \
			devel/lpeg \
			devel/luabitop

LIB_DEPENDS =		devel/libtermkey \
			devel/libuv \
			devel/libvterm \
			devel/msgpack \
			devel/unibilium
RUN_DEPENDS +=		devel/libmpack/lua \
			devel/libmpack/main

MAKE_FLAGS +=		USE_BUNDLED_DEPS=OFF
CONFIGURE_ARGS +=	-DLUA_PRG=${MODLUA_BIN}

# Tests need gmake
USE_GMAKE = Yes

NVIM_PRG =	${WRKBUILD}/bin/nvim
SUBST_VARS +=	VIMPROG
pre-test:
	${SUBST_CMD} ${WRKSRC}/src/nvim/testdir/test49.vim

# These are the "old tests". There is also a new suite, but we would need the
# "busted" test suite for Lua, which is not yet ported.
do-test:
	cd ${WRKSRC} && env LC_CTYPE=en_US.UTF-8 ${MAKE_PROGRAM} \
		-C src/nvim/testdir NVIM_PRG=${NVIM_PRG} ${MAKE_FLAGS}

.include <bsd.port.mk>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.75 2016/03/20 17:19:49 naddy Exp $
d8 1
@


1.1.1.1
log
@Import editors/neovim.

---8<---
Neovim is a project that seeks to aggressively refactor Vim in order to:

 * Simplify maintenance and encourage contributions.
 * Split the work between multiple developers.
 * Enable advanced external UIs without modifications to the core.
 * Improve extensibility with a new plugin architecture.
--->8---

Tweaks suggested from abieber@@ and sthen@@.

OK abieber@@.

Thanks to upstream for addressing the issues I have been filing over the past
few months. All tests are now passing.

@
text
@@
