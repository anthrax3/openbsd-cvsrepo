head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.20
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.18
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.14
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.16
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.12
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.10
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.8
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.6
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.4
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2012.07.10.15.22.45;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.06.14.09.40.58;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2012.06.14.09.39.34;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2012.04.20.08.41.27;	author edd;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.20.22.16.25;	author edd;	state Exp;
branches;
next	;


desc
@@


1.5
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@$OpenBSD: patch-TeXworks_pro,v 1.4 2012/06/14 09:40:58 espie Exp $
--- TeXworks.pro.orig	Wed Jun 29 19:03:14 2011
+++ TeXworks.pro	Mon Jul  9 16:00:26 2012
@@@@ -47,11 +47,11 @@@@ QMAKE_CXXFLAGS_WARN_ON += -Wno-unknown-pragmas
 
 unix:!macx {
 	TARGET	=	texworks
-	isEmpty(INSTALL_PREFIX):INSTALL_PREFIX = /usr/local
+	isEmpty(INSTALL_PREFIX):INSTALL_PREFIX = ${PREFIX}
 	isEmpty(DATA_DIR):DATA_DIR = $$INSTALL_PREFIX/share
 	isEmpty(TW_HELPPATH):TW_HELPPATH = $$DATA_DIR/texworks-help
 	isEmpty(TW_PLUGINPATH):TW_PLUGINPATH = $$INSTALL_PREFIX/lib/texworks
-	isEmpty(TW_DICPATH):TW_DICPATH = /usr/share/myspell/dicts
+	isEmpty(TW_DICPATH):TW_DICPATH = ${LOCALBASE}/share/mozilla-dicts
 } else {
 	TARGET	=	TeXworks
     QMAKE_CXXFLAGS += -fexceptions
@@@@ -144,7 +144,7 @@@@ win32 { # paths here are specific to my setup
 	QMAKE_CXXFLAGS += -DSTATIC_SCRIPTING_PLUGINS
 
 	LIBS += -Lplugins-src/TWLuaPlugin/release -lTWLuaPlugin
-	LIBS += -llua
+	LIBS += ${MODLUA_LIB}
 
 	LIBS += -Lplugins-src/TWPythonPlugin/release -lTWPythonPlugin
 	LIBS += -Lc:/Python26/libs -lpython26
@@@@ -243,7 +243,7 @@@@ unix:!macx { # installation on Unix-ish platforms
 	isEmpty(BIN_DIR):BIN_DIR = $$INSTALL_PREFIX/bin
 	isEmpty(DOCS_DIR):DOCS_DIR = $$DATA_DIR/doc/texworks
 	isEmpty(ICON_DIR):ICON_DIR = $$DATA_DIR/pixmaps
-	isEmpty(MAN_DIR):MAN_DIR = $$DATA_DIR/man/man1
+	isEmpty(MAN_DIR):MAN_DIR = $$INSTALL_PREFIX/man/man1
 	isEmpty(DESKTOP_DIR):DESKTOP_DIR = $$DATA_DIR/applications
 
 	target.path = $$BIN_DIR
@


1.4
log
@unwanted extra commit
@
text
@d1 3
a3 3
$OpenBSD: patch-TeXworks_pro,v 1.2 2012/04/20 08:41:27 edd Exp $
--- TeXworks.pro.orig	Wed Jun 29 18:03:14 2011
+++ TeXworks.pro	Thu Apr 19 17:10:51 2012
d18 9
@


1.3
log
@make it build with qt 4.8.2
@
text
@d2 8
a9 3
--- TeXworks.pro.orig	Wed Jun 29 19:03:14 2011
+++ TeXworks.pro	Wed Jun 13 11:15:34 2012
@@@@ -51,7 +51,7 @@@@ unix:!macx {
d14 1
a14 1
+	isEmpty(TW_DICPATH):TW_DICPATH = /usr/local/share/mozilla-dicts
@


1.2
log
@Update to texworks-0.4.3. OK sthen@@
@
text
@d1 4
a4 9
$OpenBSD$
--- TeXworks.pro.orig	Wed Jun 29 18:03:14 2011
+++ TeXworks.pro	Thu Apr 19 17:10:51 2012
@@@@ -47,11 +47,11 @@@@ QMAKE_CXXFLAGS_WARN_ON += -Wno-unknown-pragmas
 
 unix:!macx {
 	TARGET	=	texworks
-	isEmpty(INSTALL_PREFIX):INSTALL_PREFIX = /usr/local
+	isEmpty(INSTALL_PREFIX):INSTALL_PREFIX = ${PREFIX}
d9 1
a9 1
+	isEmpty(TW_DICPATH):TW_DICPATH = ${LOCALBASE}/share/mozilla-dicts
@


1.1
log
@update to 0.4.0 with MULTI_PACKAGES for new scripting backends.

OK sthen@@ on the condition that the update path works, which it does ;)
@
text
@d2 3
a4 12
--- TeXworks.pro.orig	Sat Mar 19 16:12:51 2011
+++ TeXworks.pro	Thu Apr 14 18:20:45 2011
@@@@ -96,6 +96,10 @@@@ unix:!macx { # on Unix-ish platforms we rely on pkgcon
 	# gets expanded to " in the c++ code)
 	QMAKE_CXXFLAGS += -DTW_HELPPATH=\\\"/usr/local/share/texworks-help\\\"
 	QMAKE_CXXFLAGS += -DTW_PLUGINPATH=\\\"/usr/local/lib/texworks\\\"
+}
+
+# openbsd uses the mozilla dicts
+unix:!openbsd-g++* {
 	QMAKE_CXXFLAGS += -DTW_DICPATH=\\\"/usr/share/myspell/dicts\\\"
 }
d6 13
a18 22
@@@@ -107,10 +111,11 @@@@ linux-g++ {
 	LIBS		+= -lz
 }
 
-openbsd-g++ {
+openbsd-g++* {
 	# Same bug exists in OpenBSD/qt4
 	LIBS		+= -lQtDBus
 	INCLUDEPATH	+= /usr/local/include/X11/qt4/QtDBus
+	QMAKE_CXXFLAGS += -DTW_DICPATH=\\\"${LOCALBASE}/share/mozilla-dicts\\\"
 }
 
 win32 { # paths here are specific to my setup
@@@@ -224,13 +229,17 @@@@ TRANSLATIONS	+=	trans/TeXworks_af.ts \
 					trans/TeXworks_tr.ts \
 					trans/TeXworks_zh_CN.ts
 
+# OpenBSD ports specific
+INSTALL_PREFIX = ${WRKINST}/${PREFIX}
+
 unix:!macx { # installation on Unix-ish platforms
 	isEmpty(INSTALL_PREFIX):INSTALL_PREFIX = /usr/local
a19 1
 	isEmpty(DATA_DIR):DATA_DIR = $$INSTALL_PREFIX/share
a22 1
+	#isEmpty(MAN_DIR):MAN_DIR = $$DATA_DIR/man/man1
@

