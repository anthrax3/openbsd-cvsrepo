head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.07.23.18.54.02;	author robert;	state Exp;
branches;
next	;
commitid	NmNSZolUxdv6gFLy;


desc
@@


1.1
log
@allow build with system clang
@
text
@$OpenBSD$

Index: external/libmspub/ExternalProject_libmspub.mk
--- external/libmspub/ExternalProject_libmspub.mk.orig
+++ external/libmspub/ExternalProject_libmspub.mk
@@@@ -35,8 +35,10 @@@@ $(call gb_ExternalProject_get_state_target,libmspub,bu
 			--disable-werror \
 			--disable-weffc \
 			$(if $(verbose),--disable-silent-rules,--enable-silent-rules) \
+			CPPFLAGS="-fPIC" \
 			CXXFLAGS="$(CXXFLAGS) $(if $(SYSTEM_BOOST),$(BOOST_CPPFLAGS),-I$(call gb_UnpackedTarball_get_dir,boost)) \
-				-DBOOST_ERROR_CODE_HEADER_ONLY -DBOOST_SYSTEM_NO_DEPRECATED" \
+				-DBOOST_ERROR_CODE_HEADER_ONLY -DBOOST_SYSTEM_NO_DEPRECATED \
+				$(if $(SYSTEM_ICU),-I/usr/local/include,-I$(call gb_UnpackedTarball_get_dir,icu))" \
 			$(if $(CROSS_COMPILING),--build=$(BUILD_PLATFORM) --host=$(HOST_PLATFORM)) \
 		&& $(MAKE) \
 	)
@
