head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.28
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.26
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.24
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.20
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.22
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.18
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.16
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.14
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.12
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.10
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.1.1.0.12
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.10
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.8
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.6
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.4
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	mgrimm:1.1.1.1
	mgrimm-20071201:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2011.01.16.19.58.18;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2007.12.01.21.19.33;	author mgrimm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.12.01.21.19.33;	author mgrimm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- Update to new distfile, which incorporates most OpenBSD patches.
- Tweak configuration (e.g. add KNF indent mode).
- Fix WANTLIB.
- Drop official maintainership. However, this is still my most important
  application on OpenBSD. I'll definitely keep an eye on this port.

on behalf of mgrimm@@
@
text
@$OpenBSD: patch-install,v 1.1.1.1 2007/12/01 21:19:33 mgrimm Exp $
--- install.orig	Sun Jan 18 16:37:13 2009
+++ install	Sun Jan 16 17:25:16 2011
@@@@ -12,27 +12,11 @@@@ PREFIX=${PREFIX:-/usr/local}
 # INSTALLATION CODE (do not touch):
 
 BINDIR=$PREFIX/bin
-LIBDIR=$PREFIX/lib/fte
+LIBDIR=$PREFIX/share/fte
 CONFIGDIR=$LIBDIR/config
 
 LOCALCONFIGDIR=$LIBDIR/localconfig
 
-# To do some of this stuff, you should be root...
-if [ -z "$INSTALL_NONROOT" ]
-then
-    id | grep "^uid=0(" > /dev/null
-    if [ $? -ne 0 ]
-    then
-        echo "We don't recommend installing as non-root.  To try anyway,"
-        echo "export INSTALL_NONROOT=1 before running the install."
-        echo "NOTE: You should also export PREFIX=/your/home/dir/fte to"
-        echo "give this a chance of working."
-        exit 1
-    fi
-else
-	echo "Root-check bypassed - installing at your own risk"
-fi
-
 # Ensure everything is made.
 make -e all
 if [ $? -ne 0 ]
@@@@ -45,9 +29,9 @@@@ fi
 rm -rf $CONFIGDIR
 
 # Make the directories we'll need.
-mkdir -p $BINDIR
-mkdir -p $LIBDIR
-mkdir -p $LOCALCONFIGDIR
+${BSD_INSTALL_PROGRAM_DIR} $BINDIR
+${BSD_INSTALL_DATA_DIR} $LIBDIR
+${BSD_INSTALL_DATA_DIR} $LOCALCONFIGDIR
 
 # Set up our binaries.
 for file in fte xfte cfte sfte vfte nfte
@@@@ -58,29 +42,16 @@@@ do
         # if this is the right directory for this file, use it.
         if [ -f $dir/$file ]
         then
-            # try to copy it.
-            cp $dir/$file $BINDIR 2> /dev/null
-            # if that doesn't work, force it.
-            # NOTE: This may crash any running copy of FTE on some platforms
-            #       AIX, Linux: confirmed okay
-            #       Sun: confirmed crash
-            if [ $? -ne 0 ]
-            then
-                # Unix has the nice capability of being able to unlink
-                # in-use files.
-                echo "Forcing $file"
-                rm -f $BINDIR/$file
-                cp $dir/$file $BINDIR
-            fi
+            ${BSD_INSTALL_PROGRAM} $dir/$file $BINDIR 2> /dev/null
         fi
     done
 done
 
 # Copy our configuration.
 cp -r config $LIBDIR
+rm $CONFIGDIR/*.orig
 # Somehow things may not all be properly readable by everyone.
-chmod a+r $CONFIGDIR/*
-chmod a+r $CONFIGDIR/*/*
+chmod -R a+r $CONFIGDIR
 
 # Any CVS directory that is copied over should be uncopied over.
 rm -rf `find $CONFIGDIR -type d -name CVS`
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- install.orig	Mon Jan  6 18:18:30 2003
+++ install	Sat Sep 15 12:33:48 2007
d46 1
a46 1
@@@@ -58,20 +42,7 @@@@ do
d68 11
@


1.1.1.1
log
@Import FTE, a powerful, intuitive and lightweight editor for X.

Help and OK naddy@@.
@
text
@@
