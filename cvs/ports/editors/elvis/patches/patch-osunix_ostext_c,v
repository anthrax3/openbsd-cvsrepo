head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.04.17.21.43.15;	author sthen;	state Exp;
branches;
next	;
commitid	vWuXWlzdHDDY4nRX;


desc
@@


1.1
log
@Updates from Donovan Watteau, who takes maintainer. From Donovan's mail:

* Fix a startup crash that's extremely easy to trigger on OpenBSD
  (patch-draw_c).

* Various fixes from a forked Github version (there was no official
  elvis release since 2004), clang warns about most of them.

* Remove some questionable/broken/dangerous features: backtick
  support in filenames, WYSIWYG for nroff/tex files, and
  HTTP/FTP support.  Looking at the code, I'd feel better having
  less features, here.  Please complain if you really want them.

* Remove dead FTP mirrors from MASTER_SITES, and use an HTTP server
  instead.

* Remove some previous patches of mine which only dealt with
  whitespace in man pages: fixing that was just useless noise.
@
text
@$OpenBSD$

Fix an obvious typo.

--- osunix/ostext.c.orig	Tue Oct 21 04:32:26 2003
+++ osunix/ostext.c	Tue Aug 16 19:52:22 2016
@@@@ -46,7 +46,7 @@@@ int txtopen(filename, rwa, binary)
 	fd = open(filename, mode, 0666);
 	if (fd < 0)
 	{
-		if (errno == EPERM || EACCES)
+		if (errno == EPERM || errno == EACCES)
 			return -1;
 		else if (errno == EISDIR)
 			return -2;
@
