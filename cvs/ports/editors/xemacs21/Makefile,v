head	1.45;
access;
symbols
	OPENBSD_6_2:1.45.0.32
	OPENBSD_6_2_BASE:1.45
	OPENBSD_6_1:1.45.0.30
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.45.0.28
	OPENBSD_6_0_BASE:1.45
	OPENBSD_5_9:1.45.0.24
	OPENBSD_5_9_BASE:1.45
	OPENBSD_5_8:1.45.0.26
	OPENBSD_5_8_BASE:1.45
	OPENBSD_5_7:1.45.0.22
	OPENBSD_5_7_BASE:1.45
	OPENBSD_5_6:1.45.0.20
	OPENBSD_5_6_BASE:1.45
	OPENBSD_5_5:1.45.0.18
	OPENBSD_5_5_BASE:1.45
	OPENBSD_5_4:1.45.0.16
	OPENBSD_5_4_BASE:1.45
	OPENBSD_5_3:1.45.0.14
	OPENBSD_5_3_BASE:1.45
	OPENBSD_5_2:1.45.0.12
	OPENBSD_5_2_BASE:1.45
	OPENBSD_5_1_BASE:1.45
	OPENBSD_5_1:1.45.0.10
	OPENBSD_5_0:1.45.0.8
	OPENBSD_5_0_BASE:1.45
	OPENBSD_4_9:1.45.0.6
	OPENBSD_4_9_BASE:1.45
	OPENBSD_4_8:1.45.0.4
	OPENBSD_4_8_BASE:1.45
	OPENBSD_4_7:1.45.0.2
	OPENBSD_4_7_BASE:1.45
	OPENBSD_4_6:1.44.0.8
	OPENBSD_4_6_BASE:1.44
	OPENBSD_4_5:1.44.0.6
	OPENBSD_4_5_BASE:1.44
	OPENBSD_4_4:1.44.0.4
	OPENBSD_4_4_BASE:1.44
	OPENBSD_4_3:1.44.0.2
	OPENBSD_4_3_BASE:1.44
	OPENBSD_4_2:1.42.0.2
	OPENBSD_4_2_BASE:1.42
	OPENBSD_4_1:1.41.0.2
	OPENBSD_4_1_BASE:1.41
	OPENBSD_4_0:1.40.0.2
	OPENBSD_4_0_BASE:1.40
	OPENBSD_3_9:1.36.0.2
	OPENBSD_3_9_BASE:1.36
	OPENBSD_3_8:1.28.0.4
	OPENBSD_3_8_BASE:1.28
	OPENBSD_3_7:1.28.0.2
	OPENBSD_3_7_BASE:1.28
	OPENBSD_3_6:1.26.0.2
	OPENBSD_3_6_BASE:1.26
	OPENBSD_3_5:1.22.0.2
	OPENBSD_3_5_BASE:1.22
	OPENBSD_3_4:1.20.0.2
	OPENBSD_3_4_BASE:1.20
	OPENBSD_3_3:1.17.0.2
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.15.0.2
	OPENBSD_3_2_BASE:1.15
	OPENBSD_3_1:1.14.0.2
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9_TRACKING_SWITCH:1.12
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.6.0.2
	OPENBSD_2_8_BASE:1.6
	MARC_2000-aug-15:1.1.1.1
	MARC:1.1.1;
locks; strict;
comment	@# @;


1.45
date	2010.02.01.17.00.13;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2007.09.18.18.56.03;	author aanriot;	state Exp;
branches;
next	1.43;

1.43
date	2007.09.16.00.44.00;	author merdely;	state Exp;
branches;
next	1.42;

1.42
date	2007.07.27.20.24.09;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2007.02.14.16.55.28;	author steven;	state Exp;
branches;
next	1.40;

1.40
date	2006.08.15.06.09.56;	author sturm;	state Exp;
branches;
next	1.39;

1.39
date	2006.08.01.23.39.08;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2006.07.28.06.29.34;	author steven;	state Exp;
branches;
next	1.37;

1.37
date	2006.07.01.17.52.45;	author aanriot;	state Exp;
branches;
next	1.36;

1.36
date	2006.02.11.08.53.26;	author sturm;	state Exp;
branches;
next	1.35;

1.35
date	2006.02.08.19.56.47;	author steven;	state Exp;
branches;
next	1.34;

1.34
date	2006.01.22.21.20.48;	author aanriot;	state Exp;
branches;
next	1.33;

1.33
date	2006.01.22.15.59.22;	author sturm;	state Exp;
branches;
next	1.32;

1.32
date	2005.11.17.00.54.32;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2005.11.03.18.28.55;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2005.11.03.15.51.04;	author aanriot;	state Exp;
branches;
next	1.29;

1.29
date	2005.09.23.20.23.24;	author aanriot;	state Exp;
branches;
next	1.28;

1.28
date	2005.02.09.03.48.43;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2004.11.24.11.08.04;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2004.08.10.08.32.36;	author xsa;	state Exp;
branches
	1.26.2.1;
next	1.25;

1.25
date	2004.06.24.17.21.49;	author sturm;	state Exp;
branches;
next	1.24;

1.24
date	2004.06.23.06.29.26;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2004.05.03.06.27.00;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2004.03.03.09.58.21;	author brad;	state Exp;
branches
	1.22.2.1;
next	1.21;

1.21
date	2004.03.03.09.54.19;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2003.07.06.18.34.48;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2003.04.24.18.21.26;	author lebel;	state Exp;
branches;
next	1.18;

1.18
date	2003.04.24.18.15.39;	author lebel;	state Exp;
branches;
next	1.17;

1.17
date	2003.03.01.03.19.15;	author pvalchev;	state Exp;
branches;
next	1.16;

1.16
date	2002.12.29.19.43.50;	author fgsch;	state Exp;
branches;
next	1.15;

1.15
date	2002.07.19.22.25.59;	author pvalchev;	state Exp;
branches;
next	1.14;

1.14
date	2002.03.22.07.18.44;	author jasoni;	state Exp;
branches;
next	1.13;

1.13
date	2002.02.06.01.17.08;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2001.08.11.23.11.14;	author heko;	state Exp;
branches;
next	1.11;

1.11
date	2001.07.18.10.59.01;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2001.07.13.11.24.07;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2001.05.24.02.27.22;	author kevlo;	state Exp;
branches;
next	1.8;

1.8
date	2001.05.06.00.29.26;	author lebel;	state Exp;
branches;
next	1.7;

1.7
date	2001.03.01.21.20.15;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2000.11.04.13.16.33;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.10.24.04.43.46;	author jasoni;	state Exp;
branches;
next	1.4;

1.4
date	2000.10.23.21.52.56;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2000.10.22.15.41.54;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.10.22.14.03.11;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.15.21.41.28;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.08.15.21.41.28;	author marc;	state Exp;
branches;
next	;

1.22.2.1
date	2005.02.09.21.23.52;	author sturm;	state Exp;
branches;
next	;

1.26.2.1
date	2005.02.09.21.23.00;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.45
log
@SUBDIR += is wrong: it means the makefile will pick up SUBDIR from env, thus
breaking cd /usr/ports && SUBDIR=some/path make something for
category makefiles. While there, also put spaces around += uniformously.
okay naddy@@, jasper@@
@
text
@# $OpenBSD: Makefile,v 1.44 2007/09/18 18:56:03 aanriot Exp $

    SUBDIR =
    SUBDIR += stable
    SUBDIR += stable,mule

.include <bsd.port.subdir.mk>
@


1.44
log
@move Xemacs 21.4 in xemacs21/stable, in order to import Xemacs 21.5
later (the actively developped branch, which has Xft support etc.)

help and ok matthieu@@, "looks ok" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
@


1.43
log
@Removed surrounding quotes in COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/07/27 20:24:09 naddy Exp $
d3 2
a4 1
COMMENT=	heavily customizable and extensible editor
d6 1
a6 112
VERSION=	21.4.19
DISTNAME=	xemacs-${VERSION}
PKGNAME=	${DISTNAME}p3
CATEGORIES=	editors

HOMEPAGE=	http://www.xemacs.org/

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c m ncurses util

MASTER_SITES= 	ftp://ftp.xemacs.org/pub/xemacs/xemacs-21.4/ \
		ftp://ftp.oleane.net/pub/xemacs/xemacs-21.4/ \
		ftp://ftp.pasteur.fr/pub/computing/xemacs/xemacs-21.4/ \
		ftp://ftp.mpi-sb.mpg.de/pub/gnu/mirror/ftp.xemacs.org/xemacs/xemacs-21.4/ \
      		ftp://ftp.funet.fi/pub/mirrors/ftp.xemacs.org/pub/tux/xemacs/xemacs-21.4/

GCCARCH=        ${MACHINE_ARCH}-unknown-openbsd${OSREV}
SUBST_VARS=	GCCARCH VERSION

AUTOCONF_VERSION=2.13
CONFIGURE_STYLE=autoconf old dest no-autoheader

CONFIGURE_ARGS+=--infodir='$${DESTDIR}${PREFIX}/info/${DISTNAME}' \
		--infopath='${LOCALBASE}/info/${DISTNAME}:${LOCALBASE}/info:/usr/share/info' \
		--site-prefixes='${LOCALBASE}:/usr' \
		--without-ldap \
		--without-postgresql \
		--without-cde \
		--without-offix \
		--without-dragndrop \
		--without-gpm \
		--with-msw=no \
		--without-tooltalk \
		--with-sound=no \
		--with-xface=no \
		--without-wnn6 \
		--without-gtk \
		--without-gnome \
		--with-database=no \
		--with-file-coding=yes \
		--with-system-malloc \
		--pdump \
		${GCCARCH}

FAKE_FLAGS=	prefix='$${WRKINST}$${DESTDIR}${PREFIX}' \
		infodir='$${WRKINST}$${DESTDIR}${PREFIX}/info/${DISTNAME}'

FLAVORS=	mule canna wnn no_x11
FLAVOR?=

.if ${FLAVOR:L:Mno_x11}
CONFIGURE_ARGS+=--without-x11
.else
USE_X11=	Yes
WANTLIB+=	ICE SM X11 Xau Xaw Xext Xmu Xpm Xt z

CONFIGURE_ARGS+=--with-menubars=lucid \
		--with-scrollbars=lucid \
		--with-dialogs=athena \
		--with-widgets=athena \
		--with-jpeg \
		--with-png \
		--with-tiff \
		--site-includes="${LOCALBASE}/include/libpng"

LIB_DEPENDS+=	jpeg.>=62::graphics/jpeg \
		png.>=2.::graphics/png \
		tiff.>=35::graphics/tiff

. if ${FLAVOR:L:Mmule}
CONFIGURE_ARGS+=--with-xim=xlib
. endif
.endif

.if ${FLAVOR:L:Mmule}
MODULES=	devel/gettext
CONFIGURE_ARGS+=--with-mule

. if ${FLAVOR:L:Mcanna}
LIB_DEPENDS+=	canna.1,RKC.1::japanese/canna
CONFIGURE_ARGS+=--with-canna
. else
CONFIGURE_ARGS+=--with-canna=no
. endif

. if ${FLAVOR:L:Mwnn}
BUILD_DEPENDS+= ::japanese/Wnn
CONFIGURE_ARGS+=--with-wnn
. else
CONFIGURE_ARGS+=--with-wnn=no
. endif

.else

. if ${FLAVOR:L:Mcanna} || ${FLAVOR:L:Mwnn}
ERRORS+= "Fatal: You cannot use MULE-dependant flavors without MULE support"
. endif

CONFIGURE_ARGS+=--with-mule=no \
		--with-canna=no \
		--with-wnn=no
.endif

post-install:
	@@rm -f ${PREFIX}/lib/xemacs-${VERSION}/lisp/*`hostname`.*
	@@touch ${PREFIX}/lib/xemacs-${VERSION}/lisp/mule/mule-x-init.elc

.include <bsd.port.mk>
@


1.42
log
@bump package name due to OSREV increment
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/02/14 16:55:28 steven Exp $
d3 1
a3 1
COMMENT=	"heavily customizable and extensible editor"
@


1.41
log
@bump PKGNAME due to PLIST changes after 4.0 -> 4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/08/15 06:09:56 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p2
@


1.40
log
@move mule files into PFRAG.mule

noticed by Tan Dang <tan.dang at gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/08/01 23:39:08 espie Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
@


1.39
log
@new libspecs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/07/28 06:29:34 steven Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
@


1.38
log
@bump PKGNAME due to PLIST changes after 3.9 -> 4.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/07/01 17:52:45 aanriot Exp $
d74 3
a76 3
LIB_DEPENDS+=	jpeg.62::graphics/jpeg \
		png.2.::graphics/png \
		tiff.35::graphics/tiff
@


1.37
log
@maintenance update to 21.4.19 .

tested by matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/02/11 08:53:26 sturm Exp $
d7 1
@


1.36
log
@bump PKGNAME for mule FLAVOR as well (after WANTLIB changes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/02/08 19:56:47 steven Exp $
d5 1
a5 1
VERSION=	21.4.17
a6 2
# see below as well
PKGNAME=	${DISTNAME}p2
a82 1
PKGNAME=	${DISTNAME}p3
@


1.35
log
@add libXau in WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/01/22 21:20:48 aanriot Exp $
d85 1
a85 1
PKGNAME=	${DISTNAME}p2
@


1.34
log
@- move the top-level-directory file "dir" after @@info files in PLIST to
make install-info happy at pkg_delete time.
- remove dead mirrors in MASTER_SITES.
- bump PKGNAME.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/01/22 15:59:22 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
d64 1
a64 1
WANTLIB+=	ICE SM X11 Xaw Xext Xmu Xpm Xt z
@


1.33
log
@bump PKGNAMEs due to PLIST changes after 3.8 -> 3.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/11/17 00:54:32 naddy Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
a23 3
		ftp://ftp.usyd.edu.au/pub/Xemacs/xemacs-21.4/ \
		ftp://ftp.lab.kdd.co.jp/xemacs/xemacs-21.4/ \
		ftp://ftp.th-darmstadt.de/pub/editors/xemacs/xemacs-21.4/ \
d85 1
a85 1
PKGNAME=	${DISTNAME}p1
@


1.32
log
@fix dependencies for mule flavors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/11/03 18:28:55 naddy Exp $
d7 2
a8 1
#PKGNAME=	# also see below
d88 1
a88 1
PKGNAME=	${DISTNAME}p0
@


1.31
log
@Always explicitly set the AUTOCONF_VERSION to use.  In some cases
the default was not appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/11/03 15:51:04 aanriot Exp $
d7 1
d87 2
a88 1
MODULES=		devel/gettext
d92 1
a92 1
LIB_DEPENDS+=	canna16::japanese/canna
d94 2
d101 2
@


1.30
log
@- update to 21.4.17.
- add a few fixes.

tested by matthieu@@, krw@@
inputs from espie, inputs and review alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/09/23 20:23:24 aanriot Exp $
d30 1
@


1.29
log
@fix WANTLIB markers.

ok niallo@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/02/09 03:48:43 brad Exp $
d3 1
a3 1
COMMENT=		"heavily customizable and extensible editor"
d5 3
a7 4
VERSION=		21.4.15
DISTNAME=		xemacs-${VERSION}
PKGNAME=		${DISTNAME}p2
CATEGORIES=		editors
d9 1
a9 1
HOMEPAGE=		http://www.xemacs.org/
a17 1
# where the source files and patches can be fetched
d27 2
a28 2
# Dependencies are very flavors-specific, you have
# to select a flavor set to know them
d30 1
a30 1
# build/configuration variables
d32 21
a52 43
# XEmacs symlinks a lot of files in its source tree
# preventing safe SEPARATE_BUILD
# (In facts, files modified in the source tree
# are not platform-specific (elisp bytecode) but
# you cannot build the package on different systems
# sharing the same ports tree w/o risking race
# problems (yes, building over nfs is stupid but...)) 
# (there are flavors (mule) issues too)
# Lots of configure.in changes are needed to restore
# a more logical behaviour (eech)
# Therefore, this is commented out for now:
# SEPARATE_BUILD=		simple

#USE_GMAKE=		Yes

# 'configure.in' modified to generate a 'configure'
# that knows about curses really being ncurses

CONFIGURE_STYLE=	autoconf old dest no-autoheader
CONFIGURE_ARGS+=	--infodir='$${DESTDIR}${PREFIX}/info/${DISTNAME}' \
			--infopath='${LOCALBASE}/info/${DISTNAME}:${LOCALBASE}/info:/usr/share/info' \
			--site-prefixes='${LOCALBASE}:/usr' \
			--without-ldap \
			--without-postgresql \
			--without-cde \
			--without-offix \
			--without-dragndrop \
			--without-gpm \
			--with-msw=no \
			--without-tooltalk \
			--with-sound=no \
			--with-xface=no \
			--without-wnn6 \
			--without-gtk \
			--without-gnome \
			--with-database=no \
			--with-file-coding=yes \
			--with-system-malloc \
			--pdump

# there is not (yet) bsd sound support in XEmacs
# XEmacs does not work with OpenLDAP (linking problem, 
# will try to fix if somebody asks)
d57 1
a57 18
####

# Arch string for configure
# copied from emacs and xemacs20 ports

GCCARCH=        ${MACHINE_ARCH}-unknown-openbsd${OSREV}

CONFIGURE_ARGS+=	${GCCARCH}
SUBST_VARS=	GCCARCH VERSION

#### Flavors

# generic flavors
FLAVORS=	mule canna wnn

# X11 Related
FLAVORS+=	no_x11

a59 4
#
# X11-related
#

a60 1

a61 1

a62 2

### X11-dependent flavors
d66 2
a67 3
CONFIGURE_ARGS+=	--with-menubars=lucid

CONFIGURE_ARGS+=--with-scrollbars=lucid \
d69 4
a72 6
		--with-widgets=athena

LIB_DEPENDS+=	jpeg.62::graphics/jpeg
CONFIGURE_ARGS+=--with-jpeg
LIB_DEPENDS+=	png.2.::graphics/png
CONFIGURE_ARGS+=--with-png \
d75 3
a77 2
LIB_DEPENDS+=	tiff.35::graphics/tiff
CONFIGURE_ARGS+=--with-tiff
d80 1
a80 2
CONFIGURE_ARGS+=	--with-xim=xlib
# prevents XEmacs from using motif's XIM which coredumps a lot
a81 2

### end of X11 dependant flavors
a83 5
#
# MULE (MUlti Lingual Emacs) RELATED 
# I18N
#

a90 2
. else
CONFIGURE_ARGS+=--with-canna=no
a95 2
. else
CONFIGURE_ARGS+=--with-wnn=no
a108 6
#######
STRIP_EXECS=    cvtmail digest-doc fakemail gnuserv hexl make-docfile \
		mmencode movemail profile sorted-doc wakeup yow
STRIP_PROGS=	${DISTNAME} gnuclient xemacs-b2m xemacs-ctags \
		xemacs-etags ootags

d110 2
a111 10
# Stripping
.for file in ${STRIP_PROGS}
	@@strip ${PREFIX}/bin/${file}
.endfor
.for file in ${STRIP_EXECS}
	@@strip ${PREFIX}/lib/${DISTNAME}/${GCCARCH}/${file}
.endfor
.if !defined(LOCKDIR)
	@@rm -rf ${PREFIX}/lib/xemacs
.endif
@


1.28
log
@Max Vozeler discovered a format string vulnerability in the "movemail"
utility of Emacs. By sending specially crafted packets, a malicious
POP3 server could cause a buffer overflow, which could have been
exploited to execute arbitrary code with the privileges of the user.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/11/24 11:08:04 espie Exp $
d7 2
a8 2
PKGNAME=		${DISTNAME}p1
CATEGORIES=     	editors
d17 1
a17 1
WANTLIB=		ICE SM X11 Xaw Xext Xmu Xpm Xt c m ncurses util z
a33 3
# this one is not "toggle-able" in the configure script
MODULES=	devel/gettext

d113 1
d144 1
@


1.27
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/08/10 08:32:36 xsa Exp $
d7 1
@


1.26
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/06/24 17:21:49 sturm Exp $
d16 1
@


1.26.2.1
log
@MFC:

Max Vozeler discovered a format string vulnerability in the "movemail"
utility of Emacs. By sending specially crafted packets, a malicious
POP3 server could cause a buffer overflow, which could have been
exploited to execute arbitrary code with the privileges of the user.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/08/10 08:32:36 xsa Exp $
a6 1
PKGNAME=		${DISTNAME}p1
@


1.25
log
@update to xemacs 21.4.15

based on a diff from Gregory Steuck <greg at y2004.nest.cx>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2004/06/23 06:29:26 naddy Exp $
d33 1
a33 1
MODULES=	gettext
@


1.24
log
@remove maintainer on his own request
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2004/05/03 06:27:00 espie Exp $
d5 1
a5 1
VERSION=		21.4.12
d90 1
a90 1
SUBST_VARS=	GCCARCH
@


1.23
log
@no-autoheader there too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/03/03 09:58:21 brad Exp $
a9 3

# where to send bitches about this port
MAINTAINER=		Jean-Yves Burlett <jean-yves@@burlett.org>
@


1.22
log
@fix --infopath list, was munged in rev 1.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2004/03/03 09:54:19 brad Exp $
d56 1
a56 1
CONFIGURE_STYLE=	autoconf old dest
@


1.22.2.1
log
@MFC:

Max Vozeler discovered a format string vulnerability in the "movemail"
utility of Emacs. By sending specially crafted packets, a malicious
POP3 server could cause a buffer overflow, which could have been
exploited to execute arbitrary code with the privileges of the user.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/03/03 09:58:21 brad Exp $
a6 1
PKGNAME=		${DISTNAME}p1
@


1.21
log
@for now disable the Berkeley DB support until someone fixes the autoconf
test to ensure the libc version is used over an external version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2003/07/06 18:34:48 naddy Exp $
d58 1
a58 1
			--infopath='${LOCALBASE}/info/${DISTNAME}:${LOCALBASE}/info:usr/share/info' \
@


1.20
log
@Remove compface flavor with its licensing complications.
No response from maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/04/24 18:21:26 lebel Exp $
d73 1
a73 1
			--with-database=berkdb \
@


1.19
log
@use autoconf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/04/24 18:15:39 lebel Exp $
d14 2
a15 2
# GNU GPL License
# PERMIT_PACKAGE_CDROM=	??? # depends on flavors (compface), see below
d17 1
d69 1
d77 1
a77 1
			
d101 1
a101 1
FLAVORS+=	no_x11 compface
a112 4
. if ${FLAVOR:L:Mcompface}
ERRORS+= "Fatal: You cannot use X11-related flavors with a non-X11 flavor"
. endif

a132 11
. if ${FLAVOR:L:Mcompface}

# compface statically linked -> license issues
PERMIT_PACKAGE_CDROM=   "No Fee"
PERMIT_DISTFILES_CDROM=	"No Fee"
BUILD_DEPENDS+=  ::graphics/compface
CONFIGURE_ARGS+=--with-xface
. else
CONFIGURE_ARGS+=--with-xface=no
. endif

a171 12
.endif

#
# license-related
#

.if !defined(PERMIT_PACKAGE_CDROM)
PERMIT_PACKAGE_CDROM=	Yes
.endif

.if !defined(PERMIT_DISTFILES_CDROM)
PERMIT_DISTFILES_CDROM=	Yes
@


1.18
log
@update editors/xemacs to 21.4.12; from MAINTAINER; reviewed by me and sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/12/29 19:43:50 fgsch Exp $
d55 1
a55 1
CONFIGURE_STYLE=	gnu old dest
@


1.17
log
@using ld -Z to disable GOT/PLT padding as a work-around because emacs
makes some incorrect assumptions about ELF (BSS is no longer in data
PT_LOAD section)
@
text
@d5 1
a5 1
VERSION=		21.1.14
d20 8
a27 8
MASTER_SITES= 	ftp://ftp.xemacs.org/pub/xemacs/xemacs-21.1/ \
		ftp://ftp.oleane.net/pub/xemacs/xemacs-21.1/ \
		ftp://ftp.pasteur.fr/pub/computing/xemacs/xemacs-21.1/ \
		ftp://ftp.mpi-sb.mpg.de/pub/gnu/mirror/ftp.xemacs.org/xemacs/xemacs-21.1/ \
		ftp://ftp.usyd.edu.au/pub/Xemacs/xemacs-21.1/ \
		ftp://ftp.lab.kdd.co.jp/xemacs/xemacs-21.1/ \
		ftp://ftp.th-darmstadt.de/pub/editors/xemacs/xemacs-21.1/ \
      		ftp://ftp.funet.fi/pub/mirrors/ftp.xemacs.org/pub/tux/xemacs/xemacs-21.1/
d50 1
a50 3
USE_GMAKE=		Yes

.include <bsd.own.mk>
d55 2
a56 8
CONFIGURE_STYLE=	autoconf old dest
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include/libpng"
.if (${ELF_TOOLCHAIN} == "yes")
CONFIGURE_ENV+=		LDFLAGS="-Z"
.endif
CONFIGURE_ARGS+=	--with-gnu-make \
			--gung-ho \
			--infodir='$${DESTDIR}${PREFIX}/info/${DISTNAME}' \
d60 1
d65 1
d68 7
a74 1
			--without-wnn6
d77 2
a78 1
# XEmacs does not work with OpenLDAP 2.0.7 (linking problem)
d96 1
a96 1
FLAVORS=	mule clashdetect gdbm canna wnn
d99 1
a99 1
FLAVORS+=	no_x11 tiff no_png jpeg motif compface
d111 1
a111 5
. if ${FLAVOR:L:Mno_png} || \
    ${FLAVOR:L:Mjpeg} || \
    ${FLAVOR:L:Mmotif} || \
    ${FLAVOR:L:Mtiff} || \
    ${FLAVOR:L:Mcompface}
a121 5
. if ${FLAVOR:L:Mmotif}
USE_MOTIF=	any
CONFIGURE_ARGS+=--with-scrollbars=motif \
		--with-dialogs=motif
. else
d123 2
a124 2
		--with-dialogs=athena3d
. endif
a125 1
. if ${FLAVOR:L:Mjpeg}
a127 5
. else
CONFIGURE_ARGS+=--without-jpeg
. endif

. if !${FLAVOR:L:Mno_png}
d129 2
a130 4
CONFIGURE_ARGS+=--with-png
. else
CONFIGURE_ARGS+=--without-png
. endif
a131 1
. if ${FLAVOR:L:Mtiff}
a133 3
. else
CONFIGURE_ARGS+=--without-tiff
. endif
d140 1
a140 1
BUILD_DEPENDS+=  ${LOCALBASE}/lib/libcompface.a::graphics/compface
a154 11
# GENERAL FLAVORS
#

.if ${FLAVOR:L:Mgdbm}
LIB_DEPENDS+=	gdbm.2::databases/gdbm
CONFIGURE_ARGS+=--with-database=berkdb,gnudbm
.else
CONFIGURE_ARGS+=--with-database=berkdb
.endif

#
d170 1
a170 1
BUILD_DEPENDS+= ${LOCALBASE}/lib/libwnn.a::japanese/Wnn
a186 16
# Clash-detection flavor needs LOCKDIR to be set to the path
# of the directory where clash detection lockfiles will be put.
# Some people dislikes this feature because anybody able to read
# this directory can see what other people are working on.
# W/o this feature, clash-detection still occur using lockfiles present 
# in the same directory as the file being edited (.#files#) but, in
# this case, clash detection won't work well with symlinked files.

.if ${FLAVOR:L:Mclashdetect} 
. if defined(LOCKDIR)
CONFIGURE_ARGS+=--with-clash-detection --lockdir='$${LOCKDIR}'
. else
ERRORS+= "Fatal: You need to set LOCKDIR to use clashdetect"
. endif
.endif

a199 3
.if (${MACHINE_ARCH} != "alpha")
STRIP_PROGS+=   ${DISTNAME}
.endif
d201 3
a203 2
		make-path mmencode movemail profile sorted-doc wakeup yow
STRIP_PROGS=	gnuclient xemacs-b2m xemacs-ctags xemacs-etags ootags
@


1.16
log
@byebye NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/07/19 22:25:59 pvalchev Exp $
d52 2
d59 3
@


1.15
log
@new png header path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/03/22 07:18:44 jasoni Exp $
a7 1
NEED_VERSION=		1.513
@


1.14
log
@Modify to no longer conflict with Emacs.
- prefix b2m, ctags and etags with xemacs-
- move info files to ${LOCALBASE}/info/xemacs-${VERSION}
ok maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/02/06 01:17:08 brad Exp $
d57 1
a57 1

@


1.13
log
@use gettext module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/08/11 23:11:14 heko Exp $
d8 1
a8 1
NEED_VERSION=		1.500
d60 2
a61 2
			--infodir='$${DESTDIR}${PREFIX}/info' \
			--infopath='${LOCALBASE}/info:/usr/share/info' \
d76 1
a76 1
		infodir='$${WRKINST}$${DESTDIR}${PREFIX}/info'
d248 1
a248 1
STRIP_PROGS=	gnuclient b2m ctags etags ootags
@


1.12
log
@- NEED_MOTIF -> USE_MOTIF (Noticed by me, fix from maintainer)
- Add a dependency to gettext for the mule flavor (From maintainer)
Ok: maintainer Jean-Yves Burlett <jeav-yves@@burlett.org> and jakob@@
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.10 2001/07/13 11:24:07 naddy Exp $

# 
# Description
#
d8 1
a8 1
NEED_VERSION=		1.422
d35 3
d83 1
a83 6
.if ${MACHINE} == "arc" || ${MACHINE} == "pmax"
M_ARCH=         mipsel
.else
M_ARCH=         ${MACHINE_ARCH}
.endif
GCCARCH=        ${M_ARCH}-unknown-openbsd${OSREV}
a188 3
# this one is not "toggle-able" in the configure script
LIB_DEPENDS+=	intl.1::devel/gettext

d253 1
a253 1
	strip ${PREFIX}/bin/${file}
d256 1
a256 1
	strip ${PREFIX}/lib/${DISTNAME}/${GCCARCH}/${file}
d261 1
a261 1
	
@


1.11
log
@- Make use of new bsd.port.mk feature and replace error reporting through
  .BEGIN with ERRORS.
- Sync NEED_VERSION accordingly.
ok espie@@
@
text
@d128 1
a128 1
NEED_MOTIF=	Yes
d194 3
@


1.10
log
@MASTER_SITES fix by Heikki Korpela <heko@@saitti.net>:
- Add ftp.funet.fi and ftp.sunet.se mirrors where available.
- Remove broken ftp.funet.fi references.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/05/24 02:27:22 kevlo Exp $
d12 1
a12 1
NEED_VERSION=		1.402
d117 1
a117 3
.BEGIN:
	@@echo "You cannot use X11-related flavors with a non-X11 flavor"
	@@exit 1
d212 1
a212 3
.BEGIN:
	@@echo "You cannot use MULE-dependant flavors without MULE support"
	@@exit 1
d232 1
a232 3
.BEGIN:
	@@echo "You need to set LOCKDIR to use clashdetect"
	@@exit 1
@


1.9
log
@Bump major rev in png dependeny entries after upgrade of png:
png.1 -> png.2
--
Ok'd by: brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/05/06 00:29:26 lebel Exp $
d31 2
a32 1
		ftp://ftp.th-darmstadt.de/pub/editors/xemacs/xemacs-21.1/
@


1.8
log
@editors: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/03/01 21:20:15 naddy Exp $
d145 1
a145 1
LIB_DEPENDS+=	png.1.::graphics/png
@


1.7
log
@- upgrade to xemacs-21.1.14
- support for wnn and canna added
- better handling of the ncurses problem

Submitted by Jean-Yves Burlett <jean-yves@@burlett.org>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.25 2001/01/05 16:58:08 brad Exp $
d7 2
d12 1
a12 1
NEED_VERSION=		1.353
@


1.6
log
@Do reproducible checks on, resp. motif, ldap, db modules, tiff, so
that we don't pull in unwanted dependencies.
@
text
@d1 1
a1 17
# $OpenBSD: Makefile,v 1.5 2000/10/24 04:43:46 jasoni Exp $
# Supported FLAVORS : mule | compface | no_x11 | clashdetect
# TODO : add flavours for Wnn, Canna, XFontSet and maybe kerberos
# Tested on : i386 sparc (thanks to Free&ALter Soft for the sparc)

VER=		21.1.12
DISTNAME=	xemacs-${VER}
CATEGORIES=	editors
NEED_VERSION=	1.305

MAINTAINER=	Jean-Yves Burlett <jean-yves@@burlett.org>

# GPL
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d3 20
d24 1
d27 1
a27 1
		ftp://ftp.usyd.edu.au:/pub/Xemacs/xemacs-21.1/ \
d31 67
a97 16
SEPARATE_BUILD=	flavored
CONFIGURE_STYLE=gnu old dest
USE_GMAKE= Yes

CONFIGURE_ARGS=	--with-gnu-make \
		--site-prefixes='${LOCALBASE}:/usr' \
		--gung-ho \
		--with-ncurses \
		--with-database=berkdb \
		--without-ldap \
		--with-menubars=lucid \
		--with-scrollbars=lucid \
		--with-dialogs=athena \
		--without-tiff \
		--infodir='$${DESTDIR}${PREFIX}/info' \
		--infopath='${LOCALBASE}/info:/usr/share/info'
a98 1
FAKE_FLAGS= prefix='$${WRKINST}$${DESTDIR}${PREFIX}' infodir='$${WRKINST}$${DESTDIR}${PREFIX}/info'
d101 3
a103 2
FLAVORS=	mule compface clashdetect no_x11
FLAVOR?=
d106 1
d108 11
a119 1
# X11-DEPENDANT flavors
d121 4
a124 2
LIB_DEPENDS= 	jpeg.62::graphics/jpeg  \
		png.1.::graphics/png
d126 36
a161 3
.if ${FLAVOR:L:Mcompface}
PERMIT_PACKAGE_CDROM=   No
BUILD_DEPENDS=  ${PREFIX}/lib/libcompface.a::graphics/compface
d163 1
a163 2
.else
PERMIT_PACKAGE_CDROM=   Yes
d165 8
d175 9
a183 1
# end of X11 dependant flavors
d186 5
a190 1
# X11-independant flavors
d193 26
d221 7
a227 7
# clash detection flavor needs LOCKDIR to be set to the path
# of the directory where clash detection lockfiles will be put
# some people dislikes this feature because anybody able to read
# this directory can see what other people are working on
# w/o this feature, clash detection still occur using lockfiles present 
# in the same directory as the file being edited (.#files#) but clash
# detection won't work well with symlinked files
d229 2
a230 1
.if ${FLAVOR:L:Mclashdetect} && defined(LOCKDIR)
d232 5
d239 3
a241 1
# End of X11-independant flavors
d243 3
a245 2
# Arch string for configure
# copied from emacs and xemacs20 ports
d247 2
a248 6
.if ${MACHINE} == "arc" || ${MACHINE} == "pmax" || ${MACHINE} == "wgrisc"
M_ARCH=         mipsel
.elif ${MACHINE} == "hkmips" || ${MACHINE} == "sgi"
M_ARCH=         mips
.else
M_ARCH=         ${MACHINE_ARCH}
a249 10
GCCARCH=        ${M_ARCH}-unknown-openbsd${OSREV}

SED_PLIST=      |sed -e 's,@@@@GCCARCH@@@@,${GCCARCH},'

CONFIGURE_ARGS+= ${GCCARCH} 

# Strip from emacs and xemacs20 ports

INSTALL_STRIP=
STRIP_PROGS=    b2m ctags etags gnuclient
d251 1
d257 1
d260 1
d267 4
a270 5

# Don't install send-pr for everyone, only for XEmacs' private use.
	@@rm -f ${PREFIX}/bin/send-pr
	@@rm -f ${PREFIX}/bin/install-sid

@


1.5
log
@CONFIGURE_STYLE is now 'old'; doesn't support --sysconfdir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/10/23 21:52:56 naddy Exp $
d34 6
@


1.4
log
@Fix credits; correction requested by former beneficiary.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/10/22 15:41:54 espie Exp $
d27 1
a27 1
CONFIGURE_STYLE=gnu dest
@


1.3
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/10/22 14:03:11 espie Exp $
d83 1
a83 2
# copied from xemacs20 ports
# credits go to hgweigand@@wiesbaden.netsurf.de
d98 1
a98 2
# Strip from xemacs20 port makefile
# credits go to hgweigand@@wiesbaden.netsurf.de
@


1.2
log
@Complete a few MAINTAINER names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/08/15 21:41:28 marc Exp $
d9 1
a9 1
NEED_VERSION=	1.218
d27 1
a27 1
HAS_CONFIGURE=	Yes
d30 1
a30 2
CONFIGURE_ARGS=	--prefix='$${DESTDIR}${PREFIX}' \
		--with-gnu-make \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d11 1
a11 1
MAINTAINER=	jean-yves@@burlett.org
@


1.1.1.1
log
@
Xemacs 21.1.2 port from <jean-yves@@burlett.org> plus minor tweaks.
This is basic xemacs, and needs the sumo tarball (or subset of
xemacs packages) for full functionality.
@
text
@@
