head	1.37;
access;
symbols
	OPENBSD_6_1:1.37.0.2
	OPENBSD_6_1_BASE:1.37
	OPENBSD_6_0:1.36.0.2
	OPENBSD_6_0_BASE:1.36
	OPENBSD_5_9:1.35.0.2
	OPENBSD_5_9_BASE:1.35
	OPENBSD_5_8:1.34.0.4
	OPENBSD_5_8_BASE:1.34
	OPENBSD_5_7:1.33.0.2
	OPENBSD_5_7_BASE:1.33
	OPENBSD_5_6:1.32.0.2
	OPENBSD_5_6_BASE:1.32
	OPENBSD_5_5:1.31.0.2
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.30.0.2
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.28.0.2
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.24.0.2
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2;
locks; strict;
comment	@# @;


1.37
date	2017.03.05.15.11.52;	author landry;	state Exp;
branches;
next	1.36;
commitid	2yW7JhEvDU9UaQcw;

1.36
date	2016.05.12.01.17.13;	author naddy;	state Exp;
branches;
next	1.35;
commitid	yWplpZyyaU1NC3LP;

1.35
date	2015.12.20.00.16.27;	author naddy;	state Exp;
branches;
next	1.34;
commitid	7FwUBfDRx93p0qtP;

1.34
date	2015.06.17.20.03.12;	author sthen;	state Exp;
branches;
next	1.33;
commitid	ASHe8W1wzY7eB3KC;

1.33
date	2015.01.02.14.26.12;	author sthen;	state Exp;
branches;
next	1.32;
commitid	opt64GLzbD0TGQDJ;

1.32
date	2014.07.16.14.35.38;	author naddy;	state Exp;
branches;
next	1.31;
commitid	ggJpOpSoHu6RJsj1;

1.31
date	2014.01.12.14.58.30;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2013.07.07.21.25.28;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2013.06.03.02.46.57;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2013.02.01.18.36.49;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2013.02.01.16.34.36;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2012.08.30.20.54.59;	author pascal;	state Exp;
branches;
next	1.25;

1.25
date	2012.08.11.22.55.39;	author pascal;	state Exp;
branches;
next	1.24;

1.24
date	2012.06.21.13.56.57;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2012.01.13.00.55.14;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2011.07.18.19.06.36;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2011.06.02.13.41.38;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.01.15.01.09.43;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2011.01.06.08.47.58;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2011.01.03.18.56.37;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2011.01.03.10.44.27;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2011.01.03.00.15.37;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.15.23.22.07;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.07.18.50.57;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.24.21.16.25;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.18.18.00.16;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.08.04.14.44.15;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.24.23.05.08;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2010.01.27.21.43.28;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2009.12.15.10.05.55;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2009.08.10.06.31.09;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.22.17.00.23;	author naddy;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2009.02.09.20.48.23;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2008.07.04.16.46.10;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.22.17.06.25;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2007.09.18.18.56.03;	author aanriot;	state Exp;
branches;
next	;

1.5.2.1
date	2009.12.29.23.35.04;	author william;	state Exp;
branches;
next	;


desc
@@


1.37
log
@Bump REVISION, also has OSREV in PLIST (prodded by naddy@@)
@
text
@# $OpenBSD: Makefile,v 1.36 2016/05/12 01:17:13 naddy Exp $

BRANCH=		21.4
VERSION=	22
REVISION=	15

WANTLIB=	c m ncurses util

CFLAGS +=	-fno-pie
CONFIGURE_ENV =	LDFLAGS="-nopie"
CONFIGURE_ARGS+=--infodir='$${DESTDIR}${PREFIX}/info/${DISTNAME}' \
		--infopath='${LOCALBASE}/info/${DISTNAME}:${LOCALBASE}/info:/usr/share/info' \
		--site-prefixes='${LOCALBASE}:/usr' \
		--without-ldap \
		--without-postgresql \
		--without-cde \
		--without-offix \
		--without-dragndrop \
		--without-gpm \
		--with-msw=no \
		--without-tooltalk \
		--with-sound=no \
		--with-xface=no \
		--without-wnn6 \
		--without-gtk \
		--without-gnome \
		--with-database=no \
		--with-file-coding=yes \
		--with-system-malloc \
		--pdump \
		${GCCARCH}

USE_GROFF =	Yes
FAKE_FLAGS=	prefix='$${WRKINST}$${DESTDIR}${PREFIX}' \
		infodir='$${WRKINST}$${DESTDIR}${PREFIX}/info/${DISTNAME}'

FLAVORS=	mule canna wnn no_x11
FLAVOR?=

.if ${FLAVOR:Mno_x11}
CONFIGURE_ARGS+=--without-x11
.else
WANTLIB+=	ICE SM X11 Xau Xaw Xext Xmu Xpm Xt z

CONFIGURE_ARGS+=--with-menubars=lucid \
		--with-scrollbars=lucid \
		--with-dialogs=athena \
		--with-widgets=athena \
		--with-jpeg \
		--with-png \
		--with-tiff

LIB_DEPENDS+=	graphics/jpeg \
		graphics/png \
		graphics/tiff
WANTLIB +=	jpeg>=62 png>=2 tiff>=35

. if ${FLAVOR:Mmule}
CONFIGURE_ARGS+=--with-xim=xlib
. endif
.endif

.if ${FLAVOR:Mmule}
MODULES=	devel/gettext
CONFIGURE_ARGS+=--with-mule

. if ${FLAVOR:Mcanna}
LIB_DEPENDS+=	japanese/canna
CONFIGURE_ARGS+=--with-canna
WANTLIB +=	canna>=1 RKC>=1
. else
CONFIGURE_ARGS+=--with-canna=no
. endif

. if ${FLAVOR:Mwnn}
BUILD_DEPENDS+= japanese/Wnn
CONFIGURE_ARGS+=--with-wnn
. else
CONFIGURE_ARGS+=--with-wnn=no
. endif

.else

. if ${FLAVOR:Mcanna} || ${FLAVOR:Mwnn}
ERRORS+= "Fatal: You cannot use MULE-dependant flavors without MULE support"
. endif

CONFIGURE_ARGS+=--with-mule=no \
		--with-canna=no \
		--with-wnn=no
.endif

.include <bsd.port.mk>
@


1.36
log
@bump for plist changes 5.9 -> 6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/12/20 00:16:27 naddy Exp $
d5 1
a5 1
REVISION=	14
@


1.35
log
@bump for plist changes 5.8 -> 5.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/06/17 20:03:12 sthen Exp $
d5 1
a5 1
REVISION=	13
@


1.34
log
@port REVISION bumps as base has moved to 5.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/01/02 14:26:12 sthen Exp $
d5 1
a5 1
REVISION=	12
@


1.33
log
@bump REVISION for 5.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/07/16 14:35:38 naddy Exp $
d5 1
a5 1
REVISION=	11
@


1.32
log
@bump for plist changes 5.5 -> 5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/01/12 14:58:30 naddy Exp $
d5 1
a5 1
REVISION=	10
@


1.31
log
@bump for plist changes 5.4 -> 5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/07/07 21:25:28 naddy Exp $
d5 1
a5 1
REVISION=	9
@


1.30
log
@bump for plist changes 5.3 -> 5.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/06/03 02:46:57 naddy Exp $
d5 1
a5 1
REVISION=	8
@


1.29
log
@cope with new png include layout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/02/01 18:36:49 naddy Exp $
d5 1
a5 1
REVISION=	7
@


1.28
log
@oops, bump REVISION, not the minor version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/02/01 16:34:36 naddy Exp $
d51 1
a51 2
		--with-tiff \
		--site-includes="${LOCALBASE}/include/libpng"
@


1.27
log
@bump for plist changes 5.2 -> 5.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/08/30 20:54:59 pascal Exp $
d4 2
a5 2
VERSION=	23
REVISION =	6
@


1.26
log
@Adapt PIE fixes to new gcc/ld behaviour: Use -nopie as LDFLAGS and -fno-pie as
CFLAGS.

found in a bulk by and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/08/11 22:55:39 pascal Exp $
d4 1
a4 1
VERSION=	22
@


1.25
log
@Prepare emacs for PIE.  emacs2* currently use gmalloc, which is incompatible
with PIE.  We should be using the system malloc anyway for security reasons.
Unfortunately, there are yet more problems with PIE in emacs proper, so disable
it for now until a solution is found.

ok naddy@@ sthen@@ (on a previous version)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/06/21 13:56:57 sthen Exp $
d10 1
a10 1
#CONFIGURE_ENV =	LDFLAGS="-fno-pie"
@


1.24
log
@bump for plist changes 5.1 -> 5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/01/13 00:55:14 naddy Exp $
d9 2
@


1.23
log
@bump revision for plist changes 5.0 -> 5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/12/02 14:36:14 espie Exp $
d5 1
a5 1
REVISION =	5
@


1.22
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/07/18 19:06:36 naddy Exp $
d5 1
a5 1
REVISION =	4
@


1.21
log
@bump revision for plist changes 4.9 -> 5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/06/02 13:41:38 ajacoutot Exp $
d38 1
a38 1
.if ${FLAVOR:L:Mno_x11}
d57 1
a57 1
. if ${FLAVOR:L:Mmule}
d62 1
a62 1
.if ${FLAVOR:L:Mmule}
d66 1
a66 1
. if ${FLAVOR:L:Mcanna}
d74 1
a74 1
. if ${FLAVOR:L:Mwnn}
d83 1
a83 1
. if ${FLAVOR:L:Mcanna} || ${FLAVOR:L:Mwnn}
@


1.20
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/01/15 01:09:43 naddy Exp $
d5 1
a5 1
REVISION =	3
@


1.19
log
@bump revision for plist changes 4.8 -> 4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/01/06 08:47:58 jasper Exp $
d5 1
a5 1
REVISION =	2
@


1.18
log
@- fix PLIST, spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/01/03 18:56:37 espie Exp $
d5 1
a5 1
REVISION =	1
@


1.17
log
@fix order of files so that dir uninstalls properly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/01/03 10:44:27 jasper Exp $
d5 1
a5 1
REVISION =	0
@


1.16
log
@- update xemacs to 21.4.22
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/01/03 00:15:37 espie Exp $
d5 1
@


1.15
log
@if you move manpages around, do things all the way
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/15 23:22:07 espie Exp $
d4 1
a4 2
VERSION=	19
REVISION=	13
d40 1
a40 1
WANTLIB+=	ICE SM X11 Xau Xaw Xext Xmu Xpm Xt pthread-stubs xcb z
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/07 18:50:57 espie Exp $
d5 1
a5 1
REVISION=	12
@


1.13
log
@do LIB_DEPENDS for emulators/editors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/10/24 21:16:25 ajacoutot Exp $
d52 4
a55 4
LIB_DEPENDS+=	::graphics/jpeg \
		::graphics/png \
		::graphics/tiff
WANTLIB +=	jpeg.>=62 png.>=2 tiff.>=35
d67 1
a67 1
LIB_DEPENDS+=	::japanese/canna
d69 1
a69 1
WANTLIB +=	canna.>=1 RKC.>=1
d75 1
a75 1
BUILD_DEPENDS+= ::japanese/Wnn
@


1.12
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/18 18:00:16 espie Exp $
d52 4
a55 3
LIB_DEPENDS+=	jpeg.>=62::graphics/jpeg \
		png.>=2.::graphics/png \
		tiff.>=35::graphics/tiff
d67 1
a67 1
LIB_DEPENDS+=	canna.>=1,RKC.>=1::japanese/canna
d69 1
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/08/04 14:44:15 sthen Exp $
a40 1
USE_X11=	Yes
@


1.10
log
@Fix lib spec for the canna flavour. Didn't build -> no bump.
From SASANO Takayoshi, ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/07/24 23:05:08 naddy Exp $
d31 1
@


1.9
log
@bump PKGNAME for PLIST changes 4.7 -> 4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/01/27 21:43:28 naddy Exp $
d66 1
a66 1
LIB_DEPENDS+=	canna.1,RKC.1::japanese/canna
@


1.8
log
@bump PKGNAME for PLIST changes 4.6 -> 4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/12/15 10:05:55 jasper Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p11
@


1.7
log
@Security fix for CVE-2009-2688, xemacs: multiple integer overflow flaws.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/08/10 06:31:09 kili Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p10
@


1.6
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/06/22 17:00:23 naddy Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p9
@


1.5
log
@bump PKGNAME for PLIST changes 4.5 -> 4.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/02/09 20:48:23 naddy Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p8
d41 1
a41 1
WANTLIB+=	ICE SM X11 Xau Xaw Xext Xmu Xpm Xt z
@


1.5.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2009-2688

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/06/22 17:00:23 naddy Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p10
@


1.4
log
@bump PKGNAME for PLIST changes 4.4 -> 4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/07/04 16:46:10 naddy Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p7
@


1.3
log
@bump PKGNAME for PLIST changes 4.3 -> 4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/02/22 17:06:25 naddy Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p6
@


1.2
log
@bump PKGNAME for PLIST changes 4.2 -> 4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2007/09/18 18:56:03 aanriot Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p5
@


1.1
log
@move Xemacs 21.4 in xemacs21/stable, in order to import Xemacs 21.5
later (the actively developped branch, which has Xft support etc.)

help and ok matthieu@@, "looks ok" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/07/27 20:24:09 naddy Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p4
@

