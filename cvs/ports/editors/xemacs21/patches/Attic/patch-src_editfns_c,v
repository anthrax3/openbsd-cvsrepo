head	1.3;
access;
symbols
	OPENBSD_4_2:1.2.0.18
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.16
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.14
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.12
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.10
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.8
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.0.10
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.8
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.6
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2007.09.18.18.56.03;	author aanriot;	state dead;
branches;
next	1.2;

1.2
date	2003.04.24.18.15.39;	author lebel;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.01.21.20.17;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@move Xemacs 21.4 in xemacs21/stable, in order to import Xemacs 21.5
later (the actively developped branch, which has Xft support etc.)

help and ok matthieu@@, "looks ok" ajacoutot@@
@
text
@$OpenBSD: patch-src_editfns_c,v 1.2 2003/04/24 18:15:39 lebel Exp $
--- src/editfns.c.orig	Mon Mar 25 22:38:26 2002
+++ src/editfns.c	Mon Mar 25 22:41:42 2002
@@@@ -873,6 +873,7 @@@@ get_home_directory (void)
      between XEmacs and the outside world, the very moment we first get
      the data.  --ben */
   int output_home_warning = 0;
+  struct passwd *pw = NULL;
 
   if (cached_home_directory == NULL)
     {
@@@@ -919,6 +920,13 @@@@ get_home_directory (void)
 # endif
 	    }
 #else	/* !WIN32_NATIVE */
+	if ((pw = getpwuid(getuid())) != NULL)
+	  {
+	   cached_home_directory = pw->pw_dir;
+	   output_home_warning = 0;
+	  }
+	else
+	  {
 	  /*
 	   * Unix, typically.
 	   * Using "/" isn't quite right, but what should we do?
@@@@ -927,6 +935,7 @@@@ get_home_directory (void)
 	   */
 	  cached_home_directory = (Extbyte *) "/";
 	  output_home_warning = 1;
+	}
 #endif	/* !WIN32_NATIVE */
 	}
       if (initialized && output_home_warning)
@


1.2
log
@update editors/xemacs to 21.4.12; from MAINTAINER; reviewed by me and sturm@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_editfns_c,v 1.1 2001/03/01 21:20:17 naddy Exp $
@


1.1
log
@- upgrade to xemacs-21.1.14
- support for wnn and canna added
- better handling of the ncurses problem

Submitted by Jean-Yves Burlett <jean-yves@@burlett.org>.
@
text
@d1 6
a6 6
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
--- src/editfns.c.orig	Mon Feb  5 17:11:04 2001
+++ src/editfns.c	Mon Feb  5 17:36:51 2001
@@@@ -871,6 +871,7 @@@@ char *
 get_home_directory (void)
 {
d12 1
a12 1
@@@@ -912,6 +913,13 @@@@ get_home_directory (void)
d15 8
a22 8
 #else	/* !WINDOWSNT */
+          if ((pw = getpwuid(getuid())) != NULL)
+            {
+	      cached_home_directory = pw->pw_dir;
+	      output_home_warning = 0;
+	    } 
+           else 
+            {
d26 1
a26 1
@@@@ -920,6 +928,7 @@@@ get_home_directory (void)
d28 1
a28 1
 	  cached_home_directory = "/";
d30 2
a31 2
+          }
 #endif	/* !WINDOWSNT */
@

