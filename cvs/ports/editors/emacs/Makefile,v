head	1.70;
access;
symbols
	OPENBSD_6_1:1.67.0.2
	OPENBSD_6_1_BASE:1.67
	OPENBSD_6_0:1.61.0.2
	OPENBSD_6_0_BASE:1.61
	OPENBSD_5_9:1.58.0.2
	OPENBSD_5_9_BASE:1.58
	OPENBSD_5_8:1.55.0.4
	OPENBSD_5_8_BASE:1.55
	OPENBSD_5_7:1.50.0.2
	OPENBSD_5_7_BASE:1.50
	OPENBSD_5_6:1.44.0.4
	OPENBSD_5_6_BASE:1.44
	OPENBSD_5_5:1.44.0.2
	OPENBSD_5_5_BASE:1.44
	OPENBSD_5_4:1.38.0.2
	OPENBSD_5_4_BASE:1.38
	OPENBSD_5_3:1.35.0.2
	OPENBSD_5_3_BASE:1.35
	OPENBSD_3_4:1.31.0.2
	OPENBSD_3_4_BASE:1.31
	OPENBSD_3_3:1.28.0.2
	OPENBSD_3_3_BASE:1.28
	OPENBSD_3_2:1.26.0.2
	OPENBSD_3_2_BASE:1.26
	OPENBSD_3_1:1.25.0.4
	OPENBSD_3_1_BASE:1.25
	OPENBSD_3_0:1.25.0.2
	OPENBSD_3_0_BASE:1.25
	OPENBSD_2_9_TRACKING_SWITCH:1.24
	OPENBSD_2_9:1.23.0.2
	OPENBSD_2_9_BASE:1.23
	OPENBSD_2_8:1.22.0.2
	OPENBSD_2_8_BASE:1.22
	OPENBSD_2_7:1.18.0.2
	OPENBSD_2_7_BASE:1.18
	OPENBSD_2_6:1.12.0.2
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.11.0.2
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	joey_1_1:1.1.1.1
	joey_1:1.1.1;
locks; strict;
comment	@# @;


1.70
date	2017.09.16.16.42.27;	author jca;	state Exp;
branches;
next	1.69;
commitid	hLcrBKKier1Qx5l1;

1.69
date	2017.09.11.14.04.15;	author jca;	state Exp;
branches;
next	1.68;
commitid	dE8O2O28xSiXrk8D;

1.68
date	2017.05.01.16.25.20;	author jca;	state Exp;
branches;
next	1.67;
commitid	XqsPt555JIr2Fa2O;

1.67
date	2017.02.10.03.05.33;	author jca;	state Exp;
branches
	1.67.2.1;
next	1.66;
commitid	V8TjWuVwIckv3oWU;

1.66
date	2017.02.10.02.24.07;	author jca;	state Exp;
branches;
next	1.65;
commitid	trrcS8NOQ3Awa9XM;

1.65
date	2016.10.16.18.15.22;	author jca;	state Exp;
branches;
next	1.64;
commitid	JBS1w4aniRqk3RgN;

1.64
date	2016.10.13.15.57.24;	author jca;	state Exp;
branches;
next	1.63;
commitid	S3FptO9nlgYyimjM;

1.63
date	2016.10.13.15.39.32;	author jca;	state Exp;
branches;
next	1.62;
commitid	68L59ECdgcBl8hgz;

1.62
date	2016.08.10.19.21.37;	author jca;	state Exp;
branches;
next	1.61;
commitid	dzKnNhDpaeFJ3aQn;

1.61
date	2016.06.29.16.14.41;	author espie;	state Exp;
branches;
next	1.60;
commitid	c1yQMbJbfo0CFBcL;

1.60
date	2016.06.02.16.32.46;	author jca;	state Exp;
branches;
next	1.59;
commitid	C5pyMkH3NhXaiAfM;

1.59
date	2016.04.26.21.16.00;	author jca;	state Exp;
branches;
next	1.58;
commitid	JgQZm6havQPTtAKm;

1.58
date	2015.11.06.20.37.34;	author sthen;	state Exp;
branches
	1.58.2.1;
next	1.57;
commitid	PjPpZyw8X2OGSgMF;

1.57
date	2015.09.11.11.33.35;	author jca;	state Exp;
branches;
next	1.56;
commitid	RBtremwGbN3pTtLC;

1.56
date	2015.09.08.18.32.00;	author jca;	state Exp;
branches;
next	1.55;
commitid	Yo0sTQmO42HMoIoL;

1.55
date	2015.07.12.19.06.22;	author jca;	state Exp;
branches;
next	1.54;
commitid	REdE5kmT0Jl0Ugx3;

1.54
date	2015.05.28.17.46.43;	author jca;	state Exp;
branches;
next	1.53;
commitid	v24LGlEpN7QB4qmQ;

1.53
date	2015.04.15.11.35.06;	author jca;	state Exp;
branches;
next	1.52;
commitid	kGQD14vPxkEq2K2g;

1.52
date	2015.04.04.09.21.01;	author ajacoutot;	state Exp;
branches;
next	1.51;
commitid	kS3kwKZogsvzYmEY;

1.51
date	2015.03.27.08.11.26;	author ajacoutot;	state Exp;
branches;
next	1.50;
commitid	mHt3hIg3nxq5XDcy;

1.50
date	2015.01.02.14.26.12;	author sthen;	state Exp;
branches;
next	1.49;
commitid	opt64GLzbD0TGQDJ;

1.49
date	2014.12.12.12.43.34;	author jca;	state Exp;
branches;
next	1.48;
commitid	f8bbYiJrFr0EcW8P;

1.48
date	2014.11.01.14.19.32;	author jca;	state Exp;
branches;
next	1.47;
commitid	zMnfvFBkaDzON4DQ;

1.47
date	2014.11.01.14.08.38;	author jca;	state Exp;
branches;
next	1.46;
commitid	wOwTrPfMy8P9MO7R;

1.46
date	2014.11.01.09.30.59;	author ratchov;	state Exp;
branches;
next	1.45;
commitid	KZ4VHFFAlZjjDhgj;

1.45
date	2014.09.10.19.47.17;	author jca;	state Exp;
branches;
next	1.44;
commitid	49hQoOQoFq1KQUVp;

1.44
date	2014.01.09.14.53.29;	author jca;	state Exp;
branches;
next	1.43;

1.43
date	2013.12.11.12.36.02;	author juanfra;	state Exp;
branches;
next	1.42;

1.42
date	2013.11.09.23.19.03;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2013.09.27.17.49.02;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2013.09.25.07.56.57;	author sthen;	state Exp;
branches;
next	1.39;

1.39
date	2013.08.20.22.05.51;	author zhuk;	state Exp;
branches;
next	1.38;

1.38
date	2013.06.04.18.41.41;	author naddy;	state Exp;
branches;
next	1.37;

1.37
date	2013.05.07.07.06.42;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2013.03.11.11.02.49;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2013.02.11.07.43.06;	author jasper;	state Exp;
branches;
next	1.34;

1.34
date	2013.01.02.15.50.28;	author landry;	state Exp;
branches;
next	1.33;

1.33
date	2012.12.06.15.46.11;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2003.12.03.17.28.02;	author sturm;	state dead;
branches;
next	1.31;

1.31
date	2003.07.18.13.58.09;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2003.07.06.17.13.02;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2003.07.06.15.27.52;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2003.01.24.08.54.54;	author pvalchev;	state Exp;
branches;
next	1.27;

1.27
date	2002.12.29.19.43.49;	author fgsch;	state Exp;
branches;
next	1.26;

1.26
date	2002.05.13.12.37.36;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2001.09.15.21.43.42;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2001.05.06.00.29.03;	author lebel;	state Exp;
branches;
next	1.23;

1.23
date	2001.02.09.02.06.23;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2000.10.23.17.26.07;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2000.10.21.17.27.56;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2000.07.21.18.13.58;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2000.07.21.05.33.03;	author marc;	state Exp;
branches;
next	1.18;

1.18
date	2000.04.22.10.22.15;	author turan;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2000.04.09.20.34.02;	author turan;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.07.02.13.10;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.15.05.04.16;	author turan;	state Exp;
branches;
next	1.14;

1.14
date	2000.02.12.08.02.16;	author turan;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.10.10.18.17;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	99.05.30.06.27.41;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.04.01.06.20.11;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.03.07.01.38.59;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.01.31.21.40.05;	author marc;	state Exp;
branches;
next	1.8;

1.8
date	98.12.27.20.18.57;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	98.10.08.23.00.30;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	98.09.13.19.51.00;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	98.04.06.05.17.48;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	98.03.29.07.35.28;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	97.12.04.07.22.46;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	97.11.17.18.56.43;	author joey;	state Exp;
branches;
next	1.1;

1.1
date	97.11.15.00.04.27;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.15.00.04.27;	author deraadt;	state Exp;
branches;
next	;

1.18.2.1
date	2000.09.15.04.50.14;	author marc;	state Exp;
branches;
next	;

1.58.2.1
date	2016.05.06.21.35.59;	author sthen;	state Exp;
branches;
next	;
commitid	vDjdgur9VOwg5QQm;

1.67.2.1
date	2017.09.11.14.05.19;	author jca;	state Exp;
branches;
next	;
commitid	2yrcXv10LEfFCNVt;


desc
@@


1.70
log
@Update to emacs-25.3, which rolls in the fixes for CVE-2017-14482
@
text
@# $OpenBSD: Makefile,v 1.69 2017/09/11 14:04:15 jca Exp $

COMMENT=		GNU editor: extensible, customizable, self-documenting

VERSION=		25.3
DISTNAME=		emacs-${VERSION}

CATEGORIES=		editors

HOMEPAGE=		https://www.gnu.org/software/emacs/

MAINTAINER=		Jeremie Courreges-Anglas <jca@@wxcvbn.org>

# GPLv3+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c m ncurses pthread gnutls xml2 z

MASTER_SITES=		${MASTER_SITE_GNU:=emacs/}

USE_GMAKE=		Yes

FLAVORS=		athena gtk2 gtk3 no_x11
FLAVOR?=		gtk3

GCCARCH=		${MACHINE_ARCH}-unknown-openbsd

CONFIGURE_STYLE=	gnu
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/build-aux
CONFIGURE_ARGS=		--build="${GCCARCH}" \
			--without-sound

CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib -nopie" \
			ac_cv_header_execinfo_h=no
CFLAGS+=		-fno-pie

MAKE_ENV=		INSTALL_EMACS="${INSTALL_SCRIPT}" \
			LOGNAME="${SHAREOWN}"

SUBST_VARS=		GCCARCH VERSION

LIB_DEPENDS=		security/gnutls \
			textproc/libxml

.if ${FLAVOR} == "no_x11"
CONFIGURE_ARGS+=	--without-x \
			--without-dbus \
			--without-file-notification \
			--without-gconf \
			--without-gsettings \
			--without-jpeg
.else
LIB_DEPENDS+=		x11/dbus \
			x11/gnome/librsvg \
			devel/gconf2 \
			graphics/jpeg \
			graphics/png \
			graphics/tiff \
			graphics/giflib \
			graphics/ImageMagick
RUN_DEPENDS+=		devel/desktop-file-utils \
			devel/xdg-utils \
			x11/gtk+3,-guic
. if ${FLAVOR} == "athena"
CONFIGURE_ARGS+=	--with-x-toolkit=athena
LIB_DEPENDS+=		x11/Xaw3d
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 Xaw3d
WANTLIB += Xext Xft Xinerama Xmu Xpm Xrandr Xrender Xt cairo dbus-1
WANTLIB += fontconfig freetype gconf-2 gdk_pixbuf-2.0 gif gio-2.0
WANTLIB += glib-2.0 gobject-2.0 intl jpeg png rsvg-2 tiff X11-xcb Xfixes xcb
. elif ${FLAVOR} == "gtk2"
CONFIGURE_ARGS+=	--with-x-toolkit=gtk2
LIB_DEPENDS+=		x11/gtk+2
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 Xcomposite
WANTLIB += Xcursor Xdamage Xext Xfixes Xft Xi Xinerama Xpm Xrandr
WANTLIB += Xrender atk-1.0 cairo dbus-1 fontconfig freetype gconf-2
WANTLIB += gdk-x11-2.0 gdk_pixbuf-2.0 gif gio-2.0 glib-2.0 gobject-2.0
WANTLIB += gtk-x11-2.0 intl jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += png rsvg-2 tiff X11-xcb xcb
. elif ${FLAVOR} == "gtk3"
CONFIGURE_ARGS+=	--with-x-toolkit=gtk3
LIB_DEPENDS+=		x11/gtk+3
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 X11-xcb
WANTLIB += Xfixes Xft Xinerama Xpm Xrandr Xrender atk-1.0 cairo
WANTLIB += cairo-gobject dbus-1 fontconfig freetype gconf-2 gdk-3
WANTLIB += gdk_pixbuf-2.0 gif gio-2.0 glib-2.0 gobject-2.0 gtk-3
WANTLIB += intl jpeg pango-1.0 pangocairo-1.0 png rsvg-2 tiff
WANTLIB += xcb
. else
ERRORS+=		"Fatal: Conflicting flavor: ${FLAVOR}"
. endif
.endif

post-install:
	chmod -t ${PREFIX}/bin/emacs-${VERSION}
	chmod -s ${PREFIX}/libexec/emacs/${VERSION}/${GCCARCH}/update-game-score
.if ${FLAVOR:Mno_x11}
	rm -Rf ${PREFIX}/share/applications/ ${PREFIX}/share/icons/
.endif

.include <bsd.port.mk>
@


1.69
log
@Bump, missed in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2017/05/01 16:25:20 jca Exp $
d5 1
a5 2
VERSION=		25.2
REVISION=		0
@


1.68
log
@emacs-25.2

Mostly a bug-fixe release, see NEWS for the few things that changed.
The diff for bug #24082 included is in this release.

Tested on armv7 and amd64.  -rc/release test reports from alf, Manuel
Giraud, sunil@@ and krw@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2017/02/10 03:05:33 jca Exp $
d6 1
@


1.67
log
@Open ports tree patches in diff-mode by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2017/02/10 02:24:07 jca Exp $
d5 1
a5 1
VERSION=		25.1
a6 1
REVISION=		3
@


1.67.2.1
log
@SECURITY fix for bug #28350 - enriched.el code execution

https://debbugs.gnu.org/cgi/bugreport.cgi?bug=28350
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2017/02/10 03:05:33 jca Exp $
d7 1
a7 1
REVISION=		4
@


1.66
log
@Don't use ld -Z on arm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2016/10/16 18:15:22 jca Exp $
d7 1
a7 1
REVISION=		2
@


1.65
log
@Merge better fix for #24082

This one lets unregistered files appear in vc-dir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2016/10/13 15:57:24 jca Exp $
d7 1
a7 1
REVISION=		1
@


1.64
log
@Add two patches to make VC usable again after the 25.1 update.

- add a fix for https://debbugs.gnu.org/cgi/bugreport.cgi?bug=24082
- suppress noisy messages that slow down vc-dir
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/10/13 15:39:32 jca Exp $
d7 1
a7 1
REVISION=		0
@


1.63
log
@Update to emacs-25.1

Announce: http://lists.gnu.org/archive/html/emacs-devel/2016-09/msg00451.html
NEWS file: https://www.gnu.org/software/emacs/news/NEWS.25.1

Fixes the focus problem seen with the gtk3 flavor.  The alignement fix
for sparc64 wasn't needed in 25.0.

Tested by Manuel Giraud, Ralf Horstmann (alpha), abieber@@ (macppc),
danj@@ (i386).  ok danj@@ abieber@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/08/10 19:21:37 jca Exp $
d7 1
@


1.62
log
@Looks like powerpc doesn't need bss-plt layout anymore.

Thanks guenther@@ for the tests & report.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2016/06/29 16:14:41 espie Exp $
d5 1
a5 2
VERSION=		24.5
REVISION=		6
d49 1
d52 1
a52 1
			--without-file-notification
d71 1
a71 1
WANTLIB += glib-2.0 gobject-2.0 intl jpeg png rsvg-2 tiff
d80 1
a80 1
WANTLIB += png rsvg-2 tiff
d84 6
a89 5
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 Xft Xinerama
WANTLIB += Xpm Xrandr Xrender atk-1.0 cairo cairo-gobject dbus-1
WANTLIB += fontconfig freetype gconf-2 gdk-3 gdk_pixbuf-2.0 gif
WANTLIB += gio-2.0 glib-2.0 gobject-2.0 gtk-3 intl jpeg pango-1.0
WANTLIB += pangocairo-1.0 png rsvg-2 tiff
@


1.61
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2016/06/02 16:32:46 jca Exp $
d6 1
a6 1
REVISION=		5
@


1.60
log
@Stop using ld -Z where it is not necessary.

amd64 and sparc64 are ok, powerpc and loongson are not.  Requested by
kettenis.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/04/26 21:16:00 jca Exp $
d6 1
a6 1
REVISION=		4
@


1.59
log
@Drop the gettext module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2015/11/06 20:37:34 sthen Exp $
d6 1
a6 1
REVISION=		3
@


1.58
log
@fix following ImageMagick update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2015/09/11 11:33:35 jca Exp $
d6 1
a6 1
REVISION=		2
a43 1
MODULES=		devel/gettext
d68 4
a71 4
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 Xaw3d Xext Xft Xinerama
WANTLIB += Xmu Xpm Xrandr Xrender Xt cairo dbus-1 fontconfig freetype
WANTLIB += gconf-2 gdk_pixbuf-2.0 gif gio-2.0 glib-2.0 gobject-2.0
WANTLIB += jpeg png rsvg-2 tiff
d75 6
a80 6
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 Xcomposite Xcursor
WANTLIB += Xdamage Xext Xfixes Xft Xi Xinerama Xpm Xrandr Xrender
WANTLIB += atk-1.0 cairo dbus-1 fontconfig freetype gconf-2 gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gif gio-2.0 glib-2.0 gobject-2.0 gtk-x11-2.0
WANTLIB += jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 png rsvg-2
WANTLIB += tiff
d84 5
a88 5
WANTLIB += ICE MagickCore-6.Q16 MagickWand-6.Q16 SM X11 Xft Xinerama Xpm Xrandr
WANTLIB += Xrender atk-1.0 cairo cairo-gobject dbus-1 fontconfig
WANTLIB += freetype gconf-2 gdk-3 gdk_pixbuf-2.0 gif gio-2.0 glib-2.0
WANTLIB += gobject-2.0 gtk-3 jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += png rsvg-2 tiff
@


1.58.2.1
log
@bump users of MagickWand-6.Q16 and Magick++-6.Q16 in -stable due to
shlib major bump in ImageMagick update; thanks jasper for the list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2015/11/06 20:37:34 sthen Exp $
d6 1
a6 1
REVISION=		3
@


1.57
log
@ld -Z might be fixed on powerpc, remove the BROKEN marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2015/09/08 18:32:00 jca Exp $
d6 1
a6 1
REVISION=		1
d69 1
a69 1
WANTLIB += ICE MagickCore MagickWand SM X11 Xaw3d Xext Xft Xinerama
d76 1
a76 1
WANTLIB += ICE MagickCore MagickWand SM X11 Xcomposite Xcursor
d85 1
a85 1
WANTLIB += ICE MagickCore MagickWand SM X11 Xft Xinerama Xpm Xrandr
@


1.56
log
@Mark as BROKEN on powerpc, emacs needs a working ld(1) -Z.

Proposals have been made to support this ugly flag again, but there's no
point in attempting to build those ports until the issue is fixed.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.55 2015/07/12 19:06:22 jca Exp $

BROKEN-powerpc=		needs a working ld(1) -Z
@


1.55
log
@Fix SIGBUS at unexec() step on sparc64.

Most likely due to the switch to binutils-2.17, emacs crashes with SIGBUS
at the loadup build step on sparc64, because it puts the section headers
at an unaligned address.

I am not sure whether this is the True Proper Fix.  Also, other strict
architectures ought to be affected too.  But let's at least provide
a working emacs package for sparc64 users at c2k15.

To be revisited laterwith feedback from upstream.

Problem reported by sthen/dlg/naddy.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.54 2015/05/28 17:46:43 jca Exp $
@


1.54
log
@Stop linking emacs to libexecinfo.

While this debug feature may be useful for certain programs, it did not
help any bug report since I am maintainer of the emacs port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2015/04/15 11:35:06 jca Exp $
d6 1
a6 1
REVISION=		0
@


1.53
log
@Update to emacs-24.5

Lots of test reports on amd64, sparc64, loongson, and hppa by
Alf Schlichting, bcallah@@ and juanfra@@.  Many thanks!

ok juanfra@@, "looks good to me" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/04/04 09:21:01 ajacoutot Exp $
d6 1
d18 1
a18 1
WANTLIB=		c m ncurses pthread execinfo gnutls xml2 z
d35 2
a36 1
			LDFLAGS="-L${LOCALBASE}/lib -nopie"
d45 1
a45 2
LIB_DEPENDS=		devel/libexecinfo \
			security/gnutls \
@


1.52
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/03/27 08:11:26 ajacoutot Exp $
d5 1
a5 2
VERSION=		24.4
REVISION=		2
@


1.51
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/01/02 14:26:12 sthen Exp $
d6 1
a6 1
REVISION=		1
@


1.50
log
@bump REVISION for 5.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/12/12 12:43:34 jca Exp $
d6 1
a6 1
REVISION=		0
d65 1
a65 1
			x11/gtk+2,-guic
@


1.49
log
@Update to emacs-24.4

- remove now unneeded patches for giflib detection
- add patch to skip compression of man and info pages
- add patch to fix tramp-mode hangs with various remote shells

Input from Manuel Giraud (who also proposed an initial diff) and Timo
Myyra.  Tested (at least) on i386, amd64 and sparc64.
ok abieber@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/11/01 14:19:32 jca Exp $
d6 1
@


1.48
log
@Revert NO_TEST addition.  ajacoutot@@ is right, even though upstream
doesn't plan to ship tests in release tarballs, they might change their
opinion one day.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/11/01 14:08:38 jca Exp $
d5 1
a5 1
VERSION=		24.3
a6 1
REVISION=		5
d17 1
a17 1
WANTLIB=		c m ncurses pthread execinfo gnutls xml2
d28 1
a28 2
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.69
a30 1
			--without-compress-info \
d43 3
a45 1
LIB_DEPENDS=		devel/libexecinfo security/gnutls textproc/libxml
d51 2
a52 1
			--without-gsettings
a64 3
WANTLIB+=		dbus-1 rsvg-2 gio-2.0 gdk_pixbuf-2.0 gobject-2.0 \
			glib-2.0 gconf-2 cairo png jpeg tiff gif z \
			MagickWand MagickCore
d68 4
a71 2
WANTLIB+=		ICE SM X11 Xaw3d Xext Xft Xmu Xpm Xrender Xt \
			expat fontconfig freetype
d75 6
a80 4
WANTLIB+=		ICE SM X11 Xcomposite Xcursor Xdamage Xext \
			Xfixes Xft Xi Xinerama Xpm Xrandr Xrender \
			atk-1.0 expat fontconfig freetype gdk-x11-2.0 \
			gtk-x11-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0
d84 5
a88 3
WANTLIB+=		ICE SM X11 Xft Xpm Xrender atk-1.0 cairo-gobject \
			expat fontconfig freetype gdk-3 gtk-3 pango-1.0 \
			pangocairo-1.0 pangoft2-1.0
@


1.47
log
@NO_TEST

Release tarballs don't contain tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/11/01 09:30:59 ratchov Exp $
a89 2

NO_TEST=		Yes
@


1.46
log
@Disable sound rather than adding sndio bits, suggested by sthen,
diff from jca, many thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/09/10 19:47:17 jca Exp $
d90 2
@


1.45
log
@Cope with FAKE_AS_ROOT=Yes.  No package change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/01/09 14:53:29 jca Exp $
d7 1
a7 1
REVISION=		4
d18 1
a18 1
WANTLIB=		c m ncurses ossaudio pthread execinfo gnutls xml2
d33 2
a34 1
			--without-compress-info
d36 1
a36 1
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -DHAVE_SOUND" \
@


1.44
log
@Remove deps on update-desktop-database and guic for the no_x11 flavor.
PFRAG-no-no_x11 suggested by sthen, ok ajacoutot@@ zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/12/11 12:36:02 juanfra Exp $
d92 1
@


1.43
log
@Unbreak emacs on hppa. I can compile all emacs flavors. The flavor
no_x11 works for me.

ok jca sthen landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/11/09 23:19:03 naddy Exp $
d7 1
a7 1
REVISION=		3
a44 1
RUN_DEPENDS=		devel/desktop-file-utils x11/gtk+2,-guic
d61 3
a63 1
RUN_DEPENDS+=		devel/xdg-utils
d92 3
@


1.42
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.41 2013/09/27 17:49:02 ajacoutot Exp $

BROKEN-hppa =		Invalid function: "DEAD"
@


1.41
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/09/25 07:56:57 sthen Exp $
d9 1
a9 1
REVISION=		2
d13 1
a13 1
HOMEPAGE=		http://www.gnu.org/software/emacs/
@


1.40
log
@libungif->giflib and patch where necessary, ok jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/08/20 22:05:51 zhuk Exp $
d9 1
a9 1
REVISION=		1
@


1.39
log
@Fixup handling of FreeDesktop goo: desktop-file-utils, gtk-update-icon-cache
and shared-mime-info. Found by portcheck.

A lot of input from and okay ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/06/04 18:41:41 naddy Exp $
d9 1
a9 1
REVISION=		0
d31 2
a32 1
CONFIGURE_STYLE=	gnu
d62 1
a62 1
			graphics/libungif \
@


1.38
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/05/07 07:06:42 jasper Exp $
d9 1
d46 1
@


1.37
log
@- update to emacs 24.3
- rework flavors and make gtk3 the default (as per upstream)

from jca (MAINTAINER)
ports-wise ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/03/11 11:02:49 espie Exp $
d35 1
a35 3
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include \
				  -I${LOCALBASE}/include/libpng \
				  -DHAVE_SOUND" \
@


1.36
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.35 2013/02/11 07:43:06 jasper Exp $
a5 1
BROKEN-hppa =		Invalid function: "DEAD"
d7 1
a7 1
VERSION=		24.2
a8 1
REVISION=		0
d14 1
a14 1
MAINTAINER=		Jeremie Courreges-Anglas <jca+open@@wxcvbn.org>
d19 2
d25 2
a26 2
FLAVORS=		gtk3 athena no_x11
FLAVOR?=
d46 2
a47 2
WANTLIB=		c m ncurses ossaudio pthread gnutls xml2
LIB_DEPENDS=		security/gnutls textproc/libxml
d49 1
a49 6
.if ${FLAVOR:Mno_x11}
.  if ${FLAVOR:Mathena}
ERRORS=			"Fatal: athena and no_x11 flavors are mutually exclusive"
.  elif ${FLAVOR:Mgtk3}
ERRORS=			"Fatal: gtk3 and no_x11 flavors are mutually exclusive"
.  endif
d54 2
a55 5

.elif ${FLAVOR:Mathena}
CONFIGURE_ARGS+=	--with-x-toolkit=athena
LIB_DEPENDS+=		x11/Xaw3d \
			x11/dbus \
d58 1
d63 17
a79 8
WANTLIB+=		GL ICE SM X11 Xaw3d Xext Xft Xmu Xpm Xrender Xt expat \
			fontconfig freetype iconv intl pixman-1 pthread-stubs \
			xcb xcb-render xcb-shm z MagickCore MagickWand cairo \
			dbus-1 gconf-2 gdk_pixbuf-2.0 gif gio-2.0 glib-2.0 \
			gobject-2.0 jpeg png rsvg-2 tiff
RUN_DEPENDS=		devel/xdg-utils
.elif ${FLAVOR:Mgtk3}
MODULES+=		devel/gettext
d81 7
a87 37
LIB_DEPENDS+=		x11/gtk+3 \
			x11/dbus \
			x11/gnome/librsvg \
			devel/gconf2 \
			graphics/png \
			graphics/tiff \
			graphics/libungif \
			graphics/ImageMagick
WANTLIB+=		GL ICE SM X11 Xft Xpm Xrender expat fontconfig \
			freetype iconv intl pixman-1 pthread-stubs xcb \
			xcb-render xcb-shm z MagickCore MagickWand atk-1.0 \
			cairo cairo-gobject dbus-1 gconf-2 gdk-3 \
			gdk_pixbuf-2.0 gif gio-2.0 glib-2.0 gobject-2.0 gtk-3 \
			jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 png rsvg-2 \
			tiff \
			${MODGETTEXT_WANTLIB}
RUN_DEPENDS=		devel/xdg-utils
.else
MODULES+=		devel/gettext
CONFIGURE_ARGS+=	--with-x-toolkit=gtk
LIB_DEPENDS+=		x11/gtk+2 \
			x11/dbus \
			x11/gnome/librsvg \
			devel/gconf2 \
			graphics/png \
			graphics/tiff \
			graphics/libungif \
			graphics/ImageMagick
WANTLIB+=		GL ICE SM X11 Xcomposite Xcursor Xdamage Xext Xfixes \
			Xft Xi Xinerama Xpm Xrandr Xrender expat fontconfig \
			freetype iconv intl pixman-1 pthread-stubs xcb \
			xcb-render xcb-shm z MagickCore MagickWand atk-1.0 \
			dbus-1 cairo gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gif \
			gio-2.0 glib-2.0 gobject-2.0 gtk-x11-2.0 jpeg \
			pango-1.0 pangocairo-1.0 pangoft2-1.0 png rsvg-2 tiff \
			${MODGETTEXT_WANTLIB}
RUN_DEPENDS=		devel/xdg-utils
d91 1
a91 1
	chmod -t ${PREFIX}/bin/emacs
@


1.35
log
@provide upgrade paths from emacs22 and emacs23 to emacs24;

as noticed by matthieu@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/01/02 15:50:28 landry Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.34
log
@Mark as BROKEN-hppa:
Illegal operands in asm on callproc.c for emacs 22
Invalid function: "DEAD" for emacs24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/12/06 15:46:11 jasper Exp $
d8 1
@


1.33
log
@import (rather add since cvs re-import sucks) emacs-24.2

from Jeremie Courreges-Anglas (MAINTAINER) with feedback from various people

ok sthen@@ mikeb@@
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
@


1.32
log
@remove emacs 20 port as 21 is in-tree and works on all platforms that have
a working emacs 20, besides that emacs 20 was broken on sparc64, vax, hppa

emacs21 tested on most archs by pval (thanks!), rest by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2003/07/18 13:58:09 brad Exp $
d3 1
a3 3
COMMENT=	"GNU editor"
COMMENT-el=	"elisp sources for those who want to read/modify them"
COMMENT-leim=	"Library of Emacs Input Methods"
d5 2
a6 4
VER=		20.7
DISTNAME=	emacs-${VER}
FULLPKGNAME-el=	emacs-el-${VER}
FULLPKGNAME-leim= emacs-leim-${VER}
d8 1
a8 1
CATEGORIES=	editors
d10 1
a10 1
MAINTAINER=	Matthew Economou <xenophon@@irtnog.org>
d12 3
a14 1
# GPL
d20 1
a20 2
MASTER_SITES=	${MASTER_SITE_GNU:=emacs/}
DISTFILES=	emacs-${VER}.tar.gz leim-${VER}.tar.gz
d22 1
a22 2
MULTI_PACKAGES=	-el -leim
SUBPACKAGE?=
d24 1
a24 1
FLAVORS=	no_x11
d27 1
a27 3
CONFIGURE_STYLE=gnu dest
CONFIGURE_ARGS=	${GCCARCH} --with-pop
CONFIGURE_ENV=	LDFLAGS="${ELF_TOOLCHAIN:L:S/yes/-Z/:S/no//}"
d29 66
a94 6
GCCARCH=	${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}

SUBST_VARS=	GCCARCH VER

.if ${FLAVOR:L:Mno_x11}
CONFIGURE_ARGS+= --without-x
d96 19
a114 2
USE_X11=	Yes
CONFIGURE_ARGS+= --with-x-toolkit
d117 2
a118 5
.if defined(PACKAGING)
.  if !empty(SUBPACKAGE)
RUN_DEPENDS=	:emacs-${VER}*:editors/emacs
.  endif
.endif
@


1.31
log
@use :L with ELF_TOOLCHAIN variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2003/07/06 17:13:02 naddy Exp $
@


1.30
log
@Fold LEIM into parent Emacs port.
Split LEIM and Elisp sources out into subpackages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/07/06 15:27:52 naddy Exp $
d33 1
a33 1
CONFIGURE_ENV=	LDFLAGS="${ELF_TOOLCHAIN:S/yes/-Z/:S/no//}"
@


1.29
log
@cleanup, fix build on alpha
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/01/24 08:54:54 pvalchev Exp $
d4 2
d9 3
d23 4
d39 1
a39 1
.if ${FLAVOR:L} == "no_x11"
d42 1
d44 6
@


1.28
log
@Fix identical to the one drahn made to emacs21:
Work around the fact that emacs undump knows too much about the layout
of elf files (or thinks it does). These assumptions were just broken
by binutils/ld changes to put GOT and PLT into their own PT_LOAD sections.
Thus BSS is no longer part of the DATA PT_LOAD section. This is a workaround
using the '-Z' compatibility flag which disables the GOT/PLT padding.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/12/29 19:43:49 fgsch Exp $
a7 1
MASTER_SITES=	${MASTER_SITE_GNU:=emacs/}
d11 1
d17 1
a17 10
SUBST_VARS=	GCCARCH VER

.include <bsd.own.mk>

USE_GMAKE=	Yes
CONFIGURE_STYLE= gnu dest
CONFIGURE_ARGS+= ${GCCARCH}
.if ${ELF_TOOLCHAIN} == "yes"
CONFIGURE_ENV=	LDFLAGS="-Z"
.endif
d22 3
a24 1
M_ARCH=		${MACHINE_ARCH}
d26 1
a26 1
GCCARCH=	${M_ARCH}-unknown-openbsd${OPSYS_VER}
d28 1
a28 6
# Uncomment for POP support
#CONFIGURE_ARGS+=--with-pop
# Uncomment for Kerberos support
#CONFIGURE_ARGS+=--with-kerberos
# Uncomment for Hesiod support
#CONFIGURE_ARGS+=--with-hesiod
a34 20

# Do NOT strip on install.  We will strip those things that can be
# stripped after install. (emacs crashes if stripped on an alpha)
# To do the job correctly temacs should be stripped, not emacs
# (which is created from temacs).
INSTALL_STRIP=
STRIP_PROGS=	emacsclient etags ctags b2m
.if (${MACHINE_ARCH} != "alpha")
STRIP_PROGS+=	${DISTNAME}
.endif
STRIP_EXECS=	cvtmail digest-doc emacsserver fakemail hexl movemail \
		profile sorted-doc yow

post-install:
.for file in ${STRIP_PROGS}
	@@strip ${PREFIX}/bin/${file}
.endfor
.for file in ${STRIP_EXECS}
	@@strip ${PREFIX}/libexec/emacs/${VER}/${GCCARCH}/${file}
.endfor
@


1.27
log
@byebye NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/05/13 12:37:36 naddy Exp $
d19 2
d24 3
@


1.26
log
@bye MASTER_SITE_SUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/09/15 21:43:42 brad Exp $
a7 1
NEED_VERSION=	1.528
@


1.25
log
@simplify
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/05/06 00:29:03 lebel Exp $
d8 2
a9 3
NEED_VERSION=	1.435
MASTER_SITES=	${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR= emacs
@


1.24
log
@editors: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/02/09 02:06:23 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.402
d23 1
a27 3
.if ${MACHINE} == "pmax"
M_ARCH=		mipsel
.else
a28 1
.endif
d42 1
a42 1
CONFIGURE_ARGS+= ${GCCARCH} --with-x-toolkit
@


1.23
log
@remove check for archs which never have existed or are not supported anymore.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.22 2000/10/23 17:26:07 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.336
@


1.22
log
@MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/10/21 17:27:56 brad Exp $
a9 1
# Nick: Xenophon Fenderson
d17 2
d25 1
a25 1
.if ${MACHINE} == "arc" || ${MACHINE} == "pmax" || ${MACHINE} == "wgrisc"
a26 2
.elif ${MACHINE} == "hkmips" || ${MACHINE} == "sgi"
M_ARCH=		mips
a31 1
SUBST_VARS=	GCCARCH VER
@


1.21
log
@- cleanup Makefile
- add support for the PowerPC port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/07/21 18:13:58 espie Exp $
d10 2
a11 1
MAINTAINER=	xenophon@@irtnog.org
@


1.20
log
@Use standard ports tree substitution mechanisms,
adapt to recent formatting changes (CONFIGURE_STYLE)

Set MAINTAINER.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/07/21 05:33:03 marc Exp $
d6 1
a6 1
NEED_VERSION=	1.317
a11 1
# GPL
d17 2
a18 1
FLAVORS=	no_X11
d20 2
a21 2
CONFIGURE_STYLE=	gnu dest
USE_GMAKE=	Yes
d41 2
a42 2
.if defined(FLAVOR) && ${FLAVOR} == "no_X11"
CONFIGURE_ARGS+=--without-x
d44 1
a44 1
CONFIGURE_ARGS+=${GCCARCH} --with-x-toolkit
d61 1
a61 1
	strip ${PREFIX}/bin/${file}
d64 1
a64 1
	strip ${PREFIX}/libexec/emacs/${VER}/${GCCARCH}/${file}
@


1.19
log
@
update emacs to 20.7, work done by xenophon@@irtnog.org
It builds on the i386 and seems to work.   Builds/tests on other
archs would be appreciated.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/04/22 10:22:15 turan Exp $
d6 1
a6 1
NEED_VERSION=	1.218
d10 1
a10 1
MAINTAINER=	ports@@OpenBSD.ORG
d12 1
a12 1
LICENSE_TYPE=		GPL
d20 1
a20 2
HAS_CONFIGURE=	Yes
CONFIGURE_ARGS=--prefix='$${DESTDIR}${PREFIX}' --sysconfdir='$${DESTDIR}/etc'
a21 1
FAKE=		Yes
d32 1
a57 8

# Put generated PLIST into WRKDIR to avoid collisions in a shared ports tree.
PLIST=		${WRKDIR}/PLIST

pre-install pre-package:
	@@rm -f ${WRKDIR}/PLIST
	@@sed -e 's/||CONFIG||/${GCCARCH}/' \
		${FILESDIR}/PLIST.template >${WRKDIR}/PLIST
@


1.18
log
@make no_X11 flavor not link X libs.  kjell noticed it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/04/09 20:34:02 turan Exp $
d3 1
a3 1
VER=		20.3
d34 7
@


1.18.2.1
log
@bring editors as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/07/21 18:13:58 espie Exp $
d3 1
a3 1
VER=		20.7
d6 1
a6 1
NEED_VERSION=	1.317
d10 1
a10 1
MAINTAINER=	xenophon@@irtnog.org
d12 1
a12 1
# GPL
d20 2
a21 1
CONFIGURE_STYLE=	gnu dest
d23 1
a33 8
SUBST_VARS=	GCCARCH VER

# Uncomment for POP support
#CONFIGURE_ARGS+=--with-pop
# Uncomment for Kerberos support
#CONFIGURE_ARGS+=--with-kerberos
# Uncomment for Hesiod support
#CONFIGURE_ARGS+=--with-hesiod
d52 8
@


1.17
log
@add a no_X11 emacs flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/03/07 02:13:10 espie Exp $
d35 1
a35 1
.if defined(FLAVOR) && ${FLAVOR:L:Mno_X11}
@


1.16
log
@Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/02/15 05:04:16 turan Exp $
d18 2
d34 4
d39 1
@


1.15
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/02/12 08:02:16 turan Exp $
d6 1
d13 9
a21 7
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES

GNU_CONFIGURE=	yes
USE_GMAKE=	yes
a29 1
SYS_REL!=	uname -r
d31 2
a32 2
GCCARCH=	${M_ARCH}-unknown-openbsd${SYS_REL}
CONFIGURE_ARGS=	${GCCARCH} --with-x-toolkit
@


1.14
log
@gpl licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/10 10:18:17 espie Exp $
d12 4
a15 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.13
log
@Kill RM, SED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/05/30 06:27:41 brad Exp $
d10 6
@


1.12
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/04/01 06:20:11 brad Exp $
d42 2
a43 2
	@@${RM} -f ${WRKDIR}/PLIST
	@@${SED} -e 's/||CONFIG||/${GCCARCH}/' \
@


1.11
log
@fix dependency lists, fix email address's and remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/03/07 01:38:59 brad Exp $
d6 2
a10 4
MASTER_SITES=	${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR= emacs

#USE_AUTOCONF=	yes
a29 1
#
a38 1
#
@


1.10
log
@add MASTER_SITE_SUBDIR
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.9 1999/01/31 21:40:05 marc Exp $
#
@


1.9
log
@add patches so system termcap lib is NOT used,
fixes -nw mode on console/xterm; move generated
PLIST to  so concurrent loads don't
clobber each other
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1998/12/27 20:18:57 marc Exp $
d11 1
@


1.8
log
@use MASTER_SITE_GNU; Ayr-nieu <ayr-nieu@@abyss.imaji.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1998/10/08 23:00:30 marc Exp $
d12 1
d41 4
d46 1
a46 1
	@@${RM} -f ${PKGDIR}/PLIST
d48 1
a48 1
		${FILESDIR}/PLIST.template >${PKGDIR}/PLIST
@


1.7
log
@update makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1998/09/13 19:51:00 marc Exp $
d10 1
a10 1
MASTER_SITES=	ftp://prep.ai.mit.edu/pub/gnu/
@


1.6
log
@update to 20.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1998/04/06 05:17:48 marc Exp $
a6 1
MASTER_SITES=	ftp://prep.ai.mit.edu/pub/gnu/
d9 2
@


1.5
log
@Change makefile so emacs is not stripped on the alpha;
stripping emacs on the alpha breaks emacs.
@
text
@d1 1
a1 6
# New ports collection makefile for:	GNU emacs
# Version required:	20.2
# Date created:		14 Nov 1997
# Whom:			ejovi
#
# $OpenBSD: Makefile,v 1.4 1998/03/29 07:35:28 marc Exp $
d4 2
a5 1
DISTNAME=	emacs-20.2
a10 1
WRKSRC=		${WRKDIR}/emacs-20.2
d28 2
d34 1
a34 1
STRIP_PROGS+=	emacs-20.2
d49 1
a49 1
	strip ${PREFIX}/libexec/emacs/20.2/${GCCARCH}/${file}
@


1.4
log
@correct packing list for 20.2 and all supported architectures
make sure a package can be generated and the installed package is
correct.  Remove attempt at updating dir -- emacs install always
clobbers the existing dir and the texinfo files do not have the
required info to be processed by install-info
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1997/12/04 07:22:46 niklas Exp $
d30 11
a40 2
STRIP=
MAN1=		emacs.1 etags.1 ctags.1
d48 1
a48 1
.for file in emacs-20.2 emacsclient etags ctags b2m
d50 3
@


1.3
log
@Tsk Tsk.. we are a multiplatform OS
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1997/11/17 18:56:43 joey Exp $
d13 1
a13 1
MAINTAINER=	joey@@OpenBSD.ORG
d26 1
d28 1
a28 1
GCCARCH=	${M_ARCH}-unknown-openbsd`uname -r`
d33 5
a40 6
.endfor
	if [ ! -f ${PREFIX}/info/dir ]; then \
	  ${SED} -ne '1,/Menu:/p' /usr/share/info/dir > ${PREFIX}/info/dir; \
	fi
.for info in emacs vip viper forms gnus mh-e cl sc dired-x ediff ccmode
	install-info ${PREFIX}/info/${info} ${PREFIX}/info/dir
@


1.2
log
@added $OpenBSD$
@
text
@d6 1
a6 1
# $OpenBSD$
d18 11
a28 1
CONFIGURE_ARGS=	i386-unknown-openbsd2.2 --with-x-toolkit
@


1.1
log
@Initial revision
@
text
@d5 3
d13 1
a13 1
MAINTAINER=	ejovi@@OpenBSD.ORG
@


1.1.1.1
log
@initial ports subsystem from joey
@
text
@@
