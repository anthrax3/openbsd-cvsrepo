head	1.8;
access;
symbols
	OPENBSD_4_6:1.7.0.8
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.6
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.4
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	robert_20060817:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2009.11.12.15.26.27;	author sturm;	state dead;
branches;
next	1.7;

1.7
date	2007.11.13.09.46.28;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.13.10.25.14;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.08.09.34.03;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2006.10.27.16.02.02;	author kurt;	state Exp;
branches;
next	1.3;

1.3
date	2006.10.25.22.49.50;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2006.08.20.03.36.53;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2006.08.17.14.56.24;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.08.17.14.56.24;	author robert;	state Exp;
branches;
next	;


desc
@@


1.8
log
@remove OO2 which has been unlinked from builds since april

ok sthen, msf
@
text
@--- stlport/STLport-4.5.patch.orig.port	Thu Jul 26 12:20:40 2007
+++ stlport/STLport-4.5.patch	Sat Oct 27 12:50:07 2007
@@@@ -1,5 +1,5 @@@@
 *** misc/STLport-4.5/src/common_percent_rules.mak	Sat May 19 05:04:20 2001
---- misc/build/STLport-4.5/src/common_percent_rules.mak	Thu Jul 26 12:13:02 2007
+--- misc/build/STLport-4.5/src/common_percent_rules.mak	Thu Oct 25 20:44:51 2007
 ***************
 *** 1,45 ****
   
@@@@ -101,7 +101,7 @@@@
   	$(CXX) $(CXXFLAGS_STLDEBUG_dynamic) $< -E  $@@
   
 *** misc/STLport-4.5/src/dll_main.cpp	Sat Aug 25 03:14:19 2001
---- misc/build/STLport-4.5/src/dll_main.cpp	Thu Jul 26 12:13:02 2007
+--- misc/build/STLport-4.5/src/dll_main.cpp	Thu Oct 25 20:44:51 2007
 ***************
 *** 147,152 ****
 --- 147,156 ----
@@@@ -115,8 +115,8 @@@@
   template class _STLP_CLASS_DECLSPEC __node_alloc<false,0>;
   template class _STLP_CLASS_DECLSPEC __node_alloc<true,0>;
   template class _STLP_CLASS_DECLSPEC __debug_alloc< __node_alloc<true,0> >;
-*** misc/STLport-4.5/src/gcc-3.0-freebsd.mak	Thu Jul 26 12:15:53 2007
---- misc/build/STLport-4.5/src/gcc-3.0-freebsd.mak	Thu Jul 26 12:13:02 2007
+*** misc/STLport-4.5/src/gcc-3.0-freebsd.mak	Thu Oct 25 21:08:00 2007
+--- misc/build/STLport-4.5/src/gcc-3.0-freebsd.mak	Thu Oct 25 20:44:51 2007
 ***************
 *** 1 ****
 ! dummy
@@@@ -190,8 +190,8 @@@@
 ! #	$(CXX) $(CXXFLAGS) -O4 -S -pto $<  -o $@@
 ! 
 ! 
-*** misc/STLport-4.5/src/gcc-3.0-macosx.mak	Thu Jul 26 12:15:53 2007
---- misc/build/STLport-4.5/src/gcc-3.0-macosx.mak	Thu Jul 26 12:13:02 2007
+*** misc/STLport-4.5/src/gcc-3.0-macosx.mak	Thu Oct 25 21:08:00 2007
+--- misc/build/STLport-4.5/src/gcc-3.0-macosx.mak	Thu Oct 25 20:44:51 2007
 ***************
 *** 1 ****
 ! dummy
@@@@ -261,8 +261,8 @@@@
 ! #	$(CXX) $(CXXFLAGS) -O4 -S -pto $<  -o $@@
 ! 
 ! 
-*** misc/STLport-4.5/src/gcc-3.0-mingw.mak	Thu Jul 26 12:15:53 2007
---- misc/build/STLport-4.5/src/gcc-3.0-mingw.mak	Thu Jul 26 12:13:02 2007
+*** misc/STLport-4.5/src/gcc-3.0-mingw.mak	Thu Oct 25 21:08:00 2007
+--- misc/build/STLport-4.5/src/gcc-3.0-mingw.mak	Thu Oct 25 20:44:51 2007
 ***************
 *** 1 ****
 ! dummy
@@@@ -373,11 +373,76 @@@@
 ! #	$(CXX) $(CXXFLAGS) -O4 -S -pto $<  -o $@@
 ! 
 !  
-*** misc/STLport-4.5/src/gcc-3.0.mak	Thu Jul 26 12:15:53 2007
---- misc/build/STLport-4.5/src/gcc-3.0.mak	Thu Jul 26 12:13:02 2007
+*** misc/STLport-4.5/src/gcc-3.0-openbsd.mak	Thu Oct 25 21:08:00 2007
+--- misc/build/STLport-4.5/src/gcc-3.0-openbsd.mak	Thu Oct 25 20:44:51 2007
 ***************
 *** 1 ****
 ! dummy
+--- 1,59 ----
+! #
+! # Note : this makefile is for gcc-3 !
+! #
+! 
+! #
+! # compiler
+! # take these from the OOo build environment
+! CC*= gcc 
+! CXX*= g++
+! 
+! #
+! # Basename for libraries
+! #
+! LIB_BASENAME = libstlport_gcc
+! 
+! #
+! # guts for common stuff
+! #
+! LINK=ar cr
+! DYN_LINK=${CXX} ${PTHREAD_LIBS} -fPIC -lstdc++ --fexceptions -shared -o
+! 
+! OBJEXT=o
+! DYNEXT=so
+! STEXT=a
+! RM=rm -rf
+! PATH_SEP=/
+! MKDIR=mkdir -p
+! COMP=GCC$(ARCH)
+! INSTALL_STEP = install_unix 
+! 
+! all:  all_dynamic all_static symbolic_links 
+! 
+! include common_macros.mak
+! 
+! WARNING_FLAGS= -Wall -W -Wno-sign-compare -Wno-unused -Wno-uninitialized
+! 
+! CXXFLAGS_COMMON = ${PTHREAD_CFLAGS} -DGXX_INCLUDE_PATH=${GXX_INCLUDE_PATH} -fexceptions -ftemplate-depth-32 -I${STLPORT_DIR} ${WARNING_FLAGS} ${ARCH_FLAGS}
+! CFLAGS_COMMON = ${PTHREAD_CFLAGS} -DGXX_INCLUDE_PATH=${GXX_INCLUDE_PATH} -fexceptions -I${STLPORT_DIR} ${WARNING_FLAGS} ${ARCH_FLAGS}
+! 
+! CXXFLAGS_RELEASE_static = $(CXXFLAGS_COMMON) -O2 -fPIC
+! CXXFLAGS_RELEASE_dynamic = $(CXXFLAGS_COMMON) -O2 -fPIC
+! 
+! CXXFLAGS_DEBUG_static = $(CXXFLAGS_COMMON) -g -fPIC
+! CXXFLAGS_DEBUG_dynamic = $(CXXFLAGS_COMMON) -g -fPIC
+! 
+! CXXFLAGS_STLDEBUG_static = $(CXXFLAGS_DEBUG_static) -D_STLP_DEBUG
+! CXXFLAGS_STLDEBUG_dynamic = $(CXXFLAGS_DEBUG_dynamic) -D_STLP_DEBUG
+! 
+! CFLAGS_RELEASE_static = $(CFLAGS_COMMON) -O2 -fPIC
+! CFLAGS_RELEASE_dynamic = $(CFLAGS_COMMON) -O2 -fPIC
+! 
+! CFLAGS_DEBUG_static = $(CFLAGS_COMMON) -g -fPIC
+! CFLAGS_DEBUG_dynamic = $(CFLAGS_COMMON) -g -fPIC
+! 
+! CFLAGS_STLDEBUG_static = $(CFLAGS_DEBUG_static) -D_STLP_DEBUG
+! CFLAGS_STLDEBUG_dynamic = $(CFLAGS_DEBUG_dynamic) -D_STLP_DEBUG
+! 
+! include common_percent_rules.mak
+! include common_rules.mak
+*** misc/STLport-4.5/src/gcc-3.0.mak	Thu Oct 25 21:08:00 2007
+--- misc/build/STLport-4.5/src/gcc-3.0.mak	Thu Oct 25 20:44:51 2007
+***************
+*** 1 ****
+! dummy
 --- 1,69 ----
 ! #
 ! # Note : this makefile is for gcc-3 !
@@@@ -449,7 +514,7 @@@@
 ! 
 ! 
 *** misc/STLport-4.5/src/gcc-freebsd.mak	Sun Jul 29 05:36:25 2001
---- misc/build/STLport-4.5/src/gcc-freebsd.mak	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/src/gcc-freebsd.mak	Thu Oct 25 20:44:51 2007
 ***************
 *** 5,12 ****
   #
@@@@ -509,8 +574,61 @@@@
   
   CXXFLAGS_DEBUG_static = $(CXXFLAGS_COMMON) -g
   CXXFLAGS_DEBUG_dynamic = $(CXXFLAGS_COMMON) -g -fPIC
+*** misc/STLport-4.5/src/num_put_float.cpp	Tue Sep  4 19:10:12 2001
+--- misc/build/STLport-4.5/src/num_put_float.cpp	Thu Oct 25 21:07:28 2007
+***************
+*** 47,53 ****
+  #  include <floatingpoint.h>
+  # endif
+  
+! //# if !(defined(_STLP_USE_GLIBC) || defined(__FreeBSD__) || defined(__NetBSD__) || defined (_AIX) || defined(__MVS__) || defined (__OS400__) || defined (__QNXNTO__) || defined (__APPLE__) || defined (__DJGPP))
+  # if defined (__sun) || defined (__digital__) || defined (__sgi)
+  // DEC, SGI & Solaris need this
+  #  include <values.h>
+--- 47,53 ----
+  #  include <floatingpoint.h>
+  # endif
+  
+! //# if !(defined(_STLP_USE_GLIBC) || defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined (_AIX) || defined(__MVS__) || defined (__OS400__) || defined (__QNXNTO__) || defined (__APPLE__) || defined (__DJGPP))
+  # if defined (__sun) || defined (__digital__) || defined (__sgi)
+  // DEC, SGI & Solaris need this
+  #  include <values.h>
+***************
+*** 220,226 ****
+  // inline bool _Stl_is_neg_inf(double x)    { return isinf(x) < 0; }  
+  inline bool _Stl_is_neg_inf(double x)    { return isinf(x) && x < 0; }
+  #elif defined(__unix) && !defined(__FreeBSD__)  && !defined(__NetBSD__) \
+!       && !defined(__APPLE__)  && !defined(__DJGPP) && !defined(__osf__)
+  inline bool _Stl_is_nan_or_inf(double x) { return IsNANorINF(x); }
+  inline bool _Stl_is_inf(double x)        { return IsNANorINF(x) && IsINF(x); }
+  inline bool _Stl_is_neg_inf(double x)    { return (IsINF(x)) && (x < 0.0); }
+--- 220,226 ----
+  // inline bool _Stl_is_neg_inf(double x)    { return isinf(x) < 0; }  
+  inline bool _Stl_is_neg_inf(double x)    { return isinf(x) && x < 0; }
+  #elif defined(__unix) && !defined(__FreeBSD__)  && !defined(__NetBSD__) \
+!       && !defined(__OpenBSD__) && !defined(__APPLE__)  && !defined(__DJGPP) && !defined(__osf__)
+  inline bool _Stl_is_nan_or_inf(double x) { return IsNANorINF(x); }
+  inline bool _Stl_is_inf(double x)        { return IsNANorINF(x) && IsINF(x); }
+  inline bool _Stl_is_neg_inf(double x)    { return (IsINF(x)) && (x < 0.0); }
+***************
+*** 343,349 ****
+    inline char* _Stl_qfcvtR(long double x, int n, int* pt, int* sign, char* buf)
+      { LOCK_CVT RETURN_CVT(fcvt, x, n, pt, sign, buf) }
+  # endif
+! #elif defined (__unix)  && !defined(__FreeBSD__)  && !defined(__NetBSD__) && !defined(__APPLE__)
+    inline char* _Stl_ecvtR(double x, int n, int* pt, int* sign, char* buf)
+      { return ecvt_r(x, n, pt, sign, buf); }
+    inline char* _Stl_fcvtR(double x, int n, int* pt, int* sign, char* buf)
+--- 343,349 ----
+    inline char* _Stl_qfcvtR(long double x, int n, int* pt, int* sign, char* buf)
+      { LOCK_CVT RETURN_CVT(fcvt, x, n, pt, sign, buf) }
+  # endif
+! #elif defined (__unix)  && !defined(__FreeBSD__)  && !defined(__NetBSD__) && !defined(__OpenBSD__) && !defined(__APPLE__)
+    inline char* _Stl_ecvtR(double x, int n, int* pt, int* sign, char* buf)
+      { return ecvt_r(x, n, pt, sign, buf); }
+    inline char* _Stl_fcvtR(double x, int n, int* pt, int* sign, char* buf)
 *** misc/STLport-4.5/stlport/config/stl_gcc.h	Tue Sep  4 19:10:16 2001
---- misc/build/STLport-4.5/stlport/config/stl_gcc.h	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/config/stl_gcc.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 7,13 ****
 --- 7,15 ----
@@@@ -524,7 +642,7 @@@@
   # if defined(__FreeBSD__) || defined (__hpux)
   #  define _STLP_NO_WCHAR_T
 ***************
-*** 51,60 ****
+*** 51,61 ****
   #  define _STLP_CLASS_EXPORT_DECLSPEC __attribute__((dllexport))
   #  define _STLP_CALL
   
@@@@ -535,30 +653,32 @@@@
   
   # endif
   
---- 53,75 ----
+  #if (defined(__linux__) /* && ! defined (_GNU_SOURCE) */ ) || \
+--- 53,76 ----
   #  define _STLP_CLASS_EXPORT_DECLSPEC __attribute__((dllexport))
   #  define _STLP_CALL
   
 ! #  if !defined (_STLP_NO_OWN_IOSTREAMS)
-! 
-! #    if ( defined (__DLL) || defined (_DLL) || defined (_WINDLL) || defined (_RTLDLL) \
-!      || defined(_AFXDLL) || defined (_STLP_USE_DYNAMIC_LIB) ) \
-!        && ! defined (_STLP_USE_STATIC_LIB)
-! #      undef  _STLP_USE_DECLSPEC
-! #      define _STLP_USE_DECLSPEC 1
-! /*     Using dynamic library in MinGW requires _STLP_NO_CUSTOM_IO */
-! #      define _STLP_NO_CUSTOM_IO
-! #    endif
-! 
-! #    ifndef _STLP_IMPORT_TEMPLATE_KEYWORD
-! #     define _STLP_IMPORT_TEMPLATE_KEYWORD  extern
-! #    endif
-! #    define _STLP_EXPORT_TEMPLATE_KEYWORD
-! 
-! #  endif /* _STLP_OWN_IOSTREAMS */
   
++ #    if ( defined (__DLL) || defined (_DLL) || defined (_WINDLL) || defined (_RTLDLL) \
++      || defined(_AFXDLL) || defined (_STLP_USE_DYNAMIC_LIB) ) \
++        && ! defined (_STLP_USE_STATIC_LIB)
++ #      undef  _STLP_USE_DECLSPEC
++ #      define _STLP_USE_DECLSPEC 1
++ /*     Using dynamic library in MinGW requires _STLP_NO_CUSTOM_IO */
++ #      define _STLP_NO_CUSTOM_IO
++ #    endif
++ 
++ #    ifndef _STLP_IMPORT_TEMPLATE_KEYWORD
++ #     define _STLP_IMPORT_TEMPLATE_KEYWORD  extern
++ #    endif
++ #    define _STLP_EXPORT_TEMPLATE_KEYWORD
++ 
++ #  endif /* _STLP_OWN_IOSTREAMS */
++ 
   # endif
   
+  #if (defined(__linux__) /* && ! defined (_GNU_SOURCE) */ ) || \
 ***************
 *** 75,80 ****
 --- 90,97 ----
@@@@ -571,40 +691,44 @@@@
     * members in template classes. Only one source file in an executable or
     * library can declare instances for such data members, otherwise duplicate
 ***************
-*** 97,103 ****
+*** 97,105 ****
   #  define _STLP_NATIVE_CPP_C_HEADER(header) <../g++/##header##>
   #  define _STLP_NATIVE_OLD_STREAMS_HEADER(header) <../g++/##header##>
   #  define _STLP_NATIVE_CPP_RUNTIME_HEADER(header) <../g++/##header##>
-! # endif
+- # endif
   
   
   # if defined(__BEOS__) && defined(__INTEL__)
---- 114,136 ----
+  #  define _STLP_NATIVE_HEADER(header) <../stlport/beos/##header##>
+  #  define _STLP_NATIVE_C_HEADER(header) <../stlport/beos/##header##>
+--- 114,138 ----
   #  define _STLP_NATIVE_CPP_C_HEADER(header) <../g++/##header##>
   #  define _STLP_NATIVE_OLD_STREAMS_HEADER(header) <../g++/##header##>
   #  define _STLP_NATIVE_CPP_RUNTIME_HEADER(header) <../g++/##header##>
-! 
-! # else
-! /* Mac OS X using gcc 3.3 handles all well */
-! #   undef  _STLP_NO_STATIC_TEMPLATE_DATA
-! #   define _STLP_STATIC_TEMPLATE_DATA 1
-! #   define _STLP_WEAK_ATTRIBUTE 1
-! #   undef _STLP_NO_LONG_DOUBLE
-! 
-! #if 0
-!  /* Mac OS X needs all "::" scope references to be "std::" */
-!  #  define _STLP_NO_CSTD_FUNCTION_IMPORTS
-!  #  undef _STLP_VENDOR_GLOBAL_STD
-!  #  undef _STLP_VENDOR_GLOBAL_CSTD
-! #endif
-! 
-! # endif   /* __GNUC__ < 3 */
-! # endif   /* __APPLE__ */
   
++ # else
++ /* Mac OS X using gcc 3.3 handles all well */
++ #   undef  _STLP_NO_STATIC_TEMPLATE_DATA
++ #   define _STLP_STATIC_TEMPLATE_DATA 1
++ #   define _STLP_WEAK_ATTRIBUTE 1
++ #   undef _STLP_NO_LONG_DOUBLE
   
++ #if 0
++  /* Mac OS X needs all "::" scope references to be "std::" */
++  #  define _STLP_NO_CSTD_FUNCTION_IMPORTS
++  #  undef _STLP_VENDOR_GLOBAL_STD
++  #  undef _STLP_VENDOR_GLOBAL_CSTD
++ #endif
++ 
++ # endif   /* __GNUC__ < 3 */
++ # endif   /* __APPLE__ */
++ 
++ 
   # if defined(__BEOS__) && defined(__INTEL__)
+  #  define _STLP_NATIVE_HEADER(header) <../stlport/beos/##header##>
+  #  define _STLP_NATIVE_C_HEADER(header) <../stlport/beos/##header##>
 ***************
-*** 226,233 ****
+*** 226,234 ****
   
   # if (__GNUC__ >= 3)
   
@@@@ -613,7 +737,8 @@@@
   
   # elif (__GNUC_MINOR__ < 8)
   
---- 259,303 ----
+  #  define _STLP_NO_OWN_IOSTREAMS 1
+--- 259,304 ----
   
   # if (__GNUC__ >= 3)
   
@@@@ -622,43 +747,44 @@@@
 ! #undef i386
 ! #define i386 i386
 ! #endif
-! 
-! #ifdef linux
-! #undef linux
-! #define linux linux
-! #endif
-! 
-! #ifdef mips
-! #undef mips
-! #define mips mips
-! #endif
-! 
-! #ifdef sgi
-! #undef sgi
-! #define sgi sgi
-! #endif
-! 
-! #ifdef sun
-! #undef sun
-! #define sun sun
-! #endif
-! 
-! #ifdef sparc
-! #undef sparc
-! #define sparc sparc
-! #endif
-! 
-! #ifdef powerpc
-! #undef powerpc
-! #define powerpc powerpc
-! #endif
-! 
-! #  define _STLP_NATIVE_INCLUDE_PATH GXX_INCLUDE_PATH
-! #  define _STLP_NATIVE_OLD_STREAMS_INCLUDE_PATH \
-!           GXX_INCLUDE_PATH/backward
   
++ #ifdef linux
++ #undef linux
++ #define linux linux
++ #endif
++ 
++ #ifdef mips
++ #undef mips
++ #define mips mips
++ #endif
++ 
++ #ifdef sgi
++ #undef sgi
++ #define sgi sgi
++ #endif
++ 
++ #ifdef sun
++ #undef sun
++ #define sun sun
++ #endif
++ 
++ #ifdef sparc
++ #undef sparc
++ #define sparc sparc
++ #endif
++ 
++ #ifdef powerpc
++ #undef powerpc
++ #define powerpc powerpc
++ #endif
++ 
++ #  define _STLP_NATIVE_INCLUDE_PATH GXX_INCLUDE_PATH
++ #  define _STLP_NATIVE_OLD_STREAMS_INCLUDE_PATH \
++           GXX_INCLUDE_PATH/backward
++ 
   # elif (__GNUC_MINOR__ < 8)
   
+  #  define _STLP_NO_OWN_IOSTREAMS 1
 ***************
 *** 312,317 ****
   #   define _STLP_STATIC_TEMPLATE_DATA 1
@@@@ -676,7 +802,7 @@@@
 ! #    define _STLP_VENDOR_GLOBAL_CSTD       1
 ! #endif
 *** misc/STLport-4.5/stlport/cwchar	Sat Jan 27 02:39:42 2001
---- misc/build/STLport-4.5/stlport/cwchar	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/cwchar	Thu Oct 25 20:44:51 2007
 ***************
 *** 21,26 ****
 --- 21,29 ----
@@@@ -690,7 +816,7 @@@@
   
   # if (_STLP_OUTERMOST_HEADER_ID == 0x120)
 *** misc/STLport-4.5/stlport/stdexcept	Tue May 22 02:50:21 2001
---- misc/build/STLport-4.5/stlport/stdexcept	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/stdexcept	Thu Oct 25 20:44:51 2007
 ***************
 *** 49,54 ****
 --- 49,61 ----
@@@@ -708,7 +834,7 @@@@
   public:
     __Named_exception(const string& __str) 
 *** misc/STLport-4.5/stlport/stl/_bvector.h	Wed May 30 05:45:41 2001
---- misc/build/STLport-4.5/stlport/stl/_bvector.h	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/stl/_bvector.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 34,40 ****
   # include <stl/_vector.h>
@@@@ -963,7 +1089,7 @@@@
   #endif /* _STLP_INTERNAL_BVECTOR_H */
   
 *** misc/STLport-4.5/stlport/stl/_complex.h	Fri Jul  6 06:16:17 2001
---- misc/build/STLport-4.5/stlport/stl/_complex.h	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/stl/_complex.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 18,23 ****
 --- 18,27 ----
@@@@ -977,8 +1103,46 @@@@
   // This header declares the template class complex, as described in 
   // in the draft C++ standard.  Single-precision complex numbers
   // are complex<float>, double-precision are complex<double>, and
+*** misc/STLport-4.5/stlport/stl/_config.h	Tue Sep  4 19:10:18 2001
+--- misc/build/STLport-4.5/stlport/stl/_config.h	Thu Oct 25 20:45:55 2007
+***************
+*** 162,168 ****
+  # endif
+  
+  /* Operating system recognition (basic) */
+! # if defined (__unix) || defined (__linux__) || defined (__QNX__) || defined (_AIX)  || defined (__NetBSD__)
+  #  define _STLP_UNIX 1
+  #  if defined (__linux__) && ! defined (_STLP_USE_GLIBC)
+  #   define _STLP_USE_GLIBC 1
+--- 162,168 ----
+  # endif
+  
+  /* Operating system recognition (basic) */
+! # if defined (__unix) || defined (__linux__) || defined (__QNX__) || defined (_AIX)  || defined (__NetBSD__) || defined(__OpenBSD__)
+  #  define _STLP_UNIX 1
+  #  if defined (__linux__) && ! defined (_STLP_USE_GLIBC)
+  #   define _STLP_USE_GLIBC 1
+*** misc/STLport-4.5/stlport/stl/_cwchar.h	Tue Sep  4 19:10:18 2001
+--- misc/build/STLport-4.5/stlport/stl/_cwchar.h	Thu Oct 25 21:05:59 2007
+***************
+*** 30,36 ****
+  # if !  defined (_STLP_NO_CWCHAR) && defined  (_STLP_USE_NEW_C_HEADERS)
+  #  include _STLP_NATIVE_CPP_C_HEADER(cwchar)
+  
+! # elif defined (__MRC__) || defined (__SC__) || defined (__BORLANDC__) || defined(__FreeBSD__) || (defined (__GNUC__) && defined (__APPLE__\
+  )) || defined (_STLP_NO_WCHAR_T)
+  
+  #  include _STLP_NATIVE_C_HEADER(stddef.h)
+--- 30,36 ----
+  # if !  defined (_STLP_NO_CWCHAR) && defined  (_STLP_USE_NEW_C_HEADERS)
+  #  include _STLP_NATIVE_CPP_C_HEADER(cwchar)
+  
+! # elif defined (__MRC__) || defined (__SC__) || defined (__BORLANDC__) || defined(__FreeBSD__) || defined (__OpenBSD__) || (defined (__GNUC__) && defined (__APPLE__\
+  )) || defined (_STLP_NO_WCHAR_T)
+  
+  #  include _STLP_NATIVE_C_HEADER(stddef.h)
 *** misc/STLport-4.5/stlport/stl/_ios_base.h	Tue Sep  4 19:10:18 2001
---- misc/build/STLport-4.5/stlport/stl/_ios_base.h	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/stl/_ios_base.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 291,297 ****
   template <class Facet>
@@@@ -997,7 +1161,7 @@@@
   
   // ----------------------------------------------------------------------
 *** misc/STLport-4.5/stlport/stl/_rope.h	Mon Aug  6 04:21:25 2001
---- misc/build/STLport-4.5/stlport/stl/_rope.h	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/stl/_rope.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 1470,1476 ****
       rope<_CharT,_Alloc> __remainder_rope;
@@@@ -1032,8 +1196,27 @@@@
         }
         if (0 != __remainder) {
   		__result += __remainder_rope;
+*** misc/STLport-4.5/stlport/stl/_stdio_file.h	Mon Mar 19 08:01:09 2001
+--- misc/build/STLport-4.5/stlport/stl/_stdio_file.h	Thu Oct 25 21:06:21 2007
+***************
+*** 154,160 ****
+  
+  # define _STLP_FILE_I_O_IDENTICAL
+  
+! #elif defined (__CYGWIN__) || defined(__FreeBSD__)  || defined(__NetBSD__) || ( defined(__GNUC__) && defined(__APPLE__) )
+  
+  # if 0
+  inline int   _FILE_fd(const FILE& __f) { return __f._file; }
+--- 154,160 ----
+  
+  # define _STLP_FILE_I_O_IDENTICAL
+  
+! #elif defined (__CYGWIN__) || defined(__FreeBSD__)  || defined(__NetBSD__) || defined(__OpenBSD__) || ( defined(__GNUC__) && defined(__APPLE__) )
+  
+  # if 0
+  inline int   _FILE_fd(const FILE& __f) { return __f._file; }
 *** misc/STLport-4.5/stlport/stl/_threads.h	Tue Sep  4 19:10:20 2001
---- misc/build/STLport-4.5/stlport/stl/_threads.h	Thu Jul 26 12:13:03 2007
+--- misc/build/STLport-4.5/stlport/stl/_threads.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 42,49 ****
   #  include <cstdlib>
@@@@ -1054,7 +1237,7 @@@@
   # endif
   
 *** misc/STLport-4.5/stlport/stl/_valarray.h	Wed May 30 05:45:42 2001
---- misc/build/STLport-4.5/stlport/stl/_valarray.h	Thu Jul 26 12:15:24 2007
+--- misc/build/STLport-4.5/stlport/stl/_valarray.h	Thu Oct 25 20:44:51 2007
 ***************
 *** 19,24 ****
 --- 19,28 ----
@@@@ -1068,3 +1251,22 @@@@
   #ifndef _STLP_CMATH
   #include <cmath>
   #endif
+*** misc/STLport-4.5/stlport/stl/c_locale.h	Thu May 31 05:24:41 2001
+--- misc/build/STLport-4.5/stlport/stl/c_locale.h	Thu Oct 25 21:06:37 2007
+***************
+*** 179,185 ****
+  # define _Locale_PRINT _CTYPE_R
+  # define _Locale_ALPHA _CTYPE_A
+  
+! # elif defined (__NetBSD__)
+   
+  # define _Locale_CNTRL _C
+  # define _Locale_UPPER _U
+--- 179,185 ----
+  # define _Locale_PRINT _CTYPE_R
+  # define _Locale_ALPHA _CTYPE_A
+  
+! # elif defined (__NetBSD__) || defined (__OpenBSD__)
+   
+  # define _Locale_CNTRL _C
+  # define _Locale_UPPER _U
@


1.7
log
@- update to openoffice 2.3 that has many new features
  and a lot of speedup.
- fix the debug flavor
- rearrange the PLISTs so the no_lang flavor won't try to
  include some language files
@
text
@@


1.6
log
@- update to version 2.1.0 which includes many bugfixes and improvements

- remove some unnecessary patches and add a no_lang
pseudo flavor which allows people to do a build w/o language packs
(requested by kurt@@)

- from now on we set the file descriptor limit to a higher value (256)
in the OpenOffice build environment to prevent build failures

- point explicitly to the licensing FAQ instead of pointing to the contents
of the FAQ
@
text
@d1 19
a19 4
$OpenBSD: patch-stlport_STLport-4_5_patch,v 1.5 2006/11/08 09:34:03 robert Exp $
--- stlport/STLport-4.5.patch.orig.port	Fri Dec  1 18:57:09 2006
+++ stlport/STLport-4.5.patch	Mon Dec 11 22:27:43 2006
@@@@ -115,6 +115,81 @@@@
d23 41
a63 6
+*** misc/STLport-4.5/src/gcc-3.0-openbsd.mak	2006-02-16 16:21:24.224363000 +0100
+--- misc/build/STLport-4.5/src/gcc-3.0-openbsd.mak	2006-02-16 16:18:28.228881000 +0100
+***************
+*** 1 ****
+! dummy
+--- 1,69 ----
a81 1
+! #
d123 83
a205 11
+! 
+! 
+! #install: all
+! #	cp -p $(LIB_TARGET) ${D_LIB_TARGET} ../lib
+! 
+! #%.s: %.cpp
+! #	$(CXX) $(CXXFLAGS) -O4 -S -pto $<  -o $@@
+! 
+! 
 *** misc/STLport-4.5/src/gcc-3.0-freebsd.mak	2006-02-16 16:21:24.224363000 +0100
 --- misc/build/STLport-4.5/src/gcc-3.0-freebsd.mak	2006-02-16 16:18:28.228881000 +0100
d207 49
a255 2
@@@@ -848,6 +923,118 @@@@
   # define _STLP_MUTEX_INITIALIZER
d258 199
d458 1
a458 1
+--- misc/build/STLport-4.5/stlport/stl/_config.h	Sat Apr 29 11:24:36 2006
d477 1
a477 1
+--- misc/build/STLport-4.5/stlport/stl/_cwchar.h	Sat Apr 29 11:22:03 2006
d491 1
a491 1
+! # elif defined (__MRC__) || defined (__SC__) || defined (__BORLANDC__) || defined(__FreeBSD__) || defined(__OpenBSD__) || (defined (__GNUC__) && defined (__APPLE__\
d495 19
d515 1
a515 1
+--- misc/build/STLport-4.5/stlport/stl/_stdio_file.h	Sat Apr 29 11:22:03 2006
d533 19
d553 1
a553 1
+--- misc/build/STLport-4.5/stlport/stl/c_locale.h	Sat Apr 29 11:22:49 2006
a570 39
+*** misc/STLport-4.5/src/num_put_float.cpp	Tue Sep  4 13:10:12 2001
+--- misc/build/STLport-4.5/src/num_put_float.cpp	Tue Oct 24 18:47:18 2006
+***************
+*** 219,225 ****
+  inline bool _Stl_is_inf(double x)        { return isinf(x); }
+  // inline bool _Stl_is_neg_inf(double x)    { return isinf(x) < 0; }  
+  inline bool _Stl_is_neg_inf(double x)    { return isinf(x) && x < 0; }
+! #elif defined(__unix) && !defined(__FreeBSD__)  && !defined(__NetBSD__) \
+        && !defined(__APPLE__)  && !defined(__DJGPP) && !defined(__osf__)
+  inline bool _Stl_is_nan_or_inf(double x) { return IsNANorINF(x); }
+  inline bool _Stl_is_inf(double x)        { return IsNANorINF(x) && IsINF(x); }
+--- 219,225 ----
+  inline bool _Stl_is_inf(double x)        { return isinf(x); }
+  // inline bool _Stl_is_neg_inf(double x)    { return isinf(x) < 0; }  
+  inline bool _Stl_is_neg_inf(double x)    { return isinf(x) && x < 0; }
+! #elif defined(__unix) && !defined(__FreeBSD__)  && !defined(__NetBSD__) && !defined(__OpenBSD__) \
+        && !defined(__APPLE__)  && !defined(__DJGPP) && !defined(__osf__)
+  inline bool _Stl_is_nan_or_inf(double x) { return IsNANorINF(x); }
+  inline bool _Stl_is_inf(double x)        { return IsNANorINF(x) && IsINF(x); }
+***************
+*** 343,349 ****
+    inline char* _Stl_qfcvtR(long double x, int n, int* pt, int* sign, char* buf)
+      { LOCK_CVT RETURN_CVT(fcvt, x, n, pt, sign, buf) }
+  # endif
+! #elif defined (__unix)  && !defined(__FreeBSD__)  && !defined(__NetBSD__) && !defined(__APPLE__)
+    inline char* _Stl_ecvtR(double x, int n, int* pt, int* sign, char* buf)
+      { return ecvt_r(x, n, pt, sign, buf); }
+    inline char* _Stl_fcvtR(double x, int n, int* pt, int* sign, char* buf)
+--- 343,349 ----
+    inline char* _Stl_qfcvtR(long double x, int n, int* pt, int* sign, char* buf)
+      { LOCK_CVT RETURN_CVT(fcvt, x, n, pt, sign, buf) }
+  # endif
+! #elif defined (__unix)  && !defined(__FreeBSD__)  && !defined(__NetBSD__) && !defined(__OpenBSD__) && !defined(__APPLE__)
+    inline char* _Stl_ecvtR(double x, int n, int* pt, int* sign, char* buf)
+      { return ecvt_r(x, n, pt, sign, buf); }
+    inline char* _Stl_fcvtR(double x, int n, int* pt, int* sign, char* buf)
 *** misc/build/STLport-4.5/stlport/stl/_rope.h	Mon Aug  6 04:21:25 2001
 --- misc/modified/STLport-4.5/stlport/stl/_rope.h	Thu Jul 27 15:19:10 2006
 ***************
@


1.5
log
@- add amd64 support
- use unxobsd.mk instead of different makefiles for every
  architecture
- use devel/boost now that we have it instead of the bundled
  one. (this is also needed to build openoffice on amd64)
- start using some patches from http://go-ooo.org/.
  (disable the startup wizard and some online registration menu points)
  (the patch is generated by my after applying the patches that's why
   i provide the mirror for it.)
- allow the openoffice build infrastructure to override our CFLAGS in
  some cases. this is needed because some of the files have to be compiled
  with -O0 instead of -02 which we use by default.
@
text
@d1 3
a3 3
$OpenBSD: patch-stlport_STLport-4_5_patch,v 1.4 2006/10/27 16:02:02 kurt Exp $
--- stlport/STLport-4.5.patch.orig.port	Thu Apr 27 03:47:20 2006
+++ stlport/STLport-4.5.patch	Thu Oct 26 15:40:08 2006
d86 1
a86 1
@@@@ -848,3 +923,115 @@@@
d202 3
@


1.4
log
@- libxslt is a BUILD_DEPEND not a LIB_DEPEND
- enable cairo support
- enable portaudio/sendfile - audio not working yet, revisit later
- adjust include and lib search order again. put /usr/local before
/usr/X11R6 so we link to ports expat and not the one that comes with X11R6
- add -pthread to PTHREAD_CFLAGS in odk subproject
- integrate audacity portaudio patches and link to ossaudio
- strip Linux shlib major version numbers from dlopen()'ed lib names
- link stlport with stdc++ to resolve some undefined symbols
- remove getpwuid_r workaround in sal/osl/unx/security.c since a suitable
one already exits in sal/osl/unx/system.c
@
text
@d1 1
a1 1
$OpenBSD: patch-stlport_STLport-4_5_patch,v 1.3 2006/10/25 22:49:50 kurt Exp $
d34 1
a34 1
+! DYN_LINK=${CXX} ${PTHREAD_LIBS} -lstdc++ --fexceptions -shared -o
@


1.3
log
@- protect against null pointer dereference in hi_ary.cxx
- use new style C++ includes
- clean up some patches
- use __alignof__ for OpenBSD too
- fix destpath in packagelist.txt for sdkoo and ure
- don't generate core file on intentional segfault test in typesconfig.c
- add missing unxobsdi section in stand.lst
- num_put_float.cpp fix in STLport
- add sysconfig.get_config_var('LIBS') to PYTHON_LIBS
- don't hardcode Linux path to 'sum' let path find it

All corrections submitted by or inspired by patches from Fritz Elfert
<fritz at fritz-elfert.de>
@
text
@d1 1
a1 1
$OpenBSD: patch-stlport_STLport-4_5_patch,v 1.2 2006/08/20 03:36:53 kurt Exp $
d3 84
a86 20
+++ stlport/STLport-4.5.patch	Tue Oct 24 20:47:05 2006
@@@@ -141,7 +141,7 @@@@
 ! #
 ! #
 ! LINK=ar cr
-! DYN_LINK=${CXX} -Wl,-rpath,'$$ORIGIN' ${PTHREAD_LIBS} --fexceptions -shared -o
+! DYN_LINK=${CXX} ${PTHREAD_LIBS} --fexceptions -shared -o
 ! 
 ! OBJEXT=o
 ! DYNEXT=so
@@@@ -281,7 +281,7 @@@@
 ! #
 ! #
 ! LINK=ar cr
-! DYN_LINK=$(CXX) -Wl,-rpath,'$$ORIGIN' --fexceptions -shared -o
+! DYN_LINK=$(CXX) --fexceptions -shared -o
 ! 
 ! OBJEXT=o
 ! DYNEXT=so
@@@@ -848,3 +848,115 @@@@
@


1.2
log
@Fix debug FLAVOR so it builds and installs binaries with symbols:
- add -dontstrip to packaging script to get useful debug binaries
installed
- remove --enable-debug since that makes the debug build too big (>18G)
for me to build. Add back later as a possible verbose_debug flavor.

Use PATCHORIG so that update-patches doesn't pickup internal .orig files.
Idea from espie@@

Add a mutex to make the call to getpwuid thread safe.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ stlport/STLport-4.5.patch	Fri Aug 18 15:47:45 2006
d22 1
a22 1
@@@@ -848,3 +848,79 @@@@
d102 36
@


1.1
log
@Initial revision
@
text
@d2 2
a3 2
--- stlport/STLport-4.5.patch.orig	Thu Apr 27 09:47:20 2006
+++ stlport/STLport-4.5.patch	Tue Aug 15 14:03:11 2006
@


1.1.1.1
log
@Import of OpenOffice.Org version 2.0.3m179.  
 
OpenOffice is an Open Source, community-developed, multi-platform office
productivity suite. It includes the key desktop applications, such as a
word processor, spreadsheet, presentation manager, and drawing program,
with a user interface and feature set similar to other office suites.
 
I would like to thank everyone who helped porting:
Peter Valchev, Kurt Miller, Dale Rahn, Ian Darwin and the OpenOffice.Org team.
 
This import is an explicit request by pvalchev@@ and espie@@.
This means that the current ports lock is still in effect and this import
is only a planned exception by the release managers.

This port is not yet connected to the builds.
 
okay pvalchev@@, espie@@
@
text
@@
