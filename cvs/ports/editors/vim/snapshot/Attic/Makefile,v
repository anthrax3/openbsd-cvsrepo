head	1.56;
access;
symbols
	OPENBSD_3_5:1.53.0.2
	OPENBSD_3_5_BASE:1.53
	OPENBSD_3_4:1.51.0.2
	OPENBSD_3_4_BASE:1.51
	OPENBSD_3_3:1.45.0.2
	OPENBSD_3_3_BASE:1.45
	OPENBSD_3_2:1.44.0.4
	OPENBSD_3_2_BASE:1.44
	OPENBSD_3_1:1.44.0.2
	OPENBSD_3_1_BASE:1.44
	OPENBSD_3_0:1.36.0.2
	OPENBSD_3_0_BASE:1.36
	OPENBSD_2_9_TRACKING_SWITCH:1.25
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_9_BASE:1.6
	lebel:1.1.1.1
	vim:1.1.1;
locks; strict;
comment	@# @;


1.56
date	2004.07.12.19.32.59;	author lebel;	state dead;
branches;
next	1.55;

1.55
date	2004.06.09.18.45.22;	author lebel;	state Exp;
branches;
next	1.54;

1.54
date	2004.05.10.17.11.40;	author lebel;	state Exp;
branches;
next	1.53;

1.53
date	2004.02.04.15.12.23;	author lebel;	state Exp;
branches;
next	1.52;

1.52
date	2004.02.04.07.39.18;	author sturm;	state Exp;
branches;
next	1.51;

1.51
date	2003.05.27.14.37.59;	author lebel;	state Exp;
branches;
next	1.50;

1.50
date	2003.05.26.19.31.26;	author lebel;	state Exp;
branches;
next	1.49;

1.49
date	2003.05.26.14.26.56;	author lebel;	state Exp;
branches;
next	1.48;

1.48
date	2003.05.13.16.03.12;	author lebel;	state Exp;
branches;
next	1.47;

1.47
date	2003.04.28.15.28.29;	author lebel;	state Exp;
branches;
next	1.46;

1.46
date	2003.04.23.20.04.44;	author lebel;	state Exp;
branches;
next	1.45;

1.45
date	2002.12.29.19.43.49;	author fgsch;	state Exp;
branches;
next	1.44;

1.44
date	2002.03.24.20.27.12;	author lebel;	state Exp;
branches;
next	1.43;

1.43
date	2002.03.23.02.49.33;	author lebel;	state Exp;
branches;
next	1.42;

1.42
date	2002.03.17.23.33.29;	author lebel;	state Exp;
branches;
next	1.41;

1.41
date	2002.03.10.17.48.48;	author lebel;	state Exp;
branches;
next	1.40;

1.40
date	2002.03.08.23.51.24;	author lebel;	state Exp;
branches;
next	1.39;

1.39
date	2002.03.02.15.25.09;	author lebel;	state Exp;
branches;
next	1.38;

1.38
date	2002.02.27.15.17.59;	author lebel;	state Exp;
branches;
next	1.37;

1.37
date	2002.02.24.22.15.12;	author lebel;	state Exp;
branches;
next	1.36;

1.36
date	2001.09.27.19.39.55;	author lebel;	state Exp;
branches;
next	1.35;

1.35
date	2001.09.24.17.38.00;	author lebel;	state Exp;
branches;
next	1.34;

1.34
date	2001.09.21.14.46.30;	author lebel;	state Exp;
branches;
next	1.33;

1.33
date	2001.09.16.21.55.01;	author lebel;	state Exp;
branches;
next	1.32;

1.32
date	2001.09.13.21.14.52;	author lebel;	state Exp;
branches;
next	1.31;

1.31
date	2001.09.09.00.38.46;	author lebel;	state Exp;
branches;
next	1.30;

1.30
date	2001.09.09.00.26.19;	author lebel;	state Exp;
branches;
next	1.29;

1.29
date	2001.09.08.22.40.20;	author lebel;	state Exp;
branches;
next	1.28;

1.28
date	2001.09.03.14.00.12;	author lebel;	state Exp;
branches;
next	1.27;

1.27
date	2001.08.27.21.50.47;	author lebel;	state Exp;
branches;
next	1.26;

1.26
date	2001.08.20.02.09.36;	author lebel;	state Exp;
branches;
next	1.25;

1.25
date	2001.08.13.14.14.22;	author lebel;	state Exp;
branches;
next	1.24;

1.24
date	2001.08.06.02.33.24;	author lebel;	state Exp;
branches;
next	1.23;

1.23
date	2001.07.23.14.09.29;	author lebel;	state Exp;
branches;
next	1.22;

1.22
date	2001.07.19.15.33.46;	author lebel;	state Exp;
branches;
next	1.21;

1.21
date	2001.07.18.10.59.01;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2001.07.13.19.28.26;	author lebel;	state Exp;
branches;
next	1.19;

1.19
date	2001.07.03.16.10.14;	author lebel;	state Exp;
branches;
next	1.18;

1.18
date	2001.06.25.01.27.24;	author lebel;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.18.20.23.21;	author lebel;	state Exp;
branches;
next	1.16;

1.16
date	2001.06.11.01.02.52;	author lebel;	state Exp;
branches;
next	1.15;

1.15
date	2001.06.04.14.52.47;	author lebel;	state Exp;
branches;
next	1.14;

1.14
date	2001.06.03.16.26.46;	author lebel;	state Exp;
branches;
next	1.13;

1.13
date	2001.06.03.16.14.34;	author lebel;	state Exp;
branches;
next	1.12;

1.12
date	2001.05.28.18.32.16;	author lebel;	state Exp;
branches;
next	1.11;

1.11
date	2001.05.22.18.26.52;	author lebel;	state Exp;
branches;
next	1.10;

1.10
date	2001.05.17.00.27.24;	author lebel;	state Exp;
branches;
next	1.9;

1.9
date	2001.05.15.20.31.49;	author lebel;	state Exp;
branches;
next	1.8;

1.8
date	2001.05.07.13.38.35;	author lebel;	state Exp;
branches;
next	1.7;

1.7
date	2001.05.06.00.18.23;	author lebel;	state Exp;
branches;
next	1.6;

1.6
date	2001.04.18.15.01.11;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2001.04.17.13.20.25;	author lebel;	state Exp;
branches;
next	1.4;

1.4
date	2001.04.10.13.41.14;	author lebel;	state Exp;
branches;
next	1.3;

1.3
date	2001.04.09.18.19.44;	author lebel;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.08.22.26.44;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.02.16.02.02;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.04.02.16.02.02;	author espie;	state Exp;
branches;
next	;


desc
@@


1.56
log
@update editors/vim to 6.3.13:
- nuke stable and snapshot branches after some discussions with a few people.
@
text
@# $OpenBSD: Makefile,v 1.55 2004/06/09 18:45:22 lebel Exp $

COMMENT=	"vi clone, many additional features"

CATEGORIES=	editors

HOMEPAGE=	http://www.vim.org/

MAINTAINER=	David Lebel <lebel@@openbsd.org>

PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No

IGNORE="There is currently no snapshot version of vim.  Use vim/stable"

.include <bsd.port.mk>
@


1.55
log
@6.3 has been released. re-stub the snapshot of vim
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2004/02/04 15:12:23 lebel Exp $
@


1.54
log
@a vim/snapshot is now available.  6.3a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2004/04/05 17:01:54 lebel Exp $
a3 1
COMMENT-lang=	"vi clone, NLS subpackage"
a4 6
REVISION=	a
DISTNAME=	vim-6.3${REVISION}
#REVISION=	447
VERSION=	6.3${REVISION}
PKGNAME=	vim-${VERSION}
P=		${DISTNAME:C/[-\.]//g}
a5 9
MASTER_SITES=   ftp://ftp.vim.org/pub/vim/unstable/unix/ \
	        ftp://ftp.home.vim.org/pub/vim/unstable/unix/ \
	        ftp://ftp.berlin.de.vim.org/unstable/unix/
MASTER_SITES0=  ${MASTER_SITES:S/unix/patches/}
MASTER_SITES1=	${MASTER_SITES:S/unix/extra/}
DISTFILES=	${DISTNAME}.tar.bz2 \
	        ${DISTNAME}-extra.tar.gz:1 \
		${DISTNAME}-lang.tar.gz:1 
DIST_SUBDIR=	vim6
d11 4
a14 99
#PATCHFILES=	
#_patches!=	jot -w%03d - 1 ${REVISION} 1
#.for p in ${_patches}
#PATCHFILES+=	6.3.${p}:0
#.endfor

# allow vim to build on m68k and vax
.if (${MACHINE_ARCH} == "m68k")
PATCH_LIST=     patch-* sup-m68k-*
.elif (${MACHINE_ARCH} == "vax")
PATCH_LIST=     patch-* sup-vax-*
.elif (${MACHINE_ARCH} == "hppa")
PATCH_LIST=     patch-* sup-hppa-*
.endif

# donation-ware
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

MODULES=	gettext iconv

MULTI_PACKAGES= -lang
SUBPACKAGE?=
.if defined(PACKAGING) && ${SUBPACKAGE} == "-lang"
.  for i in ${FLAVOR:L}
_flavor:=${_flavor},$i
.  endfor
RUN_DEPENDS=::editors/vim/snapshot${_flavor}
PKG_ARCH=*
.endif

.for i in ${MULTI_PACKAGES}
PKGNAME$i=      vim$i-${VERSION}
.endfor

FLAVORS=	huge gtk gtk2 athena motif no_x11 perl python ruby
FLAVOR?=	gtk

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+=--with-tlib="curses" --enable-multibyte

.if ${FLAVOR:L:Mhuge}
CONFIGURE_ARGS+=--with-features=huge
.endif

.if ${FLAVOR:L:Mperl}
CONFIGURE_ARGS+=--enable-perlinterp
.endif

.if ${FLAVOR:L:Mpython}
PYTHON_VER=     2.3
CONFIGURE_ENV+=	vi_cv_path_python=${LOCALBASE}/bin/python${PYTHON_VER}
CONFIGURE_ARGS+=--enable-pythoninterp \
	--with-python-config-dir=${LOCALBASE}/lib/python${PYTHON_VER}/config
LIB_DEPENDS+=	python${PYTHON_VER}.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
.endif

.if ${FLAVOR:L:Mruby}
CONFIGURE_ARGS+=--enable-rubyinterp
MAKE_ENV+=	RUBY="${LOCALBASE}/bin/ruby"
LIB_DEPENDS+=	ruby::lang/ruby
.endif

.if ${FLAVOR:L:Mno_x11} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--disable-gui --without-x
.elif ${FLAVOR:L:Mmotif} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--enable-gui="motif" --with-x --enable-fontset --enable-xim
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
USE_MOTIF=any
.elif ${FLAVOR:L:Mathena} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--enable-gui="athena" --with-x --enable-fontset --enable-xim
.elif ${FLAVOR:L:Mgtk} && \
	!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
LIB_DEPENDS+=	gtk.1.2,gdk.1.2::x11/gtk+
CONFIGURE_ARGS+=--enable-gui="gtk" --with-x --enable-fontset --enable-xim --disable-gtk2-check
.elif ${FLAVOR:L:Mgtk2} && \
	        !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk}
LIB_DEPENDS+=   gdk-x11-2.0.0.11,gdk_pixbuf-2.0.0.11,gtk-x11-2.0.0.11::x11/gtk+2
CONFIGURE_ARGS+=--enable-gui="gtk2" --with-x --enable-fontset --enable-xim --disable-gtk-check --enable-gtk2-check
.else
ERRORS+="Fatal: You must select one GUI interface: no_x11, gtk, athena or motif"
.endif

WRKDIST=		${WRKDIR}/${P}
WRKSRC=			${WRKDIST}/src

SUBST_VARS=     	P

.include <bsd.own.mk>

# don't try to regenerate the configure script. Works around the fact that
# auto/configure.in is newer than auto/configure.
post-patch:
	touch ${WRKBUILD}/auto/configure
d16 1
a16 5
post-configure:
	touch ${WRKBUILD}/auto/config.mk

post-install:
	${INSTALL_DATA} ${FILESDIR}/pf.vim ${PREFIX}/share/vim/${P}/syntax
@


1.53
log
@stub vim/snapshot until 6.3-series is introduced
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2002/12/29 19:43:49 fgsch Exp $
d4 1
d6 6
d13 9
d27 99
a125 4
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No
d127 5
a131 1
IGNORE="There is currently no snapshot version of vim.  Use vim/stable"
@


1.52
log
@mark some subpackages arch independent

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2003/05/27 14:37:59 lebel Exp $
a3 1
COMMENT-lang=	"vi clone, NLS subpackage"
a4 6
REVISION=	f
DISTNAME=	vim-6.2${REVISION}
#VERSION=	6.2.${REVISION}
VERSION=	6.2${REVISION}
PKGNAME=	vim-${VERSION}
P=		vim62${REVISION}
a5 9
MASTER_SITES=	ftp://ftp.vim.org/pub/vim/unstable/unix/ \
		ftp://ftp.home.vim.org/pub/vim/unstable/unix/ \
		ftp://ftp.berlin.de.vim.org/unstable/unix/
MASTER_SITES0=  ${MASTER_SITES:S/unix/patches/}
MASTER_SITES1=	${MASTER_SITES:S/unix/extra/}
DISTFILES=	${DISTNAME}.tar.bz2 \
	        ${DISTNAME}-extra.tar.gz:1 \
		${DISTNAME}-lang.tar.gz:1 
DIST_SUBDIR=	vim6
d11 6
a16 97
#PATCHFILES=	
#_patches!=	jot -w%03d - 1 ${REVISION} 1
#.for p in ${_patches}
#PATCHFILES+=	6.2a.${p}:0
#.endfor

# allow vim to build on m68k and vax
.if (${MACHINE_ARCH} == "m68k")
PATCH_LIST=     patch-* sup-m68k-*
.elif (${MACHINE_ARCH} == "vax")
PATCH_LIST=     patch-* sup-vax-*
.endif

# donation-ware
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

MODULES=	gettext iconv

MULTI_PACKAGES= -lang
SUBPACKAGE?=
.if defined(PACKAGING) && ${SUBPACKAGE} == "-lang"
.  for i in ${FLAVOR:L}
_flavor:=${_flavor},$i
.  endfor
RUN_DEPENDS=::editors/vim/snapshot${_flavor}
PKG_ARCH=*
.endif

.for i in ${MULTI_PACKAGES}
PKGNAME$i=      vim$i-${VERSION}
.endfor

FLAVORS=	huge gtk gtk2 athena motif no_x11 perl python ruby
FLAVOR?=	gtk

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+=--with-tlib="curses" --enable-multibyte

.if ${FLAVOR:L:Mhuge}
CONFIGURE_ARGS+=--with-features=huge
.endif

.if ${FLAVOR:L:Mperl}
CONFIGURE_ARGS+=--enable-perlinterp
.endif

.if ${FLAVOR:L:Mpython}
PYTHON_VER=     2.2
CONFIGURE_ENV+=	vi_cv_path_python=${LOCALBASE}/bin/python${PYTHON_VER}
CONFIGURE_ARGS+=--enable-pythoninterp \
	--with-python-config-dir=${LOCALBASE}/lib/python${PYTHON_VER}/config
LIB_DEPENDS+=	python${PYTHON_VER}.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
.endif

.if ${FLAVOR:L:Mruby}
CONFIGURE_ARGS+=--enable-rubyinterp
MAKE_ENV+=	RUBY="${LOCALBASE}/bin/ruby"
LIB_DEPENDS+=	ruby::lang/ruby
.endif

.if ${FLAVOR:L:Mno_x11} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--disable-gui --without-x
.elif ${FLAVOR:L:Mmotif} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--enable-gui="motif" --with-x --enable-fontset --enable-xim
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
USE_MOTIF=any
.elif ${FLAVOR:L:Mathena} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--enable-gui="athena" --with-x --enable-fontset --enable-xim
.elif ${FLAVOR:L:Mgtk} && \
	!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
LIB_DEPENDS+=	gtk.1.2,gdk.1.2::x11/gtk+
CONFIGURE_ARGS+=--enable-gui="gtk" --with-x --enable-fontset --enable-xim --disable-gtk2-check
.elif ${FLAVOR:L:Mgtk2} && \
	        !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk}
LIB_DEPENDS+=   gdk-x11-2.0.0.11,gdk_pixbuf-2.0.0.11,gtk-x11-2.0.0.11::x11/gtk+2
CONFIGURE_ARGS+=--enable-gui="gtk2" --with-x --enable-fontset --enable-xim --disable-gtk-check --enable-gtk2-check
.else
ERRORS+="Fatal: You must select one GUI interface: no_x11, gtk, athena or motif"
.endif

WRKDIST=		${WRKDIR}/${P}
WRKSRC=			${WRKDIST}/src

SUBST_VARS=     	P

.include <bsd.own.mk>

# don't try to regenerate the configure script. Works around the fact that
# auto/configure.in is newer than auto/configure.
post-patch:
	touch ${WRKBUILD}/auto/configure
a17 2
post-install:
	${INSTALL_DATA} ${FILESDIR}/pf.vim ${PREFIX}/share/vim/${P}/syntax
@


1.51
log
@actually, we need gtk+2.2 according to Marc Matteo; so prepare it for when gtk+2 is upgraded
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2003/05/26 19:31:26 lebel Exp $
d55 1
@


1.50
log
@cleanup MASTER_SITES; right now, the first two main are
down right, but the last one is up and running; thanks naddy@@ for
the heads up
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2003/05/26 14:26:56 lebel Exp $
d106 1
a106 1
LIB_DEPENDS+=   gdk-x11-2.0.=0,gdk_pixbuf-2.0.=0,gtk-x11-2.0.=0::x11/gtk+2
@


1.49
log
@update vim/snapshot to 6.2f:

(from the announcement, this is now BETA, not ALPHA)

This is a test version of Vim.  Since Vim 6.1 many reported problems
have been fixed.  Also included are new and updated syntax files,
translated menus and messages.

Main new features:
- Support for GTK 2. (Daniel Elstner)
- Support for editing Arabic text. (Nadim Shaikli & Isam Bayazidi)
- ":try" command and friends. (Servatius Brandt)
- Support for the neXtaw GUI toolkit (mostly like Athena). (Alexey Froloff)
- Cscope support for Win32. (Sergey Khorev)
- Support for PostScript printing in various 8-bit encodings. (Mike Williams)

The coming week beta testing will continue.  Please report any problem
that you discover!

Once you have installed 6.2f you can find details about the changes
since Vim 6.1 with ":help version-6.2".  There is a very long list of
fixed bugs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2003/05/13 16:03:12 lebel Exp $
d15 1
a15 3
		ftp://ftp.berlin.de.vim.org/misc/editors/vim/unstable/unix/ \
		ftp://ftp.is.co.za/applications/editors/vim/unstable/unix/ \
		ftp://ftp.progsoc.uts.edu.au/pub/vim/unstable/unix/
@


1.48
log
@update vim/snapshot to 6.2d
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2003/04/28 15:28:29 lebel Exp $
d6 1
a6 1
REVISION=	d
@


1.47
log
@update vim/snapshot to 6.2b
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2003/04/23 20:04:44 lebel Exp $
d6 1
a6 1
REVISION=	b
@


1.46
log
@re-introduce vim/snapshot with version 6.2a; this is ALPHA software.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2003/04/23 18:23:40 lebel Exp $
d6 2
a7 2
DISTNAME=	vim-6.2a
#REVISION=	474
d9 1
a9 1
VERSION=	6.2a
d11 1
a11 1
P=		vim62a
@


1.45
log
@byebye NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2002/03/24 20:27:12 lebel Exp $
d4 1
d6 6
d13 11
d29 96
a124 6
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No

IGNORE="There is currently no snapshot version of vim.  Use vim/stable"
d126 2
@


1.44
log
@since 6.1 is released, remove snapshot and replace it with a stub unti a new
snapshot version is released.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2001/09/27 19:39:55 lebel Exp $
a5 1
NEED_VERSION=	1.402
@


1.43
log
@update vim/snapshot to 6.1b.34
- remove @@pkgdep from PLIST-lang and replaced it with a RUN_DEPENDS inside
  the Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2002/03/17 23:33:29 lebel Exp $
d3 1
a3 2
COMMENT=	"vi clone, many additional features, snapshot version"
COMMENT-lang=	"vi clone, NLS subpackage, snapshot version"
a4 6
DISTNAME=	vim-6.1b
REVISION=       34
VERSION=        6.1b.${REVISION}
PKGNAME=	vim-${VERSION}
DISTNAME=	vim-6.1b
DIR_VERSION=	${DISTNAME:C/[-\.]//g}
d6 1
a6 12
NEED_VERSION=	1.500
MASTER_SITES=	ftp://ftp.vim.org/pub/vim/unstable/unix/ \
		ftp://ftp.home.vim.org/pub/vim/unstable/unix/ \
		ftp://ftp.berlin.de.vim.org/misc/editors/vim/unstable/unix/ \
		ftp://ftp.is.co.za/applications/editors/vim/unstable/unix/ \
		ftp://ftp.progsoc.uts.edu.au/pub/vim/unstable/unix/
MASTER_SITES0=  ${MASTER_SITES:S/unix/patches/}
MASTER_SITES1=	${MASTER_SITES:S/unix/extra/}
DISTFILES=	${DISTNAME}.tar.bz2 \
	        ${DISTNAME}-extra.tar.gz:1 \
		${DISTNAME}-lang.tar.gz:1 
DIST_SUBDIR=	vim6
d12 6
a17 79
_patches!=	jot -w%03d - 1 ${REVISION} 1
.for p in ${_patches}
PATCHFILES+=	6.1b.${p}:0
.endfor

# allow vim to build on m68k and vax
.if (${MACHINE_ARCH} == "m68k")
PATCH_LIST=     patch-* sup-m68k-*
.elif (${MACHINE_ARCH} == "vax")
PATCH_LIST=     patch-* sup-vax-*
.endif

PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

MODULES=	gettext iconv

MULTI_PACKAGES= -lang
SUBPACKAGE?=
.if defined(PACKAGING) && ${SUBPACKAGE} == "-lang"
RUN_DEPENDS=::editors/vim/snapshot
.endif

.for i in ${MULTI_PACKAGES}
PKGNAME$i=      vim$i-${VERSION}
.endfor

FLAVORS=	huge gtk athena motif no_x11 perl python
FLAVOR?=	gtk

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+=--with-tlib="curses" --enable-multibyte

.if ${FLAVOR:L:Mhuge}
CONFIGURE_ARGS+=--with-features=huge
.endif

.if ${FLAVOR:L:Mperl}
CONFIGURE_ARGS+=--enable-perlinterp
.endif

.if ${FLAVOR:L:Mpython}
PYTHON_VER=     2.2
CONFIGURE_ENV+=	vi_cv_path_python=${LOCALBASE}/bin/python${PYTHON_VER}
CONFIGURE_ARGS+=--enable-pythoninterp \
	--with-python-config-dir=${LOCALBASE}/lib/python${PYTHON_VER}/config
LIB_DEPENDS+=	python${PYTHON_VER}.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
.endif

.if ${FLAVOR:L:Mno_x11} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mathena}
CONFIGURE_ARGS+=--disable-gui --without-x
.elif ${FLAVOR:L:Mmotif} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena}
CONFIGURE_ARGS+=--enable-gui="motif" --with-x --enable-fontset --enable-xim
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
USE_MOTIF=any
.elif ${FLAVOR:L:Mathena} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mmotif}
CONFIGURE_ARGS+=--enable-gui="athena" --with-x --enable-fontset --enable-xim
.elif ${FLAVOR:L:Mgtk} && \
	!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena}
LIB_DEPENDS+=	gtk.1.2,gdk.1.2::x11/gtk+
CONFIGURE_ARGS+=--enable-gui="gtk" --with-x --enable-fontset --enable-xim
.else
ERRORS+="Fatal: You must select one GUI interface: no_x11, gtk, athena or motif"
.endif

WRKDIST=		${WRKDIR}/${DIR_VERSION}
WRKSRC=			${WRKDIST}/src

SUBST_VARS=     	DIR_VERSION VERSION

# don't try to regenerate the configure script. Works around the fact that
# auto/configure.in is newer than auto/configure.
post-patch:
	touch ${WRKBUILD}/auto/configure
@


1.42
log
@update vim/snapshot to 6.1b.23:
 - use python 2.2 instead of 2.1.*; thanks to matt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2002/03/10 17:48:48 lebel Exp $
d7 1
a7 1
REVISION=       23
d51 4
@


1.41
log
@update vim/snapshot to 6.1b
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2002/03/08 23:51:24 lebel Exp $
d7 2
a8 3
#REVISION=      00
#VERSION=       6.1b.${REVISION}
VERSION=	6.1b
d30 4
a33 4
#_patches!=	jot -w%03d - 1 ${REVISION} 1
#.for p in ${_patches}
#PATCHFILES+=	6.1b.${p}:0
#.endfor
d70 2
a71 1
PYTHON_VER=     2.1
d74 1
a74 2
RUN_DEPENDS+=   :python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
BUILD_DEPENDS=  ${RUN_DEPENDS}
@


1.40
log
@update vim/snapshot to 6.1a.38
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2002/03/02 15:25:09 lebel Exp $
d6 4
a9 3
DISTNAME=	vim-6.1
REVISION=	38
VERSION=	6.1a.${REVISION}
d11 1
a11 1
DISTNAME=	vim-6.1a
d31 4
a34 4
_patches!=	jot -w%03d - 1 ${REVISION} 1
.for p in ${_patches}
PATCHFILES+=	6.1a.${p}:0
.endfor
@


1.39
log
@update vim/snapshot to 6.1a.19
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2002/02/27 15:17:59 lebel Exp $
d7 1
a7 1
REVISION=	19
@


1.38
log
@update vim/snapshot to 6.1a.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2002/02/24 22:15:12 lebel Exp $
d7 1
a7 1
REVISION=	8
@


1.37
log
@update vim/snapshot to 6.1a.
- vim is entering a BETA period with 6.1.
- this commit is dedicated to the women's and men's Team Canada gold winning teams!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2002/02/21 03:07:48 lebel Exp $
d7 2
a8 2
REVISION=	a
VERSION=	6.1${REVISION}
d10 2
a11 1
DIR_VERSION=	${PKGNAME:C/[-\.]//g}
d19 1
d21 3
a23 3
DISTFILES=	${PKGNAME}.tar.bz2 \
	        ${PKGNAME}-extra.tar.gz:1 \
		${PKGNAME}-lang.tar.gz:1 
d29 5
@


1.36
log
@. do as with zsh/snapshot and put a stub in here to say that there is
  no current snapshot version of vim.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/06/03 01:24:00 lebel Exp $
d3 2
a4 1
COMMENT=	"vi clone, many additional features"
d6 5
d12 11
a22 1
NEED_VERSION=	1.402
d24 1
a24 1
HOMEPAGE=	http://www.vim/
d28 70
a97 6
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No

IGNORE="There is currently no snapshot version of vim.  Use vim/stable"
@


1.35
log
@bump NEED_VERSION, use gettext and iconv modules
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/09/21 14:46:30 lebel Exp $
a4 3
V=		ax
DISTNAME=	vim-6.0${V}
PKGNAME=	${DISTNAME}
d6 1
a6 9
NEED_VERSION=	1.460
MASTER_SITES=	ftp://ftp.vim.org/pub/vim/unreleased/unix/ \
		ftp://nuxi.ucdavis.edu/pub/vim/unreleased/unix/ \
		ftp://ftp.nuxi.com/pub/vim/unreleased/unix/ \
		ftp://ftp.home.vim.org/pub/vim/unreleased/unix/  \
		ftp://ftp.berlin.de.vim.org/misc/editors/vim/unreleased/unix/ \
		ftp://ftp.is.co.za/applications/editors/vim/unreleased/unix/  \
		ftp://ftp.progsoc.uts.edu.au/pub/vim/unreleased/unix/ 
DISTFILES=	${DISTNAME}.tar.bz2
d8 1
a8 1
HOMEPAGE=	http://www.vim.org/
d12 4
a15 48
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

MODULES=	gettext iconv
FLAVORS=	huge gtk athena motif no_x11 perl python
FLAVOR?=	gtk

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+=--with-tlib="curses" --enable-multibyte

SUBST_VARS=	V

.if ${FLAVOR:L:Mhuge}
CONFIGURE_ARGS+=--with-features=huge
.endif

.if ${FLAVOR:L:Mperl}
CONFIGURE_ARGS+=--enable-perlinterp
.endif

.if ${FLAVOR:L:Mpython}
PYTHON_VER=     2.1
CONFIGURE_ARGS+=--enable-pythoninterp \
	--with-python-config-dir=${LOCALBASE}/lib/python${PYTHON_VER}/config
RUN_DEPENDS+=   python${PYTHON_VER}::lang/python
BUILD_DEPENDS=  ${RUN_DEPENDS}
.endif

.if ${FLAVOR:L:Mno_x11} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mathena}
CONFIGURE_ARGS+=--disable-gui --without-x
.elif ${FLAVOR:L:Mmotif} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena}
CONFIGURE_ARGS+=--enable-gui="motif" --with-x --enable-fontset --enable-xim
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
USE_MOTIF=any
.elif ${FLAVOR:L:Mathena} && \
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && ${FLAVOR:L:Mmotif}
CONFIGURE_ARGS+=--enable-gui="athena" --with-x --enable-fontset --enable-xim
.elif ${FLAVOR:L:Mgtk} && \
	!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena}
LIB_DEPENDS=	gtk.1.2::x11/gtk+
CONFIGURE_ARGS+=--enable-gui="gtk" --with-x --enable-fontset --enable-xim
.else
ERRORS+="Fatal: Conflicting flavor: ${FLAVOR}"
.endif
d17 1
a17 2
WRKDIST=		${WRKDIR}/vim60${V}
WRKSRC=			${WRKDIST}/src
@


1.34
log
@update vim/snapshot to 6.0ax.  The final 6.0 is expected in the next few days.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/09/16 21:55:01 lebel Exp $
d9 1
a9 1
NEED_VERSION=	1.422
d28 1
a28 2
LIB_DEPENDS=	iconv.2::converters/libiconv

@


1.33
log
@update vim/snapshot to 6.0aw
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2001/09/13 21:14:52 lebel Exp $
d5 1
a5 1
V=		aw
@


1.32
log
@update vim/snapshot to 6.0av
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/09/09 00:38:46 lebel Exp $
d5 1
a5 1
V=		av
@


1.31
log
@nuke fake flavour 'light'.  pointed out by heko@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2001/09/09 00:26:19 lebel Exp $
d5 1
a5 1
V=		au
@


1.30
log
@heko@@ suggested that we could also build vim with maximum bloatage, so
I'm adding a huge FLAVOR to pass --with-features=huge to configure.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2001/09/08 22:40:20 lebel Exp $
a36 4

.if ${FLAVOR:L} == "light"
FLAVOR=no_x11
.endif
@


1.29
log
@Add perl and python embedded support.

By default, they are not enabled.  To get a vim that is able to run natively
perl and/or python code, you must specify the appropriate FLAVOR tags.

I have tested those quite throughfully, but it might need some more testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/09/03 14:00:12 lebel Exp $
d30 1
a30 1
FLAVORS=	gtk athena motif no_x11 perl python
d40 4
@


1.28
log
@update vim/snapshot to 6.0au
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/08/27 21:50:47 lebel Exp $
d30 1
a30 1
FLAVORS=	gtk athena motif no_x11
d37 1
d41 15
a55 1
.if ${FLAVOR:L} == "no_x11"
d57 3
a59 2
.elif ${FLAVOR:L} == "motif" || ${FLAVOR:L} == "lesstif"
CONFIGURE_ARGS+=--enable-gui="motif"
d62 5
a66 3
.elif ${FLAVOR:L} == "athena"
CONFIGURE_ARGS+=--enable-gui="athena"
.elif ${FLAVOR:L} == "gtk"
d68 1
a68 1
CONFIGURE_ARGS+=--enable-gui="gtk" 
@


1.27
log
@update vim/snapshot to 6.0at
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/08/20 02:09:36 lebel Exp $
d5 1
a5 1
V=		at
@


1.26
log
@update vim/snapshot to 6.0as
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/08/13 14:14:22 lebel Exp $
d5 1
a5 1
V=		as
@


1.25
log
@update vim/snapshot to 6.0ar
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/08/06 02:33:24 lebel Exp $
d5 1
a5 1
V=		ar
@


1.24
log
@update vim/snapshot to 6.0aq:

vim 6.0 is now in its BETA phase.  If you need to know all the good
reasons to move to version 6.0, please go read the following webpage:

http://vim.sourceforge.net/whyvim.php

Eventually, the message in pkg/INSTALL will be removed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/07/23 14:09:29 lebel Exp $
d5 1
a5 1
V=		aq
@


1.23
log
@update vim/snapshot to 6.0ao
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/07/19 15:33:46 lebel Exp $
d5 1
a5 1
V=		ao
@


1.22
log
@Since we enable multibyte by default, it is a good idea to depend on
converters/libiconv, so it works as expected.  pvalchev@@ put me on the
right track to find this one.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/07/18 10:59:01 naddy Exp $
d5 1
a5 1
V=		an
@


1.21
log
@- Make use of new bsd.port.mk feature and replace error reporting through
  .BEGIN with ERRORS.
- Sync NEED_VERSION accordingly.
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/07/13 19:28:26 lebel Exp $
d27 2
@


1.20
log
@update vim/snapshot to 6.0an
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/07/03 16:10:14 lebel Exp $
d9 1
a9 1
NEED_VERSION=	1.402
d50 1
a50 3
.BEGIN:
	@@echo "Conflicting flavor: ${FLAVOR}"
	@@exit 1
@


1.19
log
@update vim/snapshot to 6.0am
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/06/25 01:27:24 lebel Exp $
d5 1
a5 1
V=		am
@


1.18
log
@update vim/snapshot to 6.0al
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/06/18 20:23:21 lebel Exp $
d5 1
a5 1
V=		al
d17 1
a17 1
DISTFILES=	${DISTNAME}-src.tar.bz2 ${DISTNAME}-rt.tar.bz2
@


1.17
log
@update vim/snapshot to 6.0ak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/06/11 01:02:52 lebel Exp $
d5 1
a5 1
V=		ak
d17 1
a17 2
DISTFILES=	${DISTNAME}-src.tar.bz2 ${DISTNAME}-rt.tar.bz2 \
		${DISTNAME}-xcmdsrv.tar.gz
@


1.16
log
@update vim/snapshot to 6.0aj:
- add --enable-multibyte to CONFIGURE_ARGS to add multibyte support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/06/04 14:52:47 lebel Exp $
d5 1
a5 1
V=		aj
d17 2
a18 1
DISTFILES=	${DISTNAME}-src.tar.bz2 ${DISTNAME}-rt.tar.bz2
@


1.15
log
@update vim/snapshot to 6.0ai.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/06/03 16:26:46 lebel Exp $
d5 1
a5 1
V=		ai
d32 1
a32 1
CONFIGURE_ARGS+=--with-tlib="curses"
@


1.14
log
@in fact, in this case, we don't really need EXTRACT_SUFX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2001/06/03 16:14:34 lebel Exp $
d5 1
a5 1
V=		ah
d32 1
a32 1
CONFIGURE_ARGS+=--with-tliba="curses"
@


1.13
log
@use of USE_BZIP2 is deprecated, so we use EXTRACT_SUFX instead.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/05/28 18:32:16 lebel Exp $
d9 1
a9 1
NEED_VERSION=	1.400
a17 1
EXTRACT_SUFX=	.tar.bz2
@


1.12
log
@update vim/snapshot to 6.0ah
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/05/22 18:26:52 lebel Exp $
d18 1
a18 2

USE_BZIP2=	Yes
@


1.11
log
@update vim/snapshot to 6.0ag.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/05/17 00:27:24 lebel Exp $
d5 1
a5 1
V=		ag
@


1.10
log
@- use the bz2 distfiles instead of the gz ones. naddy@@ reminded me about them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/05/15 20:31:49 lebel Exp $
d5 1
a5 1
V=		af
@


1.9
log
@update vim to 6.0af.
- vim 6.0 is now DESTDIR clean, so remove the patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/05/07 13:38:35 lebel Exp $
d17 3
a19 1
DISTFILES=	${DISTNAME}-src.tar.gz ${DISTNAME}-rt.tar.gz
@


1.8
log
@update to vim 6.0ae.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/05/06 00:18:23 lebel Exp $
d5 1
a5 1
V=		ae
d31 1
a31 1
CONFIGURE_STYLE= gnu dest
@


1.7
log
@update to vim 6.0ad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/04/18 15:01:11 espie Exp $
d5 1
a5 1
V=		ad
@


1.6
log
@Fix USE_MOTIF, especially for those ports with `motif' flavors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/04/17 13:20:25 lebel Exp $
d5 1
a5 1
V=		ab
@


1.5
log
@update vim/snapshot to 6.0ab.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/04/10 13:41:14 lebel Exp $
d9 1
a9 1
NEED_VERSION=	1.364
d40 1
a40 1
.elif ${FLAVOR:L} == "motif"
d43 1
a43 1
USE_MOTIF=Yes
@


1.4
log
@change my email address.  bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/04/09 18:19:44 lebel Exp $
d5 1
a5 1
V=		aa
@


1.3
log
@update to 6.0aa
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/04/08 22:26:44 naddy Exp $
d9 1
a9 1
NEED_VERSION=	1.340
d21 1
a21 1
MAINTAINER=	David Lebel <lebel@@lebel.org>
@


1.2
log
@MASTER_SITES: ftp.oce.nl -> ftp.home.vim.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/04/02 16:02:02 espie Exp $
d5 1
a5 1
V=		z
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d13 1
a13 1
		ftp://ftp.oce.nl/pub/vim/unreleased/unix/  \
@


1.1.1.1
log
@add development version, from David Lebel.
@
text
@@
