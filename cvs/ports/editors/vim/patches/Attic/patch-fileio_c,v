head	1.3;
access;
symbols
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2001.03.26.04.04.50;	author jasoni;	state dead;
branches;
next	1.2;

1.2
date	2000.12.05.05.05.52;	author jasoni;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.15.07.57.47;	author jasoni;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to patch level 25
(takes care of patch-fileio_c)
@
text
@--- fileio.c.orig	Mon Dec  4 22:12:39 2000
+++ fileio.c	Mon Dec  4 22:14:01 2000
@@@@ -3027,6 +3027,7 @@@@ write_lnum_adjust(offset)
 vim_tempname(extra_char)
     int	    extra_char;	    /* character to use in the name instead of '?' */
 {
+    int itmp_fd;
 #ifdef WIN32
     char	szTempFile[_MAX_PATH+1];
     char	buf4[4];
@@@@ -3076,8 +3077,10 @@@@ vim_tempname(extra_char)
 	    STRCAT(itmp, TEMPNAME);
 	    if ((p = vim_strchr(itmp, '?')) != NULL)
 		*p = extra_char;
-	    if (mktemp((char *)itmp) == NULL)
-		continue;
+	    if ((itmp_fd = mkstemp((char *)itmp)) == -1) 
+        	continue;
+	    else 
+		close(itmp_fd);
 	    return vim_strsave(itmp);
 	}
     }
@


1.2
log
@Update to 5.7.19
(many minor bug fixes)
@
text
@@


1.1
log
@- Update to patch level .08.
- Use better patchfile names.
@
text
@d1 3
a3 3
--- fileio.c.orig	Wed Dec 15 06:28:21 1999
+++ fileio.c	Sat Jan 29 01:28:22 2000
@@@@ -2990,6 +2990,7 @@@@
d7 1
a7 1
+	int itmp_fd;
d11 1
a11 1
@@@@ -3039,8 +3040,10 @@@@
d17 4
a20 4
+		if ((itmp_fd = mkstemp((char *)itmp)) == -1) 
+	        	continue;
+		else 
+			close(itmp_fd);
@

