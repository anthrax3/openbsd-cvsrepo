head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.11.23.16.40.33;	author sthen;	state Exp;
branches;
next	;
commitid	QoSbMpi6WqoK6uhJ;


desc
@@


1.1
log
@update to vim-8.0.0095, including fix for CVE-2016-1248 (arbitrary shell
commands are executed if a file is opened with a malicious modeline)

http://seclists.org/oss-sec/2016/q4/506
http://seclists.org/oss-sec/2016/q4/att-506/vim_CVE-2016-1248.patch
@
text
@$OpenBSD$
--- src/configure.ac.orig	Mon Nov 21 19:55:58 2016
+++ src/configure.ac	Wed Nov 23 16:24:16 2016
@@@@ -564,10 +564,10 @@@@ if test "$enable_luainterp" = "yes" -o "$enable_luaint
 	AC_MSG_RESULT(yes)
       else
 	AC_MSG_RESULT(no)
-	AC_MSG_CHECKING(if lua.h can be found in $vi_cv_path_lua_pfx/include/lua$vi_cv_version_lua)
-	if test -f "$vi_cv_path_lua_pfx/include/lua$vi_cv_version_lua/lua.h"; then
+	AC_MSG_CHECKING(if lua.h can be found in $vi_cv_path_lua_pfx/include/lua-$vi_cv_version_lua)
+	if test -f "$vi_cv_path_lua_pfx/include/lua-$vi_cv_version_lua/lua.h"; then
 	  AC_MSG_RESULT(yes)
-	  LUA_INC=/lua$vi_cv_version_lua
+	  LUA_INC=/lua-$vi_cv_version_lua
 	else
 	  AC_MSG_RESULT(no)
 	  vi_cv_path_lua_pfx=
@@@@ -592,9 +592,9 @@@@ if test "$enable_luainterp" = "yes" -o "$enable_luaint
     else
       if test "X$LUA_INC" != "X"; then
 	dnl Test alternate location using version
-	LUA_LIBS="-L${vi_cv_path_lua_pfx}/lib -llua$vi_cv_version_lua"
+	LUA_LIBS="-L${vi_cv_path_lua_pfx}/lib -llua$vi_cv_version_lua -lm"
       else
-	LUA_LIBS="-L${vi_cv_path_lua_pfx}/lib -llua"
+	LUA_LIBS="-L${vi_cv_path_lua_pfx}/lib -llua -lm"
       fi
     fi
     if test "$enable_luainterp" = "dynamic"; then
@
