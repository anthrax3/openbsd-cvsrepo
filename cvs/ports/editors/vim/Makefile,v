head	1.159;
access;
symbols
	OPENBSD_6_0:1.149.0.2
	OPENBSD_6_0_BASE:1.149
	OPENBSD_5_9:1.144.0.2
	OPENBSD_5_9_BASE:1.144
	OPENBSD_5_8:1.143.0.4
	OPENBSD_5_8_BASE:1.143
	OPENBSD_5_7:1.141.0.2
	OPENBSD_5_7_BASE:1.141
	OPENBSD_5_6:1.137.0.2
	OPENBSD_5_6_BASE:1.137
	OPENBSD_5_5:1.135.0.2
	OPENBSD_5_5_BASE:1.135
	OPENBSD_5_4:1.129.0.2
	OPENBSD_5_4_BASE:1.129
	OPENBSD_5_3:1.123.0.6
	OPENBSD_5_3_BASE:1.123
	OPENBSD_5_2:1.123.0.4
	OPENBSD_5_2_BASE:1.123
	OPENBSD_5_1_BASE:1.123
	OPENBSD_5_1:1.123.0.2
	OPENBSD_5_0:1.121.0.2
	OPENBSD_5_0_BASE:1.121
	OPENBSD_4_9:1.118.0.2
	OPENBSD_4_9_BASE:1.118
	OPENBSD_4_8:1.108.0.2
	OPENBSD_4_8_BASE:1.108
	OPENBSD_4_7:1.103.0.2
	OPENBSD_4_7_BASE:1.103
	OPENBSD_4_6:1.99.0.2
	OPENBSD_4_6_BASE:1.99
	OPENBSD_4_5:1.96.0.2
	OPENBSD_4_5_BASE:1.96
	OPENBSD_4_4:1.94.0.2
	OPENBSD_4_4_BASE:1.94
	OPENBSD_4_3:1.90.0.2
	OPENBSD_4_3_BASE:1.90
	OPENBSD_4_2:1.83.0.2
	OPENBSD_4_2_BASE:1.83
	OPENBSD_4_1:1.80.0.2
	OPENBSD_4_1_BASE:1.80
	OPENBSD_4_0:1.70.0.2
	OPENBSD_4_0_BASE:1.70
	OPENBSD_3_9:1.62.0.2
	OPENBSD_3_9_BASE:1.62
	OPENBSD_3_8:1.56.0.2
	OPENBSD_3_8_BASE:1.56
	OPENBSD_3_7:1.54.0.2
	OPENBSD_3_7_BASE:1.54
	OPENBSD_3_6:1.47.0.2
	OPENBSD_3_6_BASE:1.47
	OPENBSD_3_5:1.45.0.2
	OPENBSD_3_5_BASE:1.45
	OPENBSD_3_4:1.44.0.2
	OPENBSD_3_4_BASE:1.44
	OPENBSD_3_3:1.43.0.6
	OPENBSD_3_3_BASE:1.43
	OPENBSD_3_2:1.43.0.4
	OPENBSD_3_2_BASE:1.43
	OPENBSD_3_1:1.43.0.2
	OPENBSD_3_1_BASE:1.43
	OPENBSD_3_0:1.40.0.2
	OPENBSD_3_0_BASE:1.40
	OPENBSD_2_9_TRACKING_SWITCH:1.39
	OPENBSD_2_9:1.39.0.2
	OPENBSD_2_9_BASE:1.39
	OPENBSD_2_8:1.32.0.2
	OPENBSD_2_8_BASE:1.32
	OPENBSD_2_7:1.27.0.2
	OPENBSD_2_7_BASE:1.27
	OPENBSD_2_6:1.11.0.2
	OPENBSD_2_6_BASE:1.11
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3;
locks; strict;
comment	@# @;


1.159
date	2017.02.28.23.25.25;	author sthen;	state Exp;
branches;
next	1.158;
commitid	q1XFXylhAKbuajSC;

1.158
date	2017.01.31.10.17.59;	author sthen;	state Exp;
branches;
next	1.157;
commitid	3MsZL0U2MjYJkmeS;

1.157
date	2017.01.03.19.22.09;	author landry;	state Exp;
branches;
next	1.156;
commitid	qFRxNLwpuv9SvURP;

1.156
date	2016.12.01.13.24.52;	author sthen;	state Exp;
branches;
next	1.155;
commitid	8n0m8lfXLxhwP38N;

1.155
date	2016.11.23.16.40.33;	author sthen;	state Exp;
branches;
next	1.154;
commitid	QoSbMpi6WqoK6uhJ;

1.154
date	2016.10.12.09.31.16;	author sthen;	state Exp;
branches;
next	1.153;
commitid	Lb2yG1WgBylVZxTW;

1.153
date	2016.10.12.09.00.14;	author sthen;	state Exp;
branches;
next	1.152;
commitid	UrfN1R23Hz0VM8Ht;

1.152
date	2016.09.26.10.48.39;	author sthen;	state Exp;
branches;
next	1.151;
commitid	rYFHpHkvUMCO7nv6;

1.151
date	2016.09.13.22.38.14;	author rpe;	state Exp;
branches;
next	1.150;
commitid	0g82sYOZayp4iBgH;

1.150
date	2016.08.10.15.54.29;	author sthen;	state Exp;
branches;
next	1.149;
commitid	r5DtfvQLVXRYIPmG;

1.149
date	2016.05.29.12.26.23;	author natano;	state Exp;
branches
	1.149.2.1;
next	1.148;
commitid	ICeehsbTdlPJ3rw6;

1.148
date	2016.05.05.19.52.28;	author naddy;	state Exp;
branches;
next	1.147;
commitid	KG9Yn10TjXY3Xr6m;

1.147
date	2016.04.26.16.37.47;	author naddy;	state Exp;
branches;
next	1.146;
commitid	KLHX371Pf8geREWZ;

1.146
date	2016.03.09.18.20.02;	author jasper;	state Exp;
branches;
next	1.145;
commitid	VxzuAbDsmRO4AfFt;

1.145
date	2016.03.02.11.54.28;	author sthen;	state Exp;
branches;
next	1.144;
commitid	2eg2YUX0GUkW6UeC;

1.144
date	2015.10.30.13.00.37;	author sthen;	state Exp;
branches;
next	1.143;
commitid	jCHLUPSotwX86XNa;

1.143
date	2015.07.08.16.36.41;	author sthen;	state Exp;
branches;
next	1.142;
commitid	dYP2AUE0olKvOCnF;

1.142
date	2015.04.10.12.25.46;	author sthen;	state Exp;
branches;
next	1.141;
commitid	OpFonxHWnqpohYnM;

1.141
date	2015.02.16.22.57.08;	author naddy;	state Exp;
branches;
next	1.140;
commitid	0dx3c9ckf7dE4tx1;

1.140
date	2014.10.14.13.52.19;	author sthen;	state Exp;
branches;
next	1.139;
commitid	Nml4MOBNNiehi9SF;

1.139
date	2014.09.07.19.24.48;	author chrisz;	state Exp;
branches;
next	1.138;
commitid	76qc2yQNqPCYR3dN;

1.138
date	2014.08.10.09.58.05;	author espie;	state Exp;
branches;
next	1.137;
commitid	jyyOLTDxRdjpw44n;

1.137
date	2014.07.10.23.54.15;	author jturner;	state Exp;
branches;
next	1.136;
commitid	s5wjp1mP2pwtamLn;

1.136
date	2014.06.03.11.33.07;	author rpointel;	state Exp;
branches;
next	1.135;
commitid	C1twaavyzCDel6gi;

1.135
date	2014.02.02.01.44.31;	author william;	state Exp;
branches;
next	1.134;

1.134
date	2014.01.08.10.23.12;	author sthen;	state Exp;
branches;
next	1.133;

1.133
date	2013.12.16.10.19.33;	author edd;	state Exp;
branches;
next	1.132;

1.132
date	2013.10.14.22.13.21;	author juanfra;	state Exp;
branches;
next	1.131;

1.131
date	2013.10.04.08.45.21;	author sthen;	state Exp;
branches;
next	1.130;

1.130
date	2013.10.04.08.44.03;	author sthen;	state Exp;
branches;
next	1.129;

1.129
date	2013.03.26.08.12.35;	author sthen;	state Exp;
branches;
next	1.128;

1.128
date	2013.03.23.01.42.03;	author sthen;	state Exp;
branches;
next	1.127;

1.127
date	2013.03.22.00.12.59;	author sthen;	state Exp;
branches;
next	1.126;

1.126
date	2013.03.20.19.13.50;	author jeremy;	state Exp;
branches;
next	1.125;

1.125
date	2013.03.16.22.56.44;	author sthen;	state Exp;
branches;
next	1.124;

1.124
date	2013.03.11.11.02.50;	author espie;	state Exp;
branches;
next	1.123;

1.123
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.122;

1.122
date	2011.09.16.09.48.09;	author espie;	state Exp;
branches;
next	1.121;

1.121
date	2011.06.15.19.43.10;	author sthen;	state Exp;
branches;
next	1.120;

1.120
date	2011.04.10.18.01.13;	author jasper;	state Exp;
branches;
next	1.119;

1.119
date	2011.04.07.20.50.55;	author ckuethe;	state Exp;
branches;
next	1.118;

1.118
date	2010.11.15.23.22.07;	author espie;	state Exp;
branches;
next	1.117;

1.117
date	2010.11.07.18.50.57;	author espie;	state Exp;
branches;
next	1.116;

1.116
date	2010.10.26.21.42.14;	author jeremy;	state Exp;
branches;
next	1.115;

1.115
date	2010.10.24.21.16.25;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2010.10.24.15.53.55;	author sthen;	state Exp;
branches;
next	1.113;

1.113
date	2010.10.18.18.00.16;	author espie;	state Exp;
branches;
next	1.112;

1.112
date	2010.10.11.08.12.44;	author jasper;	state Exp;
branches;
next	1.111;

1.111
date	2010.09.30.07.21.18;	author ajacoutot;	state Exp;
branches;
next	1.110;

1.110
date	2010.09.09.22.29.28;	author ckuethe;	state Exp;
branches;
next	1.109;

1.109
date	2010.08.31.19.38.38;	author sthen;	state Exp;
branches;
next	1.108;

1.108
date	2010.07.10.20.30.37;	author naddy;	state Exp;
branches;
next	1.107;

1.107
date	2010.06.27.20.49.49;	author ckuethe;	state Exp;
branches;
next	1.106;

1.106
date	2010.05.28.00.52.19;	author espie;	state Exp;
branches;
next	1.105;

1.105
date	2010.05.26.22.15.42;	author stsp;	state Exp;
branches;
next	1.104;

1.104
date	2010.05.12.02.44.28;	author ckuethe;	state Exp;
branches;
next	1.103;

1.103
date	2009.10.15.15.32.17;	author ckuethe;	state Exp;
branches;
next	1.102;

1.102
date	2009.08.11.04.30.40;	author msf;	state Exp;
branches;
next	1.101;

1.101
date	2009.08.10.06.31.09;	author kili;	state Exp;
branches;
next	1.100;

1.100
date	2009.07.19.20.22.01;	author ckuethe;	state Exp;
branches;
next	1.99;

1.99
date	2009.06.17.01.53.32;	author sthen;	state Exp;
branches;
next	1.98;

1.98
date	2009.06.16.11.30.48;	author sthen;	state Exp;
branches;
next	1.97;

1.97
date	2009.05.31.18.59.51;	author ckuethe;	state Exp;
branches;
next	1.96;

1.96
date	2009.01.10.15.50.34;	author ckuethe;	state Exp;
branches;
next	1.95;

1.95
date	2008.10.17.14.56.53;	author ckuethe;	state Exp;
branches;
next	1.94;

1.94
date	2008.06.20.05.24.39;	author ckuethe;	state Exp;
branches;
next	1.93;

1.93
date	2008.06.15.00.06.52;	author sthen;	state Exp;
branches;
next	1.92;

1.92
date	2008.05.16.20.19.12;	author espie;	state Exp;
branches;
next	1.91;

1.91
date	2008.03.20.06.02.08;	author ckuethe;	state Exp;
branches;
next	1.90;

1.90
date	2008.02.17.18.10.04;	author espie;	state Exp;
branches;
next	1.89;

1.89
date	2008.02.13.16.28.18;	author ckuethe;	state Exp;
branches;
next	1.88;

1.88
date	2008.01.01.17.02.26;	author ckuethe;	state Exp;
branches;
next	1.87;

1.87
date	2007.11.07.19.48.58;	author ckuethe;	state Exp;
branches;
next	1.86;

1.86
date	2007.10.24.18.05.10;	author steven;	state Exp;
branches;
next	1.85;

1.85
date	2007.10.21.18.41.20;	author ckuethe;	state Exp;
branches;
next	1.84;

1.84
date	2007.08.29.18.19.13;	author jasper;	state Exp;
branches;
next	1.83;

1.83
date	2007.07.24.14.12.29;	author ckuethe;	state Exp;
branches;
next	1.82;

1.82
date	2007.05.18.15.18.59;	author ckuethe;	state Exp;
branches;
next	1.81;

1.81
date	2007.03.16.17.54.38;	author ckuethe;	state Exp;
branches;
next	1.80;

1.80
date	2007.01.09.19.59.11;	author ckuethe;	state Exp;
branches
	1.80.2.1;
next	1.79;

1.79
date	2006.12.29.01.00.13;	author steven;	state Exp;
branches;
next	1.78;

1.78
date	2006.12.25.19.08.08;	author ckuethe;	state Exp;
branches;
next	1.77;

1.77
date	2006.12.16.12.22.33;	author espie;	state Exp;
branches;
next	1.76;

1.76
date	2006.12.14.09.07.56;	author steven;	state Exp;
branches;
next	1.75;

1.75
date	2006.11.21.11.25.03;	author espie;	state Exp;
branches;
next	1.74;

1.74
date	2006.11.11.21.04.27;	author steven;	state Exp;
branches;
next	1.73;

1.73
date	2006.10.26.16.34.26;	author ckuethe;	state Exp;
branches;
next	1.72;

1.72
date	2006.09.22.20.39.57;	author ckuethe;	state Exp;
branches;
next	1.71;

1.71
date	2006.09.18.11.50.40;	author espie;	state Exp;
branches;
next	1.70;

1.70
date	2006.08.03.19.33.39;	author ckuethe;	state Exp;
branches
	1.70.2.1;
next	1.69;

1.69
date	2006.08.01.23.39.08;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2006.07.09.17.44.16;	author ckuethe;	state Exp;
branches;
next	1.67;

1.67
date	2006.06.13.13.22.36;	author bernd;	state Exp;
branches;
next	1.66;

1.66
date	2006.05.24.18.37.35;	author sturm;	state Exp;
branches;
next	1.65;

1.65
date	2006.05.21.20.45.34;	author marco;	state Exp;
branches;
next	1.64;

1.64
date	2006.04.03.20.23.19;	author sturm;	state Exp;
branches;
next	1.63;

1.63
date	2006.03.11.13.53.59;	author sturm;	state Exp;
branches;
next	1.62;

1.62
date	2006.01.18.04.41.12;	author steven;	state Exp;
branches;
next	1.61;

1.61
date	2006.01.17.19.43.10;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2006.01.16.12.23.52;	author steven;	state Exp;
branches;
next	1.59;

1.59
date	2006.01.08.12.22.17;	author alek;	state Exp;
branches;
next	1.58;

1.58
date	2005.12.04.14.39.13;	author alek;	state Exp;
branches;
next	1.57;

1.57
date	2005.11.16.12.18.15;	author wilfried;	state Exp;
branches;
next	1.56;

1.56
date	2005.07.27.18.37.26;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2005.07.24.11.28.57;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2005.02.12.23.00.50;	author naddy;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2004.12.08.04.29.55;	author marcm;	state Exp;
branches;
next	1.52;

1.52
date	2004.11.24.11.40.00;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2004.11.24.11.08.03;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2004.11.03.20.42.07;	author robert;	state Exp;
branches;
next	1.49;

1.49
date	2004.09.22.00.38.18;	author jolan;	state Exp;
branches;
next	1.48;

1.48
date	2004.09.15.00.06.59;	author pvalchev;	state Exp;
branches;
next	1.47;

1.47
date	2004.08.05.11.56.30;	author espie;	state Exp;
branches
	1.47.2.1;
next	1.46;

1.46
date	2004.07.12.19.32.59;	author lebel;	state Exp;
branches;
next	1.45;

1.45
date	2004.02.04.15.12.23;	author lebel;	state Exp;
branches;
next	1.44;

1.44
date	2003.04.25.15.47.26;	author lebel;	state Exp;
branches;
next	1.43;

1.43
date	2002.03.24.20.27.58;	author lebel;	state Exp;
branches;
next	1.42;

1.42
date	2002.02.24.22.37.04;	author lebel;	state Exp;
branches;
next	1.41;

1.41
date	2001.12.09.17.27.48;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2001.09.28.12.23.58;	author naddy;	state Exp;
branches;
next	1.39;

1.39
date	2001.04.02.16.05.46;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2001.04.02.15.49.43;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2001.03.29.16.54.04;	author jasoni;	state Exp;
branches;
next	1.36;

1.36
date	2001.03.26.04.04.49;	author jasoni;	state Exp;
branches;
next	1.35;

1.35
date	2001.03.18.22.38.12;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2001.01.23.06.34.50;	author jasoni;	state Exp;
branches;
next	1.33;

1.33
date	2000.12.05.05.05.50;	author jasoni;	state Exp;
branches;
next	1.32;

1.32
date	2000.10.22.15.41.53;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2000.10.22.14.03.10;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2000.08.15.07.57.46;	author jasoni;	state Exp;
branches;
next	1.29;

1.29
date	2000.07.07.04.28.32;	author jasoni;	state Exp;
branches;
next	1.28;

1.28
date	2000.06.20.20.26.45;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2000.05.04.13.56.04;	author jasoni;	state Exp;
branches
	1.27.2.1;
next	1.26;

1.26
date	2000.04.10.18.33.53;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2000.04.10.16.39.14;	author jasoni;	state Exp;
branches;
next	1.24;

1.24
date	2000.03.24.23.28.07;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2000.03.05.18.30.26;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2000.03.04.17.58.51;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2000.02.22.22.35.13;	author jasoni;	state Exp;
branches;
next	1.20;

1.20
date	2000.02.18.23.45.38;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2000.02.10.15.39.13;	author jasoni;	state Exp;
branches;
next	1.18;

1.18
date	2000.02.01.21.43.50;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.02.01.21.31.30;	author jasoni;	state Exp;
branches;
next	1.16;

1.16
date	2000.01.30.06.42.24;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.01.17.17.03.15;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	99.12.26.00.55.27;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	99.12.10.16.33.42;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	99.12.09.19.59.24;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.09.30.15.28.45;	author jasoni;	state Exp;
branches;
next	1.10;

1.10
date	99.09.28.15.29.53;	author jasoni;	state Exp;
branches;
next	1.9;

1.9
date	99.09.27.06.59.03;	author jasoni;	state Exp;
branches;
next	1.8;

1.8
date	99.09.01.16.56.35;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.07.28.06.01.33;	author jasoni;	state Exp;
branches;
next	1.6;

1.6
date	99.06.22.19.32.07;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	99.04.01.06.20.11;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	98.11.20.08.40.48;	author jasoni;	state Exp;
branches;
next	1.3;

1.3
date	98.10.18.05.02.06;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.10.08.23.57.13;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.06.09.07.48.48;	author downsj;	state Exp;
branches;
next	;

1.27.2.1
date	2000.09.15.04.50.18;	author marc;	state Exp;
branches;
next	;

1.47.2.1
date	2005.07.29.19.49.59;	author sturm;	state Exp;
branches;
next	1.47.2.2;

1.47.2.2
date	2005.08.31.19.46.33;	author sturm;	state Exp;
branches;
next	;

1.54.2.1
date	2005.07.29.19.57.11;	author sturm;	state Exp;
branches;
next	1.54.2.2;

1.54.2.2
date	2005.08.31.19.51.42;	author sturm;	state Exp;
branches;
next	;

1.70.2.1
date	2007.09.01.17.44.18;	author ajacoutot;	state Exp;
branches;
next	;

1.80.2.1
date	2007.09.01.17.44.46;	author ajacoutot;	state Exp;
branches;
next	;

1.149.2.1
date	2016.11.23.16.44.44;	author sthen;	state Exp;
branches;
next	;
commitid	onxF30BQT91StsiY;


desc
@@


1.159
log
@update to vim-8.0.0388
@
text
@# $OpenBSD: Makefile,v 1.158 2017/01/31 10:17:59 sthen Exp $

COMMENT-main=	vi clone, many additional features
COMMENT-lang=	vi clone, NLS subpackage

# if updating major version, sync editors/vim-spell
V=		8.0.0388
GH_ACCOUNT=	vim
GH_PROJECT=	vim
GH_TAGNAME=	v$V

PKGNAME-main=	vim-$V
PKGNAME-lang=	vim-lang-$V
P=		vim${V:R:S/.//}
CATEGORIES=	editors

HOMEPAGE=	http://www.vim.org/

# donation-ware
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB +=	c curses

MULTI_PACKAGES=	-main -lang

FULLPKGNAME-lang= vim-lang-$V
FULLPKGPATH-lang= ${PKGPATH},-lang

FLAVORS=	huge gtk2 athena motif no_x11 lua perl python python3 ruby
FLAVOR?=	gtk2

.include <bsd.port.arch.mk>
.if ${FLAVOR:Mno_x11}
BUILD_PACKAGES := ${BUILD_PACKAGES:N-lang}
.endif

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS+= --with-tlib="curses" \
		--enable-multibyte \
		--enable-cscope

AUTOCONF_VERSION= 2.69
BUILD_DEPENDS= ${MODGNU_AUTOCONF_DEPENDS}

.if ${FLAVOR:Mhuge}
CONFIGURE_ARGS+= --with-features=huge
.endif

.if ${FLAVOR:Mlua}
MODULES+=	lang/lua
MODLUA_VERSION=	5.1
CONFIGURE_ENV+=	vi_cv_path_plain_lua=${MODLUA_BIN}
CONFIGURE_ARGS+= --enable-luainterp --with-lua-prefix=${LOCALBASE}
LIB_DEPENDS+=	${MODLUA_LIB_DEPENDS}
WANTLIB+=	m ${MODLUA_WANTLIB}
.endif

.if ${FLAVOR:Mperl}
CONFIGURE_ARGS+= --enable-perlinterp
WANTLIB+=	m perl util
.endif

.if ${FLAVOR:Mpython}
MODULES+=	lang/python
CONFIGURE_ENV+=	vi_cv_path_python=${MODPY_BIN}
CONFIGURE_ARGS+= --enable-pythoninterp=yes --enable-python3interp=no \
	--with-python-config-dir=${MODPY_LIBDIR}/config
LIB_DEPENDS+=	${MODPY_LIB_DEPENDS}
WANTLIB+=	m ${MODPY_WANTLIB}
.endif

.if ${FLAVOR:Mpython3}
MODULES+=	lang/python
MODPY_MAJOR_VERSION = 3
CONFIGURE_ENV+=	vi_cv_path_python3=${MODPY_BIN}
CONFIGURE_ARGS+= --enable-python3interp=yes --enable-pythoninterp=no \
	--with-python3-config-dir=${MODPY_LIBDIR}/config-${MODPY_VERSION}m
LIB_DEPENDS+=	${MODPY_LIB_DEPENDS}
WANTLIB+=	m ${MODPY_WANTLIB}
.endif

# Some parts of vim (like python autocompletion) require a version of vim
# compiled with "+python" or "+python3". If python2 and python3 are enabled
# in configure, vim is compiled with "+python/dyn" and "+python3/dyn" and that
# breaks some plugins.
.if ${FLAVOR:Mpython} && ${FLAVOR:Mpython3}
ERRORS=		"Fatal: You only can select one python flavor"
.endif

.if ${FLAVOR:Mruby}
MODULES+=	lang/ruby
MODRUBY_REV=	1.8
CONFIGURE_ARGS+= --enable-rubyinterp --with-ruby-command=${RUBY}
LIB_DEPENDS+=	${MODRUBY_LIB_DEPENDS}
WANTLIB+=	m ${MODRUBY_WANTLIB}
.endif

.if ${FLAVOR:Mno_x11} && \
	!${FLAVOR:Mmotif} && !${FLAVOR:Mathena} && !${FLAVOR:Mgtk2}
CONFIGURE_ARGS+= --disable-gui \
		--without-x
WANTLIB+=	m
.elif ${FLAVOR:Mmotif} && \
	!${FLAVOR:Mno_x11} && !${FLAVOR:Mathena} && !${FLAVOR:Mgtk2}
CONFIGURE_ARGS+= --enable-gui="motif" \
		--enable-fontset \
		--enable-xim \
		--with-x
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
LIB_DEPENDS+=	x11/motif
WANTLIB +=	m ICE SM X11 Xmu Xpm Xt Xm
MAKE_ENV+=MOTIFLIB='-L${LOCALBASE}/lib -lXm'
.elif ${FLAVOR:Mathena} && \
	!${FLAVOR:Mno_x11} && !${FLAVOR:Mmotif} && !${FLAVOR:Mgtk2}
CONFIGURE_ARGS+= --enable-gui="athena" \
		--enable-fontset \
		--enable-xim \
		--with-x
WANTLIB +=	m ICE SM X11 Xaw Xmu Xpm Xt
.elif ${FLAVOR:Mgtk2} && \
		!${FLAVOR:Mmotif} && !${FLAVOR:Mno_x11} && !${FLAVOR:Mathena}
MAKE_FLAGS+=	'LDFLAGS=-pthread'
MAKE_FLAGS+=	'CFLAGS=-pthread'
LIB_DEPENDS+=	x11/gtk+2
CONFIGURE_ARGS+= --enable-gui="gtk2" \
		--disable-gtk-check \
		--enable-fontset \
		--enable-gtk2-check \
		--enable-xim \
		--with-x
WANTLIB += ICE SM X11 Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xpm Xrandr Xrender Xt atk-1.0 cairo
WANTLIB += fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gobject-2.0 gtk-x11-2.0 m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pthread z
.else
ERRORS=		"Fatal: You must select one GUI interface: no_x11, gtk2, athena or motif"
.endif

RUN_DEPENDS-lang=	editors/vim,-main
PKG_ARCH-lang=		*
LIB_DEPENDS-lang=
WANTLIB-lang=
MODULES+=		devel/gettext

WRKSRC=		${WRKDIST}/src
SUBST_VARS=	P

# CONFIGURE_STYLE=autoconf doesn't work
post-patch:
	cd ${WRKSRC}; AUTOCONF_VERSION=${AUTOCONF_VERSION} autoconf

post-configure:
	touch ${WRKBUILD}/auto/config.mk

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/vim/vimfiles/{doc,syntax}
	${INSTALL_DATA} ${FILESDIR}/openbsd.vim \
		${PREFIX}/share/vim/vimfiles/syntax/

.if ! ${FLAVOR:Mno_x11}
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${SUBST_DATA} ${WRKDIST}/runtime/gvim.desktop \
		${PREFIX}/share/applications/gvim.desktop
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	${INSTALL_DATA} ${WRKDIST}/runtime/vim48x48.png ${PREFIX}/share/pixmaps/vim.png

RUN_DEPENDS+= devel/desktop-file-utils
RUN_DEPENDS+= x11/gtk+3,-guic
.endif

.include <bsd.port.mk>
@


1.158
log
@update to vim-8.0.0273, based on an .0257 update diff from frantisek holop
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2017/01/03 19:22:09 landry Exp $
d7 1
a7 1
V=		8.0.0273
@


1.157
log
@bump ports depending on python3 in editors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2016/12/01 13:24:52 sthen Exp $
d7 1
a7 1
V=		8.0.0095
a15 1
REVISION-main=	0
@


1.156
log
@add a comment about vim-spell and major versions
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2016/11/23 16:40:33 sthen Exp $
d16 1
@


1.155
log
@update to vim-8.0.0095, including fix for CVE-2016-1248 (arbitrary shell
commands are executed if a file is opened with a malicious modeline)

http://seclists.org/oss-sec/2016/q4/506
http://seclists.org/oss-sec/2016/q4/att-506/vim_CVE-2016-1248.patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2016/10/12 09:31:16 sthen Exp $
d6 1
@


1.154
log
@update to vim-8.0.0027 and adjust WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2016/10/12 09:00:14 sthen Exp $
d6 1
a6 1
V=		8.0.0027
@


1.153
log
@use standard GH_foo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2016/09/26 10:48:39 sthen Exp $
d6 1
a6 1
V=		8.0.0004
d70 1
a70 1
WANTLIB+=	m pthread util ${MODPY_WANTLIB}
d80 1
a80 1
WANTLIB+=	m pthread util ${MODPY_WANTLIB}
@


1.152
log
@update to vim-8.0.0004, from frantisek holop
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2016/09/13 22:38:14 rpe Exp $
d7 4
a10 2
DISTNAME=	vim-$V
DISTFILES=	vim-$V{v$V}.tar.gz
a14 1
MASTER_SITES=	https://github.com/vim/vim/archive/
@


1.151
log
@Add the new 'noperm' mount option to the fstab syntax file.

OK sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2016/08/10 15:54:29 sthen Exp $
d6 1
a6 2
V=		7.4.2181
REVISION=	0
d169 1
@


1.150
log
@update to vim-7.4.2181, from frantisek holop, and I trimmed DESCR-lang a bit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2016/05/29 12:26:23 natano Exp $
d7 1
@


1.149
log
@Tech vim syntax highlighting about the wxallowed mount option.
idea and ok espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2016/05/05 19:52:28 naddy Exp $
d6 1
a6 1
V=		7.4.1467
a10 1
REVISION-main=	1
d159 1
a159 1
	    ${PREFIX}/share/vim/vimfiles/syntax/
d163 1
a163 1
	${SUBST_DATA} ${FILESDIR}/gvim.desktop \
@


1.149.2.1
log
@patch 6.0-stable vim for CVE-2016-1248
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2016/05/29 12:26:23 natano Exp $
d11 1
a11 1
REVISION-main=	2
@


1.148
log
@x11/openmotif -> x11/motif
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2016/04/26 16:37:47 naddy Exp $
d11 1
a11 1
REVISION-main=	0
@


1.147
log
@remove final instances of DEPBASE, long forgotten
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2016/03/09 18:20:02 jasper Exp $
d11 1
d111 1
a111 1
LIB_DEPENDS+=	x11/openmotif
@


1.146
log
@remove vax-specific patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2016/03/02 11:54:28 sthen Exp $
d36 2
a37 2
CONFIGURE_ENV=	CPPFLAGS="-I${DEPBASE}/include" \
		LDFLAGS="-L${DEPBASE}/lib"
@


1.145
log
@update to vim 7.4.1467
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2015/10/30 13:00:37 sthen Exp $
a15 5

# allow vim to build on vax?
.if (${MACHINE_ARCH} == "vax")
PATCH_LIST=	patch-* sup-vax-*
.endif
@


1.144
log
@update to vim 7.4.900
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2015/07/08 16:36:41 sthen Exp $
d6 1
a6 1
V=		7.4.900
d154 1
@


1.143
log
@update to vim-7.4.769, and remove a local patch which was disabling the
newer RE engine, it was previously causing big slowdowns when malloc.conf
'J' was in use, but this seems better now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2015/04/10 12:25:46 sthen Exp $
d6 6
a11 5
VERSION=	7.4.769
DISTNAME=	vim-${VERSION}
PKGNAME-main=	vim-${VERSION}
PKGNAME-lang=	vim-lang-${VERSION}
P=		vim${VERSION:R:S/.//}
d13 1
a13 5
# Upstream's normal distribution (http://ftp.vim.org/pub/vim/unix/) consists
# of a relatively old tar, plus hundreds of patches, many of which require
# gnu patch. Port is using a distribution produced by the hgtar target below.
MASTER_SITES=	http://spacehopper.org/mirrors/
EXTRACT_SUFX=	.tar.bz2
d29 1
a29 1
FULLPKGNAME-lang= vim-lang-${VERSION}
d47 1
a47 1
AUTOCONF_VERSION= 2.65
a173 12

# convenience targets
hg:
	mkdir -p ${FULLDISTDIR}/hg
	cd ${FULLDISTDIR}/hg; [ -d vim ] || hg clone \
	    https://vim.googlecode.com/hg/ vim
	cd ${FULLDISTDIR}/hg/vim; hg pull; hg update

tar:
	cd ${FULLDISTDIR}/hg/vim && F=${FULLDISTDIR}/vim-${VERSION:R}.`grep -A2 'Add new patch number' ${FULLDISTDIR}/hg/vim/src/version.c | tail -1 | sed 's/[ ,]//g'`${EXTRACT_SUFX}; hg archive $$F -X ".hg*" && ls -l $$F

hgtar: hg tar
@


1.142
log
@update to vim 7.4 692

- remove locally bundled pf.vim, defer to upstream's newer version, patch
from Lauri Tirkkonen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2015/02/16 22:57:08 naddy Exp $
d6 1
a6 1
VERSION=	7.4.692
@


1.141
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2014/10/14 13:52:19 sthen Exp $
d6 1
a6 1
VERSION=	7.4.475
d165 1
a165 1
	${INSTALL_DATA} ${FILESDIR}/pf.vim ${FILESDIR}/openbsd.vim \
@


1.140
log
@update to vim-7.4.475
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2014/09/07 19:24:48 chrisz Exp $
a29 1
USE_GROFF =	Yes
@


1.139
log
@Update to 7.4.430.
Changes:
* build -lang subpackage only for gui flavors so we can include
all documentation.
* install OpenBSD syntax files to share/vim/vimfiles, which is
version independent and in the runtimepath by default. This should
be used as target for vim plugin ports as it is version independent.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2014/08/10 09:58:05 espie Exp $
d6 1
a6 1
VERSION=	7.4.430
@


1.138
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2014/07/10 23:54:15 jturner Exp $
d6 1
a6 1
VERSION=	7.4.135
a9 1
REVISION-main=	2
d39 5
d165 1
d167 1
a167 1
	    ${PREFIX}/share/vim/${P}/syntax/
@


1.137
log
@Add new lua FLAVOR and switch to generating configure script with
autoconf.

Lua request from frantisek holop on ports@@, ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2014/06/03 11:33:07 rpointel Exp $
d166 1
a166 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -m ${SHAREMODE} -c \
		${FILESDIR}/gvim.desktop \
@


1.136
log
@changed python3 default version so bump revision.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2014/02/02 01:44:31 william Exp $
d10 1
a10 1
REVISION-main=	1
d37 1
a37 1
FLAVORS=	huge gtk2 athena motif no_x11 perl python python3 ruby
d47 3
d54 9
a153 2
# don't try to regenerate the configure script. Works around the fact that
# auto/configure.in is newer than auto/configure.
d155 1
a155 1
	touch ${WRKBUILD}/auto/configure
@


1.135
log
@Unbreak -ruby FLAVOR, probably broken for a long time:  specify the
path to the interpreter such that configure can find it again.

Newer ruby and FLAVORS that aren't built by default will be
revisited post-5.5.

ok jeremy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2014/01/08 10:23:12 sthen Exp $
d10 1
a10 1
REVISION-main=	0
@


1.134
log
@update to vim 7.4.135, and remove a patch to configure which is no
longer needed. ok aja@@ rpe@@ also tested by brett@@.

gsoares had a problem with no_x11 but I can't see why and can't
reproduce it, let me know if anyone else sees this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2013/12/16 10:19:33 edd Exp $
d10 1
d86 1
a86 2
CONFIGURE_ARGS+= --enable-rubyinterp
MAKE_ENV+=	RUBY="${RUBY}"
@


1.133
log
@Add a desktop file for vim.

From Fabian Raetz, OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2013/10/14 22:13:21 juanfra Exp $
d6 1
a6 1
VERSION=	7.4.45
a8 1
REVISION-main=	2
d153 1
a160 1

@


1.132
log
@Add a python3 flavor to vim.

"looks right" gsoares. ok sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2013/10/04 08:45:21 sthen Exp $
d9 1
a9 1
REVISION-main=	1
d154 11
@


1.131
log
@Disable vim's new NFA regexp engine for now, it interacts badly with
malloc flag 'J' (approx 10x slower in syntax highlighting).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2013/10/04 08:44:03 sthen Exp $
d9 1
a9 1
REVISION-main=	0
d37 1
a37 1
FLAVORS=	huge gtk2 athena motif no_x11 perl python ruby
d59 1
a59 1
CONFIGURE_ARGS+= --enable-pythoninterp \
d63 18
@


1.130
log
@update to vim 7.4.45 and move non-English tutor files to the -lang subpackage.
drop ckuethe as maintainer (mail bounces).
earlier version ok jung@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2013/03/26 08:12:35 sthen Exp $
d9 1
@


1.129
log
@fix RUN_DEPENDS-lang to not depend on a particular flavour of -main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2013/03/23 01:42:03 sthen Exp $
d6 1
a6 1
VERSION=	7.3.850
a9 1
REVISION-lang=	2
a18 1
MAINTAINER=	Chris Kuethe <ckuethe@@openbsd.org>
d107 1
a107 1
WANTLIB += Xi Xinerama Xpm Xrandr Xrender Xt atk-1.0 cairo expat
@


1.128
log
@correct FULLPKGPATH-lang, might fix a problem reported by matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2013/03/22 00:12:59 sthen Exp $
d10 1
a10 1
REVISION-lang=	1
d117 1
a117 1
RUN_DEPENDS-lang=	${BUILD_PKGPATH}
@


1.127
log
@overwrite FULLPKG*-lang (and bump REVISION-lang), the subpackage isn't
flavour-dependent
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2013/03/20 19:13:50 jeremy Exp $
d10 1
a10 1
REVISION-lang=	0
d36 1
a36 1
FULLPKGPATH-lang= ${PKGPATH},lang
@


1.126
log
@Make ruby 1.9 the default ruby for non-gem/extconf ports,
for consistency with the gem/extconf ports.

Update non-gem/extconf ports that relied on the previous
default of ruby 1.8 to explicitly specify it.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2013/03/16 22:56:44 sthen Exp $
d10 1
d34 3
@


1.125
log
@- update to more recent vim patchset, using a self-rolled distfile (with
a maintainer convenience target to allow this to be updated easily from
Mercurial) - this beats downloading 750+ individual patch files and
trying to force them to apply during the build (which is problematic
because some require GNU patch and some have problems even then...)

- clean up plists greatly.

- remove m68k gcc patch.

- add openbsd.vim for style(9) from gsoares@@.

based on a diff from pirofti@@, ok pirofti@@ gsoares@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2013/03/11 11:02:50 espie Exp $
d64 1
@


1.124
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2011/12/02 14:36:14 espie Exp $
d6 2
a7 5
DISTNAME=	vim-7.3
REV=		154
VERSION=	7.3.${REV}
# keep PKGNAME for full version number
PKGNAME=	vim-${VERSION}
a8 1
REVISION-main=	2
d10 1
a10 2
REVISION-lang = 0
P=		${DISTNAME:C/[-\.]//g}
d12 5
a16 6
MASTER_SITES=	ftp://ftp.vim.org/pub/vim/unix/ \
		ftp://ftp.home.vim.org/pub/vim/unix/ \
		ftp://ftp.berlin.de.vim.org/unix/
MASTER_SITES0=	${MASTER_SITES:S/unix/patches\/7.3/}
DISTFILES=	${DISTNAME}.tar.bz2
DIST_SUBDIR=	vim73
d21 2
a22 12
PATCHFILES=	# 
#_patches!=	jot -w%03d - 1 ${REV} 1
_patches!=	jot -w%03d - 1 ${REV} 1 | \
	egrep -v '009|010|021|027|035|036|037|051|063|064|079|085|087|095|108|113|119|125|131|136|146'
.for p in ${_patches}
PATCHFILES+=	7.3.${p}:0
.endfor

# allow vim to build on m68k and vax
.if (${MACHINE_ARCH} == "m68k")
PATCH_LIST=	patch-* sup-m68k-*
.elif (${MACHINE_ARCH} == "vax")
d28 2
a29 1
WANTLIB=		c curses
d40 3
a42 1
CONFIGURE_ARGS+=--with-tlib="curses" --enable-multibyte --enable-cscope
d45 1
a45 1
CONFIGURE_ARGS+=--with-features=huge
d49 1
a49 1
CONFIGURE_ARGS+=--enable-perlinterp
d56 1
a56 1
CONFIGURE_ARGS+=--enable-pythoninterp \
d64 1
a64 1
CONFIGURE_ARGS+=--enable-rubyinterp
d72 2
a73 1
CONFIGURE_ARGS+=--disable-gui --without-x
d77 4
a80 1
CONFIGURE_ARGS+=--enable-gui="motif" --with-x --enable-fontset --enable-xim
d83 1
a83 1
WANTLIB+=	m ICE SM X11 Xmu Xpm Xt Xm
d87 5
a91 2
CONFIGURE_ARGS+=--enable-gui="athena" --with-x --enable-fontset --enable-xim
WANTLIB+=	m ICE SM X11 Xaw Xmu Xpm Xt
d97 11
a107 8
CONFIGURE_ARGS+=--enable-gui="gtk2" --with-x --enable-fontset --enable-xim --disable-gtk-check --enable-gtk2-check
WANTLIB+=	ICE SM X11 Xext Xrender Xt fontconfig freetype m z\
	 	atk-1.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 png expat\
		pango-1.0 pangoft2-1.0 pangocairo-1.0 cairo pthread\
		Xau Xcomposite Xcursor Xdamage Xfixes Xi Xinerama \
		Xrandr pixman-1 pthread-stubs xcb gthread-2.0 xcb-render \
		gdk_pixbuf-2.0 gdk-x11-2.0>=0.11 gtk-x11-2.0>=0.11 GL \
		Xdmcp Xpm Xxf86vm drm xcb-shm
a117 1
WRKDIST=	${WRKDIR}/${P}
a118 1

d130 14
a143 1
	${INSTALL_DATA} ${FILESDIR}/pf.vim ${PREFIX}/share/vim/${P}/syntax
@


1.123
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2011/09/16 09:48:09 espie Exp $
a43 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.122
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2011/06/15 19:43:10 sthen Exp $
d60 1
a60 1
.if ${FLAVOR:L:Mhuge}
d64 1
a64 1
.if ${FLAVOR:L:Mperl}
d69 1
a69 1
.if ${FLAVOR:L:Mpython}
d78 1
a78 1
.if ${FLAVOR:L:Mruby}
d86 2
a87 2
.if ${FLAVOR:L:Mno_x11} && \
	!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
d90 2
a91 2
.elif ${FLAVOR:L:Mmotif} && \
	!${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
d97 2
a98 2
.elif ${FLAVOR:L:Mathena} && \
	!${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mgtk2}
d101 2
a102 2
.elif ${FLAVOR:L:Mgtk2} && \
		!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena}
@


1.121
log
@vim's tar support requires GNU tar to operate correctly; patch the relevant
script to use "gtar" not "tar". This is not added as a run dep to avoid
pulling in extra dependencies, especially xz which requires gcc3+ so is
not available on some arch and is more difficult to build on others.
(There's a clear error message at runtime if gtar is unavailable.)
ok dcoppa@@ ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2011/04/10 18:01:13 jasper Exp $
d12 1
a12 1
REVISION-main=	1
d14 1
@


1.120
log
@adjust after recent lesstif removal

ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2011/04/07 20:50:55 ckuethe Exp $
d12 1
a12 1
REVISION-main=	0
@


1.119
log
@update to vim 7.1.154
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2010/11/15 23:22:07 espie Exp $
d12 1
d93 3
a95 2
USE_MOTIF=	any
WANTLIB+=	m ICE SM X11 Xmu Xpm Xt
@


1.118
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2010/11/07 18:50:57 espie Exp $
d7 1
a7 1
REV=		3
a11 1
REVISION-main=	1
a12 1
REVISION-lang=	1
d26 3
a28 3
_patches!=	jot -w%03d - 1 ${REV} 1
#_patches!=	jot -w%03d - 1 ${REV} 1 | \
#	egrep -v 'xxx|yyy|xxx|...'
d93 1
a93 1
WANTLIB+=	ICE SM X11 Xext Xmu Xpm Xt pthread-stubs xcb
d97 1
a97 1
WANTLIB+=	ICE SM X11 Xaw Xext Xmu Xpm Xt pthread-stubs xcb
d109 2
a110 2
		xcb-render-util gdk_pixbuf-2.0 gdk-x11-2.0>=0.11 \
		gtk-x11-2.0>=0.11
@


1.117
log
@do LIB_DEPENDS for emulators/editors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2010/10/26 21:42:14 jeremy Exp $
d104 1
a104 1
LIB_DEPENDS+=	::x11/gtk+2
d111 2
a112 2
		xcb-render-util gdk_pixbuf-2.0 gdk-x11-2.0.>=0.11 \
		gtk-x11-2.0.>=0.11
d117 1
a117 1
RUN_DEPENDS-lang=	::${BUILD_PKGPATH}
@


1.116
log
@Handle the rest of the fallout from the splitting of MODRUBY_LIB_DEPENDS
into MODRUBY_WANTLIB and using CONFIGURE_STYLE = ruby gem ext.  Use the
lang/ruby module for all dependent ports, setting
MODRUBY_{BUILD,RUN}DEP=No if necessary.

ok landry, phessler, sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2010/10/24 21:16:25 ajacoutot Exp $
d104 1
a104 1
LIB_DEPENDS+=	gdk-x11-2.0.>=0.11,gtk-x11-2.0.>=0.11::x11/gtk+2
d111 2
a112 1
		xcb-render-util gdk_pixbuf-2.0
@


1.115
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2010/10/24 15:53:55 sthen Exp $
d83 1
a83 1
WANTLIB+=	m
@


1.114
log
@Add MODPY_WANTLIB, adjust MODPY_LIB_DEPENDS to new-style LIB_DEPENDS,
update all ports to match. Plists don't change -> no bump.
Looks ok to jasper.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2010/10/18 18:00:16 espie Exp $
a94 1
USE_X11=	Yes
a98 1
USE_X11=	Yes
a105 1
USE_X11=	Yes
@


1.113
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2010/10/11 08:12:44 jasper Exp $
d75 1
a75 1
WANTLIB+=	m pthread util
@


1.112
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2010/09/30 07:21:18 ajacoutot Exp $
d49 1
@


1.111
log
@Fix DEPENDS after gtk+2 and gdk-pixbuf split.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2010/09/09 22:29:28 ckuethe Exp $
d11 4
a14 2
PKGNAME-main=	vim-${VERSION}p0
PKGNAME-lang=	vim-lang-${VERSION}p0
d111 1
a111 1
		glitz Xau Xcomposite Xcursor Xdamage Xfixes Xi Xinerama \
@


1.110
log
@update to vim 7.3.003. ok kevlo@@ sthen@@ and much "squeee" from marco@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2010/08/31 19:38:38 sthen Exp $
d11 2
a12 2
PKGNAME-main=	vim-${VERSION}
PKGNAME-lang=	vim-lang-${VERSION}
d103 1
a103 1
LIB_DEPENDS+=	gdk-x11-2.0.>=0.11,gdk_pixbuf-2.0.>=0.11,gtk-x11-2.0.>=0.11::x11/gtk+2
d111 1
a111 1
		xcb-render-util
@


1.109
log
@sync WANTLIB and bump (bump also needed for python)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2010/07/10 20:30:37 naddy Exp $
d6 3
a8 3
DISTNAME=	vim-7.2
REV=		444
VERSION=	7.2.${REV}
a12 1
REVISION-main=	0
d18 3
a20 5
MASTER_SITES0=	${MASTER_SITES:S/unix/patches\/7.2/}
MASTER_SITES1=	${MASTER_SITES:S/unix/extra/}
DISTFILES=	${DISTNAME}.tar.bz2 \
		${DISTNAME}-lang.tar.gz:1
DIST_SUBDIR=	vim72
d26 3
a28 2
_patches!=	jot -w%03d - 1 ${REV} 1 | \
	egrep -v '001|007|022|036|041|049|071|072|074|088|089|093|101|138|150|172|173|191|194|204|205|206|212|216|219|233|236|247|248|250|260|302|320|323|326|336|350|352|362|364|365|372|374|377|384|388|393|399|400|403|415'
d30 1
a30 1
PATCHFILES+=	7.2.${p}:0
@


1.108
log
@rename variable, REVISION has a special meaning now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2010/06/27 20:49:49 ckuethe Exp $
d13 1
d112 2
a113 1
		Xrandr pixman-1 pthread-stubs xcb
@


1.107
log
@update to vim 7.2.444
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2010/05/28 00:52:19 espie Exp $
d7 2
a8 2
REVISION=	444
VERSION=	7.2.${REVISION}
d28 1
a28 1
_patches!=	jot -w%03d - 1 ${REVISION} 1 | \
@


1.106
log
@revert, for lots of technical reasons.
multi-packages are used when you have to build things together, but want
to separate the packages.

In this case, you have a bundle of things that do not even need to be
built together, that do not even share a MASTER_SITES, and were just bundled
because "they're related to vim".

This is deeply wrong. These files should be a separate port and packages.
Heck, they should be a separate port and several packages. Probably one
per-language.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2010/05/12 02:44:28 ckuethe Exp $
d7 1
a7 1
REVISION=	416 # 267, 287, 301, 314, 342
@


1.105
log
@Add a -spell subpackage which if installed allows non-English languages
to be used with the spell checker.
ok ckuethe@@ (MAINTAINER)
@
text
@a4 1
COMMENT-spell=	vi clone, spell-check subpackage
a12 1
PKGNAME-spell=	vim-spell-${VERSION}
a19 1
MASTER_SITES2=	${MASTER_SITES:S/unix/runtime\/spell/}
a21 2
EXTRACT_ONLY=	${DISTNAME}.tar.bz2 \
		${DISTNAME}-lang.tar.gz
d23 1
a23 31
_spellfiles=	af.latin1.spl af.utf-8.spl am.utf-8.spl bg.cp1251.spl \
		bg.utf-8.spl ca.latin1.spl ca.utf-8.spl cs.cp1250.spl \
		cs.iso-8859-2.spl cs.utf-8.spl cy.iso-8859-14.spl \
		cy.utf-8.spl da.latin1.spl da.utf-8.spl de.latin1.spl \
		de.utf-8.spl el.iso-8859-7.spl el.utf-8.spl en.ascii.spl \
		en.latin1.spl en.utf-8.spl eo.iso-8859-3.spl eo.utf-8.spl \
		es.latin1.spl es.utf-8.spl fo.latin1.spl fo.utf-8.spl \
		fr.latin1.spl fr.utf-8.spl ga.latin1.spl ga.utf-8.spl \
		gd.latin1.spl gd.utf-8.spl gl.latin1.spl gl.utf-8.spl \
		he.iso-8859-8.spl he.utf-8.spl hr.cp1250.spl \
		hr.iso-8859-2.spl hr.utf-8.spl hu.cp1250.spl \
		hu.iso-8859-2.spl hu.utf-8.spl id.latin1.spl id.utf-8.spl \
		it.latin1.spl it.utf-8.spl ku.iso-8859-9.spl ku.utf-8.spl \
		la.latin1.spl la.utf-8.spl lt.iso-8859-13.spl lt.utf-8.spl \
		lv.iso-8859-13.spl lv.utf-8.spl mg.latin1.spl mg.utf-8.spl \
		mi.iso-8859-4.spl mi.utf-8.spl ms.latin1.spl ms.utf-8.spl \
		nb.latin1.spl nb.utf-8.spl nl.latin1.spl nl.utf-8.spl \
		nn.latin1.spl nn.utf-8.spl ny.ascii.spl ny.iso-8859-14.spl \
		ny.utf-8.spl pl.cp1250.spl pl.iso-8859-2.spl pl.utf-8.spl \
		pt.latin1.spl pt.utf-8.spl ro.cp1250.spl ro.iso-8859-2.spl \
		ro.utf-8.spl ru.cp1251.spl ru.koi8-r.spl ru.utf-8.spl \
		rw.latin1.spl rw.utf-8.spl sk.cp1250.spl sk.iso-8859-2.spl \
		sk.utf-8.spl sl.cp1250.spl sl.iso-8859-2.spl sl.utf-8.spl \
		sv.latin1.spl sv.utf-8.spl sw.latin1.spl sw.utf-8.spl \
		tet.latin1.spl tet.utf-8.spl th.utf-8.spl tl.latin1.spl \
		tl.utf-8.spl tn.cp1250.spl tn.iso-8859-2.spl tn.utf-8.spl \
		uk.koi8-u.spl uk.utf-8.spl yi-tr.utf-8.spl yi.latin1.spl \
		yi.utf-8.spl zu.ascii.spl zu.latin1.spl zu.utf-8.spl
.for s in ${_spellfiles}
DISTFILES+=	${s}:2
.endfor
d48 1
a48 1
MULTI_PACKAGES=	-main -lang -spell
a119 6

RUN_DEPENDS-spell=	::${BUILD_PKGPATH}
PKG_ARCH-spell=		*
LIB_DEPENDS-spell=
WANTLIB-spell=

a136 3
.for s in ${_spellfiles}
	${INSTALL_DATA} ${FULLDISTDIR}/${s} ${PREFIX}/share/vim/${P}/spell
.endfor
@


1.104
log
@update to vim 7.2.416
ok stsp@@ sthen@@ marco@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2009/10/15 15:32:17 ckuethe Exp $
d5 1
d14 1
d22 1
d25 2
d28 31
a58 1

d83 1
a83 1
MULTI_PACKAGES=	-main -lang
d155 6
d178 3
@


1.103
log
@update to vim 7.2.267
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2009/08/11 04:30:40 msf Exp $
d7 1
a7 1
REVISION=	267
d29 1
a29 1
	egrep -v '001|007|022|036|041|049|071|072|074|088|089|093|101|138|150|172|173|191|194|204|205|206|212|216|219|233|236|247|248|250|260'
@


1.102
log
@respect MODRUBY_LIB_DEPENDS, no plist change

ok ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2009/08/10 06:31:09 kili Exp $
d7 1
a7 1
REVISION=	234
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p0
d29 1
a29 1
	egrep -v '001|007|022|036|041|049|071|072|074|088|089|093|101|138|150|172|173|191|194|204|205|206|212|216|219|233'
@


1.101
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2009/07/19 20:22:01 ckuethe Exp $
d77 1
d79 2
a80 2
MAKE_ENV+=	RUBY="${DEPBASE}/bin/ruby"
LIB_DEPENDS+=	ruby::lang/ruby
@


1.100
log
@update to vim 7.2.234, and enable the cscope plugin by request of sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2009/06/17 01:53:32 sthen Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}
d93 1
a93 1
WANTLIB+=	ICE SM X11 Xext Xmu Xpm Xt
d98 1
a98 1
WANTLIB+=	ICE SM X11 Xaw Xext Xmu Xpm Xt
d110 1
a110 1
		Xrandr pixman-1
@


1.99
log
@sync wantlib, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2009/06/16 11:30:48 sthen Exp $
d7 1
a7 1
REVISION=	190
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p1
d27 1
a27 1
PATCHFILES=	#
d29 1
a29 1
	egrep -v '001|007|022|036|041|049|071|072|074|088|089|093|101|138|150|172|173|191'
d56 1
a56 1
CONFIGURE_ARGS+=--with-tlib="curses" --enable-multibyte
@


1.98
log
@sync WANTLIB and bump (gio-2.0, avahi-*)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2009/05/31 18:59:51 ckuethe Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p0
d86 1
@


1.97
log
@update to 7.2.190
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2009/01/10 15:50:34 ckuethe Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}
d106 1
a106 1
	 	atk-1.0 glib-2.0 gmodule-2.0 gobject-2.0 png expat\
@


1.96
log
@update to vim 7.2.77
"Committsky!" marco@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2008/10/17 14:56:53 ckuethe Exp $
d7 1
a7 1
REVISION=	77
d29 1
a29 1
	egrep -v '001|007|022|036|041|049|071|072|074'
@


1.95
log
@update to 7.2.25. ok marco@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2008/06/20 05:24:39 ckuethe Exp $
d7 1
a7 1
REVISION=	25
d29 1
a29 1
	egrep -v '001|007|022'
@


1.94
log
@update to vim 7.1.315. includes some format string fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2008/06/15 00:06:52 sthen Exp $
d6 3
a8 3
DISTNAME=	vim-7.1
REVISION=	315
VERSION=	7.1.${REVISION}
d18 1
a18 1
MASTER_SITES0=	${MASTER_SITES:S/unix/patches\/7.1/}
d22 1
a22 1
DIST_SUBDIR=	vim71
d29 1
a29 1
	egrep -v '003|007|041|065|070|072|080|088|091|092|122|123|124|126|128|129|134|146|158|168|176|178|186|187|191|196|197|204|275|278|280|282|283|285|302|303|309'
d31 1
a31 1
PATCHFILES+=	7.1.${p}:0
a32 1
PATCHFILES+=	7.1.126ne:0
@


1.93
log
@sync wantlib and bump packages. ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2008/05/16 20:19:12 espie Exp $
d7 1
a7 1
REVISION=	281
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p2
d29 1
a29 1
	egrep -v '003|007|041|065|070|072|080|088|091|092|122|123|124|126|128|129|134|146|158|168|176|178|186|187|191|196|197|204|275|278|280'
@


1.92
log
@improve syntax for our make.

okay ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2008/03/20 06:02:08 ckuethe Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p1
d109 2
a110 1
		glitz Xau Xcomposite Xcursor Xdamage Xfixes Xi Xinerama Xrandr
@


1.91
log
@it's been a month... time for another 30+ vim patches
now up to 7.1.281
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2008/02/17 18:10:04 espie Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p0
@


1.90
log
@syntax: handle drupal module, Makefile.inc, and patch-*

okay ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2008/02/13 16:28:18 ckuethe Exp $
d7 1
a7 1
REVISION=	244
d29 1
a29 1
	egrep -v '003|007|041|065|070|072|080|088|091|092|122|123|124|126|128|129|134|146|158|168|176|178|186|187|191|196|197|204'
@


1.89
log
@Update to vim 7.1.244
Fix the -python flavour (from landry@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2008/01/01 17:02:26 ckuethe Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}
@


1.88
log
@latest bunch of micro-patches. remove redundant directory from -lang
subpackage because it's already in -main.
ok okan
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2007/11/07 19:48:58 ckuethe Exp $
d7 1
a7 1
REVISION=	175
d29 1
a29 1
	egrep -v '003|007|041|065|070|072|080|088|091|092|122|123|124|126|128|129|134|146|158|168'
d33 1
d101 2
a102 2
LD+=		-pthread
CC+=		-pthread
d107 3
a109 2
	 	atk-1.0 glib-2.0 gmodule-2.0 gobject-2.0 png\
		pango-1.0 pangoft2-1.0 pangocairo-1.0 cairo pthread glitz
@


1.87
log
@latest vim micro-patches, plus a diff from marco to highlight u_int##_t
like uint##_t
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2007/10/21 18:41:20 ckuethe Exp $
d7 1
a7 1
REVISION=	149
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p0
d29 1
a29 1
	egrep -v '003|007|041|065|070|072|080|088|091|092|122|123|124|126|128|129|134|146'
@


1.86
log
@use python module and switch to 2.5
@
text
@d7 1
a7 1
REVISION=	145
d29 1
a29 1
	egrep -v '003|007|041|065|070|072|080|088|091|092|122|123|124|126|128|129|134'
@


1.85
log
@Another day another vim patch...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2007/08/29 18:19:13 jasper Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}
d68 2
a69 2
PYTHON_VER=	2.4
CONFIGURE_ENV+=	vi_cv_path_python=${DEPBASE}/bin/python${PYTHON_VER}
d71 2
a72 2
	--with-python-config-dir=${DEPBASE}/lib/python${PYTHON_VER}/config
LIB_DEPENDS+=	python${PYTHON_VER}:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
d116 1
a116 1
MODULES=		devel/gettext
@


1.84
log
@update vim to 7.1.39, which includes a fix for
http://secunia.com/advisories/25941/

ok ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2007/07/24 14:12:29 ckuethe Exp $
d7 1
a7 1
REVISION=	39
d21 1
a21 1
		${DISTNAME}-lang.tar.gz:1 
d29 1
a29 1
	egrep -v '003|007'
@


1.83
log
@update 7.1.2 to 7.1.33
ok robert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2007/05/18 15:18:59 ckuethe Exp $
d3 2
a4 2
COMMENT-main=	"vi clone, many additional features"
COMMENT-lang=	"vi clone, NLS subpackage"
d7 1
a7 1
REVISION=	33
@


1.82
log
@Update to vim 7.1.002
ok simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2007/03/16 17:54:38 ckuethe Exp $
d7 1
a7 1
REVISION=	2
d28 2
a29 1
_patches!=	jot -w%03d - 1 ${REVISION} 1
@


1.81
log
@update to vim 7.0.216 (more micro-patches)
"hoorah!" marco@@
"go ahead" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2007/01/09 19:59:11 ckuethe Exp $
d6 3
a8 3
DISTNAME=	vim-7.0
REVISION=	216
VERSION=	7.0.${REVISION}
d18 1
a18 1
MASTER_SITES0=	${MASTER_SITES:S/unix/patches\/7.0/}
d22 1
a22 1
DIST_SUBDIR=	vim7
d28 1
a28 5
# The patches ignored with egrep are for non-unix platforms. If we
# attempt to use them, patch fails because they refer to files only
# found in the vim-extra (ie. non-unix) source archive.
_patches!=	jot -w%03d - 1 ${REVISION} 1 | \
	egrep -v '005|027|028|032|045|057|065|074|108|130|132|138|156|161|170|171|180|197|198|208|215'
d30 1
a30 1
PATCHFILES+=	7.0.${p}:0
@


1.80
log
@add latest bunch of patches from vim.org
ok dassow
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2006/12/29 01:00:13 steven Exp $
d7 1
a7 1
REVISION=	178
d32 1
a32 1
	egrep -v '005|027|028|032|045|057|065|074|108|130|132|138|156|161|170|171'
@


1.80.2.1
log
@- backport patch #7.1.039 to fix a security issue
SA25941
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2007/01/09 19:59:11 ckuethe Exp $
d11 1
a11 1
PKGNAME-main=	vim-${VERSION}p0
@


1.79
log
@bump PKGNAME-main as well. move all PKGNAME* stuff to the top...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2006/12/25 19:08:08 ckuethe Exp $
d7 1
a7 1
REVISION=	145
d10 3
a12 3
PKGNAME=	vim-${VERSION}p1
PKGNAME-main=	vim-${VERSION}p1
PKGNAME-lang=	vim-lang-${VERSION}p0
d32 1
a32 1
	egrep -v '005|027|028|032|045|057|065|074|108|130|132|138'
@


1.78
log
@make "easy" mode work with no-x11. requested on misc@@
ok steven
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2006/12/16 12:22:33 espie Exp $
d11 2
a51 3

PKGNAME-main=	vim-${VERSION}p0
PKGNAME-lang=	vim-lang-${VERSION}p0
@


1.77
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2006/12/14 09:07:56 steven Exp $
d10 1
a10 1
PKGNAME=	vim-${VERSION}p0
@


1.76
log
@use BASE_PKGPATH instead of homegrown variable, no bumps needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2006/11/21 11:25:03 espie Exp $
a106 1
BUILD_DEPENDS+=	:pkgconfig-*:devel/pkgconfig
@


1.75
log
@switch to new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2006/11/11 21:04:27 steven Exp $
d117 1
a117 3
MAINPATH=	editors/vim${FLAVOR_EXT:S/-/,/g}

RUN_DEPENDS-lang=	::${MAINPATH}
d126 1
a126 1
SUBST_VARS=	P MAINPATH
@


1.74
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2006/10/26 16:34:26 ckuethe Exp $
d3 1
a3 1
COMMENT=	"vi clone, many additional features"
d10 1
a10 1
PKGNAME=	vim-${VERSION}
d49 1
a49 2
MULTI_PACKAGES=	-lang
SUBPACKAGE?=
d51 2
a52 3
.for i in ${MULTI_PACKAGES}
PKGNAME$i=	vim$i-${VERSION}p0
.endfor
d117 7
a123 11
.if defined(PACKAGING) && ${SUBPACKAGE} == "-lang"
.  for i in ${FLAVOR:L}
_flavor:=	${_flavor},$i
.  endfor
RUN_DEPENDS=	::editors/vim${_flavor}
PKG_ARCH=	*
LIB_DEPENDS=
WANTLIB=
.else
MODULES=	devel/gettext
.endif
d128 1
a128 3
SUBST_VARS=	P

.include <bsd.own.mk>
@


1.73
log
@More patches from vim.org
ok sturm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2006/09/22 20:39:57 ckuethe Exp $
d97 1
d102 1
d111 1
@


1.72
log
@Apply the latest bunch of patches from vim.org
Make the gtk2 flavor compile with -pthread to prevent a hang under gnome.
ok sturm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2006/09/18 11:50:40 espie Exp $
d7 1
a7 1
REVISION=	109
d30 1
a30 1
	egrep -v '005|027|028|032|045|057|065|074|108'
@


1.71
log
@zap unneeded 0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2006/08/03 19:33:39 ckuethe Exp $
d7 1
a7 1
REVISION=	42
d29 2
a30 1
_patches!=	jot -w%03d - 1 ${REVISION} 1 | egrep -v '005|027|028|032'
d104 2
d109 3
a111 3
WANTLIB+=	ICE SM X11 Xt fontconfig freetype m \
	 	atk-1.0 glib-2.0 gmodule-2.0 gobject-2.0 \
		pango-1.0 pangoft2-1.0 pangocairo-1.0 cairo
@


1.70
log
@Maintainence update to 7.0.42
ok jasper, "hooray" marco
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2006/08/01 23:39:08 espie Exp $
d77 1
a77 1
LIB_DEPENDS+=	python${PYTHON_VER}.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
d107 2
a108 2
	 	atk-1.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
		pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0 cairo
@


1.70.2.1
log
@- backport patch #7.1.039 to fix a security issue
SA25941
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2006/08/03 19:33:39 ckuethe Exp $
d10 1
a10 1
PKGNAME=	vim-${VERSION}p0
@


1.69
log
@new libspecs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2006/07/09 17:44:16 ckuethe Exp $
d7 1
a7 1
REVISION=	35
@


1.68
log
@Update to vim 7.0.35.
ok robert, espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2006/06/13 13:22:36 bernd Exp $
d103 1
a103 1
LIB_DEPENDS+=	gdk-x11-2.0.0.11,gdk_pixbuf-2.0.0.11,gtk-x11-2.0.0.11::x11/gtk+2
@


1.67
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2006/05/24 18:37:35 sturm Exp $
d7 1
a7 1
REVISION=	0
d10 1
a10 1
PKGNAME=	vim-${VERSION}p1
d23 1
a23 1
MAINTAINER=	Chris Kuethe <chris.kuethe@@gmail.com>
d26 7
a32 4
#_patches!=	jot -w%03d - 1 ${REVISION} 1
#.for p in ${_patches}
#PATCHFILES+=	7.0.${p}:0
#.endfor
@


1.66
log
@fix plists

ok maintainer chris.kuethe at gmail.com
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2006/05/21 20:45:34 marco Exp $
d10 1
a10 1
PKGNAME=	vim-${VERSION}p0
d103 1
a103 1
WANTLIB+=	ICE SM X11 Xext Xft Xrender Xt fontconfig freetype m \
d105 1
a105 1
		pango-1.0.0.0 pangoft2-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
@


1.65
log
@Bump to version 7. From maintainer Chris Kuethe <ckuethe@@pyxis.cns.ualberta.ca>

tested by many.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2006/04/03 20:23:19 sturm Exp $
d10 1
a10 1
PKGNAME=	vim-${VERSION}
d49 1
a49 1
PKGNAME$i=	vim$i-${VERSION}
@


1.64
log
@I broke the PKGNAME with the update to 6.4.8

noticed by mpech and naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2006/03/11 13:53:59 sturm Exp $
d6 3
a8 3
DISTNAME=	vim-6.4
REVISION=	8
VERSION=	6.4.${REVISION}
d16 1
a16 1
MASTER_SITES0=	${MASTER_SITES:S/unix/patches\/6.4/}
a18 1
		${DISTNAME}-extra.tar.gz:1 \
d20 1
a20 1
DIST_SUBDIR=	vim6
d26 4
a29 4
_patches!=	jot -w%03d - 1 ${REVISION} 1
.for p in ${_patches}
PATCHFILES+=	6.4.${p}:0
.endfor
d49 1
a49 1
PKGNAME$i=	vim$i-${VERSION}p0
@


1.63
log
@update to vim 6.4.8

from maintainer Chris Kuethe <chris.kuethe at gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2006/01/18 04:41:12 steven Exp $
d9 2
@


1.62
log
@unbreak build
from Chris Kuethe <chris.kuethe at gmail.com> (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2006/01/17 19:43:10 espie Exp $
d7 1
a7 1
REVISION=	6
a8 1
PKGNAME=	vim-${VERSION}p1
@


1.61
log
@fix update path from gtk to gtk2 flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2006/01/16 12:23:52 steven Exp $
d10 1
@


1.60
log
@fix WANTLIB after gtk+2 downgrade
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2006/01/08 12:22:17 alek Exp $
d9 1
a9 2
PKGNAME=	vim-${VERSION}p0
P=		${DISTNAME:C/[-\.]//g}
d48 1
a48 1
PKGNAME$i=	vim$i-${VERSION}
@


1.59
log
@Update to 6.4.006
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2005/12/04 14:39:13 alek Exp $
d9 1
a9 1
PKGNAME=	vim-${VERSION}
d103 3
a105 4
WANTLIB+=	ICE SM X11 Xt atk-1.0.0.0 cairo pangocairo-1.0.0.0 \
		fontconfig freetype glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 m pango-1.0.0.0 \
		pangoft2-1.0.0.0
@


1.58
log
@Update to 6.4.4

From Chris Kuethe <chris.kuethe@@gmail.com> with plist fixes from wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2005/07/27 18:37:26 naddy Exp $
d7 1
a7 1
REVISION=	4
@


1.57
log
@fix wantlib + bump
@
text
@d6 4
a9 4
DISTNAME=	vim-6.3
REVISION=	85
VERSION=	6.3.${REVISION}
PKGNAME=	vim-${VERSION}p1
d12 4
a15 4
MASTER_SITES=   ftp://ftp.vim.org/pub/vim/unix/ \
	        ftp://ftp.home.vim.org/pub/vim/unix/ \
	        ftp://ftp.berlin.de.vim.org/unix/
MASTER_SITES0=  ${MASTER_SITES:S/unix/patches\/6.3/}
d18 1
a18 1
	        ${DISTNAME}-extra.tar.gz:1 \
d28 1
a28 1
PATCHFILES+=	6.3.${p}:0
d33 1
a33 1
PATCH_LIST=     patch-* sup-m68k-*
d35 1
a35 1
PATCH_LIST=     patch-* sup-vax-*
d39 4
a42 4
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d45 1
a45 1
MULTI_PACKAGES= -lang
a46 9
.if defined(PACKAGING) && ${SUBPACKAGE} == "-lang"
.  for i in ${FLAVOR:L}
_flavor:=${_flavor},$i
.  endfor
RUN_DEPENDS=::editors/vim${_flavor}
PKG_ARCH=*
.else
MODULES=	devel/gettext converters/libiconv
.endif
d49 1
a49 1
PKGNAME$i=      vim$i-${VERSION}p0
d52 2
a53 2
FLAVORS=	huge gtk gtk2 athena motif no_x11 perl python ruby
FLAVOR?=	gtk
d55 1
a55 1
CONFIGURE_STYLE= gnu
d70 1
a70 1
PYTHON_VER=     2.3
d86 1
a86 1
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
d89 1
a89 1
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
d92 1
a92 1
USE_MOTIF=any
d95 1
a95 1
	!${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mgtk2}
a97 5
.elif ${FLAVOR:L:Mgtk} && \
	!${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk2}
LIB_DEPENDS+=	gtk.1.2,gdk.1.2::x11/gtk+
CONFIGURE_ARGS+=--enable-gui="gtk" --with-x --enable-fontset --enable-xim --disable-gtk2-check
WANTLIB+=	ICE SM X11 Xext Xi Xt glib gmodule m
d99 2
a100 2
	        !${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mno_x11} && !${FLAVOR:L:Mathena} && !${FLAVOR:L:Mgtk}
LIB_DEPENDS+=   gdk-x11-2.0.0.11,gdk_pixbuf-2.0.0.11,gtk-x11-2.0.0.11::x11/gtk+2
d103 3
a105 3
WANTLIB+=	ICE SM X11 Xt atk-1.0.0.0 \
		cairo fontconfig freetype glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 m pango-1.0.0.0 pangocairo-1.0.0.0 \
d108 1
a108 1
ERRORS+="Fatal: You must select one GUI interface: no_x11, gtk, athena or motif"
d110 1
d112 5
d119 2
d123 2
a124 2
WRKDIST=		${WRKDIR}/${P}
WRKSRC=			${WRKDIST}/src
d126 1
a126 1
SUBST_VARS=     	P
@


1.56
log
@SECURITY:
Update to 6.3.85, which fixes a vulnerability to modelines that execute
arbitrary shell commands.
http://www.guninski.com/where_do_you_want_billg_to_go_today_5.html

From: maintainer Chris Kuethe <chris.kuethe@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2005/07/24 11:28:57 espie Exp $
d9 1
a9 1
PKGNAME=	vim-${VERSION}p0
a44 2
MODULES=	devel/gettext converters/libiconv

d53 2
d58 1
a58 1
PKGNAME$i=      vim$i-${VERSION}
d117 4
a120 4
WANTLIB+=	ICE SM X11 Xext Xft Xinerama Xrender Xt atk-1.0.0.0 \
		fontconfig freetype glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 m pango-1.0.0.0 pangox-1.0.0.0 \
		pangoxft-1.0.0.0
d123 4
@


1.55
log
@fix a segfault.
Properly reported to vim's author.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2005/02/12 23:00:50 naddy Exp $
d7 1
a7 1
REVISION=	61
@


1.54
log
@- update to 6.3.061
- add a build dependency on pkgconfig when building the gtk2 interface

From: Chris Kuethe <chris.kuethe@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2004/12/08 04:29:55 marcm Exp $
d9 1
a9 1
PKGNAME=	vim-${VERSION}
d65 2
a66 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
d80 1
a80 1
CONFIGURE_ENV+=	vi_cv_path_python=${LOCALBASE}/bin/python${PYTHON_VER}
d82 1
a82 1
	--with-python-config-dir=${LOCALBASE}/lib/python${PYTHON_VER}/config
d89 1
a89 1
MAKE_ENV+=	RUBY="${LOCALBASE}/bin/ruby"
@


1.54.2.1
log
@MFC:
SECURITY:
Update to 6.3.85, which fixes a vulnerability to modelines that execute
arbitrary shell commands.
http://www.guninski.com/where_do_you_want_billg_to_go_today_5.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2005/02/12 23:00:50 naddy Exp $
d7 1
a7 1
REVISION=	85
@


1.54.2.2
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.1 2005/07/29 19:57:11 sturm Exp $
d8 1
a8 1
VERSION=	6.3.${REVISION}p0
@


1.53
log
@freetpe -> freetype
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2004/11/24 11:40:00 espie Exp $
d7 1
a7 1
REVISION=	31
d115 1
@


1.52
log
@more WANTLIB for flavors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2004/11/24 11:08:03 espie Exp $
d117 1
a117 1
		fontconfig freetpe glib-2.0.0.0 gmodule-2.0.0.0 \
@


1.51
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2004/11/03 20:42:07 robert Exp $
d75 1
d84 1
d91 1
d102 1
d106 1
d116 4
@


1.50
log
@update to 6.3.31; from MAINTAINER Chris Kuethe <chris.kuethe@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2004/09/22 00:38:18 jolan Exp $
d43 1
d106 1
@


1.49
log
@update to 6.3.28, from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2004/09/15 00:06:59 pvalchev Exp $
d7 1
a7 1
REVISION=	28
@


1.48
log
@remove David Lebel from maintainer position per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2004/08/05 11:56:30 espie Exp $
d7 1
a7 1
REVISION=	13
d23 1
d64 2
@


1.47
log
@modern packing-list, add files missed.
@@comment out amiga `info' files so that auto-generation will work better
next time.

use new MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2004/07/12 19:32:59 lebel Exp $
a22 2

MAINTAINER=	David Lebel <lebel@@openbsd.org>
@


1.47.2.1
log
@MFC:
SECURITY:
Update to 6.3.85, which fixes a vulnerability to modelines that execute
arbitrary shell commands.
http://www.guninski.com/where_do_you_want_billg_to_go_today_5.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2004/08/05 11:56:30 espie Exp $
d7 1
a7 1
REVISION=	85
a64 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
a106 1
BUILD_DEPENDS+=	:pkgconfig-*:devel/pkgconfig
@


1.47.2.2
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47.2.1 2005/07/29 19:49:59 sturm Exp $
d8 1
a8 1
VERSION=	6.3.${REVISION}p0
@


1.46
log
@update editors/vim to 6.3.13:
- nuke stable and snapshot branches after some discussions with a few people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2004/07/03 22:09:08 jolan Exp $
d45 1
a45 1
MODULES=	gettext iconv
@


1.45
log
@stub vim/snapshot until 6.3-series is introduced
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2003/04/25 15:47:26 lebel Exp $
d3 2
a4 4
     SUBDIR += stable
     SUBDIR += stable,no_x11
#     SUBDIR += snapshot
#     SUBDIR += snapshot,no_x11
d6 125
a130 1
.include <bsd.port.subdir.mk>
@


1.44
log
@duh. Re-enable vim/snapshot in this Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2002/03/24 20:27:58 lebel Exp $
d5 2
a6 2
     SUBDIR += snapshot
     SUBDIR += snapshot,no_x11
@


1.43
log
@don't try to build snapshot from here, it's not there
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2002/02/24 22:37:04 lebel Exp $
d5 2
a6 2
#    SUBDIR += snapshot
#    SUBDIR += snapshot,no_x11
@


1.42
log
@re-enable vim/snapshot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2001/12/09 17:27:48 brad Exp $
d5 2
a6 2
     SUBDIR += snapshot
     SUBDIR += snapshot,no_x11
@


1.41
log
@: -> , for FLAVOR name separation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2001/09/28 12:23:58 naddy Exp $
d5 2
a6 2
#    SUBDIR += snapshot
#    SUBDIR += snapshot,no_x11
@


1.40
log
@skip disabled snapshot port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2001/04/02 16:05:46 espie Exp $
d4 1
a4 1
     SUBDIR += stable:no_x11
d6 1
a6 1
#    SUBDIR += snapshot:no_x11
@


1.39
log
@link snapshot flavors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2001/04/02 15:49:43 espie Exp $
d5 2
a6 2
     SUBDIR += snapshot
     SUBDIR += snapshot:no_x11
@


1.38
log
@vim -> vim/stable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2001/03/29 16:54:04 jasoni Exp $
d5 2
@


1.37
log
@move comment to makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2001/03/26 04:04:49 jasoni Exp $
d3 2
a4 1
COMMENT= 	"vi clone, many additional features"
d6 1
a6 65
PKGNAME=	vim-5.7.25
DISTNAME=	vim-5.7
CATEGORIES=	editors
NEED_VERSION=	1.361
MASTER_SITES=	ftp://nuxi.ucdavis.edu/pub/vim/unix/ \
		ftp://ftp.nuxi.com/pub/vim/unix/ \
		ftp://ftp.oce.nl/pub/vim/unix/  \
		ftp://ftp.berlin.de.vim.org/misc/editors/vim/unix/ \
		ftp://ftp.is.co.za/applications/editors/vim/  \
		ftp://ftp.progsoc.uts.edu.au/pub/vim/ 
MASTER_SITES0=	${MASTER_SITES:S/unix/patches/}
DISTFILES=	${DISTNAME}-src.tar.gz ${DISTNAME}-rt.tar.gz
DIST_SUBDIR=	vim

HOMEPAGE=	http://www.vim.org

.for p in 01 02 03 04 05 06 07 08 10 12 13 14 15 16 17 18 19 21 22 23 24 25
PATCHFILES+=	5.7.0${p}:0
.endfor
.if defined(PATCH_DEBUG)
PATCH_DIST_ARGS=-d ${WRKDIR}/${DISTNAME} -E ${PATCH_DIST_STRIP}
.else
PATCH_DIST_ARGS=-d ${WRKDIR}/${DISTNAME} --forward --quiet -E ${PATCH_DIST_STRIP}
.endif


MAINTAINER=	Jason Ish <jasoni@@openbsd.org>

PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

FLAVORS=	gtk athena motif no_x11
FLAVOR?=	gtk

CONFIGURE_STYLE= gnu dest
CONFIGURE_ARGS+=--with-tliba="curses"

# Internal Compiler Error
.if (${MACHINE_ARCH} == "m68k")
PATCH_LIST=	patch-* sup-m68k
.elif (${MACHINE_ARCH} == "vax")
PATCH_LIST=	patch-* sup-vax
.endif

.if ${FLAVOR:L} == "light"
FLAVOR=no_x11
.endif
.if ${FLAVOR:L} == "no_x11"
CONFIGURE_ARGS+=--disable-gui --without-x
.elif ${FLAVOR:L} == "motif"
CONFIGURE_ARGS+=--enable-gui="motif"
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
USE_MOTIF=Yes
.elif ${FLAVOR:L} == "athena"
CONFIGURE_ARGS+=--enable-gui="athena"
.elif ${FLAVOR:L} == "gtk"
LIB_DEPENDS=	gtk.1.2::x11/gtk+
CONFIGURE_ARGS+=--enable-gui="gtk" 
.endif

WRKDIST=		${WRKDIR}/${DISTNAME}/src

.include <bsd.port.mk>
@


1.36
log
@update to patch level 25
(takes care of patch-fileio_c)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.35 2001/03/18 22:38:12 miod Exp $
d8 1
a8 1
NEED_VERSION=	1.305
@


1.35
log
@Reduce optimization level for some files on vax, similar approach as for
m68k-based arches.
Problem reported by Sean Cavanaugh <seanc@@unixgeeks.ca>, maintainer ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/01/23 06:34:50 jasoni Exp $
d3 1
a3 1
PKGNAME=	vim-5.7.23
d19 1
a19 1
.for p in 01 02 03 04 05 06 07 08 10 12 13 14 15 16 17 18 19 21 22 23
@


1.34
log
@- Update to patch level 23 (Vim 5.7.23).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2000/12/05 05:05:50 jasoni Exp $
d45 2
@


1.33
log
@Update to 5.7.19
(many minor bug fixes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2000/10/22 15:41:53 espie Exp $
d3 1
a3 1
PKGNAME=	vim-5.7.19
d19 1
a19 1
.for p in 01 02 03 04 05 06 07 08 10 12 13 14 15 16 17 18 19
@


1.32
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2000/10/22 14:03:10 espie Exp $
d3 1
d19 1
a19 1
.for p in 01 02 03 04 05 06 07 08
@


1.31
log
@Complete a few MAINTAINER names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2000/08/15 07:57:46 jasoni Exp $
d5 1
a5 1
NEED_VERSION=	1.301
@


1.30
log
@- Update to patch level .08.
- Use better patchfile names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/07/07 04:28:32 jasoni Exp $
d28 1
a28 1
MAINTAINER=	jasoni@@openbsd.org
@


1.29
log
@Update to v5.7 (patch level 2)
Remove some patches that have been integrated into the release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/06/20 20:26:45 espie Exp $
d18 1
a18 1
.for p in 01 02
d38 1
a38 1
CONFIGURE_STYLE=	gnu dest
@


1.28
log
@Use negative fragments, now that they've been committed.
Change light -> no_x11, to conform to emerging convention.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2000/05/04 13:56:04 jasoni Exp $
d3 1
a3 1
DISTNAME=	vim-5.6
d18 2
a19 3
.for p in 01 02 03 05 06 10 11 12 13 14 15 16 17 18 19 21 22 25 27 28 29 30 \
	  31 32 33 35 36 37 38 39 40 41 42 46 47
PATCHFILES+=	5.6.0${p}:0
@


1.27
log
@PERMIT_*=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/04/10 18:33:53 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.251
d28 1
d36 1
a36 1
FLAVORS=	gtk athena motif light
d39 1
a39 4
FAKE=		Yes
HAS_CONFIGURE=	Yes
CONFIGURE_ARGS=	--prefix='$${DESTDIR}${PREFIX}'
CONFIGURE_ARGS+=--sysconfdir='$${DESTDIR}${PREFIX}'
d47 4
a50 2
.if ${FLAVOR:L:Mlight}
PLIST=		${PKGDIR}/PLIST-light
d52 1
a52 1
.elif ${FLAVOR:L:Mmotif}
d56 1
a56 1
.elif ${FLAVOR:L:Mathena}
d58 1
a58 1
.elif ${FLAVOR:L:Mgtk}
d63 1
a63 1
WRKDIST=	${WRKDIR}/${DISTNAME}/src
@


1.27.2.1
log
@bring editors as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/07/07 04:28:32 jasoni Exp $
d3 1
a3 1
DISTNAME=	vim-5.7
d5 1
a5 1
NEED_VERSION=	1.301
d18 3
a20 2
.for p in 01 02
PATCHFILES+=	5.7.0${p}:0
a27 1

d35 1
a35 1
FLAVORS=	gtk athena motif no_x11
d38 4
a41 1
CONFIGURE_STYLE=	gnu dest
d49 2
a50 4
.if ${FLAVOR:L} == "light"
FLAVOR=no_x11
.endif
.if ${FLAVOR:L} == "no_x11"
d52 1
a52 1
.elif ${FLAVOR:L} == "motif"
d56 1
a56 1
.elif ${FLAVOR:L} == "athena"
d58 1
a58 1
.elif ${FLAVOR:L} == "gtk"
d63 1
a63 1
WRKDIST=		${WRKDIR}/${DISTNAME}/src
@


1.26
log
@Missing USE_MOTIF (no lesstif dependency)
Activate light flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/04/10 16:39:14 jasoni Exp $
d30 1
a30 1
PERMIT_PACKAGE_CDROM=   No
d32 1
a32 1
PERMIT_DISTFILES_CDROM= No
@


1.25
log
@Update to patch level 47.
Add HOMEPAGE.
Use flavors.
Fix man pages from picking fake'd file locations.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/03/24 23:28:07 espie Exp $
d55 1
@


1.24
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/03/05 18:30:26 espie Exp $
a3 1
DIST_SUBDIR=	vim
d5 1
a5 1
NEED_VERSION=	 1.230
d14 3
d18 2
a19 1
.for p in 01 02 03 05 06 10 11 12
a29 1
LICENSE_TYPE=           "COPY GNU NONE"
d35 4
a38 1
FAKE=Yes
d40 1
a40 1
CONFIGURE_ARGS=--prefix='$${DESTDIR}${PREFIX}'
a41 1

d49 2
a50 1
.if defined(LIGHT_VERSION) && ${LIGHT_VERSION:U} == YES
d52 1
a52 4
PKGNAME=	${DISTNAME}-light
PLIST=		${PKGDIR}/PLIST-light
.else
.if defined(USE_MOTIF) && ${USE_MOTIF:U} == YES
d55 1
a55 1
.elif defined(USE_ATHENA) && ${USE_ATHENA:U} == YES
d57 1
a57 1
.else
a60 1
.endif
a62 12

pre-fetch:
.if !defined(NO_WARNINGS)
	@@echo ""
	@@echo "***"
	@@echo "*** To build light version, do 'make LIGHT_VERSION=yes'."
	@@echo "*** To use the Motif GUI, do 'make USE_MOTIF=yes'."
	@@echo "*** To use the Athena GUI, do 'make USE_ATHENA=yes'."
	@@echo "*** The GTK GUI is the default."
	@@echo "***"
	@@echo ""
.endif
@


1.23
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/03/04 17:58:51 espie Exp $
d6 1
a6 1
NEED_VERSION=	1.223
d56 1
a56 1
LIB_DEPENDS=	gtk.1.2:x11/gtk+
@


1.22
log
@fake vim
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/02/22 22:35:13 jasoni Exp $
d6 1
a15 2
NEED_VERSION=	1.175

d56 1
a56 1
LIB_DEPENDS=	gtk.1.2:${PORTSDIR}/x11/gtk+
@


1.21
log
@Add license info.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/02/18 23:45:38 espie Exp $
d34 5
a38 1
GNU_CONFIGURE=	Yes
@


1.20
log
@Funny misconception of the way PATCHFILES/DISTFILES interact...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/02/10 15:39:13 jasoni Exp $
d28 7
a34 1
GNU_CONFIGURE=	yes
@


1.19
log
@Use WRKDIST; update to patch level 5.6.012
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/02/01 21:43:50 brad Exp $
a13 1
EXTRACT_ONLY=	${DISTNAME}-src.tar.gz ${DISTNAME}-rt.tar.gz
d18 1
a18 2
DISTFILES+=	5.6.0${p}:0
PATCHFILES+=	5.6.0${p}
@


1.18
log
@rearrange Makefile a bit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/02/01 21:31:30 jasoni Exp $
d18 1
a18 1
.for p in 01 02 03 05 06 10 11
d54 1
a54 1
WRKSRC=	${WRKDIR}/${DISTNAME}/src
@


1.17
log
@Fix PLISTs (missing entries); Remove PATCH_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/01/30 06:42:24 brad Exp $
a5 2
NEED_VERSION=	1.175

d12 1
d16 2
a17 1
MASTER_SITES0=	${MASTER_SITES:S/unix/patches/}
a21 1

@


1.16
log
@upgrade to patchlevel 11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/01/17 17:03:15 brad Exp $
d4 1
d6 2
d15 1
a15 1
DIST_SUBDIR=	vim
d17 1
a17 1
PATCH_SITES=	${MASTER_SITES:S/unix/patches/}
d19 1
d22 1
@


1.15
log
@upgrade to vim 5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 1999/12/26 00:55:27 brad Exp $
d13 10
@


1.14
log
@- upgrade to patchlevel 71
- fix fuzz in patch created by adding distribution patches
- add patch to workaround internal compiler errors on m68k systems
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/12/10 16:33:42 brad Exp $
d3 1
a3 1
DISTNAME=	vim-5.5
a13 10
PATCH_SITES=	${MASTER_SITES:S/unix/patches/}
.for p in 01 02 03 04 05 06 08 09 11 12 13 14 15 17 18 19 20 21 22 23 25 26 27 29 30 32 33 34 35 36 37 38 39 40 41 42 43 44 45 47 48 49 50 51 52 53 54 55 56 57 58 59 61 63 64 65 66 67 68 69 70 71
PATCHFILES+=	5.5.0${p}
.endfor
.if defined(PATCH_DEBUG)
PATCH_DIST_ARGS=-d ${WRKDIR}/${DISTNAME} -E ${PATCH_DIST_STRIP}
.else
PATCH_DIST_ARGS=-d ${WRKDIR}/${DISTNAME} --forward --quiet -E ${PATCH_DIST_STRIP}
.endif

d35 1
a35 2
LIB_DEPENDS=	glib.1.2:${PORTSDIR}/devel/glib \
		gtk.1.2:${PORTSDIR}/x11/gtk+
@


1.13
log
@- upgrade to patchlevel 67
- pre-configure -> pre-fetch
- change to allow linking with LessTif as well as Motif
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/12/09 19:59:24 brad Exp $
d15 1
a15 1
.for p in 01 02 03 04 05 06 08 09 11 12 13 14 15 17 18 19 20 21 22 23 25 26 27 29 30 32 33 34 35 36 37 38 39 40 41 42 43 44 45 47 48 49 50 51 52 53 54 55 56 57 58 59 61 63 64 65 66 67
d28 5
@


1.12
log
@- upgrade to patchlevel 66
- add a conditional loop around PATCH_DIST_ARGS so the PATCH_DEBUG option
  works
- improve conditional loops by checking if they are set to YES instead of
  just being defined and use the :U variable modifier
- ${ECHO} -> echo
- fix fuzz in patches created by adding distribution patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/09/30 15:28:45 jasoni Exp $
d15 1
a15 1
.for p in 01 02 03 04 05 06 08 09 11 12 13 14 15 17 18 19 20 21 22 23 25 26 27 29 30 32 33 34 35 36 37 38 39 40 41 42 43 44 45 47 48 49 50 51 52 53 54 55 56 57 58 59 61 63 64 65 66
d34 1
a34 2
.if defined(HAVE_MOTIF)
REQUIRES_MOTIF=	yes
d48 1
a48 1
pre-configure:
d53 3
a55 2
	@@echo "*** To use Athena GUI, do 'make USE_ATHENA=yes'."
	@@echo "*** GTK GUI is the default."
@


1.11
log
@correct a master site: Markus.Friedl@@informatik.uni-erlangen.de
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/09/28 15:29:53 jasoni Exp $
d12 1
d15 8
a22 2
PATCHFILES=	5.5.001 5.5.002 5.5.003 5.5.004 5.5.005 5.5.006 \
		5.5.008 5.5.009
a25 3
DIST_SUBDIR=	vim
WRKSRC=		${WRKDIR}/${DISTNAME}/src
PATCH_DIST_ARGS=-d ${WRKDIR}/${DISTNAME} --forward --quiet -E ${PATCH_DIST_STRIP}
d29 5
a33 1
.if !defined(LIGHT_VERSION)
d38 1
a38 1
.elif defined(USE_ATHENA)
a44 4
.else
CONFIGURE_ARGS+=--enable-gui="no" --without-x
PKGNAME=	${DISTNAME}-light
PLIST=		${PKGDIR}/PLIST-light
d47 2
d51 7
a57 7
	@@${ECHO}
	@@${ECHO} "***"
	@@${ECHO} "*** To build light version, do 'make LIGHT_VERSION=yes'."
	@@${ECHO} "*** To use Athena GUI, do 'make USE_ATHENA=yes'."
	@@${ECHO} "*** GTK GUI is the default."
	@@${ECHO} "***"
	@@${ECHO}
@


1.10
log
@Add new PATCHFILES - and the Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/09/27 06:59:03 jasoni Exp $
d8 1
a8 1
		ftp://ftp.prz.tu-berlin.de/pub/unix/editors/vim/unix/  \
@


1.9
log
@Update to v 5.5 - and the Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/09/01 16:56:35 brad Exp $
d3 2
a4 2
DISTNAME=		vim-5.5
CATEGORIES=		editors
d6 6
a11 6
				ftp://ftp.nuxi.com/pub/vim/unix/ \
				ftp://ftp.oce.nl/pub/vim/unix/  \
				ftp://ftp.prz.tu-berlin.de/pub/unix/editors/vim/unix/  \
				ftp://ftp.is.co.za/applications/editors/vim/  \
				ftp://ftp.progsoc.uts.edu.au/pub/vim/ 
DISTFILES=		${DISTNAME}-src.tar.gz ${DISTNAME}-rt.tar.gz
d14 2
a15 1
PATCHFILES=		5.5.001 5.5.002 5.5.003 5.5.004 5.5.005 5.5.006
d17 1
a17 1
MAINTAINER=		jasoni@@openbsd.org
d19 5
a23 5
DIST_SUBDIR=		vim
WRKSRC=				${WRKDIR}/${DISTNAME}/src
PATCH_DIST_ARGS=	-d ${WRKDIR}/${DISTNAME} --forward --quiet -E ${PATCH_DIST_STRIP}
GNU_CONFIGURE=		yes
CONFIGURE_ARGS+=	--with-tliba="curses"
d27 3
a29 3
REQUIRES_MOTIF=		yes
CONFIGURE_ARGS+=	--enable-gui="motif"
CONFIGURE_ENV+=		MOTIFHOME=${X11BASE}
d31 1
a31 1
CONFIGURE_ARGS+=	--enable-gui="athena"
d33 3
a35 3
LIB_DEPENDS=		glib.1.2:${PORTSDIR}/devel/glib \
					gtk.1.2:${PORTSDIR}/x11/gtk+
CONFIGURE_ARGS+= 	--enable-gui="gtk" 
d38 3
a40 3
CONFIGURE_ARGS+= 	--enable-gui="no" --without-x
PKGNAME=			${DISTNAME}-light
PLIST=				${PKGDIR}/PLIST-light
@


1.8
log
@- add all *49* distrib patches
- use distrib subdir so we don't clutter up the main distfiles dir with all the vim patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/07/28 06:01:33 jasoni Exp $
d3 2
a4 2
DISTNAME=	vim-5.4
CATEGORIES=	editors
d6 6
a11 6
		ftp://ftp.nuxi.com/pub/vim/unix/ \
		ftp://ftp.oce.nl/pub/vim/unix/  \
		ftp://ftp.prz.tu-berlin.de/pub/unix/editors/vim/unix/  \
		ftp://ftp.is.co.za/applications/editors/vim/  \
		ftp://ftp.progsoc.uts.edu.au/pub/vim/
DISTFILES=	${DISTNAME}-src.tar.gz ${DISTNAME}-rt.tar.gz
d14 1
a14 6
PATCHFILES=	5.4.1 5.4.2 5.4.3 5.4.4 5.4.5 5.4.6 5.4.7 5.4.8 5.4.9 5.4.10 \
		5.4.11 5.4.12 5.4.13 5.4.14 5.4.15 5.4.16 5.4.17 5.4.18 \
		5.4.19 5.4.20 5.4.21 5.4.22 5.4.23 5.4.24 5.4.25 5.4.26 \
		5.4.27 5.4.28 5.4.29 5.4.30 5.4.31 5.4.32 5.4.33 5.4.34 \
		5.4.35 5.4.36 5.4.37 5.4.38 5.4.39 5.4.40 5.4.41 5.4.42 \
		5.4.43 5.4.44 5.4.45 5.4.46 5.4.47 5.4.48 5.4.49
d16 1
a16 1
MAINTAINER=	jasoni@@openbsd.org
d18 2
a19 2
DIST_SUBDIR=	vim
WRKSRC=		${WRKDIR}/${DISTNAME}/src
d21 2
a22 2
GNU_CONFIGURE=	yes
CONFIGURE_ARGS+= --with-tliba="curses"
d26 3
a28 3
REQUIRES_MOTIF=	yes
CONFIGURE_ARGS+= --enable-gui="motif"
CONFIGURE_ENV+=	MOTIFHOME=${X11BASE}
d30 1
a30 1
CONFIGURE_ARGS+= --enable-gui="athena"
d32 3
a34 3
LIB_DEPENDS=	glib.1.2:${PORTSDIR}/devel/glib \
		gtk.1.2:${PORTSDIR}/x11/gtk+
CONFIGURE_ARGS+= --enable-gui="gtk" 
d37 3
a39 3
CONFIGURE_ARGS+= --enable-gui="no" --without-x
PKGNAME=	${DISTNAME}-light
PLIST=		${PKGDIR}/PLIST-light
@


1.7
log
@and the Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/06/22 19:32:07 espie Exp $
a4 3

MAINTAINER=     jasoni@@openbsd.org

d11 1
d13 15
a27 5
DISTFILES=	vim-5.4-src.tar.gz vim-5.4-rt.tar.gz

WRKSRC=			${WRKDIR}/${DISTNAME}/src
GNU_CONFIGURE=		yes
CONFIGURE_ARGS+=	--prefix=${PREFIX} --with-tlib=curses
d31 3
a33 3
REQUIRES_MOTIF=		yes
CONFIGURE_ARGS+=	--enable-gui=motif
CONFIGURE_ENV+=		MOTIFHOME=${X11BASE}
d35 1
a35 1
CONFIGURE_ARGS+=	--enable-gui=athena
d37 3
a39 3
LIB_DEPENDS+=		glib.1.2:${PORTSDIR}/devel/glib \
			gtk.1.2:${PORTSDIR}/x11/gtk+
CONFIGURE_ARGS+=	--enable-gui=gtk 
d42 3
a44 3
CONFIGURE_ARGS+=	--enable-gui=no --without-x
PKGNAME=		${DISTNAME}-light
PLIST=			${PKGDIR}/PLIST-light
@


1.6
log
@add light version of vim port: don't link against X11.
Slightly smaller executable, much faster startup time.
Triggered by `LIGHT_VERSION'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/04/01 06:20:11 brad Exp $
d3 1
a3 1
DISTNAME=	vim-5.3
d15 1
a15 1
DISTFILES=	vim-5.3-src.tar.gz vim-5.3-rt.tar.gz
d17 3
a19 2
WRKSRC=		${WRKDIR}/${DISTNAME}/src
MAKE_FLAGS=	CONF_ARGS=--prefix=${PREFIX} -f
d23 5
a27 2
REQUIRES_MOTIF=	yes
MAKE_FLAGS:=	CONF_OPT_GUI="--enable-gui=motif" MOTIFHOME=${X11BASE} ${MAKE_FLAGS}
d29 3
a31 1
MAKE_FLAGS:=	CONF_OPT_GUI="--enable-gui=yes" ${MAKE_FLAGS}
d34 3
a36 3
MAKE_FLAGS:=	CONF_OPT_GUI='--enable-gui=no --without-x' ${MAKE_FLAGS}
PKGNAME=${DISTNAME}-light
PLIST=${PKGDIR}/PLIST-light
d39 10
a48 2
pre-build:
	@@(cd ${WRKSRC}; ${MAKE} distclean)
@


1.5
log
@fix dependency lists, fix email address's and remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1998/11/20 08:40:48 jasoni Exp $
d20 1
d26 5
@


1.4
log
@Update to v5.3
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.3 1998/10/18 05:02:06 marc Exp $
#
@


1.3
log
@comment out the BROKEN reason for all ports where the reason
was source files out of date and we have a copy of the required
version on ftp.openbsd.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1998/10/08 23:57:13 marc Exp $
d4 1
a4 1
DISTNAME=	vim-5.1
d7 1
a7 3
#BROKEN=	"newer version available"

MAINTAINER=     downsj@@downsj.com
d16 2
a17 1
PATCH_DIST_ARGS=	-d ${WRKDIR}/${DISTNAME} --forward --quiet -E ${PATCH_DIST_STRIP}
a19 1
ALL_TARGET=	#
a29 7

post-install:
	[ -e ${PREFIX}/bin/gvim ] || /bin/ln -s ${PREFIX}/bin/vim ${PREFIX}/bin/gvim
	@@echo "Vim tools (ctags and xxd) are NOT installed by default."
	@@echo "You must install them by hand if you want them."
	@@echo "cd to ${WRKSRC} and type"
	@@echo "'make installtools'."
@


1.2
log
@BROKEN: newer version available
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 1998/06/09 07:48:48 downsj Exp $
d7 1
a7 1
BROKEN=		"newer version available"
@


1.1
log
@Vim 5.1, based on FreeBSD port.
@
text
@d1 1
a1 10
# New ports collection makefile for:    vim
# Version required:     5.x
# Date created:		Mon June 8, 1998
# Whom:			Jason Downs (downsj@@downsj.com)
#
# Originally from FreeBSD:
# Date created:         Sat June 29, 1996
# Whom:                 David O'Brien (obrien@@cs.ucdavis.edu)
#
# $OpenBSD$
d6 5
d18 1
a18 2
MAINTAINER=     downsj@@downsj.com

a19 1
PATCH_DIST_ARGS=	-d ${WRKDIR}/${DISTNAME} --forward --quiet -E ${PATCH_DIST_STRIP}
a21 1
MAN1=		vim.1
@

