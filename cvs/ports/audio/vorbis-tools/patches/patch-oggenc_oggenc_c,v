head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.12
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.10
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.6
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_8:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2015.09.10.21.03.12;	author naddy;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;
commitid	2x6vn1fGD4naJDp1;

1.1.2.1
date	2015.09.11.19.37.49;	author naddy;	state Exp;
branches;
next	;
commitid	rBKlpCWfNOGLLrR1;

1.1.4.1
date	2015.09.11.19.38.11;	author naddy;	state Exp;
branches;
next	;
commitid	mIY0i5GTfXX5hDmK;


desc
@@


1.1
log
@Security fixes for:
CVE-2015-6749 (aiff_open buffer overflow)
CVE-2014-9638 (division by zero)
CVE-2014-9639 (channel integer overflow)

Also fix a crash on raw file close.

Via Jason Unovitch/FreeBSD
@
text
@$OpenBSD$

Fix crash on raw file close.
https://trac.xiph.org/changeset/19117

--- oggenc/oggenc.c.orig	Fri Mar 26 08:07:07 2010
+++ oggenc/oggenc.c	Thu Sep 10 22:48:38 2015
@@@@ -97,6 +97,8 @@@@ int main(int argc, char **argv)
               .3,-1,
               0,0,0.f,
               0, 0, 0, 0, 0};
+    input_format raw_format = {NULL, 0, raw_open, wav_close, "raw",
+      N_("RAW file reader")};
 
     int i;
 
@@@@ -239,9 +241,6 @@@@ int main(int argc, char **argv)
 
         if(opt.rawmode)
         {
-            input_format raw_format = {NULL, 0, raw_open, wav_close, "raw", 
-                N_("RAW file reader")};
-
             enc_opts.rate=opt.raw_samplerate;
             enc_opts.channels=opt.raw_channels;
             enc_opts.samplesize=opt.raw_samplesize;
@


1.1.4.1
log
@MFC: Security fixes for
CVE-2015-6749 (aiff_open buffer overflow)
CVE-2014-9638 (division by zero)
CVE-2014-9639 (channel integer overflow)

Also fix a crash on raw file close.

Via Jason Unovitch/FreeBSD
@
text
@@


1.1.2.1
log
@MFC: Security fixes for
CVE-2015-6749 (aiff_open buffer overflow)
CVE-2014-9638 (division by zero)
CVE-2014-9639 (channel integer overflow)

Also fix a crash on raw file close.

Via Jason Unovitch/FreeBSD
@
text
@@

