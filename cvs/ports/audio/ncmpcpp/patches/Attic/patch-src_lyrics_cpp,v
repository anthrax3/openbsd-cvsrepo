head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.8
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.6
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.10.27.08.30.20;	author dcoppa;	state dead;
branches;
next	1.1;
commitid	86rVHxEf8nbwRlNz;

1.1
date	2012.10.25.13.43.42;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.2
log
@
Update to ncmpcpp-0.6
@
text
@$OpenBSD: patch-src_lyrics_cpp,v 1.1 2012/10/25 13:43:42 dcoppa Exp $

Check return values of system() calls

--- src/lyrics.cpp.orig	Sun Apr  1 18:49:09 2012
+++ src/lyrics.cpp	Thu Oct 25 15:14:57 2012
@@@@ -377,15 +377,20 @@@@ void Lyrics::Edit()
 	
 	if (Config.use_console_editor)
 	{
-		system(("/bin/sh -c \"" + Config.external_editor + " \\\"" + itsFilename + "\\\"\"").c_str());
+		if (system(("/bin/sh -c \"" + Config.external_editor + " \\\"" + itsFilename + "\\\"\"").c_str()) < 0)
+		{
+			ShowMessage("Couldn't edit lyrics");
+			return;
+		}
+
 		// below is needed as screen gets cleared, but apparently
 		// ncurses doesn't know about it, so we need to reload main screen
 		endwin();
 		initscr();
 		curs_set(0);
 	}
-	else
-		system(("nohup " + Config.external_editor + " \"" + itsFilename + "\" > /dev/null 2>&1 &").c_str());
+	else if (system(("nohup " + Config.external_editor + " \"" + itsFilename + "\" > /dev/null 2>&1 &").c_str()) < 0)
+		ShowMessage("Couldn't edit lyrics");
 }
 
 #ifdef HAVE_CURL_CURL_H
@


1.1
log
@- Check return values of system() calls (stolen from ubuntu)
- Fix manpage errors and remove USE_GROFF
@
text
@d1 1
a1 1
$OpenBSD$
@

