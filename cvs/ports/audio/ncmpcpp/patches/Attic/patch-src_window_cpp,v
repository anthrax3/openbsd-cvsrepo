head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2015.02.23.14.26.31;	author dcoppa;	state dead;
branches;
next	1.3;
commitid	d7WwdCsft5qpTSN3;

1.3
date	2015.02.23.10.16.48;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	hcApZynXR6LPypJm;

1.2
date	2015.02.08.16.29.48;	author dcoppa;	state dead;
branches;
next	1.1;
commitid	VE80k4PDKp0YOdAZ;

1.1
date	2014.11.04.10.52.25;	author dcoppa;	state Exp;
branches;
next	;
commitid	fulzChkVDvqZ6DFu;


desc
@@


1.4
log
@
Revert, we're locked.

Sorry for the churn!
@
text
@$OpenBSD: patch-src_window_cpp,v 1.3 2015/02/23 10:16:48 dcoppa Exp $

commit e5e61842c5bf610da1b4ceeb52e613dd911040b6
Author: Benoit Pierre <benoit.pierre@@gmail.com>
Date:   Thu Feb 5 15:05:56 2015 +0100

window: don't add encrypted prompts to input history

--- src/window.cpp.orig	Mon Feb 23 04:06:36 2015
+++ src/window.cpp	Mon Feb 23 04:07:14 2015
@@@@ -820,7 +820,7 @@@@ std::string Window::getString(const std::string &base,
 	curs_set(0);
 	if (input != nullptr)
 	{
-		if (input[0] != 0)
+		if (!encrypted && input[0] != 0)
 			add_history(input);
 		result = input;
 		free(input);
@


1.3
log
@
Merge fix from the '0.6.x' maintenance branch:

window: don't add encrypted prompts to input history
* Passwords are no longer added to the input history.

(git commit e5e61842c5bf610da1b4ceeb52e613dd911040b6)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@
Zap unneeded patch
@
text
@d1 1
a1 1
$OpenBSD: patch-src_window_cpp,v 1.1 2014/11/04 10:52:25 dcoppa Exp $
d3 3
a5 3
commit 7e2900511cfa8a41984144b1be03d8108abd8798
Author: Andrzej Rybczak <electricityispower@@gmail.com>
Date:   Sat Nov 1 01:02:46 2014 +0100
d7 1
a7 1
window: initScreen: initialize readline
d9 11
a19 14
this fixes segmentation fault in rl_resize_terminal on SIGWINCH.

--- src/window.cpp.orig	Sat Oct 25 17:16:07 2014
+++ src/window.cpp	Tue Nov  4 10:57:48 2014
@@@@ -392,6 +392,9 @@@@ void initScreen(GNUC_UNUSED const char *window_title, 
 	rl_getc_function = rl::read_key;
 	rl_redisplay_function = rl::display_string;
 	rl_startup_hook = rl::add_base;
+	// initialize readline (needed, otherwise
+	// we get segmentation fault on SIGWINCH).
+	rl_initialize();
 }
 
 void destroyScreen()
@


1.1
log
@
window: initScreen: initialize readline; fixes segmentation fault
in rl_resize_terminal on SIGWINCH
(upstream git commit 7e2900511cfa8a41984144b1be03d8108abd8798)

tags: writeID3v2Tags: write comment tag properly
(upstream git commit 6402b6f9c9aad20180079d8b35f55267634028f2)

ncmpcpp: ignore SIGPIPE, not SIGINT
(upstream git commit 9e6b8533f1606fdc2535aad88817b50b8e4ad663)
@
text
@d1 1
a1 1
$OpenBSD$
@

