head	1.51;
access;
symbols
	OPENBSD_6_1:1.51.0.2
	OPENBSD_6_1_BASE:1.51
	OPENBSD_6_0:1.49.0.2
	OPENBSD_6_0_BASE:1.49
	OPENBSD_5_9:1.46.0.4
	OPENBSD_5_9_BASE:1.46
	OPENBSD_5_8:1.46.0.6
	OPENBSD_5_8_BASE:1.46
	OPENBSD_5_7:1.46.0.2
	OPENBSD_5_7_BASE:1.46
	OPENBSD_5_6:1.44.0.6
	OPENBSD_5_6_BASE:1.44
	OPENBSD_5_5:1.44.0.4
	OPENBSD_5_5_BASE:1.44
	OPENBSD_5_4:1.44.0.2
	OPENBSD_5_4_BASE:1.44
	OPENBSD_5_3:1.39.0.2
	OPENBSD_5_3_BASE:1.39
	OPENBSD_5_2:1.38.0.4
	OPENBSD_5_2_BASE:1.38
	OPENBSD_5_1_BASE:1.38
	OPENBSD_5_1:1.38.0.2
	OPENBSD_5_0:1.37.0.4
	OPENBSD_5_0_BASE:1.37
	OPENBSD_4_9:1.37.0.2
	OPENBSD_4_9_BASE:1.37
	OPENBSD_4_8:1.34.0.10
	OPENBSD_4_8_BASE:1.34
	OPENBSD_4_7:1.34.0.8
	OPENBSD_4_7_BASE:1.34
	OPENBSD_4_6:1.34.0.6
	OPENBSD_4_6_BASE:1.34
	OPENBSD_4_5:1.34.0.4
	OPENBSD_4_5_BASE:1.34
	OPENBSD_4_4:1.34.0.2
	OPENBSD_4_4_BASE:1.34
	OPENBSD_4_3:1.33.0.2
	OPENBSD_4_3_BASE:1.33
	OPENBSD_4_2:1.30.0.2
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.29.0.2
	OPENBSD_4_1_BASE:1.29
	OPENBSD_4_0:1.28.0.2
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.27.0.2
	OPENBSD_3_9_BASE:1.27
	OPENBSD_3_8:1.23.0.4
	OPENBSD_3_8_BASE:1.23
	OPENBSD_3_7:1.23.0.2
	OPENBSD_3_7_BASE:1.23
	OPENBSD_3_6:1.19.0.2
	OPENBSD_3_6_BASE:1.19
	OPENBSD_3_5:1.18.0.4
	OPENBSD_3_5_BASE:1.18
	OPENBSD_3_4:1.18.0.2
	OPENBSD_3_4_BASE:1.18
	OPENBSD_3_3:1.17.0.2
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.14.0.2
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.12.0.2
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9_TRACKING_SWITCH:1.6
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	naddy_20010328:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.51
date	2017.01.12.21.13.58;	author naddy;	state Exp;
branches;
next	1.50;
commitid	G7XZE7rmA4h7Glzy;

1.50
date	2016.08.30.10.37.37;	author jasper;	state Exp;
branches;
next	1.49;
commitid	WUyamKbtwSBwgV53;

1.49
date	2016.06.20.15.40.47;	author naddy;	state Exp;
branches;
next	1.48;
commitid	b4EbIaUDFslALfuQ;

1.48
date	2016.04.07.16.05.48;	author naddy;	state Exp;
branches;
next	1.47;
commitid	K8Z6SH9JyPFNT5bo;

1.47
date	2016.03.11.20.28.22;	author naddy;	state Exp;
branches;
next	1.46;
commitid	UYLP8TE6V7RS2GhJ;

1.46
date	2015.01.10.15.50.58;	author naddy;	state Exp;
branches;
next	1.45;
commitid	fcbq5beq7jpL0DD1;

1.45
date	2014.11.25.20.42.18;	author naddy;	state Exp;
branches;
next	1.44;
commitid	LTxpDiGi26jib3OV;

1.44
date	2013.07.18.15.10.55;	author naddy;	state Exp;
branches
	1.44.4.1
	1.44.6.1;
next	1.43;

1.43
date	2013.05.31.14.34.26;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2013.03.27.16.37.09;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2013.03.21.08.45.12;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2013.03.10.22.55.02;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2012.12.10.20.06.10;	author naddy;	state Exp;
branches;
next	1.38;

1.38
date	2012.01.03.07.03.54;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.11.15.00.22.46;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.10.18.16.52.44;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2010.08.25.20.27.16;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2008.04.07.03.54.39;	author fgsch;	state Exp;
branches;
next	1.33;

1.33
date	2007.09.24.17.23.55;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2007.09.18.18.22.32;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2007.09.15.21.26.01;	author simon;	state Exp;
branches;
next	1.30;

1.30
date	2007.03.28.18.06.16;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2006.10.28.10.30.41;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2006.08.01.11.17.56;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2006.01.13.19.12.15;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2006.01.10.11.14.49;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2005.12.29.12.32.23;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2005.10.18.23.24.25;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2005.03.09.14.41.18;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2005.03.09.00.15.13;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2005.02.19.21.48.47;	author alek;	state Exp;
branches;
next	1.20;

1.20
date	2004.11.21.17.51.44;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2004.08.10.08.04.01;	author xsa;	state Exp;
branches;
next	1.18;

1.18
date	2003.04.18.00.28.40;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.25.00.02.38;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2002.11.02.23.23.48;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2002.10.31.21.15.08;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2002.07.07.19.09.28;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2002.05.13.18.50.36;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2002.02.01.15.18.01;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2001.11.10.15.00.47;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2001.10.09.15.05.20;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2001.09.26.14.18.23;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.31.20.24.54;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2001.08.21.00.27.06;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2001.07.26.17.37.46;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2001.06.07.20.17.49;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.05.20.12.06.51;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.05.19.19.12.36;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.05.18.19.14.38;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.28.12.27.20;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.03.28.12.27.20;	author naddy;	state Exp;
branches;
next	;

1.44.4.1
date	2014.11.27.16.02.07;	author naddy;	state Exp;
branches;
next	;
commitid	lwzkcwX5NiNwN8SC;

1.44.6.1
date	2014.11.27.16.01.54;	author naddy;	state Exp;
branches;
next	;
commitid	iWg4eYxTbsf7IBDi;


desc
@@


1.51
log
@Update to 1.3.2 for numerous small bug fixes.
The API documentation is no longer included (requires Doxygen).
@
text
@# $OpenBSD: Makefile,v 1.50 2016/08/30 10:37:37 jasper Exp $

COMMENT=	free lossless audio codec

DISTNAME=	flac-1.3.2
CATEGORIES=	audio archivers
HOMEPAGE=	https://www.xiph.org/flac/
SHARED_LIBS +=  FLAC                 10.0     # 11.0
SHARED_LIBS +=  FLAC++               9.0      # 9.0

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	http://downloads.xiph.org/releases/flac/
EXTRACT_SUFX=	.tar.xz

WANTLIB=	c iconv m ogg stdc++

LIB_DEPENDS=	audio/libogg converters/libiconv

.if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	devel/nasm
.endif

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--disable-sse \
		--disable-altivec \
		--disable-doxygen-docs \
		--disable-thorough-tests \
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

post-install:
	cd ${PREFIX}/share/doc && mv ${DISTNAME} flac
	${SUBST_CMD} ${PREFIX}/man/man1/flac.1
	rm ${PREFIX}/man/man1/flac.1.beforesubst

.include <bsd.port.mk>
@


1.50
log
@remove configure arguments/comments about xmms; it's not going to be picked up anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/06/20 15:40:47 naddy Exp $
d5 1
a5 2
DISTNAME=	flac-1.3.1
REVISION=	0
d28 2
a29 1
CONFIGURE_ARGS=	--disable-altivec \
@


1.49
log
@Always install the API documentation. A pre-generated copy is already
included, so we don't need to run doxygen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/04/07 16:05:48 naddy Exp $
a31 1
		--disable-xmms-plugin
@


1.48
log
@switch libiconv and gettext modules to ordinary dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/03/11 20:28:22 naddy Exp $
d6 1
d30 1
@


1.47
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/01/10 15:50:58 naddy Exp $
d19 1
a19 1
WANTLIB=	c m ogg stdc++
d21 1
a21 2
MODULES=	converters/libiconv
LIB_DEPENDS=	audio/libogg
@


1.46
log
@maintenance update to flac 1.3.1, no significant user-visible changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/11/25 20:42:18 naddy Exp $
d29 1
a29 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-altivec \
@


1.45
log
@Security fixes for FLAC:
CVE-2014-8962: Heap buffer read overflow when processing ID3V2 metadata
CVE-2014-9028: Heap buffer write overflow in read_residual_partitioned_rice_
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2013/07/18 15:10:55 naddy Exp $
d5 1
a5 2
DISTNAME=	flac-1.3.0
REVISION=	1
d13 1
a13 1
# GPLv2
d30 1
a30 1
		--enable-sse \
d39 1
@


1.44
log
@Fix an arithmetic overflow in the RICE2 partitioner; from upstream git.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/05/31 14:34:26 naddy Exp $
d6 1
a6 1
REVISION=	0
@


1.44.4.1
log
@Security fixes for FLAC:
CVE-2014-8962: Heap buffer read overflow when processing ID3V2 metadata
CVE-2014-9028: Heap buffer write overflow in read_residual_partitioned_rice_
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2013/07/18 15:10:55 naddy Exp $
d6 1
a6 1
REVISION=	1
@


1.44.6.1
log
@Security fixes for FLAC:
CVE-2014-8962: Heap buffer read overflow when processing ID3V2 metadata
CVE-2014-9028: Heap buffer write overflow in read_residual_partitioned_rice_
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2013/07/18 15:10:55 naddy Exp $
d6 1
a6 1
REVISION=	1
@


1.43
log
@Major update to FLAC 1.3.0; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/03/27 16:37:09 naddy Exp $
d6 1
@


1.42
log
@Reinstate the interlibrary dependencies, fix .pc files.
Parts/help/input from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/03/21 08:45:12 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	flac-1.2.1
REVISION=	3
d8 2
a9 2
SHARED_LIBS +=  FLAC                 9.0      # .10.0
SHARED_LIBS +=  FLAC++               8.0      # .8.0
d13 1
a13 1
# BSD, GPL, GFDL
d17 1
a30 2
		--with-libiconv-prefix="${LOCALBASE}" \
		--with-ogg="${LOCALBASE}" \
d33 2
a34 2
CONFIGURE_ENV=	CPPFLAGS="-I${WRKSRC}/include"
MAKE_ENV=	MAKEOBJDIR=/nonexistent		# ignore ${WRKSRC}/obj
d38 1
a38 1
	perl -i -pe 's:%%PREFIX%%:${TRUEPREFIX}:' ${PREFIX}/man/man1/flac.1
@


1.41
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/03/10 22:55:02 espie Exp $
d6 1
a6 1
REVISION=	2
d19 1
a19 1
WANTLIB=	c m ogg>=5 stdc++
@


1.40
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2012/12/10 20:06:10 naddy Exp $
a27 1
USE_LIBTOOL=	Yes
@


1.39
log
@FLAC has moved to Xiph.Org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/01/03 07:03:54 ajacoutot Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.38
log
@Clean up the use of USE_GROFF for ports where mandoc doesn't have any
ERRORs and formatting looks Ok.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/11/15 00:22:46 espie Exp $
d6 1
a6 1
REVISION=	1
d8 1
a8 1
HOMEPAGE=	http://flac.sourceforge.net/
d20 1
a20 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=flac/}
@


1.37
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/10/18 16:52:44 espie Exp $
a40 1
USE_GROFF =	Yes
@


1.36
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/08/25 20:27:16 sthen Exp $
d22 1
a22 1
WANTLIB=	c m ogg.>=5 stdc++
d25 1
a25 1
LIB_DEPENDS=	::audio/libogg
d28 1
a28 1
BUILD_DEPENDS+=	::devel/nasm
@


1.35
log
@add missing wantlibs, new-style lib_depends/revision, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2008/04/07 03:54:39 fgsch Exp $
d41 1
@


1.34
log
@add -logg to the .pc file if we are compiled with ogg, so other software
depending on pkg-config's --libs output don't need to be patched. naddy@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/09/24 17:23:55 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d22 1
a22 1
WANTLIB=	c m
d25 1
a25 1
LIB_DEPENDS=	ogg.>=5::audio/libogg
@


1.33
log
@maintenance update to 1.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/09/18 18:22:32 naddy Exp $
d6 1
@


1.32
log
@Update to FLAC 1.2.0.  Many improvements.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/09/15 21:26:01 simon Exp $
d5 1
a5 1
DISTNAME=	flac-1.2.0
d8 2
a9 2
SHARED_LIBS +=  FLAC                 8.0      # .9.0
SHARED_LIBS +=  FLAC++               7.0      # .7.0
@


1.31
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/03/28 18:06:16 naddy Exp $
d5 1
a5 2
DISTNAME=	flac-1.1.2
PKGNAME=	${DISTNAME}p1
d8 2
a9 4
SHARED_LIBS +=	FLAC                 7.0      # .7.0
SHARED_LIBS +=	FLAC++               6.0      # .5.0
SHARED_LIBS +=	OggFLAC              3.0      # .3.0
SHARED_LIBS +=	OggFLAC++            3.0      # .2.0
d33 1
d35 4
a38 3
		--with-ogg="${LOCALBASE}"
CONFIGURE_ENV=	CPPFLAGS="-I${WRKSRC}/include" \
		ac_cv_path_XMMS_CONFIG=no
d42 2
a43 1
	@@cd ${PREFIX}/share/doc && mv ${DISTNAME} flac
@


1.30
log
@don't bother deleting ${WRKSRC}/obj, just ignore it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/10/28 10:30:41 espie Exp $
d3 1
a3 1
COMMENT=	"free lossless audio codec"
@


1.29
log
@re-format SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/08/01 11:17:56 espie Exp $
d40 1
a40 4

# "obj" is magic to our make(1)
post-configure:
	@@rm -rf ${WRKSRC}/obj
@


1.28
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/01/13 19:12:15 espie Exp $
d9 4
a12 4
SHARED_LIBS=	FLAC++		6.0 \
		FLAC		7.0 \
		OggFLAC++	3.0 \
		OggFLAC		3.0
@


1.27
log
@Bump C++ shared libs numbers and corresponding package names,
handles a through databases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/01/10 11:14:49 espie Exp $
d27 1
a27 1
LIB_DEPENDS=	ogg.5::audio/libogg
@


1.26
log
@zap some MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/12/29 12:32:23 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d9 1
a9 1
SHARED_LIBS=	FLAC++		5.0 \
d11 1
a11 1
		OggFLAC++	2.0 \
@


1.25
log
@forgot that one, last SHARED_LIBS in audio
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/10/18 23:24:25 naddy Exp $
a12 8

MODGNU_SHARED_LIBS=	FLAC++		'' \
			FLAC		'' \
			OggFLAC 	'' \
			OggFLAC++ 	''

LIBFLAC++_ALIAS=FLAC__
LIBOggFLAC++_ALIAS=OggFLAC__
@


1.24
log
@switch over to USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/03/09 14:41:18 naddy Exp $
d9 12
@


1.23
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/03/09 00:15:13 naddy Exp $
d6 1
d29 1
@


1.22
log
@Update to 1.1.2:
* better Ogg FLAC support
* speedups
* several new options to flac and metaflac
* several API additions
* streaming support in the XMMS plugin
* bugfixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/02/19 21:48:47 alek Exp $
d32 2
a33 2
CONFIGURE_ENV=	ac_cv_path_XMMS_CONFIG=no
CONFIGURE_ENV=	CPPFLAGS="-I${WRKSRC}/include"
@


1.21
log
@- Fix libiconv linking
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2004/11/21 17:51:44 espie Exp $
d5 1
a5 2
DISTNAME=	flac-1.1.0
PKGNAME=	${DISTNAME}p0
d11 1
a11 1
# (L)GPL, GFDL
a15 1
WANTLIB=		c m
d19 2
d22 1
a22 1
LIB_DEPENDS=	ogg.4::audio/libogg
d28 1
a28 1
CONFIGURE_STYLE= gnu
a29 1
		--enable-3dnow \
d32 2
a33 2
CONFIGURE_ENV=	CPPFLAGS="-I${WRKSRC}/include" \
		XMMS_CONFIG=/usr/bin/false
@


1.20
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2004/08/10 08:04:01 xsa Exp $
d6 1
@


1.19
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/04/18 00:28:40 naddy Exp $
d16 1
@


1.18
log
@Update to 1.1.0 and fix for ELF.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/02/25 00:02:38 naddy Exp $
d19 1
a19 1
MODULES=	iconv
@


1.17
log
@Disable SSE support, not safe.
Pointed out by Jolan Luff <jolan@@cryptonomicon.org>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/11/02 23:23:48 naddy Exp $
d5 1
a5 1
DISTNAME=	flac-1.0.4
d11 1
a19 1
BUILD_DEPENDS=	::converters/libiconv:extract
a26 2

# id3lib is only used by the XMMS plugin
d31 2
a32 7
CONFIGURE_ENV=	XMMS_CONFIG=/usr/bin/false \
		CPPFLAGS="-I${WRKSRC}/include"

# missing auxiliary script
post-extract:
	@@cp ${WRKDIR}/converters/libiconv/libiconv-*/autoconf/config.rpath \
		${WRKSRC}
@


1.16
log
@Make sure the port include files are searched first.
From: Alan Eldridge <alane@@geeksrus.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/10/31 21:15:08 naddy Exp $
d30 1
a30 1
		--enable-sse --enable-3dnow \
@


1.15
log
@Update to 1.0.4.  Notable improvements:
- bug fixes for 24-bit handling
- x86 encoder and decoder speedups
- reduced memory requirements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/07/07 19:09:28 naddy Exp $
d33 2
a34 1
CONFIGURE_ENV=	XMMS_CONFIG=/usr/bin/false
@


1.14
log
@Update to 1.0.3.  Changes in this release include:
- 10-15% decoder speedup
- 24-bit input support restored
- more robust plugins
- new metadata block for Vorbis-style tags
- vastly improved metadata editor
- new libFLAC++, a C++ object wrapper around libFLAC
- new metadata editing interface in libFLAC and libFLAC++
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/05/13 18:50:36 espie Exp $
d5 1
a5 1
DISTNAME=	flac-1.0.3
d18 3
a20 1
LIB_DEPENDS=	ogg.3::audio/libogg
d27 2
d30 3
a32 2
		--with-ogg=${LOCALBASE} \
		--enable-sse --enable-3dnow
d34 9
@


1.13
log
@Kill a few SUBDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/02/01 15:18:01 naddy Exp $
d5 1
a5 1
DISTNAME=	flac-1.0.2
a6 1
NEED_VERSION=	1.504
d16 1
a16 2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=flac/}
EXTRACT_SUFX=		-src.tar.gz
d26 1
d28 1
a28 9
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${WRKBUILD}/src/libFLAC/.libs -L${LOCALBASE}/lib" \
		XMMS_CONFIG=/usr/bin/false
MAKE_ENV=	INCLUDES="-I${WRKSRC}/include"

DOCDIR=		${PREFIX}/share/doc/flac

pre-build:
	@@rm -rf ${WRKSRC}/obj
d31 1
a31 5
	${INSTALL_DATA_DIR} ${DOCDIR}
	${INSTALL_DATA} ${WRKSRC}/doc/*.html ${DOCDIR}
	${INSTALL_DATA_DIR} ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/doc/images/*.gif ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/doc/images/*.jpg ${DOCDIR}/images
@


1.12
log
@- Update to 1.0.2: bug fixes, optional Ogg encapsulation.
- Drop xmms plugin due to libtool issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/11/10 15:00:47 espie Exp $
d17 1
a17 2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR=	flac
@


1.11
log
@Kill first component of BUILD_DEPENDS.

Fix sawfish comment while I'm at it.
`window manager for the X windows system'.
Like DUH ! It's going to be a window manager for my microwave oven ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/10/09 15:05:20 naddy Exp $
a3 1
COMMENT-xmms=	"XMMS input plugin for playing FLAC files"
d5 1
a5 3
VERSION=	1.0
DISTNAME=	flac-${VERSION}
PKGNAME-xmms=	xmms-flac-${VERSION}
d7 1
a7 1
NEED_VERSION=	1.474
d21 1
a21 10
# architectures XMMS runs on
.if ${MACHINE_ARCH} == "i386"
MULTI_PACKAGES=	-xmms
SUBPACKAGE?=
.  if !defined(PACKAGING)
LIB_DEPENDS+=	xmms.2::audio/xmms
.  endif
.else
CONFIGURE_ENV=	XMMS_CONFIG=/usr/bin/false
.endif
a26 1
USE_LIBTOOL=	Yes	# included libtool is broken
d28 6
a33 6
CONFIGURE_ARGS=	${CONFIGURE_SHARED} --enable-static

.if defined(PACKAGING) && ${SUBPACKAGE} == "-xmms"
LIB_DEPENDS=	FLAC.1::audio/flac
RUN_DEPENDS=	::audio/xmms
.endif
d37 1
a37 1
post-extract:
a38 2
# configure ignores LIBTOOL
	@@cd ${LOCALBASE}/share/libtool && cp ltconfig ltmain.sh ${WRKSRC}
@


1.10
log
@kludge: only build xmms module on platforms where xmms is available
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/09/26 14:18:23 naddy Exp $
d36 1
a36 1
BUILD_DEPENDS+=	nasm::devel/nasm
d45 1
a45 1
RUN_DEPENDS=	xmms::audio/xmms
@


1.9
log
@revert libtool changes; ugly but it builds at least
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/08/21 00:27:06 naddy Exp $
d10 1
a10 1
NEED_VERSION=	1.427
d24 2
d28 1
a28 2

.if !defined(PACKAGING)
d30 3
d34 1
@


1.8
log
@whack included libtool into shape; work from brad@@
@
text
@d34 1
d47 2
@


1.7
log
@unify XMMS plugin naming; simplify
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/07/26 17:37:46 naddy Exp $
a33 1
USE_LIBTOOL=	Yes	# included libtool is broken
a45 2
# configure ignores LIBTOOL
	@@cd ${LOCALBASE}/share/libtool && cp ltconfig ltmain.sh ${WRKSRC}
@


1.6
log
@- update to 1.0
- add XMMS plugin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/06/07 20:17:49 naddy Exp $
d4 1
a4 1
COMMENT-xmms=	"FLAC input plugin for XMMS"
d7 2
a8 3
PKGNAME=	flac-${VERSION}
PKGNAME-xmms=	flac-xmms-${VERSION}
DISTNAME=	flac-${VERSION}-src
d22 1
a36 1
WRKDIST=	${WRKDIR}/${DISTNAME:S/-src//}
@


1.5
log
@Update to 0.10:
* both encoder and decoder are significantly faster
* flac now has gzip-like command-line usage (should be more intuitive)
* the -# options have been tweaked for efficiency; -5 is the new default
* flac now autodetects WAVE input
* flac now ignores (with warning) unsupported WAVE subchunks
* new -o and --delete-input-file options
* new SEEKTABLE metadata block for storing seek points (speeds up seeking)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/05/20 12:06:51 naddy Exp $
d4 1
d6 4
a9 2
PKGNAME=	${DISTNAME:S/-src//}
DISTNAME=	flac-0.10-src
d11 1
a11 1
NEED_VERSION=	1.402
d24 6
d31 1
a31 1
BUILD_DEPENDS=	nasm::devel/nasm
d34 1
a36 1
CONFIGURE_ENV=	XMMS_CONFIG=no
d39 5
d48 2
@


1.4
log
@fix alpha; from Matt Zimmerman <mdz@@debian.org> on flac-dev
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/05/19 19:12:36 naddy Exp $
d6 1
a6 1
DISTNAME=	flac-0.9-src
d8 1
a8 1
NEED_VERSION=	1.365
d21 4
a24 1
USE_GMAKE=	Yes
@


1.3
log
@fix patch and simplify
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/05/18 19:14:38 naddy Exp $
a3 1
NOT_FOR_ARCHS=	alpha
@


1.2
log
@Update to 0.9.
Several bug fixes and new features.  Format changed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/03/28 12:27:20 naddy Exp $
d22 2
a23 3
BUILD_DEPENDS=	automake::devel/automake

CONFIGURE_STYLE= autoconf
d27 1
a31 6

# incomplete aclocal.m4
post-patch:
	@@cd ${WRKSRC} && \
		touch aclocal.m4 configure.in && \
		automake -i
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
DISTNAME=	flac-0.8-src
d26 1
d33 1
d43 2
a44 1
	${INSTALL_DATA} ${WRKSRC}/doc/images/* ${DOCDIR}/images
@


1.1.1.1
log
@Import of flac 0.8.

flac is a free lossless audio codec.  It does not compete with
MP3/OggVorbis, which are lossy compression schemes.  Instead, flac
can be considered an equivalent to gzip/bzip2, optimized for audio
recordings (wav files).
@
text
@@
