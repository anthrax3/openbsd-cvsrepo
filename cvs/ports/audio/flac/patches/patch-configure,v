head	1.15;
access;
symbols
	OPENBSD_6_1:1.15.0.2
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.14.0.8
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.4
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.13.0.6
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.4
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.22
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.20
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.18
	OPENBSD_5_0:1.12.0.16
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.14
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.12
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.10
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.8
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.6
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.4
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.2
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.10.0.12
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.10
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.8
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.6
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.4
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.8.0.6
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.4
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3;
locks; strict;
comment	@# @;


1.15
date	2017.01.12.21.13.58;	author naddy;	state Exp;
branches;
next	1.14;
commitid	G7XZE7rmA4h7Glzy;

1.14
date	2015.01.10.15.50.58;	author naddy;	state Exp;
branches;
next	1.13;
commitid	fcbq5beq7jpL0DD1;

1.13
date	2013.05.31.14.34.27;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2007.09.24.17.23.55;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2007.09.18.18.22.32;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.09.00.15.14;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2005.02.19.21.48.47;	author alek;	state Exp;
branches;
next	1.8;

1.8
date	2003.04.18.00.28.40;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2002.11.03.01.55.16;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2002.10.31.21.15.08;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2002.07.07.19.09.29;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.01.15.18.02;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.07.26.17.37.46;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.07.20.17.50;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.19.19.12.37;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Update to 1.3.2 for numerous small bug fixes.
The API documentation is no longer included (requires Doxygen).
@
text
@$OpenBSD: patch-configure,v 1.14 2015/01/10 15:50:58 naddy Exp $
--- configure.orig	Sun Jan  1 04:46:48 2017
+++ configure	Sun Jan  8 22:55:07 2017
@@@@ -20547,8 +20547,8 @@@@ if test "x$debug" = xtrue; then
 	CFLAGS="-g $CFLAGS"
 else
 	CPPFLAGS="-DNDEBUG $CPPFLAGS"
-	CFLAGS=$(echo "$CFLAGS" | sed 's/-O2//')
-	CFLAGS="-O3 -funroll-loops $CFLAGS"
+	#CFLAGS=$(echo "$CFLAGS" | sed 's/-O2//')
+	#CFLAGS="-O3 -funroll-loops $CFLAGS"
 fi
 
 
@


1.14
log
@maintenance update to flac 1.3.1, no significant user-visible changes
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.13 2013/05/31 14:34:27 naddy Exp $
--- configure.orig	Thu Nov 27 03:46:58 2014
+++ configure	Sun Nov 30 21:44:45 2014
@@@@ -19874,8 +19874,8 @@@@ if test "x$debug" = xtrue; then
d8 1
a8 1
-	CFLAGS=$(echo "$CFLAGS" | sed 's/-O2//;s/-g//')
d10 1
a10 1
+	#CFLAGS=$(echo "$CFLAGS" | sed 's/-O2//;s/-g//')
a14 9
@@@@ -20051,7 +20051,7 @@@@ rm -f core conftest.err conftest.$ac_objext \
 
 		fi
 
-	if test "x$asm_optimisation$sse_os" = "xyesyes" ; then
+	if false test "x$asm_optimisation$sse_os" = "xyesyes" ; then
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $CC accepts -msse2" >&5
 $as_echo_n "checking if $CC accepts -msse2... " >&6; }
 	ac_add_cflags__old_cflags="$CFLAGS"
@


1.13
log
@Major update to FLAC 1.3.0; ok sthen@@
@
text
@d1 6
a6 4
$OpenBSD: patch-configure,v 1.12 2007/09/24 17:23:55 naddy Exp $
--- configure.orig	Mon May 27 04:11:54 2013
+++ configure	Wed May 29 16:41:05 2013
@@@@ -19807,7 +19807,7 @@@@ else
d8 9
a16 4
 	if test "x$GCC" = xyes; then
 		if test "x$user_cflags" = x; then
-			CFLAGS="-O3 -funroll-loops -Wall -W -Winline"
+			CFLAGS="-Wall -W $CFLAGS"
d18 6
a23 2
 	fi
 fi
@


1.12
log
@maintenance update to 1.2.1
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.11 2007/09/18 18:22:32 naddy Exp $
--- configure.orig	Tue Sep 18 22:24:27 2007
+++ configure	Tue Sep 18 22:25:47 2007
@@@@ -23490,7 +23490,7 @@@@ else
d7 4
a10 3
 		CPPFLAGS="-DFLaC__INLINE=__inline__ $CPPFLAGS"
-		CFLAGS="-O3 -funroll-loops -finline-functions -Wall -W -Winline $CFLAGS"
+		CFLAGS="-Wall -W $CFLAGS"
a12 10
 
@@@@ -24514,7 +24514,7 @@@@ s,@@OGG_CFLAGS@@,$OGG_CFLAGS,;t t
 s,@@OGG_LIBS@@,$OGG_LIBS,;t t
 s,@@FLaC__HAS_OGG_TRUE@@,$FLaC__HAS_OGG_TRUE,;t t
 s,@@FLaC__HAS_OGG_FALSE@@,$FLaC__HAS_OGG_FALSE,;t t
-s,@@LIBICONV@@,$LIBICONV,;t t
+s,@@LIBICONV@@,$LTLIBICONV,;t t
 s,@@LTLIBICONV@@,$LTLIBICONV,;t t
 s,@@DOCBOOK_TO_MAN@@,$DOCBOOK_TO_MAN,;t t
 s,@@FLaC__HAS_DOCBOOK_TO_MAN_TRUE@@,$FLaC__HAS_DOCBOOK_TO_MAN_TRUE,;t t
@


1.11
log
@Update to FLAC 1.2.0.  Many improvements.
@
text
@d1 5
a5 6
$OpenBSD$
--- configure.orig	Tue Jul 24 05:04:12 2007
+++ configure	Wed Aug 29 21:20:54 2007
@@@@ -23454,7 +23454,7 @@@@ if test "x$debug" = xtrue; then
 else
 	OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -DNDEBUG"
d7 3
a9 2
-		OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -O3 -funroll-loops -finline-functions -Wall -W -Winline -DFLaC__INLINE=__inline__"
+		OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -Wall -W -DFLaC__INLINE=__inline__"
d12 2
a13 2
 CFLAGS="$OUR_CFLAGS_HEAD $CFLAGS"
@@@@ -24459,7 +24459,7 @@@@ s,@@OGG_CFLAGS@@,$OGG_CFLAGS,;t t
@


1.10
log
@Update to 1.1.2:
* better Ogg FLAC support
* speedups
* several new options to flac and metaflac
* several API additions
* streaming support in the XMMS plugin
* bugfixes
@
text
@d2 3
a4 5
--- configure.orig	Sat Feb  5 03:22:32 2005
+++ configure	Tue Mar  8 00:21:45 2005
@@@@ -10541,9 +10541,9 @@@@ OUR_CFLAGS_HEAD='-I$(top_builddir) -I$(s
 if test x$debug = xtrue; then
 	OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -g -O0 -DDEBUG"
d6 3
a8 4
-	OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -O2 -DNDEBUG"
+	OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -DNDEBUG"
 	if test x$GCC = xyes; then
-		OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -O3 -fomit-frame-pointer -funroll-loops -finline-functions -Wall -W -Winline -DFLaC__INLINE=__inline__"
d13 4
a16 4
@@@@ -11586,7 +11586,7 @@@@ s,@@XMMS_GENERAL_PLUGIN_DIR@@,$XMMS_GENERA
 s,@@XMMS_EFFECT_PLUGIN_DIR@@,$XMMS_EFFECT_PLUGIN_DIR,;t t
 s,@@FLaC__HAS_XMMS_TRUE@@,$FLaC__HAS_XMMS_TRUE,;t t
 s,@@FLaC__HAS_XMMS_FALSE@@,$FLaC__HAS_XMMS_FALSE,;t t
d20 2
a21 2
 s,@@DOXYGEN@@,$DOXYGEN,;t t
 s,@@FLaC__HAS_DOXYGEN_TRUE@@,$FLaC__HAS_DOXYGEN_TRUE,;t t
@


1.9
log
@- Fix libiconv linking
- Bump PKGNAME
@
text
@d1 4
a4 31
$OpenBSD: patch-configure,v 1.8 2003/04/18 00:28:40 naddy Exp $
--- configure.orig	Sat Jan 25 19:41:21 2003
+++ configure	Sat Feb 19 22:35:25 2005
@@@@ -7920,7 +7920,7 @@@@ else
 fi
 
 case "$host" in
-	i[3-6]86-*-openbsd*) OBJ_FORMAT=aoutb ;;
+	i386-*-openbsd3.[0-2]) OBJ_FORMAT=aoutb ;;
 	*) OBJ_FORMAT=elf ;;
 esac
 
@@@@ -9361,6 +9361,8 @@@@ _ACEOF
   fi
 
 
+# Disable id3lib detection
+if false; then
 
 # Check whether --with-id3lib or --without-id3lib was given.
 if test "${with_id3lib+set}" = set; then
@@@@ -9545,6 +9547,8 @@@@ echo "$as_me: WARNING: *** id3lib not fo
 
 	rm -f conf.id3libtest
 
+fi
+have_id3lib=no
 
 
 if test x$have_id3lib = xyes; then
@@@@ -11251,7 +11255,7 @@@@ OUR_CFLAGS_HEAD='-I$(top_builddir) -I$(s
d8 1
a8 1
-	OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -O3 -DNDEBUG"
d11 2
a12 1
 		OUR_CFLAGS_HEAD="$OUR_CFLAGS_HEAD -fomit-frame-pointer -funroll-loops -finline-functions -Wall -W -Winline -DFLaC__INLINE=__inline__"
d14 3
a16 1
@@@@ -12134,7 +12138,7 @@@@ s,@@XMMS_GENERAL_PLUGIN_DIR@@,$XMMS_GENERA
d23 2
a24 2
 s,@@ID3LIB_CFLAGS@@,$ID3LIB_CFLAGS,;t t
 s,@@ID3LIB_LIBS@@,$ID3LIB_LIBS,;t t
@


1.8
log
@Update to 1.1.0 and fix for ELF.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.7 2002/11/03 01:55:16 naddy Exp $
d3 1
a3 1
+++ configure	Fri Apr 18 01:41:28 2003
d40 9
@


1.7
log
@Allow building if id3lib is present.
@
text
@d1 31
a31 31
$OpenBSD: patch-configure,v 1.6 2002/10/31 21:15:08 naddy Exp $
--- configure.orig	Wed Sep 25 06:53:08 2002
+++ configure	Sun Nov  3 02:48:51 2002
@@@@ -5388,7 +5388,7 @@@@ else
     hardcode_direct=yes
     hardcode_shlibpath_var=no
     if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
-      archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
+      archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
       hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
       export_dynamic_flag_spec='${wl}-E'
     else
@@@@ -5398,7 +5398,7 @@@@ else
 	hardcode_libdir_flag_spec='-R$libdir'
         ;;
       *)
-        archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
+        archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
         hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
         ;;
       esac
@@@@ -9519,7 +9519,7 @@@@ if { (eval echo "$as_me:$LINENO: \"$ac_l
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  . conftest.id3; echo "${ID3LIB_MAJOR}.${ID3LIB_MINOR}.${ID3LIB_PATCH}"
+  . ./conftest.id3; echo "${ID3LIB_MAJOR}.${ID3LIB_MINOR}.${ID3LIB_PATCH}"
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
@@@@ -11113,7 +11113,7 @@@@ OUR_CFLAGS_HEAD='-I$(top_builddir) -I$(s
d33 1
a33 1
 	OUR_CFLAGS_TAIL="-g -O0 -DDEBUG"
d35 2
a36 2
-	OUR_CFLAGS_TAIL="-O3 -DNDEBUG"
+	OUR_CFLAGS_TAIL="-DNDEBUG"
d38 1
a38 1
 		OUR_CFLAGS_TAIL="$OUR_CFLAGS_TAIL -fomit-frame-pointer -funroll-loops -finline-functions -Wall -W -Winline -DFLaC__INLINE=__inline__"
@


1.6
log
@Update to 1.0.4.  Notable improvements:
- bug fixes for 24-bit handling
- x86 encoder and decoder speedups
- reduced memory requirements
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.5 2002/07/07 19:09:29 naddy Exp $
d3 28
a30 1
+++ configure	Thu Oct 31 16:51:04 2002
@


1.5
log
@Update to 1.0.3.  Changes in this release include:
- 10-15% decoder speedup
- 24-bit input support restored
- more robust plugins
- new metadata block for Vorbis-style tags
- vastly improved metadata editor
- new libFLAC++, a C++ object wrapper around libFLAC
- new metadata editing interface in libFLAC and libFLAC++
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Sat Jul  6 02:35:16 2002
+++ configure	Sat Jul  6 02:35:57 2002
@@@@ -9995,7 +9995,7 @@@@ OUR_CFLAGS_HEAD='-I$(top_builddir) -I$(s
@


1.4
log
@- Update to 1.0.2: bug fixes, optional Ogg encapsulation.
- Drop xmms plugin due to libtool issues.
@
text
@d1 4
a4 9
$OpenBSD: patch-configure,v 1.3 2001/07/26 17:37:46 naddy Exp $
--- configure.orig	Tue Dec  4 08:10:10 2001
+++ configure	Thu Jan 17 21:24:11 2002
@@@@ -8240,11 +8240,11 @@@@ echo "$as_me: error: No unsigned 64 bit 
 fi
 
 SAVE_CFLAGS="$CFLAGS"
-CFLAGS='-I$(top_builddir) -I$(srcdir)/include -I $(top_srcdir)/include -Wall -W'
+CFLAGS='-I$(top_builddir) -I$(srcdir)/include -I $(top_srcdir)/include'
d6 1
a6 1
 	CFLAGS="$CFLAGS -g -O0 -DDEBUG"
d8 2
a9 2
-	CFLAGS="$CFLAGS -O3 -DNDEBUG"
+	CFLAGS="$CFLAGS -DNDEBUG"
d11 1
a11 1
 		CFLAGS="$CFLAGS -fomit-frame-pointer -funroll-loops -finline-functions -Winline -DFLaC__INLINE=__inline__"
@


1.3
log
@- update to 1.0
- add XMMS plugin
@
text
@d1 4
a4 5
$OpenBSD: patch-configure,v 1.2 2001/06/07 20:17:50 naddy Exp $
--- configure.orig	Sun Jul 22 20:03:23 2001
+++ configure	Mon Jul 23 23:15:53 2001
@@@@ -1578,7 +1578,7 @@@@ else
   FLaC__CPU_SPARC_FALSE=
a5 8
 case "$host" in
-	i3-686-*-openbsd*) OBJ_FORMAT=aoutb ;;
+	i386-*-openbsd*) OBJ_FORMAT=aoutb ;;
 	*) OBJ_FORMAT=elf ;;
 esac
 
@@@@ -2136,11 +2136,11 @@@@ fi
 
@


1.2
log
@Update to 0.10:
* both encoder and decoder are significantly faster
* flac now has gzip-like command-line usage (should be more intuitive)
* the -# options have been tweaked for efficiency; -5 is the new default
* flac now autodetects WAVE input
* flac now ignores (with warning) unsupported WAVE subchunks
* new -o and --delete-input-file options
* new SEEKTABLE metadata block for storing seek points (speeds up seeking)
@
text
@d1 13
a13 4
$OpenBSD$
--- configure.orig	Thu Jun  7 20:02:11 2001
+++ configure	Thu Jun  7 20:03:22 2001
@@@@ -1899,14 +1899,11 @@@@ EOF
a14 1
 fi
d16 3
a18 2
-CFLAGS='-I./include -I $(top_srcdir)/include -Wall -W'
+CFLAGS="$CFLAGS -I./include -I \$(top_srcdir)/include"
a22 3
-		if test x$GCC = xyes; then
-			CFLAGS="$CFLAGS -fomit-frame-pointer -funroll-loops -ffast-math -finline-functions"
-		fi
d24 3
a26 3
 fi
 
 trap '' 1 2 15
@


1.1
log
@fix patch and simplify
@
text
@d2 4
a5 4
--- configure.orig	Sat May 19 21:07:15 2001
+++ configure	Sat May 19 21:07:49 2001
@@@@ -1747,11 +1747,11 @@@@ else
   XMMS_FALSE=
d11 1
a11 2
-  CFLAGS="$CFLAGS  -g -O0 -DDEBUG"
+  CFLAGS="$CFLAGS -g -DDEBUG"
d13 5
a17 2
-  CFLAGS="$CFLAGS -O3 -fomit-frame-pointer -funroll-loops -ffast-math -finline-functions -DNDEBUG"
+  CFLAGS="$CFLAGS -DNDEBUG"
@

