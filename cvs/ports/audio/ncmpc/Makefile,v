head	1.35;
access;
symbols
	OPENBSD_6_2:1.35.0.2
	OPENBSD_6_2_BASE:1.35
	OPENBSD_6_1:1.31.0.2
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.28.0.8
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.28.0.4
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.28.0.6
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.28.0.2
	OPENBSD_5_7_BASE:1.28
	OPENBSD_5_6:1.27.0.4
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.27.0.2
	OPENBSD_5_5_BASE:1.27
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.24.0.2
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.9.0.6
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.4
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.5.0.4
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	bernd_2006-jun-03:1.1.1.1
	bernd:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2017.09.26.10.18.41;	author dcoppa;	state Exp;
branches;
next	1.34;
commitid	bzaOYdBypcmTJqKn;

1.34
date	2017.09.26.09.55.07;	author dcoppa;	state Exp;
branches;
next	1.33;
commitid	jZbbEbWnk74e5Hb1;

1.33
date	2017.09.14.16.21.15;	author dcoppa;	state Exp;
branches;
next	1.32;
commitid	sLM3ZZ7C2Mabs4cM;

1.32
date	2017.09.04.10.54.20;	author dcoppa;	state Exp;
branches;
next	1.31;
commitid	Atq8Vy2hbfyrnFnu;

1.31
date	2017.03.27.17.26.10;	author dcoppa;	state Exp;
branches;
next	1.30;
commitid	DbfCu4XUd2AOWkyb;

1.30
date	2017.03.23.07.33.20;	author dcoppa;	state Exp;
branches;
next	1.29;
commitid	J9aY7AoTs8bp2IzJ;

1.29
date	2016.08.19.05.04.38;	author dcoppa;	state Exp;
branches;
next	1.28;
commitid	P1WxXBpeIs586BUd;

1.28
date	2014.09.02.08.44.15;	author dcoppa;	state Exp;
branches;
next	1.27;
commitid	amqbNp1O4WRzlDgW;

1.27
date	2013.09.24.14.30.33;	author dcoppa;	state Exp;
branches;
next	1.26;

1.26
date	2013.09.19.16.34.14;	author dcoppa;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.10.22.55.04;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2012.09.01.14.36.56;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2012.03.04.16.57.19;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2011.09.17.13.30.15;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2011.09.16.08.26.10;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2011.04.06.11.13.09;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.15.00.22.47;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.18.22.43.10;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.21.35.48;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.18.16.52.46;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.08.31.20.50.33;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2010.08.19.08.08.24;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.04.20.21.40.45;	author edd;	state Exp;
branches;
next	1.12;

1.12
date	2010.04.05.19.05.11;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2010.02.13.13.17.03;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2009.09.10.22.17.52;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2008.07.21.07.53.03;	author bernd;	state Exp;
branches;
next	1.8;

1.8
date	2007.10.31.06.34.55;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.19.19.15.12;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2007.09.15.21.26.02;	author simon;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.11.17.36.40;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2006.12.16.12.22.32;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.14.10.03.05;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2006.09.18.11.40.06;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.03.16.50.53;	author bernd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.06.03.16.50.53;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.35
log
@
Specify configure args explicitly
@
text
@# $OpenBSD: Makefile,v 1.34 2017/09/26 09:55:07 dcoppa Exp $

COMMENT=		curses based frontend for mpd

VER=			0.28
DISTNAME=		ncmpc-${VER}
EPOCH=			0
CATEGORIES=		audio

HOMEPAGE=		http://www.musicpd.org/clients/ncmpc/

MAINTAINER=		David Coppa <dcoppa@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c glib-2.0 intl mpdclient>=1 ncursesw

MASTER_SITES=		http://www.musicpd.org/download/ncmpc/${VER:R}/

EXTRACT_SUFX=		.tar.xz

MODULES=		devel/meson

BUILD_DEPENDS=		devel/gettext-tools

LIB_DEPENDS=		devel/gettext \
			devel/glib2 \
			audio/libmpdclient>=2.4

CONFIGURE_ARGS=		-Dcolors=ncursesw \
			-Dcurses=ncursesw \
			-Dlirc=false \
			-Dlocale=true \
			-Dmouse=true
CONFIGURE_ENV=		CPP=${CPP} \
			CPPFLAGS="-D_GNU_SOURCE \
				  -D_DEFAULT_SOURCE \
				  -I${LOCALBASE}/include" \
			LDFLAGS="-lncursesw -L${LOCALBASE}/lib"

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ncmpc
	mv ${PREFIX}/share/doc/ncmpc/{config.sample,keys.sample,ncmpc.lirc} \
		${PREFIX}/share/examples/ncmpc/

.include <bsd.port.mk>
@


1.34
log
@
Update to ncmpc-0.28
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2017/09/14 16:21:15 dcoppa Exp $
d31 2
a32 1
CONFIGURE_ARGS=		-Dcurses='ncursesw' \
d34 2
a35 1
			-Dlocale=true
@


1.33
log
@
Drop gettext module and fix dependencies accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2017/09/04 10:54:20 dcoppa Exp $
d5 1
a5 1
VER=			0.27
a6 1
REVISION=		1
d19 6
d31 3
a33 3
MASTER_SITES=		http://www.musicpd.org/download/ncmpc/${VER:R}/

CONFIGURE_STYLE=	gnu
d35 4
a38 2
			CPPFLAGS=-I${LOCALBASE}/include \
			LDFLAGS=-L${LOCALBASE}/lib
@


1.32
log
@
fix crash on lyrics screen
(upstream git commit 36e3f4589afc5bf3d17c0584719a86a577340fa0)

fix memory leak
(upstream git commit c4aca0137a7a819270eabb3092e655ccaa721065)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2017/03/27 17:26:10 dcoppa Exp $
d7 1
a7 1
REVISION=		0
d18 1
a18 1
WANTLIB=		c glib-2.0 mpdclient>=1 ncursesw
d20 4
a23 1
LIB_DEPENDS=		devel/glib2 \
a24 2

MODULES=		devel/gettext
@


1.31
log
@
Update to ncmpc-0.27
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2017/03/23 07:33:20 dcoppa Exp $
d7 1
@


1.30
log
@
Update to ncmpc-0.26
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/08/19 05:04:38 dcoppa Exp $
d5 1
a5 1
VER=			0.26
@


1.29
log
@
Update to ncmpc-0.25
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/09/02 08:44:15 dcoppa Exp $
d5 1
a5 1
VER=			0.25
@


1.28
log
@
Update to ncmpc-0.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/09/24 14:30:33 dcoppa Exp $
d5 1
a5 1
VER=			0.24
d17 2
a18 1
WANTLIB=		c glib-2.0 mpdclient>=1 ncursesw pthread
d21 1
@


1.27
log
@Use "${VER:R}", as suggested by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/09/19 16:34:14 dcoppa Exp $
d5 1
a5 1
VER=			0.21
d17 1
a17 1
WANTLIB=		c glib-2.0 mpdclient>=1 ncursesw
@


1.26
log
@Update to ncmpc-0.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/03/10 22:55:04 espie Exp $
d5 2
a6 3
MAJV=			0
MINV=			21
DISTNAME=		ncmpc-${MAJV}.${MINV}
d22 1
a22 1
MASTER_SITES=		http://www.musicpd.org/download/ncmpc/${MAJV}/
@


1.25
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/09/01 14:36:56 ajacoutot Exp $
d5 3
a7 1
DISTNAME=		ncmpc-0.20
a9 1
REVISION=	0
d11 1
a11 1
HOMEPAGE=		http://mpd.wikia.com/wiki/Client:Ncmpc
d23 1
a23 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=musicpd/}
@


1.24
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/03/04 16:57:19 dcoppa Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.23
log
@Updates for musicpd ports:

libmpdclient 2.6 -> 2.7
mpc 0.21 -> 0.22
mpd 0.16.5 -> 0.16.7
ncmpc 0.19 -> 0.20

Ok Tobias Ulmer (maintainer) who also requested to give maintainership
to me

Ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/09/17 13:30:15 jasper Exp $
d8 1
@


1.22
log
@- bugfix update to 0.19

ok tobias ulmer (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/09/16 08:26:10 espie Exp $
d5 1
a5 1
DISTNAME=		ncmpc-0.19
d11 1
a11 1
MAINTAINER=		Tobias Ulmer <tobiasu@@tmux.org>
d27 2
a28 1
CONFIGURE_ENV=		CPPFLAGS=-I${LOCALBASE}/include \
@


1.21
log
@normalize pkgpath in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/04/06 11:13:09 jasper Exp $
d5 1
a5 2
DISTNAME=		ncmpc-0.18
REVISION =		0
@


1.20
log
@- update ncmpc to 0.18
* from tobias ulmer (MAINTAINER)
- be sure to depend on the right libmpdclient version
* from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/15 00:22:47 espie Exp $
d6 1
@


1.19
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/18 22:43:10 sthen Exp $
d5 1
a5 1
DISTNAME=		ncmpc-0.17
a6 1
REVISION=		0
d19 1
a19 1
WANTLIB=		c glib-2.0 mpdclient ncurses
d21 1
a21 1
			audio/libmpdclient
a28 1
USE_GROFF =		Yes
@


1.18
log
@new-style WANTLIB/LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 21:35:48 sthen Exp $
d21 2
a22 2
LIB_DEPENDS=		::devel/glib2 \
			::audio/libmpdclient
d30 1
a30 1
USE_GROFF =	Yes
@


1.17
log
@fix a few tabtabUSE_GROFF, problem pointed out by Alexandr Shadchin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/18 16:52:46 espie Exp $
d20 3
a22 2
WANTLIB=		c ncurses
LIB_DEPENDS=		glib-2.0::devel/glib2 mpdclient::audio/libmpdclient
@


1.16
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/08/31 20:50:33 jasper Exp $
d29 1
a29 1
			USE_GROFF =	Yes
@


1.15
log
@- fix implicit declaration
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/08/19 08:08:24 jasper Exp $
d29 1
@


1.14
log
@- update ncmpc to 0.17

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/04/20 21:40:45 edd Exp $
d7 1
@


1.13
log
@Fix the shuffle feature when no range selection is made in ncmpc.
Looks OK, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/04/05 19:05:11 landry Exp $
d5 2
a6 2
DISTNAME=		ncmpc-0.16.1
PKGNAME=		${DISTNAME}p0v0
@


1.12
log
@Update to ncmpc 0.16.1, from maintainer Tobias Ulmer, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/02/13 13:17:03 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}v0
@


1.11
log
@this works fine on sgi and loongson, remove BROKEN marker

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/09/10 22:17:52 jasper Exp $
d5 2
a6 2
DISTNAME=		ncmpc-20070917
PKGNAME=		${DISTNAME}p1
d9 1
a9 1
HOMEPAGE=		http://hem.bredband.net/kaw/ncmpc/
d13 1
a13 1
# GPL
d20 1
a20 7
LIB_DEPENDS=		glib-2.0::devel/glib2

USE_LIBTOOL=    	Yes

BUILD_DEPENDS=		${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS}

d23 1
a23 1
MASTER_SITES=		http://www.phil.uu.nl/~lievisse/distfiles/
d26 7
a32 12
AUTOMAKE_VERSION=	1.8
AUTOCONF_VERSION=	2.61
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

CFLAGS+=		-ftrampolines

WRKDIST= 		${WRKDIR}/ncmpc

pre-configure:
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} ./autogen.sh
@


1.10
log
@- move distfiles to another site
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.9 2008/07/21 07:53:03 bernd Exp $

# mips64 architecture does not support trampoline code yet
NOT_FOR_ARCHS=		mips64
@


1.9
log
@Add a sigwinch handler so ncmpc will resize on xterm resize.

From Tobias Ulmer (MAINTAINER)

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/10/31 06:34:55 jasper Exp $
d32 1
a32 1
MASTER_SITES=		http://humppa.nl/distfiles/
@


1.8
log
@- use libtool
- fix a bug in libmpdclient where it doesn't break to use a valid
  address from getaddrinfo, so it always uses the last one. which
  can be an ipv6 address, and that fails when mpd is only bound
  to localhost

From Nicholas Marriott <nicm__ at ntlworld.com>
via Tobias Ulmer <tobiasu@@tmux.org> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/19 19:15:12 jasper Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d36 1
a36 1
AUTOCONF_VERSION=	2.59
d44 1
a44 1
post-patch:
@


1.7
log
@update ncmpc to an svn snapshot (6899),
includes lots of bug fixes and new features

ok Tobias Ulmer (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/09/15 21:26:02 simon Exp $
d9 1
d24 2
@


1.6
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/01/11 17:36:40 jasper Exp $
d8 1
a8 2
DISTNAME=		ncmpc-0.11.1
PKGNAME=		${DISTNAME}p0
d24 3
d29 1
a29 2
MASTER_SITES=		${HOMEPAGE}files/ \
			http://mercury.chem.pitt.edu/~shank/
d32 2
d38 6
@


1.5
log
@replace broken chars with '?' and make the "Unable to convert..." message
go away.

from MAINTAINER (Tobias Ulmer <tobias@@tmux.org>)

"go ahead" bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/12/16 12:22:32 espie Exp $
d6 1
a6 1
COMMENT=		"curses based frontend for mpd"
@


1.4
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/14 10:03:05 bernd Exp $
d9 1
@


1.3
log
@Add devel/pkgconfig to BUILD_DEPENDS. From maintainer Tobias Ulmer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/09/18 11:40:06 espie Exp $
a21 1
BUILD_DEPENDS=		::devel/pkgconfig
@


1.2
log
@remove `empty' version spec (.0.0) which is no longer needed to desambiguate
library names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/06/03 16:50:53 bernd Exp $
d22 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d22 1
a22 1
LIB_DEPENDS=		glib-2.0.0.0::devel/glib2
@


1.1.1.1
log
@Initial import of ncmpc-0.11.1.

A curses based frontend for mpd.

submitted and maintained by Tobias Ulmer <tobiasu at tmux.org>
@
text
@@
