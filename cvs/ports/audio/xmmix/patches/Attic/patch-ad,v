head	1.2;
access;
symbols
	OPENBSD_3_0:1.1.0.14
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.12
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.10
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.8
	OPENBSD_2_7_BASE:1.1
	OPENBSD_2_6:1.1.0.6
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.4
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2002.01.14.13.47.22;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	98.07.30.04.01.21;	author form;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Submitted by Dan Weeks <danimal@@danimal.org>:
* md5->distinfo
* rename/update patches
* updated homepage and master_sites
* take over maintainership
@
text
@*** mixer.c.orig	Thu Nov  7 22:00:26 1996
--- mixer.c	Thu Jul 30 10:31:56 1998
***************
*** 104,109 ****
--- 104,117 ----
   ***********************/
  
  
+ #if defined(__NetBSD__) || defined(__OpenBSD__)
+ void
+ mxchg(int sig)
+ {
+ 	deliverSIGIO();
+ }
+ #endif
+ 
  /*
   * do_ioctl
   *	Perform ioctl command.  If file is not yet open or if we
***************
*** 681,691 ****
--- 689,701 ----
  	/* Query sound driver version */
  	if ((fp = fopen("/dev/sndstat", "r")) == NULL) {
  		if (!app_data.demo) {
+ #if !defined(__NetBSD__) && !defined(__OpenBSD__)
  			fprintf(errfp, "%s: %s: %s\n",
  				PROGNAME,
  				"Cannot open /dev/sndstat",
  				"assuming pre-3.0 sound driver.");
  			maxdevs = MAXDEVS_V2;
+ #endif
  		}
  		return;
  	}
***************
*** 915,920 ****
--- 925,931 ----
  mx_start(widgets_t *m)
  {
  	char	msg[256];
+ 	int one = 1;
  
  	if (app_data.autoload != NULL && app_data.autoload[0] != '\0' &&
  	    strcmp(app_data.autoload, "/dev/null") != 0) {
***************
*** 930,935 ****
--- 941,954 ----
  		}
  	}
  
+ #if defined(__NetBSD__) || defined(__OpenBSD__)
+ 	signal(SIGIO, mxchg);
+ 	ioctl(dev_fd, FIOASYNC, &one);
+ #endif
+ 
+ 	/* Query hardware mixer settings */
+ 	mx_queryhw(&widgets);
+ 
  	/* Update screen controls to match current status */
  	mx_updctl(m);
  }
***************
*** 1531,1536 ****
--- 1550,1571 ----
  	if (p->reason != XmCR_FOCUS || form == (Widget) NULL)
  		return;
  
+ 	/* Query hardware mixer settings */
+ 	mx_queryhw(&widgets);
+ 
+ 	/* Update screen controls */
+ 	mx_updctl(&widgets);
+ }
+ 
+ 
+ /*
+  * mx_change
+  *	Mixer device has changed
+  */
+ /*ARGSUSED*/
+ void
+ mx_change(XtPointer client_data)
+ {
  	/* Query hardware mixer settings */
  	mx_queryhw(&widgets);
  
@


1.1
log
@some fixes
@
text
@@

