head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.36
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.34
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.30
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.32
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.28
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.26
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.24
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.22
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.20
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.18
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.16
	OPENBSD_5_0:1.2.0.14
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.12
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.10
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.8
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.6
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.4
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.0.6
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.4
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.06.09.23.46.20;	author okan;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.09.10.15.15;	author millert;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- maintenance update to 0.2.4.2 from Arnaud Bergeron (MAINTAINER)
- convert @@perl goo to SUBST_CMD

"looks good" pval@@
@
text
@$OpenBSD: patch-src_mDNSUNP_c,v 1.1 2007/01/09 10:15:15 millert Exp $
--- src/mDNSUNP.c.orig	Sat Apr 19 15:17:23 2008
+++ src/mDNSUNP.c	Sat May 31 14:29:04 2008
@@@@ -159,22 +159,8 @@@@ struct ifi_info *get_ifi_info(int family, int doaliase
 /* include get_ifi_info2 */
     for (ptr = buf; ptr < buf + ifc.ifc_len; ) {
         ifr = (struct ifreq *) ptr;
-
-		len = GET_SA_LEN(ifr->ifr_addr);
-
-		/* This is completely whacked, and I really need to
-		 * find out why this is the case, but I need to
-		 * release a 0.2.2, and as the next stable won't
-		 * have the apple mDNS included, I guess it's a
-		 * small price to pay.
-		 */
-#ifdef FREEBSD
-		    ptr += sizeof(ifr->ifr_name) + len; /* for next one in buffer */
-		//		ptr += sizeof(*ifr);
-#else
-
-		    ptr += sizeof(struct ifreq); /* for next one in buffer */
-#endif
+	len = GET_SA_LEN(ifr->ifr_addr);
+	ptr += sizeof(ifr->ifr_name) + len; /* for next one in buffer */
     
 //        fprintf(stderr, "intf %d name=%s AF=%d\n", index, ifr->ifr_name, ifr->ifr_addr.sa_family);
         
@


1.1
log
@Use sa_len for size of struct sockaddr if it exists, not just for
FreeBSD.  Also append p0 to PKGNAME.  OK Arnaud Bergeron.
@
text
@d1 4
a4 4
$OpenBSD$
--- src/mDNSUNP.c.orig	Sun Jan  7 18:10:01 2007
+++ src/mDNSUNP.c	Sun Jan  7 18:12:28 2007
@@@@ -159,22 +159,8 @@@@
@

