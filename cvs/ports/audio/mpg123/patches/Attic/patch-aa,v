head	1.10;
access;
symbols
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	niels_28041998:1.1.1.1
	mpg123:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2000.08.02.10.33.25;	author brad;	state dead;
branches;
next	1.9;

1.9
date	2000.03.20.06.51.48;	author brad;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2000.02.18.20.18.01;	author ho;	state Exp;
branches;
next	1.7;

1.7
date	2000.01.12.15.47.14;	author ho;	state Exp;
branches;
next	1.6;

1.6
date	99.12.01.16.22.01;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	99.10.30.07.55.15;	author turan;	state Exp;
branches;
next	1.4;

1.4
date	99.08.17.15.51.21;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.03.23.21.33.50;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	99.03.05.14.26.57;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	98.04.28.11.29.59;	author provos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.04.28.11.29.59;	author provos;	state Exp;
branches;
next	;

1.9.2.1
date	2000.09.15.04.42.47;	author marc;	state dead;
branches;
next	;


desc
@@


1.10
log
@- use 07/13/2000 KAME patch
- use better filenames for patches
- respect CFLAGS
@
text
@--- Makefile.orig	Sun Mar 19 20:42:07 2000
+++ Makefile	Sun Mar 19 20:43:52 2000
@@@@ -9,8 +9,10 @@@@
 MANDIR=$(PREFIX)/man
 SECTION=1
 
-# Enable the below line If your plathome support IPv6
-#CFLAGS+= -DINET6
+# Enable the below line if your platform supports IPv6
+.if defined(USE_INET6) && ${USE_INET6:U} == YES
+CFLAGS+= -DINET6
+.endif
 # Additional LIBDIR and libraries if exist
 IPV6LIBDIR=
 IPV6LIB=
@@@@ -54,6 +56,7 @@@@
 	@@echo "make aix-tk3play    IBM AIX"
 	@@echo "make os2            IBM OS/2"
 	@@echo "make netbsd         NetBSD"
+	@@echo "make openbsd        OpenBSD"
 	@@echo "make bsdos          BSDI BSD/OS"
 	@@echo "make bsdos4         BSDI BSD/OS 4.0"
 	@@echo "make bsdos-nas      BSDI BSD/OS with NAS support"
@@@@ -508,6 +511,21 @@@@
 		CFLAGS='$(CFLAGS) -Wall -ansi -pedantic -O4 -m486 -fomit-frame-pointer \
 			-funroll-all-loops -ffast-math -DROT_I386 \
 			-DI386_ASSEM -DREAL_IS_FLOAT -DUSE_MMAP -DNETBSD' \
+		mpg123-make
+
+openbsd:
+	$(MAKE) CC="$(CC)" LDFLAGS= \
+		OBJECTS='decode.o dct64.o audio_openbsd.o term.o' \
+		CFLAGS='$(CFLAGS) -Wall -ansi -pedantic -O3 -fomit-frame-pointer \
+			-funroll-all-loops -ffast-math -DTERM_CONTROL \
+			-DREAL_IS_FLOAT -DUSE_MMAP -DOPENBSD' mpg123-make
+
+openbsd-i386:
+	$(MAKE) CC="$(CC)" LDFLAGS= \
+		OBJECTS='decode_i386.o dct64_i386.o audio_openbsd.o term.o' \
+		CFLAGS='$(CFLAGS) -Wall -ansi -pedantic -O4 -m486 -fomit-frame-pointer \
+			-funroll-all-loops -ffast-math -DROT_I386 -DTERM_CONTROL \
+			-DI386_ASSEM -DREAL_IS_FLOAT -DUSE_MMAP -DOPENBSD' \
 		mpg123-make
 
 bsdos:
@


1.9
log
@- use 02/17/2000 kame patch
- respect CC
- remove kludge and enable IPv6 support by default
@
text
@@


1.9.2.1
log
@bring cut-off audio into 2.7 branch
@
text
@@


1.8
log
@IPv6 patch. (from itojun@@)
@
text
@d1 2
a2 2
--- Makefile.orig	Fri Feb 18 20:05:47 2000
+++ Makefile	Fri Feb 18 20:07:40 2000
d10 1
a10 1
+.if defined(USE_INET6) && ${USE_INET6} == "YES"
d31 1
a31 1
+	$(MAKE) CC=cc LDFLAGS= \
d38 1
a38 1
+	$(MAKE) CC=cc LDFLAGS= \
@


1.7
log
@Upgrade to mpg123-0.59r
Tested by niklas@@
@
text
@d1 17
a17 4
--- Makefile.orig	Tue Jan 26 09:35:18 1999
+++ Makefile	Fri Oct 29 21:20:30 1999
@@@@ -34,6 +34,7 @@@@
 	@@echo "make aix            IBM AIX (tested: 4.2)"
d22 1
d24 2
a25 3
 	@@echo "make mint           MiNT on Atari"
@@@@ -364,6 +365,21 @@@@
 		CFLAGS='-Wall -ansi -pedantic -O4 -m486 -fomit-frame-pointer \
d33 1
a33 1
+		CFLAGS='-Wall -ansi -pedantic -O3 -fomit-frame-pointer \
d40 1
a40 1
+		CFLAGS='-Wall -ansi -pedantic -O4 -m486 -fomit-frame-pointer \
@


1.6
log
@Restore TERM capability.
Code scavenged from tracker, since it's known to work...
removed all special cases, since it's needed only for OpenBSD.
Tweaks after some ho@@'s comments.
@
text
@d26 1
a26 1
+		OBJECTS='decode_i386.o dct64_i386.o getbits_.o audio_openbsd.o term.o' \
@


1.5
log
@TERM_CONTROL does not work on openbsd.  deraadt@@
@
text
@d21 1
a21 1
+			-funroll-all-loops -ffast-math \
d28 1
a28 1
+			-funroll-all-loops -ffast-math -DROT_I386 \
@


1.4
log
@- style
- enable terminal handling support
@
text
@d2 1
a2 1
+++ Makefile	Tue Aug 17 09:19:25 1999
d11 1
a11 1
@@@@ -364,6 +365,22 @@@@
d22 1
a22 2
+			-DREAL_IS_FLOAT -DUSE_MMAP -DOPENBSD -DTERM_CONTROL' \
+		mpg123-make
d29 1
a29 1
+			-DI386_ASSEM -DREAL_IS_FLOAT -DUSE_MMAP -DOPENBSD -DTERM_CONTROL' \
@


1.3
log
@Reworked from the ground up.

Basically, mpg123 assumptions about audio is broken. It assumes that
audio ioctl that change mode are instantaneous, which they are not, most
often, so that with the old model, start-up was 80 ioctl, which amounts to
~10 seconds with wss.

Added lazyness to basic audio.c so that it won't try to determine whether
we can play @@ 8000Hz mono when 44100Hz stereo is what we want, and it
works...
@
text
@d1 2
a2 2
--- Makefile.orig	Tue Jan 26 15:35:18 1999
+++ Makefile	Tue Mar 23 03:48:46 1999
d19 1
a19 1
+		OBJECTS='decode.o dct64.o audio_openbsd.o' \
d22 1
a22 1
+			-DREAL_IS_FLOAT -DUSE_MMAP -DOPENBSD' \
d27 1
a27 1
+		OBJECTS='decode_i386.o dct64_i386.o getbits_.o audio_openbsd.o' \
d30 1
a30 1
+			-DI386_ASSEM -DREAL_IS_FLOAT -DUSE_MMAP -DOPENBSD' \
@


1.2
log
@upgrade to mpg123 0.59q
@
text
@d1 2
a2 2
--- Makefile.orig	Fri Mar  5 09:15:38 1999
+++ Makefile	Fri Mar  5 09:16:43 1999
d11 20
a30 11
@@@@ -350,7 +351,7 @@@@
 		LIBS='-los2me -lsocket' \
 		mpg123.exe
 
-netbsd:
+openbsd netbsd:
 	$(MAKE) CC=cc LDFLAGS= \
 		OBJECTS='decode.o dct64.o audio_sun.o' \
 		CFLAGS='-Wall -ansi -pedantic -O3 -fomit-frame-pointer \
@@@@ -358,7 +359,7 @@@@
 			-DREAL_IS_FLOAT -DUSE_MMAP -DNETBSD' \
d33 1
a33 5
-netbsd-i386:
+openbsd-i386 netbsd-i386:
 	$(MAKE) CC=cc LDFLAGS= \
 		OBJECTS='decode_i386.o dct64_i386.o getbits_.o audio_sun.o' \
 		CFLAGS='-Wall -ansi -pedantic -O4 -m486 -fomit-frame-pointer \
@


1.1
log
@Initial revision
@
text
@d1 3
a3 4
diff -u ../mpg123-0.59o/Makefile ./Makefile
--- ../mpg123-0.59o/Makefile	Tue Apr 28 12:06:58 1998
+++ ./Makefile	Tue Apr 28 12:07:47 1998
@@@@ -32,6 +32,7 @@@@
d9 3
a11 3
 	@@echo "make generic        try this one if your system isn't listed above"
 	@@echo ""
@@@@ -208,7 +209,7 @@@@
d20 1
a20 1
@@@@ -216,7 +217,7 @@@@
a28 22
diff -u ../mpg123-0.59o/audio.h ./audio.h
--- ../mpg123-0.59o/audio.h	Tue Apr 28 12:06:59 1998
+++ ./audio.h	Tue Mar 31 10:51:11 1998
@@@@ -19,7 +19,7 @@@@
 /* 3% rate tolerance */
 #define AUDIO_RATE_TOLERANCE	  3
 
-#if defined(HPUX) || defined(SUNOS) || defined(SOLARIS) || defined(OSS) || defined(__NetBSD__)
+#if defined(HPUX) || defined(SUNOS) || defined(SOLARIS) || defined(OSS) || defined(__NetBSD__) || defined(__OpenBSD__)
 #define AUDIO_USES_FD
 #endif
 
@@@@ -68,6 +68,6 @@@@
 extern int audio_write_sample(struct audio_info_struct *,short *,int);
 extern int audio_close(struct audio_info_struct *);
 extern void audio_info_struct_init(struct audio_info_struct *);
-#if defined(SOLARIS) || defined(__NetBSD__)
+#if defined(SOLARIS) || defined(__NetBSD__) || defined(__OpenBSD__)
 extern void audio_queueflush(struct audio_info_struct *ai);
 #endif
Common subdirectories: ../mpg123-0.59o/jukebox and ./jukebox
Common subdirectories: ../mpg123-0.59o/plugin and ./plugin
@


1.1.1.1
log
@Import mpg123 audio player (base port from FreeBSD + modifications)
@
text
@@
