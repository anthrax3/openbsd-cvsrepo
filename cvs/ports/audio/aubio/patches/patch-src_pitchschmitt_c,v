head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_1:1.1.1.1.0.18
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.16
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.12
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.14
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.10
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.8
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.6
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.4
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	stsp_16082012:1.1.1.1
	stsp:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2012.08.16.15.08.09;	author stsp;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.08.16.15.08.09;	author stsp;	state Exp;
branches;
next	;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$
Fix an out-of-bounds array access during 'make regress'.
--- src/pitchschmitt.c.orig	Thu Jul 27 01:27:23 2006
+++ src/pitchschmitt.c	Thu Aug 16 12:50:53 2012
@@@@ -73,9 +73,9 @@@@ smpl_t aubio_schmittS16LE (aubio_pitchschmitt_t *p, ui
       t1 =   (sint_t)( A1 * trigfact + 0.5);
       t2 = - (sint_t)( A2 * trigfact + 0.5);
       startpoint=0;
-      for (j=1; schmittBuffer[j]<=t1 && j<blockSize; j++);
-      for (; !(schmittBuffer[j]  >=t2 &&
-	       schmittBuffer[j+1]< t2) && j<blockSize; j++);
+      for (j=1; j<blockSize && schmittBuffer[j]<=t1; j++);
+      for (; j<blockSize-1 && !(schmittBuffer[j]  >=t2 &&
+	       schmittBuffer[j+1]< t2); j++);
       startpoint=j;
       schmittTriggered=0;
       endpoint=startpoint+1;
@


1.1.1.1
log
@Import aubio. Needed by upcoming ardour port.
aubio is a tool designed for the extraction of annotations from audio
signals. Its features include segmenting a sound file before each of its
attacks, performing pitch detection, tapping the beat and producing midi
streams from live audio.
help/ok ajacoutot
@
text
@@
