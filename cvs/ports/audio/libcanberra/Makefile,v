head	1.48;
access;
symbols
	OPENBSD_6_1:1.46.0.4
	OPENBSD_6_1_BASE:1.46
	OPENBSD_6_0:1.46.0.2
	OPENBSD_6_0_BASE:1.46
	OPENBSD_5_9:1.44.0.2
	OPENBSD_5_9_BASE:1.44
	OPENBSD_5_8:1.43.0.4
	OPENBSD_5_8_BASE:1.43
	OPENBSD_5_7:1.42.0.2
	OPENBSD_5_7_BASE:1.42
	OPENBSD_5_6:1.41.0.2
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.40.0.4
	OPENBSD_5_5_BASE:1.40
	OPENBSD_5_4:1.40.0.2
	OPENBSD_5_4_BASE:1.40
	OPENBSD_5_3:1.37.0.2
	OPENBSD_5_3_BASE:1.37
	OPENBSD_5_2:1.32.0.2
	OPENBSD_5_2_BASE:1.32
	OPENBSD_5_1_BASE:1.30
	OPENBSD_5_1:1.30.0.2
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.15.0.2
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	jasper_20080926:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.48
date	2017.07.16.19.18.48;	author espie;	state Exp;
branches;
next	1.47;
commitid	tt0GhWK5c4uf9ILG;

1.47
date	2017.04.10.11.45.23;	author sthen;	state Exp;
branches;
next	1.46;
commitid	XDh1zlSBq0boKsHk;

1.46
date	2016.03.18.21.38.22;	author naddy;	state Exp;
branches;
next	1.45;
commitid	BVkebQSTXSZokeRG;

1.45
date	2016.03.11.20.28.22;	author naddy;	state Exp;
branches;
next	1.44;
commitid	UYLP8TE6V7RS2GhJ;

1.44
date	2015.08.17.12.06.27;	author kili;	state Exp;
branches;
next	1.43;
commitid	T1DrYk0TvjWWCYqi;

1.43
date	2015.04.04.09.21.00;	author ajacoutot;	state Exp;
branches;
next	1.42;
commitid	kS3kwKZogsvzYmEY;

1.42
date	2014.09.13.16.36.53;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	N2TalFGi4jKRwS2u;

1.41
date	2014.04.01.14.52.09;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2013.05.31.15.34.40;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2013.03.21.08.45.12;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2013.03.10.22.55.03;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2012.09.27.06.17.08;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2012.09.21.14.48.05;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2012.08.25.17.10.58;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2012.08.24.12.14.47;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2012.08.21.13.10.08;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2012.07.13.17.03.32;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2012.04.28.10.52.08;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2011.11.04.08.42.25;	author jasper;	state Exp;
branches;
next	1.29;

1.29
date	2011.10.17.06.41.43;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2011.10.09.14.03.02;	author shadchin;	state Exp;
branches;
next	1.27;

1.27
date	2011.09.30.06.51.31;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.09.24.06.45.57;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2011.09.16.08.26.10;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2011.05.12.06.04.32;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2011.05.01.18.00.37;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2011.04.27.12.07.53;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.04.13.06.47.22;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.26.07.07.56;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.15.00.22.47;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.24.21.00.29;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.11.08.11.17;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2010.09.06.00.04.28;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.04.30.09.32.01;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.04.22.16.29.49;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.10.11.14.11.58;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.09.17.17.43.43;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.10.06.29.52;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2009.07.12.20.00.27;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.06.11.18.27.02;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.06.08.16.58.15;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.06.07.05.30.09;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.05.08.11.56;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.09.17.34.32;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2008.12.14.15.10.15;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.19.08.06.03;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.24.13.26.14;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2008.09.26.12.01.43;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.09.26.12.01.43;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.48
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.47 2017/04/10 11:45:23 sthen Exp $

COMMENT-main=	implementation of the Freedesktop sound theme spec.
COMMENT-gtk=	gtk+2 helper for libcanberra
COMMENT-gtk3=	gtk+3 helper for libcanberra

V=		0.30
DISTNAME=	libcanberra-${V}
EXTRACT_SUFX=	.tar.xz

PKGNAME-main=	${DISTNAME}
PKGNAME-gtk=	libcanberra-gtk-${V}
PKGNAME-gtk3=	libcanberra-gtk3-${V}

REVISION-main=	2
REVISION-gtk=	3
REVISION-gtk3=	3

SHARED_LIBS +=  canberra             2.0      # 2.5
SHARED_LIBS +=  canberra-gtk3        1.8      # 1.8
SHARED_LIBS +=  canberra-gtk         1.0      # 1.8

CATEGORIES=	audio devel

HOMEPAGE=	http://0pointer.de/lennart/projects/libcanberra/

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>

# LGPLv2.1
PERMIT_PACKAGE_CDROM=   Yes

MASTER_SITES=	${HOMEPAGE}

cWANTLIB += ltdl m ogg pthread vorbis vorbisfile

WANTLIB-main += ${cWANTLIB} sndio

WANTLIB-gtk += ${cWANTLIB} ${MODGETTEXT_WANTLIB}
WANTLIB-gtk += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB-gtk += Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0 cairo canberra
WANTLIB-gtk += drm expat ffi fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB-gtk += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB-gtk += gtk-x11-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
WANTLIB-gtk += pixman-1 png pthread-stubs xcb xcb-render xcb-shm z ${COMPILER_LIBCXX}
WANTLIB-gtk += harfbuzz
WANTLIB-gtk += graphite2

WANTLIB-gtk3 += ${cWANTLIB} ${MODGETTEXT_WANTLIB}
WANTLIB-gtk3 += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB-gtk3 += Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0 c cairo
WANTLIB-gtk3 += cairo-gobject canberra drm expat ffi fontconfig freetype
WANTLIB-gtk3 += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB-gtk3 += gthread-2.0 gtk-3 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB-gtk3 += pcre pixman-1 png pthread-stubs xcb xcb-render
WANTLIB-gtk3 += xcb-shm z ${COMPILER_LIBCXX}
WANTLIB-gtk3 += ICE SM atk-bridge-2.0 atspi dbus-1 harfbuzz
WANTLIB-gtk3 += epoxy graphite2

MODULES=		devel/gettext

MULTI_PACKAGES=		-main -gtk -gtk3

SUBST_VARS=		V

AUTOCONF_VERSION=	2.69
AUTOMAKE_VERSION= 	1.11

BUILD_DEPENDS=		${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS}

LIB_DEPENDS-main=	audio/libvorbis \
			devel/libtool,-ltdl
RUN_DEPENDS-main=	audio/sound-theme-freedesktop>=0.6

LIB_DEPENDS-gtk=	${BASE_PKGPATH} \
			${MODGETTEXT_LIB_DEPENDS} \
			x11/gtk+2
RUN_DEPENDS-gtk=	${MODGETTEXT_RUN_DEPENDS}

LIB_DEPENDS-gtk3=	${BASE_PKGPATH} \
			${MODGETTEXT_LIB_DEPENDS} \
			x11/gtk+3
RUN_DEPENDS-gtk3=	${MODGETTEXT_RUN_DEPENDS}

USE_GMAKE=		Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS= 	--disable-gstreamer \
			--disable-null \
			--disable-oss \
			--disable-pulse \
			--disable-tdb \
			--enable-sndio

pre-configure:
	cp ${FILESDIR}/sndio.c ${WRKSRC}/src
	${SUBST_CMD} ${WRKSRC}/src/sound-theme-spec.c \
		${WRKSRC}/src/test-canberra.c
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} aclocal -I m4
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} autoconf
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} autoheader
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} automake

post-install:
	rm ${PREFIX}/lib/libcanberra-${V}/*.{a,la}
	rm ${PREFIX}/lib/gtk-{2,3}.0/modules/*.{a,la}

.include <bsd.port.mk>
@


1.47
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/03/18 21:38:22 naddy Exp $
d44 1
a44 1
WANTLIB-gtk += pixman-1 png pthread-stubs xcb xcb-render xcb-shm z ${LIBCXX}
d55 1
a55 1
WANTLIB-gtk3 += xcb-shm z ${LIBCXX}
@


1.46
log
@remove SHARED_ONLY from simple ports that use the gettext or libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/03/11 20:28:22 naddy Exp $
d44 1
a44 1
WANTLIB-gtk += pixman-1 png pthread-stubs xcb xcb-render xcb-shm z stdc++
d55 1
a55 1
WANTLIB-gtk3 += xcb-shm z stdc++
@


1.45
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.44 2015/08/17 12:06:27 kili Exp $

SHARED_ONLY=	Yes
@


1.44
log
@Adjust WANTLIB-gtk{,3} and bump.

ok aja@@ with some nit picking about adding new lines ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/04/04 09:21:00 ajacoutot Exp $
d92 1
a92 2
CONFIGURE_ARGS= 	${CONFIGURE_SHARED} \
			--disable-gstreamer \
@


1.43
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/09/13 16:36:53 ajacoutot Exp $
d18 2
a19 2
REVISION-gtk=	2
REVISION-gtk3=	2
d48 1
d59 1
@


1.42
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/04/01 14:52:09 ajacoutot Exp $
d17 3
a19 3
REVISION-main=	1
REVISION-gtk=	1
REVISION-gtk3=	1
@


1.41
log
@Some PLISTs have brazillions of @@comment entries for .la files; sanitize
some of the ports a bit and rm at post-install time, it is way simpler to
maintain.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/05/31 15:34:40 ajacoutot Exp $
a90 2
			--disable-gtk-doc \
			--disable-gtk-doc-html \
a96 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.40
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/03/21 08:45:12 ajacoutot Exp $
d17 3
a19 3
REVISION-main=	0
REVISION-gtk=	0
REVISION-gtk3=	0
a84 1
LIBTOOL_FLAGS=		--tag=disable-static
a90 1
			--disable-static \
d120 2
a121 2
	rm ${PREFIX}/lib/libcanberra-${V}/*.la \
		${PREFIX}/lib/gtk-{2,3}.0/modules/*.la
@


1.39
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/03/10 22:55:03 espie Exp $
d17 4
d47 1
a47 1
WANTLIB-gtk += harfbuzz icudata icule icuuc
d56 2
a57 2
WANTLIB-gtk3 += xcb-shm z stdc++ icule icuuc
WANTLIB-gtk3 += ICE SM atk-bridge-2.0 atspi dbus-1 harfbuzz icudata
@


1.38
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/09/27 06:17:08 ajacoutot Exp $
a80 1
USE_LIBTOOL=		Yes
@


1.37
log
@Minor update to libcanberra-0.30.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/08/25 17:10:58 ajacoutot Exp $
a28 3
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
@


1.36
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d9 1
a9 1
V=		0.29
a16 4
REVISION-main=	1
REVISION-gtk=	1
REVISION-gtk3=	2

d46 1
d55 2
a56 1
WANTLIB-gtk3 += xcb-shm z stdc++
d89 2
a94 1
			--enable-sndio \
d96 1
a97 1
			--disable-alsa \
d100 1
a100 3
			--disable-udev
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
d120 4
@


1.35
log
@sync WANTLIB after recent compiler change

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/08/24 12:14:47 ajacoutot Exp $
d104 6
@


1.34
log
@Remove the as-needed pthread hack.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/08/21 13:10:08 ajacoutot Exp $
d17 3
a19 3
REVISION-main=	0
REVISION-gtk=	0
REVISION-gtk3=	1
d39 1
a39 1
cWANTLIB += c ltdl m ogg pthread vorbis vorbisfile
d53 1
a53 1
WANTLIB-gtk3 += Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0 cairo
@


1.33
log
@gtk+2 -> gtk+3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/07/13 17:03:32 ajacoutot Exp $
d17 3
a19 1
REVISION-gtk3=	0
d39 1
a39 1
cWANTLIB += ltdl m ogg vorbis vorbisfile
d53 1
a53 1
WANTLIB-gtk3 += Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0 c cairo
d57 1
a57 1
WANTLIB-gtk3 += pcre pixman-1 png pthread pthread-stubs xcb xcb-render
@


1.32
log
@Update to libcanberra-0.29.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/04/28 10:52:08 ajacoutot Exp $
d16 2
@


1.31
log
@--localstatedir=/var is the default now.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.30 2011/11/04 08:42:25 jasper Exp $
d9 1
a9 1
V=		0.28
d11 1
a16 4
REVISION-main=	2
REVISION-gtk=	3
REVISION-gtk3=	3

d56 1
a56 2
MODULES=		devel/gettext \
			devel/gconf2
a59 3
MODGCONF2_SCHEMAS_DIR=	libcanberra
MODGCONF2_LIBDEP=	No

d62 2
a63 2
AUTOCONF_VERSION=	2.68
AUTOMAKE_VERSION= 	1.10
d75 1
a75 2
RUN_DEPENDS-gtk=	${MODGCONF2_RUN_DEPENDS} \
			${MODGETTEXT_RUN_DEPENDS}
d83 1
d86 1
a86 1
CONFIGURE_STYLE=	 gnu
d88 3
d97 1
a97 3
			--disable-udev \
			--disable-gtk-doc \
			--disable-gtk-doc-html
@


1.30
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/10/17 06:41:43 ajacoutot Exp $
a92 1
			--localstatedir="/var" \
@


1.29
log
@WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/10/09 14:03:02 shadchin Exp $
d15 2
a16 2
REVISION-gtk=	2
REVISION-gtk3=	2
d46 1
a46 1
WANTLIB-gtk += pixman-1 png pthread-stubs xcb xcb-render xcb-shm z
d55 1
a55 1
WANTLIB-gtk3 += xcb-shm z
@


1.28
log
@Fix lib depends (no need textproc/libxml)

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/09/30 06:51:31 ajacoutot Exp $
d16 1
a16 1
REVISION-gtk3=	1
d53 1
a53 1
WANTLIB-gtk3 += gthread-2.0 gtk-3 kvm pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.27
log
@Disable gstreamer support; libcanberra has native support for sndio(7).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/09/24 06:45:57 ajacoutot Exp $
d14 1
a14 1
REVISION-main=	1
d73 1
a73 2
LIB_DEPENDS-main=	textproc/libxml \
			audio/libvorbis \
@


1.26
log
@Remove libtool related part in this patch; not needed since our libtool
got updated.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/09/16 08:26:10 espie Exp $
d14 3
a16 3
REVISION-main=	0
REVISION-gtk=	1
REVISION-gtk3=	0
d36 1
a36 2
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 ltdl m ogg
WANTLIB += pcre vorbis vorbisfile z
d38 1
a38 1
WANTLIB-main += ${WANTLIB} gstreamer-0.10 sndio xml2
d40 1
a40 1
WANTLIB-gtk += ${WANTLIB}
d43 4
a46 3
WANTLIB-gtk += drm expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB-gtk += gio-2.0 gtk-x11-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB-gtk += pixman-1 png pthread-stubs xcb xcb-render xcb-shm
d48 1
a48 1
WANTLIB-gtk3 += ${WANTLIB}
d51 5
a55 4
WANTLIB-gtk3 += cairo-gobject canberra drm expat fontconfig freetype
WANTLIB-gtk3 += gdk-3 gdk_pixbuf-2.0 gio-2.0 gtk-3 pango-1.0 pangocairo-1.0
WANTLIB-gtk3 += pangoft2-1.0 pixman-1 png pthread pthread-stubs xcb
WANTLIB-gtk3 += xcb-render xcb-shm
d73 1
a73 1
LIB_DEPENDS-main=	${MODGETTEXT_LIB_DEPENDS} \
d75 2
a76 4
			devel/libtool,-ltdl \
			multimedia/gstreamer-0.10/core
RUN_DEPENDS-main=	${MODGETTEXT_RUN_DEPENDS} \
			audio/sound-theme-freedesktop>=0.6
d79 1
d81 2
a82 1
RUN_DEPENDS-gtk=	${MODGCONF2_RUN_DEPENDS}
d85 1
d87 1
a87 1
RUN_DEPENDS-gtk3=	# empty
d96 1
a96 1
			--enable-gstreamer \
d102 2
a103 1
			--disable-gtk-doc
@


1.25
log
@normalize pkgpath in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/05/12 06:04:32 ajacoutot Exp $
d100 1
a100 1
			--enable-gtk-doc=no
@


1.24
log
@Use proper AUTOCONF_VERSION, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/05/01 18:00:37 ajacoutot Exp $
d15 2
a16 1
REVISION-gtk=	0
@


1.23
log
@Use proper AUTOCONF_VERSION, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/04/27 12:07:53 ajacoutot Exp $
d65 1
a65 2
# Should be 2.68
AUTOCONF_VERSION=	2.67
@


1.22
log
@canberra-gtk.h is needed by both -gtk and -gtk3, so move this header to
-main.

found the hard way by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/04/13 06:47:22 ajacoutot Exp $
d65 2
a66 1
AUTOCONF_VERSION=	2.63
@


1.21
log
@MULTIPACKAGE this port into:
    -main, the main libcanberra library
    -gtk, libcanberra-gtk (gtk+2)
    -gtk3 libcanberra-gtk3 (gtk+3)

This is needed for the ongoing GNOME3 work without forcing a global move
to gtk+3. The -gtk subpackage may disappear in the future when nothing
uses it.

This move will prevent the login/logout sounds to work in
gnome-session-2.X but it is a necessary evil to move forward.

EDONOTCARE/agreed by several
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/26 07:07:56 espie Exp $
d13 3
@


1.20
log
@redo depends with >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/15 00:22:47 espie Exp $
d3 3
a5 1
COMMENT=	implementation of the Freedesktop sound theme spec.
d7 1
a7 1
V=		0.24
a8 1
REVISION=	1
d10 7
a16 2
SHARED_LIBS +=  canberra             2.0      # .2.1
SHARED_LIBS +=  canberra-gtk         1.0      # .1.2
d32 67
a98 42
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 c cairo expat fontconfig
WANTLIB += freetype gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 m ogg pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread sndio xml2 z
WANTLIB += pthread-stubs xcb xcb-render xcb-render-util
WANTLIB += vorbis vorbisfile ltdl gstreamer-0.10
WANTLIB += gdk_pixbuf-2.0>=1400 gdk-x11-2.0>=1400 gtk-x11-2.0>=1400

MODULES=	devel/gettext \
		devel/gconf2

MODGCONF2_SCHEMAS_DIR= libcanberra
MODGCONF2_LIBDEP= No

SUBST_VARS=	V

AUTOCONF_VERSION= 2.62
AUTOMAKE_VERSION= 1.9
BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}
LIB_DEPENDS=	audio/libvorbis \
		devel/libtool,-ltdl \
		multimedia/gstreamer-0.10/core \
		x11/gtk+2
RUN_DEPENDS=	audio/sound-theme-freedesktop>=0.6

USE_LIBTOOL=	Yes
USE_GMAKE=	Yes

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS= ${CONFIGURE_SHARED} \
		--localstatedir="/var" \
		--enable-sndio \
		--enable-gstreamer \
		--disable-oss \
		--disable-alsa \
		--disable-pulse \
		--disable-tdb \
		--enable-gtk-doc=no
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.19
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/24 21:00:29 ajacoutot Exp $
d51 1
a51 1
RUN_DEPENDS=	sound-theme-freedesktop->=0.6:audio/sound-theme-freedesktop
@


1.18
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/11 08:11:17 jasper Exp $
d33 1
a33 1
WANTLIB += gdk_pixbuf-2.0.>=1400.0 gdk-x11-2.0.>=1400.0 gtk-x11-2.0.>=1400.0
d47 5
a51 5
LIB_DEPENDS=	::audio/libvorbis \
		::devel/libtool,-ltdl \
		::multimedia/gstreamer-0.10/core \
		::x11/gtk+2
RUN_DEPENDS=	:sound-theme-freedesktop->=0.6:audio/sound-theme-freedesktop
@


1.17
log
@- fix WANTLIB after cairo update.

these and upcoming fixes test built by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/09/06 00:04:28 sthen Exp $
a52 1
USE_X11=	Yes
@


1.16
log
@new-style REVISIONS/LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/04/30 09:32:01 ajacoutot Exp $
d7 1
a7 1
REVISION=	0
d28 1
a28 1
WANTLIB += freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0
@


1.15
log
@Do not hardcode paths.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/04/22 16:29:49 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d32 2
d47 4
a50 4
LIB_DEPENDS=	vorbis,vorbisfile::audio/libvorbis \
		ltdl::devel/libtool,-ltdl \
		gstreamer-0.10::multimedia/gstreamer-0.10/core \
		gdk_pixbuf-2.0.>=1400.0,gdk-x11-2.0.>=1400.0,gtk-x11-2.0.>=1400.0::x11/gtk+2
@


1.14
log
@Update to libcanberra-0.24.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/10/11 14:11:58 ajacoutot Exp $
d7 1
d70 2
@


1.13
log
@Update to libcanberra-0.18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/09/17 17:43:43 ajacoutot Exp $
d5 1
a5 1
V=		0.18
d8 2
a9 2
SHARED_LIBS +=  canberra             1.1      # .2.1
SHARED_LIBS +=  canberra-gtk         0.0      # .1.2
d30 1
a30 1
WANTLIB += pthread-stubs xcb
@


1.12
log
@Update to libcanberra-0.17.
* add vala vapi file
* numerous updates to Gtk support
* add new ca_context_playing() call
* several bugfixes

Makes use of newer sound-theme-freedesktop.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/08/10 06:29:52 kili Exp $
d5 1
a5 1
V=		0.17
@


1.11
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/07/12 20:00:27 ajacoutot Exp $
d5 1
a5 1
V=		0.14
a6 1
PKGNAME=	${DISTNAME}p0
d8 2
a9 2
SHARED_LIBS +=  canberra             1.0      # .1.4
SHARED_LIBS +=  canberra-gtk         0.0      # .0.4
d48 1
a48 1
RUN_DEPENDS=	::audio/sound-theme-freedesktop
d62 2
a63 1
		--disable-tdb
@


1.10
log
@- update to libcanberra-0.14
- take maintainer

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/06/11 18:27:02 ajacoutot Exp $
d7 1
d31 1
@


1.9
log
@Bump after recent gconf2 MODULE change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/06/08 16:58:15 ajacoutot Exp $
d3 4
a6 1
COMMENT=		implementation of the Freedesktop sound theme spec.
a7 2
DISTNAME=		libcanberra-0.11
PKGNAME=		${DISTNAME}p2
a9 1
CATEGORIES=		audio devel
d11 5
a15 1
HOMEPAGE=		http://0pointer.de/lennart/projects/libcanberra/
d23 1
a23 1
MASTER_SITES=		${HOMEPAGE}
d25 39
a63 41
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender atk-1.0 c cairo expat fontconfig \
		freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 m ogg pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pcre pixman-1 png pthread sndio xml2 z

MODULES=		devel/gettext \
			devel/gconf2

MODGCONF2_SCHEMAS_DIR=	libcanberra
MODGCONF2_LIBDEP=	No

AUTOCONF_VERSION=	2.62
AUTOMAKE_VERSION=	1.9
BUILD_DEPENDS=		${RUN_DEPENDS} \
			${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS}
RUN_DEPENDS=		::devel/gconf2
LIB_DEPENDS=		vorbis,vorbisfile::audio/libvorbis \
			ltdl::devel/libtool,-ltdl \
			gstreamer-0.10::multimedia/gstreamer-0.10/core \
			gdk_pixbuf-2.0.>=1400.0,gdk-x11-2.0.>=1400.0,gtk-x11-2.0.>=1400.0::x11/gtk+2

USE_X11=		Yes
USE_LIBTOOL=		Yes
USE_GMAKE=		Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--localstatedir="/var" \
			--enable-sndio \
			--enable-gstreamer \
			--disable-oss \
			--disable-alsa \
			--disable-pulse \
			--disable-tdb \
			--with-ltdl-include=${LOCALBASE}/include \
			--with-ltdl-lib=${LOCALBASE}/lib \
			--disable-ltdl-install \
			--without-included-ltdl
CONFIGURE_ENV+=         LDFLAGS="-L${LOCALBASE}/lib" \
                        CPPFLAGS="-I${LOCALBASE}/include"
@


1.8
log
@Bump after recent gconf2 MODULE changes.

"yep, bumps are cheap" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/06/07 05:30:09 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
@


1.7
log
@Convert to using the new gconf2.port.mk module.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/03/05 08:11:56 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
@


1.6
log
@- update to libcanberra-0.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/01/09 17:34:32 jakemsr Exp $
d6 1
d27 5
a31 1
MODULES=		devel/gettext
d49 1
a49 3
CONFIGURE_ARGS+=	--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/libcanberra \
			--disable-schemas-install \
			--localstatedir="/var" \
@


1.5
log
@- add sndio backend
- remove OSS backend

requested/tested by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/12/14 15:10:15 ajacoutot Exp $
d5 2
a6 3
DISTNAME=		libcanberra-0.10
PKGNAME=		${DISTNAME}p2
SHARED_LIBS +=  canberra             0.1      # .1.3
d52 5
a56 1
			--disable-tdb
d60 1
a60 1
post-patch:
@


1.4
log
@- move drivers order to give it a chance to actually play a sound:
use gstreamer first (which uses libsndio by default) instead of plain OSS.
(canberra should be modified to use libsndio by itlsef)
- explicitely add enable/disable switches in CONFIGURE_ARGS
- regen PLIST while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/11/19 08:06:03 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
d25 1
a25 1
		pcre pixman-1 png pthread xml2 z
d29 5
a33 1
BUILD_DEPENDS=		${RUN_DEPENDS}
d48 1
d50 1
a50 1
			--enable-oss \
d56 11
@


1.3
log
@- enable the gtk+2 part of libcanberra
- set use_x11

maybe we can split this into subpackages..anyone? ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/10/24 13:26:14 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
d43 6
a48 1
			--localstatedir="/var"
@


1.2
log
@- update libcanberra to 0.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/09/26 12:01:43 jasper Exp $
d6 3
a8 1
SHARED_LIBS +=	canberra             0.1      # .1.3
d21 5
a25 2
WANTLIB=		glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 m ogg \
			pcre xml2 z
d33 2
a34 1
			gstreamer-0.10::multimedia/gstreamer-0.10/core
d36 1
d43 1
a43 2
			--localstatedir="/var" \
			--disable-gtk # Needs GTK+2 > 2.13.4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 2
DISTNAME=		libcanberra-0.9
SHARED_LIBS +=	canberra             0.0      # .1.2
d24 2
d34 4
a37 1
CONFIGURE_ARGS+=	--disable-gtk # Needs GTK+2 > 2.13.4
@


1.1.1.1
log
@import libcanberra 0.9

Libcanberra is an implementation of the Freedesktop Sound Theme
specification. It allows developers to play sounds given a list of
events.

ok landry@@
@
text
@@
