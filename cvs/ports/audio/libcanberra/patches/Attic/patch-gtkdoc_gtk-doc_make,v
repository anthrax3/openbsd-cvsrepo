head	1.4;
access;
symbols
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.4
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2011.09.30.06.51.31;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2011.04.13.06.47.22;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.22.16.29.49;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.03.05.08.11.56;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Disable gstreamer support; libcanberra has native support for sndio(7).
@
text
@$OpenBSD: patch-gtkdoc_gtk-doc_make,v 1.3 2011/04/13 06:47:22 ajacoutot Exp $
--- gtkdoc/gtk-doc.make.orig	Thu Feb 24 23:06:45 2011
+++ gtkdoc/gtk-doc.make	Tue Apr 12 15:02:53 2011
@@@@ -4,15 +4,15 @@@@
 # Everything below here is generic #
 ####################################
 
-if GTK_DOC_USE_LIBTOOL
-GTKDOC_CC = $(LIBTOOL) --tag=CC --mode=compile $(CC) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+#if GTK_DOC_USE_LIBTOOL
+GTKDOC_CC = $(LIBTOOL) --mode=compile $(CC) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 GTKDOC_LD = $(LIBTOOL) --tag=CC --mode=link $(CC) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS)
 GTKDOC_RUN = $(LIBTOOL) --mode=execute
-else
-GTKDOC_CC = $(CC) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
-GTKDOC_LD = $(CC) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS)
-GTKDOC_RUN =
-endif
+#else
+#GTKDOC_CC = $(CC) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+#GTKDOC_LD = $(CC) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS)
+#GTKDOC_RUN = sh -c
+#endif
 
 # We set GPATH here; this gives us semantics for GNU make
 # which are more like other make's VPATH, when it comes to
@@@@ -48,22 +48,7 @@@@ REPORT_FILES = \
 
 CLEANFILES = $(SCANOBJ_FILES) $(REPORT_FILES) $(DOC_STAMPS)
 
-if ENABLE_GTK_DOC
-if GTK_DOC_BUILD_HTML
-HTML_BUILD_STAMP=html-build.stamp
-else
-HTML_BUILD_STAMP=
-endif
-if GTK_DOC_BUILD_PDF
-PDF_BUILD_STAMP=pdf-build.stamp
-else
-PDF_BUILD_STAMP=
-endif
-
-all-local: $(HTML_BUILD_STAMP) $(PDF_BUILD_STAMP)
-else
 all-local:
-endif
 
 docs: $(HTML_BUILD_STAMP) $(PDF_BUILD_STAMP)
 
@@@@ -209,13 +194,13 @@@@ uninstall-local:
 #
 # Require gtk-doc when making dist
 #
-if ENABLE_GTK_DOC
+#if ENABLE_GTK_DOC
+#dist-check-gtkdoc:
+#else
 dist-check-gtkdoc:
-else
-dist-check-gtkdoc:
 	@@echo "*** gtk-doc must be installed and enabled in order to make dist"
 	@@false
-endif
+#endif
 
 dist-hook: dist-check-gtkdoc dist-hook-local
 	mkdir $(distdir)/html
@


1.3
log
@MULTIPACKAGE this port into:
    -main, the main libcanberra library
    -gtk, libcanberra-gtk (gtk+2)
    -gtk3 libcanberra-gtk3 (gtk+3)

This is needed for the ongoing GNOME3 work without forcing a global move
to gtk+3. The -gtk subpackage may disappear in the future when nothing
uses it.

This move will prevent the login/logout sounds to work in
gnome-session-2.X but it is a necessary evil to move forward.

EDONOTCARE/agreed by several
@
text
@d1 1
a1 1
$OpenBSD: patch-gtkdoc_gtk-doc_make,v 1.2 2010/04/22 16:29:49 ajacoutot Exp $
@


1.2
log
@Update to libcanberra-0.24.
@
text
@d1 3
a3 3
$OpenBSD: patch-gtkdoc_gtk-doc_make,v 1.1 2009/03/05 08:11:56 ajacoutot Exp $
--- gtkdoc/gtk-doc.make.orig	Mon Apr 19 17:10:13 2010
+++ gtkdoc/gtk-doc.make	Thu Apr 22 18:20:50 2010
d50 1
a50 1
@@@@ -187,13 +172,13 @@@@ uninstall-local:
@


1.1
log
@- update to libcanberra-0.11
@
text
@d1 3
a3 3
$OpenBSD$
--- gtkdoc/gtk-doc.make.orig	Wed Jan 21 22:02:53 2009
+++ gtkdoc/gtk-doc.make	Tue Mar  3 09:27:23 2009
d9 1
a9 1
-GTKDOC_CC = $(LIBTOOL) --mode=compile $(CC) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
d12 1
a12 1
 GTKDOC_LD = $(LIBTOOL) --mode=link $(CC) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS)
d17 1
a17 1
-GTKDOC_RUN = sh -c
d27 1
a27 1
@@@@ -47,11 +47,11 @@@@ REPORT_FILES = \
d32 12
a43 1
-all-local: html-build.stamp
a44 3
+#if ENABLE_GTK_DOC
+#all-local: html-build.stamp
+#else
a46 1
+#endif
d48 1
a48 1
 docs: html-build.stamp
d50 1
a50 1
@@@@ -157,13 +157,13 @@@@ uninstall-local:
@

