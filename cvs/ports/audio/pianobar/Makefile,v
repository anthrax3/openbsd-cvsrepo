head	1.85;
access;
symbols
	OPENBSD_6_1:1.82.0.2
	OPENBSD_6_1_BASE:1.82
	OPENBSD_6_0:1.78.0.2
	OPENBSD_6_0_BASE:1.78
	OPENBSD_5_9:1.74.0.2
	OPENBSD_5_9_BASE:1.74
	OPENBSD_5_8:1.68.0.4
	OPENBSD_5_8_BASE:1.68
	OPENBSD_5_7:1.67.0.2
	OPENBSD_5_7_BASE:1.67
	OPENBSD_5_6:1.63.0.2
	OPENBSD_5_6_BASE:1.63
	OPENBSD_5_5:1.59.0.2
	OPENBSD_5_5_BASE:1.59
	OPENBSD_5_4:1.56.0.2
	OPENBSD_5_4_BASE:1.56
	OPENBSD_5_3:1.51.0.2
	OPENBSD_5_3_BASE:1.51
	OPENBSD_5_2:1.44.0.2
	OPENBSD_5_2_BASE:1.44
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.2
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	dcoppa_20100329:1.1.1.1
	dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.85
date	2017.08.31.09.12.36;	author dcoppa;	state Exp;
branches;
next	1.84;
commitid	vZJouhpXnjkJw5tE;

1.84
date	2017.08.24.09.06.10;	author dcoppa;	state Exp;
branches;
next	1.83;
commitid	L18tOeap7UVHq1a6;

1.83
date	2017.08.11.09.44.08;	author dcoppa;	state Exp;
branches;
next	1.82;
commitid	J58AR5VE1GXG1rpR;

1.82
date	2017.01.10.12.46.41;	author sthen;	state Exp;
branches;
next	1.81;
commitid	Aw1CQHqrfTYF4Bl4;

1.81
date	2016.12.05.10.33.30;	author dcoppa;	state Exp;
branches;
next	1.80;
commitid	lqpvKuI0WMY47eR1;

1.80
date	2016.11.05.21.27.26;	author dcoppa;	state Exp;
branches;
next	1.79;
commitid	mQQEEvRjnsigHMeW;

1.79
date	2016.09.06.11.18.18;	author dcoppa;	state Exp;
branches;
next	1.78;
commitid	BOMehe5IWBGiqQhR;

1.78
date	2016.06.27.10.33.53;	author dcoppa;	state Exp;
branches;
next	1.77;
commitid	9RU6M3LugjZrmJaN;

1.77
date	2016.06.03.08.34.00;	author dcoppa;	state Exp;
branches;
next	1.76;
commitid	gTAib0kkJZyKT8FB;

1.76
date	2016.03.16.16.46.32;	author naddy;	state Exp;
branches;
next	1.75;
commitid	4Ekn8nPgVVHWLTwe;

1.75
date	2016.03.01.12.44.58;	author dcoppa;	state Exp;
branches;
next	1.74;
commitid	boFKQjjdIQ21DCEs;

1.74
date	2016.01.13.08.21.18;	author dcoppa;	state Exp;
branches;
next	1.73;
commitid	YEWHSPQ7fOgVeBme;

1.73
date	2015.12.22.10.32.51;	author dcoppa;	state Exp;
branches;
next	1.72;
commitid	6brMtRahnkcszEhf;

1.72
date	2015.10.07.08.40.54;	author dcoppa;	state Exp;
branches;
next	1.71;
commitid	hJ8SzJIx95aUCJ9c;

1.71
date	2015.08.26.09.07.49;	author dcoppa;	state Exp;
branches;
next	1.70;
commitid	GKcboFGerP3OujPE;

1.70
date	2015.08.26.05.56.22;	author dcoppa;	state Exp;
branches;
next	1.69;
commitid	y9wqGRrrECd7SlET;

1.69
date	2015.08.24.12.37.51;	author jasper;	state Exp;
branches;
next	1.68;
commitid	L7syuW2rUae2SoUr;

1.68
date	2015.03.20.14.59.36;	author dcoppa;	state Exp;
branches;
next	1.67;
commitid	tzaKvkdfFo0uzMlR;

1.67
date	2015.01.16.09.23.42;	author dcoppa;	state Exp;
branches;
next	1.66;
commitid	PeU20B5mZ8t4DtOm;

1.66
date	2014.12.31.08.42.26;	author landry;	state Exp;
branches;
next	1.65;
commitid	vf8MnqY339W3vwfX;

1.65
date	2014.09.29.09.26.00;	author dcoppa;	state Exp;
branches;
next	1.64;
commitid	gi4RekBGBM0j0LSb;

1.64
date	2014.09.02.08.56.23;	author dcoppa;	state Exp;
branches;
next	1.63;
commitid	28iK1t6mbXYtfzFM;

1.63
date	2014.07.11.16.18.54;	author dcoppa;	state Exp;
branches;
next	1.62;
commitid	RlpFNiahFEMpWDuv;

1.62
date	2014.05.20.14.51.46;	author dcoppa;	state Exp;
branches;
next	1.61;

1.61
date	2014.03.27.10.13.14;	author dcoppa;	state Exp;
branches;
next	1.60;

1.60
date	2014.03.27.09.28.06;	author dcoppa;	state Exp;
branches;
next	1.59;

1.59
date	2014.01.13.08.46.45;	author dcoppa;	state Exp;
branches;
next	1.58;

1.58
date	2013.09.23.08.40.23;	author dcoppa;	state Exp;
branches;
next	1.57;

1.57
date	2013.09.02.11.58.39;	author dcoppa;	state Exp;
branches;
next	1.56;

1.56
date	2013.07.10.16.40.47;	author dcoppa;	state Exp;
branches;
next	1.55;

1.55
date	2013.06.18.13.17.45;	author dcoppa;	state Exp;
branches;
next	1.54;

1.54
date	2013.05.20.07.16.25;	author dcoppa;	state Exp;
branches;
next	1.53;

1.53
date	2013.05.17.08.21.48;	author dcoppa;	state Exp;
branches;
next	1.52;

1.52
date	2013.03.10.22.55.05;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2012.12.31.10.38.17;	author dcoppa;	state Exp;
branches;
next	1.50;

1.50
date	2012.12.05.12.20.43;	author dcoppa;	state Exp;
branches;
next	1.49;

1.49
date	2012.11.30.15.52.56;	author dcoppa;	state Exp;
branches;
next	1.48;

1.48
date	2012.11.20.09.23.59;	author dcoppa;	state Exp;
branches;
next	1.47;

1.47
date	2012.10.30.16.59.23;	author dcoppa;	state Exp;
branches;
next	1.46;

1.46
date	2012.09.23.10.18.21;	author dcoppa;	state Exp;
branches;
next	1.45;

1.45
date	2012.09.18.12.35.03;	author dcoppa;	state Exp;
branches;
next	1.44;

1.44
date	2012.07.06.08.32.13;	author dcoppa;	state Exp;
branches;
next	1.43;

1.43
date	2012.06.28.07.10.25;	author dcoppa;	state Exp;
branches;
next	1.42;

1.42
date	2012.06.12.14.45.06;	author dcoppa;	state Exp;
branches;
next	1.41;

1.41
date	2012.06.08.11.01.20;	author dcoppa;	state Exp;
branches;
next	1.40;

1.40
date	2012.05.28.09.47.00;	author dcoppa;	state Exp;
branches;
next	1.39;

1.39
date	2012.05.22.18.39.42;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2012.05.14.08.07.00;	author dcoppa;	state Exp;
branches;
next	1.37;

1.37
date	2012.05.10.11.23.18;	author dcoppa;	state Exp;
branches;
next	1.36;

1.36
date	2012.05.07.11.04.21;	author dcoppa;	state Exp;
branches;
next	1.35;

1.35
date	2012.05.04.10.32.33;	author dcoppa;	state Exp;
branches;
next	1.34;

1.34
date	2012.04.20.08.22.34;	author dcoppa;	state Exp;
branches;
next	1.33;

1.33
date	2012.04.19.21.39.08;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2012.04.16.13.09.26;	author dcoppa;	state Exp;
branches;
next	1.31;

1.31
date	2012.04.11.08.41.58;	author dcoppa;	state Exp;
branches;
next	1.30;

1.30
date	2012.03.29.13.54.17;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2012.03.20.14.27.45;	author dcoppa;	state Exp;
branches;
next	1.28;

1.28
date	2012.03.02.11.42.56;	author dcoppa;	state Exp;
branches;
next	1.27;

1.27
date	2012.01.20.13.04.16;	author dcoppa;	state Exp;
branches;
next	1.26;

1.26
date	2012.01.16.13.27.09;	author dcoppa;	state Exp;
branches;
next	1.25;

1.25
date	2011.12.19.12.44.37;	author dcoppa;	state Exp;
branches;
next	1.24;

1.24
date	2011.12.13.09.10.09;	author dcoppa;	state Exp;
branches;
next	1.23;

1.23
date	2011.12.08.18.27.19;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2011.11.28.14.11.25;	author dcoppa;	state Exp;
branches;
next	1.21;

1.21
date	2011.09.22.14.28.13;	author dcoppa;	state Exp;
branches;
next	1.20;

1.20
date	2011.09.22.09.22.41;	author dcoppa;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.16.08.26.10;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2011.07.18.15.04.08;	author dcoppa;	state Exp;
branches;
next	1.17;

1.17
date	2011.07.11.13.31.14;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2011.07.10.11.01.05;	author dcoppa;	state Exp;
branches;
next	1.15;

1.15
date	2011.05.13.09.52.51;	author dcoppa;	state Exp;
branches;
next	1.14;

1.14
date	2011.05.04.07.48.04;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2011.04.21.10.02.09;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2011.03.20.16.05.38;	author dcoppa;	state Exp;
branches;
next	1.11;

1.11
date	2011.03.14.12.28.57;	author dcoppa;	state Exp;
branches;
next	1.10;

1.10
date	2011.01.05.14.06.51;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.15.00.22.48;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.13.12.59.18;	author dcoppa;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.18.16.52.47;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.07.14.27.36;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2010.09.14.15.10.12;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.12.16.49.09;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2010.07.20.09.47.18;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.13.18.35.51;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.29.21.12.20;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.03.29.21.12.20;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.85
log
@
Update to pianobar-2017.08.30
@
text
@# $OpenBSD: Makefile,v 1.84 2017/08/24 09:06:10 dcoppa Exp $

COMMENT =	command-line client for Pandora Internet Radio

DISTNAME =	pianobar-2017.08.30
EXTRACT_SUFX =	.tar.bz2
CATEGORIES =	audio

MAINTAINER =	David Coppa <dcoppa@@openbsd.org>

HOMEPAGE =	https://6xq.net/pianobar/

MASTER_SITES =	${HOMEPAGE}

SHARED_LIBS =	piano	9.0	# 0.0.0

# MIT
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =	ao avcodec avfilter avformat avutil c curl \
		gcrypt json-c m pthread

LIB_DEPENDS =	audio/libao \
		devel/json-c \
		graphics/ffmpeg>=20140412 \
		net/curl \
		security/libgcrypt

.if !defined(DEBUG)
CFLAGS +=	-DNDEBUG
.endif

MAKE_FLAGS =	DYNLINK=1 \
		CC=${CC} \
		LIBGCRYPT_CFLAGS="-DGCRYPT_NO_DEPRECATED \
				  -I${LOCALBASE}/include" \
		LIBpiano_VERSION="${LIBpiano_VERSION}" \
		V=1

FAKE_FLAGS =	PREFIX="${PREFIX}" \
		INSTALL_DATA="${INSTALL_DATA}" \
		INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
		INSTALL_MAN="${INSTALL_MAN}" \
		INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
		MANDIR="${PREFIX}/man"

USE_GMAKE =	Yes

NO_TEST =	Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/src/ui.c

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/pianobar
	${INSTALL_DATA} ${WRKSRC}/contrib/config-example \
		${PREFIX}/share/examples/pianobar/config

.include <bsd.port.mk>
@


1.84
log
@
Update to a newer snapshot (pianobar-2017.04.26)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2017/08/11 09:44:08 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2017.04.26
d13 1
a13 1
MASTER_SITES =	https://distfiles.bsdfrog.org/
@


1.83
log
@
Fix use-after-free when deleting station
(upstream git commit 2a8865ad0d7c4976f43d99ed258c84ae4f95b0ce)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2017/01/10 12:46:41 sthen Exp $
d5 1
a5 2
DISTNAME =	pianobar-2016.06.02
REVISION =	5
d13 1
a13 1
MASTER_SITES =	${HOMEPAGE}
d15 1
a15 1
SHARED_LIBS =	piano	8.0	# 0.0.0
a55 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/pianobar
@


1.82
log
@Now libressl has alt chain support we no longer need the workaround for
pianobar. Verified by & ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2016/12/05 10:33:30 dcoppa Exp $
d6 1
a6 1
REVISION =	4
@


1.81
log
@
Exit when no email/password was entered or ^C was pressed
(upstream git commit 18f39b5ac22fe0ab85203f7a471f511d2bf96e28)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2016/11/05 21:27:26 dcoppa Exp $
d6 1
a6 1
REVISION =	3
a57 2
	${INSTALL_DATA} ${FILESDIR}/cert.pem \
		${PREFIX}/share/pianobar/cert.pem
@


1.80
log
@
Turn off ffmpeg's non-fatal error messages.

"Skipping 0 bytes of junk" is useless to the user, and essentially
indicates a NOP.

upstream git commit 7c2d9ebb7f61cf04d75e28ca5cd6932002c4357b
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2016/09/06 11:18:18 dcoppa Exp $
d6 1
a6 1
REVISION =	2
@


1.79
log
@
Sync with src/lib/libcrypto/cert.pem
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2016/06/27 10:33:53 dcoppa Exp $
d6 1
a6 1
REVISION =	1
@


1.78
log
@
Sync with src/lib/libcrypto/cert.pem
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2016/06/03 08:34:00 dcoppa Exp $
d6 1
a6 1
REVISION =	0
@


1.77
log
@
Update to pianobar-2016.06.02
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2016/03/16 16:46:32 naddy Exp $
d6 1
@


1.76
log
@remove SHARED_ONLY from ports that don't use any MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2016/03/01 12:44:58 dcoppa Exp $
d5 1
a5 2
DISTNAME =	pianobar-2015.11.22
REVISION =	1
d37 2
a38 1
		LIBpiano_VERSION="${LIBpiano_VERSION}"
@


1.75
log
@
- update HOMEPAGE
- add default value for rpcTlsPort
  (upstream git commit bdc9dc727b0464bc17bed002d2a701cfc34b777a)
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.74 2016/01/13 08:21:18 dcoppa Exp $

SHARED_ONLY =	Yes
@


1.74
log
@
Use an alternate CA root bundle for pianobar to work around a problem
with tuner.pandora.com and libressl

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/12/22 10:32:51 dcoppa Exp $
d8 1
a8 1
REVISION =	0
d14 1
a14 1
HOMEPAGE =	http://6xq.net/projects/pianobar/
@


1.73
log
@
Update to pianobar-2015.11.22
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/10/07 08:40:54 dcoppa Exp $
d8 1
d53 3
d58 3
@


1.72
log
@
Update to a snapshot from yesterday (pianobar-2015.10.06)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/08/26 09:07:49 dcoppa Exp $
d7 1
a7 1
DISTNAME =	pianobar-2015.10.06
d15 1
a15 1
MASTER_SITES =	https://distfiles.bsdfrog.org/
@


1.71
log
@
Fix COMMENT and DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2015/08/26 05:56:22 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2015.08.04
REVISION =	0
@


1.70
log
@
Update to a newer snapshot (2015.08.04)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2015/08/24 12:37:51 jasper Exp $
d5 1
a5 1
COMMENT =	console client for pandora
d8 1
@


1.69
log
@remove individual BROKEN markers for ports depending on json-c; instead mark
json-c BROKEN that's where the lack of atomic ops wreaks havoc.

landry@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2015/03/20 14:59:36 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2014.09.28
REVISION =	1
d15 1
a15 1
MASTER_SITES =	${HOMEPAGE}
d17 1
a17 1
SHARED_LIBS =	piano	7.0	# 0.0.0
d22 2
a23 2
WANTLIB =	ao avcodec avfilter avformat avutil c gcrypt \
		gnutls json-c m pthread
d28 1
a28 1
		security/gnutls>=2.10.0 \
d50 1
a50 1
TEST_TARGET = 	test
a55 3

pre-test:
	@@touch ${WRKSRC}/src/libwaitress/waitress.c
@


1.68
log
@
Merge bugfixes from upstream:

Fix upcoming songs assertion failure
(git commit 1cd5c5ec77ea43088982a439b58499be87c62087)

player: Ignore volume change before playback started
(git commit 310900e4be52d11388792d776d9f6b89380bbecd)

player: Fix initial track volume
(git commit 0005ea3873202ddefaae6466a932c159c08fd1c3)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2015/01/16 09:23:42 dcoppa Exp $
a5 1
BROKEN-hppa =	libjson-c.so.0.0: undefined reference to __sync_val_compare_and_swap_4
@


1.67
log
@
Use default channel layout if zero
(upstream git commit d888d0ac2aeb233deeb70aaca196453f8195e433)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2014/12/31 08:42:26 landry Exp $
d9 1
a9 1
REVISION =	0
@


1.66
log
@Yet another bunch of ports that reliably fail to build on hppa.

BROKEN-hppa =	SIGILL when running lilypond
BROKEN-hppa =	libjson-c.so.0.0: undefined reference to __sync_val_compare_and_swap_4
BROKEN-hppa=	missing atomic ops
BROKEN-hppa=	./iodev/hdimage/hdimage.cc:807: error: 'bx_bswap32' was not declared in this scope
BROKEN-hppa =	cc1plus: error: unrecognized command line option '-std=c++11'
BROKEN-hppa =	src/bin/jp2/convert.c:192: error: expected identifier or '(' before '__extension__'
BROKEN-hppa=	libpt.so.7.0: undefined reference to __sync_fetch_and_or_4
BROKEN-hppa=	ykpers-json.c:42: error: redefinition of typedef 'json_bool'
BROKEN-hppa=	OOM on src/lxml/lxml.etree.c
BROKEN-hppa =	undefined reference to `__sync_val_compare_and_swap_4' in libjson-c
BROKEN-hppa =	rake fails when linking PassengerHelperAgent
BROKEN-hppa =	kstars/kstars/tools/scriptbuilder.cpp:103: internal compiler error: Segmentation fault
BROKEN-hppa=	build stuck on virt-viewer-window.c

See http://build-failures.rhaalovely.net/hppa/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/09/29 09:26:00 dcoppa Exp $
d9 1
@


1.65
log
@
Update to pianobar-2014.09.28
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/09/02 08:56:23 dcoppa Exp $
d6 1
@


1.64
log
@
Fix volume control with newer FFmpeg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2014/07/11 16:18:54 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2014.06.08
REVISION =	0
d17 1
a17 1
SHARED_LIBS =	piano	6.0	# 0.0.0
@


1.63
log
@
Update to pianobar-2014.06.08
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2014/05/20 14:51:46 dcoppa Exp $
d8 1
@


1.62
log
@
Update to 2014.04.22 snapshot.

It now uses ffmpeg instead of faad+libmad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2014/03/27 10:13:14 dcoppa Exp $
d7 1
a7 1
DISTNAME =	pianobar-2014.04.22
d15 1
a15 1
MASTER_SITES =	http://spacehopper.org/mirrors/
a36 1
		LIBAV="ffmpeg2.2" \
@


1.61
log
@
Bugfixes from upstream:

libpiano: Request track length
(upstream git commit 90f6ffbdb7c7cc07cb02b69fcfb3a3844f0180b7)

libwaitress: Increase the receive buffer
(upstream git commit 8e685c992516834e35bcccea1f61c39a9d847e2f)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2014/03/27 09:28:06 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2013.09.15
REVISION =	2
d15 1
a15 1
MASTER_SITES =	${HOMEPAGE}
d17 1
a17 1
SHARED_LIBS =	piano	5.0	# 0.0.0
d22 2
a23 1
WANTLIB =	ao c faad gcrypt gnutls json-c m mad pthread
d25 1
a25 3
LIB_DEPENDS =	audio/faad>=2.7 \
		audio/libao \
		audio/libmad \
d27 1
d37 1
@


1.60
log
@
format string fixes from upstream
(git commit ebfd7d45c6b8eb5b2a1ee6e97a3f21f5f5bf9b43)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2014/01/13 08:46:45 dcoppa Exp $
d8 1
a8 1
REVISION =	1
d18 1
a18 1
SHARED_LIBS =	piano	4.0	# 0.0.0
@


1.59
log
@A couple of ui-related fixes from upstream:

Return if station info request fails
(upstream git commit b91dada75f804ccca64644f6d40276db4815f4b3)

Added Ctrl-u to readline, fixed several issues (multibyte,
\0-termination), and refactored readline code
(upstream git commit 9d5682f8acf991b060119a39bc8aa447175cd294)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/09/23 08:40:23 dcoppa Exp $
d8 1
a8 1
REVISION =	0
@


1.58
log
@Update to release 2013.09.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/09/02 11:58:39 dcoppa Exp $
d8 1
@


1.57
log
@
Increase buffer size to fix display of song lists with more than
999 items (upstream git commit bacc60b7a8e7854ca14b5a5f65429500831f20cb)

piano: replace station with same id.
(upstream git commit 6e82d7e6852fdac4a178445b3e2bcdb6d4e0fa63)

waitress: try all addresses returned by getaddrinfo.
Fix connection failures on mixed IPv4/IPv6 systems.
(upstream git commit f1ddd582ba5c314202fbed98d7aa491b06b2dee2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/07/10 16:40:47 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2013.05.19
REVISION =	2
d17 1
a17 1
SHARED_LIBS =	piano	3.1	# 0.0.0
d43 1
@


1.56
log
@piano: Check for libgcrypt errors.
This fixes some rare segfaults (see issues #369 and #293).

From upstream git commit f6df7d7e510f2d8879ec54dce32fee2b691dc32d
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/06/18 13:17:45 dcoppa Exp $
d8 1
a8 1
REVISION =	1
@


1.55
log
@Use -DGCRYPT_NO_DEPRECATED (now that it has been fixed) and drop
my local patches

Zap useless include
(upstream git commit a1e73fc8d72a5253cae29c9bab5b260ad297c5e2)

Amend pkg/MESSAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/05/20 07:16:25 dcoppa Exp $
d8 1
a8 1
REVISION =	0
@


1.54
log
@Update pianobar to release 2013.05.19
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/05/17 08:21:48 dcoppa Exp $
d8 1
d38 2
a39 1
		LIBGCRYPT_CFLAGS="-I${LOCALBASE}/include" \
@


1.53
log
@Update to the latest snapshot from its github repo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/03/10 22:55:05 espie Exp $
d7 1
a7 1
DISTNAME =	pianobar-2013.05.06
d15 1
a15 1
MASTER_SITES =	http://spacehopper.org/mirrors/
@


1.52
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/12/31 10:38:17 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2012.12.01
REVISION =	0
a13 1
MASTER_SITES =	${HOMEPAGE}
d15 3
a17 1
SHARED_LIBS =	piano	3.0	# 0.0.0
d22 1
a22 1
WANTLIB =	ao c faad gcrypt gnutls json m mad pthread
@


1.51
log
@config-example: update fingerprint of internal-tuner
(upstream git commit 214050e0567f1d152a001c7dd0ee903c6039ce37)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/12/05 12:20:43 dcoppa Exp $
a20 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d48 1
a48 1
REGRESS_TARGET = test
d55 1
a55 1
pre-regress:
@


1.50
log
@Update to pianobar-2012.12.01
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/11/30 15:52:56 dcoppa Exp $
d8 1
@


1.49
log
@Unbreak after pandora.com's api changes:

waitress: Fix chunked decoder
Fix "Get stations... Network error: Invalid encoded data."

New default TLS fingerprint
Fix "(i) Login... Network error: TLS handshake failed."

From upstream github.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/11/20 09:23:59 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2012.09.07
REVISION =	3
@


1.48
log
@player: fix typecast
(upstream git commit 12f132dd220027ee2075572d7271a5b13cfa4cbe)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2012/10/30 16:59:23 dcoppa Exp $
d8 1
a8 1
REVISION =	2
@


1.47
log
@player: Recover from AAC decoding error

Decoding errors are usually not fatal, so we can recover by skipping
the broken frame. This also fixes invalid memory reads caused by
sampleSizeCurr >= sampleSizeN.

(upstream git commit dd6c620b53272e2eb4b091a835cd250309f04cad)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2012/09/23 10:18:21 dcoppa Exp $
d8 1
a8 1
REVISION =	1
@


1.46
log
@piano: Fix memory leak pointed out by clang

from upstream git
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2012/09/18 12:35:03 dcoppa Exp $
d8 1
a8 1
REVISION =	0
@


1.45
log
@Update to pianobar-2012.09.07
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2012/07/06 08:32:13 dcoppa Exp $
d8 1
@


1.44
log
@
Properly initialize libgcrypt
(upstream git commit 96db841a16670b52fa462337c657c6dc6bd2844a)

Work around libgcrypt deprecation warnings. See:
http://lists.gnupg.org/pipermail/gcrypt-devel/2011-July/001830.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2012/06/28 07:10:25 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2012.06.24
REVISION =	0
d16 1
a16 1
SHARED_LIBS =	piano	2.0	# 0.0.0
@


1.43
log
@Update to release 2012.06.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2012/06/12 14:45:06 dcoppa Exp $
d8 1
@


1.42
log
@Update to snapshot 2012.06.10, chasing changes in pandora's api.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2012/06/08 11:01:20 dcoppa Exp $
d7 1
a7 1
DISTNAME =	pianobar-2012.06.10
d14 1
a14 1
MASTER_SITES =	http://spacehopper.org/mirrors/
@


1.41
log
@properly handle more error messages.
from upstream git.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2012/05/28 09:47:00 dcoppa Exp $
d7 1
a7 2
DISTNAME =	pianobar-2012.05.06
REVISION =	4
d14 1
a14 2
MASTER_SITES =	${HOMEPAGE} \
		http://spacehopper.org/mirrors/
d16 1
a16 1
SHARED_LIBS =	piano	1.3	# 0.0.0
d39 2
a40 2
		LIBpiano_VERSION="${LIBpiano_VERSION}" \
		MANDIR="${PREFIX}/man"
d45 2
a46 1
		INSTALL_PROGRAM="${INSTALL_PROGRAM}"
@


1.40
log
@Add libgcrypt CFLAGS to %.o target
(upstream git commit db4c66b2956a4da2745f16131fe573962c3fcbfb)

Fix ambiguous error message "Invalid Partner Login" on wrong
email address/password failure
(upstream git commit 81bf363ac69e0036562434ca0e7153c3e624c8c3)

Move mutex initalization to main thread
(upstream git commit ed7b2597a439c27e60d0b4cec85e801c9099173c)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2012/05/22 18:39:42 ajacoutot Exp $
d8 1
a8 1
REVISION =	3
d18 1
a18 1
SHARED_LIBS =	piano	1.2	# 0.0.0
@


1.39
log
@Remove workarounds now that we have a modern faad.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/05/14 08:07:00 dcoppa Exp $
d8 1
a8 1
REVISION =	2
@


1.38
log
@libpiano: add stationToken to addFeedback request: fixes thumbs
up/down and move song
(upstream git commit c4330c3f65b2eacd3433ba19b1483f6704303205)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/05/10 11:23:18 dcoppa Exp $
d8 1
a8 1
REVISION =	1
d28 1
a28 1
LIB_DEPENDS =	audio/faad \
@


1.37
log
@Correct LDFLAGS for pianobar/libpiano linking

from upstream git
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/05/07 11:04:21 dcoppa Exp $
d8 1
a8 1
REVISION =	0
d18 1
a18 1
SHARED_LIBS =	piano	1.1	# 0.0.0
@


1.36
log
@Update to *release* 2012.05.06
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/05/04 10:32:33 dcoppa Exp $
d8 1
@


1.35
log
@Update to a new snapshot dated 2012-05-02.
Makes pianobar work again, after the umpteenth change to Pandora API.

New dependencies: devel/json-c, security/libgcrypt
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.34 2012/04/20 08:22:34 dcoppa Exp $
d7 1
a7 1
DISTNAME =	pianobar-2012.05.02
d14 2
a15 3
MASTER_SITES =	http://spacehopper.org/mirrors/

SHARED_ONLY =	Yes
d17 1
a17 1
SHARED_LIBS =	piano	1.0	# 0.0.0
a33 2
CFLAGS +=	-I${LOCALBASE}/include

a39 1
		LDFLAGS="-L${LOCALBASE}/lib" \
d50 1
a50 1
NO_REGRESS =	Yes
d56 3
@


1.34
log
@Roll new distfile and gc local patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/04/19 21:39:08 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2012.04.14
d16 1
a16 1
SHARED_LIBS =	piano	0.0	# 0.0.0
d24 1
a24 2
WANTLIB =	ao c faad gmp gnutls hogweed iconv intl \
		m mad nettle p11-kit pthread tasn1 z
d29 3
a31 1
		security/gnutls>=2.10.0
@


1.33
log
@Bandaid fix to avoid unlocking a non-locked mutex.
PTHREAD_MUTEX_STRICT_NP is merciless ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/04/16 13:09:26 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2012.03.17
a6 1
REVISION =	3
d39 1
@


1.32
log
@Add option to enable TLS for all actions (not just sending login
credentials). Useful to get around GeoIP restrictions.
(upstream git commit 35763dea799c96361e288a10eab0fbd16c36e880)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/04/11 08:41:58 dcoppa Exp $
d7 1
a7 1
REVISION =	2
@


1.31
log
@Warn if ctl is not a fifo.
Ordinary files are not supported and cause problems, so close the
fd and print a warning instead.
(upstream git commit ed6d013054f589f2999926b02f4ac6dc76c7fe91)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/03/29 13:54:17 dcoppa Exp $
d7 1
a7 1
REVISION =	1
@


1.30
log
@Correctly initialize fd using -1
(upstream git commit 7d659d4bd624b3100b0c0852039648d7803cbaf9)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/03/20 14:27:45 dcoppa Exp $
d7 1
a7 1
REVISION =	0
@


1.29
log
@Update to snapshot dated 2012.03.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/03/02 11:42:56 dcoppa Exp $
d7 1
@


1.28
log
@Don't use custom format output as format string: fixes a segmentation
fault when searching for a station named '%'
(upstream git commit e6a87e15043767c0f1f00a62110e4bbb53de4ece)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/01/20 13:04:16 dcoppa Exp $
d5 1
a5 2
DISTNAME =	pianobar-2012.01.20
REVISION =	0
@


1.27
log
@Update to the latest snapshot from upstream git to unbreak pianobar
after pandora.com's API changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/01/16 13:27:09 dcoppa Exp $
d6 1
@


1.26
log
@Update to pianobar-2012.01.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/12/19 12:44:37 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2012.01.10
d12 1
a12 1
MASTER_SITES =	${HOMEPAGE:S/\/projects/\/static\/projects/}
a48 2

USE_GROFF =	Yes
@


1.25
log
@Fix genre selection segfault
(upstream git commit d20878bce0c0d84e5b49d1b9642e71bb0d18341a)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/12/13 09:10:09 dcoppa Exp $
d5 1
a5 2
DISTNAME =	pianobar-2011.12.11
REVISION =	0
@


1.24
log
@Update to pianobar-2011.12.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/12/08 18:27:19 dcoppa Exp $
d6 1
@


1.23
log
@Fix memset (upstream git commit 2da38556d614b9bc969f65b3683c2ce6eb99e6bc)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/11/28 14:11:25 dcoppa Exp $
d5 1
a5 2
DISTNAME =	pianobar-2011.11.21
REVISION =	0
d12 1
a12 1
MASTER_SITES =	http://spacehopper.org/mirrors/
@


1.22
log
@Update to pianobar-2011.11.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/09/22 14:28:13 dcoppa Exp $
d6 1
@


1.21
log
@Update to pianobar-2011.09.22
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/09/22 09:22:41 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2011.09.22
d11 2
a12 2
HOMEPAGE =	http://6xq.net/html/00/17.html
MASTER_SITES =	http://6xq.net/media/00/16/
d24 2
a25 1
WANTLIB =	ao c faad m mad pthread
d27 4
a30 3
LIB_DEPENDS =	audio/libao \
		audio/faad \
		audio/libmad
d49 2
@


1.20
log
@Unbreak: pandora.com changed api (again)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/09/16 08:26:10 espie Exp $
d5 1
a5 2
DISTNAME =	pianobar-2011.07.09
REVISION =	3
@


1.19
log
@normalize pkgpath in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/07/18 15:04:08 dcoppa Exp $
d6 1
a6 1
REVISION =	2
@


1.18
log
@Fix false bookmarking error message
(upstream commit c5a89908b05126fd59ea7d4fd42d9570a2ca6228)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/07/11 13:31:14 dcoppa Exp $
d6 1
a6 1
REVISION =	1
@


1.17
log
@repair my stupidity
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/07/10 11:01:05 dcoppa Exp $
d6 1
a6 1
REVISION =	0
@


1.16
log
@Update to pianobar-2011.07.09.
Actually unbreak it, after pandora.com's api change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/05/13 09:52:51 dcoppa Exp $
d6 1
a51 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/pianobar
	${INSTALL_DATA} ${WRKSRC}/COPYING ${PREFIX}/share/doc/pianobar
@


1.15
log
@Fix a bug: QuickMix stations losing state.
(upstream commit 49f64fd33c202831407ba6b02fa74c2037052f1c)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/05/04 07:48:04 dcoppa Exp $
d5 1
a5 2
DISTNAME =	pianobar-2011.04.27
REVISION =	0
@


1.14
log
@Update to pianobar-2011.04.27
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/04/21 10:02:09 dcoppa Exp $
d6 1
@


1.13
log
@Update to pianobar-2011.04.10

USE_GROFF no more needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/03/20 16:05:38 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2011.04.10
d36 2
a37 2
MAKE_FLAGS =	LIBAO_INCLUDE="${LOCALBASE}/include/ao" \
		LIBAO_LIB="-L${LOCALBASE}/lib -lao" \
d47 1
a48 3

ALL_TARGET =	pianobar libpiano
INSTALL_TARGET =install install-libpiano
@


1.12
log
@Add missing include to suppress nasty warnings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/03/14 12:28:57 dcoppa Exp $
d5 1
a5 2
DISTNAME =	pianobar-2011.01.24
REVISION =	0
a46 1
USE_GROFF =	Yes
@


1.11
log
@Update to pianobar-2011.01.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/01/05 14:06:51 dcoppa Exp $
d6 1
@


1.10
log
@Fix high cpu usage when started with nohup (backported from upstream git)
Fix audio playback on big-endian machines (from upstream git)
Sanitize CFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/15 00:22:48 espie Exp $
d5 1
a5 2
DISTNAME =	pianobar-2010.11.06
REVISION =	0
d31 4
@


1.9
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/13 12:59:18 dcoppa Exp $
d6 1
@


1.8
log
@Update to pianobar-2010.11.06
Fixing "Error: Protocol incompatible. Please upgrade libpiano."

pianobar is playing cat and mouse with pandora.com...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/18 16:52:47 espie Exp $
d26 3
a28 3
LIB_DEPENDS =	::audio/libao \
		::audio/faad \
		::audio/libmad
@


1.7
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/10/07 14:27:36 dcoppa Exp $
d5 1
a5 1
DISTNAME =	pianobar-2010.10.07
@


1.6
log
@Update to pianobar-2010.10.07

Unbreak after pandora.com API changes ("Error: Protocol incompatible. Please upgrade libpiano.")
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/09/14 15:10:12 dcoppa Exp $
d43 1
@


1.5
log
@Update to pianobar-2010.08.21

"go ahead" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/09/12 16:49:09 jasper Exp $
d5 1
a5 1
DISTNAME =	pianobar-2010.08.21
@


1.4
log
@- move distfiles/ to a proper mirroring location.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/07/20 09:47:18 dcoppa Exp $
d5 2
a6 3
VERSION =	0.20100619
DISTNAME =	PromyLOPh-pianobar-3631791
PKGNAME =	pianobar-${VERSION}
d12 1
a12 1
MASTER_SITES =	http://distfiles.nl/
@


1.3
log
@Update to pianobar-3631791.
No more cmake, build system is plain make now.

OK landry@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/05/13 18:35:51 dcoppa Exp $
d13 1
a13 1
MASTER_SITES =	http://www.phil.uu.nl/~lievisse/distfiles/
@


1.2
log
@Update audio/pianobar: my fixes have been merged upstream.
While here, add a MESSAGE file and comment the patch.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/03/29 21:12:20 dcoppa Exp $
d5 2
a6 2
VERSION =	0.20100513
DISTNAME =	PromyLOPh-pianobar-2a1e819
d15 4
d25 1
a25 1
WANTLIB =	c m pthread
d27 3
a29 1
MODULES =	devel/cmake
d31 1
a31 3
LIB_DEPENDS =	ao::audio/libao \
		faad::audio/faad \
		mad::audio/libmad
d33 4
a36 1
CONFIGURE_ARGS= -DMAN_INSTALL_DIR="${PREFIX}/man"
d38 6
d45 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 2
VERSION =	0.20100313
DISTNAME =	PromyLOPh-pianobar-34ff325
@


1.1.1.1
log
@import audio/pianobar

pianobar is a console client for the personalized web radio pandora 
(http://www.pandora.com).

OK landry@@
@
text
@@
