head	1.22;
access;
symbols
	OPENBSD_6_1:1.21.0.4
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.21.0.2
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.18.0.4
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	zhuk_20130205:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2017.05.24.08.07.32;	author espie;	state Exp;
branches;
next	1.21;
commitid	2qFAklH7Og1iS2NS;

1.21
date	2016.03.18.23.12.15;	author naddy;	state Exp;
branches;
next	1.20;
commitid	KZAl4KEiw6a3Jixw;

1.20
date	2015.11.18.11.05.46;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	IAje8D67xeRjyS6b;

1.19
date	2015.10.07.05.50.24;	author ajacoutot;	state Exp;
branches;
next	1.18;
commitid	cfUqLA2EnNvfaPZH;

1.18
date	2015.05.28.10.17.22;	author pascal;	state Exp;
branches;
next	1.17;
commitid	020U4lCPk8wUkCOz;

1.17
date	2015.03.27.08.43.01;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	9SD62DzRZ5qtR5xU;

1.16
date	2014.11.02.10.33.50;	author zhuk;	state Exp;
branches;
next	1.15;
commitid	jfdR94F7ujVYSUi5;

1.15
date	2014.10.05.00.07.33;	author zhuk;	state Exp;
branches;
next	1.14;
commitid	Q4CBUjv0QYt5yAnm;

1.14
date	2014.10.04.22.34.27;	author zhuk;	state Exp;
branches;
next	1.13;
commitid	TqnappAZAgWBgtGt;

1.13
date	2014.09.11.09.02.13;	author zhuk;	state Exp;
branches;
next	1.12;
commitid	JwzeAdZX8wLsDm5L;

1.12
date	2014.06.25.00.29.45;	author zhuk;	state Exp;
branches;
next	1.11;
commitid	DF3OsXZrygjkn6rh;

1.11
date	2014.03.10.20.28.41;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2014.02.08.19.39.34;	author juanfra;	state Exp;
branches;
next	1.9;

1.9
date	2013.12.12.11.13.39;	author zhuk;	state Exp;
branches;
next	1.8;

1.8
date	2013.08.07.21.31.13;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.27.10.57.40;	author zhuk;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.21.16.05.00;	author zhuk;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.16.09.31.05;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.10.22.55.01;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2013.02.06.20.47.41;	author zhuk;	state Exp;
branches;
next	1.2;

1.2
date	2013.02.06.13.23.03;	author zhuk;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.05.14.00.16;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.02.05.14.00.16;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.22
log
@let it build with clang. don't -Werror, because that doesn't work with
extended warnings
@
text
@# $OpenBSD: Makefile,v 1.21 2016/03/18 23:12:15 naddy Exp $

COMMENT =	Qt4-based featureful music player

V =		1.2.3
DISTNAME =	clementine-${V}
CATEGORIES =	audio x11
REVISION =	5

HOMEPAGE =	http://clementine-player.org/

MAINTAINER =	Vadim Zhukov <zhuk@@openbsd.org>
MASTER_SITES =	https://github.com/clementine-player/Clementine/archive/
DISTFILES =	${PKGNAME}.tar.gz{${V}.tar.gz}
WRKDIST =	${WRKDIR}/Clementine-${V}

# GPLv2/LGPLv2/GFDL
PERMIT_PACKAGE_CDROM =		Yes

WANTLIB =  c m pthread z
WANTLIB += GL GLU GLEW ICE SM X11 Xext
WANTLIB += lib/qt4/QtDBus lib/qt4/QtGui lib/qt4/QtNetwork
WANTLIB += lib/qt4/QtOpenGL lib/qt4/QtSql lib/qt4/QtWebKit
WANTLIB += lib/qt4/QtXml lib/qt4/QtXmlPatterns
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB += gstapp-0.10 gstbase-0.10 gstcdda-0.10 gstreamer-0.10
WANTLIB += gsttag-0.10
WANTLIB += cdio chromaprint gpod execinfo fftw3 lastfm mtp mygpo-qt
WANTLIB += protobuf qca2 qjson tag>=5.0 usb-1.0 xml2 ${LIBECXX}
# those are dlopen'ed
WANTLIB += plist

MODULES =		devel/cmake devel/gettext x11/qt4
WANT_CXX =		base gcc

BUILD_DEPENDS =		devel/boost \
			devel/cmake>=2.8.10.2p3 \
			devel/sparsehash

RUN_DEPENDS =		devel/desktop-file-utils \
			multimedia/gstreamer-0.10/plugins-good \
			multimedia/gstreamer-0.10/plugins-ffmpeg \
			x11/gtk+3,-guic

LIB_DEPENDS =		audio/chromaprint \
			audio/libcdio \
			audio/libgpod \
			audio/liblastfm \
			audio/taglib>=1.4 \
			devel/libexecinfo \
			devel/libmtp \
			devel/libplist \
			devel/libusb1 \
			devel/protobuf \
			devel/qjson \
			graphics/glew \
			math/fftw3 \
			multimedia/gstreamer-0.10/core \
			multimedia/gstreamer-0.10/plugins-base \
			net/libmygpo-qt \
			security/qca2

TEST_DEPENDS =		${MODPY_BUILD_DEPENDS}

# Unported stuff
CONFIGURE_ARGS =	-DENABLE_SOUNDMENU:Bool=Off \
			-DENABLE_SPOTIFY_BLOB:Bool=Off

# It's advised by Google to use bundled GTest and GMock
CONFIGURE_ARGS +=	-DFORCE_BUNDLED_GMOCK=Yes

# Use system SQLite
CONFIGURE_ARGS +=	-DSTATIC_SQLITE:Bool=No \
			-DI_HATE_MY_USERS:Bool=Yes \
			-DMY_USERS_WILL_SUFFER_BECAUSE_OF_ME:Bool=Yes

# stupidity
CONFIGURE_ARGS +=	-DBUILD_WERROR:Bool=No

# XXX Builds tend to sometimes omit projectM presets when this option
# is missing. To be investigated.
CONFIGURE_ARGS +=	-DBUNDLE_PROJECTM_PRESETS:Bool=Yes

post-extract:
	cp ${FILESDIR}/config.h.in ${WRKSRC}/ext/libclementine-common/

.include <bsd.port.mk>
@


1.21
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/11/18 11:05:46 ajacoutot Exp $
d29 1
a29 1
WANTLIB += protobuf qca2 qjson tag>=5.0 usb-1.0 xml2
d33 2
a34 3
MODULES =		gcc4 devel/cmake devel/gettext x11/qt4
MODGCC4_LANGS =		c c++
MODGCC4_ARCHS =		*
d76 3
@


1.20
log
@s/PKGNAME/DISTNAME so that portroach can detect new releases.

ok zhuk@@ (maintainer)
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.19 2015/10/07 05:50:24 ajacoutot Exp $

SHARED_ONLY =	Yes
@


1.19
log
@Bring consistency in GStreamer dependencies:
- remove most dependencies on plugins-bad and plugins-ugly; there is no reason
on depend on these because they should only provide support for rare and/or
rarely used codecs
- for standard how-of-the-box support for most modern files, always depend on
plugins-good and plugins-ffmpeg|libav.

gstreamer1 parts from Brad, gstreamer-0.10 parts from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/05/28 10:17:22 pascal Exp $
d8 1
a8 1
PKGNAME =	clementine-${V}
@


1.18
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/03/27 08:43:01 ajacoutot Exp $
d10 1
a10 1
REVISION =	4
d45 1
a45 1
			multimedia/gstreamer-0.10/plugins-ugly \
@


1.17
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/11/02 10:33:50 zhuk Exp $
d10 1
a10 1
REVISION =	3
@


1.16
log
@Unify my email in MAINTAINER lines to make portroach happy.

Kindly reminded by jasper@@ a week (or two?) ago, sorry for slacking.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/10/05 00:07:33 zhuk Exp $
d10 1
a10 1
REVISION =	2
d46 1
a46 1
			x11/gtk+2,-guic
@


1.15
log
@Somewhat fix the long-standing bug which prevented playing files with
non-ASCII characters in their name. Unfortunately, the alternative patch
that was pushed upstream didn't resolve issue, so we have to use this
dirty patch instead.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/10/04 22:34:27 zhuk Exp $
d10 1
a10 1
REVISION =	1
d14 1
a14 1
MAINTAINER =	Vadim Zhukov <persgray@@gmail.com>
@


1.14
log
@Unbreak running Clementine tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/09/11 09:02:13 zhuk Exp $
d10 1
a10 1
REVISION =	0
@


1.13
log
@Maintaince update of Clementine to 1.2.3. Contains minor bugfixes.
Also adds support for GCC 4.9 and CMake 3.x.

Problem with CMake 3.x noticed by landry@@, fix from upstream repo via dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/06/25 00:29:45 zhuk Exp $
d10 1
@


1.12
log
@Sync FindBacktrace.cmake with what's been committed upstream and what's the
Clementine actually waits for.

Pointed out, initially patched and tested by sthen@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/03/10 20:28:41 landry Exp $
d7 2
a8 2
DISTNAME =	clementine-1.2.1
REVISION =	2
d14 3
a16 1
MASTER_SITES =	https://clementine-player.googlecode.com/files/
d36 1
a36 1
MODGCC4_ARCHS =		${GCC4_ARCHS}
@


1.11
log
@Fix build with gcc 4.8, remove a pair of -W not supported by that version
and include <unistd.h> for unlink(), since it uses -Werror.
Diff shown to zhuk@@ who was going to look into it..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/02/08 19:39:34 juanfra Exp $
d8 1
a8 1
REVISION =	1
@


1.10
log
@The DI plugin (mp3) requires plugins-good. ok zhuk@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/12/12 11:13:39 zhuk Exp $
d8 1
a8 1
REVISION =	0
@


1.9
log
@Update Clementine to 1.2.1, some features:

  * Support for indexing and playing music from Box, Dropbox, Skydrive,
    and Ubuntu One.
  * Support for Subsonic.
  * Remote control support for Android.
  * Playlist tab at the sidebar. Starred playlists are saved in here
    when their tabs are closed.
  * Opus support.
  * POPM and FMPS tags support.
  * Option to resume playback on startup.
  * ... and many others.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/08/07 21:31:13 naddy Exp $
d8 1
d41 1
@


1.8
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/27 10:57:40 zhuk Exp $
d7 1
a7 2
DISTNAME =	clementine-1.1.1
REVISION =	3
d18 1
a18 1
WANTLIB =  c m pthread stdc++ z
d23 1
a23 1
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
d26 2
a27 2
WANTLIB += cdio chromaprint execinfo fftw3 lastfm mtp protobuf-lite qca2
WANTLIB += qjson tag>=5.0 usb-1.0 xml2
d31 3
a33 1
MODULES =		devel/cmake devel/gettext x11/qt4
d44 3
a47 1
			audio/libcdio \
a48 1
			audio/liblastfm \
d58 1
d61 1
a61 3
# Requires audio/libgpod update, disable to avoid picking by accident
CONFIGURE_ARGS =	-DENABLE_LIBGPOD:Bool=No \
			-DENABLE_IMOBILEDEVICE:Bool=No
d63 6
a68 2
# Crash reporting
CONFIGURE_ARGS +=	-DENABLE_BREAKPAD:Bool=No
d70 4
a73 2
# Unported stuff
CONFIGURE_ARGS +=	-DENABLE_SOUNDMENU:Bool=No
@


1.7
log
@One more extra LIB_DEPENDS, spotted (and cluestick applied) by ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/21 16:05:00 zhuk Exp $
d14 1
a14 1
MASTER_SITES =	http://clementine-player.googlecode.com/files/
@


1.6
log
@Switch Clementine to FindBacktrace.cmake that was recently committed to CMake.

prodded by dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/16 09:31:05 brad Exp $
d8 1
a8 1
REVISION =	2
a51 1
			graphics/ffmpeg \
@


1.5
log
@- Tweak COMMENT so it sounds a little better.
- Reformat DESCR.

ok sthen@@ MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/10 22:55:01 espie Exp $
d8 1
a8 1
REVISION =	1
d35 1
d74 1
a74 1
	cp ${FILESDIR}/FindExecinfo.cmake ${WRKSRC}/cmake
@


1.4
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/02/06 20:47:41 zhuk Exp $
d4 5
d10 1
a10 2
COMMENT =	Qt4-based heavy featured music player
DISTNAME =	clementine-1.1.1
a11 1
REVISION =	0
@


1.3
log
@Fix bulk builds (at least for sthen@@) until the real issue gets resolved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/02/06 13:23:03 zhuk Exp $
a13 3
PERMIT_DISTFILES_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_PACKAGE_FTP =		Yes
@


1.2
log
@Unbreak Clementine build in wild environment (i.e., outta of my laptop):

  * Better handling of libexecinfo. I moved from adding some goo to
    CMakeLists.txt to writing proper FindExecinfo.cmake package.
  * Force source directory, or visualization presets could miss
    installation;
  * Force "plist" in WANTLIB, as it's being used by plugin;
  * Add back fftw3 dependency: while we use external libchromaprint now,
    fftw3 is also needed for so called "moodbar".
  * Nit: remove libnjb, it's use was actually gone in the last release;

Lots of input from sthen@@ and nigel@@, committing ASAP.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/02/05 14:00:16 zhuk Exp $
d67 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
d27 1
a27 1
WANTLIB += cdio chromaprint lastfm mtp protobuf-lite qca2
d29 2
d44 1
a44 1
			audio/libnjb \
d53 1
d67 3
@


1.1.1.1
log
@Clementine is a multiplatform music player. It is inspired by
Amarok 1.4, focusing on a fast and easy-to-use interface for searching
and playing your music.

"import as-is, i've seen those ports too much" landry@@
@
text
@@
