head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.12
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.10
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.8
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.4
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.10.01.20.52.48;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	qswBh9lTvGgaZGjX;

1.2
date	2014.09.11.09.02.13;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	JwzeAdZX8wLsDm5L;

1.1
date	2014.03.10.20.28.42;	author landry;	state Exp;
branches;
next	;


desc
@@


1.3
log
@
Fix cmake-related issues; regen patch

no bump needed
@
text
@$OpenBSD: patch-src_CMakeLists_txt,v 1.2 2014/09/11 09:02:13 zhuk Exp $
1. -Wno-unused-private-field -Wno-unknown-warning-option dont exist on gcc 4.8
2. FIX BUG 4401: No namespaces for DBus interfaces, from upstream.
--- src/CMakeLists.txt.orig	Wed Apr 23 12:16:44 2014
+++ src/CMakeLists.txt	Wed Oct  1 16:35:16 2014
@@@@ -1,6 +1,6 @@@@
 
 set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall")
-set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Woverloaded-virtual -Wall -Wno-sign-compare -Wno-deprecated-declarations -Wno-unused-local-typedefs -Wno-unused-private-field -Wno-unknown-warning-option --std=c++0x -U__STRICT_ANSI__")
+set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Woverloaded-virtual -Wall -Wno-sign-compare -Wno-deprecated-declarations -Wno-unused-local-typedefs --std=c++0x -U__STRICT_ANSI__")
 
 option(BUILD_WERROR "Build with -Werror" ON)
 
@@@@ -885,11 +885,6 @@@@ optional_source(LINUX SOURCES widgets/osd_x11.cpp)
 if(HAVE_DBUS)
   file(MAKE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/dbus)
 
-  # Hack to get it to generate interfaces without namespaces - required
-  # because otherwise org::freedesktop::UDisks and
-  # org::freedesktop::UDisks::Device conflict.
-  list(APPEND QT_DBUSXML2CPP_EXECUTABLE -N)
-
   # MPRIS DBUS interfaces
   qt4_add_dbus_adaptor(SOURCES
       dbus/org.freedesktop.MediaPlayer.player.xml
@@@@ -957,6 +952,10 @@@@ if(HAVE_DBUS)
 
   # DeviceKit DBUS interfaces
   if(HAVE_DEVICEKIT)
+    set_source_files_properties(dbus/org.freedesktop.UDisks.xml
+        PROPERTIES NO_NAMESPACE dbus/udisks)
+    set_source_files_properties(dbus/org.freedesktop.UDisks.Device.xml
+        PROPERTIES NO_NAMESPACE dbus/udisksdevice)
     qt4_add_dbus_interface(SOURCES
         dbus/org.freedesktop.UDisks.xml
         dbus/udisks)
@@@@ -1167,9 +1166,6 @@@@ add_library(clementine_lib STATIC
   ${PO}
   ${OTHER_UIC_SOURCES}
 )
-
-add_dependencies(clementine_lib pot)
-
 
 target_link_libraries(clementine_lib
   clementine-spotifyblob-messages
@


1.2
log
@Maintaince update of Clementine to 1.2.3. Contains minor bugfixes.
Also adds support for GCC 4.9 and CMake 3.x.

Problem with CMake 3.x noticed by landry@@, fix from upstream repo via dcoppa@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_CMakeLists_txt,v 1.1 2014/03/10 20:28:42 landry Exp $
d4 2
a5 2
--- src/CMakeLists.txt.orig	Wed Apr 23 14:16:44 2014
+++ src/CMakeLists.txt	Thu Sep 11 11:24:32 2014
d37 10
@


1.1
log
@Fix build with gcc 4.8, remove a pair of -W not supported by that version
and include <unistd.h> for unlink(), since it uses -Werror.
Diff shown to zhuk@@ who was going to look into it..
@
text
@d1 5
a5 4
$OpenBSD$
-Wno-unused-private-field -Wno-unknown-warning-option dont exist on gcc 4.8
--- src/CMakeLists.txt.orig	Sat Mar  8 12:08:49 2014
+++ src/CMakeLists.txt	Sat Mar  8 12:09:19 2014
d14 23
@

