head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.4
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.11.04.10.10.47;	author dcoppa;	state Exp;
branches;
next	;
commitid	E5hOMEftaDPF8qvy;


desc
@@


1.1
log
@
alac: fixed demuxer mdat/moov parser
(upstream git commit 550488a10db0acfbe149a4910a9a7170da2a770a)
@
text
@$OpenBSD$

commit 550488a10db0acfbe149a4910a9a7170da2a770a
Author: Alexey Yakovenko <wakeroid@@gmail.com>
Date:   Mon Oct 10 10:45:24 2016 +0200

alac: fixed demuxer mdat/moov parser

--- plugins/alac/demux.c.orig	Sun Jun 19 13:26:18 2016
+++ plugins/alac/demux.c	Fri Nov  4 11:01:26 2016
@@@@ -530,9 +530,8 @@@@ static int read_chunk_moov(qtmovie_t *qtmovie, size_t 
             read_chunk_iods(qtmovie, sub_chunk_len);
             break;
         default:
-            trace ("(moov) unknown chunk id: %c%c%c%c\n",
-                    SPLITFOURCC(sub_chunk_id));
-            return 0;
+            stream_skip(qtmovie->stream, sub_chunk_len-8);
+            break;
         }
 
         size_remaining -= sub_chunk_len;
@
