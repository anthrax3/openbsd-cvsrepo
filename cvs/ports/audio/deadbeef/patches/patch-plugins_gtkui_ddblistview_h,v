head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.09.23.15.03.39;	author dcoppa;	state Exp;
branches;
next	;
commitid	G6ecScK18vcNF4SQ;


desc
@@


1.1
log
@
Merge fixes from the "0.6.2-fixes" branch:

artwork: crash fix when file mask is empty (bug #1177)

gtkui: fix random crash after closing playlist using menu (bug #1193)
@
text
@$OpenBSD$

commit 05f3d65bb98cb7f7756ea6ff2632f7fcda7c9fbb
Author: Alexey Yakovenko <waker@@users.sourceforge.net>
Date:   Fri Sep 12 21:24:16 2014 +0200

gtkui: fix random crash after closing playlist using menu (bug #1193)

--- plugins/gtkui/ddblistview.h.orig	Thu Jul 31 21:16:23 2014
+++ plugins/gtkui/ddblistview.h	Tue Sep 23 16:28:20 2014
@@@@ -22,6 +22,7 @@@@
 #include <sys/time.h>
 #include <stdint.h>
 #include "drawing.h"
+#include "../../deadbeef.h"
 
 // drag and drop targets
 enum {
@@@@ -164,6 +165,7 @@@@ struct _DdbListview {
     struct _DdbListviewColumn *columns;
     gboolean lock_columns;
 
+    ddb_playlist_t *plt; // current playlist (refcounted), must be unreffed with the group
     struct _DdbListviewGroup *groups;
     int groups_build_idx; // must be the same as playlist modification idx
     int fullheight;
@
