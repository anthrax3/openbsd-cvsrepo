head	1.3;
access;
symbols
	OPENBSD_4_7:1.2.0.28
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.26
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.24
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.22
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.20
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.18
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.16
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.14
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.12
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.10
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.8
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.0.8
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.6
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.4
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1;
locks; strict;
comment	@# @;


1.3
date	2010.05.09.18.00.30;	author jakemsr;	state dead;
branches;
next	1.2;

1.2
date	2003.06.13.00.49.38;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.29.01.13.50;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- cdio(1) in base can do what tosha does, and more
- aucat(1) in base can do what waveplay does, and more
bye bye to tosha and waveplay
ok landry@@
@
text
@$OpenBSD: patch-waveplay_c,v 1.2 2003/06/13 00:49:38 pvalchev Exp $
--- waveplay.c.orig	Mon Sep 24 01:38:40 2001
+++ waveplay.c	Thu Jun 12 17:38:52 2003
@@@@ -36,6 +36,8 @@@@
 
 #if defined (__FreeBSD__) && __FreeBSD__ < 4
 #include <machine/soundcard.h>
+#elif defined (__OpenBSD__)
+#include <soundcard.h>
 #else
 #include <sys/soundcard.h>
 #endif
@@@@ -43,8 +45,12 @@@@
 #include "wavefmt.h"
 
 #ifndef DEFAULT_DSP
+#ifdef __OpenBSD__
+#define DEFAULT_DSP "/dev/audio"
+#else
 #define DEFAULT_DSP "/dev/dsp"
 #endif
+#endif
 
 #ifndef DEFAULT_BUFFERSIZE
 #define DEFAULT_BUFFERSIZE 2048
@@@@ -350,7 +356,11 @@@@ int openDSP(const char* devname, PWAVEFO
 
 int closeDSP(int fd)
 {
+#ifdef __OpenBSD__
+    ioctl(fd, SNDCTL_DSP_SYNC, NULL);
+#else
     ioctl(fd, SNDCTL_DSP_SYNC);
+#endif
     return close(fd);
 }
 
@


1.2
log
@update to newer, BSD-licensed version
thanks to Michael Coulter <mjc@@bitz.ca> for testing
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Update to waveplay-20001210
Install manual pages, rename patches and bump NEED_VERSION.
@
text
@d2 3
a4 3
--- waveplay.c.orig	Sat Dec  9 06:27:25 2000
+++ waveplay.c	Sat Jul 28 18:53:44 2001
@@@@ -13,6 +13,8 @@@@
d6 1
a6 1
 #if defined (__FreeBSD__)
d10 2
a11 2
 #elif defined (linux)
 #include <linux/soundcard.h>
d13 1
a13 1
@@@@ -20,7 +22,7 @@@@
d17 1
a17 1
-#define DEFAULT_DSP "/dev/dsp"
d19 2
d22 1
d25 2
a26 1
@@@@ -301,7 +303,7 @@@@ int openDSP(const char* devname, PWAVEFO
d30 1
a30 1
-    ioctl(fd, SNDCTL_DSP_SYNC);
d32 3
@

