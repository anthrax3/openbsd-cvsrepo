head	1.2;
access;
symbols
	OPENBSD_4_6:1.1.0.6
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.4
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2010.01.11.05.11.32;	author jakemsr;	state dead;
branches;
next	1.1;

1.1
date	2008.03.24.03.09.42;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@-update to hydrogen-0.9.4: bugfixes, qt3->qt4, code cleanup & file renaming
-add sndio audio and midi support, drop OSS audio support
- take maintainership
maintainer change suggested by grange@@ (former maintainer), ok ratchov@@
@
text
@$OpenBSD: patch-src_lib_drivers_JackDriver_h,v 1.1 2008/03/24 03:09:42 jakemsr Exp $
--- src/lib/drivers/JackDriver.h.orig	Fri Feb 29 18:19:39 2008
+++ src/lib/drivers/JackDriver.h	Sat Mar  1 00:07:56 2008
@@@@ -36,7 +36,8 @@@@
 #include <jack/jack.h>
 #include <jack/transport.h>
 
-#include "../Globals.h"\
+#include "../Globals.h"
+#include "lib/Hydrogen.h"
 
 ///
 /// Jack (Jack Audio Connection Kit) server driver
@@@@ -59,7 +60,6 @@@@ class JackDriver : public GenericDriver
 
 		unsigned getSampleRate();
 
-
 		jack_transport_state_t getTransportState() {	return m_JackTransportState;	}
 		jack_position_t getTransportPos() {	return m_JackTransportPos;	}
 
@@@@ -81,13 +81,19 @@@@ class JackDriver : public GenericDriver
 		virtual void locate( unsigned long nFrame );
 		virtual void updateTransportInfo();
 		virtual void setBpm(float fBPM);
+		void calculateFrameOffset();
 
 	private:
+		void relocateBBT();
+		long long bbt_frame_offset;
+		int must_relocate;
+
 		JackProcessCallback processCallback;
 		jack_port_t *output_port_1;
 		jack_port_t *output_port_2;
 		string output_port_name_1;
 		string output_port_name_2;
+		int track_port_count;
 		jack_port_t *track_output_ports_L[MAX_INSTRUMENTS];
 		jack_port_t *track_output_ports_R[MAX_INSTRUMENTS];
 
@


1.1
log
@
- default to /dev/audio for the audio device, but allow other
devices to be used as well

- add jack output.  these patches are back ported from hydrogen
subversion.

discussed with MAINTAINER
@
text
@d1 1
a1 1
$OpenBSD$
@

