head	1.9;
access;
symbols
	OPENBSD_3_1:1.8.0.4
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_TRACKING_SWITCH:1.7
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3;
locks; strict;
comment	@# @;


1.9
date	2002.07.26.19.57.23;	author brad;	state dead;
branches;
next	1.8;

1.8
date	2001.10.11.18.08.47;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2001.02.18.20.49.13;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2001.01.03.15.50.50;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2000.08.06.08.21.35;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.11.29.07.06.06;	author kevlo;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	99.10.08.04.09.16;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.10.08.04.08.33;	author brad;	state dead;
branches;
next	1.1;

1.1
date	99.06.15.13.26.24;	author brad;	state Exp;
branches;
next	;

1.4.2.1
date	2000.09.15.04.42.31;	author marc;	state Exp;
branches;
next	;


desc
@@


1.9
log
@upgrade to esound 0.2.28
--
With some testing by: naddy@@
@
text
@--- ltconfig.orig	Fri Apr  9 02:12:57 1999
+++ ltconfig	Thu Oct 11 09:39:00 2001
@@@@ -484,7 +484,14 @@@@ fi
 
 if test -n "$RANLIB"; then
   old_archive_cmds="$old_archive_cmds~\$RANLIB \$oldlib"
-  old_postinstall_cmds="\$RANLIB \$oldlib~$old_postinstall_cmds"
+  case "$host_os" in 
+  openbsd*) 
+    old_postinstall_cmds="\$RANLIB -t \$oldlib~$old_postinstall_cmds"
+  ;;
+  *)
+    old_postinstall_cmds="\$RANLIB \$oldlib~$old_postinstall_cmds"
+  ;;
+  esac
 fi
 
 # Set sane defaults for `DLLTOOL' and `AS', used on cygwin.
@@@@ -1030,7 +1037,9 @@@@ cygwin* | mingw*)
 freebsd2* | sunos4*)
   exclude_expsyms="_GLOBAL_OFFSET_TABLE_"
   ;;
-
+openbsd*)
+  with_gnu_ld=no
+  ;;
 esac
 
 ld_shlibs=yes
@@@@ -1262,10 +1271,24 @@@@ else
     ;;
 
   openbsd*)
-    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts'
-    hardcode_libdir_flag_spec='-R$libdir'
     hardcode_direct=yes
     hardcode_shlibpath_var=no
+    if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+      archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linkopts'
+      hardcode_libdir_flag_spec='${wl}-R$libdir'
+      export_dynamic_flag_spec='${wl}-E'
+    else
+      case "$host_os" in
+      openbsd[01].* | openbsd2.[0-7] | openbsd2.[0-7].*)
+	archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts'
+	hardcode_libdir_flag_spec='-R$libdir'
+	;;
+      *)
+	archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linkopts'
+	hardcode_libdir_flag_spec='${wl}-R$libdir'
+	;;
+      esac
+    fi
     ;;
 
   os2*)
@@@@ -1789,9 +1812,25 @@@@ netbsd*)
 
 openbsd*)
   version_type=sunos
-  if test "$with_gnu_ld" = yes; then
-    need_lib_prefix=no
-    need_version=no
+  need_lib_prefix=no
+  need_version=no
+  sys_lib_search_path_spec="/usr/lib"
+  sys_lib_dlsearch_path_spec="/usr/lib /usr/local/lib"
+  file_magic_cmd=/usr/bin/file
+  file_magic_test_file=`echo /usr/lib/libc.so.*`
+  if test "`echo __ELF__ | $CC -E - | grep __ELF__`" = "" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+    deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'
+    case "$host_os" in
+    openbsd2.[89] | openbsd2.[89].*)
+      shlibpath_overrides_runpath=no
+    ;;
+    *)
+      shlibpath_overrides_runpath=yes
+    ;;
+    esac
+  else
+    deplibs_check_method='file_magic OpenBSD.* shared library'
+    shlibpath_overrides_runpath=yes
   fi
   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
   finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
@


1.8
log
@sync libtool patches
@
text
@@


1.7
log
@sync libtool patches
@
text
@d2 18
a19 2
+++ ltconfig	Sun Feb 18 10:23:30 2001
@@@@ -1030,6 +1030,9 @@@@
d23 1
a26 1
 
d29 2
a30 1
@@@@ -1262,10 +1265,21 @@@@
d38 7
a44 2
+    case "$host_os" in
+      openbsd2.[01234567])
d47 1
a47 1
+      ;;
d50 4
a53 6
+	hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+	if [ "`/usr/bin/file /usr/lib/libc.so.* | grep ELF`" != "" ]; then
+	  export_dynamic_flag_spec='${wl}-E'
+	fi
+      ;;
+    esac
d57 1
a57 1
@@@@ -1789,13 +1803,10 @@@@
d64 20
a83 1
-  fi
a85 5
   shlibpath_var=LD_LIBRARY_PATH
+  deplibs_check_method='pass_all'
   ;;
 
 os2*)
@


1.6
log
@upgrade to esound 0.2.22
@
text
@d2 1
a2 1
+++ ltconfig	Sun Dec 31 16:25:18 2000
d13 1
a13 1
@@@@ -1262,10 +1265,18 @@@@
d29 3
d37 1
a37 1
@@@@ -1789,13 +1800,10 @@@@
@


1.5
log
@upgrade to esound 0.2.19
@
text
@d2 40
a41 2
+++ ltconfig	Sun Aug  6 03:27:02 2000
@@@@ -1796,6 +1796,7 @@@@
@


1.4
log
@Update to 0.2.16.
@
text
@d1 2
a2 2
--- ltconfig.orig	Mon Nov 29 14:56:09 1999
+++ ltconfig	Mon Nov 29 14:56:30 1999
@


1.4.2.1
log
@bring cut-off audio into 2.7 branch
@
text
@d1 2
a2 2
--- ltconfig.orig	Fri Apr  9 02:12:57 1999
+++ ltconfig	Sun Aug  6 03:27:02 2000
@


1.3
log
@upgrade to esound 0.2.15
@
text
@d1 2
a2 2
--- ltconfig.orig	Fri Oct  8 00:05:18 1999
+++ ltconfig	Fri Oct  8 00:06:03 1999
@


1.2
log
@upgrade to esound 0.2.15
@
text
@d1 7
a7 10
--- ltconfig.orig	Tue Jun 15 09:22:10 1999
+++ ltconfig	Tue Jun 15 09:22:22 1999
@@@@ -1378,7 +1378,7 @@@@
 aix*)
   symcode='[BCDTU]'
   ;;
-sunos* | cygwin32* | mingw32*)
+sunos* | cygwin32* | mingw32* | openbsd*)
   sympat='_\([_A-Za-z][_A-Za-z0-9]*\)'
   symxfrm='_\1 \1'
d9 2
@


1.1
log
@- patch ltconfig for detecting proceeding underscores in compiled symbols
@
text
@@

