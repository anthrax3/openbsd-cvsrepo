head	1.3;
access;
symbols
	OPENBSD_6_1:1.2.0.22
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.20
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.16
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.18
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.14
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.12
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.10
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.8
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.6
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.24
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.22
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.20
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.18
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.16
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.14
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.12
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.10
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.8
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.6
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.4
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.2
	OPENBSD_3_9_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.04.30.10.11.44;	author espie;	state Exp;
branches;
next	1.2;
commitid	Ya3TUtmkXV5V7yWT;

1.2
date	2011.10.31.16.55.41;	author stu;	state Exp;
branches;
next	1.1;

1.1
date	2006.01.08.15.44.50;	author alek;	state Exp;
branches;
next	;


desc
@@


1.3
log
@silence most warnings and an error with clang
@
text
@$OpenBSD: patch-cdplayer_cc,v 1.2 2011/10/31 16:55:41 stu Exp $
--- cdplayer.cc.orig
+++ cdplayer.cc
@@@@ -19,7 +19,7 @@@@
 
 void open_cd (), setvol (int), do_update (), read_toc (), play_msf (int, int, int),
     time_track (int, int, int), play_track (int), popup (int, int), 
-    out (char *, ...);
+    out (const char *, ...);
 int get_info ();
 
 class button {
@@@@ -27,9 +27,9 @@@@ class button { (private)
     int state;
     char name[20];
 public:
-    button (char *s) {state=0; strcpy (name, s);}
+    button (const char *s) {state=0; strcpy (name, s);}
     ~button () {}
-    set (int i) {
+    void set (int i) {
 	if (state != i) {
 	    state = i;
 	    if (state == 0)
@@@@ -62,7 +62,7 @@@@ typedef enum {
 
 #define C(x) {#x, sizeof(#x)-1, x}
 struct {
-    char *s;
+    const char *s;
     int l;
     command cmd;
 } clist[] = {
@@@@ -90,6 +90,7 @@@@ button play_button ("play"),  pause_button ("pause"), 
 #define S(t) toc_buffer[t].addr.msf.second
 #define F(t) toc_buffer[t].addr.msf.frame
 
+int
 main (int argc, char **argv)
 {
     char dev[20], line[50];
@@@@ -233,7 +234,7 @@@@ open_cd ()
 	if (errno == EBUSY || EINVAL)
 	    return; /* loading the CD? */
 {FILE *f=fopen("/tmp/cdplayer.error", "w"); fprintf(f, "exiting with errno=%d\n", errno);}
-	err (1, device);
+	err (1, "%s", device);
     }
 }
 void
@@@@ -409,7 +410,7 @@@@ play_msf (int start_m, int start_s, int start_f)
     i=ioctl (cd_fd, CDIOCPLAYMSF, (char *)&a);
 }
 void 
-out (char *fmt, ...)
+out (const char *fmt, ...)
 {
     va_list ap;
 
@


1.2
log
@Tidy up Makefile, use modern ports bits, take MAINTAINER,
and most importantly, have it use Tcl/Tk 8.5 instead of 8.4.

ok sebastia@@, sthen@@
@
text
@d1 15
a15 4
$OpenBSD: patch-cdplayer_cc,v 1.1 2006/01/08 15:44:50 alek Exp $
--- cdplayer.cc.orig	Tue Feb  2 18:28:24 1999
+++ cdplayer.cc	Sun Oct 30 13:07:48 2011
@@@@ -29,7 +29,7 @@@@ class button { (private)
d17 2
a18 1
     button (char *s) {state=0; strcpy (name, s);}
d25 35
@


1.1
log
@Update to 1.7

Joint work with Jasper Lievisse Adriaanse <jasper@@nedbsd.nl>
@
text
@d1 4
a4 4
$OpenBSD$
--- cdplayer.cc.orig	Sun Jan  8 15:56:08 2006
+++ cdplayer.cc	Sun Jan  8 15:56:14 2006
@@@@ -29,7 +29,7 @@@@ private:
@

