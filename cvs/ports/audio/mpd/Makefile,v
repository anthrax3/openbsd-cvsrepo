head	1.110;
access;
symbols
	OPENBSD_6_1:1.103.0.2
	OPENBSD_6_1_BASE:1.103
	OPENBSD_6_0:1.91.0.2
	OPENBSD_6_0_BASE:1.91
	OPENBSD_5_9:1.85.0.2
	OPENBSD_5_9_BASE:1.85
	OPENBSD_5_8:1.76.0.4
	OPENBSD_5_8_BASE:1.76
	OPENBSD_5_7:1.72.0.2
	OPENBSD_5_7_BASE:1.72
	OPENBSD_5_6:1.59.0.2
	OPENBSD_5_6_BASE:1.59
	OPENBSD_5_5:1.56.0.2
	OPENBSD_5_5_BASE:1.56
	OPENBSD_5_4:1.54.0.2
	OPENBSD_5_4_BASE:1.54
	OPENBSD_5_3:1.52.0.2
	OPENBSD_5_3_BASE:1.52
	OPENBSD_5_2:1.47.0.2
	OPENBSD_5_2_BASE:1.47
	OPENBSD_5_1_BASE:1.42
	OPENBSD_5_1:1.42.0.2
	OPENBSD_5_0:1.39.0.2
	OPENBSD_5_0_BASE:1.39
	OPENBSD_4_9:1.36.0.2
	OPENBSD_4_9_BASE:1.36
	OPENBSD_4_8:1.23.0.2
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.20.0.2
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.18.0.2
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.16.0.2
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.13.0.2
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.11.0.2
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	bernd_2006-may-13:1.1.1.1
	bernd:1.1.1;
locks; strict;
comment	@# @;


1.110
date	2017.08.24.09.45.23;	author sthen;	state Exp;
branches;
next	1.109;
commitid	PnxiRKB45Z5BPng8;

1.109
date	2017.07.26.22.45.15;	author sthen;	state Exp;
branches;
next	1.108;
commitid	tD4MFrpYYDDL2UFT;

1.108
date	2017.07.16.19.18.48;	author espie;	state Exp;
branches;
next	1.107;
commitid	tt0GhWK5c4uf9ILG;

1.107
date	2017.06.09.08.44.52;	author dcoppa;	state Exp;
branches;
next	1.106;
commitid	hEjmnB3vPoLTHrlL;

1.106
date	2017.05.31.08.08.15;	author espie;	state Exp;
branches;
next	1.105;
commitid	ij92FtFXiSiT1ani;

1.105
date	2017.05.30.12.31.54;	author landry;	state Exp;
branches;
next	1.104;
commitid	827Ckk2QhBORPwTM;

1.104
date	2017.05.27.04.41.43;	author espie;	state Exp;
branches;
next	1.103;
commitid	zYbSJYUuMHg82YnC;

1.103
date	2017.03.12.10.13.49;	author dcoppa;	state Exp;
branches;
next	1.102;
commitid	VAk7TRefqYvkTxXf;

1.102
date	2017.02.23.13.03.46;	author dcoppa;	state Exp;
branches;
next	1.101;
commitid	wN4qQ4LwSIY5cNAO;

1.101
date	2016.12.30.08.59.10;	author jsg;	state Exp;
branches;
next	1.100;
commitid	GHXJFdacxGY89u5O;

1.100
date	2016.12.15.10.59.12;	author dcoppa;	state Exp;
branches;
next	1.99;
commitid	Y0Oh7RTtjd6cex8S;

1.99
date	2016.12.11.12.59.40;	author dcoppa;	state Exp;
branches;
next	1.98;
commitid	3orgrAlxXS6aJJ6m;

1.98
date	2016.12.05.11.56.19;	author dcoppa;	state Exp;
branches;
next	1.97;
commitid	AtoVhagdaTjDEz7A;

1.97
date	2016.11.24.08.27.28;	author dcoppa;	state Exp;
branches;
next	1.96;
commitid	NNwTedpjDUQi3i7B;

1.96
date	2016.09.23.09.16.52;	author sthen;	state Exp;
branches;
next	1.95;
commitid	XLnI6AbHAmyVU5mO;

1.95
date	2016.09.15.06.50.06;	author landry;	state Exp;
branches;
next	1.94;
commitid	EvabJul6WBJWW05r;

1.94
date	2016.08.30.10.20.15;	author jasper;	state Exp;
branches;
next	1.93;
commitid	ldmJChLP8htfEKn3;

1.93
date	2016.08.25.07.24.20;	author dcoppa;	state Exp;
branches;
next	1.92;
commitid	5YHcN4xtmaJ2utfP;

1.92
date	2016.08.08.08.06.54;	author dcoppa;	state Exp;
branches;
next	1.91;
commitid	c1UhyFiJz2Fan6pP;

1.91
date	2016.07.11.06.14.48;	author dcoppa;	state Exp;
branches;
next	1.90;
commitid	vVzsHxWoM9Z5ZKwM;

1.90
date	2016.07.04.08.50.28;	author dcoppa;	state Exp;
branches;
next	1.89;
commitid	1viRUrSJl6f89HHA;

1.89
date	2016.06.14.14.11.08;	author dcoppa;	state Exp;
branches;
next	1.88;
commitid	nCKdkYF0fmshIJbr;

1.88
date	2016.05.01.17.48.02;	author dcoppa;	state Exp;
branches;
next	1.87;
commitid	R3wwo5Tf19JAtjfg;

1.87
date	2016.03.21.12.42.31;	author dcoppa;	state Exp;
branches;
next	1.86;
commitid	LWDqwK0L2wuwEnpV;

1.86
date	2016.02.25.09.04.50;	author dcoppa;	state Exp;
branches;
next	1.85;
commitid	BSZXtQdGGmWLp4T9;

1.85
date	2016.02.21.16.17.26;	author jsg;	state Exp;
branches;
next	1.84;
commitid	IZQsfcjAwN1evvTh;

1.84
date	2015.12.16.08.48.09;	author dcoppa;	state Exp;
branches;
next	1.83;
commitid	KykP0ZVg8JtlsK0i;

1.83
date	2015.12.16.07.58.56;	author landry;	state Exp;
branches;
next	1.82;
commitid	p3CBzx4UJv5I5yPP;

1.82
date	2015.12.04.14.48.56;	author dcoppa;	state Exp;
branches;
next	1.81;
commitid	vOLkgk0yDIaFjn62;

1.81
date	2015.10.28.19.01.39;	author dcoppa;	state Exp;
branches;
next	1.80;
commitid	82xGBc2P5riezZud;

1.80
date	2015.10.26.16.03.56;	author dcoppa;	state Exp;
branches;
next	1.79;
commitid	Xb1peMOncFQBAFWp;

1.79
date	2015.10.23.07.53.05;	author dcoppa;	state Exp;
branches;
next	1.78;
commitid	CuA8xoxygTjqt3OG;

1.78
date	2015.10.20.15.10.42;	author dcoppa;	state Exp;
branches;
next	1.77;
commitid	NIS4GPJiAYev61BL;

1.77
date	2015.09.24.08.28.48;	author dcoppa;	state Exp;
branches;
next	1.76;
commitid	tA8RcAPE3w04sB9L;

1.76
date	2015.06.22.08.09.28;	author dcoppa;	state Exp;
branches
	1.76.4.1;
next	1.75;
commitid	1tRavTcRq4FWrEgI;

1.75
date	2015.05.28.10.17.22;	author pascal;	state Exp;
branches;
next	1.74;
commitid	020U4lCPk8wUkCOz;

1.74
date	2015.05.07.16.15.41;	author dcoppa;	state Exp;
branches;
next	1.73;
commitid	yA4zPz32Xr0GHiuF;

1.73
date	2015.03.16.21.40.18;	author landry;	state Exp;
branches;
next	1.72;
commitid	92FILzMq8Pl8AbFW;

1.72
date	2015.02.08.14.09.35;	author dcoppa;	state Exp;
branches;
next	1.71;
commitid	UdnPmuZTfuDJ1J1S;

1.71
date	2015.01.21.10.17.40;	author landry;	state Exp;
branches;
next	1.70;
commitid	HEEISCw0UvRljFie;

1.70
date	2015.01.15.08.15.14;	author dcoppa;	state Exp;
branches;
next	1.69;
commitid	tsfTQONUoFWfVJZT;

1.69
date	2014.11.27.19.57.16;	author ajacoutot;	state Exp;
branches;
next	1.68;
commitid	wyP1rLvE9lr0s8ZK;

1.68
date	2014.11.27.18.20.55;	author dcoppa;	state Exp;
branches;
next	1.67;
commitid	f3tXWd9ympVvrdLh;

1.67
date	2014.11.27.13.52.08;	author dcoppa;	state Exp;
branches;
next	1.66;
commitid	aOMCUe29owPOYhuk;

1.66
date	2014.11.12.08.46.02;	author dcoppa;	state Exp;
branches;
next	1.65;
commitid	Z8DSSUqSwEzUtE2s;

1.65
date	2014.11.03.12.12.12;	author dcoppa;	state Exp;
branches;
next	1.64;
commitid	6V5P4AWGcpPjnKs8;

1.64
date	2014.10.27.11.07.18;	author dcoppa;	state Exp;
branches;
next	1.63;
commitid	JjEptsOSGQjQU7rk;

1.63
date	2014.09.29.08.43.47;	author dcoppa;	state Exp;
branches;
next	1.62;
commitid	gpMsjNrjoqdieXqq;

1.62
date	2014.09.15.08.44.35;	author dcoppa;	state Exp;
branches;
next	1.61;
commitid	x8r3PJQiBIa1dtik;

1.61
date	2014.09.02.08.33.59;	author dcoppa;	state Exp;
branches;
next	1.60;
commitid	bZhdyRSwkVLkrwMg;

1.60
date	2014.08.19.06.39.05;	author landry;	state Exp;
branches;
next	1.59;
commitid	dWNZpcQNEysGIT02;

1.59
date	2014.06.06.14.53.37;	author jturner;	state Exp;
branches;
next	1.58;
commitid	IvQppCtuS8QJSPDE;

1.58
date	2014.05.19.07.52.07;	author dcoppa;	state Exp;
branches;
next	1.57;

1.57
date	2014.05.06.10.49.23;	author dcoppa;	state Exp;
branches;
next	1.56;

1.56
date	2013.11.05.07.08.52;	author dcoppa;	state Exp;
branches;
next	1.55;

1.55
date	2013.09.19.15.02.16;	author dcoppa;	state Exp;
branches;
next	1.54;

1.54
date	2013.03.21.08.45.12;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2013.03.10.22.55.04;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2013.01.10.14.01.51;	author dcoppa;	state Exp;
branches;
next	1.51;

1.51
date	2012.10.05.08.29.39;	author dcoppa;	state Exp;
branches;
next	1.50;

1.50
date	2012.09.24.16.26.33;	author landry;	state Exp;
branches;
next	1.49;

1.49
date	2012.09.01.14.36.56;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2012.08.23.14.28.19;	author dcoppa;	state Exp;
branches;
next	1.47;

1.47
date	2012.07.13.14.10.36;	author dcoppa;	state Exp;
branches;
next	1.46;

1.46
date	2012.05.24.18.36.45;	author shadchin;	state Exp;
branches;
next	1.45;

1.45
date	2012.04.16.09.50.17;	author dcoppa;	state Exp;
branches;
next	1.44;

1.44
date	2012.04.10.15.12.54;	author dcoppa;	state Exp;
branches;
next	1.43;

1.43
date	2012.03.04.16.57.19;	author dcoppa;	state Exp;
branches;
next	1.42;

1.42
date	2011.10.30.11.46.18;	author dcoppa;	state Exp;
branches;
next	1.41;

1.41
date	2011.10.17.12.40.44;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2011.09.16.08.26.10;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2011.05.11.06.22.16;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2011.04.05.19.55.38;	author landry;	state Exp;
branches;
next	1.37;

1.37
date	2011.03.14.09.17.26;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2010.12.27.14.50.22;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.12.24.10.40.04;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2010.12.13.18.34.05;	author jasper;	state Exp;
branches;
next	1.33;

1.33
date	2010.11.26.07.07.56;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2010.11.15.00.22.47;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.03.18.18.51;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2010.10.29.12.54.43;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2010.10.28.11.30.08;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2010.10.28.11.24.35;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2010.10.19.19.45.53;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.18.21.35.48;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2010.10.18.16.52.45;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.08.23.14.46.55;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2010.06.03.16.06.07;	author pea;	state Exp;
branches;
next	1.22;

1.22
date	2010.05.22.11.10.09;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2010.04.09.11.39.33;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2010.01.12.18.58.26;	author wcmaier;	state Exp;
branches;
next	1.19;

1.19
date	2010.01.12.18.51.07;	author wcmaier;	state Exp;
branches;
next	1.18;

1.18
date	2009.06.29.15.34.37;	author beck;	state Exp;
branches;
next	1.17;

1.17
date	2009.04.10.00.52.07;	author beck;	state Exp;
branches;
next	1.16;

1.16
date	2008.10.28.15.21.48;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2008.09.15.22.04.17;	author jakemsr;	state Exp;
branches;
next	1.14;

1.14
date	2008.09.09.08.11.29;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2008.07.15.08.40.49;	author bernd;	state Exp;
branches;
next	1.12;

1.12
date	2008.03.24.06.51.04;	author jakemsr;	state Exp;
branches;
next	1.11;

1.11
date	2008.02.17.18.53.02;	author bernd;	state Exp;
branches;
next	1.10;

1.10
date	2007.12.07.07.46.38;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.18.18.26.52;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2007.07.19.08.06.24;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2007.06.29.06.08.12;	author jakemsr;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.22.11.42.14;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2007.05.20.13.05.27;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.05.14.42.56;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2006.08.01.10.50.19;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2006.06.14.12.37.52;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.13.09.52.49;	author bernd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.05.13.09.52.49;	author bernd;	state Exp;
branches;
next	;

1.76.4.1
date	2015.10.23.08.15.51;	author dcoppa;	state Exp;
branches;
next	;
commitid	BsKdiOYUTIymlVoE;


desc
@@


1.110
log
@bump; textproc/icu4c now uses multi-packages for -wwwdata
@
text
@# $OpenBSD: Makefile,v 1.109 2017/07/26 22:45:15 sthen Exp $

BROKEN-hppa =		no atomic ops
COMMENT =		Music Player Daemon
VER =			0.20.9
DISTNAME =		mpd-${VER}
CATEGORIES =		audio
HOMEPAGE =		http://www.musicpd.org/
MAINTAINER =		David Coppa <dcoppa@@openbsd.org>
REVISION =		1

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		FLAC audiofile avcodec avformat avutil \
			bz2 c cdio cdio_cdda cdio_paranoia curl \
			expat faad iconv icudata icui18n icuuc \
			id3tag iso9660 m mikmod mp3lame mpcdec \
			mpdclient ogg opus pthread samplerate \
			shout sndfile sndio speex sqlite3 theora \
			vorbis vorbisenc yajl z ${COMPILER_LIBCXX}

MASTER_SITES =		http://www.musicpd.org/download/mpd/${VER:R}/

COMPILER =		clang

BUILD_DEPENDS =		devel/boost

LIB_DEPENDS =		audio/faad>=2.6.1p0 \
			audio/flac \
			audio/lame \
			audio/libcdio \
			audio/libid3tag \
			audio/libmikmod \
			audio/libmpdclient \
			audio/libsamplerate \
			audio/libvorbis \
			audio/musepack \
			audio/opus \
			databases/sqlite3 \
			devel/libaudiofile \
			devel/libyajl \
			graphics/ffmpeg \
			net/curl \
			net/libshout \
			textproc/icu4c

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS +=	--bindir=${PREFIX}/sbin \
			--disable-adplug \
			--disable-alsa \
			--disable-ao \
			--disable-epoll \
			--disable-fluidsynth \
			--disable-gme \
			--disable-inotify \
			--disable-jack \
			--disable-libwrap \
			--disable-mad \
			--disable-mms \
			--disable-modplug \
			--disable-mpg123 \
			--disable-nfs \
			--disable-neighbor-plugins \
			--disable-oss \
			--disable-openal \
			--disable-pulse \
			--disable-roar \
			--disable-sidplay \
			--disable-shine-encoder \
			--disable-smbclient \
			--disable-soxr \
			--disable-systemd-daemon \
			--disable-twolame-encoder \
			--disable-upnp \
			--disable-wavpack \
			--disable-wildmidi \
			--enable-aac \
			--enable-audiofile \
			--enable-bzip2 \
			--enable-cdio-paranoia \
			--enable-cue \
			--enable-curl \
			--enable-ffmpeg \
			--enable-iconv \
			--enable-lame-encoder \
			--enable-lsr \
			--enable-mikmod \
			--enable-mpc \
			--enable-opus \
			--enable-pipe-output \
			--enable-shout \
			--enable-sndfile \
			--enable-sndio \
			--enable-soundcloud \
			--enable-sqlite \
			--enable-syslog \
			--enable-vorbis \
			--enable-vorbis-encoder \
			--enable-wave-encoder \
			--enable-zlib \
			--with-pollmethod=poll \
			--with-zeroconf=no \
			--without-systemdsystemunitdir

# OggFLAC tests, initgroups(3)
CONFIGURE_ENV =		LDFLAGS="-L${LOCALBASE}/lib" \
			CPPFLAGS="-I${LOCALBASE}/include -D_BSD_SOURCE"

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mpd
	${INSTALL_DATA} ${WRKSRC}/doc/mpdconf.example \
		${PREFIX}/share/examples/mpd/mpd.conf

.include <bsd.port.mk>
@


1.109
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2017/07/16 19:18:48 espie Exp $
d10 1
a10 1
REVISION =		0
@


1.108
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2017/06/09 08:44:52 dcoppa Exp $
d10 1
@


1.107
log
@
Bugfixing update to mpd-0.20.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2017/05/31 08:08:15 espie Exp $
d20 1
a20 1
			vorbis vorbisenc yajl z ${LIBECXX}
@


1.106
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2017/05/30 12:31:54 landry Exp $
d5 1
a5 1
VER =			0.20.8
@


1.105
log
@Update to mpd 0.20.8.

Fixes a database update issue reported by ajacoutot@@, fix found via
FreeBSD by Andre Smagin (cf https://github.com/MusicPlayerDaemon/MPD/issues/41)

ok dcoppa@@ (maintainer) ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2017/05/27 04:41:43 espie Exp $
d24 1
a24 1
WANT_CXX =		base clang
@


1.104
log
@use WANT_CXX, these build trivially
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2017/03/12 10:13:49 dcoppa Exp $
d5 1
a5 1
VER =			0.20.6
@


1.103
log
@
Update to mpd-0.20.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2017/02/23 13:03:46 dcoppa Exp $
d20 1
a20 1
			vorbis vorbisenc yajl z
d24 1
a24 3
MODULES =		lang/clang
MODCLANG_ARCHS =	*
MODCLANG_LANGS =	c++
@


1.102
log
@
Update to mpd-0.20.5.

mpd has sndio support now, disable libao output plugin.
Switch to clang.

Based on work by chrisz@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2016/12/30 08:59:10 jsg Exp $
d5 1
a5 1
VER =			0.20.5
@


1.101
log
@mpd already builds with ports gcc, now that the arm baseline is armv6k
builtin atomics are available on arm and mpd builds so stop marking it
as BROKEN on arm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2016/12/15 10:59:12 dcoppa Exp $
d5 2
a6 1
DISTNAME =		mpd-0.19.21
d14 13
a26 14
WANTLIB =		FLAC ao audiofile avcodec avformat \
			avutil bz2 c cdio cdio_cdda \
			cdio_paranoia curl expat faad glib-2.0 \
			gthread-2.0 icudata icui18n icuuc id3tag \
			intl m mikmod mp3lame mpcdec mpdclient \
			ogg opus pthread samplerate shout \
			sndfile sndio speex sqlite3 theora \
			vorbis vorbisenc vorbisfile yajl z

MASTER_SITES =		http://www.musicpd.org/download/mpd/stable/

MODULES =		gcc4
MODGCC4_ARCHS =		*
MODGCC4_LANGS =		c++
a32 1
			audio/libao \
a41 1
			devel/glib2 \
d53 1
a79 1
			--enable-ao \
d83 1
d86 1
d95 1
d98 1
@


1.100
log
@
Bugfixing update to mpd-0.19.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2016/12/11 12:59:40 dcoppa Exp $
a2 1
BROKEN-arm =		no atomic ops
@


1.99
log
@
Update to mpd-0.19.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2016/12/05 11:56:19 dcoppa Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.20
@


1.98
log
@
LogInit: initialize out_fd properly to avoid closing stdin
(upstream git commit 301abac0c1ca55e591b5afc53bf332cda294da19)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2016/11/24 08:27:28 dcoppa Exp $
d6 1
a6 2
DISTNAME =		mpd-0.19.19
REVISION =		3
@


1.97
log
@
Merge fixes from branch 'v0.19.x' of git://git.musicpd.org/master/mpd

decoder/pcm: round buffer size down to nearest frame size
(upstream git commit 7019f6bea455f0d843131ec5b88cf057ebba5058)

decoder/ffmpeg: ignore empty packets
(upstream git commit 77a9940461f96a608b1f564f810b146980e63c4d)

fix comment in mpdconf.example ("can setting can" -> "setting can")
(upstream git commit 7c251fe19013d17f5ecd65361a560d433c0c19ef)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2016/09/23 09:16:52 sthen Exp $
d7 1
a7 1
REVISION =		2
@


1.96
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2016/09/15 06:50:06 landry Exp $
d7 1
a7 1
REVISION =		1
@


1.95
log
@Now that --gc-sections has been disabled on powerpc (thanks jca@@!),
remove the hacks in ports to disable it locally. Those should build ootb
in the next-next bulk...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2016/08/30 10:20:15 jasper Exp $
d7 1
a7 1
REVISION =		0
d44 1
@


1.94
log
@bump after faad subpackage changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2016/08/25 07:24:20 dcoppa Exp $
a108 4

.if ${MACHINE_ARCH} == "powerpc"
CONFIGURE_ENV +=	ax_cv_check_ldflags___Wl___gc_sections=no
.endif
@


1.93
log
@
Update to mpd-0.19.19
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2016/08/08 08:06:54 dcoppa Exp $
d7 1
@


1.92
log
@
Update to mpd-0.19.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2016/07/11 06:14:48 dcoppa Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.18
@


1.91
log
@
Bugfixing update to mpd-0.19.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2016/07/04 08:50:28 dcoppa Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.17
@


1.90
log
@
Merge fixes from the upstream stable 'v0.19.x' branch:

commit 072e39c9cf449ccb8d7be301768a769f479c2875
Author: Max Kellermann <max@@duempel.org>
Date:   Fri Jul 1 21:17:52 2016 +0200

filter/ReplayGain: skip PcmVolume if a mixer is set

Previously, volume was applied twice: once by PcmVolume, and again by
the hardware mixer.

commit ba8e579e9b8126a694d1125e001acddbeb494299
Author: Max Kellermann <max@@duempel.org>
Date:   Fri Jul 1 21:22:21 2016 +0200

pcm/Volume: use 0x69 to generate DSD silence
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2016/06/14 14:11:08 dcoppa Exp $
d6 1
a6 2
DISTNAME =		mpd-0.19.16
REVISION =		0
@


1.89
log
@
Update to mpd-0.19.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2016/05/01 17:48:02 dcoppa Exp $
d7 1
@


1.88
log
@
Update to mpd-0.19.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2016/03/21 12:42:31 dcoppa Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.15
@


1.87
log
@
Update to mpd-0.19.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2016/02/25 09:04:50 dcoppa Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.14
@


1.86
log
@
Update to mpd-0.19.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2016/02/21 16:17:26 jsg Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.13
@


1.85
log
@Don't attempt to build on arm.  sync atomic builtins required.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2015/12/16 08:48:09 dcoppa Exp $
d6 1
a6 1
DISTNAME =		mpd-0.19.12
@


1.84
log
@
Bugfixing update to mpd-0.19.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2015/12/16 07:58:56 landry Exp $
d3 1
@


1.83
log
@Fix linking on powerpc by disabling -Wl,--gc-sections
With hint from mpi@@, ok dcoppa@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2015/12/04 14:48:56 dcoppa Exp $
d5 1
a5 2
DISTNAME =		mpd-0.19.11
REVISION =		0
d111 1
@


1.82
log
@
Merge the fix from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2015/10/28 19:01:39 dcoppa Exp $
d109 3
@


1.81
log
@
Update to mpd-0.19.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2015/10/26 16:03:56 dcoppa Exp $
d6 1
@


1.80
log
@
Merge fixes from the upstream stable 'v0.19.x' branch:

decoder/ffmpeg: fix crash due to wrong avio_alloc_context() call
(git commit 1958f78cc1bd47ce1c9b57db41194f85aed942ab)

decoder/gme: call decoder_seek_error() on seek error
(git commit 93c97972b9cb41284f8af8b653e056484bbf4717)

output/Command: flush the mixer cache when enabling/disabling output
(git commit ac61d43720393803cb3f6bc5c74aea588e1ca68d)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2015/10/23 07:53:05 dcoppa Exp $
d5 1
a5 2
DISTNAME =		mpd-0.19.10
REVISION =		3
@


1.79
log
@
ffmpeg decoder: avoid a double free error while decoding a stream

bug reported and fix tested by "J. Scott Heppler"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2015/10/20 15:10:42 dcoppa Exp $
d6 1
a6 1
REVISION =		2
@


1.78
log
@
Merge fixes from upstream stable 'v0.19.x' branch:

encoder/flac: fix crash with 32 bit playback
(upstream git commit 4e3d1821895c92d060fc3a9059e83ac58c8c79a3)

tag/ApeLoader: fix buffer overflow after unterminated key
(upstream git commit 205fba74cffffb9df985cdf928101633ffc41772)

decoder/mpcdec: use Clamp()
(upstream git commit 2a58f2264936787ddd96b40c7626046592c2d1a0)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2015/09/24 08:28:48 dcoppa Exp $
d6 1
a6 1
REVISION =		1
@


1.77
log
@
Enable SoundCloud support through libyajl; Nils Reusse <n DOT reusse AT hxgn DOT net>
Do some housekeeping while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/06/22 08:09:28 dcoppa Exp $
d6 1
a6 1
REVISION =		0
@


1.76
log
@
Update to mpd-0.19.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2015/05/28 10:17:22 pascal Exp $
d6 1
d18 4
a21 4
			m mikmod mp3lame mpcdec mpdclient ogg \
			opus pthread samplerate shout sndfile \
			sndio speex sqlite3 theora vorbis \
			vorbisenc vorbisfile z
d25 2
a26 2
MODULES =		devel/gettext gcc4
MODGCC4_ARCHS =		i386 amd64 powerpc sparc64 alpha hppa
d45 1
a73 1
			--disable-soundcloud \
d95 1
@


1.76.4.1
log
@
MFC:

flac encoder: fix crash with 32 bit playback
(upstream git commit 4e3d1821895c92d060fc3a9059e83ac58c8c79a3)

tag/ApeLoader: fix buffer overflow after unterminated key
(upstream git commit 205fba74cffffb9df985cdf928101633ffc41772)

ffmpeg decoder: avoid a double free error while decoding a stream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/06/22 08:09:28 dcoppa Exp $
a5 1
REVISION =		0
@


1.75
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2015/05/07 16:15:41 dcoppa Exp $
d5 1
a5 2
DISTNAME =		mpd-0.19.9
REVISION =		1
@


1.74
log
@
Merge fix from the stable 'v0.19.x' branch:

OpusEncoderPlugin: initialise granulepos so we end up with sane values
(upstream git commit 0d7ee2b014db4f5072ac17839d0c7f3535c60675)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/03/16 21:40:18 landry Exp $
d6 1
a6 1
REVISION =		0
@


1.73
log
@BROKEN-hppa =  no atomic ops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/02/08 14:09:35 dcoppa Exp $
d6 1
@


1.72
log
@
Bugfixing update to mpd-0.19.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/01/21 10:17:40 landry Exp $
d3 1
@


1.71
log
@Unbreak by adding hppa to MODGCC4_ARCHS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2015/01/15 08:15:14 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.19.8
@


1.70
log
@
Update to mpd-0.19.8 and enable the sqlite option to gain sticker
support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2014/11/27 19:57:16 ajacoutot Exp $
d24 1
a24 1
MODGCC4_ARCHS =		i386 amd64 powerpc sparc64 alpha
@


1.69
log
@Add our late tremor FLAVOR to pkgpath.

ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2014/11/27 18:20:55 dcoppa Exp $
d4 1
a4 2
DISTNAME =		mpd-0.19.5
REVISION =		1
d18 2
a19 2
			sndio speex theora vorbis vorbisenc \
			vorbisfile z
a72 1
			--disable-sqlite \
d93 1
@


1.68
log
@
bye bye tremor flavor

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2014/11/27 13:52:08 dcoppa Exp $
d5 1
a5 1
REVISION =		0
@


1.67
log
@
Update to mpd-0.19.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2014/11/12 08:46:02 dcoppa Exp $
d5 1
d15 6
a20 5
			cdio_paranoia curl expat glib-2.0 \
			gthread-2.0 icudata icui18n icuuc \
			id3tag m mad mikmod mpdclient ogg \
			opus pthread samplerate sndfile \
			sndio z
d30 3
a32 1
LIB_DEPENDS =		devel/libaudiofile \
a34 2
			audio/libsamplerate \
			audio/flac \
a35 1
			audio/libmad \
d37 4
a41 1
			audio/libmpdclient \
d43 1
d46 1
a48 3
FLAVORS =		tremor
FLAVOR ?=

d59 1
d80 1
d87 1
a88 1
			--enable-mad \
d93 1
d95 3
d103 1
a103 1
# OggFLAC and tremor tests, initgroups(3)
a105 23

.if ${FLAVOR:Mtremor}
CONFIGURE_ARGS +=	--with-tremor \
			--disable-shout \
			--disable-vorbis-encoder \
			--disable-lame-encoder \
			--disable-aac \
			--disable-mpc
LIB_DEPENDS +=		audio/tremor
WANTLIB +=		vorbisidec
.else
WANTLIB +=		theora vorbis vorbisfile vorbisenc speex mp3lame \
			shout faad mpcdec
LIB_DEPENDS +=		audio/libvorbis \
			audio/speex \
			audio/lame \
			net/libshout \
			audio/faad>=2.6.1p0 \
			audio/musepack
CONFIGURE_ARGS +=	--enable-aac \
			--enable-shout \
			--enable-vorbis-encoder
.endif
@


1.66
log
@
Update to mpd-0.19.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/11/03 12:12:12 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.19.3
a57 1
			--disable-mp4v2 \
@


1.65
log
@
Bugfix update to mpd-0.19.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/10/27 11:07:18 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.19.2
d48 1
d76 1
d79 1
d87 1
d90 1
@


1.64
log
@
Update to mpd-0.19.1

Tested by landry@@ on powerpc, and on amd64 by me and Bryan Linton
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2014/09/29 08:43:47 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.19.1
@


1.63
log
@
Update to mpd-0.18.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2014/09/15 08:44:35 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.18.16
d12 7
a18 4
WANTLIB =		FLAC ao audiofile avcodec avformat avutil c \
			cdio cdio_cdda cdio_paranoia curl glib-2.0 \
			gthread-2.0 id3tag m mad mikmod ogg pthread \
			samplerate sndfile sndio bz2 mpdclient opus z
d26 2
d38 1
d41 1
a41 1
			devel/glib2
d49 1
d57 1
d59 2
d66 2
d69 1
d73 1
d86 1
@


1.62
log
@
Bugfix update to mpd-0.18.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2014/09/02 08:33:59 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.18.14
@


1.61
log
@
Bugfix update to mpd-0.18.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2014/08/19 06:39:05 landry Exp $
d4 1
a4 1
DISTNAME =		mpd-0.18.13
@


1.60
log
@Fix build on alpha by adding it to MODGCC4_ARCHS, 4.6 works.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2014/06/06 14:53:37 jturner Exp $
d4 1
a4 2
DISTNAME =		mpd-0.18.11
REVISION =		0
@


1.59
log
@Enable the ffmpeg decoder plugin bringing back various mp4 (m4a, m4b,
etc.) playback support. mp4 support was lost when 0.18 dropped support
for the mp4ff decoder plugin (provided by audio/faad).

ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2014/05/19 07:52:07 dcoppa Exp $
d21 1
a21 1
MODGCC4_ARCHS =		i386 amd64 powerpc sparc64
@


1.58
log
@Update to mpd-0.18.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2014/05/06 10:49:23 dcoppa Exp $
d5 1
d13 4
a16 4
WANTLIB =		FLAC ao audiofile c cdio cdio_cdda cdio_paranoia \
			curl glib-2.0 gthread-2.0 id3tag m mad \
			mikmod ogg pthread samplerate sndfile sndio \
			bz2 mpdclient opus z
d34 1
a43 1
			--disable-ffmpeg \
d66 1
@


1.57
log
@
Update to mpd-0.18.10, now that a nasty race condition when using
GLib event loop has been fixed upstream.

It adds a dependency on gcc 4.8 because code was rewritten c++11-style.

Original diff for 0.18.9 by landry@@.
Tested by landry@@ and Bryan Linton.
OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/11/05 07:08:52 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.18.10
@


1.56
log
@Bugfix update to mpd-0.17.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/09/19 15:02:16 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.17.6
d15 1
a15 1
			stdc++ z
d17 1
a17 1
MASTER_SITES =		http://www.musicpd.org/download/mpd/0.17/
d19 3
a21 1
MODULES =		devel/gettext
d31 2
d43 1
d52 1
a56 1
			--disable-soup \
d89 1
a89 1
			shout faad mp4ff mpcdec
a99 1

@


1.55
log
@Bugfix update to mpd-0.17.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/03/21 08:45:12 ajacoutot Exp $
d4 1
a4 1
DISTNAME =		mpd-0.17.5
d17 1
a17 1
MASTER_SITES =		http://www.musicpd.org/download/mpd/stable/
@


1.54
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/03/10 22:55:04 espie Exp $
d4 1
a4 1
DISTNAME =		mpd-0.17.3
d17 1
a17 1
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=musicpd/}
@


1.53
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/01/10 14:01:51 dcoppa Exp $
a95 1
USE_LIBTOOL =		Yes
@


1.52
log
@Bugfix update to mpd-0.17.3

Ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/10/05 08:29:39 dcoppa Exp $
a10 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.51
log
@Bugfixing update to mpd-0.17.2

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/09/24 16:26:33 landry Exp $
d4 1
a4 1
DISTNAME =		mpd-0.17.2
@


1.50
log
@Backport fix for an issue with httpd output streaming. Audio was being
played too fast when resuming, see http://bugs.musicpd.org/view.php?id=3527
ok dcoppa@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/09/01 14:36:56 ajacoutot Exp $
d4 1
a4 1
DISTNAME =		mpd-0.17.1
a7 1
REVISION=	1
@


1.49
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/08/23 14:28:19 dcoppa Exp $
d8 1
a8 1
REVISION=	0
@


1.48
log
@Update to mpd-0.17.1

Tested by landry@@, edd@@ and Abel Abraham Camarillo Ojeda.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2012/07/13 14:10:36 dcoppa Exp $
d8 1
@


1.47
log
@Sort CONFIGURE_ARGS; no bump needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2012/05/24 18:36:45 shadchin Exp $
d4 1
a4 2
DISTNAME =		mpd-0.16.8
REVISION =		1
d15 4
a18 2
WANTLIB +=		c m pthread ogg z stdc++ sndio curl glib-2.0 gthread-2.0
WANTLIB +=		audiofile ao samplerate sndfile FLAC id3tag mad mikmod
d26 1
a40 1
			--disable-cue \
d43 1
d51 1
d53 2
d56 1
d61 1
d69 2
a70 1
			--with-zeroconf=no
a77 1
			--disable-oggflac \
@


1.46
log
@Switch ports on musepack, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2012/04/16 09:50:17 dcoppa Exp $
d37 1
a37 2
CONFIGURE_ARGS +=	--enable-ao \
			--enable-pipe-output \
d39 3
a41 2
			--disable-oss \
			--disable-pulse \
d43 1
a43 7
			--enable-mikmod \
			--enable-curl \
			--disable-wavpack \
			--bindir=${PREFIX}/sbin \
			--with-zeroconf=no \
			--disable-cue \
			--disable-sqlite \
d46 3
d50 6
a55 3
			--disable-ffmpeg \
			--enable-mpc \
			--disable-libwrap \
a56 2
			--enable-audiofile \
			--disable-gme \
d58 3
a60 1
			--disable-mpg123 \
d62 1
a62 1
			--disable-twolame-encoder
@


1.45
log
@Fix up DESCR: fix mistake with the tremor FLAVOR description and
fix capitalisation within the DESCR file.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2012/04/10 15:12:54 dcoppa Exp $
d5 1
a5 1
REVISION =		0
d86 1
a86 1
			audio/libmpcdec
@


1.44
log
@Update to 0.16.8. Minor bugfixes, most likely the end of the line
for the 0.16.x releases.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2012/03/04 16:57:19 dcoppa Exp $
d5 1
@


1.43
log
@Updates for musicpd ports:

libmpdclient 2.6 -> 2.7
mpc 0.21 -> 0.22
mpd 0.16.5 -> 0.16.7
ncmpc 0.19 -> 0.20

Ok Tobias Ulmer (maintainer) who also requested to give maintainership
to me

Ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/10/30 11:46:18 dcoppa Exp $
d4 1
a4 1
DISTNAME =		mpd-0.16.7
@


1.42
log
@Update to mpd-0.16.5.

ok jasper@@
MAINTAINER's ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/10/17 12:40:44 espie Exp $
d4 1
a4 1
DISTNAME =		mpd-0.16.5
d7 1
a7 1
MAINTAINER =		Tobias Ulmer <tobiasu@@tmux.org>
@


1.41
log
@zap :L in flavor checks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/09/16 08:26:10 espie Exp $
d4 1
a4 1
DISTNAME =		mpd-0.16.2
a7 1
REVISION =		1
@


1.40
log
@normalize pkgpath in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/05/11 06:22:16 ajacoutot Exp $
d68 1
a68 1
.if ${FLAVOR:L:Mtremor}
@


1.39
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and remove remove everything under the @@sample'd directory instead
of the directory itself to prevent a warning from pkg_delete(1) trying
to remove a non existing directory and to help preventing left-over
files and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/04/05 19:55:38 landry Exp $
d8 1
a8 1
REVISION =		0
@


1.38
log
@Update to mpd 0.16.2:
Diff from Martin Pieuchot based on a diff for 0.16.1 from Tobias Ulmer
(maintainer). Note that configuration file may need an update
(mixer_type is not global anymore, it's per-output), and mpd will
recreate its database upon startup.
Tested by jasper@@ and myself, looks good to maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/03/14 09:17:26 sthen Exp $
d8 1
@


1.37
log
@fix various typos, from Anthony J. Bentley with a few tweaks by myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/12/27 14:50:22 ajacoutot Exp $
d4 1
a4 2
DISTNAME =		mpd-0.15.12
REVISION =		6
d15 2
a16 2
WANTLIB =		c m pthread ogg z stdc++ sndio curl glib-2.0 gthread-2.0
WANTLIB +=		audiofile ao samplerate FLAC id3tag mad mikmod
d53 10
a62 1
			--enable-mpc
a65 1
USE_GROFF =		Yes
d86 3
a88 1
CONFIGURE_ARGS +=	--enable-aac
@


1.36
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/12/24 10:40:04 ajacoutot Exp $
d5 1
a5 1
REVISION =		5
@


1.35
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/12/13 18:34:05 jasper Exp $
d5 1
a5 1
REVISION =		4
@


1.34
log
@- fix master sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/11/26 07:07:56 espie Exp $
d5 1
a5 1
REVISION =		3
@


1.33
log
@redo depends with >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/11/15 00:22:47 espie Exp $
d19 1
a19 2
MASTER_SITES =		${HOMEPAGE}/uploads/files/ \
			${MASTER_SITE_SOURCEFORGE:=musicpd/}
@


1.32
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/03 18:18:51 jasper Exp $
d59 1
a59 1
USE_GROFF =	Yes
d78 1
a78 1
			faad->=2.6.1p0:audio/faad \
@


1.31
log
@- tweak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/10/29 12:54:43 ajacoutot Exp $
d24 9
a32 9
LIB_DEPENDS =		::devel/libaudiofile \
			::audio/libao \
			::audio/libsamplerate \
			::audio/flac \
			::audio/libid3tag \
			::audio/libmad \
			::audio/libmikmod \
			::net/curl \
			::devel/glib2
d69 1
a69 1
LIB_DEPENDS +=		::audio/tremor
d74 6
a79 6
LIB_DEPENDS +=		::audio/libvorbis \
			::audio/speex \
			::audio/lame \
			::net/libshout \
			:faad->=2.6.1p0:audio/faad \
			::audio/libmpcdec
@


1.30
log
@Add RCS IDs to rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/10/28 11:30:08 jasper Exp $
d5 1
a5 1
REVISION =		2
@


1.29
log
@- obvious MESSAGE is obvious, zap it.

prompted by aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/10/28 11:24:35 jasper Exp $
d5 1
a5 1
REVISION =		1
@


1.28
log
@- add rc script for mpd

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/10/19 19:45:53 espie Exp $
d5 1
a5 1
REVISION =		0
@


1.27
log
@LIB_DEPENDS -> WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/10/18 21:35:48 sthen Exp $
d5 1
@


1.26
log
@fix a few tabtabUSE_GROFF, problem pointed out by Alexandr Shadchin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/10/18 16:52:45 espie Exp $
d68 2
a69 1
LIB_DEPENDS +=		vorbisidec::audio/tremor
d71 8
a78 7
WANTLIB +=		theora
LIB_DEPENDS +=		vorbis,vorbisfile,vorbisenc::audio/libvorbis \
			speex::audio/speex \
			mp3lame::audio/lame \
			shout::net/libshout \
			faad,mp4ff:faad->=2.6.1p0:audio/faad \
			mpcdec::audio/libmpcdec
@


1.25
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/08/23 14:46:55 jasper Exp $
d58 1
a58 1
			USE_GROFF =	Yes
@


1.24
log
@- update mpd to 0.15.12
* from tobias ulmer (MAINTAINER)

some tweaks by me:
- set license version
- new-style WANTLIB/LIB_DEPENDS
- fix MODULES and MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/06/03 16:06:07 pea Exp $
d58 1
@


1.23
log
@Fix after recent libao update

ok naddy@@, maintainer ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/05/22 11:10:09 jasper Exp $
d4 1
a4 2
DISTNAME =		mpd-0.15.9
PKGNAME =		${DISTNAME}p1
d9 1
a9 1
# GPL
d15 2
a16 1
WANTLIB =		c m pthread ogg z intl stdc++ sndio
d18 2
a19 2
MASTER_SITES =		${HOMEPAGE}uploads/files/
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=musicpd/}
d21 1
a21 1
MODULES =		converters/libiconv
d23 9
a31 9
LIB_DEPENDS =		audiofile::devel/libaudiofile \
			ao::audio/libao \
			samplerate::audio/libsamplerate \
			FLAC::audio/flac \
			id3tag::audio/libid3tag \
			mad::audio/libmad \
			mikmod::audio/libmikmod \
			curl::net/curl \
			glib-2.0,gthread-2.0::devel/glib2 \
@


1.22
log
@- re-anable musepack/mpc support

ok tobias ulmer (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/04/09 11:39:33 jasper Exp $
d5 1
a5 1
PKGNAME =		${DISTNAME}p0
@


1.21
log
@- update mpd to 0.15.9
- add --enable-pipe-output to pipe into aucat/rtunes/etc
- remove all encoders in the tremor flavor, cpu starved architectures
  don't need them and lack of shoutcast support makes them useless.
* the above was from Bjorn Ketelaars via Tobias Ulmer (MAINTAINER

- Add AAC/MP4 support to the main package now that audio/faad is fixed
* done by me.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/01/12 18:58:26 wcmaier Exp $
d5 1
d54 1
a54 1
			--disable-mpc
d65 2
a66 1
			--disable-aac
a68 1

d74 2
a75 1
			faad,mp4ff:faad->=2.6.1p0:audio/faad
@


1.20
log
@Update to 0.15.7.

Most awesomely, mpd can now stream natively without a icecast server.
ok and help from MAINTAINER Tobias Ulmer <tobiasu at tmux dot org>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/06/29 15:34:37 beck Exp $
d4 1
a4 1
DISTNAME =		mpd-0.15.7
a30 1
			mp3lame::audio/lame
d37 1
d61 4
a64 1
			--disable-shout
d71 4
a74 1
			shout::net/libshout
@


1.19
log
@Whitespace clean up -- no real change (actual update coming in a minute).
@
text
@d4 1
a4 2
DISTNAME =		mpd-0.13.2
PKGNAME =		${DISTNAME}p4
d15 1
a15 1
WANTLIB =		c m pthread ogg z
d18 1
a24 1
			faad.>=2::audio/faad \
d29 3
a31 1
			mpcdec::audio/libmpcdec
a40 1
			--disable-sun \
d42 3
a44 1
			--enable-mod \
d46 8
a53 1
			--with-zeroconf=no
@


1.18
log
@remove src-playlist patch since it breaks on the new version and we're close to
release - will fix after release and put it back - as discussed with tobias.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/04/10 00:52:07 beck Exp $
d3 6
a8 6
COMMENT=		Music Player Daemon
DISTNAME=		mpd-0.13.2
PKGNAME=		${DISTNAME}p4
CATEGORIES=		audio
HOMEPAGE=		http://www.musicpd.org/
MAINTAINER=		Tobias Ulmer <tobiasu@@tmux.org>
d11 4
a14 4
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d16 1
a16 1
WANTLIB=		c m pthread ogg z
d18 1
a18 1
MASTER_SITES=		${HOMEPAGE}uploads/files/
d20 1
a20 1
MODULES=		converters/libiconv
d22 1
a22 1
LIB_DEPENDS=		audiofile::devel/libaudiofile \
d32 2
a33 2
FLAVORS=		tremor
FLAVOR?=
d35 2
a36 2
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=        --enable-ao \
d38 3
a40 3
                        --disable-oss \
                        --disable-pulse \
                        --disable-sun \
d46 1
a46 1
CONFIGURE_ENV=		LDFLAGS="-L${LOCALBASE}/lib" \
d50 1
a50 1
CONFIGURE_ARGS+=	--with-tremor \
d53 1
a53 1
LIB_DEPENDS+=		vorbisidec::audio/tremor
d56 2
a57 2
WANTLIB+=		theora
LIB_DEPENDS+=		vorbis,vorbisfile,vorbisenc::audio/libvorbis \
d62 1
a62 1
USE_LIBTOOL=		Yes
@


1.17
log
@make mpd use a reaonable Fisher-Yates shuffle for randomizing play order
instead of an incorrectly implemented Knuth shuffle. Also on openbsd
make sure we use arc4random_uniform for the random choice from the
sequence to make sure we aren't modulo biased.
Noticed when my mpd server played an unnatural amount of Rush out of the
80's playlist.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/10/28 15:21:48 naddy Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p3
@


1.16
log
@Change "${SYSCONFDIR}" to "/etc" for files that are *always* in the
latter location.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/09/15 22:04:17 jakemsr Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p2
@


1.15
log
@
- simpler faad related patches
- bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/09/09 08:11:29 landry Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p1
@


1.14
log
@Add -D_BSD_SOURCE so that mpd calls initgroups(3) and sets additional
groups when dropping privilege. This fixes long-standing permission
problems when accessing music directory..
From Tobias Ulmer (MAINTAINER) on ports@@, thanks!
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/07/15 08:40:49 bernd Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d25 1
a25 1
			faad.>=1::audio/faad \
@


1.13
log
@Update to mpd-0.13.2.

ok MAINTAINER, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/03/24 06:51:04 jakemsr Exp $
d5 1
d45 1
a45 1
# OggFLAC and tremor tests
d47 1
a47 1
			CPPFLAGS="-I${LOCALBASE}/include"
@


1.12
log
@disable jack for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/02/17 18:53:02 bernd Exp $
d4 1
a4 1
DISTNAME=		mpd-0.13.1
@


1.11
log
@Security update to mpd-0.13.1 to fix a possible DoS.

ok jasper@@ and Tobias Ulmer (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/12/07 07:46:38 jasper Exp $
d40 1
@


1.10
log
@explicitly disable zeroconf/avahi, or it may get picked up
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/18 18:26:52 naddy Exp $
d4 1
a4 2
DISTNAME=		mpd-0.13.0
PKGNAME=		${DISTNAME}p3
@


1.9
log
@simple configure/build/wantlib fixes for FLAC 1.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/07/19 08:06:24 jasper Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p2
d42 2
a43 1
			--bindir=${PREFIX}/sbin
@


1.8
log
@fix flac support

from Vlad Glagolev, ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/06/29 06:08:12 jakemsr Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p1
d16 1
a16 1
WANTLIB=		c m pthread z
d26 1
d51 1
a51 2
LIB_DEPENDS+=		vorbisidec::audio/tremor \
			FLAC::audio/flac
a55 2
			ogg::audio/libogg \
			OggFLAC,FLAC::audio/flac \
@


1.7
log
@- use exact width data types for libfaad interaction
- LIB_DEPENDS libfaad >= 1.0
- bump PKGNAME

OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/06/22 11:42:14 jasper Exp $
d3 1
a3 1
COMMENT=		"Music Player Daemon"
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d43 2
a44 1
CONFIGURE_ENV=		LDFLAGS="-L${LOCALBASE}/lib"
@


1.6
log
@- update mpd to 0.13.0
- regen patches while here

from simon kuhnle with a tweak by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/05/20 13:05:27 jasper Exp $
d5 1
d25 1
a25 1
			faad::audio/faad \
@


1.5
log
@- update mpd to 0.12.2
- add a tremor flavor, and add it to audio/Makefile

from Tobias Ulmer <tobiasu@@tmux.org> (MAINTAINER)

discussed with bernd@@ naddy@@
ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/11/05 14:42:56 bernd Exp $
d4 1
a4 1
DISTNAME=		mpd-0.12.2
d23 1
@


1.4
log
@Update to mpd-0.12.1. From maintainer Tobias Ulmer.

ChangeLog: https://svn.musicpd.org/mpd/tags/release-0.12.1/ChangeLog
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/08/01 10:50:19 espie Exp $
d3 2
a4 3
COMMENT=		"music player daemon"

DISTNAME=		mpd-0.12.1
a5 1

a6 1

d15 1
a15 1
WANTLIB=		c m pthread theora z
d21 2
a22 3
LIB_DEPENDS=		vorbis,vorbisfile,vorbisenc::audio/libvorbis \
			audiofile::devel/libaudiofile \
			ao.>=3::audio/libao \
d24 4
a27 8
			id3tag.>=3::audio/libid3tag \
			mad.>=2::audio/libmad \
			ogg.>=5::audio/libogg \
			OggFLAC.>=3,FLAC.>=7::audio/flac \
			mikmod.>=2::audio/libmikmod \
			mpcdec.>=1::audio/libmpcdec \
			shout.>=5::net/libshout \
			speex.>=4::audio/speex
d29 2
a30 1
USE_LIBTOOL=		Yes
d33 5
a37 1
CONFIGURE_ARGS+=	--enable-ao \
a38 5
			--enable-shout \
			--disable-alsa \
			--disable-oss \
			--disable-pulse \
			--disable-sun \
d40 20
a59 2
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.3
log
@convert a few libspecs to new style.

Note: no package bump, those are only BUILD dependencies,
the pkg_create code will create the correct wantlib specs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/06/14 12:37:52 bernd Exp $
d5 1
a5 2
DISTNAME=		mpd-0.11.5
PKGNAME=		${DISTNAME}p0
d12 1
a12 1
# GPL 
d18 1
a18 1
WANTLIB=		c m pthread z ossaudio
d20 1
a20 1
MASTER_SITES=		http://mercury.chem.pitt.edu/~shank/
d24 1
a24 1
LIB_DEPENDS=		vorbis.>=5,vorbisfile.>=4::audio/libvorbis \
d31 5
a35 2
			FLAC.>=7::audio/flac \
			mikmod.>=2::audio/libmikmod
d40 10
a49 1
CONFIGURE_ARGS+=	--disable-alsa --with-libFLAC=${LOCALBASE}
@


1.2
log
@- Remove trailing whitespaces. (From Jasper)
- Install daemon into ${LOCALBASE}/sbin. (From steven@@)
- Fix pkg/DESCR (From steven@@)
- Really fix the OSS mixer stuff.

ok Tobias Ulmer (MAINTAINER)
ok naddy@@ (for the mixer stuff)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/05/13 09:52:49 bernd Exp $
d25 9
a33 9
LIB_DEPENDS=		vorbis.5,vorbisfile.4::audio/libvorbis \
			audiofile.0::devel/libaudiofile \
			ao.3::audio/libao \
			faad.0::audio/faad \
			id3tag.3::audio/libid3tag \
			mad.2::audio/libmad \
			ogg.5::audio/libogg \
			FLAC.7::audio/flac \
			mikmod.2::audio/libmikmod
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d17 1
a17 1
PERMIT_DISTFILES_FTP=	Yes 
@


1.1.1.1
log
@Initial import of mpd-0.11.5.

Music Player Daemon allows remote access for playing music (mp3,
ogg, flac, aac, mod and wav files) and managing playlists. MPD is
designed for integrating a computer into a stereo system that
provides control for music playback over a local network. It is
also makes a great desktop music player and has serveral frontend
options.

Submitted and maintained by Tobias Ulmer <tobiasu at tmux.org>.
(Sorry for the delay Tobias!)

tested by naddy@@
@
text
@@
