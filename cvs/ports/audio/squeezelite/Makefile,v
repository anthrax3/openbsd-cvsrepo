head	1.4;
access;
symbols
	OPENBSD_6_1:1.3.0.2
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	sthen_20160321:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2017.04.24.10.38.52;	author sthen;	state Exp;
branches;
next	1.3;
commitid	QGDap0jwJP1OW72p;

1.3
date	2016.08.30.10.20.15;	author jasper;	state Exp;
branches;
next	1.2;
commitid	ldmJChLP8htfEKn3;

1.2
date	2016.04.04.12.05.37;	author sthen;	state Exp;
branches;
next	1.1;
commitid	eaa3cB7WE4HlQFhF;

1.1
date	2016.03.21.22.28.24;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	xOFDGfouMpRDxgcb;

1.1.1.1
date	2016.03.21.22.28.24;	author sthen;	state Exp;
branches;
next	;
commitid	xOFDGfouMpRDxgcb;


desc
@@


1.4
log
@needs more -l to avoid relying on NEEDED; fixes with modern linkers
@
text
@# $OpenBSD: Makefile,v 1.3 2016/08/30 10:20:15 jasper Exp $

COMMENT=	lightweight headless squeezebox emulator

V=		1.8
REVISION=	2
DISTNAME=	squeezelite-v$V
PKGNAME=	squeezelite-$V

CATEGORIES=	audio

HOMEPAGE=	https://code.google.com/archive/p/squeezelite

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += FLAC avcodec avformat avutil c faad m mad mpg123 portaudio
WANTLIB += pthread soxr vorbis vorbisfile

# https://squeezelite.googlecode.com/archive
MASTER_SITES=	https://spacehopper.org/mirrors/

LIB_DEPENDS=	audio/faad \
		audio/flac \
		audio/libmad \
		audio/libsoxr \
		audio/libvorbis \
		audio/mpg123 \
		audio/portaudio-svn \
		graphics/ffmpeg
LDFLAGS+=	-L${LOCALBASE}/lib -lm -lportaudio -lpthread -lFLAC -lmpg123
LDFLAGS+=	-lvorbis -lvorbisfile -lsoxr -lmad -lavcodec -lavformat -lfaad
LDFLAGS+=	-lavutil

MAKE_FLAGS=	CFLAGS="-Wall -fPIC -DFFMPEG -DRESAMPLE -DLINKALL ${CFLAGS}" \
		CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="${LDFLAGS}"

USE_GMAKE=	Yes
NO_TEST=	Yes

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/squeezelite ${PREFIX}/bin/

.include <bsd.port.mk>
@


1.3
log
@bump after faad subpackage changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/04/04 12:05:37 sthen Exp $
d6 1
a6 1
REVISION=	1
d33 1
a33 1
LDFLAGS+=	-L${LOCALBASE}/lib -lportaudio -lpthread -lFLAC -lmpg123
d35 1
@


1.2
log
@add uid and rc script for squeezelite, with a README to show how to share
the .aucat_cookie file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/03/21 22:28:24 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@import ports/audio/squeezelite, ok jca@@

Squeezelite is a small squeezebox emulator using PortAudio. It is
headless, and must be controlled via Logitech Media Server. It supports
gapless playback, client synchronization (allowing groups of clients for
simultaneous playback), and direct streaming for those LMS plugins which
require it. It has a built-in decoder for PCM (wav/aiff); other formats
(flac, mp3, ogg, aac, wma, alac) are available via libraries. It has
resampling support via libsoxr.
@
text
@@
