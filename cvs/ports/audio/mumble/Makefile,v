head	1.26;
access;
symbols
	OPENBSD_6_1:1.26.0.2
	OPENBSD_6_1_BASE:1.26
	OPENBSD_6_0:1.24.0.2
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.18.0.2
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.14.0.4
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.11.0.2
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.9.0.2
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.5.0.2
	OPENBSD_5_5_BASE:1.5
	dcoppa_20131001:1.1.1.1
	dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2017.02.28.15.35.21;	author dcoppa;	state Exp;
branches;
next	1.25;
commitid	0GD6brX47vIqNkC3;

1.25
date	2016.10.11.12.59.12;	author dcoppa;	state Exp;
branches;
next	1.24;
commitid	hQf56ke3iYp3MBwU;

1.24
date	2016.06.11.17.06.07;	author jca;	state Exp;
branches;
next	1.23;
commitid	XdcqtZVFFBdoSAef;

1.23
date	2016.05.10.07.44.11;	author dcoppa;	state Exp;
branches;
next	1.22;
commitid	dzpCW1cE6a7RDWW5;

1.22
date	2016.03.26.20.37.35;	author zhuk;	state Exp;
branches;
next	1.21;
commitid	OEdThNVtQpfieDxV;

1.21
date	2016.03.18.23.12.15;	author naddy;	state Exp;
branches;
next	1.20;
commitid	KZAl4KEiw6a3Jixw;

1.20
date	2016.03.07.11.58.49;	author zhuk;	state Exp;
branches;
next	1.19;
commitid	eUyBDMeSsKAcWjZ6;

1.19
date	2016.02.25.16.01.39;	author dcoppa;	state Exp;
branches;
next	1.18;
commitid	1n93fx1qJaMfJURo;

1.18
date	2016.01.18.15.13.53;	author dcoppa;	state Exp;
branches;
next	1.17;
commitid	ccPHHsRhwIBWuAZ2;

1.17
date	2015.12.29.19.49.39;	author jasper;	state Exp;
branches;
next	1.16;
commitid	qnWWfNxRwuFA0B7n;

1.16
date	2015.12.22.10.09.43;	author dcoppa;	state Exp;
branches;
next	1.15;
commitid	Dyb8qyv11ozTdr9l;

1.15
date	2015.12.09.12.22.45;	author dcoppa;	state Exp;
branches;
next	1.14;
commitid	sbK6H2zioQAhmbVd;

1.14
date	2015.07.17.15.09.42;	author dcoppa;	state Exp;
branches;
next	1.13;
commitid	Hu9GKAFYZLt0Je9E;

1.13
date	2015.06.12.09.43.12;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	pxdJlWwtLIM0Fb67;

1.12
date	2015.03.27.08.43.01;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	9SD62DzRZ5qtR5xU;

1.11
date	2014.09.05.08.22.04;	author dcoppa;	state Exp;
branches;
next	1.10;
commitid	94vqGP0FX2dsAHv4;

1.10
date	2014.09.04.14.35.47;	author dcoppa;	state Exp;
branches;
next	1.9;
commitid	yOdUWxvbmOqqk4PB;

1.9
date	2014.06.20.05.46.06;	author bcallah;	state Exp;
branches;
next	1.8;
commitid	2jASnJwAmtkkEkoE;

1.8
date	2014.05.27.12.14.07;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2014.03.23.18.17.34;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2014.03.18.10.34.16;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2014.02.05.21.39.24;	author pascal;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2014.02.03.16.09.36;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2014.01.23.09.52.51;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2013.11.25.14.16.22;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.10.01.10.28.43;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.10.01.10.28.43;	author dcoppa;	state Exp;
branches;
next	;

1.5.2.1
date	2014.05.27.12.14.51;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.26
log
@
Update to mumble-1.2.19
@
text
@# $OpenBSD: Makefile,v 1.25 2016/10/11 12:59:12 dcoppa Exp $

COMMENT =		low-latency voice chat client

GH_ACCOUNT =		mumble-voip
GH_PROJECT =		mumble
GH_TAGNAME =		1.2.19

CATEGORIES =		audio

HOMEPAGE =		http://www.mumble.info/

# BSD3
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB +=		ICE SM X11 Xext Xi Xinerama Xrender c crypto
WANTLIB +=		fontconfig freetype lib/qt4/QtDBus lib/qt4/QtGui
WANTLIB +=		lib/qt4/QtNetwork lib/qt4/QtSql lib/qt4/QtSvg
WANTLIB +=		lib/qt4/QtXml m opus portaudio protobuf
WANTLIB +=		pthread sndfile speex speexdsp ssl stdc++

MODULES =		devel/qmake x11/qt4
SEPARATE_BUILD =	No

BUILD_DEPENDS =		audio/celt07 \
			devel/boost

LIB_DEPENDS =		audio/libsndfile>=1.0.25p0 \
			audio/opus \
			audio/portaudio-svn \
			audio/speex \
			devel/protobuf

RUN_DEPENDS =		audio/celt07 \
			audio/celt=0.11.1v1 \
			devel/desktop-file-utils \
			x11/gtk+3,-guic

MODQMAKE_ARGS =		MUMBLE_PREFIX=${PREFIX} \
			QMAKE_LRELEASE=${MODQT_LRELEASE} \
			CONFIG+=no-11x \
			CONFIG+=no-alsa \
			CONFIG+=no-bonjour \
			CONFIG+=no-bundled-celt \
			CONFIG+=no-bundled-opus \
			CONFIG+=no-bundled-speex \
			CONFIG+=no-crash-report \
			CONFIG+=no-embed-qt-translations \
			CONFIG+=no-g15 \
			CONFIG+=no-oss \
			CONFIG+=no-overlay \
			CONFIG+=no-pulseaudio \
			CONFIG+=no-server \
			CONFIG+=no-speechd \
			CONFIG+=no-update \
			CONFIG+=packaged \
			CONFIG+=release \
			DEFINES+="LOCALE_PATH=${PREFIX}/share/mumble/locale" \
			DEFINES+="PLUGIN_PATH=${PREFIX}/lib/mumble"

ALL_TARGET =		release

NO_TEST =		Yes

pre-configure:
	cd ${WRKSRC}/src/mumble/ && QTDIR=${WRKDIR}/bin \
		${MODQT_LRELEASE} *.ts

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/release/mumble \
		${PREFIX}/bin/mumble
	${INSTALL_DATA_DIR} ${PREFIX}/lib/mumble
	${INSTALL_DATA} ${WRKBUILD}/release/plugins/lib*.so \
		${PREFIX}/lib/mumble/
	${INSTALL_DATA_DIR} ${PREFIX}/share/mumble/locale
	${INSTALL_DATA} ${WRKBUILD}/src/mumble/*.qm \
		${PREFIX}/share/mumble/locale/
	${INSTALL_MAN} ${WRKBUILD}/man/mumble.1 ${PREFIX}/man/man1/
	${INSTALL_DATA_DIR} \
		${PREFIX}/share/icons/hicolor/scalable/apps
	${INSTALL_DATA} ${WRKBUILD}/icons/mumble.svg \
		${PREFIX}/share/icons/hicolor/scalable/apps/
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKBUILD}/scripts/mumble.desktop \
		${PREFIX}/share/applications/

.include <bsd.port.mk>
@


1.25
log
@
Update to mumble-1.2.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/06/11 17:06:07 jca Exp $
d7 1
a7 1
GH_TAGNAME =		1.2.17
d65 1
a65 1
pre-build:
@


1.24
log
@Use MODQT_LRELEASE instead of hardcoding lrelease4

ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/05/10 07:44:11 dcoppa Exp $
d7 1
a7 1
GH_TAGNAME =		1.2.16
@


1.23
log
@
Bugfixing update to mumble-1.2.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/03/26 20:37:35 zhuk Exp $
d40 1
a40 1
			QMAKE_LRELEASE=${LOCALBASE}/bin/lrelease4 \
d67 1
a67 1
		${LOCALBASE}/bin/lrelease4 *.ts
@


1.22
log
@Zap more lines from qmake-based ports by moving them from
the "MODULES=x11/qtX + CONFIGURE_STYLE=qmake" logic to
the "MODULES=devel/qmake x11/qtX" logic.

Discussed with espie@@ a few weeks ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/03/18 23:12:15 naddy Exp $
d7 1
a7 1
GH_TAGNAME =		1.2.14
@


1.21
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/03/07 11:58:49 zhuk Exp $
d22 1
a22 2
MODULES =		x11/qt4
CONFIGURE_STYLE =	qmake
@


1.20
log
@Convert to MODQMAKE, -6 Makefile lines.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.19 2016/02/25 16:01:39 dcoppa Exp $

SHARED_ONLY =		Yes
@


1.19
log
@
Update to mumble-1.2.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/01/18 15:13:53 dcoppa Exp $
d25 2
d42 1
a42 5
QMAKE_ARGS =		MUMBLE_PREFIX=${PREFIX} \
			QMAKE_CC=${CC} \
			QMAKE_CXX=${CXX} \
			QMAKE_CFLAGS="${CFLAGS}" \
			QMAKE_CXXFLAGS="${CXXFLAGS}" \
a66 4

do-configure:
	cd ${WRKSRC}/ && QTDIR=${WRKDIR}/bin \
		${LOCALBASE}/bin/qmake4 ${QMAKE_ARGS}
@


1.18
log
@
maintenance update to mumble-1.2.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/12/29 19:49:39 jasper Exp $
d9 1
a9 1
GH_TAGNAME =		1.2.13
@


1.17
log
@DISTNAME is set by bsd.port.mk for these ports now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/12/22 10:09:43 dcoppa Exp $
d9 1
a9 1
GH_TAGNAME =		1.2.12
@


1.16
log
@
Bugfix update to mumble-1.2.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/12/09 12:22:45 dcoppa Exp $
a9 1
DISTNAME =		${GH_PROJECT}-${GH_TAGNAME}
@


1.15
log
@
Update to mumble-1.2.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/07/17 15:09:42 dcoppa Exp $
d9 1
a9 1
GH_TAGNAME =		1.2.11
@


1.14
log
@
Update to mumble-1.2.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/06/12 09:43:12 dcoppa Exp $
d9 1
a9 1
GH_TAGNAME =		1.2.10
@


1.13
log
@
Maintenance update to mumble-1.2.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/03/27 08:43:01 ajacoutot Exp $
d7 4
a10 1
DISTNAME =		mumble-1.2.9
d14 1
a14 3
HOMEPAGE =		http://mumble.sourceforge.net/

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=mumble/}
@


1.12
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/09/05 08:22:04 dcoppa Exp $
d7 1
a7 2
DISTNAME =		mumble-1.2.8
REVISION =		1
@


1.11
log
@
Fix loading of translation files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/09/04 14:35:47 dcoppa Exp $
d8 1
a8 1
REVISION =		0
d39 1
a39 1
			x11/gtk+2,-guic
@


1.10
log
@
Bugfix update to mumble-1.2.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/06/20 05:46:06 bcallah Exp $
d8 1
d64 1
d85 3
@


1.9
log
@Minor update to 1.2.7
"Diff looks good" sthen@@ ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/05/27 12:14:07 jasper Exp $
d7 1
a7 1
DISTNAME =		mumble-1.2.7
d70 1
a70 1
	cd ${WRKSRC} && QTDIR=${WRKDIR}/bin \
d72 4
@


1.8
log
@security update to mumble 1.2.6 (only client is affected)
http://blog.mumble.info/mumble-1-2-6/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/03/23 18:17:34 kili Exp $
d7 1
a7 1
DISTNAME =		mumble-1.2.6
@


1.7
log
@Revert librt changes.

Prodded by espie@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/03/18 10:34:16 ajacoutot Exp $
d7 1
a7 2
DISTNAME =		mumble-1.2.5
REVISION =		1
@


1.6
log
@Remove librt patch and chunk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/02/05 21:39:24 pascal Exp $
d8 1
a8 1
REVISION =		0
@


1.5
log
@SECURITY update to 1.2.5; fixes CVE-2014-0044 and CVE-2014-0045.

ok stsp@@ gsoares@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/02/03 16:09:36 dcoppa Exp $
d8 1
@


1.5.2.1
log
@security update to mumble 1.2.6 (only client is affected)
http://blog.mumble.info/mumble-1-2-6/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/02/05 21:39:24 pascal Exp $
d7 1
a7 1
DISTNAME =		mumble-1.2.6
@


1.4
log
@
Add x-scheme-handler support to the Mumble .desktop file
From upstream git via ubuntu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/01/23 09:52:51 dcoppa Exp $
d7 1
a7 3
DISTNAME =		mumble-1.2.4

REVISION =		1
@


1.3
log
@
Better workaround for the AudioWizard deadlock problem.
Hopefully, upstream will analyze and fix this issue in the right
way.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/11/25 14:16:22 sthen Exp $
d9 1
a9 1
REVISION =		0
@


1.2
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/10/01 10:28:43 dcoppa Exp $
d8 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 3
# $OpenBSD$

VMEM_WARNING =		Yes
@


1.1.1.1
log
@Import mumble-1.2.4

Mumble is an open source, low-latency, high quality voice chat
application for groups.

Mumble is the client for the (u)Murmur VoIP communication server.

With help from pascal@@ and zhuk@@.
Feedback from pascal@@, zhuk@@, Gregor Best, Jonathon Sisson.

OK zhuk@@

@
text
@@
