head	1.5;
access;
symbols
	OPENBSD_4_7:1.4.0.10
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.8
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.6
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_3_5:1.1.0.8
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.6
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2010.04.20.23.43.34;	author sthen;	state dead;
branches;
next	1.4;

1.4
date	2007.12.30.20.23.15;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.08.21.54.57;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.15.19.23.46;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2002.08.31.07.15.11;	author wcobb;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Instead of just commenting out the Sun backend in the PLIST have the
autoconf script not build the backend at all. Fix mikmod WANTLIB while there.
From Brad, ok robert@@
@
text
@$OpenBSD: patch-Output_sun_configure_c,v 1.4 2007/12/30 20:23:15 naddy Exp $
--- Output/sun/configure.c.orig	Sun May 15 02:01:20 2005
+++ Output/sun/configure.c	Mon Dec 10 21:08:39 2007
@@@@ -404,7 +404,7 @@@@ static void configure_stats_loop(void)
 		audio_info_t info;
 		int wseek;
 		int rerror;
-		char sl[32];
+		char sl[128];
 
 		pthread_mutex_lock(&stats_frame.audioctl_mutex);
 
@@@@ -415,17 +415,18 @@@@ static void configure_stats_loop(void)
 			char s[128];
 
 			sprintf(s, "Currently %s",
-				(info.mode == AUMODE_PLAY) ? "playing" :
-				(info.mode == AUMODE_RECORD) ? "recording" :
-				(info.mode == AUMODE_PLAY_ALL) ? "playing" :
-				"not playing");
+				((info.play.active == 1) &&
+				 (info.record.active == 1)) ? "playing and recording" :
+				(info.record.active == 1) ? "recording" :
+				(info.play.active == 1) ? "playing" :
+				"not playing or recording");
 
-			if (info.mode == AUMODE_PLAY)
+			if (info.mode & AUMODE_PLAY)
 			{
-				sprintf(s, "%s at %i Hz (%i-bit %s)", s,
+				sprintf(s, "%s at %u Hz (%u-bit %s)", s,
 					info.play.sample_rate, info.play.precision,
 					audio.output->name);
-				sprintf(sl,"%i samples, %i error(s). %s",
+				sprintf(sl,"%u samples, %u error(s). %s",
 					info.play.samples, info.play.error,
 					info.play.active ?
 					"I/O in progress." : "");
@@@@ -433,7 +434,7 @@@@ static void configure_stats_loop(void)
 			gtk_label_set_text(GTK_LABEL(stats_frame.mode_label),
 					   s);
 
-			sprintf(s, "H/W block: %i bytes. Buffer: %i bytes",
+			sprintf(s, "H/W block: %u bytes. Buffer: %u bytes",
 				info.blocksize, info.play.buffer_size);
 			gtk_label_set_text(
 				GTK_LABEL(stats_frame.blocksize_label), s);
@


1.4
log
@- fix a buffer overflow that garbled the status display of the XMMS sun
audio plugin while playing; use proper unsigned types while there
- sync the gcc workaround patch with the new automake output
@
text
@d1 1
a1 1
$OpenBSD: patch-Output_sun_configure_c,v 1.3 2007/12/08 21:54:57 ajacoutot Exp $
@


1.3
log
@- update to xmms-1.2.11

input from naddy@@, help and ok jakemsr@@
@
text
@d1 13
a13 4
$OpenBSD$
--- Output/sun/configure.c.orig	Sat May 14 17:01:20 2005
+++ Output/sun/configure.c	Sat Dec  8 12:26:01 2007
@@@@ -415,12 +415,13 @@@@ static void configure_stats_loop(void)
d30 2
a31 1
 				sprintf(s, "%s at %i Hz (%i-bit %s)", s,
d33 15
@


1.2
log
@Update to 1.2.10; from new maintainer Robert Nagy <thuglife@@bsd.hu>.
@
text
@d1 5
a5 9
$OpenBSD: patch-Output_sun_configure_c,v 1.1 2002/08/31 07:15:11 wcobb Exp $
--- Output/sun/configure.c.orig	Sat Aug 31 02:24:28 2002
+++ Output/sun/configure.c	Sat Aug 31 02:24:53 2002
@@@@ -152,7 +152,7 @@@@ configure_mixer_volumedev_scan(gchar *ty
 			item = gtk_menu_item_new_with_label(_(info.label.name));
 			gtk_signal_connect(GTK_OBJECT(item), "activate",
 			    configure_win_mixer_volume_dev_cb,
-			    (gpointer) info.index);
+			    GINT_TO_POINTER(info.index));
d7 10
a16 18
 			gtk_widget_show(item);
 			gtk_menu_append(GTK_MENU(menu), item);
@@@@ -336,7 +336,7 @@@@ configure_mixer_toggle_button(GtkWidget 
 			gtk_signal_connect(GTK_OBJECT(toggle_cbutton),
 			    "toggled",
 			    GTK_SIGNAL_FUNC(mixer_cbutton_toggled_cb),
-			    (gpointer) mixer.dev);
+			    GINT_TO_POINTER(mixer.dev));
 		}
 	}
 }
@@@@ -405,8 +405,6 @@@@ configure_stats_loop(void)
 	}
 	while (stats_frame.active && stats_frame.fd) {
 		audio_info_t info;
-		int wseek;
-		int rerror;
 		gchar sl[32];
d18 5
a22 1
 		pthread_mutex_lock(&stats_frame.audioctl_mutex);
@


1.1
log
@LP64 fixes.
@
text
@d1 1
a1 1
$OpenBSD$
@

