head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.10
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.11.10.10.55.58;	author dcoppa;	state Exp;
branches;
next	;
commitid	QYS2Xe5ifb8PVDD9;


desc
@@


1.1
log
@
Merge some fixes from upstream via Fedora:

- Rewrote ByteVector::replace() simpler
- Fixed a wrong byte order handling on big-endian machines
- Changed XM::File::save() to use seek() properly
- Added some missing deletes to test_flac.cpp

Now the testsuite is 100% successful
@
text
@$OpenBSD$

From c14a3b5c3d0831f7c113d0cf95840c4671d9ebd4 Mon Sep 17 00:00:00 2001
From: Tsuda Kageyu <tsuda.kageyu@@gmail.com>
Date: Tue, 13 May 2014 20:07:02 +0900
Subject: [PATCH] Added some missing deletes to test_flac.cpp.

--- tests/test_flac.cpp.orig	Tue Oct  8 17:50:01 2013
+++ tests/test_flac.cpp	Mon Nov 10 10:41:36 2014
@@@@ -91,6 +91,7 @@@@ class TestFLAC : public CppUnit::TestFixture (public)
     newpic->setData("JPEG data");
     f->addPicture(newpic);
     f->save();
+    delete f;
 
     f = new FLAC::File(newname.c_str());
     lst = f->pictureList();
@@@@ -138,6 +139,7 @@@@ class TestFLAC : public CppUnit::TestFixture (public)
     f->removePictures();
     f->addPicture(newpic);
     f->save();
+    delete f;
 
     f = new FLAC::File(newname.c_str());
     lst = f->pictureList();
@@@@ -165,6 +167,7 @@@@ class TestFLAC : public CppUnit::TestFixture (public)
 
     f->removePictures();
     f->save();
+    delete f;
 
     f = new FLAC::File(newname.c_str());
     lst = f->pictureList();
@@@@ -185,6 +188,7 @@@@ class TestFLAC : public CppUnit::TestFixture (public)
     tag->setTitle("NEW TITLE 2");
     f->save();
     CPPUNIT_ASSERT_EQUAL(String("NEW TITLE 2"), tag->title());
+    delete f;
 
     f = new FLAC::File(newname.c_str());
     tag = f->tag();
@
