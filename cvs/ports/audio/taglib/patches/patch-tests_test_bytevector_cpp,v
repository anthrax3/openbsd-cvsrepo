head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.11.10.10.55.58;	author dcoppa;	state Exp;
branches;
next	;
commitid	QYS2Xe5ifb8PVDD9;


desc
@@


1.1
log
@
Merge some fixes from upstream via Fedora:

- Rewrote ByteVector::replace() simpler
- Fixed a wrong byte order handling on big-endian machines
- Changed XM::File::save() to use seek() properly
- Added some missing deletes to test_flac.cpp

Now the testsuite is 100% successful
@
text
@$OpenBSD$

From 4a7d31c87bf41c1de21cb725176d5b34c2a95720 Mon Sep 17 00:00:00 2001
From: Tsuda Kageyu <tsuda.kageyu@@gmail.com>
Date: Thu, 14 Nov 2013 14:05:32 +0900
Subject: [PATCH] Rewrote ByteVector::replace() simpler

--- tests/test_bytevector.cpp.orig	Tue Oct  8 17:50:01 2013
+++ tests/test_bytevector.cpp	Mon Nov 10 10:57:36 2014
@@@@ -239,6 +239,11 @@@@ class TestByteVector : public CppUnit::TestFixture (pu
       a.replace(ByteVector("ab"), ByteVector());
       CPPUNIT_ASSERT_EQUAL(ByteVector("cdf"), a);
     }
+    {
+      ByteVector a("abcdabf");
+      a.replace(ByteVector("bf"), ByteVector("x"));
+      CPPUNIT_ASSERT_EQUAL(ByteVector("abcdax"), a);
+    }
   }
 
 };
@
