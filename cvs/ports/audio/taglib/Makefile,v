head	1.40;
access;
symbols
	OPENBSD_6_1:1.36.0.10
	OPENBSD_6_1_BASE:1.36
	OPENBSD_6_0:1.36.0.8
	OPENBSD_6_0_BASE:1.36
	OPENBSD_5_9:1.36.0.4
	OPENBSD_5_9_BASE:1.36
	OPENBSD_5_8:1.36.0.6
	OPENBSD_5_8_BASE:1.36
	OPENBSD_5_7:1.36.0.2
	OPENBSD_5_7_BASE:1.36
	OPENBSD_5_6:1.34.0.4
	OPENBSD_5_6_BASE:1.34
	OPENBSD_5_5:1.34.0.2
	OPENBSD_5_5_BASE:1.34
	OPENBSD_5_4:1.31.0.2
	OPENBSD_5_4_BASE:1.31
	OPENBSD_5_3:1.30.0.2
	OPENBSD_5_3_BASE:1.30
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.14.0.6
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.4
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.9.0.6
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.4
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.7.0.4
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.6.0.4
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	wheeler:1.1.1.1
	kde:1.1.1;
locks; strict;
comment	@# @;


1.40
date	2017.07.26.22.45.16;	author sthen;	state Exp;
branches;
next	1.39;
commitid	tD4MFrpYYDDL2UFT;

1.39
date	2017.07.23.09.26.26;	author espie;	state Exp;
branches;
next	1.38;
commitid	FZPR2Emws5uDqXzb;

1.38
date	2017.07.16.19.18.49;	author espie;	state Exp;
branches;
next	1.37;
commitid	tt0GhWK5c4uf9ILG;

1.37
date	2017.04.10.11.45.23;	author sthen;	state Exp;
branches;
next	1.36;
commitid	XDh1zlSBq0boKsHk;

1.36
date	2014.11.10.10.55.58;	author dcoppa;	state Exp;
branches;
next	1.35;
commitid	QYS2Xe5ifb8PVDD9;

1.35
date	2014.11.07.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	QYJaNcIko4VHoTIl;

1.34
date	2014.02.07.14.57.46;	author dcoppa;	state Exp;
branches;
next	1.33;

1.33
date	2014.01.16.13.37.49;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2013.11.28.15.49.25;	author dcoppa;	state Exp;
branches;
next	1.31;

1.31
date	2013.03.10.22.55.06;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2013.01.27.21.28.25;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2013.01.23.14.30.40;	author dcoppa;	state Exp;
branches;
next	1.28;

1.28
date	2012.11.12.11.12.03;	author dcoppa;	state Exp;
branches;
next	1.27;

1.27
date	2012.11.07.09.48.20;	author dcoppa;	state Exp;
branches;
next	1.26;

1.26
date	2012.10.16.13.06.13;	author dcoppa;	state Exp;
branches;
next	1.25;

1.25
date	2012.10.10.10.51.01;	author dcoppa;	state Exp;
branches;
next	1.24;

1.24
date	2012.10.01.07.31.17;	author dcoppa;	state Exp;
branches;
next	1.23;

1.23
date	2012.08.08.11.37.03;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2012.06.29.14.35.07;	author dcoppa;	state Exp;
branches;
next	1.21;

1.21
date	2012.05.02.08.48.51;	author dcoppa;	state Exp;
branches;
next	1.20;

1.20
date	2012.03.20.16.23.47;	author dcoppa;	state Exp;
branches;
next	1.19;

1.19
date	2012.03.18.16.15.19;	author dcoppa;	state Exp;
branches;
next	1.18;

1.18
date	2011.11.08.09.30.52;	author dcoppa;	state Exp;
branches;
next	1.17;

1.17
date	2011.10.31.21.01.50;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2011.10.14.09.14.03;	author dcoppa;	state Exp;
branches;
next	1.15;

1.15
date	2011.10.14.09.06.56;	author dcoppa;	state Exp;
branches;
next	1.14;

1.14
date	2010.05.17.11.21.50;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2009.09.24.18.15.42;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2009.09.22.11.16.43;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2009.05.03.15.13.53;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2009.04.22.08.58.34;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.15.21.26.03;	author simon;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.02.15.21.28;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2006.10.28.10.30.41;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2006.01.13.19.12.15;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.01.10.11.26.09;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.23.15.03.09;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.18.16.46.30;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2005.09.07.01.27.55;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.14.21.28.01;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.04.14.21.28.01;	author espie;	state Exp;
branches;
next	;


desc
@@


1.40
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.39 2017/07/23 09:26:26 espie Exp $

COMMENT=	managing meta-data of audio formats
DISTNAME=	taglib-1.9.1
REVISION =	3
CATEGORIES=	audio devel

MASTER_SITES=	http://taglib.github.io/releases/

SHARED_LIBS +=	tag	11.0	# 1.9.1
SHARED_LIBS +=	tag_c	2.1	# 0.0.0

HOMEPAGE= 	http://taglib.github.io/

# LGPLv2.1 / MPLv1.1
PERMIT_PACKAGE_CDROM=	Yes

MODULES=	devel/cmake

WANTLIB=	${COMPILER_LIBCXX} m z

BUILD_DEPENDS=	devel/cppunit

CONFIGURE_ARGS=	-DCMAKE_POLICY_DEFAULT_CMP0022=OLD \
		-DBUILD_TESTS:BOOL=ON

pre-configure:
	${SUBST_CMD} ${WRKSRC}/cmake/modules/FindCppUnit.cmake

do-test:
	@@ln -f -s ${WRKSRC}/tests/data ${WRKBUILD}/tests/data
	@@cd ${WRKBUILD}/tests && ./test_runner

.include <bsd.port.mk>
@


1.39
log
@add pthread to COMPILER_LIBCXX.
white lie, but it allows clang and gcc to be more similar
bump accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2017/07/16 19:18:49 espie Exp $
d5 1
a5 1
REVISION =	2
@


1.38
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2017/04/10 11:45:23 sthen Exp $
d5 1
a5 1
REVISION=	1
@


1.37
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/11/10 10:55:58 dcoppa Exp $
d20 1
a20 1
WANTLIB=	${LIBCXX} m z
@


1.36
log
@
Merge some fixes from upstream via Fedora:

- Rewrote ByteVector::replace() simpler
- Fixed a wrong byte order handling on big-endian machines
- Changed XM::File::save() to use seek() properly
- Added some missing deletes to test_flac.cpp

Now the testsuite is 100% successful
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/11/07 10:40:05 ajacoutot Exp $
d20 1
a20 1
WANTLIB=	stdc++ m z
@


1.35
log
@No need for default CMAKE_BUILD_TYPE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/02/07 14:57:46 dcoppa Exp $
d5 1
a5 1
REVISION=	0
d25 1
a25 1
		-DBUILD_TESTS=ON
@


1.34
log
@Better to be more "conservative", as suggested by zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/01/16 13:37:49 dcoppa Exp $
d24 1
a24 2
CONFIGURE_ARGS+=-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_POLICY_DEFAULT_CMP0022=OLD \
@


1.33
log
@Bugfix for TagLib::String from upstream
(git commit 3bf30af66c8fd77a88d9379a0956ddb2fc70dc20)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/11/28 15:49:25 dcoppa Exp $
d25 1
@


1.32
log
@Update to taglib-1.9.1

No fallouts in a bulk build, as verified by landry@@ (thanks!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/03/10 22:55:06 espie Exp $
d5 1
@


1.31
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/01/27 21:28:25 dcoppa Exp $
d4 1
a4 2
DISTNAME=	taglib-1.8
REVISION=	5
d7 1
a7 1
MASTER_SITES=	https://github.com/downloads/taglib/taglib/
d9 1
a9 1
SHARED_LIBS +=	tag	10.0	# 1.8.0
d12 1
a12 1
HOMEPAGE= 	http://taglib.github.com/
@


1.30
log
@Check if file is open before attempting to read tags: fix a crash
in the file constructor if the file does not exist
(upstream git commit d15c8453ac75d9070008b9170ae114ea31a4b586)

Reported by sebastia@@, who found we were still affected by this bug
while he was working on a new port that uses taglib.

ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/01/23 14:30:40 dcoppa Exp $
a15 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
a16 1
PERMIT_PACKAGE_FTP=	Yes
d30 1
a30 1
do-regress:
@


1.29
log
@Fix the version number
(upstream git commit 7b80418122a42295ada34863609d82152baab03c)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/11/12 11:12:03 dcoppa Exp $
d5 1
a5 1
REVISION=	4
@


1.28
log
@Correctly parse covr atoms with type 0
(upstream git commit 3a5aeb457324f9dcac2c0051e94b0d748af63f65)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/11/07 09:48:20 dcoppa Exp $
d5 1
a5 1
REVISION=	3
@


1.27
log
@Fix noop frame id size check in ID3v2::FrameFactory::createFrame
(upstream git commit c42bdeab43dc1a0fa1c15ddf025e76932ba26f62)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/10/16 13:06:13 dcoppa Exp $
d5 1
a5 1
REVISION=	2
@


1.26
log
@Fix a bug in updating MP4 tags
(upstream git commit a9df3e48f7b59bc27e115e5b0ad057a642b6fac3)

Fix saving of PropertyMap comments without description into ID3v2
tags (upstream git commit c8994ede3fdc8569a59b3482acbc797186e72d00)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/10/10 10:51:01 dcoppa Exp $
d5 1
a5 1
REVISION=	1
@


1.25
log
@Apply two fixes from upstream git:

- Corrupted FLAC files scan can result in heavy CPU consumption:
  fix it by considering a file as being invalid if a 0 length block
  is found

- Fix a crash when saving xm files

While here, also sync patches/patch-tests_CMakeLists_txt with upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/10/01 07:31:17 dcoppa Exp $
d5 1
a5 1
REVISION=	0
@


1.24
log
@Update to taglib-1.8

Suggestions and OK brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/08/08 11:37:03 dcoppa Exp $
d5 1
@


1.23
log
@TagLib has moved permanently to github.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/06/29 14:35:07 dcoppa Exp $
d4 1
a4 2
DISTNAME=	taglib-1.7.2
REVISION=	0
d9 2
a10 2
SHARED_LIBS +=	tag                  9.0      # .1.7.1
SHARED_LIBS +=	tag_c                2.0      # .0.0.0
a21 2
USE_LIBTOOL=	Yes

a26 2
		-DWITH_MP4=ON \
		-DWITH_ASF=ON \
d33 1
a33 1
	@@ln -s ${WRKSRC}/tests/data ${WRKBUILD}/tests/data
@


1.22
log
@Re-add the old master site now that it's synced with
github.com/downloads/taglib/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/05/02 08:48:51 dcoppa Exp $
d5 1
d8 2
a9 2
MASTER_SITES=	https://github.com/downloads/taglib/taglib/ \
		http://developer.kde.org/~wheeler/files/src/
d13 1
a13 1
HOMEPAGE= 	http://developer.kde.org/~wheeler/taglib.html
@


1.21
log
@Update to taglib-1.7.2, rolling in the fix for SECURITY issue
CVE-2012-2396: fixed division by zero while parsing corrupted MP4
files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/03/20 16:23:47 dcoppa Exp $
d7 2
a8 1
MASTER_SITES=	https://github.com/downloads/taglib/taglib/
@


1.20
log
@Update to taglib-1.7.1, rolling in the fixes for SECURITY issues
CVE-2012-1107 and CVE-2012-1108 previously in patches

tweaks and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/03/18 16:15:19 dcoppa Exp $
d4 1
a4 1
DISTNAME=	taglib-1.7.1
d7 1
a7 1
MASTER_SITES=	http://developer.kde.org/~wheeler/files/src/
@


1.19
log
@Fix for CVE-2012-1107
(upstream git commit 77d61c6eca4d08b9b025738acf6b926cc750db23)

Fix for CVE-2012-1108
(upstream git commit ab8a0ee8937256311e649a88e8ddd7c7f870ad59)

...And fix regress tests (do-regress target).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/11/08 09:30:52 dcoppa Exp $
d4 1
a4 2
DISTNAME=	taglib-1.7
REVISION=	0
d8 1
a8 1
SHARED_LIBS +=	tag                  8.1      # .1.7.0
@


1.18
log
@SEPARATE_BUILD by default for CMake

from Vadim Zhukov

OK jasper@@, espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/10/31 21:01:50 dcoppa Exp $
d5 1
d37 1
@


1.17
log
@REGRESS_DEPENDS=${BUILD_DEPENDS} is superfluous
suggested by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/10/14 09:14:03 dcoppa Exp $
a26 1
CONFIGURE_STYLE=cmake
@


1.16
log
@Zap now useless CONFIGURE_ENV. Uff...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/10/14 09:06:56 dcoppa Exp $
a31 2

REGRESS_DEPENDS=${BUILD_DEPENDS}
@


1.15
log
@Update to taglib-1.7

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/05/17 11:21:50 jasper Exp $
a26 1
CONFIGURE_ENV=	LIBS="-lstdc++ -lm"
@


1.14
log
@- update taglib to 1.6.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/09/24 18:15:42 jasper Exp $
d4 1
a4 1
DISTNAME=	taglib-1.6.3
d7 3
a9 3
MASTER_SITES=	http://ktown.kde.org/~wheeler/files/src/
SHARED_LIBS +=	tag                  8.0      # .10.0
SHARED_LIBS +=	tag_c                2.0      # .0.0
d11 1
a11 1
HOMEPAGE= 	http://ktown.kde.org/~wheeler/taglib.html
d19 2
d25 2
d28 13
a40 3
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS+=--enable-asf \
		--enable-mp4
@


1.13
log
@- enable .asf as well (seems to be needed by newer amarok)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/09/22 11:16:43 jasper Exp $
d4 1
a4 2
DISTNAME=	taglib-1.6
PKGNAME=	${DISTNAME}p0
d8 1
a8 1
SHARED_LIBS +=	tag                  7.1      # .6.1
@


1.12
log
@- update taglib to 1.6
- enable mp4 support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/05/03 15:13:53 martynas Exp $
d5 1
d26 2
a27 1
CONFIGURE_ARGS+=--enable-mp4
@


1.11
log
@don't pull standard namespace in public header file.
fixes at least audio/amarok.
discussed with espie@@, naddy@@ and landry@@
"This has to be fixed" espie@@
"it makes totally sense" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/04/22 08:58:34 landry Exp $
d4 1
a4 2
DISTNAME=	taglib-1.5
PKGNAME=	${DISTNAME}p0
d6 1
d8 1
a8 1
SHARED_LIBS +=	tag                  7.0      # .6.0
d25 1
@


1.10
log
@Update to taglib 1.5, bump majors, precise licence markers.
ok ajacoutot@@ jasper@@ pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/15 21:26:03 simon Exp $
d5 1
@


1.9
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/02 15:21:28 jasper Exp $
d4 1
a4 2
DISTNAME=	taglib-1.4
PKGNAME=	${DISTNAME}p2
d7 2
a8 2
SHARED_LIBS +=	tag                  6.0      # .5.0
SHARED_LIBS +=	tag_c                1.0      # .0.0
d12 1
a12 1
# LGPL
@


1.8
log
@license is LPGL, not GPL

from Moritz Grimm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/10/28 10:30:41 espie Exp $
d3 1
a3 1
COMMENT=	"managing meta-data of audio formats"
@


1.7
log
@re-format SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/01/13 19:12:15 espie Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p1
d13 1
a13 1
# GPL
@


1.6
log
@Bump C++ shared libs numbers and corresponding package names,
handles a through databases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/01/10 11:26:09 espie Exp $
d8 2
a9 2
SHARED_LIBS=	tag	6.0 \
		tag_c	1.0
@


1.5
log
@zap more MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/12/23 15:03:09 espie Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p0
d8 2
a9 2
SHARED_LIBS=	tag	5.0 \
		tag_c	0.0
@


1.4
log
@switch a few ports to SHARED_LIBS and USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/11/18 16:46:30 jolan Exp $
a9 2
MODGNU_SHARED_LIBS=	tag	'-no-undefined'	\
			tag_c	'-no-undefined'
@


1.3
log
@explicitly link to m and stdc++ since it is not happening automatically
for whatever reason

tracked down by kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/09/07 01:27:55 espie Exp $
d8 4
@


1.2
log
@new taglib, required for new amarok.
update amarok.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.1.1.1 2005/04/14 21:28:01 espie Exp $

COMMENT=	'managing meta-data of audio formats'
d3 3
d7 1
a7 2

DISTNAME=	taglib-1.4
a9 3
MASTER_SITES=	http://ktown.kde.org/~wheeler/files/src/
CONFIGURE_STYLE=gnu
WANTLIB=	z
d12 5
a16 4
PERMIT_DISTFILES_FTP=Yes
PERMIT_DISTFILES_CDROM=Yes
PERMIT_PACKAGE_FTP=Yes
PERMIT_PACKAGE_CDROM=Yes
d18 5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
DISTNAME=	taglib-1.3.1
@


1.1.1.1
log
@this needs the just committed citrus stuff to build.
No wchar in libstdc++ -> no build
@
text
@@
