head	1.7;
access;
symbols
	OPENBSD_6_1:1.7.0.28
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.26
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.22
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.24
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.20
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.18
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.16
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.14
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.7.0.12
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.7.0.10
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.8
	OPENBSD_5_0:1.7.0.6
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.4
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.6.0.10
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.8
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.6
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.5.0.8
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.6
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.4
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.3.0.14
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.12
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.10
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.8
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.6
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.4
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.2
	OPENBSD_2_8_BASE:1.1.1.1
	espie:1.1.1.1
	a7r:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2010.03.20.16.56.26;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2007.10.27.15.01.53;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2005.12.23.15.03.06;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.23.06.31.31;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.16.13.35.52;	author lebel;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.23.16.23.22;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.09.21.16.07.22;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.09.21.16.07.22;	author espie;	state Exp;
branches;
next	;


desc
@@


1.7
log
@- fix cdparanoia on static arches
@
text
@$OpenBSD: patch-paranoia_Makefile_in,v 1.6 2007/10/27 15:01:53 espie Exp $
--- paranoia/Makefile.in.orig	Tue Dec 14 05:28:04 1999
+++ paranoia/Makefile.in	Fri Feb  5 14:38:52 2010
@@@@ -22,31 +22,28 @@@@ OFILES = paranoia.o p_block.o overlap.o gap.o isort.o
 #TFILES = isort.t gap.t p_block.t paranoia.t
 
 LIBS = ../interface/libcdda_interface.a -lm
-export VERSION
 
-all: lib slib
+LIBcdda_paranoia_VERSION=0.0
 
-debug: 
-	$(MAKE) libcdda_paranoia.a CFLAGS="$(DEBUG)"
-
-lib:	
+all: 
 	$(MAKE) libcdda_paranoia.a CFLAGS="$(OPT)" 
-
-slib:	
 	$(MAKE) lessmessy
-	$(MAKE) libcdda_paranoia.so CFLAGS="$(OPT) -fpic" 
+	$(MAKE) libcdda_paranoia.so.$(LIBcdda_paranoia_VERSION) VERSION=$(VERSION) CFLAGS="$(OPT) -fpic" 
 
+debug: 
+	$(MAKE) libcdda_paranoia.a CFLAGS="$(DEBUG)"
+
 #test:	$(TFILES)
 #
 
+lib: libcdda_paranoia.a
+
 libcdda_paranoia.a: 	$(OFILES)	
 	$(AR) -r libcdda_paranoia.a $(OFILES)
 	$(RANLIB) libcdda_paranoia.a
 
-libcdda_paranoia.so: 	$(OFILES)	
-	$(CC) -fpic -shared -o libcdda_paranoia.so.0.$(VERSION) -Wl,-soname -Wl,libcdda_paranoia.so.0 $(OFILES)
-	[ -e libcdda_paranoia.so.0 ] || ln -s libcdda_paranoia.so.0.$(VERSION) libcdda_paranoia.so.0
-	[ -e libcdda_paranoia.so ] || ln -s libcdda_paranoia.so.0.$(VERSION) libcdda_paranoia.so
+libcdda_paranoia.so.$(LIBcdda_paranoia_VERSION): 	$(OFILES)	
+	$(CC) -fpic -shared -o $@@ $(OFILES)
 
 .c.o:
 	$(CC) $(CFLAGS) -c $<
@


1.6
log
@sequential build of library/shared library unmesses parallel builds...
regen patches while there.
@
text
@d1 1
a1 1
$OpenBSD: patch-paranoia_Makefile_in,v 1.5 2005/12/23 15:03:06 espie Exp $
d3 2
a4 2
+++ paranoia/Makefile.in	Sat Oct 27 17:00:19 2007
@@@@ -22,20 +22,17 @@@@ OFILES = paranoia.o p_block.o overlap.o gap.o isort.o
d31 3
a33 1
@@@@ -43,10 +40,8 @@@@ libcdda_paranoia.a: 	$(OFILES)	
@


1.5
log
@switch a few ports to SHARED_LIBS and USE_LIBTOOL
@
text
@d1 1
a1 1
$OpenBSD: patch-paranoia_Makefile_in,v 1.4 2005/12/23 06:31:31 jakemsr Exp $
d3 2
a4 2
+++ paranoia/Makefile.in	Fri Dec 23 15:42:25 2005
@@@@ -22,8 +22,9 @@@@ OFILES = paranoia.o p_block.o overlap.o 
d10 1
a11 5
+
 all: lib slib
 
 debug: 
@@@@ -34,7 +35,7 @@@@ lib:	
d13 8
a20 1
 slib:	
d25 3
d30 2
a31 1
@@@@ -43,10 +44,8 @@@@ libcdda_paranoia.a: 	$(OFILES)	
@


1.4
log
@sync with update-patches
@
text
@d1 4
a4 4
$OpenBSD: patch-paranoia_Makefile_in,v 1.3 2002/09/16 13:35:52 lebel Exp $
--- paranoia/Makefile.in.orig	Mon Dec 13 20:28:04 1999
+++ paranoia/Makefile.in	Thu Dec 22 22:30:04 2005
@@@@ -22,8 +22,10 @@@@ OFILES = paranoia.o p_block.o overlap.o 
d10 1
a10 2
+MAJOR=0
+MINOR=0
d15 1
a15 1
@@@@ -34,7 +36,7 @@@@ lib:	
d20 1
a20 1
+	$(MAKE) libcdda_paranoia.so.$(MAJOR).$(MINOR) VERSION=$(VERSION) CFLAGS="$(OPT) -fpic" 
d24 1
a24 1
@@@@ -43,10 +45,8 @@@@ libcdda_paranoia.a: 	$(OFILES)	
d32 2
a33 2
+libcdda_paranoia.so.$(MAJOR).$(MINOR): 	$(OFILES)	
+	$(CC) -fpic -shared -o libcdda_paranoia.so.$(MAJOR).$(MINOR) $(OFILES)
@


1.3
log
@update audio/cdparanoia to 3.a9.8;
from Bjorn Sandell <biorn@@dce.chalmers.se> and from NetBSD
@
text
@d1 4
a4 4
$OpenBSD$
--- paranoia/Makefile.in.orig	Tue Dec 14 05:28:04 1999
+++ paranoia/Makefile.in	Sat Sep  7 21:06:10 2002
@@@@ -22,7 +22,9 @@@@ OFILES = paranoia.o p_block.o overlap.o 
d9 1
a9 1
+
d12 1
a12 1
 
d15 1
@


1.2
log
@Enable cdparanoia libraries (to use by kde).
@
text
@d1 1
a1 1
$OpenBSD: patch-paranoia_Makefile_in,v 1.1.1.1 2000/09/21 16:07:22 espie Exp $
d3 1
a3 1
+++ paranoia/Makefile.in	Thu Aug 23 17:52:09 2001
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
--- paranoia/Makefile.in.orig	Tue Sep 19 16:21:11 2000
+++ paranoia/Makefile.in	Tue Sep 19 16:16:31 2000
@@@@ -22,7 +22,6 @@@@ OFILES = paranoia.o p_block.o overlap.o 
d9 3
d15 1
a15 1
@@@@ -34,7 +33,7 @@@@ lib:	
d20 1
a20 1
+	$(MAKE) libcdda_paranoia.so VERSION=$(VERSION) CFLAGS="$(OPT) -fpic" 
d24 13
@


1.1.1.1
log
@Based on the NetBSD port, initially brought to Open by
Alexander S . Guy.

Some minor packaging tweaks.

Uses cd0c by default, as this is the most likely place for a CD-Rom drive.
@
text
@@
