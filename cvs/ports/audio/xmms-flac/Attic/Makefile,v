head	1.32;
access;
symbols
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.30.0.4
	OPENBSD_5_9_BASE:1.30
	OPENBSD_5_8:1.30.0.6
	OPENBSD_5_8_BASE:1.30
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.29.0.6
	OPENBSD_5_6_BASE:1.29
	OPENBSD_5_5:1.29.0.4
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.29.0.2
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.26.0.6
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.26.0.4
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.2
	OPENBSD_5_0:1.24.0.4
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.24.0.2
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.20.0.4
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.20.0.2
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.19.0.8
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.6
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.4
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.14.0.2
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.13.0.2
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.12.0.6
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.4
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.2
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.8.0.4
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	naddy_20020201:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.32
date	2016.08.30.10.36.57;	author jasper;	state dead;
branches;
next	1.31;
commitid	D07bT1mi91GB9K8U;

1.31
date	2016.03.18.21.38.23;	author naddy;	state Exp;
branches;
next	1.30;
commitid	BVkebQSTXSZokeRG;

1.30
date	2015.01.10.15.50.58;	author naddy;	state Exp;
branches;
next	1.29;
commitid	fcbq5beq7jpL0DD1;

1.29
date	2013.05.31.14.34.29;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.21.08.45.13;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.10.22.55.06;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2011.10.12.12.54.31;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2011.09.16.08.26.11;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.18.12.03.28;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.15.00.22.49;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.10.24.21.00.30;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2010.09.06.00.04.29;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2009.08.10.06.29.52;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.24.17.23.55;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2007.09.18.18.22.32;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2007.09.15.21.26.03;	author simon;	state Exp;
branches;
next	1.16;

1.16
date	2007.04.12.20.24.30;	author sturm;	state Exp;
branches;
next	1.15;

1.15
date	2007.03.28.14.36.17;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2006.11.11.21.04.27;	author steven;	state Exp;
branches;
next	1.13;

1.13
date	2006.08.01.10.50.19;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2005.03.09.00.15.14;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2004.11.21.17.51.48;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.17.22.23.24;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2004.09.14.23.16.56;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2003.10.23.01.36.27;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2003.07.07.23.11.25;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2003.04.18.00.28.40;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2002.11.03.02.14.54;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.07.07.19.09.29;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.13.18.50.37;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.06.22.28.19;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.01.15.44.31;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.02.01.15.44.31;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.32
log
@remove xmms, it's been unmaintained for years and it's in the way of
the removal of gtk+1, the toolkit from eons ago.

discussed with many for years, no objections from naddy@@
ok aja@@ dcoppa@@
@
text
@# $OpenBSD: Makefile,v 1.31 2016/03/18 21:38:23 naddy Exp $

COMMENT=	XMMS input plugin for playing FLAC files

VERSION=	1.3.1
PKGNAME=	xmms-flac-${VERSION}
DISTNAME=	flac-${VERSION}
CATEGORIES=	audio
HOMEPAGE=	https://www.xiph.org/flac/

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

# GPL
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	http://downloads.xiph.org/releases/flac/
EXTRACT_SUFX=   .tar.xz

WANTLIB=	FLAC X11 Xau Xdmcp Xext Xi gdk glib gmodule gtk m ogg \
		pthread-stubs xcb xmms

MODULES=	devel/gettext
LIB_DEPENDS=	audio/xmms \
		audio/flac

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
LIBTOOL_FLAGS=	--tag=disable-static
MAKE_FILE=	${FILESDIR}/Makefile

NO_TEST=	Yes

.include <bsd.port.mk>
@


1.31
log
@remove SHARED_ONLY from simple ports that use the gettext or libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/01/10 15:50:58 naddy Exp $
@


1.30
log
@maintenance update to flac 1.3.1, no significant user-visible changes
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.29 2013/05/31 14:34:29 naddy Exp $

SHARED_ONLY=	Yes
@


1.29
log
@Major update to FLAC 1.3.0; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/21 08:45:13 ajacoutot Exp $
d7 1
a7 1
VERSION=	1.3.0
d21 2
a22 2
WANTLIB=	FLAC X11 Xext Xi gdk glib gmodule gtk m ogg \
		xcb xmms
@


1.28
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/03/10 22:55:06 espie Exp $
d7 1
a7 1
VERSION=	1.2.1
a8 1
REVISION=	3
d11 1
a11 1
HOMEPAGE=	http://flac.sourceforge.net/
d18 2
a19 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=flac/}
d21 4
a24 2
WANTLIB=	X11 Xext Xi gdk glib gmodule gtk m ogg \
		xcb xmms>=4 FLAC>=9
a27 2
MODULES +=	devel/gettext

d29 2
a30 3
CONFIGURE_ARGS=	--with-libiconv-prefix="${LOCALBASE}" \
		--with-ogg="${LOCALBASE}" \
		--with-xmms-prefix="${LOCALBASE}"
a31 1
MAKE_ENV=	MAKEOBJDIR=/nonexistent		# ignore ${WRKSRC}/obj
@


1.27
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/10/12 12:54:31 jasper Exp $
a27 1
USE_LIBTOOL=	Yes
@


1.26
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/09/16 08:26:11 espie Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d37 1
a37 1
NO_REGRESS=	Yes
@


1.25
log
@normalize pkgpath in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/18 12:03:28 jasper Exp $
d9 1
a9 1
REVISION=	2
d24 2
a25 2
WANTLIB=	X11 Xau Xdmcp Xext Xi gdk glib gmodule gtk m ogg \
		pthread-stubs xcb xmms>=4 FLAC>=9
@


1.24
log
@- missing gettext module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/15 00:22:49 espie Exp $
d9 1
a9 1
REVISION=	1
@


1.23
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/10/24 21:00:30 ajacoutot Exp $
d9 1
a9 1
REVISION=	0
d24 1
a24 1
WANTLIB=	X11 Xau Xdmcp Xext Xi gdk glib gmodule gtk iconv intl m ogg \
d28 2
@


1.22
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/09/06 00:04:29 sthen Exp $
d25 3
a27 3
		pthread-stubs xcb xmms.>=4 FLAC.>=9
LIB_DEPENDS=	::audio/xmms \
		::audio/flac
@


1.21
log
@new-style REVISIONS/LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/08/10 06:29:52 kili Exp $
a28 1
USE_X11=	Yes
@


1.20
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/09/24 17:23:55 naddy Exp $
d8 2
a9 1
PKGNAME=	xmms-flac-${VERSION}p0
d25 3
a27 3
		pthread-stubs xcb
LIB_DEPENDS=	xmms.>=4::audio/xmms \
		FLAC.>=9::audio/flac
@


1.19
log
@maintenance update to 1.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/09/18 18:22:32 naddy Exp $
d8 1
a8 1
PKGNAME=	xmms-flac-${VERSION}
d23 2
a24 1
WANTLIB=	X11 Xau Xdmcp Xext Xi gdk glib gmodule gtk iconv intl m ogg
@


1.18
log
@Update to FLAC 1.2.0.  Many improvements.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/09/15 21:26:03 simon Exp $
d7 1
a7 1
VERSION=	1.2.0
d25 1
a25 1
		FLAC.>=8::audio/flac
@


1.17
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/04/12 20:24:30 sturm Exp $
d5 1
a5 1
COMMENT=	XMMS input plugin for playing FLAC file
d7 2
a8 2
VERSION=	1.1.2
PKGNAME=	xmms-flac-${VERSION}p1
d23 1
a23 1
WANTLIB=	X11 Xau Xdmcp Xext Xi gdk glib gmodule gtk iconv intl m
d25 1
a25 1
		FLAC.>=7::audio/flac
@


1.16
log
@simple WANTLIB fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/03/28 14:36:17 naddy Exp $
d5 1
a5 1
COMMENT=	"XMMS input plugin for playing FLAC files"
@


1.15
log
@- Don't build unused static parts.
- Just ignore ${WRKSRC}/obj.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/11/11 21:04:27 steven Exp $
d8 1
a8 1
PKGNAME=	xmms-flac-${VERSION}p0
d23 1
a23 1
WANTLIB=	X11 Xext Xi gdk glib gmodule gtk iconv intl m
@


1.14
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/08/01 10:50:19 espie Exp $
d8 1
a8 1
PKGNAME=	xmms-flac-${VERSION}
a19 1
WANTLIB=		X11 Xext Xi gdk glib gmodule gtk iconv intl m
d23 1
d33 2
a34 1

a35 4

# "obj" is magic to our make(1)
post-configure:
	@@rm -rf ${WRKSRC}/obj
@


1.13
log
@convert a few libspecs to new style.

Note: no package bump, those are only BUILD dependencies,
the pkg_create code will create the correct wantlib specs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/03/09 00:15:14 naddy Exp $
d27 1
@


1.12
log
@Update to 1.1.2:
* better Ogg FLAC support
* speedups
* several new options to flac and metaflac
* several API additions
* streaming support in the XMMS plugin
* bugfixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/11/21 17:51:48 espie Exp $
d24 2
a25 2
LIB_DEPENDS=	xmms.4::audio/xmms \
		FLAC.7::audio/flac
@


1.11
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/11/17 22:23:24 naddy Exp $
d7 1
a7 1
VERSION=	1.1.0
a22 4
MASTER_SITES0=	ftp://ftp.debian.org/debian/pool/main/f/flac/ \
		ftp://ftp.de.debian.org/debian/pool/main/f/flac/
PATCHFILES=	flac_${VERSION}-11.diff.gz:0
PATCH_DIST_STRIP= -p1
d24 2
a25 2
LIB_DEPENDS=	xmms.3::audio/xmms \
		FLAC.5::audio/flac
d27 2
a28 1
CONFIGURE_STYLE= gnu
@


1.10
log
@sync with Debian, no code changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/09/14 23:16:56 espie Exp $
d20 1
@


1.9
log
@convert to new style PLISTS.
xhippo loses install scripts.
all xmms modules are marked SHARED_ONLY.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/10/23 01:36:27 naddy Exp $
d24 1
a24 1
PATCHFILES=	flac_${VERSION}-10.diff.gz:0
@


1.8
log
@Sync with Debian patch version, no functional changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/07/07 23:11:25 naddy Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
@


1.7
log
@Catch up with Debian patch file.  No functional changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/04/18 00:28:40 naddy Exp $
d24 1
a24 1
PATCHFILES=	flac_${VERSION}-4.diff.gz:0
@


1.6
log
@Update to 1.1.0 and fix for ELF.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/11/03 02:14:54 naddy Exp $
d24 1
a24 1
PATCHFILES=	flac_${VERSION}-3.diff.gz:0
@


1.5
log
@Update to FLAC 1.0.4.  Die, libtool, die!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/07/07 19:09:29 naddy Exp $
d7 1
a7 1
VERSION=	1.0.4
d15 1
d22 4
d28 1
a28 1
		FLAC.4::audio/flac
d30 4
a33 2
WRKSRC=		${WRKDIST}/src/plugin_xmms
MODGNU_CONFIG_GUESS_DIRS=	${WRKDIST}
d35 1
a35 2
CONFIGURE_STYLE= gnu automake
CONFIGURE_ARGS=	--without-id3lib
d37 5
a41 20
# libtool doesn't handle linking a module against a convenience library

PLUGIN_COMMON_FILES=	all.h canonical_tag.c canonical_tag.h \
	charset.c:charset_common.c charset.h:charset_common.h \
	dither.c dither.h id3v1.c id3v1.h id3v2.c id3v2.h \
	locale_hack.h vorbiscomment.c vorbiscomment.h

pre-patch:
.for file in ${PLUGIN_COMMON_FILES}
	@@cp ${WRKDIST}/src/plugin_common/${file:C/:.*//} \
	    ${WRKSRC}/${file:C/.*://}
.endfor

post-patch:
	@@cd ${WRKDIST}; automake -v -i src/plugin_xmms/Makefile

pre-configure:
	@@echo '#!/bin/sh' >${WRKSRC}/configure
	@@echo 'cd ../..; exec ./configure "$$@@"' >>${WRKSRC}/configure
	@@chmod a+x ${WRKSRC}/configure
@


1.4
log
@Update to 1.0.3.  Changes in this release include:
- 10-15% decoder speedup
- 24-bit input support restored
- more robust plugins
- new metadata block for Vorbis-style tags
- vastly improved metadata editor
- new libFLAC++, a C++ object wrapper around libFLAC
- new metadata editing interface in libFLAC and libFLAC++
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/05/13 18:50:37 espie Exp $
d7 1
a7 1
VERSION=	1.0.3
d23 1
a23 1
		FLAC.3::audio/flac
d26 4
d31 12
a42 2
CONFIGURE_STYLE=		gnu automake
MODGNU_CONFIG_GUESS_DIRS=	${WRKDIST}
d45 1
a45 1
	cd ${WRKDIST}; automake -i
@


1.3
log
@Kill a few SUBDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/04/06 22:28:19 naddy Exp $
d7 1
a7 1
VERSION=	1.0.2
d9 1
a9 1
DISTNAME=	flac-${VERSION}-src
a10 1
NEED_VERSION=	1.504
d20 1
a20 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=flac/}
d22 2
a23 2
LIB_DEPENDS=	xmms.2::audio/xmms \
		FLAC.2::audio/flac
a24 1
WRKDIST=	${WRKDIR}/flac-${VERSION}
@


1.2
log
@use automake CONFIGURE_STYLE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/02/01 15:44:31 naddy Exp $
d21 1
a21 2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR=	flac
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a25 1
BUILD_DEPENDS=	::devel/automake
d30 1
a30 1
CONFIGURE_STYLE=		gnu
@


1.1.1.1
log
@Create separate port for XMMS FLAC input plugin.
- Circumvents libtool build problem.
- Removes xmms dependency from audio/flac.
@
text
@@
