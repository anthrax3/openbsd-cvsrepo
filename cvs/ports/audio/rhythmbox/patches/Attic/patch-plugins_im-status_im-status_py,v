head	1.3;
access;
symbols
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2013.09.05.08.25.27;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2013.04.15.10.04.26;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.15.08.42.54;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to rhythmbox-3.0.
@
text
@$OpenBSD: patch-plugins_im-status_im-status_py,v 1.2 2013/04/15 10:04:26 ajacoutot Exp $

From 85795ac2342762bc8eed666e027b7f06a3b5b932 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@gnome.org>
Date: Mon, 15 Apr 2013 08:34:26 +0000
Subject: im-status: fix plugin load by using GLib.GError

--- plugins/im-status/im-status.py.orig	Mon Apr 15 10:29:32 2013
+++ plugins/im-status/im-status.py	Mon Apr 15 10:30:03 2013
@@@@ -212,7 +212,7 @@@@ class IMStatusPlugin (GObject.Object, Peas.Activatable
         vstatus = GLib.Variant("(uss)", (status[0], status[1], new_status))
         # Set the status!
         acct_proxy.Set("(ssv)", MC5_ACCT_IFACE_NAME, "RequestedPresence", vstatus)
-    except gi._glib.GError as e:
+    except GLib.GError as e:
       print ("GError while setting status: " + str(e))
 
   def get_mc5_status (self):
@@@@ -234,7 +234,7 @@@@ class IMStatusPlugin (GObject.Object, Peas.Activatable
       # if all accounts have empty status, return that
       if got_status:
         return ""
-    except gi._glib.GError as e:
+    except GLib.GError as e:
       print ("GError while setting status: " + str(e))
     return None
 
@@@@ -244,7 +244,7 @@@@ class IMStatusPlugin (GObject.Object, Peas.Activatable
       status = proxy.PurpleSavedstatusGetCurrent()
       proxy.PurpleSavedstatusSetMessage("(is)", status, new_status)
       proxy.PurpleSavedstatusActivate("(i)", status)
-    except gi._glib.GError as e:
+    except GLib.GError as e:
       print ("GError while setting status: " + str(e))
 
   def get_purple_status (self):
@@@@ -252,6 +252,6 @@@@ class IMStatusPlugin (GObject.Object, Peas.Activatable
       proxy = self.proxies["purple"]
       status = proxy.PurpleSavedstatusGetCurrent()
       return proxy.PurpleSavedstatusGetMessage("(i)", status)
-    except gi._glib.GError as e:
+    except GLib.GError as e:
       print ("GError while setting status: " + str(e))
     return None
@


1.2
log
@Pushed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_im-status_im-status_py,v 1.1 2013/04/15 08:42:54 ajacoutot Exp $
@


1.1
log
@Add a fix to properly load the im-status plugin.
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=698043
@

