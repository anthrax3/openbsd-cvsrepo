head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.03.18.13.13.08;	author naddy;	state dead;
branches;
next	1.1;
commitid	qLGTceqnoDeUj1ee;

1.1
date	2014.12.29.10.44.55;	author sthen;	state Exp;
branches;
next	;
commitid	Ak5BZoeBZgWn80qq;


desc
@@


1.2
log
@* Update to SoX 14.4.2
* Remove cherry-picked patches as they are included now.
* Drop --without-ffmpeg as ffmpeg has finally been kicked out.
* Add the newly supported Opus format (--with-opus)
* Addresses some more ./configure --options explicitly.
* While there, reorder the LIB_DEPENDS alphabetically.
        and reorder WANTLIB by LIB_DEPENDS

From maintainer Jan Stary
@
text
@$OpenBSD: patch-src_gain_c,v 1.1 2014/12/29 10:44:55 sthen Exp $

[1c3d52] prevent division by 0 when input signal is entirely non-negative,
non-positive, or both

--- src/gain.c.orig	Wed Dec 24 12:32:38 2014
+++ src/gain.c	Wed Dec 24 12:32:53 2014
@@@@ -80,7 +80,9 @@@@ static int start(sox_effect_t * effp)
     if (!p->do_equalise && !p->do_balance && !p->do_balance_no_clip)
       effp->flows = 1; /* essentially a conditional SOX_EFF_MCHAN */
   }
-  p->mult = p->max = p->min = 0;
+  p->mult = 0;
+  p->max = 1;
+  p->min = -1;
   if (p->do_scan) {
     p->tmp_file = lsx_tmpfile();
     if (p->tmp_file == NULL) {
@


1.1
log
@cherry-pick audio/sox patches from git fixing problems with some bad input.
ok jasper@@, Jan Stary
@
text
@d1 1
a1 1
$OpenBSD$
@

