head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2016.09.27.08.51.24;	author fcambus;	state Exp;
branches;
next	1.1;
commitid	bpKbRs9rsiH7EZql;

1.1
date	2016.09.01.12.47.22;	author fcambus;	state Exp;
branches;
next	;
commitid	y7ASNweha6sV6NRx;


desc
@@


1.2
log
@Update schismtracker to 20160913.

Among other things, this update fixes log2() function detection and
doesn't attempt to link against libdl, so we can shorten one of the
patches and drop the other.

OK juanfra@@
@
text
@$OpenBSD$

Prevent calling Git to obtain date of the last commit, and hardcode
[last_git_commit] value to match package version.

--- configure.ac.orig	Tue Sep 13 21:21:08 2016
+++ configure.ac	Fri Sep 23 18:28:00 2016
@@@@ -22,8 +22,7 @@@@ dnl along with this program; if not, write to the Free
 dnl Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
 dnl PACKAGE_VERSION will be either "" if not using git, or date of the last git commit in the form YYYYMMDD
-m4_define([last_git_commit], patsubst(m4_esyscmd([git log -n 1 --date=short --format=format:%cd]), [[^0-9]]))
-AC_INIT([schismtracker], [last_git_commit])
+AC_INIT([schismtracker], [20160913])
 
 AC_CONFIG_SRCDIR([schism/main.c])
 
@


1.1
log
@Update schismtracker to 20160521 and take maintainership.

- Project moved to GitHub so fetch distfile from there
- Changed comment to a more accurate description
- Release tarball doesn't bundle a configure script, so the port now
  uses autoconf + automake, with patched configure.ac (comment in file)
- Use upstream Makefile install target, as it also installs manpage

OK jung@@
@
text
@d3 2
a4 3
- Prevent calling Git to obtain date of the last commit, and hardcode
  [last_git_commit] value to match package version
- Fix log2() function detection
d6 3
a8 4
--- configure.ac.orig	Sat May 21 16:40:41 2016
+++ configure.ac	Fri Aug 19 22:54:30 2016
@@@@ -21,9 +21,7 @@@@ dnl You should have received a copy of the GNU General
 dnl along with this program; if not, write to the Free Software
d11 1
a11 1
-dnl PACKAGE_VERSION will be either " " if not using git, or date of the last git commit in the form YYYYMMDD
d14 1
a14 1
+AC_INIT([schismtracker], [20160521])
a17 8
@@@@ -58,6 +56,7 @@@@ dnl Check for SDL libs
 AM_PATH_SDL(1.2.10, , AC_MSG_ERROR([*** SDL version >= 1.2.10 not found.]))
 
 dnl Functions
+AC_CHECK_LIB([m], [log2])
 AC_CHECK_FUNCS(strchr memmove strerror strtol strcasecmp strncasecmp strverscmp stricmp strnicmp strcasestr strptime asprintf vasprintf memcmp mmap nice unsetenv dup fnmatch log2 mkstemp)
 AM_CONDITIONAL([NEED_ASPRINTF], [test "$ac_cv_func_asprintf" = "no"])
 AM_CONDITIONAL([NEED_VASPRINTF], [test "$ac_cv_func_vasprintf" = "no"])
@

