head	1.46;
access;
symbols
	OPENBSD_6_1:1.40.0.2
	OPENBSD_6_1_BASE:1.40
	OPENBSD_6_0:1.37.0.2
	OPENBSD_6_0_BASE:1.37
	OPENBSD_5_9:1.34.0.2
	OPENBSD_5_9_BASE:1.34
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.29.0.6
	OPENBSD_5_6_BASE:1.29
	OPENBSD_5_5:1.29.0.4
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.29.0.2
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.4
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.7.0.6
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.4
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.2
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.5.0.4
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	jolan_2004-10-21:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.46
date	2017.07.16.19.18.48;	author espie;	state Exp;
branches;
next	1.45;
commitid	tt0GhWK5c4uf9ILG;

1.45
date	2017.05.31.08.08.15;	author espie;	state Exp;
branches;
next	1.44;
commitid	ij92FtFXiSiT1ani;

1.44
date	2017.05.28.12.13.22;	author zhuk;	state Exp;
branches;
next	1.43;
commitid	HynAlyKA3RONapVj;

1.43
date	2017.05.28.12.12.39;	author zhuk;	state Exp;
branches;
next	1.42;
commitid	iZACJ2AR5hu65Fvy;

1.42
date	2017.05.27.04.41.43;	author espie;	state Exp;
branches;
next	1.41;
commitid	zYbSJYUuMHg82YnC;

1.41
date	2017.04.08.18.21.07;	author landry;	state Exp;
branches;
next	1.40;
commitid	2SxesVRFUwkT9Ntt;

1.40
date	2017.01.05.23.04.24;	author jca;	state Exp;
branches;
next	1.39;
commitid	3PvdqD0Swh2QqoXM;

1.39
date	2016.11.03.10.27.15;	author jasper;	state Exp;
branches;
next	1.38;
commitid	0rcI4hfYQ9hfwvq0;

1.38
date	2016.09.01.10.53.26;	author jasper;	state Exp;
branches;
next	1.37;
commitid	LdsIxWmxagN2Kq33;

1.37
date	2016.05.24.08.07.58;	author dcoppa;	state Exp;
branches;
next	1.36;
commitid	6a11CNCNYhdrUTrh;

1.36
date	2016.04.09.21.11.56;	author sthen;	state Exp;
branches;
next	1.35;
commitid	ZlwHlkWyNCGAoD5i;

1.35
date	2016.04.09.14.50.59;	author sthen;	state Exp;
branches;
next	1.34;
commitid	Eoz6esMqTz2ITNMP;

1.34
date	2016.02.21.16.17.25;	author jsg;	state Exp;
branches;
next	1.33;
commitid	IZQsfcjAwN1evvTh;

1.33
date	2016.02.15.12.00.29;	author tobiasu;	state Exp;
branches;
next	1.32;
commitid	9ja9WHqoASXMFIvm;

1.32
date	2015.12.26.09.45.51;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	yBK1nC4sxUCqpHHX;

1.31
date	2015.05.22.11.31.11;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	2khjHXfpTaOuNVcx;

1.30
date	2014.12.09.20.46.00;	author sthen;	state Exp;
branches;
next	1.29;
commitid	tWAQF6KyiOoRKcOo;

1.29
date	2013.03.11.15.26.14;	author bcallah;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.10.22.55.04;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2012.11.29.16.36.56;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2012.09.29.06.49.03;	author landry;	state Exp;
branches;
next	1.25;

1.25
date	2012.04.06.13.48.18;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2011.07.02.07.34.31;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2011.06.26.20.05.26;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2011.06.26.10.36.16;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2011.06.26.09.58.08;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.06.25.18.42.02;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.15.00.22.47;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.28.10.02.04;	author steven;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.24.07.53.23;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.07.04.34.59;	author jakemsr;	state Exp;
branches;
next	1.15;

1.15
date	2010.09.06.00.04.28;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.04.02.16.02.27;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2009.12.16.21.12.20;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2009.12.16.20.00.41;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.14.14.27.34;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2009.10.10.22.51.48;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.10.10.13.55.44;	author phessler;	state Exp;
branches;
next	1.8;

1.8
date	2009.08.26.12.12.46;	author kili;	state Exp;
branches;
next	1.7;

1.7
date	2008.04.04.09.33.10;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2007.09.15.21.26.02;	author simon;	state Exp;
branches;
next	1.5;

1.5
date	2006.10.30.23.31.37;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2006.08.01.12.13.28;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2005.12.23.16.10.48;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.21.17.51.46;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.21.05.04.16;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.21.05.04.16;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.46
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.45 2017/05/31 08:08:15 espie Exp $

BROKEN-hppa =	undefined reference to __sync atomic ops
BROKEN-mips64 =	undefined reference to __sync atomic ops
BROKEN-mips64el =	undefined reference to __sync atomic ops

COMMENT =	cross-platform 3D audio API

V =		1.16.0
EPOCH =		0
DISTNAME =	openal-soft-$V
PKGNAME =	openal-$V
CATEGORIES =	audio
SHARED_LIBS =	openal	2.2
REVISION =	0

HOMEPAGE =	http://kcat.strangesoft.net/openal.html

MAINTAINER =	David Carlier <devnexen@@gmail.com>

# LGPLv2+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB +=	c m pthread sndio ${COMPILER_LIBCXX}

MASTER_SITES =	${HOMEPAGE:S,.html,-releases/,}
EXTRACT_SUFX =	.tar.bz2

CONFIGURE_ARGS =-DCMAKE_BUILD_TYPE=OpenBSD \
		-DALSOFT_SYSCONFDIR=${SYSCONFDIR} \
		-DALSOFT_CONFIG_DESTINATION=share/examples/openal \
		-DALSOFT_DLOPEN=Off \
		-DALSOFT_UTILS=On \
		-DALSOFT_EXAMPLES=Off \
		-DALSOFT_REQUIRE_SNDIO=On \
		-DALSOFT_BACKEND_ALSA=Off \
		-DALSOFT_BACKEND_COREAUDIO=Off \
		-DALSOFT_BACKEND_DSOUND=Off \
		-DALSOFT_BACKEND_JACK=Off \
		-DALSOFT_BACKEND_MMDEVAPI=Off \
		-DALSOFT_BACKEND_OPENSL=Off \
		-DALSOFT_BACKEND_OSS=Off \
		-DALSOFT_BACKEND_PORTAUDIO=Off \
		-DALSOFT_BACKEND_PULSEAUDIO=Off \
		-DALSOFT_BACKEND_QSA=Off \
		-DALSOFT_BACKEND_SOLARIS=Off \
		-DALSOFT_BACKEND_WAVE=Off \
		-DALSOFT_BACKEND_WINMM=Off \
		-DALSOFT_NO_CONFIG_UTIL=On

MODULES =	devel/cmake

COMPILER =		clang gcc
# clang fails on those architectures
MODGCC4_ARCHS =		sparc64 powerpc
MODCLANG_ARCHS =	aarch64 amd64 arm i386 mips64 mips64el

SEPARATE_BUILD =Yes
NO_TEST =	Yes

pre-build:
	@@${SUBST_CMD} ${WRKSRC}/Alc/alcConfig.c ${WRKSRC}/alsoftrc.sample

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/openal
	${INSTALL_DATA} ${WRKSRC}/alsoftrc.sample \
		${PREFIX}/share/examples/openal

.include <bsd.port.mk>
@


1.45
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2017/05/28 12:13:22 zhuk Exp $
d24 1
a24 1
WANTLIB +=	c m pthread sndio ${LIBECXX}
@


1.44
log
@... and bump for safety as well.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2017/05/28 12:12:39 zhuk Exp $
d53 1
a53 1
WANT_CXX =	base clang gcc
d55 1
a55 1
MODGCC4_ARCHS =	sparc64 powerpc
@


1.43
log
@Leaving clang and/or gcc4 in modules could have fun effects after
switching to WANT_CXX. Zap 'em and unbreak openal.

reported by naddy@@, okay espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2017/05/27 04:41:43 espie Exp $
d15 1
@


1.42
log
@use WANT_CXX, these build trivially
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2017/04/08 18:21:07 landry Exp $
d50 1
a50 1
MODULES =	devel/cmake lang/clang gcc4
@


1.41
log
@Use gcc4 MODULE instead of clang on sparc64 & powerpc

clang fails to build those with 'could not read symbols: Bad value' (cf
http://build-failures.rhaalovely.net/sparc64/2017-03-20/multimedia/gstreamer1/core.log
& ttp://build-failures.rhaalovely.net/sparc64/2017-03-20/audio/openal.log)

Fix only those as they take out a large part of the portstree for 6.1
package builds, but reasonably MODCLANG_ARCHS=* shouldnt be used unless
the compiler has been *really* tested on every platform - or clang
should be marked *BROKEN* on sparc64 & macppc, or those platforms should
be taken out of LLVM_ARCHS.

audio/mpd, textproc/link-grammar, devel/keystone and devel/cbmc are in
the same boat and fail the same.

The problem is probably fixable directly in clang for sparc64, and on
powerpc clang doesnt package anyway for 'relocation truncated to fit:
R_PPC_PLTREL24' errors:
http://build-failures.rhaalovely.net/powerpc/2017-02-16/devel/llvm.log
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2017/01/05 23:04:24 jca Exp $
d23 1
a23 1
WANTLIB +=	c m pthread sndio
d51 2
a54 1
MODGCC4_LANGS =	c c++
a55 1
MODCLANG_LANGS =	c c++
@


1.40
log
@Don't build the Qt-based config editor.

Spotted by naddy@@, initial diff from David Carlier (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2016/11/03 10:27:15 jasper Exp $
d50 6
a55 3
MODULES =	devel/cmake lang/clang
MODCLANG_ARCHS = *
MODCLANG_LANGS = c c++
@


1.39
log
@- update to openal-1.16.0
- remove BROKEN-arm marker

from David Carlier (MAINTAINER)
tested in a bulk and ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/09/01 10:53:26 jasper Exp $
d47 2
a48 1
		-DALSOFT_BACKEND_WINMM=Off
@


1.38
log
@retire sparc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/05/24 08:07:58 dcoppa Exp $
a2 1
BROKEN-arm =	undefined reference to __sync atomic ops
d4 2
d9 1
a9 1
V =		1.15.1
a10 1
REVISION =	4
d23 1
a23 1
WANTLIB =	c m pthread sndio
d28 24
a51 15
CONFIGURE_ARGS =-DCMAKE_C_FLAGS="${CFLAGS} -DNDEBUG"	\
		-DCMAKE_BUILD_TYPE=OpenBSD		\
		-DDLOPEN=Off				\
		-DREQUIRE_SNDIO=On			\
		-DPULSEAUDIO=Off			\
		-DPORTAUDIO=Off				\
		-DSOLARIS=Off				\
		-DALSA=Off				\
		-DOSS=Off				\
		-DCOREAUDIO=Off				\
		-DDSOUND=Off				\
		-DOPENSL=Off				\
		-DEXAMPLES=Off

MODULES =	devel/cmake
d57 1
a57 1
	@@${SUBST_CMD} ${WRKSRC}/Alc/alcConfig.c
@


1.37
log
@
Avoid an underflow in the SSE mixers if BufferSize is less than 4
(upstream git commit 564a1822595e287cf808ea63a03d96719e3cc7b4)

Fix a crash with games/ioquake3.
Reported and fix tested by Ryan Freeman.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/04/09 21:11:56 sthen Exp $
a4 1
BROKEN-sparc =	undefined reference to __sync atomic ops
@


1.36
log
@David Carlier takes maintainer of openal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/04/09 14:50:59 sthen Exp $
d11 1
a11 1
REVISION =	3
@


1.35
log
@drop Antti Harri as maintainer, as per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/02/21 16:17:25 jsg Exp $
d11 1
a11 1
REVISION =	2
d18 2
@


1.34
log
@Don't attempt to build on arm.  sync atomic builtins required.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/02/15 12:00:29 tobiasu Exp $
d11 1
a11 1
REVISION =	1
a17 2

MAINTAINER =	Antti Harri <iku@@openbsd.fi>
@


1.33
log
@mark broken on sparc, missing sync builtins
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/12/26 09:45:51 ajacoutot Exp $
d3 1
@


1.32
log
@Remove more BROKEN markers for ports requiring built-in atomic ops.

from Brad, OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/05/22 11:31:11 ajacoutot Exp $
d4 1
@


1.31
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/12/09 20:46:00 sthen Exp $
a3 2
BROKEN-mips64 =	undefined reference to __sync atomic ops
BROKEN-mips64el =	undefined reference to __sync atomic ops
@


1.30
log
@srand_deterministic
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/11 15:26:14 bcallah Exp $
d11 1
a11 1
REVISION =	0
@


1.29
log
@Update audio/openal to 1.15.1
ok brad@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/10 22:55:04 espie Exp $
d11 1
@


1.28
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/11/29 16:36:56 jasper Exp $
d5 1
d9 1
a9 1
V =		1.14
d14 1
a14 1
SHARED_LIBS =	openal	2.1
@


1.27
log
@mark this broken on mips64 too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/09/29 06:49:03 landry Exp $
a20 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d44 1
a44 1
NO_REGRESS =	Yes
@


1.26
log
@Mark as BROKEN-hppa, undefined references to :
__sync_bool_compare_and_swap_4
__sync_add_and_fetch_4
__sync_sub_and_fetch_4
__sync_lock_test_and_set_4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/04/06 13:48:18 sthen Exp $
d4 1
@


1.25
log
@update to OpenAL 1.14, from Antti Harri with tweak from Brad
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.24 2011/07/02 07:34:31 jasper Exp $
@


1.24
log
@- update to 20110627
- remove portaudio support, only use sndio
- Alc/portaudio.c is now in upstream, remove
- part of Alc/sndio.c is not needed anymore, remove
- Some CFLAGS cleanup

from antti harri (MAINTAINER) and brad

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/06/26 20:05:26 sthen Exp $
d5 2
a6 1
V =		20110627
d10 1
a10 1
SHARED_LIBS =	openal	2.0
d24 2
a25 2
MASTER_SITES =	${HOMEPAGE:S,.html,-releases/,} \
		http://openbsd.fi/dist/
d30 1
d35 5
a39 1
		-DOSS=Off
d43 1
@


1.23
log
@- fix my broken revert of patch-openal_pc_in, sorry
- Antti Harri takes maintainer
(no bump as previous didn't build)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/06/26 10:36:16 sthen Exp $
d5 1
a5 1
V =		20110624
a7 1
REVISION =	1
d21 1
a21 1
WANTLIB =		c m pthread sndio portaudio
d23 2
a24 2
MASTER_SITES =		${HOMEPAGE:S,.html,-releases/,} \
			http://openbsd.fi/dist/
d26 8
a33 2
LIB_DEPENDS =		audio/portaudio-svn
MODULES =		devel/cmake
d35 3
a37 1
NO_REGRESS =		Yes
@


1.22
log
@revert library changes from previous commit pending further discussion.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/06/25 18:42:02 jasper Exp $
d13 2
@


1.21
log
@various fixes to the openal port from Brad;

- Use CMake options via CONFIGURE_ARGS to disable unnecessary backends
  and unwanted features which also means being able to remove some
  patching of CMakeLists.
- Fix hardcoded path in the OpenAL code.
- Fix the pkg-config file to properly list the library dependencies.
@
text
@d8 1
a8 1
REVISION =	0
d20 1
a20 1
WANTLIB =		c m pthread sndio
d25 1
a26 4

CONFIGURE_STYLE =	cmake
CONFIGURE_ARGS =	-DALSA=off -DOSS=off -DSOLARIS=off -DPORTAUDIO=off \
			-DPULSEAUDIO=off -DDLOPEN=off
@


1.20
log
@- update to a more recent version

Some games might require reseting configurations if sounds are not playing after the update.

from Antti Harri
ok ratchov@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/15 00:22:47 espie Exp $
d8 1
d14 1
a14 1
# LGPL
d20 1
a20 1
WANTLIB =		c m pthread sndio portaudio
a24 1
LIB_DEPENDS =		audio/portaudio-svn
d27 4
d32 3
@


1.19
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/28 10:02:04 steven Exp $
d3 1
a3 1
COMMENT=	cross-platform 3D audio API
d5 5
a9 4
DISTNAME=	openal-0.0.8
REVISION=	8
CATEGORIES=	audio
SHARED_LIBS +=  openal               1.0      # .0.0
d11 1
a11 1
HOMEPAGE=	http://www.openal.org/
d14 19
a32 40
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB=		m sndio

MASTER_SITES=	http://openbsd.dead-parrot.de/distfiles/

USE_GMAKE=	Yes
USE_LIBTOOL=	Yes

# auto* uses libtool macros
BUILD_DEPENDS=	devel/libtool

AUTOCONF_VERSION=2.59
AUTOMAKE_VERSION=1.9
CONFIGURE_STYLE=autoconf automake
CONFIGURE_ARGS=	--disable-vorbis \
		--disable-arts \
		--disable-mp3 \
		--disable-esd \
		--disable-sdl \
		--disable-solaris

MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/admin/autotools

post-extract:
	@@cp ${FILESDIR}/alc_backend_sndio.c ${WRKSRC}/src/backends/

AUTO_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION}

post-patch:
	@@echo "Running aclocal-${AUTOMAKE_VERSION} in ${WRKSRC}"
	@@cd ${WRKSRC}; ${AUTO_ENV} aclocal -I admin/autotools/m4

pre-configure:
	@@echo "Running automake-${AUTOMAKE_VERSION} in ${WRKSRC}"
	@@cd ${WRKSRC}; ${AUTO_ENV} automake --foreign
@


1.18
log
@this builds fine with openbsd libtool so set USE_LIBTOOL=yes

however auto* needs libtoolize or some other libtool macros, therefore add
a build dependency on gnu libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/24 07:53:23 landry Exp $
d26 1
a26 1
BUILD_DEPENDS=	::devel/libtool
@


1.17
log
@Auto* uses libtool m4 macros, set USE_LIBTOOL=gnu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/07 04:34:59 jakemsr Exp $
d23 2
d26 1
a26 1
USE_LIBTOOL=	gnu
@


1.16
log
@* avoid using a negative array index (fixes crash in supertuxkart)
* block size vs buffer size correction in sndio backend
* disable audio(4) backend
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/09/06 00:04:28 sthen Exp $
d6 1
a6 1
REVISION=	7
d23 2
a24 1
USE_LIBTOOL=	Yes
@


1.15
log
@new-style REVISIONS/LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/04/02 16:02:27 sthen Exp $
d6 1
a6 1
REVISION=	6
d32 2
a33 1
		--disable-sdl
@


1.14
log
@sync WANTLIB (mostly libffi) and bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/12/16 21:12:20 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p6
d17 1
@


1.13
log
@fix function names in backend
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/12/16 20:00:41 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
d17 1
a17 1
WANTLIB=		m
@


1.12
log
@use sndio instead of ossaudio; small correction and ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/10/14 14:27:34 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
@


1.11
log
@char is unsigned on some archs (powerpc, arm)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/10/10 22:51:48 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d24 3
a26 1
CONFIGURE_STYLE=gnu
d32 16
@


1.10
log
@Ports using OpenAL require libossaudio to link properly; record this
in the pkgconfig/openal-config files so those ports can handle it without
hacks. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/10/10 13:55:44 phessler Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.9
log
@newer versions of gcc whine about typedef-ing void, so change it to a #define

OK steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/08/26 12:12:46 kili Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.8
log
@Mirror this.
The original URL does a bullshit business redirection game
to creativelabs.com.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/04/04 09:33:10 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.7
log
@- @@requirements@@ wasn't properly set in openal.pc, causing openal to never
get picked up.
- regen patches while here

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/09/15 21:26:02 simon Exp $
d19 1
a19 1
MASTER_SITES=	http://www.openal.org/openal_webstf/downloads/
@


1.6
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/10/30 23:31:37 steven Exp $
d4 1
d6 1
@


1.5
log
@update to OpenAL 0.0.8

ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/08/01 12:13:28 espie Exp $
d3 1
a3 1
COMMENT=	"cross-platform 3D audio API"
@


1.4
log
@new-style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/12/23 16:10:48 espie Exp $
d4 1
a4 2
DISTNAME=	openal-20040816
PKGNAME=	${DISTNAME}p0
d6 1
a6 3
SHARED_LIBS=	openal	0.0
MASTER_SITES=	http://math.smsu.edu/~erik/files/fbsd/ \
		http://www.smluc.org/~erik/files/fbsd/
d15 1
a15 1
WANTLIB=		m ogg
d17 1
a17 1
LIB_DEPENDS=	vorbis.>=3.0,vorbisfile.>=4.0::audio/libvorbis
a18 1
NO_REGRESS=	Yes
d20 1
a20 2

WRKSRC=		${WRKDIST}/linux
d23 5
a27 6
CONFIGURE_ARGS+=--enable-vorbis
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="-L${LOCALBASE}/lib" \
	LIBS="-logg"

MAKE_FLAGS=MAJOR_VERSION=${LIBopenal_VERSION:R} VERSION=${LIBopenal_VERSION}
FAKE_FLAGS=${MAKE_FLAGS} DESTDIR=${WRKINST}
@


1.3
log
@SHARED_LIBS.
Tweak installation procedure to avoid *.so entirely in order not to pollute
PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/11/21 17:51:46 espie Exp $
d20 1
a20 1
LIB_DEPENDS=	vorbis.3.0,vorbisfile.4.0::audio/libvorbis
@


1.2
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/10/21 05:04:16 jolan Exp $
d5 1
d7 1
d31 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d16 1
@


1.1.1.1
log
@openal-20040816, cross-platform 3D audio API
@
text
@@
