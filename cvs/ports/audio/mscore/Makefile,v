head	1.30;
access;
symbols
	OPENBSD_6_1:1.28.0.2
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.10.0.2
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.8.0.2
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	bcallah_2013-Feb-01:1.1.1.1
	bcallah:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.07.27.09.34.37;	author sthen;	state Exp;
branches;
next	1.29;
commitid	TUtTk7ViVUGQQMLK;

1.29
date	2017.07.06.08.01.09;	author bcallah;	state Exp;
branches;
next	1.28;
commitid	7iHgKLyTuJBt6d8m;

1.28
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.27;
commitid	l6KSNN1DfB6ABkhu;

1.27
date	2016.06.30.08.28.42;	author dcoppa;	state Exp;
branches;
next	1.26;
commitid	1NWUEjErHkHJtsUh;

1.26
date	2016.03.18.23.12.15;	author naddy;	state Exp;
branches;
next	1.25;
commitid	KZAl4KEiw6a3Jixw;

1.25
date	2015.08.25.13.18.24;	author sthen;	state Exp;
branches;
next	1.24;
commitid	ezNehs3ayqMPx5Ri;

1.24
date	2015.08.22.02.47.27;	author bcallah;	state Exp;
branches;
next	1.23;
commitid	pw9QpL4xSsjrtT5M;

1.23
date	2015.05.28.10.17.22;	author pascal;	state Exp;
branches;
next	1.22;
commitid	020U4lCPk8wUkCOz;

1.22
date	2015.05.19.13.40.41;	author bcallah;	state Exp;
branches;
next	1.21;
commitid	NtIZ86CCq5RK4JFQ;

1.21
date	2015.05.04.16.45.30;	author zhuk;	state Exp;
branches;
next	1.20;
commitid	3Ee8XmmNWo7kO0m7;

1.20
date	2015.04.14.18.15.57;	author landry;	state Exp;
branches;
next	1.19;
commitid	c3UEu9RRJz8SDaGt;

1.19
date	2015.03.30.09.34.16;	author sthen;	state Exp;
branches;
next	1.18;
commitid	rUa4XCag7NaAkuIa;

1.18
date	2015.03.27.08.43.01;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	9SD62DzRZ5qtR5xU;

1.17
date	2015.03.24.21.23.44;	author kili;	state Exp;
branches;
next	1.16;
commitid	THnK7daFEFEw4VPY;

1.16
date	2015.03.24.00.24.15;	author bcallah;	state Exp;
branches;
next	1.15;
commitid	xjLaq8xgU4DKf6YU;

1.15
date	2015.03.24.00.05.55;	author bcallah;	state Exp;
branches;
next	1.14;
commitid	wvQUi88Apjfhmbe4;

1.14
date	2015.03.23.19.08.52;	author bcallah;	state Exp;
branches;
next	1.13;
commitid	sezVcU75oMvf5sfd;

1.13
date	2014.11.07.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	QYJaNcIko4VHoTIl;

1.12
date	2014.11.05.06.03.32;	author dcoppa;	state Exp;
branches;
next	1.11;
commitid	j1hCDVsAy63pv2F8;

1.11
date	2014.11.04.14.36.36;	author dcoppa;	state Exp;
branches;
next	1.10;
commitid	ue5wXKPjreIQKSy2;

1.10
date	2014.05.20.14.08.47;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2014.03.10.20.27.25;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2013.09.10.10.04.53;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2013.06.22.03.33.39;	author bcallah;	state Exp;
branches;
next	1.6;

1.6
date	2013.06.21.15.13.46;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2013.04.22.14.42.45;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.28.13.40.24;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.10.22.55.04;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.06.20.37.56;	author bcallah;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.01.06.26.48;	author bcallah;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.02.01.06.26.48;	author bcallah;	state Exp;
branches;
next	;


desc
@@


1.30
log
@add COMPILER_LIBCXX to WANTLIB and bump
@
text
@# $OpenBSD: Makefile,v 1.29 2017/07/06 08:01:09 bcallah Exp $

BROKEN-hppa =	ICE on moc_qtsingleapplication.cxx
BROKEN-powerpc = libmscore/pitchspelling.h:56:42: error: enumerator value -1 is too large for underlying type 'char'

V =		2.1
REVISION =	0
COMMENT =	WYSIWYG music notation software (MuseScore)
DISTNAME =	MuseScore-${V}
PKGNAME =	musescore-${V}
EXTRACT_SUFX =	.zip
CATEGORIES =	audio x11

HOMEPAGE =	http://musescore.org/
MAINTAINER =	Brian Callahan <bcallah@@openbsd.org>

# GPLv2 only
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += Qt5Concurrent Qt5Core Qt5Designer Qt5Gui Qt5Help Qt5Network
WANTLIB += Qt5OpenGL Qt5PrintSupport Qt5Qml Qt5Quick Qt5QuickWidgets
WANTLIB += Qt5Sql Qt5Svg Qt5Test Qt5WebKit Qt5WebKitWidgets Qt5Widgets
WANTLIB += Qt5Xml Qt5XmlPatterns c freetype m ogg portaudio pthread
WANTLIB += sndfile vorbis vorbisfile z
WANTLIB += ${COMPILER_LIBCXX}

MASTER_SITES =	http://ftp.osuosl.org/pub/musescore/releases/MuseScore-${V}/

MODULES =	devel/cmake \
		x11/qt5

BUILD_DEPENDS =	audio/lame \
		misc/findutils

LIB_DEPENDS =	audio/portaudio-svn \
		audio/libsndfile>=1.0.25p0 \
		x11/qt5/qtdeclarative \
		x11/qt5/qtsvg \
		x11/qt5/qttools \
		x11/qt5/qtwebkit \
		x11/qt5/qtxmlpatterns

RUN_DEPENDS =	devel/desktop-file-utils \
		x11/gtk+3,-guic

CONFIGURE_ARGS =-DCMAKE_INSTALL_PREFIX="${PREFIX}" \
		-DBUILD_ALSA=OFF \
		-DBUILD_JACK=OFF \
		-DBUILD_PULSEAUDIO=OFF \
		-DUSE_SYSTEM_FREETYPE=ON

NO_TEST =	Yes

.include <bsd.port.mk>
@


1.29
log
@Major update to 2.1 -- take maintainer.
Changelog: https://musescore.org/en/2.1
ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/12/25 14:34:39 zhuk Exp $
d7 1
d25 1
@


1.28
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/06/30 08:28:42 dcoppa Exp $
d6 1
a6 1
V =		2.0.2
a11 1
REVISION =	1
d14 1
d45 4
a48 1
		-DBUILD_JACK=OFF
@


1.27
log
@
Remove leftover/unnecessary 'USE_NINJA=No'.

I've successfully built this port using ninja several times and
with different MAKE_JOBS values.

Furthermore, comment talked about problems with precompiled headers,
but PCH support is disabled.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/03/18 23:12:15 naddy Exp $
d12 1
a12 1
REVISION =	0
d34 6
a39 1
		audio/libsndfile>=1.0.25p0
@


1.26
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/08/25 13:18:24 sthen Exp $
a28 2
# pch confuses Ninja
USE_NINJA =	No
@


1.25
log
@remove bcallah as maintainer of his ports, at his request
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/08/22 02:47:27 bcallah Exp $
a12 2

SHARED_ONLY =	Yes
@


1.24
log
@Maintenance update to 2.0.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/05/28 10:17:22 pascal Exp $
d12 1
a15 1
MAINTAINER =	Brian Callahan <bcallah@@openbsd.org>
@


1.23
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/05/19 13:40:41 bcallah Exp $
d6 1
a6 2

V =		2.0.1
a11 1
REVISION =	0
d21 5
a25 6
WANTLIB += Qt5Concurrent Qt5Core Qt5Declarative Qt5Designer Qt5Gui
WANTLIB += Qt5Help Qt5Network Qt5OpenGL Qt5PrintSupport Qt5Qml
WANTLIB += Qt5Quick Qt5QuickWidgets Qt5Script Qt5ScriptTools Qt5Sql
WANTLIB += Qt5Svg Qt5Test Qt5WebKit Qt5WebKitWidgets Qt5Widgets
WANTLIB += Qt5Xml Qt5XmlPatterns c m ogg portaudio pthread sndfile
WANTLIB += vorbis vorbisfile z
a46 6

post-install:
.for i in 1024 128 16 2048 24 32 48 512 64 96
	@@cd ${PREFIX}/share/icons/hicolor/${i}x${i}/apps \
		&& mv musescore-icon-round-${i}.png musescore.png
.endfor
@


1.22
log
@Maintenance update to 2.0.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/05/04 16:45:30 zhuk Exp $
d13 1
@


1.21
log
@Zap gcc4 module related lines not needed anymore.

okay bcallah@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/04/14 18:15:57 landry Exp $
d7 1
a7 1
V =		2.0.0
a10 1
REVISION =	1
d29 1
a29 1
MASTER_SITES =	http://ftp.osuosl.org/pub/musescore/releases/MuseScore-2.0/
@


1.20
log
@BROKEN-powerpc = libmscore/pitchspelling.h:56:42: error: enumerator value -1 is too large for underlying type 'char'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/03/30 09:34:16 sthen Exp $
a35 6

# ICE building moc_qtsingleapplication.cxx with base gcc 4.2.1 on amd64.
# possible problems with ppc. unsure about other arch.
MODULES +=		gcc4
MODGCC4_ARCHS +=	*
MODGCC4_LANGS +=	c++
@


1.19
log
@didn't actually get bumped in previous
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/03/27 08:43:01 ajacoutot Exp $
d4 2
@


1.18
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/03/24 21:23:44 kili Exp $
d9 1
a9 1
REVISION =	0
@


1.17
log
@Needs audio/lame at build time.

"go ahead and add it", becallah@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/03/24 00:24:15 bcallah Exp $
d48 1
a48 1
		x11/gtk+2,-guic
@


1.16
log
@Ugh. Tonight's not my night. Fix the COMMENT. Bump for safety.
Sorry for the noise.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/03/24 00:05:55 bcallah Exp $
d41 2
a42 1
BUILD_DEPENDS =	misc/findutils
@


1.15
log
@Change the PKGNAME from mscore to musescore, at the request of upstream.
ok jung@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/03/23 19:08:52 bcallah Exp $
d6 1
a6 1
COMMENT =	WYSIWYG music notation software (mscore)
d9 1
@


1.14
log
@Welcome MuseScore 2.0.0 -- this is MuseScore ported to Qt5 and lots of
improvements. Thanks to upstream for working with me to get a most things
upstreamed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/11/07 10:40:05 ajacoutot Exp $
d6 1
a6 1
COMMENT =	WYSIWYG music notation software (MuseScore)
d8 1
a8 1
PKGNAME =	mscore-${V}
@


1.13
log
@No need for default CMAKE_BUILD_TYPE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/11/05 06:03:32 dcoppa Exp $
d5 1
d7 3
a9 3
DISTNAME =	mscore-1.3
REVISION =	6
EXTRACT_SUFX =	.tar.bz2
a10 1
SUBST_VARS +=	DISTNAME
a14 1

d17 2
a18 9
# GPLv2
PERMIT_PACKAGE_CDROM =		Yes

WANTLIB += X11 c m portaudio pthread sndfile z
WANTLIB += lib/qt4/QtDesigner lib/qt4/QtGui lib/qt4/QtNetwork
WANTLIB += lib/qt4/QtScript lib/qt4/QtScriptTools lib/qt4/QtSvg
WANTLIB += lib/qt4/QtWebKit lib/qt4/QtXml lib/qt4/QtXmlPatterns

MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=mscore/}
d20 13
a32 2
MODULES =		devel/cmake \
			x11/qt4
d40 2
d45 2
a46 1
RUN_DEPENDS =	devel/desktop-file-utils
d51 1
a51 1
WRKSRC =	${WRKDIST}/mscore
d53 5
a57 1
NO_TEST =	Yes
@


1.12
log
@
Respect our CFLAGS

prodded by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/11/04 14:36:36 dcoppa Exp $
d42 1
a42 2
CONFIGURE_ARGS =-DCMAKE_BUILD_TYPE=RELEASE \
		-DCMAKE_INSTALL_PREFIX="${PREFIX}" \
@


1.11
log
@
Remove '-O2'/'-O3' optimizations
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/05/20 14:08:47 dcoppa Exp $
d7 1
a7 1
REVISION =	5
@


1.10
log
@mscore has a crappy Makefile that sets some stuff up and then calls
cmake: fix this nonsense.

OK bcallah@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/03/10 20:27:25 landry Exp $
d7 1
a7 1
REVISION =	4
@


1.9
log
@Bump ports using gcc4 module.
(not: mozilla ports not bumped since they're going to be updated in a few)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/09/10 10:04:53 landry Exp $
d7 1
a7 1
REVISION =	3
d21 1
a21 1
WANTLIB += c m portaudio pthread sndfile z
d28 2
a29 1
MODULES =	x11/qt4
a36 2
BUILD_DEPENDS =	devel/cmake

d42 6
a47 1
ALL_TARGET =	release
@


1.8
log
@Mark BROKEN-hppa, ICE on moc_qtsingleapplication.cxx and it never built
there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/06/22 03:33:39 bcallah Exp $
d7 1
a7 1
REVISION =	2
@


1.7
log
@Move x11/qt4 from LIB_DEPENDS to MODULES and regen WANTLIB.
Bump REVISION.
ok sthen@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.6 2013/06/21 15:13:46 sthen Exp $
@


1.6
log
@Add more specific information about why this uses ports gcc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/04/22 14:42:45 sthen Exp $
d5 1
a5 1
REVISION =	1
d19 4
a22 3
WANTLIB += c m portaudio pthread sndfile sndio z
WANTLIB += QtCore QtDesigner QtGui QtNetwork QtScript
WANTLIB += QtScriptTools QtSvg QtWebKit QtXml QtXmlPatterns
d26 2
d36 1
a36 2
LIB_DEPENDS =	x11/qt4 \
		audio/portaudio-svn \
@


1.5
log
@switch from @@unexec to @@unexec-delete for update-desktop-database, as done
for most other ports. ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/28 13:40:24 sthen Exp $
d25 2
a26 2
# We get an internal compiler error: Segmentation Fault with
# in-base gcc, so use gcc 4.6
@


1.4
log
@add MuseScore to COMMENT to make this easier to find by name. ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/03/10 22:55:04 espie Exp $
d5 1
a5 1
REVISION =	0
@


1.3
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/03/06 20:37:56 bcallah Exp $
d3 1
a3 1
COMMENT =	WYSIWYG music notation software
d5 1
@


1.2
log
@Update audio/mscore to 1.3
Add DISTNAME to SUBST_VARS to make less PLIST churn for subsequent updates.
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/02/01 06:26:48 bcallah Exp $
a16 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d39 1
a39 1
NO_REGRESS =	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
DISTNAME =	mscore-1.2
d7 1
d21 1
a21 1
WANTLIB += c m portaudio pthread sndfile sndio stdc++ z
d26 6
@


1.1.1.1
log
@Import audio/mscore, a WYSIWYG music notation program, similar to Finale or Sibelius.

ok landry@@ aja@@
@
text
@@
