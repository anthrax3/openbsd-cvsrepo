head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_2:1.1.1.1.0.26
	OPENBSD_6_2_BASE:1.1.1.1
	OPENBSD_6_1:1.1.1.1.0.24
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.22
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.18
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.20
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.16
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.14
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.12
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.10
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.8
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.6
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.4
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	dcoppa_20110720:1.1.1.1
	dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2011.07.20.07.54.58;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.07.20.07.54.58;	author dcoppa;	state Exp;
branches;
next	;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$
--- zeya.py.orig	Tue Sep 21 08:13:42 2010
+++ zeya.py	Mon Jul 11 18:59:16 2011
@@@@ -50,6 +50,10 @@@@ try:
 except (ImportError, AttributeError):
     import simplejson as json
 
+modules_dir = '${TRUEPREFIX}/lib/zeya'
+
+sys.path.append(modules_dir)
+
 import backends
 import decoders
 import options
@@@@ -347,7 +351,7 @@@@ def run_server(backend, bind_address, port, bitrate, b
                'playlists': playlists }
 
     library_repr = json.dumps(output, ensure_ascii=False)
-    basedir = os.path.abspath(os.path.dirname(os.path.realpath(sys.argv[0])))
+    basedir = modules_dir
 
     auth_data = None
     if basic_auth_file is not None:
@@@@ -357,7 +361,7 @@@@ def run_server(backend, bind_address, port, bitrate, b
             auth_data[s_user] = s_pass
     zeya_handler = ZeyaHandler(backend,
                                library_repr,
-                               os.path.join(basedir, 'resources'),
+                               '${TRUEPREFIX}/share/zeya',
                                bitrate,
                                auth_type=NO_AUTH if basic_auth_file is None else BASIC_AUTH,
                                auth_data=auth_data,
@


1.1.1.1
log
@Re-import zeya, this time with correct name.

ok ajacoutot@@, sthen@@, rpointel@@
@
text
@@
