head	1.4;
access;
symbols
	OPENBSD_5_3:1.3.0.14
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.12
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.10
	OPENBSD_5_0:1.3.0.8
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2013.03.29.12.37.43;	author sthen;	state dead;
branches;
next	1.3;

1.3
date	2009.12.24.10.34.43;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2009.10.15.15.44.50;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2008.12.26.08.45.12;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update to FluidSynth 1.1.6

- disable jack dependency, it doesn't work (noticed by Jan Stary)

- add a note explaining that you need a soundfount and point people
at the generaluser-gs-soundfont package
@
text
@--- src/fluid_mdriver.c.orig	Sun Mar  8 21:31:02 2009
+++ src/fluid_mdriver.c	Wed Dec 23 01:32:21 2009
@@@@ -46,6 +46,15 @@@@ fluid_midi_driver_t *new_fluid_jack_midi_driver (fluid
 int delete_fluid_jack_midi_driver(fluid_midi_driver_t *p);
 #endif
 
+/* SNDIO */
+#if SNDIO_SUPPORT
+fluid_midi_driver_t* new_fluid_sndio_midi_driver(fluid_settings_t* settings,
+					     handle_midi_event_func_t handler,
+					     void* event_handler_data);
+int delete_fluid_sndio_midi_driver(fluid_midi_driver_t* p);
+void fluid_sndio_midi_driver_settings(fluid_settings_t* settings);
+#endif
+
 /* OSS */
 #if OSS_SUPPORT
 fluid_midi_driver_t* new_fluid_oss_midi_driver(fluid_settings_t* settings,
@@@@ -96,6 +105,12 @@@@ struct fluid_mdriver_definition_t {
 
 
 struct fluid_mdriver_definition_t fluid_midi_drivers[] = {
+#if SNDIO_SUPPORT
+  { "sndio",
+    new_fluid_sndio_midi_driver,
+    delete_fluid_sndio_midi_driver,
+    fluid_sndio_midi_driver_settings },
+#endif
 #if JACK_SUPPORT
   { "jack",
     new_fluid_jack_midi_driver,
@@@@ -146,7 +161,9 @@@@ void fluid_midi_driver_settings(fluid_settings_t* sett
   int i;
 
   /* Set the default driver */
-#if ALSA_SUPPORT
+#if SNDIO_SUPPORT
+  fluid_settings_register_str(settings, "midi.driver", "sndio", 0, NULL, NULL);
+#elif ALSA_SUPPORT
   fluid_settings_register_str(settings, "midi.driver", "alsa_seq", 0, NULL, NULL);
 #elif JACK_SUPPORT
   fluid_settings_register_str(settings, "midi.driver", "jack", 0, NULL, NULL);
@@@@ -166,6 +183,9 @@@@ void fluid_midi_driver_settings(fluid_settings_t* sett
 #if ALSA_SUPPORT
   fluid_settings_add_option(settings, "midi.driver", "alsa_seq");
   fluid_settings_add_option(settings, "midi.driver", "alsa_raw");
+#endif
+#if SNDIO_SUPPORT
+  fluid_settings_add_option(settings, "midi.driver", "sndio");
 #endif
 #if JACK_SUPPORT
   fluid_settings_add_option(settings, "midi.driver", "jack");
@


1.3
log
@make sndio audio and midi drivers the default.  remove patch to use
jackd default sample rate by default.  use SIO_LE_NATIVE.
@
text
@@


1.2
log
@- update to 1.0.9
- inlude sndio(7) midi support from ratchov@@
- 'libsndio' -> 'sndio' renaming throughout
- completely disable OSS support
@
text
@d2 1
a2 1
+++ src/fluid_mdriver.c	Tue Oct 13 21:12:59 2009
d19 4
a22 4
@@@@ -118,6 +127,12 @@@@ struct fluid_mdriver_definition_t fluid_midi_drivers[]
     delete_fluid_alsa_seq_driver,
     fluid_alsa_seq_driver_settings },
 #endif
d29 13
a41 4
 #if WINMIDI_SUPPORT
   { "winmidi",
     new_fluid_winmidi_driver,
@@@@ -152,6 +167,8 @@@@ void fluid_midi_driver_settings(fluid_settings_t* sett
a42 7
 #elif OSS_SUPPORT
   fluid_settings_register_str(settings, "midi.driver", "oss", 0, NULL, NULL);
+#elif SNDIO_SUPPORT
+  fluid_settings_register_str(settings, "midi.driver", "sndio", 0, NULL, NULL);
 #elif WINMIDI_SUPPORT
   fluid_settings_register_str(settings, "midi.driver", "winmidi", 0, NULL, NULL);
 #elif MIDISHARE_SUPPORT
@


1.1
log
@- add sndio backend
- drop OSS audio support but keep "OSS" midi support
@
text
@d1 4
a4 4
$OpenBSD$
--- src/fluid_mdriver.c.orig	Sat Dec 20 17:42:12 2008
+++ src/fluid_mdriver.c	Sat Dec 20 17:43:01 2008
@@@@ -38,13 +38,13 @@@@ void fluid_alsa_seq_driver_settings(fluid_settings_t* 
d7 9
d17 1
a17 2
-#if OSS_SUPPORT
+/* #if OSS_SUPPORT */
d19 10
a28 8
 					     handle_midi_event_func_t handler,
 					     void* event_handler_data);
 int delete_fluid_oss_midi_driver(fluid_midi_driver_t* p);
 void fluid_oss_midi_driver_settings(fluid_settings_t* settings);
-#endif
+/* #endif */
 
 /* Windows MIDI service */
d30 12
a41 12
@@@@ -78,12 +78,12 @@@@ struct fluid_mdriver_definition_t {
 
 
 struct fluid_mdriver_definition_t fluid_midi_drivers[] = {
-#if OSS_SUPPORT
+/* #if OSS_SUPPORT */
   { "oss",
     new_fluid_oss_midi_driver,
     delete_fluid_oss_midi_driver,
     fluid_oss_midi_driver_settings },
-#endif
+/* #endif */
d43 8
a50 2
   { "alsa_raw",
     new_fluid_alsa_rawmidi_driver,
@

