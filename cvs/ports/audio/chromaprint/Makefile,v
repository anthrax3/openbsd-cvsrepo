head	1.7;
access;
symbols
	OPENBSD_6_1:1.5.0.4
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	zhuk_20130205:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2017.07.16.19.18.48;	author espie;	state Exp;
branches;
next	1.6;
commitid	tt0GhWK5c4uf9ILG;

1.6
date	2017.04.10.11.45.22;	author sthen;	state Exp;
branches;
next	1.5;
commitid	XDh1zlSBq0boKsHk;

1.5
date	2016.03.18.23.12.15;	author naddy;	state Exp;
branches;
next	1.4;
commitid	KZAl4KEiw6a3Jixw;

1.4
date	2015.07.18.14.33.49;	author jasper;	state Exp;
branches;
next	1.3;
commitid	GeHaQG13EBk8leMA;

1.3
date	2014.05.09.09.00.19;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.10.22.55.01;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.05.11.09.11;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.02.05.11.09.11;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.7
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.6 2017/04/10 11:45:22 sthen Exp $

COMMENT =		audio fingerprint extraction library

DISTNAME =		chromaprint-1.1
CATEGORIES =		audio devel
HOMEPAGE =		https://acoustid.org/chromaprint/
MASTER_SITES =		https://bitbucket.org/acoustid/chromaprint/downloads/

SHARED_LIBS =		chromaprint               1.0 # 0.1

# LGPL2.1+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += avcodec avformat avutil c m pthread ${COMPILER_LIBCXX} swresample

MODULES =		devel/cmake

BUILD_DEPENDS =		audio/taglib \
			devel/boost

LIB_DEPENDS =		graphics/ffmpeg

# gtest presence is checked in configure stage, so this cannot be in TEST_DEPENDS
BUILD_DEPENDS +=	devel/gtest
CONFIGURE_ARGS =	-DBUILD_TESTS:Bool=Yes -DBUILD_EXAMPLES=ON

post-patch:
	sed -i 's,/usr/local,${LOCALBASE},' \
		${WRKSRC}/cmake/modules/FindGTest.cmake

do-test:
	cd ${WRKBUILD}/tests && ./all_tests

.include <bsd.port.mk>
@


1.6
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/03/18 23:12:15 naddy Exp $
d15 1
a15 1
WANTLIB += avcodec avformat avutil c m pthread ${LIBCXX} swresample
@


1.5
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/07/18 14:33:49 jasper Exp $
d15 1
a15 1
WANTLIB += avcodec avformat avutil c m pthread stdc++ swresample
@


1.4
log
@use sed instead of perl
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.3 2014/05/09 09:00:19 sthen Exp $

SHARED_ONLY =		Yes
@


1.3
log
@Update to chromaprint 1.1, and build the fpcalc tool. From Nils R with
a few tweaks by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/03/10 22:55:01 espie Exp $
d31 2
a32 2
	perl -pi -e 's,/usr/local,${LOCALBASE},' \
	    ${WRKSRC}/cmake/modules/FindGTest.cmake
@


1.2
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/02/05 11:09:11 zhuk Exp $
d4 1
d6 2
d9 2
a10 2
HOMEPAGE =		http://acoustid.org/chromaprint/
DISTNAME =		chromaprint-0.6
d12 1
a12 4
MASTER_SITES =		http://www.ohvost.ru/dnl/ \
			http://malcolm.ecentrum.hu/distfiles/

SHARED_LIBS =		chromaprint		0.0  # 0.1
d17 1
a17 1
WANTLIB =		avcodec avutil m stdc++
d28 5
a32 1
CONFIGURE_ARGS =	-DBUILD_TESTS:Bool=Yes
d35 1
a35 1
	cd ${WRKBUILD}/tests && ${MAKE_PROGRAM} check
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a14 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d25 1
a25 1
# gtest presence is checked in configure stage, so this cannot be in REGRESS_DEPENDS
d29 1
a29 1
do-regress:
@


1.1.1.1
log
@Chromaprint is the core component of the Acoustid project. It's a
client-side library that implements a custom algorithm for extracting
fingerprints from any audio source.

This is another prerequisite of Clemetine.

okay landry@@
@
text
@@
