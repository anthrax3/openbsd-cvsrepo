head	1.2;
access;
symbols
	OPENBSD_4_3:1.1.0.4
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.2
	OPENBSD_4_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.04.02.00.39.19;	author fgsch;	state dead;
branches;
next	1.1;

1.1
date	2007.06.29.06.05.46;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update audacious and audacious-plugins to 1.5.0; with and ok jakemsr@@
some changes were submitted for inclusion.
@
text
@$OpenBSD: patch-src_aac_src_libmp4_c,v 1.1 2007/06/29 06:05:46 jakemsr Exp $
--- src/aac/src/libmp4.c.orig	Thu May 31 17:12:45 2007
+++ src/aac/src/libmp4.c	Thu May 31 17:20:57 2007
@@@@ -388,13 +388,13 @@@@ static TitleInput *mp4_get_song_tuple(char *fn)
         gint mp4track= getAACTrack(mp4file);
         gint numSamples = mp4ff_num_samples(mp4file, mp4track);
         guint framesize = 1024;
-        gulong samplerate;
-        guchar channels;
+        guint32 samplerate;
+        guint8 channels;
         gint msDuration;
         mp4AudioSpecificConfig mp4ASC;
         gchar *tmpval;
-        guchar *buffer = NULL;
-        guint bufferSize = 0;
+        guint8 *buffer = NULL;
+        guint32 bufferSize = 0;
         faacDecHandle decoder;
 
         if (mp4track == -1)
@@@@ -525,10 +525,10 @@@@ static int my_decode_mp4( InputPlayback *playback, cha
     gint mp4track= getAACTrack(mp4file);
     faacDecHandle   decoder;
     mp4AudioSpecificConfig mp4ASC;
-    guchar      *buffer = NULL;
-    guint       bufferSize = 0;
-    gulong      samplerate;
-    guchar      channels;
+    guint8      *buffer = NULL;
+    guint32       bufferSize = 0;
+    guint32      samplerate;
+    guint8      channels;
     gulong      msDuration;
     gulong      numSamples;
     gulong      sampleID = 1;
@@@@ -674,11 +674,11 @@@@ static int my_decode_mp4( InputPlayback *playback, cha
 void my_decode_aac( InputPlayback *playback, char *filename, VFSFile *file )
 {
     faacDecHandle   decoder = 0;
-    guchar      streambuffer[BUFFER_SIZE];
+    guint8      streambuffer[BUFFER_SIZE];
     gulong      bufferconsumed = 0;
-    gulong      samplerate = 0;
-    guchar      channels;
-    gulong      buffervalid = 0;
+    guint32      samplerate = 0;
+    guint8      channels;
+    guint32      buffervalid = 0;
     TitleInput* input;
     gchar       *ttemp = NULL, *stemp = NULL;
     gchar       *temp = g_strdup(filename);
@


1.1
log
@- use exact width data types for libfaad interaction
- LIB_DEPENDS libfaad >= 1.0
- bump PKGNAME-main

OK naddy@@
@
text
@d1 1
a1 1
$OpenBSD$
@

