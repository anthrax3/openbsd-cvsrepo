head	1.4;
access;
symbols
	OPENBSD_2_8:1.3.0.6
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.4
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	tosha:1.1.1.1
	angelos:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2001.03.14.15.04.11;	author naddy;	state dead;
branches;
next	1.3;

1.3
date	99.08.17.03.09.23;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.01.04.05.28.48;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.05.21.01.18.13;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.05.21.01.18.13;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- /dev/dsp -> /dev/sound
- /etc -> SYSCONFDIR
- add proper INSTALL/DEINSTALL scripts
- rename and regen patches
- misc clean-ups
@
text
@--- Makefile.orig	Wed Dec 16 07:34:09 1998
+++ Makefile	Mon Aug 16 22:44:57 1999
@@@@ -5,10 +5,10 @@@@
 #   @@(#)$Id: patch-aa,v 1.3 1999/08/17 03:09:23 brad Exp $
 #
 
-PREFIX?=/usr/local
 BINDIR=$(PREFIX)/bin
-ETCDIR=$(PREFIX)/etc
 MANDIR=$(PREFIX)/man
+LIBDIR=$(PREFIX)/lib/tosha
+ETCDIR=/etc
 
 ###################################################
 ######                                       ######
@@@@ -16,18 +16,8 @@@@
 ######                                       ######
 ###################################################
 
-CFLAGS?=-O2
 CFLAGS+=-Wall -ansi -DGLOBAL_ETC_DIR=\"$(ETCDIR)\"
 
-.if (exists(/usr/include/camlib.h))
-CFLAGS+=-DCAM
-LDFLAGS=-lcam
-.else
-LDFLAGS=-lscsi
-.endif
-
-GZIP_CMD?=gzip -9
-
 BINS=tosha pcmplay pcmfade
 OBJS=utils.o getlopt.o tosha.o toscsi.o toform.o toconf.o pcmplay.o pcmfade.o
 
@@@@ -43,25 +33,22 @@@@
 pcmfade.o:	pcmfade.c utils.h
 
 tosha:	tosha.o toscsi.o toform.o toconf.o utils.o getlopt.o
-	$(CC) $(CFLAGS) -o tosha \
-	    tosha.o toscsi.o toform.o toconf.o utils.o getlopt.o $(LDFLAGS)
+	$(CC) $(CFLAGS) -o tosha tosha.o toscsi.o toform.o toconf.o \
+		utils.o getlopt.o -lutil -lossaudio
 
 pcmplay:	pcmplay.o utils.o getlopt.o
-	$(CC) $(CFLAGS) -o pcmplay pcmplay.o utils.o getlopt.o
+	$(CC) $(CFLAGS) -o pcmplay pcmplay.o utils.o getlopt.o -lossaudio
 
 pcmfade:	pcmfade.o utils.o
 	$(CC) $(CFLAGS) -o pcmfade pcmfade.o utils.o
 
 install:	$(BINS)
 	strip $(BINS)
-	install -s -g bin -o bin -m 755 $(BINS) $(BINDIR)
-	install -c -g bin -o bin -m 644 tosharc $(ETCDIR)
-	install -c -g bin -o bin -m 644 tosha.1 pcmplay.1 pcmfade.1 \
+	install -s -o root -g bin -m 755 $(BINS) $(BINDIR)
+	install -d -o root -g wheel -m 755 $(LIBDIR)
+	install -c -o root -g wheel -m 644 tosharc $(LIBDIR)/tosharc.sample
+	install -c -o root -g wheel -m 644 tosha.1 pcmplay.1 pcmfade.1 \
 		$(MANDIR)/man1
-.if !defined(NOMANCOMPRESS)
-	cd $(MANDIR)/man1 ; \
-	$(GZIP_CMD) tosha.1 pcmplay.1 pcmfade.1
-.endif
 
 clean:
 	rm -f $(OBJS) *core $(BINS)
@


1.3
log
@- style
- respect CFLAGS
@
text
@d4 1
a4 1
 #   @@(#)$Id: Makefile,v 1.3 1998/12/16 12:34:09 olli Exp $
@


1.2
log
@update to 0.6; John H Darrah <jhd@@giddens.com>
@
text
@d1 2
a2 2
--- Makefile.orig	Wed Dec 16 04:34:09 1998
+++ Makefile	Sat Jan  2 17:04:51 1999
d16 1
a16 1
@@@@ -16,17 +16,7 @@@@
d21 2
a22 2
-CFLAGS+=-Wall -ansi -DGLOBAL_ETC_DIR=\"$(ETCDIR)\"
-
d31 1
a31 2
+CFLAGS=-O2 -ansi -DGLOBAL_ETC_DIR=\"$(ETCDIR)\"
 
d34 1
@


1.1
log
@Initial revision
@
text
@d1 67
a67 58
*** Makefile.orig	Tue May 20 19:57:17 1997
--- Makefile	Wed Apr 29 01:51:01 1998
***************
*** 5,11 ****
  #   Wed May 21 01:51:37 MET DST 1997
  #
  
- PREFIX=/usr/local
  BINDIR=$(PREFIX)/bin
  MANDIR=$(PREFIX)/man
  SECTION=1
--- 5,10 ----
***************
*** 16,22 ****
  ######                                       ######
  ###################################################
  
! CFLAGS=-O2 -Wall -ansi
  # CFLAGS=-g -Wall -ansi -pedantic
  
  all:	tosha pcmplay pcmfade
--- 15,21 ----
  ######                                       ######
  ###################################################
  
! # CFLAGS=-O2 -Wall -ansi
  # CFLAGS=-g -Wall -ansi -pedantic
  
  all:	tosha pcmplay pcmfade
***************
*** 28,34 ****
  pcmfade.o:	pcmfade.c utils.h
  
  tosha:	tosha.o utils.o getlopt.o
! 	$(CC) $(CFLAGS) -o tosha -lscsi tosha.o utils.o getlopt.o
  
  pcmplay:	pcmplay.o utils.o getlopt.o
! 	$(CC) $(CFLAGS) -o pcmplay pcmplay.o utils.o getlopt.o
--- 27,33 ----
  pcmfade.o:	pcmfade.c utils.h
  
  tosha:	tosha.o utils.o getlopt.o
! 	$(CC) $(CFLAGS) -o tosha tosha.o utils.o getlopt.o -lutil -lossaudio
  
  pcmplay:	pcmplay.o utils.o getlopt.o
! 	$(CC) $(CFLAGS) -o pcmplay pcmplay.o utils.o getlopt.o -lossaudio
***************
*** 40,48 ****
  	install -s -g bin -o bin -m 755 tosha pcmplay pcmfade $(BINDIR)
  	install -c -g bin -o bin -m 644 tosha.1 pcmplay.1 pcmfade.1 \
  		$(MANDIR)/man$(SECTION)
- 	gzip -f -9 $(MANDIR)/man$(SECTION)/tosha.1 \
- 		$(MANDIR)/man$(SECTION)/pcmplay.1 \
- 		$(MANDIR)/man$(SECTION)/pcmfade.1
  
  clean:
  	rm -f *.o *~ *core tosha pcmplay pcmfade
--- 39,44 ----
@


1.1.1.1
log
@tosha port
@
text
@@
