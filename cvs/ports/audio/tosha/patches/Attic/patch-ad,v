head	1.2;
access;
symbols
	OPENBSD_2_8:1.1.0.6
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.4
	OPENBSD_2_7_BASE:1.1
	OPENBSD_2_6:1.1.0.2
	OPENBSD_2_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2001.03.14.15.04.12;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	99.07.23.11.12.59;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- /dev/dsp -> /dev/sound
- /etc -> SYSCONFDIR
- add proper INSTALL/DEINSTALL scripts
- rename and regen patches
- misc clean-ups
@
text
@--- toscsi.c.orig	Sat Jan  2 00:57:46 1999
+++ toscsi.c	Fri Jul 23 12:17:12 1999
@@@@ -182,6 +182,16 @@@@
 				(char *) buf, SCCMD_READ,
 				"v 0 0 v:i3 0 0 0 v 0 0",
 				readcmd, sec, secread);
+		else if (readcmd == 0xbe)
+			/*
+			 * Actually the ATAPI read command, but as OpenBSD
+			 * now can attach ATAPI CDs through the SCSI layer,
+			 * this is good to support.
+			 */
+			scsireq_build (hdl->sreq, SECTORSIZE * secread,
+				(char *) buf, SCCMD_READ,
+				"v 4 0 v:i3 0 0 v 0xf8",
+				readcmd, sec, secread);
 		else
 			scsireq_build (hdl->sreq, SECTORSIZE * secread,
 				(char *) buf, SCCMD_READ,
@


1.1
log
@Support ATAPI read CD command, as that is usable with the new atapiscsi work
@
text
@@

