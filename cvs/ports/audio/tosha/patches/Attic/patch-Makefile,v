head	1.3;
access;
symbols
	OPENBSD_4_7:1.2.0.28
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.26
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.24
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.22
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.20
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.18
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.16
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.14
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.12
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.10
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.8
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.0.10
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.8
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.6
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2010.05.09.18.00.30;	author jakemsr;	state dead;
branches;
next	1.2;

1.2
date	2003.08.09.17.39.16;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.14.15.04.11;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- cdio(1) in base can do what tosha does, and more
- aucat(1) in base can do what waveplay does, and more
bye bye to tosha and waveplay
ok landry@@
@
text
@$OpenBSD: patch-Makefile,v 1.2 2003/08/09 17:39:16 pvalchev Exp $
--- Makefile.orig	1998-12-16 05:34:09.000000000 -0700
+++ Makefile	2003-08-09 11:40:17.000000000 -0600
@@@@ -5,10 +5,10 @@@@
 #   @@(#)$Id: patch-Makefile,v 1.2 2003/08/09 17:39:16 pvalchev Exp $
 #
 
-PREFIX?=/usr/local
 BINDIR=$(PREFIX)/bin
-ETCDIR=$(PREFIX)/etc
 MANDIR=$(PREFIX)/man
+SAMPLEDIR=$(PREFIX)/share/examples/tosha
+ETCDIR=$(SYSCONFDIR)
 
 ###################################################
 ######                                       ######
@@@@ -16,52 +16,40 @@@@ MANDIR=$(PREFIX)/man
 ######                                       ######
 ###################################################
 
-CFLAGS?=-O2
-CFLAGS+=-Wall -ansi -DGLOBAL_ETC_DIR=\"$(ETCDIR)\"
-
-.if (exists(/usr/include/camlib.h))
-CFLAGS+=-DCAM
-LDFLAGS=-lcam
-.else
-LDFLAGS=-lscsi
-.endif
-
-GZIP_CMD?=gzip -9
+CFLAGS+= -DGLOBAL_ETC_DIR=\"$(ETCDIR)\"
 
 BINS=tosha pcmplay pcmfade
-OBJS=utils.o getlopt.o tosha.o toscsi.o toform.o toconf.o pcmplay.o pcmfade.o
+OBJS=utils.o getlopt.o tosha.o libscsi.o toscsi.o toform.o toconf.o pcmplay.o pcmfade.o
 
 all:	$(BINS)
 
 utils.o:	utils.c utils.h
 getlopt.o:	getlopt.c getlopt.h
 tosha.o:	tosha.c global.h toscsi.h toform.h toconf.h utils.h getlopt.h
+libscsi.o:	libscsi.c libscsi.h
 toscsi.o:	toscsi.c global.h toscsi.h utils.h
 toform.o:	toform.c global.h toform.h utils.h
 toconf.o:	toconf.c global.h toconf.h utils.h
 pcmplay.o:	pcmplay.c utils.h getlopt.h
 pcmfade.o:	pcmfade.c utils.h
 
-tosha:	tosha.o toscsi.o toform.o toconf.o utils.o getlopt.o
-	$(CC) $(CFLAGS) -o tosha \
-	    tosha.o toscsi.o toform.o toconf.o utils.o getlopt.o $(LDFLAGS)
+tosha:	tosha.o libscsi.o toscsi.o toform.o toconf.o utils.o getlopt.o
+	$(CC) $(CFLAGS) -o tosha tosha.o libscsi.o toscsi.o toform.o toconf.o \
+		utils.o getlopt.o -lossaudio
 
 pcmplay:	pcmplay.o utils.o getlopt.o
-	$(CC) $(CFLAGS) -o pcmplay pcmplay.o utils.o getlopt.o
+	$(CC) $(CFLAGS) -o pcmplay pcmplay.o utils.o getlopt.o -lossaudio
 
 pcmfade:	pcmfade.o utils.o
 	$(CC) $(CFLAGS) -o pcmfade pcmfade.o utils.o
 
 install:	$(BINS)
 	strip $(BINS)
-	install -s -g bin -o bin -m 755 $(BINS) $(BINDIR)
-	install -c -g bin -o bin -m 644 tosharc $(ETCDIR)
-	install -c -g bin -o bin -m 644 tosha.1 pcmplay.1 pcmfade.1 \
+	install -s -o root -g bin -m 755 $(BINS) $(BINDIR)
+	install -d -o root -g wheel -m 755 $(SAMPLEDIR)
+	install -c -o root -g wheel -m 644 tosharc $(SAMPLEDIR)/tosharc.sample
+	install -c -o root -g wheel -m 644 tosha.1 pcmplay.1 pcmfade.1 \
 		$(MANDIR)/man1
-.if !defined(NOMANCOMPRESS)
-	cd $(MANDIR)/man1 ; \
-	$(GZIP_CMD) tosha.1 pcmplay.1 pcmfade.1
-.endif
 
 clean:
 	rm -f $(OBJS) *core $(BINS)
@


1.2
log
@no longer broken, use private libscsi copy
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.1 2001/03/14 15:04:11 naddy Exp $
d5 1
a5 1
 #   @@(#)$Id: Makefile,v 1.3 1998/12/16 12:34:09 olli Exp $
@


1.1
log
@- /dev/dsp -> /dev/sound
- /etc -> SYSCONFDIR
- add proper INSTALL/DEINSTALL scripts
- rename and regen patches
- misc clean-ups
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.orig	Wed Dec 16 13:34:09 1998
+++ Makefile	Wed Mar 14 15:55:55 2001
d17 1
a17 1
@@@@ -16,17 +16,7 @@@@ MANDIR=$(PREFIX)/man
d35 13
a47 2
 OBJS=utils.o getlopt.o tosha.o toscsi.o toform.o toconf.o pcmplay.o pcmfade.o
@@@@ -43,25 +33,22 @@@@ pcmplay.o:	pcmplay.c utils.h getlopt.h
d50 1
a50 1
 tosha:	tosha.o toscsi.o toform.o toconf.o utils.o getlopt.o
d53 3
a55 2
+	$(CC) $(CFLAGS) -o tosha tosha.o toscsi.o toform.o toconf.o \
+		utils.o getlopt.o -lutil -lossaudio
@

