head	1.6;
access;
symbols
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2009.10.28.18.40.13;	author jakemsr;	state dead;
branches;
next	1.5;

1.5
date	2009.03.14.03.49.43;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.11.09.29.36;	author jakemsr;	state dead;
branches;
next	1.3;

1.3
date	2008.03.24.05.31.48;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2007.12.08.11.08.38;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.11.23.10.07.41;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to 1.3.9.  mostly bugfixes.
ok sthen@@
@
text
@$OpenBSD: patch-src_AudioIO_cpp,v 1.5 2009/03/14 03:49:43 jakemsr Exp $
--- src/AudioIO.cpp.orig	Mon Mar  9 01:08:36 2009
+++ src/AudioIO.cpp	Mon Mar  9 01:14:48 2009
@@@@ -2053,7 +2053,6 @@@@ wxString AudioIO::GetDeviceInfo()
       s << wxT("Cannot check mutual sample rates without both devices.") << e;
       return o.GetString();
    }
-
 #if defined(USE_PORTMIXER)
    if (supportedSampleRates.GetCount() > 0)
       {
@@@@ -2201,7 +2200,7 @@@@ wxString AudioIO::GetDeviceInfo()
       Px_CloseMixer(PortMixer);
 
 #endif
-      }  //end of massive if statement if a valid sample rate has been found
+      // }  //end of massive if statement if a valid sample rate has been found
    return o.GetString();
 }
 
@


1.5
log
@update to audacity-1.3.7
@
text
@d1 1
a1 1
$OpenBSD$
@


1.4
log
@update to audacity-1.3.6
- lots of bugs fixed (though importing Ogg and Flac formats is still
broken)
- now uses external vamp-plugin-sdk
@
text
@d1 13
a13 9
$OpenBSD: patch-src_AudioIO_cpp,v 1.3 2008/03/24 05:31:48 jakemsr Exp $
--- src/AudioIO.cpp.orig	Sun Mar  2 02:32:09 2008
+++ src/AudioIO.cpp	Sun Mar  2 02:33:50 2008
@@@@ -490,7 +490,7 @@@@ void AudioIO::HandleDeviceChange()
    if( error )
       return;
 
-   mPortMixer = Px_OpenMixer(stream, 0);
+   mPortMixer = Px_OpenMixer(stream, recDeviceNum);
d15 5
a19 12
    if (!mPortMixer) {
       Pa_CloseStream(stream);
@@@@ -1516,7 +1516,7 @@@@ wxArrayLong AudioIO::GetSupportedCaptureRates(wxString
    
    for (i = 0; i < NumStandardRates; i++)
    {
-      if (Pa_IsFormatSupported(NULL, &pars, StandardRates[i]) == 0)
+      if (Pa_IsFormatSupported(&pars, NULL, StandardRates[i]) == 0)
       {
          supported.Add(StandardRates[i]);
       }
@@@@ -1524,7 +1524,7 @@@@ wxArrayLong AudioIO::GetSupportedCaptureRates(wxString
a20 7
    if (irate != 0 && supported.Index(irate) == wxNOT_FOUND)
    {
-      if (Pa_IsFormatSupported(NULL, &pars, irate) == 0)
+      if (Pa_IsFormatSupported(&pars, NULL, irate) == 0)
       {
          supported.Add(irate);
       }
@


1.3
log
@- use the capture parameters argument instead of the playback
  parameters argument with Pa_IsFormatSupported() when checking if
  certain capture parameters are supported.
- take maintainership per former MAINTAINER's suggestion
@
text
@d1 1
a1 1
$OpenBSD: patch-src_AudioIO_cpp,v 1.2 2007/12/08 11:08:38 ajacoutot Exp $
@


1.2
log
@- update to 1.3.4

ok jakemsr@@
@
text
@d1 3
a3 3
$OpenBSD$
--- src/AudioIO.cpp.orig	Sat Nov 24 12:37:27 2007
+++ src/AudioIO.cpp	Sat Nov 24 12:39:46 2007
d13 18
@


1.1
log
@- make it use portaudio v19; i.e. full-duplex support!

committing on behalf of jakemsr@@ who did all the work
@
text
@d2 3
a4 3
--- src/AudioIO.cpp.orig	Thu May 17 21:55:57 2007
+++ src/AudioIO.cpp	Sun Oct 28 17:26:33 2007
@@@@ -479,7 +479,7 @@@@ void AudioIO::HandleDeviceChange()
a12 19
@@@@ -667,7 +667,8 @@@@ bool AudioIO::StartPortAudioStream(double sampleRate,
    }
    mPortMixer = NULL;
    if (mPortStreamV19 != NULL && mLastPaError == paNoError) {
-      mPortMixer = Px_OpenMixer(mPortStreamV19, 0);
+      mPortMixer = Px_OpenMixer(mPortStreamV19, captureParameters != NULL ?
+          captureParameters->device : playbackParameters->device);
 
       #ifdef __MACOSX__
       if (mPortMixer) {
@@@@ -770,7 +771,7 @@@@ bool AudioIO::StartPortAudioStream(double sampleRate,
    }
    mPortMixer = NULL;
    if (mPortStreamV18 != NULL && mLastPaError == paNoError) {
-      mPortMixer = Px_OpenMixer(mPortStreamV18, 0);
+      mPortMixer = Px_OpenMixer(mPortStreamV18, captureDevice);
 
       #ifdef __MACOSX__
       if (mPortMixer) {
@

