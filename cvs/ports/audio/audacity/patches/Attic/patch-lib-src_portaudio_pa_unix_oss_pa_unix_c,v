head	1.4;
access;
symbols
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.1.1.1.0.6
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.4
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.2
	OPENBSD_3_9_BASE:1.1.1.1
	steven-20060112:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2007.11.23.10.07.41;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2007.06.06.09.35.18;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.24.09.45.01;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2006.01.12.08.59.27;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.01.12.08.59.27;	author steven;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- make it use portaudio v19; i.e. full-duplex support!

committing on behalf of jakemsr@@ who did all the work
@
text
@$OpenBSD: patch-lib-src_portaudio_pa_unix_oss_pa_unix_c,v 1.3 2007/06/06 09:35:18 ajacoutot Exp $
--- lib-src/portaudio/pa_unix_oss/pa_unix.c.orig	Wed Mar 28 09:22:39 2007
+++ lib-src/portaudio/pa_unix_oss/pa_unix.c	Wed Mar 28 09:26:18 2007
@@@@ -399,6 +399,7 @@@@ static int PaHost_CanaryProc( PaHostSoundControl   *pa
     return result;
 }
 
+#if 0
 /*******************************************************************************************
  * Monitor audio thread and lower its it if it hogs the CPU.
  * To prevent getting killed, the audio thread must update a
@@@@ -598,6 +599,7 @@@@ static PaError PaHost_BoostPriority( internalPortAudio
 
     return result;
 }
+#endif  /* Watchdog */
 
 /*******************************************************************************************/
 static PaError Pa_AudioThreadProc( internalPortAudioStream   *past )
@@@@ -613,8 +615,10 @@@@ static PaError Pa_AudioThreadProc( internalPortAudioSt
     GSRegisterCurrentThread(); /* SB20010904 */
 #endif
 
+#if 0
     result = PaHost_BoostPriority( past );
     if( result < 0 ) goto error;
+#endif
 
     past->past_IsActive = 1;
     DBUG(("entering thread.\n"));
@@@@ -680,7 +684,9 @@@@ static PaError Pa_AudioThreadProc( internalPortAudioSt
     DBUG(("Pa_AudioThreadProc: left audio loop.\n"));
 
     past->past_IsActive = 0;
+#if 0
     PaHost_StopWatchDog( pahsc );
+#endif
 
 error:
     DBUG(("leaving audio thread.\n"));
@@@@ -810,7 +816,7 @@@@ PaError PaHost_OpenStream( internalPortAudioStream   *
                            past->past_NumUserBuffers, past->past_FramesPerUserBuffer,
                            past->past_NumOutputChannels );
             result = Pa_SetupDeviceFormat( pahsc->pahsc_OutputHandle,
-                                           past->past_NumOutputChannels, (int)past->past_SampleRate );
+                                           past->past_NumOutputChannels, (int)past->past_SampleRate, 2 );
         }
     }
     else
@


1.3
log
@- update audacity to latest version: 1.3.3
- add NO_REGRESS since regression tests have not been updated for more
than 3 years and upstream does not seem interested
- add a patch from deanna@@ that makes audacity use portaudio v19 and
make full duplex work (well sort of, but at least it does not hang
anymore)

ok deanna@@
@
text
@d1 1
a1 1
$OpenBSD: patch-lib-src_portaudio_pa_unix_oss_pa_unix_c,v 1.2 2007/05/24 09:45:01 ajacoutot Exp $
@


1.2
log
@- some cleaning:
fix .desktop entry and add desktop-file-utils as run_depends
add audacity.xpm
fix lib_depends/WANTLIB
regen and update PLIST accordingly
regen patches while here
@
text
@d1 3
a3 3
$OpenBSD: patch-lib-src_portaudio_pa_unix_oss_pa_unix_c,v 1.1.1.1 2006/01/12 08:59:27 steven Exp $
--- lib-src/portaudio/pa_unix_oss/pa_unix.c.orig	Sun Oct 29 01:05:50 2006
+++ lib-src/portaudio/pa_unix_oss/pa_unix.c	Thu May 24 11:02:17 2007
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- lib-src/portaudio/pa_unix_oss/pa_unix.c.orig	Thu Nov 18 07:17:34 2004
+++ lib-src/portaudio/pa_unix_oss/pa_unix.c	Tue Jan 11 08:56:46 2005
@@@@ -399,6 +399,7 @@@@ static int PaHost_CanaryProc( PaHostSoun
d12 1
a12 1
@@@@ -598,6 +599,7 @@@@ static PaError PaHost_BoostPriority( int
d20 1
a20 1
@@@@ -613,8 +615,10 @@@@ static PaError Pa_AudioThreadProc( inter
d31 1
a31 1
@@@@ -680,7 +684,9 @@@@ static PaError Pa_AudioThreadProc( inter
d41 1
a41 1
@@@@ -810,7 +816,7 @@@@ PaError PaHost_OpenStream( internalPortA
@


1.1.1.1
log
@initial import of audacity-1.2.4

Audacity is a free audio editor. You can record sounds, play sounds,
import and export WAV, AIFF, Ogg Vorbis, and MP3 files, and more. Use it
to edit your sounds using Cut, Copy and Paste (with unlimited Undo), mix
tracks together, or apply effects to your recordings.

Initial port and many patches by jakemsr@@. Thanks to maintainer
Antoine Jacoutot for persistence and keeping the port alive.

ok jakemsr@@
@
text
@@
