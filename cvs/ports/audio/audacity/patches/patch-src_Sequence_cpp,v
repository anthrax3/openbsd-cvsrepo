head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.28
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.24
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.26
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.22
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.20
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.18
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.16
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.14
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.12
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.10
	OPENBSD_5_0:1.6.0.8
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.6
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.4
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2009.10.28.18.40.13;	author jakemsr;	state Exp;
branches;
next	1.5;

1.5
date	2009.03.14.03.49.43;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.11.09.29.36;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2007.06.06.09.35.18;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.24.09.45.01;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.17.12.12.59;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to 1.3.9.  mostly bugfixes.
ok sthen@@
@
text
@$OpenBSD: patch-src_Sequence_cpp,v 1.5 2009/03/14 03:49:43 jakemsr Exp $
--- src/Sequence.cpp.orig	Mon Aug 31 03:45:39 2009
+++ src/Sequence.cpp	Sat Oct 17 14:29:54 2009
@@@@ -947,7 +947,8 @@@@ bool Sequence::Get(samplePtr buffer, sampleFormat form
                    sampleCount start, sampleCount len) const
 {
    if (start < 0 || start > mNumSamples ||
-       start+len > mNumSamples)
+       start+len > mNumSamples ||
+       (format != mSampleFormat) || !buffer)
       return false;
    int b = FindBlock(start);
 
@@@@ -981,6 +982,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
    if (format != mSampleFormat) {
       temp = NewSamples(mMaxSamples, mSampleFormat);
       wxASSERT(temp);
+      return false;
    }
 
    samplePtr silence = NULL;
@@@@ -988,6 +990,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
       silence = NewSamples(mMaxSamples, format);
       wxASSERT(silence);
       ClearSamples(silence, format, 0, mMaxSamples);
+      return false;
    }
 
    int b = FindBlock(start);
@


1.5
log
@update to audacity-1.3.7
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Sequence_cpp,v 1.4 2009/01/11 09:29:36 jakemsr Exp $
--- src/Sequence.cpp.orig	Tue Jan 27 12:50:58 2009
+++ src/Sequence.cpp	Tue Feb 10 03:21:35 2009
@@@@ -952,7 +952,8 @@@@ bool Sequence::Get(samplePtr buffer, sampleFormat form
d14 1
a14 1
@@@@ -986,6 +987,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
d22 1
a22 1
@@@@ -993,6 +995,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
@


1.4
log
@update to audacity-1.3.6
- lots of bugs fixed (though importing Ogg and Flac formats is still
broken)
- now uses external vamp-plugin-sdk
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Sequence_cpp,v 1.3 2007/06/06 09:35:18 ajacoutot Exp $
--- src/Sequence.cpp.orig	Sat Oct 25 05:14:27 2008
+++ src/Sequence.cpp	Thu Nov 13 15:24:26 2008
@@@@ -893,7 +893,8 @@@@ bool Sequence::Get(samplePtr buffer, sampleFormat form
d14 1
a14 1
@@@@ -927,6 +928,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
d22 1
a22 1
@@@@ -934,6 +936,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
@


1.3
log
@- update audacity to latest version: 1.3.3
- add NO_REGRESS since regression tests have not been updated for more
than 3 years and upstream does not seem interested
- add a patch from deanna@@ that makes audacity use portaudio v19 and
make full duplex work (well sort of, but at least it does not hang
anymore)

ok deanna@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Sequence_cpp,v 1.2 2007/05/24 09:45:01 ajacoutot Exp $
--- src/Sequence.cpp.orig	Wed Mar 28 09:53:34 2007
+++ src/Sequence.cpp	Wed Mar 28 09:55:16 2007
@@@@ -877,7 +877,8 @@@@ bool Sequence::Get(samplePtr buffer, sampleFormat form
d14 1
a14 1
@@@@ -911,6 +912,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
d22 1
a22 1
@@@@ -918,6 +920,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
@


1.2
log
@- some cleaning:
fix .desktop entry and add desktop-file-utils as run_depends
add audacity.xpm
fix lib_depends/WANTLIB
regen and update PLIST accordingly
regen patches while here
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Sequence_cpp,v 1.1 2006/12/17 12:12:59 ajacoutot Exp $
--- src/Sequence.cpp.orig	Sun Oct 29 01:05:27 2006
+++ src/Sequence.cpp	Thu May 24 11:02:18 2007
@@@@ -826,7 +826,8 @@@@ bool Sequence::Get(samplePtr buffer, sampleFormat form
d14 1
a14 1
@@@@ -860,6 +861,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
d22 1
a22 1
@@@@ -867,6 +869,7 @@@@ bool Sequence::Set(samplePtr buffer, sampleFormat form
@


1.1
log
@- update to version 1.3.2
big thanks to Martynas Venckus for his work on regression tests

"go ahead!" jasper@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/Sequence.cpp.orig	Sun Dec 10 13:12:31 2006
+++ src/Sequence.cpp	Sun Dec 10 13:13:10 2006
@@@@ -826,7 +826,8 @@@@ bool Sequence::Get(samplePtr buffer, sam
d14 1
a14 1
@@@@ -860,6 +861,7 @@@@ bool Sequence::Set(samplePtr buffer, sam
d22 1
a22 1
@@@@ -867,6 +869,7 @@@@ bool Sequence::Set(samplePtr buffer, sam
@

