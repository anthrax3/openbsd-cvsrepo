head	1.15;
access;
symbols
	OPENBSD_6_0:1.11.0.2
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.8.0.8
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.6
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.4
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.2
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.6.0.4
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	landry_20110609:1.1.1.1
	dwatteau:1.1.1;
locks; strict;
comment	@# @;


1.15
date	2017.02.18.10.19.10;	author jca;	state Exp;
branches;
next	1.14;
commitid	nq5XNovLswnpDnnj;

1.14
date	2017.02.18.10.17.35;	author jca;	state Exp;
branches;
next	1.13;
commitid	Fp7BTYKMz1VU3IoP;

1.13
date	2016.09.23.23.08.36;	author juanfra;	state Exp;
branches;
next	1.12;
commitid	Djhqo3CFiv3aRWIQ;

1.12
date	2016.09.12.11.45.57;	author naddy;	state Exp;
branches;
next	1.11;
commitid	Cnalk1Ujct5ZDcli;

1.11
date	2016.03.18.21.38.22;	author naddy;	state Exp;
branches;
next	1.10;
commitid	BVkebQSTXSZokeRG;

1.10
date	2016.01.17.01.16.38;	author juanfra;	state Exp;
branches;
next	1.9;
commitid	vDhhxDQWiaQMjGv5;

1.9
date	2015.07.18.14.33.49;	author jasper;	state Exp;
branches;
next	1.8;
commitid	GeHaQG13EBk8leMA;

1.8
date	2013.03.10.22.55.02;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2012.12.27.12.02.33;	author gonzalo;	state Exp;
branches;
next	1.6;

1.6
date	2011.12.20.16.00.26;	author shadchin;	state Exp;
branches;
next	1.5;

1.5
date	2011.10.02.14.11.55;	author rpointel;	state Exp;
branches;
next	1.4;

1.4
date	2011.09.18.13.27.53;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.16.08.26.10;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.06.07.19.29;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.09.06.07.10.56;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.09.06.07.10.56;	author landry;	state Exp;
branches;
next	;


desc
@@


1.15
log
@The ffmpeg plugin has a dep on libavcodec, register it.

from Donovan Watteau (maintainer)
@
text
@# $OpenBSD: Makefile,v 1.13 2016/09/23 23:08:36 juanfra Exp $

COMMENT-main=		ncurses-based music player
COMMENT-ffmpeg=		ffmpeg input plugin for cmus (.aac, .mp4...)

V=			2.7.1
DISTNAME=		cmus-${V}
PKGNAME-main=		${PKGNAME}
PKGNAME-ffmpeg=		cmus-ffmpeg-${V}
REVISION=		1

GH_ACCOUNT=		cmus
GH_PROJECT=		cmus
GH_TAGNAME=		v${V}

CATEGORIES=		audio
HOMEPAGE=		https://cmus.github.io/

MAINTAINER=		Donovan Watteau <tsoomi@@gmail.com>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

MULTI_PACKAGES=		-main -ffmpeg

WANTLIB-main+=		c cdio cdio_cdda cue discid FLAC>=5 m mad>=2 ncursesw
WANTLIB-main+=		ogg opusfile pthread sndio wavpack iconv

LIB_DEPENDS-main=	audio/flac \
			audio/libcdio \
			audio/libcue \
			audio/libdiscid \
			audio/libmad \
			audio/libogg \
			audio/opusfile \
			audio/wavpack \
			converters/libiconv

WANTLIB-ffmpeg=		avcodec avformat swresample
LIB_DEPENDS-ffmpeg=	graphics/ffmpeg
RUN_DEPENDS-ffmpeg=	audio/cmus

USE_GMAKE=		Yes

CONFIGURE_STYLE=	simple
CONFIGURE_ENV=		HOSTCC="${CC}" HOSTLD="${CC}" HOST_CFLAGS="${CFLAGS}"
CFLAGS+=		-Wno-system-headers
# Note: We're explicitly disabling CONFIG_CDDB as it gets undef'd in cdio.c
CONFIGURE_ARGS=		prefix=${PREFIX} \
			exampledir=${PREFIX}/share/examples/cmus \
			mandir=${PREFIX}/man \
			CONFIG_AAC=n \
			CONFIG_ALSA=n \
			CONFIG_AO=n \
			CONFIG_ARTS=n \
			CONFIG_CDDB=n \
			CONFIG_DISCID=y \
			CONFIG_FFMPEG=y \
			CONFIG_JACK=n \
			CONFIG_MODPLUG=n \
			CONFIG_MP4=n \
			CONFIG_MPC=n \
			CONFIG_OSS=n \
			CONFIG_PULSE=n \
			CONFIG_ROAR=n \
			CONFIG_SAMPLERATE=n \
			CONFIG_SNDIO=y \
			CONFIG_SUN=n \
			CONFIG_VTX=n

.if ${MACHINE_ARCH} == "arm"
CONFIGURE_ARGS+=	CONFIG_TREMOR=y
LIB_DEPENDS-main+=	audio/tremor
WANTLIB-main+=		vorbisidec>=1
.else
LIB_DEPENDS-main+=	audio/libvorbis
WANTLIB-main+=		vorbis>=0 vorbisfile>=1
.endif

NO_TEST=		Yes

pre-build:
	sed -i s,/usr,${LOCALBASE}, ${WRKSRC}/Doc/cmus.txt
	sed -i s,doc/cmus/examples,examples/cmus, ${WRKSRC}/Doc/cmus.txt

.include <bsd.port.mk>
@


1.14
log
@New HOMEPAGE.

from Donovan Watteau (maintainer)
@
text
@d10 1
a10 1
REVISION=		0
d39 1
a39 1
WANTLIB-ffmpeg=		avformat swresample
@


1.13
log
@Fix 24/32-bits output support. From MAINTAINER.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/09/12 11:45:57 naddy Exp $
d17 1
a17 1
HOMEPAGE=		http://cmus.sourceforge.net/
@


1.12
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/03/18 21:38:22 naddy Exp $
d10 1
d82 1
a82 1
pre-configure:
@


1.11
log
@remove SHARED_ONLY from simple ports that use the gettext or libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/01/17 01:16:38 juanfra Exp $
a24 2
MODULES=		converters/libiconv

d26 1
a26 1
WANTLIB-main+=		ogg opusfile pthread sndio wavpack ${MODLIBICONV_WANTLIB}
d35 2
a36 1
			audio/wavpack
@


1.10
log
@Update to cmus 2.7.1. From Donovan Watteau (MAINTAINER).
Tests and the updated quirks file by Florian Stinglmayr.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.9 2015/07/18 14:33:49 jasper Exp $

SHARED_ONLY=		Yes
@


1.9
log
@use sed instead of perl
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.8 2013/03/10 22:55:02 espie Exp $
d6 1
a6 2
COMMENT-flac=		FLAC input plugin for cmus
COMMENT-wavpack=	Wavpack input plugin for cmus
d8 8
a15 5
V=			2.5.0
DISTNAME=		cmus-v$(V)
PKGNAME-main=		cmus-$(V)
PKGNAME-flac=		cmus-flac-$(V)
PKGNAME-wavpack=	cmus-wavpack-$(V)
d18 1
a19 1
HOMEPAGE=		http://cmus.sourceforge.net/
d25 1
a25 5
EXTRACT_SUFX=		.tar.bz2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=cmus/}

SHARED_ONLY=		Yes
MULTI_PACKAGES=		-main -flac -wavpack
d29 2
a30 2
WANTLIB-main=		c cdio cdio_cdda cue m mad>=2 ncursesw pthread sndio
WANTLIB-main+=		${MODLIBICONV_WANTLIB}
d32 12
a43 8
LIB_DEPENDS=		audio/libcdio audio/libcue audio/libmad

LIB_DEPENDS-flac=	audio/flac audio/libogg
RUN_DEPENDS-flac=	audio/cmus
WANTLIB-flac=		FLAC>=5 ogg m
LIB_DEPENDS-wavpack=	audio/wavpack ${MODLIBICONV_LIB_DEPENDS}
RUN_DEPENDS-wavpack=	audio/cmus
WANTLIB-wavpack=	wavpack m ${MODLIBICONV_WANTLIB}
d49 1
d55 7
a61 1
			CONFIG_FFMPEG=n \
a65 3
			CONFIG_SUN=n \
			CONFIG_AO=n \
			CONFIG_ARTS=n \
a66 1
			CONFIG_ALSA=n \
d68 1
d70 2
a71 2
			CONFIG_DISCID=n \
			CONFIG_CDDB=n
d75 1
a75 1
LIB_DEPENDS+=		audio/tremor
d78 2
a79 2
LIB_DEPENDS+=		audio/libvorbis
WANTLIB-main+=		ogg vorbis>=0 vorbisfile>=1
d84 1
a84 2
post-patch:
	@@cp ${FILESDIR}/sndio.c ${WRKSRC}
@


1.8
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/12/27 12:02:33 gonzalo Exp $
d78 2
a79 2
	perl -pi -e s,/usr,${LOCALBASE}, ${WRKSRC}/Doc/cmus.txt
	perl -pi -e s,doc/cmus/examples,examples/cmus, ${WRKSRC}/Doc/cmus.txt
@


1.7
log
@Update for cmus to 2.5.0:

Two further changes:
  * I added CONFIG_ALSA=n back. Someone added it, I don't really know
    why, but I see that some other ports are explicitely disabling ALSA
    support, too. So I'll continue doing the same.
  * I added a patch from upstream which fixes a segfault.

From maintainer Donovan Watteau, Thanks!

Ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/12/20 16:00:26 shadchin Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d74 1
a74 1
NO_REGRESS=		Yes
@


1.6
log
@Update cmus to 2.4.3, from maintainer Donovan Watteau.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/10/02 14:11:55 rpointel Exp $
d7 1
a7 1
V=			2.4.3
d32 2
a33 1
WANTLIB-main=		c m pthread sndio ncursesw mad>=2 ${MODLIBICONV_WANTLIB}
d35 1
a35 1
LIB_DEPENDS=		audio/libmad
d48 1
d64 3
a66 1
			CONFIG_SNDIO=y
@


1.5
log
@Correct files/sndio.c, from Donovan Watteau (MAINTAINER).
Bump revision of -main subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/09/18 13:27:53 landry Exp $
d7 1
a7 1
V=			2.4.2
a12 4
REVISION-main=		2
REVISION-flac=		1
REVISION-wavpack=	1

d59 3
@


1.4
log
@Fix cmus configuration on arm and documentation about sndio backend,
from maintainer Donovan Watteau. That was somewhat missing from the
import.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/09/16 08:26:10 espie Exp $
d13 1
a13 1
REVISION-main=		1
@


1.3
log
@normalize pkgpath in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/09/06 07:19:29 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		0
d66 1
a66 2
CONFIGURE_ARGS+=	CONFIG_TREMOR=y \
			CONFIG_VORBIS=n
a69 2
CONFIGURE_ARGS+=	CONFIG_TREMOR=n \
			CONFIG_VORBIS=y
@


1.2
log
@Use the converters/libiconv MODULE.
Full stop at end of DESCR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/09/06 07:10:56 landry Exp $
d14 2
a15 2
REVISION-flac=		0
REVISION-wavpack=	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d13 4
d34 3
a36 1
WANTLIB-main=		c m pthread sndio ncursesw mad>=2 iconv
d38 1
a38 2
LIB_DEPENDS=		audio/libmad \
			converters/libiconv
d43 1
a43 1
LIB_DEPENDS-wavpack=	audio/wavpack
d45 1
a45 1
WANTLIB-wavpack=	wavpack m iconv
@


1.1.1.1
log
@Import cmus 2.4.2, from MAINTAINER Donovan Watteau.

cmus is a small ncurses-based music player. It supports various output
methods by output plugins. It has got completely configurable key
bindings and it can be controlled from the outside via cmus-remote(1).

sndio backend from Donovan with feedback from ratchov@@
with testing on arm & ok kili@@
@
text
@@
