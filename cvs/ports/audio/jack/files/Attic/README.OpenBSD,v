head	1.3;
access;
symbols
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2010.11.10.08.00.03;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2010.06.07.01.44.38;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2009.12.09.10.15.08;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- switch to pkg-readmes

ok sir jake@@
@
text
@In this package of jackd, the 'dummy' and 'sndio' drivers are supported.
The 'dummy' driver is mostly useful for testing jackd itself.  The
'sndio' driver uses sndio(7).  To start jackd with default driver
parameters, use the command 'jackd -d <driver>'.

By default, jackd runs in full-duplex mode with a relatively low
latency.  This may not be exactly what you want, and it may not be
possible with all hardware.  Therefore, some configuration options may
be necessary to effectively use jackd.  The 'sndio' driver options can
be viewed with the command 'jackd -d sndio -h'.  Below are some tips
and caveats to consider when using jackd on OpenBSD.

   Some audio devices do not support full-duplex operation.  If jackd
   errors out on startup with a message about opening a full-duplex
   device, this is likely the problem.  If the device only supports
   playback, then the driver needs to be configured to use 0 input
   channels.  For example 'jackd -d sndio -i 0' starts jackd in
   half-duplex play-only mode.

   By default jackd uses 2 periods (blocks) of 1024 frames each.  This
   means there will be at most 2048 frames in the playback buffer.  Some
   slower or loaded machines may not be able to keep the playback buffer
   from underrunning with these conditions.  Jackd is designed to use 2
   periods, so if underruns are observed, it is best to first increase
   the period size with the driver's -p option.  The period size should
   be a power of two.  The number of periods can be increased with the
   -n option.  For example, 'jackd -d sndio -p 2048 -n 4'.

   The sndio driver uses 44100 Hz sampling rates by default.  Some
   devices may not support the default sample rate.  Or it may be that
   most of the audio that will pass through jackd is based on a
   different sample rate.  Avoiding sample rate conversion will use
   fewer CPU cycles and perserve audio quality.  The -r option can be
   used to change the sampling rate as in 'jackd -d sndio -r 48000'.

   The realtime option -R is commonly used on other operating systems.
   However, this option is inconsequential on OpenBSD.

   It is possible to run jackd on top of aucat(1) with the 'sndio'
   driver.  However, the aucat server must be running at a higher than
   default scheduling priority.  The aucat(1) manual has an example for
   doing this with renice(8).  Note that jackd will use aucat's block
   size as it's period size.  The following command sequence could be
   used to run jackd over aucat.

     $ aucat -l -b 1024 -z 1024
     $ sudo renice -20 `pgrep -x aucat`
     $ jackd -d sndio -p 1024 -n 2

   There is currently no MIDI driver in jack that works on OpenBSD.
@


1.2
log
@* clean up sndio(7) driver
* update README.OpenBSD
* add patches to let it build on gcc2 archs (from Sebastian Reitenbach)
* disable audio(4) driver
@
text
@@


1.1
log
@sndio_driver.c:
- make it work with 24-bit formats (as with azalia and envy)
- use the correct member of struct sio_par for the buffer size
- check both poll(2) revents as well as calculated buffer positions
to know when we can read/write data
sun_driver.c:
- make it work with 24-bit formats (as with azalia and envy)
jackd/engine.c:
- don't spam error messages every time a client quits
add README.OpenBSD
@
text
@d1 4
a4 5
In this package of jackd, the 'dummy', 'sun' and 'sndio' drivers are
supported. The 'dummy' driver is mostly useful for testing jackd itself.
The 'sun' driver uses the audio(4) subsystem.  The 'sndio' driver uses
sndio(7).  To start jackd with default driver parameters, use the
command 'jackd -d <driver>'.
d9 3
a11 4
be necessary to effectively use jackd.  The 'sun' and 'sndio' drivers
use mostly the same configuration options, which can be viewed with the
command 'jackd -d <driver> -h'.  Below are some tips and caveats to
consider when using jackd on OpenBSD.
d17 1
a17 1
   channels.  For example 'jackd -d <driver> -i 0' starts jackd in
d27 1
a27 1
   -n option.  For example, 'jackd -d <driver> -p 2048 -n 3'.
d29 6
a34 7
   The 'sun' driver uses 48000 and the sndio driver uses 44100 Hz
   sampling rates by default.  Some devices may not support the default
   sampe rate.  Or it may be that most of the audio that will pass
   through jackd is based on a different sample rate.  Avoiding sample
   rate conversion will use less CPU cycles and perserve audio quality.
   The -r option can be used to change the sampling rate as in 'jackd -d
   sun -r 44100'.
a38 4
   The 'sun' driver reports xruns on stdout.  The 'sndio' driver does
   not.  The 'sndio' driver is more likely to continue to be developed.
   Unless you need xrun reporting, the 'sndio' driver is recommended.

d40 9
a48 12
   driver.  However, there are some caveats.  First, the aucat server
   must be running at a higher than default scheduling priority.
   aucat(1) has an example for doing this with renice(8).  Secondly, it
   is a very good idea to make sure the sample rates used for jackd and
   aucat are the same.  Third, period sizes in aucat and jackd must be
   the same.  Finally, jackd must be configured to use at least 4
   periods.  The following command sequence starts aucat and jackd such
   that they can work together.

     $ aucat -l -b 512 -z 256 -r 48000
     $ sudo renice -10 `pgrep -x aucat`
     $ jackd -d sndio -p 256 -n 4 -r 48000
d50 1
a50 1
   There is no MIDI driver for OpenBSD in jackd.
@

