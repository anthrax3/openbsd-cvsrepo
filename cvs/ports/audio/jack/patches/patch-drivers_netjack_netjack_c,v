head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.4
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.2
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.1.0.18
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.14
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.16
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.12
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.11.13.19.22.34;	author jca;	state Exp;
branches;
next	1.1;
commitid	P2tVKTVblSWgzQj7;

1.1
date	2012.04.20.13.28.50;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to jack-0.125.0

From David Carlier, input and ok danj@@ on a previous version.
@
text
@$OpenBSD: patch-drivers_netjack_netjack_c,v 1.1 2012/04/20 13:28:50 dcoppa Exp $

Fix with celt>=0.11

--- drivers/netjack/netjack.c.orig	Tue Feb 23 15:13:53 2016
+++ drivers/netjack/netjack.c	Fri Sep 23 09:32:04 2016
@@@@ -413,7 +413,7 @@@@ void netjack_attach ( netjack_driver_state_t *netj )
 		if ( netj->bitdepth == CELT_MODE ) {
 #if HAVE_CELT
 #if HAVE_CELT_API_0_7 || HAVE_CELT_API_0_8
-			netj->capture_srcs = jack_slist_append (netj->capture_srcs, celt_decoder_create ( netj->celt_mode, 1, NULL ) );
+			netj->capture_srcs = jack_slist_append (netj->capture_srcs, celt_decoder_create_custom ( netj->celt_mode, 1, NULL ) );
 #else
 			netj->capture_srcs = jack_slist_append (netj->capture_srcs, celt_decoder_create ( netj->celt_mode ) );
 #endif
@@@@ -460,7 +460,7 @@@@ void netjack_attach ( netjack_driver_state_t *netj )
 #if HAVE_CELT
 #if HAVE_CELT_API_0_7 || HAVE_CELT_API_0_8
 			CELTMode *celt_mode = celt_mode_create ( netj->sample_rate, netj->period_size, NULL );
-			netj->playback_srcs = jack_slist_append (netj->playback_srcs, celt_encoder_create ( celt_mode, 1, NULL ) );
+			netj->playback_srcs = jack_slist_append (netj->playback_srcs, celt_encoder_create_custom ( celt_mode, 1, NULL ) );
 #else
 			CELTMode *celt_mode = celt_mode_create ( netj->sample_rate, 1, netj->period_size, NULL );
 			netj->playback_srcs = jack_slist_append (netj->playback_srcs, celt_encoder_create ( celt_mode ) );
@


1.1
log
@Fix after celt update

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 4
a8 4
--- drivers/netjack/netjack.c.orig	Wed Apr 18 13:04:54 2012
+++ drivers/netjack/netjack.c	Wed Apr 18 13:05:48 2012
@@@@ -407,7 +407,7 @@@@ void netjack_attach( netjack_driver_state_t *netj )
 	if( netj->bitdepth == CELT_MODE ) {
d11 2
a12 2
-	    netj->capture_srcs = jack_slist_append(netj->capture_srcs, celt_decoder_create( netj->celt_mode, 1, NULL ) );
+	    netj->capture_srcs = jack_slist_append(netj->capture_srcs, celt_decoder_create_custom( netj->celt_mode, 1, NULL ) );
d14 1
a14 1
 	    netj->capture_srcs = jack_slist_append(netj->capture_srcs, celt_decoder_create( netj->celt_mode ) );
d16 1
a16 1
@@@@ -454,7 +454,7 @@@@ void netjack_attach( netjack_driver_state_t *netj )
d19 3
a21 3
 	    CELTMode *celt_mode = celt_mode_create( netj->sample_rate, netj->period_size, NULL );
-	    netj->playback_srcs = jack_slist_append(netj->playback_srcs, celt_encoder_create( celt_mode, 1, NULL ) );
+	    netj->playback_srcs = jack_slist_append(netj->playback_srcs, celt_encoder_create_custom( celt_mode, 1, NULL ) );
d23 2
a24 2
 	    CELTMode *celt_mode = celt_mode_create( netj->sample_rate, 1, netj->period_size, NULL );
 	    netj->playback_srcs = jack_slist_append(netj->playback_srcs, celt_encoder_create( celt_mode ) );
@

