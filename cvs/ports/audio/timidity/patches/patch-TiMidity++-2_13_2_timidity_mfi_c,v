head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.08.02.15.21.48;	author bcallah;	state Exp;
branches;
next	;
commitid	K9JrukYiJkkx309E;


desc
@@


1.1
log
@Replace the copyrighted goemon patchset with a GPLv2 patchset I created via
the GPLv2 soundfont included with MuseScore 1.3. This allows timidity to be
PERMIT_PACKAGE_CDROM=Yes.

Make timidity work with the gtk2 FLAVOR at the request of aja@@, who also
provided some comments.

License language from bentley@@.

ok bentley@@
@
text
@$OpenBSD$

Index: TiMidity++-2.13.2/timidity/mfi.c
--- TiMidity++-2.13.2/timidity/mfi.c.orig
+++ TiMidity++-2.13.2/timidity/mfi.c
@@@@ -344,7 +344,7 @@@@ typedef struct LastNoteInfo {
 #define SEND_LASTNOTEINFO(lni, ch)				if (LASTNOTEINFO_HAS_DATA((lni)[ch])) SendLastNoteInfo(lni, ch);
 #define SEND_AND_CLEAR_LASTNOTEINFO(lni, ch)	if (LASTNOTEINFO_HAS_DATA((lni)[ch])) { SendLastNoteInfo(lni, ch); (lni)[ch].on = NO_LAST_NOTE_INFO; }
 
-inline void StoreLastNoteInfo(LastNoteInfo *info, int channel, int time, int duration, int note, int velocity)
+void StoreLastNoteInfo(LastNoteInfo *info, int channel, int time, int duration, int note, int velocity)
 {
 	info[channel].on = time;
 	info[channel].off = time + duration;
@@@@ -352,7 +352,7 @@@@ inline void StoreLastNoteInfo(LastNoteInfo *info, int 
 	info[channel].velocity = velocity;
 }
 
-inline void SendLastNoteInfo(const LastNoteInfo *info, int channel)
+void SendLastNoteInfo(const LastNoteInfo *info, int channel)
 {
 	NOTE_BUF_EV_DEBUGSTR(channel, info[channel].on, note_name[info[channel].note % 12], info[channel].note / 12, info[channel].velocity, info[channel].off);
 	MIDIEVENT(info[channel].on, ME_NOTEON, channel, info[channel].note, info[channel].velocity);
@
