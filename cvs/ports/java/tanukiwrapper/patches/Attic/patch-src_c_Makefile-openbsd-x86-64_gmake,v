head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2015.05.18.09.17.42;	author sthen;	state dead;
branches;
next	1.1;
commitid	JHCYZIGKkViYcVgV;

1.1
date	2015.05.16.10.59.22;	author kettenis;	state Exp;
branches;
next	;
commitid	EKf6DSEBcvUazru2;


desc
@@


1.2
log
@Makefile-openbsd-x86-64.gmake comes from files/, so modify it there rather
than patching.

Since only the relevant version for the current arch is copied into the
build directory, patching fails on arch other than amd64 with comic
results (I had a log with 300GB of "No file found--skip this patch? [n]"
/ "File to patch:" lines).
@
text
@$OpenBSD: patch-src_c_Makefile-openbsd-x86-64_gmake,v 1.1 2015/05/16 10:59:22 kettenis Exp $
--- src/c/Makefile-openbsd-x86-64.gmake.orig	Sat May 16 12:23:42 2015
+++ src/c/Makefile-openbsd-x86-64.gmake	Sat May 16 12:25:18 2015
@@@@ -7,7 +7,7 @@@@
 # license agreement you entered into with Tanuki Software.
 # http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html
 
-CC = ${CC} -Wall -pedantic -DOPENBSD -DJSW64 -I${LOCALBASE}/include -L${LOCALBASE}/lib -liconv -DUNICODE -D_UNICODE
+CC = ${CC} -fPIC -Wall -pedantic -DOPENBSD -DJSW64 -I${LOCALBASE}/include -L${LOCALBASE}/lib -liconv -DUNICODE -D_UNICODE
 
 INCLUDE=$(JAVA_HOME)/include
 
@


1.1
log
@Make sure object files linked into a shared library get compiled with -fPIC.

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
@

