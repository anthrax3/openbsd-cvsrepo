head	1.9;
access;
symbols
	OPENBSD_6_1:1.7.0.2
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	jasper_20131007:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2017.05.12.15.11.17;	author espie;	state Exp;
branches;
next	1.8;
commitid	s6zt5guY3VvEwotj;

1.8
date	2017.04.21.13.27.46;	author kurt;	state Exp;
branches;
next	1.7;
commitid	lfz5IYSiUvvvq1Ub;

1.7
date	2016.09.13.15.29.02;	author naddy;	state Exp;
branches;
next	1.6;
commitid	ZR0IP7QclqedYIO6;

1.6
date	2016.03.18.23.12.18;	author naddy;	state Exp;
branches;
next	1.5;
commitid	KZAl4KEiw6a3Jixw;

1.5
date	2015.11.24.09.11.05;	author jasper;	state Exp;
branches;
next	1.4;
commitid	x9aAifyKiYiivEom;

1.4
date	2015.05.16.10.59.22;	author kettenis;	state Exp;
branches;
next	1.3;
commitid	EKf6DSEBcvUazru2;

1.3
date	2014.05.07.15.42.16;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2013.12.08.16.35.17;	author ian;	state Exp;
branches;
next	1.1;

1.1
date	2013.07.10.14.40.29;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.07.10.14.40.29;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.9
log
@zap remaining trailing / at end of WRK*
@
text
@# $OpenBSD: Makefile,v 1.8 2017/04/21 13:27:46 kurt Exp $

COMMENT=	Tanuki Java Service Wrapper

SVN_REV=	1780
DISTNAME=	wrapper-code-${SVN_REV}-trunk
PKGNAME=	java-tanukiwrapper-3.5.19.1
REVISION=	3
CATEGORIES=	java

HOMEPAGE=	http://wrapper.tanukisoftware.com/

MASTER_SITES=	https://distfiles.nl/

# GPLv2
# http://wrapper.tanukisoftware.com/doc/english/licenseCommunity.html
PERMIT_PACKAGE_CDROM=	Yes

EXTRACT_SUFX=	.zip

MODULES=	java
MODJAVA_VER=	1.6+
MODJAVA_BUILD=	ant

.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mlp64}
BITS=64
.else
BITS=32
.endif

MODJAVA_BUILD_ARGS=-Dbits=${BITS}

WANTLIB=	c iconv m pthread

LIB_DEPENDS=	converters/libiconv

USE_GMAKE=	Yes

WRKDIST=	${WRKDIR}/${DISTNAME}/wrapper

SUBST_VARS+=	CC CFLAGS

post-extract:
	cp ${FILESDIR}/Makefile-openbsd-x86-${BITS}.gmake ${WRKSRC}/src/c/

pre-configure:
	${SUBST_CMD} ${WRKSRC}/src/c/Makefile-openbsd-x86-${BITS}.gmake

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/java/classes/  \
		${PREFIX}/lib/tanukuwrapper/
	${INSTALL_DATA} ${WRKSRC}/lib/wrapper.jar \
		${PREFIX}/share/java/classes/tanukiwrapper.jar
	${INSTALL_PROGRAM} ${WRKSRC}/lib/libwrapper.so ${PREFIX}/lib/tanukuwrapper/
	${INSTALL_PROGRAM} ${WRKSRC}/bin/wrapper ${PREFIX}/sbin/tanukiwrapper

do-test:
	cd ${WRKSRC} && ant -Dbits=${BITS} -f build-tests.xml

.include <bsd.port.mk>
@


1.8
log
@- disconnect devel/jdk/1.7 from the build
- adjust java.port.mk so all 1.7 and lower ports now build with 1.8
- bump revision on affected ports
okay sthen@@, ian@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/09/13 15:29:02 naddy Exp $
d40 1
a40 1
WRKDIST=	${WRKDIR}/${DISTNAME}/wrapper/
@


1.7
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2016/03/18 23:12:18 naddy Exp $
d8 1
a8 1
REVISION=	2
@


1.6
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/11/24 09:11:05 jasper Exp $
d21 1
a21 2
MODULES=	converters/libiconv \
		java
d34 3
a36 1
WANTLIB=	c m pthread
@


1.5
log
@switch distfiles.nl to SSL, setup with security/letsencrypt/client
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.4 2015/05/16 10:59:22 kettenis Exp $

SHARED_ONLY=	Yes
@


1.4
log
@Make sure object files linked into a shared library get compiled with -fPIC.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/05/07 15:42:16 kurt Exp $
d15 1
a15 1
MASTER_SITES=	http://distfiles.nl/
@


1.3
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/12/08 16:35:17 ian Exp $
d10 1
a10 1
REVISION=	1
@


1.2
log
@Remove sys/timeb.h. ok naddy@@ jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/07/10 14:40:29 jasper Exp $
d10 1
a10 1
REVISION=	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 1
@


1.1.1.1
log
@import tanukiwrapper, based on svn rev 1780

The Java Service Wrapper is an application which has evolved out of a
desire to solve a number of problems common to many Java applications:

  - Run as a Windows Service or Unix Daemon
  - Application Reliability
  - Standard, Out of the Box Scripting
  - On Demand Restarts
  - Flexible Configuration
  - Ease Application Installations
  - Logging

ok aja@@
@
text
@@
