head	1.21;
access;
symbols
	OPENBSD_6_2:1.21.0.2
	OPENBSD_6_2_BASE:1.21
	OPENBSD_6_1:1.17.0.2
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.14.0.8
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.10
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.6
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.4
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.2
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.9.0.4
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.5.0.12
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.10
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.6
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.4.0.6
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.4
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	alek_20050430:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.21
date	2017.07.26.22.45.29;	author sthen;	state Exp;
branches;
next	1.20;
commitid	tD4MFrpYYDDL2UFT;

1.20
date	2017.07.16.19.19.01;	author espie;	state Exp;
branches;
next	1.19;
commitid	tt0GhWK5c4uf9ILG;

1.19
date	2017.05.31.08.08.17;	author espie;	state Exp;
branches;
next	1.18;
commitid	ij92FtFXiSiT1ani;

1.18
date	2017.05.22.13.54.51;	author espie;	state Exp;
branches;
next	1.17;
commitid	wI4nnp2Y3yWR4yqr;

1.17
date	2016.10.29.10.36.01;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	JqJE8A6zyjOD4qLo;

1.16
date	2016.08.13.19.22.05;	author jasper;	state Exp;
branches;
next	1.15;
commitid	QM7XMVrHbYCnGsDX;

1.15
date	2016.04.04.16.09.10;	author naddy;	state Exp;
branches;
next	1.14;
commitid	u3lQjrjlcAL26lGp;

1.14
date	2013.08.07.21.58.00;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2013.06.26.11.39.00;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2013.03.21.08.48.52;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.11.11.37.55;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.06.05.04.40;	author bentley;	state Exp;
branches;
next	1.9;

1.9
date	2012.03.29.13.38.49;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2011.11.03.22.21.21;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.20.09.48.40;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.14.00.02.24;	author jim;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.15.21.28.22;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2006.08.03.23.28.11;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2005.06.28.11.33.18;	author aanriot;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.03.08.54.44;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.30.14.46.50;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.04.30.14.46.50;	author alek;	state Exp;
branches;
next	;


desc
@@


1.21
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.20 2017/07/16 19:19:01 espie Exp $

COMMENT =		command line double-entry accounting ledger

GH_TAGNAME =		v3.1.1
GH_ACCOUNT =		ledger
GH_PROJECT =		ledger
REVISION =		0

SHARED_LIBS +=  ledger                    0.0 # 3.0

CATEGORIES =		productivity

HOMEPAGE =		http://www.ledger-cli.org/

MAINTAINER =		Sergey Bronnikov <estetus@@gmail.com>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += boost_date_time-mt boost_filesystem-mt boost_iostreams-mt
WANTLIB += boost_regex-mt boost_system-mt boost_unit_test_framework-mt
WANTLIB += c gmp m mpfr pthread ${COMPILER_LIBCXX}

MODULES =		devel/cmake \
			lang/python
COMPILER =		gcc

BUILD_DEPENDS =		devel/utfcpp
LIB_DEPENDS =		devel/boost \
			devel/gmp \
			devel/mpfr

LIBledger_MAJOR =	${LIBledger_VERSION:R}
LIBledger_MINOR =	${LIBledger_VERSION:E}
SUBST_VARS +=		LIBledger_MAJOR LIBledger_MINOR

CONFIGURE_ARGS=		-DUTFCPP_PATH=${LOCALBASE}/include/utfcpp

# Use this to make sure version.info gets generated, the actual
# installation bits are removed as the remaining .info files are
# not generated...see post-install below.
CONFIGURE_ARGS +=	-DBUILD_DOCS:Bool=On

pre-configure:
	${SUBST_CMD} ${WRKSRC}/src/CMakeLists.txt

post-install:
.for i in ledger3 ledger-mode
	cd ${WRKBUILD}/doc/ && \
		cp ${WRKSRC}/doc/$i.texi . && \
		makeinfo --force --no-split -o ${PREFIX}/info/$i.info $i.texi
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ledger/
.for d in LICENSE.md doc/GLOSSARY.md
	${INSTALL_DATA} ${WRKSRC}/$d ${PREFIX}/share/doc/ledger/
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ledger
	cd ${WRKSRC}/contrib && umask 022 && pax -rw . ${PREFIX}/share/examples/ledger

.include <bsd.port.mk>
@


1.20
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2017/05/31 08:08:17 espie Exp $
d8 1
@


1.19
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2017/05/22 13:54:51 espie Exp $
d22 1
a22 1
WANTLIB += c gmp m mpfr pthread ${LIBECXX}
@


1.18
log
@WANT_CXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/10/29 10:36:01 ajacoutot Exp $
d26 1
a26 1
WANT_CXX =		base gcc
@


1.17
log
@Fix UTFCPP_PATH.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/08/13 19:22:05 jasper Exp $
d22 1
a22 4
WANTLIB += c gmp m mpfr pthread

MODGCC4_ARCHS =		*
MODGCC4_LANGS +=	c++
d25 2
a26 2
			lang/python \
			gcc4
@


1.16
log
@update to ledger-3.1.1

based on an initial diff by and OK Sergey Bronnikov (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD$
d39 2
@


1.15
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/08/07 21:58:00 naddy Exp $
d3 1
a3 1
COMMENT=	command line double-entry accounting ledger
d5 3
a7 3
DISTNAME=	ledger-2.6.3
REVISION=	3
CATEGORIES=	productivity
d9 1
a9 1
HOMEPAGE=	http://www.ledger-cli.org/
d11 1
a11 1
MAINTAINER=	Sergey Bronnikov <estetus@@gmail.com>
d13 3
a15 1
SHARED_LIBS=	amounts	0.0
d18 1
a18 5
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	https://github.com/downloads/jwiegley/ledger/

WANTLIB=	c gmp>=4 m pcre stdc++
d20 24
a43 2
LIB_DEPENDS=	devel/gmp \
		devel/pcre
d45 2
a46 9
SEPARATE_BUILD=	Yes


CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		EMACS=no
CONFIGURE_ARGS=	--disable-xml \
		--disable-ofx
d49 8
a56 4
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ledger
	${INSTALL_DATA} ${WRKSRC}/scripts/* ${PREFIX}/share/doc/ledger
.for f in ledger.texi ledger.vim
	${INSTALL_DATA} ${WRKSRC}/${f} ${PREFIX}/share/doc/ledger
d59 1
a59 1
	${INSTALL_DATA} ${WRKSRC}/sample.dat ${PREFIX}/share/examples/ledger
@


1.14
log
@move http://github.com and http://bitbucket.org to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/06/26 11:39:00 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.13
log
@avoid hidden dep on xemacs/emacs which breaks the build if dpb junks
at the wrong time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/03/21 08:48:52 ajacoutot Exp $
d18 1
a18 1
MASTER_SITES=	http://github.com/downloads/jwiegley/ledger/
@


1.12
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 11:37:55 espie Exp $
d6 1
a6 1
REVISION=	1
d30 2
a31 1
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/03/06 05:04:40 bentley Exp $
a26 1
USE_LIBTOOL=	Yes
@


1.10
log
@Update webpage (old one reports 404) and license marker.

ok Sergey Bronnikov (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/03/29 13:38:49 sthen Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.9
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/11/03 22:21:21 jasper Exp $
d6 1
a6 1
REVISION=	0
d9 1
a9 1
HOMEPAGE=	http://www.newartisans.com/ledger.html
d15 1
a15 1
# GPL
@


1.8
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/20 09:48:40 espie Exp $
d28 1
a28 1
SEPARATE_BUILD=	simple
@


1.7
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/10/14 00:02:24 jim Exp $
d6 1
d23 1
a23 1
WANTLIB=	gmp>=4 m pcre stdc++
@


1.6
log
@Update to 2.6.3 from Tilo Stritzky t.stritzky at arcor.de and Sergey
Bronnikov estetus at gmail.com with input from jasper@@.  Sergey has agreed
to take maintainer.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/15 21:28:22 merdely Exp $
d22 1
a22 1
WANTLIB=	gmp.>=4 m pcre stdc++
d24 2
a25 2
LIB_DEPENDS=	::devel/gmp \
		::devel/pcre
@


1.5
log
@Remove surrounding quotes in COMMENT/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/08/03 23:28:11 espie Exp $
d5 1
a5 1
DISTNAME=	ledger-2.3
d10 3
a12 1
MAINTAINER=	Jim Razmus <jim@@bonetruck.org>
d20 3
a22 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=ledger/}
d24 2
a25 1
WANTLIB=	m stdc++ c
d27 1
a27 2
LIB_DEPENDS=	gmp.>=4::devel/gmp \
		pcre::devel/pcre
d29 1
a29 1
SEPARATE_BUILD=	concurrent
d40 1
a40 1
.for f in ledger.pdf ledger.texi ledger.vim
d43 2
@


1.4
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/06/28 11:33:18 aanriot Exp $
d3 1
a3 1
COMMENT=	"command line double-entry accounting ledger"
@


1.3
log
@update to 2.3 from maintainer.

ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/05/03 08:54:44 alek Exp $
d22 2
a23 2
LIB_DEPENDS=	gmp.4::devel/gmp \
		pcre.0::devel/pcre
@


1.2
log
@Stupid typos spotted by Jim Razmus <jim@@bonetruck.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/04/30 14:46:50 alek Exp $
d5 1
a5 1
DISTNAME=	ledger-2.2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d30 2
a31 2
CONFIGURE_FALGS=--disalbe-xml \
		--enable-ofx
@


1.1.1.1
log
@Import ledger 2.2

Ledger is an accounting tool with the moxie to exist. It provides no
bells or whistles, and returns the user to the days before user
interfaces were even a twinkling in their father's CRT. What it does
offer is a double-entry accounting ledger with all the flexibility and
muscle of its modern day cousins, without any of the fat. Think of it as
the Bran Muffin of accounting tools.

From Jim Razmus <jim@@bonetruck.org>
@
text
@@
