head	1.11;
access;
symbols
	OPENBSD_6_2:1.11.0.2
	OPENBSD_6_2_BASE:1.11
	OPENBSD_6_1:1.7.0.4
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.2
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	landry_20140703:1.1.1.1
	vic:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2017.07.26.22.45.29;	author sthen;	state Exp;
branches;
next	1.10;
commitid	tD4MFrpYYDDL2UFT;

1.10
date	2017.07.16.19.19.01;	author espie;	state Exp;
branches;
next	1.9;
commitid	tt0GhWK5c4uf9ILG;

1.9
date	2017.05.31.08.08.17;	author espie;	state Exp;
branches;
next	1.8;
commitid	ij92FtFXiSiT1ani;

1.8
date	2017.05.27.05.04.07;	author espie;	state Exp;
branches;
next	1.7;
commitid	89F43T8nZYNFmA7j;

1.7
date	2016.03.04.10.11.22;	author kirby;	state Exp;
branches;
next	1.6;
commitid	fuk4WSoYbEI5JByn;

1.6
date	2016.02.14.11.31.25;	author sthen;	state Exp;
branches;
next	1.5;
commitid	7gN1tAARIeLqI8nu;

1.5
date	2016.01.28.17.15.00;	author kspillner;	state Exp;
branches;
next	1.4;
commitid	ne0vn0YfCU59thCO;

1.4
date	2015.08.25.07.30.30;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	x3rR2VHR7RvISfgT;

1.3
date	2015.07.18.21.13.41;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	ulI2yjZGr10yH38X;

1.2
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.1;
commitid	jyyOLTDxRdjpw44n;

1.1
date	2014.07.12.22.08.35;	author landry;	state Exp;
branches
	1.1.1.1;
next	;
commitid	BiP1NU93TY4KegGP;

1.1.1.1
date	2014.07.12.22.08.35;	author landry;	state Exp;
branches;
next	;
commitid	BiP1NU93TY4KegGP;


desc
@@


1.11
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.10 2017/07/16 19:19:01 espie Exp $

COMMENT =	lightweight server providing access to task data

DISTNAME =	taskd-1.1.0
CATEGORIES =	productivity net
REVISION =	1

HOMEPAGE =	http://www.taskwarrior.org/

MAINTAINER =	Kent R. Spillner <kspillner@@openbsd.org>

MASTER_SITES =	${HOMEPAGE}/download/

# MIT
PERMIT_PACKAGE_CDROM =		Yes

MODULES =	devel/cmake

COMPILER =	gcc

WANTLIB += c gnutls m pthread ${COMPILER_LIBCXX}

LIB_DEPENDS =	security/gnutls

CONFIGURE_ARGS +=	-DTASKD_DOCDIR=share/taskd \
			-DTASKD_MAN1DIR=man/man1 \
			-DTASKD_MAN5DIR=man/man5

CONFIGURE_ENV +=	CFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

NO_TEST =		Yes

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/taskd/pki/
	${INSTALL_SCRIPT} ${WRKSRC}/pki/generate!(*.orig) \
		${PREFIX}/share/examples/taskd/pki/
	${INSTALL_DATA} ${WRKSRC}/pki/README \
		${PREFIX}/share/examples/taskd/pki/
	${INSTALL_DATA} ${WRKSRC}/pki/vars \
		${PREFIX}/share/examples/taskd/pki/vars.dist
	${SUBST_DATA} ${FILESDIR}/config \
		${PREFIX}/share/examples/taskd/config

.include <bsd.port.mk>
@


1.10
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2017/05/31 08:08:17 espie Exp $
d7 1
a7 1
REVISION =	0
@


1.9
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2017/05/27 05:04:07 espie Exp $
d22 1
a22 1
WANTLIB += c gnutls m pthread ${LIBECXX}
@


1.8
log
@WANT_CXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/03/04 10:11:22 kirby Exp $
d18 1
a18 1
MODULES =		devel/cmake
d20 1
a20 1
WANT_CXX =		base gcc
@


1.7
log
@Remove explicitely set CONFIGURE_STYLE=cmake. It is already done via
MODULES=devel/cmake
OK dcoppa@@, czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2016/02/14 11:31:25 sthen Exp $
d18 1
a18 2
MODULES =		gcc4 \
			devel/cmake
d20 1
a20 2
MODGCC4_LANGS =		c++
MODGCC4_ARCHS =		*
d22 1
a22 1
WANTLIB += c gnutls m pthread
@


1.6
log
@Fix productivity/taskd to @@sample the correct file as vars. Reported by viq,
fix from kspillner@@, committing on his behalf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/01/28 17:15:00 kspillner Exp $
a26 2

CONFIGURE_STYLE =	cmake
@


1.5
log
@Update to v1.1.0.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/08/25 07:30:30 ajacoutot Exp $
d7 1
d45 2
@


1.4
log
@/var/run content is already removed by /etc/rc, so no need to handle that in
the package. If a /var/run/foo directory must exist for proper start of a
software, then the rc.d script should take care of it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/07/18 21:13:41 ajacoutot Exp $
d5 1
a5 1
DISTNAME =	taskd-1.0.0
a6 1
REVISION =	1
d10 2
d17 5
a21 1
MODULES =		devel/cmake
d23 1
a23 1
WANTLIB += c gnutls m pthread stdc++ uuid
d25 1
a25 2
LIB_DEPENDS =	security/gnutls \
		sysutils/e2fsprogs>=1.42.7
d40 3
a42 1
	${INSTALL_SCRIPT} ${WRKSRC}/pki/!(*.orig) \
a45 1
	${INSTALL_DATA} ${FILESDIR}/vars.dist ${PREFIX}/share/examples/taskd/pki/
@


1.3
log
@sudo(8) -> su(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/08/10 09:58:06 espie Exp $
d7 1
a7 1
REVISION =	0
@


1.2
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/07/12 22:08:35 landry Exp $
d7 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: $
d37 1
a37 1
	${SUBST_CMD} -c -o root -g bin -m 444 ${FILESDIR}/config \
@


1.1.1.1
log
@Import taskd 1.0.0, from vic

Taskserver is a lightweight, secure server providing multi-user,
multi-client access to task data. This allows true syncing between
desktop and mobile clients.

ok abieber@@ on a previous version, with tweaks from sthen@@
@
text
@@
