head	1.27;
access;
symbols
	OPENBSD_6_1:1.24.0.2
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.23.0.2
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.19.0.2
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.11.0.4
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	kili_20110603:1.1.1.1
	kili:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2017.07.16.19.19.01;	author espie;	state Exp;
branches;
next	1.26;
commitid	tt0GhWK5c4uf9ILG;

1.26
date	2017.05.31.08.08.17;	author espie;	state Exp;
branches;
next	1.25;
commitid	ij92FtFXiSiT1ani;

1.25
date	2017.05.27.05.04.07;	author espie;	state Exp;
branches;
next	1.24;
commitid	89F43T8nZYNFmA7j;

1.24
date	2017.03.17.07.15.01;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	6J98V0hDnVHawvDu;

1.23
date	2016.06.21.18.06.39;	author dcoppa;	state Exp;
branches;
next	1.22;
commitid	kVCD5vpHEGFg7d8F;

1.22
date	2016.03.05.16.26.40;	author kirby;	state Exp;
branches;
next	1.21;
commitid	zYCSJprsGCr5LKoS;

1.21
date	2016.03.04.10.11.22;	author kirby;	state Exp;
branches;
next	1.20;
commitid	fuk4WSoYbEI5JByn;

1.20
date	2016.03.02.17.19.48;	author kspillner;	state Exp;
branches;
next	1.19;
commitid	O7wdVeKwis6eqfPr;

1.19
date	2015.12.23.16.05.20;	author kspillner;	state Exp;
branches;
next	1.18;
commitid	msfGEGETnN9URFYN;

1.18
date	2015.08.21.14.42.50;	author jasper;	state Exp;
branches;
next	1.17;
commitid	xH2LQNFX76SKF5hF;

1.17
date	2015.05.28.18.17.45;	author kili;	state Exp;
branches;
next	1.16;
commitid	HqHaksCfhS5HEpSo;

1.16
date	2015.05.21.14.49.42;	author czarkoff;	state Exp;
branches;
next	1.15;
commitid	cyP9sOu1pY0nd9sP;

1.15
date	2015.05.19.18.17.41;	author kspillner;	state Exp;
branches;
next	1.14;
commitid	X4qIoVjHidsVTbvc;

1.14
date	2015.04.29.16.00.43;	author kspillner;	state Exp;
branches;
next	1.13;
commitid	Dki4n1VqggaYNjCP;

1.13
date	2015.01.15.15.47.05;	author abieber;	state Exp;
branches;
next	1.12;
commitid	pPu1lzkfI1i2KvRS;

1.12
date	2014.03.11.18.25.36;	author abieber;	state Exp;
branches;
next	1.11;

1.11
date	2013.06.21.22.38.12;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2013.04.14.18.12.36;	author abieber;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.11.11.37.55;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2012.09.25.18.52.14;	author abieber;	state Exp;
branches;
next	1.7;

1.7
date	2012.09.19.08.15.09;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.15.22.53.42;	author abieber;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.10.15.22.45;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.05.15.19.38.01;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2012.05.11.09.44.13;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2011.06.04.12.10.43;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.03.21.07.10;	author kili;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.06.03.21.07.10;	author kili;	state Exp;
branches;
next	;


desc
@@


1.27
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.26 2017/05/31 08:08:17 espie Exp $

COMMENT =	command line todo list manager

VERSION =	2.5.1
DISTNAME =	task-${VERSION}
PKGNAME =	taskwarrior-${VERSION}
CATEGORIES =	productivity
REVISION =	0

HOMEPAGE =	http://www.taskwarrior.org/

MASTER_SITES =	${HOMEPAGE}download/

# MIT
PERMIT_PACKAGE_CDROM =		Yes

# Needs C++11; linker issues with clang
COMPILER =		gcc
MODULES =		devel/cmake \
			lang/lua \
			lang/python
MODLUA_SA =		Yes

WANTLIB += c gnutls m pthread ${COMPILER_LIBCXX}

LIB_DEPENDS =		security/gnutls

CONFIGURE_STYLE =	cmake

CONFIGURE_ARGS +=	-DTASK_DOCDIR=share/taskwarrior \
			-DTASK_MAN1DIR=man/man1 \
			-DTASK_MAN5DIR=man/man5

CONFIGURE_ENV +=	CFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

NO_TEST =		Yes

pre-configure:
	@@sed -i 's,share/doc/task/,share/taskwarrior/,g' \
		${WRKSRC}/doc/man/task-color.5.in \
		${WRKSRC}/doc/man/taskrc.5.in \
		${WRKSRC}/src/Config.cpp
	@@sed -i 's,share/doc/task-VERSION/,share/taskwarrior/,g' \
		${WRKSRC}/scripts/vim/README

post-install:
	${MODPY_BIN} ${MODPY_LIBDIR}/compileall.py \
	    ${PREFIX}/share/taskwarrior/scripts/add-ons

.include <bsd.port.mk>
@


1.26
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2017/05/27 05:04:07 espie Exp $
d25 1
a25 1
WANTLIB += c gnutls m pthread ${LIBECXX}
@


1.25
log
@WANT_CXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2017/03/17 07:15:01 ajacoutot Exp $
d19 1
a19 1
WANT_CXX =		base gcc
@


1.24
log
@Drop MAINTAINER per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/06/21 18:06:39 dcoppa Exp $
d19 2
a20 2
MODULES =		gcc4 \
			devel/cmake \
a22 2
MODGCC4_LANGS =		c++
MODGCC4_ARCHS =		*
d25 1
a25 1
WANTLIB += c gnutls m pthread
@


1.23
log
@
Fix license marker, from Frederic Cambus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/03/05 16:26:40 kirby Exp $
d9 1
a11 2

MAINTAINER=	Eric Lalonde <eric.c.lalonde@@gmail.com>
@


1.22
log
@revert previous.
python.module.mk could override do-build target if CONFIGURE_STYLE is empty.
discussed with sthen@@ and ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/03/02 17:19:48 kspillner Exp $
d14 1
a14 1
MASTER_SITES =	${HOMEPAGE}/download/
d16 1
a16 1
# GPLv2
@


1.21
log
@Remove explicitely set CONFIGURE_STYLE=cmake. It is already done via
MODULES=devel/cmake
OK dcoppa@@, czarkoff@@
@
text
@d32 2
@


1.20
log
@Update taskwarrior to v2.5.1.  This is a minor bugfix release but all of
our patches were upstreame (yay!).

ok MAINTAINER, ok juanfra@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/12/23 16:05:20 kspillner Exp $
a30 2

CONFIGURE_STYLE =	cmake
@


1.19
log
@Update to v2.5.0.

ok MAINTAINER, ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/08/21 14:42:50 jasper Exp $
d5 1
a5 1
VERSION =	2.5.0
@


1.18
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/05/28 18:17:45 kili Exp $
d5 1
a5 1
VERSION =	2.4.4
a7 1
REVISION =	1
@


1.17
log
@Some more bumps for gcc-4.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/05/21 14:49:42 czarkoff Exp $
d45 1
a45 1
	@@perl -pi -e 's|share/doc/task/|share/taskwarrior/|g' \
d49 1
a49 1
	@@perl -pi -e 's|share/doc/task-VERSION/|share/taskwarrior/|g' \
@


1.16
log
@Make taskwarrior use uuid functions from libc.

OK abieber@@, kspillner@@ and sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/05/19 18:17:41 kspillner Exp $
d8 1
a8 1
REVISION =	0
@


1.15
log
@Update taskwarrior to v2.4.4, from MAINTAINER.

ok abieber@@, czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/04/29 16:00:43 kspillner Exp $
d8 1
d29 1
a29 1
WANTLIB += c gnutls m pthread uuid
d31 1
a31 2
LIB_DEPENDS =	security/gnutls \
		sysutils/e2fsprogs>=1.42.7
@


1.14
log
@Update to v2.4.3.  Needs gcc4 because building now requires C++11 and
clang fails to link.  With feedback and tweaks from MAINTAINER, sthen@@,
and zhuk@@.

ok MAINTAINER, zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/01/15 15:47:05 abieber Exp $
d5 1
a5 1
VERSION =	2.4.3
@


1.13
log
@Update to the latest release. Drop myself as MAINTAINER and add
Eric Lalonde <eric.c.lalonde@@gmail.com>.

Changelog: http://taskwarrior.org/news/news.20150101.html
Tested on amd64

No objections.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/03/11 18:25:36 abieber Exp $
d5 1
a5 1
VERSION =	2.4.0
d19 7
a25 2
MODULES =		devel/cmake \
			lang/lua
d28 1
a28 1
WANTLIB += c gnutls m ncurses pthread readline stdc++ uuid
a46 1
		${WRKSRC}/doc/man/task-tutorial.5.in \
d51 4
@


1.12
log
@Update taskwarrior to 2.3.0!
 * remove patches because upstream rocks

Thanks to lteo@@ for almost testing <3

https://git.tasktools.org/projects/TM/repos/task/commits/cc5a56ebfacb828f497bc81b0eca32e5716856c6
https://git.tasktools.org/projects/TM/repos/task/commits/f31116f28764e0c151b7e5c2bd1cedb0d8aa63f0
https://git.tasktools.org/projects/TM/repos/task/commits/27f65a821f9d68bf74246084073c034b22e2aa13

OK bcalah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/06/21 22:38:12 sthen Exp $
d5 1
a5 1
VERSION =	2.3.0
d12 1
a12 1
MAINTAINER=	Aaron Bieber <abieber@@openbsd.org>
@


1.11
log
@sync WANTLIB and remove patches to handle e2fsprogs/libuuid changes. ok aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/04/14 18:12:36 abieber Exp $
d5 1
a5 1
VERSION =	2.2.0
a7 1
REVISION =	0
d23 4
a26 3
WANTLIB =		c uuid m stdc++
 
LIB_DEPENDS =	sysutils/e2fsprogs>=1.42.7
@


1.10
log
@Upgrade to 2.2.0, remove extra WANTLIB and LIB_DEPENDS

OK bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/11 11:37:55 espie Exp $
d8 1
d24 1
a24 1
WANTLIB =		c e2fs-uuid m stdc++
d26 1
a26 1
LIB_DEPENDS =	sysutils/e2fsprogs
@


1.9
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/09/25 18:52:14 abieber Exp $
d5 1
a5 1
VERSION =	2.1.2
d12 2
d23 3
a25 4
WANTLIB =		c e2fs-uuid m stdc++ ${MODLUA_WANTLIB}

LIB_DEPENDS =		${MODLUA_LIB_DEPENDS} \
			sysutils/e2fsprogs
@


1.8
log
@- update taskwarrior to 2.1.2

OK lteo@@, jeremy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/09/19 08:15:09 jasper Exp $
a15 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d35 1
a35 1
NO_REGRESS =		Yes
@


1.7
log
@sync after recent lua.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/09/15 22:53:42 abieber Exp $
d5 1
a5 1
VERSION =	2.1.1
a7 1
REVISION =	2
@


1.6
log
@- update taskwarrior to 2.1.1

OK dcoppa@@ jeremy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/07/10 15:22:45 jasper Exp $
d8 1
a8 1
REVISION =	1
@


1.5
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/05/15 19:38:01 jasper Exp $
d5 1
a5 1
VERSION =	2.0.0
@


1.4
log
@switch to lua.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/05/11 09:44:13 jasper Exp $
d8 1
a8 1
REVISION =	0
d23 1
@


1.3
log
@- update to 2.0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/06/04 12:10:43 kili Exp $
d8 1
d21 2
a22 1
MODULES =		devel/cmake
d24 1
a24 1
WANTLIB =		c e2fs-uuid lua m stdc++
d26 1
a26 1
LIB_DEPENDS =		lang/lua \
@


1.2
log
@Don't use bash as the shell.
(It's still stupid code, simulating system(3) in a weird way)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/06/03 21:07:10 kili Exp $
d5 1
a5 1
VERSION =	1.9.4
a7 1
REVISION =	0
d34 3
a36 1
			LDFLAGS="-L${LOCALBASE}/lib -le2fs-uuid"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
@


1.1.1.1
log
@Taskwarrior is a command line todo list manager. It maintains a
list of tasks that you want to do, allowing you to add/remove, and
otherwise manipulate them.  Task has a rich list of subcommands
that allow you to do various things with it.

Originally submitted by Piotr Sikora.

PLIST tweaks by me, Cmake tweaks from dcoppa@@.
COMMENT and DESCR tweaks by the bikeshedding company.

ok dcoppa@@

@
text
@@
