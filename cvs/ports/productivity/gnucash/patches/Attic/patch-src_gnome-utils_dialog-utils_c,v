head	1.2;
access;
symbols
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	todd_20050223:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2005.11.12.12.49.59;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2005.02.24.01.47.15;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.24.01.47.15;	author todd;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove unneeded dlopen(0,...) work-around. okay todd@@
@
text
@$OpenBSD: patch-src_gnome-utils_dialog-utils_c,v 1.1 2005/02/24 01:47:15 todd Exp $
--- src/gnome-utils/dialog-utils.c.orig	Sat Apr 12 12:03:25 2003
+++ src/gnome-utils/dialog-utils.c	Thu Feb 17 07:05:14 2005
@@@@ -22,11 +22,14 @@@@
  *                                                                  *
 \********************************************************************/
 
+#define _GNU_SOURCE 1  /* necessary to get RTLD_DEFAULT on linux */
+
 #include "config.h"
 
 #include <glade/glade.h>
 #include <gnome.h>
 #include <gmodule.h>
+#include <dlfcn.h>
 
 #include "dialog-utils.h"
 #include "global-options.h"
@@@@ -38,7 +41,6 @@@@
 #include "gnc-euro.h"
 #include "gnc-ui-util.h"
 
-
 /* This static indicates the debugging module that this .o belongs to. */
 static short module = MOD_GUI;
 
@@@@ -1123,8 +1125,12 @@@@ gnc_glade_autoconnect_full_func(const gc
   }
 
   if (!g_module_symbol(allsymbols, handler_name, (gpointer *)p_func)) {
-    g_warning("could not find signal handler '%s'.", handler_name);
-    return;
+    /* Fallback to dlsym -- necessary for *BSD linkers */
+    func = dlsym(RTLD_DEFAULT, handler_name);
+    if (func == NULL) {
+      g_warning("ggaff: could not find signal handler '%s'.", handler_name);
+      return;
+    }
   }
 
   if (other_object) {
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import gnucash 1.8.11

Quicken-like money and finance manager

If you've been looking for a way to manage your personal or business finances
using Free Software, you've found it! Designed to be easy to use, yet powerful
and flexible, GnuCash allows you to track bank accounts, stocks, income and
expenses. As quick and intuitive to use as a checkbook register, it is based
on professional accounting principles to ensure balanced books and accurate
reports. GnuCash is backed by an active development community and is
blossoming into a full-fledged accounting system.

Special thanks to Derek Atkins, of gnucash, who provided a diff for BSD dlsym
issues that makes this a LOT more stable.
@
text
@@
