head	1.92;
access;
symbols
	OPENBSD_6_2:1.92.0.2
	OPENBSD_6_2_BASE:1.92
	OPENBSD_6_1:1.88.0.2
	OPENBSD_6_1_BASE:1.88
	OPENBSD_6_0:1.85.0.2
	OPENBSD_6_0_BASE:1.85
	OPENBSD_5_9:1.82.0.2
	OPENBSD_5_9_BASE:1.82
	OPENBSD_5_8:1.77.0.4
	OPENBSD_5_8_BASE:1.77
	OPENBSD_5_7:1.70.0.2
	OPENBSD_5_7_BASE:1.70
	OPENBSD_5_6:1.67.0.2
	OPENBSD_5_6_BASE:1.67
	OPENBSD_5_5:1.61.0.2
	OPENBSD_5_5_BASE:1.61
	OPENBSD_5_4:1.56.0.2
	OPENBSD_5_4_BASE:1.56
	OPENBSD_5_3:1.52.0.2
	OPENBSD_5_3_BASE:1.52
	OPENBSD_5_2:1.49.0.2
	OPENBSD_5_2_BASE:1.49
	OPENBSD_5_1_BASE:1.45
	OPENBSD_5_1:1.45.0.2
	OPENBSD_5_0:1.37.0.4
	OPENBSD_5_0_BASE:1.37
	OPENBSD_4_9:1.37.0.2
	OPENBSD_4_9_BASE:1.37
	OPENBSD_4_8:1.29.0.2
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.27.0.2
	OPENBSD_4_7_BASE:1.27
	OPENBSD_4_6:1.24.0.2
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.20.0.2
	OPENBSD_4_5_BASE:1.20
	OPENBSD_4_4:1.18.0.4
	OPENBSD_4_4_BASE:1.18
	OPENBSD_4_3:1.18.0.2
	OPENBSD_4_3_BASE:1.18
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.10.0.2
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.8.0.2
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	todd_20050223:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.92
date	2017.07.26.22.45.29;	author sthen;	state Exp;
branches;
next	1.91;
commitid	tD4MFrpYYDDL2UFT;

1.91
date	2017.07.16.19.19.01;	author espie;	state Exp;
branches;
next	1.90;
commitid	tt0GhWK5c4uf9ILG;

1.90
date	2017.07.04.07.42.35;	author ajacoutot;	state Exp;
branches;
next	1.89;
commitid	UOAx6sNLqGoBPgwO;

1.89
date	2017.04.10.11.46.33;	author sthen;	state Exp;
branches;
next	1.88;
commitid	HY6VNZxjJWzKQFDV;

1.88
date	2017.03.29.07.49.42;	author ajacoutot;	state Exp;
branches;
next	1.87;
commitid	782rnuCKcQ3dj6Qe;

1.87
date	2016.12.19.09.06.15;	author ajacoutot;	state Exp;
branches;
next	1.86;
commitid	KVyzR9Pfz9J9NXms;

1.86
date	2016.09.18.08.20.12;	author ajacoutot;	state Exp;
branches;
next	1.85;
commitid	GCSe7xuOw2biNgoH;

1.85
date	2016.06.29.08.08.35;	author ajacoutot;	state Exp;
branches;
next	1.84;
commitid	cdFlU34A8JlLS7d4;

1.84
date	2016.03.30.07.42.21;	author ajacoutot;	state Exp;
branches;
next	1.83;
commitid	xKur6CQKncsyM0pP;

1.83
date	2016.03.18.23.12.19;	author naddy;	state Exp;
branches;
next	1.82;
commitid	KZAl4KEiw6a3Jixw;

1.82
date	2016.01.12.09.43.35;	author ajacoutot;	state Exp;
branches;
next	1.81;
commitid	FZjbryS7i0ZKsHbW;

1.81
date	2015.12.22.06.59.09;	author ajacoutot;	state Exp;
branches;
next	1.80;
commitid	Qfxf6uVDpmwZqnN7;

1.80
date	2015.10.07.20.51.05;	author ajacoutot;	state Exp;
branches;
next	1.79;
commitid	fx9fL2e8tC4lXchu;

1.79
date	2015.09.28.12.55.40;	author ajacoutot;	state Exp;
branches;
next	1.78;
commitid	rj8eVatvuXUIsB45;

1.78
date	2015.08.21.14.42.50;	author jasper;	state Exp;
branches;
next	1.77;
commitid	xH2LQNFX76SKF5hF;

1.77
date	2015.06.29.06.12.50;	author ajacoutot;	state Exp;
branches;
next	1.76;
commitid	hJTBymkEPLzkSTSr;

1.76
date	2015.04.24.11.02.53;	author ajacoutot;	state Exp;
branches;
next	1.75;
commitid	Os3xl2xy2OuAslN8;

1.75
date	2015.04.15.14.28.43;	author ajacoutot;	state Exp;
branches;
next	1.74;
commitid	Gyree13YOKBPOhI8;

1.74
date	2015.04.12.06.04.47;	author ajacoutot;	state Exp;
branches;
next	1.73;
commitid	J0fFL6lKMtfaZUyO;

1.73
date	2015.04.04.09.21.03;	author ajacoutot;	state Exp;
branches;
next	1.72;
commitid	kS3kwKZogsvzYmEY;

1.72
date	2015.03.31.10.57.56;	author ajacoutot;	state Exp;
branches;
next	1.71;
commitid	UrKlH9oL2NqiBS6f;

1.71
date	2015.03.27.08.14.14;	author ajacoutot;	state Exp;
branches;
next	1.70;
commitid	ERm8DOTUF1j7394B;

1.70
date	2014.12.17.09.30.55;	author ajacoutot;	state Exp;
branches;
next	1.69;
commitid	qeVBiaYD7g17lsVE;

1.69
date	2014.10.25.14.04.30;	author ajacoutot;	state Exp;
branches;
next	1.68;
commitid	tLDVzbWImuJ4KXc8;

1.68
date	2014.09.28.14.11.14;	author ajacoutot;	state Exp;
branches;
next	1.67;
commitid	BO07zTEIDrdntoeX;

1.67
date	2014.05.24.06.42.29;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2014.04.02.09.36.12;	author jasper;	state Exp;
branches;
next	1.65;

1.65
date	2014.04.01.18.06.30;	author jasper;	state Exp;
branches;
next	1.64;

1.64
date	2014.04.01.17.03.14;	author jasper;	state Exp;
branches;
next	1.63;

1.63
date	2014.04.01.13.21.45;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2014.03.28.08.12.05;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2014.01.28.17.45.33;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2013.12.30.12.23.45;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2013.12.08.11.23.47;	author espie;	state Exp;
branches;
next	1.58;

1.58
date	2013.09.27.17.49.08;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2013.09.24.13.34.35;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2013.07.11.19.17.10;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2013.05.31.15.34.54;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2013.04.02.17.26.34;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2013.03.11.11.37.55;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2013.02.06.14.23.06;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2012.12.19.10.41.14;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2012.09.27.16.18.06;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2012.06.15.08.32.17;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2012.04.30.14.54.55;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2012.04.30.14.54.09;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2012.03.29.14.57.00;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.12.03.23.04.37;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2011.11.03.22.21.21;	author jasper;	state Exp;
branches;
next	1.43;

1.43
date	2011.09.28.09.51.36;	author jasper;	state Exp;
branches;
next	1.42;

1.42
date	2011.09.20.21.04.25;	author jasper;	state Exp;
branches;
next	1.41;

1.41
date	2011.09.20.20.51.52;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2011.09.19.07.39.05;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2011.09.16.11.13.41;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2011.09.12.12.07.26;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2010.11.20.09.48.40;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.11.05.07.57.07;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2010.10.18.21.25.09;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2010.10.18.13.45.24;	author jasper;	state Exp;
branches;
next	1.33;

1.33
date	2010.10.11.08.17.46;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2010.10.06.17.29.36;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.08.29.21.00.18;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2010.08.28.09.19.14;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2010.04.09.11.55.25;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2010.03.21.11.02.02;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2009.12.21.21.03.56;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2009.10.14.21.36.11;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2009.08.10.06.34.09;	author kili;	state Exp;
branches;
next	1.24;

1.24
date	2009.06.19.12.35.14;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2009.06.11.18.27.02;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.06.08.16.58.16;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.06.07.06.41.26;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.01.21.10.50.12;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2008.12.29.17.03.46;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2007.10.25.21.05.33;	author steven;	state Exp;
branches;
next	1.17;

1.17
date	2007.09.15.21.28.22;	author merdely;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.31.15.52.28;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2006.12.22.15.47.41;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2006.11.20.20.21.22;	author bernd;	state Exp;
branches;
next	1.12;

1.12
date	2006.11.13.12.51.15;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2006.09.18.11.59.59;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2006.08.03.23.28.11;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2006.04.07.14.00.02;	author todd;	state Exp;
branches;
next	1.8;

1.8
date	2006.02.20.19.27.24;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2006.02.17.14.07.44;	author todd;	state Exp;
branches;
next	1.6;

1.6
date	2005.12.29.22.44.00;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2005.11.27.10.54.10;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.12.12.49.59;	author kurt;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.04.22.49.50;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.08.22.26.45;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.24.01.47.15;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.24.01.47.15;	author todd;	state Exp;
branches;
next	;


desc
@@


1.92
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.91 2017/07/16 19:19:01 espie Exp $

COMMENT =		personal and small-business financial-accounting software

GNOME_PROJECT =		gnucash
GNOME_VERSION =		2.6.17
EXTRACT_SUFX =		.tar.bz2
REVISION =		0

SHARED_LIBS +=  gnc-qof              2.0      # 1.4
SHARED_LIBS +=  gnc-core-utils       0.0      # unknown
SHARED_LIBS +=  gnc-module           0.0      # unknown
SHARED_LIBS +=  gnc-backend-xml-utils 0.0     # unknown
SHARED_LIBS +=  gnc-backend-sql      0.0      # unknown
SHARED_LIBS +=  gnc-gnome            0.0      # unknown
SHARED_LIBS +=  gncmod-qif           0.0      # unknown
SHARED_LIBS +=  gnc-business-ledger  0.0      # unknown

CATEGORIES =		productivity

HOMEPAGE =		http://www.gnucash.org/

MAINTAINER =		Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += EGL GL ICE SM X11 X11-xcb Xcomposite Xcursor Xdamage
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xt Xxf86vm art_lgpl_2
WANTLIB += atk-1.0 bz2 c cairo dbi dbus-1 dbus-glib-1 drm enchant
WANTLIB += expat ffi fontconfig freetype gailutil gbm gconf-2
WANTLIB += gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glapi glib-2.0
WANTLIB += gmodule-2.0 gmp gnome-keyring gnomecanvas-2 gobject-2.0
WANTLIB += goffice-0.8 gpg-error graphite2 gsf-1 gstapp-1.0 gstaudio-1.0
WANTLIB += gstbase-1.0 gstfft-1.0 gstpbutils-1.0 gstreamer-1.0
WANTLIB += gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-x11-2.0 guile
WANTLIB += harfbuzz harfbuzz-icu iconv icudata icui18n icuuc intl
WANTLIB += javascriptcoregtk-1.0 jpeg ltdl lzma m orc-0.4 pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png pthread
WANTLIB += pthread-stubs secret-1 soup-2.4 sqlite3 ${COMPILER_LIBCXX} webkitgtk-1.0
WANTLIB += webp xcb xcb-dri2 xcb-glx xcb-render xcb-shm xcb-xfixes
WANTLIB += xml2 xslt z

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=gnucash/}

DISTFILES =		${DISTNAME}${EXTRACT_SUFX} \
			gnucash-docs-${GNOME_VERSION}.tar.gz

MODULES =		devel/dconf \
			x11/gnome

MODGNOME_TOOLS =	desktop-file-utils gtk-update-icon-cache yelp

BUILD_DEPENDS =		databases/libdbi-drivers,-sqlite3
RUN_DEPENDS =		databases/libdbi-drivers,-sqlite3

# gnc-fq-helper(1)
RUN_DEPENDS +=		converters/p5-DateManip \
			misc/p5-Finance-Quote

LIB_DEPENDS =		databases/libdbi \
			devel/goffice08 \
			lang/guile \
			www/webkit \
			x11/gnome/libgnome-keyring \
			x11/gnome/libgnomecanvas

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS =	--with-dbi-dbd-dir=${LOCALBASE}/lib/dbd \
			--with-xdg-data-dirs=${LOCALBASE}/share

# --disable-ofx until libofx/libsp is fixed to work with .so
CONFIGURE_ARGS +=	--disable-doxygen \
			--disable-ofx

MODGNOME_CPPFLAGS =	-I${X11BASE}/include

FAKE_FLAGS =		sysconfdir=${PREFIX}/share/examples/
DOC_DIR =		${WRKDIR}/gnucash-docs-${GNOME_VERSION}

# XXX prefer guile1: guile2 segfaults during build when using dpb(1)
# XXX make sure guile2 headers are picked up first (over guile1);
# cannot use CPPFLAGS/CFLAGS since they get appended last
#MAKE_FLAGS +=		CC="${CC} -I${LOCALBASE}/include/guile/2.0"
pre-configure:
	sed -i 's,guile-2.0,guile-99.99,g' ${WRKSRC}/configure

# XXX hack: check if still needed at next release (autohell)
DOCS_ENV=		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true

post-configure:
	cd ${DOC_DIR} && ${SETENV} ${CONFIGURE_ENV} /bin/sh ./configure

post-build:
	cd ${DOC_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} ${DOCS_ENV}

post-install:
	cd ${DOC_DIR} && \
		${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${ALL_FAKE_FLAGS} ${DOCS_ENV} install
	rm ${PREFIX}/lib/gnucash/*.{a,la}
# requires hardcoded gnucash sources path to work
	rm ${PREFIX}/bin/gnucash-valgrind

.include <bsd.port.mk>
@


1.91
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2017/07/04 07:42:35 ajacoutot Exp $
d8 1
@


1.90
log
@Update to gnucash-2.6.17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2017/04/10 11:46:33 sthen Exp $
d39 1
a39 1
WANTLIB += pthread-stubs secret-1 soup-2.4 sqlite3 ${LIBCXX} webkitgtk-1.0
@


1.89
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2017/03/29 07:49:42 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION =		2.6.16
@


1.88
log
@Update to gnucash-2.6.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2016/12/19 09:06:15 ajacoutot Exp $
d39 1
a39 1
WANTLIB += pthread-stubs secret-1 soup-2.4 sqlite3 stdc++ webkitgtk-1.0
@


1.87
log
@Update to gnucash-2.6.15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2016/09/18 08:20:12 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION =		2.6.15
@


1.86
log
@Update to gnucash-2.6.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2016/06/29 08:08:35 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION =		2.6.14
@


1.85
log
@Update to gnucash-2.6.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2016/03/30 07:42:21 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION =		2.6.13
d40 2
a41 2
WANTLIB += webp xcb xcb-dri2 xcb-glx xcb-render xcb-shape xcb-shm
WANTLIB += xcb-xfixes xml2 xslt z
@


1.84
log
@Update to gnucash-2.6.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2016/03/18 23:12:19 naddy Exp $
d6 1
a6 1
GNOME_VERSION =		2.6.12
d27 14
a40 13
WANTLIB += EGL GL ICE SM X11 Xcomposite Xcursor Xdamage Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xt art_lgpl_2 atk-1.0 bz2
WANTLIB += c cairo dbi dbus-1 dbus-glib-1 enchant expat ffi fontconfig
WANTLIB += freetype gailutil gbm gconf-2 gcrypt gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gmp gnome-keyring gnomecanvas-2
WANTLIB += gobject-2.0 goffice-0.8 gpg-error graphite2 gsf-1 gstapp-1.0
WANTLIB += gstaudio-1.0 gstbase-1.0 gstfft-1.0 gstpbutils-1.0
WANTLIB += gstreamer-1.0 gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-x11-2.0
WANTLIB += guile harfbuzz harfbuzz-icu icudata icui18n icuuc javascriptcoregtk-1.0
WANTLIB += jpeg ltdl lzma m orc-0.4 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread pthread-stubs secret-1 soup-2.4
WANTLIB += sqlite3 stdc++ webkitgtk-1.0 webp xcb xcb-render xcb-shm
WANTLIB += X11-xcb Xxf86vm drm glapi xcb-dri2 xcb-glx xcb-shape
a48 1
			devel/gettext \
@


1.83
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2016/01/12 09:43:35 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION =		2.6.11
@


1.82
log
@Update to gnucash-2.6.11.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.81 2015/12/22 06:59:09 ajacoutot Exp $

SHARED_ONLY =		Yes
@


1.81
log
@Update to gnucash-2.6.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2015/10/07 20:51:05 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.10
@


1.80
log
@Update to gnucash-2.6.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2015/09/28 12:55:40 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.9
d41 2
a42 1
WANTLIB += xml2 xslt z
@


1.79
log
@Update to gnucash-2.6.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2015/08/21 14:42:50 jasper Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.8
d87 4
a90 1
	
d95 1
a95 1
	cd ${DOC_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS}
d99 1
a99 1
		${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${ALL_FAKE_FLAGS} install
@


1.78
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2015/06/29 06:12:50 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.7
@


1.77
log
@Update to gnucash-2.6.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/04/24 11:02:53 ajacoutot Exp $
d86 1
a86 1
	perl -pi -e 's,guile-2.0,guile-99.99,g' ${WRKSRC}/configure
@


1.76
log
@Force using guile1; while guile2 works when building locally, there's an
obscure segfault happening when built using dpb(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2015/04/15 14:28:43 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.6
a9 1
REVISION =		2
@


1.75
log
@Add a hack to make this build when both guile and guile2 are installed.
breakage reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2015/04/12 06:04:47 ajacoutot Exp $
d10 1
a10 1
REVISION =		1
d33 7
a39 8
WANTLIB += freetype gailutil gbm gc gconf-2 gcrypt gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gmp gnome-keyring
WANTLIB += gnomecanvas-2 gobject-2.0 goffice-0.8 gpg-error graphite2
WANTLIB += gsf-1 gstapp-1.0 gstaudio-1.0 gstbase-1.0 gstfft-1.0
WANTLIB += gstpbutils-1.0 gstreamer-1.0 gsttag-1.0 gstvideo-1.0
WANTLIB += gthread-2.0 gtk-x11-2.0 guile-2.0 harfbuzz harfbuzz-icu
WANTLIB += icudata icui18n icuuc javascriptcoregtk-1.0 jpeg ltdl
WANTLIB += lzma m orc-0.4 pango-1.0 pangocairo-1.0 pangoft2-1.0
d41 2
a42 2
WANTLIB += sqlite3 stdc++ unistring webkitgtk-1.0 webp xcb xcb-render
WANTLIB += xcb-shm xml2 xslt z
d64 1
a64 1
			lang/guile2>=2.0.11p0 \
a76 4
# XXX make sure guile2 headers are picked up first (over guile1);
# cannot use CPPFLAGS/CFLAGS since they get appended last
MAKE_FLAGS +=		CC="${CC} -I${LOCALBASE}/include/guile/2.0"

d82 7
@


1.74
log
@Unbreak build when both guile and guile2 are installed; gnucash now prefers
guile2 if it's around (breakage reported by sthen@@).
While here, drop gnucash-valgrind which is useless in a package.
Add a couple of missing RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/04/04 09:21:03 ajacoutot Exp $
a73 3
# do not pick-up guile2
CONFIGURE_ENV +=	GUILE_EFFECTIVE_VERSION=1.8

d77 4
@


1.73
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/03/31 10:57:56 ajacoutot Exp $
d10 1
a10 1
REVISION =		0
d33 8
a40 7
WANTLIB += freetype gailutil gbm gconf-2 gcrypt gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gmp gnome-keyring gnomecanvas-2
WANTLIB += gobject-2.0 goffice-0.8 gpg-error graphite2 gsf-1 gstapp-1.0
WANTLIB += gstaudio-1.0 gstbase-1.0 gstfft-1.0 gstpbutils-1.0
WANTLIB += gstreamer-1.0 gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-x11-2.0
WANTLIB += guile harfbuzz harfbuzz-icu icudata icui18n icuuc javascriptcoregtk-1.0
WANTLIB += jpeg ltdl lzma m orc-0.4 pango-1.0 pangocairo-1.0 pangoft2-1.0
d42 2
a43 2
WANTLIB += sqlite3 stdc++ webkitgtk-1.0 webp xcb xcb-render xcb-shm
WANTLIB += xml2 xslt z
d59 4
d65 1
a65 1
			lang/guile \
d96 2
@


1.72
log
@Update to gnucash-2.6.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/03/27 08:14:14 ajacoutot Exp $
d10 1
@


1.71
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2014/12/17 09:30:55 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.5
a9 1
REVISION =		0
d31 1
a31 1
WANTLIB += c cairo dbi dbus-1 enchant expat ffi fontconfig
d33 7
a39 8
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gmp gnome-keyring
WANTLIB += gnomecanvas-2 gobject-2.0 goffice-0.8 gpg-error graphite2
WANTLIB += gsf-1 gstapp-1.0 gstaudio-1.0 gstbase-1.0 gstfft-1.0
WANTLIB += gstpbutils-1.0 gstreamer-1.0 gsttag-1.0 gstvideo-1.0
WANTLIB += gthread-2.0 gtk-x11-2.0 guile harfbuzz harfbuzz-icu
WANTLIB += icudata icui18n icuuc javascriptcoregtk-1.0 jpeg ltdl
WANTLIB += m orc-0.4 pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
WANTLIB += pixman-1 png pthread pthread-stubs secret-1 soup-2.4
d41 1
a41 1
WANTLIB += xml2 xslt z dbus-glib-1 lzma
@


1.70
log
@Update to gnucash-2.6.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2014/10/25 14:04:30 ajacoutot Exp $
d10 1
@


1.69
log
@Regen WANTLIB to unbreak after recent webkit update. There are more ports
following but they need a bit more work.

breakage reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2014/09/28 14:11:14 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =		2.6.4
a9 1
REVISION =		0
d42 1
a42 1
WANTLIB += xml2 xslt z
@


1.68
log
@Update to gnucash-2.6.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2014/05/24 06:42:29 ajacoutot Exp $
d10 1
d32 1
a32 1
WANTLIB += c cairo dbi dbus-1 dbus-glib-1 enchant expat ffi fontconfig
d34 1
a34 1
WANTLIB += geoclue gio-2.0 glib-2.0 gmodule-2.0 gmp gnome-keyring
@


1.67
log
@Update to gnucash-2.6.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2014/04/02 09:36:12 jasper Exp $
d8 1
a8 2
GNOME_VERSION =		2.6.3
DOC_VERSION = 		2.6.3
d24 2
d32 1
a32 1
WANTLIB += freetype gailutil gconf-2 gcrypt gdk-x11-2.0 gdk_pixbuf-2.0
d47 1
a47 1
			gnucash-docs-${DOC_VERSION}.tar.gz
d53 1
a53 1
MODGNOME_TOOLS += desktop-file-utils gtk-update-icon-cache yelp
d55 2
a56 2
BUILD_DEPENDS=		databases/libdbi-drivers,-sqlite3
RUN_DEPENDS=		databases/libdbi-drivers,-sqlite3
d69 3
d79 1
a79 1
DOC_DIR =		${WRKDIR}/gnucash-docs-${DOC_VERSION}
@


1.66
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/04/01 18:06:30 jasper Exp $
d8 2
a9 2
GNOME_VERSION =		2.6.2
DOC_VERSION = 		2.6.2
a10 1
REVISION =		0
@


1.65
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/04/01 17:03:14 jasper Exp $
d53 1
a53 1
MODGNOME_TOOLS +=  desktop-file-utils  gtk-update-icon-cache yelp
@


1.64
log
@move more bits and bobs into MODGNOME_TOOLS to make it more clear which
tools are actually used.

This commit replaces
MODGNOME_DESKTOP_FILE with MODGNOME_TOOLS += desktop-file-utils
MODGNOME_MIME_FILE with MODGNOME_TOOLS += shared-mime-info
MODGNOME_ICON_CACHE with MODGNOME_TOOLS += gtk-update-icon-cache

(some prettyfication will follow shortly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2014/04/01 13:21:45 ajacoutot Exp $
d53 1
a53 3
MODGNOME_TOOLS +=	desktop-file-utils
MODGNOME_TOOLS +=	gtk-update-icon-cache
MODGNOME_TOOLS = 	yelp
@


1.63
log
@In x11/gnome ports we use disable-static inconsistently, usually to get
rid of static module archives; but since we end up manually removing the
libtool la files anyway, just don't bother setting up the tag.
part 2/2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2014/03/28 08:12:05 ajacoutot Exp $
d53 2
a54 2
MODGNOME_DESKTOP_FILE =	Yes
MODGNOME_ICON_CACHE =	Yes
@


1.62
log
@Update to gnucash-2.6.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2014/01/28 17:45:33 ajacoutot Exp $
d11 1
a56 2
LIBTOOL_FLAGS =		--tag=disable-static

d68 1
a68 2
CONFIGURE_ARGS =	--disable-static \
			--with-dbi-dbd-dir=${LOCALBASE}/lib/dbd \
d89 1
a89 1
	rm ${PREFIX}/lib/gnucash/*.la
@


1.61
log
@Update to gnucash-2.6.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2013/12/30 12:23:45 ajacoutot Exp $
d8 2
a9 2
GNOME_VERSION =		2.6.1
DOC_VERSION = 		2.6.1
@


1.60
log
@Update to gnucash-2.6.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/12/08 11:23:47 espie Exp $
d8 2
a9 2
GNOME_VERSION =		2.6.0
DOC_VERSION = 		2.6.0
@


1.59
log
@tweak things a bit more, as this didn't build correctly.
The guile change means the slib-guile thingy is obsolete
(and didn't quite work anyways)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/09/27 17:49:08 ajacoutot Exp $
d3 1
a3 1
SHARED_ONLY =	Yes
d5 1
a5 1
COMMENT =	personal and small-business financial-accounting software
d7 4
a10 5
GNOME_PROJECT =	gnucash
GNOME_VERSION =	2.4.13
DOC_VERSION = 	2.4.2
EXTRACT_SUFX =	.tar.bz2
REVISION=	1
d12 1
a12 1
SHARED_LIBS +=  gnc-qof              1.4      # 1.4
d15 1
a15 1
SHARED_LIBS +=  gnc-backend-xml-utils 0.0      # unknown
a16 1
SHARED_LIBS +=  gnc-business-ledger  0.0      # unknown
d19 1
d21 1
a21 1
CATEGORIES =	productivity
d23 1
a23 1
HOMEPAGE =	http://www.gnucash.org/
d28 23
a50 22
WANTLIB += ICE ORBit-2 ORBitCosNaming-2 SM X11 Xcomposite Xcursor
WANTLIB += Xdamage Xext Xfixes Xi Xinerama Xrandr Xrender art_lgpl_2
WANTLIB += atk-1.0 bonobo-2 bonobo-activation bonoboui-2 bz2 c
WANTLIB += cairo canberra crypto dbi dbus-1 dbus-glib-1 enchant
WANTLIB += expat ffi fontconfig freetype gailutil gcrypt gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0 gmodule-2.0
WANTLIB += gmp gnome-2 gnome-keyring gnomecanvas-2 gnomeui-2 gnomevfs-2
WANTLIB += gobject-2.0 goffice-0.8 gpg-error graphite2 gsf-1 gthread-2.0
WANTLIB += gtk-x11-2.0 gtkhtml-3.14 guile harfbuzz ltdl m ogg
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png popt pthread pthread-stubs ssl stdc++ util vorbis
WANTLIB += vorbisfile xcb xcb-render xcb-shm xml2 z

MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=gnucash/} \
		${HOMEPAGE}pub/gnucash/sources/stable/

DISTFILES =	${DISTNAME}${EXTRACT_SUFX} \
		gnucash-docs-${DOC_VERSION}.tar.gz

MODULES =	devel/gettext \
		x11/gnome \
		devel/gconf2
a53 1
MODGCONF2_SCHEMAS_DIR = gnucash
d56 11
a66 5
LIB_DEPENDS =	databases/libdbi \
		devel/goffice08 \
		lang/guile \
		www/gtkhtml3 \
		x11/gnome/libgnomeui
d69 4
d76 1
a77 2
# configure checks for pthread_mutex_init(3)
MODGNOME_LDFLAGS =	-pthread
d79 2
a80 2
# see patch-src_core-utils_gnc-path_c
CFLAGS +=	-DGCONFDIR='\"/var/db\"'
a81 4
FAKE_FLAGS =	sysconfdir=${PREFIX}/share/examples/

# Steps to build the docs.
DOC_DIR =		${WRKDIR}/gnucash-docs-${DOC_VERSION}
d91 1
@


1.58
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/09/24 13:34:35 ajacoutot Exp $
d11 1
a11 1
REVISION=	0
a56 2
BUILD_DEPENDS =	devel/slib-guile
RUN_DEPENDS =	devel/slib-guile
@


1.57
log
@Update to gnucash-2.4.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/07/11 19:17:10 sthen Exp $
d11 1
@


1.56
log
@sync WANTLIB (+graphite2), noticed after checking that autoconf doesn't now
pick up aqbanking/gwenhywfar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/05/31 15:34:54 ajacoutot Exp $
d8 2
a9 2
GNOME_VERSION =	2.4.11
DOC_VERSION = 	2.2.0
a10 1
REVISION =	3
@


1.55
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/04/02 17:26:34 ajacoutot Exp $
d11 1
a11 1
REVISION =	2
d29 10
a38 10
WANTLIB += GL ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite
WANTLIB += Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr
WANTLIB += Xrender Xxf86vm art_lgpl_2 atk-1.0 bonobo-2 bonobo-activation
WANTLIB += bonoboui-2 bz2 c cairo canberra crypto dbi dbus-1 dbus-glib-1
WANTLIB += drm enchant expat ffi fontconfig freetype gailutil
WANTLIB += gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0
WANTLIB += glib-2.0 gmodule-2.0 gmp gnome-2 gnome-keyring gnomecanvas-2
WANTLIB += gnomeui-2 gnomevfs-2 gobject-2.0 goffice-0.8 gpg-error
WANTLIB += gsf-1 gthread-2.0 gtk-x11-2.0 gtkhtml-3.14 guile ltdl
WANTLIB += m ogg pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
d40 1
a40 1
WANTLIB += vorbisfile xcb xcb-render xcb-shm xml2 z harfbuzz
@


1.54
log
@Sanitier depepdencies, these do not need to build depends on gtk+2,-guic.
RUN_DEPENDS = BUILD_DEPENDS is a known bad construct, but
BUILD_DEPENDS = RUN_DEPENDS is *not* that good either...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/03/11 11:37:55 espie Exp $
d11 1
a11 1
REVISION =	1
d40 1
a40 2
WANTLIB += vorbisfile xcb xcb-render xcb-shm xml2 z harfbuzz icudata
WANTLIB += icule icuuc
@


1.53
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/02/06 14:23:06 ajacoutot Exp $
d58 1
a58 1
BUILD_DEPENDS =	${RUN_DEPENDS}
@


1.52
log
@Quiet gconftool-2:
gconf_ping() will try to shutdown gconfd, but since installing pkg is
done as root, there is not gconfd nor dbus that can be started when
DISPLAY isn't set and an annoying warning is issued.

discussed with espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/12/19 10:41:14 ajacoutot Exp $
a27 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.51
log
@Depend on devel/goffice08.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/09/27 16:18:06 ajacoutot Exp $
d11 1
a11 1
REVISION =	0
@


1.50
log
@Update to gnucash-2.4.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/06/15 08:32:17 ajacoutot Exp $
d11 1
d64 1
a64 1
		devel/goffice \
@


1.49
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/04/30 14:54:55 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION =	2.4.10
a11 2
REVISION=	1

d42 2
a43 1
WANTLIB += vorbisfile xcb xcb-render xcb-shm xml2 z
@


1.48
log
@<spank>forgot to bump!</spank>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2012/04/30 14:54:09 ajacoutot Exp $
d12 1
a12 1
REVISION=	0
@


1.47
log
@Correctly pick up pthread_mutex_init(3).
Fix path to the default gconf configuration.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2012/03/29 14:57:00 ajacoutot Exp $
d11 2
@


1.46
log
@Update to gnucash-2.4.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/12/03 23:04:37 ajacoutot Exp $
d72 5
@


1.45
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/11/03 22:21:21 jasper Exp $
d8 1
a8 1
GNOME_VERSION =	2.2.9
d10 1
d12 8
a19 9
REVISION=	9

SHARED_LIBS +=	gnc-backend-file-utils	0.0	# .0.0
SHARED_LIBS +=	gnc-business-ledger	0.0	# .0.0
SHARED_LIBS +=	gnc-core-utils		0.0	# .0.0
SHARED_LIBS +=	gnc-gnome		0.0	# .0.0
SHARED_LIBS +=	gnc-module		0.0	# .0.0
SHARED_LIBS +=	gnc-qof			1.4	# .1.4
SHARED_LIBS +=	gncmod-qif		0.0	# .0.0
d25 1
a25 1
# GPLv2
d31 1
a31 3
EXTRACT_SUFX=		.tar.bz2

WANTLIB += ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite
d33 10
a42 12
WANTLIB += Xrender art_lgpl_2 atk-1.0
WANTLIB += bonobo-2 bonobo-activation bonoboui-2 bz2
WANTLIB += c cairo crypto dbus-1 dbus-glib-1 enchant expat fontconfig
WANTLIB += freetype gailutil gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glade-2.0 glib-2.0 gmodule-2.0 gmp gnome-2 gnome-keyring
WANTLIB += gnomecanvas-2 gnomevfs-2 gobject-2.0 gsf-1 gthread-2.0
WANTLIB += gtk-x11-2.0 ltdl m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png popt pthread pthread-stubs ssl stdc++
WANTLIB += util xcb xcb-render xml2 z
WANTLIB += canberra gcrypt gpg-error ogg vorbis vorbisfile
WANTLIB += goffice-0.8 guile gtkhtml-3.14 gnomeui-2
WANTLIB += GL Xxf86vm drm ffi xcb-shm
d55 1
a55 1
MODGNOME_ICON_CACHE=	Yes
d57 1
a57 1
MODGNOME_TOOLS= 	yelp
d59 4
a62 4
BUILD_DEPENDS=	${RUN_DEPENDS}
RUN_DEPENDS =	devel/slib \
		devel/slib-guile
LIB_DEPENDS =	devel/goffice \
d71 3
a73 2
MODGNOME_CPPFLAGS=	-I${X11BASE}/include
USE_GROFF =		Yes
d76 1
a76 1
DOC_DIR=		${WRKDIR}/gnucash-docs-${DOC_VERSION}
@


1.44
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/09/28 09:51:36 jasper Exp $
d11 1
a11 1
REVISION=	8
d59 1
@


1.43
log
@sync after recent gnome.port.mk CONFIGURE_ENV changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/09/20 21:04:25 jasper Exp $
d11 1
a11 1
REVISION=	7
d43 1
a43 1
WANTLIB += util xcb xcb-render xcb-render-util xml2 z
d46 1
@


1.42
log
@CONFIGURE_SHARED is now implied by gnome.port.mk, so no need to make it explicit anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/09/20 20:51:52 jasper Exp $
d73 1
a73 2
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.41
log
@switch to MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/09/19 07:39:05 ajacoutot Exp $
d71 1
a71 2
CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--disable-doxygen \
@


1.40
log
@DESKTOP_FILES => MODGNOME_DESKTOP_FILE, like it should always have been.

discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/09/16 11:13:41 espie Exp $
d59 1
a59 1
MODGNOME_HELP_FILES =	Yes
@


1.39
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/09/12 12:07:26 jasper Exp $
d57 1
a57 1
DESKTOP_FILES =	Yes
@


1.38
log
@switch the rest of the ports using gnome.port.mk over to .tar.xz where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/11/20 09:48:40 espie Exp $
d11 1
a11 1
REVISION=	6
@


1.37
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/11/05 07:57:07 sthen Exp $
d30 2
@


1.36
log
@new-style revision/lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/10/18 21:25:09 espie Exp $
d60 6
a65 6
RUN_DEPENDS =	::devel/slib \
		::devel/slib-guile
LIB_DEPENDS =	::devel/goffice \
		::lang/guile \
		::www/gtkhtml3 \
		::x11/gnome/libgnomeui
d74 1
a74 1
USE_GROFF =	Yes
@


1.35
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/10/18 13:45:24 jasper Exp $
d43 1
d62 4
a65 4
LIB_DEPENDS =	goffice-0.8::devel/goffice \
		guile::lang/guile \
		gtkhtml-3.14::www/gtkhtml3 \
		gnomeui-2.>=2400::x11/gnome/libgnomeui
@


1.34
log
@- use_x11 comes from gnome.port.mk now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/10/11 08:17:46 jasper Exp $
d73 1
@


1.33
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/10/06 17:29:36 ajacoutot Exp $
a65 1
USE_X11 =		Yes
@


1.32
log
@Unbreak by fixing WANTLIB.

spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/08/29 21:00:18 jasper Exp $
d11 1
a11 1
REVISION=	5
d37 1
a37 1
WANTLIB += glade-2.0 glib-2.0 glitz gmodule-2.0 gmp gnome-2 gnome-keyring
@


1.31
log
@- add the documentation from the standalone port into the main port

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/08/28 09:19:14 sthen Exp $
d11 1
a11 1
REVISION=	4
d33 2
a34 2
WANTLIB += Xrender art_lgpl_2 atk-1.0 avahi-client avahi-common
WANTLIB += avahi-glib bonobo-2 bonobo-activation bonoboui-2 bz2
d42 1
@


1.30
log
@at his request, remove sturm@@ as maintainer from his ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/04/09 11:55:25 ajacoutot Exp $
d5 1
a5 1
COMMENT =	personal and small-business financial-accounting software	
d9 3
a11 1
REVISION=	3
d46 3
d55 1
d57 2
a58 1
BUILD_DEPENDS =	::devel/slib \
a59 3
RUN_DEPENDS =	::devel/slib \
		::devel/slib-guile \
		::productivity/gnucash-docs
d73 12
@


1.29
log
@Fix dependencies after goffice update.

reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/03/21 11:02:02 jasper Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
a21 2

MAINTAINER =	Nikolay Sturm <sturm@@genua.de>
@


1.28
log
@- unbreak after recent goffice update, patch from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/12/21 21:03:56 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p1
d38 4
a41 4
WANTLIB += gnomecanvas-2 gnomeui-2 gnomevfs-2 gobject-2.0 gsf-1
WANTLIB += gsf-gnome-1 gthread-2.0 gtk-x11-2.0 ltdl m pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png popt
WANTLIB += pthread pthread-stubs ssl stdc++ util xcb xml2 z
d60 2
a61 1
		gtkhtml-3.14::www/gtkhtml3
@


1.27
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/10/14 21:36:11 jasper Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
d58 1
a58 1
LIB_DEPENDS =	goffice-0.6::devel/goffice \
@


1.26
log
@- bugfix update of gnucash to 2.2.9
* unbreak after recent guile update

"probally ok" sturm@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/08/10 06:34:09 kili Exp $
d9 1
@


1.25
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/06/19 12:35:14 sthen Exp $
d8 1
a8 2
GNOME_VERSION =	2.2.8
PKGNAME =	${DISTNAME}p5
d30 11
a40 11
WANTLIB =	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite \
		Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr \
		Xrender art_lgpl_2 atk-1.0 bonobo-2 \
		bonobo-activation bonoboui-2 bz2 c cairo crypto dbus-1 \
		dbus-glib-1 enchant expat fontconfig freetype gailutil \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 \
		glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring gnomecanvas-2 \
		gnomeui-2 gnomevfs-2 gobject-2.0 gsf-1 gsf-gnome-1 gthread-2.0 \
		gtk-x11-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre \
		pixman-1 png popt pthread pthread-stubs ssl stdc++ util xcb xml2 z \
		avahi-client avahi-common avahi-glib
d58 1
a58 1
		guile,guile-ltdl::lang/guile \
@


1.24
log
@sync wantlib, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/06/11 18:27:02 ajacoutot Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p4
d40 1
a40 1
		pixman-1 png popt pthread ssl stdc++ util xml2 z \
@


1.23
log
@Bump after recent gconf2 MODULE change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/06/08 16:58:16 ajacoutot Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p3
d40 2
a41 1
		pixman-1 png popt pthread ssl stdc++ util xml2 z
@


1.22
log
@Bump after recent gconf2 MODULE changes.

"yep, bumps are cheap" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/06/07 06:41:26 ajacoutot Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p2
@


1.21
log
@Convert to using the new gconf2.port.mk module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/01/21 10:50:12 ajacoutot Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p1
@


1.20
log
@- regen WANTLIB after libgnome esound support removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/12/29 17:03:46 sturm Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p0
d36 1
a36 1
		gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 \
d46 3
a48 1
		x11/gnome
d50 1
d66 1
a66 3
			--disable-ofx \
			--disable-schemas-install \
			--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/gnucash
@


1.19
log
@unbreak by updating to gnucash 2.2.8
takeover maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.55 2008/08/23 15:28:00 ajacoutot Exp $
d9 1
d33 1
a33 1
		Xrender art_lgpl_2 atk-1.0 audiofile bonobo-2 \
d35 1
a35 1
		dbus-glib-1 enchant esd expat fontconfig freetype gailutil \
@


1.18
log
@db.=4 -> db.>=4  in preparation of db4 update

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/09/15 21:28:22 merdely Exp $
d3 1
a3 1
BROKEN= 	needs an update
d5 1
a5 1
NOT_FOR_ARCHS=	${LP64_ARCHS}
d7 2
a8 68
COMMENT=	Quicken-like money and finance manager
DISTNAME=	gnucash-1.8.12
PKGNAME=	${DISTNAME}p3
DOCVER=		1.8.5
CATEGORIES=	x11/gnome productivity


DISTFILES=	${DISTNAME}${EXTRACT_SUFX}

MASTER_SITE_GNUCASH=	http://www.gnucash.org/pub/gnucash/ \
		http://www.linas.org/pub/gnucash/gnucash/
MASTER_SITES= ${MASTER_SITE_GNUCASH:=sources/stable/} \
		${MASTER_SITE_GNOME:=sources/gnucash/1.8/} \
		 ${MASTER_SITE_SOURCEFORGE:=gnucash/}

HOMEPAGE=	http://www.gnucash.org/

SHARED_LIBS=	gnc-app-file-gnome	0.0


WANTLIB=	db gnomesupport wrap gnomecanvaspixbuf 
WANTLIB+=	ORBitCosNaming ICE glib audiofile IIOP jpeg z
WANTLIB+=	ORBit ungif X11 oaf freetype gconf-1 gmodule SM
WANTLIB+=	Xext esd tiff xml png gdk_imlib guile guile-ltdl Xi
WANTLIB+=	gconf-gtk-1 art_lgpl ORBitutil gtk gdk ltdl m ghttp gnomeui
WANTLIB+=	gdk_pixbuf gnomeprint gtkhtml-1.1 popt bonobo bonobox

MAINTAINER=	Todd T. Fries <todd@@OpenBSD.org>

PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=		Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES=	devel/gettext

CONFIGURE_STYLE= gnu

USE_X11=	Yes
USE_GMAKE=	Yes
USE_LIBTOOL=	Yes
LIBTOOL_FLAGS+=	--tag=disable-static
CONFIGURE_ARGS+= ${ENABLE_SHARED} \
		--with-glib-config=${LOCALBASE}/bin/glib-config \
		--enable-nls \
		--without-included-gettext \
		--disable-guppi \
		--disable-xim \
		--with-libglade-config=${LOCALBASE}/bin/libglade-config
CONFIGURE_ENV+=  CPPFLAGS="${CFLAGS}" CFLAGS="${CFLAGS}" \
		LDFLAGS="${LDFLAGS}" \
		LIBS="${LDFLAGS}"

LIB_DEPENDS=	glade.>=4,glade-gnome::devel/libglade,gnome \
		gnome.>=36::x11/gnome/libs \
		gal.>=16::devel/gal \
		gnomeprint.>=16::x11/gnome/print \
		gdk_pixbuf.>=2::graphics/gdk-pixbuf \
		lib/db4/db.>=4:db-4.*:databases/db/v4 \
		gwrap-glib,gwrap-wct::devel/g-wrap \
		gtkhtml-1.1.>=3.5::www/gtkhtml
BUILD_DEPENDS=	::devel/swig \
		::x11/gnome/print \
		::graphics/Guppi \
		::databases/db/v4 \
		::devel/slib-guile \
		::devel/libtool \
		::lang/guile
d10 41
a50 1
RUN_DEPENDS+=	::devel/slib \
d52 15
a66 11
		::devel/libtool \
		::lang/guile

CFLAGS=-I${LOCALBASE}/include -I${X11BASE}/include -I${LOCALBASE}/share/libtool/libltdl -I${LOCALBASE}/include/libgtkhtml-1.1
LDFLAGS=-pthread -L${LOCALBASE}/lib -L${X11BASE}/lib -lintl -liconv

LIBPATH=/usr/lib:/usr/X11R6/lib:${LOCALBASE}/lib

MAKE_FLAGS += DB_LIBS=-ldb LDFLAGS="${LDFLAGS}" LIBS="${LDFLAGS}"
MAKE_ENV += LIBRARY_PATH="${LIBPATH}"
MAKE_ENV += LD_LIBRARY_PATH="${LIBPATH}"
@


1.17
log
@Remove surrounding quotes in COMMENT/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/05/31 15:52:28 jasper Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
d65 1
a65 1
		lib/db4/db.=4:db-4.*:databases/db/v4 \
@


1.16
log
@mark broken, this port badly needs an update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/12/22 15:47:41 steven Exp $
d3 1
a3 1
BROKEN= 	"needs an update"
d7 1
a7 1
COMMENT=	"Quicken-like money and finance manager"
@


1.15
log
@bump PKGNAME after changing RUN_DEPENDS
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.14 2006/12/16 12:22:34 espie Exp $
@


1.14
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/11/20 20:21:22 bernd Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
@


1.13
log
@Fix BUILD_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/11/13 12:51:15 steven Exp $
d72 1
a72 2
		::lang/guile \
		::devel/pkgconfig
d77 1
a77 2
		::lang/guile \
		::devel/pkgconfig
@


1.12
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/09/18 11:59:59 espie Exp $
d66 4
a69 4
BUILD_DEPENDS=	swig::devel/swig \
		gnome-print::x11/gnome/print \
		guppi::graphics/Guppi \
		db::databases/db/v4 \
@


1.11
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/08/03 23:28:11 espie Exp $
d43 1
@


1.10
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/04/07 14:00:02 todd Exp $
d30 1
a30 1
WANTLIB+=	gdk_pixbuf gnomeprint gtkhtml-1.1.0.0 popt bonobo bonobox
@


1.9
log
@make slib-guile a runtime depend also, bump pkgname
pointed out by several
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/02/20 19:27:24 steven Exp $
d57 5
a61 5
LIB_DEPENDS=	glade.4,glade-gnome::devel/libglade,gnome \
		gnome.36::x11/gnome/libs \
		gal.16::devel/gal \
		gnomeprint.16::x11/gnome/print \
		gdk_pixbuf.2::graphics/gdk-pixbuf \
d64 1
a64 1
		gtkhtml-1.1.3.5::www/gtkhtml
@


1.8
log
@fix WANTLIB and LIB_DEPENDS again
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/02/17 14:07:44 todd Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d75 1
@


1.7
log
@from Steven Mestdagh steven dot mestdagh at esat dot kuleuven dot be
o do not use gnucash libintl
o fix WANTLIB
o use libtool flag to not build static modules

from maint
o update to 1.8.12
  (many fixes, see http://gnucash.org/ for details)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/12/29 22:44:00 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}
d26 1
a26 1
WANTLIB+=	ORBitCosNaming ICE gwrap-wct glib audiofile IIOP jpeg z
d28 1
a28 1
WANTLIB+=	Xext esd gwrap-glib tiff xml png gdk_imlib guile guile-ltdl Xi
d63 1
a63 1
		gw-glib,gw-standard,gw-wct,gwrap-glib,gwrap-wct::devel/g-wrap \
@


1.6
log
@build modules w/o version number, so they are not taken as libraries
USE_LIBTOOL
fix PLIST, now that some files are found in guile's installation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/11/27 10:54:10 sturm Exp $
d6 3
a8 2
DISTNAME=	gnucash-1.8.11
PKGNAME=	${DISTNAME}p1
d11 3
a14 1
		ftp://ftp.gnucash.org/pub/gnucash/ \
d17 2
a18 1
		${MASTER_SITE_GNOME:=sources/gnucash/1.8/}
d22 3
d27 2
a28 2
WANTLIB+=	iconv ORBit ungif X11 oaf freetype intl gconf-1 gmodule SM
WANTLIB+=	Xext esd gwrap-glib tiff xml png gdk_imlib guile Xi
d30 1
a30 1
WANTLIB+=	gdk_pixbuf gnomeprint gtkhtml-1.1.0.0
d39 2
d45 1
d48 5
a52 2
		--enable-nls --without-included-gettext \
		--disable-guppi --with-libglade-config=${LOCALBASE}/bin/libglade-config --disable-xim
d69 1
a69 1
		::devel/slib \
d82 1
a82 1
LIBPATH=/usr/lib:/usr/X11R6/lib:/usr/local/lib
@


1.5
log
@fix CATEGORIES

from Moritz Grimm <mlist at scapa.dnsalias.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/11/12 12:49:59 kurt Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d9 1
d35 1
@


1.4
log
@remove unneeded dlopen(0,...) work-around. okay todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/04/04 22:49:50 todd Exp $
d8 1
a8 1
CATEGORIES=	gnome productivity
@


1.3
log
@wrong variable, this now properly stops building on LP64_ARCHS until fixed and
removed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/03/08 22:26:45 todd Exp $
d7 1
@


1.2
log
@not 64bit friendly, from nikolay
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/02/24 01:47:15 todd Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${LP64}
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2001/03/26 15:58:18 todd Exp $
@


1.1.1.1
log
@Import gnucash 1.8.11

Quicken-like money and finance manager

If you've been looking for a way to manage your personal or business finances
using Free Software, you've found it! Designed to be easy to use, yet powerful
and flexible, GnuCash allows you to track bank accounts, stocks, income and
expenses. As quick and intuitive to use as a checkbook register, it is based
on professional accounting principles to ensure balanced books and accurate
reports. GnuCash is backed by an active development community and is
blossoming into a full-fledged accounting system.

Special thanks to Derek Atkins, of gnucash, who provided a diff for BSD dlsym
issues that makes this a LOT more stable.
@
text
@@
