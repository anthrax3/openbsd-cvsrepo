head	1.27;
access;
symbols
	OPENBSD_6_1:1.27.0.4
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.2
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.20.0.2
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.14.0.4
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	ajacoutot_20091008:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2016.03.18.23.12.19;	author naddy;	state Exp;
branches;
next	1.26;
commitid	KZAl4KEiw6a3Jixw;

1.26
date	2016.03.11.19.59.16;	author naddy;	state Exp;
branches;
next	1.25;
commitid	pguKLBEFv33DrgKU;

1.25
date	2015.08.21.14.42.50;	author jasper;	state Exp;
branches;
next	1.24;
commitid	xH2LQNFX76SKF5hF;

1.24
date	2015.05.05.17.00.18;	author sthen;	state Exp;
branches;
next	1.23;
commitid	ukCYGVBlglFzny8e;

1.23
date	2015.04.04.09.21.03;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	kS3kwKZogsvzYmEY;

1.22
date	2014.09.13.16.36.54;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	N2TalFGi4jKRwS2u;

1.21
date	2014.07.09.16.49.35;	author jasper;	state Exp;
branches;
next	1.20;
commitid	DrFfqEFlhFyZpgej;

1.20
date	2013.09.27.17.49.09;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.04.02.16.16.47;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.21.08.48.53;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.11.11.37.55;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2013.02.06.14.23.06;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.21.14.48.06;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.11.03.22.21.21;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2011.10.29.08.12.32;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.09.16.11.13.42;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.21.07.06.07;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.14.09.17.02;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.20.09.48.40;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.05.07.57.07;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.24.21.33.27;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.11.08.17.46;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2009.12.31.10.27.30;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.12.29.23.25.58;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2009.12.29.22.49.12;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2009.12.21.21.03.56;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.08.16.39.37;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.10.08.16.39.37;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.27
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@# $OpenBSD: Makefile,v 1.26 2016/03/11 19:59:16 naddy Exp $

COMMENT=	addressbook manager

DISTNAME=	rubrica2-2.0.7
REVISION=	11
EPOCH=		0

CATEGORIES=	productivity x11

EXTRACT_SUFX=	.tar.bz2

SHARED_LIBS +=  ral                  0.0      # .1.0

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xi
WANTLIB += Xinerama Xrandr Xrender Xxf86vm atk-1.0 c cairo dbus-1
WANTLIB += dbus-glib-1 drm expat ffi fontconfig freetype gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 graphite2 gthread-2.0 gtk-x11-2.0 harfbuzz lzma m
WANTLIB += notify pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs stdc++ xcb xcb-render xcb-shm xml2
WANTLIB += z

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=rubrica.berlios/}

MODULES=	devel/gettext \
		textproc/intltool \
		devel/gconf2

USE_GMAKE=	Yes

MODGCONF2_SCHEMAS_DIR= rubrica2

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib" \
		CPPFLAGS="-I${LOCALBASE}/include"

RUN_DEPENDS=	devel/desktop-file-utils \
		misc/shared-mime-info

LIB_DEPENDS=	devel/libnotify>=0.7.2 \
		devel/libglade2

pre-configure:
	${SUBST_CMD} ${WRKSRC}/configure
	@@find ${WRKSRC} -name Makefile.in -exec sed -i \
		-e 's,-Wall -g,-Wall,g;' \
		-e 's,-Wmissing-prototypes -g,-Wmissing-prototypes,g' {} \;

post-install:
	ln -sf ${LOCALBASE}/share/icons/gnome \
		${PREFIX}/share/pixmaps/rubrica2/22x22/hicolor

.include <bsd.port.mk>
@


1.26
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.25 2015/08/21 14:42:50 jasper Exp $

SHARED_ONLY=	Yes
@


1.25
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/05/05 17:00:18 sthen Exp $
a39 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
@


1.24
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/04/04 09:21:03 ajacoutot Exp $
d52 1
a52 1
	@@find ${WRKSRC} -name Makefile.in -exec perl -pi \
@


1.23
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/09/13 16:36:54 ajacoutot Exp $
d8 1
a8 1
REVISION=	10
d20 9
a29 9

WANTLIB += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0
WANTLIB += c cairo drm expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glade-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 gtk-x11-2.0 m notify pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png pthread pthread-stubs
WANTLIB += xcb xcb-render xcb-shm xml2 z
WANTLIB += dbus-1 dbus-glib-1 ffi stdc++
@


1.22
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/07/09 16:49:35 jasper Exp $
d8 1
a8 1
REVISION=	9
@


1.21
log
@- remove unreachable homepages on berlios and add a working one where applicable
- move master sites to the berliosbot created sourceforge projects
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/09/27 17:49:09 ajacoutot Exp $
d40 1
a40 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--enable-gtk-doc=no
a42 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.20
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/04/02 16:16:47 ajacoutot Exp $
d8 1
a8 1
REVISION=	8
a14 2
HOMEPAGE=	http://rubrica.berlios.de

d20 1
a20 1
MASTER_SITES=	${MASTER_SITE_BERLIOS:=rubrica/}
@


1.19
log
@No need to explicitely depend on gnome-icon-theme anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/21 08:48:53 ajacoutot Exp $
d8 1
a8 1
REVISION=	7
@


1.18
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/11 11:37:55 espie Exp $
d8 1
a8 1
REVISION=	6
d54 1
a54 2
		misc/shared-mime-info \
		x11/gnome/icon-theme
@


1.17
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/02/06 14:23:06 ajacoutot Exp $
a37 1
USE_LIBTOOL=	Yes
@


1.16
log
@Quiet gconftool-2:
gconf_ping() will try to shutdown gconfd, but since installing pkg is
done as root, there is not gconfd nor dbus that can be started when
DISPLAY isn't set and an annoying warning is issued.

discussed with espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/09/21 14:48:06 ajacoutot Exp $
a20 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.15
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/11/03 22:21:21 jasper Exp $
d8 1
a8 1
REVISION=	5
@


1.14
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/10/29 08:12:32 ajacoutot Exp $
d50 6
@


1.13
log
@Sync dependencies after gconf2 lost its dependency to ORBit.
This should cover all fallout but there may be some dark corners which I
missed...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/09/16 11:13:42 espie Exp $
d8 1
a8 1
REVISION=	4
d34 1
@


1.12
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/04/21 07:06:07 ajacoutot Exp $
d8 1
a8 1
REVISION=	3
d27 1
a27 1
WANTLIB += GL ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp
@


1.11
log
@Fix build/run with new libnotify.

tested in a bulk by landry, thanks!
ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/03/14 09:17:02 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.10
log
@fix various typos, from Anthony J. Bentley with a few tweaks by myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/20 09:48:40 espie Exp $
d8 1
a8 1
REVISION=	1
d27 7
a33 7
WANTLIB += ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB += Xfixes Xi Xinerama Xrandr Xrender atk-1.0 c cairo dbus-1
WANTLIB += dbus-glib-1 expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB += gtk-x11-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread xml2 z pthread-stubs xcb
WANTLIB += notify glade-2.0
d54 1
a54 1
LIB_DEPENDS=	devel/libnotify \
@


1.9
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/05 07:57:07 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.8
log
@new-style revision/lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/24 21:33:27 ajacoutot Exp $
d50 3
a52 3
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils \
		:shared-mime-info-*:misc/shared-mime-info \
		::x11/gnome/icon-theme
d54 2
a55 2
LIB_DEPENDS=	::devel/libnotify \
		::devel/libglade2
@


1.7
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/10/11 08:17:46 jasper Exp $
d33 1
d54 2
a55 2
LIB_DEPENDS=	notify::devel/libnotify \
		glade-2.0.>=0::devel/libglade2
@


1.6
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/12/31 10:27:30 ajacoutot Exp $
a37 1
USE_X11=	Yes
@


1.5
log
@Update to the latest rubrica2 release: 2.0.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/12/29 23:25:58 jasper Exp $
d8 2
a9 1
PKGNAME=	${DISTNAME}v0
d30 1
a30 1
WANTLIB += gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0
@


1.4
log
@- revert previous update, to what turned out to be a development version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/12/21 21:03:56 ajacoutot Exp $
d7 2
a8 2
DISTNAME=	rubrica2-2.0.6
PKGNAME=	${DISTNAME}p1v0
@


1.3
log
@- update rubrica2 to 2.1.6
@
text
@d7 2
a8 2
DISTNAME=	rubrica2-2.1.6
SHARED_LIBS +=  ral                  0.0      # .1.0
d12 5
a16 1
HOMEPAGE=	http://rubrica.berlios.de/
a24 1
EXTRACT_SUFX=	.tar.bz2
d33 3
a35 3
MODULES=	devel/gconf2 \
		devel/gettext \
		textproc/intltool
a39 1
LIBTOOL_FLAGS=	--tag=disable-static
d45 1
a45 2
		--enable-gtk-doc=no \
		--enable-static=no
@


1.2
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/10/08 16:39:37 ajacoutot Exp $
d7 2
a8 2
DISTNAME=	rubrica2-2.0.6
PKGNAME=	${DISTNAME}p0
d12 1
a12 5
EXTRACT_SUFX=	.tar.bz2

HOMEPAGE=	http://rubrica.berlios.de

SHARED_LIBS +=  ral                  0.0      # .1.0
d21 1
d30 3
a32 3
MODULES=	devel/gettext \
		textproc/intltool \
		devel/gconf2
d37 1
d43 2
a44 1
		--enable-gtk-doc=no
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 2
@


1.1.1.1
log
@Import rubrica2-2.0.6

Rubrica is an addressbook manager for the GNOME Environment.  It allows
you to add personal data (name, surname, address, etc.), web links, irc
and email addresses, telephone numbers, job information (company where
contact works, company infos, contact's assigment, etc.) and notes.

Rubrica can import/export addressbooks from/to GnomeCard, KAddressbook,
Evolution, Csv file format, and an export addressboks to HTML and text
format.

Reworked from an original submission by landry@@ ages and ages ago...
@
text
@@
