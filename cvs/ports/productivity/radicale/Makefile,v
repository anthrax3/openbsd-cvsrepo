head	1.29;
access;
symbols
	OPENBSD_6_1:1.27.0.6
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.4
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.21.0.2
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.20.0.2
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.17.0.4
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	sthen20110415:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.29
date	2017.05.16.17.15.40;	author jasper;	state Exp;
branches;
next	1.28;
commitid	FUOPwyRPKx6kruYg;

1.28
date	2017.05.16.17.13.52;	author jasper;	state Exp;
branches;
next	1.27;
commitid	XsQxX6RA7Ac1OH4o;

1.27
date	2016.01.17.23.08.18;	author sthen;	state Exp;
branches;
next	1.26;
commitid	hpwZxWZ5v4KWIq1J;

1.26
date	2016.01.08.22.37.51;	author sthen;	state Exp;
branches;
next	1.25;
commitid	SdPE4mfGsAkJtJnc;

1.25
date	2015.11.30.20.17.53;	author jung;	state Exp;
branches;
next	1.24;
commitid	hLicMRDNQpvppqvJ;

1.24
date	2015.04.02.14.21.16;	author jasper;	state Exp;
branches;
next	1.23;
commitid	4Dkfcsk2uZtFDSwy;

1.23
date	2014.12.15.13.27.13;	author ian;	state Exp;
branches;
next	1.22;
commitid	Uebw44TnYkDnTVYS;

1.22
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.21;
commitid	jyyOLTDxRdjpw44n;

1.21
date	2014.03.26.10.17.02;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2013.10.21.09.47.19;	author jung;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.11.11.37.55;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.08.10.38.01;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2012.05.23.18.02.09;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2012.01.12.00.19.54;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2011.10.10.08.19.43;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.16.11.13.42;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.02.09.56.02;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2011.08.22.08.43.54;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2011.08.22.07.12.14;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2011.08.20.15.26.52;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.08.20.15.00.04;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2011.08.19.20.35.34;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2011.06.08.17.37.46;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2011.06.02.19.57.16;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2011.06.02.13.41.40;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.05.06.15.35.47;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.17.14.54.47;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2011.04.15.16.44.27;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.15.15.47.17;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.04.15.15.47.17;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.29
log
@various tweaks:
- install the 'rights' file and update README accordingly
- tune down default logging from DEBUG to INFO

MAINTAINER timed-out
ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.28 2017/05/16 17:13:52 jasper Exp $

COMMENT =	simple CalDAV calendar server

MODPY_EGG_VERSION = 1.1.2
DISTNAME =	Radicale-${MODPY_EGG_VERSION}
PKGNAME =	${DISTNAME:L}
CATEGORIES =	productivity net
REVISION =	0

HOMEPAGE =	http://radicale.org/

MAINTAINER =	Sergey Bronnikov <estetus@@gmail.com>

# GPLv3+
PERMIT_PACKAGE_CDROM =	Yes

MODULES =	lang/python
MODPY_PI =	Yes
MODPY_SETUPTOOLS = Yes

RUN_DEPENDS =	security/py-passlib

NO_TEST =	Yes
SUBST_VARS +=	VARBASE

pre-configure:
	@@${SUBST_CMD} ${WRKSRC}/radicale/config.py

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/radicale
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/radicale
	cd ${WRKSRC}; ${INSTALL_DATA} COPYING NEWS.rst README \
	    ${PREFIX}/share/doc/radicale/
	${SUBST_DATA} ${WRKSRC}/config \
	    ${PREFIX}/share/examples/radicale/config
	${INSTALL_DATA} ${WRKSRC}/{logging,rights} \
	    ${PREFIX}/share/examples/radicale/
	touch ${PREFIX}/share/examples/radicale/log

.include <bsd.port.mk>
@


1.28
log
@Security update to radicale-1.1.2 addressing CVE-2017-8342:

"Radicale before 1.1.2 and 2.x before 2.0.0rc2 is prone to timing oracles and
simple brute-force attacks when using the htpasswd authentication method."

MAINTAINER timed-out
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/01/17 23:08:18 sthen Exp $
d9 1
d37 2
a38 2
	${INSTALL_DATA} ${WRKSRC}/logging \
	    ${PREFIX}/share/examples/radicale/logging
@


1.27
log
@update to radicale-1.1.1, "Fix the owner_write rights rule"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/01/08 22:37:51 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 1.1.1
@


1.26
log
@security update to Radicale 1.1, see http://radicale.org/news/ for more
info. (maintainer timeout, though I didn't wait very long due to the
security issues).

- while there, remove unneeded MODPY_ADJ_FILES (spotted by shadchin@@),
use BUILD_DEPENDS not LIB_DEPENDS for a python module dependency,
and fix missing VARBASE subst in the sample config file.

Note that there was a NON-BACKWARDS-COMPATIBLE change: for users who have
added a custom user rights file, previously the most permissive rights were
allowed; now the first section in the file matching the path and user
takes priority instead.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/11/30 20:17:53 jung Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 1.1
@


1.25
log
@update radicale to 1.0.1

brypt is supported through passlib now, so add lib dependency and drop patch.

ok sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/04/02 14:21:16 jasper Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 1.0.1
d17 3
a19 1
MODPY_SETUPTOOLS =	Yes
d21 1
a21 1
MODPY_PI =		Yes
d23 2
a24 5
MODULES =		lang/python
MODPY_ADJ_FILES =	radicale.py
LIB_DEPENDS =		security/py-passlib

NO_TEST =		Yes
@


1.24
log
@- switch to MODPY_PI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/12/15 13:27:13 ian Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.9
d17 2
d23 1
a23 1
LIB_DEPENDS =		security/py-bcrypt
@


1.23
log
@Upgrade to radicale-0.9, from Sergey Bronnikov (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/08/10 09:58:06 espie Exp $
d17 1
a17 1
MASTER_SITES =		${MASTER_SITE_PYPI:=R/Radicale/}
@


1.22
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/03/26 10:17:02 sthen Exp $
d5 1
a5 2
MODPY_EGG_VERSION = 0.8
REVISION =	0
@


1.21
log
@Patch radicale's htpasswd parser to support bcrypt passwords, from
Francisco de Borja Lopez Rio.

The htpasswd parser isn't very flexible and only normally handles one
encryption method in the file. So I've also added a patch to recognise
{SHA} from the hash string so that people using this can migrate their
file to bcrypt.

Update README with new htpasswd syntax and information about bcrypt and
migrating.

OK ian@@, Sergey Bronnikov (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/10/21 09:47:19 jung Exp $
d34 1
a34 1
	${SUBST_CMD} -g ${SHAREGRP} -o ${SHAREOWN} -c ${WRKSRC}/config \
@


1.20
log
@update radicale to version 0.8

OK shen@@ ian@@ and Sergey (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/11 11:37:55 espie Exp $
d6 1
d22 1
@


1.19
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/08 10:38:01 jasper Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.7.1
@


1.18
log
@- update to radicale-0.7.1

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/05/23 18:02:09 sthen Exp $
a15 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d22 1
a22 1
NO_REGRESS =		Yes
@


1.17
log
@update to radicale 0.7, from maintainer Sergey Bronnikov
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/01/12 00:19:54 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.7
@


1.16
log
@update to radicale 0.6.4, including significant performance improvement
for REPORT requests with large calendars. ok maintainer and ian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/10/10 08:19:43 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.6.4
@


1.15
log
@update to radicale 0.6.2, from Mark Peoples via maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/16 11:13:42 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.6.2
@


1.14
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/02 09:56:02 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.6.1
a7 1
REVISION=		0
@


1.13
log
@update to radicale-0.6.1, looks good to maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/08/22 08:43:54 sthen Exp $
d8 1
@


1.12
log
@htpasswd -c isn't so great as a general-purpose option, it truncates an
already-existing file; adapt the README to only suggest it for a new file.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/08/22 07:12:14 jasper Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.6
a7 1
REVISION =	1
d33 1
a33 1
	cd ${WRKSRC}; ${INSTALL_DATA} COPYING NEWS README \
d37 3
@


1.11
log
@Tweak README:
- fix a variable name after recent config file change
- slightly better htpasswd command

	ok MAINTAINER sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/08/20 15:26:52 sthen Exp $
d8 1
a8 1
REVISION =	0
@


1.10
log
@drop distfile mirror, pypi keeps old versions anyway.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/08/20 15:00:04 jasper Exp $
d8 1
@


1.9
log
@- fix MASTER_SITES, this is actually hosted on pypi..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/08/19 20:35:34 sthen Exp $
d20 1
a20 2
MASTER_SITES =		${MASTER_SITE_PYPI:=R/Radicale/} \
			http://spacehopper.org/mirrors/
@


1.8
log
@update radicale to 0.6, amongst other things adding support for ical4/iphone.
ok ian@@, Sergey Bronnikov (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/06/08 17:37:46 jasper Exp $
d20 1
a20 1
MASTER_SITES =		${HOMEPAGE}src/radicale/ \
@


1.7
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/06/02 19:57:16 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.5
a8 1
REVISION =	1
d10 1
a10 1
HOMEPAGE =	http://www.radicale.org/
@


1.6
log
@mirror distfile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/06/02 13:41:40 ajacoutot Exp $
d9 1
a9 1
REVISION =	0
@


1.5
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/05/06 15:35:47 sthen Exp $
d21 2
a22 1
MASTER_SITES =		${HOMEPAGE}src/radicale/
@


1.4
log
@update to 0.5, from Mark Peoples, maintainer timeout

* Calendar depth
* iPhone support
* MacOS and Windows support
* HEAD requests management
* htpasswd user from calendar path

ok ian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/04/17 14:54:47 sthen Exp $
d9 1
@


1.3
log
@- adjust default directories for ssl keys, /etc/ssl/private isn't
going to be accessible by the uid running radicale

- add a readme, showing people how to setup auth/crypto

with/ok ian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/04/15 16:44:27 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION = 0.4
a7 1
REVISION =	1
@


1.2
log
@- run SUBST_CMD on config.py, fixes htpasswd auth problem reported by ian@@
- change default password hash to sha1; add example htpasswd(1) usage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/04/15 15:47:17 sthen Exp $
d8 1
a8 1
REVISION =	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
d27 3
@


1.1.1.1
log
@Import ports/productivity/radicale, a simple CalDAV server.
Tweaked from a submission from maintainer Sergey Bronnikov, ok landry@@

The Radicale Project is a complete CalDAV calendar server solution,
capable of making multiple calendars available to local and remote
users, with optional authentication policies. Calendars can be
viewed and edited by a calendar client such as Sunbird or Evolution.

The Radicale Project aims to be a light solution, easy to use, easy
to install, easy to configure. As a consequence, it requires few
software dependencies and is pre-configured to work out-of-the-box.
@
text
@@
