head	1.10;
access;
symbols
	OPENBSD_6_0:1.10.0.4
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.8.0.6
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.6
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.4
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	sthen20110415:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2016.01.08.22.37.52;	author sthen;	state Exp;
branches;
next	1.9;
commitid	SdPE4mfGsAkJtJnc;

1.9
date	2015.11.30.20.17.53;	author jung;	state Exp;
branches;
next	1.8;
commitid	hLicMRDNQpvppqvJ;

1.8
date	2014.12.15.13.27.13;	author ian;	state Exp;
branches;
next	1.7;
commitid	Uebw44TnYkDnTVYS;

1.7
date	2014.03.26.10.17.02;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2013.10.21.09.47.19;	author jung;	state Exp;
branches;
next	1.5;

1.5
date	2012.05.23.18.02.09;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2011.08.19.20.35.34;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.17.14.54.47;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2011.04.15.16.44.27;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.15.15.47.17;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.04.15.15.47.17;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.10
log
@security update to Radicale 1.1, see http://radicale.org/news/ for more
info. (maintainer timeout, though I didn't wait very long due to the
security issues).

- while there, remove unneeded MODPY_ADJ_FILES (spotted by shadchin@@),
use BUILD_DEPENDS not LIB_DEPENDS for a python module dependency,
and fix missing VARBASE subst in the sample config file.

Note that there was a NON-BACKWARDS-COMPATIBLE change: for users who have
added a custom user rights file, previously the most permissive rights were
allowed; now the first section in the file matching the path and user
takes priority instead.
@
text
@$OpenBSD: patch-config,v 1.9 2015/11/30 20:17:53 jung Exp $
--- config.orig	Thu Nov  5 18:01:41 2015
+++ config	Tue Jan  5 10:25:26 2016
@@@@ -28,10 +28,10 @@@@
 #ssl = False
 
 # SSL certificate path
-#certificate = /etc/apache2/ssl/server.crt
+certificate = ${SYSCONFDIR}/radicale/server.crt
 
 # SSL private key
-#key = /etc/apache2/ssl/server.key
+key = ${SYSCONFDIR}/radicale/private/server.key
 
 # SSL Protocol used. See python's ssl module for available values
 #protocol = PROTOCOL_SSLv23
@@@@ -80,11 +80,11 @@@@
 #custom_handler =
 
 # Htpasswd filename
-#htpasswd_filename = /etc/radicale/users
+htpasswd_filename = ${SYSCONFDIR}/radicale/users
 
 # Htpasswd encryption method
 # Value: plain | sha1 | ssha | crypt | bcrypt | md5
-#htpasswd_encryption = crypt
+htpasswd_encryption = bcrypt
 
 # LDAP server URL, with protocol and port
 #ldap_url = ldap://localhost:389/
@@@@ -146,7 +146,7 @@@@
 #custom_handler =
 
 # File for rights management from_file
-#file = ~/.config/radicale/rights
+file = ${SYSCONFDIR}/config/radicale/rights
 
 
 [storage]
@@@@ -163,7 +163,7 @@@@
 #custom_handler =
 
 # Folder for storing local collections, created if not present
-#filesystem_folder = ~/.config/radicale/collections
+filesystem_folder = ${VARBASE}/db/radicale/calendars
 
 # Database URL for SQLAlchemy
 # dialect+driver://user:password@@host/dbname[?key=value..]
@@@@ -178,7 +178,7 @@@@
 # If no config is given, simple information is printed on the standard output
 # For more information about the syntax of the configuration file, see:
 # http://docs.python.org/library/logging.config.html
-#config = /etc/radicale/logging
+config = ${SYSCONFDIR}/radicale/logging
 # Set the default logging level to debug
 #debug = False
 # Store all environment variables (including those set in the shell)
@


1.9
log
@update radicale to 1.0.1

brypt is supported through passlib now, so add lib dependency and drop patch.

ok sthen
@
text
@d1 3
a3 3
$OpenBSD: patch-config,v 1.8 2014/12/15 13:27:13 ian Exp $
--- config.orig	Wed Aug 19 15:06:33 2015
+++ config	Fri Nov 27 22:12:29 2015
d25 1
a25 1
-# Value: plain | sha1 | ssha | crypt
a26 1
+# Value: plain | sha1 | ssha | crypt | bcrypt
@


1.8
log
@Upgrade to radicale-0.9, from Sergey Bronnikov (maintainer)
@
text
@d1 6
a6 6
$OpenBSD: patch-config,v 1.7 2014/03/26 10:17:02 sthen Exp $
--- config.orig	Wed Aug  6 13:29:21 2014
+++ config	Sun Nov 16 18:55:14 2014
@@@@ -23,9 +23,9 @@@@ pid =
 # SSL flag, enable HTTPS protocol
 ssl = False
d8 1
a8 1
-certificate = /etc/apache2/ssl/server.crt
d10 1
d12 1
a12 1
-key = /etc/apache2/ssl/server.key
d14 1
d16 3
a18 4
 protocol = PROTOCOL_SSLv23
 # Ciphers available. See python's ssl module for available ciphers
@@@@ -56,10 +56,10 @@@@ type = None
 custom_handler =
d21 1
a21 1
-htpasswd_filename = /etc/radicale/users
d23 1
d25 3
a27 3
-# Value: plain | sha1 | crypt
-htpasswd_encryption = crypt
+# Value: plain | sha1 | crypt | bcrypt
d31 3
a33 3
 ldap_url = ldap://localhost:389/
@@@@ -113,7 +113,7 @@@@ type = None
 custom_handler =
d36 1
a36 1
-file = ~/.config/radicale/rights
d41 2
a42 2
@@@@ -125,7 +125,7 @@@@ type = filesystem
 custom_handler =
d45 2
a46 2
-filesystem_folder = ~/.config/radicale/collections
+filesystem_folder = /var/db/radicale/calendars
d50 1
a50 1
@@@@ -139,7 +139,7 @@@@ database_url =
d54 1
a54 1
-config = /etc/radicale/logging
d57 1
a57 1
 debug = False
@


1.7
log
@Patch radicale's htpasswd parser to support bcrypt passwords, from
Francisco de Borja Lopez Rio.

The htpasswd parser isn't very flexible and only normally handles one
encryption method in the file. So I've also added a patch to recognise
{SHA} from the hash string so that people using this can migrate their
file to bcrypt.

Update README with new htpasswd syntax and information about bcrypt and
migrating.

OK ian@@, Sergey Bronnikov (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-config,v 1.6 2013/10/21 09:47:19 jung Exp $
--- config.orig	Fri Jun 28 15:37:37 2013
+++ config	Tue Mar 25 15:04:31 2014
@@@@ -22,9 +22,9 @@@@ pid =
d13 5
a17 5
 # Reverse DNS to resolve client address in logs
 dns_lookup = True
 # Root URL of Radicale (starting and ending with a slash)
@@@@ -51,10 +51,10 @@@@ public_users = public
 private_users = private
d30 2
a31 2
@@@@ -100,7 +100,7 @@@@ http_password_parameter =
 type = None
d39 2
a40 2
@@@@ -109,7 +109,7 @@@@ file = ~/.config/radicale/rights
 type = filesystem
d48 1
a48 1
@@@@ -123,7 +123,7 @@@@ database_url =
@


1.6
log
@update radicale to version 0.8

OK shen@@ ian@@ and Sergey (Maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-config,v 1.5 2012/05/23 18:02:09 sthen Exp $
--- config.orig	Fri Jun 28 16:37:37 2013
+++ config	Fri Oct 18 17:39:40 2013
d23 1
a23 1
 # Value: plain | sha1 | crypt
d25 2
a26 1
+htpasswd_encryption = sha1
@


1.5
log
@update to radicale 0.7, from maintainer Sergey Bronnikov
@
text
@d1 3
a3 3
$OpenBSD$
--- config.orig	Tue Mar 13 13:45:35 2012
+++ config	Wed May 23 19:20:15 2012
d15 2
a16 2
 
@@@@ -47,10 +47,10 @@@@ public_users = public
d29 10
a38 1
@@@@ -83,15 +83,14 @@@@ courier_socket =
d45 3
a47 3
-
 [logging]
 # Logging configuration file
@


1.4
log
@update radicale to 0.6, amongst other things adding support for ical4/iphone.
ok ian@@, Sergey Bronnikov (maintainer).
@
text
@d1 3
a3 3
$OpenBSD: patch-config,v 1.3 2011/04/17 14:54:47 sthen Exp $
--- config.orig	Wed Jun 15 20:03:33 2011
+++ config	Mon Aug  1 23:41:44 2011
d13 2
d16 1
a16 4
 [encoding]
 # Encoding for responding requests
@@@@ -41,10 +41,10 @@@@ public_users = public
 # Usernames used for private calendars, separated by a comma
d18 1
d26 1
d29 2
a30 2
 # LDAP base path
@@@@ -59,14 +59,14 @@@@ ldap_password =
d32 3
a34 4
 [storage]
 # Folder for storing local calendars, created if not present
-folder = ~/.config/radicale/calendars
+folder = /var/db/radicale/calendars
d36 1
@


1.3
log
@- adjust default directories for ssl keys, /etc/ssl/private isn't
going to be accessible by the uid running radicale

- add a readme, showing people how to setup auth/crypto

with/ok ian@@
@
text
@d1 4
a4 4
$OpenBSD: patch-config,v 1.2 2011/04/15 16:44:27 sthen Exp $
--- config.orig	Sat Aug  7 13:22:58 2010
+++ config	Fri Apr 15 17:42:39 2011
@@@@ -15,9 +15,9 @@@@ daemon = False
d7 1
a7 1
 # SSL certificate path (if needed)
d10 1
a10 1
 # SSL private key (if needed)
d16 7
a22 7
@@@@ -32,14 +32,15 @@@@ type = fake
 # Personal calendars only available for logged in users (if needed)
 personal = False
 # Htpasswd filename (if needed)
-filename = /etc/radicale/users
+filename = ${SYSCONFDIR}/radicale/users
 # Htpasswd encryption method (if needed)
d24 6
a29 3
-encryption = crypt
+# (For sha1, use htpasswd -s ${SYSCONFDIR}/radicale/users username)
+encryption = sha1
d32 1
a32 2
 # Folder for storing local calendars,
 # created if not present
d36 10
a45 1
 # vim:ft=cfg
@


1.2
log
@- run SUBST_CMD on config.py, fixes htpasswd auth problem reported by ian@@
- change default password hash to sha1; add example htpasswd(1) usage
@
text
@d1 1
a1 1
$OpenBSD: patch-config,v 1.1.1.1 2011/04/15 15:47:17 sthen Exp $
d9 1
a9 1
+certificate = /etc/ssl/server.crt
d12 1
a12 1
+key = /etc/ssl/private/server.key
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ config	Fri Apr  1 22:30:40 2011
d16 1
a16 1
@@@@ -32,7 +32,7 @@@@ type = fake
d24 4
a27 2
 encryption = crypt
@@@@ -40,6 +40,6 @@@@ encryption = crypt
@


1.1.1.1
log
@Import ports/productivity/radicale, a simple CalDAV server.
Tweaked from a submission from maintainer Sergey Bronnikov, ok landry@@

The Radicale Project is a complete CalDAV calendar server solution,
capable of making multiple calendars available to local and remote
users, with optional authentication policies. Calendars can be
viewed and edited by a calendar client such as Sunbird or Evolution.

The Radicale Project aims to be a light solution, easy to use, easy
to install, easy to configure. As a consequence, it requires few
software dependencies and is pre-configured to work out-of-the-box.
@
text
@@
