CVSROOT:	/cvs
Module name:	www
Changes by:	mlarkin@cvs.openbsd.org	2017/04/01 17:35:12

Modified files:
	.              : 61.html 

Log message:
update 61.html with vmm improvements from last couple weeks


CVSROOT:	/cvs
Module name:	www
Changes by:	beck@cvs.openbsd.org	2017/04/01 17:48:07

Modified files:
	.              : 61.html 

Log message:
LibreSSL will be 2.5.3 for release, include releease notes so far in 61.html


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/01 18:27:36

Modified files:
	sys/conf       : newvers.sh 

Log message:
unlock tree, we are now hacking on 6.1-current


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/01 18:27:44

Modified files:
	usr.bin/systat : iostat.c 

Log message:
Make dma range buffer cache pages visible in systat io
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/01 18:28:56

Modified files:
	sys/dev/acpi   : acpitz.c 

Log message:
normalize order of arguments to if ()


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/01 18:53:37

Modified files:
	libexec/comsat : comsat.c 

Log message:
Prefer pread() over lseek()+read()
open() only needs the mode argument if O_CREAT is present

ok beck@ deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	jcs@cvs.openbsd.org	2017/04/01 19:00:51

Modified files:
	.              : 61.html 

Log message:
add acpisbs, mention acpi change for apple hardware


CVSROOT:	/cvs
Module name:	www
Changes by:	jsg@cvs.openbsd.org	2017/04/01 20:16:09

Modified files:
	.              : arm64.html 

Log message:
Describe problems caused by boards that require boot firmware on the
system disk.

ok patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/01 20:51:51

Modified files:
	usr.bin/unifdef: unifdef.c 

Log message:
Replace snprintf(NULL, malloc, snprintf.... with the much better asprintf.
ok millert


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/01 21:51:13

Modified files:
	sys/arch/mips64/mips64: context.S 

Log message:
Bring back the wait instruction into the idle loop, but only on octeon.
This lets an idle SoC run a bit cooler.

Tested on CN5020, CN6120 and CN7130.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/01 22:01:52

Modified files:
	gnu/usr.bin/binutils-2.17/bfd: archive64.c 

Log message:
Fix an out-of-bounds memory access with 64-bit armaps.

OK kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/02 00:02:19

Modified files:
	distrib/notes/arm64: hardware 

Log message:
add overdrive 1000


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/02 06:56:39

Modified files:
	sys/netinet    : tcp_usrreq.c 

Log message:
Fix tcp stats reporting

Return the sum of per-cpu counters instead of the current cpu's
counters.  Brainfart on my side.  Analysis and fix by Andrei-Marius Radu.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/02 09:25:05

Modified files:
	sys/arch/octeon/dev: if_cnmac.c 

Log message:
Drop address conversion cruft.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/02 09:48:19

Modified files:
	sys/arch/loongson/loongson: machdep.c 
	sys/arch/octeon/octeon: machdep.c 
	sys/arch/sgi/sgi: machdep.c 

Log message:
printf format strings should be literals. Reminded by clang.


CVSROOT:	/cvs
Module name:	www
Changes by:	beck@cvs.openbsd.org	2017/04/02 10:38:32

Modified files:
	.              : 61.html 

Log message:
httpd and nc and ocspcheck, etc. etc.


CVSROOT:	/cvs
Module name:	www
Changes by:	beck@cvs.openbsd.org	2017/04/02 10:53:22

Modified files:
	.              : 61.html 

Log message:
minor cleanups


CVSROOT:	/cvs
Module name:	www
Changes by:	beck@cvs.openbsd.org	2017/04/02 11:01:12

Modified files:
	.              : 61.html 

Log message:
don't forget about BN_gcd goodies that were addded to avoid RSA keygen sidechannels


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/02 12:06:57

Modified files:
	sys/arch/arm64/arm64: pmap.c 

Log message:
On ARMv8, the translation table walk is fully coherent so there is no
reason to explicitly flush the cache before invalidating the TLB.  The
barrier that is included in out TLB flushing code should be enough to
guarantee that the TLB walking hardware sees the updated page table
contents, so the explicit barriers can go as well.  Sanitize the code
immediately surrounding the removed bits while I'm there.

Tested by jsg@, ok drahn@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/02 12:13:19

Modified files:
	usr.bin/units  : units.lib 

Log message:
update currency exchange rates;


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/02 12:14:34

Modified files:
	libexec/spamd  : spamd.8 

Log message:
note that some hosts never generate tuples and are ignored;
ok beck


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/02 12:30:27

Modified files:
	faq/ports      : guide.html 

Log message:
consistent formatting in the make commands; from anton lindqvist


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/02 12:41:02

Modified files:
	.              : 61.html 

Log message:
some cleanup


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/02 14:21:44

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
Filter out RDTSCP, needed to handle solaris guests. We set the VMX control
to enable RDTSCP to 0, so when solaris attempted to use the instruction
(since it wasn't filtered out of CPUID information), the CPU issued an
#UD exception.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/02 14:57:22

Modified files:
	sbin/dhclient  : parse.c 

Log message:
Change parse_string() warning from "filename must be a string" to
"expecting a string". Things other than filenames are parsed here.


CVSROOT:	/cvs
Module name:	src
Changes by:	tom@cvs.openbsd.org	2017/04/02 15:23:44

Modified files:
	sbin/isakmpd   : field.c 

Log message:
Check return value of asprintf(), and don't use 0 as a char *

Started by, and ok, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/02 16:57:21

Modified files:
	usr.sbin/rtadvd: dump.c 

Log message:
Always use return value of asprintf to determine success/failure,
don't rely upon *ret becoming NULL
ok millert, tom


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/02 17:02:06

Modified files:
	usr.bin/less   : line.c 

Log message:
The character buffer should be resized using recallocarray()
ok millert and nicm a while ago


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/02 17:40:09

Modified files:
	sys/kern       : uipc_socket.c 

Log message:
Less convoluted code in soshutdown()
ok guenther


CVSROOT:	/cvs
Module name:	www
Changes by:	stsp@cvs.openbsd.org	2017/04/03 03:16:44

Modified files:
	build          : support.dat 

Log message:
tweak my support entry


CVSROOT:	/cvs
Module name:	www
Changes by:	stsp@cvs.openbsd.org	2017/04/03 03:16:55

Modified files:
	.              : support.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/03 04:08:17

Modified files:
	security/botan2: Makefile 
	security/botan2/pkg: PLIST 
Added files:
	security/botan2/pkg: PFRAG.x86 

Log message:
Fix packaging on !(x86)

rdrand_rng.h is arch-specific.  ok bluhm@ (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/03 07:51:54

Modified files:
	sys/arch/octeon/octeon: locore.S 

Log message:
Compute address for ll/sc only once.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/03 08:16:34

Modified files:
	sbin/dhclient  : clparse.c parse.c 

Log message:
Tweak 'expecting' parse_warn() messages to be more consistent.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/03 09:34:46

Modified files:
	sbin/dhclient  : clparse.c parse.c 

Log message:
Tweak parse_string() to not consume the ';'. Simplifies/shortens
some logic.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/03 09:52:59

Modified files:
	lib/libcrypto/asn1: t_x509.c 

Log message:
Fix silly code that printfs NULL when there are no fractional seconds
on a GENREALIZEDTIME (which there should really never be for anything
remotely standards compliant)
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/03 10:10:00

Modified files:
	sys/dev/onewire: onewire.c 

Log message:
provide size to free(9)


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/03 10:18:35

Modified files:
	usr.bin/grep   : util.c 

Log message:
initialize regmatch_t always, fixes grep -o ""
from Michael Santos


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/03 11:07:58

Modified files:
	libexec/comsat : comsat.c 

Log message:
use recallocarray() because the array contains data that can be observed


CVSROOT:	/cvs
Module name:	www
Changes by:	claudio@cvs.openbsd.org	2017/04/03 11:21:28

Modified files:
	.              : 61.html 

Log message:
The limits for the socketbuffers were 256k and 2M not 2GB that would be
excessive.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/03 11:23:39

Modified files:
	libexec/comsat : comsat.c 

Log message:
check return from pread, don't divide -1 for count


CVSROOT:	/cvs
Module name:	www
Changes by:	claudio@cvs.openbsd.org	2017/04/03 11:58:32

Modified files:
	.              : 61.html 

Log message:
TLS session ticket support in relayd and httpd


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/03 12:23:36

Modified files:
	sbin/dhclient  : conflex.c parse.c 

Log message:
Simplify read_string() to just read the characters between the '"'s.
Push the un-vising up to parse_string(). This allows both the actual
string and the un-vised version to be available as desired. Use
memcpy() instead of strdup() to copy un-vised string since it may
legitimately contain NUL.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/04/03 12:43:41

Modified files:
	usr.sbin/wsfontload: wsfontload.8 

Log message:
WSDISPLAY_MAXFONTCOUNT macro was introduced in sys/dev/wscons/wsconsio.h
(revision 1.75) to limit the number of fonts that can be loaded.

Reflect that in the man page as well.

OK jcs@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/03 13:40:43

Modified files:
	share/man/man3 : CMSG_DATA.3 

Log message:
Send and receive 1 byte of data in addition to the control message. This is
needed to make the code work in more cases.
Sending actually is not really needed, but do it anyway, to avoid confusing
mismatch between producer and consumer.
Problem noted by Luke Small; ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/03 13:42:04

Modified files:
	lib/libc/sys   : recv.2 

Log message:
Add caveat telling it's better to always read a data byte when passing
control messages.
Problem noted by Luke Small; ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/03 13:59:39

Modified files:
	sbin/dhclient  : clparse.c dhcpd.h parse.c 

Log message:
Change parse_string() to take an optional integer pointer that can
be used to return the final size of the parsed (i.e. un-vis'ed)
string. Use same, plus memcpy() to ensure entire final string is
copied to intended destination even if there are embedded NULs.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/04/03 14:59:19

Modified files:
	sbin/shutdown  : shutdown.c 

Log message:
warn format string should be literal.

OK deraadt@, millert@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/03 16:23:01

Modified files:
	build          : support.dat 

Log message:
+Wenka Computer Systems


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/03 16:23:25

Modified files:
	.              : support.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/03 18:03:12

Modified files:
	etc/etc.alpha  : Makefile.inc 
	etc/etc.amd64  : Makefile.inc 
	etc/etc.arm64  : Makefile.inc 
	etc/etc.armv7  : Makefile.inc 
	etc/etc.hppa   : Makefile.inc 
	etc/etc.i386   : Makefile.inc 
	etc/etc.landisk: Makefile.inc 
	etc/etc.loongson: Makefile.inc 
	etc/etc.luna88k: Makefile.inc 
	etc/etc.macppc : Makefile.inc 
	etc/etc.sgi    : Makefile.inc 
	etc/etc.socppc : Makefile.inc 
	etc/etc.sparc64: Makefile.inc 

Log message:
cp -p the bootblocks to RELEASEDIR; ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/03 18:24:56

Modified files:
	usr.bin/ssh    : sftp-server.c 

Log message:
disallow creation (of empty files) in read-only mode; reported by
Michal Zalewski, feedback & ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/04/03 18:40:52

Modified files:
	sys/dev/pci    : if_iwm.c if_iwmreg.h 

Log message:
Add 8265 and 3168 support. Both cards need new firmware files which currently
need to be installed by hand until the iwm-firmware package has been updated.
This includes handling (by ignoring) of IWM_UCODE_TLV_FW_MEM_SEG and
IWM_DEBUG_LOG_MSG firmware commands. Mostly stolen from dragonflybsd.
With this in the X270 has working ethernet and wifi.
Commit! deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/03 20:37:15

Modified files:
	usr.sbin/snmpd : snmpd.c 

Log message:
Rewrite tohexstr() to use the common idiom of converting a byte
string to hex nybble by nybble.  This avoids using the return value
of snprintf() unchecked.  OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/03 22:38:31

Modified files:
	sys/dev/ic     : malo.c 

Log message:
add a free() size near microcode loading


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/04 06:30:04

Modified files:
	sys/arch/sparc64/sparc64: lock_machdep.c 

Log message:
Issue memory barrier before lock release, not after. This ensures
the release write becomes globally visible only after any writes
of the critical section are globally visible. In practice, the
reordering has not happened because the kernel runs in the total
store order mode.

Tested by and OK kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/04 06:56:24

Modified files:
	sys/arch/arm64/arm64: pmap.c 

Log message:
Cleanup the code further.  Get rid of the remaining C++-style comments,
remove some debug printfs, get rid of STATIC and __inline defines and
remove a bit more unused code.

ok drahn@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/04 07:01:20

Modified files:
	sbin/dhclient  : clparse.c dhclient.c dhcpd.h 

Log message:
Treat SSID's like the 0 to 32 bytes of uint8_t data that they really
are. Track and use the actual lengths and use memcpy()/memcmp()
instead of strcmp()/strdup().


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/04 08:04:54

Modified files:
	usr.sbin/sasyncd: sasyncd.c 

Log message:
Add missing newline in fprintf error message.

OK jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/04 08:08:19

Modified files:
	lib/libc/sys   : recv.2 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/04 08:33:44

Modified files:
	usr.sbin/smtpd : table.5 

Log message:
document comments in table files; help/ok gilles


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/04 09:15:48

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c 

Log message:
Send a RTM_PROPOSAL to clear out other dhclient instances on startup.

Replaces forcing interface link state down and up to generate
RTM_IFINFO messages.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/04 09:50:29

Modified files:
	usr.sbin/dhcrelay: dhcpd.h dhcrelay.c 

Log message:
constify pc_remote and pc_circuit

OK rzalamena@


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/04 09:52:12

Modified files:
	usr.sbin/dhcrelay: dispatch.c 

Log message:
The unsigned result cannot be -1, turn it into a signed variable.

OK rzalamena@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/04 11:50:45

Modified files:
	distrib/miniroot: install.sub 

Log message:
Ensure, that during upgrades, the default for the "Location of sets"
question is set to http if /etc/installurl exists and override the
install method information from the cgi server.

'makes sense' deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/04 12:17:02

Modified files:
	sys/kern       : vfs_subr.c 

Log message:
struct vfsconf is tightly packed, but let's M_ZERO it in case that ever
changes to avoid exposing userland memory.


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/04/04 14:16:09

Modified files:
	usr.sbin/httpd : httpd.c 

Log message:
Do not purge the CONFIG_SERVERS config in the parent. The ticket code uses
the servers config for its rekeying handling. Without this no rekeying happens
and httpd stops working. Learned the hard way by me and beck@
OK reyk@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/04 14:51:45

Modified files:
	net/icinga/core2: Makefile distinfo 

Log message:
update to icinga2 2.6.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/04 14:52:13

Modified files:
	mail/rspamd    : Makefile distinfo 
	mail/rspamd/pkg: PLIST 

Log message:
update to rspamd-1.5.4, from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/04 15:09:30

Modified files:
	www/squid      : Makefile distinfo 

Log message:
update to squid-3.5.25


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/04 15:20:22

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Also remove non syspatch hidden files/dirs.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/04 15:23:06

Modified files:
	net/libnice    : Makefile distinfo 
	net/libnice/pkg: PLIST 

Log message:
Update to libnice-0.1.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/04 15:24:13

Modified files:
	print/foomatic-db: Makefile 
	print/foomatic-db/pkg: PLIST 

Log message:
Remove foo2hiperc-z1, it conflicts with foo2zjs; reported by espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/04 15:24:44

Modified files:
	print/foo2zjs  : Makefile distinfo 
	print/foo2zjs/patches: patch-Makefile patch-getweb_in 
	print/foo2zjs/pkg: PLIST 

Log message:
Long overdue update to foo2zjs-20170320.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/04 15:38:51

Modified files:
	www/trac       : Makefile distinfo 

Log message:
update to Trac-1.2.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/04/04 15:40:01

Modified files:
	lang/ruby/2.2  : Makefile distinfo 
	lang/ruby/2.2/pkg: PLIST-ri_docs 

Log message:
Update to ruby 2.2.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/04/04 15:40:40

Modified files:
	databases/ruby-pg: Makefile distinfo 

Log message:
Update to ruby-pg 0.20.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/04 15:45:55

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/patches: 
	                                   patch-lib_googlecloudsdk_core_util_platforms_py 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-149.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/04 15:54:30

Modified files:
	devel/py-wbem  : Makefile 

Log message:
missing RDEP on py-yaml


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/04 16:37:01

Modified files:
	usr.sbin/sasyncd: sasyncd.8 sasyncd.c 

Log message:
add a config test flag to sasyncd

ok reyk@ deraadt@ jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/04 16:51:29

Modified files:
	fonts/go-fonts : Makefile distinfo 
	fonts/go-fonts/pkg: PLIST 

Log message:
Update to a newer go-image snapshot to get a newer version of the ttf
go fonts.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/04 18:35:02

Modified files:
	usr.sbin/syslogd: syslogd.c 

Log message:
Do not print a warning if closing the control socket fails.  It
cannot happen and there is nothing that could be done about it.
OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/04 18:57:47

Modified files:
	www/gitea      : Makefile distinfo 
	www/gitea/patches: patch-conf_app_ini 
	www/gitea/pkg  : PLIST 
Added files:
	www/gitea/patches: patch-cmd_web_go 

Log message:
Update to gitea-1.1.0 and backport a patch to make it work with httpd
(from Pavel Korovin)

Tested by Pavel Korovin, ok robert@ (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/04 21:13:53

Modified files:
	lib/libtls     : Symbols.list tls.c tls_config.c tls_conninfo.c 
	                 tls_internal.h 

Log message:
Internal changes to allow for relayd engine privsep. sends the hash of the
public key as an identifier to RSA, and adds an function for relayd to
use to disable private key checking when doing engine privsep.
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/04 21:19:22

Modified files:
	lib/libtls     : Symbols.list shlib_version tls.c tls.h 
	                 tls_conninfo.c tls_internal.h tls_peer.c 

Log message:
Add tls_peer_cert_chain_pem - To retreive the peer certificate and chain
as PEM format. This allows for it to be used or examined with tools
external to libtls
bump minor
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/04 21:20:19

Modified files:
	usr.bin/nc     : nc.1 netcat.c 

Log message:
Allow nc to save the peer certificate and chain in a pem file specified
with -Z
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/04 21:23:37

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/04 21:34:57

Modified files:
	net/haproxy    : Makefile distinfo 

Log message:
Update to haproxy-1.6.12


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/04 21:59:13

Modified files:
	sys/kern       : kern_clock.c 

Log message:
clear structure on the stack before copying out for sysctl.  At present
it has no pads, but a future ABI change could add something and leak
kernel memory.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/04 22:00:41

Modified files:
	sys/kern       : kern_sysctl.c 

Log message:
Here at OpenBSD we change ABIs at the fling of a hat.  Just in case a
future disk info sysctl has pads in the structures, use M_ZERO when
allocating the storage to avoid leaking kernel memory.


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/04 22:15:44

Modified files:
	sys/kern       : kern_sysctl.c 

Log message:
timeval has trailing padding on powerpc and m88k, so memset it before
copyout to avoid leaking kernel stack

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/04/04 22:25:58

Modified files:
	databases/apache-couchdb: Makefile 

Log message:
Make the port work again by referring to the correct lang/erlang location.

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/04 22:44:03

Modified files:
	usr.bin/systat : engine.c 

Log message:
an annoying whitespace glitch


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/05 00:55:59

Modified files:
	usr.bin/nc     : nc.1 netcat.c 

Log message:
- -Z before -z in options list
- add -Z to help and usage()


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 01:00:37

Modified files:
	lang/python/3.6: Makefile distinfo 
	lang/python/3.6/pkg: PLIST-main PLIST-tests 
Removed files:
	lang/python/3.6/patches: patch-Python_random_c 

Log message:
update to python 3.6.1.
release notes: https://docs.python.org/3.6/whatsnew/changelog.html#python-3-6-1
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 01:08:51

Modified files:
	security/oledump: Makefile distinfo 
	security/oledump/pkg: PLIST 

Log message:
minor update to 0.0.27.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 01:13:55

Modified files:
	security/pdf-parser: Makefile distinfo 

Log message:
update pdf-parser to 0.6.7.
more information: https://blog.didierstevens.com/2016/12/28/update-pdf-parser-version-0-6-7/


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/05 01:34:48

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.35.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/05 01:35:08

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.71.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/05 01:52:00

Modified files:
	devel/glib2mm  : Makefile distinfo 

Log message:
Update to glib2mm-2.50.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/04/05 02:02:05

Modified files:
	comms/gammu    : Makefile distinfo 
	comms/gammu/patches: patch-CMakeLists_txt 

Log message:
Update to gammu-1.38.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/05 02:45:33

Modified files:
	sbin/ifconfig  : ifconfig.8 

Log message:
various improvements, from klemens nanni;
i've omitted hunk 3 of his diff, as what's there now is correct;

ok mikeb


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/05 03:34:39

Modified files:
	www/webkitgtk4 : Makefile distinfo 

Log message:
Update to webkitgtk4-2.16.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/05 03:46:18

Modified files:
	mail/mozilla-thunderbird: Makefile distinfo 
	mail/mozilla-thunderbird/patches: 
	                                  patch-mail_installer_Makefile_in 
	                                  patch-mozilla_js_src_jit_ProcessExecutableMemory_cpp 
	                                  patch-mozilla_security_manager_pki_resources_content_exceptionDialog_js 
	                                  patch-mozilla_storage_mozStorageConnection_cpp 
	mail/mozilla-thunderbird/pkg: PLIST-lightning PLIST-main 
	mail/thunderbird-i18n: Makefile.inc distinfo 
Removed files:
	mail/mozilla-thunderbird/patches: 
	                                  patch-mozilla_js_src_jit_ProcessExecutableMemory_h 
	                                  patch-mozilla_toolkit_components_protobuf_src_google_protobuf_stubs_atomicops_h 

Log message:
Update to thunderbird 52.0/lightning 5.4.

See https://www.mozilla.org/en-US/thunderbird/52.0/releasenotes/

Note that it now defaults to use Gtk+3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/05 04:02:06

Modified files:
	lang/bacon     : Makefile distinfo 

Log message:
Update to bacon 3.5.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/05 04:27:36

Modified files:
	telephony/asterisk: Makefile distinfo 

Log message:
update to asterisk-13.14.1

http://downloads.digium.com/pub/security/AST-2017-001.html

CDR: Protect from data overflow in ast_cdr_setuserfield.
ast_cdr_setuserfield wrote to a fixed length field using strcpy.
This could result in a buffer overrun when called from chan_sip or
func_cdr. This patch adds a maximum bytes written to the field by using
ast_copy_string instead.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/05 04:45:20

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Change tty_repeat_space to write large sets of spaces together instead
of writing them individually.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/05 04:45:39

Modified files:
	usr.bin/tmux   : cfg.c 

Log message:
cfg_file can be static.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/05 04:49:46

Modified files:
	usr.bin/tmux   : cmd-choose-client.c cmd-find.c 
	                 cmd-list-clients.c format.c screen-redraw.c 
	                 server-client.c tmux.1 tmux.h tty.c 

Log message:
Give each client a name. This defaults to the tty name as before but
falls back to an alternative if the tty name is not available. This is
clearer than overloading the client ttyname member and allows us to
remove the path stored in the tty struct, it should always be the same
as the client.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/05 05:04:48

Modified files:
	usr.bin/tmux   : cmd-find.c 

Log message:
Try again to resolve problems with mistaking sessions for windows: now
do not look up windows as sessions (and panes as windows) when they are
qualified with a ':' or a '.'. So 'foo' as a window target will look for
windows and sessions called 'foo', but ':foo' will only look for
windows, and 'foo:' only for sessions. This means the common case of
using an unadorned session as a window target (send -tfoo) should
continue to work, but an explicit window will not get confused with a
session (send -t:foo).


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 05:31:45

Modified files:
	usr.sbin/syslogd: log.c log.h privsep.c syslogd.c syslogd.h 
	                  ttymsg.c 

Log message:
Replace logdebug() with generic log_debug() from log.c.  Implement
log_debugadd() to construct debug message incrementally.
OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 05:43:23

Modified files:
	lang/python/3.5: Makefile distinfo 
	lang/python/3.5/pkg: PLIST-idle PLIST-main PLIST-tests 

Log message:
update to 3.5.3.
more information: https://docs.python.org/3.5/whatsnew/changelog.html#python-3-5-3
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 05:44:11

Modified files:
	sysutils/libesedb: Makefile distinfo 

Log message:
update liesedb to 20170121.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 05:44:45

Modified files:
	sysutils/libvhdi: Makefile distinfo 

Log message:
update libvhdi to 20170223.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 05:45:20

Modified files:
	sysutils/libqcow: Makefile distinfo 

Log message:
update libqcow to 20170222.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 05:56:51

Modified files:
	sysutils/libregf: Makefile distinfo 
	sysutils/libregf/pkg: PLIST 

Log message:
update libregf to 20170130.
ok benoit@.


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/04/05 05:57:58

Modified files:
	usr.sbin/pkg_add/OpenBSD: Delete.pm 

Log message:
For a non-interactive attempt to pkg_delete a firmware package, print a
message advising use of "fw_update -d" rather than saying "ok" and doing
nothing. (pkg_delete intentionally makes it hard to uninstall firmware
to prevent surprises when cleaning a machine).

aja and I were surprised by the "ok" leaving the fw package installed.
suggestion from espie to mention fw_update -d in the message.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/05 06:08:20

Added files:
	infrastructure/bin: extract-dependencies 

Log message:
resurrect extract-dependencies, it's actually a helper for show-required-by
which I forgot. found out by kili@
(no real impact for release since ports work should happen on current anyway)


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/05 06:14:18

Modified files:
	usr.bin/tmux   : key-bindings.c 

Log message:
Add Home and End for copy mode.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 06:19:02

Modified files:
	devel/p5-Test-Regexp: Makefile distinfo 

Log message:
update p5-Test-Regexp to 2017040101


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 06:20:53

Modified files:
	converters/p5-Cpanel-JSON-XS: Makefile distinfo 

Log message:
update p5-Cpanel-JSON-XS to 3.0231


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 06:41:34

Modified files:
	textproc/p5-Regexp-Common: Makefile distinfo 

Log message:
update p5-Regexp-Common to 2017040401


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/05 07:29:10

Modified files:
	security/py-artifacts: Makefile distinfo 

Log message:
update to 20161022.
inputs and ok benoit@.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/05 07:35:18

Modified files:
	sys/net        : if_pfsync.c rtsock.c 
	sys/netinet    : igmp.c ip_carp.c ip_divert.c ip_icmp.c 
	                 ip_input.c ip_ipip.c tcp_usrreq.c udp_usrreq.c 
	sys/netinet6   : icmp6.c 

Log message:
When building counter memory in preparation to copy to userland, always
zero the buffers first.  All the current objects appear to be safe,
however future changes might introduce structure pads.
Discussed with guenther, ok bluhm


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 07:36:34

Modified files:
	security/botan : Makefile distinfo 

Log message:
update botan to 1.10.16
CVE-2017-2801


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/05 07:38:18

Modified files:
	usr.sbin/rtadvd: dump.c 

Log message:
Don't rely on asprintf setting pointer to NULL on failure.

ok millert@ deraadt@ tom@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/05 08:39:39

Modified files:
	sysutils/packer: Makefile distinfo 

Log message:
Update to packer-1.0.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/05 08:40:56

Modified files:
	usr.sbin/dhcrelay: bpf.c dhcpd.h packet.c 

Log message:
Rework the packet.c code for decoding and assembling DHCP messages.

This code suffered from many years of incremental improvements, fix it to:
- verify available buffer space in all cases and don't just trust the caller
- have an API where you always pass the full buffer length and absolute offset
- use consistent types for lengths and buffer offsets (int vs. size_t, ssize_t)
- don't just ignore errors, return and fail when something is wrong

OK rzalamena@


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/05 08:43:14

Modified files:
	usr.sbin/dhcrelay: Makefile 

Log message:
We can enable many -W compiler warnings now.

OK rzalamena@


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/05 08:48:48

Modified files:
	usr.sbin/rtadvd: rtadvd.c 

Log message:
sendmsg returns a signed value, fix error check

ok millert@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/05 08:50:05

Modified files:
	usr.sbin/rtadvd: rtadvd.c 

Log message:
Unify variables used for recvmsg/sendmsg

ok millert@ deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/05 08:52:13

Modified files:
	net/samba      : Tag: OPENBSD_6_0 Makefile 
	net/samba/patches: Tag: OPENBSD_6_0 patch-source3_smbd_open_c 
Added files:
	net/samba/patches: Tag: OPENBSD_6_0 
	                   patch-source3_smbd_filename_c 
	                   patch-source3_smbd_proto_h 
	                   patch-source3_smbd_vfs_c 

Log message:
Fix a regression introduced by the fix for CVE-2017-2619

* BUG 12721: Fix regression with "follow symlinks = no"
Patch adapted from samba-4.4.13.  Tests & ok Ian


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 09:16:13

Modified files:
	usr.sbin/syslogd: syslogd.c 

Log message:
Replace all combinations of logerror() and die() with log.c fatal().
Internally syslogd's fatal() calls die() to do cleanup if necessary.
Also replace all err(3) after log_init() with fatal().
OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/05 09:57:11

Modified files:
	usr.bin/systat : engine.c 

Log message:
Clamp size to length if snprintf ever indicates overflow
w/ millert


CVSROOT:	/cvs
Module name:	www
Changes by:	mikeb@cvs.openbsd.org	2017/04/05 10:18:14

Modified files:
	.              : 61.html 

Log message:
Mention support for Intel X550


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/05 12:15:43

Modified files:
	lib/libc/sys   : mmap.2 

Log message:
Not all devices support mmap, document EINVAL in this case too.
OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/05 12:22:31

Modified files:
	sbin/dhclient  : dhcpd.h dispatch.c kroute.c 

Log message:
Shuffle sendhup() into dispatch.c, the only place it is used.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 13:34:49

Modified files:
	usr.sbin/syslogd: syslogd.c 

Log message:
Replace logerror() functions with generic log_warn() from log.c.
Make messages a bit more consistent.  Note that the new function
supports format strings.  Replace some log_debug() with log_warn().
OK millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/05 13:43:15

Modified files:
	net/libmaxminddb: Makefile distinfo 

Log message:
Update GeoLite2 databases to latest version.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/05 13:45:44

Modified files:
	sysutils/udfclient: Makefile distinfo 

Log message:
Update to udfclient 0.8.8. From Josh Grosse (MAINTAINER).


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/05 13:57:22

Modified files:
	emulators      : Makefile 
Removed files:
	emulators/spectemu: Makefile distinfo 
	emulators/spectemu/patches: patch-Makefile_in patch-README 
	                            patch-spmain_c patch-spsound_c 
	emulators/spectemu/pkg: DESCR PLIST 

Log message:
Remove emulators/spectemu.

The version we have in ports (0.94) is from 1998, and has been marked as
BROKEN since July 2015. The most recent release (0.99.3) is from 2004.

We have an up to date port for emulators/fuse, which emulates the 48K
and more, and is still being maintained.

OK jca@, sthen@, benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/05 14:03:38

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register removal of spectemu.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/05 15:29:57

Modified files:
	x11/st         : Makefile 
	x11/st/patches : patch-config_mk 
Added files:
	x11/st/patches : patch-st_c 

Log message:
Add pledge() to st. Patch by tb@ and semarie@.
OK jung@ (MAINTAINER) gsoares@.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 15:30:04

Modified files:
	usr.sbin/syslogd: syslogd.c 

Log message:
The function logmsg() was used to generate local messages and to
process incoming messages.  Split this functionality into log_info()
and logline().  Sort the parameters like they appear in the syslog
line.
OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 15:55:31

Modified files:
	usr.sbin/syslogd: syslogd.c syslogd.h ttymsg.c 

Log message:
As we did not have nice log functions before, ttymsg() had to return
the error string.  Log the message when the error happens and make
the function void.
OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 16:15:35

Modified files:
	usr.sbin/syslogd: syslogd.c syslogd.h 

Log message:
The global variable Startup is not used anymore and can be deleted.
The functionality has moved into log_setdebug().
OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/05 16:27:03

Modified files:
	sys/netinet    : ip_ipcomp.c 

Log message:
Replace 2 bcopy()'s with a simple assignment as both variables are
properly aligned malloc(9)d data and sockaddr_union fields.  While here,
convert the remaining bcopy() to memmove().

with and ok @bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/05 16:32:14

Modified files:
	regress/usr.sbin/syslogd: args-client-tcp-close.pl 
	                          args-client-tcp-error.pl 
	                          args-client-tcp.pl 
	                          args-client-tls-close.pl 
	                          args-client-tls-error.pl 
	                          args-client-tls-fake.pl 
	                          args-client-tls-tcp.pl 
	                          args-client-tls.pl 
	                          args-dropped-sighup-tcp.pl 
	                          args-dropped-sighup-tls.pl 
	                          args-dropped-sigterm-tcp.pl 
	                          args-dropped-sigterm-tls.pl 
	                          args-dropped-tcp.pl 
	                          args-dropped-tls.pl args-error.pl 
	                          args-fdexhaustion-tcp.pl 
	                          args-maxhostlen.pl 
	                          args-maxloghostlen.pl 
	                          args-maxportlen.pl 
	                          args-proto-invalid.pl 
	                          args-proto-udp4-host6.pl 
	                          args-proto-udp4-only6.pl 
	                          args-proto-udp6-host4.pl 
	                          args-proto-udp6-only4.pl 
	                          args-rsyslog-client-tcp.pl 
	                          args-rsyslog-client-tls.pl 
	                          args-server-tcp-close.pl 
	                          args-server-tcp-error.pl 
	                          args-server-tcp-reconnect.pl 
	                          args-server-tls-client-fake.pl 
	                          args-server-tls-close.pl 
	                          args-server-tls-error.pl 
	                          args-server-tls-reconnect.pl 
	                          args-server-tls-tcp.pl args-sigterm.pl 
	                          args-sync-tcp.pl 
	                          args-tls-cafile-default.pl 
	                          args-tls-cafile-empty.pl 
	                          args-tls-cafile-fake.pl 
	                          args-tls-cafile-noexist.pl 
	                          args-tls-cafile-toobig.pl 
	                          args-tls-cert-empty.pl 
	                          args-tls-cert-noexist.pl 
	                          args-tls-cipher-null.pl 
	                          args-tls-host-bad.pl 
	                          args-tls-key-empty.pl 
	                          args-tls-key-noexist.pl 

Log message:
Syslogd's debug and error messages have changed a bit, adapt test.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/05 16:45:21

Modified files:
	sys/dev/usb    : uaudio.c usb_subr.c 

Log message:
3 more mallocarray() uses


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/05 20:11:08

Modified files:
	sys/netinet6   : ip6_input.c mld6.c 

Log message:
Convert bcopy to memcpy as the memory does not overlap.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/05 21:15:29

Modified files:
	sys/dev/sdmmc  : sdhc.c sdmmc.c sdmmc_mem.c sdmmc_scsi.c 

Log message:
add sizes to free() calls
ok dhill


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/04/05 21:49:40

Modified files:
	databases/postgresql: Tag: OPENBSD_6_0 Makefile distinfo 
	databases/postgresql/pkg: Tag: OPENBSD_6_0 PLIST-docs 

Log message:
Reliability update to 9.5.6


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/05 22:48:54

Modified files:
	sys/dev/usb    : uchcom.c ucycom.c uslhcom.c 

Log message:
Unify a few attach-time patterns between usb *com drivers, and remove
extra zero'ing of variables not needed because softc is pre-zero'd.
ok jsg


CVSROOT:	/cvs
Module name:	www
Changes by:	jsg@cvs.openbsd.org	2017/04/05 23:37:39

Modified files:
	.              : arm64.html 

Log message:
mention the 'setenv boot_targets' workaround for rpi3


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/06 01:07:28

Modified files:
	sys/dev/sdmmc  : sdmmc.c 

Log message:
remove stray character in previous that broke the build


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/06 01:12:21

Modified files:
	mail/mozilla-thunderbird/patches: 
	                                  patch-mozilla_js_src_jit_ProcessExecutableMemory_cpp 
Removed files:
	mail/mozilla-thunderbird/patches: 
	                                  patch-mozilla_gfx_skia_moz_build 
	                                  patch-mozilla_gfx_skia_skia_src_opts_SkBitmapProcState_opts_SSSE3_cpp 
	                                  patch-mozilla_js_src_jit_ExecutableAllocator_h 
	                                  patch-mozilla_js_src_jit_Lowering_cpp 

Log message:
Remove patches which were supposed to be removed, and unfuck other
patches. *mumbles something about cvs*
Noticed by nigel@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 01:42:25

Modified files:
	textproc/highlight: Makefile distinfo 
	textproc/highlight/pkg: PLIST 

Log message:
Update to highlight-3.36.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/06 02:01:30

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.36.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/06 02:01:46

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.72.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 02:11:20

Modified files:
	.              : 61.html 

Log message:
vmm/vmd are new in 6.1, so tweak some wording to reflect that

input/ok reyk


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/06 02:16:26

Modified files:
	www/py-bokeh   : Makefile distinfo 
	www/py-bokeh/pkg: PLIST 

Log message:
Update to py-bokeh-0.12.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/06 02:23:56

Modified files:
	x11/dbus       : Makefile distinfo 

Log message:
Update to dbus-1.10.18.


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/06 02:39:47

Modified files:
	lib/libc/stdlib: malloc.c 

Log message:
first print size in meta-data then supplied arg size when an inconsistency is
detected wrt recallocarray()


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/06 02:48:30

Modified files:
	sysutils/consul: Makefile distinfo 

Log message:
Update to consul-0.8.0.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 02:50:07

Modified files:
	.              : 61.html 

Log message:
hoist vmm/vmd over wifi improvements. add a few full stops while there.

suggested by deraadt and stsp


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 02:57:25

Modified files:
	devel/p5-Config-Grammar: Makefile distinfo 

Log message:
Update to p5-Config-Grammar-1.12.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 03:14:25

Modified files:
	devel/p5-Data-Dump-Streamer: Makefile distinfo 

Log message:
Update to p5-Data-Dump-Streamer-2.40.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/06 03:28:29

Modified files:
	lib/libcxxabi  : Makefile 

Log message:
Compile C code with -funwind-tables.  Fixes exception handling on architectures
that don't generate .eh_frame info by default such as arm64.

ok jsg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 03:46:01

Modified files:
	devel/p5-Data-GUID: Makefile distinfo 

Log message:
Update to p5-Data-GUID-0.049.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 03:55:01

Modified files:
	devel/p5-Date-Extract: Makefile distinfo 

Log message:
Update to p5-Date-Extract-0.06.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/06 04:21:30

Modified files:
	databases/py-sqlparse: Makefile 
	databases/py-sqlparse/pkg: PLIST 
	devel/py-xlsxwriter: Makefile 
	devel/py-xlsxwriter/pkg: PLIST 
	security/py-artifacts: Makefile 
	security/py-artifacts/pkg: PLIST 

Log message:
if py and py3 conflict so be it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/06 04:23:20

Modified files:
	x11/kde/i18n3  : Makefile.inc 
	x11/kde/i18n3/pkg: PLIST-af PLIST-ar PLIST-az PLIST-be PLIST-bg 
	                   PLIST-bn PLIST-br PLIST-bs PLIST-ca PLIST-cs 
	                   PLIST-csb PLIST-cy PLIST-da PLIST-de PLIST-el 
	                   PLIST-en_GB PLIST-eo PLIST-es PLIST-et 
	                   PLIST-eu PLIST-fa PLIST-fi PLIST-fr PLIST-fy 
	                   PLIST-ga PLIST-gl PLIST-he PLIST-hi PLIST-hr 
	                   PLIST-hsb PLIST-hu PLIST-is PLIST-it PLIST-ja 
	                   PLIST-kk PLIST-km PLIST-ko PLIST-lt PLIST-lv 
	                   PLIST-mk PLIST-mn PLIST-ms PLIST-nb PLIST-nds 
	                   PLIST-nl PLIST-nn PLIST-pa PLIST-pl PLIST-pt 
	                   PLIST-pt_BR PLIST-ro PLIST-ru PLIST-rw 
	                   PLIST-se PLIST-sk PLIST-sl PLIST-sr 
	                   PLIST-sr@Latn PLIST-ss PLIST-sv PLIST-ta 
	                   PLIST-te PLIST-tg PLIST-th PLIST-tr PLIST-uk 
	                   PLIST-uz PLIST-uz@cyrillic PLIST-vi PLIST-wa 
	                   PLIST-zh_CN PLIST-zh_TW 

Log message:
kde4 barfing


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/06 04:24:26

Modified files:
	devel/arm-elf/newlib: Makefile 
	devel/arm-elf/newlib/pkg: PLIST 
	devel/arm-none-eabi/newlib: Makefile 
	devel/arm-none-eabi/newlib/pkg: PLIST 

Log message:
license file ? fine. Just make sure it's in a specific dir so ports don't
conflict


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/06 04:25:21

Modified files:
	devel/kf5/baloo: Makefile 
	devel/kf5/baloo/pkg: PLIST 

Log message:
naming similar ports differently is dubious


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/06 04:26:15

Modified files:
	lang/gcc/4.6   : Makefile 
	lang/gcc/4.6/pkg: PLIST-c++ PLIST-f95 PLIST-objc 

Log message:
lots of stuff that conflicts with 4.9 and doesn't say so.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/06 04:27:14

Modified files:
	x11/kde4/baloo : Makefile 
	x11/kde4/baloo/pkg: PLIST 

Log message:
conflict with kf5-baloo


CVSROOT:	/cvs
Module name:	src
Changes by:	bcook@cvs.openbsd.org	2017/04/06 04:36:12

Modified files:
	lib/libcrypto  : Tag: OPENBSD_6_1 opensslv.h 

Log message:
bump version for stable release


CVSROOT:	/cvs
Module name:	src
Changes by:	bcook@cvs.openbsd.org	2017/04/06 04:38:24

Modified files:
	lib/libcrypto  : opensslv.h 

Log message:
bump version for new development branch


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 05:11:30

Added files:
	faq            : upgrade61.html cwm-migrate-config.pl 

Log message:
add 6.1 upgrade guide. the release cycle was very long and lots of things
changed. accordingly, this page is huge...

thanks to tj, sthen and okan for their input


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 05:13:02

Modified files:
	faq            : upgrade60.html 

Log message:
hook up upgrade61.html


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 05:19:41

Modified files:
	faq            : current.html 

Log message:
roll for the 6.2 release cycle


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 05:22:51

Modified files:
	faq            : upgrade61.html 

Log message:
fix an html tag


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/04/06 05:26:00

Modified files:
	print/gl2ps    : Makefile distinfo 

Log message:
Update to GL2PS 1.4.0

"go ahead and commit" pirofti@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/06 05:42:21

Modified files:
	security/nss   : Makefile distinfo 

Log message:
Bugfix update to nss 3.29.4.

https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.29.4_release_notes


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 05:43:14

Modified files:
	devel/p5-Time-Progress: Makefile distinfo 

Log message:
Update to p5-Time-Progress-2.12.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/06 05:47:45

Modified files:
	devel/p5-Test-Without-Module: Makefile distinfo 

Log message:
Update to p5-Test-Without-Module-0.19.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/06 06:12:21

Modified files:
	x11/ratpoison  : Makefile distinfo 
	x11/ratpoison/pkg: PLIST 

Log message:
Update to ratpoison-1.4.9

Now with Xrandr support (finally...)


CVSROOT:	/cvs
Module name:	src
Changes by:	gsoares@cvs.openbsd.org	2017/04/06 06:20:48

Modified files:
	usr.sbin/iscsid: log.c 
	usr.sbin/relayd: ca.c 

Log message:
fix format string found by clang -Wformat-security
OK deraadt millert


CVSROOT:	/cvs
Module name:	src
Changes by:	gsoares@cvs.openbsd.org	2017/04/06 06:22:32

Modified files:
	usr.sbin/ldapd : parse.y 

Log message:
use memset() instead of bzero()
OK jmatthew


CVSROOT:	/cvs
Module name:	www
Changes by:	bluhm@cvs.openbsd.org	2017/04/06 06:36:29

Modified files:
	.              : 61.html 

Log message:
More syslog and sensorsd features.


CVSROOT:	/cvs
Module name:	ports
Changes by:	gsoares@cvs.openbsd.org	2017/04/06 06:46:12

Modified files:
	devel/cppcheck : Makefile distinfo 

Log message:
update to cppcheck-1.78


CVSROOT:	/cvs
Module name:	ports
Changes by:	gsoares@cvs.openbsd.org	2017/04/06 06:54:35

Modified files:
	devel/cppcheck : Makefile 

Log message:
tidy up 1 line longer than 80 chars in Makefile
found by and thanks /usr/ports/infrastructure/bin/portcheck


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 07:43:46

Modified files:
	faq            : upgrade60.html 

Log message:
use 6.0 manuals


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 07:48:56

Modified files:
	faq            : upgrade61.html 

Log message:
use 6.1 manuals (and 6.0 for pkg.conf)


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/06 08:25:18

Modified files:
	sys/netinet    : ip_spd.c ipsec_input.c ipsec_output.c 

Log message:
Replace bcopy with a simple assignment where both variables are
properly aligned and sockaddr_union fields, or with memcpy when
the memory doesn't overlap.

OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/06 08:55:43

Modified files:
	usr.sbin/syslogd: log.c 

Log message:
Add the LOG_SYSLOG facility to local messages.
OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/06 09:25:24

Modified files:
	sys/arch/octeon/dev: octeon_intr.c 
	sys/arch/octeon/include: intr.h 

Log message:
Extend the fdt interrupt API a little.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/06 09:29:47

Modified files:
	sys/arch/octeon/dev: octmmc.c 

Log message:
Use the correct interrupt disestablish routine.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/06 09:30:12

Modified files:
	libexec/spamd  : spamd.c 

Log message:
fix missing \ on \n, spotted by Edgar Pettijohn


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/06 10:56:44

Modified files:
	regress/usr.sbin/syslogd: args-selector.pl funcs.pl 
Added files:
	regress/usr.sbin/syslogd: args-selector-syslog.pl 

Log message:
Check that local syslog messages have the the expected priority.


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/06 11:00:52

Modified files:
	lib/libc/stdlib: malloc.3 

Log message:
Consistentcy between nmembers and size order. From Christopher Hettrick;
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/06 11:00:53

Modified files:
	sys/dev/sdmmc  : sdmmc_io.c sdmmc_scsi.c 

Log message:
Sizes for the remaining free() calls, and use mallocarray()
ok visa


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/06 11:28:37

Modified files:
	.              : 61.html 

Log message:
remove an XXX: comment


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/06 11:32:03

Modified files:
	faq            : faq15.html 

Log message:
don't mention calling pkg_create directly. use ports infrastructure instead.
minor wording tweak while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/06 11:33:39

Modified files:
	sbin/wsconsctl : wsconsctl.8 wsconsctl.c 

Log message:
document -=; while here, simplify things so that we don;t add a separate
usage every time we think of a new way to use this;

-= bits from anton lindqvist
ok tb tom


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/06 11:36:00

Modified files:
	share/man/man4 : inet6.4 

Log message:
shuffle for a saner read; help/ok bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/06 11:36:18

Modified files:
	sys/netinet    : ip_esp.c ip_mroute.c 

Log message:
Convert bcopy to memcpy where the memory does not overlap, otherwise,
use memmove.  While here, change some previous conversions to a simple
assignment.

ok deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	reyk@cvs.openbsd.org	2017/04/06 11:54:43

Modified files:
	.              : 61.html 

Log message:
Add notes about iked

OK deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	reyk@cvs.openbsd.org	2017/04/06 12:06:15

Modified files:
	.              : 61.html 

Log message:
Missing "d" in iked man link.

Pointed out by tj


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/06 12:07:13

Modified files:
	usr.sbin/vmd   : vmd.c vmd.h vmm.c 
	usr.sbin/vmctl : main.c vmctl.c vmctl.h 

Log message:
Do not expose vmm(4) VM IDs to the user, use vmd(8)'s IDs instead.

Each VM has two IDs: one from the kernel (vmm) and a different one
from userland (vmd).  The vmm ID is not consistent and incremented on
every boot during runtimg of the host system.  The vmd ID remains the
same during the lifetime of a configured VM, even after reboots.
Configured VMs will even get and keep their IDs when the configuration
is loaded.  This is more what users expect.

Pointed out and tested by otto@

OK deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 12:23:12

Modified files:
	.              : 61.html 

Log message:
missing punctuation and a typo

from rob pierce


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/06 12:25:38

Modified files:
	lib/libcrypto/bio: bio.h 

Log message:
trailing ; on end of macro definition is wrong; ok guenther


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/06 12:55:42

Modified files:
	sbin/bioctl    : bioctl.8 

Log message:
less chatty EXAMPLES; from anton lindqvist


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/04/06 13:09:45

Modified files:
	usr.sbin/makefs: cd9660.c cd9660.h 
	usr.sbin/makefs/cd9660: cd9660_write.c 

Log message:
Remove the CD9660MAXPATH define. It was used to construct the path for
opening the file, so PATH_MAX makes more sense here. While there change
the code to do two less allocations per file.

ok deraadt


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/06 13:15:24

Modified files:
	faq            : upgrade61.html 

Log message:
replace two occurrences of i386 with amd64


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/06 14:34:07

Modified files:
	audio/opus-tools: Makefile distinfo 
Removed files:
	audio/opus-tools/patches: patch-configure patch-src_audio-in_c 

Log message:
Update to 0.1.10.  No list of changes available, but looks like bug fixes.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/06 15:12:06

Modified files:
	usr.bin/doas   : doas.h env.c 

Log message:
prepenv can take a const rule


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/06 15:14:12

Modified files:
	usr.bin/doas   : doas.c 

Log message:
a little const here and there to prevent rules from changing


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/06 15:16:14

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
replace some long if/else chains with a switch


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/06 15:35:22

Modified files:
	usr.sbin/vmd   : parse.y 

Log message:
"kernel" got renamed to "boot" in vm.conf but I didn't commit the parse.y bits.

Found by Pontus Lundkvist

OK deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/06 16:11:23

Modified files:
	databases/mongodb: Makefile distinfo 
	databases/mongodb/pkg: PLIST 

Log message:
update to mongodb-3.2.12, from Andrew Aldridge (plus remove REVISION)


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/06 16:41:39

Modified files:
	sbin/dhclient  : Makefile 

Log message:
Inspired by recent dhcrelay(8) changes add some stricter CFLAGS. No code
changes needed (yet).


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/06 22:18:45

Modified files:
	.              : 61.html 

Log message:
pkg counts (a few are estimates for now)


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/06 22:45:24

Modified files:
	sys/dev/acpi   : acpicpu.c 

Log message:
Simplify the size calculation for memset()

From Anton Lindqvist (anton.lindqvist(at)gmail.com)


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/06 22:48:44

Modified files:
	sys/sys        : siginfo.h 

Log message:
si_addr should be of type void *, not char *

From Andrew Aldridge (i80and(at)foxquill.com)
ok millert@ mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/07 00:04:45

Modified files:
	textproc/uncrustify: Makefile distinfo 
	textproc/uncrustify/pkg: PLIST 

Log message:
update uncrustify to 0.64.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/07 01:07:19

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.37.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/07 01:07:32

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.74.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/07 01:12:22

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/patches: 
	                                   patch-platform_gsutil_gslib_commands_config_py 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-150.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/07 01:24:01

Modified files:
	benchmarks/speedtest-cli: Makefile distinfo 

Log message:
Update speedtest-cli to 1.0.3.

OK benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/07 01:44:40

Modified files:
	www/libcroco   : Makefile distinfo 
	www/libcroco/pkg: PLIST 

Log message:
Update to libcroco-0.6.12.
- drop the gettext MODULE


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/07 02:48:30

Modified files:
	lib/libtls     : tls_internal.h 

Log message:
Use uint8_t instead of u_int8_t - for consistency and to make things easier
for portable.

From Raphael Hittich.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/07 05:55:43

Modified files:
	security/nss   : Makefile distinfo 

Log message:
Update to 3.29.5: '3.29.4 has been deleted, because it identified itself
with an incorrect version number'

prodded by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/07 07:30:43

Modified files:
	sys/arch/octeon/include: autoconf.h 
	sys/arch/octeon/octeon: machdep.c 

Log message:
Make SoC version available in a simple form.


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/07 07:51:35

Modified files:
	.              : plus.html plus20.html plus21.html plus22.html 
	                 plus23.html plus24.html plus25.html plus26.html 
	                 plus27.html plus28.html plus29.html plus30.html 
	                 plus31.html plus32.html plus33.html plus34.html 
	                 plus35.html plus36.html plus37.html plus38.html 
	                 plus39.html plus40.html plus41.html plus42.html 
	                 plus43.html plus44.html plus45.html plus46.html 
	                 plus47.html plus48.html plus49.html plus50.html 
	                 plus51.html plus52.html plus53.html plus54.html 
	                 plus55.html plus56.html plus57.html plus58.html 
	                 plus59.html plus60.html 
Added files:
	.              : plus61.html 

Log message:
rotate plus files


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/07 08:17:38

Modified files:
	sys/arch/mips64/include: cpu.h 
	sys/arch/mips64/mips64: cpu.c 
	sys/arch/octeon/include: octeon_model.h 
	sys/arch/octeon/octeon: machdep.c 

Log message:
Add prid for CN72xx/CN73xx.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 08:25:10

Modified files:
	sysutils/sysclean: Makefile distinfo 
	sysutils/sysclean/pkg: DESCR 

Log message:
update to sysclean-2.2, from semarie


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 08:56:24

Modified files:
	security/letsencrypt/py-acme: distinfo 
	security/letsencrypt/client: distinfo 
	security/letsencrypt/client/patches: patch-examples_cli_ini 
	security/letsencrypt/client/pkg: PLIST 

Log message:
update to certbot-0.13.0


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/07 09:03:01

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h options.c 

Log message:
Simply decoding of domain search option. No intentional functional
change.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/07 09:36:16

Modified files:
	usr.sbin/syslogd: syslogd.c 

Log message:
Incoming TCP connections from clients fill the files of a log server.
A log client reconnects at every SIGHUP.  Write these accept and
close messages with debug priority, then they can be turned on in
syslog.conf.  Default is off.
While there, move a debug message and set the priority of the exit
message explicitly to error.
OK mpf@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/07 09:49:46

Modified files:
	regress/usr.sbin/syslogd: args-selector-syslog.pl 
	                          args-sighup-config.pl args-sighup.pl 
	                          funcs.pl 

Log message:
Adapt test to new syslogd's local message priority.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/07 10:21:53

Modified files:
	security/gnupg2: Makefile distinfo 
	security/gnupg2/pkg: PLIST 
Added files:
	security/gnupg2/patches: patch-doc_Makefile_in 
Removed files:
	security/gnupg2/patches: patch-agent_gpg-agent_c 
	                         patch-common_init_c 
	                         patch-dirmngr_dirmngr_c 
	                         patch-scd_scdaemon_c 

Log message:
Update gnupg2 to 2.1.20.

OK pea@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/07 11:33:45

Modified files:
	regress/lib/libtls/gotls: tls.go 

Log message:
In ssl.h TLS 1.0 is called TLSv1.  Adapt name in test to make it pass.
OK jsing@


CVSROOT:	/cvs
Module name:	www
Changes by:	gilles@cvs.openbsd.org	2017/04/07 11:38:52

Modified files:
	.              : 61.html 

Log message:
add the opensmtpd bit


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 12:51:52

Modified files:
	security/letsencrypt: Makefile.inc 

Log message:
update to certbot-0.13.0 (missed part of the commit)


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/04/07 13:55:06

Modified files:
	textproc/p5-ack: Makefile distinfo 
	textproc/p5-ack/pkg: PLIST 

Log message:
Update textproc/p5-ack to 2.18.

Feedback from Giannis Tsaraias and bluhm@
OK bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/04/07 14:26:22

Modified files:
	devel/src      : Makefile distinfo 

Log message:
Update devel/src to 1.13

OK aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/04/07 14:27:58

Modified files:
	security/py-M2Crypto: Makefile distinfo 
	security/py-M2Crypto/pkg: PLIST 

Log message:
Update security/py-M2Crypto to 0.26.0

OK aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 14:59:49

Modified files:
	devel/libexecinfo: Makefile 

Log message:
- only do -Wl,--export-dynamic in LDFLAGS not CFLAGS, removes a warning on
gcc, removes a build failure with -Werror on clang.

- add a do-test target.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/07 15:00:42

Modified files:
	distrib/miniroot: install.sub 

Log message:
Extend the information shown by diskinfo() to help to identify
disks. Extract the disk information enclosed in <> and the NAA
from the last matching dmesg line. Useful if there are multiple
identically sized disk of the same type.

Suggested by jirib at devio dot us
Discussed with deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 15:08:43

Modified files:
	graphics/darktable: Makefile distinfo 

Log message:
update to darktable-2.2.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/04/07 15:14:17

Modified files:
	lang/ruby/2.3  : Makefile distinfo 
	lang/ruby/2.3/pkg: PLIST-ri_docs 

Log message:
Update to ruby 2.3.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 15:32:20

Modified files:
	telephony/asterisk: Makefile distinfo 
	telephony/asterisk/patches: patch-Makefile patch-configure_ac 
	telephony/asterisk/pkg: PLIST-main 
Added files:
	telephony/asterisk/patches: patch-main_libasteriskssl_c 
	                            patch-main_tcptls_c 
Removed files:
	telephony/asterisk/patches: patch-channels_chan_skinny_c 
	                            patch-main_http_c 
	                            patch-main_manager_c 

Log message:
update to asterisk-13.15.0.

add various OPENSSL_VERSION_NUMBER patches now that asterisk supports
openssl 1.1:

- we don't have openssl 1.1's SSL_is_server yet, so use the old check
for ssl->server instead

- we do still need the hack to avoid initing multiple times which is
no longer needed in openssl 1.1


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/07 15:44:07

Modified files:
	etc            : netstart 
	distrib/miniroot: install.sub 

Log message:
Align comments of stripcom() function in netstart and install.sub.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 15:55:11

Modified files:
	databases/py-sqlparse: Makefile 
	databases/py-sqlparse/pkg: PLIST 

Log message:
de-conflict


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 15:56:30

Modified files:
	devel/py-xlsxwriter: Makefile 
	devel/py-xlsxwriter/pkg: PLIST 

Log message:
de-conflict


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/07 16:01:11

Modified files:
	security/py-artifacts: Makefile 
	security/py-artifacts/pkg: PLIST 

Log message:
de-conflict


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/07 16:02:29

Modified files:
	distrib/miniroot: install.sub 

Log message:
Sync variable names with netstart version of stripcom().
Use $_file variable instead of $1 with the wile-loop.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/07 16:15:17

Modified files:
	etc            : netstart 
	distrib/miniroot: install.sub 

Log message:
Align comments of ifstart() function in netstart and install.sub.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/07 16:53:25

Modified files:
	etc            : netstart 
	distrib/miniroot: install.sub 

Log message:
Minimize differences in ifstart() function between netstart and
install.sub which makes it easier to spot changes in the future.

- comments and formatting
- quotes on assignments are not needed (netstart)
- remove stray space in test (netstart)
- use $file variable with while-loop (netstart)
- although valid, instead of i use $i in arithmetic test (install.sub)

OK krw@, tb@
Looks good deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/07 18:31:36

Modified files:
	net/py-ftpdlib : Makefile distinfo 
	net/py-ftpdlib/pkg: PLIST 

Log message:
Update to pyftpdlib 1.5.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/07 19:20:10

Modified files:
	sys/dev/acpi   : acpi.c acpivar.h dsdt.c 

Log message:
Two prototypes for acpi_maptable; merge to one place


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/07 20:57:25

Modified files:
	sys/dev/i2c    : ihidev.c 
	sys/dev/ic     : aac.c ami.c i82365.c nvme.c rtw.c 
	sys/dev/pci    : if_nxe.c if_wpi.c if_wpivar.h mfii.c mpii.c 
	sys/dev/usb    : ehci.c if_athn_usb.c if_athn_usb.h if_kue.c 
	                 if_kuereg.h if_otus.c if_otusreg.h if_urndis.c 
	                 if_zyd.c if_zydreg.h uaudio.c ubcmtp.c ubsa.c 
	                 uchcom.c ucycom.c udl.c udl.h ugen.c uhid.c 
	                 uhidev.c uhub.c umct.c umidi.c umsm.c uoaklux.c 
	                 uoakrh.c uoakv.c upd.c uplcom.c usb.c usb_mem.c 
	                 usb_subr.c usbdi.c usbdivar.h uslhcom.c usps.c 
	                 uticom.c utrh.c uts.c utwitch.c uvideo.c 
	                 uvscom.c 

Log message:
A pile of sizes to free(9).  In test for a few days in snapshots.
Errors will result in nice clean panic messages so we know what's wrong.
Reviewed by dhill visa natano jsg.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/07 21:29:13

Modified files:
	sys/arch/i386/i386: trap.c 

Log message:
Remove some #if 0 code that dates back to r1.1

Pointed out by Michael W. Bombardieri


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/04/07 21:36:50

Modified files:
	sys/dev/pci    : if_msk.c if_skreg.h 

Log message:
Use ADDR64 opcodes to specify 64bit DMA addresses for all buffers.  This
consumes two ring entries per segment, halving the effective size of the
rings, but keeps things simple.  This is required for the onboard nic
on the Overdrive 1000 to work.

ok kettenis@, tested on i386 by jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/07 22:06:01

Modified files:
	sys/sys        : sensors.h 
	sys/kern       : kern_sensors.c 
	sys/dev/acpi   : acpi.c 

Log message:
Sensors are run as callbacks inside tasks.  During suspend a sensor
could be running inside a driver that will be force-detached, or due
to tsleep end up disrupting the softstate/hardstate contract.  At
suspend time, quisce all these callbacks by waiting for completion.
This issue has never been observed for real, but may be implicated in
suspend/resume failures.
ok kettenis guenther mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/07 22:25:48

Modified files:
	sysutils/libolecf: Makefile distinfo 

Log message:
update to 20170129.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/07 22:26:26

Modified files:
	sysutils/libsmdev: Makefile distinfo 

Log message:
update libsmdev to 20170225.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/07 22:29:56

Modified files:
	lang/python/3.4: Makefile distinfo 
	lang/python/3.4/pkg: PLIST-main 

Log message:
update python to 3.4.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/07 23:05:21

Modified files:
	devel/afl      : Makefile distinfo 

Log message:
update to afl 2.40b


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/08 00:52:18

Modified files:
	security/py-artifacts: Makefile 
	security/py-artifacts/pkg: PLIST 

Log message:
oops, backout: copy-and-pasto, and I missed the files in share/,
spotted by rpointel


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/08 02:33:05

Modified files:
	etc            : netstart 

Log message:
- localize the if, file and stat variables which also ensures that
variables are not named like commands.
- change test from [] to [[]]

OK tb@ halex@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 03:52:55

Modified files:
	x11/gnome/librsvg: Makefile distinfo 
	x11/gnome/librsvg/patches: patch-configure 
	x11/gnome/librsvg/pkg: PLIST 

Log message:
Update to librsvg-2.40.17.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 04:29:34

Modified files:
	net/glib2-networking: Makefile 
	net/glib2-networking/pkg: DESCR 

Log message:
Tweak/sync COMMENT and DESCR.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 04:39:22

Modified files:
	net/glib2-networking: Makefile 
	net/glib2-networking/pkg: PLIST 

Log message:
Just rm the libtool dot.la files instead of @comment'ing them.
Regen WANTLIB while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/08 04:53:48

Modified files:
	sys/arch/octeon/dev: cn30xxgmx.c cn30xxgmxreg.h 

Log message:
Make network ports work on Shasta.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 05:07:42

Modified files:
	devel/meson    : Makefile distinfo 

Log message:
Update to meson-0.39.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 07:29:22

Added files:
	devel/meson    : meson.port.mk 

Log message:
Add the meson MODULE.
It's still a bit rough around the edges but allows me to build the upcoming
libhttpseverywhere port.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 07:29:37

Modified files:
	share/man/man5 : port-modules.5 

Log message:
Document the devel/meson MODULE.


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/08 08:53:35

Modified files:
	.              : 61.html 

Log message:
add section about openssh, built from 7.4 and 7.5 release notes


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/08 09:07:07

Modified files:
	.              : 61.html 

Log message:
normalize text flow


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/08 09:14:37

Modified files:
	.              : 61.html 

Log message:
lead into vmd section better


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 09:47:13

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.38.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/08 09:47:25

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.75.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/08 11:00:10

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h options.c 

Log message:
Replace a mess of snprintf() dances with easier to read code using
strlcat(). Shorter, clearer, fewer signed vs unsigned questions.

Shrink static buffer for the string version of an option value from
32K to 8K. Since the string version of the entire lease is constructed
in a 8K buffer, bigger option values are pointless.

Use 8K of the saved space for a static buffer for pretty_print_string()
and use it rather scribbling intermediate values into the final
destination.

No intentional functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/08 12:14:23

Modified files:
	www/py-django/lts: Makefile distinfo 
	www/py-django/lts/pkg: PLIST 

Log message:
update django LTS version to 1.11.
ok benoit, sounds good jasper@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/08 12:21:07

Modified files:
	multimedia/gstreamer1: Makefile.inc 
	audio/openal   : Makefile 

Log message:
Use gcc4 MODULE instead of clang on sparc64 & powerpc

clang fails to build those with 'could not read symbols: Bad value' (cf
http://build-failures.rhaalovely.net/sparc64/2017-03-20/multimedia/gstreamer1/core.log
& ttp://build-failures.rhaalovely.net/sparc64/2017-03-20/audio/openal.log)

Fix only those as they take out a large part of the portstree for 6.1
package builds, but reasonably MODCLANG_ARCHS=* shouldnt be used unless
the compiler has been *really* tested on every platform - or clang
should be marked *BROKEN* on sparc64 & macppc, or those platforms should
be taken out of LLVM_ARCHS.

audio/mpd, textproc/link-grammar, devel/keystone and devel/cbmc are in
the same boat and fail the same.

The problem is probably fixable directly in clang for sparc64, and on
powerpc clang doesnt package anyway for 'relocation truncated to fit:
R_PPC_PLTREL24' errors:
http://build-failures.rhaalovely.net/powerpc/2017-02-16/devel/llvm.log


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/08 12:54:52

Modified files:
	sbin/dhclient  : dhcpd.h options.c 

Log message:
Replace another snprintf() dance with easier to read code using
strlcat(). Shorter, clearer, fewer signed vs unsigned questions.

Use an 8K static buffer for pretty_print_classless() and use it
rather scribbling intermediate values into the final destination.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/08 13:06:04

Modified files:
	usr.sbin/vmd   : i8253.c i8253.h 

Log message:
implement channels 1 and 2 of the legacy PIT.

ok otto, deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/08 13:06:29

Modified files:
	usr.sbin/vmd   : i8259.c 

Log message:
implement nonspecific EOI mode for the legacy PIC

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/08 13:08:18

Modified files:
	usr.sbin/vmd   : virtio.c 

Log message:
change a log message from "warn" to "debug" level, as the condition it is
reporting is not actually a warning.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/08 14:16:04

Modified files:
	sbin/dhclient  : clparse.c conflex.c dhclient.c dhcpd.h kroute.c 
	                 options.c packet.c parse.c 

Log message:
Reduce the overburden of signed vs unsigned comparisons by sprinkling
'int' -> 'unsigned int' (and visa versa) where obvious.

Steal a couple of 'unsigned' -> u_int32_t from reyk@'s dhcrelay
tweaks.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/08 14:36:50

Modified files:
	usr.sbin/syspatch: syspatch.8 

Log message:
use .Em for emphasis, not .Pa


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/04/08 14:53:54

Modified files:
	sys/conf       : GENERIC 

Log message:
re-enable POOL_DEBUG after the release; ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/08 16:31:33

Modified files:
	sys/arch/arm64/dev: ampintc.c 

Log message:
Bring over the changes I made to the armv7 version of this driver such that
interrupts are correctly routed to the boot cpu if that isn't the one
connected to CPU interface zero on the interrupt controller.

ok patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/08 16:38:17

Modified files:
	sys/arch/arm64/dev: pciecam.c 

Log message:
For legacy interrupt use the tag of the topmost bridge to establish the
interrupt.  We already correctly swizzle the pin.

ok patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	gsoares@cvs.openbsd.org	2017/04/08 16:50:42

Modified files:
	games/hunt/hunt: hunt.c 

Log message:
format string is better be literal
OK deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	gsoares@cvs.openbsd.org	2017/04/08 16:59:09

Modified files:
	games/hack     : hack.end.c 

Log message:
snprintf() format string should be literal
avoid compiler silly warnings

sure deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gsoares@cvs.openbsd.org	2017/04/08 17:39:06

Modified files:
	plan9/plan9port: Makefile distinfo 
Removed files:
	plan9/plan9port/patches: patch-src_cmd_9term_win_c 
	                         patch-src_libdraw_font_c 

Log message:
sync with github
zap patches merged upstream


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/08 20:40:24

Modified files:
	usr.sbin/sasyncd: conf.y 

Log message:
Fix multiple cases of reading past the end of a buffer in the sasyncd(8)
config parser found with afl.

feedback and ok millert@ ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 02:38:30

Modified files:
	devel/pango    : Makefile distinfo 

Log message:
Update to pango-1.40.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 03:06:49

Modified files:
	multimedia/gstreamer1: Makefile.inc 

Log message:
Don't maintain a local list of what should use llvm or gcc4 but insead
make sparc64 and powerpc the explicit exceptions.

discussed with landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 03:13:17

Modified files:
	x11/gtk+3      : Makefile distinfo 

Log message:
Update to gtk+3-3.22.12.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/09 03:13:28

Modified files:
	usr.sbin/httpd : httpd.conf.5 

Log message:
image/svg+xml is a default inbuilt media type.
Pointed out by Anton Lindqvist (anton.lindqvist AT gmail), thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 03:13:37

Modified files:
	security/gnutls: Makefile distinfo 

Log message:
Update to gnutls-3.5.11.


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/04/09 03:58:53

Modified files:
	usr.sbin/makefs: cd9660.h 

Log message:
Remove unused #define's and struct.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/09 04:49:17

Modified files:
	devel/libhid   : Makefile 

Log message:
Disable -Werror. The dirty hack (var=var) to avoid an "unused parameter"
warning triggers a "explicitly assigning value of variable .. to itself" with
clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/09 05:03:30

Modified files:
	audio/id3lib   : Makefile 

Log message:
set an autoconf var to permit building without iomanip.h; clang/libc++ arches
don't have it, and it's not actually used anyway.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/09 05:07:42

Added files:
	audio/id3lib/patches: patch-examples_demo_convert_cpp 
	                      patch-examples_demo_copy_cpp 
	                      patch-examples_demo_info_cpp 
	                      patch-examples_demo_tag_cpp 

Log message:
"main(unsigned int argc" -> "main(int argc"


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 05:08:07

Modified files:
	devel/capstone : Makefile 

Log message:
disable silent build


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 05:24:08

Modified files:
	games/solarus/solarus: Makefile distinfo 
	games/solarus/solarus/pkg: PLIST 

Log message:
update to solarus-1.5.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 05:24:24

Modified files:
	sysutils/ansible: Makefile distinfo 
	sysutils/ansible/pkg: PLIST 

Log message:
update to ansible-2.2.2.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 05:25:04

Modified files:
	textproc/p5-XML-NamespaceSupport: Makefile distinfo 

Log message:
update to p5-XML-NamespaceSupport-1.12


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 05:29:08

Log message:
    Import gxml-0.14.2.
    
    GXml is a GObject XML API for GNOME, with DOM4 implementation and Serialization
    framework wrapped around libxml2.
    
    ok jasper@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170409
    
    N ports/textproc/gxml/Makefile
    N ports/textproc/gxml/distinfo
    N ports/textproc/gxml/pkg/DESCR
    N ports/textproc/gxml/pkg/PLIST
    N ports/textproc/gxml/patches/patch-Makefile_in
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 05:29:48

Modified files:
	textproc       : Makefile 

Log message:
+gxml


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 05:30:58

Log message:
    Import glib-openssl-2.50.2.
    
    Network-related giomodule for GLib using openssl.
    
    ok jasper@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170409
    
    N ports/security/glib-openssl/Makefile
    N ports/security/glib-openssl/distinfo
    N ports/security/glib-openssl/pkg/DESCR
    N ports/security/glib-openssl/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 05:31:46

Log message:
    Import libhttpseverywhere-0.4.1.
    
    libhttpseverywhere leverages the power of HTTPSEverywhere
    (https://www.eff.org/https-everywhere) for desktop applications. HTTPSEverywhere
    is a browser plugin that comes with a set of rules that ensure that HTTP is used
    instead of HTTPS only when this is absolutely not circumventable.
    
    ok jasper@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170409
    
    N ports/security/libhttpseverywhere/Makefile
    N ports/security/libhttpseverywhere/distinfo
    N ports/security/libhttpseverywhere/pkg/DESCR
    N ports/security/libhttpseverywhere/pkg/PLIST
    N ports/security/libhttpseverywhere/patches/patch-meson_build
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 05:32:40

Modified files:
	security       : Makefile 

Log message:
+glib-openssl
+libhttpseverywhere


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 05:52:10

Modified files:
	textproc/gxml  : Makefile distinfo 

Log message:
Update to gxml-0.14.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 05:53:44

Modified files:
	misc/rlwrap    : Makefile distinfo 
	misc/rlwrap/patches: patch-Makefile_in patch-filters_Makefile_in 
	misc/rlwrap/pkg: PLIST 

Log message:
update to rlwrap-0.43


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 06:02:47

Modified files:
	sysutils/augeas: Makefile distinfo 
	sysutils/augeas/pkg: PLIST 

Log message:
update to augeas-1.8.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 06:03:20

Added files:
	games/solarus/solarus/patches: patch-gui_CMakeLists_txt 

Log message:
fix packaging (forgot to cvs add)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 06:16:26

Modified files:
	graphics/clutter/clutter-gst: Makefile distinfo 
	graphics/clutter/clutter-gst/pkg: PLIST 

Log message:
update to clutter-gst-3.0.24


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/09 06:49:11

Modified files:
	net/p5-Chatbot-Eliza: Makefile distinfo 

Log message:
Update to p5-Chatbot-Eliza-1.07.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 08:16:54

Modified files:
	lang/newlisp   : Makefile distinfo 

Log message:
update to newlisp-10.7.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/04/09 08:21:09

Modified files:
	www/goaccess   : Makefile distinfo 

Log message:
Update to goaccess-1.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/09 08:31:44

Modified files:
	regress/lib/libtls/gotls: tls.go 

Log message:
Improve unknown protocol version handling.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/09 08:33:21

Modified files:
	lib/libcrypto/buffer: buf_str.c 

Log message:
Explicitly test for NULL.

ok beck@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/09 08:37:44

Modified files:
	x11/gnome/gdm  : Makefile 

Log message:
CONFIGURE_STYLE=gnu is the default around here.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/09 09:03:54

Modified files:
	lib/libcrypto/buffer: buffer.c 

Log message:
With recallocarray() BUF_MEM_grow() is essentially the same as
BUF_MEM_grow_clean() (the only difference is clearing on internal down
sizing), so make it a wrapper.

ok beck@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/09 09:06:20

Modified files:
	lib/libcrypto/buffer: buffer.c 

Log message:
Simplify/clean up BUF_MEM_grow_clean().

ok beck@


CVSROOT:	/cvs
Module name:	www
Changes by:	jsing@cvs.openbsd.org	2017/04/09 09:30:39

Modified files:
	.              : 61.html 

Log message:
Clarify Curve25519/X25519 support.


CVSROOT:	/cvs
Module name:	www
Changes by:	jsing@cvs.openbsd.org	2017/04/09 09:41:29

Modified files:
	.              : 61.html 

Log message:
Remove mentions of LibreSSL fixes that were for issues introduced in the
same release cycle.


CVSROOT:	/cvs
Module name:	www
Changes by:	jsing@cvs.openbsd.org	2017/04/09 09:47:12

Modified files:
	.              : 61.html 

Log message:
LibreSSL edits.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/09 09:47:18

Modified files:
	sys/kern       : kern_sensors.c 

Log message:
Correct wakeup() dance in sensor_task_work()
Problem noticed by krw


CVSROOT:	/cvs
Module name:	www
Changes by:	jsing@cvs.openbsd.org	2017/04/09 09:58:26

Modified files:
	.              : 61.html 

Log message:
Add softraid crypto bcrypt PBKDF change.


CVSROOT:	/cvs
Module name:	www
Changes by:	jsing@cvs.openbsd.org	2017/04/09 10:17:27

Modified files:
	.              : 61.html 

Log message:
Remove another issue added and fixed between releases.


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 11:57:58

Modified files:
	sys/net        : if_pfsync.c if_vxlan.c 
	sys/netinet    : ip_carp.c ip_output.c 

Log message:
Use mallocarray to allocate multicast group memberships.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:05:17

Modified files:
	sys/dev/wscons : wsemul_vt100.c wsevent.c 

Log message:
Convert some malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:07:19

Modified files:
	sys/dev/ic     : aac.c adw.c ath.c 

Log message:
Convert some malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:09:41

Modified files:
	sys/dev/usb/dwc2: dwc2_hcd.c dwc2_hcdddma.c 

Log message:
Convert some malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:14:39

Modified files:
	sys/uvm        : uvm_swap.c 

Log message:
Convert a malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:15:09

Modified files:
	sys/ntfs       : ntfs_subr.c 

Log message:
Convert a malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:15:32

Modified files:
	sys/net80211   : ieee80211_input.c 

Log message:
Convert a malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/09 12:16:00

Modified files:
	sys/dev/pci    : azalia.c if_dc_pci.c if_nep.c 

Log message:
Convert some malloc(9) to mallocarray(9)

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/09 12:52:51

Added files:
	devel/protobuf/patches: patch-src_google_protobuf_message_cc 

Log message:
add missing header (istream) to devel/protobuf; unbreaks with clang

this port is overdue an update really..any takers?


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 13:01:35

Modified files:
	sysutils/consul-template: Makefile distinfo 

Log message:
update to consul-template-0.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/09 13:11:09

Modified files:
	lang/erlang/19 : Makefile distinfo 
	lang/erlang/19/pkg: PLIST-main PLIST-wx 

Log message:
update to erlang-19.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/09 13:30:09

Modified files:
	infrastructure/bin: check-lib-depends 

Log message:
add some back-substitution functionality to check-lib-depends, to be used
later.

okay sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/09 13:59:43

Modified files:
	sys/dev/pci    : if_nep.c 

Log message:
malloc -> mallocarray; a typo


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/09 14:44:13

Modified files:
	sbin/dhclient  : Makefile conflex.c dhclient.c kroute.c 
	                 options.c parse.c 

Log message:
Seven casts, a couple of tweaks and CFLAGS+=-Wsign-compare for the
win.

No intentional functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/09 15:16:34

Added files:
	devel/ois/patches: patch-demos_FFConsoleDemo_cpp 
	                   patch-demos_OISConsole_cpp 

Log message:
missing headers


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/09 15:18:27

Modified files:
	sysutils/ruby-puppet-lint: Makefile distinfo 
	sysutils/ruby-puppet-lint/pkg: PLIST 

Log message:
Update to 2.2.1, and take MAINTAINER

OK jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/09 15:32:42

Modified files:
	gnu/usr.bin/binutils/gdb: amd64obsd-tdep.c i386obsd-tdep.c 

Log message:
Sync symbol lists for trap/interrupt frame detection with what ddb(4) uses

ok deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/04/09 15:46:10

Modified files:
	faq/ports      : specialtopics.html 

Log message:
Jan Stary noticed that calling mandoc "quite stable by now" might
cause fear, uncertainty, and doubt, so delete the useless sentence.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/09 15:47:05

Modified files:
	lib/libcompiler_rt: Makefile 

Log message:
Add a few missing quad-precision support functions on arm64 and reorder the
list to match what's in CMakeLists.txt.

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/09 19:26:54

Modified files:
	lib/libssl/man : SSL_CTX_sess_number.3 

Log message:
typo fix; from <Jon dot Spillett at oracle dot com>
via OpenSSL commit 7bd27895


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/09 19:46:37

Modified files:
	lib/libssl/man : SSL_CTX_use_certificate.3 

Log message:
pasto; from <Jon dot Spillett at oracle dot com> via OpenSSL commit 3aaa1bd0


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/09 20:15:54

Modified files:
	sys/dev/pci    : if_msk.c 

Log message:
Attempt to map msk(4) interrupt via MSI.

The device tree that ships with the overdrive 1000 has an interrupt-map
property that is known to be wrong.  Using MSI on msk makes the builtin
Ethernet on the overdrive 1000 work.

Tested on arm64 with
"Marvell Yukon 88E8059" rev 0x00, Yukon-2 Optima (0x1)

and i386 with
"Marvell Yukon 88E8072" rev 0x10, Yukon-2 Extreme rev. B0 (0x2)

Committing this early in the release cycle to try find cases where using
MSI doesn't work.

Based on part of an earlier patch from jmatthew@
ok jmatthew@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/09 23:10:56

Modified files:
	lib/libc       : shlib_version 

Log message:
monir bump for freezero


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/09 23:45:02

Modified files:
	include        : stdlib.h 
	lib/libc       : Symbols.list 
	lib/libc/hidden: stdlib.h 
	lib/libc/stdlib: malloc.3 malloc.c 

Log message:
Introducing freezero(3) a version of free that guarantees the process
no longer has access to the content of a memmory object. It does
this by either clearing (if the object memory remains cached) or
by calling munmap(2). ok millert@, deraadt@, guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/09 23:47:33

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 00:09:32

Modified files:
	lib/libssl     : ssl_clnt.c 

Log message:
Convert various client key exchange functions to freezero(3). The memory
contents needs to be made inaccessible - this is simpler and less error
prone than the current "if not NULL, explicit_bzero(); free()" dance.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/10 00:31:31

Modified files:
	lib/libc/stdlib: malloc.3 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/04/10 02:19:12

Modified files:
	sbin/fsck_ffs  : pass1.c 

Log message:
Remove always false comparison: inosused type is ino_t, which is
unsigned.

While there, fix a whitespace issue.

OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/10 03:27:08

Modified files:
	usr.sbin/sasyncd: sasyncd.c 

Log message:
Check early if the mandatory carp "interface" was configured.

This allows the new -n config check to work correctly.

OK jsg@ deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/10 04:47:28

Modified files:
	emulators/vice : Makefile distinfo 
	emulators/vice/patches: patch-configure_ac patch-doc_Makefile_in 
	emulators/vice/pkg: PLIST 

Log message:
Update vice to 3.1.

Notable changes:

- Use the newly introduced --disable-portaudio configure option
- Avoid picking up mpg123

OK benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/10 05:10:33

Modified files:
	security/botan2: Makefile distinfo 
	security/botan2/patches: patch-configure_py 
	                         patch-src_build-data_os_openbsd_txt 
	security/botan2/pkg: PLIST 
Removed files:
	security/botan2/patches: patch-src_scripts_install_py 
	                         patch-src_tests_test_name_constraint_cpp 

Log message:
update botan2 to version 2.1.0
fix CVE-2017-7252 CVE-2017-2801
major library bump, forgotten upstream, use LIBbotan-2_VERSION
keep patches local that are needed by port system
build patches have been accepted upstream
support for getentropy(2) and arc4random(3) accepted upstream
botan CLI has been renamed to botan2 upstream
rename doc dir to botan-2
OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/10 05:18:28

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
Define LIBCXX, to hold the name of the standard C++ library/libraries
for use in WANTLIB. Method independently suggested by espie@ and myself,
ok phessler@ landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kettenis@cvs.openbsd.org	2017/04/10 05:30:51

Modified files:
	devel/swig     : Makefile 
Added files:
	devel/swig/patches: patch-Source_Swig_include_c 

Log message:
Fix filedescriptor leak.

ok kili@, jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/10 05:45:29

Modified files:
	archivers/fuse-zip: Makefile 
	archivers/innoextract: Makefile 
	archivers/lzip/lzip: Makefile 
	archivers/lzip/lziprecover: Makefile 
	archivers/lzip/plzip: Makefile 
	archivers/p7zip: Makefile 
	archivers/par2cmdline: Makefile 
	archivers/pecl-rar: Makefile 
	archivers/quazip: Makefile 
	archivers/snappy: Makefile 
	archivers/unrar: Makefile 
	archivers/zipios: Makefile 
	astro/celestia : Makefile 
	audio/adplay   : Makefile 
	audio/adplug   : Makefile 
	audio/akode    : Makefile 
	audio/aqualung : Makefile 
	audio/audacious-plugins: Makefile 
	audio/audacity : Makefile 
	audio/calf     : Makefile 
	audio/caps-plugins: Makefile 
	audio/chromaprint: Makefile 
	audio/cmt      : Makefile 
	audio/easytag  : Makefile 
	audio/espeak   : Makefile 
	audio/festival/core: Makefile 
	audio/flac     : Makefile 
	audio/gimmix   : Makefile 
	audio/gmpc-plugins: Makefile 
	audio/goattracker: Makefile 
	audio/gogglesmm: Makefile 
	audio/grip     : Makefile 
	audio/hydrogen : Makefile 
	audio/id3ed    : Makefile 
	audio/id3lib   : Makefile 
	audio/ladspa   : Makefile 
	audio/libbs2b  : Makefile 
	audio/libcanberra: Makefile 
	audio/libcdio  : Makefile 
	audio/liblastfm: Makefile 
	audio/libmodplug: Makefile 
	audio/libmusicbrainz: Makefile 
	audio/libmusicbrainz5: Makefile 
	audio/libofa   : Makefile 
	audio/libsidplay: Makefile 
	audio/lmms     : Makefile 
	audio/mac      : Makefile 
	audio/mcp-plugins: Makefile 
	audio/milkytracker: Makefile 
	audio/moc      : Makefile 
	audio/mp3blaster: Makefile 
	audio/mumble   : Makefile 
	audio/musique  : Makefile 
	audio/ncmpcpp  : Makefile 
	audio/ocp      : Makefile 
	audio/paulstretch: Makefile 
	audio/picard   : Makefile 
	audio/pms      : Makefile 
	audio/py-tagpy : Makefile 
	audio/ruby-id3lib: Makefile 
	audio/ruby-taglib: Makefile 
	audio/sidplay  : Makefile 
	audio/soundtouch: Makefile 
	audio/taglib   : Makefile 
	audio/tagtool  : Makefile 
	audio/tempest  : Makefile 
	audio/vagalume : Makefile 
	audio/vamp-plugin-sdk: Makefile 
	audio/xcd      : Makefile 
	audio/xmms2    : Makefile 
	benchmarks/bonnie++: Makefile 
	benchmarks/sysbench: Makefile 
	biology/nutdb  : Makefile 
	cad/fritzing   : Makefile 
	cad/geda-gaf   : Makefile 
	cad/gerbv      : Makefile 
	cad/gnucap     : Makefile 
	cad/gtkwave    : Makefile 
	cad/kicad      : Makefile 
	cad/klogic     : Makefile 
	cad/necpp      : Makefile 
	cad/openscad   : Makefile 
	cad/qcad       : Makefile 
	cad/qucs       : Makefile 
	comms/fldigi   : Makefile 
	comms/gmfsk    : Makefile 
	comms/gpsk31   : Makefile 
	comms/hamlib   : Makefile 
	comms/hylafax  : Makefile 
	comms/owx      : Makefile 
	comms/qtserialport: Makefile 
	converters/html2text: Makefile 
	converters/lastools: Makefile 
	converters/libpst: Makefile 
	converters/pflogx: Makefile 
	converters/wv2 : Makefile 
	databases/apache-couchdb: Makefile 
	databases/db/v4: Makefile 
	databases/evolution-data-server: Makefile 
	databases/kyotocabinet: Makefile 
	databases/leveldb: Makefile 
	databases/libdbi-drivers: Makefile 
	databases/libpqxx: Makefile 
	databases/libzdb: Makefile 
	databases/mariadb: Makefile 
	databases/mysqlcc: Makefile 
	databases/openldap: Makefile 
	databases/pgadmin3: Makefile 
	databases/postgresql-plv8: Makefile 
	databases/py-odbc: Makefile 
	databases/qt3-sqlite3-plugin: Makefile 
	databases/riak : Makefile 
	databases/soprano: Makefile 
	databases/sqlitebrowser: Makefile 
	databases/sqliteman: Makefile 
	databases/strigi: Makefile 
	databases/xapian-bindings: Makefile 
	databases/xapian-core: Makefile 
	devel/arm-none-eabi/gcc-linaro: Makefile 
	devel/astyle   : Makefile 
	devel/atf      : Makefile 
	devel/atlas    : Makefile 
	devel/beediff  : Makefile 
	devel/boehm-gc : Makefile 
	devel/boost    : Makefile 
	devel/bouml    : Makefile 
	devel/ccrtp    : Makefile 
	devel/cln      : Makefile 
	devel/cmake    : Makefile 
	devel/codeblocks: Makefile 
	devel/codeworker: Makefile 
	devel/commoncpp: Makefile 
	devel/cpptest  : Makefile 
	devel/cppunit  : Makefile 
	devel/cryptopp : Makefile 
	devel/csmith   : Makefile 
	devel/ddd      : Makefile 
	devel/dee      : Makefile 
	devel/doc++    : Makefile 
	devel/doxygen  : Makefile 
	devel/doxygen-gui: Makefile 
	devel/flatzebra: Makefile 
	devel/fox      : Makefile 
	devel/gdb      : Makefile 
	devel/geany    : Makefile 
	devel/gengetopt: Makefile 
	devel/gettext  : Makefile 
	devel/gflags   : Makefile 
	devel/glog     : Makefile 
	devel/gmp      : Makefile 
	devel/gperf    : Makefile 
	devel/gsoap    : Makefile 
	devel/gtest    : Makefile 
	devel/guilib   : Makefile 
	devel/gwenhywfar: Makefile 
	devel/harfbuzz : Makefile 
	devel/jdk/1.7  : Makefile 
	devel/jdk/1.8  : Makefile 
	devel/jsoncpp  : Makefile 
	devel/kdiff3   : Makefile 
	devel/kyua-cli : Makefile 
	devel/libaudiofile: Makefile 
	devel/libbinio : Makefile 
	devel/libconfig: Makefile 
	devel/libexecinfo: Makefile 
	devel/libmemcached: Makefile 
	devel/libofx   : Makefile 
	devel/libplist : Makefile 
	devel/libvmime : Makefile 
	devel/log4cplus: Makefile 
	devel/log4cpp  : Makefile 
	devel/lutok    : Makefile 
	devel/mico     : Makefile 
	devel/monotone : Makefile 
	devel/mozjs17  : Makefile 
	devel/mygui    : Makefile 
	devel/mysql++  : Makefile 
	devel/ninja    : Makefile 
	devel/ode      : Makefile 
	devel/ois      : Makefile 
	devel/openmpi  : Makefile 
	devel/pcre     : Makefile 
	devel/pcre++   : Makefile 
	devel/poedit   : Makefile 
	devel/protobuf : Makefile 
	devel/protobuf-c: Makefile 
	devel/ptlib    : Makefile 
	devel/py-sip   : Makefile 
	devel/pysvn    : Makefile 
	devel/qgit     : Makefile 
	devel/qjson    : Makefile 
	devel/ragel    : Makefile 
	devel/rapidsvn : Makefile 
	devel/re2c     : Makefile 
	devel/rlog     : Makefile 
	devel/ruby-therubyracer: Makefile 
	devel/sdcc     : Makefile 
	devel/sdlmm    : Makefile 
	devel/smpeg    : Makefile 
	devel/smpeg2   : Makefile 
	devel/srecord  : Makefile 
	devel/stp      : Makefile 
	devel/swig     : Makefile 
	devel/tclcl    : Makefile 
	devel/ti-msp430gcc: Makefile 
	devel/uuid     : Makefile 
	devel/yaml-cpp : Makefile 
	editors/TeXmacs: Makefile 
	editors/abiword: Makefile 
	editors/focuswriter: Makefile 
	editors/fte    : Makefile 
	editors/ht     : Makefile 
	editors/ktikz  : Makefile 
	editors/le     : Makefile 
	editors/moe    : Makefile 
	editors/py-qscintilla: Makefile 
	editors/qscintilla: Makefile 
	editors/scintilla: Makefile 
	editors/scite  : Makefile 
	editors/subtitleeditor: Makefile 
	editors/tea    : Makefile 
	editors/teaqt  : Makefile 
	editors/texmaker: Makefile 
	editors/texworks: Makefile 
	editors/tiled  : Makefile 
	editors/tpad   : Makefile 
	education/drgeo: Makefile 
	education/verbiste: Makefile 
	emulators/BasiliskII: Makefile 
	emulators/bochs: Makefile 
	emulators/desmume: Makefile 
	emulators/dgen-sdl: Makefile 
	emulators/dosbox: Makefile 
	emulators/fceux: Makefile 
	emulators/frodo: Makefile 
	emulators/fs-uae: Makefile 
	emulators/fuse-utils: Makefile 
	emulators/gambatte: Makefile 
	emulators/gxemul: Makefile 
	emulators/mupen64plus/core: Makefile 
	emulators/mupen64plus/rsp-z64: Makefile 
	emulators/mupen64plus/video-arachnoid: Makefile 
	emulators/mupen64plus/video-glide64: Makefile 
	emulators/mupen64plus/video-rice: Makefile 
	emulators/mupen64plus/video-z64: Makefile 
	emulators/nestopia: Makefile 
	emulators/openmsx: Makefile 
	emulators/pcsxr: Makefile 
	emulators/sdlmame: Makefile 
	emulators/sdlmess: Makefile 
	emulators/stella: Makefile 
	emulators/vice : Makefile 
	emulators/virtualjaguar: Makefile 
	games/abuse    : Makefile 
	games/afternoonstalker: Makefile 
	games/alephone/alephone: Makefile 
	games/amoebax  : Makefile 
	games/amph     : Makefile 
	games/armagetronad: Makefile 
	games/astromenace: Makefile 
	games/batrachians: Makefile 
	games/blobby   : Makefile 
	games/blobwars : Makefile 
	games/boswars  : Makefile 
	games/braincurses: Makefile 
	games/brumbrumrally: Makefile 
	games/burgerspace: Makefile 
	games/bzflag   : Makefile 
	games/capitan-sevilla: Makefile 
	games/choria   : Makefile 
	games/chromium-bsu: Makefile 
	games/clonekeen: Makefile 
	games/cosmosmash: Makefile 
	games/crack-attack: Makefile 
	games/crimson  : Makefile 
	games/csmash   : Makefile 
	games/dangerdeep: Makefile 
	games/dunelegacy: Makefile 
	games/dungeon-crawl: Makefile 
	games/easyrpg  : Makefile 
	games/eboard   : Makefile 

Log message:
use LIBCXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/10 05:46:23

Modified files:
	games/einstein : Makefile 
	games/eliot    : Makefile 
	games/enigma   : Makefile 
	games/f1spirit : Makefile 
	games/fillets-ng: Makefile 
	games/flare    : Makefile 
	games/gargoyle : Makefile 
	games/gemrb    : Makefile 
	games/gnuchess : Makefile 
	games/golly    : Makefile 
	games/gottcode : Makefile.inc 
	games/grhino   : Makefile 
	games/hedgewars: Makefile 
	games/hex-a-hop: Makefile 
	games/instead-launcher: Makefile 
	games/irrlamb  : Makefile 
	games/jag      : Makefile 
	games/kbilliards: Makefile 
	games/kobodeluxe: Makefile 
	games/late     : Makefile 
	games/liberalcrimesquad: Makefile 
	games/life     : Makefile 
	games/lincity-ng: Makefile 
	games/lostpixels: Makefile 
	games/love     : Makefile 
	games/maelstrom: Makefile 
	games/manaplus : Makefile 
	games/mars     : Makefile 
	games/meandmyshadow: Makefile 
	games/megaglest/base: Makefile 
	games/minetest : Makefile 
	games/nethack  : Makefile 
	games/numptyphysics: Makefile 
	games/oilwar   : Makefile 
	games/openttd  : Makefile 
	games/pokerth  : Makefile 
	games/pushover : Makefile 
	games/qgo      : Makefile 
	games/quadrupleback: Makefile 
	games/redeclipse: Makefile 
	games/residualvm: Makefile 
	games/ri-li    : Makefile 
	games/roadfighter: Makefile 
	games/sauerbraten: Makefile 
	games/scorched3d: Makefile 
	games/scummvm  : Makefile 
	games/scummvm-tools: Makefile 
	games/snipe2d  : Makefile 
	games/spacehulk: Makefile 
	games/speeddreams: Makefile 
	games/starfighter: Makefile 
	games/stepmania: Makefile 
	games/taxipilot: Makefile 
	games/teeworlds: Makefile 
	games/tong     : Makefile 
	games/toppler  : Makefile 
	games/tutris   : Makefile 
	games/tuxkart  : Makefile 
	games/tuxpaint-config: Makefile 
	games/valyriatear: Makefile 
	games/vegastrike/engine: Makefile 
	games/vodovod  : Makefile 
	games/warmux   : Makefile 
	games/wesnoth  : Makefile 
	games/widelands: Makefile 
	games/xbreaky  : Makefile 
	games/xevil    : Makefile 
	games/xjig     : Makefile 
	games/xkobo    : Makefile 
	games/xmahjongg: Makefile 
	games/xminehunter: Makefile 
	games/xmoto    : Makefile 
	games/xwelltris: Makefile 
	games/xye      : Makefile 
	games/zaz      : Makefile 
	geo/garmindev  : Makefile 
	geo/gdal       : Makefile 
	geo/geos       : Makefile 
	geo/gpsbabel   : Makefile 
	geo/gpstk      : Makefile 
	geo/mapserver  : Makefile 
	geo/merkaartor : Makefile 
	geo/osm2pgrouting: Makefile 
	geo/postgis    : Makefile 
	geo/qlandkartegt: Makefile 
	geo/spatialindex: Makefile 
	geo/spatialite/gis: Makefile 
	geo/spatialite/gui: Makefile 
	geo/spatialite/librasterlite: Makefile 
	geo/spatialite/librasterlite2: Makefile 
	geo/spatialite/librewms: Makefile 
	geo/spatialite/libspatialite: Makefile 
	geo/spatialite/tools: Makefile 
	graphics/DevIL : Makefile 
	graphics/GraphicsMagick: Makefile 
	graphics/ImageMagick: Makefile 
	graphics/agg   : Makefile 
	graphics/amide : Makefile 
	graphics/animorph: Makefile 
	graphics/aqsis : Makefile 
	graphics/asymptote: Makefile 
	graphics/autopano-sift-c: Makefile 
	graphics/cal3d : Makefile 
	graphics/ctl   : Makefile 
	graphics/dcmtk : Makefile 
	graphics/delaboratory: Makefile 
	graphics/discwrapper: Makefile 
	graphics/djview4: Makefile 
	graphics/djvulibre: Makefile 
	graphics/evince: Makefile 
	graphics/exiv2 : Makefile 
	graphics/ffmpegthumbnailer: Makefile 
	graphics/fotowall: Makefile 
	graphics/freeimage: Makefile 
	graphics/ftgl  : Makefile 
	graphics/fyre  : Makefile 
	graphics/gd    : Makefile 
	graphics/geeqie: Makefile 
	graphics/gegl  : Makefile 
	graphics/gegl03: Makefile 
	graphics/geomview: Makefile 
	graphics/gfract: Makefile 
	graphics/gimp/deskew: Makefile 
	graphics/gnofract4d: Makefile 
	graphics/goocanvas: Makefile 
	graphics/grap  : Makefile 
	graphics/graphite2: Makefile 
	graphics/gthumb: Makefile 
	graphics/gtkimageview: Makefile 
	graphics/ilmbase: Makefile 
	graphics/inkscape: Makefile 
	graphics/ipe   : Makefile 
	graphics/k3dsurf: Makefile 
	graphics/lensfun: Makefile 
	graphics/libpgf: Makefile 
	graphics/libraw: Makefile 
	graphics/libvidcap: Makefile 
	graphics/lsys  : Makefile 
	graphics/maim  : Makefile 
	graphics/makehuman: Makefile 
	graphics/mandelbulber: Makefile 
	graphics/mhgui : Makefile 
	graphics/ocrad : Makefile 
	graphics/opencolorio: Makefile 
	graphics/opencsg: Makefile 
	graphics/opencv: Makefile 
	graphics/openexr: Makefile 
	graphics/openexr-viewers: Makefile 
	graphics/openimageio: Makefile 
	graphics/openscenegraph: Makefile 
	graphics/pdf2djvu: Makefile 
	graphics/png2ico: Makefile 
	graphics/povray: Makefile 
	graphics/pstoedit: Makefile 
	graphics/py-matplotlib: Makefile 
	graphics/quesoglc: Makefile 
	graphics/rawstudio: Makefile 
	graphics/shotwell: Makefile 
	graphics/slop  : Makefile 
	graphics/tesseract/tesseract: Makefile 
	graphics/tiff  : Makefile 
	graphics/ufraw : Makefile 
	graphics/viewnior: Makefile 
	graphics/zint  : Makefile 
	graphics/zxing : Makefile 
	infrastructure/bin: check-lib-depends 
	inputmethods/scim: Makefile 
	inputmethods/scim-anthy: Makefile 
	inputmethods/scim-chewing: Makefile 
	inputmethods/scim-fcitx: Makefile 
	inputmethods/scim-hangul: Makefile 
	inputmethods/scim-pinyin: Makefile 
	inputmethods/scim-qtimm: Makefile 
	inputmethods/scim-tables: Makefile 
	inputmethods/uim: Makefile 
	japanese/groff : Makefile 
	japanese/kasumi: Makefile 
	japanese/mecab : Makefile 
	java/jlint     : Makefile 
	lang/classpath : Makefile 
	lang/erlang/16 : Makefile 
	lang/erlang/17 : Makefile 
	lang/erlang/18 : Makefile 
	lang/erlang/19 : Makefile 
	lang/freehdl   : Makefile 
	lang/intel2gas : Makefile 
	lang/iverilog  : Makefile 
	lang/jikes     : Makefile 
	lang/jruby     : Makefile 
	lang/libv8     : Makefile 
	lang/parrot    : Makefile 
	lang/php       : Makefile.inc 
	lang/php/5.6   : Makefile 
	lang/php/7.0   : Makefile 
	lang/python    : Makefile.inc 
	lang/spidermonkey: Makefile 
	lang/verilator : Makefile 
	mail/archiveopteryx: Makefile 
	mail/avenger   : Makefile 
	mail/claws-mail: Makefile 
	mail/courier-authlib: Makefile 
	mail/courier-unicode: Makefile 
	mail/dovecot   : Makefile 
	mail/dspam     : Makefile 
	mail/evolution-ews: Makefile 
	mail/evolution-rss: Makefile 
	mail/libetpan  : Makefile 
	mail/maildrop  : Makefile 
	mail/mu        : Makefile 
	mail/opensmtpd-extras: Makefile 
	mail/perdition : Makefile 
	mail/prepop    : Makefile 
	mail/sylpheed  : Makefile 
	mail/zarafa/zarafa: Makefile 
	math/aamath    : Makefile 
	math/cgal      : Makefile 
	math/freemat   : Makefile 
	math/ginac     : Makefile 
	math/gnuplot   : Makefile 
	math/graphviz  : Makefile 
	math/hdf5      : Makefile 
	math/kst       : Makefile 
	math/libneural : Makefile 
	math/libqalculate: Makefile 
	math/logic2cnf : Makefile 
	math/minisat   : Makefile 
	math/netcdf    : Makefile 
	math/ntl       : Makefile 
	math/octave    : Makefile 
	math/openfst   : Makefile 
	math/plplot    : Makefile 
	math/py-scipy  : Makefile 
	math/veusz     : Makefile 
	math/wxMaxima  : Makefile 
	math/z3        : Makefile 
	misc/cdrdao    : Makefile 
	misc/dtcltiny  : Makefile 
	misc/gpsd      : Makefile 
	misc/openbabel : Makefile 
	misc/rocrail   : Makefile 
	misc/xnc       : Makefile 
	multimedia/atomicparsley: Makefile 
	multimedia/avidemux: Makefile 
	multimedia/ccextractor: Makefile 
	multimedia/dvdstyler: Makefile 
	multimedia/gstreamer-0.10/plugins-bad: Makefile 
	multimedia/gstreamer-0.10/plugins-good: Makefile 
	multimedia/gstreamer-0.10/plugins-ugly: Makefile 
	multimedia/gstreamer1/plugins-bad: Makefile 
	multimedia/gstreamer1/plugins-good: Makefile 
	multimedia/kguitar: Makefile 
	multimedia/libmatroska: Makefile 
	multimedia/libmp4v2: Makefile 
	multimedia/libquicktime: Makefile 
	multimedia/libvpx: Makefile 
	multimedia/lives: Makefile 
	multimedia/mediainfo: Makefile 
	multimedia/mediatomb: Makefile 
	multimedia/mjpegtools: Makefile 
	multimedia/mpgtx: Makefile 
	multimedia/ogmrip: Makefile 
	multimedia/ogmtools: Makefile 
	multimedia/streamdvd: Makefile 
	multimedia/swfmill: Makefile 
	multimedia/swftools: Makefile 
	multimedia/transcode: Makefile 
	multimedia/x265: Makefile 
	net/amule      : Makefile 
	net/cagibi     : Makefile 
	net/castget    : Makefile 
	net/centerim   : Makefile 
	net/corebird   : Makefile 
	net/dclib      : Makefile 
	net/dxpc       : Makefile 
	net/dysnomia   : Makefile 
	net/filezilla  : Makefile 
	net/freetalk   : Makefile 
	net/gloox      : Makefile 
	net/gnugk      : Makefile 

Log message:
use LIBCXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/10 05:46:37

Modified files:
	net/h323plus   : Makefile 
	net/hexchat    : Makefile 
	net/iperf      : Makefile 
	net/irrtoolset : Makefile 
	net/jabberd    : Makefile 
	net/kea        : Makefile 
	net/kismet     : Makefile 
	net/lftp       : Makefile 
	net/libmygpo-qt: Makefile 
	net/libproxy   : Makefile 
	net/libtorrent : Makefile 
	net/livemedia  : Makefile 
	net/minbif     : Makefile 
	net/mldonkey   : Makefile 
	net/monitoring-plugins: Makefile 
	net/mosh       : Makefile 
	net/mosquitto  : Makefile 
	net/mutella    : Makefile 
	net/nam        : Makefile 
	net/neon       : Makefile 
	net/nepenthes  : Makefile 
	net/nload      : Makefile 
	net/nmap       : Makefile 
	net/ns         : Makefile 
	net/ntopng     : Makefile 
	net/openconnect: Makefile 
	net/osrtspproxy: Makefile 
	net/pchar      : Makefile 
	net/pidgin     : Makefile 
	net/pmacct     : Makefile 
	net/poco       : Makefile 
	net/psi        : Makefile 
	net/py-msgpack : Makefile 
	net/py-pcapy   : Makefile 
	net/qsynergy   : Makefile 
	net/quirc      : Makefile 
	net/retroshare : Makefile 
	net/rtorrent   : Makefile 
	net/ruby-eventmachine: Makefile 
	net/spectrum   : Makefile 
	net/synergy    : Makefile 
	net/tcpreen    : Makefile 
	net/telepathy/folks: Makefile 
	net/telepathy/telepathy-qt: Makefile 
	net/valknut    : Makefile 
	net/vncsnapshot: Makefile 
	net/xprobe     : Makefile 
	net/yaz        : Makefile 
	net/zeromq     : Makefile 
	news/multimail : Makefile 
	news/pan       : Makefile 
	print/apvlv    : Makefile 
	print/cups     : Makefile 
	print/hplip    : Makefile 
	print/htmldoc  : Makefile 
	print/lilypond : Makefile 
	print/lyx      : Makefile 
	print/poppler  : Makefile 
	print/py-poppler: Makefile 
	print/qpdf     : Makefile 
	print/scribus  : Makefile 
	print/sile     : Makefile 
	print/splix    : Makefile 
	print/texlive/base: Makefile 
	productivity/aqbanking: Makefile 
	productivity/devtodo: Makefile 
	productivity/entomologist: Makefile 
	productivity/fet: Makefile 
	productivity/glabels: Makefile 
	productivity/gnucash: Makefile 
	productivity/grisbi: Makefile 
	productivity/qhacc: Makefile 
	productivity/rubrica2: Makefile 
	security/botan : Makefile 
	security/cyrus-sasl2: Makefile 
	security/encfs : Makefile 
	security/fwbuilder: Makefile 
	security/gnutls: Makefile 
	security/keepassx: Makefile 
	security/kqoauth: Makefile 
	security/libnipper: Makefile 
	security/nipper: Makefile 
	security/opendnssec: Makefile 
	security/ophcrack: Makefile 
	security/pcsc-cyberjack: Makefile 
	security/pwsafe: Makefile 
	security/qca   : Makefile 
	security/qca-gnupg: Makefile 
	security/qca-ossl: Makefile 
	security/qca-tls: Makefile 
	security/qca2  : Makefile 
	security/qoauth: Makefile 
	security/qtkeychain: Makefile 
	security/softhsm: Makefile 
	security/ssdeep: Makefile 
	security/steghide: Makefile 
	security/yubico/yubikey-personalization-gui: Makefile 
	sysutils/apachetop: Makefile 
	sysutils/bacula: Makefile 
	sysutils/colortail: Makefile 
	sysutils/ddrescue: Makefile 
	sysutils/dtpstree: Makefile 
	sysutils/dvd+rw-tools: Makefile 
	sysutils/incron: Makefile 
	sysutils/knutclient: Makefile 
	sysutils/nut   : Makefile 
	sysutils/rsyslog: Makefile 
	sysutils/sleuthkit: Makefile 
	sysutils/smartmontools: Makefile 
	telephony/asterisk: Makefile 
	telephony/iaxclient: Makefile 
	telephony/pjsua: Makefile 
	telephony/stuntman: Makefile 
	tests/portbump/t1: Makefile 
	tests/portbump/t2: Makefile.inc 
	tests/portbump/t4: Makefile 
	tests/portbump/t5: Makefile 
	tests/portcheck/t7: Makefile 
	textproc/apertium: Makefile 
	textproc/apertium-lex-tools: Makefile 
	textproc/arabica: Makefile 
	textproc/aspell/core: Makefile 
	textproc/clo++ : Makefile 
	textproc/clucene: Makefile 
	textproc/enchant: Makefile 
	textproc/exempi: Makefile 
	textproc/fragistics: Makefile 
	textproc/groff : Makefile 
	textproc/gspell: Makefile 
	textproc/gtkspell: Makefile 
	textproc/gtkspell3: Makefile 
	textproc/gtranslator: Makefile 
	textproc/heirloom-doctools: Makefile 
	textproc/highlight: Makefile 
	textproc/hunspell: Makefile 
	textproc/icu4c : Makefile 
	textproc/isearch: Makefile 
	textproc/libebml: Makefile 
	textproc/libical: Makefile 
	textproc/libwpd: Makefile 
	textproc/lq-sp : Makefile 
	textproc/lttoolbox: Makefile 
	textproc/openjade: Makefile 
	textproc/opensp: Makefile 
	textproc/p5-Encode-Detect: Makefile 
	textproc/p5-Text-Aspell: Makefile 
	textproc/pugixml: Makefile 
	textproc/py-ICU: Makefile 
	textproc/rarian: Makefile 
	textproc/redland: Makefile 
	textproc/sablotron: Makefile 
	textproc/source-highlight: Makefile 
	textproc/sp    : Makefile 
	textproc/sphinx: Makefile 
	textproc/tinyxml: Makefile 
	textproc/tinyxml2: Makefile 
	textproc/uchardet: Makefile 
	textproc/uncrustify: Makefile 
	textproc/vislcg3: Makefile 
	textproc/wkhtmltopdf: Makefile 
	textproc/xerces-c: Makefile 
	textproc/xpdf  : Makefile 
	textproc/xxdiff: Makefile 
	www/arora      : Makefile 
	www/bluefish   : Makefile 
	www/cclive     : Makefile 
	www/cgicc      : Makefile 
	www/conkeror   : Makefile 
	www/dansguardian: Makefile 
	www/dillo      : Makefile 
	www/fcgi       : Makefile 
	www/gtkhtml4   : Makefile 
	www/havp       : Makefile 
	www/icedtea-web: Makefile 
	www/larbin     : Makefile 
	www/lighttpd   : Makefile 
	www/minitube   : Makefile 
	www/mozilla    : mozilla.port.mk 
	www/nginx      : Makefile 
	www/phantomjs  : Makefile 
	www/ruby-capybara-webkit: Makefile 
	www/ruby-passenger: Makefile 
	www/seamonkey  : Makefile 
	www/slowhttptest: Makefile 
	www/sqtop      : Makefile 
	www/webkit     : Makefile 
	www/xapian-omega: Makefile 
	x11/bbdate     : Makefile 
	x11/bbkeys     : Makefile 
	x11/bbpager    : Makefile 
	x11/blackbox   : Makefile 
	x11/compiz/core: Makefile 
	x11/compiz/libcompizconfig: Makefile 
	x11/e17/evas   : Makefile 
	x11/ede/desktop: Makefile 
	x11/ede/lib    : Makefile 
	x11/fleditor   : Makefile 
	x11/fltk       : Makefile 
	x11/fluxbox    : Makefile 
	x11/fluxter    : Makefile 
	x11/flwm       : Makefile 
	x11/fsv        : Makefile 
	x11/gaia       : Makefile 
	x11/gmrun      : Makefile 
	x11/gnome/anjuta: Makefile 
	x11/gnome/banshee: Makefile 
	x11/gnome/bijiben: Makefile 
	x11/gnome/builder: Makefile 
	x11/gnome/calendar: Makefile 
	x11/gnome/color-manager: Makefile 
	x11/gnome/contacts: Makefile 
	x11/gnome/control-center: Makefile 
	x11/gnome/empathy: Makefile 
	x11/gnome/gedit: Makefile 
	x11/gnome/latexila: Makefile 
	x11/gnome/libgda: Makefile 
	x11/gnome/online-accounts: Makefile 
	x11/gnome/recipes: Makefile 
	x11/gnome/shell: Makefile 
	x11/gnome/sushi: Makefile 
	x11/gnome/todo : Makefile 
	x11/gnome/tracker: Makefile 
	x11/gnustep/gui: Makefile 
	x11/gnustep/libobjc2: Makefile 
	x11/gnustep/pdfkit: Makefile 
	x11/goggles    : Makefile 
	x11/grantlee   : Makefile 
	x11/gtk-engines2: Makefile 
	x11/gtk2-aurora-engine: Makefile 
	x11/gtk2-equinox-engine: Makefile 
	x11/gtk2-murrine-engine: Makefile 
	x11/gtk2-nodoka-engine: Makefile 
	x11/gtk2-oxygen-engine: Makefile 
	x11/gtk3-oxygen-engine: Makefile 
	x11/gtkglarea  : Makefile 
	x11/gtkglext   : Makefile 
	x11/icewm      : Makefile 
	x11/idesk      : Makefile 
	x11/irrlicht   : Makefile 
	x11/kde/accessibility3: Makefile 
	x11/kde/arts3  : Makefile 
	x11/kde/artwork3: Makefile 
	x11/kde/base3  : Makefile 
	x11/kde/games3 : Makefile 
	x11/kde/libs3  : Makefile 
	x11/kdirstat   : Makefile 
	x11/mplayer    : Makefile 
	x11/nx/nxcomp  : Makefile 
	x11/nx/nxproxy : Makefile 
	x11/nx/nxssh   : Makefile 
	x11/nx/opennx  : Makefile 
	x11/p5-Wx      : Makefile 
	x11/pekwm      : Makefile 
	x11/pinot      : Makefile 
	x11/polkit-qt  : Makefile 
	x11/py-qt4     : Makefile 
	x11/py-wxPython: Makefile 
	x11/qrfcview   : Makefile 
	x11/qt3        : Makefile 
	x11/qt4        : Makefile 
	x11/qvwm       : Makefile 
	x11/qwt        : Makefile 
	x11/slim       : Makefile 
	x11/treewm     : Makefile 
	x11/vlc        : Makefile 
	x11/waimea     : Makefile 
	x11/wbar       : Makefile 
	x11/wm2        : Makefile 
	x11/wmi        : Makefile 
	x11/wmx        : Makefile 
	x11/wxSVG      : Makefile 
	x11/wxWidgets  : Makefile 
	x11/xchm       : Makefile 
	x11/xdrawchem  : Makefile 
	x11/xfce4/parole: Makefile 
	x11/xfce4/thunar-media-tags: Makefile 
	x11/xfce4/xfce4-whiskermenu: Makefile 
	x11/xfe        : Makefile 
	x11/xglobe     : Makefile 
	x11/xplanet    : Makefile 
	x11/xsettingsd : Makefile 

Log message:
use LIBCXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	kettenis@cvs.openbsd.org	2017/04/10 06:54:14

Modified files:
	editors/emacs/patches: patch-configure 

Log message:
Make this build on arm64.  No REVISION bump as this didn't build on arm64
before.

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/10 06:56:11

Modified files:
	www/webkitgtk4/patches: 
	                        patch-Source_WebCore_bindings_scripts_generate-bindings-all_pl 

Log message:
Committed upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/10 06:56:26

Modified files:
	devel/p5-BSD-Resource: Makefile distinfo 

Log message:
update p5-BSD-Resource to 1.2911


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 07:05:06

Modified files:
	lib/libssl/man : Makefile 
Added files:
	lib/libssl/man : SSL_CTX_set_tlsext_servername_callback.3 

Log message:
new manual page SSL_CTX_set_tlsext_servername_callback(3) for SNI;
from <Jon dot Spillett at oracle dot com>
via OpenSSL commit 8c55c461


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/10 07:13:02

Modified files:
	emulators/qemu : Makefile distinfo 
	emulators/qemu/patches: patch-hw_virtio_virtio_c 

Log message:
Update to qemu-2.8.1.

from Brad (MAINTAINER)


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/10 07:32:26

src/usr.sbin/slaacctl

Update of /cvs/src/usr.sbin/slaacctl
In directory cvs.openbsd.org:/tmp/cvs-serv31155/slaacctl

Log Message:
Directory /cvs/src/usr.sbin/slaacctl added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/10 07:35:42

Added files:
	usr.sbin/slaacctl: Makefile parser.c parser.h slaacctl.8 
	                   slaacctl.c 
Removed files:
	usr.sbin/slaacdctl: Makefile parser.c parser.h slaacdctl.8 
	                    slaacdctl.c 

Log message:
The canonical name for ctl programs is without 'd'.
Pointed out by Brad.
OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/10 07:36:04

Modified files:
	gnu/usr.bin/clang/include/clang/intrin: Makefile 

Log message:
Generate and install arm_neon.h on arm and arm64.

ok jsg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/10 07:38:41

Modified files:
	net/unifi      : Makefile distinfo 
	net/unifi/pkg  : PLIST 

Log message:
update to unifi-5.4.14


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/10 07:40:36

Modified files:
	distrib/sets/lists/comp: md.arm64 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/04/10 07:56:16

Modified files:
	games/adventure: hdr.h 

Log message:
Clean up disabled declaration in the text struct.

OK deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/10 07:59:31

Modified files:
	.              : 61.html 

Log message:
6.1 pkg counts for arm and hppa


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 08:00:51

Modified files:
	lib/libssl/man : SSL_CTX_add_extra_chain_cert.3 SSL_CTX_ctrl.3 
	                 SSL_CTX_sess_number.3 
	                 SSL_CTX_sess_set_cache_size.3 
	                 SSL_CTX_set_max_cert_list.3 SSL_CTX_set_mode.3 
	                 SSL_CTX_set_options.3 
	                 SSL_CTX_set_session_cache_mode.3 
	                 SSL_CTX_set_tlsext_status_cb.3 
	                 SSL_CTX_set_tlsext_ticket_key_cb.3 
	                 SSL_num_renegotiations.3 SSL_session_reused.3 
	                 SSL_set_max_send_fragment.3 ssl.3 

Log message:
for pure *_ctrl() wrapper macros, move the reference from ssl(3)
to SSL_CTX_ctrl(3) to make ssl(3) slightly more palatable


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/10 08:01:55

Modified files:
	games/sl       : Makefile distinfo 
	games/sl/pkg   : DESCR 
Removed files:
	games/sl/patches: patch-sl_1 

Log message:
Update sl to 5.02.

Notable changes:

- Switch to using GitHub
- Remove now unnecessary patch, upstream man page is now in English

OK jung@


CVSROOT:	/cvs
Module name:	www
Changes by:	kettenis@cvs.openbsd.org	2017/04/10 08:17:58

Modified files:
	.              : 61.html 

Log message:
Mention that armv7 has had some major improvements (including and ABI switch).


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/10 08:22:04

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/10 08:32:47

Modified files:
	sbin/ipsecctl  : pfkdump.c 

Log message:
Found another len += snprintf...
ok mikeb


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/10 08:35:30

Modified files:
	sys/arch/mips64/include: signal.h 

Log message:
Use __ASSEMBLER__ instead of __LANGUAGE_ASSEMBLY.
The latter is not defined by clang.

OK guenther@, kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/10 08:46:13

Modified files:
	usr.sbin/slaacctl: slaacctl.8 
	usr.sbin/slaacd: slaacd.8 

Log message:
slaacdctl -> slaacctl;


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 09:37:55

Modified files:
	lib/libssl/man : Makefile SSL_CTX_set_session_id_context.3 
	                 SSL_SESSION_get_time.3 SSL_SESSION_new.3 
	                 SSL_copy_session_id.3 SSL_get_session.3 ssl.3 
Added files:
	lib/libssl/man : SSL_SESSION_get0_peer.3 
	                 SSL_SESSION_get_compress_id.3 
	                 SSL_SESSION_get_id.3 
	                 SSL_SESSION_set1_id_context.3 

Log message:
Additional SSL_SESSION documentation
from Matt Caswell <matt at openssl dot org>, OpenSSL commit b31db505.
Improve crosslinking while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 09:54:46

Modified files:
	lib/libssl/man : Makefile SSL_CTX_ctrl.3 
Added files:
	lib/libssl/man : SSL_get_server_tmp_key.3 

Log message:
new manual page SSL_get_server_tmp_key(3)
from Matt Caswell <matt@openssl.org>, OpenSSL commit 508fafd8


CVSROOT:	/cvs
Module name:	www
Changes by:	jca@cvs.openbsd.org	2017/04/10 09:54:51

Modified files:
	.              : want.html 

Log message:
I could use an arm64 box for ports work.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 10:11:51

Modified files:
	lib/libssl/man : BIO_f_ssl.3 SSL_CTX_set_cert_store.3 
	                 d2i_SSL_SESSION.3 

Log message:
fix some .Xr errors that jmc@ found with mdoclint(1)


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/10 10:20:31

Modified files:
	lib/libc/sys   : recv.2 

Log message:
Fix tabs in example code.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 10:47:08

Modified files:
	lib/libssl     : ssl_asn1.c 

Log message:
Use freezero() for i2d_SSL_SESSION() - one line of code instead of three.
In this case the memory allocated can also be significant, in which case
freezero() will have less overhead than explicit_bzero() (munmap instead
of touching all of the memory to write zeros).


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 10:48:43

Modified files:
	lib/libssl     : t1_enc.c 

Log message:
freezero() the key block; simpler code and less of it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsing@cvs.openbsd.org	2017/04/10 10:50:19

Modified files:
	lang/go        : Makefile distinfo 
	lang/go/pkg    : PLIST 

Log message:
Update lang/go to 1.8.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/10 11:01:06

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 11:11:13

Modified files:
	lib/libtls     : tls_client.c tls_internal.h tls_peer.c 
	                 tls_server.c tls_verify.c 

Log message:
Rework name verification code so that a match is indicated via an argument,
rather than return codes. More strictly follow RFC 6125, in particular only
check the CN if there are no SAN identifiers present in the certificate
(per section 6.4.4).

Previous behaviour questioned by Daniel Stenberg <daniel at haxx dot se>.

ok beck@ jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 11:12:30

Modified files:
	regress/lib/libtls/verify: verifytest.c 

Log message:
Rework and significantly extend TLS name verification tests to match
changes in libtls.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 11:14:44

Modified files:
	lib/libcrypto/man: X509_cmp_time.3 

Log message:
document three additional functions;
from Emilia Kasper <emilia at openssl dot org>, OpenSSL commit 4ac139b4


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 11:25:22

Modified files:
	lib/libssl     : s3_lib.c 

Log message:
Use freezero() for X25519 keys - same result with more readable code.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/10 11:27:33

Modified files:
	lib/libssl     : d1_lib.c s3_lib.c ssl_sess.c 

Log message:
Use freezero() for the internal opaque structures, instead of the current
explicit_bzero()/free(). Less code and potentially less overhead.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/10 11:45:06

Modified files:
	lib/libcrypto/man: EVP_PKEY_CTX_new.3 EVP_PKEY_derive.3 
	                   EVP_PKEY_keygen.3 Makefile 
Added files:
	lib/libcrypto/man: X25519.3 

Log message:
new X25519(3) manual page;
from Dr. Stephen Henson <steve@openssl.org>, OpenSSL commit d218f3c3


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/10 12:09:10

Modified files:
	x11/gnome/control-center/patches: 
	                                  patch-panels_user-accounts_um-realm-manager_c 

Log message:
Add BZ URL.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/10 12:11:03

Modified files:
	graphics/libgphoto2: Makefile distinfo 

Log message:
Update to libgphoto-2.5.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/10 13:10:33

Modified files:
	www/py-django/stable: Makefile distinfo 
	www/py-django/stable/pkg: PLIST 

Log message:
security fix to 1.10.7.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/10 13:11:11

Modified files:
	databases/sqlports: Makefile 
	databases/sqlports/files: TreeWalker.pm 

Log message:
hack things so that LIBCXX doesn't get expanded for sqlports.
This will probably be revisited and cleansed later.

okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/10 13:59:58

Modified files:
	www/p5-WWW-Curl: Makefile 

Log message:
Remove dead HOMEPAGE, falling back to the default CPAN one which still works.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/10 15:47:44

Modified files:
	sbin/dhclient  : dhclient.c privsep.c privsep.h 

Log message:
Rework -L logic to use the idiom used in handling the leases file.
i.e. open FILE during program set up and use the FILE created for
the rest of the program lifetime after dropping privilege and
pledge()'ing. No need for passing messages to the priv process.

Tweak lease file handling a bit in passing.

Monitoring the -L file with external programs like sysutils/entr
still works.

Looks good to sthen@.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/10 17:18:57

Modified files:
	faq            : upgrade61.html 

Log message:
also need to change /usr/{,x}obj if you want to do some building


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/04/10 21:00:12

Modified files:
	www/varnish    : Makefile distinfo 

Log message:
Update for Varnish to 5.1.2.

OK benoit@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/10 21:28:02

Modified files:
	faq            : faq10.html faq11.html faq14.html faq15.html 
	                 faq4.html faq5.html faq6.html faq8.html 
	                 index.html 
Removed files:
	faq/ports      : ports.html 

Log message:
6.1 faq updates:

- syspatch
- less xdm, more xenodm
- less pkg.conf, more installurl
- vmm networking (written by edd)
- signing_params is gone
- pkg_sign flags changed
- build user changes (written by tb)
- https in the installer
- cvs version bumps
- remove ports.html redirect page

ok tb


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/10 21:29:09

Modified files:
	.              : alpha.html amd64.html anoncvs.html armv7.html 
	                 errata59.html errata61.html ftp.html hppa.html 
	                 i386.html landisk.html loongson.html 
	                 luna88k.html macppc.html octeon.html sgi.html 
	                 sparc64.html stable.html 
	build          : Makefile 
	build/mirrors  : anoncvs.html.head ftp.html.end 

Log message:
6.1 updates.

ok tb


CVSROOT:	/cvs
Module name:	www
Changes by:	jsg@cvs.openbsd.org	2017/04/10 22:51:08

Modified files:
	.              : arm64.html 

Log message:
msk on overdrive 1000


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/10 23:35:37

Modified files:
	www/sblg       : Makefile distinfo 

Log message:
Update to sblg-0.4.1.

Changelog:

"Enpower -l (tag-listing mode). This is now able to emit all tags in JSON
formatted output via -j, which makes it easy for dynamic sites to play with
tag listings in any way they choose. (See sblg(1) for an explanation of the
output format.) Also add -r, which stipulates that -l will print tag-first.
This is most useful for -j, as it allows for easy browsing by tag name."


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/11 00:52:13

Modified files:
	sys/arch/arm64/arm64: machdep.c process_machdep.c 
	sys/arch/arm64/include: reg.h 

Log message:
Revise 'struct fpreg' and dump floating-point register in core dumps.  Also
reset the floating-point register state upon exec.

ok guenther@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:25:38

Modified files:
	devel/glib2    : Makefile distinfo 
	devel/glib2/patches: patch-gio_glib-compile-schemas_c 
	devel/glib2/pkg: PLIST 

Log message:
Update to glib2-2.52.1.
- survived a bulk
- this officially starts the work on updating GNOME to 3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:26:02

Modified files:
	devel/atk      : Makefile distinfo 
	devel/atk/pkg  : PLIST 

Log message:
Update to atk-2.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:26:24

Modified files:
	x11/gnome/at-spi2-core: Makefile distinfo 
	x11/gnome/at-spi2-core/pkg: PLIST 

Log message:
Update to at-spi2-core-2.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:26:39

Modified files:
	x11/gnome/at-spi2-atk: Makefile distinfo 

Log message:
Update to at-spi2-atk-2.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:26:56

Modified files:
	devel/py-gobject3: Makefile distinfo 

Log message:
Update to py-gobject3-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:27:15

Modified files:
	x11/gnome/py-atspi: Makefile distinfo 

Log message:
Update to py3-atspi-2.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 01:37:36

Modified files:
	devel/py-gobject3: Makefile distinfo 

Log message:
Update to py-gobject3-3.24.1.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/11 01:50:27

Modified files:
	faq            : upgrade61.html 

Log message:
missing punctuation


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 02:35:53

Modified files:
	x11/gnome/dictionary: Makefile 
Added files:
	x11/gnome/dictionary/patches: 
	                              patch-libgdict_gdict-client-context_h 
	                              patch-src_gdict-app_c 
	                              patch-src_gdict-sidebar_c 
	                              patch-src_gdict-source-dialog_c 

Log message:
Unbreak with newer GLib.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/11 03:28:00

Modified files:
	devel/py-parsedatetime: Makefile distinfo 
	devel/py-parsedatetime/pkg: PLIST 

Log message:
update py-parsedatetime to 2.3.
ok sthen@ (maintainer).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 03:43:59

Modified files:
	x11/gnome/dictionary: Makefile distinfo 
	x11/gnome/dictionary/pkg: PLIST 
Removed files:
	x11/gnome/dictionary/patches: 
	                              patch-libgdict_gdict-client-context_h 
	                              patch-src_gdict-app_c 
	                              patch-src_gdict-sidebar_c 
	                              patch-src_gdict-source-dialog_c 

Log message:
Update to gnome-dictionary-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 03:49:45

Modified files:
	x11/gnome/adwaita-icon-theme: Makefile distinfo 
	x11/gnome/adwaita-icon-theme/pkg: PLIST 

Log message:
Update to adwaita-icon-theme-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 03:51:48

Modified files:
	x11/gnome/backgrounds: Makefile distinfo 

Log message:
Update to gnome-backgrounds-3.24.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/11 03:57:19

Modified files:
	lib/libutil    : imsg-buffer.c imsg.c 

Log message:
Use freezero(3) for the imsg framework in imsg_free(3) and ibuf_free(3).

In our privsep model, imsg is often used to transport sensitive
information between processes.  But a process might free an imsg, and
reuse the memory for a different thing.  iked uses some
explicit_bzero() to clean imsg-buffer but doing it in the library with
the freezero() is less error-prone and also benefits other daemons.

OK deraadt@ jsing@ claudio@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/11 04:09:31

Modified files:
	faq            : current.html 

Log message:
link to upgrade61.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/11 04:11:38

Modified files:
	x11/gnome/devhelp: Makefile distinfo 
	x11/gnome/devhelp/pkg: PLIST 

Log message:
Update to devhelp-3.24.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/11 04:40:14

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h kroute.c 

Log message:
Fold priv_write_file() into its only remaining user
priv_write_resolv_conf() and move the latter into kroute.c
with all its priv_ friends.

No intentional functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/11 05:00:24

ports/net/icbd/patches

Update of /cvs/ports/net/icbd/patches
In directory cvs.openbsd.org:/tmp/cvs-serv83813/patches

Log Message:
Directory /cvs/ports/net/icbd/patches added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/04/11 05:01:28

Modified files:
	share/man/man5 : port-modules.5 

Log message:
document more thoroughly the special status of modules gnu, imake, perl5
(for historical reasons)

okay aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/11 05:01:39

Modified files:
	net/icbd       : Makefile 
Added files:
	net/icbd/patches: patch-icb_c patch-icb_h 

Log message:
Don't inline icb_lsmod, fixes with clang (which has c99 inline by default).
Committed upstream.


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/04/11 05:54:13

Modified files:
	.              : innovations.html 

Log message:
ocspcheck(8) and freezero(3)


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/04/11 05:57:42

Modified files:
	.              : 61.html 

Log message:
typo


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/11 06:45:36

Modified files:
	www/icedtea-web: Makefile 

Log message:
Switch to jdk-1.8+ to unbreak javaws(1) and take maintainership
ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/11 06:49:52

Modified files:
	misc/memcached : Makefile distinfo 

Log message:
Important bugfix update to 1.4.36
Full Changelog at https://github.com/memcached/memcached/wiki/ReleaseNotes


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/11 06:53:49

Modified files:
	mail/p5-MIME-tools: Makefile distinfo 

Log message:
update to 5.509


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/11 07:14:08

Modified files:
	lib/libssl     : ssl_asn1.c 

Log message:
Revert ssl_asn1.c r1.50 - CBB and freezero(3) do not play nicely together.
Back this out while we investigate and implement a solution.

Found the hard way by sthen@


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/11 07:23:37

Modified files:
	.              : 61.html index.html lyrics.html 
Added files:
	images         : Fugu.gif puffy61.gif 

Log message:
release 6.1


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/11 07:32:58

Modified files:
	faq            : current.html 

Log message:
something went wrong in the previous commit.

reported by johnny-o via tj


CVSROOT:	/cvs
Module name:	www
Changes by:	bcook@cvs.openbsd.org	2017/04/11 07:40:34

Modified files:
	libressl       : index.html releases.html 

Log message:
update to 2.5.3 for OpenBSD 6.1 release


CVSROOT:	/cvs
Module name:	www
Changes by:	bcook@cvs.openbsd.org	2017/04/11 07:52:28

Modified files:
	libressl       : index.html 

Log message:
Generalize the utilities line to be a catch-all for new programs, suggested by jsing@, ok from beck@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/11 07:55:38

Modified files:
	textproc       : Makefile 
Removed files:
	textproc/agrep : Makefile distinfo 
	textproc/agrep/patches: patch-agrep_h patch-compat_c 
	                        patch-follow_c patch-mgrep_c 
	                        patch-parse_c patch-sgrep_c 
	                        patch-utilities_c 
	textproc/agrep/pkg: DESCR PLIST 

Log message:
remove the port for agrep-2.04.tar.Z, doesn't build with clang, and we
can't redistribute binaries anyway -

PERMIT_PACKAGE_FTP=	may not modify
PERMIT_PACKAGE_CDROM=	no fee

ok landry


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/11 07:56:52

Modified files:
	textproc/tre   : Makefile 
	textproc/tre/pkg: PLIST 

Log message:
textproc/tre no longer needs @conflict agrep. (this has its own version of
the agrep tool).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/11 07:57:34

Modified files:
	textproc/glimpse: Makefile 
	textproc/glimpse/pkg: PLIST 

Log message:
remove @conflict agrep, textproc/glimpse has its own version too.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/11 07:59:27

Modified files:
	sbin/dhclient  : dhclient.c kroute.c privsep.h 

Log message:
Shuffle route/interface changing functions together into kroute.c. Try to
group related functions in kroute.c together and comment them a bit.

No intentional functional change.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/11 08:01:38

Modified files:
	build          : mirrors.dat 

Log message:
Remove the commented-out entry for the fau.de mirror which had RAID problems;
requested by Simon Kuhnle. (Thanks for the many years of mirroring at Erlangen!)


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/11 08:15:09

Modified files:
	graphics/png   : Makefile distinfo 

Log message:
maintenance update to 1.6.29


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/11 08:43:49

Modified files:
	sys/dev/ic     : aac.c adw.c ath.c 
	sys/dev/pci    : azalia.c if_dc_pci.c if_nep.c 
	sys/dev/usb/dwc2: dwc2_hcd.c 
	sys/dev/wscons : wsemul_vt100.c wsevent.c 
	sys/net        : if_pfsync.c if_vxlan.c 
	sys/net80211   : ieee80211_input.c 
	sys/netinet    : ip_carp.c ip_output.c 
	sys/ntfs       : ntfs_subr.c 

Log message:
Partially revert previous mallocarray conversions that contain
constants.

The consensus is that if both operands are constant, we don't need
mallocarray.  Reminded by tedu@

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/11 09:16:14

Modified files:
	sys/arch/arm64/dev: pluart.c 
	sys/arch/armv7/dev: pluart.c 

Log message:
Recognize break conditions and enter ddb if ddb.console is set.

ok visa@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/11 09:36:56

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
add cached packages to the list of cleaned packages when make clean=packages
I agree with rpe@, this was odd.

Also remove an extra / in constructed package names.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/11 09:55:41

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Add SIOCATMARK to allow pledge("inet") programs to call sockatmark(3).
from Matthias Pitzl; OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/11 10:00:53

Modified files:
	infrastructure/man/man1: check-lib-depends.1 

Log message:
explain the -S option and how it's currently used


CVSROOT:	/cvs
Module name:	www
Changes by:	tom@cvs.openbsd.org	2017/04/11 10:01:38

Modified files:
	.              : lyrics.html 

Log message:
"Winter of 95" is for release 6.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/11 10:02:15

Modified files:
	infrastructure/bin: check-lib-depends 

Log message:
forgot synopsis


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/11 10:13:53

Modified files:
	.              : ftp.html httpslist 
	build          : mirrors.dat 
	openbgpd       : ftp.html 
	openntpd       : portable.html 
	openssh        : ftp.html portable.html 

Log message:
https for mirror.meerval.net


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/11 10:31:18

Modified files:
	geo/openbsd-developers: Makefile 
	geo/openbsd-developers/files: OpenBSD 

Log message:
Add myself to geo/openbsd-developers.

ok jca@ landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/11 11:01:11

Modified files:
	share/man/man3 : sysexits.3 

Log message:
shorten introductory sentence and make deprecation clearer;
disgussed with deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/11 12:40:54

Modified files:
	x11/gnome/eog-plugins: Makefile distinfo 
	x11/gnome/eog-plugins/pkg: PLIST 

Log message:
update to eog-plugins-3.16.6


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/11 13:01:24

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/11 13:23:10

Modified files:
	distrib/miniroot: install.sub 

Log message:
Ensure that the version part of $_url_base is correctly removed by
using $VNAME (x.y) instead of $VERSION (xy). This fixes the problem
that the version part ended up in installurl which is wrong anyway
and also confuses pkg_add.

Thanks to florian@ and trondd at kagu-tsuchi dot com for reporting
this.

OK tb@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/11 13:47:00

Modified files:
	faq            : upgrade61.html 

Log message:
mention postgresql major version bump and the possibility of using the
pg_upgrade tool. omission reported by "vortexx" via tj

help & ok sthen


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/11 14:14:16

Modified files:
	faq            : upgrade61.html 

Log message:
mention the installer bug that has the consequence that some users
must remove a trailing /6.1 from the uri in the installurl file.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/11 14:25:55

Modified files:
	audio/mpg123   : Makefile distinfo 
	audio/mpg123/pkg: PLIST 
Added files:
	audio/mpg123/patches: patch-configure 

Log message:
Update to 1.24.0:
* miscellaneous bug fixes
* use plain dlopen() for opening modules instead of libltdl
* the out123 tool now features tone generation
* enable aarch64 optimizations


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/11 14:31:41

Modified files:
	x11/gnustep/pdfkit: Makefile distinfo 
	x11/gnustep/pdfkit/pkg: PLIST 

Log message:
Update to 1.0.1, and remove BROKEN marker again


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/11 14:32:54

Modified files:
	x11/gnustep/gworkspace: Makefile 
	x11/gnustep/gworkspace/pkg: PLIST 

Log message:
readd dependency to pdfkit, and bump revision


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/11 14:34:27

Modified files:
	x11/gnustep/gui: Makefile distinfo 
	x11/gnustep/gui/pkg: PLIST 

Log message:
Update to 0.25.1, minor shlib bump due to addition of class


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/11 14:35:15

Modified files:
	x11/gnustep/back: Makefile distinfo 

Log message:
minor update to 0.25.1 following the gui update


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/04/11 14:40:33

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
- Mention LIBCXX, prompted by espie@.

- Make it clear that CLANG_ARCHS, GCC3_ARCHS, GCC4_ARCHS refer to the base compiler.
Change "Clang 3.9.1" to just "Clang".


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/04/11 14:40:43

Modified files:
	share/man/man5 : bsd.port.arch.mk.5 

Log message:
- Mention LIBCXX, prompted by espie@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/11 15:02:09

Modified files:
	mail/dovecot   : Makefile distinfo 
	mail/dovecot/pkg: PLIST-server 
Removed files:
	mail/dovecot/patches: patch-src_lib-dcrypt_dcrypt-openssl_c 
	                      patch-src_plugins_trash_trash-plugin_c 

Log message:
update to Dovecot 2.2.29, from Brad.

* passdb/userdb dict: Don't double-expand %variables in keys. If dict
was used as the authentication passdb, using specially crafted
%variables in the username could be used to cause DoS (CVE-2017-2669)


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/11 18:07:19

Modified files:
	.              : index.html 
	faq            : faq4.html 

Log message:
switch "getting openbsd" link to the faq section describing the different
types of install images. adjust wording on said page to accomodate this.

ok deraadt


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/11 19:21:02

Modified files:
	faq            : faq4.html 

Log message:
avoid linking to the bsd.rd section three times in the same section.  make
one 'file sets' in 'downloading openbsd' a link to the file sets section

idea/input tj


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/04/11 20:03:18

Modified files:
	www/ruby-unicorn: Makefile distinfo 

Log message:
Update to unicorn 5.3.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/11 20:21:58

Modified files:
	textproc/ripgrep: Makefile distinfo 

Log message:
Update to ripgrep-0.5.1

From the usual suspect (semarie)


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/11 23:46:59

Modified files:
	sys/arch/i386/i386: vmm.c 

Log message:
Correct a format string

Problem noted by Michael W. Bombardieri (mb(at)ii.net)
ok mlarkin@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/12 01:57:06

Modified files:
	gnu/usr.bin/clang/include/clang/intrin: Makefile 

Log message:
Invoke install -d for each directory in the /usr/lib/clang hierarchy
as they aren't in mtree.  Problem with wrong ownership and permission
of directories reported by sthen@.

ok deraadt@ sthen@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/12 02:02:10

Modified files:
	gnu/usr.bin/clang/include/clang/intrin: Makefile 

Log message:
explicitly set the ownership on installed include files as well


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 02:07:22

Modified files:
	devel/dtc      : Makefile distinfo 
	devel/dtc/patches: patch-Makefile patch-tests_Makefile_tests 
	devel/dtc/pkg  : PLIST 

Log message:
Update to dtc-1.4.4.

from Brad
OK uaa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 02:20:18

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.39.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 02:20:33

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.76.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 02:29:29

Modified files:
	graphics/shotwell: Makefile distinfo 

Log message:
Update to shotwell-0.26.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 02:47:12

Modified files:
	x11/gnome/user-docs: Makefile distinfo 
	x11/gnome/user-docs/pkg: PLIST 

Log message:
Update to gnome-user-docs-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 03:27:31

Modified files:
	x11/gnome/tracker: Makefile 
Added files:
	x11/gnome/tracker/patches: 
	                           patch-src_tracker-needle_tracker-tags-view_vala 
	                           patch-src_tracker-preferences_tracker-preferences_vala 

Log message:
Allow building with older and newer vala (from upstream).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 03:50:01

Modified files:
	security/heimdal: Makefile distinfo 
	security/heimdal/patches: patch-tools_krb5-config_in 
Removed files:
	security/heimdal/patches: patch-lib_krb5_send_to_kdc_c 

Log message:
Update to heimdal-7.2.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/12 04:52:09

Modified files:
	textproc/vislcg3: Makefile 

Log message:
Convert vislcg3's BROKEN to ONLY_FOR_ARCHS=${CLANG_ARCHS}, the problem we see
with icu4c won't affect things on arches with native clang.

Can't build on aarch64 yet (needs boost which fails).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 04:58:36

Modified files:
	net/bro        : Makefile 
	net/bro/pkg    : PLIST 

Log message:
Conflict with archivers/brotli.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/12 05:11:52

Modified files:
	archivers/unzip: Makefile 
Added files:
	archivers/unzip/patches: patch-ttyio_c 

Log message:
Do not perform tty operations on non-tty file descriptors.  Otherwise
pledge("tty") may abort unzip </dev/null.
discussed with deraadt@ semarie@; OK tb@ sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/12 05:55:41

Modified files:
	regress/sys/kern/pledge/sockopt: Makefile 

Log message:
Add comment how the test works.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/12 05:59:25

Modified files:
	telephony/astmanproxy/patches: patch-Makefile 

Log message:
remove -I- (deprecated in gcc, not available in clang). change preceding -I to -iquote.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/12 06:22:25

Modified files:
	sbin/dhclient  : kroute.c 

Log message:
Shuffle another function.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/12 06:48:20

Modified files:
	net/glib2-networking: Makefile 

Log message:
use LIBCXX


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/12 07:14:08

Modified files:
	regress/sys/kern/pledge: Makefile 
Removed files:
	regress/sys/kern/pledge/sigkill: Makefile sigkill.c sigkill.out 

Log message:
The pledge sigkill test is an outdated copy of sigabrt.  Remove the
former and activate the latter.
OK semarie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/12 07:58:02

Modified files:
	devel/afl      : Makefile distinfo 

Log message:
update to afl 2.41b


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/12 08:08:15

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
RTM_PROTO3 messages should not trigger a resolv.conf check.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/12 08:46:31

Modified files:
	regress/sys/kern/mount: Makefile 

Log message:
Add comment what the test does.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/12 08:49:05

Modified files:
	usr.bin/script : script.c 

Log message:
bluhm discovered "script < /dev/null" attempts tty operations in violation
of pledge.  We can wrap isatty() around those codepaths.
ok bluhm beck


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/12 08:53:27

Modified files:
	usr.bin/lex    : parse.y 

Log message:
isblank() is ANSI C since C99, no need to provide a replacement.
OK deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/12 09:23:04

Modified files:
	.              : ftp.html httpslist 
	build          : mirrors.dat 
	openbgpd       : ftp.html 
	openntpd       : portable.html 
	openssh        : ftp.html portable.html 

Log message:
https for ftp2.eu.openbsd.org


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/12 09:23:08

Modified files:
	sbin/fsck_ffs  : pass1.c 

Log message:
Prevent inosused from wrapping when soft updates is enabled while
scanning the used inode map.  The code as written assumes inosused
is signed but this is no longer the case.  OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/12 09:59:08

Modified files:
	mail/mutt      : Makefile 

Log message:
enable compressed folders (now that it's in the main mutt release and not
done as a third-party patch). requested by isdtor at gmail/com


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/12 10:06:12

Modified files:
	lib/libc/string: strstr.c 

Log message:
New strstr() implementation from musl libc by Rich Felker.  This
version uses the two-way string matching algorithm and is faster
than the old implementation.  With this change, ports that check
for strstr having linear complexity time strstr will no longer
replace the libc strstr with a private version.
OK deraadt@ espie@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/12 11:34:46

Modified files:
	faq            : faq5.html 

Log message:
recommend that users interested in development add their users to the wobj
group plus some minor tweaks in the noperm release section.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/12 11:41:49

Modified files:
	lib/libc/hash  : siphash.c 

Log message:
SipHash_Final() was assuming the digest was 64-bit aligned, resulting in
misaligned memory accesses with armv7 ramdisk -Os bsd.rd ping
ok florian millert


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 11:59:32

Modified files:
	x11/kde4/libs/patches: patch-kdecore_io_kdirwatch_cpp 
	                       patch-kdecore_util_kshareddatacache_p_h 

Log message:
Regen patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 12:01:08

Modified files:
	x11/kde4/libs  : Makefile 
Added files:
	x11/kde4/libs/patches: patch-cmake_modules_FindHUNSPELL_cmake 

Log message:
Detect hunspell 1.6 presence, fixes x11/kde4/lokalize with upcoming
hunspell update.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 12:09:01

Modified files:
	textproc/hunspell: Makefile distinfo 
	textproc/hunspell/patches: patch-man_hu_hunspell_1 
	                           patch-man_hunspell_1 
	                           patch-src_tools_hunspell_cxx 
	                           patch-tests_test_sh 
	textproc/hunspell/pkg: PLIST 

Log message:
Update to hunspell 1.6.1, went into a full bulk build without issues

- requirement for upcoming firefox 53
- switch to github as upstream
- SHARED_LIBS renamed from hunspell-1.3 to hunspell-1.6, depending ports
will be fixed shortly
- disable nls/gettext, it doesnt build (and is also disabled in freebsd)
- reset MAINTAINERship to ports@ (discussed with edd@)
- fix test.sh shebang patch so that all tests runs fine
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 12:12:33

Modified files:
	www/mozilla    : mozilla.port.mk 
	devel/codeblocks: Makefile 
	devel/kf5/sonnet: Makefile 
	devel/xulrunner/24: Makefile 
	editors/focuswriter: Makefile 
	editors/ghostwriter: Makefile 
	editors/libreoffice: Makefile 
	editors/texmaker: Makefile 
	editors/texworks: Makefile 
	mail/mozilla-thunderbird: Makefile 
	textproc/link-grammar: Makefile 
	www/firefox-esr: Makefile 
	www/mozilla-firefox: Makefile 
	www/otter-browser: Makefile 
	www/seamonkey  : Makefile 
	www/tor-browser/browser: Makefile 
	x11/kde4/lokalize: Makefile 

Log message:
Fix WANTLIB and bump REVISION for all ports depending on hunspell.

While here enforce dependency on hunspell 1.6 in mozilla.port.mk, as
it's a requirement for 53.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 12:13:33

Modified files:
	www/mozilla    : mozilla.port.mk 

Log message:
Ride the previous REVISION bump and enforce dependency on nss 3.29.5,
hard requirement for firefox 53.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/04/12 12:24:37

Modified files:
	lib/libedit    : chared.c el.c hist.c terminal.c 

Log message:
Use calloc(3) and recallocarray(3) instead of *alloc* + memset(0).

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/12 12:35:50

Modified files:
	sys/crypto     : siphash.c 

Log message:
The kernel has to slightly different version of SipHash_Final but with
the same bug as just fixed in userland:

----------
SipHash_Final() was assuming the digest was 64-bit aligned, resulting in
misaligned memory accesses with armv7 ramdisk -Os bsd.rd ping
ok florian millert
----------

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 12:42:34

Modified files:
	textproc/multimarkdown: Makefile distinfo 
Added files:
	textproc/multimarkdown/patches: patch-CMakeLists_txt 
	                                patch-src_html_c 
	                                patch-src_latex_c 
	                                patch-src_multimarkdown_c 
	                                patch-src_parse_utilities_c 
	                                patch-src_parser_leg 
	                                patch-src_writer_c 
Removed files:
	textproc/multimarkdown/patches: patch-Makefile patch-html_c 
	                                patch-latex_c 
	                                patch-parse_utilities_c 
	                                patch-parser_leg patch-writer_c 

Log message:
Update to multimarkdown 5.4.0, from Sean Levy, who's been pinging about
this patch for more than a year (!)

- uses pledge()
- switch to cmake
- enabel tests

Various versions of this patch tested by Micah Muer and Michael McConville


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/12 12:46:52

Modified files:
	meta/tor-browser: Makefile 
	www/tor-browser: Makefile.inc 
	www/tor-browser/browser: Makefile distinfo 
	www/tor-browser/browser/files: extension-overrides.js 
	www/tor-browser/browser/pkg: PLIST 
	www/tor-browser/https-everywhere: Makefile distinfo 
	www/tor-browser/torbutton: Makefile distinfo 

Log message:
Update to tor-browser 6.5.1, from MAINTAINER Sean Levy

- update tor-browser to 6.5.1, based off firefox esr45.8.0
- update https-everywhere to 5.2.11
- update torbutton to 1.9.6.14


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/12 13:12:01

Modified files:
	usr.sbin/dhcpd : conflex.c confpars.c 

Log message:
Add missing function prototypes. Mark kw_cmp() as static like all
its friends.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/12 13:17:30

Modified files:
	usr.sbin/dhcpd : dispatch.c 

Log message:
One 'foo' per function is enough. Rename one to eliminate shadowing.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/12 13:19:11

Modified files:
	usr.sbin/dhcpd : Makefile 

Log message:
Inspired by recent dhcrelay changes, bring in stricter CFLAGS!


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/12 13:29:48

Modified files:
	devel/netbeans : Makefile distinfo 
	devel/netbeans/patches: patch-etc_netbeans_conf 
	devel/netbeans/pkg: PLIST README 
Added files:
	devel/netbeans/patches: patch-bin_netbeans 
Removed files:
	devel/netbeans/patches: patch-platform_lib_nbexec 

Log message:
Update netbeans from 6.9.1 to 8.2

Most work from daniel@ and me with many tweaks from daniel@.

Notable changes:
- Switch to jdk-1.8+
- Remove hidden bash dependency
- Add OpenBSD mem size calculation
- Add giovanni@ and me as MAINTAINER
- README tweaks

ok daniel@ giovanni@


CVSROOT:	/cvs
Module name:	www
Changes by:	fcambus@cvs.openbsd.org	2017/04/12 13:51:45

Modified files:
	build          : groups.dat 

Log message:
Update SBUG URL (http => https).


CVSROOT:	/cvs
Module name:	www
Changes by:	fcambus@cvs.openbsd.org	2017/04/12 13:53:29

Modified files:
	.              : groups.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/12 14:00:30

Log message:
    Import universal-ctags
    
    universal-ctags provides a maintained and actively developed alternative
    to traditional ctags(1) and Exuberant Ctags.  It comes with additional
    options and programming language support.
    
    With many port improvements and tweaks from jca@
    
    ok sthen@ jca@
    
    Status:
    
    Vendor Tag:	rsadowski
    Release Tags:	rsadowski_20170412
    
    N ports/devel/universal-ctags/Makefile
    N ports/devel/universal-ctags/distinfo
    N ports/devel/universal-ctags/pkg/DESCR
    N ports/devel/universal-ctags/pkg/PLIST
    N ports/devel/universal-ctags/patches/patch-makefiles_testing_mak
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/12 14:03:29

Modified files:
	devel          : Makefile 

Log message:
hook up universal-ctags


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/04/12 14:18:24

Modified files:
	faq/ports      : specialtopics.html 

Log message:
Revert previous to rev. 1.57.
I have no idea what happened here and am quite sorry for the disruption.
Havoc reported by Anton dot Lindqvist at gmail dot com, thanks.


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/04/12 14:24:17

Modified files:
	faq/ports      : specialtopics.html 

Log message:
Try again what i intended to do in rev. 1.58:
Jan Stary noticed that calling mandoc "quite stable by now" might
cause fear, uncertainty, and doubt, so delete the useless sentence.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/12 15:49:33

Modified files:
	infrastructure/db: user.list 
	net/ftpsesame  : Makefile 
	net/ftpsesame/patches: patch-ftpsesame_c 
	net/ftpsesame/pkg: PLIST 

Log message:
Give ftpsesame its own uid; it was sharing "proxy" (removed from base).
Reported by Olivier Regnier.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/12 15:50:30

Modified files:
	net/ftpsesame  : Tag: OPENBSD_6_1 Makefile 
	net/ftpsesame/patches: Tag: OPENBSD_6_1 patch-ftpsesame_c 
	net/ftpsesame/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
MFC: Give ftpsesame its own uid; it was sharing "proxy" (removed from base).
Reported by Olivier Regnier.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/12 16:33:15

Modified files:
	www/webkitgtk4 : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC: maintenance update to WebKitGTK 2.16.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/12 17:09:08

Modified files:
	archivers/zoo  : Makefile 
	archivers/zoo/patches: patch-ar_h patch-misc_c patch-zoopack_c 

Log message:
Regen patches and move REVISION where it belongs


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/12 17:17:57

Modified files:
	archivers/zoo/patches: patch-bsd_c 

Log message:
Fix broken patch that prevents clang builds.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/12 18:40:06

Modified files:
	devel/liburcu  : Makefile 

Log message:
New HOMEPAGE


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/12 21:52:25

Modified files:
	sys/arch/alpha/include: proc.h 
	sys/arch/amd64/include: proc.h 
	sys/arch/arm/include: proc.h 
	sys/arch/arm64/include: proc.h 
	sys/arch/hppa/include: proc.h 
	sys/arch/i386/include: proc.h 
	sys/arch/m88k/include: proc.h 
	sys/arch/mips64/include: proc.h tcb.h 
	sys/arch/mips64/mips64: vm_machdep.c 
	sys/arch/powerpc/include: proc.h 
	sys/arch/sh/include: proc.h 
	sys/arch/sparc64/include: proc.h 
	sys/kern       : kern_exec.c kern_fork.c kern_prot.c kern_sig.c 
	sys/sys        : proc.h 

Log message:
Provide mips64 with kernel-facing TCB_{GET,SET} macros that store it
in struct mdproc.  With that, all archs have those and the __HAVE_MD_TCB
macro can be unifdef'ed as always defined.

ok kettenis@ visa@ jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/12 22:06:46

Modified files:
	sys/kern       : kern_prot.c kern_pledge.c syscalls.master 

Log message:
Delete the getlogin59 syscall, which was last used one year, two releases,
and four libc major versions ago

ok sthen@ jsing@ deraadt@ jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/12 22:09:46

Modified files:
	sys/sys        : syscall.h syscallargs.h 
	sys/kern       : init_sysent.c syscalls.c 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/04/13 01:04:09

Modified files:
	sbin/iked      : config.c iked.h ikev2.c ikev2_pld.c 

Log message:
Add a NAT-T keepalive timer in case we are behind a NAT gateway.

See RFC 5996, section 2.23, NAT Traversal:
In the case of a mismatching NAT_DETECTION_DESTINATION_IP hash, it
means that the system receiving the NAT_DETECTION_DESTINATION_IP
payload is behind a NAT and that system SHOULD start sending
keepalive packets as defined in [UDPENCAPS].

With markus@, ok reyk@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:05:37

Modified files:
	devel/gobject-introspection: Makefile distinfo 

Log message:
update to gobject-introspection-1.52.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:06:13

Modified files:
	lang/vala      : Makefile distinfo 
	lang/vala/pkg  : PLIST 

Log message:
update to vala-0.36.1

tested in a bulk by aja@, fallout will be dealt with shortly


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:06:47

Modified files:
	x11/gnome/anjuta: Makefile 
	x11/gnome/anjuta/patches: patch-configure 
	x11/gnome/anjuta/pkg: PLIST 

Log message:
disable vala support for now, it requires more love than what upstream gives it


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:07:16

Modified files:
	x11/gnome/code-assistance: Makefile 
Added files:
	x11/gnome/code-assistance/patches: 
	                                   patch-backends_vala_valaoptionparser_vala 
	                                   patch-configure 

Log message:
Fix for vala 0.36


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:07:44

Modified files:
	x11/gnome/builder: Makefile 

Log message:
mark this BROKEN, too many fixes required for vala 0.36. It will be updated
next week anyway.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:08:14

Modified files:
	x11/gnome/libgda: Makefile 

Log message:
sync for VALA_API_VERSION


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:08:40

Modified files:
	www/midori     : Makefile 
Added files:
	www/midori/patches: patch-extensions_adblock_widgets_vala 
	                    patch-extensions_apps_vala 
	                    patch-extensions_history-list_vala 
	                    patch-extensions_notes_vala 
	                    patch-extensions_transfers_vala 
	                    patch-midori_midori-notebook_vala 

Log message:
Fixes for vala 0.36, partly from upstream


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:10:01

Modified files:
	sysutils/deja-dup: Makefile 
Added files:
	sysutils/deja-dup/patches: 
	                           patch-deja-dup_widgets_ConfigList_vala 
	                           patch-deja-dup_widgets_ConfigLocation_vala 

Log message:
Fixes for vala 0.36


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:10:21

Modified files:
	mail/geary     : Makefile 
Added files:
	mail/geary/patches: 
	                    patch-src_client_accounts_account-dialog-account-list-pane_vala 
	                    patch-src_client_components_conversation-find-bar_vala 
	                    patch-src_client_conversation-list_conversation-list-store_vala 
	                    patch-src_client_util_util-date_vala 
	                    patch-src_engine_imap-db_imap-db-folder_vala 
	                    patch-src_engine_imap-engine_imap-engine-generic-account_vala 
	                    patch-src_engine_imap-engine_imap-engine-minimal-folder_vala 
	                    patch-src_engine_imap-engine_replay-ops_imap-engine-mark-email_vala 
	                    patch-src_engine_imap_response_imap-fetch-data-decoder_vala 

Log message:
Fixes for vala 0.36


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/13 01:10:45

Modified files:
	textproc/pdfpc : Makefile distinfo 
	textproc/pdfpc/pkg: PLIST 
Added files:
	textproc/pdfpc/patches: patch-src_classes_window_overview_vala 
Removed files:
	textproc/pdfpc/patches: patch-src_classes_action_movie_vala 

Log message:
- update to pdfpc-4.0.6
- fixes for vala 0.36


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/13 01:30:15

Log message:
    Split openttd's data files into independently versioned packages.
    
    ok sthen@ + tweak from kirby@
    
    Status:
    
    Vendor Tag:	bentley
    Release Tags:	bentley_20170413
    
    N ports/games/openttd-data/Makefile.inc
    N ports/games/openttd-data/Makefile
    N ports/games/openttd-data/opengfx/Makefile
    N ports/games/openttd-data/opengfx/distinfo
    N ports/games/openttd-data/opengfx/pkg/PLIST
    N ports/games/openttd-data/opengfx/pkg/DESCR
    N ports/games/openttd-data/opensfx/Makefile
    N ports/games/openttd-data/opensfx/distinfo
    N ports/games/openttd-data/opensfx/pkg/PLIST
    N ports/games/openttd-data/opensfx/pkg/DESCR
    N ports/games/openttd-data/openmsx/Makefile
    N ports/games/openttd-data/openmsx/distinfo
    N ports/games/openttd-data/openmsx/pkg/PLIST
    N ports/games/openttd-data/openmsx/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/13 01:30:21

Modified files:
	sbin/pfctl     : pfctl_table.c 
	sbin/fsck_ffs  : pass4.c 

Log message:
fix wrongly indented lines


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 01:31:18

Modified files:
	graphics/simple-scan: Makefile distinfo 
	graphics/simple-scan/patches: patch-configure_ac 
	                              patch-src_Makefile_in 
	                              patch-src_simple-scan_vala 
	                              patch-src_ui_vala 
	graphics/simple-scan/pkg: PLIST 

Log message:
Update to simple-scan-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/13 01:37:08

Modified files:
	games/openttd  : Makefile distinfo 
	games/openttd/pkg: PLIST 

Log message:
Update to openttd-1.7.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/13 01:37:39

Modified files:
	games          : Makefile 

Log message:
+openttd-data


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 01:38:46

Modified files:
	x11/gnome      : Makefile.inc 
	x11/gnome/adwaita-icon-theme: Makefile 
	x11/gnome/aisleriot: Makefile 
	x11/gnome/anjuta: Makefile 
	x11/gnome/at-spi2-atk: Makefile 
	x11/gnome/at-spi2-core: Makefile 
	x11/gnome/autoar: Makefile 
	x11/gnome/backgrounds: Makefile 
	x11/gnome/banshee: Makefile 
	x11/gnome/baobab: Makefile 
	x11/gnome/bijiben: Makefile 
	x11/gnome/builder: Makefile 
	x11/gnome/calculator: Makefile 
	x11/gnome/calendar: Makefile 
	x11/gnome/caribou: Makefile 
	x11/gnome/characters: Makefile 
	x11/gnome/clocks: Makefile 
	x11/gnome/code-assistance: Makefile 
	x11/gnome/color-manager: Makefile 
	x11/gnome/contacts: Makefile 
	x11/gnome/control-center: Makefile 
	x11/gnome/dconf-editor: Makefile 
	x11/gnome/desktop: Makefile 
	x11/gnome/devel-docs: Makefile 
	x11/gnome/devhelp: Makefile 
	x11/gnome/dictionary: Makefile 
	x11/gnome/documents: Makefile 
	x11/gnome/empathy: Makefile 
	x11/gnome/eog  : Makefile 
	x11/gnome/eog-plugins: Makefile 
	x11/gnome/epub-thumbnailer: Makefile 
	x11/gnome/file-roller: Makefile 
	x11/gnome/font-viewer: Makefile 
	x11/gnome/gcr  : Makefile 
	x11/gnome/gdl  : Makefile 
	x11/gnome/gdm  : Makefile 
	x11/gnome/gedit: Makefile 
	x11/gnome/gedit-code-assistance: Makefile 
	x11/gnome/gedit-plugins: Makefile 
	x11/gnome/getting-started-docs: Makefile 
	x11/gnome/gfbgraph: Makefile 
	x11/gnome/ghex : Makefile 
	x11/gnome/gjs  : Makefile 
	x11/gnome/grilo: Makefile 
	x11/gnome/grilo-plugins: Makefile 
	x11/gnome/gucharmap: Makefile 
	x11/gnome/gvfs : Makefile 
	x11/gnome/icon-theme: Makefile 
	x11/gnome/icon-theme-symbolic: Makefile 
	x11/gnome/keyring: Makefile 
	x11/gnome/latexila: Makefile 
	x11/gnome/libbonobo: Makefile 
	x11/gnome/libbonoboui: Makefile 
	x11/gnome/libcryptui: Makefile 
	x11/gnome/libgepub: Makefile 
	x11/gnome/libgnome: Makefile 
	x11/gnome/libgnome-keyring: Makefile 
	x11/gnome/libgnomecanvas: Makefile 
	x11/gnome/libgnomecanvasmm: Makefile 
	x11/gnome/libgnomekbd: Makefile 
	x11/gnome/libgnomeui: Makefile 
	x11/gnome/libgweather: Makefile 
	x11/gnome/libmediaart: Makefile 
	x11/gnome/librsvg: Makefile 
	x11/gnome/libsecret: Makefile 
	x11/gnome/libxklavier: Makefile 
	x11/gnome/libzapojit: Makefile 
	x11/gnome/maps : Makefile 
	x11/gnome/menus: Makefile 
	x11/gnome/mime-data: Makefile 
	x11/gnome/mono-gnome: Makefile 
	x11/gnome/mousetweaks: Makefile 
	x11/gnome/music: Makefile 
	x11/gnome/mutter: Makefile 
	x11/gnome/nautilus: Makefile 
	x11/gnome/nautilus-sendto: Makefile 
	x11/gnome/ocrfeeder: Makefile 
	x11/gnome/online-accounts: Makefile 
	x11/gnome/online-miners: Makefile 
	x11/gnome/orca : Makefile 
	x11/gnome/photos: Makefile 
	x11/gnome/pinpoint: Makefile 
	x11/gnome/planner: Makefile 
	x11/gnome/power-manager: Makefile 
	x11/gnome/py-atspi: Makefile 
	x11/gnome/quadrapassel: Makefile 
	x11/gnome/recipes: Makefile 
	x11/gnome/screenshot: Makefile 
	x11/gnome/seahorse: Makefile 
	x11/gnome/seahorse-nautilus: Makefile 
	x11/gnome/seahorse-sharing: Makefile 
	x11/gnome/session: Makefile 
	x11/gnome/settings-daemon: Makefile 
	x11/gnome/shell: Makefile 
	x11/gnome/shell-extensions: Makefile 
	x11/gnome/sushi: Makefile 
	x11/gnome/system-monitor: Makefile 
	x11/gnome/terminal: Makefile 
	x11/gnome/themes-standard: Makefile 
	x11/gnome/todo : Makefile 
	x11/gnome/totem: Makefile 
	x11/gnome/totem-pl-parser: Makefile 
	x11/gnome/tweak-tool: Makefile 
	x11/gnome/vfs2 : Makefile 
	x11/gnome/vinagre: Makefile 
	x11/gnome/weather: Makefile 
	x11/gnome/yelp : Makefile 
	x11/gnome/yelp-tools: Makefile 
	x11/gnome/yelp-xsl: Makefile 
	x11/gnome/zenity: Makefile 

Log message:
Stop setting CONFIGURE_STYLE in Makefile.inc but explicitely add it to ports
that need it; in the future more and more ports will move to meson build anyway.
I first though I'd set CONFIGURE_STYLE in gnome.port.mk but it's too fragile
(MODULES list must be sorted very carefully).
Less magic is good.

discussed with jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/13 02:04:41

Modified files:
	www/midori     : Makefile 

Log message:
Fix previous: rm extensions/*.orig files after patching, otherwise cmake
trips on it and configure fails:
CMake Error: CMake can not determine linker language for target: history-list.orig
CMake Error: CMake can not determine linker language for target: transfers.orig
CMake Error: CMake can not determine linker language for target: apps.orig
CMake Error: CMake can not determine linker language for target: notes.orig


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 02:42:31

Modified files:
	graphics/gegl03: Makefile 

Log message:
Temporarily mark BROKEN.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 02:43:22

Modified files:
	devel/appstream-glib: Makefile distinfo 

Log message:
Update to appstream-glib-0.6.12.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/13 03:00:18

Added files:
	news/multimail/patches: patch-Makefile 

Log message:
Remove hardcoded optimization (-O2) flag.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/13 03:02:41

Modified files:
	benchmarks/speedtest-cli: Makefile distinfo 

Log message:
Update speedtest-cli to 1.0.4.

OK benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/13 03:05:52

Modified files:
	www/midori     : Makefile 
Added files:
	www/midori/patches: patch-midori_midori-browser_c 
	                    patch-midori_midori-view_c 
	                    patch-midori_midori-window_vala 

Log message:
Backport r7039.

Remove the code hiding the titlebar when the window is maximized, has
always confused me. Cf
http://bazaar.launchpad.net/~midori/midori/trunk/revision/7039


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 03:06:38

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-151.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 03:35:56

Modified files:
	mail/dovecot-pigeonhole: Makefile distinfo 

Log message:
update to dovecot-pigeonhole 0.4.18, from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 03:36:36

Modified files:
	mail/rspamd    : Makefile distinfo 
	mail/rspamd/patches: patch-CMakeLists_txt 
	                     patch-src_client_CMakeLists_txt 

Log message:
update to rspamd-1.5.5, from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/13 03:41:15

Modified files:
	archivers/zstd : Makefile distinfo 
	archivers/zstd/patches: patch-tests_playTests_sh 

Log message:
Update to zstd 1.1.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 03:54:38

Modified files:
	editors/abiword: Makefile distinfo 
	editors/abiword/pkg: PLIST 
Added files:
	editors/abiword/patches: 
	                         patch-src_af_xap_gtk_xap_UnixFrameImpl_cpp 
	                         patch-src_af_xap_gtk_xap_UnixFrameImpl_h 
Removed files:
	editors/abiword/patches: patch-src_Makefile_in 

Log message:
Update to abiword-3.0.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 04:35:33

Modified files:
	net/isc-bind   : Makefile distinfo 

Log message:
update to BIND 9.10.4-P8 (-P7 was withdrawn)

CVE-2017-3136: An error handling synthesized records could cause an
assertion failure when using DNS64 with "break-dnssec yes;"

CVE-2017-3137: A response packet can cause a resolver to terminate when
processing an answer containing a CNAME or DNAME

CVE-2017-3138: named exits with a REQUIRE assertion failure if it receives
a null command string on its control channel


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 04:36:11

Modified files:
	net/isc-bind   : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC update to BIND 9.10.4-P8 (-P7 was withdrawn)

CVE-2017-3136: An error handling synthesized records could cause an
assertion failure when using DNS64 with "break-dnssec yes;"

CVE-2017-3137: A response packet can cause a resolver to terminate when
processing an answer containing a CNAME or DNAME

CVE-2017-3138: named exits with a REQUIRE assertion failure if it receives
a null command string on its control channel


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/13 05:15:15

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
Remove aviion from architecture constants, the OpenBSD/aviion port has
been discontinued after the 5.7 release.

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 06:05:43

Modified files:
	net/wireshark  : Makefile distinfo 

Log message:
update to wireshark-2.2.6, updated protocol support and the usual round of
dissector infinite loops and crashes


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 06:06:21

Modified files:
	net/wireshark  : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC update to wireshark-2.2.6, updated protocol support and the usual round of
dissector infinite loops and crashes


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/13 07:01:20

Modified files:
	graphics/gegl03: Makefile 
Added files:
	graphics/gegl03/patches: patch-configure patch-gegl_Makefile_in 

Log message:
Unbreak build with new gobject-introspection (from upstream).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 07:40:21

Modified files:
	www/tor-browser/noscript: Makefile 

Log message:
missed bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 07:41:29

Modified files:
	www/tor-browser/tor-launcher: Makefile 

Log message:
missed bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/13 07:43:29

Modified files:
	www/tor-browser: Makefile.inc 

Log message:
add a reminder to bump REVISION for extensions


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/13 08:48:31

Modified files:
	usr.sbin/ldapd : syntax.c 

Log message:
multi-statement CHECK_RANGE() macro isn't safe for all placements, and
needs to use "do {} while 0" idiom; all callers need repair also.
Discovered by jsg


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/13 08:59:40

Modified files:
	usr.sbin/dhcpd : dhcpd.h 

Log message:
Remove a bunch of obsolete, unused and irrelevant DHCP client types, fields,
and enums.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/13 09:32:15

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
moving some code into a switch meant that break no longer stopped the loop.
try harder with a goto. diagnosis and original fix by tb.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/13 12:29:43

Modified files:
	faq/ports      : specialtopics.html 

Log message:
add some man-links and do some minimal cleanup.

initial diff by anton lindqvist plus some tweaks by me


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/13 12:32:55

Modified files:
	lib/libc/stdlib: malloc.3 malloc.c 

Log message:
allow clearing less than allocated and document freezero(3) better


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/04/13 12:36:51

Modified files:
	lib/libc/stdio : getdelim.c 

Log message:
Use recallocarray in getdelim/getline to clear memory on buffer resizes,
inspired by a similar change to fgetln.

ok deraadt millert


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/13 12:41:53

Modified files:
	faq            : faq14.html 

Log message:
more man links


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/13 13:56:26

Modified files:
	mail/p5-Email-MIME: Makefile distinfo 

Log message:
bugfix update to 1.940


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/13 14:48:29

Modified files:
	sys/arch/arm64/arm64: pmap.c 

Log message:
Use the non-interrupt-safe pool allocator for the vp pool to avoid runninng
out of kva in the kmem_map.  Avoids a hang when spawning a lot of processes.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/13 14:57:32

Modified files:
	faq            : faq1.html faq14.html faq6.html faq7.html 
	                 index.html 

Log message:
more consistency in the section titles.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/13 15:21:44

Modified files:
	misc/buffer    : Makefile 
	misc/buffer/patches: patch-buffer_c 
Added files:
	misc/buffer/patches: patch-sem_c 

Log message:
fix build with clang; drop maintainer


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/13 15:49:11

Modified files:
	lib/libc/sys   : execve.2 

Log message:
Xr sigprocmask(2) not the obsolete sigsetmask(3)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/04/13 16:25:24

Modified files:
	devel/fossil   : Makefile distinfo 

Log message:
Update fossil to 2.2


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/13 17:29:02

Modified files:
	sys/arch/arm64/include: pte.h 

Log message:
A little bit more trivial cleanup.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/13 18:38:30

Modified files:
	.              : index.html 
Removed files:
	.              : older.html 

Log message:
split "songs & artwork" link into two separate pages, one for each.
remove older.html as its contents were moved to orders.html a while back.

ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	ian@cvs.openbsd.org	2017/04/13 18:44:21

Modified files:
	java/jlint/patches: patch-jlint_cc 
Added files:
	java/jlint/patches: patch-method_desc_cc patch-method_desc_hh 

Log message:
Unbreak on clang. ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/13 18:53:28

Modified files:
	usr.sbin/vmctl : vmctl.8 

Log message:
Update a man page example to reflect recent changes.

Spotted by Ilya Kaliman, thanks.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/13 19:02:28

Modified files:
	sys/arch/amd64/amd64: identcpu.c 
	sys/arch/amd64/include: cpu.h 

Log message:
SVM: calculate max ASID value and save for later use. This will be used in
an upcoming diff to handle ASID/VPID reuse/rollover.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/13 19:23:02

Modified files:
	lib/libc/gen   : sysctl.3 

Log message:
correct path; from Klemens Nanni


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/13 23:41:53

Modified files:
	emulators/mupen64plus/video-glide64: Makefile 

Log message:
Disable ASM, fixing the build with clang.

This same code is already disabled in the glide64mk2 port, as it is
marked as SSE (which is disabled) there.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/14 01:05:00

Modified files:
	www/tor-browser/browser/pkg: PLIST 

Log message:
I don't see how this ever packaged; there's no README.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/14 01:22:02

Modified files:
	sys/sys        : cdefs.h 

Log message:
Define __dead and __pure even if __STRICT_ANSI__ for compilers that
support GCC's __attribute__ syntax.  Fixes several warnings when compiling
code with clang with -std=c++11 or some other strict ISO standard.

ok millert@, guenther@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	jsg@cvs.openbsd.org	2017/04/14 01:46:12

Log message:
    Import libdrm 2.4.79
    
    Status:
    
    Vendor Tag:	libdrm
    Release Tags:	libdrm_2_4_79
    
    U xenocara/lib/libdrm/libsync.h
    U xenocara/lib/libdrm/xf86drmHash.h
    U xenocara/lib/libdrm/libdrm.pc.in
    C xenocara/lib/libdrm/configure
    C xenocara/lib/libdrm/xf86drmMode.c
    U xenocara/lib/libdrm/xf86drmRandom.h
    U xenocara/lib/libdrm/util_double_list.h
    U xenocara/lib/libdrm/xf86drmMode.h
    U xenocara/lib/libdrm/xf86drmSL.c
    U xenocara/lib/libdrm/libdrm_lists.h
    C xenocara/lib/libdrm/Makefile.in
    C xenocara/lib/libdrm/aclocal.m4
    C xenocara/lib/libdrm/xf86drm.c
    U xenocara/lib/libdrm/README
    U xenocara/lib/libdrm/config.h.in
    U xenocara/lib/libdrm/libdrm_macros.h
    U xenocara/lib/libdrm/xf86drmRandom.c
    U xenocara/lib/libdrm/xf86atomic.h
    U xenocara/lib/libdrm/util_math.h
    U xenocara/lib/libdrm/Makefile.sources
    U xenocara/lib/libdrm/xf86drmHash.c
    U xenocara/lib/libdrm/Makefile.am
    C xenocara/lib/libdrm/configure.ac
    C xenocara/lib/libdrm/xf86drm.h
    C xenocara/lib/libdrm/tegra/Makefile.in
    U xenocara/lib/libdrm/tegra/libdrm_tegra.pc.in
    U xenocara/lib/libdrm/tegra/private.h
    U xenocara/lib/libdrm/tegra/tegra-symbol-check
    U xenocara/lib/libdrm/tegra/Makefile.am
    U xenocara/lib/libdrm/tegra/tegra.c
    U xenocara/lib/libdrm/tegra/tegra.h
    U xenocara/lib/libdrm/freedreno/freedreno_drmif.h
    U xenocara/lib/libdrm/freedreno/freedreno_priv.h
    U xenocara/lib/libdrm/freedreno/freedreno_device.c
    U xenocara/lib/libdrm/freedreno/libdrm_freedreno.pc.in
    U xenocara/lib/libdrm/freedreno/freedreno_bo_cache.c
    C xenocara/lib/libdrm/freedreno/Makefile.in
    U xenocara/lib/libdrm/freedreno/freedreno_ringbuffer.h
    U xenocara/lib/libdrm/freedreno/freedreno_pipe.c
    U xenocara/lib/libdrm/freedreno/freedreno-symbol-check
    U xenocara/lib/libdrm/freedreno/freedreno_ringbuffer.c
    U xenocara/lib/libdrm/freedreno/Makefile.sources
    U xenocara/lib/libdrm/freedreno/Makefile.am
    U xenocara/lib/libdrm/freedreno/freedreno_bo.c
    U xenocara/lib/libdrm/freedreno/msm/msm_pipe.c
    U xenocara/lib/libdrm/freedreno/msm/msm_drm.h
    U xenocara/lib/libdrm/freedreno/msm/msm_bo.c
    U xenocara/lib/libdrm/freedreno/msm/msm_ringbuffer.c
    U xenocara/lib/libdrm/freedreno/msm/msm_priv.h
    U xenocara/lib/libdrm/freedreno/msm/msm_device.c
    U xenocara/lib/libdrm/freedreno/kgsl/kgsl_bo.c
    U xenocara/lib/libdrm/freedreno/kgsl/kgsl_device.c
    U xenocara/lib/libdrm/freedreno/kgsl/kgsl_drm.h
    U xenocara/lib/libdrm/freedreno/kgsl/kgsl_pipe.c
    U xenocara/lib/libdrm/freedreno/kgsl/kgsl_ringbuffer.c
    U xenocara/lib/libdrm/freedreno/kgsl/kgsl_priv.h
    U xenocara/lib/libdrm/freedreno/kgsl/msm_kgsl.h
    U xenocara/lib/libdrm/tests/drmdevice.c
    U xenocara/lib/libdrm/tests/drmsl.c
    U xenocara/lib/libdrm/tests/random.c
    C xenocara/lib/libdrm/tests/Makefile.in
    U xenocara/lib/libdrm/tests/Makefile.am
    U xenocara/lib/libdrm/tests/hash.c
    C xenocara/lib/libdrm/tests/tegra/Makefile.in
    U xenocara/lib/libdrm/tests/tegra/openclose.c
    U xenocara/lib/libdrm/tests/tegra/Makefile.am
    U xenocara/lib/libdrm/tests/kms/libkms-test-framebuffer.c
    U xenocara/lib/libdrm/tests/kms/libkms-test-crtc.c
    C xenocara/lib/libdrm/tests/kms/Makefile.in
    U xenocara/lib/libdrm/tests/kms/libkms-test-screen.c
    U xenocara/lib/libdrm/tests/kms/kms-steal-crtc.c
    U xenocara/lib/libdrm/tests/kms/kms-universal-planes.c
    U xenocara/lib/libdrm/tests/kms/libkms-test.h
    U xenocara/lib/libdrm/tests/kms/Makefile.am
    U xenocara/lib/libdrm/tests/kms/libkms-test-device.c
    U xenocara/lib/libdrm/tests/kms/libkms-test-plane.c
    U xenocara/lib/libdrm/tests/etnaviv/state.xml.h
    U xenocara/lib/libdrm/tests/etnaviv/write_bmp.h
    U xenocara/lib/libdrm/tests/etnaviv/etnaviv_bo_cache_test.c
    C xenocara/lib/libdrm/tests/etnaviv/Makefile.in
    U xenocara/lib/libdrm/tests/etnaviv/write_bmp.c
    U xenocara/lib/libdrm/tests/etnaviv/etnaviv_cmd_stream_test.c
    U xenocara/lib/libdrm/tests/etnaviv/etnaviv_2d_test.c
    U xenocara/lib/libdrm/tests/etnaviv/cmdstream.xml.h
    U xenocara/lib/libdrm/tests/etnaviv/state_2d.xml.h
    U xenocara/lib/libdrm/tests/etnaviv/Makefile.am
    U xenocara/lib/libdrm/tests/util/format.c
    U xenocara/lib/libdrm/tests/util/kms.c
    C xenocara/lib/libdrm/tests/util/Makefile.in
    U xenocara/lib/libdrm/tests/util/format.h
    U xenocara/lib/libdrm/tests/util/pattern.c
    U xenocara/lib/libdrm/tests/util/common.h
    U xenocara/lib/libdrm/tests/util/Makefile.sources
    U xenocara/lib/libdrm/tests/util/kms.h
    U xenocara/lib/libdrm/tests/util/Makefile.am
    U xenocara/lib/libdrm/tests/util/pattern.h
    U xenocara/lib/libdrm/tests/amdgpu/bo_tests.c
    U xenocara/lib/libdrm/tests/amdgpu/cs_tests.c
    U xenocara/lib/libdrm/tests/amdgpu/vce_tests.c
    U xenocara/lib/libdrm/tests/amdgpu/amdgpu_test.c
    C xenocara/lib/libdrm/tests/amdgpu/Makefile.in
    U xenocara/lib/libdrm/tests/amdgpu/vce_ib.h
    U xenocara/lib/libdrm/tests/amdgpu/amdgpu_test.h
    U xenocara/lib/libdrm/tests/amdgpu/frame.h
    U xenocara/lib/libdrm/tests/amdgpu/basic_tests.c
    U xenocara/lib/libdrm/tests/amdgpu/uvd_messages.h
    U xenocara/lib/libdrm/tests/amdgpu/Makefile.am
    C xenocara/lib/libdrm/tests/vbltest/Makefile.in
    U xenocara/lib/libdrm/tests/vbltest/vbltest.c
    U xenocara/lib/libdrm/tests/vbltest/Makefile.am
    C xenocara/lib/libdrm/tests/modeprint/Makefile.in
    U xenocara/lib/libdrm/tests/modeprint/modeprint.c
    U xenocara/lib/libdrm/tests/modeprint/Makefile.am
    C xenocara/lib/libdrm/tests/exynos/Makefile.in
    U xenocara/lib/libdrm/tests/exynos/exynos_fimg2d_event.c
    U xenocara/lib/libdrm/tests/exynos/exynos_fimg2d_test.c
    U xenocara/lib/libdrm/tests/exynos/Makefile.am
    U xenocara/lib/libdrm/tests/exynos/exynos_fimg2d_perf.c
    C xenocara/lib/libdrm/tests/radeon/Makefile.in
    U xenocara/lib/libdrm/tests/radeon/rbo.c
    U xenocara/lib/libdrm/tests/radeon/radeon_ttm.c
    U xenocara/lib/libdrm/tests/radeon/Makefile.am
    U xenocara/lib/libdrm/tests/radeon/rbo.h
    C xenocara/lib/libdrm/tests/proptest/Makefile.in
    U xenocara/lib/libdrm/tests/proptest/Makefile.sources
    U xenocara/lib/libdrm/tests/proptest/proptest.c
    U xenocara/lib/libdrm/tests/proptest/Makefile.am
    U xenocara/lib/libdrm/tests/modetest/buffers.c
    U xenocara/lib/libdrm/tests/modetest/cursor.h
    C xenocara/lib/libdrm/tests/modetest/Makefile.in
    U xenocara/lib/libdrm/tests/modetest/cursor.c
    U xenocara/lib/libdrm/tests/modetest/modetest.c
    U xenocara/lib/libdrm/tests/modetest/buffers.h
    U xenocara/lib/libdrm/tests/modetest/Makefile.sources
    U xenocara/lib/libdrm/tests/modetest/Makefile.am
    C xenocara/lib/libdrm/tests/kmstest/Makefile.in
    U xenocara/lib/libdrm/tests/kmstest/Makefile.am
    U xenocara/lib/libdrm/tests/kmstest/main.c
    U xenocara/lib/libdrm/tests/nouveau/threaded.c
    C xenocara/lib/libdrm/tests/nouveau/Makefile.in
    U xenocara/lib/libdrm/tests/nouveau/Makefile.am
    U xenocara/lib/libdrm/etnaviv/etnaviv_priv.h
    U xenocara/lib/libdrm/etnaviv/etnaviv_device.c
    U xenocara/lib/libdrm/etnaviv/etnaviv_bo_cache.c
    C xenocara/lib/libdrm/etnaviv/Makefile.in
    U xenocara/lib/libdrm/etnaviv/etnaviv_pipe.c
    U xenocara/lib/libdrm/etnaviv/etnaviv_drm.h
    U xenocara/lib/libdrm/etnaviv/Makefile.sources
    U xenocara/lib/libdrm/etnaviv/etnaviv_bo.c
    U xenocara/lib/libdrm/etnaviv/Makefile.am
    U xenocara/lib/libdrm/etnaviv/etnaviv_cmd_stream.c
    U xenocara/lib/libdrm/etnaviv/etnaviv_gpu.c
    U xenocara/lib/libdrm/etnaviv/etnaviv_drmif.h
    U xenocara/lib/libdrm/etnaviv/etnaviv-symbol-check
    U xenocara/lib/libdrm/etnaviv/libdrm_etnaviv.pc.in
    U xenocara/lib/libdrm/amdgpu/util_hash.h
    U xenocara/lib/libdrm/amdgpu/amdgpu_device.c
    U xenocara/lib/libdrm/amdgpu/util_hash_table.h
    C xenocara/lib/libdrm/amdgpu/Makefile.in
    U xenocara/lib/libdrm/amdgpu/amdgpu_vamgr.c
    U xenocara/lib/libdrm/amdgpu/amdgpu_asic_id.h
    U xenocara/lib/libdrm/amdgpu/util_hash_table.c
    U xenocara/lib/libdrm/amdgpu/amdgpu_cs.c
    U xenocara/lib/libdrm/amdgpu/amdgpu.h
    U xenocara/lib/libdrm/amdgpu/amdgpu_gpu_info.c
    U xenocara/lib/libdrm/amdgpu/Makefile.sources
    U xenocara/lib/libdrm/amdgpu/libdrm_amdgpu.pc.in
    U xenocara/lib/libdrm/amdgpu/amdgpu_internal.h
    U xenocara/lib/libdrm/amdgpu/Makefile.am
    C xenocara/lib/libdrm/amdgpu/amdgpu_bo.c
    U xenocara/lib/libdrm/amdgpu/amdgpu-symbol-check
    U xenocara/lib/libdrm/amdgpu/util_hash.c
    U xenocara/lib/libdrm/omap/omap_drm.c
    U xenocara/lib/libdrm/omap/omap-symbol-check
    U xenocara/lib/libdrm/omap/omap_drmif.h
    C xenocara/lib/libdrm/omap/Makefile.in
    U xenocara/lib/libdrm/omap/Makefile.am
    U xenocara/lib/libdrm/omap/libdrm_omap.pc.in
    U xenocara/lib/libdrm/omap/omap_drm.h
    U xenocara/lib/libdrm/exynos/exynos_fimg2d.h
    U xenocara/lib/libdrm/exynos/exynos_fimg2d.c
    U xenocara/lib/libdrm/exynos/exynos_drm.c
    C xenocara/lib/libdrm/exynos/Makefile.in
    U xenocara/lib/libdrm/exynos/exynos_drm.h
    U xenocara/lib/libdrm/exynos/fimg2d_reg.h
    U xenocara/lib/libdrm/exynos/exynos-symbol-check
    U xenocara/lib/libdrm/exynos/libdrm_exynos.pc.in
    U xenocara/lib/libdrm/exynos/Makefile.am
    U xenocara/lib/libdrm/exynos/exynos_drmif.h
    C xenocara/lib/libdrm/vc4/Makefile.in
    U xenocara/lib/libdrm/vc4/libdrm_vc4.pc.in
    U xenocara/lib/libdrm/vc4/vc4_qpu_defines.h
    U xenocara/lib/libdrm/vc4/Makefile.sources
    U xenocara/lib/libdrm/vc4/vc4_packet.h
    U xenocara/lib/libdrm/vc4/Makefile.am
    U xenocara/lib/libdrm/man/drmModeGetResources.xml
    U xenocara/lib/libdrm/man/drmAvailable.xml
    C xenocara/lib/libdrm/man/Makefile.in
    U xenocara/lib/libdrm/man/drmHandleEvent.xml
    U xenocara/lib/libdrm/man/drm.xml
    U xenocara/lib/libdrm/man/drm-kms.xml
    U xenocara/lib/libdrm/man/Makefile.am
    U xenocara/lib/libdrm/man/drm-memory.xml
    U xenocara/lib/libdrm/radeon/radeon_bo_int.h
    U xenocara/lib/libdrm/radeon/radeon_bo.c
    U xenocara/lib/libdrm/radeon/radeon_surface.c
    U xenocara/lib/libdrm/radeon/radeon_bo_gem.c
    U xenocara/lib/libdrm/radeon/radeon_cs_gem.c
    C xenocara/lib/libdrm/radeon/Makefile.in
    U xenocara/lib/libdrm/radeon/radeon_cs.c
    U xenocara/lib/libdrm/radeon/radeon_bo_gem.h
    U xenocara/lib/libdrm/radeon/bof.h
    U xenocara/lib/libdrm/radeon/radeon_surface.h
    U xenocara/lib/libdrm/radeon/radeon-symbol-check
    U xenocara/lib/libdrm/radeon/radeon_cs_gem.h
    U xenocara/lib/libdrm/radeon/radeon_cs_int.h
    U xenocara/lib/libdrm/radeon/Makefile.sources
    U xenocara/lib/libdrm/radeon/r600_pci_ids.h
    U xenocara/lib/libdrm/radeon/Makefile.am
    U xenocara/lib/libdrm/radeon/radeon_bo.h
    U xenocara/lib/libdrm/radeon/radeon_cs_space.c
    U xenocara/lib/libdrm/radeon/radeon_cs.h
    U xenocara/lib/libdrm/radeon/bof.c
    U xenocara/lib/libdrm/radeon/libdrm_radeon.pc.in
    C xenocara/lib/libdrm/intel/intel_bufmgr_gem.c
    U xenocara/lib/libdrm/intel/libdrm_intel.pc.in
    U xenocara/lib/libdrm/intel/uthash.h
    C xenocara/lib/libdrm/intel/Makefile.in
    U xenocara/lib/libdrm/intel/intel_bufmgr.c
    U xenocara/lib/libdrm/intel/mm.h
    U xenocara/lib/libdrm/intel/intel_bufmgr_priv.h
    U xenocara/lib/libdrm/intel/intel_bufmgr_fake.c
    C xenocara/lib/libdrm/intel/intel_decode.c
    U xenocara/lib/libdrm/intel/intel_bufmgr.h
    U xenocara/lib/libdrm/intel/intel_chipset.h
    U xenocara/lib/libdrm/intel/mm.c
    U xenocara/lib/libdrm/intel/intel_debug.h
    U xenocara/lib/libdrm/intel/intel_aub.h
    U xenocara/lib/libdrm/intel/Makefile.sources
    U xenocara/lib/libdrm/intel/test_decode.c
    U xenocara/lib/libdrm/intel/intel-symbol-check
    U xenocara/lib/libdrm/intel/Makefile.am
    U xenocara/lib/libdrm/intel/tests/gen6-3d.batch
    U xenocara/lib/libdrm/intel/tests/gen6-3d.batch-ref.txt
    U xenocara/lib/libdrm/intel/tests/gen4-3d.batch
    U xenocara/lib/libdrm/intel/tests/gm45-3d.batch-ref.txt
    U xenocara/lib/libdrm/intel/tests/gen6-3d.batch.sh
    U xenocara/lib/libdrm/intel/tests/gm45-3d.batch
    U xenocara/lib/libdrm/intel/tests/test-batch.sh
    U xenocara/lib/libdrm/intel/tests/gen7-2d-copy.batch.sh
    U xenocara/lib/libdrm/intel/tests/gen7-3d.batch-ref.txt
    U xenocara/lib/libdrm/intel/tests/gen7-2d-copy.batch-ref.txt
    U xenocara/lib/libdrm/intel/tests/gen5-3d.batch.sh
    U xenocara/lib/libdrm/intel/tests/gm45-3d.batch.sh
    U xenocara/lib/libdrm/intel/tests/gen5-3d.batch
    U xenocara/lib/libdrm/intel/tests/gen7-3d.batch
    U xenocara/lib/libdrm/intel/tests/gen7-2d-copy.batch
    U xenocara/lib/libdrm/intel/tests/gen5-3d.batch-ref.txt
    U xenocara/lib/libdrm/intel/tests/gen4-3d.batch.sh
    U xenocara/lib/libdrm/intel/tests/gen7-3d.batch.sh
    U xenocara/lib/libdrm/intel/tests/gen4-3d.batch-ref.txt
    C xenocara/lib/libdrm/m4/libtool.m4
    U xenocara/lib/libdrm/m4/ltsugar.m4
    U xenocara/lib/libdrm/m4/ltversion.m4
    U xenocara/lib/libdrm/m4/lt~obsolete.m4
    U xenocara/lib/libdrm/m4/ltoptions.m4
    U xenocara/lib/libdrm/include/drm/mga_drm.h
    U xenocara/lib/libdrm/include/drm/mach64_drm.h
    U xenocara/lib/libdrm/include/drm/virtgpu_drm.h
    U xenocara/lib/libdrm/include/drm/sis_drm.h
    U xenocara/lib/libdrm/include/drm/savage_drm.h
    U xenocara/lib/libdrm/include/drm/vc4_drm.h
    U xenocara/lib/libdrm/include/drm/drm_fourcc.h
    U xenocara/lib/libdrm/include/drm/nouveau_drm.h
    U xenocara/lib/libdrm/include/drm/vmwgfx_drm.h
    U xenocara/lib/libdrm/include/drm/README
    U xenocara/lib/libdrm/include/drm/tegra_drm.h
    U xenocara/lib/libdrm/include/drm/drm_mode.h
    U xenocara/lib/libdrm/include/drm/r128_drm.h
    U xenocara/lib/libdrm/include/drm/radeon_drm.h
    U xenocara/lib/libdrm/include/drm/qxl_drm.h
    U xenocara/lib/libdrm/include/drm/via_drm.h
    U xenocara/lib/libdrm/include/drm/drm_sarea.h
    U xenocara/lib/libdrm/include/drm/i915_drm.h
    C xenocara/lib/libdrm/include/drm/drm.h
    U xenocara/lib/libdrm/include/drm/amdgpu_drm.h
    U xenocara/lib/libdrm/nouveau/nouveau.c
    C xenocara/lib/libdrm/nouveau/Makefile.in
    U xenocara/lib/libdrm/nouveau/libdrm_nouveau.pc.in
    U xenocara/lib/libdrm/nouveau/bufctx.c
    U xenocara/lib/libdrm/nouveau/pushbuf.c
    U xenocara/lib/libdrm/nouveau/private.h
    U xenocara/lib/libdrm/nouveau/Makefile.sources
    U xenocara/lib/libdrm/nouveau/nouveau-symbol-check
    U xenocara/lib/libdrm/nouveau/Makefile.am
    U xenocara/lib/libdrm/nouveau/abi16.c
    U xenocara/lib/libdrm/nouveau/nouveau.h
    U xenocara/lib/libdrm/nouveau/nvif/cl0080.h
    U xenocara/lib/libdrm/nouveau/nvif/cl9097.h
    U xenocara/lib/libdrm/nouveau/nvif/if0003.h
    U xenocara/lib/libdrm/nouveau/nvif/class.h
    U xenocara/lib/libdrm/nouveau/nvif/unpack.h
    U xenocara/lib/libdrm/nouveau/nvif/ioctl.h
    U xenocara/lib/libdrm/nouveau/nvif/if0002.h
    U xenocara/lib/libdrm/libkms/radeon.c
    U xenocara/lib/libdrm/libkms/linux.c
    U xenocara/lib/libdrm/libkms/nouveau.c
    U xenocara/lib/libdrm/libkms/vmwgfx.c
    C xenocara/lib/libdrm/libkms/Makefile.in
    U xenocara/lib/libdrm/libkms/kms-symbol-check
    U xenocara/lib/libdrm/libkms/intel.c
    U xenocara/lib/libdrm/libkms/dumb.c
    U xenocara/lib/libdrm/libkms/api.c
    U xenocara/lib/libdrm/libkms/Makefile.sources
    U xenocara/lib/libdrm/libkms/libkms.h
    U xenocara/lib/libdrm/libkms/exynos.c
    U xenocara/lib/libdrm/libkms/internal.h
    U xenocara/lib/libdrm/libkms/Makefile.am
    U xenocara/lib/libdrm/libkms/libkms.pc.in
    U xenocara/lib/libdrm/build-aux/depcomp
    U xenocara/lib/libdrm/build-aux/missing
    C xenocara/lib/libdrm/build-aux/config.sub
    C xenocara/lib/libdrm/build-aux/ltmain.sh
    U xenocara/lib/libdrm/build-aux/test-driver
    C xenocara/lib/libdrm/build-aux/config.guess
    U xenocara/lib/libdrm/build-aux/compile
    C xenocara/lib/libdrm/build-aux/install-sh
    
    42 conflicts created by this import.
    Use the following command to help the merge:
    
    cvs checkout -jlibdrm:yesterday -jlibdrm xenocara/lib/libdrm

CVSROOT:	/cvs
Module name:	xenocara
Changes by:	jsg@cvs.openbsd.org	2017/04/14 01:52:11

Modified files:
	lib/libdrm     : Makefile.bsd-wrapper configure configure.ac 
	                 xf86drm.c xf86drm.h xf86drmMode.c 
	lib/libdrm/amdgpu: amdgpu_bo.c 
	lib/libdrm/freedreno: Makefile.in 
	lib/libdrm/include/drm: drm.h 
	lib/libdrm/intel: intel_bufmgr_gem.c intel_decode.c 
	lib/libdrm/tests/etnaviv: Makefile.in 

Log message:
Merge libdrm 2.4.79


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	jsg@cvs.openbsd.org	2017/04/14 01:53:41

Modified files:
	distrib/sets/lists/xbase: md.alpha md.amd64 md.arm64 md.i386 
	                          md.loongson md.macppc md.octeon md.sgi 
	                          md.socppc md.sparc64 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/14 01:55:09

Modified files:
	security/heimdal: Tag: OPENBSD_6_1 Makefile 
Added files:
	security/heimdal/patches: Tag: OPENBSD_6_1 patch-kdc_krb5tgs_c 

Log message:
Fix transit path validation CVE-2017-6594.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	jsg@cvs.openbsd.org	2017/04/14 01:56:08

Modified files:
	.              : 3RDPARTY 

Log message:
update


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/14 02:04:30

Modified files:
	x11/gnome/getting-started-docs: Makefile distinfo 
	x11/gnome/getting-started-docs/pkg: PLIST 

Log message:
Update to gnome-getting-started-docs-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/14 02:05:00

Modified files:
	security/heimdal: Makefile distinfo 

Log message:
SECURITY update to heimdal-7.3.0 (CVE-2017-6594).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/14 02:24:03

Modified files:
	editors/ldapvi : Makefile 
	editors/ldapvi/patches: patch-ldapvi_c 

Log message:
Unbreak build with clang.
Drop the gettext MODULE and regen WANTLIB while here...


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/14 04:18:19

Modified files:
	textproc/gspell: Makefile distinfo 
	textproc/gspell/pkg: PLIST 

Log message:
Update to gspell-1.4.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/14 06:31:07

Modified files:
	books/utp      : Makefile 

Log message:
fix MASTER_SITES, reported by Kusalananda


CVSROOT:	/cvs
Module name:	www
Changes by:	aoyama@cvs.openbsd.org	2017/04/14 06:39:03

Modified files:
	.              : luna88k.html 

Log message:
Add xp(4) device, it is supported since 6.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/14 06:59:28

Modified files:
	editors/texworks: Makefile 

Log message:
bump EPOCH

Found newer package texworks-20090618p0 in /mnt/plist/i386
Found newer package texworks-20090618p1 in /mnt/plist/i386
Found newer package texworks-20090618p2 in /mnt/plist/i386


CVSROOT:	/cvs
Module name:	ports
Changes by:	ian@cvs.openbsd.org	2017/04/14 08:01:47

Modified files:
	books/JLS      : Makefile distinfo 
	books/JLS/pkg  : PLIST 

Log message:
Bump from antiquity to Java 8. Improved by sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/14 08:17:58

Modified files:
	mail/mutt      : Makefile distinfo 

Log message:
update to mutt-1.8.1


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/14 09:02:51

Modified files:
	lib/libc/gen   : ttyname.c 

Log message:
whitespace


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/14 09:11:31

Modified files:
	sys/dev        : softraid.c 
	sys/kern       : kern_sig.c 
	sys/net        : if.c if_spppsubr.c 

Log message:
Avoid some false positives with cppcheck.  No binary change.
OK jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/14 09:19:39

Modified files:
	lib/libssl     : ssl_srvr.c 

Log message:
Clean up server key exchange EC point handling. Encode the point directly
into the CBB memory, rather than mallocing and memcpying, which also makes
makes the code more consistent with the client. Add a missing check for the
first EC_POINT_point2oct() call.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/14 09:20:16

Modified files:
	lib/libssl     : ssl_asn1.c 

Log message:
Switch i2d_SSL_SESSION() back to freezero(3) now that the size constraints
have been relaxed.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/14 09:20:55

Modified files:
	lib/libssl     : bs_cbb.c 

Log message:
Use freezero(3) in the CBB clean up path, since this could hold sensitive
information (such as master keys).


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/14 09:26:53

Modified files:
	lib/libssl     : ssl_srvr.c 

Log message:
Use freezero(3) to clean up the X25519 keys - simpler, cleaner code.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/14 09:32:41

Modified files:
	lib/libssl     : ssl_srvr.c 

Log message:
Use freezero(3) when cleaning up session tickets - not only does it require
less code, but there is also a potential performance gain since they can be
larger allocations.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/14 10:17:38

Modified files:
	faq            : faq11.html 

Log message:
merge two parts of 'customizing x' that were variations on the same theme.

ok tj


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/14 10:39:32

Modified files:
	infrastructure/lib/DPB: Config.pm PortBuilder.pm State.pm 

Log message:
reorg the logic behind permanent_log so that it *is* the permanent log.
fixes -DNO_BUILD_STATS as reported by naddy@ (predates rewriting buildinfo,
and I plain forgot about it obviously)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/14 10:43:40

Modified files:
	infrastructure/lib/DPB: Job.pm 
	infrastructure/lib/DPB/Job: Fetch.pm Port.pm 

Log message:
have both log watching jobs actually share the timeout code.
If I had done this before, I would have fixed kill just once after privsep
and not inadvertently broken the builder stuck timeout...

problem noticed by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/14 12:06:28

Modified files:
	sbin/ipsecctl  : ipsec.conf.5 ipsecctl.h parse.y 

Log message:
Up to now ipsecctl(8) grouped SAs with identical src and dst to the
flow which the first SA matched by the flow type.  This behaviour
was mostly undocumented and unexpected.  Make SA bundles explicit
in ipsec.conf(5).  Only group SAs that have the same src and dst
and also the same bundle identifier.
OK hshoexer@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/14 12:14:33

Modified files:
	regress/sbin/ipsecctl: Makefile sa25.in sa26.in 
Added files:
	regress/sbin/ipsecctl: sa27.in sa27.ok 

Log message:
Add tests with the ipsec.conf SA bundle keyword.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/14 12:23:29

Modified files:
	usr.bin/mandoc : mdoc_term.c 

Log message:
Do not make the colon after the .Lk link text italic.
I just pushed the same change to GNU troff.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/14 12:24:15

Modified files:
	usr.bin/mandoc : mdoc_man.c 

Log message:
Do not make the colon after the .Lk link text italic.
I just pushed the same change to GNU troff.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/14 12:26:40

Modified files:
	devel/libgit2/libgit2: Makefile distinfo 
	devel/libgit2/libgit2/pkg: PLIST 

Log message:
update to libgit2-0.25.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/14 12:26:45

Modified files:
	devel/libgit2/py-git2: Makefile distinfo 
	devel/libgit2/py-git2/pkg: PLIST 

Log message:
update to py-git2-0.25.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/14 12:27:21

Added files:
	devel/libgit2/libgit2/patches: patch-src_openssl_stream_h 

Log message:
missing patch from upstream to unbreak with libressl; no bump as it wouldn't build


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/14 13:03:50

Modified files:
	regress/sys/netinet/ipsec: Makefile ipsec.conf 

Log message:
Add test for IP payload compression.  It is sending small and big
ping packets as only the latter get actually compressed.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/14 13:34:54

Modified files:
	usr.bin/mandoc : mdoc_term.c 

Log message:
Show long .Lk URIs in like an indented display, similar to groff.
Suggested by bentley@.


CVSROOT:	/cvs
Module name:	src
Changes by:	jcs@cvs.openbsd.org	2017/04/14 13:39:59

Modified files:
	gnu/usr.bin/cvs/src: server.c 

Log message:
once cvs's flow-control mechanism has kicked in, stop reading from
its local reader until memory usage goes back down below its
watermark.

during a checkout of a tree with big files (like www) from a fast
reader (disk) and a slow writer (net), the amount of data being
buffered can back up enough that cvs tries to allocate too many
buffers and hits its resource limit, causing death.

cvs's flow-control mechanism properly detects this early on, but the
message sent to the reader process to stop sending data takes too
long to process.

take more aggressive action and just stop reading from the reader
until the writer has ejected enough data that it can start re-using
its already-allocated buffers instead of allocating new ones.

ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/04/14 13:49:06

Modified files:
	textproc/groff : Makefile 
	textproc/groff/patches: patch-tmac_doc_tmac 
Added files:
	textproc/groff/patches: patch-tmac_doc-nroff 

Log message:
Pull in four patches that i recently pushed upstream to GNU troff.
Joint work with bentley@, all committed upstream by Carsten Kunze.

https://savannah.gnu.org/bugs/?43554 - better \*[Lq] and \*[Rq]
https://savannah.gnu.org/bugs/?43553 - typographic quotes for .%T
https://savannah.gnu.org/bugs/?50771 - punctuation after .Lk
https://savannah.gnu.org/bugs/?50789 - .Lk with more than two args


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/14 13:50:54

Modified files:
	regress/usr.bin/mandoc/mdoc/Lk: font.out_ascii link.out_ascii 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 

Log message:
adjust .Lk tests after groff and mandoc .Lk improvements


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/14 14:22:12

Modified files:
	faq            : faq4.html 

Log message:
in the downloading/verifying section, provide an example sha256 command
for the gnu coreutils as well. also briefly touch on raw device names
for dd and note the "bs=1m" vs "bs=1M" difference.

ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/14 14:46:31

Modified files:
	sys/net        : if_etherip.c if_etherip.h if_gif.c if_gif.h 
	                 if_pfsync.c if_pfsync.h 
	sys/netinet    : icmp6.h igmp.c igmp_var.h ip_carp.c ip_carp.h 
	                 ip_divert.h ip_ether.c ip_ether.h ip_gre.c 
	                 ip_gre.h ip_icmp.c ip_icmp.h ip_input.c 
	                 ip_ipip.c ip_ipsp.h ip_var.h ipsec_input.c 
	                 raw_ip.c tcp_input.c tcp_var.h udp_usrreq.c 
	                 udp_var.h 
	sys/netinet6   : dest6.c frag6.c icmp6.c ip6_divert.h 
	                 ip6_input.c ip6_var.h raw_ip6.c route6.c 
	sys/sys        : protosw.h 

Log message:
Pass down the address family through the pr_input calls.  This
allows to simplify code used for both IPv4 and IPv6.
OK mikeb@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/14 14:50:35

Modified files:
	sys/net        : if_gif.c 

Log message:
Remove unused define satoin6().


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/04/14 15:37:15

Modified files:
	.              : Makefile 
	etc            : Makefile 

Log message:
mark newish phony targets as phony.
okay tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	dhill@cvs.openbsd.org	2017/04/14 15:53:06

Modified files:
	net/mtr        : Makefile 
	net/mtr/patches: patch-net_c 

Log message:
Fix mtr -u ipv6-target.  mtr code says "sendto() assumes packet length
includes the IPv4 header but not the IPv6 header."  Remove that
assumption and always include the IPv6 header length in the total
packet size.

ok sthen@


CVSROOT:	/cvs
Module name:	www
Changes by:	brynet@cvs.openbsd.org	2017/04/14 17:12:54

Modified files:
	.              : want.html 

Log message:
I could really use a fast Intel laptop.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/14 22:18:40

Modified files:
	sys/arch/octeon/dev: octeon_iobus.c 

Log message:
No GMX on CN73xx.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/14 22:38:27

Modified files:
	sys/arch/octeon/octeon: bus_dma.c 

Log message:
Sync bus_dmamap_load_raw() with amd64 for better constraint checking.
Needed by xhci(4).


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/14 22:54:04

Modified files:
	sys/dev/acpi   : dsdt.c 

Log message:
Fix format string in ACPI_MEMDEBUG block

From Anton Lindqvist (anton.lindqvist(at)gmail.com)


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/15 03:15:45

Modified files:
	usr.sbin/nsd   : configlexer.lex configparser.y configure.ac 
	                 difffile.c nsd-checkconf.c nsd.conf.5.in 
	                 nsd.conf.sample.in options.c options.h packet.c 
	                 packet.h query.c rdata.c server.c udb.c xfrd.c 
	                 zonec.c 

Log message:
update to 4.1.16rc1
tests & OK sthen

(if there are more changes coming for 4.1.16 release we will just
commit them on top)


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/15 03:16:05

Modified files:
	usr.sbin/nsd   : configure 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/15 03:24:20

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 

Log message:
Update to google-cloud-sdk-151.0.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/15 04:23:35

Modified files:
	gnu/usr.bin/binutils-2.17/bfd: elfxx-sparc.c 

Log message:
Handle R_SPARC_WPLT30 relocations against a local symbol.  Fixes building the
audio/openal port with clang.

ok guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/15 05:15:02

Modified files:
	sys/arch/arm64/arm64: pmap.c 

Log message:
The tlb flushes in pmap_set_{l1,l2,l3} use ranges that don't fully make sense.
But those tlb flushes shouldn't be necessary anyway, so simply remove them.
Simplify the tlb flushing code now that we no longer flush ranges, and
revive the branch that doesn't flush a specific ASID for the kernel pmap
since its mappings are global.

ok patrick@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/15 05:42:09

Modified files:
	usr.sbin/ndp   : ndp.8 ndp.c 

Log message:
Let ndp(8) use the process's current routing table by default.
from Pierre Emeriaud;  OK jca@ claudio@
Sync code and man page with arp(8).  OK florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/15 05:50:24

Modified files:
	usr.sbin/arp   : arp.c 

Log message:
Name global variable for routing socket rtsock like in ndp(8).
OK florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/15 05:58:51

Modified files:
	usr.sbin/ndp   : ndp.c 

Log message:
Take implementation for getsocket() from arp(8).  This brings
routing table filter and pledge(2) to ndp(8) modes -s and -d.
OK florian@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/15 06:53:02

Log message:
    import i3lock-2.9 (git master) with bsd_auth(3) support
    
    i3lock is a simple screen locker like slock. After starting it, you will
    see a white screen (you can configure the color/an image). You can return
    to your screen by entering your password.
    
    ok aja@
    
    Status:
    
    Vendor Tag:	jasper
    Release Tags:	jasper_20171504
    
    N ports/x11/i3lock/distinfo
    N ports/x11/i3lock/Makefile
    N ports/x11/i3lock/pkg/PLIST
    N ports/x11/i3lock/pkg/DESCR
    N ports/x11/i3lock/patches/patch-Makefile
    N ports/x11/i3lock/patches/patch-i3lock_c
    N ports/x11/i3lock/patches/patch-unlock_indicator_c
    N ports/x11/i3lock/patches/patch-unlock_indicator_h
    N ports/x11/i3lock/patches/patch-xcb_c
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/15 06:54:42

Modified files:
	x11            : Makefile 

Log message:
+i3lock


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/15 07:12:08

Modified files:
	etc            : weekly 
	share/man      : Makefile 
	share/man/man8 : daily.8 

Log message:
Build full mandoc.db(5) databases by default using makewhatis(8)
without -Q during the build and in weekly(8).  According to tests
by many developers, makewhatis(8) takes a few minutes at most even
on slower hardware like octeon, loongson, ALIX, RPI3, Soekris,
cubox, softiron etc., and security(8) is often worse than makewhatis(8).

In case this causes excessive weekly(8) run times on even slower
(~50 MHz-class) CPUs, consider adding "MAKEWHATISARGS=-Q" to
/etc/weekly.local on machines that feel unhappy.

OK sthen@ kettenis@ millert@ deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	florian@cvs.openbsd.org	2017/04/15 07:26:22

Modified files:
	.              : want.html 

Log message:
I could use a umb device


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/15 07:56:43

Modified files:
	sys/kern       : vfs_syscalls.c 
	sys/sys        : mount.h 

Log message:
After forced unmount of a file system that has other mount points
in it, dangling mounts could remain.  When unmounting check the
hierarcy and unmount recursively.  Also prevent that a new mount
appears during the scan.
Joint work with natano@; testing and OK krw@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/15 08:02:46

Modified files:
	devel/boehm-gc : Makefile 
	devel/boehm-gc/patches: patch-include_private_gcconfig_h 

Log message:
add support for aarch64 on OpenBSD, copied from our other archs
ok phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/15 08:11:36

Modified files:
	news/nn        : Makefile 
	news/nn/files  : config.h s-openbsd.h 
	news/nn/patches: patch-term_c 
Added files:
	news/nn/files  : m-openbsd.h 

Log message:
Overhaul this port:
* get rid of MACHINE_ARCH dance and use a single m-openbsd.h file
* simplify the substitutions in Makefile
* use a compact s-openbsd.h file without nested comments
* do not define libtermlib globals again

ok maintainer Aaron W. Hsu


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/15 08:23:45

Modified files:
	sysutils/rofi  : Makefile distinfo 
	sysutils/rofi/pkg: PLIST 

Log message:
update to rofi-1.3.1
- includes a new interactive theme-selector


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/15 08:51:08

Modified files:
	fonts/fantasque-sans: Makefile distinfo 
	fonts/fantasque-sans/patches: patch-Makefile 

Log message:
update to fantasque-sans-1.7.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/15 09:43:31

Modified files:
	sysutils/terraform: Makefile distinfo 

Log message:
Update to terraform-0.9.3.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/04/15 10:07:08

Modified files:
	.              : MODULES 

Log message:
update


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	robert@cvs.openbsd.org	2017/04/15 11:18:01

Modified files:
	app/fvwm/fvwm  : fvwm.c 

Log message:
remove all compile time __DATE__ and __TIME__ variables from the source

ok deraadt@, matthieu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/15 11:21:14

Modified files:
	textproc/elasticsearch: Makefile distinfo 
	textproc/elasticsearch/pkg: PLIST 

Log message:
Update to 5.3.0

from Pavel Korovin

OK jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/15 11:23:06

Modified files:
	www/kibana     : Makefile distinfo 
	www/kibana/pkg : PLIST 

Log message:
Update to 5.3.0

from Pavel Korovin

extra @unexec in PLIST from me

OK jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/15 11:24:47

Modified files:
	textproc/py-elasticsearch: Makefile distinfo 

Log message:
Update to 5.3.0

OK jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/15 11:25:39

Modified files:
	devel/py-click : Makefile distinfo 

Log message:
Update to 6.7

OK jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/15 11:26:17

Modified files:
	devel/py-voluptuous: Makefile distinfo 
	devel/py-voluptuous/pkg: PLIST 

Log message:
Update to 0.10.2

OK jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/15 11:27:38

Modified files:
	sysutils/py-elasticsearch-curator: Makefile distinfo 
	sysutils/py-elasticsearch-curator/pkg: PLIST 
Removed files:
	sysutils/py-elasticsearch-curator/patches: patch-setup_py 

Log message:
Update to 5.0.1

OK jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/15 12:45:15

Modified files:
	share/man/man4 : inet6.4 

Log message:
more streamlining, with help from bluhm;


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/04/15 12:55:27

Modified files:
	lib/libc/sys   : reboot.2 

Log message:
Document RB_TIMEBAD; delete RB_* that are obsolete/unimplemented

ok visa@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/15 12:58:45

Modified files:
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
Build sparc64 kernels with -ffreestanding.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/15 13:41:36

Modified files:
	lang/rust      : Makefile 

Log message:
mark for parallel building by dpb


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/15 14:33:04

Modified files:
	textproc/openjade: Makefile 
Added files:
	textproc/openjade/patches: patch-style_MultiLineInlineNote_cxx 

Log message:
iostream.h -> iostream; fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/15 14:46:16

Modified files:
	net/mosquitto  : Makefile 
Added files:
	net/mosquitto/patches: patch-test_Makefile 
	                       patch-test_broker_Makefile 
	                       patch-test_broker_c_Makefile 
	                       patch-test_lib_c_08-ssl-fake-cacert_c 
	                       patch-test_lib_c_Makefile 
	                       patch-test_lib_cpp_08-ssl-fake-cacert_cpp 
	                       patch-test_lib_cpp_Makefile 

Log message:
enable tests, part of a larger diff which seems fine to edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/15 14:49:09

Modified files:
	net/mosquitto  : Makefile 
	net/mosquitto/patches: patch-src_CMakeLists_txt 
Added files:
	net/mosquitto/patches: patch-src_read_handle_server_c 

Log message:
use libc's uuid generation functions rather than pulling in e2fsprogs.
split up from a combined diff, seems fine to edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/15 14:49:44

Modified files:
	net/mosquitto/patches: patch-lib_CMakeLists_txt 
Added files:
	net/mosquitto/patches: patch-lib_mosquitto_c 

Log message:
rand()%x -> arc4random_uniform, split up from a large diff, seems fine
to edd@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/15 15:26:05

Modified files:
	.              : stable.html 

Log message:
sync with release(8)
(nothing wrong with previous version, just needlessly different)


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/15 15:28:32

Modified files:
	.              : stable.html 

Log message:
markup tweak


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/15 15:56:13

Modified files:
	mail/dovecot   : Makefile distinfo 

Log message:
bugfix update to Dovecot 2.2.29.1, from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/15 16:05:29

Modified files:
	devel/pscan    : Makefile distinfo 
	devel/pscan/pkg: DESCR PLIST 

Log message:
Update to newer version of devel/pscan (named "1.3" in README, though the
distfile isn't versioned), and tweak pkg/DESCR. Based on a submission from
maintainer Steffen Wendzel.


CVSROOT:	/cvs
Module name:	src
Changes by:	aoyama@cvs.openbsd.org	2017/04/15 18:52:54

Modified files:
	usr.sbin/dhcrelay6: Makefile 

Log message:
Remove -Werror to make dhcrelay6 on gcc3 architecture successfully.

ok reyk


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/15 20:05:48

Modified files:
	www/py-werkzeug: Makefile distinfo 
	www/py-werkzeug/pkg: PLIST 
Removed files:
	www/py-werkzeug/patches: patch-werkzeug_contrib_lint_py 

Log message:
Update to py-werkzeug-0.12.1


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/16 00:26:55

Modified files:
	lib/libssl     : ssl_asn1.c 

Log message:
backout previous, data_len is not always initialized


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 02:50:49

Modified files:
	etc/mtree      : 4.4BSD.dist 
	etc/examples   : httpd.conf 

Log message:
Remove /etc/ssl/acme/. We don't need it now that we have a default acme-conf(5)
that direclty uses /etc/ssl/{,private} by default. Adapt the httpd.conf example
accordingly.

ok florian@ benno@ millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 03:05:40

Modified files:
	multimedia/gstreamer1: Makefile.inc 

Log message:
This can be built on sparc64 with clang now.

diff from / tested by Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 03:14:52

Modified files:
	misc/portroach : Makefile distinfo 
Removed files:
	misc/portroach/patches: patch-Portroach_SiteHandler_GitHub_pm 
	                        patch-Portroach_SiteHandler_Launchpad_pm 
	                        patch-Portroach_SiteHandler_PyPI_pm 

Log message:
update to portroach-2.0.11, containing a bunch of fixes related to github.

nb: in order to do a full portroach scan one needs a github token otherwise
rate-limiting will block requests after the default limit of 60 p/h has been reached.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 03:19:02

Modified files:
	x11/slim       : Makefile 
	x11/slim/pkg   : README 

Log message:
xdm -> xenodm


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	robert@cvs.openbsd.org	2017/04/16 03:58:50

Modified files:
	share/mk       : bsd.xorg.mk 

Log message:
enforce ar to use the 'cruD' flagset in case libtool/automagic is used

ok matthieu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 04:13:19

Modified files:
	devel/libgit2/libgit2-glib: Makefile distinfo 
	devel/libgit2/libgit2-glib/pkg: PLIST 

Log message:
update to libgit2-glib-0.25.0, reminded by nigel@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/16 04:16:35

Modified files:
	sbin/ldattach  : Makefile 
	usr.bin/pctr   : Makefile 
	usr.bin/htpasswd: Makefile 
	usr.sbin/identd: Makefile 
	usr.sbin/mksuncd: Makefile 
	usr.sbin/tftp-proxy: Makefile 
	usr.sbin/tftpd : Makefile 

Log message:
Different compilers and versions of compilers have different warnings.
Remove -Werror to give code a greater chance of building.

ok deraadt@ florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/16 04:19:54

Modified files:
	usr.bin/htpasswd: Makefile 

Log message:
remove -g from CFLAGS at florian's request


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 04:38:10

Modified files:
	devel/silc-toolkit: Makefile 
	devel/silc-toolkit/patches: patch-configure_ac 
	net/silc-client: Makefile 
	net/silc-client/patches: patch-configure_ac 
	net/silc-server: Makefile 
	net/silc-server/patches: patch-configure_ac 

Log message:
Remove the use of -fno-regmove to appease Clang.  From Brad.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 04:40:07

Modified files:
	net/dnsmasq    : Makefile 
Added files:
	net/dnsmasq/patches: patch-src_dnsmasq_c patch-src_forward_c 

Log message:
Disable use of IP_SENDSRCADDR in dnsmasq for now, for some
yet-to-be-determined reason it results in no reply being sent to the
client. Problem reported by Harald Dunkel. OK Brad.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 04:41:10

Modified files:
	net/dnsmasq    : Tag: OPENBSD_6_1 Makefile 
Added files:
	net/dnsmasq/patches: Tag: OPENBSD_6_1 patch-src_dnsmasq_c 
	                     patch-src_forward_c 

Log message:
MFC: Disable use of IP_SENDSRCADDR in dnsmasq for now, for some
yet-to-be-determined reason it results in no reply being sent to the
client. Problem reported by Harald Dunkel. OK Brad.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/16 04:57:41

Added files:
	audio/libsidplay/patches: patch-configure 

Log message:
converting code to standard C++ (98!) is cool, but converting configure
tests too is better.   No longer fails with non pre-standard includes.

okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/16 04:58:30

Added files:
	audio/mac/patches: patch-src_MACLib_APELink_cpp 

Log message:
stricter const propagation, pleases both gcc and clang
okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/16 04:59:51

Modified files:
	games/spider/patches: patch-gfx_c patch-movelog_c patch-spider_c 

Log message:
minimal damage control. make void functions void.
pleases clang, still happy on gcc
okay sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 05:07:03

Modified files:
	regress/lib/libcrypto/rsa: rsa_test.c 

Log message:
Remove unused rnd_seed variable.  Upstream made the same change 4 days ago.
Fixes compiling this test using clang on arm64.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/16 05:23:40

Modified files:
	build          : mirrors.dat 

Log message:
Add ftp.fau.de, from Julian Hammer, thanks. This is located close to the
previous openbsd.cs.fau.de / openbsd.informatik.uni-erlangen.de mirror.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/16 05:23:59

Modified files:
	.              : ftp.html ftplist httpslist 
	openbgpd       : ftp.html 
	openssh        : ftp.html portable.html 
	openntpd       : portable.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/04/16 06:31:14

Modified files:
	.              : MODULES 

Log message:
update


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 06:43:20

Modified files:
	meta/gnome     : Makefile 
	meta/gnome/pkg : README-main 
	meta/kde4      : Makefile 
	meta/kde4/pkg  : README-minimal 
	x11/fbpanel    : Makefile 
	x11/fbpanel/patches: patch-exec_xlogout 
	x11/gnome/gdm  : Makefile 
	x11/gnome/gdm/patches: patch-data_Init_in 
	                       patch-data_PostSession_in 
	                       patch-data_PreSession_in 
	x11/gnome/gdm/pkg: gdm.rc 
	x11/x11vnc     : Makefile 
	x11/x11vnc/patches: patch-x11vnc_help_c 
	x11/xdmchoose  : Makefile 
	x11/xdmchoose/pkg: DESCR 

Log message:
xdm -> xenodm.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 07:18:56

Modified files:
	textproc/link-grammar: Makefile distinfo 
	textproc/link-grammar/pkg: PLIST-main 

Log message:
Update to link-grammar-5.3.16.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/16 07:20:17

Modified files:
	faq            : upgrade61.html 

Log message:
can't use the uucp user in the find command after you removed it, so add a
note for net/uucp users.

issue spotted by ross l richardson, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 07:35:14

Modified files:
	lib/libc/arch/aarch64/gen: _setjmp.S 

Log message:
Always return nonzero from _longjmp too.

ok jsg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 07:55:07

Added files:
	net/sipsak/patches: patch-header_f_c patch-header_f_h 
	                    patch-helper_c 

Log message:
de-inline to fix with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 07:55:49

Modified files:
	net/sipsak     : Makefile 
Added files:
	net/sipsak/patches: patch-transport_c 

Log message:
Fix bug found by clang.

transport.c:206:23: warning: use of logical '&&' with constant operand [-Wconstant-logical-operand]
if (sockerr.revents && POLLERR) {
^  ~~~~~~~
transport.c:206:23: note: use '&' for a bitwise operation


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/16 08:04:52

Modified files:
	graphics/pqiv  : Makefile distinfo 

Log message:
Update to pqiv-2.8.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:11:23

Modified files:
	multimedia/get_iplayer: Makefile distinfo 
	multimedia/get_iplayer/patches: patch-get_iplayer 

Log message:
update to get_iplayer-2.99


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:15:15

Modified files:
	multimedia/get_iplayer: Makefile 

Log message:
remove no-longer-needed dep


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:17:16

Modified files:
	net/GeoIP      : Makefile distinfo 
	net/GeoIP/pkg  : PLIST-asn PLIST-city 

Log message:
update to GeoIP-1.6.10 and new geolite-data


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 08:20:49

Modified files:
	sys/arch/sparc64/include: ieee.h 

Log message:
Remove some defines marked #ifdef notyet, which really is #ifdef notever.
Reduces the diffs with other architectures.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/16 08:24:03

Modified files:
	usr.bin/systat : iostat.c 
	sys/sys        : mount.h 

Log message:
Statistics for high memory flips in the buffer cache
nits from deraadt@
ok krw@ guenther@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/16 08:25:42

Modified files:
	sys/kern       : vfs_bio.c vfs_biomem.c 
	sys/sys        : buf.h 

Log message:
Flip previously warm pages in the buffer cache to memory above the DMA
region if uvm tells us it is available.
nits from deraadt@
ok krw@ guenther@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/16 08:28:07

Modified files:
	sys/arch/amd64/amd64: lock_machdep.c 
	sys/arch/i386/i386: lock_machdep.c 

Log message:
Replace fetch_and_add() with atomic_inc_int_nv() from <sys/atomic.h>
to make the code more similar to sparc64's.

OK mpi@, guenther@, kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:32:50

Added files:
	net/bwm-ng/patches: patch-src_help_c 

Log message:
de-inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:36:02

Modified files:
	comms/fldigi   : Makefile distinfo 
	comms/fldigi/pkg: PLIST 

Log message:
update to fldigi-4.0.2


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 08:40:47

Modified files:
	regress/usr.bin/openssl/options: optionstest.c 

Log message:
Use %zu to print a size_t.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/16 08:42:30

Modified files:
	converters/qprint: Makefile 

Log message:
clang doesn't like duplicate declarations without extern, but this finds bugs!
no need to recompile a standard getopt, just use the appropriate post-configure
glue.

okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:43:16

Modified files:
	print/transfig : Makefile 

Log message:
honour CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:48:29

Added files:
	print/transfig/patches: patch-fig2dev_dev_genibmgl_c 

Log message:
declare set_width as void (uses "return;", which is an error in clang)


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 08:54:02

Modified files:
	sysutils/torture: Makefile 

Log message:
honour CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 09:05:13

ports/sysutils/torture/patches

Update of /cvs/ports/sysutils/torture/patches
In directory cvs.openbsd.org:/tmp/cvs-serv20911/patches

Log Message:
Directory /cvs/ports/sysutils/torture/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 09:05:40

Added files:
	sysutils/torture/patches: patch-Makefile 

Log message:
drop -Wbounded to unbreak on compilers other than base gcc


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/16 09:11:01

Modified files:
	usr.bin/nc     : netcat.c 

Log message:
Move comments into a block and uses {} to unconfuse reading.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 09:21:03

Modified files:
	devel/gsettings-desktop-schemas: Makefile distinfo 
	devel/gsettings-desktop-schemas/pkg: PLIST 

Log message:
Update to gsettings-desktop-schemas-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 09:27:43

Modified files:
	x11/gnome/tweak-tool: Makefile distinfo 

Log message:
Update to gnome-tweak-tool-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 09:37:41

Modified files:
	sysutils/polkit: Makefile 
	sysutils/polkit/patches: 
	                         patch-src_polkitbackend_polkitbackendinteractiveauthority_c 
Added files:
	sysutils/polkit/patches: patch-src_polkit_polkitpermission_c 
	                         patch-src_polkitbackend_polkitbackendauthority_c 

Log message:
Fix a few memory leaks (via Fedora).


CVSROOT:	/cvs
Module name:	www
Changes by:	danj@cvs.openbsd.org	2017/04/16 09:38:19

Modified files:
	faq            : upgrade61.html 

Log message:
the upgrade begins with cleaning /usr/share/man so
rm /usr/share/man/man1/sqlite3.1 cannot succeed after that

'fix it' tj@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 09:39:25

Modified files:
	x11/gnome/baobab: Makefile distinfo 

Log message:
Update to baobab-3.24.0.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/16 09:47:01

Modified files:
	faq            : faq5.html 

Log message:
make more explicit that RELEASEDIR does not need to be on a noperm fs

ok tj


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 09:47:08

Modified files:
	audio/speech-dispatcher: Makefile distinfo 
	audio/speech-dispatcher/patches: 
	                                 patch-src_api_python_speechd_config_config_py_in 

Log message:
Update to speech-dispatcher-0.8.6.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/16 09:49:56

Modified files:
	faq            : upgrade61.html 

Log message:
one more manual that's no longer around...


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 09:52:39

Modified files:
	devel/liblouis : Makefile distinfo 
	devel/liblouis/patches: patch-python_louis_Makefile_in 
	devel/liblouis/pkg: PLIST 

Log message:
Update to liblouis-3.1.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/16 09:58:32

Log message:
    Import graphics/libsixel.
    
    This package provides encoder/decoder implementation for DEC SIXEL
    graphics, and some converter programs.
    
    SIXEL is one of image formats for printer and terminal imaging
    introduced by Digital Equipment Corp. (DEC). Its data scheme is
    represented as a terminal- friendly escape sequence.
    
    OK benoit@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170416
    
    N ports/graphics/libsixel/Makefile
    N ports/graphics/libsixel/distinfo
    N ports/graphics/libsixel/pkg/PLIST
    N ports/graphics/libsixel/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/16 09:59:17

Modified files:
	graphics       : Makefile 

Log message:
Add libsixel.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 10:01:05

Modified files:
	regress/lib/libc/regex: Makefile 

Log message:
Define DEF_WEAK like we do for ld.so to fix building this with clang.

ok millert@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/16 10:02:12

Modified files:
	x11/gnome/orca : Makefile distinfo 
	x11/gnome/orca/pkg: PLIST 

Log message:
Update to orca-3.24.0.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/16 10:04:47

Modified files:
	faq            : faq10.html 

Log message:
fix odd wording; from ross l richardson


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 10:04:48

Modified files:
	regress/lib/libc/db: dbtest.c 

Log message:
Use INT_MAX instead of SIZE_MAX as the maximum file size we can handle.
Fixes this test on 64-bit architectures.

ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 10:14:37

Modified files:
	sys/arch/arm64/include: ieee.h 

Log message:
Define EXT_IMPLICIT_NBIT like we do on sparc64 and mips64.  Makes vaious
long double math stuff (including printf) actually work.

While there remove 'struct ieee_ldouble', which isn't defined on other
architectures.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/16 10:17:23

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/16 10:59:53

Modified files:
	regress/sys/netinet/ipsec: Makefile 
	regress/sys/netinet/pmtu: Makefile 

Log message:
Make sure these tests print "SKIPPED" if the necessary variables aren't set.
The current code doesn't work since the magic .BEGIN target runs before
the regress target that prints "SKIPPED" and the .BEGIN target fails when
the variables aren't set.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/16 11:16:21

Modified files:
	sys/dev/pci/drm: drm_linux.h 

Log message:
Always evaluate expression in BUG_ON() macro to avoid unused variable
warnings.  Makes non diagnostic kernel compile.
OK kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/04/16 12:04:02

Modified files:
	games/tetris   : screen.c 

Log message:
According to termcap(3), char PC, *BC, *UP need to be extern. Fixes an
ld(1) error found by mestre a while ago.

fix suggested and ok naddy


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/16 12:23:52

Modified files:
	lang/duktape   : Makefile distinfo 

Log message:
Update duktape to 2.1.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 13:10:38

Log message:
    import spidermonkey-38.8.0, as required by an upcoming gjs update.
    it might be a bit rough on the edges, but let's let this in now to
    prevent blocking the gnome update.
    
    ok aja@
    
    Status:
    
    Vendor Tag:	jasper
    Release Tags:	jasper_20171604
    
    N ports/devel/spidermonkey38/Makefile
    N ports/devel/spidermonkey38/distinfo
    N ports/devel/spidermonkey38/patches/patch-jit_ExecutableAllocator_h
    N ports/devel/spidermonkey38/patches/patch-configure
    N ports/devel/spidermonkey38/pkg/DESCR
    N ports/devel/spidermonkey38/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 13:14:07

Modified files:
	devel          : Makefile 

Log message:
+spidermonkey38


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 13:17:57

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to SVG-2.65


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/04/16 13:28:25

Modified files:
	gnu/llvm/tools/lld/ELF: DriverUtils.cpp 

Log message:
Disable colored diagnostics in LLVM's lld.

Requested by deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/16 13:29:27

Modified files:
	devel/distcc   : Makefile distinfo 

Log message:
update to distcc-3.2.0-rc1, the last tag before googlecode went belly-up


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 13:33:14

ports/x11/xsettingsd/patches

Update of /cvs/ports/x11/xsettingsd/patches
In directory cvs.openbsd.org:/tmp/cvs-serv36953/patches

Log Message:
Directory /cvs/ports/x11/xsettingsd/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 13:40:35

Modified files:
	x11/xsettingsd : Makefile distinfo 
Added files:
	x11/xsettingsd/patches: patch-SConstruct 

Log message:
update to a newer checkout of xsettingsd
don't use -Werror


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 13:42:28

Modified files:
	x11/spectrwm/patches: patch-Makefile 

Log message:
Add explicit -lxcb; newer linkers don't follow NEEDED. Fixes linking with LLD.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 13:51:09

Modified files:
	devel/argp-standalone: Makefile 

Log message:
use --std=gnu89
tweak COMMENT


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 13:53:20

Modified files:
	net/ladvd/patches: patch-configure_ac 

Log message:
don't use -Werror, fixes with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/04/16 14:14:17

Modified files:
	net/openvpn    : Makefile 
	net/openvpn/patches: patch-src_openvpn_tun_c 

Log message:
Fix unaligned access in openvpn to unbreak it on sparc64 and such platforms.
ok jca@ uwe@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/16 14:26:34

Modified files:
	share/man/man4 : ure.4 

Log message:
from brad: document rgephy


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 14:27:48

Modified files:
	databases/kyotocabinet: Makefile 
Added files:
	databases/kyotocabinet/patches: patch-kccommon_h 

Log message:
extend the existing ifdef that decides whether or not to use tr1 path/namespace
so that this has a chance with clang/libc++ arch

remove unneeded quotes from BROKEN lines in Makefile that make my eyes bleed
with syntax highlighting


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/16 14:32:14

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Use EL1 to clear lines when redrawing the leftmost pane, rather than
spaces.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/16 14:33:46

Modified files:
	usr.bin/tmux   : tmux.c 

Log message:
Memory leak, from David CARLIER.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 14:36:58

Modified files:
	devel/silc-toolkit: Makefile 
	devel/silc-toolkit/patches: patch-configure_ac 
	net/silc-client: Makefile 
	net/silc-client/patches: patch-configure_ac 
	net/silc-server: Makefile 
	net/silc-server/patches: patch-configure_ac 

Log message:
Fix SILC_ADD_CC_FLAGS to actually test that the compiler flags work,
they were testing the wrong thing. silc-toolkit diff from espie,
ports diff for all 3 from Brad.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 14:49:32

Added files:
	databases/db/v3/patches: patch-cxx_cxx_app_cpp 
	                         patch-cxx_cxx_table_cpp 
	                         patch-include_db_cxx_h 

Log message:
convert iostream.h to iostream, fix with libc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/16 14:50:06

Modified files:
	net/irssi-silc/patches: patch-configure_ac 

Log message:
apply espie's SILC_ADD_CC_FLAGS autoconf fix to irssi-silc


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/16 15:34:22

Modified files:
	graphics/ansilove: Makefile distinfo 

Log message:
Update ansilove to 3.0.5.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/16 17:58:12

Modified files:
	.              : security.html 

Log message:
add missing errata61.html link; spotted by pipe on freenode


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/16 18:31:42

Modified files:
	multimedia/transcode: Makefile 

Log message:
transcode tries to use twolame at runtime, not toolame.  Fix RDEP.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/16 18:37:30

Modified files:
	multimedia/transcode: Makefile 

Log message:
Point to the correct HOMEPAGE (upstream project on bitbucket).

Looks like the old domain / website isn't under upstream control any
more.

While here, reorder the Makefile a bit, and add an XXX about
MASTER_SITES, which is broken.

Noticed by fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/16 19:14:09

Log message:
    Import sshpass, a noninteractive ssh password provider.
    
    Useful when/if key-based auth can't be used.  Requested by Jiri B,
    tweaks & ok danj@
    
    Status:
    
    Vendor Tag:	jca
    Release Tags:	jca_20170417
    
    N ports/sysutils/sshpass/Makefile
    N ports/sysutils/sshpass/distinfo
    N ports/sysutils/sshpass/pkg/PLIST
    N ports/sysutils/sshpass/pkg/DESCR
    N ports/sysutils/sshpass/patches/patch-main_c
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/16 19:18:17

Modified files:
	sysutils       : Makefile 

Log message:
+sshpass


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/16 23:10:18

Modified files:
	devel/mercurial: Makefile distinfo 
	devel/mercurial/pkg: PLIST-main 

Log message:
update mercurial to 4.1.2.
initial diff from juanfra@, who is the new maintainer.
ok juanfra@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/16 23:11:03

Modified files:
	devel/tortoisehg: Makefile distinfo 
	devel/tortoisehg/pkg: PLIST 

Log message:
update tortoisehg to 4.1.2.
initial diff from juanfra@, who is the new maintainer.
ok juanfra@.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/17 00:40:32

Modified files:
	usr.bin/tmux   : server-client.c server-fn.c tmux.h tty.c 

Log message:
Remove a couple of redraw flags that no longer have any effect.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 01:20:59

Modified files:
	x11/gnome/gjs  : Makefile distinfo 
	x11/gnome/gjs/pkg: PLIST 

Log message:
update to gjs-1.48.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 01:29:28

Modified files:
	x11/gnome/libgweather: Makefile distinfo 

Log message:
update to libgweather-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 01:31:24

Modified files:
	x11/gnome/online-accounts: Makefile distinfo 
	x11/gnome/online-accounts/pkg: PLIST 

Log message:
update to gnome-online-accounts-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 01:31:50

Modified files:
	x11/remmina    : Makefile distinfo 
	x11/remmina/patches: patch-remmina-plugins_rdp_rdp_plugin_c 
Removed files:
	x11/remmina/patches: patch-cmake_FindVTE_cmake 
	                     patch-remmina_CMakeLists_txt 
	                     patch-remmina_external_tools_CMakeLists_txt 
	                     patch-remmina_src_remmina_ssh_plugin_c 

Log message:
update to remmina-1.1.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 01:51:41

Modified files:
	devel/vte3     : Makefile distinfo 
	devel/vte3/pkg : PLIST 

Log message:
update to vte-0.48.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 01:54:36

Modified files:
	x11/gnome/zenity: Makefile distinfo 

Log message:
update to zenity-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 02:09:57

Modified files:
	x11/gtksourceview3: Makefile distinfo 
	x11/gtksourceview3/pkg: PLIST 

Log message:
update to gtksourceview-3.24.1


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/17 02:10:45

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Don't bother moving the cursor for empty lines.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 02:49:23

Modified files:
	x11/fbpanel    : Makefile 
	x11/fbpanel/patches: patch-exec_xlogout 

Log message:
revert previous; xdm mention was in a line which was removed in the patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 03:23:55

Modified files:
	devel/libgtop2 : Makefile distinfo 
	devel/libgtop2/pkg: PLIST 

Log message:
update to libgtop-2.36.0 (still broken, but a more recent base to fix it on)


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/17 03:25:50

Modified files:
	www/hiawatha   : Makefile distinfo 
	www/hiawatha/patches: patch-man_hiawatha_1_in 
	                      patch-src_serverconfig_c patch-src_tls_c 

Log message:
Update to hiawatha 10.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 03:35:37

Modified files:
	x11/gnome/desktop: Makefile distinfo 
	x11/gnome/desktop/patches: patch-libgnome-desktop_Makefile_in 
	                           patch-libgnome-desktop_gnome-desktop-thumbnail_c 

Log message:
Update to gnome-desktop-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 03:36:12

Modified files:
	meta/gnome     : Makefile 

Log message:
Introducing GNOME 3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 03:46:21

Modified files:
	x11/gnome/calculator: Makefile distinfo 
	x11/gnome/calculator/pkg: PLIST 

Log message:
update to gnome-calculator-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/17 03:46:45

Added files:
	devel/libgtop2/patches: patch-sysdeps_openbsd_procmem_c 

Log message:
barf-inducing fix for clang, which doesn't like stuff that vaguely
looks like prototypes (which is what you get when including ~kernel
stuff in userland.

okay jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 04:00:48

Modified files:
	multimedia/transcode: Makefile 

Log message:
unbreak MASTER_SITES


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:03:19

Modified files:
	x11/gnome/gvfs : Makefile distinfo 
	x11/gnome/gvfs/pkg: PLIST-main 

Log message:
Update to gvfs-1.32.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:24:27

Modified files:
	x11/gnome/tracker: Makefile distinfo 
	x11/gnome/tracker/patches: patch-configure 
	                           patch-src_libtracker-sparql_Makefile_in 
	x11/gnome/tracker/pkg: PLIST 
Removed files:
	x11/gnome/tracker/patches: 
	                           patch-src_tracker-needle_tracker-tags-view_vala 
	                           patch-src_tracker-preferences_tracker-preferences_vala 

Log message:
Update to meta-tracker-1.12.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/04/17 04:29:01

Modified files:
	sys/netinet6   : in6.c 

Log message:
We need to update the ia6_updatetime when changing the vltime/pltime
vio ioctl(2). Otherwise ifconfig shows the wrong times since
vltime/pltime are calculated from this value on export.

The handling of router advertisements does the right thing.
OK bluhm


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:35:15

Modified files:
	x11/gnome/nautilus: Makefile distinfo 
	x11/gnome/nautilus/patches: 
	                            patch-src_nautilus-canvas-container_c 
	                            patch-src_nautilus-ui-utilities_c 
	x11/gnome/nautilus/pkg: PLIST 

Log message:
Update to nautilus-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:40:28

Modified files:
	x11/gnome/settings-daemon: Makefile distinfo 
	x11/gnome/settings-daemon/pkg: PLIST 
Added files:
	x11/gnome/settings-daemon/patches: patch-configure 

Log message:
Update to gnome-settings-daemon-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:45:38

Modified files:
	devel/libgee   : Makefile distinfo 

Log message:
Update to libgee-0.20.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 04:50:29

Modified files:
	x11/gnome/system-monitor: Makefile distinfo 
	x11/gnome/system-monitor/pkg: PLIST 

Log message:
update to gnome-system-monitor-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:51:02

Modified files:
	x11/gnome/session: Makefile distinfo 
	x11/gnome/session/patches: patch-gnome-session_main_c 

Log message:
Update to gnome-session-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:54:53

Modified files:
	x11/gnome/weather: Makefile distinfo 
	x11/gnome/weather/pkg: PLIST 

Log message:
Update to gnome-weather-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 04:57:08

Modified files:
	www/epiphany   : Makefile distinfo 
	www/epiphany/pkg: PLIST 
Removed files:
	www/epiphany/patches: patch-lib_ephy-profile-migrator_c 

Log message:
update to epiphany-3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:58:48

Modified files:
	x11/gnome/power-manager: Makefile distinfo 

Log message:
Update to gnome-power-manager-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 04:59:55

Modified files:
	x11/gnome/color-manager: Makefile distinfo 
	x11/gnome/color-manager/patches: patch-configure 

Log message:
Update to gnome-color-manager-3.24.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/17 05:02:31

Modified files:
	usr.bin/ssh    : Makefile.inc 
	regress/usr.bin/ssh/unittests: Makefile.inc 
	regress/usr.bin/ssh/misc/kexfuzz: Makefile 

Log message:
Change COMPILER_VERSION tests which limited additional warnings to gcc4
to instead skip them on gcc3 as clang can handle -Wpointer-sign and
-Wold-style-definition.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 05:18:36

Modified files:
	x11/gnome/file-roller: Makefile distinfo 
	x11/gnome/file-roller/pkg: PLIST 

Log message:
update to file-roller-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 05:20:21

Modified files:
	x11/gnome/control-center: Makefile distinfo 
	x11/gnome/control-center/patches: 
	                                  patch-panels_user-accounts_Makefile_in 
Added files:
	x11/gnome/control-center/patches: 
	                                  patch-panels_display_cc-night-light-widget_c 
Removed files:
	x11/gnome/control-center/patches: 
	                                  patch-panels_info_cc-info-panel_c 

Log message:
Update to gnome-control-center-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 05:20:30

Modified files:
	x11/gnome/eog  : Makefile distinfo 
Removed files:
	x11/gnome/eog/patches: patch-src_eog-exif-util_c 

Log message:
update to eog-3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 05:29:23

Modified files:
	x11/gnome/music: Makefile distinfo 
	x11/gnome/music/pkg: PLIST 

Log message:
Update to gnome-music-3.24.1.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 05:41:10

Log message:
    Import gtef-2.0.0.
    
    Gtef is a library that eases the development of GtkSourceView-based text editors
    and IDEs.
    
    ok jasper@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170417
    
    N ports/x11/gnome/gtef/Makefile
    N ports/x11/gnome/gtef/distinfo
    N ports/x11/gnome/gtef/pkg/DESCR
    N ports/x11/gnome/gtef/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 05:41:44

Modified files:
	x11/gnome      : Makefile 

Log message:
+gtef


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 05:41:59

Modified files:
	x11/gnome/latexila: Makefile distinfo 

Log message:
Update to latexila-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 05:42:20

Modified files:
	graphics/evince: Makefile distinfo 

Log message:
update to evince-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 05:59:53

Modified files:
	databases/evolution-data-server: Makefile distinfo 
	databases/evolution-data-server/pkg: DESCR PLIST 
Added files:
	databases/evolution-data-server/patches: patch-CMakeLists_txt 
	                                         patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Update to evolution-data-server-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 06:04:22

Modified files:
	x11/gnome/photos: Makefile distinfo 
	x11/gnome/photos/pkg: PLIST 
Added files:
	x11/gnome/photos/patches: patch-src_egg-task-cache_c 

Log message:
Update to gnome-photos-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 06:05:16

Modified files:
	x11/gnome/clocks: Makefile distinfo 

Log message:
Update to gnome-clocks-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 06:18:06

Modified files:
	x11/gnome/totem: Makefile distinfo 

Log message:
Update to totem-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 06:29:36

Modified files:
	x11/gnome/terminal: Makefile distinfo 
	x11/gnome/terminal/pkg: PLIST 

Log message:
update to gnome-terminal-3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 06:32:04

Modified files:
	x11/gnome/calendar: Makefile distinfo 

Log message:
update to gnome-calendar-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 06:36:26

Modified files:
	textproc/gtkspell3: Makefile distinfo 

Log message:
Update to gtkspell3-3.0.9.
- drop the gettext MODULE


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/17 06:52:00

Modified files:
	usr.bin/mandoc : mdoc_html.c mdoc_macro.c mdoc_man.c 
	                 mdoc_markdown.c mdoc_term.c 

Log message:
Fix handling of trailing punctuation in .Lk.
This macro is unusual in so far as trailing punction needs to remain
inside the scope because it must be inside, not after the display
of long URIs in terminal output mode.
Improves formatting of fw_update(1), help(1), less(1), sendbug(1),
acx(4), inet6(4), ipsec(4), oce(4), isakmpd.conf(5), afterboot(8),
release(8), traceroute(8).


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 06:52:33

Modified files:
	x11/gnome/mutter: Makefile distinfo 
	x11/gnome/mutter/pkg: PLIST 
Added files:
	x11/gnome/mutter/patches: patch-src_compositor_compositor_c 
	                          patch-src_core_main_c 

Log message:
update to mutter-3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 06:52:56

Modified files:
	x11/gnome/shell: Makefile distinfo 
	x11/gnome/shell/patches: patch-js_ui_screenShield_js 
	x11/gnome/shell/pkg: PLIST 

Log message:
update to gnome-shell-3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 06:53:11

Modified files:
	x11/gnome/shell-extensions: Makefile distinfo 
	x11/gnome/shell-extensions/pkg: PLIST 

Log message:
update to gnome-shell-extensions-3.24.1


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/17 06:54:48

Modified files:
	regress/misc   : Makefile 

Log message:
Skip objc tests with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 06:54:51

Modified files:
	x11/gnome/terminal: Makefile 
Added files:
	x11/gnome/terminal/patches: patch-src_terminal-screen_c 

Log message:
revert two upstream commits that prevent spawning a shell; this is not a fix
but it makes gnome-terminal usable again.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 07:17:07

Modified files:
	x11/gnome/gdm  : Makefile distinfo 
	x11/gnome/gdm/patches: patch-configure_ac 
	                       patch-daemon_gdm-launch-environment_c 
	                       patch-daemon_gdm-manager_c 
	                       patch-daemon_gdm-session_c 

Log message:
Update to gdm-3.24.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/17 07:26:30

Modified files:
	usr.bin/mandoc : mdoc_man.c 

Log message:
implement display of long .Lk URIs to match -Tascii


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/17 07:29:20

Modified files:
	regress/usr.bin/mandoc/mdoc/Lk: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 

Log message:
test display of long URIs


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 07:47:12

Modified files:
	www/nghttp2    : Makefile distinfo 

Log message:
update to nghttp2-1.21.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 07:49:06

Modified files:
	x11/gnome/documents: Makefile distinfo 

Log message:
Update to gnome-documents-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 07:51:04

Modified files:
	x11/gnome/sushi: Makefile 

Log message:
Regen WANTLIB to unbreak.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 07:58:45

Modified files:
	devel          : Makefile 
Removed files:
	devel/spidermonkey: Makefile distinfo 
	devel/spidermonkey/patches: 
	                            patch-assembler_jit_ExecutableAllocator_h 
	                            patch-assembler_wtf_Platform_h 
	                            patch-config_config_mk 
	                            patch-config_milestone_pl 
	                            patch-configure 
	                            patch-ctypes_libffi_configure 
	                            patch-ctypes_libffi_src_mips_ffi_c 
	                            patch-ctypes_libffi_src_mips_ffitarget_h 
	                            patch-ctypes_libffi_src_x86_freebsd_S 
	                            patch-gc_RootMarking_cpp 
	                            patch-jsapi_cpp patch-jscpucfg_h 
	devel/spidermonkey/pkg: DESCR PLIST 

Log message:
Remove spidermonkey (mojz-24) now that nothing uses it anymore

ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 07:59:38

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
register spidermonkey removal


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 08:18:44

Modified files:
	usr.sbin/syslogd: syslogd.8 syslogd.c 

Log message:
Add syslogd(8) option -r to suppress the summary line for pipe and
remote loghost as they are most commonly used for automated log
processing.  With -rr the "last message repeated" feature can be
disabled completely.
OK sthen@ deraadt@ jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:20:17

Modified files:
	devel/llvm     : Makefile 
	devel/llvm/patches: patch-tools_lld_ELF_DriverUtils_cpp 

Log message:
Disable colored diagnostics.

from Brad (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:21:13

Modified files:
	multimedia/libmatroska: Makefile distinfo 

Log message:
Update to libmatroska-1.4.7.

from Brad (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:24:49

Modified files:
	x11/gnome/initial-setup: Makefile distinfo 
	x11/gnome/initial-setup/patches: patch-configure_ac 

Log message:
Update to gnome-initial-setup-3.24.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 08:27:46

Modified files:
	regress/usr.sbin/syslogd: Client.pm 
Added files:
	regress/usr.sbin/syslogd: args-repeat.pl 

Log message:
Test syslogd(8) "last message repeated" feature and -r option.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/17 08:31:23

Modified files:
	usr.bin/ssh    : utf8.c 

Log message:
Recognize nl_langinfo(CODESET) return values "646" and "" as aliases
for "US-ASCII", useful for different versions of NetBSD and Solaris.
Found by dtucker@ and by Tom G. Christensen <tgc at jupiterrise dot com>.
OK dtucker@ deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/17 08:32:55

Modified files:
	archivers/lha  : Makefile 
Added files:
	archivers/lha/patches: patch-src_getopt_long_c 

Log message:
mark getopt_long variables properly, so that clang will be happy with the
libc version. did not ditch this getopt_long 'cause it's apparently different
from GNU semantics slightly.

okay naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:37:40

Modified files:
	mail/evolution : Makefile distinfo 
	mail/evolution/pkg: PLIST 
Added files:
	mail/evolution/patches: patch-CMakeLists_txt 
	                        patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Update to evolution-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 08:40:01

Modified files:
	devel/p5-Test-Script: Makefile distinfo 

Log message:
update p5-Test-Script to 1.18


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:45:58

Modified files:
	x11/gnome/builder: Makefile distinfo 
	x11/gnome/builder/patches: patch-libide_util_ide-posix_c 
	x11/gnome/builder/pkg: PLIST 
Added files:
	x11/gnome/builder/patches: patch-doc_Makefile_in 
	                           patch-libide_Makefile_in 

Log message:
Update to gnome-builder-3.24.1 to unbreak.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:55:29

Modified files:
	mail/evolution-ews: Makefile distinfo 
	mail/evolution-ews/pkg: PLIST 
Added files:
	mail/evolution-ews/patches: 
	                            patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Update to evolution-ews-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 08:58:20

Modified files:
	net/telepathy/folks: Makefile 

Log message:
Temporarily --disable-modular-tests until we figure out all the undef refs
to e-d-s private symbols.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 09:03:29

Modified files:
	x11/gnome/maps : Makefile distinfo 
	x11/gnome/maps/pkg: PLIST 

Log message:
Update to gnome-maps-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/17 09:43:02

Modified files:
	x11/xfce4/xfce4-whiskermenu: Makefile distinfo 

Log message:
Bugfix update to xfce4-whiskermenu 1.7.2


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/17 09:53:21

Modified files:
	gnu/lib        : Makefile 
	gnu/usr.bin    : Makefile 
	gnu/usr.bin/clang: Makefile.inc 
	include        : Makefile 
	lib/libcompiler_rt: Makefile 
	lib/libcxx     : Makefile 
	lib/libcxxabi  : Makefile 
	share/mk       : bsd.own.mk 

Log message:
Change build infrastructure to allow building both gcc and clang.  This
doesn't actually flip the switch yet, so aarch64 continues to be the only
architecture for which we build clang.

ok jsg@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 10:02:31

Modified files:
	security/p5-IO-Socket-SSL: Makefile distinfo 

Log message:
update p5-IO-Socket-SSL to 2.048


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/17 10:03:15

Modified files:
	usr.sbin/ntpd  : ntp_dns.c 

Log message:
don't manipulate hdr.len, it's used internally by libutil now; ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/17 10:36:35

Modified files:
	lib/libc/stdlib: malloc.c 

Log message:
whitespace fixes


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/17 10:37:39

Modified files:
	usr.sbin/ypldap: ypldap_dns.c 

Log message:
don't manipulate hdr.len, it's used internally by libutil now; ok florian@


CVSROOT:	/cvs
Module name:	www
Changes by:	kettenis@cvs.openbsd.org	2017/04/17 10:42:06

Modified files:
	faq            : current.html 

Log message:
Document build infrastructure changes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/17 10:47:51

Modified files:
	textproc/fzy   : Makefile distinfo 
	textproc/fzy/patches: patch-Makefile 

Log message:
Update fzy to 0.9, and honour CC.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 10:53:25

Modified files:
	mail/evolution-rss: Makefile 
	mail/evolution-rss/patches: patch-src_rss_c 

Log message:
Unbreak with the new evolution stack (from upstream).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/17 11:21:49

Modified files:
	lang/ghc       : Makefile 
Added files:
	lang/ghc/patches: patch-compiler_main_SysTools_hs 

Log message:
give the system a chance to figure out clang (their detection method is lame
as the patch shows).

you'll need to wait for a bootstrap/rebootrap yourself so this is actually
effective.

(should cut down *a lot* on the insane number of warnings produced due to
unknown compile options on a clang system)

okay kili@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 11:28:13

Modified files:
	net/telepathy/folks: Makefile distinfo 

Log message:
use git master for this port as there's been lots of fixes upstream, but no release.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/04/17 11:29:13

Modified files:
	net/nagios/nagios: Makefile distinfo 
	net/nagios/nagios/patches: patch-configure 
	                           patch-include_config_h_in 
	                           patch-sample-config_cgi_cfg_in 
	                           patch-sample-config_httpd_conf_in 
	                           patch-sample-config_nagios_cfg_in 
	net/nagios/nagios/pkg: PLIST-web README-main 

Log message:
Update net/nagios/nagios to version 4.3.1

- add archivers/unzip as BUILD_DEPENDS
- regen and adapt patches
- use rcctl in README-main and reflect switch to apache2

Feedback and OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 11:29:46

Modified files:
	audio/pulseaudio: Makefile 

Log message:
fix fix double word in comment


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 11:51:26

Removed files:
	x11/gnome/pinpoint: Makefile distinfo 
	x11/gnome/pinpoint/pkg: DESCR PLIST 

Log message:
Remove pinpoint, development has stopped and there are many alternatives
in-tree.

ok jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 11:51:49

Modified files:
	x11/gnome      : Makefile 

Log message:
-pinpoint


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 11:54:12

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register pinpoint removal.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/17 11:57:17

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Don't obsolete spidermonkey; there's another package named this way.

ok jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 11:57:42

Removed files:
	x11/gnome/anjuta: Makefile distinfo 
	x11/gnome/anjuta/patches: patch-configure 
	x11/gnome/anjuta/pkg: DESCR PLIST 

Log message:
remove anjuta, development has effectively ceased upstream. there are other
alternatives that are actively being development e.g. gnome-builder.

ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 11:57:52

Modified files:
	x11/gnome      : Makefile 

Log message:
-anjuta


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 11:58:31

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
register anjuta removal


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/17 12:07:15

Modified files:
	lib/libc/stdlib: malloc.3 

Log message:
consictently use .Dv NULL and a few other tweaks; ok schwarze@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/04/17 12:29:11

Modified files:
	lang/ruby/2.4  : Makefile 
	lang/ruby/2.4/patches: patch-configure 

Log message:
Fix heap overflow by renaming HEAP_ALIGN_LOG to HEAP_PAGE_ALIGN_LOG in configure.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/17 12:31:08

Modified files:
	usr.sbin/dhcpd : dhcpd.h packet.c 

Log message:
Use better types for checksum() parameters and local var from
dhclient. Eliminate extra prototypes for checksum() and wrapsum().


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 13:45:01

Modified files:
	distrib/sets   : checkflist maketars 
	distrib/sets/lists/base: md.alpha md.amd64 md.armv7 md.hppa 
	                         md.i386 md.landisk md.loongson 
	                         md.luna88k md.macppc md.octeon md.sgi 
	                         md.socppc md.sparc64 mi 
	distrib/sets/lists/comp: md.amd64 md.i386 mi 
	distrib/sets/lists/man: mi 
Added files:
	distrib/sets/lists/comp: clang.amd64 clang.i386 gcc.alpha 
	                         gcc.amd64 gcc.armv7 gcc.hppa gcc.i386 
	                         gcc.landisk gcc.loongson gcc.luna88k 
	                         gcc.macppc gcc.octeon gcc.sgi 
	                         gcc.socppc gcc.sparc64 

Log message:
create a gross mechanism that can handle gcc-only, clang-only,
and gcc+clang architectures
with kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/17 13:49:40

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
	math           : Makefile 
Removed files:
	math/libneural : Makefile distinfo 
	math/libneural/pkg: DESCR PLIST 

Log message:
Remove libneural: dates from the turn of the century, abandoned,
master site unreachable, nothing in ports uses it.  ok jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	pascal@cvs.openbsd.org	2017/04/17 13:58:53

Modified files:
	gnu/usr.bin/clang/clang: Makefile 
	gnu/usr.bin/clang/clang-tblgen: Makefile 
	gnu/usr.bin/clang/include/llvm/Config: config.h 
	gnu/usr.bin/clang/llc: Makefile 
	gnu/usr.bin/clang/lld: Makefile 
	gnu/usr.bin/clang/llvm-tblgen: Makefile 

Log message:
Take a more radical approach to disabling colours: pretend we don't
HAVE_TERMINFO in our local config.h.  Some of the lower levels of LLVM
don't seem to respect our default setting.

As a result, delete the -ltermlib dependency.

Note that this breaks -fcolor-diagnostics=auto.  However, fixing the whole
codebase is out of scope for now ...

Prompted by an instance found in the AsmParser by deraadt@

ok kettenis@ patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/17 14:04:26

Modified files:
	usr.bin/mandoc : mansearch.c mansearch.h 

Log message:
Restore -kO Nd, -kO Nm, -kO sec, and -kO arch to working order.
They got broken in the SQLite removal.
As opposed to the rest of -kO, they are no longer very useful,
but they are certainly not supposed to fail assertions.
Issue reported by Gonzalo Tornaria <tornaria at cmat dot edu dot uy>.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 14:22:14

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
matthieu@ observes % pax (without any arguments) hits pledge violation,
because it tries MTIOCTOP against stdin, the tty.  It is very inconvenient
to use isatty to distinguish this difference in userland, so return ENOTTY
for tty devices.
ok natano


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 14:45:38

Modified files:
	net/libproxy   : Makefile 
	net/libproxy/patches: patch-libproxy_CMakeLists_txt 

Log message:
fix net/libproxy with libc++ by defining _POSIX_C_SOURCE=200809L and _BSD_SOURCE
clues from kettenis, espie


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 14:48:21

Modified files:
	sys/netinet    : udp_usrreq.c 

Log message:
Use the address family passed down with pr_input to simplify
udp_input().
OK florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 14:59:35

Modified files:
	sys/netinet    : tcp_input.c 

Log message:
Use the address family passed down with pr_input to simplify
tcp_input().
OK florian@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 15:05:21

Modified files:
	textproc/aspell/core/patches: patch-configure 

Log message:
regen patch


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/17 15:10:03

Modified files:
	sys/netinet    : raw_ip.c 
	sys/netinet6   : raw_ip6.c 

Log message:
The raw ip input functions are called from several places.  Use the
address family passed down with pr_input to check that the correct
one is used.
OK florian@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 15:19:22

Modified files:
	textproc/aspell/core: Makefile 
Added files:
	textproc/aspell/core/patches: patch-interfaces_cc_aspell_h 
	                              patch-prog_aspell_cpp 
	                              patch-prog_checker_string_hpp 

Log message:
Workaround failure with aspell build seen with clang. Upstream devel tree
has a different workaround which requires regenerating some files, so using
the one from FreeBSD for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/17 15:43:15

Modified files:
	editors/elvis  : Makefile 
	editors/elvis/patches: patch-configure patch-ctags_c 
	                       patch-doc_ctags_man patch-move_c 
Added files:
	editors/elvis/patches: patch-draw_c patch-osunix_ostext_c 
	                       patch-region_c patch-window_c 
Removed files:
	editors/elvis/patches: patch-doc_elvis_man patch-doc_ref_man 

Log message:
Updates from Donovan Watteau, who takes maintainer. From Donovan's mail:

* Fix a startup crash that's extremely easy to trigger on OpenBSD
(patch-draw_c).

* Various fixes from a forked Github version (there was no official
elvis release since 2004), clang warns about most of them.

* Remove some questionable/broken/dangerous features: backtick
support in filenames, WYSIWYG for nroff/tex files, and
HTTP/FTP support.  Looking at the code, I'd feel better having
less features, here.  Please complain if you really want them.

* Remove dead FTP mirrors from MASTER_SITES, and use an HTTP server
instead.

* Remove some previous patches of mine which only dealt with
whitespace in man pages: fixing that was just useless noise.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 15:45:34

Modified files:
	etc/mtree      : 4.4BSD.dist 

Log message:
skip mtree creation of two include dirs.  gcc3 may still use them, but
if so gcc3 should create them itself.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 15:48:26

Modified files:
	libexec/ftpd   : monitor.c 

Log message:
freezero() can be used here


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 15:49:01

Modified files:
	libexec/ftpd   : ftpcmd.y 

Log message:
memset() of password field should be explicit_bzero().
[Not using freezero() in yacc files yet]


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 15:55:20

Modified files:
	lib/libskey    : skeylogin.c 

Log message:
use freezero()


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 15:58:27

Modified files:
	usr.sbin/httpd : server.c 

Log message:
some freezero() calls


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/17 16:42:57

Modified files:
	bin/mt         : mt.1 

Log message:
/dev/rmt* is no longer relevant; from miod


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/04/17 18:18:51

Modified files:
	sys/dev/usb    : if_ure.c 

Log message:
Rearrange ure_iff to resemble other drivers a bit more.
from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/17 18:31:54

Added files:
	graphics/png2ico/patches: patch-png2ico_cpp 

Log message:
no idea how this worked with g++, where it got exit and malloc
obvious fix for clang, include <cstdlib>


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/04/17 19:24:47

Modified files:
	sys/net        : pipex.c 

Log message:
Fix pipex(4) not to cause panics on strict alignment architectures.

ok claudio


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 19:45:35

Modified files:
	usr.bin/vi/cl  : cl_screen.c 
	usr.bin/vi/common: cut.c exf.c key.c log.c main.c options.c 
	                   screen.c seq.c 
	usr.bin/vi/ex  : ex_bang.c ex_init.c ex_read.c ex_script.c 
	                 ex_subst.c ex_tag.c 
	usr.bin/vi/vi  : v_init.c v_paragraph.c vi.c vs_msg.c 

Log message:
free(NULL) is ok so use it; from Michael W. Bombardieri


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/17 20:13:26

Log message:
    Import py-podcastparser-0.6.1 from Tim Meunier, ok/tweaks sthen@
    
    podcast parser project is a library from the gPodder project to provide
    an easy and reliable way of parsing RSS- and Atom-based podcast feeds
    in Python.
    
    Status:
    
    Vendor Tag:	danj
    Release Tags:	danj_20170417
    
    N ports/textproc/py-podcastparser/Makefile
    N ports/textproc/py-podcastparser/distinfo
    N ports/textproc/py-podcastparser/pkg/DESCR
    N ports/textproc/py-podcastparser/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/17 20:14:34

Modified files:
	textproc       : Makefile 

Log message:
+ py-podcastparser


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 20:15:50

Modified files:
	usr.bin/openssl: apps.c dgst.c s_client.c s_server.c 

Log message:
use freezero() instead of 4-line conditional explicit_bzero + free


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 20:16:48

Modified files:
	distrib/sets/lists/comp: clang.amd64 clang.i386 md.amd64 md.i386 

Log message:
put clang binaries into clang set


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 20:20:50

Modified files:
	usr.bin/signify: signify.c 

Log message:
use freezero() instead of explicit_bzero + free


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 20:29:56

Modified files:
	sbin/iked      : pfkey.c 
	sbin/ipsecctl  : pfkey.c 
	usr.sbin/bgpd  : pfkey.c 
	usr.sbin/ldpd  : pfkey.c 
	usr.sbin/sasyncd: pfkey.c 

Log message:
use freezero()


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 21:09:58

Modified files:
	distrib/sets/lists/base: md.alpha md.amd64 md.armv7 md.hppa 
	                         md.i386 md.landisk md.loongson 
	                         md.luna88k md.macppc md.octeon md.sgi 
	                         md.socppc md.sparc64 
	distrib/sets/lists/comp: clang.amd64 clang.i386 gcc.alpha 
	                         gcc.amd64 gcc.armv7 gcc.hppa gcc.i386 
	                         gcc.landisk gcc.loongson gcc.luna88k 
	                         gcc.macppc gcc.octeon gcc.sgi 
	                         gcc.socppc gcc.sparc64 mi 

Log message:
sort


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/04/17 21:21:48

Modified files:
	share/man/man4 : pipex.4 

Log message:
Including sys/types.h and net/if.h are needed to use pipex(4).


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/04/17 21:25:22

Modified files:
	usr.sbin/npppd/npppd: npppd.c 

Log message:
Delete #include lines which are unnecessary.


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/04/17 21:28:04

Modified files:
	usr.sbin/npppd/npppd: npppd.c 

Log message:
Warn if pipex(4) is disabled but the configuration uses it.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 21:54:27

Modified files:
	usr.sbin/identd: identd.c 

Log message:
removed unused function; from Edgar Pettijohn


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/17 22:06:21

Modified files:
	lib/libutil    : pkcs5_pbkdf2.c 

Log message:
use freezero() instead of explicit_bzero+free


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/17 22:38:15

Modified files:
	devel/vte3     : Makefile 

Log message:
missing bdep on gperf


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/17 23:24:47

Modified files:
	distrib/sets/lists/base: md.arm64 
	distrib/sets/lists/comp: md.arm64 
Added files:
	distrib/sets/lists/comp: clang.arm64 

Log message:
add a clang comp list for arm64


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/04/18 01:13:39

Modified files:
	distrib/sets   : makelocatedb 

Log message:
same hack logic as maketars. noticed by landry@/semarie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 01:17:28

Modified files:
	sysutils/gamin : Makefile 
Added files:
	sysutils/gamin/patches: patch-server_gam_eq_c 

Log message:
gcc doesn't protest, but it's a trap^Wa bug.
okay aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/18 01:55:25

Modified files:
	x11/xfce4/xfce4-xkb: Makefile 

Log message:
Explicitely list libwnck in LDEP


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/18 02:54:17

Modified files:
	news/multimail : Makefile 
	news/multimail/patches: patch-interfac_main_cc 

Log message:
Honour CXX and CXXFLAGS, fix build with Clang (convert new.h to new).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 03:09:25

Modified files:
	net/gpodder    : Makefile distinfo 
	net/gpodder/pkg: PLIST 

Log message:
update to gpodder-3.9.3, from maintainer trondd at kagu-tsuchi/com


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 03:13:20

Modified files:
	net/libproxy   : Makefile 
	net/libproxy/patches: patch-libproxy_CMakeLists_txt 

Log message:
Switch to a simpler clang fix from FreeBSD: just stop defining _POSIX_C_SOURCE
rather than raising the version, and that way _BSD_SOURCE isn't needed either.
Pointed out by ajacoutot.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 03:31:59

Modified files:
	net/bird       : Makefile 
	net/bird/patches: patch-sysdep_bsd_sysio_h 

Log message:
enable md5sig


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/18 05:14:10

Modified files:
	graphics/slop  : Makefile distinfo 
	graphics/slop/pkg: PLIST 

Log message:
update slop from 4.1.16 to 5.3.37

tweaks from jca@, ok and tweaks sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/18 05:16:10

Modified files:
	graphics/maim  : Makefile distinfo 

Log message:
update maim from 3.4.43 to 4.4.62

ok/tweaks sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/18 06:02:25

Modified files:
	graphics/nomacs: Makefile distinfo 

Log message:
update nomacs 3.6.1

major bump hint and ok sthen@ also ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/18 06:08:59

Modified files:
	geo/qgis       : Makefile distinfo 
	geo/qgis/patches: patch-CMakeLists_txt patch-src_app_qgisapp_cpp 
	                  patch-src_core_CMakeLists_txt 
	                  patch-src_helpviewer_CMakeLists_txt 
	geo/qgis/pkg   : PLIST 
Removed files:
	geo/qgis/patches: patch-src_server_qgsserver_cpp 

Log message:
Bugfix update to QGIS 2.18.6.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/04/18 06:42:29

Modified files:
	lib/libcxx/include: stdio.h 

Log message:
wipe some more macros that do not belong in C++ forwarding headers.
(breaks lincity-ng)
okay kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 07:09:23

Modified files:
	archivers/zopfli: Makefile distinfo 
Added files:
	archivers/zopfli/patches: patch-Makefile 
Removed files:
	archivers/zopfli/patches: patch-makefile 

Log message:
update to zopfli-1.0.1


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/04/18 07:21:36

Modified files:
	share/man/man8 : release.8 

Log message:
Cleaning out /usr/obj is necessary the first time due to permission issues.
Make this more clearly visible and also state explicitly that this is no
longer necessary after completing a full release build.

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	gerhard@cvs.openbsd.org	2017/04/18 07:27:55

Modified files:
	sys/dev/usb    : if_umb.c if_umb.h mbim.h 

Log message:
Support packet aggregation for umb(4) on tx.

tested by bluhm@, ststp@ and Bryan Vyhmeister.
ok bluhm@ ststp@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 07:34:04

Modified files:
	usr.bin/tmux   : tty-keys.c 

Log message:
Include client name in key logging.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/18 07:41:32

Modified files:
	sys/kern       : vfs_bio.c 

Log message:
ensure the buffer cache backs off all the way with the correct type
of memory, handling the fact that both queues are actually in dma
space when not flipping buffers high


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/18 07:44:03

Modified files:
	sbin/dhclient  : bpf.c 
	usr.sbin/dhcpd : bpf.c 

Log message:
After 11 years of pondering about it I think that brookdavis@freebsd.org
had it correct. Don't BPF_WORDALIGN() the value for the number of
bytes read() into the buffer. This could theoretically cause the
processing of 1 - 3 more bytes than were read.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 07:50:32

Modified files:
	www/casperjs   : Makefile distinfo 
	www/casperjs/pkg: PLIST 

Log message:
update to casperjs-1.1.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 07:53:09

Modified files:
	net/icinga/web2-module-director: Makefile distinfo 
	net/icinga/web2-module-director/pkg: PLIST 

Log message:
update to icingaweb2-module-director-1.3.1


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/18 07:57:12

Modified files:
	usr.bin/mandoc : mansearch.c 

Log message:
Fix previous: i forgot explicit NUL termination;
noticed by Gonzalo <Tornaria at cmat dot edu dot uy>, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/18 07:59:09

Modified files:
	sbin/dhclient  : bpf.c dhcpd.h packet.c 
	usr.sbin/dhcpd : bpf.c dhcpd.h packet.c 

Log message:
Tweak parameters to decode_*, add a check or two, and thus gain most of the
sanity improvements reyk@ recently put into dhcrelay to ensure no more than
the captured packet is processed.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/18 08:03:08

Modified files:
	share/mk       : bsd.own.mk 

Log message:
ship clang with i386 and amd64.  It does not become the main compiler YET.
ok kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 08:16:48

Modified files:
	usr.bin/file   : file.c magic-load.c magic-test.c text.c 

Log message:
Style nits; no binary change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 08:53:15

Added files:
	games/kobodeluxe/patches: patch-graphics_window_cpp 

Log message:
make it const-correct, as libcxx has overloaded strstr


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/18 09:04:35

Modified files:
	usr.bin/mandoc : mansearch.c 

Log message:
The apropos(1) manual still documents the unary -i operator for
regular expression search terms, but it appears that somewhere
along the way, the implementation got lost, so restore it.
Bug found while investigating other reports from Gonzalo Tornaria.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/04/18 09:12:00

Modified files:
	usr.sbin/pkg_add/OpenBSD: Error.pm 

Log message:
recent perl have signal names we don't have, protect against that.
also, allow child_error to take a parameter so that this can be used to decode
an arbitrary wait() result.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/18 09:15:10

Modified files:
	etc/mtree      : 4.4BSD.dist 

Log message:
installation of the compiler creates include/g++ if needed; mtree does not
need to do this.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/18 09:26:33

Modified files:
	usr.bin/mandoc : main.c 

Log message:
Delete the undocumented and unimplemented man(1) -i (interactive
apropos) option.  It will not be implemented.  Featurism isn't the
plan for the future; simplicity is.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 09:27:47

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Do not check for BCE for a background colour that isn't needed, use
colour 8 instead.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/18 09:35:24

Modified files:
	lib/libunwind/include: __libunwind_config.h 
	lib/libunwind/src: DwarfInstructions.hpp DwarfParser.hpp 
	                   Registers.hpp UnwindCursor.hpp 
	                   UnwindRegistersRestore.S 
	                   UnwindRegistersSave.S libunwind.cpp 

Log message:
Add sparc64 support.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 09:37:27

Modified files:
	x11/fvwm2/patches: patch-configure 

Log message:
wrong return type is an error for clang, so catching -Werror that way doesn't
work...

fixes configure for clang, let's see if build works.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 09:44:17

Modified files:
	usr.bin/tmux   : format.c tmux.1 tmux.h tty.c 

Log message:
Add a format for number of bytes writtent to client, useful for debugging.


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/18 09:46:44

Modified files:
	lib/libc/stdlib: malloc.c 

Log message:
don't forget to fill in canary bytes for posix_memalign(3); reported by
and ok jeremy@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/18 09:51:46

Modified files:
	.              : ftp.html httpslist 
	build          : mirrors.dat 
	openbgpd       : ftp.html 
	openntpd       : portable.html 
	openssh        : ftp.html portable.html 

Log message:
https for openbsd.mirror.garr.it


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/18 09:59:56

Modified files:
	usr.bin/mandoc : main.c 

Log message:
Now that global -i is gone, pass -i through to the apropos(1)
expression parser, such that "apropos -i 'Nm~dump\>'"
finds kdump(1) and WCOREDUMP(2) and you don't need
to type the counter-intuitive "apropos -- -i 'Nm~dump\>'".


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/18 10:21:06

Modified files:
	share/man/man8 : release.8 

Log message:
spelling fix;


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/18 10:28:50

Modified files:
	games/supertux : Makefile distinfo 
	games/supertux/patches: patch-CMakeLists_txt 
	                        patch-external_squirrel_CMakeLists_txt 
	                        patch-external_tinygettext_CMakeLists_txt 
	games/supertux/pkg: PLIST 

Log message:
Update to supertux 0.5.1.  Reminded by Max Teufel (upstream).


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/18 10:37:46

Modified files:
	archivers/brotli: Makefile distinfo 
	archivers/brotli/patches: patch-tests_compatibility_test_sh 
	                          patch-tests_roundtrip_test_sh 
	archivers/brotli/pkg: PLIST 

Log message:
Update to brotli 0.6.0.  Correct license comment.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/18 10:50:34

Modified files:
	korean/libhangul: Makefile distinfo 
	korean/libhangul/pkg: PLIST 
Added files:
	korean/libhangul/patches: patch-hangul_hangulctype_c 

Log message:
Update to libhangul-0.1.0

While here:
- update MASTER_SITES
- drop the gettext module
- add a patch already committed upstream (found in the FreeBSD port)

Patch from Nils Reusse


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/18 10:52:33

Modified files:
	productivity/entomologist: Makefile 

Log message:
Fix homepage, previous url redirects to a parked domain. Port could also
be removed, as it's dead upstream since nearly 5 years (cf
https://github.com/Entomologist/entomologist/commit/27e2a66cc407e2ff2c165ad77ca6d9d88f5cd28e)


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/18 10:59:31

Modified files:
	faq            : faq5.html 

Log message:
i missed a chmod + chown in 'why is /usr/obj on a separate partition'?


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/18 11:02:08

Modified files:
	audio          : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	audio/toolame  : Makefile distinfo 
	audio/toolame/patches: patch-Makefile patch-psycho_3_c 
	                       patch-psycho_4_c 
	audio/toolame/pkg: DESCR PLIST 

Log message:
Remove toolame, nothing uses it any more.

audio/twolame is a supposed to be a maintained fork,
multimedia/transcode already uses it.

ok sthen@ fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/04/18 11:09:26

Modified files:
	lang/ruby/2.4/patches: patch-configure 

Log message:
Fix comment for patchfile, no functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/18 11:10:05

Modified files:
	converters/recode: Makefile 
Added files:
	converters/recode/patches: patch-libiconv_aliases_h 
	                           patch-src_recodext_h 

Log message:
Two fixes for clang

- don't use a 2 bits bool field (makes no sense, clang errors out)
- switch a function from __inline to __inline static, like the other
function in this header


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/18 11:16:03

Removed files:
	x11/gpointing-device-settings: Makefile distinfo 
	x11/gpointing-device-settings/patches: patch-data_mouse_ui 
	                                       patch-data_pointingstick_ui 
	                                       patch-data_touchpad_ui 
	                                       patch-modules_gnome-settings-daemon-plugins_gsd-pointing-device-plugin_c 
	                                       patch-modules_gnome-settings-daemon-plugins_gsd-touchpad-manager_c 
	                                       patch-modules_gpds-touchpad-ui_c 
	                                       patch-src_gpds-xinput-pointer-info_c 
	                                       patch-src_gpds-xinput-utils_c 
	                                       patch-src_gpds-xinput_c 
	                                       patch-test_test-xinput-utils_c 
	x11/gpointing-device-settings/pkg: DESCR PLIST 

Log message:
Remove gpointing-device-settings.
Many patches kept it on life support for a few years but it's been
unmaintained and there's no way it can work as is with the new
gnome-settings-daemon.

build breakage reported by nigel@ and naddy@
ok jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/18 11:18:09

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register gpointing-device-settings removal.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/18 11:36:52

Modified files:
	sysutils/consul: Makefile distinfo 

Log message:
Update to consul-0.8.1.

prodded by jasproach


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/18 11:47:14

Modified files:
	x11/gnome/settings-daemon/patches: patch-configure 

Log message:
Add BZ URL.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/04/18 11:56:21

Modified files:
	graphics/feh   : Makefile distinfo 
Added files:
	graphics/feh/patches: patch-src_Makefile 

Log message:
Update to feh-2.18.3

Patch to make it build with clang by Benjamin Baier
<programmer(AT)netzbasis(DOT)de>, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/18 12:18:35

Modified files:
	print/hplip    : Makefile distinfo 
	print/hplip/patches: patch-Makefile_in 
	print/hplip/pkg: PLIST-hpijs 

Log message:
Update to hplip-3.17.4.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 12:21:37

Modified files:
	usr.bin/tmux   : tmux.h tty-keys.c tty.c 

Log message:
Detect iTerm2 and use DECSLRM for it as well.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/04/18 12:38:11

Modified files:
	lang/ghc       : Makefile distinfo 

Log message:
Use the new boostrappers with the better clang detection fix from espie@.

No objectsion, espie@

(But it still produces tons of warnings, even when compiling ordinary
.hs files)


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 14:03:45

Modified files:
	databases/mariadb: Makefile 

Log message:
Ensure consistent behavior of CMake detecting / enabling bits no
matter which compiler is used (no change for base gcc). From Brad.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/18 14:16:33

Modified files:
	print/htmldoc  : Makefile 
Added files:
	print/htmldoc/patches: patch-htmldoc_htmlsep_cxx 

Log message:
Patch to make it build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/18 14:25:13

Modified files:
	archivers/p5-Compress-Bzip2: Makefile distinfo 

Log message:
Update to p5-Compress-Bzip2-2.26.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/18 14:26:06

Modified files:
	productivity/glabels: Makefile 

Log message:
Regen WANTLIB.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 14:37:49

Modified files:
	usr.bin/tmux   : server-client.c 

Log message:
On terminals without DECSLRM, when a pane that is less than the full
with of the terminal scrolls, tmux needs to redraw the entire pane. This
results in a large amount of output data which can cause slow terminals
to struggle, particularly when many lines are scrolled together quickly.

This can be reduced by only redrawing when tmux doesn't hold any
buffered data for the terminal. If a redraw is required and data is
buffered, the redraw is deferred until all that data is consumed (it is
checked after every event loop, a timer is used to ensure this happens
at some point). While a redraw is pending, no additional data will be
written to the terminal.

The redraw still happens, now it is just pushed back if it is possible
it would just add more data on top of a terminal that is already
behind. This both gives the terminal a chance to catch up, and allows
tmux to process more scrolling (that would require additional redraws)
in the meantime.

Helps with a problem reported by Greg Hurrell.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/18 14:45:28

Modified files:
	x11            : Makefile 

Log message:
remove gpointing-device-settings


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 15:05:09

Modified files:
	comms/minicom  : Makefile distinfo 

Log message:
Update to minicom-2.7.1

CVE-2017-7467: Fix an out of bounds data access that can lead to remote
code execution.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/18 15:05:42

Modified files:
	comms/minicom  : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC Update to minicom-2.7.1

CVE-2017-7467: Fix an out of bounds data access that can lead to remote
code execution.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 15:13:03

Modified files:
	audio/adplug   : Makefile 
Added files:
	audio/adplug/patches: patch-src_fmopl_c 
	games/lincity/patches: patch-pixmap_c 

Log message:
hello, modern C inline semantics. okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 15:14:06

Added files:
	devel/mozjs17/patches: patch-jsopcode_cpp 

Log message:
pointers don't really do signed comparisons. Stolen from FreeBSD.
okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 15:16:08

Added files:
	devel/mozjs17/patches: patch-jsinterp_cpp 

Log message:
dynamic goto outside of a scope with non trivial destructors is a recipe
for disaster. Can't work even with gcc, caught by clang.

Turns out this is just debugging shitz, not really necessary, just comment
it off (we could rewrite the whole thing to have separate scope or use
new/delete, but what's the point ? mozjs17 is going to die one day anyway)

FreeBSD doesn't see the issue 'cause  they don't enable threads.

okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/18 15:22:57

Modified files:
	devel/libidn2  : Makefile distinfo 
	devel/libidn2/patches: patch-src_idn2_c 
	devel/libidn2/pkg: DESCR PLIST 

Log message:
update to 2.0.0, which now includes libidn1 compatibility functions


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/18 15:41:42

Modified files:
	usr.bin/tmux   : tmux.h tty-keys.c tty.c 

Log message:
Revert use of DECSLRM on iTerm2, it doesn't help as much as we throught,
and there are some question marks about it's support.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/18 16:00:34

Modified files:
	emulators/fceux/patches: patch-fceux-server_server_cpp 
Added files:
	emulators/fceux/patches: patch-src_boards_rt-01_cpp 
	                         patch-src_cheat_cpp 

Log message:
fix a few obvious issues shown by clang (missing prototype, signed pointer
comparisons)

still doesn't link


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/18 17:06:50

Modified files:
	etc            : rc 

Log message:
Simplify patching of motd(5), also making it agree better with the
documentation if the first line of the file is blank.
Quirk reported by Anthony Coulter <bsd at anthonycoulter dot name>.
OK rpe@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/18 18:46:53

Modified files:
	www/py-flask   : Makefile distinfo 
	www/py-flask/pkg: PLIST 

Log message:
Update to py-flask-0.12.1


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/18 18:59:32

Modified files:
	usr.bin/mandoc : cgi.c 

Log message:
More thoroughly reject direct access to unintended files, such that
URIs like http://man.openbsd.org/OpenBSD-current/mandoc.db and
http://man.openbsd.org/OpenBSD-current/man1/ do not cause display
of garbage.


CVSROOT:	/cvs
Module name:	www
Changes by:	bentley@cvs.openbsd.org	2017/04/18 20:12:04

Modified files:
	.              : lyrics.html 

Log message:
None of the song collections are available on the store anymore.

ok tj@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/18 23:16:47

Modified files:
	www/iridium    : Makefile distinfo 
	www/iridium/files: audio_manager_openbsd.cc 
	                   audio_manager_openbsd.h sndio_output.cc 
	                   sndio_output.h 
	www/iridium/patches: patch-BUILD_gn 
	                     patch-apps_ui_views_app_window_frame_view_cc 
	                     patch-ash_display_mirror_window_controller_cc 
	                     patch-base_BUILD_gn patch-base_atomicops_h 
	                     patch-base_base_paths_posix_cc 
	                     patch-base_debug_debugger_posix_cc 
	                     patch-base_debug_stack_trace_h 
	                     patch-base_debug_stack_trace_posix_cc 
	                     patch-base_linux_util_cc 
	                     patch-base_native_library_posix_cc 
	                     patch-base_posix_unix_domain_socket_linux_cc 
	                     patch-base_process_launch_h 
	                     patch-base_process_memory_cc 
	                     patch-base_process_process_handle_openbsd_cc 
	                     patch-base_process_process_iterator_openbsd_cc 
	                     patch-base_process_process_metrics_h 
	                     patch-base_process_process_metrics_openbsd_cc 
	                     patch-base_process_process_posix_cc 
	                     patch-base_sys_info_openbsd_cc 
	                     patch-base_sys_info_posix_cc 
	                     patch-base_third_party_libevent_event-config_h 
	                     patch-base_third_party_libevent_openbsd_config_h 
	                     patch-base_third_party_libevent_openbsd_event-config_h 
	                     patch-base_third_party_symbolize_symbolize_cc 
	                     patch-base_threading_platform_thread_linux_cc 
	                     patch-base_threading_platform_thread_posix_cc 
	                     patch-base_trace_event_malloc_dump_provider_cc 
	                     patch-base_trace_event_process_memory_dump_cc 
	                     patch-build_config_BUILDCONFIG_gn 
	                     patch-build_config_BUILD_gn 
	                     patch-build_config_allocator_gni 
	                     patch-build_config_compiler_BUILD_gn 
	                     patch-build_config_compiler_compiler_gni 
	                     patch-build_config_features_gni 
	                     patch-build_config_linux_pkg-config_py 
	                     patch-build_toolchain_gcc_solink_wrapper_py 
	                     patch-build_toolchain_gcc_toolchain_gni 
	                     patch-build_toolchain_openbsd_BUILD_gn 
	                     patch-cc_BUILD_gn 
	                     patch-chrome_app_chrome_command_ids_h 
	                     patch-chrome_app_chrome_main_delegate_cc 
	                     patch-chrome_app_chrome_main_delegate_h 
	                     patch-chrome_app_chromium_strings_grd 
	                     patch-chrome_app_generated_resources_grd 
	                     patch-chrome_app_google_chrome_strings_grd 
	                     patch-chrome_app_mash_mash_runner_cc 
	                     patch-chrome_app_resources_locale_settings_grd 
	                     patch-chrome_browser_about_flags_cc 
	                     patch-chrome_browser_after_startup_task_utils_cc 
	                     patch-chrome_browser_browser_process_impl_cc 
	                     patch-chrome_browser_browser_process_impl_h 
	                     patch-chrome_browser_browser_resources_grd 
	                     patch-chrome_browser_chrome_browser_main_cc 
	                     patch-chrome_browser_chrome_browser_main_linux_cc 
	                     patch-chrome_browser_chrome_browser_main_posix_cc 
	                     patch-chrome_browser_chrome_content_browser_client_cc 
	                     patch-chrome_browser_chrome_content_browser_client_h 
	                     patch-chrome_browser_custom_handlers_protocol_handler_registry_cc 
	                     patch-chrome_browser_defaults_cc 
	                     patch-chrome_browser_download_chrome_download_manager_delegate_cc 
	                     patch-chrome_browser_download_download_commands_cc 
	                     patch-chrome_browser_download_download_commands_h 
	                     patch-chrome_browser_download_download_prefs_cc 
	                     patch-chrome_browser_download_download_prefs_h 
	                     patch-chrome_browser_download_download_shelf_context_menu_cc 
	                     patch-chrome_browser_download_download_status_updater_cc 
	                     patch-chrome_browser_extensions_BUILD_gn 
	                     patch-chrome_browser_extensions_api_image_writer_private_image_writer_private_api_cc 
	                     patch-chrome_browser_extensions_api_input_ime_input_ime_api_h 
	                     patch-chrome_browser_extensions_api_messaging_message_service_cc 
	                     patch-chrome_browser_extensions_api_music_manager_private_device_id_linux_cc 
	                     patch-chrome_browser_extensions_bookmark_app_helper_cc 
	                     patch-chrome_browser_extensions_browser_context_keyed_service_factories_cc 
	                     patch-chrome_browser_extensions_external_provider_impl_cc 
	                     patch-chrome_browser_first_run_first_run_internal_posix_cc 
	                     patch-chrome_browser_gpu_gl_string_manager_cc 
	                     patch-chrome_browser_gpu_gpu_feature_checker_cc 
	                     patch-chrome_browser_interstitials_chrome_controller_client_cc 
	                     patch-chrome_browser_media_galleries_fileapi_mtp_device_map_service_cc 
	                     patch-chrome_browser_media_galleries_media_file_system_registry_cc 
	                     patch-chrome_browser_memory_details_cc 
	                     patch-chrome_browser_metrics_chrome_browser_main_extra_parts_metrics_cc 
	                     patch-chrome_browser_net_async_dns_field_trial_cc 
	                     patch-chrome_browser_notifications_message_center_notification_manager_cc 
	                     patch-chrome_browser_platform_util_h 
	                     patch-chrome_browser_platform_util_linux_cc 
	                     patch-chrome_browser_plugins_plugins_resource_service_cc 
	                     patch-chrome_browser_process_singleton_posix_cc 
	                     patch-chrome_browser_profiles_profile_impl_io_data_cc 
	                     patch-chrome_browser_renderer_preferences_util_cc 
	                     patch-chrome_browser_resources_plugin_metadata_plugins_linux_json 
	                     patch-chrome_browser_resources_safe_browsing_gen_file_type_proto_py 
	                     patch-chrome_browser_safe_browsing_incident_reporting_incident_reporting_service_cc 
	                     patch-chrome_browser_safe_browsing_permission_reporter_cc 
	                     patch-chrome_browser_speech_tts_controller_impl_cc 
	                     patch-chrome_browser_sync_chrome_sync_client_cc 
	                     patch-chrome_browser_tracing_crash_service_uploader_cc 
	                     patch-chrome_browser_ui_browser_command_controller_cc 
	                     patch-chrome_browser_ui_browser_view_prefs_cc 
	                     patch-chrome_browser_ui_exclusive_access_exclusive_access_bubble_cc 
	                     patch-chrome_browser_ui_input_method_input_method_engine_base_cc 
	                     patch-chrome_browser_ui_input_method_input_method_engine_h 
	                     patch-chrome_browser_ui_startup_bad_flags_prompt_cc 
	                     patch-chrome_browser_ui_startup_startup_browser_creator_cc 
	                     patch-chrome_browser_ui_tab_helpers_cc 
	                     patch-chrome_browser_ui_toolbar_app_menu_model_cc 
	                     patch-chrome_browser_ui_views_accelerator_table_cc 
	                     patch-chrome_browser_ui_views_apps_chrome_native_app_window_views_aura_cc 
	                     patch-chrome_browser_ui_views_chrome_views_delegate_cc 
	                     patch-chrome_browser_ui_views_chrome_views_delegate_h 
	                     patch-chrome_browser_ui_views_first_run_dialog_cc 
	                     patch-chrome_browser_ui_views_frame_browser_frame_cc 
	                     patch-chrome_browser_ui_views_frame_opaque_browser_frame_view_cc 
	                     patch-chrome_browser_ui_views_frame_opaque_browser_frame_view_layout_cc 
	                     patch-chrome_browser_ui_views_frame_opaque_browser_frame_view_platform_specific_cc 
	                     patch-chrome_browser_ui_views_frame_system_menu_model_builder_cc 
	                     patch-chrome_browser_ui_views_frame_system_menu_model_delegate_cc 
	                     patch-chrome_browser_ui_views_message_center_message_center_frame_view_cc 
	                     patch-chrome_browser_ui_views_tabs_tab_drag_controller_cc 
	                     patch-chrome_browser_ui_views_tabs_tab_strip_cc 
	                     patch-chrome_browser_ui_webui_about_ui_cc 
	                     patch-chrome_browser_ui_webui_chrome_web_ui_controller_factory_cc 
	                     patch-chrome_browser_ui_webui_options_browser_options_handler_cc 
	                     patch-chrome_browser_ui_webui_options_browser_options_handler_h 
	                     patch-chrome_browser_ui_webui_settings_md_settings_localized_strings_provider_cc 
	                     patch-chrome_browser_web_applications_web_app_cc 
	                     patch-chrome_browser_web_applications_web_app_h 
	                     patch-chrome_common_BUILD_gn 
	                     patch-chrome_common_chrome_paths_cc 
	                     patch-chrome_common_chrome_paths_h 
	                     patch-chrome_common_chrome_paths_internal_h 
	                     patch-chrome_common_chrome_switches_cc 
	                     patch-chrome_common_chrome_switches_h 
	                     patch-chrome_common_extensions_chrome_extensions_client_cc 
	                     patch-chrome_common_extensions_command_cc 
	                     patch-chrome_common_pref_names_cc 
	                     patch-chrome_common_pref_names_h 
	                     patch-chrome_common_url_constants_cc 
	                     patch-chrome_common_url_constants_h 
	                     patch-chromecast_browser_cast_browser_main_parts_cc 
	                     patch-chromecast_browser_cast_content_browser_client_cc 
	                     patch-components_autofill_core_browser_autofill_experiments_cc 
	                     patch-components_content_settings_core_browser_website_settings_registry_cc 
	                     patch-components_cookie_config_cookie_store_util_cc 
	                     patch-components_crash_content_app_BUILD_gn 
	                     patch-components_crash_content_browser_BUILD_gn 
	                     patch-components_filesystem_file_system_app_cc 
	                     patch-components_metrics_BUILD_gn 
	                     patch-components_metrics_drive_metrics_provider_linux_cc 
	                     patch-components_neterror_resources_neterror_js 
	                     patch-components_omnibox_browser_omnibox_field_trial_cc 
	                     patch-components_os_crypt_os_crypt_h 
	                     patch-components_policy_resources_policy_templates_json 
	                     patch-components_policy_tools_generate_policy_source_py 
	                     patch-components_storage_monitor_BUILD_gn 
	                     patch-components_storage_monitor_storage_monitor_openbsd_cc 
	                     patch-components_storage_monitor_storage_monitor_openbsd_h 
	                     patch-components_sync_base_get_session_name_cc 
	                     patch-components_sync_base_get_session_name_linux_cc 
	                     patch-content_app_content_main_runner_cc 
	                     patch-content_browser_BUILD_gn 
	                     patch-content_browser_accessibility_browser_accessibility_h 
	                     patch-content_browser_accessibility_browser_accessibility_manager_h 
	                     patch-content_browser_browser_main_loop_cc 
	                     patch-content_browser_device_sensors_data_fetcher_shared_memory_h 
	                     patch-content_browser_devtools_protocol_color_picker_cc 
	                     patch-content_browser_download_base_file_cc 
	                     patch-content_browser_gpu_gpu_data_manager_impl_private_cc 
	                     patch-content_browser_gpu_gpu_internals_ui_cc 
	                     patch-content_browser_media_media_internals_cc 
	                     patch-content_browser_ppapi_plugin_process_host_cc 
	                     patch-content_browser_renderer_host_render_process_host_impl_cc 
	                     patch-content_browser_renderer_host_render_widget_host_view_aura_cc 
	                     patch-content_browser_utility_process_host_impl_cc 
	                     patch-content_common_BUILD_gn 
	                     patch-content_common_sandbox_init_openbsd_cc 
	                     patch-content_common_sandbox_init_openbsd_h 
	                     patch-content_common_set_process_title_linux_cc 
	                     patch-content_common_set_process_title_linux_h 
	                     patch-content_gpu_gpu_main_cc 
	                     patch-content_ppapi_plugin_ppapi_plugin_main_cc 
	                     patch-content_public_common_content_switches_cc 
	                     patch-content_public_common_content_switches_h 
	                     patch-content_renderer_render_thread_impl_cc 
	                     patch-content_renderer_renderer_main_cc 
	                     patch-content_renderer_renderer_main_platform_delegate_linux_cc 
	                     patch-content_shell_browser_shell_browser_context_cc 
	                     patch-content_shell_browser_shell_browser_main_parts_cc 
	                     patch-content_utility_utility_main_cc 
	                     patch-content_zygote_zygote_main_linux_cc 
	                     patch-dbus_property_cc 
	                     patch-device_bluetooth_BUILD_gn 
	                     patch-device_gamepad_gamepad_provider_cc 
	                     patch-device_hid_BUILD_gn 
	                     patch-device_media_transfer_protocol_media_transfer_protocol_daemon_client_h 
	                     patch-device_media_transfer_protocol_media_transfer_protocol_manager_h 
	                     patch-device_serial_BUILD_gn 
	                     patch-device_serial_serial_io_handler_posix_cc 
	                     patch-device_usb_BUILD_gn 
	                     patch-extensions_browser_api_serial_serial_api_cc 
	                     patch-gpu_config_gpu_info_collector_linux_cc 
	                     patch-gpu_config_gpu_info_collector_linux_h 
	                     patch-gpu_config_gpu_info_collector_x11_cc 
	                     patch-ipc_ipc_message_utils_cc 
	                     patch-ipc_ipc_message_utils_h 
	                     patch-iridium_trknotify_cpp 
	                     patch-media_audio_BUILD_gn 
	                     patch-media_audio_audio_manager_cc 
	                     patch-media_audio_audio_manager_h 
	                     patch-media_base_video_frame_cc 
	                     patch-media_base_video_frame_h 
	                     patch-media_capture_video_fake_video_capture_device_factory_cc 
	                     patch-media_capture_video_file_video_capture_device_factory_cc 
	                     patch-media_capture_video_video_capture_device_factory_cc 
	                     patch-media_media_options_gni 
	                     patch-net_BUILD_gn 
	                     patch-net_base_address_tracker_linux_h 
	                     patch-net_base_network_change_notifier_cc 
	                     patch-net_disk_cache_blockfile_disk_format_h 
	                     patch-net_dns_address_sorter_posix_cc 
	                     patch-net_dns_dns_util_cc 
	                     patch-net_dns_host_resolver_proc_cc 
	                     patch-net_http_http_network_session_cc 
	                     patch-net_proxy_proxy_config_service_linux_cc 
	                     patch-net_proxy_proxy_service_cc 
	                     patch-net_socket_socks5_client_socket_cc 
	                     patch-net_tools_get_server_time_get_server_time_cc 
	                     patch-net_url_request_url_request_context_builder_cc 
	                     patch-pdf_pdfium_pdfium_engine_cc 
	                     patch-ppapi_shared_impl_private_net_address_private_impl_cc 
	                     patch-printing_backend_print_backend_cups_h 
	                     patch-sandbox_BUILD_gn 
	                     patch-sandbox_linux_BUILD_gn 
	                     patch-skia_ext_SkMemory_new_handler_cpp 
	                     patch-third_party_WebKit_Source_bindings_core_v8_V8ScriptRunner_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_FontCache_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_FontCache_h 
	                     patch-third_party_WebKit_Source_platform_fonts_FontPlatformData_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_FontPlatformData_h 
	                     patch-third_party_WebKit_Source_platform_fonts_SimpleFontData_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_skia_FontCacheSkia_cpp 
	                     patch-third_party_WebKit_Source_platform_heap_StackFrameDepth_cpp 
	                     patch-third_party_WebKit_Source_platform_heap_ThreadState_cpp 
	                     patch-third_party_WebKit_Source_web_PopupMenuImpl_cpp 
	                     patch-third_party_WebKit_Source_wtf_BUILD_gn 
	                     patch-third_party_WebKit_Source_wtf_MathExtras_h 
	                     patch-third_party_angle_BUILD_gn 
	                     patch-third_party_ffmpeg_BUILD_gn 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_asm 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_h 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_asm 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_h 
	                     patch-third_party_ffmpeg_libavcodec_x86_cabac_h 
	                     patch-third_party_ffmpeg_libavutil_cpu_c 
	                     patch-third_party_ffmpeg_libavutil_mem_c 
	                     patch-third_party_libXNVCtrl_NVCtrl_c 
	                     patch-third_party_libphonenumber_dist_cpp_src_phonenumbers_base_memory_singleton_h 
	                     patch-third_party_libphonenumber_dist_cpp_src_phonenumbers_base_synchronization_lock_h 
	                     patch-third_party_libphonenumber_dist_cpp_src_phonenumbers_base_thread_checker_h 
	                     patch-third_party_libusb_BUILD_gn 
	                     patch-third_party_libusb_src_libusb_core_c 
	                     patch-third_party_pdfium_core_fxge_ge_fx_ge_linux_cpp 
	                     patch-third_party_pdfium_fpdfsdk_javascript_JS_Value_cpp 
	                     patch-third_party_pdfium_third_party_libopenjpeg20_opj_malloc_h 
	                     patch-third_party_protobuf_src_google_protobuf_stubs_atomicops_h 
	                     patch-third_party_protobuf_src_google_protobuf_stubs_platform_macros_h 
	                     patch-third_party_protobuf_src_google_protobuf_stubs_strutil_h 
	                     patch-third_party_skia_src_gpu_GrAutoLocaleSetter_h 
	                     patch-third_party_skia_src_ports_SkOSFile_stdio_cpp 
	                     patch-third_party_sqlite_BUILD_gn 
	                     patch-third_party_usrsctp_BUILD_gn 
	                     patch-third_party_webrtc_BUILD_gn 
	                     patch-third_party_webrtc_base_BUILD_gn 
	                     patch-third_party_webrtc_base_httpcommon_cc 
	                     patch-third_party_webrtc_base_network_cc 
	                     patch-third_party_webrtc_base_physicalsocketserver_cc 
	                     patch-third_party_webrtc_base_platform_thread_cc 
	                     patch-third_party_webrtc_base_stringutils_h 
	                     patch-third_party_webrtc_modules_audio_device_BUILD_gn 
	                     patch-third_party_webrtc_system_wrappers_BUILD_gn 
	                     patch-third_party_webrtc_system_wrappers_source_atomic32_non_darwin_unix_cc 
	                     patch-third_party_webrtc_system_wrappers_source_timestamp_extrapolator_cc 
	                     patch-third_party_webrtc_voice_engine_voice_engine_defines_h 
	                     patch-third_party_yasm_source_config_openbsd_config_h 
	                     patch-third_party_yasm_source_config_openbsd_libyasm-stdint_h 
	                     patch-third_party_zlib_BUILD_gn 
	                     patch-tools_gn_args_cc 
	                     patch-tools_gn_bootstrap_bootstrap_py 
	                     patch-tools_gn_bootstrap_build_ninja_template 
	                     patch-tools_gyp_pylib_gyp_generator_make_py 
	                     patch-tools_gyp_pylib_gyp_generator_ninja_py 
	                     patch-ui_accessibility_platform_ax_platform_node_h 
	                     patch-ui_app_list_app_list_constants_cc 
	                     patch-ui_app_list_app_list_constants_h 
	                     patch-ui_app_list_views_app_list_item_view_cc 
	                     patch-ui_base_ime_ime_engine_handler_interface_h 
	                     patch-ui_base_ime_input_method_factory_cc 
	                     patch-ui_base_ime_input_method_initializer_cc 
	                     patch-ui_base_resource_resource_bundle_cc 
	                     patch-ui_base_webui_web_ui_util_cc 
	                     patch-ui_events_devices_x11_device_data_manager_x11_cc 
	                     patch-ui_events_event_switches_cc 
	                     patch-ui_events_event_switches_h 
	                     patch-ui_events_keycodes_dom_keycode_converter_cc 
	                     patch-ui_gfx_canvas_skia_cc 
	                     patch-ui_gfx_codec_png_codec_cc 
	                     patch-ui_gfx_font_fallback_linux_cc 
	                     patch-ui_gfx_font_render_params_h 
	                     patch-ui_gl_BUILD_gn 
	                     patch-ui_gl_generate_bindings_py 
	                     patch-ui_gl_gl_bindings_api_autogen_glx_h 
	                     patch-ui_gl_gl_bindings_autogen_glx_cc 
	                     patch-ui_gl_gl_bindings_autogen_glx_h 
	                     patch-ui_gl_sync_control_vsync_provider_cc 
	                     patch-ui_gl_sync_control_vsync_provider_h 
	                     patch-ui_message_center_message_center_style_h 
	                     patch-ui_message_center_views_message_center_button_bar_cc 
	                     patch-ui_message_center_views_message_center_button_bar_h 
	                     patch-ui_message_center_views_message_view_factory_cc 
	                     patch-ui_resources_ui_resources_grd 
	                     patch-ui_views_accessibility_native_view_accessibility_h 
	                     patch-ui_views_bubble_bubble_dialog_delegate_cc 
	                     patch-ui_views_controls_textfield_textfield_cc 
	                     patch-ui_views_corewm_tooltip_aura_cc 
	                     patch-ui_views_examples_widget_example_cc 
	                     patch-ui_views_mus_aura_init_cc 
	                     patch-ui_views_mus_aura_init_h 
	                     patch-ui_views_style_platform_style_cc 
	                     patch-ui_views_views_delegate_cc 
	                     patch-ui_views_views_delegate_h 
	                     patch-ui_views_views_switches_cc 
	                     patch-ui_views_window_custom_frame_view_cc 
	                     patch-ui_views_window_dialog_delegate_cc 
	                     patch-ui_webui_resources_js_cr_js 
	                     patch-ui_webui_resources_js_icon_js 
	                     patch-v8_BUILD_gn 
	                     patch-v8_src_base_platform_platform-posix_cc 
	                     patch-v8_src_globals_h 
	                     patch-v8_src_log-utils_h 
	www/iridium/pkg: PLIST 
Added files:
	www/iridium    : 
	                 patch-chrome_browser_resources_plugin_metadata_plugins_linux_json 
	www/iridium/patches: patch-base_allocator_allocator_shim_cc 
	                     patch-base_debug_thread_heap_usage_tracker_cc 
	                     patch-base_threading_platform_thread_h 
	                     patch-build_compiler_version_py 
	                     patch-chrome_BUILD_gn 
	                     patch-chrome_app_settings_strings_grdp 
	                     patch-chrome_browser_extensions_api_settings_private_prefs_util_cc 
	                     patch-chrome_browser_media_webrtc_webrtc_log_uploader_cc 
	                     patch-chrome_browser_task_manager_sampling_task_group_cc 
	                     patch-chrome_browser_task_manager_sampling_task_group_h 
	                     patch-chrome_browser_task_manager_sampling_task_group_sampler_cc 
	                     patch-chrome_browser_task_manager_sampling_task_group_sampler_h 
	                     patch-chrome_browser_task_manager_sampling_task_manager_impl_cc 
	                     patch-chrome_browser_task_manager_task_manager_observer_h 
	                     patch-chrome_browser_ui_libgtkui_print_dialog_gtk_cc 
	                     patch-chrome_browser_ui_task_manager_task_manager_columns_cc 
	                     patch-chrome_browser_ui_task_manager_task_manager_table_model_cc 
	                     patch-chrome_browser_ui_views_chrome_browser_main_extra_parts_views_cc 
	                     patch-chrome_browser_ui_webui_settings_appearance_handler_cc 
	                     patch-chrome_browser_ui_webui_settings_appearance_handler_h 
	                     patch-content_browser_child_process_launcher_helper_linux_cc 
	                     patch-content_browser_memory_memory_monitor_cc 
	                     patch-content_browser_renderer_host_media_video_capture_manager_cc 
	                     patch-content_browser_renderer_host_render_message_filter_cc 
	                     patch-content_browser_renderer_host_render_message_filter_h 
	                     patch-content_browser_renderer_host_render_view_host_impl_cc 
	                     patch-content_browser_renderer_host_render_widget_host_view_event_handler_cc 
	                     patch-content_child_child_process_cc 
	                     patch-content_child_child_process_h 
	                     patch-content_child_child_thread_impl_cc 
	                     patch-content_child_child_thread_impl_h 
	                     patch-content_common_child_process_messages_h 
	                     patch-content_common_content_switches_internal_cc 
	                     patch-content_common_view_messages_h 
	                     patch-content_public_common_renderer_preferences_h 
	                     patch-content_renderer_webscrollbarbehavior_impl_aura_cc 
	                     patch-device_geolocation_location_arbitrator_cc 
	                     patch-device_time_zone_monitor_time_zone_monitor_cc 
	                     patch-gpu_ipc_service_gpu_init_cc 
	                     patch-mash_package_mash_packaged_service_cc 
	                     patch-media_BUILD_gn 
	                     patch-media_audio_pulse_audio_manager_pulse_cc 
	                     patch-media_base_audio_latency_cc 
	                     patch-media_capture_video_linux_v4l2_capture_delegate_cc 
	                     patch-media_capture_video_video_capture_device_client_cc 
	                     patch-net_base_network_interfaces_openbsd_cc 
	                     patch-net_base_network_interfaces_openbsd_h 
	                     patch-net_base_network_interfaces_posix_h 
	                     patch-net_quic_platform_impl_quic_ip_address_impl_cc 
	                     patch-net_socket_udp_socket_posix_cc 
	                     patch-net_tools_cert_verify_tool_verify_using_path_builder_cc 
	                     patch-sandbox_features_gni 
	                     patch-services_service_manager_public_cpp_standalone_service_BUILD_gn 
	                     patch-services_service_manager_public_cpp_standalone_service_standalone_service_cc 
	                     patch-services_service_manager_runner_host_BUILD_gn 
	                     patch-services_ui_gpu_gpu_main_cc 
	                     patch-third_party_WebKit_Source_wtf_StackUtil_cpp 
	                     patch-third_party_mesa_src_src_glsl_strtod_c 
	                     patch-third_party_mesa_src_src_mesa_main_imports_c 
	                     patch-third_party_pdfium_core_fxcrt_fx_system_h 
	                     patch-tools_variations_fieldtrial_to_struct_py 
	                     patch-ui_base_dragdrop_os_exchange_data_provider_factory_cc 
	                     patch-ui_gfx_font_list_cc 
	                     patch-ui_message_center_views_toast_contents_view_cc 
	                     patch-ui_views_controls_label_cc 
	                     patch-ui_views_selection_controller_cc 
	                     patch-v8_src_wasm_wasm-result_h 
Removed files:
	www/iridium/patches: patch-ash_shell_cc 
	                     patch-chrome_app_chrome_main_cc 
	                     patch-chrome_browser_BUILD_gn 
	                     patch-chrome_browser_extensions_api_omnibox_omnibox_api_cc 
	                     patch-chrome_browser_media_webrtc_log_uploader_cc 
	                     patch-chrome_browser_ui_views_app_list_linux_app_list_linux_cc 
	                     patch-chrome_browser_ui_views_frame_browser_view_cc 
	                     patch-content_browser_child_process_launcher_cc 
	                     patch-content_browser_download_base_file_linux_cc 
	                     patch-content_browser_power_usage_monitor_impl_cc 
	                     patch-content_browser_renderer_host_media_video_capture_device_client_cc 
	                     patch-content_browser_time_zone_monitor_cc 
	                     patch-content_renderer_devtools_v8_sampling_profiler_cc 
	                     patch-content_renderer_webscrollbarbehavior_impl_gtkoraura_cc 
	                     patch-device_geolocation_location_arbitrator_impl_cc 
	                     patch-device_serial_serial_service_impl_cc 
	                     patch-native_client_build_compiler_version_py 
	                     patch-net_base_network_interfaces_posix_cc 
	                     patch-net_udp_udp_socket_posix_cc 
	                     patch-services_shell_runner_host_BUILD_gn 
	                     patch-services_ui_public_cpp_gles2_context_cc 
	                     patch-services_ui_surfaces_surfaces_context_provider_cc 
	                     patch-third_party_WebKit_Source_platform_heap_ThreadState_h 
	                     patch-third_party_pdfium_core_fxcrt_include_fx_system_h 
	                     patch-tools_perf_chrome_telemetry_build_BUILD_gn 
	                     patch-ui_app_list_app_list_menu_cc 
	                     patch-ui_app_list_views_app_list_view_cc 

Log message:
update to 57.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/18 23:20:28

Removed files:
	www/iridium    : 
	                 patch-chrome_browser_resources_plugin_metadata_plugins_linux_json 

Log message:
remove bogous file


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/18 23:27:00

Modified files:
	sbin/disklabel : Makefile editor.c 

Log message:
enlarge obj to satisfy new world order that has *big* compilers and
remove condition for static linking; ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/04/18 23:33:53

Modified files:
	sbin/disklabel : disklabel.8 

Log message:
Bump numbers for /usr/obj allocation with *big* compilers.

ok otto


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/04/18 23:36:13

Modified files:
	lib/libpcap    : pcap-bpf.c 
	sbin/dhclient  : bpf.c 
	usr.sbin/arp   : arp.c 
	usr.sbin/dhcpd : bpf.c 
	usr.sbin/dhcrelay: bpf.c 
	usr.sbin/dhcrelay6: bpf.c 
	usr.sbin/hostapd: hostapd.c 
	usr.sbin/mopd/common: pf.c 
	usr.sbin/npppd/npppd: privsep.c 
	usr.sbin/npppd/pppoe: pppoed.c 
	usr.sbin/rarpd : rarpd.c 
	usr.sbin/rbootd: bpf.c rbootd.8 
	usr.sbin/tcpdump: privsep_pcap.c tcpdump.8 

Log message:
Switch base tools from /dev/bpf0 to /dev/bpf. Now that /dev/bpf has been
around for two releases, it should be safe to do so.

ok bluhm deraadt sthen tb yasuoka


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/18 23:58:48

Modified files:
	japanese       : Makefile 
Removed files:
	japanese/jvim  : Makefile distinfo 
	japanese/jvim/patches: patch-src_jgrep_c patch-src_jp_c 
	                       patch-src_makefile_junx patch-src_vim_h 
	japanese/jvim/pkg: DESCR PLIST 

Log message:
Remove japanese/jvim.

ok yasuoka@ naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/19 00:01:36

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register jvim removal.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/19 00:02:19

Modified files:
	faq            : current.html 

Log message:
clang enabled on amd64 and i386. upgrade using a snapshot. if you build
your own releases, bump /usr/obj to 3G, otherwise 'make release' will fail.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 00:09:02

Modified files:
	devel/libusb1  : Makefile distinfo 
	devel/libusb1/patches: patch-libusb_core_c 

Log message:
Update to libusb1-1.0.21.

ok mpi@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 00:16:08

Modified files:
	x11/gnome/gvfs : Makefile 

Log message:
Fix comment.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/19 00:52:27

Modified files:
	usr.bin/tmux   : format.c server-client.c tmux.1 tmux.h tty.c 

Log message:
When the data we have buffered to write to a terminal grows beyond a
reasonable amount (currently width * height * 8 bytes), discard all
output to the terminal and start trying to redraw periodically
instead. Continue with this until the amount of data we are trying to
write falls to a low level again.

This helps to prevent tmux sitting on a huge buffer of data when there
are processes with fast output running inside tmux but the outside
terminal is slow.

A new client_discarded format holds the amount of data that has been
discarded due to this mechanism.

The three variables (when to start this, when to stop, and how often to
redraw) are basically "works for me" at the moment, this is going in to
see how it goes and if it causes problems for anyone else.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/19 01:29:55

Modified files:
	net/telepathy/folks: Makefile 

Log message:
add link to upstream bz


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/19 01:35:45

Modified files:
	math/ecm       : Makefile 

Log message:
Patch to make it build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 01:41:00

Modified files:
	lang/python    : python.port.mk 

Log message:
Only add ac_cv_prog_PYTHON and ac_cv_path_PYTHON to CONFIGURE_ENV when
CONFIGURE_STYLE is gnu (or autoconf). It makes no sense for other styles.

survived a bulk


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 01:41:28

Modified files:
	x11/gnome      : gnome.port.mk 

Log message:
Add support for cmake.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 01:42:41

Modified files:
	databases/evolution-data-server: Makefile 
	databases/evolution-data-server/patches: patch-CMakeLists_txt 
	mail/evolution : Makefile 
	mail/evolution-ews: Makefile 

Log message:
Simplify now that the gnome MODULE has support for cmake.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 02:19:02

Modified files:
	mail/mutt      : Makefile distinfo 

Log message:
update to mutt-1.8.2


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/19 02:29:27

Modified files:
	build          : mirrors.dat 

Log message:
spaces->tabs


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/19 02:31:16

Modified files:
	editors/ht     : Makefile 
Added files:
	editors/ht/patches: patch-elfstruc_h patch-htelfphs_cc 

Log message:
Add OpenBSD elf program header types from Benjamin Baier, thanks


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/19 03:13:28

Modified files:
	editors/ht     : Makefile 
Added files:
	editors/ht/patches: patch-htapp_cc 

Log message:
Patch to make it build with clang, from FreeBSD.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/19 03:32:46

Modified files:
	usr.bin/make   : make.1 

Log message:
spelling fixes from michael w. bombardieri


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/19 03:55:32

Modified files:
	faq            : upgrade61.html 

Log message:
Mention that tomcat now enforces umask 027 and show how to change it
if necessary. ok dcoppa, ok/whitespace change tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 04:20:12

Modified files:
	lang/erlang/19/patches: patch-erts_emulator_Makefile_in 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/19 04:48:57

Modified files:
	usr.sbin/relayd: relayd.conf.5 

Log message:
better example; from hiltjo posthuma
ok sthen


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/19 04:56:38

Modified files:
	build          : mirrors.dat 

Log message:
Update ftp URL for Bytemark; /pub/OpenBSD does work. Add https.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/19 04:57:24

Modified files:
	.              : ftp.html httpslist 
	openbgpd       : ftp.html 
	openssh        : ftp.html portable.html 
	openntpd       : portable.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 05:16:03

Modified files:
	audio/calf     : Makefile 
	audio/lmms     : Makefile 
	devel/boost    : Makefile 
	devel/mysql++  : Makefile 
	emulators/dosbox: Makefile 
	games/freedroidrpg: Makefile 
	games/rocksndiamonds: Makefile 
	graphics/aqsis : Makefile 
	graphics/enblend-enfuse: Makefile 
	graphics/opencv: Makefile 
	net/transmission: Makefile 
	security/botan : Makefile 
	www/arora      : Makefile 
	x11/qt4        : Makefile 
	x11/qt5        : Makefile.inc 

Log message:
Add ${CLANG_ARCHS} to "ONLY_FOR_ARCHS = ${GCC4_ARCHS}" lines to give them
a chance on aarch64.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 05:52:46

Modified files:
	sysutils/firmware/vmm: Makefile 

Log message:
Sanity check the version string embedded in the seabios build to make sure
it matches what we expect, otherwise fail the port build.

They do some checks on toolchain and if things don't show up as expected
it uses a string with an embedded date+hostname. The port was already
taking care to avoid this, so this is a currently-noop diff just to make
sure it stays that way.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/19 06:02:57

Modified files:
	devel/py-greenlet: Makefile 
	devel/py-greenlet/pkg: PLIST 

Log message:
devel/py-greenlet: Add python3 FLAVOR.

OK sthen@, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/19 06:03:47

Modified files:
	devel          : Makefile 

Log message:
Link python3 FLAVOR of py-greenlet.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 06:09:22

ports/x11/gnustep/databasin/patches

Update of /cvs/ports/x11/gnustep/databasin/patches
In directory cvs.openbsd.org:/tmp/cvs-serv39493/patches

Log Message:
Directory /cvs/ports/x11/gnustep/databasin/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 06:10:30

ports/x11/gnustep/dbuskit/patches

Update of /cvs/ports/x11/gnustep/dbuskit/patches
In directory cvs.openbsd.org:/tmp/cvs-serv68759/patches

Log Message:
Directory /cvs/ports/x11/gnustep/dbuskit/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 06:23:20

Log message:
    import sysutils/pick, from maintainer Anton Lindqvist, ok tb@
    
    The pick utility allows users to select from a set of choices using an interface
    with fuzzy search functionality. The choices are read from stdin, and the
    selected choice written to stdout.
    
    Status:
    
    Vendor Tag:	sthen
    Release Tags:	sthen_20170419
    
    N ports/sysutils/pick/Makefile
    N ports/sysutils/pick/distinfo
    N ports/sysutils/pick/pkg/PLIST
    N ports/sysutils/pick/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 06:23:46

Modified files:
	sysutils       : Makefile 

Log message:
+pick


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 06:29:12

Modified files:
	net/libnet/1.1 : Makefile 
Added files:
	net/libnet/1.1/patches: patch-include_libnet_libnet-functions_h 

Log message:
Stop declaring libnet_getgre_length as inline; fixes build with clang

libnet_getgre_length is a public symbol declared in a public header (and
defined in a .c file), it makes no sense to declare it as inline.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/19 06:44:05

Modified files:
	regress/sys/net/pf_table: Makefile 

Log message:
Make the test pass when an obj directory exists.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/19 06:44:29

Modified files:
	usr.bin/tmux   : cmd-command-prompt.c grid.c tmux.c 

Log message:
Style nits and a missing cast.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/19 07:10:16

Modified files:
	devel/py-texscythe: Makefile distinfo 
	devel/py-texscythe/pkg: PLIST 

Log message:
Update devel/py-texsycthe to 0.3 in preparation for TeX Live 2016.

OK sthen@, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/19 07:13:18

Modified files:
	print/texlive/texmf/files: mk_plists.py 

Log message:
Ensure '$OpenBSD$' is not expanded in mk_plists.py.

OK sthen@, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 07:21:23

Added files:
	x11/kde/libs3/patches: patch-kate_part_katebuffer_cpp 

Log message:
foldingList is made of uint, taking abs is non-sensical


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 07:21:49

Modified files:
	x11/kde/libs3/patches: patch-kioslave_ftp_ftp_cc 

Log message:
const-correct strstr/strchr for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 07:23:24

Modified files:
	x11/kde/libs3  : Makefile 
	x11/kde/libs3/pkg: PLIST-main 

Log message:
clang is rightfully annoyed at exr having throw() in its API and
qt/kde being compiled -fno-exceptions.

this can't really work at runtime anyway. Remove openexr there.
Eventually, exceptions might be better behaved and working these
days.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 07:36:12

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.40.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 07:36:28

Modified files:
	sysutils/awscli: Makefile distinfo 
	sysutils/awscli/pkg: PLIST 

Log message:
Update to awscli-1.11.77.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 07:40:16

Modified files:
	mail/elm       : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 07:41:19

Modified files:
	sysutils/salt  : Makefile distinfo 
	sysutils/salt/pkg: PLIST 

Log message:
Update to salt-2016.11.4.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/19 08:00:28

Modified files:
	usr.bin/tmux   : cmd-detach-client.c server-client.c tmux.h 

Log message:
Add a suspend helper function, and do not allow detaching or suspending
while already doing so.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 08:26:24

Modified files:
	www/puppetboard: Makefile distinfo 
	www/puppetboard/pkg: PLIST 
Added files:
	www/puppetboard/patches: patch-puppetboard_app_py 

Log message:
Update to 0.2.2, and add a patch to cope with the recent py-werkzeug update
to 0.12.x


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/19 09:02:47

Modified files:
	faq            : current.html 

Log message:
add instructions for bootstrapping clang.

from/requested by henning


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 09:03:35

Added files:
	mail/abook/patches: patch-database_c patch-database_h 

Log message:
Fix build with clang

field_id() is declared/defined with "inline", but needs to access
a variable that is only visible in database.c, the easiest fix is just
to drop "inline".


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 09:04:55

Modified files:
	mail/abook     : Makefile 

Log message:
Missed bump in previous


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 09:08:11

Modified files:
	databases/gnats: Makefile 
	databases/gnats/patches: patch-libiberty_functions_def 

Log message:
Fix build with clang

Make strerror decl match string.h


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 09:13:12

Modified files:
	infrastructure/lib/DPB: PortBuilder.pm 

Log message:
cosmetic change: report the hostname again in case of failure.
I routinely read thru logs looking for the error, and forget about which
machine it was. Having it conveniently located at the end instead of the
start saves me a few seconds.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 09:14:45

Modified files:
	infrastructure/lib/DPB: Engine.pm 

Log message:
white line at end of summary isn't very visible.
if we restart the build for whatever reason, stuff gets appended as
usual, but the difference between old summary and new summary should
be more visible.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/19 09:20:55

Modified files:
	share/termtypes: termtypes.master 

Log message:
Update to terminfo.src 2017-04-01.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 09:21:28

Modified files:
	converters/ripmime: Makefile 

Log message:
-Werror considered harmful, again


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/19 09:21:54

Modified files:
	sys/net        : if_loop.c route.c rtsock.c 
	sys/netinet    : ip_icmp.c ip_input.c ip_output.c tcp_input.c 
	                 tcp_subr.c tcp_timer.c 
	sys/netinet6   : icmp6.c ip6_output.c 

Log message:
Use the rt_rmx defines that hide the struct rt_kmetrics indirection.
No binary change.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 09:26:59

Modified files:
	audio/xcdplayer/patches: patch-internals_c 

Log message:
have cdrom_get_curtime return something, always.
fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 09:30:45

Modified files:
	converters/ripmime: Makefile 

Log message:
honour CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 09:34:15

Modified files:
	devel/pccts    : Makefile 

Log message:
varargs is dead, but sorcerer has stdarg support built in, just pass the
magical config switch to have modern code.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/19 09:38:32

Modified files:
	usr.sbin/vmd   : Makefile parse.y priv.c virtio.c virtio.h vm.c 
	                 vm.conf.5 vmd.c vmd.h 
	usr.sbin/vmctl : main.c vmctl.8 vmctl.c 
Added files:
	usr.sbin/vmd   : dhcp.c dhcp.h packet.c 

Log message:
Add support for dynamic "NAT" interfaces (-L/local interface).

When a local interface is configured, vmd configures a /31 address on
the tap(4) interface of the host and provides another IP in the same
subnet via DHCP (BOOTP) to the VM.  vmd runs an internal BOOTP server
that replies with IP, gateway, and DNS addresses to the VM.  The
built-in server only ever responds to the VM on the inside and cannot
leak its DHCP responses to the outside.

Thanks to Uwe Werler, Josh Grosse, and some others for testing!

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 09:40:25

Modified files:
	audio/libofa   : Makefile 
Added files:
	audio/libofa/patches: patch-examples_uselame_cpp 
	                      patch-examples_wavefile_cpp 
	                      patch-lib_signal_op_cpp 

Log message:
Fix clang build: add missing includes


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 09:41:56

Added files:
	games/xasteroids/patches: patch-xast_c 

Log message:
declare void function as void.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/19 09:44:45

Modified files:
	sys/netinet6   : icmp6.c raw_ip6.c 

Log message:
icmp6_rip6_input() was mostly duplicated code from rip6_input().
Merge these functions together and remove icmp6_rip6_input().
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/19 09:59:39

Modified files:
	sbin/ipsecctl  : ipsecctl.c ipsecctl.h parse.y pfkdump.c pfkey.c 

Log message:
Rename all SA groups to bundles consistently.  The first kernel
commit in 2000 that introduced the features already called them SA
bundles.  The word group is taken by Diffie-Hellman, reusing it
causes confusion.
OK hshoexer@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/19 10:06:38

Modified files:
	regress/sbin/ipsecctl: sa25.ok sa26.ok sa27.ok 

Log message:
SA group has been renamed to bundle.  Adapt test.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 10:23:39

Modified files:
	audio/pms      : Makefile 
Added files:
	audio/pms/patches: patch-src_message_cpp 

Log message:
Missing include for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 10:49:49

Added files:
	mail/libspf2/patches: patch-src_libspf2_spf_compile_c 
	                      patch-src_libspf2_spf_dns_c 
	                      patch-src_libspf2_spf_dns_zone_c 
	                      patch-src_libspf2_spf_id2str_c 

Log message:
clang fixes for variadic macros

With C99 variadic macros, __VA_ARGS__ has to replace at least one
argument.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 10:56:04

Modified files:
	mail/libspf2   : Makefile 
	mail/libspf2/patches: patch-src_libspf2_spf_compile_c 

Log message:
Fix format string for size_t parameter.

Like other size_t variables in this file.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/19 10:59:54

Modified files:
	usr.bin/tmux   : cmd-source-file.c 

Log message:
load_cfg returns < 0 on error, not != 0. Problem reported by Kaushal Modi.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 11:00:29

Modified files:
	mail/relaydb   : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 11:01:50

ports/mail/relaydb/patches

Update of /cvs/ports/mail/relaydb/patches
In directory cvs.openbsd.org:/tmp/cvs-serv93348/patches

Log Message:
Directory /cvs/ports/mail/relaydb/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 11:02:48

Added files:
	mail/relaydb/patches: patch-Makefile 

Log message:
Werror considered harmful; fixes build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/19 11:26:13

Modified files:
	sys/ufs/ufs    : ufs_vnops.c 

Log message:
Add size to free()

ok deraadt@ visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	dhill@cvs.openbsd.org	2017/04/19 11:26:45

Modified files:
	sys/ufs/ufs    : ufs_dirhash.c 

Log message:
Add sizes to free()

ok deraadt@ visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 11:51:30

Modified files:
	mail/prepop    : Makefile 
	mail/prepop/patches: patch-main_cc 
Added files:
	mail/prepop/patches: patch-base64_cc patch-display_cc 

Log message:
Fix clang build: move from iostream.h to iostream


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 12:06:54

Modified files:
	mail/prepop    : Makefile 
Added files:
	mail/prepop/patches: patch-header_cc 

Log message:
Avoid UB spotted by clang

warning: unsequenced modification and access to 'end' [-Wunsequenced]


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 12:14:56

Modified files:
	mail/prepop    : Makefile 
	mail/prepop/patches: patch-main_cc 

Log message:
Don't segfault on ^D


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/19 12:26:52

Modified files:
	databases/evolution-data-server/patches: patch-CMakeLists_txt 

Log message:
Pushed upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 14:36:41

Modified files:
	sysutils/conky/patches: patch-src_openbsd_c 

Log message:
regen patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/19 14:37:42

Modified files:
	sysutils/conky/patches: patch-src_openbsd_c 

Log message:
Make "inline void proc_find_top" static to fix building with clang.
From Benjamin Baier.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:10:10

Modified files:
	x11/gnustep/libobjc2: Makefile distinfo 

Log message:
Bugfix update to 1.8.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:13:25

Modified files:
	x11/gnustep/make: Makefile distinfo 
	x11/gnustep/make/patches: patch-GNUmakefile_in 
	                          patch-Instance_framework_make 
	                          patch-Instance_library_make 
	                          patch-common_make patch-target_make 
	x11/gnustep/make/pkg: PLIST 
Removed files:
	x11/gnustep/make/patches: patch-Master_rules_make 

Log message:
Update to 2.7.0, removing support of some since quite some time
deprecated variables, as well as some bug fixes


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:16:43

Modified files:
	x11/gnustep/base: Makefile distinfo 
	x11/gnustep/base/pkg: PLIST 

Log message:
update to 1.25.0

noteworthy changes:
* Garbage collection support removed (NSGarbageCollector stub
remains)
* Support for Debian style multi-architecture installations added
* OpenSSL bundle removed since it didn't match GNUTLS support
* Ported to Debian/Hurd
* ICU string (regexp in particular) fixes
* OSX compatibity changes in NSRunLoop and NSTask behavior
* Alternative sort algorithms selectable at runtime
* Many bugfixes and cleanups.
* As usual, this release also contains an update to include the most
recent international timezone data.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:17:53

Modified files:
	x11/gnustep/databasin: Makefile 
Added files:
	x11/gnustep/databasin/patches: patch-GNUmakefile_preamble 

Log message:
Deal with the gnustep-make update, problem reported to upstream maintainer


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:18:48

Modified files:
	x11/gnustep/dbuskit: Makefile 
	x11/gnustep/dbuskit/pkg: PLIST 
Added files:
	x11/gnustep/dbuskit/patches: patch-Source_DKNotificationCenter_m 

Log message:
Deal with gnustep-base update, problem reported to upstream maintainer


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:21:31

Modified files:
	x11/gnustep/back: Makefile 
Added files:
	x11/gnustep/back/patches: patch-Source_gsc_GSGState_m 
	                          patch-Source_x11_XGDragView_m 
	                          patch-Source_x11_XGServerWindow_m 
	                          patch-Source_x11_XWindowBuffer_m 

Log message:
backport a bunch of fixes to build warnings I reported


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/19 15:23:20

Modified files:
	x11/gnustep/gui: Makefile 
	x11/gnustep/gui/patches: patch-Printing_GSCUPS_GSCUPSPrinter_m 
Added files:
	x11/gnustep/gui/patches: patch-Model_IMLoading_m 
	                         patch-Source_GSTextStorage_m 
	                         patch-Source_GSToolbarView_m 
	                         patch-Source_NSLayoutManager_m 
	                         patch-Source_NSTableView_m 

Log message:
backport a bunch of build warnings fixes I reported upstream


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 16:00:02

Modified files:
	editors/axe/patches: patch-Help_Hyper_c 

Log message:
trivial clang fix, help non void function return a bool.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 16:02:45

Added files:
	games/xmj/patches: patch-event_c 

Log message:
void function is void


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 16:08:15

Added files:
	games/xscavenger/patches: patch-src_scav_c 

Log message:
have main return 1 in case of errors


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 16:11:47

ports/archivers/xdms/patches

Update of /cvs/ports/archivers/xdms/patches
In directory cvs.openbsd.org:/tmp/cvs-serv50916/patches

Log Message:
Directory /cvs/ports/archivers/xdms/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 16:12:19

Added files:
	archivers/xdms/patches: patch-src_u_deep_c patch-src_u_heavy_c 

Log message:
C99 inline semantics


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 16:20:27

Added files:
	security/smurflog/patches: patch-hash_c patch-smurflog_c 

Log message:
yet C99 inline semantics. plus wacky bugfix, inline signal handler, wtf ?


CVSROOT:	/cvs
Module name:	www
Changes by:	dtucker@cvs.openbsd.org	2017/04/19 16:34:35

Modified files:
	openssh        : specs.html 

Log message:
Note that SSH1 server support was removed in 7.4.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/19 16:37:52

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/19 16:48:51

Modified files:
	devel/mercurial: Tag: OPENBSD_6_1 Makefile 
Added files:
	devel/mercurial/patches: Tag: OPENBSD_6_1 patch-contrib_hg-ssh 
	                         patch-mercurial_dispatch_py 
	                         patch-tests_test-ssh_t 

Log message:
SECURITY: "hg serve --stdio could be tricked into granting authorized
users access to the Python debugger"

"dispatch: protect against malicious 'hg serve --stdio' invocations
(sec)

Some shared-ssh installations assume that 'hg serve --stdio' is a safe
command to run for minimally trusted users. Unfortunately, the messy
implementation of argument parsing here meant that trying to access a
repo named '--debugger' would give the user a pdb prompt, thereby
sidestepping any hoped-for sandboxing. Serving repositories over
HTTP(S) is unaffected.

We're not currently hardening any subcommands other than 'serve'. If
your service exposes other commands to users with arbitrary repository
names, it is imperative that you defend against repository names of
'--debugger' and anything starting with '--config'.

The read-only mode of hg-ssh stopped working because it provided its
hook configuration to "hg serve --stdio" via --config parameter. This
is banned for security reasons now. This patch switches it to directly
call ui.setconfig(). If your custom hosting infrastructure relies on
passing --config to "hg serve --stdio", you'll need to find a
different way to get that configuration into Mercurial, either by
using ui.setconfig() as hg-ssh does in this patch, or by placing an
hgrc file someplace where Mercurial will read it."

Changes backported from 4.1.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/19 16:54:32

Modified files:
	devel/mercurial: Makefile distinfo 

Log message:
Update to mercurial 4.1.3.

SECURITY: "hg serve --stdio could be tricked into granting authorized
users access to the Python debugger"

"dispatch: protect against malicious 'hg serve --stdio' invocations
(sec) Some shared-ssh installations assume that 'hg serve --stdio' is
a safe command to run for minimally trusted users. Unfortunately, the
messy implementation of argument parsing here meant that trying to
access a repo named '--debugger' would give the user a pdb prompt,
thereby sidestepping any hoped-for sandboxing. Serving repositories
over HTTP(S) is unaffected.

We're not currently hardening any subcommands other than 'serve'. If
your service exposes other commands to users with arbitrary repository
names, it is imperative that you defend against repository names of
'--debugger' and anything starting with '--config'.

The read-only mode of hg-ssh stopped working because it provided its
hook configuration to "hg serve --stdio" via --config parameter. This
is banned for security reasons now. This patch switches it to directly
call ui.setconfig(). If your custom hosting infrastructure relies on
passing --config to "hg serve --stdio", you'll need to find a
different way to get that configuration into Mercurial, either by
using ui.setconfig() as hg-ssh does in this patch, or by placing an
hgrc file someplace where Mercurial will read it. mitrandir@fb.com
provided some extra fixes for the dispatch code and for hg-ssh in
places that I overlooked."


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/19 16:58:27

Modified files:
	devel/tortoisehg: Makefile distinfo 

Log message:
Update to tortoisehg 4.1.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/19 17:06:18

Modified files:
	devel/tortoisehg: Makefile 
	devel/mercurial: Makefile 

Log message:
Spaces/tabs.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 17:07:53

Modified files:
	games/xjig     : Makefile 
	games/xjig/patches: patch-Makefile_Linux 

Log message:
remove compilation options that make no sense


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 17:25:06

Modified files:
	net/ushare     : Makefile 
	net/ushare/patches: patch-src_ushare_c 
Added files:
	net/ushare/patches: patch-src_trace_c patch-src_trace_h 
	                    patch-src_ushare_h 

Log message:
Fix build with clang: two functions that were needlessly "inline"


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 17:26:34

Added files:
	games/xjig/patches: patch-gif_image_C 

Log message:
make strrchr call modern C++ compliant. Use an intermediate const variable,
as the end result is correctly duplicated to be modifiable.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 17:33:40

Modified files:
	benchmarks/netperf: Makefile 
Added files:
	benchmarks/netperf/patches: patch-src_netlib_c 

Log message:
Correctly print time_t.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 17:44:13

Modified files:
	benchmarks/netperf: Makefile 
	benchmarks/netperf/patches: patch-src_netlib_c 

Log message:
Unbreak with clang: two functions that shouldn't be inline

The comments around said functions suggest a case of mild confusion...


CVSROOT:	/cvs
Module name:	www
Changes by:	dtucker@cvs.openbsd.org	2017/04/19 17:53:13

Modified files:
	openssh        : specs.html 

Log message:
Link to errata for RFC4345


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 17:53:42

Added files:
	net/gloox/patches: patch-src_mucroom_cpp 
	                   patch-src_pubsubmanager_cpp 

Log message:
libc++ doesn't make C symbols visible, so explicitly ask for stdlib's atoi


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 18:02:06

Modified files:
	mail/archiveopteryx/patches: patch-Jamsettings 

Log message:
regen patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 18:16:06

Modified files:
	mail/archiveopteryx/patches: patch-Jamsettings 

Log message:
-Werror considered harmful; fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/19 18:43:18

ports/net/librsync/patches

Update of /cvs/ports/net/librsync/patches
In directory cvs.openbsd.org:/tmp/cvs-serv83699/patches

Log Message:
Directory /cvs/ports/net/librsync/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 19:40:33

Added files:
	graphics/djvulibre/patches: patch-libdjvu_DjVuPalette_cpp 

Log message:
libcxx properly defines overriden fmin() in math.h.
Unfortunately, that one has exception specifications, so redefining it
does not go so well.
Simply rename it so that the conflict never happens.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 19:42:44

Modified files:
	x11/irrlicht   : Makefile 

Log message:
${LIBCXX}>=51 does not work so well :)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/19 19:48:01

Added files:
	games/warmux/patches: patch-tools_list_games_main_cpp 

Log message:
can't use getopt without unistd in C++, don't know how gcc allowed it.
(there's still a linker error later on)


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/04/19 21:04:11

Modified files:
	usr.bin/make   : main.c 

Log message:
use strtonum instead of strtoll to parse the argument to -j

ok deraadt@ benno@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/19 21:27:17

Modified files:
	mail/offlineimap: Makefile distinfo 
	mail/offlineimap/patches: patch-offlineimap_conf 

Log message:
Update to offlineimap-7.1.0, from Remi Locherer (maintainer)

From the announcement mail:

----
The most important change is the removal of the status_backend configuration
option and that's why we're moving to v7.1.0.

There are other small bug fixes and improvements. However, the codebase didn't
change much since v7.0.14
----


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/19 22:27:58

Modified files:
	www/netsurf    : Makefile.inc 
	www/netsurf/browser: Makefile 
	www/netsurf/netsurf-fb: Makefile 

Log message:
Respect CC in all NetSurf libraries, not just the browsers.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 00:03:11

Modified files:
	graphics/maim  : Makefile 

Log message:
Missing BDEP on graphics/glm.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/20 00:12:58

Modified files:
	www/firefox-esr: Makefile distinfo 
	www/firefox-esr/pkg: PLIST 
	www/firefox-esr-i18n: Makefile.inc distinfo 
	www/firefox-i18n: Makefile.inc distinfo 
	www/mozilla-firefox: Makefile distinfo 
	www/mozilla-firefox/patches: 
	                             patch-js_src_jit_ProcessExecutableMemory_cpp 
	                             patch-security_manager_pki_resources_content_exceptionDialog_js 
	                             patch-storage_mozStorageConnection_cpp 
	www/mozilla-firefox/pkg: PLIST README 
Removed files:
	www/firefox-esr/patches: 
	                         patch-browser_installer_allowed-dupes_mn 
	www/mozilla-firefox/patches: patch-browser_installer_Makefile_in 

Log message:
Update to firefox 53.0.

See https://www.mozilla.org/en-US/firefox/53.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2017-10/.

- Now depends on rust and cargo to build.
- Remove patch-browser_installer_Makefile_in, sdk was removed in #1333826
- Ship a small distribution.ini to show package source in about dialog
- Add a blurb from Michael Reed about installing ffmpeg package to play
HTML5 audio/video.

Tested by several


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/20 00:17:02

Modified files:
	www/firefox-esr: Makefile 

Log message:
I screwed up in previous commit (commited to both ports..), so remove
REVISION churn, and here's the intended commit msg for firefox-esr:

Update to firefox-esr 52.1.0.

See https://www.mozilla.org/en-US/firefox/52.1.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2017-12/
- Ship a small distribution.ini to show package source in about dialog
- Remove patch-browser_installer_allowed-dupes_mn, was fixed by #1315309


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/20 00:19:08

Modified files:
	mail/mozilla-thunderbird: Makefile distinfo 
	mail/mozilla-thunderbird/pkg: PLIST-main 
	mail/thunderbird-i18n: Makefile.inc distinfo 

Log message:
Update to thunderbird 52.0.1/lightning 5.4.1

See https://www.mozilla.org/en-US/thunderbird/52.0.1/releasenotes/


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/20 00:27:49

Modified files:
	security/pdfcrack: Makefile distinfo 

Log message:
Update to pdfcrack-0.16.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 01:29:56

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.41.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 01:30:12

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.78.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 01:42:34

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-152.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 02:44:26

Modified files:
	x11/mono-gtk2  : Makefile distinfo 

Log message:
Update to mono-gtk2-2.12.43


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 03:20:22

Modified files:
	usr.bin/tmux   : cmd-if-shell.c cmd-run-shell.c 
	                 cmd-show-messages.c format.c job.c server.c 
	                 tmux.1 tmux.h window-copy.c 

Log message:
If a #() command doesn't exit, use its most recent line of output (it
must be a full line). Don't let it redraw the status line more than once
a second.

Requested by someone about 10 years ago...


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/20 03:25:06

Modified files:
	security/rarcrack: Makefile 
Added files:
	security/rarcrack/patches: patch-rarcrack_c 

Log message:
Patch to make it build with clang, function that shouldn't be inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/20 03:29:49

Modified files:
	emulators/sdlmame: Makefile 
	emulators/sdlmess: Makefile 

Log message:
Fix broken MASTER_SITES for emulators/sdlmame and emulators/sdlmess.

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/20 03:39:02

Modified files:
	x11/kde/libs3/pkg: PLIST-main 

Log message:
oops, missed removing one file


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 03:39:07

Modified files:
	usr.bin/tmux   : format.c tmux.h window.c 

Log message:
There is no real need for window_printable_flags to allocate, make it
return a buffer from the stack.


CVSROOT:	/cvs
Module name:	www
Changes by:	dtucker@cvs.openbsd.org	2017/04/20 03:42:43

Modified files:
	openssh        : specs.html 

Log message:
The IUTF8 terminal mode is now RFC8160


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 03:43:45

Modified files:
	usr.bin/tmux   : format.c tmux.h window.c 

Log message:
Now that struct winlink has a session pointer, can remove some arguments.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/20 04:03:40

Modified files:
	sys/arch/sparc64/include: cpu.h tcb.h 

Log message:
Use register names without the % prefix in the global register variable
declarations since clang doesn't register the %-prefixed ones.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/20 04:32:23

Modified files:
	gnu/usr.bin/clang/include/clang/intrin: Makefile 

Log message:
Install clflushoptintrin.h and move pkuintrin.h such that the list is
properly sorted.

pointed out by espie@


CVSROOT:	/cvs
Module name:	www
Changes by:	naddy@cvs.openbsd.org	2017/04/20 04:32:29

Modified files:
	faq            : current.html 

Log message:
remove unneeded "compile libcxx" step from clang bootstrap instructions


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 05:20:20

Modified files:
	www/owncloud   : Makefile distinfo 
	www/owncloud/patches: patch-version_php 
	www/owncloud/pkg: PLIST 

Log message:
Update to owncloud-9.1.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 05:21:46

Modified files:
	www/owncloud   : Tag: OPENBSD_6_1 Makefile distinfo 
	www/owncloud/patches: Tag: OPENBSD_6_1 patch-version_php 
	www/owncloud/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
MFC:
Update to owncloud-9.1.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/20 05:23:48

Removed files:
	games/supertux/patches: patch-src_supertux_main_cpp 

Log message:
Remove now unused patch.  Blame cvs.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 06:41:43

Modified files:
	sys/arch/amd64/amd64: db_trace.c 
	sys/arch/i386/i386: db_trace.c 
	sys/ddb        : db_access.h db_output.c 

Log message:
Add routines for saving stack traces and printing saved traces
on amd64 and i386.

With guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 06:59:36

Modified files:
	sys/conf       : files 
	sys/ddb        : db_command.c 
	sys/kern       : init_main.c kern_exit.c kern_fork.c kern_sig.c 
	sys/sys        : proc.h 
Added files:
	sys/kern       : subr_witness.c 
	sys/sys        : _lock.h witness.h 

Log message:
Add a port of witness(4) lock validation tool from FreeBSD.

Go-ahead from kettenis@, guenther@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 07:20:17

Modified files:
	sys/arch/amd64/amd64: lock_machdep.c 
	sys/arch/amd64/include: mplock.h 
	sys/arch/i386/i386: lock_machdep.c 
	sys/arch/i386/include: mplock.h 
	sys/kern       : kern_lock.c 
	sys/sys        : systm.h 

Log message:
Hook up mplock to witness(4) on amd64 and i386.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 07:33:00

Modified files:
	sys/kern       : kern_rwlock.c kern_synch.c 
	sys/sys        : rwlock.h 

Log message:
Hook up rwlock(9) to witness(4).

Loosely based on a diff from Christian Ludwig


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/20 07:48:29

Log message:
    Import emulators/ucon64.
    
    uCON64 is the emulator Swiss Army knife program.
    
    It supports almost every video game system (Consoles, Handheld, Arcade),
    as well as all common patch file formats like IPS (with RLE compression),
    APS, BSL (Baseline Patch format), PPF (Playstation Patch File), and Game
    Genie.
    
    OK pirofti@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170420
    
    N ports/emulators/ucon64/Makefile
    N ports/emulators/ucon64/distinfo
    N ports/emulators/ucon64/pkg/PLIST
    N ports/emulators/ucon64/pkg/DESCR
    N ports/emulators/ucon64/patches/patch-src_Makefile
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/20 07:49:12

Modified files:
	emulators      : Makefile 

Log message:
Add ucon64.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 07:57:30

Modified files:
	sys/arch/alpha/alpha: mutex.c 
	sys/arch/alpha/include: mutex.h 
	sys/arch/amd64/amd64: mutex.S 
	sys/arch/amd64/include: mutex.h 
	sys/arch/arm/armv7: armv7_mutex.c 
	sys/arch/arm/include: mutex.h 
	sys/arch/arm64/include: mutex.h 
	sys/arch/hppa/hppa: mutex.c 
	sys/arch/hppa/include: mutex.h 
	sys/arch/i386/i386: mutex.S 
	sys/arch/i386/include: mutex.h 
	sys/arch/m88k/include: mutex.h 
	sys/arch/m88k/m88k: mutex.S 
	sys/arch/mips64/include: mutex.h 
	sys/arch/mips64/mips64: mutex.c 
	sys/arch/powerpc/include: mutex.h 
	sys/arch/powerpc/powerpc: mutex.c 
	sys/arch/sh/include: mutex.h 
	sys/arch/sh/sh : mutex.c 
	sys/arch/sparc64/include: mutex.h 
	sys/arch/sparc64/sparc64: mutex.S 
	sys/conf       : files 
	sys/kern       : kern_synch.c 
	sys/sys        : mutex.h 
Added files:
	sys/kern       : kern_mutex.c 

Log message:
Hook up mutex(9) to witness(4).


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 08:13:01

Modified files:
	sys/arch/amd64/amd64: db_interface.c 
	sys/arch/i386/i386: db_mp.c mem.c 
	sys/dev/pci/drm: drm_crtc.c 
	sys/isofs/cd9660: cd9660_vfsops.c 
	sys/isofs/udf  : udf_vfsops.c 
	sys/kern       : subr_disk.c subr_pool.c subr_prf.c vfs_subr.c 
	sys/miscfs/fuse: fuse_vfsops.c 
	sys/msdosfs    : msdosfs_denode.c 
	sys/net        : bpf.c 
	sys/tmpfs      : tmpfs_subr.c 
	sys/ufs/ext2fs : ext2fs_vfsops.c 
	sys/ufs/ffs    : ffs_vfsops.c 
	sys/uvm        : uvm_map.c 

Log message:
Tweak lock inits to make the system runnable with witness(4)
on amd64 and i386.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 08:23:53

Modified files:
	sys/conf       : GENERIC 

Log message:
Add option to compile witness(4).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 08:26:08

Modified files:
	devel/libsoup  : Makefile distinfo 
	devel/libsoup/pkg: PLIST 

Log message:
Update to libsoup-2.58.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/20 08:43:59

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
Remove an incorrect Bay Trail I2C entry that masked a valid Bay Trail
PCIE entry as it used the same product id.

Add another PLX/Avago/"Broadcom" PCIE bridge seen in the wild while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/20 08:44:51

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 09:06:47

Modified files:
	sys/kern       : kern_lock.c 

Log message:
Drop unnecessary headers. This fixes kernel build on platforms
without <machine/mplock.h>.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 09:09:05

Modified files:
	x11/gnome      : gnome.port.mk 

Log message:
typo; broke (at least) deja-dup, as reported by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 09:16:20

Modified files:
	usr.bin/tmux   : server-client.c 

Log message:
Only set up a current target for mouse key bindings. Fixes:

bind q select-pane -U \; resize-pane -Z

(There is still some possible weirdness with the way we do current
targets, it should probably be done in a different way at some point.)


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/20 09:21:53

Modified files:
	sys/sys        : ktrace.h pledge.h syscall_mi.h 
	sys/kern       : kern_pledge.c 

Log message:
only 32 bits of the pledgecode were passed up via ktrace
from Anton Lindqvist
ok semarie


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 09:42:26

Modified files:
	sys/arch/mips64/include: cpu.h mips_cpu.h mips_opcode.h tcb.h 
	sys/arch/mips64/mips64: context.S cpu.c genassym.cf trap.c 
	sys/arch/octeon/octeon: machdep.c 

Log message:
Make TCB address available to userspace via the UserLocal register.
This lets programs get the address without a system call on OCTEON II
and later.

Add UserLocal load emulation for systems that do not implement
the RDHWR instruction or the UserLocal register.

OK guenther@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/20 09:52:29

Added files:
	games/micropolis/patches: patch-src_sim_g_bigmap_c 
	                          patch-src_sim_g_map_c 
	                          patch-src_sim_g_setup_c 
	                          patch-src_sim_s_disast_c 
	                          patch-src_sim_s_gen_c 
	                          patch-src_sim_s_msg_c 
	                          patch-src_sim_s_power_c 
	                          patch-src_sim_s_sim_c 
	                          patch-src_sim_s_zone_c 
	                          patch-src_sim_sim_c 
	                          patch-src_sim_w_con_c 
	                          patch-src_sim_w_date_c 
	                          patch-src_sim_w_editor_c 
	                          patch-src_sim_w_graph_c 
	                          patch-src_sim_w_map_c 
	                          patch-src_sim_w_sound_c 
	                          patch-src_sim_w_sprite_c 
	                          patch-src_sim_w_tool_c 
	                          patch-src_sim_w_update_c 
	                          patch-src_sim_w_util_c 
	                          patch-src_sim_w_x_c 
	                          patch-src_tcl_tclenv_c 

Log message:
declare a shitload of functions void to appease clang who definitely
does not like void returns in non void functions.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 10:07:52

Modified files:
	include        : tib.h 
	lib/libc/include: cancel.h 
	sys/arch/mips64/include: tcb.h 

Log message:
Get TCB address using the RDHWR instruction instead of __get_tcb().
This gives fast access to the address on systems that implement
the UserLocal register. TCB caching is still used when running
in the single-threaded mode in order not to penalize old systems.

The kernel counterpart of this change must be in place before
using this diff!

With guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/20 10:30:37

Modified files:
	distrib/sets/lists/comp: clang.amd64 clang.i386 mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/20 11:16:32

Modified files:
	lib/libc/include: cancel.h 

Log message:
Fix previous.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 11:48:30

Modified files:
	lib/libutil    : openpty.3 pty.c shlib_version util.h 

Log message:
Add getptmfd(), fdopenpty(), fdforkpty() functions. These allow programs
to separate the open(/dev/ptm) from the ioctl(PTMGET) for privilege
separation or pledge().

Based on a diff from reyk@.

ok deraadt millert


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 11:49:26

Modified files:
	usr.bin/tmux   : Makefile tmux.c tmux.h window.c 
Removed files:
	usr.bin/tmux   : pty.c 

Log message:
Use fdforkpty() instead of our own unwrapped versions.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/20 12:30:33

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/20 12:49:37

Modified files:
	x11/gnome/file-roller: Makefile distinfo 
	x11/gnome/file-roller/pkg: PLIST 

Log message:
update to file-roller-3.24.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/20 12:49:37

Modified files:
	devel/libgdata : Makefile distinfo 

Log message:
update to libgdata-0.17.8


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/20 13:01:58

Modified files:
	net/telepathy/folks: Makefile 

Log message:
add missing dep on intltool; spotted by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/20 13:02:40

Modified files:
	graphics/gthumb: Makefile distinfo 

Log message:
update to gthumb-3.4.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/20 13:15:02

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to p5-SVG-2.68


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/20 13:15:45

Modified files:
	net/apache-activemq: Makefile distinfo 

Log message:
- update to apache-activemq-5.14.5
- drop maintainer


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/20 13:30:42

Modified files:
	lib/libutil    : openpty.3 

Log message:
add previous to NAME;


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/20 13:40:51

Modified files:
	www/firefox-esr: Tag: OPENBSD_6_1 Makefile distinfo 
	www/firefox-esr/pkg: Tag: OPENBSD_6_1 PLIST 
	www/firefox-esr-i18n: Tag: OPENBSD_6_1 Makefile.inc distinfo 
Removed files:
	www/firefox-esr/patches: Tag: OPENBSD_6_1 
	                         patch-browser_installer_allowed-dupes_mn 

Log message:
MFC: update to firefox-esr 52.1.0.

Over time i'll see if i maintain this or give up.
Stable packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/20 13:44:46

Modified files:
	www/firefox-i18n: Tag: OPENBSD_6_1 Makefile.inc distinfo 
	www/mozilla-firefox: Tag: OPENBSD_6_1 Makefile distinfo 
	www/mozilla-firefox/patches: Tag: OPENBSD_6_1 
	                             patch-js_src_jit_ProcessExecutableMemory_cpp 
	                             patch-security_manager_pki_resources_content_exceptionDialog_js 
	                             patch-storage_mozStorageConnection_cpp 
	www/mozilla-firefox/pkg: Tag: OPENBSD_6_1 PLIST README 
Added files:
	www/mozilla-firefox/patches: Tag: OPENBSD_6_1 
	                             patch-nsprpub_pr_src_linking_prlink_c 
	                             patch-security_nss_coreconf_OpenBSD_mk 
	                             patch-security_nss_coreconf_UNIX_mk 
	                             patch-security_nss_lib_freebl_blapi_h 

Log message:
MFC: update to firefox 53.0.

Over time i'll see if i keep doing this in -stable or give up.
"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub

Changes from -current include:
- dont bump SO_VERSION
- build against bundled nss/nspr (53 wants nss 3.29.5)
- add selected patches from devel/nspr and security/nss
- build against bundled hunspell (53 wants 1.6)
- add BDEP on rust/cargo


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/20 14:38:02

Modified files:
	editors/nano   : Makefile distinfo 
	editors/nano/patches: patch-doc_nano_1 patch-src_Makefile_in 
	editors/nano/pkg: PLIST 

Log message:
update to 2.8.1: improvements in moving in softwrapped lines and
miscellaneous other tweaks


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/20 15:23:17

Modified files:
	usr.bin/less   : charset.c 

Log message:
control_char() for ASCII needs to include both genuine control
characters and top-bit-set nonprintable characters (so both iscntrl()
and !isprint()), fixes behaviour broken in r1.15/r1.16, noticed by
deraadt@.

ok deraadt tedu


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/20 16:17:28

Modified files:
	security/libhttpseverywhere: Makefile distinfo 

Log message:
Update to libhttpseverywhere-0.4.2.


CVSROOT:	/cvs
Module name:	www
Changes by:	danj@cvs.openbsd.org	2017/04/20 20:15:57

Modified files:
	faq            : faq14.html index.html 

Log message:
Add a section on how to grow disk partitions.

With and ok tj@ tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kurt@cvs.openbsd.org	2017/04/20 20:30:40

Modified files:
	devel/jdk/1.8  : Makefile 
Added files:
	devel/jdk/1.8/patches: patch-hotspot_src_share_vm_opto_lcm_cpp 
	                       patch-hotspot_src_share_vm_runtime_virtualspace_cpp 

Log message:
- patches to allow build with clang 4.0
- uncomment MAKE_ENV+=USE_CLANG=true to build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/20 22:13:11

ports/www/netsurf/libsvgtiny/patches

Update of /cvs/ports/www/netsurf/libsvgtiny/patches
In directory cvs.openbsd.org:/tmp/cvs-serv71637/patches

Log Message:
Directory /cvs/ports/www/netsurf/libsvgtiny/patches added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/20 22:18:47

Modified files:
	usr.sbin/vmd   : pci.c 

Log message:
vmd(8) pci emulation fix required for upcoming option rom support.
This will be used in the future to support an sgabios option rom, to
do VGA text mode console redirection.

ok reyk


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/21 01:03:26

Modified files:
	usr.sbin/vmd   : config.c control.c dhcp.c parse.y priv.c 
	                 vm.conf.5 vmd.c vmd.h vmm.c 

Log message:
Add global configuration option "local prefix" to change prefix for -L.

The default prefix is 100.64.0.0/10 from RFC6598.

Requested by sthen@ chris@
OK mlarkin@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/21 01:17:43

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.42.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/21 01:17:57

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.79.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/21 02:08:44

Modified files:
	mail/mutt      : Makefile 

Log message:
Actually build sidebar, as was intended in r1.88. Pointed out by Piotr Kubaj.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/21 03:42:53

Modified files:
	sys/dev/usb    : if_cdce.c 

Log message:
Use ether_crc32_le() instead of a custom version.

From Hiltjo Posthuma.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/21 05:02:10

Modified files:
	usr.sbin/vmd   : parse.y 

Log message:
Fail if vm.conf exists but cannot be opened, ignore if it doesn't exist.

This fixes 'vmd -nf /etv/vm.conf' if the file is not readable.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/21 05:40:08

Modified files:
	sysutils/firmware/iwm: Makefile distinfo 
	sysutils/firmware/iwm/pkg: PLIST 

Log message:
Add 3168/8265 firmware. Forgotten update from during ports lock (but
firmware packages built using this are already available).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/21 05:51:24

Modified files:
	textproc/calibre: Makefile distinfo 
	textproc/calibre/pkg: PLIST 

Log message:
update to calibre-2.83.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/21 06:18:30

Modified files:
	graphics/darktable: Makefile 

Log message:
move comment re TLS emulation down to MODGCC4_ARCHS line


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 07:15:43

Modified files:
	usr.bin/tmux   : cfg.c 

Log message:
Do not run the config file in the context of the first client, instead
use no client like we did before. This means commands like new-session
won't try to attach if they are in the config file.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kurt@cvs.openbsd.org	2017/04/21 07:27:47

Modified files:
	databases/architect: Makefile 
	databases/db/v4: Makefile 
	databases/jxplorer: Makefile 
	devel/apache-ant: Makefile 
	devel/apktool  : Makefile 
	devel/dex2jar  : Makefile 
	devel/javahelp : Makefile 
	devel/jd-gui   : Makefile 
	devel/jdk      : Makefile java.port.mk 
	devel/jenkins/devel: Makefile 
	devel/jenkins/stable: Makefile 
	devel/maven    : Makefile 
	editors/libreoffice: Makefile 
	games/freecol  : Makefile 
	games/jbrickshooter: Makefile 
	games/lwjgl    : Makefile 
	games/minecraft: Makefile 
	geo/jeoip      : Makefile 
	java/jBCrypt   : Makefile 
	java/java-getopt: Makefile 
	java/java-getopt/pkg: PLIST 
	java/jna       : Makefile 
	java/jna/pkg   : PLIST 
	java/junit     : Makefile 
	java/tanukiwrapper: Makefile 
	lang/abcl      : Makefile 
	lang/clojure   : Makefile 
	lang/kawa      : Makefile 
	lang/processing: Makefile 
	lang/scala     : Makefile 
	math/geogebra  : Makefile 
	net/aircontrol : Makefile 
	net/apache-activemq: Makefile 
	net/mfi        : Makefile 
	productivity/deskzilla: Makefile 
	productivity/projectlibre: Makefile 
	productivity/thinkingrock: Makefile 
	security/burpsuite: Makefile 
	security/zaproxy: Makefile 
	sysutils/ec2-api-tools: Makefile 
	sysutils/rundeck: Makefile 
	textproc/link-grammar: Makefile 
	textproc/stringtemplate: Makefile 
	textproc/xalan-j: Makefile 
	textproc/xerces: Makefile 
	www/icedtea-web: Makefile 
	www/tomcat/v6  : Makefile 
	www/tomcat/v7  : Makefile 
	www/tomcat/v8  : Makefile 
	x11/kde4/kross-interpreters: Makefile 

Log message:
- disconnect devel/jdk/1.7 from the build
- adjust java.port.mk so all 1.7 and lower ports now build with 1.8
- bump revision on affected ports
okay sthen@, ian@, landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/21 07:46:16

Modified files:
	usr.sbin/snmpd : trap.c 

Log message:
Fix uninitialized variable that coult result in a crash.

Fix from Rivo Nurges.


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/04/21 07:50:23

Modified files:
	usr.sbin/snmpd : control.c snmpd.h snmpe.c 

Log message:
Repair AgentX support.

which I broke when adding support for multiple listen address.  SNMP
data should be sent to the client using the appropriate socket, which we
now store when we receive the query.

Reported & fix tested by Rivo Nurges.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/21 07:57:36

Added files:
	net/xprobe/patches: patch-libs-external_USI++_src_misc_cc 

Log message:
Missing include for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/21 07:58:00

Modified files:
	net/xprobe     : Makefile 

Log message:
Respect CC/CXX.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 08:01:19

Modified files:
	usr.bin/tmux   : cmd-attach-session.c cmd-copy-mode.c cmd-find.c 
	                 cmd-if-shell.c cmd-list-keys.c 
	                 cmd-new-session.c cmd-queue.c cmd-resize-pane.c 
	                 cmd-send-keys.c cmd-switch-client.c format.c 
	                 key-bindings.c server-client.c tmux.h 

Log message:
Store state shared between multiple commands in the queue in a shared
structure.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 08:04:54

Modified files:
	usr.bin/tmux   : cfg.c server.c 

Log message:
History needs to be loaded after config parsing is done - now that
commands are queued, that's in cfg_done not after start_cfg finishes.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 08:09:44

Modified files:
	usr.bin/tmux   : alerts.c cmd-find.c cmd-new-window.c notify.c 
	                 tmux.h 

Log message:
More unnecessary arguments now winlink points back to session.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/21 08:39:40

Modified files:
	audio          : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	audio/teknap   : Makefile distinfo 
	audio/teknap/patches: patch-Makefile_in patch-include_napster_h 
	                      patch-include_struct_h 
	                      patch-source_irchandler_c 
	                      patch-source_scott_c patch-source_status_c 
	                      patch-source_term_c 
	audio/teknap/pkg: DESCR PLIST 

Log message:
Remove teknap, a Napster client.  Napster and OpenNap are dead.  ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 10:04:18

Modified files:
	usr.bin/tmux   : server-client.c tmux.h 

Log message:
It is annoying that the copy mode key table (or any other key table)
will suppress root key table bindings. So change to always check the
root table if no binding is found in the current table (whether it be
the prefix table from pressing the prefix or the copy mode table from a
pane).

A root key binding can be blocked by binding the key to a command that
does nothing (like send-keys with no arguments).

Problem reported by Thomas Sattler.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/04/21 10:10:24

Modified files:
	.              : groups.html 
	build          : groups.dat 

Log message:
Add Iranian meetBSD group (http://meetbsd.ir/) to groups.html.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/21 10:39:52

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Fix nic lock usages around iwm_{read,write}_prph().

The iwm_{read,write}_prph() calls don't grab the nic lock themselves
so make sure to acquire it where necessary.
The iwm_{set,clear}_bits_prph() on the other hand acquire/release the
nic lock themselves. Since the nic lock doesn't do recursive locking
we need to be careful to avoid accidentally releasing the nic lock
too early that way.

Patch by Imre Vadasz.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/21 10:40:11

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Fix nic lock usage around iwm_disable_rx_dma().
iwm_disable_rx_dma() was unintentionally releasing the nic lock too early.
Patch by Imre Vadasz.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/21 10:41:20

Modified files:
	net/dhcpcd     : Makefile 
Added files:
	net/dhcpcd/patches: patch-if-bsd_c 

Log message:
Remove dhcpcd's workaround for exported vltime/pltime being incorrect
which was fixed in netinet6/in6.c.


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/21 11:04:35

Modified files:
	www/icedtea-web: Makefile 

Log message:
Depend on a specific java version
spotted and ok kurt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/21 11:08:01

Modified files:
	sysutils/smartmontools: Makefile 
	sysutils/smartmontools/patches: patch-Makefile_in 

Log message:
spring cleanup, no functional change
bump just to be sure
spotted and ok Rafael Sadowski


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 11:22:21

Modified files:
	usr.bin/tmux   : cmd-find.c cmd-split-window.c server-client.c 
	                 tmux.h 

Log message:
Add cmd_find_from_winlink_pane and use it in a couple of places, and
make functions that can't fail void.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/21 11:26:32

Modified files:
	x11/gnustep/camerakit: Makefile 
	x11/gnustep/cynthiune: Makefile 
	x11/gnustep/databasinkit: Makefile 
	x11/gnustep/highlighterkit: Makefile 
	x11/gnustep/paje: Makefile 
	x11/gnustep/pantomime: Makefile 
	x11/gnustep/pdfkit: Makefile 
	x11/gnustep/projectcenter: Makefile 
	x11/gnustep/rsskit: Makefile 
	x11/gnustep/systempreferences: Makefile 

Log message:
Bump REVISION after update of gnustep-make

The symlink of the shared library in lib doesn't point to
GNUstep/Frameworks/$FRAMEWORK.framework/Versions/Current/libnetclasses.so.${SHLIB_VERSION}
anymore but now to
GNUstep/Frameworks/netclasses.framework/Versions/${SHLIB_VERSION}/libnetclasses.so.${SHLIB_VERSION}

It's not easily visible in pkg/PLIST, but on package creation plistdb catched it

problem pointed out by nigel@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/21 11:27:38

Modified files:
	www/sogo       : Makefile 

Log message:
Bump REVISION after update of gnustep-make

The symlink of the shared library in lib doesn't point to
GNUstep/Frameworks/$FRAMEWORK.framework/Versions/Current/libnetclasses.so.${SHLIB_VERSION}
anymore but now to
GNUstep/Frameworks/netclasses.framework/Versions/${SHLIB_VERSION}/libnetclasses.so.${SHLIB_VERSION}

It's not easily visible in pkg/PLIST, but on package creation plistdb catched it

problem pointed out by nigel@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/21 11:54:02

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Make id parameter of iwm_send_cmd_pdu() a uint32_t so that it matches
the size of the corresponding id field in struct iwm_host_cmd.
Patch by Imre Vadasz.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/21 12:04:34

Modified files:
	x11/gnome/gtef : Makefile distinfo 
	x11/gnome/gtef/pkg: PLIST 

Log message:
Update to gtef-2.0.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 12:18:17

Modified files:
	usr.bin/tmux   : cmd-queue.c tmux.h 

Log message:
Style nits and an unused struct.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kurt@cvs.openbsd.org	2017/04/21 12:37:43

Modified files:
	devel/cmake    : Makefile 
	devel/cmake/patches: 
	                     patch-Modules_CMakeDetermineJavaCompiler_cmake 
	                     patch-Modules_FindJNI_cmake 
	                     patch-Modules_FindJava_cmake 

Log message:
Update for devel/jdk/1.7 removal. okay dcoppa@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/21 12:39:23

Modified files:
	x11/gnome/settings-daemon/patches: patch-configure 

Log message:
Pushed upstream.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/21 13:04:22

Modified files:
	sys/sys        : _endian.h 

Log message:
Cast the result of the __swapXX macros to the proper type.
The ternary operator was causing the result to be promoted to
int for __swap16.  Fixes warning with clang.  OK guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 13:33:07

Modified files:
	usr.bin/tmux   : key-bindings.c server-client.c 

Log message:
Key needs to be initialized to zero now it has flags in it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/21 13:41:18

Modified files:
	x11/gnome/gjs  : Makefile distinfo 

Log message:
update to gjs-1.48.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/21 13:43:38

Modified files:
	devel/doxygen  : Makefile distinfo 

Log message:
update to doxygen-1.8.13

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/21 13:44:31

Modified files:
	devel/doxygen-gui: Makefile distinfo 

Log message:
update to doxygen-gui-1.8.13

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/21 13:46:46

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to p5-SVG-2.69


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 14:26:34

Modified files:
	usr.bin/tmux   : cmd-find.c cmd-queue.c cmd-run-shell.c cmd.c 
	                 notify.c server.c tmux.h 

Log message:
Make the cmd_find_* functions more obvious when looking for a client,
rather than having it inside other functions. Should be no change to the
way targets are resolved just yet.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 14:34:05

Modified files:
	usr.bin/tmux   : cmd-queue.c 

Log message:
Clear shared state if not filling it in.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/04/21 14:34:19

Modified files:
	www/netsurf/libsvgtiny: Makefile 
Added files:
	www/netsurf/libsvgtiny/patches: patch-src_Makefile 
	                                patch-src_colors_gperf 
	                                patch-src_svgtiny_c 
	                                patch-src_svgtiny_internal_h 

Log message:
Fix build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/04/21 14:46:42

Modified files:
	www/selfoss    : Makefile distinfo 
	www/selfoss/pkg: PLIST 

Log message:
Update www/selfoss to 2.17

OK aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/04/21 14:59:40

Modified files:
	net/nagios/cnagios: Makefile distinfo 

Log message:
Update net/nagios/cnagios to 0.33 and switch to github.

Feedback and OK sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 15:02:26

Modified files:
	usr.bin/tmux   : cmd-select-pane.c 

Log message:
Rename a variable.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/21 15:07:31

Modified files:
	faq            : index.html 

Log message:
Accesing -> Accessing

spotted by stefan wollny, thanks


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/21 15:24:44

Modified files:
	audio/schismtracker: Makefile distinfo 
	audio/schismtracker/patches: patch-configure_ac 

Log message:
Update schismtracker to 20170420.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 16:00:06

Modified files:
	usr.bin/tmux   : cmd-find.c 

Log message:
Make sure cmd_find_from_* clear the state if they fail.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/21 16:23:24

Modified files:
	usr.bin/tmux   : cmd-find.c cmd-queue.c server-client.c 

Log message:
Log error properly when no current state, and some other minor tweaks.


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/04/21 17:21:02

Modified files:
	sys/net        : pf_ioctl.c 

Log message:
Speed up DIOCKILLSTATES by using the RB tree index if all fields used
by the tree of given state key are filled.

ok sasha


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/04/21 17:22:49

Modified files:
	sbin/pfctl     : pfctl.8 pfctl.c 

Log message:
Add "key" modifier for -k to make pfctl can kill a state by specifying
the key of the state.

ok sasha


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 19:42:27

Added files:
	audio/sidplay/patches: patch-sid2wav_cpp patch-sidcon_cpp 
	                       patch-sidplay_cpp 

Log message:
use standard c++ includes to fix the build with clang
ok sthen@ naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 20:14:04

Modified files:
	converters/ish/patches: patch-mvol_c 

Log message:
Add a non-implicit return type to a function that returns without an
argument to fix build with clang.  Add some missing includes while here.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 21:11:36

Added files:
	devel/pygame/patches: patch-src_scale_mmx64_c 

Log message:
Backport a patch to let pygame build with clang on amd64 by replacing
movsxl with movslq in inline assembly.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/21 22:00:21

Modified files:
	share/man/man4 : Makefile 
Added files:
	share/man/man4 : witness.4 

Log message:
Manual page for witness(4). Adapted from FreeBSD.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 22:08:39

ports/geo/globe/patches

Update of /cvs/ports/geo/globe/patches
In directory cvs.openbsd.org:/tmp/cvs-serv52370/patches

Log Message:
Directory /cvs/ports/geo/globe/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 22:10:48

Added files:
	geo/globe/patches: patch-globe_c 

Log message:
fix the argv argument to main to let this build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 22:53:17

Modified files:
	japanese/kanjips/patches: patch-kanjips_kanjips_c 

Log message:
add a non-implicit return type to a function to fix the build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 23:34:00

Modified files:
	misc/garmin-utils/patches: patch-Makefile_inc 

Log message:
remove -Werror to fix the build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/21 23:54:02

Added files:
	misc/uniutils/patches: patch-unifuzz_c 

Log message:
add a non-implicit return type to a function to fix the build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 00:00:01

Added files:
	net/icbirc/patches: patch-Makefile 

Log message:
remove -Werror to fix the build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 00:02:53

ports/net/kissd/patches

Update of /cvs/ports/net/kissd/patches
In directory cvs.openbsd.org:/tmp/cvs-serv77877/patches

Log Message:
Directory /cvs/ports/net/kissd/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 00:03:47

Added files:
	net/kissd/patches: patch-Makefile 

Log message:
remove -Werror to fix the build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 00:13:30

Modified files:
	usr.bin/tmux   : cmd-load-buffer.c cmd-save-buffer.c 
	                 cmd-set-option.c options.c server.c 

Log message:
Memory leaks, from David CARLIER.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 00:14:19

Added files:
	net/openvpn_bsdauth/patches: patch-Makefile 

Log message:
remove -Werror and -Wbounded to fix the build with clang
-Wbounded only exists in base gcc where it is enabled by default


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 00:15:22

Modified files:
	usr.bin/tmux   : tmux.1 

Log message:
Typo in example.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 00:27:15

Modified files:
	usr.bin/tmux   : cmd-if-shell.c 

Log message:
Fix if-shell without a client (so in the config file). Reported by Theo
Buehler.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 01:02:54

Added files:
	x11/bricons/patches: patch-main_c 

Log message:
fix the type of an argument to main to fix the build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 01:35:31

Added files:
	x11/fltk/patches: patch-src_Fl_Tree_Item_cxx 

Log message:
Backport a fix for an incorrect pointer test.  Fixes the build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/22 01:36:27

Modified files:
	security/knockpy: Makefile distinfo 
	security/knockpy/pkg: PLIST 

Log message:
update to knockpy-4.0.0

ok danj@ landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/22 01:47:35

Modified files:
	www/iridium    : Makefile 

Log message:
add missing build dependency for gtk+3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 01:50:21

Added files:
	x11/fluxbox/patches: patch-util_fluxbox-remote_cc 

Log message:
Backport a fix for an incorrect pointer test.  Fixes the build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 02:05:41

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.43.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 02:05:55

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.80.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 02:13:28

Modified files:
	print/foomatic-db: Tag: OPENBSD_6_1 Makefile 
	print/foomatic-db/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
MFC: Remove foo2hiperc-z1, it conflicts with foo2zjs.
req. by stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 02:27:57

Modified files:
	x11/xcoloredit/patches: patch-xcoloredit_c 

Log message:
fix the type of an argument to main to fix the build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 02:33:28

Modified files:
	usr.bin/tmux   : input.c 

Log message:
We need to collect UTF-8 characters so that width != 1 characters are
correctly flushed.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 02:37:20

Added files:
	x11/xcolors/patches: patch-xcolors_c 

Log message:
add a non-implicit return type to a function to fix the build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 02:46:35

ports/x11/xprompt/patches

Update of /cvs/ports/x11/xprompt/patches
In directory cvs.openbsd.org:/tmp/cvs-serv95901/patches

Log Message:
Directory /cvs/ports/x11/xprompt/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/22 02:48:06

Added files:
	x11/xprompt/patches: patch-xprompt_c 

Log message:
fix the type of an argument to main to fix the build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 02:56:24

Modified files:
	usr.bin/tmux   : cmd-attach-session.c cmd-break-pane.c 
	                 cmd-find-window.c cmd-join-pane.c 
	                 cmd-new-session.c cmd-new-window.c 
	                 cmd-select-pane.c cmd-select-window.c 
	                 cmd-split-window.c cmd-switch-client.c 
	                 server-client.c 

Log message:
Mouse bindings and hooks set up an initial current state when running a
command. This is used for the session, window and pane for all commands
in the command sequence if there is no -t or -s.

However, using it for all commands in the command sequence means that if
the active pane or current session is changed, subsequent commands still
use the previous state. So make commands which explicitly change the
current state (such as neww and selectp) update it themselves for later
commands. Commands which may invalidate the state (like killp) are
already OK because an invalid state will be ignored.

Also fill in the current state for all key bindings rather than just the
mouse, so that any omissions are easier to spot.


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/22 03:12:49

Modified files:
	lib/libc/stdlib: malloc.c 

Log message:
For small allocations (chunk) freezero only validates the given
size if canaries are enabled. In that case we have the exact requested
size of the allocation.  But we can at least check the given size
against the chunk size if C is not enabled. Plus add some braces
so my brain doesn't have to scan for dangling else problems when I
see this code.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 03:18:03

Modified files:
	x11/gnome/settings-daemon: Makefile 
	x11/gnome/settings-daemon/pkg: PLIST 
Removed files:
	x11/gnome/settings-daemon/files: 
	                                 10_org.gnome.settings-daemon.peripherals.wacom.gschema.override 
	                                 10_org.gnome.settings-daemon.plugins.orientation.gschema.override 

Log message:
No need for the overrides anymore since it's not possible to disable
individual plugins.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 03:37:58

ports/x11/gnome/bijiben/patches

Update of /cvs/ports/x11/gnome/bijiben/patches
In directory cvs.openbsd.org:/tmp/cvs-serv56325/patches

Log Message:
Directory /cvs/ports/x11/gnome/bijiben/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 03:38:17

Modified files:
	x11/gnome/bijiben: Makefile 
Added files:
	x11/gnome/bijiben/patches: 
	                           patch-data_org_gnome_bijiben-search-provider_ini 
	                           patch-src_bijiben-shell-search-provider_c 

Log message:
Fix gnome-shell search provider.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 03:55:16

Modified files:
	lang/go        : go.port.mk 

Log message:
Use MODGO_post-patch instead of checking for an existing post-patch target.
This will allow go ports to setup a post-patch target when needed.

ok czarkoff@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/22 04:10:05

ports/devel/kf5/sonnet/patches

Update of /cvs/ports/devel/kf5/sonnet/patches
In directory cvs.openbsd.org:/tmp/cvs-serv64305/patches

Log Message:
Directory /cvs/ports/devel/kf5/sonnet/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/22 04:13:11

Added files:
	devel/kf5/sonnet/patches: patch-cmake_FindHUNSPELL_cmake 

Log message:
Fix build with hunspell-1.6, somehow i failed to spot this one. Breakage
reported by naddy@. If only cmake shipped a FindHUNSPELL.cmake module,
instead of having one installed by kdelibs (and thus, a hidden build
dep) and one in sonnet source tarball....


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 04:22:39

Modified files:
	usr.bin/tmux   : cmd-attach-session.c cmd-break-pane.c 
	                 cmd-capture-pane.c cmd-choose-buffer.c 
	                 cmd-choose-client.c cmd-choose-tree.c 
	                 cmd-command-prompt.c cmd-confirm-before.c 
	                 cmd-copy-mode.c cmd-detach-client.c 
	                 cmd-display-message.c cmd-display-panes.c 
	                 cmd-find-window.c cmd-find.c cmd-if-shell.c 
	                 cmd-join-pane.c cmd-kill-pane.c 
	                 cmd-kill-session.c cmd-kill-window.c 
	                 cmd-list-clients.c cmd-list-panes.c 
	                 cmd-list-windows.c cmd-lock-server.c 
	                 cmd-move-window.c cmd-new-session.c 
	                 cmd-new-window.c cmd-paste-buffer.c 
	                 cmd-pipe-pane.c cmd-queue.c 
	                 cmd-refresh-client.c cmd-rename-session.c 
	                 cmd-rename-window.c cmd-resize-pane.c 
	                 cmd-respawn-pane.c cmd-respawn-window.c 
	                 cmd-rotate-window.c cmd-run-shell.c 
	                 cmd-select-layout.c cmd-select-pane.c 
	                 cmd-select-window.c cmd-send-keys.c 
	                 cmd-set-environment.c cmd-set-hook.c 
	                 cmd-set-option.c cmd-show-environment.c 
	                 cmd-show-messages.c cmd-show-options.c 
	                 cmd-split-window.c cmd-swap-pane.c 
	                 cmd-swap-window.c cmd-switch-client.c cmd.c 
	                 tmux.h 

Log message:
Get rid of the extra layer of flags and cmd_prepare() and just store the
CMD_FIND_* flags in the cmd_entry and call it for the command. Commands
with special requirements call it themselves and update the target for
hooks to use.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/22 04:25:32

Modified files:
	textproc/elasticsearch: Makefile distinfo 
	textproc/elasticsearch/pkg: PLIST 

Log message:
update to elasticsearch-5.3.1

https://www.elastic.co/guide/en/elasticsearch/reference/5.3/release-notes-5.3.1.html


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 04:26:44

Modified files:
	usr.bin/tmux   : cmd-new-session.c 

Log message:
new -A should use the session name.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 04:30:56

Modified files:
	usr.bin/tmux   : screen-write.c 

Log message:
Can't collect UTF-8 characters of more than one byte at the moment.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/22 04:34:45

Modified files:
	archivers/lzip/lziprecover: Makefile distinfo 

Log message:
Update to lziprecover 1.19.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/22 04:49:46

Modified files:
	archivers/lzip/pdlzip: Makefile distinfo 

Log message:
Update to pdlzip 1.8.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/22 04:50:23

Modified files:
	mail/rspamd    : Makefile distinfo 

Log message:
Update to rspamd-1.5.6, same diff me and Brad.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/22 04:52:10

Modified files:
	sysutils/ansible: Makefile distinfo 
	sysutils/ansible/pkg: PLIST 
Removed files:
	sysutils/ansible/patches: 
	                          patch-lib_ansible_module_utils_facts_py 

Log message:
update to ansible-2.3.0


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/22 05:05:04

Modified files:
	share/man/man4 : ddb.4 options.4 witness.4 

Log message:
Shuffle bits into their proper files.

Prompted by jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/22 05:12:04

Modified files:
	share/man/man4 : witness.4 

Log message:
Xr mutex(9) and rwlock(9)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 05:16:26

Modified files:
	x11/gnome/gdm  : Makefile 
	x11/gnome/gdm/pkg: PLIST 
Added files:
	x11/gnome/gdm/files: gdm-autologin 

Log message:
Re-add the gdm-autologin pam file.
Prodded by sthen@; I never though autologin actually worked :-)


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/22 05:53:55

Modified files:
	www/iridium    : Makefile 

Log message:
stray whitespace breaks make syntax


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/22 05:56:11

Modified files:
	devel/nspr     : Makefile distinfo 

Log message:
Update to nspr 4.14, requirement for firefox 54.

See https://groups.google.com/forum/#!topic/mozilla.dev.tech.nspr/YQyOYHnKJjA


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/22 05:57:39

Modified files:
	security/nss   : Makefile distinfo 

Log message:
Update to nss 3.30.2, 3.30.1 is required by firefox 54.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.30_release_notes
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.30.1_release_notes
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.30.2_release_notes
Bump shlib major for many symbols addition/removal.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 06:08:41

Modified files:
	usr.bin/tmux   : arguments.c cmd-find.c tmux.c 

Log message:
Do not need getopt.h.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 06:09:05

Modified files:
	x11/gnome/settings-daemon: Makefile 
	x11/gnome/settings-daemon/pkg: PLIST 
Added files:
	x11/gnome/settings-daemon/patches: patch-configure_ac 
	                                   patch-plugins_Makefile_am 
	                                   patch-plugins_dummy_Makefile_am 
Removed files:
	x11/gnome/settings-daemon/patches: patch-configure 

Log message:
Don't build the sharing plugin and make that a dummy instead.
We don't support anything from that plugin so... (systemd, network manager,
bluetooth).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 06:11:48

Modified files:
	x11/gnome/control-center: Makefile 
	x11/gnome/control-center/pkg: PLIST 
Added files:
	x11/gnome/control-center/patches: patch-configure_ac 
	                                  patch-panels_Makefile_am 
	                                  patch-panels_user-accounts_Makefile_am 
	                                  patch-shell_Makefile_am 
	                                  patch-shell_cc-panel-loader_c 
Removed files:
	x11/gnome/control-center/patches: 
	                                  patch-panels_user-accounts_Makefile_in 

Log message:
Don't build the sharing applet; we have no systemd, network manager nor
bluetooth to play with it.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/22 06:34:44

Modified files:
	sys/arch/octeon/octeon: autoconf.c 

Log message:
Reindent with tabs and add missing braces.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/22 06:55:06

Modified files:
	usr.bin/tmux   : status.c 

Log message:
Memory leak from David CARLIER.


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/04/22 07:23:51

Modified files:
	net/p5-Net-Whois-Raw: Makefile distinfo 

Log message:
Update to 2.99006
updated TLD and speed optimizations


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/04/22 07:39:00

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
rework the syspatch makefile and do complete builds for each errata
and diff those instead of doing partial builds of affected directories


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/04/22 07:41:02

Added files:
	distrib/syspatch: diff.sh 

Log message:
Add a small shell script to be used by syspatch to diff the fake root
directories for changes due to the fact that we have to do some "magic"
to figure out if things have really changed.


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/04/22 07:42:05

Modified files:
	distrib/syspatch: diff.sh 

Log message:
do not leave temp files after the diffing is done


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 07:43:21

Modified files:
	audio/libcanberra/patches: patch-src_Makefile_am 
	audio/pulseaudio: Makefile 
	audio/pulseaudio/patches: patch-configure_ac 
	devel/dbus-sharp: Makefile 
	devel/dbus-sharp/patches: patch-src_Connection_cs 
	devel/glib2    : Makefile 
	inputmethods/ibus: Makefile 
	net/avahi      : Makefile 
	x11/dbus/pkg   : PLIST-main messagebus.rc 
	x11/e17/e      : Makefile 
Removed files:
	inputmethods/ibus/patches: patch-src_ibusshare_c 
	x11/dbus/patches: patch-bus_Makefile_in patch-dbus_Makefile_in 
	                  patch-doc_dbus-uuidgen_1_xml_in 
	                  patch-tools_Makefile_in 

Log message:
Stop patching for /var/lib/dbus -> /var/db/dbus; nowadays, most apps look
into /etc/machine-id *before* looking into /var/lib/dbus/machine-id and for
the few that don't patch them to look directly there.

Thanks sthen@ for the source ports seach.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/22 08:00:30

Modified files:
	share/man/man5 : port-modules.5 

Log message:
The gnome module supports cmake now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/22 09:02:55

Modified files:
	games/micropolis: Makefile 
Added files:
	games/micropolis/patches: patch-src_tcl_tclcmdmz_c 
	                          patch-src_tcl_tclglob_c 
	                          patch-src_tcl_tclparse_c 
	                          patch-src_tcl_tclunxaz_c 
	                          patch-src_tcl_tclutil_c 
	                          patch-src_tclx_src_tclxcclk_c 
	                          patch-src_tclx_src_tclxclck_c 
	                          patch-src_tclx_src_tclxfcmd_c 
	                          patch-src_tclx_src_tclxfsca_c 
	                          patch-src_tclx_src_tclxgdat_y 
	                          patch-src_tclx_src_tclxint_h 
	                          patch-src_tclx_src_tclxlib_c 
	                          patch-src_tclx_src_tclxproc_c 
	                          patch-src_tclx_src_tclxsig_c 
	                          patch-src_tclx_src_tclxstr_c 
	                          patch-src_tclx_src_tclxunix_c 
	                          patch-src_tclx_tkucbsrc_tkevent_sed 
	                          patch-src_tclx_ucbsrc_makefile 
	                          patch-src_tclx_ucbsrc_tclbasic_sed 
	                          patch-src_tclx_ucbsrc_tclexpr_sed 
	                          patch-src_tk_tkbitmap_c 
	                          patch-src_tk_tkbutton_c 
	                          patch-src_tk_tkcmds_c 
	                          patch-src_tk_tkconfig_c 
	                          patch-src_tk_tkcursor_c 
	                          patch-src_tk_tkerror_c 
	                          patch-src_tk_tkevent_c 
	                          patch-src_tk_tkfont_c 
	                          patch-src_tk_tkoption_c 
	                          patch-src_tk_tkpack_c 
	                          patch-src_tk_tkpixmap_c 
	                          patch-src_tk_tkrawtcp_c 
	                          patch-src_tk_tkselect_c 
	                          patch-src_tk_tksend_c 
	                          patch-src_tk_tkwindow_c 
	                          patch-src_tk_tkwm_c 

Log message:
fix a large number of warnings, some of them actual errors, exposed by clang
I haven't even started on the game itself...


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/22 09:37:39

Modified files:
	sys/arch/loongson/loongson: machdep.c 

Log message:
Fix an early boot failure on Loongson 3A2000.

Reported and patch tested by wen heping


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/22 09:43:35

Modified files:
	sys/arch/mips64/mips64: cpu.c 

Log message:
Recognize Loongson 3A2000/3B2000 processors.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 11:23:54

Modified files:
	devel/py-path.py: Makefile distinfo 

Log message:
Update to py-path.py 10.3.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/22 11:27:41

Modified files:
	x11/gnustep/netclasses: Makefile 

Log message:
Missed bump here as well after gnustep-make update

pointed out by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 11:30:53

Modified files:
	devel/py-hypothesis: Makefile distinfo 
	devel/py-hypothesis/pkg: PLIST 

Log message:
Update to py-hypothesis 3.7.3


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/22 11:47:21

Modified files:
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 11:48:14

Modified files:
	devel/py-setuptools_scm: Makefile distinfo 
Removed files:
	devel/py-setuptools_scm/patches: 
	                                 patch-testing_test_regressions_py 

Log message:
Update to py-setuptools_scm 1.15.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 12:02:15

Modified files:
	devel/py-test-mock: Makefile distinfo 

Log message:
Update to py-test-mock 1.6.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/22 13:49:18

Modified files:
	games/micropolis: Makefile 
	games/micropolis/patches: patch-src_sim_g_bigmap_c 
	                          patch-src_sim_g_map_c 
	                          patch-src_sim_g_setup_c 
	                          patch-src_sim_s_disast_c 
	                          patch-src_sim_s_gen_c 
	                          patch-src_sim_s_msg_c 
	                          patch-src_sim_s_power_c 
	                          patch-src_sim_s_sim_c 
	                          patch-src_sim_s_zone_c 
	                          patch-src_sim_sim_c 
	                          patch-src_sim_w_graph_c 
	                          patch-src_sim_w_sprite_c 
	                          patch-src_sim_w_update_c 
	                          patch-src_sim_w_util_c 
	                          patch-src_sim_w_x_c 
	                          patch-src_tclx_src_tclxgdat_y 
Added files:
	games/micropolis/patches: patch-src_sim_g_ani_c 
	                          patch-src_sim_headers_sim_h 
	                          patch-src_sim_s_alloc_c 
	                          patch-src_sim_s_eval_c 
	                          patch-src_sim_s_fileio_c 
	                          patch-src_sim_s_init_c 
	                          patch-src_sim_s_scan_c 
	                          patch-src_sim_s_traf_c 
	                          patch-src_sim_w_budget_c 
	                          patch-src_sim_w_eval_c 
	                          patch-src_sim_w_keys_c 
	                          patch-src_sim_w_resrc_c 
	                          patch-src_sim_w_stubs_c 
	                          patch-src_sim_w_tk_c 

Log message:
silence a lot more warnings by adding prototypes, not yet finished


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 13:52:07

Modified files:
	devel/py-test  : Makefile distinfo 

Log message:
Update to py-test 3.0.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 14:05:06

Modified files:
	textproc/py-alabaster: Makefile distinfo 
	textproc/py-alabaster/pkg: PLIST 

Log message:
Update to py-alabaster 0.7.10


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 14:06:41

Modified files:
	textproc/py-sphinx_rtd_theme: Makefile distinfo 
Removed files:
	textproc/py-sphinx_rtd_theme/patches: patch-setup_py 

Log message:
Update to py-sphinx_rtd_theme 0.2.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 14:37:39

Modified files:
	devel/py-tz    : Makefile distinfo 
	devel/py-tz/pkg: PLIST 

Log message:
Update to py-tz 2017.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/22 14:41:24

Modified files:
	security/letsencrypt/client: Makefile 

Log message:
py-python2-pythondialog dep no longer needed


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/22 15:01:02

Modified files:
	sysutils/moreutils: Makefile distinfo 
	sysutils/moreutils/patches: patch-Makefile 

Log message:
update to moreutils-0.60


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 15:25:42

Modified files:
	devel/py-jupyter_client: Makefile distinfo 

Log message:
Update to py-jupyter_client 5.0.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/22 15:57:42

Modified files:
	devel/py-jedi  : Makefile distinfo 
	devel/py-jedi/pkg: PLIST 

Log message:
Update to py-jedi 0.10.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	nigel@cvs.openbsd.org	2017/04/22 16:28:48

Modified files:
	x11/gnustep/addresses: Makefile 
	x11/gnustep/gnumail: Makefile 
	x11/gnustep/gworkspace: Makefile 

Log message:
Bump revision after gnustep update
ok sebastia@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kurt@cvs.openbsd.org	2017/04/22 18:29:22

Modified files:
	devel/jdk/1.8  : Makefile 

Log message:
- Clean up makefile and fix MAKE_ENV as per espie@ guidance. okay espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/22 20:32:34

Modified files:
	devel/jdk/1.8  : Makefile 

Log message:
prevent building on clang arch until someone figures out why it hangs


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/04/23 00:36:36

Modified files:
	lib/libc/stdlib: malloc.3 

Log message:
Rearrange text a bit to make it clear what "discarded" means; ok jmc@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/23 01:40:34

Modified files:
	sbin/pfctl     : pfctl.8 

Log message:
trim the documentation for -k: make it more consistent,
and do not try to do all the documenting in SYNOPSIS/usage();

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/23 01:41:25

Modified files:
	sbin/pfctl     : pfctl.c 

Log message:
oops, this was meant to be committed with the pfctl.8 change:
sync usage() with SYNOPSIS;


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 02:04:03

Modified files:
	devel/py-hypothesis: Makefile distinfo 

Log message:
Update to py-hypothesis 3.7.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 02:07:17

Modified files:
	devel/py-ipykernel: Makefile distinfo 
	devel/py-ipykernel/pkg: PLIST 
Added files:
	devel/py-ipykernel/pkg: PFRAG.no-python3 PFRAG.python3 

Log message:
Update to py-ipykernel 4.6.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 03:15:28

Modified files:
	devel/py-babel : Makefile distinfo 
	devel/py-babel/pkg: PLIST 

Log message:
Update to py-babel 2.4.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 03:17:16

Modified files:
	math/py-sympy  : Makefile distinfo 
	math/py-sympy/patches: patch-setup_py 
	math/py-sympy/pkg: PLIST 

Log message:
Update to py-sympy 1.0, add py3 flavor and take maintainership.


CVSROOT:	/cvs
Module name:	ports
Changes by:	yasuoka@cvs.openbsd.org	2017/04/23 03:18:21

Modified files:
	japanese/less  : Makefile distinfo 
	japanese/less/pkg: DESCR PLIST 
Removed files:
	japanese/less/patches: patch-Makefile_in 

Log message:
Update ja-less to 382.262.03.b.01, the version maintained by Hiroki Sato.
espie@ agreed to take maintainer

ok bentley


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 03:19:10

Modified files:
	math           : Makefile 

Log message:
+py-sympy,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/23 04:09:22

Modified files:
	archivers/ripole/patches: patch-Makefile 

Log message:
-Werror considered harmful. You're going to do unsigned < 0, it can warn.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 04:49:07

Modified files:
	devel/meson    : Makefile distinfo 
	devel/meson/pkg: PLIST 

Log message:
Update to meson-0.40.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 04:57:17

Modified files:
	x11/kde/base3  : Makefile 

Log message:
unbreak following removal of openexr from kdelibs3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/23 05:09:51

Added files:
	astro/celestia/patches: patch-src_celmath_intersect_h 
	                        patch-src_celutil_basictypes_h 

Log message:
fix/clean up celestia for clang
okay aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 05:11:45

Modified files:
	x11/kde/base3/pkg: PLIST-main 

Log message:
removing exr needs a new PLIST as well


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 05:14:47

Modified files:
	devel/gtest    : Makefile distinfo 
	devel/gtest/pkg: PLIST 
Removed files:
	devel/gtest/patches: patch-include_gtest_internal_gtest-port_h 

Log message:
update to gtest-1.8.0, fixes things with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/04/23 05:37:11

Modified files:
	sys/net        : pf_lb.c pf_norm.c pf_osfp.c 

Log message:
Some of the LOG_NOTICE messages from PF were seen in normal operations
with certain rulesets and excessively noisy; move them to LOG_INFO (which was
previously unused).  ok benno@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 07:24:17

Modified files:
	emulators/qemu : Makefile distinfo 
	emulators/qemu/patches: patch-configure 
	                        patch-tcg_ppc_tcg-target_inc_c 
	emulators/qemu/pkg: PLIST 
Removed files:
	emulators/qemu/patches: patch-block_curl_c 
	                        patch-hw_virtio_virtio_c 

Log message:
Update to qemu-2.9.0.

from Brad (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 07:25:29

Modified files:
	emulators/bochs: Makefile distinfo 
	emulators/bochs/patches: patch-Makefile_in patch-_bochsrc 
	emulators/bochs/pkg: PLIST 
Added files:
	emulators/bochs/patches: patch-iodev_network_eth_socket_cc 
Removed files:
	emulators/bochs/patches: patch-gui_term_cc 
	                         patch-iodev_sound_soundfile_cc 
	                         patch-iodev_sound_soundlow_cc 
	                         patch-iodev_sound_soundlow_h 

Log message:
Update to bochs-2.6.9.

from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 07:29:13

Modified files:
	net/znc        : Makefile distinfo 

Log message:
Update to znc-1.6.5.

from Brad (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/23 07:42:25

Modified files:
	editors/libreoffice: Makefile 

Log message:
proper bump after jdk 1.7 -> 1.8 change


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 07:48:29

Modified files:
	sysutils/gkrellm/gkrellm: Makefile distinfo 
	sysutils/gkrellm/gkrellm/patches: patch-Makefile 
	                                  patch-server_Makefile 
	                                  patch-server_configure 
	                                  patch-server_gkrellmd_h 
	                                  patch-server_main_c 
	                                  patch-src_Makefile 
	                                  patch-src_sysdeps_bsd-net-open_c 
	sysutils/gkrellm/gkrellm/pkg: PLIST-client 
Added files:
	sysutils/gkrellm/gkrellm/patches: patch-common_mk 

Log message:
update to gkrellm-2.3.10, mostly from frantisek holop, small tweak from me to
honour CC.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 08:22:44

Modified files:
	x11/dbus       : Makefile 

Log message:
Missed bump, yeah I still miss those... *facepalm*
thanks nigel@ for the report


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/23 08:33:50

Modified files:
	net/weechat    : Makefile distinfo 

Log message:
Security update to weechat-1.7.1
Fix a buffer overflow when removing quotes in DCC filename.

Tested by semarie


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/04/23 08:35:55

Modified files:
	net/weechat    : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
Security update to weechat-1.7.1
Fix a buffer overflow when removing quotes in DCC filename.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 09:59:57

Modified files:
	devel/py-ipython_genutils: Makefile distinfo 

Log message:
Update to py-ipython_genutils 0.2.0 and take maintainership.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/23 10:14:35

Modified files:
	x11/xwit/patches: patch-xwit_c 
Added files:
	x11/xwit/patches: patch-dsimple_c 

Log message:
fix really old C, make it build with clang, fix old varargs functions


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/23 11:15:16

Modified files:
	x11/sliderule  : Makefile 
	x11/sliderule/patches: patch-sr_c patch-xcalc_c 

Log message:
clean-up a great deal. compiles cleanly with clang now.
at least one or two bugs/oddities fixed.
trivial tweaks for snprintf, strlcpy, strlcat


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 11:26:53

ports/devel/py-ipykernel/patches

Update of /cvs/ports/devel/py-ipykernel/patches
In directory cvs.openbsd.org:/tmp/cvs-serv21376/patches

Log Message:
Directory /cvs/ports/devel/py-ipykernel/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 11:27:39

Modified files:
	devel/py-ipykernel: Makefile 
	devel/py-ipykernel/pkg: PLIST 
Added files:
	devel/py-ipykernel/patches: patch-setup_py 
Removed files:
	devel/py-ipykernel/pkg: PFRAG.no-python3 PFRAG.python3 

Log message:
Switch off install IPython kernels for Jupyter, otherwise cyclic
bdep with IPython. Thanks nigel@ for the report.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 11:45:20

Log message:
    Import py-numexpr 2.6.2, ok daniel@
    
    Numexpr is a fast numerical expression evaluator for NumPy. With it,                                                                                                   expressions that operate on arrays (like "3*a+4*b") are accelerated                                                                                                    and use less memory than doing the same calculation in Python.                                                                                                                                                                                                                                                                                In addition, its multi-threaded capabilities can make use of all your                                                                                                  cores, which may accelerate computations, most specially if they are                                                                                                   not memory-bounded (e.g. those using transcendental functions).
    
    Status:
    
    Vendor Tag:	shadchin
    Release Tags:	shadchin_20170423
    
    N ports/math/py-numexpr/Makefile
    N ports/math/py-numexpr/distinfo
    N ports/math/py-numexpr/pkg/DESCR
    N ports/math/py-numexpr/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/04/23 11:50:01

Modified files:
	math           : Makefile 

Log message:
+py-numexpr
+py-numexpr,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/23 12:13:24

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Only use ED for clear screen if at the bottom, same as earlier fix to
clear end of screen.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/23 12:34:24

Added files:
	x11/rxvt/patches: patch-src_rxvt_h 

Log message:
clang supports __attribute__ but it's not a macro, so rxvt compatibility glue
ends up disabling it, thus breaking __only_inline very thoroughly


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/23 13:02:14

Modified files:
	games/mirrormagic/patches: patch-src_Makefile 

Log message:
too many inlines to fix, just use -fgnu89-inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 13:57:39

Modified files:
	net/oidentd    : Makefile 
Added files:
	net/oidentd/patches: patch-src_oidentd_util_c 
	                     patch-src_oidentd_util_h 

Log message:
Another function needlessly declared as inline.  Fixes clang builds.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/23 14:36:41

Modified files:
	benchmarks/speedtest-cli: Makefile distinfo 

Log message:
Update speedtest-cli to 1.0.5.

OK benoit@, jung@


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/04/23 14:52:33

Modified files:
	lang/eagle     : Makefile distinfo 
	lang/eagle/pkg : PLIST 

Log message:
Update to beta39.
In the port Makefile, put all the testing bits together in one place.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/23 15:04:56

Modified files:
	sys/net80211   : ieee80211.h ieee80211_mira.c 

Log message:
Handle unequal numbers of Tx and Rx streams in MiRA.
Problem reported by Colton Lewis on misc@
ok tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/04/23 15:05:47

Modified files:
	lang/jimtcl    : Makefile distinfo 
	lang/jimtcl/patches: patch-Makefile_in 
	lang/jimtcl/pkg: PLIST 

Log message:
Update to 0.77pl0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/23 15:09:39

Modified files:
	audio/libnjb   : Makefile 
	audio/libnjb/pkg: PLIST 

Log message:
Drop doxygen dependency/resulting docs.

ok jca@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/23 15:11:53

Modified files:
	audio/liblo    : Makefile 

Log message:
disable doxygen

ok jca@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/23 15:22:25

Log message:
    wallpaper setting utility for X
    
    The xwallpaper utility allows you to set image files as your X wallpaper. JPEG,
    PNG, and XPM file formats are supported, all of them being configurable and
    therefore no fixed dependencies.
    
    The wallpaper is also advertised to programs which support semi-transparent
    backgrounds.
    
    COMMENT tweak and "reads good to me" @landry, tweaks and ok jca@ jturner@
    
    Status:
    
    Vendor Tag:	rsadowski
    Release Tags:	rsadowski_20170423
    
    N ports/x11/xwallpaper/Makefile
    N ports/x11/xwallpaper/distinfo
    N ports/x11/xwallpaper/pkg/DESCR
    N ports/x11/xwallpaper/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/23 15:24:30

Modified files:
	x11            : Makefile 

Log message:
+xwallpaper


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/23 15:27:59

Log message:
    management tool for sensitive data
    
    KeePassXC is a community fork of KeePassX, the cross-platform port of KeePass
    for Windows. Every feature works cross-platform and was thoroughly tested on
    multiple systems to provide users with the same look and feel on every
    supported operating system. This includes the beloved Auto-Type feature.
    
    The complete database is always encrypted with the industry-standard AES (alias
    Rijndael) encryption algorithm using a 256 bit key. KeePassXC uses a database
    format that is compatible with KeePass Password Safe. Your wallet works offline
    and requires no Internet connection.
    
    portcheck friendly version and ok from giovanni@, ok jca@
    
    Status:
    
    Vendor Tag:	rsadowski
    Release Tags:	rsadowski_20170423
    
    N ports/security/keepassxc/Makefile
    N ports/security/keepassxc/distinfo
    N ports/security/keepassxc/pkg/DESCR
    N ports/security/keepassxc/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/23 15:28:29

Modified files:
	security       : Makefile 

Log message:
+keepassxc


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 15:30:24

Added files:
	x11/driftnet/patches: patch-src_packetcapture_c 
	                      patch-src_packetcapture_h 
	                      patch-src_tmpdir_c patch-src_tmpdir_h 

Log message:
use extern inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 15:45:58

Modified files:
	graphics/evince: Makefile 

Log message:
Fix build with clang by passing -Wno-error=format-nonliteral to CFLAGS.

breakage reported by espie@
ok jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/23 15:47:37

Modified files:
	multimedia/x265: Makefile distinfo 

Log message:
Update to x265-2.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 15:51:43

Modified files:
	net/putty      : Makefile 

Log message:
force WARNINGOPTS in MAKE_FLAGS to disable -Werror


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 16:02:29

Modified files:
	sysutils/colortail/patches: patch-TailFile_h patch-TailFile_cc 
	                            patch-Colorizer_cc 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 16:02:48

Modified files:
	sysutils/colortail/patches: patch-OptionsParser_cc 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 16:13:36

Modified files:
	net/librsync   : Makefile distinfo 
	net/librsync/pkg: PLIST 

Log message:
Update to librsync-2.0.0

- mark a few private functions as static inline.  Fixes build with
clang, and remove a few global symbols from the shared lib
- switch to cmake

"reads good" danj@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 16:18:32

Modified files:
	sysutils/colortail: Makefile 
	sysutils/colortail/patches: patch-CfgFileParser_cc 
	                            patch-Colorizer_cc 
	                            patch-OptionsParser_cc 
	                            patch-TailFile_cc patch-TailFile_h 
Added files:
	sysutils/colortail/patches: patch-CfgFileParser_h 
	                            patch-ColorTail_cc patch-Info_cc 
	                            patch-Usage_cc 

Log message:
iostream.h -> iostream, etc.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 16:24:30

Modified files:
	sysutils/apcd  : Makefile 
Added files:
	sysutils/apcd/patches: patch-apcd_Makefile patch-apcmon_Makefile 
	                       patch-libmy_Makefile 

Log message:
don't use -Werror


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/23 16:31:12

Modified files:
	graphics/exiftran/files: Makefile.exiftran 

Log message:
fix linking with lld


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/23 17:06:57

Modified files:
	devel/py-sh    : Makefile distinfo 

Log message:
Update to py-sh 1.12.13. Take maintainership.
OK Johan Huldtgren (previous MAINTAINER).


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/23 17:11:49

Modified files:
	lang/cython    : Makefile distinfo 

Log message:
Update to cython 0.25.2. Take maintainership.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 19:10:37

Modified files:
	sysutils/incron: Makefile 
	sysutils/incron/patches: patch-icd-main_cpp patch-inotify-cxx_h 

Log message:
Missing includes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 19:22:48

Added files:
	sysutils/inotify-tools/patches: patch-src_Makefile_am 

Log message:
Drop -Werror, fix stupid error with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 19:41:09

Added files:
	sysutils/mtools/patches: patch-mainloop_c 

Log message:
Fix abuse of __attribute__ that breaks with clang

Stolen from natano@ in
https://lists.gnu.org/archive/html/info-mtools/2014-02/msg00000.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 19:42:35

Modified files:
	sysutils/pftop : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 19:46:06

Modified files:
	sysutils/pftop : Makefile 
	sysutils/pftop/patches: patch-pftop_c 

Log message:
Mark some inline functions as static to fix clang builds


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:03:26

Modified files:
	sysutils/tpb/patches: patch-man_tpb_1 patch-src_cfg_c 

Log message:
regen patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:08:05

Added files:
	sysutils/tpb/patches: patch-configure 

Log message:
Fix autoconf test to not use a nested function, breaks with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:09:42

Modified files:
	sysutils/wmcube: Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:14:04

Modified files:
	sysutils/wmcube: Makefile 
Added files:
	sysutils/wmcube/patches: patch-wmgeneral_list_h 

Log message:
Drop inline, fixes build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:15:03

Modified files:
	sysutils/wmmon : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:17:08

Modified files:
	sysutils/wmmon : Makefile 
Added files:
	sysutils/wmmon/patches: patch-wmgeneral_list_h 

Log message:
Drop inline, fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:20:12

Modified files:
	sysutils/xuvmstat: Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/23 20:21:22

Modified files:
	sysutils/xuvmstat/patches: patch-xuvmstat_c 

Log message:
Rename variable to avoid clash with function cexp.  Fixes clang build


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/23 21:29:08

Modified files:
	devel/sdl-pango/patches: patch-src_SDL_Pango_h 

Log message:
Freetype headers no longer define __FT2_BUILD_UNIX_H__.
unifdef __FT2_BUILD_UNIX_H__ around a prototype to fix the build with
clang.

ok dcoppa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/04/23 21:55:45

Modified files:
	devel/jd-gui   : Makefile 

Log message:
change MODJAVA_VER to make jg-gui works again.
ok sthen@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/24 00:36:20

Modified files:
	devel/harfbuzz : Makefile distinfo 

Log message:
Update to harfbuzz-1.4.6.


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/04/24 00:45:56

Modified files:
	usr.bin/midiplay: midiplay.c 

Log message:
Print usage on stderr as do other programs. From Michael
Bombardieri <mb at ii.net>, thanks.


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/04/24 00:47:41

Modified files:
	usr.bin/aucat  : aucat.1 

Log message:
Fix typos. From Michael W. Bombardieri <mb at ii.net>. Thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/24 01:07:25

Modified files:
	sbin/iked      : parse.y 

Log message:
Fix configuration of ASN1_DN IDs.

Public key authentication uses public key files that are stored in the
/etc/iked/pubkeys/ directory where the IKE IDs are encoded as filenames.
This does not simply work with ASN1_DNs where the IDs include slashes
and other special characters. Instead of breaking and failing when an
ASN1_DN is configured, simply skip the public key lookup but allow
to use it with certificates or PSKs.

Reported and fix tested by Igor V. Gubenko - Thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/24 01:11:17

Modified files:
	graphics/ansilove: Makefile distinfo 

Log message:
Update ansilove to 3.0.6.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/24 01:14:27

Modified files:
	usr.sbin/vmd   : dhcp.c 

Log message:
Don't overflow the allocated DHCP response buffer.

When copying the DHCP/BOOTP response into the allocated buffer, use
the calculated response length instead of the maximum size of a DHCP
packet.  The response length was verified correctly but the very last
step missed to use it.

Found by Caspar Schutijser and malloc.conf(5) "S"

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/04/24 01:31:43

Modified files:
	x11/gnustep/graphos: Makefile distinfo 
	x11/gnustep/graphos/pkg: PLIST 

Log message:
Update to 0.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/24 01:52:21

Modified files:
	emulators/sdlmame: Makefile 
	emulators/sdlmess: Makefile 
Added files:
	emulators/sdlmame/patches: patch-src_emu_webengine_c 
	emulators/sdlmess/patches: patch-src_emu_webengine_c 

Log message:
Fix error checks (and clang builds while here)

ok fcambus@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/24 02:09:13

Modified files:
	sys/arch/arm64/arm64: trap.c 

Log message:
Stop dumping registers on "normal" segmentation faults.  Do print the contents
of the esr_el1 register for unhandled userland exceptions (and continue to
dump the registers in that case).

Handle breakpoint traps and make sure we call refreshcreds() on userland traps.

ok jsg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 02:46:19

Modified files:
	misc/sent      : Makefile 
	misc/sent/patches: patch-config_mk 

Log message:
Fix local patch which removes -lm from linker invocation. Fixes with lld.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 02:47:58

Modified files:
	databases/mariadb: Makefile 
	databases/mariadb/patches: patch-client_CMakeLists_txt 
	                           patch-tests_CMakeLists_txt 

Log message:
Add ${SSL_LIBRARIES} to our patches that change client/test binaries to
being dynamically linked. Fix with lld. ok Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 03:08:06

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
add comments to describe CLANG_ARCHS and LLVM_ARCHS


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 03:30:00

Modified files:
	www/py-jwt     : Makefile distinfo 
	www/py-jwt/pkg : PLIST 

Log message:
update to py-jwt 1.5.0 and enable tests, from maintainer Johan Huldtgren


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/24 03:31:31

Modified files:
	sys/dev/pci    : if_iwm.c if_iwmreg.h 

Log message:
Implement support for multiple packets per receive DMA buffer in iwm(4).

We can now clear SINGLE_FRAME_MSK in the receive configuration register.
Linux has not set this bit in years, and Dragonfly stopped setting it
in commit b5eb43f0280bbcfd26af51cf5a4b8e8ff3590b67.
This is a prerequisite for monitor mode since the firmware seems to ignore
the SINGLE_FRAME_MSK bit while running in monitor mode and sends us garbage.

Tested on 7260, 7265, and 8260 devices.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 03:32:14

Modified files:
	security/py-oauthlib: Makefile distinfo 

Log message:
update py-oauthlib to 2.0.2, from maintainer Johan Huldtgren


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/24 03:33:11

Modified files:
	net/ysmv7/patches: patch-src_man_ysm_1 

Log message:
regen patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/24 03:33:44

Added files:
	net/ysmv7/patches: patch-src_YSM_Setup_c 

Log message:
inline->static inline; fixes clang builds


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 03:36:40

Modified files:
	textproc/enchant: Makefile 

Log message:
Use LIBCXX to generate list of C++ libs to add to LDFLAGS rather than a
hardcoded -lstdc++. Unbreaks clang/libc++ arches. ok aja@

Not the cleanest fix ever but enchant blocks a large number of ports
and removing the -l completely results in failures in gnome/todo and
gnome/calendar. XXX added!


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 03:48:17

Added files:
	comms/zmtx-zmrx/patches: patch-zmrx_c patch-zmtx_c 
Removed files:
	comms/zmtx-zmrx/patches: patch-01 patch-02 

Log message:
regen patches under standard names


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/24 03:48:42

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Implement monitor mode support for iwm(4).

The magic commands to capture raw 802.11 frames on e.g. channel 1 are:
ifconfig iwm0 mediaopt monitor chan 1
tcpdump -n -i iwm0 -y IEEE802_11_RADIO -s 4096 -w /tmp/iwm.pcap
ifconfig iwm0 -mediaopt monitor -chan


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/24 03:50:04

Modified files:
	share/man/man4 : iwm.4 

Log message:
Document monitor mode support in iwm(4).


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/24 03:53:43

Modified files:
	share/man/man4 : iwm.4 

Log message:
Document support for 3168 and 8265 devices in iwm(4).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 04:14:05

Modified files:
	comms/zmtx-zmrx: Makefile 
	comms/zmtx-zmrx/patches: patch-zmrx_c patch-zmtx_c 
Added files:
	comms/zmtx-zmrx/patches: patch-makefile patch-zmdm_c 
	                         patch-zmdm_h 

Log message:
clang and other fixes for zmtx-zmrx:

add prototypes
add missing system headers
add missing return values in non-void functions
64-bit time_t format string fix found by clang
honour CFLAGS
don't call rx_raw(int timeout) with "rx_raw()", use a sane timeout


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 04:38:52

Modified files:
	audio/squeezelite: Makefile 

Log message:
needs more -l to avoid relying on NEEDED; fixes with modern linkers


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 05:52:05

Modified files:
	sysutils/rancid: Makefile distinfo 
	sysutils/rancid/pkg: PLIST 

Log message:
update to rancid-3.6.2, from maintainer Pavel Korovin.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/24 06:18:04

Modified files:
	app/cwm        : client.c cwmrc.5 

Log message:
For {h,v}tile, instead of keeping the master client's {h,v} geometry, expand it
to %50 of the area, then fill in the remaining space with the other clients in
the same group; from Gerrit Meyerheim.

support from ajacoutot.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/24 06:27:32

Modified files:
	app/cwm        : client.c 

Log message:
Raise the previously focused window, instead of the previous window in the
cycle list; seems to match behaviour of other wm's; from Walter Alejandro
Iglesias.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/24 07:20:46

Modified files:
	sys/dev/pci    : if_ix.c 

Log message:
Since rev 1.1 ix has attempted to require a 64 bit BAR, the test for
this was wrong and was corrected at the end of last year in rev 1.140.
Before then a 64 bit BAR was not enforced as the test was wrong.

It turns out there exist 82598 parts which have a 32 bit BAR so change
the test to only require a memory BAR and not a 64 bit memory BAR.

Problem reported by Robert Blacquiere. ok mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 07:26:16

Modified files:
	databases/qdbm : Makefile 
	databases/qdbm/patches: patch-Makefile_in 
Removed files:
	databases/qdbm/patches: patch-configure 

Log message:
use MAKE_FLAGS rather than patching configure to override optimizer
flags; this fixes opt flags for some files which avoided the previous
fix

avoid "-fomit-frame-pointer -fforce-addr -fno-omit-frame-pointer -fno-force-addr"


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/24 07:31:19

Modified files:
	app/cwm        : client.c 

Log message:
sort


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 07:35:23

Modified files:
	lang/erlang/16 : Makefile 
	lang/erlang/17 : Makefile 
	lang/erlang/18 : Makefile 
	lang/erlang/19 : Makefile 
Added files:
	lang/erlang/16/patches: patch-lib_wx_c_src_wxe_impl_cpp 
	lang/erlang/17/patches: patch-lib_wx_c_src_wxe_impl_cpp 
	lang/erlang/18/patches: patch-lib_wx_c_src_wxe_impl_cpp 
	lang/erlang/19/patches: patch-lib_wx_c_src_wxe_impl_cpp 

Log message:
fix "ordered comparison between pointer and zero"


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/24 07:35:25

Modified files:
	app/cwm        : search.c 

Log message:
Move queue init to caller so it's only called once in a few cases.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/24 07:54:28

Modified files:
	sys/arch/octeon/conf: files.octeon 
	sys/arch/octeon/octeon: machdep.c 
Added files:
	sys/arch/octeon/octeon: cn3xxx.dts cn3xxx_dts.S 

Log message:
Add an fdt blob for octeon systems whose firmware does not provide
a device-tree. It will be needed later when more device drivers
are attached using fdt.

OK kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/24 07:58:39

Modified files:
	share/man/man3 : intro.3 

Log message:
update for the llvm libs; help/ok kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/24 08:10:19

Modified files:
	sys/arch/octeon/dev: octeon_iobus.c 

Log message:
Process fdt before iobus devices. Needed later when interrupt and
MDIO controller drivers are attached using fdt.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/24 08:36:44

Modified files:
	x11            : Makefile 

Log message:
typo


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 08:55:46

Added files:
	textproc/jq/patches: patch-Makefile_in 

Log message:
Don't use -static-libtool-libs, our libtool doesn't handle it and passes it
straight through to the compiler, which causes an error with clang.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/24 08:58:36

Modified files:
	usr.sbin/dhcpd : conflex.c confpars.c dhcp.c dhcpd.conf.5 
	                 dhcpd.h dhctoken.h 

Log message:
Add 'echo-client-id' statment, so that RFC 6842 behaviour can be
turned off for those clients and networks that find it impossible to
move past RFC 2131. Modelled on the same statement in recent ISC
versions, though we default to 'on' (a.k.a. RFC 6842) rather that
'off' (a.k.a. RFC 2131).

Problems reported by Bastien Durel (Xerox Phaser 6022 printer) and
Bryan Vyhmeister (Hon Hai Precision router) via misc@. Thanks!


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/24 09:06:11

Modified files:
	app/cwm        : search.c 

Log message:
search_match_path() isn't supposed to return anything.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kurt@cvs.openbsd.org	2017/04/24 09:25:49

Modified files:
	devel/jdk/1.8  : Makefile 
Added files:
	devel/jdk/1.8/patches: patch-hotspot_src_os_bsd_vm_os_bsd_cpp 
	                       patch-hotspot_src_share_vm_opto_loopPredicate_cpp 

Log message:
- fix clang + fastdebug issue in loopPredicate.cpp
- use HW_PHYSMEM64 to correct assert in fastdebug


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/24 09:45:32

Modified files:
	faq            : upgrade61.html 

Log message:
add a sentence making more explicit that manual upgrades need to be
followed by the same 'after upgrading' steps as the bsd.rd upgrades.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/24 09:47:02

Modified files:
	security/gnupg2: Makefile 
	security/gnupg2/pkg: README 

Log message:
security/gnupg2: Add instructions to README for Yubikeys.

From Pavel Korovin, OK abieber@. Thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 10:25:05

Modified files:
	databases/p5-DBD-SQLite: Makefile 
	databases/p5-DBD-SQLite/patches: patch-Makefile_PL 

Log message:
Don't define SQLITE_ENABLE_COLUMN_METADATA. This is used in DBD::SQLite's code
and should match the status for the sqlite build. (Normally DBD::SQLite uses
its own copy of the library, but we patch to use ports sqlite instead).
Fixes runtime breakage with clang, fixes "make test" with gcc, but somehow
runtime seemed to work with gcc..?!


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 10:25:20

Modified files:
	databases/sqlite3: Makefile 

Log message:
add a comment about -DSQLITE_ENABLE_COLUMN_METADATA and DBD::SQLite


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/24 11:20:05

Modified files:
	x11/gnome/calendar: Makefile distinfo 

Log message:
update to gnome-calendar-3.24.1


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/24 12:05:52

Modified files:
	usr.sbin/dhcpd : dhcpd.conf.5 

Log message:
a little more consistent text for previous; ok krw


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/24 12:07:25

Modified files:
	shells/osh     : Makefile distinfo 

Log message:
Update to osh 4.3.1, reminded by J.A. Neitzel (upstream).


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/24 12:09:25

Modified files:
	devel/bullet   : Makefile distinfo 
	devel/bullet/patches: 
	                      patch-examples_ExampleBrowser_CMakeLists_txt 
	devel/bullet/pkg: PLIST 
Added files:
	devel/bullet/patches: patch-examples_BasicDemo_CMakeLists_txt 
	                      patch-examples_OpenGLWindow_CMakeLists_txt 
	                      patch-examples_SharedMemory_CMakeLists_txt 
	                      patch-examples_SimpleOpenGL3_CMakeLists_txt 

Log message:
Update to Bullet 2.86.1.  From David CARLIER + shlib bumps.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/24 12:15:16

Modified files:
	sys/arch/arm/arm: cpu.c cpufunc.c 
	sys/arch/arm/include: armreg.h 

Log message:
Add support for Cortex-A12.  Even though ARM rebranded these as Cortex-A17
they have a different ID from "real" Cortex-A17 cores.

ok phessler@, patrick@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/24 12:16:03

Modified files:
	x11/driftnet   : Makefile 
	x11/driftnet/patches: patch-src_packetcapture_c 
	                      patch-src_packetcapture_h 
	                      patch-src_tmpdir_c patch-src_tmpdir_h 

Log message:
extern inline changes broke gcc; just get rid of them


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/24 14:27:59

Modified files:
	distrib/miniroot: install.sub 

Log message:
Introduce a new function parse_hn_line() that replaces the existing
hostname.if(5) parsing code in ifstart().

- change v6_config()
- replace rtsol with autoconf in "IPv6 addres for <if>" question
- write 'inet6 autoconf" to hostname.if file instead of rtsol
- add parse_hn_line() function with installer specific changes
- skip shell command and bridge config lines
- skip inet6 config (incl. dest lines) if there's no inet6 support
- skip dhcp config if there's no dhclient
- change ifstart() to use parse_hn_line()

Discussed with and positive feedback from many
'commit' deraadt@
conditional OK sthen@ (untested)


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/24 14:31:48

Modified files:
	etc            : netstart 

Log message:
Introduce a new function parse_hn_line() that replaces the existing
hostname.if(5) parsing code in ifstart().
Add a -n option to netstart to only print the interface configuration
commands instead of executing them.
Add a HN_DIR variable, that points to the directory of the hostname.if
files (default /etc) that allows for future regression tests.

- add new parse_hn_line() function
- change ifstart()
- rename $if to $_if
- don't ifconfig or ifconfig create if -n option is used
- replace hostname.if(5) parsing code with new parse_hn_line()
- just print configuration commands if -n option is used
- autoconf now happens in ifstart(), remove ifv6autoconf()
- introduce HN_DIR variable for the hostname.if file location
- add handling of the -n option to only print config commands
- ensure -n is only used if interfaces are specified as parameters

Discussed with and positive feedback from many
'commit' deraadt@
OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/24 14:33:58

Modified files:
	net/curl       : Makefile distinfo 
	net/curl/pkg   : PLIST 
Added files:
	net/curl/patches: patch-docs_cmdline-opts_Makefile_in 
	                  patch-src_Makefile_in 

Log message:
Update to 7.54.0.  Includes fix for
CVE-2017-7468: TLS session resumption client cert bypass (again)


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/04/24 14:35:35

Modified files:
	usr.sbin/tcpdump: print-bgp.c 

Log message:
Print bgp administrative shutdown messages (draft-ietf-idr-shutdown)
From Job Snijders <job -AT instituut -DOT- net>, thanks!

ok canacar@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/24 14:44:25

Modified files:
	distrib/notes  : m4.common 

Log message:
Replace 'rtsol' with 'autoconf' to reflect the change in the installer.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/24 14:50:42

Modified files:
	share/man/man5 : myname.5 

Log message:
'rtsol' has been removed from hostname.if(5) recently.

OK jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/24 14:51:24

Modified files:
	archivers/lzip/lunzip: Makefile distinfo 

Log message:
Update to lunzip 1.9.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/24 15:00:27

Modified files:
	lang/cython    : Makefile 
	devel/py-sh    : Makefile 

Log message:
Tabs/spaces.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/24 16:06:32

Modified files:
	textproc/gxml/patches: patch-Makefile_in 

Log message:
Pushed upstream.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/24 17:06:09

Modified files:
	usr.bin/mandoc : libman.h libmdoc.h man.c man.h man_hash.c 
	                 man_html.c man_macro.c man_term.c 
	                 man_validate.c mandocdb.c mdoc.c mdoc.h 
	                 mdoc_argv.c mdoc_hash.c mdoc_html.c 
	                 mdoc_macro.c mdoc_man.c mdoc_markdown.c 
	                 mdoc_state.c mdoc_term.c mdoc_validate.c roff.c 
	                 roff.h tree.c 

Log message:
Continue parser unification:
* Make enum rofft an internal interface as enum roff_tok in "roff.h".
* Represent mdoc and man macros in enum roff_tok.
* Make TOKEN_NONE a proper enum value and use it throughout.
* Put the prologue macros first in the macro tables.
* Unify mdoc_macroname[] and man_macroname[] into roff_name[].


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/25 00:22:08

Modified files:
	databases/soprano: Makefile 

Log message:
disable doxygen

CONFIGURE_ARGS advice from and ok jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/25 00:44:35

Modified files:
	usr.sbin/vmd   : vm.c 

Log message:
spacing


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 02:07:35

Modified files:
	net/ircd-hybrid: Makefile distinfo 
	net/ircd-hybrid/patches: patch-doc_reference_conf 
	                         patch-src_ircd_c 

Log message:
Update to ircd-hybrid-8.2.22.

from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 02:12:16

Modified files:
	graphics/graphite2: Makefile 
Added files:
	graphics/graphite2/patches: patch-src_FeatureMap_cpp 

Log message:
SECURITY fix for CVE-2017-5436.

prodded by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 02:13:36

Modified files:
	graphics/graphite2: Tag: OPENBSD_6_1 Makefile 
Added files:
	graphics/graphite2/patches: Tag: OPENBSD_6_1 
	                            patch-src_FeatureMap_cpp 

Log message:
Merge a couple of patches from upstream to fix CVE-2017-5436.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 02:43:11

Modified files:
	x11/gnome/todo : Makefile distinfo 
	x11/gnome/todo/pkg: PLIST 

Log message:
Update to gnome-todo-3.24.0.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 02:46:27

Modified files:
	textproc/enchant: Makefile distinfo 
	textproc/enchant/pkg: DESCR PLIST 
Added files:
	textproc/enchant/patches: patch-configure_ac 
	                          patch-src_myspell_myspell_checker_cpp 
Removed files:
	textproc/enchant/patches: patch-configure 

Log message:
Update to enchant-1.6.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 03:00:26

Modified files:
	mail/gmime     : Makefile 

Log message:
Add a PORTROACH and take MAINTAINER.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 03:20:53

Modified files:
	mail/alpine    : Makefile distinfo 
	mail/alpine/patches: patch-alpine_pine-use_c patch-configure 
	                     patch-imap_src_mlock_mlock_c 
	                     patch-imap_src_osdep_unix_Makefile 
	                     patch-imap_src_tmail_tmail_c 
	                     patch-pith_conf_c 
Added files:
	mail/alpine/patches: patch-doc_man1_alpine_1 
Removed files:
	mail/alpine/patches: patch-doc_alpine_1 patch-pith_smime_c 

Log message:
Update to alpine-2.21.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 04:23:09

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
draft for compiler auto-selection, not ready yet.
move arch-defines.mk up so it can be used by it to load modules


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 05:21:14

Modified files:
	lang/php/7.0   : Makefile 
	lang/php/7.0/pkg: PLIST-main 

Log message:
regen PLIST for ax_check_compile_flag.m4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 05:26:43

Modified files:
	lang/php       : php.port.mk 

Log message:
remove remnants of php 5.3/5.4, add support for MODPHP_VERSION=7.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 05:45:31

Modified files:
	multimedia/mkvtoolnix: Makefile 

Log message:
avoid hidden build dep on gtest; it's now picked up following the
gtest update and causes a failure with dpb junking


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/25 05:49:35

Modified files:
	usr.bin/tmux   : cmd-if-shell.c 

Log message:
if-shell doesn't need to queue its error message into a callback, and in
fact it can't do so because the item it was working with will have been
freed. Reported by Daniel Hahler.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/25 05:54:54

Modified files:
	geo/qgis       : Makefile distinfo 
	geo/qgis/patches: patch-src_core_CMakeLists_txt 

Log message:
Bugfix update to qgis 2.18.7


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/25 06:08:05

Modified files:
	app/cwm        : menu.c 

Log message:
Remove 'noresult' (and simplify) as it does nothing and makes the logic around
it needless. History doesn't show what this might have been used for in future
iterations.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 07:17:34

Log message:
    Import gmime30-3.0.0.
    
    GMime is a C/C++ library for parsing and creating messages using the
    Multipurpose Internet Mail Extension (MIME) as defined by several RFCs.
    
    ok robert@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170425
    
    N ports/mail/gmime30/distinfo
    N ports/mail/gmime30/Makefile
    N ports/mail/gmime30/pkg/PLIST
    N ports/mail/gmime30/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 07:18:14

Modified files:
	mail           : Makefile 

Log message:
+gmime30


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/25 07:40:33

Modified files:
	app/cwm        : search.c 

Log message:
The r1.36 menuq_add() conversion did this one wrong; fix by reverting to the
original code which adds to resultentry list, as opposed to the wrong one in
menuq_add(). Fixes crash noticed by at least Rickard Gustafsson.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 07:43:35

Modified files:
	www/nghttp2    : Makefile distinfo 

Log message:
update to nghttp2-1.22.0


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/25 07:52:09

Modified files:
	share/man/man4 : inet6.4 

Log message:
some ip6 setup notes; help/ok bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/25 08:46:23

Modified files:
	usr.bin/tmux   : cfg.c 

Log message:
Block the initial client if there is one until the configuration file
has finished loading.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 08:47:48

Modified files:
	x11/blackbox/patches: patch-src_Window_cc patch-src_blackbox_cc 
Added files:
	x11/blackbox/patches: patch-lib_Display_cc patch-lib_Texture_cc 
	                      patch-src_main_cc patch-util_bsetroot_cc 

Log message:
missing prototypes (not a full fix for clang, reminder is more "fun")


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 08:59:33

Added files:
	x11/blackbox/patches: patch-lib_Menu_cc 

Log message:
let automatic template lookup work. explicit types do not quite match
with libc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 09:00:55

Modified files:
	x11/blackbox   : Makefile 
	x11/blackbox/patches: patch-lib_Timer_cc patch-lib_Timer_hh 

Log message:
you can cheat only so far with not declaring timeval, so use the actual
definition.

clang++ pedantically figures out that operator ::timeval  isn't callable
(how would you name it!) so it emits warnings all the time, so just
kill it out.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/25 09:09:53

Modified files:
	archivers/xz   : Makefile 

Log message:
switch home page and master site to https


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/25 09:35:10

Modified files:
	usr.bin/tmux   : cmd-respawn-pane.c cmd-respawn-window.c 
	                 cmd-split-window.c environ.c job.c session.c 
	                 tmux.h 

Log message:
Do not update TERM into config file parsing has finished.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 09:47:41

Modified files:
	games/moria    : Makefile 
	games/moria/patches: patch-source_io_c patch-source_signals_c 
Added files:
	games/moria/patches: patch-source_externs_h 

Log message:
clang doesn't like int functions that don't return, but signal handlers
have returned void basically forever, so cut thru a bit of old-style cruft
so it compiles and runs more or less correctly (there's a shitload of stuff
happening in the handler... not my fight)

TODO: LINT_ARGS controls prototypes in externs.h... turning them on
triggers some issues with K&R vs ANSI in some functions.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/04/25 10:38:23

Modified files:
	usr.sbin/vmd   : virtio.c vmd.c 

Log message:
Generate randomized MAC addresses earlier to keep them across reboots.

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/25 10:51:23

Modified files:
	net/curl       : Tag: OPENBSD_6_1 Makefile 
Added files:
	net/curl/patches: Tag: OPENBSD_6_1 patch-lib_url_c 
	                  patch-lib_urldata_h patch-lib_vtls_openssl_c 
	                  patch-lib_vtls_vtls_c 

Log message:
CVE-2017-7468: TLS session resumption client cert bypass (again)


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/04/25 11:09:03

Modified files:
	faq            : faq15.html 

Log message:
the ports log directory is /usr/ports/logs, not /usr/ports/log.

spotted by fenderq on freenode


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/04/25 11:33:16

Modified files:
	sbin/sysctl    : sysctl.c 

Log message:
Use strtonum instead of strto{,u}ll for simpler and better overflow
checking, make somaxconn and sominconn unsigned.

Issue reported by orge on freenode, thanks!
Input, patient explanations and ok deraadt, millert.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/25 11:45:50

Modified files:
	usr.sbin/syslogd: syslogd.8 syslogd.c 

Log message:
Allow syslogd(8) to listen on multiple addresses for incomming TLS
connections.  This expands the feature from UDP and TCP to syslog
over TLS.
input jmc@; OK millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 11:47:41

Added files:
	x11/qt4/patches: 
	                 patch-src_3rdparty_webkit_Source_JavaScriptCore_wtf_Atomics_h 

Log message:
give it a fighting chance with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/25 11:49:11

Modified files:
	regress/usr.sbin/syslogd: args-client-multilisten.pl 

Log message:
Test listening on multiple syslog over TLS sockets.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/25 12:05:39

Modified files:
	lang/vala      : Makefile distinfo 

Log message:
update to vala-0.36.2


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/25 12:20:52

Modified files:
	usr.bin/tmux   : grid.c tmux.h 

Log message:
When we write out the grid including escape sequences, an SGR 0 needs to
cause the colours to be written again. Also treat colours separately
from attributes so that RGB colours will work.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/25 12:30:29

Modified files:
	usr.bin/tmux   : screen-write.c tmux.h tty.c 

Log message:
Make full width panes try to play more nicely with terminal copy and
paste by avoiding explicit line wraps if we think the terminal will wrap
anyway.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/25 13:00:13

Modified files:
	net/curl       : Tag: OPENBSD_6_0 Makefile 
Added files:
	net/curl/patches: Tag: OPENBSD_6_0 patch-lib_url_c 
	                  patch-lib_urldata_h patch-lib_vtls_openssl_c 
	                  patch-lib_vtls_vtls_c 

Log message:
CVE-2017-7468: TLS session resumption client cert bypass (again)


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/25 13:05:53

Modified files:
	net/libktorrent: Makefile 

Log message:
disable doxygen

ok jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/25 13:17:33

Modified files:
	etc            : netstart 

Log message:
Unbreak netstart for multiple inteface configurations like trunk
or carp. Ensure that the noglob option is disabled at the end of
parse_hn_line() and ifstart().

Reported by Christer Solskogen and Stefan Wollny, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/04/25 13:24:05

Modified files:
	distrib/miniroot: install.sub 

Log message:
Unbreak multiple interface configurations like trunk or carp. Ensure
that the noglob option is disabled at the end of parse_hn_line()
and ifstart().


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 13:33:06

Added files:
	x11/qt4/patches: 
	                 patch-src_3rdparty_webkit_Source_WebCore_html_HTMLImageElement_cpp 

Log message:
fix pointer comparison


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/25 14:02:31

Modified files:
	net            : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	net/trafd      : Makefile distinfo 
	net/trafd/patches: patch-Makefile patch-lib_addrtoname_c 
	                   patch-lib_interfaces_c patch-trafd_trafd_h 
	                   patch-trafd_trafdump patch-trafd_traffic_c 
	                   patch-trafd_trafsave patch-trafd_trafstart 
	                   patch-trafd_trafstop 
	net/trafd/pkg  : DESCR PLIST 

Log message:
Remove trafd: old, unmaintained pcap code that runs as root

(Bonus: no need to fix it to build with clang.)

ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 14:08:51

Added files:
	x11/qt4/patches: patch-tools_linguist_linguist_messagemodel_cpp 

Log message:
pointers don't <=


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 14:09:35

Modified files:
	sysutils/firmware/vmm: Makefile distinfo 
	sysutils/firmware/vmm/files: config 
Added files:
	sysutils/firmware/vmm/patches: patch-src_optionroms_c 

Log message:
enable SGABIOS option rom


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 14:10:02

Modified files:
	textproc/icu4c : Makefile 
Added files:
	textproc/icu4c/patches: patch-source_common_utext_cpp 
	                        patch-source_test_intltest_utxttest_cpp 
	                        patch-source_test_intltest_utxttest_h 

Log message:
SECURITY fix for CVE-2017-7867 and CVE-2017-7868.
Merged from upstream with help from espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 14:11:53

Modified files:
	sysutils/firmware/vmm: Makefile 

Log message:
set ONLY_FOR_ARCHS


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 14:11:58

Modified files:
	textproc/icu4c : Tag: OPENBSD_6_1 Makefile 
Added files:
	textproc/icu4c/patches: Tag: OPENBSD_6_1 
	                        patch-source_common_utext_cpp 
	                        patch-source_test_intltest_utxttest_cpp 
	                        patch-source_test_intltest_utxttest_h 

Log message:
MFC:
SECURITY fixes for CVE-2017-7867 and CVE-2017-7868.
Merged from upstream with help from espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/25 14:30:57

Modified files:
	textproc/enchant: Makefile 

Log message:
Temporarily re-add bdep on x11/dbus-glib until I have time to properly rape
autoshit.


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/04/25 15:13:15

Modified files:
	usr.bin/libtool/LT/Mode: Link.pm 

Log message:
Have libtool ignore 'static-libtool-libs'. Previously it was unsupported and
passed straight through to the compiler, which gcc doesn't mind, but clang is
unhappy about.  Suggestion/ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/25 15:15:57

Removed files:
	textproc/jq/patches: patch-Makefile_in 

Log message:
Remove patch obsoleted by usr.bin/libtool/LT/Mode/Link.pm r1.35


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/25 15:45:02

Modified files:
	editors/beaver : Makefile 
Added files:
	editors/beaver/patches: patch-src_editor_c 

Log message:
Updated HOMEPAGE and MASTER_SITES + s/inline/static inline/ for clang

A newer version is available, any takers?


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/25 16:51:23

Modified files:
	comms/mgetty+sendfax: Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/04/25 16:56:25

Added files:
	comms/mgetty+sendfax/patches: patch-g3_g3cat_c patch-g3_pbm2g3_c 

Log message:
inline->static inline to fix clang build


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 19:39:54

Added files:
	x11/kde/base3/patches: 
	                       patch-kicker_applets_launcher_easyvector_h 

Log message:
clang has strict rules for template evaluation.
see http://blog.llvm.org/2009/12/dreaded-two-phase-name-lookup.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/25 19:47:16

Added files:
	x11/kde/base3/patches: 
	                       patch-kcontrol_kfontinst_kfontinst_Fontmap_cpp 

Log message:
strchr const-correct


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/04/25 20:37:03

Modified files:
	devel/sdl-pango: Makefile 
	devel/sdl-pango/patches: patch-src_SDL_Pango_h 

Log message:
Reinstate an ifdef around a prototype which includes FT_Bitmap as some
users don't include freetype headers.  Instead of __FT2_BUILD_UNIX_H__
use FT2BUILD_H_.  Fixes problems building games/tuxpaint reported by
naddy and sthen. ok aja.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/25 20:43:34

Modified files:
	share/man/man9 : VOP_LOOKUP.9 

Log message:
We are men of action. Lies do not become us.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/25 23:55:27

Modified files:
	share/man/man9 : VOP_LOOKUP.9 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/26 01:03:39

Modified files:
	net/py-libcloud: Makefile distinfo 
	net/py-libcloud/pkg: PLIST 

Log message:
Update to py-libcloud-2.0.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/26 01:05:24

Modified files:
	sys/arch/amd64/include: pcb.h 

Log message:
Fix a typo relating to savefpu alignment

ok kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/26 01:53:17

Modified files:
	sys/dev/ic     : ar5008.c 
	sys/dev/pci    : if_iwm.c if_iwn.c 

Log message:
Tell MiRA about the actual number of retries instead of pretending that
a frame which was retried N times was retried just once.
This punishes retry-heavy data rates even more and should reduce latency.
It does not seem to have a noticable effect on net throughput in my testing.
If this change causes throughput problems for anyone, let me know.
ok tb@ mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/26 02:02:14

Modified files:
	sys/arch/i386/i386: vmm.c 

Log message:
Convert some hardcoded function names in printfs into %s / __func__.

Some of these pointed out by Michael W. Bombardieri, I went through
the file and fixed the rest.

No functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/26 02:15:05

Modified files:
	lang/php       : Makefile.inc 
Added files:
	lang/php/5.5/patches: patch-aclocal_m4 
	lang/php/5.6/patches: patch-aclocal_m4 
	lang/php/7.0/patches: patch-aclocal_m4 

Log message:
Don't hardcode libstdc++, pass it in from LIBCXX. Fixes build of Apache module
on libc++ arches (otherwise the nonexistent -lstdc++ caused libtool to generate
a static library instead of shared .so module). ok robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/26 02:19:09

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Remove the size argument of iwm_rx_addbuf() and use a constant internally.
All callers were passing the same constant IWM_RBUF_SIZE, which is derived
from the smallest RX buffer the hardware supports (4k). Smaller sizes don't
make sense anyway and larger sizes are not on our horizon for now.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/26 03:19:56

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Get rid of convoluted macros in iwm's receive code path.

Since we now sync the entire Rx DMA buffer the SYNC_RESP_STRUCT() macro which
was used to sync just parts of the buffer can be replaced by assignments.
The SYNC_RESP_PTR() macro was already unused so just remove it.
The ADVANCE_RXQ() macro was used just once so expand it in place.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/26 03:28:33

Modified files:
	net/telepathy/folks: Makefile 
Added files:
	net/telepathy/folks/patches: patch-tests_eds_Makefile_am 

Log message:
Re-enable the modular tests. They can be build now.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/26 03:53:28

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
Convert some hardcoded function names in printfs into %s / __func__.

Some of these pointed out by Michael W. Bombardieri, I went through
the file and fixed the rest.

No functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/04/26 04:42:38

Modified files:
	sbin/iked      : iked.h ikev2.c ikev2_msg.c 

Log message:
cope with IP address changes. before, we were trying to resend the msg
with the no-longer-available address over and over and over, requiring
iked to be restarted eventually. instead, on EADDRNOTAVAIL, schedule
SA deletion so a new one is set up shortly thereafter. ok reyk mikeb


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/26 07:13:47

Modified files:
	net/telepathy/folks: Makefile distinfo 
	net/telepathy/folks/pkg: PLIST 
Removed files:
	net/telepathy/folks/patches: patch-tests_eds_Makefile_am 

Log message:
Update to a newer git snapshot which includes the patch.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/26 07:14:28

Modified files:
	usr.bin/vi/common: exf.c 

Log message:
Remove extraneous ", NULL" in the assignment of msgstr which was
leftover from when msg_cat() was removed.  From Anton Lindqvist


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/04/26 08:53:11

Modified files:
	etc/mtree      : 4.4BSD.dist 
	distrib/sets/lists/base: mi 
	distrib/sets/lists/man: mi 
	share/man/man8 : Makefile 
	usr.sbin/eeprom: Makefile 
Added files:
	share/man/man8/man8.arm64: Makefile 

Log message:
Install arm64 manpages: eeprom(8), MAKEDEV(8).  ok phessler kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/26 08:58:38

Modified files:
	audio/mp3blaster: Makefile 
Added files:
	audio/mp3blaster/patches: patch-src_global_cc 

Log message:
don't mix char* and const char*; fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/04/26 09:40:12

Modified files:
	www/p5-WWW-Mechanize-Shell: Makefile distinfo 

Log message:
update p5-WWW-Mechanize-Shell to 0.56


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/26 09:48:13

Modified files:
	x11/xfce4/xfce4-pulseaudio: Makefile distinfo 
	x11/xfce4/xfce4-pulseaudio/pkg: PLIST 

Log message:
Update to xfce4-pulseaudio, now shipping translations!


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/04/26 09:50:59

Modified files:
	sbin/pfctl     : pfctl.c pfctl_queue.c 
	sys/net        : hfsc.c hfsc.h 
	usr.bin/systat : pftop.c 

Log message:
Perform H-FSC root queue allocation in the kernel

Since only leaf queues can have packets assigned to them,
H-FSC requires the user specified root queue to have a
parent.  To simplify userland tools and the configuration
interface, the kernel can be leveraged to set it up.

ok henning


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/26 10:22:16

Modified files:
	sysutils/terraform: Makefile distinfo 

Log message:
Update to terraform-0.9.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/26 10:36:03

Modified files:
	astro/stellarium: Makefile 

Log message:
disable doxygen

ok ajacoutot@ landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/04/26 11:29:58

Modified files:
	math/R         : Makefile distinfo 
	math/R/patches : patch-configure 
	math/R/pkg     : PLIST README 

Log message:
Update to R 3.4.0

OK pirofti@


CVSROOT:	/cvs
Module name:	www
Changes by:	benno@cvs.openbsd.org	2017/04/26 13:53:23

Modified files:
	faq            : index.html faq1.html faq5.html 

Log message:
show how to generate diffs, with cvs and git, so we can point
contributors to it.
ok tb@ tj@


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/26 14:10:12

Modified files:
	.              : lyrics.html 
Added files:
	images         : 61_right.jpg 

Log message:
Release the 6.1 song, "Winter of 95".  I have found a photo from late 97.
Unfortunately my camera and a lot of unprocessed film was stolen from my
truck around April 96, so I have no photos of the space that OpenBSD
started in.  (It was unprocessed because I was extremely poor - someone
who worked at a newspaper gifted me film, but processing was very expensive)
WAIT DO YOU KIDS KNOW WHAT FILM IS?


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/04/26 14:21:29

Modified files:
	.              : lyrics.html 

Log message:
sizes


CVSROOT:	/cvs
Module name:	ports
Changes by:	ian@cvs.openbsd.org	2017/04/26 14:34:32

Modified files:
	telephony/asterisk-openbsd-moh: Makefile distinfo 
	telephony/asterisk-openbsd-moh/pkg: PLIST 

Log message:
Add 6.1 song.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/26 15:07:22

Modified files:
	usr.sbin/dhcpd : dhcpd.conf.5 

Log message:
remove some repetitive text chunks; ok krw


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/26 15:10:42

Modified files:
	bin/md5        : md5.c 

Log message:
In -C mode, process all checksums that match the specified file(s),
not just the first one that matches.  OK deraadt@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/04/26 15:10:54

Modified files:
	app/cwm        : calmwm.h client.c parse.y 

Log message:
Switch bwidth type; unfortunately X11 is inconsistent.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/26 15:11:02

Modified files:
	faq            : faq5.html 

Log message:
minor formatting tweak: display command in the usual fashion


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/26 15:17:48

Modified files:
	faq            : faq5.html 

Log message:
zap unnecessary path components for consistency with release(8)


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/04/26 15:25:43

Modified files:
	bin/ed         : glbl.c io.c main.c 

Log message:
silence clang warnings: add an extra pair of parentheses and stop
passing empty format strings to printf-family functions; ok millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/04/26 18:02:03

Modified files:
	share/man/man1 : gcc-local.1 
	gnu/gcc/gcc    : dwarf2.h dwarf2out.c 
	gnu/gcc/gcc/config/i386: i386.c i386.opt 
	gnu/gcc/gcc/doc: invoke.texi 

Log message:
add support for -msave-args in gcc on amd64

i got sick of not having arguments in ddb stack traces on amd64,
which is because amd64 passes arguments in registers, and it's
impossible to figure out where they go without dwarf info, and when
you have dwarf info it is complicated.

solaris has a simple solution for this. they tweaked their compilers
to accept an -msave-args option which makes functions store their
arguments on the stack, while maintaining compatability with the
System V AMD64 ABI. tools (eg, ddb) can then look at the stack to
get access to function arguments in traces.

this ports their changes to gcc 3 to our gcc.

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/04/26 21:00:54

Modified files:
	www/nextcloud  : Makefile distinfo 
	www/nextcloud/patches: patch-version_php 
	www/nextcloud/pkg: PLIST 

Log message:
Update to 11.0.3.

OK kirby@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/26 23:46:51

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Revert if_iwm.c to the state of r1.170 because ETOOMANYDRAGONSATONCE.
Performance regression reported by deraadt@ and uvm_fault reported by fcambus@.
I will be poking further at this out of tree.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/26 23:49:32

Modified files:
	share/man/man4 : iwm.4 

Log message:
iwm(4) monitor mode support was backed out for now.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/04/27 00:14:23

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Restore if_iwm.c r1.173 (mira retry change) which got incarcerated by
the backout police even though it wasn't responsible for anything.
pointed out by tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/27 00:16:39

Modified files:
	sys/arch/amd64/amd64: fpu.c vmm.c vmm_support.S 
	sys/arch/amd64/include: cpufunc.h fpu.h vmmvar.h 

Log message:
vmm(4): proper save/restore of FPU context during entry/exit.

tested by reyk, dcoppa, and a few others.

ok kettenis@ on the fpu bits
ok deraadt@ on the vmm bits


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/27 00:22:11

Modified files:
	share/man/man1 : gcc-local.1 

Log message:
spelling;


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/27 00:49:05

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
use a more descriptive value from the VEI_DIR_xxx enum instead of a
hardcoded number. no functional change


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/27 01:15:35

Modified files:
	sys/arch/amd64/include: vmmvar.h 

Log message:
rename a struct that was denoted as "VMX only" to make it more clear
that it can be used in SVM and VMX.

no functional change


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/04/27 01:54:49

Modified files:
	databases/hs-hedis: Makefile distinfo 

Log message:
Update to hedis-0.9.8


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 02:41:20

Modified files:
	mail/sylpheed  : Makefile 

Log message:
Add LIB_DEPENDS on x11/dbus-glib.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 02:42:53

Modified files:
	sysutils/ansible: Makefile 
Added files:
	sysutils/ansible/patches: 
	                          patch-lib_ansible_plugins_connection___init___py 

Log message:
unbreak become_method: su

from upstream via semarie, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/04/27 02:43:26

Modified files:
	x11/hs-dbus    : Makefile distinfo 
	x11/hs-dbus/pkg: PLIST 

Log message:
Update to hs-dbus-0.10.13


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 02:46:49

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.44.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 02:47:00

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.81.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 02:51:48

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-153.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 03:00:01

Modified files:
	devel/meson    : meson.port.mk 

Log message:
Pass --sysconfdir.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/04/27 03:00:44

Modified files:
	x11/xmobar     : Makefile 
	x11/xmobar/patches: patch-xmobar_cabal 

Log message:
Compiling with --with-rtsopts=-V0 to reduce wakeups (issue #89)
(upstream git commit dfb5dbd6cc5342348fbb46bd117c226d5e8127e4)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 03:02:32

Modified files:
	devel/meson    : meson.port.mk 

Log message:
... and --mandir.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 03:06:58

Modified files:
	x11/gnome      : gnome.port.mk 

Log message:
Add a couple of XXX's wrt meson.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:13:19

Modified files:
	sysutils/beats : Makefile.inc 

Log message:
adjust for upcoming beats 5.3.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:14:40

Modified files:
	sysutils/beats/filebeat: Makefile distinfo 
	sysutils/beats/filebeat/pkg: PLIST README filebeat.rc 
Added files:
	sysutils/beats/filebeat/patches: patch-filebeat_filebeat_yml 
	                                 patch-libbeat_outputs_console_console_go 
Removed files:
	sysutils/beats/filebeat/patches: patch-filebeat_etc_filebeat_yml 

Log message:
update to filebeat-5.3.1

please note the configuration layout has changed between 1.x and 5.x:
https://www.elastic.co/guide/en/beats/libbeat/5.0/upgrading-1-to-5.html

also tested by sebastia@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:14:59

Modified files:
	sysutils/beats/packetbeat: Makefile distinfo 
	sysutils/beats/packetbeat/pkg: PLIST README packetbeat.rc 
Added files:
	sysutils/beats/packetbeat/patches: 
	                                   patch-packetbeat_packetbeat_yml 
Removed files:
	sysutils/beats/packetbeat/patches: 
	                                   patch-packetbeat_etc_packetbeat_yml 
	                                   patch-vendor_github_com_tsg_gopacket_pcap_pcap_go 

Log message:
update to packetbeat-5.3.1

please note the configuration layout has changed between 1.x and 5.x:
https://www.elastic.co/guide/en/beats/libbeat/5.0/upgrading-1-to-5.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:17:26

Log message:
    import metricbeat-5.3.1
    
    Collect metrics from your systems and services. From CPU to memory,
    Redis to Nginx, and much more, Metricbeat is a lightweight way to send
    system and service statistics.
    
    metricbeat absorbed topbeat:
    https://www.elastic.co/guide/en/beats/libbeat/5.0/upgrading-1-to-5.html#_upgrading_topbeat_to_metricbeat
    
    ok aja@
    
    Status:
    
    Vendor Tag:	jasper
    Release Tags:	jasper_20172704
    
    N ports/sysutils/beats/metricbeat/Makefile
    N ports/sysutils/beats/metricbeat/distinfo
    N ports/sysutils/beats/metricbeat/pkg/PLIST
    N ports/sysutils/beats/metricbeat/pkg/metricbeat.rc
    N ports/sysutils/beats/metricbeat/pkg/README
    N ports/sysutils/beats/metricbeat/pkg/DESCR
    N ports/sysutils/beats/metricbeat/patches/patch-metricbeat_metricbeat_yml
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:18:35

Removed files:
	sysutils/beats/topbeat: Makefile distinfo 
	sysutils/beats/topbeat/files: sigar_openbsd.go 
	sysutils/beats/topbeat/patches: 
	                                patch-vendor_github_com_elastic_gosigar_sigar_unix_go 
	sysutils/beats/topbeat/pkg: DESCR PLIST README topbeat.rc 

Log message:
remove topbeat, it's been superseded by metricbeat. the openbsd patches for
gosigar have been merged upstream and are now used by metricbeat.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:20:23

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
register topbeat removal


CVSROOT:	/cvs
Module name:	www
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:20:47

Modified files:
	faq            : current.html 

Log message:
note the beats update


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/27 03:21:40

Modified files:
	sysutils/beats : Makefile 

Log message:
+metricbeat
-topbeat
#hwsensorsbeat


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/27 04:23:19

Modified files:
	sys/arch/arm64/conf: GENERIC RAMDISK files.arm64 
	sys/arch/arm64/dev: mainbus.c mainbus.h simplebus.c 
	sys/arch/arm64/include: armreg.h 
Added files:
	sys/arch/arm64/arm64: cpu.c 

Log message:
Add code to identify the CPUs on arm64 systems.  The primary CPU is attached
and identified early on.  For the secondary CPUs this happens late, such that
the drivers we need to spin up CPUs, such as psci(4), will be available.

This also fixes some code in simplebus(4) where the return value of
OF_getprop() was not properly checked.

Heavily based on an earlier diff from drahn@.

ok drahn@, jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/27 04:57:05

Modified files:
	sys/arch/arm/armv7: armv7_a4x_io.S 
	sys/arch/arm64/dev: arm64_bus_space.c 

Log message:
Use (32-bit) word-sized access in the a4x bus space routine even if only
a byte or a half-word is needed.  Certain implementations of the Synopsis
Designware copy-and-paste logic blocks don't respond to transactions that
are smaller than a word.

Fixes the serial console on boards with a Rockchip RK3288.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/27 05:48:08

Modified files:
	sys/arch/alpha/alpha: machdep.c 
	sys/kern       : subr_prf.c 

Log message:
Unifdef KADB.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 05:53:12

Modified files:
	usr.bin/ssh    : scp.c 

Log message:
Avoid potential signed int overflow when parsing the file size.
Use strtoul() instead of parsing manually.  OK djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 06:41:55

Added files:
	audio/akode/patches: patch-akode_lib_audioconfiguration_h 
	                     patch-akode_lib_audioframe_h 

Log message:
struct and class are not 100% intercheangable. If you declare "class" in
a header, just declare "class public:"   in the other
shut up clang warnings.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 06:42:37

Added files:
	audio/akode/patches: 
	                     patch-akode_plugins_mpc_decoder_mppdec_requant_h 

Log message:
just for funzzies: clang catches include guard mistakes. I'm impressed.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 06:43:01

Added files:
	audio/akode/patches: 
	                     patch-akode_plugins_mpc_decoder_mppdec_synth_filter_cpp 

Log message:
don't redefine ptrdiff_t


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 06:44:03

Added files:
	audio/akode/patches: patch-akode_lib_converter_cpp 
	                     patch-akode_lib_crossfader_cpp 
	                     patch-akode_lib_fast_resampler_cpp 
	                     patch-akode_lib_volumefilter_cpp 

Log message:
don't reuse the same symbol to mean a different thing in a nested template
declaration. Yeah, you're going to use Arithm<S>.
No, you're declaring template <class X>Arithm  *in general*.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 07:12:38

Modified files:
	graphics/simple-scan: Makefile distinfo 
Removed files:
	graphics/simple-scan/patches: patch-src_ui_vala 

Log message:
Update to simple-scan-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 07:16:03

Modified files:
	databases/evolution-data-server/patches: 
	                                         patch-cmake_modules_SetupBuildFlags_cmake 
	mail/evolution/patches: 
	                        patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Tweak patch and link to BZ.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/04/27 07:30:54

Modified files:
	libexec/ftpd   : ftpcmd.y 

Log message:
Don't send multiple error messages in response to a single command

While a few commands (such as HELP and NOOP) are allowed in between
USER and PASS, most of the others are not.  However if such command
is issued, ftpd should abort the command evaluation early and reply
with "530 Please login with USER and PASS."

From form@, with input from deraadt@ and OK millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/04/27 07:31:33

Modified files:
	x11/p5-AnyEvent-I3: Makefile distinfo 

Log message:
Update to AnyEvent-I3-0.17


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/27 07:40:05

Modified files:
	usr.bin/ssh    : servconf.c 

Log message:
remove a static array unused since rev 1.306 spotted by clang
ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/04/27 08:16:20

Modified files:
	devel/lua-penlight: Makefile distinfo 

Log message:
Update to Penlight-1.5.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 08:28:35

Modified files:
	net/pidgin     : Makefile 

Log message:
While checking for sth I ran into the gettext MODULE, so drop it.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 09:35:36

Modified files:
	lib/libkeynote : keynote.y 

Log message:
Remove useless check for ks_env_table being NULL.  Since ks_env_table
is an array embedded in struct keynote_session it can never be NULL.
Quiets a clang warning.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 09:46:14

Modified files:
	lib/libpcap    : gencode.h 

Log message:
Remove the "volatile" attribute from bpf_error().  The "volatile"
attribute is an obsolete way of saying "noreturn".  clang doesn't
recognize it and the function is already marked __dead so it is
superfluous anyway.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/04/27 10:09:32

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
clang warns about some of the strlcpy arguments here, which aren't the
typical idiom because there's invisible size dependencies. rewrite some
of it to use memcpy, which makes clear the lengths are the same.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 10:23:14

Added files:
	textproc/wkhtmltopdf/patches: 
	                              patch-qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_Atomics_h 
	                              patch-qt_src_3rdparty_webkit_Source_WebCore_html_HTMLImageElement_cpp 

Log message:
clang fixes, same as qt4


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 10:30:25

Added files:
	www/phantomjs/patches: 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_Atomics_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_html_HTMLImageElement_cpp 

Log message:
same patches as qt4, more to come...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 10:31:18

Added files:
	www/phantomjs/patches: 
	                       patch-src_qt_src_corelib_tools_qiterator_h 

Log message:
steal the fix for clang compatibility that's in qt 4.8.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 10:32:32

Added files:
	www/phantomjs/patches: 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_NullPtr_h 

Log message:
auto-detection of nullptr fails with our libcxx right now, so just
hardcode that libcxx already defines the necessary bits


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/27 10:34:18

Modified files:
	sys/dev/acpi   : acpicpu.c 

Log message:
track size of pss allocation, so that length can be passed to free(9)
ok mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/27 11:10:28

Modified files:
	mail/p5-Mail-SpamAssassin: Makefile 

Log message:
Drop maintainer, I'm moving away from this (rspamd is better).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 11:12:41

Added files:
	www/phantomjs/patches: 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_Timer_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_Timer_h 

Log message:
steal Timer class from qt4... the weird Ptr/Ref duplication and the
inline swap solves the absence of a process swap for clang++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 11:32:19

Modified files:
	x11/qt4/patches: patch-config_tests_unix_nis_nis_cpp 

Log message:
Well, all includes are in place, but redefining bool in C++ does not work,
especially with clang.


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/04/27 11:41:47

Modified files:
	share/mk       : bsd.lib.mk 

Log message:
syspatch needs to create shared libs with the same object sequence instead
of randomizing the order so let's read the libs on the system and link the
same way in case a syspatch is being built


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/27 11:46:52

Modified files:
	x11/gnome      : gnome.port.mk 

Log message:
share the gnome module makefile with mate (to be imported) to avoid
duplication

ok ajacoutot@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 11:52:12

Added files:
	x11/qt4/patches: 
	                 patch-src_corelib_concurrent_qtconcurrentiteratekernel_cpp 

Log message:
forgot that one. The right definitions are in sys/time.h for us...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 12:02:16

Modified files:
	x11/qt4/patches: 
	                 patch-src_3rdparty_webkit_Source_JavaScriptCore_wtf_Atomics_h 

Log message:
typo


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/27 13:55:56

Modified files:
	net/tor        : Makefile distinfo 
	net/tor/patches: patch-src_config_torrc_sample_in 

Log message:
Update to 0.3.0.6.  For a detailed list of changes, see:
https://blog.torproject.org/blog/tor-0306-released-new-series-stable


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/04/27 14:00:39

Modified files:
	faq            : faq1.html 

Log message:
consistency: move . out of <a>


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:04:31

Modified files:
	games/xdeblock : Makefile 
	games/xdeblock/patches: patch-Imakefile patch-gamemain_c 
	                        patch-main_c 
Added files:
	games/xdeblock/patches: patch-dialog_c patch-file_c 
	                        patch-mapf_standard_mapf_txt 

Log message:
fix a segfault, several misspellings, and a clang error...


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/27 14:13:36

Modified files:
	comms/scmxx    : Makefile 
	comms/scmxx/patches: patch-src_Makefile_in 
Added files:
	comms/scmxx/patches: patch-src_Makefile_sub_in 

Log message:
* handle CPPFLAGS properly; also fixes build with clang
* neutering nl_langinfo() should be no longer required


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:17:24

Added files:
	geo/gpstk/patches: patch-src_Matrix_hpp patch-src_Vector_hpp 

Log message:
two phase name lookup strikes again...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:28:50

Modified files:
	geo/gpstk/patches: patch-src_Matrix_hpp patch-src_Vector_hpp 

Log message:
more thorough, is this enough for modern C++ ?


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/27 14:41:08

Modified files:
	lib/libtls/man : tls_client.3 tls_init.3 

Log message:
tls_free(3) and tls_config_free(3) accept NULL;
patch from Matthew Martin <phy1729 at gmail dot com>,
slightly tweaked by me


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:46:17

Added files:
	math/qhull/patches: patch-src_libqhullcpp_QhullIterator_h 
	                    patch-src_libqhullcpp_QhullLinkedList_h 

Log message:
qhull steals tricks from qt4, along with portability bugs.
use the same trick as qt4 to fix it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:51:44

Added files:
	x11/xdu/patches: patch-xwin_c 

Log message:
declare non returning function as void, fixes clang


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 14:55:52

Modified files:
	libexec/login_radius: login_radius.c 

Log message:
challenge is an array, not a pointer, therefore cannot be NULL.
Quiets a clang warning.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:56:26

ports/x11/xfed/patches

Update of /cvs/ports/x11/xfed/patches
In directory cvs.openbsd.org:/tmp/cvs-serv86427/patches

Log Message:
Directory /cvs/ports/x11/xfed/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 14:56:42

Added files:
	x11/xfed/patches: patch-main_c patch-output_c 

Log message:
trivial return fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 15:09:57

Modified files:
	geo/gpstk/patches: patch-src_Matrix_hpp 
Added files:
	geo/gpstk/patches: patch-src_FileFilterFrame_hpp 

Log message:
more two phase name lookup


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 15:15:04

Added files:
	geo/gpstk/patches: patch-apps_reszilla_CycleSlipList_hpp 

Log message:
clang can't find a sort comparison operator that's not properly const


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 15:28:00

Modified files:
	libexec/rpc.rusersd: rusers_proc.c 

Log message:
Change len arg of getidle() from size_t to int since it is used as
a length parameter to a "%.*s" printf format.  Quiets a compiler
warning (both gcc and clang).


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/27 15:37:05

Modified files:
	print/apvlv    : Makefile distinfo 
	print/apvlv/pkg: PLIST 
Added files:
	print/apvlv/patches: patch-CMakeLists_txt 
Removed files:
	print/apvlv/patches: patch-src_ApvlvFile_cpp 
	                     patch-src_ApvlvUtil_cpp 
	                     patch-src_poppler-gdk_h 

Log message:
Update to apvlv 0.1.5.

Switch to github, migrated to gtk+3


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/27 15:39:27

Modified files:
	sys/kern       : kern_sysctl.c 

Log message:
Enforce that sysctl kern.somaxconn and sominconn can only be set
to valid values.  The so_qlimit is type short.
report Dillon Jay Pena; OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 15:42:24

Added files:
	lang/clisp/patches: patch-src_lispbibl_d 

Log message:
steal clang amd64 support from netbsd


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 15:44:01

Modified files:
	x11/gnome      : gnome.port.mk 

Log message:
Indent.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/27 16:07:06

Modified files:
	regress/usr.bin/mdoclint: mdoclint 

Log message:
Detect links to self by parsing .Nm in SYNOPSIS.
Functionality suggested and patch OK'ed by jmc@.
Patch also accepted upstream in pkgsrc by wiz@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/27 16:14:50

ports/security/letsencrypt/py-acme/patches

Update of /cvs/ports/security/letsencrypt/py-acme/patches
In directory cvs.openbsd.org:/tmp/cvs-serv4921/patches

Log Message:
Directory /cvs/ports/security/letsencrypt/py-acme/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/27 16:18:14

Modified files:
	security/letsencrypt/client: Makefile 
	security/letsencrypt/py-acme: Makefile 
Added files:
	security/letsencrypt/client/patches: patch-setup_py 
	security/letsencrypt/py-acme/patches: patch-setup_py 

Log message:
Remove argparse from setup.py's install-requires list to unbreak since
the 0.13.0 update. (I had py-argparse from mystuff installed which is
why I didn't run into it before..) - reported by Pedro de Oliveira

https://github.com/certbot/certbot/issues/4485


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/27 16:27:43

Modified files:
	regress/usr.bin/mdoclint: mdoclint 

Log message:
Merge trivial patches from pkgsrc to get rid of gratuitious differences;
no functional change on OpenBSD: rev.s 1.50, 1.52, 1.62, 1.63
Of course, keep intentional differences.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/27 16:30:06

Modified files:
	textproc/enchant: Makefile 
	textproc/enchant/patches: patch-configure_ac 

Log message:
Remove BDEP on dbus-glib.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/27 16:41:46

Modified files:
	sys/arch/arm/arm: cpu.c 
	sys/arch/arm/conf: files.arm 
	sys/arch/arm/include: armreg.h cpu.h 
	sys/arch/arm/mainbus: mainbus.c 
	sys/arch/arm/simplebus: simplebus.c 
Removed files:
	sys/arch/arm/mainbus: cpu_mainbus.c 

Log message:
Bring over the changes to mainbus(4) and simplebus(4) from arm64.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 17:02:11

Added files:
	www/phantomjs/patches: 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_network_qt_QNetworkReplyHandler_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebKit_qt_WebCoreSupport_NotificationPresenterClientQt_cpp 

Log message:
final patches for clang on amd64. OwnPtr wants nullptr constants, 0 leads
to ambiguous messages.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/27 17:03:54

Modified files:
	comms/xlog     : Makefile 
	comms/xlog/pkg : PLIST 
Added files:
	comms/xlog/patches: patch-configure 

Log message:
* drop -Werror; fixes build with clang
* replace gettext module while here


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 17:11:09

Modified files:
	devel/libmemcached: Makefile 
	devel/libmemcached/patches: patch-libmemcached-1_0_memcached_h 
Added files:
	devel/libmemcached/patches: patch-clients_memflush_cc 

Log message:
may change installed header, so bump.
simply go to cstdint directly with clang.
fixes ptr/bool comparisons


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/27 17:15:00

Modified files:
	graphics/libraw: Makefile 
Added files:
	graphics/libraw/patches: patch-configure 

Log message:
Don't hardcode libstdc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 17:15:39

Modified files:
	net/gloox/patches: patch-src_Makefile_in 
Added files:
	net/gloox/patches: patch-src_examples_ft_recv_cpp 

Log message:
fix for clang (link warning option doesn't work) + missing prototype for ctime.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 17:20:29

Modified files:
	x11/flwm/patches: patch-configure 

Log message:
surprisingly enough, this ancient program still compiles... once
you fix the configure test


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 17:52:35

Modified files:
	lib/libc/net   : ip6opt.c 

Log message:
Remove "len < 0" check; len is socklen_t (uint32_t) so can't be
negative.  Quiets a warning from clang.  OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 17:54:08

Modified files:
	lib/libc/nls   : catopen.c 

Log message:
ntohl() returns uint32_t so it cannot be < 0.  Since we're storing
the result in an int check for > INT_MAX instead.  OK bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 19:51:30

Modified files:
	graphics/agg   : Makefile 
Added files:
	graphics/agg/patches: patch-include_agg_renderer_outline_aa_h 

Log message:
remove impossible member from class, can't return non-const value based
on const member.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/27 19:54:09

Modified files:
	lang/spidermonkey/patches: patch-js_src_configure_in 
Added files:
	lang/spidermonkey/patches: 
	                           patch-js_src_build_autoconf_moznbytetype_m4 

Log message:
building with clang is just a question of fixing configure
- C++ tests should return properly
- autodetection of -fno-exceptions is broken


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/27 20:25:36

Modified files:
	devel/mercurial: Tag: OPENBSD_6_1 Makefile 
	devel/mercurial/patches: Tag: OPENBSD_6_1 
	                         patch-mercurial_dispatch_py 

Log message:
My previous patch fixed the security bug but broke some commands.

Bug report and patch by Cedric Krier.


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/04/27 21:20:27

Modified files:
	usr.bin/ssh    : readconf.c readconf.h ssh.c ssh_config.5 

Log message:
Add SyslogFacility option to ssh(1) matching the equivalent option in
sshd(8).  bz#2705, patch from erahn at arista.com, ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/27 21:21:12

Modified files:
	usr.bin/ssh    : scp.c 

Log message:
Avoid relying on implementation-specific behavior when detecting
whether the timestamp or file size overflowed.  If time_t and
off_t are not either 32-bit or 64-bit scp will exit with an error.
OK djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/27 21:24:53

Modified files:
	usr.bin/ssh    : sshconnect2.c 

Log message:
include key fingerprint in "Offering public key" debug message


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/04/27 22:00:14

Modified files:
	regress/usr.bin/ssh: integrity.sh 

Log message:
Pull back some shell portability fixes from -portable to make future syncs
easier.  Note that this also changes the number of bytes skipped on "Bad
Packet" errors from 2 to 3 because the worst case is changing the high byte
of the length field in which case skipping 3 bytes is needed.  ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/04/27 22:16:27

Modified files:
	regress/usr.bin/ssh: integrity.sh 

Log message:
Merge missing bits from Colin Watson's patch in bz#2658 which make integrity
tests more robust against timeouts.  ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/28 00:15:03

Modified files:
	usr.bin/ssh    : ssh_config.5 

Log message:
sort;


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/28 01:37:00

Modified files:
	emulators/gxemul: Makefile 
Added files:
	emulators/gxemul/patches: 
	                          patch-src_components_cpu_CPUDyntransComponent_cc 
	                          patch-src_components_cpu_M88K_CPUComponent_cc 
	                          patch-src_components_cpu_MIPS_CPUComponent_cc 
	                          patch-src_include_components_CPUDyntransComponent_h 
	                          patch-src_include_components_M88K_CPUComponent_h 
	                          patch-src_include_components_MIPS_CPUComponent_h 

Log message:
Fix build errors with Clang. Patches from Pkgsrc.

Binary differs so bump REVISION as well.

OK espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/28 01:44:36

Modified files:
	sys/arch/amd64/amd64: vmm.c 
	sys/arch/amd64/include: vmmvar.h 

Log message:
vmm: don't use invvpid if we didn't detect vpid capability during
vcpu setup


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/28 01:45:34

Modified files:
	benchmarks/speedtest-cli: Makefile distinfo 

Log message:
Update speedtest-cli to 1.0.6.

OK ajacoutot@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 02:11:51

Modified files:
	databases/evolution-data-server/patches: 
	                                         patch-cmake_modules_SetupBuildFlags_cmake 
	mail/evolution/patches: 
	                        patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Push upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 02:13:07

Modified files:
	print/cups-filters: Makefile distinfo 

Log message:
Update to cups-filters-1.13.5.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/28 02:14:48

Modified files:
	usr.sbin/vmd   : i8253.c i8253.h 

Log message:
rename i8253 "counter" to "channel", a better name for what we are
emulating


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 02:31:57

Modified files:
	x11/gnome/nautilus: Makefile distinfo 
	x11/gnome/nautilus/patches: patch-src_nautilus-ui-utilities_c 

Log message:
Update to nautilus-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/28 02:56:33

Modified files:
	geo/mapcache   : Makefile distinfo 
	geo/mapcache/pkg: README 
Removed files:
	geo/mapcache/patches: patch-util_mapcache_seed_c 

Log message:
Update to mapcache 1.6.0.

see
https://lists.osgeo.org/pipermail/mapserver-users/2017-April/079929.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 03:40:20

Modified files:
	devel/p5-Config-Any: Makefile distinfo 

Log message:
Update to p5-Config-Any-0.32.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 04:01:01

Added files:
	misc/magicpoint/patches: patch-image_rlelib_c patch-mng_c 

Log message:
fix the two nits that prevent clang from compiling junk


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/04/28 04:09:37

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
add some comments. no functional change


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 04:20:38

Modified files:
	www/owncloud   : Makefile distinfo 
	www/owncloud/files: httpd-owncloud.conf.dist.in 
	www/owncloud/patches: 
	                      patch-apps_updatenotification_appinfo_info_xml 
	                      patch-version_php 
	www/owncloud/pkg: PLIST README 
Added files:
	www/owncloud/files: config.php.dist.in 
	www/owncloud/patches: 
	                      patch-settings_Controller_CheckSetupController_php 

Log message:
Update to owncloud-10.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 04:41:45

Modified files:
	www/owncloud   : Makefile 
	www/owncloud/pkg: README 
Added files:
	www/owncloud/patches: patch-_htaccess 

Log message:
Forgot a patch in previous.
Mention the rewrite_module in readme while here.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 04:42:26

Added files:
	inputmethods/scim/patches: 
	                           patch-extras_gtk2_immodule_gtkimcontextscim_cpp 
	                           patch-src_ltdl_cpp 

Log message:
fix constness for clang. mistaking static_cast for const_cast is rather funny


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/28 04:42:42

Modified files:
	geo/pgrouting  : Makefile distinfo 
	geo/pgrouting/pkg: PLIST 

Log message:
Update to pgrouting 2.4.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/28 04:55:09

Modified files:
	x11/gnome      : gnome.port.mk 

Log message:
unbreak


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 05:04:56

Added files:
	games/stepmania/patches: 
	                         patch-src_libtomcrypt_src_headers_tomcrypt_macros_h 

Log message:
fix inline constraints for clang, no variant with constants.
more recent libtomcrypt switched to macros because of this, but we
don't really care.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 05:16:30

Modified files:
	devel/glib2    : Makefile 
	x11/gtk+2      : Makefile 
	x11/gtk+3      : Makefile 

Log message:
"Everything is a Freaking GLib/GTK+ problem"

Compile with debug symbols and don't strip on install(1). This will ease
debugging all the many things that depend on and crash within these libs. We'll
see how this works out in the long run.
req. by mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/28 05:28:20

Modified files:
	gnu/usr.bin/clang/include/clang/intrin: Makefile 

Log message:
Install a few more x86 intrinsics header files.

spotted by espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/28 05:39:04

Modified files:
	games/eboard   : Makefile 
Added files:
	games/eboard/patches: patch-ntext_cc 

Log message:
* avoid needless write to string (clang fix from FreeBSD)
* drop gettext module and sync wantlib


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 06:29:33

Added files:
	japanese/kterm/patches: patch-button_c patch-charproc_c 
	                        patch-cursor_c patch-input_c 
	                        patch-misc_c patch-screen_c 
	                        patch-scrollbar_c patch-util_c 

Log message:
add enough void to fix empty return errors on clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 07:12:51

Modified files:
	x11/gnome/session: Makefile 
Removed files:
	x11/gnome/session/patches: patch-gnome-session_gsm-app_c 

Log message:
Drop the gio-kqueue workaround; mpi@ fixed the underlying issue.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 07:17:21

Modified files:
	emulators/fceux: Makefile 

Log message:
link does some weird things with clang thx to the pthread-stubs coming
from cairo/pixman-1 (doesn't work well with pthread-stubs)
Since this is scons, just link with -lpthread already, it's all compiled
-pthread anyway.


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/04/28 07:29:22

Modified files:
	devel/glib2    : Makefile 
Added files:
	devel/glib2/patches: patch-gio_kqueue_kqueue-helper_c 

Log message:
Prevent a use-after-free resulting in a crash of all apps depending
on glib/GIO mostly at "pkg_add -u" time.

You can now run "pkg_add -u" inside GNOME 3 without any crash.

Diff already submitted upstream.

ok ajacoutot@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/28 07:40:00

Modified files:
	usr.bin/tmux   : tmux.1 

Log message:
Default for xterm-keys was wrong, stop documenting it.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/04/28 07:50:02

Modified files:
	share/misc     : airport 

Log message:
add City of Derry Airport
ok "i have been there"@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/28 07:50:55

Modified files:
	sys/conf       : files 
	sys/kern       : init_main.c kern_pledge.c syscalls.master 
	sys/sys        : proc.h 
Added files:
	sys/kern       : sys_futex.c 
	sys/sys        : futex.h 

Log message:
Add futex(2) syscall based on a sane subset of its Linux equivalent.

The syscall is marked NOLOCK and only FUTEX_WAIT grabs the KERNEL_LOCK()
because of PCATCH and the signal nightmare.

Serialization of threads is currently done with a global & exclusive
rwlock.

Note that the current implementation still use copyin(9) which is not
guaranteed to be atomic.  Committing now such that remaining issues can
be addressed in-tree.

With inputs from guenther@, kettenis@ and visa@.

ok deraadt@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/28 07:51:14

Modified files:
	sys/kern       : init_sysent.c syscalls.c 
	sys/sys        : syscall.h syscallargs.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/28 07:53:05

Modified files:
	usr.bin/kdump  : kdump.c kdump_subr.h mksubr 

Log message:
Display futex(2) operations and arguments.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/28 08:02:57

Added files:
	lib/libc/sys   : futex.2 

Log message:
Document futex(2) with a lot of inputs from schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/28 08:11:01

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
Start deleting redundant features that are already covered
by mandoc(1) -Tlint, as suggested by the upstream author
and maintainer Thomas Klausner <wiz @ NetBSD>.
The ultimate goal is to get rid of mdoclint and integrate
all its functionality into mandoc, but that will still take
some time, so simplify mdoclint for the time being.
jmc@ "go ahead", OK wiz@, also committed upstream

This first patch removes the AUTHORS check that mandoc does, too.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/04/28 08:15:45

Modified files:
	sbin/pfctl     : parse.y 

Log message:
Remove double assignments


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/28 08:21:00

Modified files:
	www/chromium   : Makefile distinfo 
	www/chromium/patches: patch-BUILD_gn patch-base_BUILD_gn 
	                      patch-base_allocator_allocator_shim_cc 
	                      patch-base_debug_stack_trace_posix_cc 
	                      patch-base_debug_thread_heap_usage_tracker_cc 
	                      patch-base_process_process_posix_cc 
	                      patch-base_threading_platform_thread_h 
	                      patch-base_trace_event_malloc_dump_provider_cc 
	                      patch-build_config_BUILD_gn 
	                      patch-build_config_allocator_gni 
	                      patch-build_config_compiler_BUILD_gn 
	                      patch-build_config_features_gni 
	                      patch-build_toolchain_gcc_toolchain_gni 
	                      patch-cc_BUILD_gn 
	                      patch-chrome_app_chrome_command_ids_h 
	                      patch-chrome_app_chrome_main_delegate_cc 
	                      patch-chrome_app_chrome_main_delegate_h 
	                      patch-chrome_app_chromium_strings_grd 
	                      patch-chrome_app_generated_resources_grd 
	                      patch-chrome_app_google_chrome_strings_grd 
	                      patch-chrome_app_mash_mash_runner_cc 
	                      patch-chrome_app_settings_strings_grdp 
	                      patch-chrome_browser_about_flags_cc 
	                      patch-chrome_browser_browser_process_impl_cc 
	                      patch-chrome_browser_browser_process_impl_h 
	                      patch-chrome_browser_browser_resources_grd 
	                      patch-chrome_browser_chrome_browser_main_cc 
	                      patch-chrome_browser_chrome_browser_main_linux_cc 
	                      patch-chrome_browser_chrome_content_browser_client_cc 
	                      patch-chrome_browser_chrome_content_browser_client_h 
	                      patch-chrome_browser_download_download_commands_cc 
	                      patch-chrome_browser_extensions_BUILD_gn 
	                      patch-chrome_browser_extensions_api_image_writer_private_image_writer_private_api_cc 
	                      patch-chrome_browser_extensions_bookmark_app_helper_cc 
	                      patch-chrome_browser_extensions_browser_context_keyed_service_factories_cc 
	                      patch-chrome_browser_media_galleries_media_file_system_registry_cc 
	                      patch-chrome_browser_memory_details_cc 
	                      patch-chrome_browser_notifications_message_center_notification_manager_cc 
	                      patch-chrome_browser_platform_util_linux_cc 
	                      patch-chrome_browser_profiles_profile_impl_io_data_cc 
	                      patch-chrome_browser_resources_plugin_metadata_plugins_linux_json 
	                      patch-chrome_browser_safe_browsing_incident_reporting_incident_reporting_service_cc 
	                      patch-chrome_browser_safe_browsing_permission_reporter_cc 
	                      patch-chrome_browser_sync_chrome_sync_client_cc 
	                      patch-chrome_browser_task_manager_sampling_task_group_cc 
	                      patch-chrome_browser_task_manager_sampling_task_group_h 
	                      patch-chrome_browser_task_manager_sampling_task_manager_impl_cc 
	                      patch-chrome_browser_task_manager_task_manager_observer_h 
	                      patch-chrome_browser_tracing_crash_service_uploader_cc 
	                      patch-chrome_browser_ui_browser_command_controller_cc 
	                      patch-chrome_browser_ui_startup_startup_browser_creator_cc 
	                      patch-chrome_browser_ui_tab_helpers_cc 
	                      patch-chrome_browser_ui_task_manager_task_manager_columns_cc 
	                      patch-chrome_browser_ui_task_manager_task_manager_table_model_cc 
	                      patch-chrome_browser_ui_toolbar_app_menu_model_cc 
	                      patch-chrome_browser_ui_views_chrome_views_delegate_h 
	                      patch-chrome_browser_ui_views_frame_browser_frame_cc 
	                      patch-chrome_browser_ui_views_frame_system_menu_model_builder_cc 
	                      patch-chrome_browser_ui_webui_about_ui_cc 
	                      patch-chrome_browser_ui_webui_chrome_web_ui_controller_factory_cc 
	                      patch-chrome_browser_ui_webui_options_browser_options_handler_cc 
	                      patch-chrome_browser_ui_webui_settings_md_settings_localized_strings_provider_cc 
	                      patch-chrome_browser_web_applications_web_app_cc 
	                      patch-chrome_browser_web_applications_web_app_h 
	                      patch-chrome_common_BUILD_gn 
	                      patch-chrome_common_chrome_paths_cc 
	                      patch-chrome_common_chrome_paths_h 
	                      patch-chrome_common_chrome_paths_internal_h 
	                      patch-chrome_common_chrome_switches_cc 
	                      patch-chrome_common_chrome_switches_h 
	                      patch-chrome_common_pref_names_cc 
	                      patch-chrome_common_pref_names_h 
	                      patch-chrome_common_url_constants_cc 
	                      patch-chrome_common_url_constants_h 
	                      patch-chromecast_browser_cast_browser_main_parts_cc 
	                      patch-chromecast_browser_cast_content_browser_client_cc 
	                      patch-components_autofill_core_browser_autofill_experiments_cc 
	                      patch-components_crash_content_app_BUILD_gn 
	                      patch-components_metrics_BUILD_gn 
	                      patch-components_omnibox_browser_omnibox_field_trial_cc 
	                      patch-components_policy_resources_policy_templates_json 
	                      patch-content_app_content_main_runner_cc 
	                      patch-content_browser_BUILD_gn 
	                      patch-content_browser_accessibility_browser_accessibility_h 
	                      patch-content_browser_accessibility_browser_accessibility_manager_h 
	                      patch-content_browser_browser_main_loop_cc 
	                      patch-content_browser_child_process_launcher_helper_linux_cc 
	                      patch-content_browser_devtools_protocol_color_picker_cc 
	                      patch-content_browser_download_base_file_cc 
	                      patch-content_browser_gpu_gpu_data_manager_impl_private_cc 
	                      patch-content_browser_gpu_gpu_internals_ui_cc 
	                      patch-content_browser_media_media_internals_cc 
	                      patch-content_browser_ppapi_plugin_process_host_cc 
	                      patch-content_browser_renderer_host_media_video_capture_manager_cc 
	                      patch-content_browser_renderer_host_render_message_filter_cc 
	                      patch-content_browser_renderer_host_render_process_host_impl_cc 
	                      patch-content_browser_renderer_host_render_widget_host_view_aura_cc 
	                      patch-content_browser_renderer_host_render_widget_host_view_event_handler_cc 
	                      patch-content_child_child_process_cc 
	                      patch-content_child_child_process_h 
	                      patch-content_child_child_thread_impl_cc 
	                      patch-content_common_BUILD_gn 
	                      patch-content_common_view_messages_h 
	                      patch-content_gpu_gpu_main_cc 
	                      patch-content_public_common_content_switches_cc 
	                      patch-content_public_common_content_switches_h 
	                      patch-content_public_common_renderer_preferences_h 
	                      patch-content_renderer_render_thread_impl_cc 
	                      patch-content_renderer_renderer_main_cc 
	                      patch-content_utility_utility_main_cc 
	                      patch-device_bluetooth_BUILD_gn 
	                      patch-device_usb_BUILD_gn 
	                      patch-ipc_ipc_message_utils_cc 
	                      patch-mash_package_mash_packaged_service_cc 
	                      patch-media_BUILD_gn 
	                      patch-media_audio_BUILD_gn 
	                      patch-media_audio_audio_manager_cc 
	                      patch-media_audio_audio_manager_h 
	                      patch-media_base_video_frame_h 
	                      patch-media_capture_video_fake_video_capture_device_factory_cc 
	                      patch-media_capture_video_video_capture_device_client_cc 
	                      patch-media_capture_video_video_capture_device_factory_cc 
	                      patch-media_media_options_gni 
	                      patch-net_BUILD_gn 
	                      patch-net_http_http_network_session_cc 
	                      patch-net_proxy_proxy_config_service_linux_cc 
	                      patch-net_socket_udp_socket_posix_cc 
	                      patch-net_tools_cert_verify_tool_verify_using_path_builder_cc 
	                      patch-pdf_pdfium_pdfium_engine_cc 
	                      patch-services_ui_gpu_gpu_main_cc 
	                      patch-third_party_WebKit_Source_bindings_core_v8_V8ScriptRunner_cpp 
	                      patch-third_party_WebKit_Source_platform_fonts_FontCache_cpp 
	                      patch-third_party_WebKit_Source_platform_fonts_FontCache_h 
	                      patch-third_party_WebKit_Source_platform_fonts_SimpleFontData_cpp 
	                      patch-third_party_WebKit_Source_platform_fonts_skia_FontCacheSkia_cpp 
	                      patch-third_party_WebKit_Source_web_PopupMenuImpl_cpp 
	                      patch-third_party_angle_BUILD_gn 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_asm 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_h 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_asm 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_h 
	                      patch-third_party_webrtc_BUILD_gn 
	                      patch-third_party_webrtc_base_BUILD_gn 
	                      patch-third_party_webrtc_base_httpcommon_cc 
	                      patch-third_party_webrtc_base_network_cc 
	                      patch-third_party_webrtc_base_physicalsocketserver_cc 
	                      patch-third_party_webrtc_base_platform_thread_cc 
	                      patch-tools_gn_args_cc 
	                      patch-tools_gn_bootstrap_bootstrap_py 
	                      patch-ui_base_resource_resource_bundle_cc 
	                      patch-ui_gfx_canvas_skia_cc 
	                      patch-ui_gl_BUILD_gn 
	                      patch-ui_gl_gl_bindings_autogen_glx_cc 
	                      patch-ui_gl_sync_control_vsync_provider_cc 
	                      patch-ui_gl_sync_control_vsync_provider_h 
	                      patch-ui_message_center_message_center_style_h 
	                      patch-ui_message_center_views_message_center_button_bar_cc 
	                      patch-ui_message_center_views_message_center_button_bar_h 
	                      patch-ui_message_center_views_toast_contents_view_cc 
	                      patch-ui_views_accessibility_native_view_accessibility_h 
	                      patch-ui_views_controls_label_cc 
	                      patch-ui_views_controls_textfield_textfield_cc 
	                      patch-ui_views_window_custom_frame_view_cc 
	                      patch-v8_BUILD_gn 
	www/chromium/pkg: PLIST 
Added files:
	www/chromium/patches: patch-base_debug_proc_maps_linux_cc 
	                      patch-base_threading_thread_task_runner_handle_cc 
	                      patch-breakpad_src_common_simple_string_dictionary_h 
	                      patch-chrome_app_shutdown_signal_handlers_posix_cc 
	                      patch-components_tracing_common_process_metrics_memory_dump_provider_cc 
	                      patch-components_tracing_common_process_metrics_memory_dump_provider_h 
	                      patch-device_sensors_data_fetcher_shared_memory_h 
	                      patch-services_catalog_public_cpp_manifest_parsing_util_cc 
	                      patch-services_catalog_store_cc 
	                      patch-services_catalog_store_h 
	                      patch-services_device_time_zone_monitor_time_zone_monitor_cc 
	                      patch-storage_browser_quota_quota_settings_cc 
	                      patch-third_party_node_node_py 
Removed files:
	www/chromium/patches: 
	                      patch-chrome_browser_chrome_browser_main_posix_cc 
	                      patch-chrome_browser_gpu_gpu_feature_checker_cc 
	                      patch-chrome_browser_ui_views_chrome_views_delegate_cc 
	                      patch-content_browser_device_sensors_data_fetcher_shared_memory_h 
	                      patch-device_time_zone_monitor_time_zone_monitor_cc 
	                      patch-third_party_webrtc_voice_engine_voice_engine_defines_h 

Log message:
update to 58.0.3029.81


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 08:22:19

Modified files:
	converters/p5-Unicode-LineBreak: Makefile distinfo 

Log message:
Update to p5-Unicode-LineBreak-2017.004.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/28 08:30:54

Modified files:
	lib/libc/sys   : futex.2 

Log message:
errant space;


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/28 08:52:13

Modified files:
	usr.sbin/syslogd: log.c log.h syslogd.c 

Log message:
When syslogd(8) failed to open a logfile, the error message could
get lost.  Remove log_setdebug() as it adds too much abstraction,
use the global variable Started instead.  Set the Started value
before the init() function.  Then errors during config file processing
will be logged to the console as Initialize is still 0.  This is
better than stderr as the latter may be redirected to /dev/null.
Print the timestamp and hostname also for direct messages to console,
so that they look like all others.
bug report jung@; OK benno@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 09:01:59

Modified files:
	databases/py-sqlparse: Makefile distinfo 

Log message:
Update to py-sqlparse-0.2.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 09:04:32

Modified files:
	graphics/py-cairo: Makefile distinfo 
	graphics/py-cairo/pkg: DESCR PLIST 
Added files:
	graphics/py-cairo/pkg: PFRAG.no-python3 PFRAG.python3 

Log message:
Update to py-cairo-1.12.0.
Use the new fork from pygobject hosted on GitHub which is actually
maintained, does not use the horrible waf build system and supports both
python2 and 3.

ok eric@ (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/28 09:04:49

Modified files:
	regress/usr.sbin/syslogd: args-fdexhaustion-config.pl 
	                          args-fdexhaustion-tcp.pl 
	                          args-maxhostlen.pl 
	                          args-maxloghostlen.pl 
	                          args-maxportlen.pl 
	                          args-proto-invalid.pl 
	                          args-proto-udp4-host6.pl 
	                          args-proto-udp4-only6.pl 
	                          args-proto-udp6-host4.pl 
	                          args-proto-udp6-only4.pl 
	                          args-tls-cafile-noexist.pl 
Added files:
	regress/usr.sbin/syslogd: args-nofile-sighup.pl args-nofile.pl 

Log message:
Check that non existing log files in syslog.conf are reported to
/dev/console during startup and restart.  Startup warnings contain
the pid now.  Console logging creates additional errors if the file
descriptor limit is exhausted.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 09:04:53

Modified files:
	devel/py-gobject3: Makefile 

Log message:
Fix dependency after py3-cairo pkgpath change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 09:06:54

Modified files:
	graphics       : Makefile 
Removed files:
	graphics/py3-cairo: Makefile distinfo 
	graphics/py3-cairo/patches: patch-_waf3-waflib_Build_py 
	                            patch-_waf3-waflib_Tools_python_py 
	graphics/py3-cairo/pkg: DESCR PLIST 

Log message:
Remove graphics/py3-cairo, it's been merged into py-cairo python3 FLAVOR.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 09:37:27

Modified files:
	devel/boris    : Makefile distinfo 
	devel/boris/patches: patch-bin_boris 

Log message:
Update to boris-1.0.10.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 09:49:09

Modified files:
	devel/p5-Acme-Damn: Makefile distinfo 

Log message:
Update to p5-Acme-Damn-0.08.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/28 10:00:10

Modified files:
	devel/qt-creator: Makefile distinfo 
	devel/qt-creator/patches: patch-doc_doc_pri 
	                          patch-src_libs_utils_buildablehelperlibrary_cpp 
	                          patch-src_plugins_projectexplorer_gcctoolchain_cpp 
	                          patch-src_plugins_qmakeprojectmanager_qmakebuildconfiguration_cpp 
	                          patch-src_shared_qbs_src_lib_corelib_tools_processutils_cpp 
	                          patch-src_shared_qbs_src_lib_corelib_tools_tools_pri 
	devel/qt-creator/pkg: PLIST 

Log message:
update to qt-creator 4.2.2

- bump some SHARED_LIBS (nm(1) checks)
- remove qch_docs target and all -docindex BUILD_DEPENDS as
qtdeclarative loop workaround
- improve licence tag; thanks Caspar Schutijser
- Fix WANTLIB
- NO_TEST
- remove qtwebkit as LIB_DEPENDS and add ass RUN_DEPENDS
- fix one tab

ok sthen@ landry@, tested by Caspar Schutijser, thnaks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/28 10:03:11

Removed files:
	devel/qt-creator/patches: patch-doc_doc_pri 

Log message:
zap empty patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 10:03:39

Modified files:
	devel/p5-Cache-FastMmap: Makefile distinfo 

Log message:
Update to p5-Cache-FastMmap-1.45.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 10:14:58

Modified files:
	devel/p5-Class-InsideOut: Makefile distinfo 

Log message:
Update to p5-Class-InsideOut-1.14.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/28 10:23:30

Modified files:
	usr.bin/mandoc : mdoc_validate.c 
	regress/usr.bin/mandoc/mdoc/Sh: Makefile 
Added files:
	regress/usr.bin/mandoc/mdoc/Sh: first.out_ascii parbefore.in 
	                                parbefore.out_ascii 
	                                parbefore.out_lint 
	                                parbefore.out_markdown 
	                                parborder.in parborder.out_ascii 
	                                parborder.out_lint 
	                                parborder.out_markdown 

Log message:
Delete .Pp right before the first .Sh and right before any .Ss,
and warn about it; mdoclint(1) does so, and it makes sense.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 10:27:30

Modified files:
	devel/p5-Class-Load: Makefile distinfo 

Log message:
Update to p5-Class-Load-0.24.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 10:37:33

Modified files:
	devel/p5-Class-Load-XS: Makefile distinfo 

Log message:
Update to p5-Class-Load-XS-0.10.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 10:51:55

Modified files:
	x11/paper-icon-theme: Makefile distinfo 
	x11/paper-icon-theme/pkg: PLIST 

Log message:
Update to paper-icon-theme-1.4.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 10:52:11

Modified files:
	devel/p5-Glib2 : Makefile distinfo 

Log message:
Update to p5-Glib2-1.325.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 10:52:41

Modified files:
	x11/p5-Gtk2    : Makefile distinfo 

Log message:
Update to p5-Gtk2-1.24992.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 10:54:46

Modified files:
	devel/p5-Glib-Object-Introspection: Makefile distinfo 

Log message:
Update to p5-Glib-Object-Introspection-0.042.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 10:58:40

Modified files:
	devel/mono-addins: Makefile distinfo 
	devel/mono-addins/patches: 
	                           patch-Mono_Addins_Gui_Mono_Addins_Gui_csproj 
Added files:
	devel/mono-addins/patches: 
	                           patch-Mono_Addins_CecilReflector_Mono_Addins_CecilReflector_csproj 
	                           patch-Mono_Addins_MSBuild_Mono_Addins_MSBuild_csproj 
	                           patch-Mono_Addins_Mono_Addins_Addin_cs 
	                           patch-Mono_Addins_Mono_Addins_csproj 
	                           patch-Mono_Addins_Setup_Mono_Addins_Setup_csproj 
	                           patch-mautil_mautil_csproj 
Removed files:
	devel/mono-addins/patches: patch-configure_ac 

Log message:
Update to mono-addins-mono-addins-1.3 but keep BROKEN (needs thread local
storage).


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/04/28 10:58:50

Modified files:
	x11/cegui      : Makefile distinfo 
	x11/cegui/patches: patch-cegui_src_SimpleTimer_cpp 

Log message:
Update to CEGUI 0.8.7.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/28 11:28:14

Modified files:
	sysutils/beats/filebeat: Makefile distinfo 
	sysutils/beats/metricbeat: Makefile distinfo 
	sysutils/beats/packetbeat: Makefile distinfo 

Log message:
update to {file,metric,packet}beat 5.3.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 11:35:11

Modified files:
	x11/gtk+2      : Makefile 

Log message:
prevent build from creating huge log with clang
okay aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 11:45:08

Modified files:
	devel/p5-DateTime-Event-Recurrence: Makefile distinfo 

Log message:
Update to p5-DateTime-Event-Recurrence-0.19.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/28 11:54:24

Modified files:
	lib/libc/sys   : futex.2 

Log message:
Reference the "Futexes Are Tricky" paper.

With schwarze@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 11:55:21

Modified files:
	cad/gtkwave    : Makefile distinfo 

Log message:
Update to gtkwave-3.3.80.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 11:57:46

Modified files:
	graphics/goocanvas: Makefile 

Log message:
Proper PORTROACH annotation.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/28 11:58:44

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Konsole incorrectly ignores SU (CSI S) if the parameter is bigger than
the scroll region, so clamp it. Reported by Moritz Bunkus.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 11:59:45

Modified files:
	devel/p5-DateTime-Format-W3CDTF: Makefile distinfo 

Log message:
Update to p5-DateTime-Format-W3CDTF-0.07.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:00:46

Modified files:
	graphics/imlib2: Makefile distinfo 

Log message:
Update to imlib2-1.4.10.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:01:09

Modified files:
	graphics/exiftran: Makefile distinfo 

Log message:
Update to exiftran-2.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:03:27

Modified files:
	graphics/icoutils: Makefile distinfo 

Log message:
Update to icoutils-0.31.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:06:06

Modified files:
	graphics/dvdrip: Makefile 

Log message:
Add PORTROACH annotation.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 12:10:52

Modified files:
	devel/p5-Devel-Declare: Makefile distinfo 

Log message:
Update to p5-Devel-Declare-0.006019.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:12:36

Modified files:
	graphics/leptonica: Makefile distinfo 

Log message:
Update to leptonica-1.74.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/28 12:14:54

Modified files:
	lang/racket-minimal: Tag: OPENBSD_6_1 Makefile distinfo 
	lang/racket-minimal/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
Update to Racket 6.9.

SECURITY:

"A security vulnerability in the `racket/sandbox` library and Typed
Racket allowed malicious Typed Racket code to escape the sandbox.
This vulnerability has been fixed in Racket version 6.9. Anyone using
`racket/sandbox` to execute untrustworthy code with access to Typed
Racket should upgrade to version 6.9 immediately.

While this known vulnerability has been eliminated, it is possible that
similar errors in other installed collections could also be exploited,
although we are not currently aware of any existing vulnerabilities. We
recommend that if you use the Racket sandbox to execute untrustworthy
Racket code, you should also employ additional operating system or
virtual machine level protections. The documentation for `racket/sandbox`
has been updated to list recommended security practices for using the
library."

https://download.racket-lang.org/v6.9.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/28 12:15:42

Modified files:
	lang/racket-minimal: Makefile distinfo 
	lang/racket-minimal/pkg: PLIST 

Log message:
Update to Racket 6.9.

SECURITY:

"A security vulnerability in the `racket/sandbox` library and Typed
Racket allowed malicious Typed Racket code to escape the sandbox.
This vulnerability has been fixed in Racket version 6.9. Anyone using
`racket/sandbox` to execute untrustworthy code with access to Typed
Racket should upgrade to version 6.9 immediately.

While this known vulnerability has been eliminated, it is possible that
similar errors in other installed collections could also be exploited,
although we are not currently aware of any existing vulnerabilities. We
recommend that if you use the Racket sandbox to execute untrustworthy
Racket code, you should also employ additional operating system or
virtual machine level protections. The documentation for `racket/sandbox`
has been updated to list recommended security practices for using the
library."

https://download.racket-lang.org/v6.9.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:20:43

Modified files:
	graphics/p5-Imager-QRCode: Makefile distinfo 

Log message:
Update to p5-Imager-QRCode-0.035.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 12:21:24

Modified files:
	devel/p5-Devel-TraceUse: Makefile distinfo 

Log message:
Update to p5-Devel-TraceUse-2.095.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 12:23:39

Modified files:
	graphics/py-sane: Makefile distinfo 

Log message:
Update to py-sane-2.8.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 13:00:18

Modified files:
	devel/p5-ExtUtils-PkgConfig: Makefile distinfo 

Log message:
Update to p5-ExtUtils-PkgConfig-1.16.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/28 13:10:48

Modified files:
	usr.bin/tmux   : alerts.c 

Log message:
Do not put the window on the alerts queue and add a reference unless the
alert is enabled and we are actually going to add the alerts event.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/28 13:12:15

Modified files:
	usr.bin/tmux   : window.c 

Log message:
Remove a reference from the right window when removing from a winlink's
list.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/28 13:13:55

Modified files:
	usr.bin/tmux   : alerts.c notify.c session.c tmux.h 
	                 window-choose.c window.c 

Log message:
Log what is happening with window and session reference counts much more
obviously.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/28 14:40:04

Modified files:
	archivers/lzip/lzlib: Makefile distinfo 
	archivers/lzip/lzlib/patches: patch-Makefile_in 

Log message:
Update to lzlib 1.9.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/04/28 14:40:46

Modified files:
	archivers/lzip/plzip: Makefile distinfo 

Log message:
Update to plzip 1.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 15:01:17

Modified files:
	graphics/tesseract/tesseract: Makefile distinfo 
	graphics/tesseract/tesseract/patches: patch-viewer_svutil_h 
	graphics/tesseract/tesseract/pkg: PLIST 
Added files:
	graphics/tesseract/tesseract/patches: patch-configure_ac 
Removed files:
	graphics/tesseract/tesseract/patches: patch-ccstruct_matrix_h 
	                                      patch-configure 

Log message:
Update to tesseract-3.05.00.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 15:22:03

Modified files:
	security/py-secretstorage: Makefile distinfo 

Log message:
Update to py-secretstorage-2.3.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 15:26:13

Modified files:
	sysutils/virt-manager: Makefile distinfo 
	sysutils/virt-manager/pkg: PLIST 
Removed files:
	sysutils/virt-manager/patches: patch-virtManager_viewers_py 

Log message:
Update to virt-manager-1.4.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 15:32:37

Modified files:
	www/bluefish   : Makefile distinfo 
	www/bluefish/pkg: PLIST 

Log message:
Update to bluefish-2.2.10.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/28 15:50:33

Modified files:
	mail/roundcubemail: Makefile distinfo 

Log message:
security update to roundcubemail-1.2.5

"The updates primarily fix a recently discovered vulnerability in the
virtualmin and sasl drivers of the password plugin (CVE-2017-8114).
More details about this vulnerability will be published soon by the
reporter. Security-wise the update is therefore only relevant for those
installations of Roundcube using the password plugin with either one of
these drivers."


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/28 15:52:17

Modified files:
	mail/roundcubemail: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC security update to roundcubemail-1.2.5

"The updates primarily fix a recently discovered vulnerability in the
virtualmin and sasl drivers of the password plugin (CVE-2017-8114).
More details about this vulnerability will be published soon by the
reporter. Security-wise the update is therefore only relevant for those
installations of Roundcube using the password plugin with either one of
these drivers."


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 15:59:30

Modified files:
	x11/p5-Wx      : Makefile distinfo 

Log message:
Update to p5-Wx-0.9932.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 16:00:28

Modified files:
	devel/p5-Hook-LexWrap: Makefile distinfo 

Log message:
Update to p5-Hook-LexWrap-0.26.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/28 16:07:46

Modified files:
	x11/kde/base3  : Makefile 

Log message:
Explicitly disable OpenEXR to avoid hidden dependencies.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:11:55

Modified files:
	x11/p5-X11-Protocol-Other: Makefile distinfo 

Log message:
Update to p5-X11-Protocol-Other-30.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/28 16:13:20

Modified files:
	devel/p5-IO-Pager: Makefile distinfo 

Log message:
Update to p5-IO-Pager-0.37.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:16:23

Modified files:
	x11/wmclockmon : Makefile distinfo 

Log message:
Update to wmclockmon-0.8.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/28 16:16:43

Modified files:
	bin/stty       : print.c 

Log message:
Quiet a clang warning from -Wstring-plus-int.  OK naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:16:54

Modified files:
	archivers/p5-POE-Filter-Zlib: Makefile distinfo 

Log message:
Update to p5-POE-Filter-Zlib-2.04.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:18:59

Modified files:
	audio/checkmate: Makefile distinfo 

Log message:
Update to checkmate-0.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:20:10

Modified files:
	audio/glyr     : Makefile distinfo 

Log message:
Update to glyr-1.0.10.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:20:45

Modified files:
	audio/p5-MP3-Tag: Makefile distinfo 

Log message:
Update to p5-MP3-Tag-1.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/28 16:22:37

Modified files:
	www/iridium    : Makefile distinfo 
	www/iridium/patches: patch-BUILD_gn patch-base_BUILD_gn 
	                     patch-base_allocator_allocator_shim_cc 
	                     patch-base_debug_stack_trace_posix_cc 
	                     patch-base_debug_thread_heap_usage_tracker_cc 
	                     patch-base_process_process_posix_cc 
	                     patch-base_threading_platform_thread_h 
	                     patch-base_trace_event_malloc_dump_provider_cc 
	                     patch-build_config_BUILD_gn 
	                     patch-build_config_allocator_gni 
	                     patch-build_config_compiler_BUILD_gn 
	                     patch-build_config_features_gni 
	                     patch-build_toolchain_gcc_toolchain_gni 
	                     patch-cc_BUILD_gn 
	                     patch-chrome_app_chrome_command_ids_h 
	                     patch-chrome_app_chrome_main_delegate_cc 
	                     patch-chrome_app_chrome_main_delegate_h 
	                     patch-chrome_app_chromium_strings_grd 
	                     patch-chrome_app_generated_resources_grd 
	                     patch-chrome_app_google_chrome_strings_grd 
	                     patch-chrome_app_mash_mash_runner_cc 
	                     patch-chrome_app_settings_strings_grdp 
	                     patch-chrome_browser_about_flags_cc 
	                     patch-chrome_browser_browser_process_impl_cc 
	                     patch-chrome_browser_browser_process_impl_h 
	                     patch-chrome_browser_browser_resources_grd 
	                     patch-chrome_browser_chrome_browser_main_cc 
	                     patch-chrome_browser_chrome_browser_main_linux_cc 
	                     patch-chrome_browser_chrome_content_browser_client_cc 
	                     patch-chrome_browser_chrome_content_browser_client_h 
	                     patch-chrome_browser_download_download_commands_cc 
	                     patch-chrome_browser_extensions_BUILD_gn 
	                     patch-chrome_browser_extensions_api_image_writer_private_image_writer_private_api_cc 
	                     patch-chrome_browser_extensions_bookmark_app_helper_cc 
	                     patch-chrome_browser_extensions_browser_context_keyed_service_factories_cc 
	                     patch-chrome_browser_media_galleries_media_file_system_registry_cc 
	                     patch-chrome_browser_memory_details_cc 
	                     patch-chrome_browser_notifications_message_center_notification_manager_cc 
	                     patch-chrome_browser_platform_util_linux_cc 
	                     patch-chrome_browser_profiles_profile_impl_io_data_cc 
	                     patch-chrome_browser_resources_plugin_metadata_plugins_linux_json 
	                     patch-chrome_browser_safe_browsing_incident_reporting_incident_reporting_service_cc 
	                     patch-chrome_browser_safe_browsing_permission_reporter_cc 
	                     patch-chrome_browser_sync_chrome_sync_client_cc 
	                     patch-chrome_browser_task_manager_sampling_task_group_cc 
	                     patch-chrome_browser_task_manager_sampling_task_group_h 
	                     patch-chrome_browser_task_manager_sampling_task_manager_impl_cc 
	                     patch-chrome_browser_task_manager_task_manager_observer_h 
	                     patch-chrome_browser_tracing_crash_service_uploader_cc 
	                     patch-chrome_browser_ui_browser_command_controller_cc 
	                     patch-chrome_browser_ui_startup_startup_browser_creator_cc 
	                     patch-chrome_browser_ui_tab_helpers_cc 
	                     patch-chrome_browser_ui_task_manager_task_manager_columns_cc 
	                     patch-chrome_browser_ui_task_manager_task_manager_table_model_cc 
	                     patch-chrome_browser_ui_toolbar_app_menu_model_cc 
	                     patch-chrome_browser_ui_views_chrome_views_delegate_h 
	                     patch-chrome_browser_ui_views_frame_browser_frame_cc 
	                     patch-chrome_browser_ui_views_frame_system_menu_model_builder_cc 
	                     patch-chrome_browser_ui_webui_about_ui_cc 
	                     patch-chrome_browser_ui_webui_chrome_web_ui_controller_factory_cc 
	                     patch-chrome_browser_ui_webui_options_browser_options_handler_cc 
	                     patch-chrome_browser_ui_webui_settings_md_settings_localized_strings_provider_cc 
	                     patch-chrome_browser_web_applications_web_app_cc 
	                     patch-chrome_browser_web_applications_web_app_h 
	                     patch-chrome_common_BUILD_gn 
	                     patch-chrome_common_chrome_paths_cc 
	                     patch-chrome_common_chrome_paths_h 
	                     patch-chrome_common_chrome_paths_internal_h 
	                     patch-chrome_common_chrome_switches_cc 
	                     patch-chrome_common_chrome_switches_h 
	                     patch-chrome_common_pref_names_cc 
	                     patch-chrome_common_pref_names_h 
	                     patch-chrome_common_url_constants_cc 
	                     patch-chrome_common_url_constants_h 
	                     patch-chromecast_browser_cast_browser_main_parts_cc 
	                     patch-chromecast_browser_cast_content_browser_client_cc 
	                     patch-components_autofill_core_browser_autofill_experiments_cc 
	                     patch-components_crash_content_app_BUILD_gn 
	                     patch-components_metrics_BUILD_gn 
	                     patch-components_omnibox_browser_omnibox_field_trial_cc 
	                     patch-components_policy_resources_policy_templates_json 
	                     patch-content_app_content_main_runner_cc 
	                     patch-content_browser_BUILD_gn 
	                     patch-content_browser_accessibility_browser_accessibility_h 
	                     patch-content_browser_accessibility_browser_accessibility_manager_h 
	                     patch-content_browser_browser_main_loop_cc 
	                     patch-content_browser_child_process_launcher_helper_linux_cc 
	                     patch-content_browser_device_sensors_data_fetcher_shared_memory_h 
	                     patch-content_browser_devtools_protocol_color_picker_cc 
	                     patch-content_browser_download_base_file_cc 
	                     patch-content_browser_gpu_gpu_data_manager_impl_private_cc 
	                     patch-content_browser_gpu_gpu_internals_ui_cc 
	                     patch-content_browser_media_media_internals_cc 
	                     patch-content_browser_ppapi_plugin_process_host_cc 
	                     patch-content_browser_renderer_host_media_video_capture_manager_cc 
	                     patch-content_browser_renderer_host_render_message_filter_cc 
	                     patch-content_browser_renderer_host_render_process_host_impl_cc 
	                     patch-content_browser_renderer_host_render_widget_host_view_aura_cc 
	                     patch-content_browser_renderer_host_render_widget_host_view_event_handler_cc 
	                     patch-content_child_child_process_cc 
	                     patch-content_child_child_process_h 
	                     patch-content_child_child_thread_impl_cc 
	                     patch-content_common_BUILD_gn 
	                     patch-content_common_view_messages_h 
	                     patch-content_gpu_gpu_main_cc 
	                     patch-content_public_common_content_switches_cc 
	                     patch-content_public_common_content_switches_h 
	                     patch-content_public_common_renderer_preferences_h 
	                     patch-content_renderer_render_thread_impl_cc 
	                     patch-content_renderer_renderer_main_cc 
	                     patch-content_utility_utility_main_cc 
	                     patch-device_bluetooth_BUILD_gn 
	                     patch-device_time_zone_monitor_time_zone_monitor_cc 
	                     patch-device_usb_BUILD_gn 
	                     patch-ipc_ipc_message_utils_cc 
	                     patch-mash_package_mash_packaged_service_cc 
	                     patch-media_BUILD_gn 
	                     patch-media_audio_BUILD_gn 
	                     patch-media_audio_audio_manager_cc 
	                     patch-media_audio_audio_manager_h 
	                     patch-media_base_video_frame_h 
	                     patch-media_capture_video_fake_video_capture_device_factory_cc 
	                     patch-media_capture_video_video_capture_device_client_cc 
	                     patch-media_capture_video_video_capture_device_factory_cc 
	                     patch-media_media_options_gni 
	                     patch-net_BUILD_gn 
	                     patch-net_http_http_network_session_cc 
	                     patch-net_proxy_proxy_config_service_linux_cc 
	                     patch-net_socket_udp_socket_posix_cc 
	                     patch-net_tools_cert_verify_tool_verify_using_path_builder_cc 
	                     patch-pdf_pdfium_pdfium_engine_cc 
	                     patch-services_ui_gpu_gpu_main_cc 
	                     patch-third_party_WebKit_Source_bindings_core_v8_V8ScriptRunner_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_FontCache_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_FontCache_h 
	                     patch-third_party_WebKit_Source_platform_fonts_SimpleFontData_cpp 
	                     patch-third_party_WebKit_Source_platform_fonts_skia_FontCacheSkia_cpp 
	                     patch-third_party_WebKit_Source_web_PopupMenuImpl_cpp 
	                     patch-third_party_angle_BUILD_gn 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_asm 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_h 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_asm 
	                     patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_h 
	                     patch-third_party_webrtc_BUILD_gn 
	                     patch-third_party_webrtc_base_BUILD_gn 
	                     patch-third_party_webrtc_base_httpcommon_cc 
	                     patch-third_party_webrtc_base_network_cc 
	                     patch-third_party_webrtc_base_physicalsocketserver_cc 
	                     patch-third_party_webrtc_base_platform_thread_cc 
	                     patch-tools_gn_args_cc 
	                     patch-tools_gn_bootstrap_bootstrap_py 
	                     patch-ui_base_resource_resource_bundle_cc 
	                     patch-ui_gfx_canvas_skia_cc 
	                     patch-ui_gl_BUILD_gn 
	                     patch-ui_gl_gl_bindings_autogen_glx_cc 
	                     patch-ui_gl_sync_control_vsync_provider_cc 
	                     patch-ui_gl_sync_control_vsync_provider_h 
	                     patch-ui_message_center_message_center_style_h 
	                     patch-ui_message_center_views_message_center_button_bar_cc 
	                     patch-ui_message_center_views_message_center_button_bar_h 
	                     patch-ui_message_center_views_toast_contents_view_cc 
	                     patch-ui_views_accessibility_native_view_accessibility_h 
	                     patch-ui_views_controls_label_cc 
	                     patch-ui_views_controls_textfield_textfield_cc 
	                     patch-ui_views_window_custom_frame_view_cc 
	                     patch-v8_BUILD_gn 
	www/iridium/pkg: PLIST 
Added files:
	www/iridium/patches: patch-base_debug_proc_maps_linux_cc 
	                     patch-base_threading_thread_task_runner_handle_cc 
	                     patch-breakpad_src_common_simple_string_dictionary_h 
	                     patch-chrome_app_chrome_main_cc 
	                     patch-chrome_app_shutdown_signal_handlers_posix_cc 
	                     patch-components_tracing_common_process_metrics_memory_dump_provider_cc 
	                     patch-components_tracing_common_process_metrics_memory_dump_provider_h 
	                     patch-services_catalog_public_cpp_manifest_parsing_util_cc 
	                     patch-services_catalog_store_cc 
	                     patch-services_catalog_store_h 
	                     patch-storage_browser_quota_quota_settings_cc 
	                     patch-third_party_node_node_py 
Removed files:
	www/iridium/patches: patch-chrome_BUILD_gn 
	                     patch-chrome_browser_chrome_browser_main_posix_cc 
	                     patch-chrome_browser_gpu_gpu_feature_checker_cc 
	                     patch-chrome_browser_ui_views_chrome_views_delegate_cc 
	                     patch-third_party_webrtc_voice_engine_voice_engine_defines_h 

Log message:
update to 58.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:23:36

Modified files:
	audio/py-acoustid: Makefile distinfo 

Log message:
Update to py-acoustid-1.1.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:24:36

Modified files:
	audio/py-eyed3 : Makefile distinfo 

Log message:
Update to eyeD3-0.7.11.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/28 16:29:31

Modified files:
	comms/xlog     : Makefile distinfo 

Log message:
Update to xlog-2.0.14.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/28 16:38:51

Modified files:
	lib/libcrypto  : malloc-wrapper.c 
	lib/libcrypto/rsa: rsa_eay.c rsa_saos.c rsa_sign.c 
	lib/libcrypto/x509: x509_vfy.c 

Log message:



CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/28 16:46:40

Modified files:
	lib/libcrypto  : malloc-wrapper.c 
	lib/libcrypto/rsa: rsa_eay.c rsa_saos.c rsa_sign.c 
	lib/libcrypto/x509: x509_vfy.c 

Log message:
revert previous accidental commit


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/28 17:03:58

Modified files:
	lib/libcrypto/x509: x509_vfy.c 

Log message:
Revert previous change that forced consistency between return value and
error code, since this breaks the documented API. Under certain circumstances
this will result in incorrect successful certiticate verification (where
a user supplied callback always returns 1, and later code checks the error
code to potentially abort post verification)


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/28 17:12:04

Modified files:
	lib/libcrypto/x509: Tag: OPENBSD_6_1 x509_vfy.c 

Log message:
MFC: Revert previous change that forced consistency between return value and
error code, since this breaks the documented API. Under certain circumstances
this will result in incorrect successful certiticate verification (where
a user supplied callback always returns 1, and later code checks the error
code to potentially abort post verification)


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/04/28 17:33:07

Modified files:
	sys/dev        : softraid_concat.c 

Log message:
Restore calculation of volume size. Accidentally removed in
r1.25. Fixes creation of concat volumes.

Noticed by and diff from Thordur I. Bjornsson via tech@

ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/28 18:32:21

Modified files:
	distrib/sets/lists/comp: md.amd64 mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/04/28 19:57:04

Added files:
	regress/usr.sbin/syslogd: args-secure-udp.pl 

Log message:
Test that suslogd's UDP sockets bound to *.514 do not receive packets
if the -u insecure mode is not selected.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/04/28 20:16:18

ports/databases/sqlite3-tcl/patches

Update of /cvs/ports/databases/sqlite3-tcl/patches
In directory cvs.openbsd.org:/tmp/cvs-serv42811/patches

Log Message:
Directory /cvs/ports/databases/sqlite3-tcl/patches added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/28 22:12:25

Modified files:
	usr.bin/ssh    : ssh-keygen.1 ssh-keygen.c 

Log message:
allow ssh-keygen to include arbitrary string or flag certificate
extensions and critical options. ok markus@ dtucker@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/04/29 00:06:01

Modified files:
	usr.bin/ssh    : ssh-keygen.1 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/29 00:22:05

Modified files:
	lang/g77       : Makefile 

Log message:
get libgcc location in a simpler way that also works with clang.
fixes dependent ports


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/29 00:54:29

Added files:
	comms/owx/patches: patch-src_file_cc patch-src_throw_cc 

Log message:
missing prototypes


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/29 01:44:08

Modified files:
	devel/meson    : Makefile distinfo 

Log message:
Update to meson-0.40.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/29 01:44:19

Modified files:
	x11/gnome/sushi: Makefile distinfo 
	x11/gnome/sushi/pkg: PLIST 

Log message:
Update to sushi-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/29 01:52:56

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.45.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/29 01:53:06

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.82.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/29 02:02:56

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Mark futex(2) as PLEDGE_STDIO like all other thread-related syscalls.

From semarie@, ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 02:17:57

Modified files:
	devel/p5-Devel-Symdump: Makefile distinfo 

Log message:
Update to p5-Devel-Symdump-2.18.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 02:39:12

Modified files:
	devel/p5-Parallel-Forker: Makefile distinfo 

Log message:
Update to p5-Parallel-Forker-1.234.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/29 03:24:28

Modified files:
	graphics/digikam-kde4: Makefile 

Log message:
disable doxygen

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 03:40:01

Modified files:
	devel/p5-Sub-Exporter-Progressive: Makefile distinfo 

Log message:
Update to p5-Sub-Exporter-Progressive-0.001013.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 03:53:34

Modified files:
	devel/p5-Sys-Mmap: Makefile distinfo 

Log message:
Update to p5-Sys-Mmap-0.19.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/29 04:05:49

Modified files:
	sys/arch/arm64/arm64: machdep.c cpu.c 

Log message:
store cpu model information in the buffer used by the hw.model sysctl
ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 04:09:10

Modified files:
	devel/p5-Test-Without-Module: Makefile distinfo 

Log message:
Update to p5-Test-Without-Module-0.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 04:37:56

Modified files:
	devel/p5-Test-POE-Server-TCP: Makefile distinfo 

Log message:
Update to p5-Test-POE-Server-TCP-1.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 04:46:23

Modified files:
	devel/p5-Tree-Simple-View: Makefile distinfo 

Log message:
Update to p5-Tree-Simple-View-0.180001.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/04/29 05:26:37

Modified files:
	www/youtube-dl : Makefile distinfo 
	www/youtube-dl/pkg: PLIST 

Log message:
youtube-dl had 14 new releases with 36 core improvements and 109
extractor fixes during the last 40 days; noticed because youtube.com
broke again yesterday...  so update to VERSION=2017.04.28
"commit!" pirofti@ (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 06:30:21

Modified files:
	devel/p5-Type-Tiny: Makefile distinfo 

Log message:
Update to p5-Type-Tiny-1.000006.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/29 06:43:55

Modified files:
	usr.bin/mandoc : Makefile libman.h libmandoc.h libmdoc.h man.c 
	                 mdoc.c mdoc_macro.c mdoc_validate.c read.c 
	                 roff.c roff.h 
Removed files:
	usr.bin/mandoc : man_hash.c mdoc_hash.c 

Log message:
Parser unification: use nice ohashes for all three request and macro tables;
no functional change, minus two source files, minus 200 lines of code.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 06:52:31

Modified files:
	devel/p5-YAML-Shell: Makefile distinfo 

Log message:
Update to p5-YAML-Shell-0.71.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 07:16:38

Modified files:
	devel/p5-YAML-Syck: Makefile distinfo 

Log message:
Update to p5-YAML-Syck-1.30.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 07:26:12

Modified files:
	devel/p5-YAML-Tiny: Makefile distinfo 

Log message:
Update to p5-YAML-Tiny-1.70.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 07:40:15

Modified files:
	devel/p5-YAML-XS: Makefile distinfo 

Log message:
Update to p5-YAML-XS-0.64.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/29 08:16:10

Log message:
    import heartbeat-5.2.1
    
    Monitor services for their availability with active probing. Given a
    list of URLs, Heartbeat asks the simple question: Are you alive?
    Heartbeat ships this information and response time to the rest of the
    Elastic Stack for further analysis.
    
    ok aja@
    
    Status:
    
    Vendor Tag:	jasper
    Release Tags:	jasper_20172904
    
    N ports/sysutils/beats/heartbeat/distinfo
    N ports/sysutils/beats/heartbeat/Makefile
    N ports/sysutils/beats/heartbeat/pkg/PLIST
    N ports/sysutils/beats/heartbeat/pkg/DESCR
    N ports/sysutils/beats/heartbeat/pkg/heartbeat.rc
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/29 08:17:32

Modified files:
	sysutils/beats : Makefile 

Log message:
+heartbeat


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 08:24:10

Modified files:
	devel/py-algorithm-munkres: Makefile distinfo 

Log message:
Update to py-algorithm-munkres-1.0.8.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/04/29 08:28:21

Modified files:
	distrib/sets/lists/comp: clang.amd64 clang.i386 md.amd64 

Log message:
put clang headers into clang sets
ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/29 08:31:40

Modified files:
	japanese/Wnn   : Makefile 
	japanese/Wnn/patches: patch-Wnn_conv_cvt_read_c 
	                      patch-Wnn_etc_bdic_c patch-Wnn_etc_msg_c 
	                      patch-Wnn_etc_pwd_c patch-Wnn_jlib_jl_c 
	                      patch-Wnn_jlib_js_c 
	                      patch-Wnn_jserver_b_index_c 
	                      patch-Wnn_jserver_de_c 
	                      patch-Wnn_jserver_do_filecom_c 
	                      patch-Wnn_jserver_error_c 
	                      patch-Wnn_jserver_readfile_c 
	                      patch-Wnn_jutil_atod_c 
	                      patch-Wnn_jutil_atof_c 
	                      patch-Wnn_jutil_dtoa_c 
	                      patch-Wnn_jutil_ujisf_c 
	                      patch-Wnn_jutil_wddel_c 
	                      patch-Wnn_jutil_wdreg_c 
	                      patch-Wnn_jutil_wnnstat_c 
	                      patch-Wnn_jutil_wnntouch_c 
	                      patch-Wnn_uum_jhlp_c 
	                      patch-Wnn_uum_key_bind_c 
	                      patch-Wnn_uum_prologue_c 
	                      patch-Wnn_uum_setutmp_c 
	                      patch-Wnn_uum_termio_c 
	                      patch-Wnn_uum_wnnrc_op_c 
	                      patch-Xwnmo_xjutil_init_w_c 
	                      patch-Xwnmo_xjutil_jhlp_c 
	                      patch-Xwnmo_xjutil_jutil_c 
	                      patch-Xwnmo_xwnmo_do_xjutil_c 
	                      patch-Xwnmo_xwnmo_jhlp_c 
	                      patch-Xwnmo_xwnmo_killxwnmo_c 
	                      patch-kWnn_jlib_Imakefile 
Added files:
	japanese/Wnn/patches: patch-Wnn_etc_dic_atojis_c 
	                      patch-Wnn_etc_gethinsi_c 
	                      patch-Wnn_etc_server_env_c 
	                      patch-Wnn_etc_sstrings_c 
	                      patch-Wnn_etc_xutoj_c 
	                      patch-Wnn_etc_yincoding_c 
	                      patch-Wnn_jlib_Imakefile 
	                      patch-Wnn_jlib_V3_jlv3_c 
	                      patch-Wnn_jlib_wnnerrmsg_c 
	                      patch-Wnn_jserver_Imakefile 
	                      patch-Wnn_jserver_dispatch_c 
	                      patch-Wnn_jserver_do_env_c 
	                      patch-Wnn_jserver_initjserv_c 
	                      patch-Wnn_jserver_sisheng_c 
	                      patch-Wnn_jutil_oldatonewa_c 
	                      patch-Wnn_jutil_wnnkill_c 
	                      patch-Wnn_romkan_rk_bltinfn_c 
	                      patch-Wnn_romkan_rk_modread_c 
	                      patch-Wnn_uum_basic_op_c 
	                      patch-Wnn_uum_hinsi_c 
	                      patch-Wnn_uum_inspect_c 
	                      patch-Wnn_uum_jikouho_c 
	                      patch-Wnn_uum_jutil_c 
	                      patch-Wnn_uum_kensaku_c 
	                      patch-Wnn_uum_printf_c 
	                      patch-Wnn_uum_screen_c 
	                      patch-Wnn_uum_select_ele_c 
	                      patch-Wnn_uum_touroku_c 
	                      patch-Wnn_uum_ttyfdslot_c 
	                      patch-Wnn_uum_uif_c 
	                      patch-Xwnmo_xjutil_xext_h 
	                      patch-Xwnmo_xjutil_xselectele_c 
	                      patch-Xwnmo_xwnmo_ext_h 
	                      patch-Xwnmo_xwnmo_ichiran_c 
	                      patch-Xwnmo_xwnmo_jutil_c 
	                      patch-Xwnmo_xwnmo_multi_lang_c 
	                      patch-cWnn_jlib_Imakefile 
	                      patch-cWnn_jserver_Imakefile 
	                      patch-kWnn_jserver_Imakefile 

Log message:
fixes for clang: don't compile a clone of getopt.
while there, fix system includes, implicit ints, and void main.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/29 08:33:23

Modified files:
	www/kibana     : Makefile distinfo 
	www/kibana/pkg : PLIST 

Log message:
update to kibana-5.3.1; from Pavel Korovin (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 08:36:25

Modified files:
	devel/py-altgraph: Makefile distinfo 

Log message:
Update to py-altgraph-0.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 08:47:41

Modified files:
	devel/py-bytecodeassembler: Makefile distinfo 

Log message:
Update to py-bytecodeassembler-0.6.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/29 08:49:38

Modified files:
	infrastructure/bin: update-patches 
	infrastructure/mk: bsd.port.mk 

Log message:
new update-patches.

that one deals with .beforesubst files, so it should be nicer with
SUBST_CMD handling. It also doesn't care nor emits timestamps markers
in diff, so less garbage to think about.

Please report any issue, things work better so far, but it's a work
in progress and change to make it better.

'let's finish this in tree' okay aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/29 09:30:04

Modified files:
	devel/commoncpp: Makefile 
Added files:
	devel/commoncpp/patches: patch-inc_cc++_string_h 
	                         patch-src_cidr_cpp 

Log message:
let it build with clang...
- friend declaration with default params have to be definitions.
- the cidr set functions are very disturbing, assume people don't use
it on network classes with constants, because it *will* try to modify
char constants.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/29 09:35:34

Removed files:
	math/logic2cnf : Makefile distinfo 
	math/logic2cnf/pkg: DESCR PLIST 

Log message:
Remove math/logic2cnf from ports.

I wrote logic2cnf many years ago and have no intention of maintaining it.
No-one appears to be using it, so let's remove it (especially since it doesn't
build under clang).

OK naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/29 09:36:50

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Add quirks for removal of logic2cnf.

OK naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/04/29 09:37:32

Modified files:
	math           : Makefile 

Log message:
Unlink math/logic2cnf.

OK naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/29 10:16:39

Modified files:
	productivity/kmymoney: Makefile 

Log message:
disable doxygen

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/29 10:17:35

Modified files:
	productivity/libalkimia: Makefile 

Log message:
disable doxygen

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/29 10:27:40

Modified files:
	x11/xscribble/patches: patch-Imakefile patch-lirec_Imakefile 
	                       patch-lirec_li_recognizer_c 
	                       patch-lirec_util_h 
Added files:
	x11/xscribble/patches: patch-lirec_sc_c 

Log message:
fix build with clang + regen other patches with longer lines


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/29 11:07:09

Modified files:
	sys/arch/arm64/arm64: ast.c 

Log message:
Call refreshcreds() in ast() since we may get there without going through
do_el0_sync() or mi_syscall().


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/29 11:10:43

Modified files:
	sys/arch/arm64/arm64: trap.c 

Log message:
Move the userret() call out of data_abort() and simply call it just before we
return from do_el0_sync().  Prevents future mistakes.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/29 11:24:41

Modified files:
	sys/arch/arm64/conf: GENERIC RAMDISK files.arm64 
Added files:
	sys/arch/arm64/dev: agintc.c 

Log message:
Add agintc(4), a driver for interrupt controllers conforming to ARM's
generic interrupt controller architecture specification v3/4.

The hard work was done by drahn@, I just cleaned it up a bit and fixed
a couple of bugs.

ok patrick@, drahn@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/29 12:13:25

Modified files:
	sys/arch/arm64/dev: agintc.c 

Log message:
Decrement ci_idepth on all returns from agintc_irq_handler().


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 12:43:31

Modified files:
	lib/libcrypto/arc4random: getentropy_linux.c 

Log message:
Switch Linux getrandom() usage to non-blocking mode, continuing to
use fallback mechanims if unsuccessful.

The design of Linux getrandom is broken.  It has an
uninitialized phase coupled with blocking behaviour, which
is unacceptable from within a library at boot time without
possible recovery.
ok deraadt@ jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 12:57:00

Modified files:
	lib/libcrypto/arc4random: Tag: OPENBSD_6_1 getentropy_linux.c 

Log message:
MFC: Switch Linux getrandom() usage to non-blocking mode, continuing to
use fallback mechanims if unsuccessful.

The design of Linux getrandom is broken.  It has an
uninitialized phase coupled with blocking behaviour, which
is unacceptable from within a library at boot time without
possible recovery.
ok deraadt@ jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	jung@cvs.openbsd.org	2017/04/29 13:03:45

Modified files:
	usr.sbin/smtpd : mail.file.c 

Log message:
fix argument check, this should never trigger because it is a libexec called by
smtpd, but for the sake of correctness

from Edgar Pettijohn

ok gilles@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/29 13:18:49

Modified files:
	math/ginac     : Makefile distinfo 
	math/ginac/patches: patch-configure 
	math/ginac/pkg : PLIST 
Removed files:
	math/ginac/patches: patch-check_check_matrices_cpp 

Log message:
update to ginac-1.7.2

ok pirofti@ jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	bcook@cvs.openbsd.org	2017/04/29 13:56:13

Modified files:
	lib/libcrypto  : Tag: OPENBSD_6_1 opensslv.h 

Log message:
bump to 2.5.4


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/29 14:49:09

Modified files:
	sys/dev/fdt    : files.fdt 
Added files:
	sys/dev/fdt    : ehci_fdt.c 
Removed files:
	sys/dev/fdt    : sxiehci.c 

Log message:
Replace sxiehci.c with more generic glue in ehci_fdt.c that is similiar in
spirit to the xhci_fdt.c glue.  The new code sets up any attached USB PHYs
based on their "compatible" property.  All the hardware supported by sxiehci.c
should be supported by this new code.  In addition to that this adds support
for the EHCI controllers found on various Rockchip hardware such as the
RK3288 and RK3399 SoCs.

ok patrick@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/04/29 14:54:53

Modified files:
	textproc/cloc  : Makefile distinfo 
Removed files:
	textproc/cloc/patches: patch-Unix_Makefile 

Log message:
upgrade to 1.72, drop patch merged upstream

ok sthen


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/29 15:04:29

Modified files:
	editors/vim    : Makefile distinfo 
	editors/vim/patches: patch-runtime_filetype_vim 
	                     patch-src_configure_ac 
	editors/vim/pkg: PFRAG.no-no_x11-main PLIST-main 

Log message:
update to vim-8.0.587


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/29 15:22:44

Modified files:
	devel/py-test-xdist: Makefile distinfo 

Log message:
Update to py-test-xdist-1.16.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/04/29 15:27:47

Modified files:
	usr.bin/tmux   : screen-write.c 

Log message:
Fix UTF-8 combining characters in column 0, based on a diff from Keith
Winstein.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 15:48:44

Modified files:
	lib/libcrypto  : crypto.h cryptlib.c 
	lib/libcrypto/evp: names.c 

Log message:
Stop calling OPENSSL_init() internally, since it is a no-op. Also place
it under #ifndef LIBRESSL_INTERNAL.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 15:54:54

Modified files:
	lib/libssl     : ssl_algs.c 

Log message:
Make it safe to call SSL_library_init more than once.

We are basically admitting that pthread is everywhere, and
we will be using it for other things too.
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 16:22:24

Modified files:
	lib/libssl     : Makefile 

Log message:
We now require you to have a working libpthread


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/04/29 16:24:15

Modified files:
	games/xboard   : Makefile distinfo 
	games/xboard/patches: patch-Makefile_in 
	games/xboard/pkg: PLIST 
Added files:
	games/xboard/patches: patch-gtk_xboard_h 
Removed files:
	games/xboard/patches: patch-args_h patch-xaw-xboard_h 

Log message:
update to xboard-4.9.1

Initial diff from me, improved version from and ok from jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 16:31:42

Modified files:
	lib/libssl     : Makefile ssl_algs.c 

Log message:
Revert previous - we still want to do this, but I forgot about the installer
and want to avoid the wrath of theo when he arrives home in a couple
of hours :)


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/29 16:36:16

Modified files:
	editors/moe    : Makefile 
Added files:
	editors/moe/patches: patch-window_vector_cc 

Log message:
fix build with clang and use regular GNU master site


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 17:38:49

Modified files:
	lib/libssl     : ssl_srvr.c 

Log message:
Fix a bug caused by the return value being set early to signal successful
DTLS cookie validation. This can mask a later failure and result in a
positive return value being returned from ssl3_get_client_hello(), when
it should return a negative value to propagate the error.

Ironically this was introduced in OpenSSL 2e9802b7a7b with the commit
message "Fix DTLS cookie management bugs".

Fix based on OpenSSL.

Issue reported by Nicolas Bouliane <nbouliane at jive dot com>.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 17:41:32

Modified files:
	lib/libssl     : Tag: OPENBSD_6_1 ssl_srvr.c 

Log message:
MFC.

Fix a bug caused by the return value being set early to signal successful
DTLS cookie validation. This can mask a later failure and result in a
positive return value being returned from ssl3_get_client_hello(), when
it should return a negative value to propagate the error.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 18:06:09

Modified files:
	lib/libssl/src/ssl: Tag: OPENBSD_6_0 s3_srvr.c 

Log message:
MFC.

Fix a bug caused by the return value being set early to signal successful
DTLS cookie validation. This can mask a later failure and result in a
positive return value being returned from ssl3_get_client_hello(), when
it should return a negative value to propagate the error.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 20:10:22

Modified files:
	lib/libtls     : tls_config.c 

Log message:
Add a tls_keypair_clear_key() function that uses freezero() to make key
material inaccessible, then call it from the appropriate places.

ok beck@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/04/29 20:15:24

Modified files:
	security/spiped: Makefile distinfo 
	security/spiped/pkg: PLIST 

Log message:
Update spiped to 1.6.0


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 21:53:31

Modified files:
	regress/lib/libtls/verify: verifytest.c 

Log message:
Add missing tls_init() and tls_free() calls.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 22:18:58

Modified files:
	lib/libcrypto/bio: b_sock.c 

Log message:
Microsoft Windows hates BIO_get_accept_socket in portable. Fix it to
not be awful or have any claims on supporting ipv6 when it does so
very badly
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 22:21:53

Modified files:
	lib/libssl     : ssl_asn1.c 

Log message:
Switch back to freezero() and explicitly initialise data_len to zero. The
previous code was safe since data would always be NULL if data_len was
uninitialised, however compilers cannot know this.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/04/29 22:32:58

Modified files:
	sys/arch/octeon/dev: cn30xxpow.c cn30xxpowvar.h 

Log message:
Remove unused POW status functions. Makes clang happier.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/04/29 22:44:58

Modified files:
	lib/libcrypto  : Makefile 
	lib/libssl     : Makefile 
	lib/libtls     : Makefile 

Log message:
Only enable -Werror on libcrypto/libssl/libtls if we are building with
gcc4. This should avoid failed builds while transitioning compilers.
While here also make the CFLAGS blocks consistent across makefiles.

Discussed with deraadt@, ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 23:09:22

Modified files:
	lib/libcrypto/bio: b_sock.c 

Log message:
Rework BIO_accept to be more like modern code.
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/29 23:43:05

Modified files:
	lib/libcrypto/bio: b_sock.c 

Log message:
Make BIO_get_host_ip just yet another getaddrinfo wrapper


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 00:16:45

Modified files:
	graphics/clutter/cogl: Makefile 

Log message:
maintainer-mode is another option


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 02:03:12

Modified files:
	devel/p5-Test-Output: Makefile distinfo 

Log message:
Update to p5-Test-Output-1.031.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/30 02:11:06

Modified files:
	x11/gnome/font-viewer: Makefile distinfo 
	x11/gnome/font-viewer/pkg: PLIST 

Log message:
update to gnome-font-viewer-3.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/30 02:12:11

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to p5-SVG-2.70


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/30 02:12:34

Modified files:
	devel/iso-codes: Makefile distinfo 

Log message:
update to iso-codes-3.75


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 02:14:03

Modified files:
	games/wtf      : Makefile distinfo 

Log message:
Update to wtf-20170324.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 02:24:33

Added files:
	games/dangerdeep/patches: patch-src_coastmap_h patch-src_color_h 

Log message:
shut up some noise in clang++, match struct against struct.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 02:25:00

Added files:
	games/dangerdeep/patches: patch-src_global_data_h 

Log message:
more noise in clang, put ; on a separate line


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 02:25:28

Added files:
	games/dangerdeep/patches: patch-src_model_cpp 

Log message:
you have to define static members along with declaring them


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 02:25:47

Added files:
	games/dangerdeep/patches: patch-src_tone_reproductor_h 

Log message:
fix obvious bug


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 02:26:07

Added files:
	games/dangerdeep/patches: patch-src_widget_cpp 

Log message:
retval is a pointer


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 02:29:51

Modified files:
	mail/p5-Mail-IMAPTalk: Makefile distinfo 

Log message:
Update to p5-Mail-IMAPTalk-4.04.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/04/30 02:33:32

Modified files:
	textproc/elasticsearch: Makefile distinfo 
	textproc/elasticsearch/pkg: PLIST 

Log message:
update to elasticsearch-5.3.2l


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 02:50:52

Modified files:
	mail/pear-Mail-mimeDecode: Makefile distinfo 
	mail/pear-Mail-mimeDecode/pkg: PLIST 

Log message:
Update to pear-Mail-mimeDecode-1.5.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 02:56:45

Modified files:
	games/dangerdeep: Makefile 
Added files:
	games/dangerdeep/patches: patch-src_condvar_cpp 
	                          patch-src_condvar_h patch-src_game_h 
	                          patch-src_log_cpp 
	                          patch-src_message_queue_h 
	                          patch-src_modelmeasure_cpp 
	                          patch-src_mutex_cpp patch-src_mutex_h 
	                          patch-src_thread_h 

Log message:
wrap dangerdeep's mutex into its own namespace so that it doesn't conflict
with std::mutex on modern compilers.
Fixes the build with clang, and still builds with gcc


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 02:59:34

Modified files:
	math/p5-Math-Derivative: Makefile distinfo 

Log message:
Update to p5-Math-Derivative-0.04.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 03:01:14

Modified files:
	lib/libc       : Symbols.list shlib_version 
	lib/libc/sys   : Makefile.inc 

Log message:
Add futex(2) shim, bump minor.

Inputs from guenther@, ok kettenis@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 03:02:09

src/regress/sys/kern/futex

Update of /cvs/src/regress/sys/kern/futex
In directory cvs.openbsd.org:/tmp/cvs-serv7083/futex

Log Message:
Directory /cvs/src/regress/sys/kern/futex added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 03:03:58

Modified files:
	regress/sys/kern: Makefile 
Added files:
	regress/sys/kern/futex: Makefile futex.c futex.h 

Log message:
Regression tests for futex(2).


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 03:10:00

Modified files:
	math/p5-Math-GMP: Makefile distinfo 

Log message:
Update to p5-Math-GMP-2.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 03:36:59

Modified files:
	x11/libdnd/patches: patch-DNDlib_DragAndDrop_c 
Added files:
	x11/libdnd/patches: patch-DNDlib_configure 

Log message:
fix stupid configure test.
regen patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 03:58:48

Modified files:
	math/udunits   : Makefile distinfo 
	math/udunits/patches: patch-lib_Makefile_in 

Log message:
Update to udunits-2.2.24.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 04:10:21

Modified files:
	sys/kern       : sys_futex.c 

Log message:
Return ENOSYS for unsupported operation.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 04:11:03

Modified files:
	regress/sys/kern/futex: futex.c 

Log message:
Check that unsupported operation returns ENOSYS.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 04:11:44

Modified files:
	audio/xcd/patches: patch-cdplayer_cc 

Log message:
silence most warnings and an error with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 04:14:27

ports/security/glib-openssl/patches

Update of /cvs/ports/security/glib-openssl/patches
In directory cvs.openbsd.org:/tmp/cvs-serv79999/patches

Log Message:
Directory /cvs/ports/security/glib-openssl/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 04:21:56

Modified files:
	databases/evolution-data-server: Makefile 
	databases/evolution-data-server/patches: patch-CMakeLists_txt 
	mail/evolution : Makefile 
Removed files:
	mail/evolution/patches: patch-CMakeLists_txt 

Log message:
Drop patch and use CMAKE_C_FLAGS instead.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 04:22:19

Modified files:
	mail/evolution-ews/patches: 
	                            patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Sync patch with what was pushed upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 04:29:09

Modified files:
	security/glib-openssl: Makefile 
Added files:
	security/glib-openssl/patches: patch-tls_openssl_gtlsbio_c 
	                               patch-tls_openssl_gtlsclientconnection-openssl_c 

Log message:
Fix build with clang and a bazillion of implicit declarations. Patches may
be revisited but it can't be worse.

reported by espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 04:36:32

Modified files:
	misc/p5-I18N-Charset: Makefile distinfo 

Log message:
Update to p5-I18N-Charset-1.415.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 04:36:43

Modified files:
	security/glib-openssl: Makefile 
	security/glib-openssl/patches: patch-tls_openssl_gtlsbio_c 
	                               patch-tls_openssl_gtlsclientconnection-openssl_c 
	security/glib-openssl/pkg: PLIST 
Added files:
	security/glib-openssl/patches: 
	                               patch-tls_openssl_openssl-module_c 

Log message:
Fix a few warnings (from upstream).
Regen PLIST while here.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 04:56:02

Modified files:
	security/glib-openssl/patches: patch-tls_openssl_gtlsbio_c 
	                               patch-tls_openssl_gtlsclientconnection-openssl_c 

Log message:
Add BZ URL.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 04:56:03

Modified files:
	misc/p5-User-Identity: Makefile distinfo 

Log message:
Update to p5-User-Identity-0.97.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 05:04:36

Modified files:
	misc/ytree     : Makefile distinfo 

Log message:
Update to ytree-1.99.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 05:19:12

Modified files:
	net/p5-Bot-BasicBot: Makefile distinfo 

Log message:
Update to p5-Bot-BasicBot-0.91.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 05:28:14

Modified files:
	net/gnaughty   : Makefile 

Log message:
Bump autofuck requirements because I am a naughty boy.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/30 05:28:28

Modified files:
	graphics/tesseract/tesseract: Makefile 

Log message:
needs libtool


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 05:30:50

Modified files:
	net/p5-Net-SMTP-SSL: Makefile distinfo 

Log message:
Update to p5-Net-SMTP-SSL-1.04.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 05:41:38

Modified files:
	net/p5-Net-SMTPS: Makefile distinfo 

Log message:
Update to p5-Net-SMTPS-0.06.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 05:51:07

Modified files:
	net/p5-Net-TFTP: Makefile distinfo 

Log message:
Update to p5-Net-TFTP-0.1901.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 05:55:52

Modified files:
	security/glib-openssl/patches: patch-tls_openssl_gtlsbio_c 
	                               patch-tls_openssl_gtlsclientconnection-openssl_c 

Log message:
Pushed upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/04/30 06:08:32

Modified files:
	www/lynx       : Makefile distinfo 
	www/lynx/patches: patch-lynx_cfg patch-lynx_man 
	                  patch-src_LYReadCFG_c patch-src_LYUtils_c 

Log message:
Update lynx to 2.8.9pl13.

While there, amend our lynx.cfg patch to switch default site to HTTPS.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 07:04:49

Modified files:
	sys/uvm        : uvm_glue.c uvm_extern.h 
	sys/sys        : systm.h 
	sys/kern       : subr_prf.c 
	sys/dev/isa    : com_isapnp.c com_isa.c com_commulti.c 
	sys/dev/ic     : z8530tty.c z8530sc.h comvar.h com.c 
	sys/ddb        : db_run.c 
	sys/conf       : files 
	sys/arch/sparc64/dev: zs.c cons.h 
	sys/arch/sgi/hpc: zs.c 
	sys/arch/i386/include: db_machdep.h cpufunc.h 
	sys/arch/i386/i386: trap.c machdep.c db_memrw.c 
	sys/arch/i386/conf: files.i386 
	sys/arch/armv7/include: machine_reg.h 
	sys/arch/armv7/imx: imxuart.c 
	sys/arch/armv7/exynos: exuart.c 
	sys/arch/armv7/dev: pluart.c 
	sys/arch/arm64/include: machine_reg.h 
	sys/arch/arm64/dev: pluart.c 
	sys/arch/arm/conf: files.arm 
	sys/arch/arm/arm: undefined.c fault.c 
	sys/arch/amd64/include: db_machdep.h cpufunc.h 
	sys/arch/amd64/conf: files.amd64 
	sys/arch/amd64/amd64: trap.c machdep.c db_memrw.c 
	sys/arch/alpha/alpha: machdep.c dec_kn300.c dec_1000a.c 
Removed files:
	sys/sys        : kgdb.h 
	sys/kern       : kgdb_stub.c 
	sys/arch/i386/i386: kgdb_machdep.c 
	sys/arch/amd64/amd64: kgdb_machdep.c 

Log message:
Unifdef KGDB.

It doesn't compile und hasn't been working during the last decade.

ok kettenis@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 07:23:09

Modified files:
	net/p5-RPC-XML : Makefile distinfo 

Log message:
Update to p5-RPC-XML-0.80.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/04/30 07:41:10

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Tweak error message when running on an unsupported release.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/30 07:54:00

Modified files:
	sys/arch/arm64/dev: mainbus.c 

Log message:
Make early attrbute work here as well.  Remove unreachable panic while there.

ok visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/30 07:55:57

Modified files:
	misc/mmv       : Makefile 
	misc/mmv/patches: patch-mmv_1 patch-mmv_c 

Log message:
adding missing includes and not redefining void as char makes this build
with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 07:56:43

Modified files:
	security/p5-Crypt-OpenSSL-X509: Makefile distinfo 

Log message:
Update to p5-Crypt-OpenSSL-X509-1.807.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/30 08:00:06

Modified files:
	sys/dev/fdt    : files.fdt 
	sys/arch/arm64/conf: GENERIC RAMDISK files.arm64 
Added files:
	sys/dev/fdt    : rkgrf.c 

Log message:
Add rkgrf(4), a driver that makes the "generic register file" of the Rockchip
RK3399 available to other drivers through the regmap interface.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/30 08:03:44

Modified files:
	sys/arch/arm64/conf: GENERIC RAMDISK 

Log message:
Add xhci@fdt, and move ehci(4) from the sunxi block to the generic block.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 08:10:28

Modified files:
	security/p5-Net-SSL-ExpireDate: Makefile distinfo 

Log message:
Update to p5-Net-SSL-ExpireDate-1.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 08:26:13

Modified files:
	security/scrypt: Makefile distinfo 

Log message:
Update to scrypt-1.2.1.


CVSROOT:	/cvs
Module name:	www
Changes by:	edd@cvs.openbsd.org	2017/04/30 08:29:11

Modified files:
	faq            : upgrade61.html 

Log message:
Make the order of the upgrade steps more explicit.

Input from tb@. OK tb@, tj@.

Thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 08:36:00

Modified files:
	sysutils/ddrescue: Makefile distinfo 

Log message:
Update to ddrescue-1.22.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/30 08:48:16

Added files:
	www/mozilla-firefox/patches: 
	                             patch-media_libstagefright_binding_mp4parse_capi_Cargo_toml 

Log message:
Add patch to fix build with upcoming cargo 0.17, from semarie@.
See https://bugzilla.mozilla.org/show_bug.cgi?id=1360521


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 08:55:24

Modified files:
	textproc/p5-String-Approx: Makefile distinfo 

Log message:
Update to p5-String-Approx-3.28.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/04/30 09:05:27

Modified files:
	share/man/man7 : mandoc_char.7 

Log message:
Mention that escaping "^" as "\(ha" in source code samples improves
portability, in particular when rendering to formats such as PDF
with real typesetters such as groff.

While here, make it even more explicit that the rendering of raw
ASCII accents ( ` ' ~ ^ ) found in the input is kind of a mess and
varies among implementations, software versions, macro sets, and
output devices.

Issue noticed when reading the groff_char(7) manual, and confirmed
by testing with current groff.

OK bentley@, "certainly no objection" jmc@

N.B.: Nobody will get scolded for ignoring this subtlety.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 09:11:10

Modified files:
	textproc/p5-Template: Makefile distinfo 
	textproc/p5-Template/pkg: PLIST 

Log message:
Update to p5-Template-2.27.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/30 09:17:28

Modified files:
	distrib/sets/lists/base: mi 
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 09:23:21

Modified files:
	textproc/p5-Text-Aligner: Makefile distinfo 

Log message:
Update to p5-Text-Aligner-0.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 09:29:46

Modified files:
	textproc/p5-Text-Format: Makefile distinfo 

Log message:
Update to p5-Text-Format-0.60.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/04/30 09:38:15

Modified files:
	audio/grip     : Makefile 
Added files:
	audio/grip/patches: patch-src_gripcfg_c 

Log message:
* add missing return value (clang fix from upstream)
* replace gettext module and sync wantlib


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 09:40:02

Modified files:
	textproc/p5-Text-Glob: Makefile distinfo 

Log message:
Update to p5-Text-Glob-0.11.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 09:47:03

Modified files:
	textproc/p5-Text-Template: Makefile distinfo 

Log message:
Update to p5-Text-Template-1.47.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 09:56:29

Modified files:
	textproc/p5-Text-Table: Makefile distinfo 

Log message:
Update to p5-Text-Table-1.132.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 10:03:01

Modified files:
	textproc/p5-XML-SemanticDiff: Makefile distinfo 

Log message:
Update to p5-XML-SemanticDiff-1.0005.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 10:14:36

Modified files:
	textproc/p5-XML-SAX-Base: Makefile distinfo 

Log message:
Update to p5-XML-SAX-Base-1.09.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 10:26:21

Modified files:
	www/p5-CSS-Tiny: Makefile distinfo 

Log message:
Update to p5-CSS-Tiny-1.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/04/30 10:35:55

Modified files:
	www/p5-HTML-StripScripts: Makefile distinfo 

Log message:
Update to p5-HTML-StripScripts-1.06.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 10:45:46

Modified files:
	sys/arch/alpha/alpha: db_interface.c lock_machdep.c machdep.c 
	sys/arch/alpha/dev: sgmap_typedep.c 
	sys/arch/alpha/tc: scc.c 
	sys/arch/amd64/amd64: cpu.c db_interface.c lock_machdep.c 
	                      machdep.c 
	sys/arch/arm/arm: db_interface.c undefined.c 
	sys/arch/arm/cortex: ampintc.c 
	sys/arch/arm64/arm64: arm64_mutex.c db_interface.c machdep.c 
	sys/arch/arm64/dev: ampintc.c pluart.c bcm2836_intr.c agintc.c 
	sys/arch/armv7/armv7: armv7_machdep.c 
	sys/arch/armv7/broadcom: bcm2836_intr.c 
	sys/arch/armv7/dev: pluart.c 
	sys/arch/armv7/omap: if_cpsw.c 
	sys/arch/hppa/hppa: db_interface.c lock_machdep.c locore.S 
	                    pmap.c 
	sys/arch/i386/i386: cpu.c db_interface.c db_mp.c lock_machdep.c 
	                    machdep.c 
	sys/arch/landisk/dev: power.c 
	sys/arch/landisk/landisk: machdep.c 
	sys/arch/loongson/dev: bonito.c 
	sys/arch/loongson/loongson: generic2e_machdep.c machdep.c 
	sys/arch/luna88k/dev: mb89352.c mb89352var.h siotty.c 
	sys/arch/luna88k/luna88k: machdep.c 
	sys/arch/m88k/m88k: db_interface.c mplock.c 
	sys/arch/macppc/dev: macintr.c openpic.c pgs.c sysbutton.c zs.c 
	sys/arch/macppc/macppc: machdep.c 
	sys/arch/mips64/mips64: ipifuncs.c lcore_ddb.S lock_machdep.c 
	                        mutex.c 
	sys/arch/octeon/octeon: machdep.c 
	sys/arch/powerpc/ddb: db_interface.c 
	sys/arch/powerpc/powerpc: lock_machdep.c mutex.c 
	sys/arch/sgi/hpc: zs.c 
	sys/arch/sgi/sgi: machdep.c 
	sys/arch/sh/dev: scif.c 
	sys/arch/sh/sh : db_interface.c 
	sys/arch/socppc/socppc: machdep.c 
	sys/arch/sparc64/dev: consinit.c fd.c iommu.c pcons.c sab.c 
	                      sbbc.c vcons.c viommu.c zs.c 
	sys/arch/sparc64/sparc64: autoconf.c clock.c db_interface.c 
	                          intr.c lock_machdep.c locore.s pmap.c 
	                          vm_machdep.c 
	sys/ddb        : db_usrreq.c 
	sys/dev/ic     : aic6250.c aic6250var.h aic6360var.h aic6360.c 
	                 com.c ncr5380sbc.c wd33c93.c osiop.c 
	sys/dev/usb/dwc2: dwc2.c 
	sys/dev/wscons : wskbd.c 
	sys/kern       : subr_prf.c subr_userconf.c subr_witness.c 
	sys/sys        : systm.h 

Log message:
Rename Debugger() into db_enter().

Using a name with the 'db_' prefix makes it invisible from the dynamic
profiler.

ok deraadt@, kettenis@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/30 11:18:48

Modified files:
	sysutils/riemann: Makefile distinfo 

Log message:
Update to riemann 0.2.13, from maintainer Pavel Korovin.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/30 11:27:19

Modified files:
	mail/mozilla-thunderbird: Makefile distinfo 
	mail/mozilla-thunderbird/pkg: PLIST-main 
	mail/thunderbird-i18n: Makefile.inc distinfo 

Log message:
Update to thunderbird 52.1.0.

See https://www.mozilla.org/en-US/thunderbird/52.1.0/releasenotes/

Build against bundled sqlite, as Gloda (the global indexing database
behind the search field, not the 'quick filter' search bar) relies on
SQLITE_ENABLE_FTS3_TOKENIZER (see #1252937) - and it might not be a good
idea to enable this option in the systemwide sqlite install.  Might be
revisited once #1270882 is fixed.

Gloda not working issue reported & fix tested by mpi@
ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/30 11:42:32

Modified files:
	sys/dev/fdt    : files.fdt 
	sys/arch/arm64/conf: GENERIC RAMDISK 
Added files:
	sys/dev/fdt    : rkclock.c rkclock_clocks.h 

Log message:
Add rkclock(4), a driver for the Rockchip RK3399 clocks.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/30 11:46:27

Modified files:
	regress/lib/libcrypto/bio: biotest.c 

Log message:
whitespace


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/04/30 11:52:15

Modified files:
	sysutils/collectd: Makefile distinfo 
	sysutils/collectd/patches: patch-Makefile_in 
	                           patch-src_Makefile_in 
	                           patch-src_daemon_Makefile_in 
	                           patch-src_processes_c 
	                           patch-src_tcpconns_c 

Log message:
Update to collectd 5.7.1, from Pavel Korovin, thanks !

See https://collectd.org/wiki/index.php/Version_5.7


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/04/30 11:54:11

Modified files:
	lib/libcrypto/bio: b_sock.c 

Log message:
No original OpenSSL code remains in this file. Relicense


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 12:49:14

Modified files:
	infrastructure/bin: proot 
	infrastructure/man/man1: proot.1 

Log message:
run ldconfig *after* unpopulate. Makes no sense to scan /usr/local/lib
right before emptying it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/04/30 13:01:28

Log message:
    Initial import of the MATE Desktop Environment (version 1.18)...
    
    The MATE Desktop Environment is the continuation of GNOME 2.
    It provides an intuitive and attractive desktop environment, using
    traditional metaphors for Linux and other Unix-like operating systems.
    
    This is imported as WIP (almost done though) to ease review.
    
    ok @ajacoutot
    
    This import contains the following parts of MATE (not hooked up yet):
    
    - mate/atril
    document viewer for the MATE desktop
    
    - mate/calc
    MATE calculator
    
    - mate/caja
    file manager for the MATE desktop
    
    - mate/caja-extensions
    extensions for Caja, the MATE file manager
    
    - mate/control-center
    MATE control center
    
    - mate/desktop
    components for the MATE desktop
    
    - mate/engrampa
    file archiver for the MATE desktop
    
    - mate/eom
    image viewer for the MATE desktop
    
    - mate/icon-theme
    base icon theme for MATE
    
    - mate/libmatekbd
    MATE keyboard configuration library
    
    - mate/libmatemixer
    mixer library for MATE desktop
    
    - mate/libmateweather
    weather library for MATE
    
    - mate/marco
    the MATE window manager
    
    - mate/media
    media tools for the MATE desktop
    
    - mate/menus
    implementation of the FreeDesktop menu spec for MATE
    
    - mate/notification-daemon
    MATE notification daemon
    
    - mate/panel
    panel component for MATE
    
    - mate/pluma
    powerful text editor for the MATE desktop
    
    - mate/power-manager
    MATE power manager
    
    - mate/screensaver
    MATE screensaver
    
    - mate/session-manager
    MATE session manager
    
    - mate/settings-daemon
    MATE settings daemon
    
    - mate/terminal
    MATE terminal
    
    - mate/themes
    standard MATE themes
    
    - mate/utils
    MATE support utilities
    
    Status:
    
    Vendor Tag:	robert
    Release Tags:	robert_20170430
    
    N ports/x11/mate/Makefile
    N ports/x11/mate/Makefile.inc
    N ports/x11/mate/desktop/Makefile
    N ports/x11/mate/desktop/distinfo
    N ports/x11/mate/desktop/pkg/DESCR
    N ports/x11/mate/desktop/pkg/PLIST
    N ports/x11/mate/panel/Makefile
    N ports/x11/mate/panel/distinfo
    N ports/x11/mate/panel/pkg/DESCR
    N ports/x11/mate/panel/pkg/PLIST
    N ports/x11/mate/settings-daemon/Makefile
    N ports/x11/mate/settings-daemon/distinfo
    N ports/x11/mate/settings-daemon/pkg/DESCR
    N ports/x11/mate/settings-daemon/pkg/PLIST
    N ports/x11/mate/libmatekbd/Makefile
    N ports/x11/mate/libmatekbd/distinfo
    N ports/x11/mate/libmatekbd/pkg/DESCR
    N ports/x11/mate/libmatekbd/pkg/PLIST
    N ports/x11/mate/libmatemixer/Makefile
    N ports/x11/mate/libmatemixer/distinfo
    N ports/x11/mate/libmatemixer/pkg/DESCR
    N ports/x11/mate/libmatemixer/pkg/PLIST
    N ports/x11/mate/menus/Makefile
    N ports/x11/mate/menus/distinfo
    N ports/x11/mate/menus/pkg/DESCR
    N ports/x11/mate/menus/pkg/PLIST
    N ports/x11/mate/menus/patches/patch-layout_mate-applications_menu
    N ports/x11/mate/libmateweather/Makefile
    N ports/x11/mate/libmateweather/distinfo
    N ports/x11/mate/libmateweather/pkg/DESCR
    N ports/x11/mate/libmateweather/pkg/PLIST
    N ports/x11/mate/libmateweather/patches/patch-configure_ac
    N ports/x11/mate/session-manager/Makefile
    N ports/x11/mate/session-manager/distinfo
    N ports/x11/mate/session-manager/pkg/DESCR
    N ports/x11/mate/session-manager/pkg/PLIST
    N ports/x11/mate/marco/Makefile
    N ports/x11/mate/marco/distinfo
    N ports/x11/mate/marco/pkg/DESCR
    N ports/x11/mate/marco/pkg/PLIST
    N ports/x11/mate/marco/patches/patch-src_core_window-props_c
    N ports/x11/mate/marco/patches/patch-configure
    N ports/x11/mate/caja/Makefile
    N ports/x11/mate/caja/distinfo
    N ports/x11/mate/caja/pkg/DESCR
    N ports/x11/mate/caja/pkg/PLIST
    N ports/x11/mate/icon-theme/Makefile
    N ports/x11/mate/icon-theme/distinfo
    N ports/x11/mate/icon-theme/pkg/DESCR
    N ports/x11/mate/icon-theme/pkg/PLIST
    N ports/x11/mate/control-center/Makefile
    N ports/x11/mate/control-center/distinfo
    N ports/x11/mate/control-center/pkg/DESCR
    N ports/x11/mate/control-center/pkg/PLIST
    N ports/x11/mate/themes/Makefile
    N ports/x11/mate/themes/distinfo
    N ports/x11/mate/themes/pkg/DESCR
    N ports/x11/mate/themes/pkg/PLIST
    N ports/x11/mate/terminal/Makefile
    N ports/x11/mate/terminal/distinfo
    N ports/x11/mate/terminal/pkg/DESCR
    N ports/x11/mate/terminal/pkg/PLIST
    N ports/x11/mate/power-manager/Makefile
    N ports/x11/mate/power-manager/distinfo
    N ports/x11/mate/power-manager/pkg/DESCR
    N ports/x11/mate/power-manager/pkg/PLIST
    N ports/x11/mate/power-manager/patches/patch-configure_ac
    N ports/x11/mate/screensaver/Makefile
    N ports/x11/mate/screensaver/distinfo
    N ports/x11/mate/screensaver/pkg/DESCR
    N ports/x11/mate/screensaver/pkg/PLIST
    N ports/x11/mate/screensaver/patches/patch-src_gs-auth-bsdauth_c
    N ports/x11/mate/screensaver/patches/patch-configure_ac
    N ports/x11/mate/screensaver/patches/patch-src_Makefile_in
    N ports/x11/mate/screensaver/patches/patch-src_Makefile_am
    N ports/x11/mate/screensaver/patches/patch-src_setuid_c
    N ports/x11/mate/screensaver/patches/patch-src_gs-auth-pwent_c
    N ports/x11/mate/screensaver/patches/patch-data_mate-screensaver-preferences_desktop_in
    N ports/x11/mate/screensaver/patches/patch-data_lock-dialog-default_ui
    N ports/x11/mate/media/Makefile
    N ports/x11/mate/media/distinfo
    N ports/x11/mate/media/pkg/DESCR
    N ports/x11/mate/media/pkg/PLIST
    N ports/x11/mate/utils/Makefile
    N ports/x11/mate/utils/distinfo
    N ports/x11/mate/utils/pkg/DESCR
    N ports/x11/mate/utils/pkg/PLIST
    N ports/x11/mate/calc/Makefile
    N ports/x11/mate/calc/distinfo
    N ports/x11/mate/calc/pkg/DESCR
    N ports/x11/mate/calc/pkg/PLIST
    N ports/x11/mate/atril/Makefile
    N ports/x11/mate/atril/distinfo
    N ports/x11/mate/atril/pkg/DESCR
    N ports/x11/mate/atril/pkg/PLIST
    N ports/x11/mate/caja-extensions/Makefile
    N ports/x11/mate/caja-extensions/distinfo
    N ports/x11/mate/caja-extensions/pkg/DESCR
    N ports/x11/mate/caja-extensions/pkg/PLIST
    N ports/x11/mate/eom/Makefile
    N ports/x11/mate/eom/distinfo
    N ports/x11/mate/eom/pkg/DESCR
    N ports/x11/mate/eom/pkg/PLIST
    N ports/x11/mate/notification-daemon/Makefile
    N ports/x11/mate/notification-daemon/distinfo
    N ports/x11/mate/notification-daemon/pkg/DESCR
    N ports/x11/mate/notification-daemon/pkg/PLIST
    N ports/x11/mate/engrampa/Makefile
    N ports/x11/mate/engrampa/distinfo
    N ports/x11/mate/engrampa/pkg/DESCR
    N ports/x11/mate/engrampa/pkg/PLIST
    N ports/x11/mate/pluma/Makefile
    N ports/x11/mate/pluma/distinfo
    N ports/x11/mate/pluma/pkg/DESCR
    N ports/x11/mate/pluma/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 13:37:13

Modified files:
	etc            : netstart 

Log message:
Do not try to delete a default route before adding it.

Now that route are automatically G/C with the address they are attached
to there's no reason to duplicate the kernel's job.

Fix a regression introduced with multipath default routes.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 14:04:42

Modified files:
	sys/arch/amd64/conf: GENERIC 
	sys/arch/i386/conf: GENERIC 

Log message:
Remove some KGDB leftovers.

From Amit Kulkarni.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/04/30 14:09:28

Modified files:
	usr.sbin/config: config.8 
	share/man/man4 : options.4 
	share/man/man7 : Makefile 
	share/man/man9 : uvm.9 
Removed files:
	share/man/man7 : kgdb.7 

Log message:
Remove KGDB references.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/30 14:28:12

Modified files:
	mail           : Makefile 

Log message:
build gpgme,sasl flavour of mutt (as is already done for neomutt).
req by William Graeber


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/30 14:30:39

Modified files:
	usr.bin/lex    : Makefile 

Log message:
Move FlexLexer.h from /usr/include/g++ to /usr/include.  It is not
a g++-specific header and this matches most other systems.  Needed
to use flex++ with clang.  OK espie@ kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 14:56:19

Modified files:
	infrastructure/bin: proot 

Log message:
let's be slightly more helpful and show the dirs we know about along with
the users


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/30 15:15:46

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/04/30 15:33:02

Modified files:
	sys/conf       : files 
Added files:
	sys/crypto     : aes.c aes.h 

Log message:
Constant time AES implementation

This introduces a 32-bit constant time AES implementation from
Thomas Pornin originally for BearSSL and then adjusted by Thomas
and myself to fit OpenBSD kernel. One of the additional features
is an API for encryption and decryption subkey expansion in the
format specified by NIST in FIPS 197.

Tested by myself and naddy@, ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/04/30 15:33:26

Modified files:
	lang/ghc       : Makefile 

Log message:
Suppress a lot of (not all) warnings when using clang:

ghc uses cc for generating object files from assembler files and
passes the CONF_CC_OPTS_STAGE? flags to it, which clang doesn't
like, so add -Wno-unused-command-line-argument to the flags passed
to cc if it's clang.

To let this work for the bootstrap compiler, properly CONFIGURE_ENV
when installing the bootstrap (in post-patch:). This also makes the
hack patching the bootstrap/bin/ghc script in post-patch: obsolete.

prodded by (and with some hints from) espie@

~here are still a lot of warnings, most about macros #defined in
storage/ClosureMacros.h. Those should be fixed in a separate step,
probably after an update to ghc-8.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/04/30 15:34:45

Modified files:
	regress/sys/crypto/aes: aestest.c 

Log message:
Switch AES testcase to the new implementation

OK djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	phessler@cvs.openbsd.org	2017/04/30 15:36:05

Modified files:
	textproc/xml2rfc: Makefile distinfo 
	textproc/xml2rfc/pkg: PLIST 
Removed files:
	textproc/xml2rfc/files: xml2rfc 

Log message:
xml2rfc has been completely re-written, moving from tcl/tk to python.

Update to the version that is currently used for submtting RFCs to the IETF.

OK sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/30 15:52:40

Modified files:
	sys/arch/arm64/dev: agintc.c 

Log message:
Fix priority handling.  The interrupt priority registers expose the full range
of priorities available in secure mode (minimally 32).  For non-secure
interrupts we need to make sure the top bit is set and shift our interrupt
priority level into the remaining bits.  The priority mask register on the
other hand only exposes the priority levels available to the mode from which
it is accessed.  So when accessed from non-secure mode, we need to shift our
interrupt priority level by a different amount.

Also set the binary point register to zero to make sure the maximum number of
available bits are used for the priority group and priority masking actually
works as expected.

This makes the FireFly-RK3399 boot multi-user with the root filesystem on USB.

ok drahn@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/04/30 16:29:53

Modified files:
	net/putty      : Makefile distinfo 
	net/putty/pkg  : PLIST-main 
Added files:
	net/putty/patches: patch-Makefile_in 

Log message:
update to PuTTY-0.69
disable new pageant build for now, doesn't build (setpgrp)


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/04/30 16:35:34

Modified files:
	sys/arch/arm/mainbus: mainbus.c 

Log message:
Make early attrbute work here as well.  Remove unreachable panic while there.

ok visa@, patrick@, drahn@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/04/30 16:37:28

Added files:
	audio/caps-plugins/patches: patch-AutoFilter_cc 

Log message:
calling div on unsigned is ambiguous, so force it into a known call (clang)


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:10:43

Modified files:
	usr.bin/ssh    : Makefile.inc authfd.c authfile.c cipher.c 
	                 compat.c hostfile.c kex.c opacket.c packet.c 
	                 readconf.c ssh-add.c ssh-agent.c ssh-keygen.c 
	                 ssh-keyscan.c ssh.c sshconnect.c sshkey.c 

Log message:
unifdef WITH_SSH1
ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:11:46

Modified files:
	usr.bin/ssh    : compat.c readconf.c readconf.h ssh.c 
	                 sshconnect.c 

Log message:
remove options.protocol and client Protocol configuration knob

ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:13:25

Modified files:
	usr.bin/ssh    : channels.c channels.h clientloop.c compat.c 
	                 compat.h dispatch.c nchan.c packet.c packet.h 
	                 ssh-keyscan.c ssh.c ssh_api.c sshconnect.c 
	                 sshd.c ttymodes.c 

Log message:
remove compat20/compat13/compat15 variables

ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:15:04

Modified files:
	usr.bin/ssh    : cipher.c cipher.h readconf.c readconf.h ssh.c 
	                 sshkey.c 
Removed files:
	usr.bin/ssh    : cipher-3des1.c cipher-bf1.c 

Log message:
remove SSHv1 ciphers; ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:17:37

Modified files:
	usr.bin/ssh    : Makefile.inc 
	usr.bin/ssh/lib: Makefile 
	usr.bin/ssh/ssh: Makefile 

Log message:
remove SSH1 make flag and associated files
ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:18:22

Modified files:
	usr.bin/ssh    : readconf.c readconf.h ssh.1 ssh_config 
	                 ssh_config.5 

Log message:
remove SSHv1 configuration options and man pages bits

ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:18:44

Modified files:
	usr.bin/ssh    : clientloop.c hostfile.c ssh-agent.c 
	                 ssh-keygen.1 ssh-keygen.c ssh-keyscan.1 
	                 ssh-keyscan.c ssh.c ssh.h sshconnect.c 
	                 sshconnect2.c sshd.c sshkey.c sshkey.h 

Log message:
remove KEY_RSA1

ok markus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	nigel@cvs.openbsd.org	2017/04/30 17:20:24

Modified files:
	multimedia/get_iplayer: Makefile distinfo 

Log message:
Update to fix BBC site changes. Read the release notes
section "do this first"
https://github.com/get-iplayer/get_iplayer/wiki/release300
Ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:21:54

Modified files:
	usr.bin/ssh    : clientloop.c 

Log message:
remove SSHv1-related buffers from client code


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:23:54

Modified files:
	usr.bin/ssh    : bufbn.c buffer.h packet.c packet.h 

Log message:
remove SSHv1 support from packet and buffer APIs

ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:25:03

Modified files:
	usr.bin/ssh    : Makefile.inc 

Log message:
undo some local debugging stuff that I committed by accident


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:26:16

Modified files:
	usr.bin/ssh    : LICENCE deattack.c deattack.h packet.c 
	usr.bin/ssh/lib: Makefile 

Log message:
remove the (in)famous SSHv1 CRC compensation attack detector.

Despite your cameo in The Matrix movies, you will not be missed.

ok markus


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:26:54

Modified files:
	usr.bin/ssh    : ttymodes.c ttymodes.h 

Log message:
purge the last traces of SSHv1 from the TTY modes handling code

ok markus


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:28:12

Modified files:
	usr.bin/ssh    : scp.1 scp.c ssh.h 

Log message:
exterminate the -1 flag from scp

ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:28:42

Modified files:
	usr.bin/ssh    : channels.c channels.h clientloop.c dispatch.c 
	                 nchan.c packet.c ssh-keyscan.c ssh.c ssh1.h 

Log message:
obliterate ssh1.h and some dead code that used it

ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:29:10

Modified files:
	usr.bin/ssh    : ssh-agent.c 

Log message:
flense SSHv1 support from ssh-agent, considerably simplifying it

ok markus


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:33:48

Modified files:
	regress/usr.bin/ssh/unittests: Makefile.inc 
	regress/usr.bin/ssh/unittests/hostkeys: mktestdata.sh 
	                                        test_iterate.c 
	regress/usr.bin/ssh/unittests/hostkeys/testdata: known_hosts 
	regress/usr.bin/ssh/unittests/sshkey: mktestdata.sh test_file.c 
	                                      test_fuzz.c test_sshkey.c 

Log message:
remove SSHv1 support from unit tests


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 17:34:55

Modified files:
	regress/usr.bin/ssh: agent-pkcs11.sh agent.sh banner.sh 
	                     broken-pipe.sh brokenkeys.sh cert-file.sh 
	                     cert-hostkey.sh cert-userkey.sh cfgmatch.sh 
	                     cipher-speed.sh connect-privsep.sh 
	                     connect.sh dynamic-forward.sh 
	                     exit-status.sh forcecommand.sh 
	                     forward-control.sh forwarding.sh 
	                     host-expand.sh hostkey-agent.sh 
	                     integrity.sh key-options.sh 
	                     keygen-change.sh keyscan.sh localcommand.sh 
	                     multiplex.sh principals-command.sh 
	                     proto-mismatch.sh proto-version.sh 
	                     proxy-connect.sh putty-transfer.sh 
	                     reconfigure.sh reexec.sh 
	                     stderr-after-eof.sh stderr-data.sh 
	                     test-exec.sh transfer.sh try-ciphers.sh 
	                     yes-head.sh 
	regress/usr.bin/ssh/misc/kexfuzz: kexfuzz.c 

Log message:
eliminate explicit specification of protocol in tests and loops over
protocol. We only support SSHv2 now.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/04/30 17:54:43

Modified files:
	distrib/sets/lists/comp: mi 
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 18:03:18

Modified files:
	usr.bin/ssh    : cipher.c 

Log message:
fixup setting ciphercontext->plaintext (lost in SSHv1 purge), though
it isn't really used for much anymore.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/04/30 18:08:31

Modified files:
	lib/libc/sys   : wait.2 

Log message:
Document that wait3/waitpid can receive SIGCHILD when wpid does
not exist or is not a child of the calling process.
Document what happens when SIGCHLD is ignored or SA_NOCLDWAIT is
set in sa_flags (this part from FreeBSD).
OK guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/04/30 20:27:11

Modified files:
	usr.bin/ssh    : sshconnect.c 

Log message:
remove unused variable


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/01 00:23:59

Modified files:
	usr.bin/units  : units.lib 

Log message:
update currency exchange rates;


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/01 00:39:26

Modified files:
	usr.sbin/config: config.8 
	share/man/man4 : ddb.4 
	share/man/man7 : intro.7 

Log message:
Fewer kgdb(7) references and fix previous.

Pointed by jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/01 03:27:45

Removed files:
	usr.bin/ssh    : deattack.c deattack.h ssh1.h 

Log message:
don't know why cvs didn't exterminate these the first time around,
I use rm -f and everuthing...

pointed out by sobrado@


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/05/01 03:29:07

Modified files:
	usr.sbin/smtpd : table.c 

Log message:
in function used for tracing, display unknown lookup types as "???"

diff from Wolf480pl


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/01 05:10:31

Modified files:
	benchmarks     : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	benchmarks/bytebench: Makefile distinfo 
	benchmarks/bytebench/patches: patch-Makefile patch-Run 
	                              patch-pgms_cleanup_sh 
	                              patch-pgms_multi_sh 
	                              patch-src_big_c patch-src_dhry_1_c 
	                              patch-src_execl_c 
	                              patch-src_fstime_c 
	benchmarks/bytebench/pkg: DESCR PLIST 

Log message:
remove bytebench: 25 years old and no longer used by anybody; ok jca@, krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/01 06:20:55

Modified files:
	usr.bin/tmux   : cfg.c cmd-display-message.c cmd-list-buffers.c 
	                 cmd-list-clients.c cmd-list-keys.c 
	                 cmd-list-panes.c cmd-list-sessions.c 
	                 cmd-list-windows.c cmd-pipe-pane.c cmd-queue.c 
	                 format.c names.c screen-redraw.c 
	                 server-client.c status.c tmux.h window-choose.c 

Log message:
In order that people can use formats like #D in #() in the status line
and not have to wait for an update when they change pane, we allow
commands to run more than once a second if the expanded form
changes. Unfortunately this can mean them being run far too often
(pretty much continually) when multiple clients exist, because some
formats (including #D) will always differ between clients.

To avoid this, give each client its own tree of jobs which means that
the same command will be different instances for each client - similar
to how we have the tag to separate commands for different panes.

GitHub issue 889; test case reported by Paul Johnson.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/01 06:21:57

Modified files:
	archivers/lzip/lzip: Makefile distinfo 

Log message:
Update to lzip 1.19.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/01 06:22:26

Modified files:
	archivers/lzip/clzip: Makefile distinfo 

Log message:
Update to clzip 1.9.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/05/01 06:54:55

Modified files:
	app/cwm        : calmwm.h client.c kbfunc.c mousefunc.c 

Log message:
Clean up, unify and accurately calculate edge distance with client move/resize
actions, so as to not lose windows off the edge.

inspired by diffs (and feedback) from Vadim Vygonets.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 07:22:18

Modified files:
	net/librenms   : Makefile distinfo 
	net/librenms/patches: patch-html_install_php 
	                      patch-includes_common_php 
	                      patch-includes_defaults_inc_php 
	                      patch-includes_functions_php 
	                      patch-poller-wrapper_py 
	net/librenms/pkg: PLIST 

Log message:
update to librenms-1.27


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 07:28:10

Modified files:
	comms/fldigi   : Makefile distinfo 

Log message:
update to fldigi-4.0.3


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/01 07:44:59

Modified files:
	distrib/sets/lists/comp: gcc.alpha gcc.amd64 gcc.armv7 gcc.hppa 
	                         gcc.i386 gcc.landisk gcc.loongson 
	                         gcc.luna88k gcc.macppc gcc.octeon 
	                         gcc.sgi gcc.socppc gcc.sparc64 md.alpha 
	                         md.amd64 md.armv7 md.hppa md.i386 
	                         md.landisk md.loongson md.luna88k 
	                         md.macppc md.octeon md.sgi md.socppc 
	                         md.sparc64 mi 

Log message:
move more gcc files to gcc sets
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/01 08:01:47

Modified files:
	etc            : rc 

Log message:
Comments and spacing.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 08:04:09

Modified files:
	textproc/mupdf : Makefile 

Log message:
change mupdf's MODGCC4_ARCHS to ${GCC3_ARCHS} ${GCC4_ARCHS}; this is just
C99 not C++ so no mucking about with WANTLIB required.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/01 08:08:26

Removed files:
	usr.bin/ssh    : sshconnect1.c 

Log message:
this one I did forget to "cvs rm"


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 08:15:54

Modified files:
	mail/rmilter   : Makefile 

Log message:
use MODGCC4_ARCHS=${GCC3_ARCHS} ${GCC4_ARCHS}; c99 but no c++


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/01 08:22:36

Modified files:
	distrib/miniroot: install.sub 

Log message:
Remove last remnants of rtsol. IPv6 autoconfiguration of interfaces
is now done in ifstart(). Replace rtsolif with a boolean variable
V6_AUTOCONF. Replace dhcpif with a boolean variable V4_DHCPCONF.
Both are later used to decide whether or not to configre defaultroutes
from /etc/mygate.

OK krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/01 08:23:29

Modified files:
	etc            : netstart 

Log message:
Remove last remnants of rtsol. IPv6 autoconfiguration of interfaces is now
done in ifstart(). Remove ipv6autoconf() and replace rtsolif with a boolean
variable V6_AUTOCONF. Replace dhcpif with a boolean variable V4_DHCPCONF.
Both are later used in defaultroute() to decide whether or not to configre
defaultroutes from /etc/mygate.

OK krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/01 08:29:39

Modified files:
	distrib/miniroot: install.sub 

Log message:
Apply same change of defaultroute handling as in r1.179 of netstart.

Now that routes are automatically G/C with the address they are
attached to there's no reason to duplicate the kernel's job.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/01 08:43:46

Modified files:
	distrib/sets/lists/comp: gcc.alpha gcc.amd64 gcc.armv7 gcc.hppa 
	                         gcc.i386 gcc.landisk gcc.loongson 
	                         gcc.luna88k gcc.macppc gcc.octeon 
	                         gcc.sgi gcc.socppc gcc.sparc64 md.alpha 
	                         md.amd64 md.armv7 md.hppa md.i386 
	                         md.landisk md.loongson md.luna88k 
	                         md.macppc md.octeon md.sgi md.socppc 
	                         md.sparc64 

Log message:
move some binutils files from gcc sets back to md sets
ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 09:14:18

Modified files:
	archivers/zstd : Makefile 

Log message:
switch to MODGCC4_ARCHS=${GCC3_ARCHS} ${GCC4_ARCHS}, C only. ok juanfra@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/01 09:37:15

Modified files:
	devel/ipython  : Makefile distinfo 
	devel/ipython/patches: patch-docs_source_conf_py 

Log message:
Update to ipython 5.3.0

ok edd@ (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/01 10:23:42

Modified files:
	etc            : netstart 

Log message:
Revert r1.170 and remove the id==0 check.
The id binary is not available in nfs diskless setups at this point.

reported by Andreas Kusalananda, thanks.
discussed with deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/01 10:25:20

Modified files:
	editors/emacs  : Makefile distinfo 
	editors/emacs/patches: patch-configure patch-lisp_files_el 
	                       patch-lisp_vc_vc_el 
	editors/emacs/pkg: PLIST 
Removed files:
	editors/emacs/patches: patch-lisp_vc_vc-cvs_el 

Log message:
emacs-25.2

Mostly a bug-fixe release, see NEWS for the few things that changed.
The diff for bug #24082 included is in this release.

Tested on armv7 and amd64.  -rc/release test reports from alf, Manuel
Giraud, sunil@ and krw@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/01 10:36:38

Modified files:
	editors/tea    : Makefile 
	editors/teaqt  : Makefile 

Log message:
New HOMEPAGE and MASTER_SITES

sourceforge kept last in MASTER_SITES because it serves tarballs for
the old versions we use.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/01 13:00:21

Modified files:
	devel/tclap    : Makefile 

Log message:
disable doxygen

ok jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/01 13:05:49

Modified files:
	bin/ksh        : eval.c 

Log message:
Quiet an "implicit conversion from 'int' to 'char' changes value"
warning from clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/01 13:20:53

ports/www/kore/patches

Update of /cvs/ports/www/kore/patches
In directory cvs.openbsd.org:/tmp/cvs-serv16845/patches

Log Message:
Directory /cvs/ports/www/kore/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/01 13:23:45

Modified files:
	www/p5-HTML-FormatText-WithLinks-AndTables: Makefile distinfo 

Log message:
Update to p5-HTML-FormatText-WithLinks-AndTables-0.07.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/01 13:24:57

Modified files:
	cad/klogic     : Makefile distinfo 
	cad/klogic/pkg : DESCR PLIST 
Removed files:
	cad/klogic/patches: patch-klogic_klogic_h patch-klogic_mainw_cpp 

Log message:
update to klogic-4.0.2

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 13:29:26

Modified files:
	cad/gnucap     : Makefile 
Added files:
	cad/gnucap/patches: patch-modelgen_ap_h patch-modelgen_mg__h 
	                    patch-src_ap_h 

Log message:
fix compile with clang, classes have to be visible when
defining templates.
also fix an obnoxious narrowing warning/error which makes no sense


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/05/01 13:31:08

Modified files:
	lang/ghc       : Makefile 

Log message:
Still too much noise for espie@, so add -Wno-expansion-to-defined.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/01 13:32:31

Modified files:
	www/kore       : Makefile 
Added files:
	www/kore/patches: patch-Makefile 

Log message:
Honour CC and remove hardcoded optimization (-O2) flag.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/01 13:54:18

Modified files:
	www/p5-HTML-Tree: Makefile distinfo 
	www/p5-HTML-Tree/pkg: PLIST 

Log message:
Update to p5-HTML-Tree-5.06.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 13:57:34

Added files:
	devel/doc++/patches: patch-src_comment_ll patch-src_cpp_ll 
	                     patch-src_datahashtable_h 
	                     patch-src_doc2dbsgml_ll 
	                     patch-src_doc2dbxml_ll patch-src_doc2tex_ll 
	                     patch-src_doc_ll patch-src_html_cc 
	                     patch-src_java_ll patch-src_main_cc 
	                     patch-src_nametable_cc 
	                     patch-src_nametable_h patch-src_php_ll 
	                     patch-src_tex2gif_cc 

Log message:
surprisingly not painful to fix.
#include <iostream.h> -> #include <iostream> + using lines.
can't use namespace std, as this code has names that seriously interfere.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 14:08:41

Added files:
	devel/codeworker/patches: patch-CGExternalHandling_cpp 
	                          patch-CGRuntime_cpp 

Log message:
EXIT_FAILURE declaration, match new[] with delete[].


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 14:21:22

Modified files:
	devel/py-gobject3: Makefile 

Log message:
switch to MODGCC4_ARCHS=${GCC3_ARCHS} ${GCC4_ARCHS} (C only), ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/01 14:26:16

Modified files:
	www/p5-HTTP-Server-Simple: Makefile distinfo 

Log message:
Update to p5-HTTP-Server-Simple-0.52.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/01 14:26:59

Modified files:
	net/putty      : Makefile 

Log message:
fix deps, moved to gtk+3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 14:48:55

Modified files:
	games/ace      : Makefile 
	games/ace/patches: patch-lib_make-imglib_c 

Log message:
fix compile&some warnings/errors with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/01 14:53:58

Modified files:
	usr.bin/mandoc : out.c 
	regress/usr.bin/mandoc/tbl/mod: Makefile 
Added files:
	regress/usr.bin/mandoc/tbl/mod: expand-toowide.in 
	                                expand-toowide.out_ascii 

Log message:
When trying to expand some columns in a table where the sum of the
widths of the remaining columns is already wider than the line
length, underflowing size_t and dying from ENOMEM is the wrong plan.
Instead, simply refrain from expanding anything in such a situation,
avoiding a crash that tb@ found with afl.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/01 14:59:53

Modified files:
	www/p5-SOAP-Lite: Makefile distinfo 

Log message:
Update to p5-SOAP-Lite-1.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 15:00:15

Added files:
	games/dungeon-crawl/patches: patch-source_effects_cc 
	                             patch-source_it_use3_cc 
	                             patch-source_randart_cc 
	                             patch-source_tags_cc 

Log message:
find  proto for missing identifiers


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpe@cvs.openbsd.org	2017/05/01 15:13:36

Modified files:
	archivers/makeself: Makefile distinfo 

Log message:
Update archivers/makeself to 2.3.0 and change HOMEPAGE.

OK aja@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/01 16:09:48

Modified files:
	usr.bin/ssh    : bitmap.c 

Log message:
when freeing a bitmap, zero all it bytes; spotted by Ilya Kaliman


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 16:25:54

Modified files:
	editors/uemacs/patches: patch-h_eproto_h patch-src_bind_c 
	                        patch-src_char_c patch-src_file_c 
	                        patch-src_input_c patch-src_keyboard_c 
	                        patch-src_lock_c 
Added files:
	editors/uemacs/patches: patch-src_eval_c 

Log message:
regen old patches, fix type of void function


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 16:32:59

Modified files:
	devel/libvstr  : Makefile 

Log message:
explicitly use gnu89-inlines
shut up noise with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/01 17:27:23

Modified files:
	usr.bin/mandoc : man.c 

Log message:
A few days ago, a patch from <G dot Branden dot Robinson at gmail dot com>
got committed to groff which changed .TP from using .it to using .itc,
such that groff now supports more than one man(7) macro line in the .TP
head if all but the last line in the head end with \c.

Of course, relying on that behaviour is utterly non-portable, but if
authors are reckless enough to use that idiom, let's do what they want.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/01 17:54:02

Modified files:
	emulators/BasiliskII: Makefile 

Log message:
the slirp emulator needs gnu89 inlines. Fortunately, this is clean enough
that the CFLAGS don't bleed into C++.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/01 20:57:46

Modified files:
	sys/arch/amd64/amd64: vmm.c 
	sys/arch/amd64/include: vmmvar.h 

Log message:
Allow setting of guest MSRs from vmd(8). This change is the first part of
a larger effort to implement vmctl send/vmctl receive (snapshot and VM
migration).

From Pratik Vyas, Siri Chandana, Harshada Mone and Ashwin Agrawal, a
group of students I am supervising.

ok kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/01 20:58:24

Modified files:
	usr.sbin/vmd   : vm.c 

Log message:
Matching vmd(8) part of previous diff (first part of vmctl send/receive).

ok kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/05/01 21:43:33

Modified files:
	sysutils/gource: Makefile distinfo 

Log message:
Update for Gource to 0.44.

OK benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/01 21:59:45

Modified files:
	lib/libcrypto  : malloc-wrapper.c 
	lib/libcrypto/asn1: a_object.c a_sign.c a_verify.c asn1_lib.c 
	lib/libcrypto/bn: bn_asm.c bn_exp.c bn_lib.c bn_rand.c 
	lib/libcrypto/buffer: buffer.c 
	lib/libcrypto/dsa: dsa_asn1.c 
	lib/libcrypto/ec: ec_key.c ec_lib.c ec_mult.c ecp_nistp224.c 
	                  ecp_nistp256.c ecp_nistp521.c ecp_nistz256.c 
	lib/libcrypto/ecdh: ech_lib.c 
	lib/libcrypto/ecdsa: ecs_lib.c ecs_vrf.c 
	lib/libcrypto/evp: bio_enc.c digest.c e_aes.c 
	                   e_chacha20poly1305.c p_open.c 
	lib/libcrypto/gost: gostr341001_key.c 
	lib/libcrypto/hmac: hm_pmeth.c 
	lib/libcrypto/modes: gcm128.c 
	lib/libcrypto/pem: pem_lib.c pem_pkey.c pvkfmt.c 
	lib/libcrypto/pkcs12: p12_key.c 
	lib/libcrypto/pkcs7: pk7_doit.c 
	lib/libcrypto/rsa: rsa_eay.c rsa_saos.c rsa_sign.c 
	lib/libtls     : tls_config.c 

Log message:
use freezero() instead of memset/explicit_bzero + free.  Substantially
reduces conditional logic (-218, +82).

MOD_EXP_CTIME_MIN_CACHE_LINE_WIDTH cache alignment calculation bn/bn_exp.c
wasn'tt quite right.  Two other tricky bits with ASN1_STRING_FLAG_NDEF and
BN_FLG_STATIC_DATA where the condition cannot be collapsed completely.

Passes regress.  ok beck


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/01 22:02:13

src/regress/lib/libcrypto/free

Update of /cvs/src/regress/lib/libcrypto/free
In directory cvs.openbsd.org:/tmp/cvs-serv96613/free

Log Message:
Directory /cvs/src/regress/lib/libcrypto/free added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/01 22:03:06

Added files:
	regress/lib/libcrypto/free: Makefile freenull.c 

Log message:
Add regress for free functions that should be safe with NULL


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/01 22:11:08

Modified files:
	lib/libcrypto/x509v3: v3_crld.c v3_ncons.c v3_pci.c 

Log message:
the XXXfree functions being called accept NULL, so don't check first.
ok beck


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/02 01:00:02

Modified files:
	devel/libspectrum: Makefile distinfo 

Log message:
Update to libspectrum-1.3.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/02 01:10:53

Modified files:
	www/p5-URI-Fetch: Makefile distinfo 

Log message:
Update to p5-URI-Fetch-0.13.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/02 01:13:31

Modified files:
	usr.bin/ssh    : ssh-keygen.1 

Log message:
tidy up -O somewhat; ok djm


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/02 01:18:19

Modified files:
	sys/arch/i386/i386: vmm.c 
	sys/arch/i386/include: vmmvar.h 

Log message:
Matching i386 commit to previous amd64 commit (initial support for vmctl
send/receive)


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/02 01:19:53

Modified files:
	usr.sbin/vmd   : vm.c 

Log message:
fix an error in i386 vmd build


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/02 01:24:25

Modified files:
	www/py-httpie  : Makefile distinfo 

Log message:
Update to py-httpie-0.9.8.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/02 01:35:55

Modified files:
	sys/conf       : Tag: OPENBSD_6_1 newvers.sh 

Log message:
6.1-stable


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 02:05:26

Added files:
	cad/qcad/patches: patch-qcadguiqt_src_qg_dialogfactory_cpp 

Log message:
comparison of pointer vs integer


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/02 02:06:33

Modified files:
	usr.bin/ssh    : scp.c ssh.c 

Log message:
remove options -12 from usage();


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/02 02:54:19

Modified files:
	usr.bin/ssh    : sftp.1 sftp.c 

Log message:
remove -1 / -2 options; pointed out by jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/02 02:57:45

Modified files:
	www/py-gunicorn: Makefile distinfo 
	www/py-gunicorn/pkg: PLIST 

Log message:
Update to py-gunicorn-19.7.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/02 03:05:58

Modified files:
	usr.bin/ssh    : ssh-keygen.1 

Log message:
more -O shuffle; ok djm


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 03:26:30

Modified files:
	infrastructure/bin: update-patches 

Log message:
tweak things so that changes of PATCHORIG won't matter.
-> always emit
--- stem.orig
+++ stem
lines regardless of PATCHORIG
-> prepend an Index: line like cvs does
-> add a blank line for comments.

okay aja@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/02 03:50:38

Modified files:
	sys/dev/pv     : vmmci.c 

Log message:
Resynchronize the guest RTC via vmmci(4) on host resume from zzz/ZZZ
(kernel part)

This feature is for OpenBSD guests only.

ok reyk, kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/02 03:51:19

Modified files:
	usr.sbin/vmd   : mc146818.c virtio.c virtio.h 

Log message:
Resynchronize the guest RTC via vmmci(4) on host resume from zzz/ZZZ
(vmd part)

This feature is for OpenBSD guests only.

ok reyk, kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/02 05:03:48

Modified files:
	sys/net80211   : ieee80211_input.c 

Log message:
Fix a problem with associating to wifi networks with a hidden SSID.

If an AP is configured to hide its SSID it sends a non-zero length SSID
which contains only zeroes. The AP sends its actual SSID only in probe
responses after a client includes this SSID in a probe request.
If we happened to receive a beacon before the probe response we stored a
non-zero-length SSID of zeroes and never updated the SSID when the probe
response arrived. The client was then unable to find the AP.

test & ok jung@


CVSROOT:	/cvs
Module name:	ports
Changes by:	tsg@cvs.openbsd.org	2017/05/02 05:30:04

Modified files:
	infrastructure/lib/OpenBSD/PortGen: Port.pm 

Log message:
There's no need for 'make fetch-all' when creating a new port.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 05:33:48

Modified files:
	regress/sys/crypto/aes: Makefile 

Log message:
Pick the right AES source file


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 05:44:32

Modified files:
	sys/crypto     : cryptosoft.c gmac.c gmac.h xform.c xform.h 
	sys/netinet    : ip_esp.c 

Log message:
Switch OCF and IPsec over to the new AES

ok djm


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 05:46:00

Modified files:
	regress/sys/crypto/aesctr: Makefile aesctr.c 
	regress/sys/crypto/aesxts: Makefile aes_xts.c 
	regress/sys/crypto/gmac: Makefile gmac_test.c 

Log message:
Sync GMAC and AES-CTR/-XTS regress tests with the new AES code

ok djm


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 05:47:49

Modified files:
	sys/arch/amd64/amd64: aesni.c via.c 
	sys/arch/i386/i386: via.c 
	sys/arch/i386/pci: glxsb.c 
	sys/crypto     : aes.h 

Log message:
Switch glxsb(4), VIA padlock and AES-NI drivers over to the new AES


CVSROOT:	/cvs
Module name:	ports
Changes by:	tsg@cvs.openbsd.org	2017/05/02 06:02:49

Modified files:
	sysutils/entr  : Makefile distinfo 

Log message:
Update to entr-3.7. Maintainer timeout.

"If Eric doesn't answer don't be afraid to go ahead with this update." - jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 06:27:37

Modified files:
	sys/net        : hfsc.c hfsc.h pf_ioctl.c pfvar.h 

Log message:
Provide pluggable queueing interface for pf

By hiding H-FSC behind pfq_ops structure similar to the ifq_ops,
we provide a possibility to plug alternative queueing interfaces
for use in pf.  This reduces amount of H-FSC specific code in the
pf ioctl handler

While here, change the the order of elements in hfsc_class_stats
to provide some compatibility between queue stat structures of
different traffic conditioners.

No objections from henning@, ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/02 07:26:49

Modified files:
	sys/arch/octeon/conf: GENERIC RAMDISK files.octeon 
	sys/arch/octeon/dev: cn30xxgmx.c cn30xxgmxvar.h cn30xxsmi.c 
	                     cn30xxsmireg.h cn30xxsmivar.h if_cnmac.c 

Log message:
Revise MDIO driver code so that device instances can be attached
using fdt. This lets the system utilize multiple MDIO controllers.

This patch enables all RJ45 Ethernet ports on EdgeRouter Pro.
The SFP module slots do not work yet.

OK kettenis@, jmatthew@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/02 07:44:51

Modified files:
	usr.bin/ssh    : scp.1 sftp.1 ssh.1 

Log message:
remove now obsolete protocol1 options from the -o lists;


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/02 08:06:37

Modified files:
	usr.bin/ssh    : sftp.1 

Log message:
add PubKeyAcceptedKeyTypes to the -o list: scp(1) has it, so i guess
this should too;


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 08:38:36

Modified files:
	sys/dev/fdt    : sxipio.c 

Log message:
Linux switched from a device-specific pinctrl binding to a the generic version
for Allwinner devices.  Implement support for the latter such that we can
use newer device trees.

ok patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 08:45:26

Modified files:
	sys/arch/arm/mainbus: mainbus.c 

Log message:
Remove check for compatible property.  Turns out sunxi relied on the broken
check we had before rev 1.16.

Suggested by jmatthew@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 09:13:20

Modified files:
	sys/arch/arm64/dev: mainbus.c 

Log message:
Remove check for compatible property here as well.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 09:13:39

Modified files:
	cad/qucs       : Makefile 
Added files:
	cad/qucs/patches: patch-qucs-core_src_math_complex_h 
	                  patch-qucs-core_src_math_real_cpp 
	                  patch-qucs-core_src_matrix_h 
	                  patch-qucs-core_src_matvec_h 
	                  patch-qucs-core_src_vector_h 
	                  patch-qucs-filter_qf_filter_cpp 

Log message:
patch config.h post-configure to avoid stupid warnings.
multiple clang fixes, mostly stolen from more current qucs.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 09:18:31

Added files:
	graphics/gpicview/patches: patch-src_main-win_c 
	                           patch-src_ptk-menu_h 

Log message:
trivial fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 09:25:32

Modified files:
	graphics/barcode: Makefile 

Log message:
force calloc test to return okay, clang optimizes call away because the
result isn't used.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 09:29:27

Modified files:
	graphics/cfdg  : Makefile 

Log message:
FlexLexer is in a more standard location now, unless you didn't update your
system yet.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 09:39:54

Modified files:
	graphics/cfdg  : Makefile 
	graphics/cfdg/patches: patch-Makefile 

Log message:
unhardcode gcc/g++/estdc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 09:48:41

Modified files:
	graphics/rawstudio/patches: patch-src_dcraw_cc 

Log message:
fixes for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/05/02 10:46:00

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Stricter pledge for bpf. ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 10:47:32

Modified files:
	comms/gpsk31   : Makefile 
	comms/gpsk31/patches: patch-src_server-main_C 

Log message:
abs(unsigned) doesn't make much sense.
clang catches an actual bug in jakemsr's code!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 10:56:11

Modified files:
	comms/gnokii   : Makefile 

Log message:
uses gnu89-inlines


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/02 11:04:09

Modified files:
	usr.bin/ssh    : ssh-keygen.1 ssh-keyscan.1 

Log message:
rsa1 is no longer valid;


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 11:07:06

Modified files:
	sys/crypto     : cmac.c cmac.h key_wrap.c key_wrap.h 
	sys/net80211   : ieee80211_crypto.c ieee80211_crypto_bip.c 
	                 ieee80211_crypto_ccmp.c 

Log message:
Switch 802.11 crypto over to the new AES

OK stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/02 11:08:30

Modified files:
	regress/sys/crypto/cmac: Makefile cmac_test.c 
	regress/sys/crypto/key_wrap: Makefile key_wrap_test.c 

Log message:
Convert CMAC and Key Wrap regress tests over to the new AES

OK stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/02 11:44:31

Modified files:
	regress/usr.bin/mdoclint: mdoclint 

Log message:
bugfix: treat .Bd -unfilled like .Bd -literal;
OK jmc@ wiz@, and also committed upstream to pkgsrc


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 11:49:06

Added files:
	devel/bouml/patches: patch-src_JavaCat_Class_cpp 

Log message:
nullptr is a keyword in modern C++.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/02 11:51:32

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
Remove -P (warnings about paragraph problems).
These are fully covered by mandoc -Tlint.
OK jmc@ wiz@, and also committed to pkgsrc.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 11:59:46

Added files:
	security/qca2/patches: patch-src_botantools_botan_botan_secmem_h 

Log message:
fix method lookup


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 12:04:33

ports/editors/focuswriter/patches

Update of /cvs/ports/editors/focuswriter/patches
In directory cvs.openbsd.org:/tmp/cvs-serv97182/patches

Log Message:
Directory /cvs/ports/editors/focuswriter/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 12:04:58

Added files:
	editors/focuswriter/patches: 
	                             patch-src_fileformats_rtf_writer_cpp 

Log message:
clang does not get headers for free, be explicit


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 12:18:38

Modified files:
	devel/lam      : Makefile 
	devel/lam/patches: patch-etc_Makefile_in 
	                   patch-share_args_all_opt_c 
Added files:
	devel/lam/patches: patch-config_lam_get_alignment_cache_m4 
	                   patch-config_lam_get_alignment_m4 

Log message:
fix ludicrous configure tests, so run autoconf...
regen other patches.


CVSROOT:	/cvs
Module name:	www
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 12:25:33

Modified files:
	.              : arm64.html 

Log message:
Mention Firefly-RK3399.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 12:42:20

Added files:
	devel/lam/patches: patch-config_cxx_find_template_repository_m4 
	                   patch-mpi2c++_configure 

Log message:
of course there's a 2nd configure deep within with the exact same issue,
and maybe some more...


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/02 13:11:10

Modified files:
	graphics       : Makefile 
Removed files:
	graphics/libdivxdecore: Makefile distinfo 
	graphics/libdivxdecore/patches: patch-src_Makefile_in 
	graphics/libdivxdecore/pkg: DESCR PLIST 

Log message:
Remove graphics/libdivxdecore.

Our libdivxdecore port is from 2001. Upstream (Project Mayo) has been
dead for years, and there are no consumers in the ports tree.

OK sthen@, jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/02 13:14:15

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register removal of libdivxdecore.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/02 13:16:19

Modified files:
	usr.bin/lex    : flex.skl 

Log message:
Update yy_buf_size after yyrealloc().  The fix has been merged
upstream as well.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/02 13:28:25

Modified files:
	devel/simulavr : Makefile distinfo 
	devel/simulavr/patches: patch-configure patch-test_c_Makefile_in 
	devel/simulavr/pkg: PLIST 

Log message:
update to simulavr-0.1.2.7

- remove doxygen as build depend

CONFIGURE_ARGS tweak and ok from jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/02 13:55:23

Modified files:
	www/kore       : Makefile 
Added files:
	www/kore/patches: patch-includes_pgsql_h patch-src_pgsql_c 

Log message:
Fix build errors with Clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/02 14:17:31

Modified files:
	sysutils/pick  : Makefile distinfo 

Log message:
Update pick to 1.6.1.

From maintainer Anton Lindqvist.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/02 14:41:04

Modified files:
	security/keepassxc: Makefile 
	security/keepassxc/pkg: PLIST 

Log message:
security/keepassxc: Enable auto-type

Patch from m.reed <at> excitingdomainname <.> com; Thanks!

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/02 14:43:22

Removed files:
	devel/simulavr/patches: patch-test_c_Makefile_in 

Log message:
Zap patch-test_c_Makefile_in; forgot to remove this patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/02 14:48:21

Modified files:
	editors/scintilla: Makefile 
Added files:
	editors/scintilla/patches: patch-gtk_ScintillaGTK_cxx 

Log message:
Fix build errors with Clang. Patch from scintilla 3.7.4.

OK espie@, naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/02 14:58:42

Log message:
    Import editors/neovim.
    
    ---8<---
    Neovim is a project that seeks to aggressively refactor Vim in order to:
    
    * Simplify maintenance and encourage contributions.
    * Split the work between multiple developers.
    * Enable advanced external UIs without modifications to the core.
    * Improve extensibility with a new plugin architecture.
    --->8---
    
    Tweaks suggested from abieber@ and sthen@.
    
    OK abieber@.
    
    Thanks to upstream for addressing the issues I have been filing over the past
    few months. All tests are now passing.
    
    Status:
    
    Vendor Tag:	edd
    Release Tags:	edd_20170502
    
    N ports/editors/neovim/Makefile
    N ports/editors/neovim/distinfo
    N ports/editors/neovim/patches/patch-cmake_FindLibUV_cmake
    N ports/editors/neovim/pkg/DESCR
    N ports/editors/neovim/pkg/PLIST
    N ports/editors/neovim/pkg/README
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/02 14:59:49

Modified files:
	editors        : Makefile 

Log message:
Link neovim.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/02 15:06:31

Removed files:
	sysutils/gkrellm/gkrellm/patches: patch-server_configure 

Log message:
zap patches/patch-server_configure

ok sthen@ landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 15:06:41

Modified files:
	infrastructure/bin: update-patches 

Log message:
parse and fuzz patches to remove CVS keywords. Yep, we lose lines of context
but patch can cope.
okay sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 15:14:22

Modified files:
	editors/xemacs21/stable: Makefile 
	editors/xemacs21/stable/patches: patch-src_lisp_h 

Log message:
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 15:16:43

Modified files:
	devel/lam/patches: patch-mpi2c++_configure 
Added files:
	devel/lam/patches: patch-config_cxx_have_bool_m4 
	                   patch-config_cxx_have_nothrow_new_m4 
	                   patch-config_cxx_have_true_false_m4 
	                   patch-config_lam_check_bsd43_fd_passing_m4 
	                   patch-config_lam_check_stdc_m4 
	                   patch-config_lam_get_shmmax_m4 
	                   patch-config_lam_mutex_pshared_m4 

Log message:
fix build with clang... fuck autoconf.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 15:24:25

Modified files:
	sys/arch/arm64/arm64: pmap.c 

Log message:
The pmap_vp_enter() function should only ever be called for userland mappings
with the PMAP_CANFAIL flag set.  Use PR_NOWAIT in the pool_get() calls such
that we return an error instead of deadlocking if we cannot allocate
a pool item.

ok drahn@ (who says this is needed for SMP as well)


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 15:38:26

Modified files:
	sys/arch/arm64/arm64: machdep.c 

Log message:
Zap silly diagnostic reboot message.

ok bmercer@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/02 15:39:45

Modified files:
	sys/arch/armv7/armv7: armv7_machdep.c 

Log message:
Zap silly diagnostic reboot message.

ok bmercer@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 16:32:29

Modified files:
	infrastructure/bin: update-patches 

Log message:
warn just once per file


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 16:58:49

Added files:
	databases/gq/patches: patch-src_gq-tab-schema_c 

Log message:
don't even grasp how gcc could ever compile this


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 17:26:32

Modified files:
	games/xevil    : Makefile 
	games/xevil/patches: patch-cmn_game_cpp patch-cmn_game_style_cpp 
	                     patch-cmn_physical_cpp patch-cmn_utils_cpp 
	                     patch-x11_serverping_cpp 
Added files:
	games/xevil/patches: patch-cmn_utils_h 

Log message:
let it build with clang: newer includes, don't warn on xpm (too noisy)
fix nonsense in introduced patches (unsigned intptr_t indeed!)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/02 17:29:11

Modified files:
	games/zoom     : Makefile 

Log message:
old gnu89 inlines


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/02 18:35:40

Modified files:
	.              : errata60.html errata61.html 

Log message:
release dhcpd, vmm, libressl and softraid errata.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/02 19:53:24

Modified files:
	.              : errata61.html 

Log message:
typo: aquiring -> acquiring


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/02 19:58:33

Modified files:
	lib/libc/net   : gai_strerror.3 

Log message:
make the description strings match the code


CVSROOT:	/cvs
Module name:	www
Changes by:	bcook@cvs.openbsd.org	2017/05/02 20:10:12

Modified files:
	libressl       : index.html releases.html 

Log message:
bump for 2.5.4


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/02 20:22:01

Modified files:
	usr.sbin/dhcpd : Tag: OPENBSD_6_1 conflex.c confpars.c dhcp.c 
	                 dhcpd.conf.5 dhcpd.h dhctoken.h 

Log message:
OpenBSD 6.1 errata 001, May 2, 2017

dhcpd(8) unconditionally echoed client identifier. Add parameter
"echo-client-id" to allow this behaviour to be turned off.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/02 20:29:16

Modified files:
	sys/arch/amd64/amd64: Tag: OPENBSD_6_1 fpu.c vmm.c vmm_support.S 
	sys/arch/amd64/include: Tag: OPENBSD_6_1 cpufunc.h fpu.h 
	                        vmmvar.h 

Log message:
OpenBSD 6.1 errata 002, May 2, 2017

vmm(4) mismanaged floating point contexts.


CVSROOT:	/cvs
Module name:	www
Changes by:	beck@cvs.openbsd.org	2017/05/02 20:32:32

Modified files:
	libressl       : index.html 

Log message:
Brent always forgets there are two


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/02 20:36:29

Modified files:
	sys/dev        : Tag: OPENBSD_6_1 softraid_concat.c 

Log message:
OpenBSD 6.1 errata 004, May 2, 2017

softraid(4) was unable to create usable concat volumes because
it always set the size of the volume to zero sectors.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/02 20:43:11

Modified files:
	sys/dev        : Tag: OPENBSD_6_0 softraid_concat.c 

Log message:
OpenBSD 6.0 errata 21, May 1, 2017

softraid(4) was unable to create usable concat volumes because
it always set the size of the volume to zero sectors.


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/05/02 20:43:15

Modified files:
	sys/uvm        : uvm_vnode.c 

Log message:
Mark uvm_sync_lock as vnode'ish for witness purposes, as it is taken
between mount locks and inode locks, which may been recorded in either order

ok visa@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/02 20:47:19

Modified files:
	faq            : faq5.html 

Log message:
use a local .git/config instead of the global ~/.gitconfig

suggested by matthew martin


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/02 21:14:32

Modified files:
	sys/net        : ifq.c ifq.h 

Log message:
add ifq_mfreem() so ifq backends can free packets during dequeue.

a goal of the ifq api is to avoid freeing an mbuf while holding a
lock. to acheive this it allowed the backend enqueue operation to
return a single mbuf to be freed. however, mikeb@ is working on a
backend that wants to free packets during dequeue. to support this,
ifq_mfreem queues a packet during dequeue for freeing at the end
of the ifq serialiser.

there's some doco in ifq.h about it.

requested by mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/02 21:41:09

Modified files:
	sys/net        : ifq.h 

Log message:
update the stack doco to match reality.

i hadnt documented that api changes made to support multiple ifqueues
on a single ifnet.

a glaring omission is doco for if_attach_queues, but that should
go into a manpage for driver writers to read, not internal doco on
the stack.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/02 23:53:34

Modified files:
	usr.bin/tmux   : format.c status.c tmux.1 tmux.h window-copy.c 

Log message:
Add a format for the last search string in copy mode and fix the prompt
so it can work when in -I, suggested by Suraj N Kurapati.


CVSROOT:	/cvs
Module name:	www
Changes by:	mlarkin@cvs.openbsd.org	2017/05/03 00:15:51

Modified files:
	.              : errata61.html 

Log message:
clarify the recent vmm errata was for amd64, not "All Architectures"


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/03 00:32:02

Modified files:
	usr.bin/ssh    : sftp.1 ssh-add.1 ssh-keygen.1 ssh.1 

Log message:
more protocol 1 stuff to go; ok djm


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/03 00:45:48

Modified files:
	sys/dev/pci    : Tag: OPENBSD_6_1 if_ix.c 

Log message:
MFC

Since rev 1.1 ix has attempted to require a 64 bit BAR, the test for
this was wrong and was corrected at the end of last year in rev 1.140.
Before then a 64 bit BAR was not enforced as the test was wrong.

It turns out there exist 82598 parts which have a 32 bit BAR so change
the test to only require a memory BAR and not a 64 bit memory BAR.

Problem reported by Robert Blacquiere. ok mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/05/03 00:56:54

Modified files:
	sys/dev        : audio.c 

Log message:
style improvement from Michael W. Bombardieri <mb at ii.net>


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/05/03 00:58:11

Modified files:
	sys/dev/usb    : uaudio.c 

Log message:
Remove unused (and wrong) uaudio_drain() call. From Michael W.
Bombardieri" <mb@ii.net>.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/03 01:10:37

Modified files:
	devel/nspr/patches: patch-nspr_pr_include_md__openbsd_cfg 
	                    patch-nspr_pr_include_md__openbsd_h 

Log message:
handle aarch64, ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 01:18:50

Modified files:
	x11/qt4/patches: 
	                 patch-src_3rdparty_webkit_Source_JavaScriptCore_wtf_Platform_h 

Log message:
fix build on arm64... for qt4, all arms are 32 bits, sigh.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/03 01:39:55

Modified files:
	net/ocserv     : Makefile distinfo 
	net/ocserv/patches: patch-configure_ac patch-doc_sample_config 
	                    patch-src_occtl_occtl_c 

Log message:
update to ocserv-0.11.8


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/03 02:21:57

Modified files:
	usr.sbin/vmd   : parse.y 

Log message:
Sort parser tokens, no functional change


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/03 02:35:55

Modified files:
	sys/netinet6   : ip6_output.c 

Log message:
Change the ip6_setmoptions() function to receive the rdomain as a new
parameter. This makes the ip6_setmoptions() function look more like the
ipv4 version and fixes a problem with IPV6_JOIN_GROUP when no interface
is specified.

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 02:52:56

Modified files:
	audio/soundtracker: Makefile 

Log message:
just uses gnu inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 02:55:23

Added files:
	devel/distcc/patches: patch-src_access_c 

Log message:
obvious fix for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 03:11:26

Modified files:
	infrastructure/bin: update-patches 

Log message:
need two separate matches if PATCHORIG finishes with .orig!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 03:15:38

Modified files:
	print/transfig : Makefile 
	print/transfig/patches: patch-fig2dev_Imakefile 

Log message:
use system getopt, this allows compile with clang, thus unlocking
GraphicsMagick and friends


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 03:46:40

Added files:
	audio/calf/patches: patch-src_benchmark_cpp 
	                    patch-src_calf_buffer_h 
	                    patch-src_calf_fixed_point_h 
	                    patch-src_calf_giface_h 
	                    patch-src_calf_primitives_h 
	                    patch-src_osctlnet_cpp patch-src_preset_cpp 

Log message:
fix build with clang, you gotta wonder how this ever compiled


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/05/03 03:51:39

Modified files:
	sbin/init      : init.c 
	usr.bin/encrypt: encrypt.c 
	usr.bin/lock   : lock.c 
	usr.bin/skey   : skey.c 
	usr.bin/x99token: x99token.c 
	usr.sbin/tokeninit: tokeninit.c 

Log message:
Use the safe idiom of cleaning sensitive data from memory with explicit_bzero,
instead of relying on other methods, after readpassphrase. Some programs on
this diff won't benefit that much since it happens near the terminal path, but
someone might copy the unsafe idiom to another program and place it where it
may leak sensitive data.

Discussed aeons ago with tb@, OK deraadt@ and beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/03 04:01:44

Modified files:
	usr.bin/ssh    : ssh_config 

Log message:
more protocol 1 bits removed; ok djm


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 05:25:12

Modified files:
	x11/slim       : Makefile 
Added files:
	x11/slim/patches: patch-panel_cpp 

Log message:
Fix pointer < 0 check, fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 05:27:14

Modified files:
	x11/keynav     : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	src
Changes by:	gsoares@cvs.openbsd.org	2017/05/03 05:55:36

Modified files:
	etc            : changelist 
	etc/mtree      : special 

Log message:
add vm.conf to changelist and mtree/special
OK reyk mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/03 05:59:25

Modified files:
	usr.bin/less   : tags.c 

Log message:
While freeing tag entries, make sure to free the copied strings.
From Anton Lindqvist.  OK tobias@ nicm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/03 06:02:06

Modified files:
	devel/py-zopeinterface: Makefile distinfo 

Log message:
update to py-zopeinterface 4.4.0, from Pavel Korovin


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/03 06:07:02

Log message:
    Import py-constantly 15.1.0, from Pavel Korovin
    
    A library that provides symbolic constant support.
    It includes collections and constants with text, numeric, and bit flag values.
    Originally twisted.python.constants from the Twisted project.
    
    ok sthen@
    
    Status:
    
    Vendor Tag:	pkorovin
    Release Tags:	landry_20170503
    
    N ports/devel/py-constantly/Makefile
    N ports/devel/py-constantly/distinfo
    N ports/devel/py-constantly/pkg/DESCR
    N ports/devel/py-constantly/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/03 06:08:12

Modified files:
	devel          : Makefile 

Log message:
+py-constantly{,python3}


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/03 06:26:52

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
- Don't make an empty syspatch/ repo an error; having no available patch
is perfectly legit.
- Abort immediately if we cannot reach our mirror server listed in
installurl.
- Return a proper error code when running without arguments and we cannot
list the available patches.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/03 06:27:00

Modified files:
	sys/arch/sparc64/sparc64: pmap.c 

Log message:
explicitly initialise the mutex in the kernel map.

previously it was zeroed memory from a global, which kind of looks
like a valid mutex, but we shouldnt rely on that.

ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 06:27:21

Modified files:
	graphics/cfdg  : Makefile 

Log message:
fix. Stupid program is stupid. thanks naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 06:32:55

Modified files:
	x11/keynav/patches: patch-keynav_c 

Log message:
Pull bug fix and missing ctype.h include from upstream.

Fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 06:33:12

Modified files:
	x11/keynav     : Makefile 

Log message:
Missed in previous


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 06:44:00

Added files:
	x11/eterm/patches: patch-src_command_c 

Log message:
inline->static inline fix for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 06:50:50

Added files:
	x11/chbg/patches: patch-src_chbg_c 

Log message:
Fix definition of main

Fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 07:50:47

Modified files:
	x11/xgrab/patches: patch-xgrabsc_c 
Added files:
	x11/xgrab/patches: patch-convert_c patch-process_c patch-write_c 
	                   patch-xgrabsc_h patch-xgrabxaw_c 

Log message:
fix enough warnings/errors that this compiles with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/03 08:01:29

Modified files:
	usr.bin/systat : pftop.c 

Log message:
Remove unused PRIO column from the queueing display;  ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/03 08:02:21

Modified files:
	net/libmaxminddb: Makefile distinfo 

Log message:
Update GeoLite2 databases to latest version.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/03 08:53:12

Modified files:
	sys/dev/pci    : if_iwmreg.h 

Log message:
Fix a regression in iwm(4) which made 3165 devices unusable.

When MIMO support was added several entries in the rate table index enum
got a wrong value. On most devices the firmware ended up using a Tx rate
different from the rate net80211 asked for (which is bad, but not fatal).
But on 3165 devices which do not support MIMO the firmware rightly raised
a fatal error whenever the driver mistakenly asked for a MIMO Tx rate.

Reported by Georgios Pediaditis, Steve Throckmorton, and Kai Wirt on misc@
Thanks to benno@ for providing 3165 hardware I could use to debug this.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 08:57:52

Modified files:
	x11/xgrab      : Makefile 
	x11/xgrab/patches: patch-process_c patch-xgrabsc_h 

Log message:
more cleanup: add prototypes for functions.
prevent segfault on 24 bits visuals.


CVSROOT:	/cvs
Module name:	www
Changes by:	juanfra@cvs.openbsd.org	2017/05/03 09:29:36

Modified files:
	.              : want.html donations.html 

Log message:
Arnaud Assad sent me a X61s (and the 4.4 BSD book).


CVSROOT:	/cvs
Module name:	src
Changes by:	gerhard@cvs.openbsd.org	2017/05/03 09:32:31

Modified files:
	sys/dev/usb    : if_umb.c 

Log message:
Byte order of IP addresses was broken on big endian machines.
MBIM already uses network byte order for IP addresses, so just
use them as they are.

ok stsp@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/03 09:49:10

Modified files:
	lib/libutil    : imsg_init.3 

Log message:
spacing (in EXAMPLES code)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 09:54:59

Modified files:
	x11            : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
kill xgrab. it not longer segfaults, but it's still darn useless
okay naddy@, sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 09:55:54

Removed files:
	x11/xgrab      : Makefile distinfo 
	x11/xgrab/patches: patch-Imakefile patch-convert_c 
	                   patch-process_c patch-write_c patch-xgrabsc_c 
	                   patch-xgrabsc_h patch-xgrabxaw_c 
	x11/xgrab/pkg  : DESCR PLIST 

Log message:
erase the port itself, already unlinked and quirked


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/03 10:20:01

Modified files:
	net            : Makefile 
Removed files:
	net/quirc      : Makefile distinfo 
	net/quirc/patches: patch-Makefile.in patch-data_Makefile_in 
	                   patch-doc_Makefile_in patch-format_cc 
	                   patch-servertcl_cc patch-tcl_cc 
	net/quirc/pkg  : DESCR PLIST 

Log message:
Remove net/quirc.

Our quirc port is from 2004, and there is no upstream anymore.

There are plenty of choices regarding maintained IRC clients in the
ports tree.

OK jca@, landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/03 10:21:09

Modified files:
	x11/kde4/nepomuk-core: Makefile 
	x11/kde4/runtime: Makefile 

Log message:
disable doxygen as build depend in KDE4

- survived a bulk, thanks ajacoutot@

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/03 10:24:07

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register removal of quirc.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/03 11:23:34

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Output explicit error messages for:
- trying to install files mounted on a remote FS (diskless clients etc.)
- read-only FS
- not enough space on FS

These were all properly catched before (syspatch would refuse to do anything)
but the error message was a bit cryptic.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/03 11:32:23

Modified files:
	lang/vala      : Makefile distinfo 

Log message:
update to vala-0.36.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/03 11:34:04

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to p5-SVG-2.72


CVSROOT:	/cvs
Module name:	ports
Changes by:	phessler@cvs.openbsd.org	2017/05/03 11:42:02

Modified files:
	textproc/pdfpc : Makefile 
	textproc/pdfpc/pkg: PLIST 

Log message:
fix the location where man pages are installed

OK jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 11:51:26

Modified files:
	x11/afterstep  : Makefile 
Added files:
	x11/afterstep/patches: patch-libAfterBase_asvector_c 
	                       patch-libAfterBase_asvector_h 
	                       patch-libAfterBase_parse_h 
	                       patch-libAfterBase_socket_c 
	                       patch-libAfterStep_colorscheme_c 
	                       patch-libAfterStep_functions_h 
	                       patch-libAfterStep_mylook_c 
	                       patch-libAfterStep_mylook_h 
	                       patch-src_afterstep_asinternals_h 
	                       patch-src_afterstep_misc_c 

Log message:
Drop "inline" or move to "static inline" to fix clang build


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/03 11:51:57

Modified files:
	sys/sys        : mbuf.h 

Log message:
Provide a signed 64 bit integer timestamp in the mbuf packet header

The precision of the timestamp is not fixed yet, but there's a strong
argument to measure it in nanoseconds.

With suggestions from kettenis, dlg, miod and deraadt.
OK deraadt@, sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 11:59:02

Added files:
	x11/wmi/patches: patch-src_action_cpp 

Log message:
Missing include for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 12:05:38

ports/x11/wbar/patches

Update of /cvs/ports/x11/wbar/patches
In directory cvs.openbsd.org:/tmp/cvs-serv69202/patches

Log Message:
Directory /cvs/ports/x11/wbar/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 12:06:40

Added files:
	x11/wbar/patches: patch-src_Makefile_in 

Log message:
-Werror considered harmful


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 12:10:07

Added files:
	x11/treewm/patches: patch-src_tile_cc 

Log message:
Needs ctsdlib


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 12:17:19

Modified files:
	x11/wminfo     : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 12:26:53

Added files:
	x11/wminfo/patches: patch-wmgeneral_list_h 

Log message:
Drop silly inline decls, fix build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/03 12:36:05

Modified files:
	audio/libsidplay: Makefile 
	audio/sidplay  : Makefile 
	devel/asm6     : Makefile 
	net/nsping     : Makefile 
	audio/morseplayer: Makefile 
	games/xlife    : Makefile 

Log message:
Switch ports using MASTER_SITE_OPENBSD to a new MASTER_SITES.

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 12:41:29

Modified files:
	x11/wmtime     : Makefile 
	x11/wmitime    : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 13:18:27

Added files:
	x11/wmitime/patches: patch-wmgeneral_list_h 

Log message:
Drop useless "inline", fixes clang builds


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 13:29:25

Modified files:
	x11/wmtz       : Makefile 

Log message:
Respect CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 13:29:45

Added files:
	x11/wmtz/patches: patch-wmgeneral_list_h 

Log message:
Drop useless "inline"; fixes clang builds


CVSROOT:	/cvs
Module name:	ports
Changes by:	ratchov@cvs.openbsd.org	2017/05/03 13:38:16

Modified files:
	audio/midish   : Makefile distinfo 
	audio/midish/pkg: DESCR PLIST 

Log message:
update to 1.2.0

ok (and tweaks) from bentley@, jca@ and sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/03 13:54:23

Added files:
	www/dansguardian/patches: patch-src_BaseSocket_hpp 

Log message:
Missing include for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/03 13:58:12

Modified files:
	sys/netinet    : tcp_input.c 

Log message:
Back out rev 1.185 (which made the code match the comment) and
adjust the comment to match reality (or at least rfc7323) instead.
This brings us back in line with the behavior of Net and Free.
From Lauri Tirkkonen.  OK bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/03 14:20:42

Modified files:
	net/isc-bind   : Makefile distinfo 
	net/isc-bind/patches: patch-bin_dig_dig_c 
	                      patch-bin_dig_nslookup_c 
	                      patch-lib_isc_unix_net_c 
	                      patch-lib_isc_unix_socket_c 
	net/isc-bind/pkg: PLIST 

Log message:
update to BIND 9.10.5


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/03 14:55:29

Modified files:
	sys/net        : ifq.c ifq.h 

Log message:
Provide a function to dispose of a list of mbufs on dequeue

ifq_mfreeml() is similar to the ifq_mfreem(), but takes an mbuf list
as an argument.  This also lets these functions subtract the number
of packets to be disposed of from the ifq length.

OK dlg


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/03 15:08:09

Modified files:
	usr.bin/ssh    : clientloop.c kex.h opacket.h packet.c packet.h 
	                 pathnames.h ssh.h ssh_config.5 sshkey.h 

Log message:
remove miscellaneous SSH1 leftovers; ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/03 15:49:18

Modified files:
	usr.bin/ssh    : scp.1 sftp.1 ssh.1 ssh_config.5 

Log message:
restore mistakenly deleted description of the ConnectionAttempts option
ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/03 16:35:49

Modified files:
	sys/arch/arm64/arm64: machdep.c 

Log message:
Bring boot() in line with our other architectures.

ok mpi@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/03 16:57:10

Modified files:
	devel/mercurial: Makefile distinfo 
	devel/mercurial/pkg: DESCR-main PLIST-main 
Added files:
	devel/mercurial/patches: patch-tests_test-clonebundles_t 

Log message:
Update to mercurial 4.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/03 17:03:44

Modified files:
	devel/py-hg-git: Makefile distinfo 
Removed files:
	devel/py-hg-git/patches: patch-hggit_overlay_py 

Log message:
Update to hg-git 0.8.6. Fix the problem with https:// repos after the
update to mercurial 4.1 and 4.2. Maintainer timeout.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/03 17:22:19

Modified files:
	sysutils/flashrom: Makefile 

Log message:
some configury hidden inside the Makefile uses -Werror... on libusb1
headers, which are not really clean (uses bad preprocessor magic), so
to detect it and finish building with clang, turning off -Werror is
the simplest way.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/03 19:33:21

Modified files:
	usr.bin/ssh    : cipher.c cipher.h 

Log message:
another tentacle: cipher_set_key_string() was only ever used for SSHv1


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/04 00:10:57

Modified files:
	usr.bin/ssh    : authfd.c ssh-add.c 

Log message:
since a couple of people have asked, leave a comment explaining why we
retain SSH v.1 support in the "delete all keys from agent" path.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 00:51:09

Modified files:
	print/ghostscript/gnu: Makefile 
Added files:
	print/ghostscript/gnu/patches: patch-psi_zfrsd_c 
	                               patch-psi_zmisc3_c 

Log message:
Fix CVE-2017-8291 shell injection in ghostscript.
Apply patches from upstream git.
OK kili@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/04 00:54:28

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-154.0.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/04 01:16:43

Modified files:
	usr.bin/tmux   : cmd-switch-client.c control-notify.c notify.c 
	                 session.c tmux.1 tmux.h window.c 

Log message:
Some new notifications, mainly for active pane and current window and
session:

pane-mode-changed
window-pane-changed
client-session-changed
session-window-changed

From Joshua Brot.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/04 02:26:06

Modified files:
	usr.sbin/vmd   : config.c parse.y priv.c vm.conf.5 vmd.c vmd.h 

Log message:
Add support for rdomains.

This allows to configure VM interfaces and switches in individual rdomains.

OK mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/04 03:03:42

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
If iwm_nic_lock() cannot access the device then print "acquiring device failed"
instead of "device timeout". The latter is printed by the Tx watchdog already.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/04 03:33:28

Modified files:
	emulators/fuse : Makefile distinfo 

Log message:
Update fuse to 1.3.5.

OK benoit@


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/04 04:38:58

Modified files:
	faq            : upgrade61.html 

Log message:
Mention another tomcat breaking change in a minor release and show a way
to workaround it (via rc/tomcat_flags) if necessary.  ok tb@

I don't like putting these in upgradeXX.html, but like some others (e.g.
the xml inclusion changes in 7.0.52) these aren't getting mentioned in
upstream's "noteable changes" on the migration page where breaking
changes are listed, and are hard to spot in changelog, plus the actual
method to specify system parameters is system-dependent.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/04 05:13:52

Modified files:
	devel/doc++    : Makefile 
	devel/doc++/pkg: PLIST 
	fonts/ru-pscyr : Makefile 
	fonts/ru-pscyr/pkg: PLIST 
	graphics/asymptote: Makefile 
	graphics/asymptote/pkg: PLIST 
	math/R         : Makefile 
	math/R/pkg     : PLIST 
	print/foiltex  : Makefile 
	print/foiltex/pkg: PLIST 
	print/texinfo  : Makefile 
	print/texinfo/pkg: PLIST 
	textproc/latex2html: Makefile 
	textproc/latex2html/pkg: PLIST 
	textproc/lgrind: Makefile 
	textproc/lgrind/pkg: PLIST 
	education/verbiste: Makefile 
	education/verbiste/pkg: PLIST 

Log message:
Unify usage of mktexlsr across the ports tree.

Also add a missing RUN_DEPEND to fonts/pscyr. Found during testing.

Raised, input from, and OK, sthen@, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 05:21:37

Modified files:
	infrastructure/man/man1: update-patches.1 

Log message:
document current


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/04 05:31:45

Modified files:
	lib/libtls     : tls_internal.h 

Log message:
Move tls_config_skip_private_key_check() out from under HIDDEN_DECLS.
Even though this is not a real public interface we need the symbol in
the shared library so that relayd can use it (needed for TLS key privsep)
OK beck@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 05:46:39

Added files:
	graphics/gimp/stable/patches: patch-app_Makefile_in 

Log message:
clang doesn't pass -u thru. Fixes build


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 05:48:49

Modified files:
	graphics/gimp/stable/patches: patch-etc_Makefile_in 
	                              patch-plug-ins_common_Makefile_in 

Log message:
regen old patches


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/04 05:54:40

Modified files:
	faq            : upgrade61.html 

Log message:
whitespace


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 06:13:58

Added files:
	archivers/lzip/plzip/patches: patch-list_cc 

Log message:
missing include, get pthread types


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/04 06:28:14

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Expand comment and bump copyright while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/04 06:36:13

Modified files:
	usr.bin/openssl: ca.c 

Log message:
Fix the ca command so that certs it generates have RFC5280 conformant time.
Problem noticed by Harald Dunkel <harald.dunkel@aixigo.de>


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/04 06:50:37

Modified files:
	x11/treewm     : Makefile 

Log message:
Respect CC/CFLAGS


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 06:58:04

Added files:
	audio/audacity/patches: 
	                        patch-lib-src_libnyquist_nyquist_ffts_src_fftlib_c 

Log message:
convert to C99 inlines, trivial, fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/04 07:14:02

Added files:
	x11/treewm/patches: patch-xprop_dsimple_c 

Log message:
Include stdlib.h, better than conflicting/missing decls


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/04 07:14:56

Modified files:
	x11/treewm     : Makefile 
Added files:
	x11/treewm/patches: patch-xprop_xprop_c 

Log message:
Fix build with clang, declare void functions as such.

Reminded by espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/04 07:32:00

Modified files:
	security/keychain: Makefile distinfo 

Log message:
update to keychain-2.8.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 07:55:32

Modified files:
	chinese/crxvt  : Makefile 
Added files:
	chinese/crxvt/patches: patch-src_utmp_c 

Log message:
simplify substitutions and prevent them from interfering with update-patches
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 07:56:58

Modified files:
	audio/lmms/files: AudioSndio.cpp 

Log message:
fix bug: abs(unsigned - unsigned)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 07:57:28

Added files:
	audio/lmms/patches: 
	                    patch-plugins_zynaddsubfx_LocalZynAddSubFx_cpp 
	                    patch-plugins_zynaddsubfx_src_Effects_Alienwah_cpp 
	                    patch-src_tracks_InstrumentTrack_cpp 

Log message:
fix build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/04 07:59:25

Modified files:
	sys/netinet6   : mld6.c 

Log message:
Reset the MLD default ip6_opts by using ip6_initpktopts(). This fixes a
problem with MLD packets being sent with hlim set to zero.

with suggestion from and ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 08:02:00

Modified files:
	comms/gmfsk    : Makefile 

Log message:
requires gnu89 inline semantics


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 08:21:34

Modified files:
	comms/pilot-link/patches: patch-configure 

Log message:
remove very old unneeded configure change which breaks clang


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 08:23:00

Modified files:
	usr.bin/netstat: inet.c 

Log message:
For TCP sockets netstat -A must print the address of the TCP protocol
control block.  This is documented in fstat(1) and makes it possible
to compare the values from both tools.
OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 08:42:13

ports/converters/lastools/patches

Update of /cvs/ports/converters/lastools/patches
In directory cvs.openbsd.org:/tmp/cvs-serv66542/patches

Log Message:
Directory /cvs/ports/converters/lastools/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 08:42:42

Added files:
	converters/lastools/patches: patch-LASzip_src_lasindex_cpp 
	                             patch-LASzip_src_lasinterval_cpp 

Log message:
figure out unordered_map location in a portble way (patch upstreamed)


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 09:00:24

Modified files:
	sys/net        : bpf.c bridgectl.c if.c if_dl.h if_gif.c 
	                 if_mpe.c if_mpw.c if_pppx.c if_vxlan.c pf.c 
	                 pipex.c pipex_local.h 
	sys/netinet    : in.c in.h ip_ipip.c tcp_subr.c 
	sys/netinet6   : in6.c in6.h 
	sys/sys        : socket.h 

Log message:
Introduce sstosa() for converting sockaddr_storage with a type safe
inline function instead of casting it to sockaddr.  While there,
use inline instead of __inline for all these conversions.  Some
struct sockaddr casts can be avoided completely.
OK dhill@ mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 09:08:21

Modified files:
	databases/pkglocatedb: Makefile 
	databases/pkglocatedb/files: pkg_locate.1 

Log message:
typo in manpage


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 09:19:01

Modified files:
	sys/dev/isa    : gus.c 

Log message:
Remove side effects from assignment.  Fixes warning with cppcheck.
No binary change.
OK ratchov@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 09:20:24

Modified files:
	lang/python/2.7: Makefile 
	lang/python/2.7/patches: patch-configure_ac 

Log message:
tweak generated includes so that C++ extensions compile with clang.
- we don't have xlocale
- so we use __bsd_locale_fallbacks_h, yes even for #include <iostream>
- that depends on mbsnrtowcs and wcsnrtombs  from wchar.h
- those require __POSIX_VISIBLE to be >= 200809...

bump accordingly. tested by naddy@, no breakage on gcc platforms.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 09:30:18

Modified files:
	audio/libcanberra/files: sndio.c 

Log message:
convert to double before -, because otherwise unsigned - unsigned


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 09:30:44

Modified files:
	x11/kde/arts3/files: audioiosndio.cc 

Log message:
fix unsigned-unsigned


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 09:32:31

Modified files:
	converters/p5-Cpanel-JSON-XS: Makefile distinfo 

Log message:
update p5-Cpanel-JSON-XS to 3.0233


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 09:46:56

Modified files:
	converters/mimepp: Makefile 
Added files:
	converters/mimepp/patches: patch-body_cpp patch-bodypart_cpp 
	                           patch-dw_cte_cpp patch-field_cpp 
	                           patch-headers_cpp patch-mailbox_cpp 
	                           patch-mboxlist_cpp patch-mediatyp_cpp 
	                           patch-mimepp_field_h 
	                           patch-mimepp_fieldbdy_h 
	                           patch-mimepp_headers_h 
	                           patch-mimepp_string_h 
	                           patch-msgcmp_cpp patch-proto_un_cpp 
	                           patch-string_cpp patch-token_cpp 

Log message:
cleans surprisingly well for something that includes iostream.h
builds with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/04 09:59:39

Modified files:
	usr.sbin/config: config.8 

Log message:
Document that -u wants to read from /dev/mem, so it needs kern.allowkmem=1.
Problem reported by jdd () cs ! toronto ! edu on bugs.

ok brynet deraadt jmc


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 10:13:43

Modified files:
	devel/blame    : Makefile 
	devel/blame/patches: patch-configure 

Log message:
enforce gnu89-inline, regen patch


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/04 10:43:29

Modified files:
	build          : mirrors.dat 

Log message:
add https://ftp.rnl.tecnico.ulisboa.pt/pub/OpenBSD/, from André Aparício


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/04 10:43:40

Modified files:
	.              : ftp.html ftplist httpslist 
	openbgpd       : ftp.html 
	openssh        : ftp.html portable.html 
	openntpd       : portable.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 10:44:05

Added files:
	devel/ddd/patches: patch-ddd_LabelH_C patch-ddd_VSLDefList_C 
	                   patch-ddd_my-dirent_h patch-ddd_strclass_h 

Log message:
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/04 10:52:10

Modified files:
	databases/mysql-utilities: Makefile distinfo 

Log message:
bugfix update to 1.6.5


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/04 10:54:41

Modified files:
	usr.sbin/vmd   : control.c 
	usr.sbin/vmctl : main.c 

Log message:
Report error for vmctl commands that need root privileges.

specifically: vmctl (load|reload|reset|log)

Reported by Christian Barthel


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 10:58:49

Added files:
	devel/grcs/patches: patch-src_base_h 

Log message:
_Noreturn is old gcc only, we use __dead instead. fixes clang build


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 11:15:49

Added files:
	devel/liboil/patches: patch-liboil_amd64_wavelet_c 

Log message:
fix asm constraint for clang, stolen from FreeBSD


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/04 11:29:15

Modified files:
	www/piwik      : Makefile distinfo 
	www/piwik/pkg  : PLIST 

Log message:
Major update to 3.0.3


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/04 11:48:24

Modified files:
	usr.bin/mandoc : man_html.c man_macro.c man_term.c 
	                 man_validate.c mandocdb.c mdoc_argv.c 
	                 mdoc_html.c mdoc_macro.c mdoc_man.c 
	                 mdoc_markdown.c mdoc_state.c mdoc_term.c 
	                 mdoc_validate.c roff.c roff.h 
	regress/usr.bin/mandoc/eqn/define: infinite.out_lint 
	                                   invalid.out_lint 
	regress/usr.bin/mandoc/eqn/over: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Pp: arg.out_lint 
	regress/usr.bin/mandoc/roff/cond: close.out_lint if.out_lint 
	regress/usr.bin/mandoc/roff/de: escname.out_lint indir.out_lint 
	regress/usr.bin/mandoc/roff/ig: basic.out_lint 
	regress/usr.bin/mandoc/roff/it: badarg.out_lint 
	regress/usr.bin/mandoc/roff/tr: args.out_lint 
	regress/usr.bin/mandoc/tbl/data: block_unclosed.out_lint 
	                                 empty.out_lint 

Log message:
Parser reorg:
Generate the first node on the roff level: .br
Fix some column numbers in diagnostic messages while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/04 11:57:56

Added files:
	sys/net        : fq_codel.c fq_codel.h 

Log message:
Implementation of the Flow Queue - Controlled Delay (FQ-CoDel)

The purpose of FQ-CoDel is to provide fair sharing of bandwidth
between simultaneous connections and reduce latency differences
among them.

OK mpi, sthen, visa


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 11:58:46

Modified files:
	sys/net        : if_etherip.c 
	sys/netinet    : igmp.c ip_carp.c ip_gre.c ip_icmp.c ip_ipip.c 
	                 tcp_input.c udp_usrreq.c 
	sys/netinet6   : icmp6.c 

Log message:
If m is not a continuous mbuf cluster, m_pullup() in pr_input may
change the pointer.  Then *mp keeps the invalid pointer and it might
be used.  Fix the potential use after free and also reset *mp in
other places to have less dangling pointers to freed mbufs.
OK mpi@ mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 12:01:19

Modified files:
	devel/libvmime : Makefile 
	devel/libvmime/patches: patch-vmime_utility_smartPtrInt_hpp 
Added files:
	devel/libvmime/patches: patch-vmime_address_hpp 
	                        patch-vmime_base_hpp 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/04 13:04:23

Modified files:
	www/chromium   : Makefile distinfo 
	www/chromium/patches: 
	                      patch-ui_message_center_message_center_style_h 

Log message:
update to 58.0.3029.96


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 13:14:00

Modified files:
	editors/beav   : Makefile 
	editors/beav/patches: patch-tcap_c 
Added files:
	editors/beav/patches: patch-buffer_c patch-prototyp_h 

Log message:
fix build with clang.
also fixes up prototypes that don't match K&R declarations


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 13:22:03

Modified files:
	editors/tea    : Makefile 
	editors/tea/patches: patch-src_tea_config_c 
Added files:
	editors/tea/patches: patch-src_image_browser_c 
	                     patch-src_rox_strings_c 
	                     patch-src_tea_text_document_c 

Log message:
consistent return values. Fixes clang


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/04 13:41:58

Modified files:
	usr.sbin/vmctl : main.c 
	usr.sbin/vmd   : control.c vmd.c vmd.h 

Log message:
Report command failure back to vmctl reload, reset, load, log verbose.

OK mlarkin@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 13:45:28

Modified files:
	education/drgeo/patches: patch-geo_drgeo_figure_cc 
Added files:
	education/drgeo/patches: patch-geo_drgeo_dialog_cc 

Log message:
anonymous structs can't have extern linkage in modern C++.
fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 13:53:43

Added files:
	emulators/dosbox/patches: patch-src_gui_sdlmain_cpp 

Log message:
fix build with clang (ordered ptr comparison)
and a printf(string) while there


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 13:59:37

Added files:
	emulators/x48/patches: patch-src_debugger_c patch-src_emulate_c 
	                       patch-src_x48_x11_c 

Log message:
fix type of function, handle inline correctly


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 14:04:44

Added files:
	games/agm/patches: patch-agm_h patch-wordfuncs_c 

Log message:
let it build with clang, remove a few warnings


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 14:09:31

Modified files:
	games/allegro  : Makefile 

Log message:
assert gnu89-inline semantics


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 14:25:51

Added files:
	print/cups-bjnp/patches: patch-bjnp-commands_c 

Log message:
test makes no sense, clang flags it as tautological.
-Werror -> boom


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 14:40:34

Added files:
	games/amoebax/patches: patch-src_AIPlayerFactory_h 
	                       patch-src_AdvancedAIPlayer_h 
	                       patch-src_Music_cxx 
	                       patch-src_PauseState_h 
	                       patch-src_TrainingState_h 
	                       patch-src_TryAgainState_h 
	                       patch-src_binreloc_cxx 

Log message:
fix build with clang and a lot of warnings


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/04 14:41:10

Modified files:
	lib/libc/gen   : sysctl.3 
	sbin/sysctl    : sysctl.8 

Log message:
Merge headers defining identifiers from sysctl.8 into sysctl.3. Shorten and
update their descriptions. In sysctl.8 refer to /etc/sysctl.conf in FILES.

discussed with and ok jmc


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/04 14:51:51

Modified files:
	sys/arch/arm64/arm64: cpu.c 

Log message:
Recognize various Cavium ThunderX cores.

ok patrick@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 14:52:00

Added files:
	games/armagetronad/patches: patch-src_network_nNetObject_cpp 
	                            patch-src_tools_tResourceManager_cpp 

Log message:
pointers comparisons


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 14:57:05

Modified files:
	games/blobwars/patches: patch-makefile 

Log message:
-Werror is sooo dependent upon the specific compiler


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 15:06:43

Modified files:
	games/bomberclone: Makefile 

Log message:
-Werror considered harmful, and assert gnu89-inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 15:23:30

Added files:
	games/brumbrumrally/patches: patch-src_Menu_cpp 
	                             patch-src_hqx_common_h 

Log message:
fixes for clang.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/04 15:24:19

Modified files:
	sys/arch/octeon/conf: RAMDISK GENERIC 

Log message:
enable brgphy, which appears in the edgerouter pro


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 15:38:05

Added files:
	games/bzflag/patches: patch-include_VotingArbiter_h 

Log message:
clang nitpicky


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 15:40:20

ports/games/chroma/patches

Update of /cvs/ports/games/chroma/patches
In directory cvs.openbsd.org:/tmp/cvs-serv1808/patches

Log Message:
Directory /cvs/ports/games/chroma/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 15:40:48

Modified files:
	games/chroma   : Makefile 
Added files:
	games/chroma/patches: patch-xor_c 

Log message:
fix it for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 16:03:30

Modified files:
	games/allegro  : Makefile 

Log message:
configure contains a strange test that fails on clang, and creates a bogus
allegro-config... just work around the test by asserting the correct answer


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/04 16:07:44

Modified files:
	usr.bin/mandoc : Makefile html.h man_html.c man_term.c 
	                 mdoc_html.c mdoc_term.c term.h 
Added files:
	usr.bin/mandoc : roff_html.c roff_term.c 

Log message:
Start roff formatter modules for HTML and termininal output,
used by both the mdoc and man formatters, with the ultimate
goal of reducing code duplication between the two macro formatters.
Made possible by the parser unification.
Add the first formatting function (for the .br request).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 16:09:02

ports/games/chromium-bsu/patches

Update of /cvs/ports/games/chromium-bsu/patches
In directory cvs.openbsd.org:/tmp/cvs-serv17244/patches

Log Message:
Directory /cvs/ports/games/chromium-bsu/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 16:09:18

Added files:
	games/chromium-bsu/patches: patch-src_MainSDL_Event_cpp 

Log message:
fix clang, missing include


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/04 16:10:39

Modified files:
	regress/sys/netinet/ipsec: Makefile ipsec.conf 

Log message:
Add IPsec test for manually configured SA bundles.  That does ipcomp,
and esp, and ah with one flow and three SAs in one step.  Test
transport mode, locally terminated tunnel and forwarding packets
from and to tunnel.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/04 16:47:27

Modified files:
	sys/arch/octeon/dev: amdcf.c octcf.c 
	sys/arch/sparc64/dev: fd.c 
	sys/dev        : flash.c 
	sys/dev/ata    : wd.c 
	sys/dev/isa    : fd.c 
	sys/kern       : subr_disk.c 
	sys/scsi       : cd.c sd.c 
	sys/sys        : disk.h 

Log message:
Also pass the blk offset to disk_unbusy(), so that it can pass it to
the random subsystem as entropy.  This value is pretty much unknown,
and anyways our entropy input ring does not saturate from knowns.
ok mikeb djm


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 16:59:23

Added files:
	games/enigma/patches: patch-lib-src_enigma-core_ecl_alist_hh 
	                      patch-lib-src_enigma-core_ecl_dict_hh 
	                      patch-src_lua_cc 

Log message:
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 17:00:16

Added files:
	games/enigma/patches: patch-lib-src_lua_tolua++_h 
	                      patch-lib-src_lua_tolua_is_c 
	                      patch-lib-src_lua_tolua_map_c 

Log message:
fix warnings due to "" -> char* conversion


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 17:00:48

Modified files:
	games/enigma   : Makefile 
Added files:
	games/enigma/patches: patch-lib-src_enigma-core_ecl_font_cc 
	                      patch-src_lev_PersistentIndex_cc 
	                      patch-src_stones_complex_cc 

Log message:
fix a few obvious typos found by clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/04 17:40:29

Modified files:
	infrastructure/lib/DPB: Engine.pm 

Log message:
my bad, line at end of summary


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/04 20:06:17

Modified files:
	usr.bin/mandoc : Makefile man_html.c man_macro.c man_term.c 
	                 man_validate.c mdoc_html.c mdoc_man.c 
	                 mdoc_markdown.c mdoc_term.c mdoc_validate.c 
	                 roff.c roff.h roff_html.c roff_term.c 
	regress/usr.bin/mandoc/roff/ft: Makefile 
Added files:
	usr.bin/mandoc : roff_validate.c 
	regress/usr.bin/mandoc/roff/ft: badargs-mdoc.in 
	                                badargs-mdoc.out_ascii 
	                                badargs-mdoc.out_lint 

Log message:
Move handling of the roff(7) .ft request from the man(7)
modules to the new roff(7) modules.  As a side effect,
mdoc(7) now handles .ft, too.  Of course, do not use that.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/04 20:12:39

Modified files:
	lib/libc/sys   : sigprocmask.2 

Log message:
Mention that the signal mask does not affect what signals are
discarded by the kernel.  Document that at least one pending signal
will be delivered before sigprocmask() returns.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/04 20:31:23

Modified files:
	share/man/man7 : man.7 mdoc.7 roff.7 

Log message:
Clean up docs after today's .br and .ft code cleanup; simpler.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/04 22:10:48

Modified files:
	devel/nagelfar : Makefile distinfo 
	devel/nagelfar/patches: patch-lib_textsearch_examples_demo_tcl 
	                        patch-nagelfar_tcl 
	devel/nagelfar/pkg: PLIST 

Log message:
Update to 1.2.5.
Install textsearch in the right place.
Better patches. Less file shenanigans.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/04 22:23:38

Modified files:
	databases/sqlite3-tcl: Makefile distinfo 
	databases/sqlite3-tcl/pkg: PLIST 
Added files:
	databases/sqlite3-tcl/patches: patch-tea_configure 

Log message:
Update to 3.17.0.
Don't treat loadable lib as linkable lib.
Take maintainership.

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/04 23:11:25

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/05 01:25:59

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.46.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/05 01:26:11

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.83.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/05 01:46:59

Modified files:
	sys/arch/amd64/amd64: vmm.c 
	sys/arch/amd64/include: vmmvar.h 

Log message:
Allow setting guest %xcr0 from vmd(8).

Tested on linux and amd64 OpenBSD guests.

Posted to tech by Pratik Vyas.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/05 01:48:02

Modified files:
	usr.sbin/vmd   : vm.c 

Log message:
Allow vmd(8) to set guest %xcr0

Usermode part of previous vmm(4) diff.

Posted to tech by Pratik Vyas


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/05 02:07:36

Modified files:
	usr.sbin/syspatch: syspatch.8 syspatch.sh 

Log message:
Add a `-R' switch that reverts all patches.

prodded by deraadt@
knobs sorting input jmc@
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/05/05 02:09:55

ports/x11/paper-gtk-theme/patches

Update of /cvs/ports/x11/paper-gtk-theme/patches
In directory cvs.openbsd.org:/tmp/cvs-serv59656/patches

Log Message:
Directory /cvs/ports/x11/paper-gtk-theme/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/05/05 02:10:32

Modified files:
	x11/paper-gtk-theme: Makefile 
	x11/paper-gtk-theme/pkg: PLIST 
Added files:
	x11/paper-gtk-theme/patches: patch-Add_GTK-3.22_theme 

Log message:
Backport a diff to support Gtk-3.22 and remove its warnings.

ok ajacoutot@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/05 02:58:02

Modified files:
	mail/rspamd    : Makefile distinfo 

Log message:
update to rspamd-1.5.7, upstream switched to github for distfiles


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/05 03:37:13

Modified files:
	net/librenms   : Makefile 
	net/librenms/patches: patch-html_pages_about_inc_php 
	                      patch-includes_common_php 

Log message:
fix version display on librenms' "about" page


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/05/05 04:21:47

Modified files:
	lang/luajit    : Makefile distinfo 
	lang/luajit/patches: patch-Makefile patch-etc_luajit_pc 
	                     patch-src_Makefile 
	                     patch-src_host_buildvm_asm_c 
	                     patch-src_lj_arch_h patch-src_luaconf_h 

Log message:
update to LuaJIT 2.0.5

Major on the library gets cranked as it removes
luaJIT_version_2_0_4
and adds
luaJIT_version_2_0_5

Tested by sthen@ with rspamd. ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/05 04:41:58

Modified files:
	usr.bin/ssh    : ssh-add.1 ssh-keygen.1 ssh.1 

Log message:
remove superfluous protocol 2 mentions; ok jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/05 04:42:49

Modified files:
	usr.bin/ssh    : authfd.c authfd.h pathnames.h ssh-add.c 
	                 sshconnect2.c 

Log message:
more simplification and removal of SSHv1-related code; ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/05/05 04:49:28

Modified files:
	sysutils/dtb   : Makefile distinfo 
	sysutils/dtb/pkg: PLIST 

Log message:
update dtb to linux 4.11

Switch from using ports gcc to clang.  Base gcc can't be used as the
preprocessor doesn't handle '#' not being in the first column.

Problem in initial patch spotted by and ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/05 05:04:18

Modified files:
	sys/net        : pfkeyv2.c pfkeyv2_convert.c 
	sys/netinet    : ip_ipsp.c ipsec_input.c 

Log message:
Expand SA_LEN(), there is no benefit for using the macro in the
kernel.  It was only used in IPsec sources.  No binary change
OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/05 05:26:36

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
add Moxa CP-104EL


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/05 05:27:00

Modified files:
	sys/dev/pci    : pcidevs.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/05 05:28:48

Modified files:
	sys/dev/usb    : usbdi.c 

Log message:
Remove a DIAGNOSTIC test for a NULL pipe value inside a transfer,
mpi says a transfer can't exist without a pipe.  ok mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/05 05:40:29

Modified files:
	lang/rust      : Makefile distinfo 
	lang/rust/patches: patch-src_bootstrap_lib_rs 
	                   patch-src_bootstrap_step_rs 
	lang/rust/pkg  : PFRAG.amd64-main PFRAG.i386-main PLIST-doc 
Added files:
	lang/rust/patches: patch-src_tools_compiletest_src_main_rs 
Removed files:
	lang/rust/patches: patch-src_bootstrap_native_rs 
	                   patch-src_llvm_cmake_modules_AddLLVM_cmake 
	                   patch-src_llvm_include_llvm_ExecutionEngine_RTDyldMemoryManager_h 
	                   patch-src_llvm_include_llvm_Support_Threading_h 
	                   patch-src_llvm_lib_CodeGen_TargetLoweringBase_cpp 
	                   patch-src_llvm_lib_Support_Unix_Signals_inc 
	                   patch-src_llvm_lib_Transforms_InstCombine_InstCombineLoadStoreAlloca_cpp 

Log message:
Update to rust 1.17.0, from semarie@

Use ports llvm instead of building the bundled copy (yay!)
More work needed to actually build with clang ...


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/05 05:42:27

Modified files:
	devel/cargo    : Makefile distinfo 
	devel/cargo/patches: patch-src_cargo_core_package_id_rs 
Added files:
	devel/cargo/patches: patch-Makefile_in 
	                     patch-src_cargo_util_config_rs 

Log message:
Update to cargo 0.18.0, from semarie@.

Now distributed upstream along rust, so distfiles/bootstraps were
shuffled a bit.

Tested by/feedback from edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 05:43:47

Modified files:
	audio/dumb     : Makefile 
	audio/dumb/patches: patch-Makefile patch-Makefile_rdy 

Log message:
assert -fgnu89-inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 05:59:27

Modified files:
	games/capitan-sevilla: Makefile 
	games/capitan-sevilla/patches: patch-Makefile 

Log message:
fix build so that it uses CXXFLAGS for C++, add -fgnu89-inline to CFLAGS.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/05 05:59:47

Modified files:
	usr.bin/tmux   : format.c tmux.1 

Log message:
Add some formats to look at the session window stack, suggested by Scott
ROCHFORD.


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/05/05 06:04:58

Modified files:
	devel/glib2    : Makefile 
	devel/glib2/patches: patch-gio_kqueue_kqueue-helper_c 
Added files:
	devel/glib2/patches: patch-gio_kqueue_gkqueuefilemonitor_c 

Log message:
Fix a mutex recursion introduced in my last diff and protect another
code path with the same lock.

ok ajacoutot@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 06:54:47

Modified files:
	sys/arch/arm/arm: bus_dma.c 

Log message:
Remove /* FALLTHROUGH */ that isn't (and shouldn't).


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/05 07:17:04

Modified files:
	usr.bin/mandoc : man_html.c man_macro.c man_term.c 
	                 man_validate.c mandocdb.c mdoc_argv.c 
	                 mdoc_html.c mdoc_macro.c mdoc_man.c 
	                 mdoc_markdown.c mdoc_state.c mdoc_term.c 
	                 mdoc_validate.c roff.c roff.h roff_term.c 
	                 roff_validate.c 

Log message:
move .ll to the roff modules


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 07:19:24

Modified files:
	graphics/ufraw : Makefile 
Added files:
	graphics/ufraw/patches: patch-dcraw_cc 

Log message:
fix with clang/bug-fix from ufraw-current


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 07:23:52

Modified files:
	sys/dev/fdt    : rkclock.c rkclock_clocks.h 

Log message:
Add eMMC-related clocks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 07:38:13

Modified files:
	infrastructure/bin: update-patches 

Log message:
WRKDIST shouldn't end in /, but just in case...
noticed by jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/05 07:38:21

Modified files:
	security/letsencrypt: Makefile.inc 
	security/letsencrypt/client: Makefile distinfo 
	security/letsencrypt/client/pkg: PLIST 
	security/letsencrypt/py-acme: Makefile distinfo 
Removed files:
	security/letsencrypt/client/patches: patch-setup_py 
	security/letsencrypt/py-acme/patches: patch-setup_py 

Log message:
update to certbot 0.14.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/05 07:45:59

Modified files:
	x11/wmtime     : Makefile 

Log message:
Don't append / to WRKDIST/WRKSRC


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/05 07:47:35

Modified files:
	x11/wmtime/patches: patch-wmtime_wmtime_c 

Log message:
regen patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/05 07:48:23

Added files:
	x11/wmtime/patches: patch-wmgeneral_list_h 

Log message:
Disable inline in list functions decls; fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/05 08:02:51

Modified files:
	textproc/mupdf : Makefile distinfo 
	textproc/mupdf/patches: patch-Makefile patch-Makerules 
	                        patch-platform_gl_gl-main_c 
	                        patch-platform_x11_pdfapp_c 
	                        patch-platform_x11_x11_main_c 
	                        patch-source_fitz_load-jpx_c 
	                        patch-source_tools_mudraw_c 
	                        patch-source_tools_murun_c 
	                        patch-source_tools_pdfextract_c 
	                        patch-source_tools_pdfinfo_c 
	textproc/mupdf/pkg: PLIST 
Removed files:
	textproc/mupdf/patches: patch-Makethird 
	                        patch-source_fitz_pixmap_c 

Log message:
after doing battle with the build infra, belatedly update to MuPDF 1.11


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/05 08:04:37

Modified files:
	graphics/clutter/core/patches: patch-tests_conform_actor-graph_c 

Log message:
Committed upstream, thanks nigel@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/05/05 08:14:19

Modified files:
	app/cwm        : client.c 

Log message:
Ensure clients stay within the viewable bounds on placement, even with empty
borders; based on a patch from Vadim Vygonets.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 08:48:50

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
if DISTNAME is not defined, yield more reasonable default for WRKDIST
and DISTFILES
okay sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 09:04:51

Modified files:
	sys/arch/arm64/arm64: bus_dma.c 

Log message:
Add the missing cache flush operations for non-coherent mappings.

ok jsg@, patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 09:10:07

Modified files:
	sys/dev/sdmmc  : sdhc.c sdhcvar.h 

Log message:
Implement two quirks to support the Arasan eMMC 5.1 controller found on
the Rockchip RK3399.

- Make it possible to override sdhc_signal_voltage().

- Make it possible to disable double-data rate modes.

ok patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/05 09:16:26

Modified files:
	usr.bin/mandoc : man.c man_html.c man_macro.c man_term.c 
	                 man_validate.c mandocdb.c mdoc.c mdoc_argv.c 
	                 mdoc_html.c mdoc_macro.c mdoc_man.c 
	                 mdoc_markdown.c mdoc_state.c mdoc_term.c 
	                 mdoc_validate.c roff.c roff.h roff_html.c 
	                 roff_term.c roff_validate.c 
	regress/usr.bin/mandoc/man/blank: line.out_lint 
	regress/usr.bin/mandoc/mdoc/Pp: arg.out_lint 
	regress/usr.bin/mandoc/roff/cond: close.out_lint 

Log message:
Move .sp to the roff modules.  Enough infrastructure is in place
now that this actually saves code: -70 LOC.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 09:23:46

Modified files:
	sys/dev/fdt    : files.fdt 
	sys/arch/arm64/conf: GENERIC RAMDISK 
Added files:
	sys/dev/fdt    : sdhc_fdt.c 

Log message:
Add glue to attach SDHC compliant controllers using the FDT.  This makes
the eMMC controller on the Rockchip RK3399 work.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/05 09:48:50

Modified files:
	lib/libc/sys   : kill.2 

Log message:
Document what happens when sending a signal to the calling process.
OK jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/05 09:54:28

Modified files:
	share/man/man7 : man.7 mdoc.7 roff.7 

Log message:
Shorten the description of .sp and move it to roff(7).
If is not a macro but a low-level roff request
and not recommended for use in manual pages.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/05 10:30:40

Modified files:
	sys/net        : pf.c 

Log message:
Put back the call to pf_remove_src_node lost in the netlock backout

Reported by Remi Barbier, thanks!  OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 11:38:22

Modified files:
	sys/dev/ofw    : ofw_misc.c 

Log message:
Include <dev/ofw/ofw_misc.h> instead of <dev/ofw/ofw_pinctrl.h>.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 11:43:47

Modified files:
	sys/dev/fdt    : files.fdt 
	sys/arch/arm64/conf: GENERIC RAMDISK 
Added files:
	sys/dev/fdt    : rkpinctrl.c 

Log message:
Add rkpinctrl(4), a driver to configure pins on Rockchip SoCs.  For now,
only the RK3399 is supported.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/05 12:16:53

Modified files:
	archivers/zstd : Makefile distinfo 
	archivers/zstd/patches: patch-tests_playTests_sh 
	archivers/zstd/pkg: PLIST 

Log message:
Update to zstd 1.2.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/05/05 12:22:24

Modified files:
	sysutils/login_duo: Makefile distinfo 
	sysutils/login_duo/pkg: PLIST 
Added files:
	sysutils/login_duo/patches: patch-lib_https_c 

Log message:
Update login_duo to 1.9.20


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 13:21:20

Modified files:
	devel/sparsehash: Makefile distinfo 

Log message:
minor update, this one works with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/05 13:24:12

Modified files:
	net/arping     : Makefile distinfo 
Added files:
	net/arping/patches: patch-src_mock_libpcap_c 

Log message:
Update to arping-2.18.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/05 14:13:54

Modified files:
	sys/arch/armv7/sunxi: files.sunxi 
	sys/dev/fdt    : files.fdt 
Added files:
	sys/dev/fdt    : if_dwge_fdt.c 
Removed files:
	sys/arch/armv7/sunxi: if_dwge_fdt.c 

Log message:
Move dwge(4) glue into dev/fdt.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/05 14:16:40

Modified files:
	usr.sbin/vmd   : vm.c 

Log message:
VMs cannot use proc_compose() to PROC_VMM, they have to use
imsg_compose() on the "vmm_pipe" directly.  This fixes the
communication channel from VMs back to vmm.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/05 16:11:08

Modified files:
	x11/tvtwm      : Makefile 
	x11/tvtwm/patches: patch-gram_y patch-lex_l patch-parse_c 
Added files:
	x11/tvtwm/patches: patch-LocPixmap_c patch-add_window_c 
	                   patch-add_window_h patch-cursor_c 
	                   patch-events_c patch-events_h patch-icons_c 
	                   patch-icons_h patch-list_c patch-list_h 
	                   patch-menus_c patch-menus_h patch-move_c 
	                   patch-parse_h patch-regexp_c patch-resize_c 
	                   patch-resize_h patch-ssetroot_c patch-twm_c 
	                   patch-twm_h patch-util_c patch-util_h 
	                   patch-vdt_c patch-vdt_h 

Log message:
fix missing return types, declarations, includes, etc. for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/05 19:54:31

Modified files:
	sys/dev/pci    : pucdata.c 

Log message:
add Moxa CP-104EL
ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/05 20:51:13

Modified files:
	games/dunelegacy: Makefile 
Added files:
	games/dunelegacy/patches: patch-include_misc_functional_h 
	                          patch-include_misc_memory_h 

Log message:
get it to build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/06 00:43:02

Modified files:
	sys/arch/arm64/arm64: cpu.c 

Log message:
Now that we have a table of Cavium part numbers add the part number for
Broadcom's Vulcan design with a Cavium implementer code
(ThunderX2 T99/CN99xx).  Suggested by kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/06 00:49:12

Modified files:
	distrib/miniroot: install.sub 

Log message:
Add build to the list of usernames that are rejected during
installation.

Noted by crd _at_ crdavies.eu
OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 01:15:58

Modified files:
	www/mozilla-firefox: Makefile distinfo 
	www/firefox-i18n: Makefile.inc distinfo 

Log message:
Bugfix update to firefox 53.0.2.

See https://www.mozilla.org/en-US/firefox/53.0.2/releasenotes/
Fixes MFSA2017-14, but that only affects Windows.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 01:17:00

Modified files:
	www/firefox-esr: Makefile distinfo 
	www/firefox-esr-i18n: Makefile.inc distinfo 

Log message:
Bugfix update to firefox-esr 52.1.1.

See https://www.mozilla.org/en-US/firefox/52.1.1/releasenotes/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 01:23:29

Modified files:
	www/firefox-esr: Tag: OPENBSD_6_1 Makefile distinfo 
	www/firefox-esr-i18n: Tag: OPENBSD_6_1 Makefile.inc distinfo 

Log message:
MFC: update to firefox-esr 52.1.1.

Stable packages for i386 and amd64 available at https://packages.rhaalovely.net/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 01:24:08

Modified files:
	www/mozilla-firefox: Tag: OPENBSD_6_1 Makefile distinfo 
	www/firefox-i18n: Tag: OPENBSD_6_1 Makefile.inc distinfo 

Log message:
MFC: update to firefox 53.0.2.

Stable packages for i386 and amd64 available at https://packages.rhaalovely.net/


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/06 01:57:06

Modified files:
	graphics/graphite2: Makefile distinfo 
Removed files:
	graphics/graphite2/patches: patch-src_FeatureMap_cpp 

Log message:
Update to graphite2-1.3.10.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 02:17:05

Modified files:
	mail/p5-Mail-IMAPClient: Makefile distinfo 

Log message:
Update to p5-Mail-IMAPClient-3.39.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 02:30:48

Modified files:
	converters/convmv: Makefile distinfo 

Log message:
Update to convmv-2.01.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/06 02:39:19

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 

Log message:
Update to google-cloud-sdk-154.0.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/06 02:44:09

Modified files:
	sysutils/remotebox: Makefile distinfo 
	sysutils/remotebox/pkg: PLIST 

Log message:
Update to remotebox-2.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 02:53:45

Modified files:
	devel/p5-Alien-wxWidgets: Makefile distinfo 
	devel/p5-Alien-wxWidgets/patches: patch-Build_PL 
	                                  patch-inc_My_Build_Base_pm 

Log message:
Update to p5-Alien-wxWidgets-0.69.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 03:43:59

Log message:
    Import py-attrs-16.3.0, another dependency for an upcoming twisted update
    
    attrs is an MIT-licensed Python package with class decorators that ease the
    chores of implementing the most common attribute-related object protocols.
    
    From Pavel Korovin, ok sthen@
    
    Status:
    
    Vendor Tag:	pkorovin
    Release Tags:	landry_20170506
    
    N ports/devel/py-attrs/Makefile
    N ports/devel/py-attrs/distinfo
    N ports/devel/py-attrs/pkg/DESCR
    N ports/devel/py-attrs/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 03:46:48

Log message:
    Import py-incremental-16.10.1, yadada yadada twisted update yadada
    
    A small library that versions Python projects.
    
    From Pavel Korovin, ok sthen@
    
    Status:
    
    Vendor Tag:	pkorovin
    Release Tags:	landry_20170506
    
    N ports/devel/py-incremental/Makefile
    N ports/devel/py-incremental/distinfo
    N ports/devel/py-incremental/pkg/DESCR
    N ports/devel/py-incremental/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 03:48:44

Log message:
    Import py-service_identity-16.0.0, you know the drill.
    
    service_identity aspires to give you all the tools you need for
    verifying whether a certificate is valid for the intended purposes.
    
    In the simplest case, this means host name verification.  However,
    service_identity implements RFC 6125 fully and plans to add other
    relevant RFCs too.
    
    From Pavel Korovin, ok sthen@
    
    Status:
    
    Vendor Tag:	pkorovin
    Release Tags:	landry_20170506
    
    N ports/security/py-service_identity/Makefile
    N ports/security/py-service_identity/distinfo
    N ports/security/py-service_identity/pkg/DESCR
    N ports/security/py-service_identity/pkg/PLIST
    N ports/security/py-service_identity/patches/patch-setup_cfg
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 03:51:45

Log message:
    Import py-m2r-0.1.5, bite my shiny metal ***
    
    M2R converts a markdown file including reST markups to a valid reST format.
    
    From Pavel Korovin, ok sthen@
    
    Status:
    
    Vendor Tag:	pkorovin
    Release Tags:	landry_20170506
    
    N ports/textproc/py-m2r/Makefile
    N ports/textproc/py-m2r/distinfo
    N ports/textproc/py-m2r/pkg/DESCR
    N ports/textproc/py-m2r/pkg/PLIST
    N ports/textproc/py-m2r/patches/patch-setup_py
    N ports/textproc/py-m2r/patches/patch-tests_test_rst
    N ports/textproc/py-m2r/patches/patch-tests_test_md
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 03:54:29

Log message:
    Import py-automat-0.5.0, ~~twisted~~ //twisted// **twisted**.
    
    Automat is a library for concise, idiomatic Python expression of finite-state
    automata (particularly deterministic finite-state transducers).
    
    From Pavel Korovin, ok sthen@
    
    Status:
    
    Vendor Tag:	pkorovin
    Release Tags:	landry_20170506
    
    N ports/devel/py-automat/Makefile
    N ports/devel/py-automat/distinfo
    N ports/devel/py-automat/pkg/DESCR
    N ports/devel/py-automat/pkg/PLIST
    N ports/devel/py-automat/patches/patch-setup_py
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 03:56:08

Modified files:
	devel          : Makefile 
	textproc       : Makefile 
	security       : Makefile 

Log message:
+py-{attrs,automat,incremental,m2r,service_identify}{,python3}


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/06 04:19:04

Modified files:
	x11/piewm      : Makefile 
	x11/piewm/patches: patch-gram.y 
Added files:
	x11/piewm/patches: patch-add_window_c patch-events_c 
	                   patch-events_h patch-lex_l patch-list_c 
	                   patch-list_h patch-menus_c patch-menus_h 
	                   patch-move_c patch-parse_c patch-parse_h 
	                   patch-ssetroot_c patch-twm_c patch-twm_h 
	                   patch-util_c patch-vdt_c 

Log message:
fix missing return types, declarations, includes, etc. for clang


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/06 04:34:39

Modified files:
	faq            : current.html 

Log message:
no need to upgrade the build infrastructure twice.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 05:14:50

Modified files:
	fonts/sgi-fonts: Makefile 

Log message:
Switch MASTER_SITES to distfiles.pl.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/06 05:27:34

Modified files:
	sys/arch/arm64/arm64: cpu.c 

Log message:
Print full MIDR for CPUs that can't be identified.

ok jsg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 05:53:31

Modified files:
	math           : Makefile 
Removed files:
	math/xspread   : Makefile distinfo 
	math/xspread/patches: patch-Makefile_in patch-interp_c 
	                      patch-sc_h 
	math/xspread/pkg: DESCR PLIST 

Log message:
Remove math/xspread.

Our xspread port is from 1995. This is a modifed version of sc 6.22
that runs under X, there is no upstream anymore.

We have sc 7.16 in the ports tree, so this should be used instead.

OK jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 05:55:17

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register removal of xspread.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 06:42:01

Modified files:
	infrastructure/bin: update-patches 

Log message:
do things correctly in case wrkdist is a symlink.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 06:43:55

Modified files:
	infrastructure/bin: update-patches 

Log message:
lost one line I didn't intend to lose


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 06:51:21

Modified files:
	japanese/onew/patches: patch-conf_c patch-dialogue_jisyo_c 
	                       patch-dialogue_onewdic_c 
	                       patch-interface_ouimessage_c patch-onew_c 
	                       patch-onewclient_c patch-onewmisc_c 
Added files:
	japanese/onew/patches: patch-dialogue_keisen_c 
	                       patch-interface_oui_c 

Log message:
fix just enough return problems that this builds, so we have the option
of keeping it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 07:24:46

Modified files:
	textproc/the_silver_searcher: Makefile distinfo 

Log message:
Update the_silver_searcher to 1.0.3.

From maintainer Florian Stinglmayr, thanks!

OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 07:42:17

Added files:
	games/teeworlds/patches: patch-src_engine_shared_netban_cpp 

Log message:
somehow, clang wants explicit instantiation for those


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 07:45:49

Modified files:
	graphics/sxiv  : Makefile 
	graphics/sxiv/pkg: PLIST 
Added files:
	graphics/sxiv/patches: patch-icon_Makefile 

Log message:
Install .desktop file and icons. Icon bits and patch from kirby@.

While there, remove unneeded WRKDIST variable and do some minor
reformatting.

OK landry@ (previous version), kirby@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/06 08:01:50

ports/multimedia/gstreamer1/mm/patches

Update of /cvs/ports/multimedia/gstreamer1/mm/patches
In directory cvs.openbsd.org:/tmp/cvs-serv93675/mm/patches

Log Message:
Directory /cvs/ports/multimedia/gstreamer1/mm/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 08:10:16

Modified files:
	graphics/glfw  : Makefile 
Added files:
	graphics/glfw/patches: patch-deps_getopt_c 

Log message:
hack for clang...


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/06 08:30:06

Added files:
	security/dsniff/patches: patch-sshmitm_c patch-webmitm_c 

Log message:
work around name clash between a variable and the C99 function csin()


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 08:36:47

Modified files:
	devel/p5-B-Hooks-EndOfScope: Makefile distinfo 

Log message:
Update to p5-B-Hooks-EndOfScope-0.21.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/06 08:41:16

Modified files:
	security       : Makefile 

Log message:
typo


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/06 08:43:44

Modified files:
	net            : Makefile 
Removed files:
	net/winexe     : Makefile distinfo 
	net/winexe/patches: patch-lib_tls_tls_c patch-pidl_pidl 
	net/winexe/pkg : DESCR PLIST 

Log message:
remove winexe; this version doesn't work with any modern Windows version,
also fails with clang.

there's some slightly newer (though still old) devel code on sourceforge git
(building against separate samba4, rather than have chunks of it copied in)
which might be of interest if any waf fans want to revive this.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 08:45:53

Modified files:
	devel/p5-Canary-Stability: Makefile distinfo 

Log message:
Update to p5-Canary-Stability-2012.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/06 08:49:17

Added files:
	devel/libopensync/patches: patch-cmake_modules_Compiler_cmake 

Log message:
fix cmake bits for clang; there's still a "non-void fn should return a value"


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/06 08:56:08

Modified files:
	mail/p5-Mail-SpamAssassin: Makefile 
	mail/p5-Mail-SpamAssassin/pkg: PLIST 

Log message:
Install ldap docs and take maintainership
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 09:00:57

Modified files:
	devel/p5-Carp-Clan: Makefile distinfo 

Log message:
Update to p5-Carp-Clan-6.06.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 09:01:31

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
keep a short form of the GH_COMMIT in the DISTFILES name, so that GH_COMMIT
changes do not result in the distfile name


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 09:09:01

Modified files:
	devel/p5-Class-C3: Makefile distinfo 

Log message:
Update to p5-Class-C3-0.33.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 09:10:18

Modified files:
	devel/ctftools : distinfo 
	archivers/lz4json: distinfo 
	audio/fookebox : distinfo 
	audio/sonata   : distinfo 
	devel/cvs2gitdump: distinfo 
	devel/distcc   : distinfo 
	devel/droplet  : distinfo 
	devel/go-check-v1: distinfo 
	devel/go-tools : distinfo 
	devel/gtkparasite: distinfo 
	devel/libvterm : distinfo 
	devel/py-rcsparse: distinfo 
	devel/teensyloader: distinfo 
	devel/universal-ctags: distinfo 
	emulators/emulationstation: distinfo 
	emulators/libretro-genesis-plus-gx: distinfo 
	fonts/go-fonts : distinfo 
	fonts/powerline-fonts: distinfo 
	games/bastet   : distinfo 
	games/gti      : distinfo 
	games/ioquake3 : distinfo 
	games/jbrickshooter: distinfo 
	games/mysticmine: distinfo 
	games/sdlpop   : distinfo 
	graphics/displaz: distinfo 
	graphics/gimp/deskew: distinfo 
	graphics/quirc : distinfo 
	graphics/zxing : distinfo 
	lang/jimtcl    : distinfo 
	multimedia/daala: distinfo 
	multimedia/motion: distinfo 
	net/cgo        : distinfo 
	net/flowd      : distinfo 
	net/go-net     : distinfo 
	net/hping      : distinfo 
	net/irssi-icb  : distinfo 
	net/manubulon-snmp: distinfo 
	net/noVNC      : distinfo 
	net/ntimed     : distinfo 
	net/py-czmq    : distinfo 
	net/tcpslice   : distinfo 
	net/telepathy/folks: distinfo 
	net/ucspi-tools: distinfo 
	net/whatweb    : distinfo 
	net/xl2tpd     : distinfo 
	plan9/devdrawserver: distinfo 
	print/apvlv    : distinfo 
	security/go-crypto: distinfo 
	security/letsencrypt/acme-tiny: distinfo 
	security/regripper: distinfo 
	security/sslScanner: distinfo 
	shells/nsh     : distinfo 
	sysutils/ansible-lint: distinfo 
	sysutils/fwa   : distinfo 
	sysutils/grive2: distinfo 
	sysutils/inotify-tools: distinfo 
	sysutils/lsyncd: distinfo 
	telephony/libzrtp: distinfo 
	textproc/go-text: distinfo 
	textproc/go-xlsx: distinfo 
	textproc/xlsx2csv: distinfo 
	www/luakit     : distinfo 
	www/mono-xsp   : distinfo 
	www/surf2      : distinfo 
	x11/dzen2      : distinfo 
	x11/freerdp    : distinfo 
	x11/i3lock     : distinfo 
	x11/xsettingsd : distinfo 

Log message:
adjust distinfo post DISTFILES change


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 09:19:28

Modified files:
	devel/p5-Class-Inspector: Makefile distinfo 

Log message:
Update to p5-Class-Inspector-1.31.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 09:35:35

Modified files:
	devel/p5-Config-AutoConf: Makefile distinfo 

Log message:
Update to p5-Config-AutoConf-0.314.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 09:36:11

Added files:
	devel/libopensync/patches: patch-opensync_opensync_error_c 

Log message:
...complete build with clang, grab fix from libopensync-0.39 (not my place
to update, and MASTER_SITES is down at the moment, tarball peeked on
FreeBSD mirror cache...


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/06 09:42:50

Modified files:
	devel/tortoisehg: Makefile distinfo 

Log message:
Unbreak tortoisehg after the last mercurial update. Upstream has not
released a stable version yet.

Spotted by naddy@ and sthen@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 09:47:50

Log message:
    Import devel/p5-Test-Command-Simple.
    
    This test module is intended to simplify testing of external commands.
    It does so by running the command under IPC::Open3, closing the stdin
    immediately, and reading everything from the command's stdout and
    stderr. It then makes the output available to be tested.
    
    OK sthen@, giovanni@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170506
    
    N ports/devel/p5-Test-Command-Simple/Makefile
    N ports/devel/p5-Test-Command-Simple/distinfo
    N ports/devel/p5-Test-Command-Simple/pkg/PLIST
    N ports/devel/p5-Test-Command-Simple/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 09:49:37

Modified files:
	devel          : Makefile 

Log message:
Add p5-Test-Command-Simple.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 09:52:24

Log message:
    Import net/validns.
    
    Validns is a standalone command line RFC 1034/1035 zone file validation
    tool that, in addition to basic syntactic and semantic zone checks,
    includes DNSSEC signature verification and NSEC/NSEC3 chain validation,
    as well a number of optional policy checks on the zone.
    
    OK sthen@, giovanni@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170506
    
    N ports/net/validns/Makefile
    N ports/net/validns/distinfo
    N ports/net/validns/patches/patch-carp_c
    N ports/net/validns/patches/patch-Makefile
    N ports/net/validns/pkg/PLIST
    N ports/net/validns/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 09:55:06

Modified files:
	net            : Makefile 

Log message:
Add validns.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/06 09:55:15

Modified files:
	sys/netinet    : ip_ipip.c ip_ipsp.c ip_ipsp.h 

Log message:
Convert the xformsw definition to C99 style initializer.  Also fix
the function declaration of ipe4_input() and avoid a wrong cast.
OK mikeb@ dhill@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 10:18:36

Modified files:
	lib/libssl     : ssl_asn1.c ssl_packet.c ssl_versions.c 
	                 t1_hash.c 

Log message:
Add missing $OpenBSD$ tags.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/06 10:25:48

Modified files:
	sys/dev/fdt    : sdhc_fdt.c 

Log message:
Configure pins and deassert resets, just in case some other board needs it.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/06 10:29:19

Modified files:
	sys/dev/fdt    : rkclock.c rkclock_clocks.h 

Log message:
Add a few GMAC related clocks and implement reset logic.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/06 10:35:59

Modified files:
	sys/netinet    : tcp_input.c udp_usrreq.c 
	sys/netinet6   : raw_ip6.c 

Log message:
Checking for IPv4 mapped addreses and dropping the packet is done
in ip6_input().  Do not check that again in the protocol input
functions.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/06 10:36:56

Modified files:
	sys/dev/fdt    : rkclock.c 

Log message:
Remove unused local variable such that this actually compiles.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/06 10:45:34

Modified files:
	devel/tortoisehg: Makefile 
	devel/mercurial: Makefile 

Log message:
Comments.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 10:59:31

Modified files:
	graphics/dcmtk : Makefile 
Added files:
	graphics/dcmtk/patches: 
	                        patch-dcmdata_include_dcmtk_dcmdata_dchashdi_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_diargpxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dicmypxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dicocpt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dicoflt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dicorot_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dicosct_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dihsvpxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dipalpxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_dirgbpxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_diybrpxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_diyf2pxt_h 
	                        patch-dcmimage_include_dcmtk_dcmimage_diyp2pxt_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_diflipt_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_dimoflt_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_dimoipxt_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_dimorot_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_dimosct_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_dirotat_h 
	                        patch-dcmimgle_include_dcmtk_dcmimgle_discalet_h 
	                        patch-dcmwlm_libsrc_wlds_cc 
	                        patch-dcmwlm_libsrc_wlfsim_cc 
	                        patch-ofstd_include_dcmtk_ofstd_ofoset_h 
	                        patch-ofstd_tests_tstthred_cc 

Log message:
let it build with clang... a shitload of the same


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 11:02:58

Modified files:
	games/garden   : Makefile 

Log message:
assert gnu89 inlines


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 11:12:59

Modified files:
	lib/libcrypto/asn1: a_time_tm.c asn1.h 
	lib/libcrypto/man: ASN1_time_parse.3 

Log message:
Add ASN1_TIME_set_tm to set an asn1 from a struct tm *
ok jsing@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 11:15:20

Modified files:
	lang/squeak/vm : Makefile 
	lang/squeak/vm/patches: patch-platforms_unix_vm_sqUnixMain_c 
Added files:
	lang/squeak/vm/patches: 
	                        patch-platforms_Cross_plugins_Mpeg3Plugin_libmpeg_audio_layer3_c 
	                        patch-platforms_Cross_plugins_Mpeg3Plugin_libmpeg_video_getpicture_c 
	                        patch-platforms_Cross_plugins_Mpeg3Plugin_libmpeg_video_idct_c 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 11:16:40

Modified files:
	lib/libcrypto  : Symbols.list 

Log message:
Add ASN1_TIME_set_to to exported symbols
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 11:17:15

Modified files:
	lib/libcrypto  : shlib_version 
	lib/libssl     : shlib_version 
	lib/libtls     : shlib_version 

Log message:
Bump minors for symbol addition in libcrypto
ok jsing@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/06 11:23:10

Modified files:
	security/slurpie: Makefile 
	security/slurpie/patches: patch-src_master_c patch-src_mn_h 
	                          patch-src_node_c patch-src_slurp_c 
	                          patch-src_slurpie_c 
Added files:
	security/slurpie/patches: patch-src_shared_c 

Log message:
add missing headers and fix main() prototype to make this build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 11:23:35

Added files:
	inputmethods/uim/patches: patch-qt4_immodule_plugin_cpp 

Log message:
missing include, builds with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/06 11:38:49

Modified files:
	net/p5-Net-DNS : Makefile distinfo 
	net/p5-Net-DNS/pkg: PLIST 

Log message:
update p5-Net-DNS to 1.10


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/06 12:04:42

Modified files:
	devel/tortoisehg: Makefile distinfo 

Log message:
Update to tortoisehg 4.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/06 12:07:46

Modified files:
	lib/libcrypto/man: ASN1_time_parse.3 

Log message:
space needed between macro arg and punctuation;


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/06 12:18:11

Modified files:
	sys/kern       : kern_sysctl.c 

Log message:
Do not export the protocol PCB pointer from kernel to non-root users
also in the IPv6 case.  This fixes "netstat -An -f inet6 -p tcp"
and shows 0x0.
report and OK dhill@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/06 12:25:43

Modified files:
	sys/dev/fdt    : files.fdt rkpinctrl.c 
	sys/arch/arm64/conf: GENERIC RAMDISK 
Added files:
	sys/dev/fdt    : rkgpio.c 

Log message:
Add rkgpio(4), a driver to handle GPIOs on Rockchip SoCs.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/06 13:08:52

Modified files:
	www/kcaldav    : Makefile 
	www/kcaldav/pkg: README 

Log message:
add some hints on how to use kcaldav together with base httpd(8)

"looks good to me" sthen


CVSROOT:	/cvs
Module name:	ports
Changes by:	uaa@cvs.openbsd.org	2017/05/06 13:25:18

Modified files:
	emulators/qemu : Makefile 
	emulators/qemu/patches: patch-configure 

Log message:
fixed configure script to enable -curses option

ok sthen@ and brad@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 13:42:55

Modified files:
	graphics/opencv/patches: patch-modules_core_src_system_cpp 

Log message:
fixes clang, forgotten commit


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/06 13:44:53

Modified files:
	usr.sbin/relayd: relayd.c 

Log message:
Convert explicit_bzero() + free() to freezero().

OK reyk@, deraadt@ (previous version)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/06 14:23:21

Modified files:
	productivity/gtg: Makefile 

Log message:
fix MASTER_SITES


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/06 14:24:45

Modified files:
	x11/xpad       : Makefile 

Log message:
two wrongs don't make a right; fix master_sites


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 14:34:16

src/regress/lib/libcrypto/hkdf

Update of /cvs/src/regress/lib/libcrypto/hkdf
In directory cvs.openbsd.org:/tmp/cvs-serv77211/hkdf

Log Message:
Directory /cvs/src/regress/lib/libcrypto/hkdf added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 14:34:52

src/lib/libcrypto/hkdf

Update of /cvs/src/lib/libcrypto/hkdf
In directory cvs.openbsd.org:/tmp/cvs-serv26782/hkdf

Log Message:
Directory /cvs/src/lib/libcrypto/hkdf added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 14:37:25

Modified files:
	lib/libssl     : Symbols.list s3_lib.c ssl.h ssl_lib.c 
	                 ssl_locl.h ssl_versions.c 

Log message:
Provide SSL{,_CTX}_set_{min,max}_proto_version() functions.

Rides minor bump.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 14:39:03

Modified files:
	regress/lib/libssl/unit: ssl_versions.c 

Log message:
Add regress coverage for SSL{,_CTX}_set_{min,max}_proto_version().


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 14:42:57

Modified files:
	regress/lib/libcrypto: Makefile 
	lib/libcrypto  : Makefile 
Added files:
	regress/lib/libcrypto/hkdf: Makefile hkdf_test.c 
	lib/libcrypto/hkdf: hkdf.c hkdf.h 

Log message:
Bring in HKDF, from BoringSSL, with regress tests modified to be
in C. Ride previous minor bump
ok tom@ inoguchi@ jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/06 14:49:59

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 14:57:45

Modified files:
	lib/libtls     : Symbols.list tls.h tls_util.c 

Log message:
Provide a tls_unload_file() function, that frees the memory returned from
a tls_load_file() call, ensuring that it the contents become inaccessible.
This is specifically needed on platforms where the library allocators may
be different from the application allocator.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 14:59:28

Modified files:
	lib/libtls     : tls.c tls_config.c tls_internal.h tls_server.c 

Log message:
Perform reference counting for tls_config. This allows tls_config_free() to
be called as soon as it has been passed to the final tls_configure() call,
simplifying lifetime tracking for the application.

Requested some time ago by tedu@.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:06:19

Modified files:
	lib/libtls/man : tls_load_file.3 

Log message:
Document tls_unload_file().


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 15:16:37

Modified files:
	devel/p5-Config-General: Makefile distinfo 

Log message:
Update to p5-Config-General-2.63.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:18:48

Modified files:
	lib/libtls/man : tls_init.3 

Log message:
Be explicit about when it is safe to call tls_config_free().

Discussed with beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:21:00

Modified files:
	regress/lib/libcrypto/free: freenull.c 

Log message:
Not much point using a failed variable here.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:22:58

Modified files:
	regress/lib/libcrypto/free: freenull.c 

Log message:
Sort/group functions.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:23:57

Modified files:
	regress/lib/libcrypto/free: freenull.c 

Log message:
Add more functions.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:25:15

Modified files:
	lib/libtls     : tls_util.c 

Log message:
BIO_free_all() and EVP_PKEY_free() can be called with NULL.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:34:13

Modified files:
	lib/libtls     : tls_util.c 

Log message:
Use freezero() for the tls_load_file() failure case, since we're
potentially dealing with key material. Also switch a calloc to malloc,
since we immediately copy the same amount of data to the newly allocated
buffer.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/06 15:35:42

Modified files:
	x11/gnome/ghex : Makefile 

Log message:
fix build with clang (and any non-ancient gcc)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 15:36:02

Modified files:
	devel/p5-Devel-Cover: Makefile distinfo 

Log message:
Update to p5-Devel-Cover-1.24.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/06 15:37:06

Modified files:
	x11/gnome/nautilus-sendto: Makefile 

Log message:
fix build with clang; based on an upstream commit that used #pragma GCC,
however our current gcc from base cannot cope with that so fallback to CFLAGS.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:50:40

Modified files:
	regress/lib/libtls/tls: tlstest.c 

Log message:
Free tls_configs earlier now that we have refcounting.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 15:56:43

Modified files:
	regress/lib/libtls/tls: Makefile tlstest.c 

Log message:
Move TLS test code into a function that is called from main, making it
easier for new tests to be added.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/06 15:57:27

Modified files:
	comms/minicom/patches: patch-man_minicom_1 patch-src_main_c 
	                       patch-src_script_c patch-src_sysdep1_c 
	                       patch-src_updown_c patch-src_windiv_c 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/06 16:00:53

Modified files:
	comms/minicom  : Makefile 
	comms/minicom/patches: patch-src_main_c 

Log message:
fix format string for 64-bit time_t, found by clang warning


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/06 16:16:46

Modified files:
	devel/p5-Devel-ebug: Makefile distinfo 

Log message:
Update to p5-Devel-ebug-0.59.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 16:24:58

Modified files:
	lib/libssl     : d1_clnt.c d1_srvr.c s3_lib.c ssl_both.c 
	                 ssl_clnt.c ssl_lib.c ssl_locl.h ssl_pkt.c 
	                 ssl_srvr.c t1_enc.c t1_lib.c 
	regress/lib/libssl/unit: tls_prf.c 

Log message:
Bring in an SSL_HANDSHAKE structure and commence the great shovelling
ok jsing@, gcc@, regress@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/06 16:29:12

Modified files:
	.              : errata61.html 

Log message:
release pf src tracking errata.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/06 16:37:44

Modified files:
	lib/libc/sys   : kill.2 

Log message:
Move info about group handling via a negative pid into the list
with the other pid-specific details.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/06 16:46:19

Modified files:
	sys/net        : Tag: OPENBSD_6_1 pf.c 

Log message:
Put back the call to pf_remove_src_node lost in the netlock backout

Reported by Remi Barbier, thanks!  OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 16:46:58

Modified files:
	regress/lib/libtls/tls: tlstest.c 

Log message:
Split TLS client/server handshake and close code into separate functions
so that it can be reused.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/06 19:05:10

Modified files:
	editors/tpad   : Makefile 
Added files:
	editors/tpad/patches: patch-src_tpad_open_guard_c 
	                      patch-src_tpad_print_c 
	                      patch-src_tpad_print_h 

Log message:
Drop nonsensical inlines (also matches upstream) for clang.
Fix a glaring misunderstanding how array parameters work in C, while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 19:56:24

Modified files:
	regress/lib/libtls/tls: tlstest.c 

Log message:
An an initial sequencing/ordering test for libtls.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 19:58:29

Modified files:
	regress/lib/libtls/tls: tlstest.c 

Log message:
Add a test that calls tls_handshake() on a connection that has already
completed a TLS handshake. This should return a failure, but currently
succeeds (hence the regress currently fails).


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 19:59:34

Modified files:
	lib/libtls     : tls.c 

Log message:
Return an error if tls_handshake() is called on a TLS context that has
already completed a TLS handshake.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/06 20:16:45

Added files:
	multimedia/kguitar/patches: patch-kguitar_convertgp3_cpp 
	                            patch-kguitar_convertgtp_cpp 

Log message:
missing includes, fixes clang


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 21:22:15

Modified files:
	regress/lib/libtls/tls: tlstest.c 

Log message:
Also test calling tls_handshake() on a server connection context that has
already completed a TLS handshake.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 21:25:26

Modified files:
	regress/lib/libtls/tls: tlstest.c 

Log message:
Add a (currently failing) call to tls_handshake() on a client context that
has not yet been connected. We expect this to fail, but it should fail
gracefully.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 21:27:06

Modified files:
	lib/libtls     : tls_client.c tls_internal.h 

Log message:
Ensure that a client context has been connected before attempting to
complete a TLS handshake.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/06 22:18:47

Modified files:
	usr.bin/openssl: Makefile 
	usr.sbin/ocspcheck: Makefile 

Log message:
Limit -Werror to gcc4 as was done in libcrypto/libssl/libtls to avoid
failed builds with different compilers.

ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/06 22:22:24

Modified files:
	lib/libssl     : d1_both.c d1_clnt.c d1_pkt.c d1_srvr.c s3_lib.c 
	                 ssl.h ssl_both.c ssl_clnt.c ssl_err.c ssl_lib.c 
	                 ssl_locl.h ssl_pkt.c ssl_srvr.c ssl_stat.c 
	                 t1_lib.c 

Log message:
Move state from ssl->internal to the handshake structure.
while we are at it, convert SSLerror to use a function
internally, so that we may later allocate the handshake
structure and check for it
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/06 23:03:41

Modified files:
	lib/libssl     : bs_cbb.c 

Log message:
Instead of starting a 'zero-sized' CBB at the size of the first addition
to the CBB, then doubling, start with an initial size of 64 bytes. Almost
all uses will exceed this size and we avoid multiple small recallocarray()
calls during the initial usage.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/06 23:23:36

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/07 01:31:14

Modified files:
	www/larbin     : Makefile 
	www/larbin/patches: patch-src_global_cc patch-src_larbin_make 
Added files:
	www/larbin/patches: patch-src_utils_histogram_cc 

Log message:
- unbreak with clang (mostly from freebsd)
- use SUBST_CMD while here


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/07 01:55:17

Modified files:
	etc            : netstart 

Log message:
Replace hardcoded script name with ${0##*/}

OK tb@ halex@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/07 02:43:28

Modified files:
	emulators/qemu : Makefile 

Log message:
- Remove --enable-curses as the probe is run anyway
- Add ncursesw to WANTLIB

from Brad (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/07 03:09:51

Modified files:
	devel/tig      : Makefile distinfo 

Log message:
Update tig to 2.2.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/07 03:40:15

Modified files:
	etc            : netstart 

Log message:
Change test from [] to [[]] and simplify pattern.

OK tb@, krw@ (for [[]])
Feedback and OK halex@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/07 04:40:17

Modified files:
	usr.sbin/installboot: Makefile armv7_installboot.c 

Log message:
Add arm64 support.

ok tom@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/07 05:07:48

Modified files:
	sys/arch/arm64/stand/efiboot: conf.c efiboot.c fdt.c fdt.h 

Log message:
Pass the address of the EFI system table and the EFI memory map through
properties in the /chosen node of the FDT.  The properties match the ones
used by Linux (see Documentation/arm/uefi.txt in the Linux kernel source
tree) but with the "linux," prefix replaced by "openbsd,".

ok jmatthew@, tom@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/07 05:25:58

Modified files:
	sys/arch/armv7/stand/efiboot: fdt.c fdt.h 

Log message:
Sync FDT code with arm64.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/07 06:00:12

Modified files:
	distrib/arm64/miniroot: Makefile 
	distrib/arm64/ramdisk: install.md 

Log message:
Increase the offset from the start of the disk to the FAT filesystem
from sector 2048/1MB to sector 8192/4MB.

This gives enough space for a combined U-Boot and ATF FIT image for the
Firefly-RK3399.

Requested by and ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/07 06:09:46

Modified files:
	sys/dev/fdt    : if_dwge_fdt.c 

Log message:
Refactor this code to support the GMAC found on the Rockchip RK3399 alongside
the GMAC found on the Allwinner A20/A31.

With this diff I can receive packets on the Firefly-RK3399.  Unfortunately
sending packets doesn't seem to work yet.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 06:49:54

Modified files:
	graphics/DevIL : Makefile 
	graphics/DevIL/patches: patch-m4_devil-definitions_m4 
Added files:
	graphics/DevIL/patches: patch-configure_ac patch-include_IL_il_h 
	                        patch-lib_Makefile_in 

Log message:
turns out clang is more picky about C vs C++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 07:38:36

Added files:
	graphics/argyll/patches: patch-icc_icc_h 

Log message:
simple fix for clang. took me a while to figure out "thanks to" jam.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/07 08:11:45

Modified files:
	sys/dev/ic     : dwc_gmac.c 

Log message:
Program hardware address in dwc_gmac_init() instead of dwc_gmac_attach()
such that "ifconfig dwge0 lladdr 00:11:22:33:44:55" actually works.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 08:29:06

ports/graphics/liblqr/patches

Update of /cvs/ports/graphics/liblqr/patches
In directory cvs.openbsd.org:/tmp/cvs-serv28509/patches

Log Message:
Directory /cvs/ports/graphics/liblqr/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 08:29:35

Added files:
	graphics/liblqr/patches: patch-lqr_lqr_energy_c 

Log message:
fix package on clang, gnu89 inlines are a time-bomb.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 08:38:02

Added files:
	games/taxipilot/patches: patch-taxipilot_movingobject_cpp 

Log message:
C++ and temporaries, fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 08:40:40

Added files:
	games/falconseye/patches: patch-win_jtp_winjtp_c 

Log message:
missing return value, clang fixed


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 08:50:14

Modified files:
	infrastructure/lib/DPB: PortBuilder.pm 
	infrastructure/lib/DPB/Job: Port.pm 
	infrastructure/man/man1: dpb.1 

Log message:
make NO_CHECKSUM an option, as it causes too many problems on shared
dist farms.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/07 09:19:32

Modified files:
	lib/libc/compat-43: killpg.c 

Log message:
Don't allow a negative process group ID, it would turn into a
process ID when negated.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/07 10:45:12

Modified files:
	games/puzzles  : Makefile distinfo 
	games/puzzles/patches: patch-Makefile_gtk patch-gtk_c 

Log message:
Update to a newer git snapshot, fix urls while here


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 10:50:22

Modified files:
	infrastructure/lib/DPB: Distfile.pm Fetch.pm 

Log message:
filter any distfile name thru a normalize function, so that comparisons
are more accurate and we can get normal unix filesystem semantics.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 10:57:32

src/regress/usr.bin/mandoc/roff/ta

Update of /cvs/src/regress/usr.bin/mandoc/roff/ta
In directory cvs.openbsd.org:/tmp/cvs-serv49969/ta

Log Message:
Directory /cvs/src/regress/usr.bin/mandoc/roff/ta added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 11:17:44

Added files:
	games/zaz/patches: patch-src_mixer_cpp patch-src_mixer_h 

Log message:
compile with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 11:30:58

Modified files:
	usr.bin/mandoc : Makefile man_term.c mdoc_man.c mdoc_term.c 
	                 roff.c roff.h roff_html.c roff_term.c 
	                 roff_validate.c term.c term.h term_ascii.c 
	regress/usr.bin/mandoc/roff: Makefile 
Added files:
	usr.bin/mandoc : term_tab.c 
	regress/usr.bin/mandoc/roff/ta: Makefile basic-man.in 
	                                basic-man.out_ascii 
	                                basic-mdoc.in 
	                                basic-mdoc.out_ascii 

Log message:
Basic implementation of the roff(7) .ta (define tab stops) request.
This is the first feature made possible by the parser reorganization.
Improves the formatting of the SYNOPSIS in many Xenocara GL manuals.
Also important for ports, as reported by many, including naddy@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 11:46:24

Modified files:
	games/wanderer : Makefile 
	games/wanderer/patches: patch-edit_c patch-m_c 
Added files:
	games/wanderer/patches: patch-display_c patch-game_c 
	                        patch-monsters_c patch-read_c 
	                        patch-scores_c patch-wand_head_h 

Log message:
let it build with clang, fix quite a few oddities while there


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/07 11:53:30

Modified files:
	sys/sys        : mbuf.h 

Log message:
Backout previous as it's causing problems on architectures that align
64 bit integers on an 8 byte boundary such as armv7. MHLEN calculation
doesn't account for padding bytes inserted by the compiler after m_hdr.

Found the hard way by kettenis@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 12:01:21

Added files:
	mail/elm/patches: patch-src_calendar_c patch-src_edit_c 

Log message:
fix clang build (return values)


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/07 12:18:20

Modified files:
	sys/net        : fq_codel.c 

Log message:
Fix stage transition from the initial one to DROPPING

When the initial state is set to DROPPING, the code immediately
jumps to a CONTROL state bypassing DROPPING. To fix this we start
with an explicit INITIAL state so that we do an INITIAL->DROPPING
transition right off the bat in the beginning of the loop and
then perform a DROPPING->CONTROL and either CONTROL->DROPPING and
restart the loop or CONTROL->RECOVERY/ACCEPTING and terminate.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/07 12:27:17

Modified files:
	print/ptouch-driver: Makefile 

Log message:
uses gnu89-inlines; fixes build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/07 12:36:32

Modified files:
	www/cgicc      : Makefile distinfo 
	www/cgicc/pkg  : PLIST 

Log message:
update to cgicc-3.2.16 (which also works clang)


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 13:28:55

Modified files:
	databases/gnats: Makefile 

Log message:
Drop USE_GROFF now that mandoc(1) supports .ta.
Issue first reported by brad@ in 2011.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/07 13:46:08

Modified files:
	faq            : faq5.html 

Log message:
add a . to the diff command.

from matthew martin


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 14:00:26

Modified files:
	math/openfst   : Makefile 
Added files:
	math/openfst/patches: patch-src_include_fst_accumulator_h 
	                      patch-src_include_fst_arc-map_h 
	                      patch-src_include_fst_config_h_in 
	                      patch-src_include_fst_determinize_h 
	                      patch-src_include_fst_encode_h 
	                      patch-src_include_fst_epsnormalize_h 
	                      patch-src_include_fst_equivalent_h 
	                      patch-src_include_fst_factor-weight_h 
	                      patch-src_include_fst_label-reachable_h 
	                      patch-src_include_fst_relabel_h 
	                      patch-src_include_fst_replace-util_h 
	                      patch-src_include_fst_replace_h 
	                      patch-src_include_fst_rmepsilon_h 
	                      patch-src_include_fst_rmfinalepsilon_h 
	                      patch-src_include_fst_script_compile-impl_h 
	                      patch-src_include_fst_sparse-tuple-weight_h 
	                      patch-src_include_fst_state-map_h 
	                      patch-src_include_fst_symbol-table-ops_h 
	                      patch-src_include_fst_synchronize_h 
	                      patch-src_include_fst_test-properties_h 
	                      patch-src_include_fst_util_h 

Log message:
let it build with clang, mostly try => standard, plus some configure bugs
and hackery


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 14:24:01

Added files:
	graphics/gracula/patches: patch-Makefile patch-gcl_c 

Log message:
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 14:25:32

Modified files:
	net/iplog      : Makefile 

Log message:
mandoc supports .ta now, so drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/07 14:33:42

Modified files:
	emulators/qemu : Makefile 

Log message:
readd --enable-curses, it causes configure to exit out if curses isn't
detected, so we shouldn't run into it silently breaking again in future.
ok Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 14:35:07

Added files:
	graphics/ipe/patches: patch-src_ipe6upgrade_ipe6upgrade_cpp 
	                      patch-src_ipeextract_ipeextract_cpp 
	                      patch-src_ipelib_ipebase_cpp 
	                      patch-src_ipelib_ipelatex_cpp 
	                      patch-src_ipelib_ipepdfparser_cpp 
	                      patch-src_ipetoipe_ipetoipe_cpp 

Log message:
missing includes, fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 14:42:40

Modified files:
	news/aub       : Makefile 

Log message:
mandoc supports .ta now, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 14:43:46

Modified files:
	devel/lam      : Makefile 

Log message:
mandoc supports .ta now, drop USE_GROFF and bump; ok todd@ naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 14:48:29

Modified files:
	devel/ptlib/patches: patch-src_ptlib_unix_osutil_cxx 
Added files:
	devel/ptlib/patches: patch-plugins_vidinput_bsd_vidinput_bsd_cxx 
	                     patch-plugins_vidinput_v4l2_vidinput_v4l2_cxx 
	                     patch-src_ptlib_common_osutils_cxx 
	                     patch-src_ptlib_common_sockets_cxx 
	                     patch-src_ptlib_unix_assert_cxx 
	                     patch-src_ptlib_unix_channel_cxx 
	                     patch-src_ptlib_unix_remconn_cxx 
	                     patch-src_ptlib_unix_serchan_cxx 
	                     patch-src_ptlib_unix_socket_cxx 
	                     patch-src_ptlib_unix_svcproc_cxx 
	                     patch-src_ptlib_unix_tlib_cxx 
	                     patch-src_ptlib_unix_tlibthrd_cxx 

Log message:
make it build with clang, mostly misses unistd.h everywhere


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/07 14:50:20

Modified files:
	x11/byzi       : Makefile distinfo 
	x11/byzi/pkg   : PLIST 

Log message:
Update to 0.2.
Stop treating loadable lib as linkable lib.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/07 15:05:05

Modified files:
	lib/libssl     : s3_lib.c 

Log message:
Drop cipher suites with DSS authentication - there is no good reason to
keep these around.

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/07 15:07:00

Modified files:
	regress/lib/libssl/client: clienttest.c 

Log message:
Revise cipher suites in regress to match DSS cipher suite removal.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/07 15:17:00

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
further improvement to vmm fpu handling (support avx and avx2, block
avx512 and various xsave* instructions)

tested by many


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/07 15:19:29

Modified files:
	lib/libc/compat-43: killpg.3 

Log message:
killpg() is covered by XSI so add a STANDARDS section to that effect
and document that handling of process group 0 is not specified by
the standard.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/07 15:25:59

Modified files:
	usr.bin/tmux   : input-keys.c key-bindings.c server-client.c 
	                 tmux.h tty-keys.c xterm-keys.c 

Log message:
Up to now, tmux sees \033\033[OA as M-Up and since we turned on
xterm-keys by default, generates \033[1;3A instead of
\033\033[OA. Unfortunately this confuses vi, which doesn't understand
xterm keys and now sees Escape+Up pressed within escape-time as Escape
followed by A.

The issue doesn't happen in xterm itself because it gets the keys from X
and can distinguish between a genuine M-Up and Escape+Up.

Because xterm can, tmux can too: xterm will give us \033[1;3A (that is,
kUP3) for a real M-Up and \033\033OA for Escape+Up - in fact, we can be
sure any \033 preceding an xterm key is a real Escape key press because
Meta would be part of the xterm key instead of a separate \033.

So change tmux to recognise both sequences as M-Up for its own purposes,
but generate the xterm version of M-Up only if it originally received
the xterm version from the terminal.

This means we will return to sending \033\033OA instead of the xterm key
for terminals that do not support xterm keys themselves, but there is no
practical way around this because they do not allow us to distinguish
between Escape+Up and M-Up. xterm style escape sequences are now the de
facto standard for these keys in any case.

Problem reported by jsing@ and subsequently by Cecile Tonglet in GitHub
issue 907.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 15:34:53

Added files:
	graphics/qimageblitz/patches: patch-blitz_CMakeLists_txt 

Log message:
obey CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/07 15:41:51

Modified files:
	textproc/glimpse: Makefile 
	textproc/glimpse/patches: patch-index_region_c 
Added files:
	textproc/glimpse/patches: patch-compress_main_tbuild_c 
	                          patch-compress_misc_c 
	                          patch-get_filename_c patch-get_index_c 
	                          patch-index_build_in_c 
	                          patch-index_io_c 

Log message:
Fix clang build, mostly function protoypes.
Freshen HOMEPAGE and MASTER SITES.

ok espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 15:44:33

Modified files:
	usr.bin/mandoc : man_term.c 
	share/man/man7 : man.7 

Log message:
implement .DT in terms of .ta; needed for print/ghostview, for example


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/07 15:44:43

Modified files:
	x11/tktable    : Makefile 
	x11/tktable/patches: patch-configure 
	x11/tktable/pkg: PLIST 

Log message:
Stop treating loadable lib as linkable lib.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 16:10:12

Added files:
	graphics/makehuman/patches: patch-src_Animation_cpp 
	                            patch-src_ConsoleListener_h 
	                            patch-src_util_cpp 

Log message:
correct C++, agrees with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 16:15:50

Modified files:
	textproc/lgrind/patches: patch-lgutil_c 

Log message:
fix return for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/07 16:27:57

Modified files:
	usr.bin/tmux   : format.c tmux.1 tmux.h window-choose.c 
	                 window-clock.c window-copy.c 

Log message:
Add a format for the name of the pane's mode, lets it be used as a
conditional for key bindings.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/07 16:31:54

Modified files:
	faq            : faq1.html 
	.              : mail.html 

Log message:
mention that security advisories will be sent to the announce@ list.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/07 17:12:57

Modified files:
	usr.bin/ssh    : sshd_config.5 sshd.8 ssh_config.5 ssh_config 
	                 packet.c cipher.c cipher.h 

Log message:
As promised in last release announcement: remove support for
Blowfish, RC4 and CAST ciphers. ok markus@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/07 17:13:42

Modified files:
	usr.bin/ssh    : myproposal.h 

Log message:
Don't offer CBC ciphers by default in the client. ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/07 17:15:59

Modified files:
	usr.bin/ssh    : ssh-keygen.c ssh-rsa.c ssh.h ssherr.c ssherr.h 
	                 sshkey.c sshkey.h 

Log message:
Refuse RSA keys <1024 bits in length. Improve reporting for keys that
do not meet this requirement. ok markus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 17:57:16

Modified files:
	misc/rocrail   : Makefile 
Added files:
	misc/rocrail/patches: patch-analyser_impl_analyse_c 
	                      patch-analyser_makefile 
	                      patch-rocdigs_impl_dcc232_c 
	                      patch-rocdigs_impl_ddx_nmra_c 
	                      patch-rocdigs_impl_loconet_c 
	                      patch-rocdigs_impl_loconet_lnmaster_c 
	                      patch-rocdigs_impl_nmra_nmra_c 
	                      patch-rocdigs_impl_opendcc_c 
	                      patch-rocdigs_impl_p50x_c 
	                      patch-rocdigs_impl_xpressnet_opendcc_c 
	                      patch-rocdigs_makefile 
	                      patch-rocint_makefile 
	                      patch-roclcdr_impl_tools_schedules_c 
	                      patch-roclcdr_makefile 
	                      patch-rocrail_impl_action_c 
	                      patch-rocrail_impl_display_c 
	                      patch-rocrail_impl_hclient_c 
	                      patch-rocrail_impl_modplan_c 
	                      patch-rocrail_impl_snmp_c 
	                      patch-rocrail_impl_srcpcon_c 
	                      patch-rocrail_makefile 
	                      patch-rocs_gen_mdoc_c 
	                      patch-rocs_gen_ogen_c 
	                      patch-rocs_gen_wgen_c 
	                      patch-rocs_impl_mem_c 
	                      patch-rocs_impl_str_c 
	                      patch-rocs_impl_unx_umutex_c 
	                      patch-rocs_impl_unx_uthread_c 
	                      patch-rocs_makefile 
	                      patch-rocs_public_rocs_h 
	                      patch-rocutils_makefile 
	                      patch-rocview_makefile 
	                      patch-unxgen_rocs_public_serial_h 

Log message:
make it build with clang, clean up a shitload of warnings and errors,
make it obey CFLAGS, extract the embedded source so we can patch it.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/07 18:13:38

Modified files:
	sys/arch/amd64/amd64: db_trace.c 
	sys/arch/amd64/conf: Makefile.amd64 

Log message:
add printing of arguments in stack traces.

this relies on building the kernel with -msave-args, which has
functions save their register arguments on the stack, so ddb can
easily find them and print them.

while here try to print arguments out of registers if we're at the
top of the stack (ie, if we set a breakpoint on a function entry).

-msave-args is only added to the compiler flags if the kernel has
been configured with ddb. this means it wont waste the space on
RAMDISK kernels because they don't include ddb.

inspired by similar functionality that has been in use on solaris
and its derivatives for well over a decade.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/07 18:21:36

Modified files:
	usr.bin/ssh    : packet.c 

Log message:
I was too aggressive with the scalpel in the last commit;
unbreak sshd, spotted quickly by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/07 18:27:45

Modified files:
	sys/arch/alpha/include: bus.h 
	sys/arch/amd64/include: bus.h 
	sys/arch/arm/include: bus.h 
	sys/arch/arm64/include: bus.h 
	sys/arch/hppa/include: bus.h 
	sys/arch/i386/include: bus.h 
	sys/arch/landisk/include: bus.h 
	sys/arch/loongson/include: bus.h 
	sys/arch/macppc/include: bus.h 
	sys/arch/octeon/include: bus.h 
	sys/arch/sgi/include: bus.h 
	sys/arch/socppc/include: bus.h 
	sys/arch/sparc64/include: bus.h 

Log message:
add a BUS_DMA_64BIT flag to bus_dma on all our archs.

this is so drivers can advertise that they can handle 64 dma addresses
to the platform. it may choose to handle dmamaps differently based
on this flag.

tweaks and ok tom@
ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 19:02:03

ports/graphics/lsys/patches

Update of /cvs/ports/graphics/lsys/patches
In directory cvs.openbsd.org:/tmp/cvs-serv26948/patches

Log Message:
Directory /cvs/ports/graphics/lsys/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 19:02:16

Added files:
	graphics/lsys/patches: patch-config_h_in patch-main_cpp 
	                       patch-util_h 

Log message:
trivial fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/07 19:13:07

Added files:
	x11/kdirstat/patches: patch-kdirstat_kstdcleanup_h 

Log message:
trivial fix for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/07 19:52:49

Modified files:
	regress/usr.bin/ssh: dhgex.sh putty-ciphers.sh ssh-com.sh 

Log message:
remove arcfour, blowfish and CAST here too


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/05/07 20:34:01

Modified files:
	libexec/ld.so  : dlfcn.c malloc.c resolve.h 

Log message:
Always use the same callback to unlock as was used to lock.  Permits
libpthread initialization from a shared object's init (or fini, I suppose)
routines.

ok kurt@ kettenis@ espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/07 21:55:09

Modified files:
	share/man/man7 : roff.7 

Log message:
Convert REQUEST REFERENCE from using .Ss to .Bl -tag, allowing to
specify request arguments and supporting tag searching in less(1).
Improve some entries and document .ta.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/07 22:16:05

Modified files:
	lib/libcrypto/man: BUF_MEM_new.3 

Log message:
BUF_MEM_grow_clean() returns an int, not a size_t. Humourously, on success
it returns "len", which is a size_t value, as an int...


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/08 00:03:39

Modified files:
	usr.bin/ssh    : packet.c 

Log message:
helps if I commit the correct version of the file. fix missing
return statement.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/08 00:08:42

Modified files:
	regress/usr.bin/ssh/unittests/sshkey: test_sshkey.c 

Log message:
fix for new SSH_ERR_KEY_LENGTH error value


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/08 00:11:06

Modified files:
	usr.bin/ssh    : sshkey.c 

Log message:
make requesting bad ECDSA bits yield the same error (SSH_ERR_KEY_LENGTH)
as the same mistake for RSA/DSA


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/08 02:46:39

Modified files:
	sys/net        : if_var.h 
	sys/netinet6   : in6.c ip6_input.c ip6_mroute.c ip6_mroute.h 
	                 ip6_output.c ip6_var.h raw_ip6.c 

Log message:
Added initial IPv6 multicast routing support for multiple rdomains:

* don't share mifs (multicast interface) between rdomains
* allow multiple routing sockets connected at the same time if they are
in different rdomains.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/08 02:57:56

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Fix issues with iwm(4) firmware's retry rate table:

For a HT node, ni_txrate is always zero. We should be using ni_txmcs instead.
Simplify the if-else logic to make sure of that.

The mimo delimiter in the link quality command was never set.
I don't know how important this is. But Linux sets it, so why not.

Hardcode the lowest rate at the tail of the retry table.
While debugging the old code I have encountered retry tables filled
with only 'MCS 8' which is obviously not ideal.

While here, fix a misspelled function prototype.

Tested by kettenis@, mpi@, and Stefan Wollny
ok mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	patrick@cvs.openbsd.org	2017/05/08 03:04:54

Modified files:
	devel/arm-none-eabi/gcc-linaro: Makefile distinfo 
	devel/arm-none-eabi/gcc-linaro/patches: patch-Makefile_in 
	                                        patch-gcc_Makefile_in 
	                                        patch-gcc_config_arm_unknown-elf_h 
	                                        patch-gcc_config_host 
	                                        patch-libgcc_Makefile_in 
	                                        patch-libiberty_Makefile_in 
	devel/arm-none-eabi/gcc-linaro/pkg: PFRAG.aarch64 PFRAG.arm 
Added files:
	devel/arm-none-eabi/gcc-linaro/patches: patch-gcc_configure 
Removed files:
	devel/arm-none-eabi/gcc-linaro/patches: 
	                                        patch-gcc_config_aarch64_geniterators_sh 
	                                        patch-gcc_gcc_c 

Log message:
Update to gcc-linaro-6.3-2017.02 so that we can continue to build
newer U-Boots whose SPL object files get too big to link.  U-Boot
will require gcc 6.0 or later for ARM starting with v2018.01.

ok jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/05/08 03:08:40

Modified files:
	usr.sbin/vmd   : Makefile i8253.c i8253.h i8259.c i8259.h 
	                 mc146818.c mc146818.h ns8250.c ns8250.h 
	                 virtio.c virtio.h 
Added files:
	usr.sbin/vmd   : atomicio.c atomicio.h 

Log message:
Adds functions to read and write state of devices in vmd.

This is required for implementing vmctl send and vmctl receive.  vmctl
send / receive are two new options that will support snapshotting VMs
and migrating VMs from one host to another. The atomicio files are
copied from usr.bin/ssh.

Patch from Pratik Vyas; this project was undertaken at San Jose State
University along with his three teammates, Ashwin, Harshada and Siri
with mlarkin@ as the advisor.

OK mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/08 03:11:20

Modified files:
	sys/nfs        : nfs_socket.c 

Log message:
Sync nfs_connect() w/ sys_connect().

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/08 03:31:34

Modified files:
	usr.bin/netstat: mroute6.c 

Log message:
Make netstat(8) always ask for IPv6 multicast routing information. Worst
case is that we get an empty response instead of a message saying that
there is no multicast support.

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/08 03:32:19

Modified files:
	sys/uvm        : uvm_glue.c 

Log message:
Unifed PMAP_UAREA, unused since we stopped supporting ARM < v7.

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 03:45:14

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Only test the mirror if it's remote (and not a local directory).


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 03:46:52

Modified files:
	print/enscript : Makefile 
	print/ghostview: Makefile 
	print/transfig : Makefile 

Log message:
mandoc(1) now supports .ta and .DT, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 03:55:26

Modified files:
	productivity/siag: Makefile 

Log message:
mandoc(1) now supports .ta, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 04:00:44

Modified files:
	security/pgp   : Makefile 

Log message:
mandoc(1) now supports .ta, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 04:10:32

Modified files:
	x11/xcb        : Makefile 

Log message:
mandoc(1) now supports .ta, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 04:42:18

Modified files:
	devel/libbio   : Makefile 
	devel/libregexp9: Makefile 
	devel/libutf   : Makefile 
	devel/mk       : Makefile 
	devel/sfio     : Makefile 

Log message:
mandoc(1) now supports .ta, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:46:14

Modified files:
	multimedia/gstreamer1: Makefile.inc 

Log message:
Bump to 1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:46:25

Modified files:
	multimedia/gstreamer1/core: Makefile distinfo 
	multimedia/gstreamer1/core/pkg: PLIST 

Log message:
Update to gstreamer1-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:46:39

Modified files:
	multimedia/gstreamer1/plugins-base: Makefile distinfo 
	multimedia/gstreamer1/plugins-base/patches: patch-configure_ac 
	                                            patch-gst_tcp_gstmultihandlesink_c 
	multimedia/gstreamer1/plugins-base/pkg: PLIST 

Log message:
Update to gstreamer1-plugins-base-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:46:53

Modified files:
	multimedia/gstreamer1/plugins-good: Makefile distinfo 
	multimedia/gstreamer1/plugins-good/pkg: PLIST-main PLIST-pulse 

Log message:
Update to gstreamer1-plugins-good-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:47:11

Modified files:
	multimedia/gstreamer1/plugins-bad: Makefile distinfo 
	multimedia/gstreamer1/plugins-bad/patches: patch-configure_ac 
	multimedia/gstreamer1/plugins-bad/pkg: PLIST 
Removed files:
	multimedia/gstreamer1/plugins-bad/patches: 
	                                           patch-ext_apexsink_gstapexraop_c 

Log message:
Update to gstreamer1-plugins-bad-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:47:24

Modified files:
	multimedia/gstreamer1/plugins-ugly: Makefile distinfo 
	multimedia/gstreamer1/plugins-ugly/pkg: PLIST 

Log message:
Update to gstreamer1-plugins-ugly-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:47:35

Modified files:
	multimedia/gstreamer1/plugins-libav: distinfo 

Log message:
Update to gstreamer1-plugins-libav-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:47:46

Modified files:
	multimedia/gstreamer1/py-gstreamer: distinfo 

Log message:
Update to py3-gstreamer1-1.12.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 04:48:04

Modified files:
	multimedia/gstreamer1/mm: Makefile 
Added files:
	multimedia/gstreamer1/mm/patches: 
	                                  patch-gstreamer_gstreamermm_audioclock_cc 
	                                  patch-gstreamer_gstreamermm_caps_cc 
	                                  patch-gstreamer_gstreamermm_caps_h 

Log message:
Fix build with gstreamer1 >=1.12


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/08 05:14:33

Modified files:
	sys/sys        : ctf.h 

Log message:
Use C99 types and add a couple of missing macros needed for ctfconvert(1).


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/08 05:30:53

Modified files:
	sys/net        : hfsc.c 

Log message:
Add a compatibility shim for older pfctl binaries

Found by and input from dlg@, OK sthen, tedu, henning


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 05:50:01

ports/productivity/fet/patches

Update of /cvs/ports/productivity/fet/patches
In directory cvs.openbsd.org:/tmp/cvs-serv3095/patches

Log Message:
Directory /cvs/ports/productivity/fet/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 05:50:27

Added files:
	productivity/fet/patches: patch-src_engine_generate_cpp 
	                          patch-src_interface_constraintstudentsactivitytagmaxhourscontinuouslyform_h 
	                          patch-src_interface_constraintstudentsactivitytagmaxhoursdailyform_h 
	                          patch-src_interface_timetablegenerateform_cpp 
	                          patch-src_interface_timetablegeneratemultipleform_cpp 

Log message:
fixes for clang, don't collide with std::mutex, fix include guards


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 05:56:50

Added files:
	productivity/qhacc/patches: patch-plugins_graphs_grapher_cpp 

Log message:
trivial fix for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 06:06:47

Added files:
	productivity/entomologist/patches: 
	                                   patch-qtsingleapplication_qtlocalpeer_cpp 

Log message:
missing include, fixes clang


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/08 06:27:59

Modified files:
	sys/dev/ic     : r92creg.h 

Log message:
Fix R92C_TXDW4_RTSRATE_M and R92C_TDECTRL_BLK_DESC_NUM_M definitions.

Same changes as FreeBSD r311948 and r287584.
Patch submitted by Kevin Lo. Tested by me.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/08 06:28:39

Modified files:
	sys/dev/usb    : if_urtwn.c 

Log message:
For 8188EU chips, read the R92C_HSSI_PARAM2(0) register to detect whether
the driver needs to enable the CCK high power feature, as already done for
other chips supported by urtwn(4).

Same change as FreeBSD r311347.
Patch submitted by Kevin Lo. Tested by me.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/08 06:41:23

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
In iwm(4) avoid locking the NIC redundantly and perform accounting of
locking and unlocking. Make sure we don't unlock 7000 family NICs while
a command is being processed (later NICs apparently don't need this).

Inspired by similar approaches in Linux and Dragonfly, and a patch given
to me by Imre Vadasz.
Tested by me on 7265 and 8260 devices, and on a 7260 device by Stefan Wollny.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 06:53:28

Modified files:
	games/falconseye: Makefile 
	games/nethack  : Makefile 
	games/slash    : Makefile 
	games/slash-em : Makefile 
	games/sudoku   : Makefile 

Log message:
mandoc(1) now supports .ta, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/08 07:07:40

Modified files:
	sys/dev/pci    : if_iwmvar.h 

Log message:
Unbreak the tree. I missed a header file change in my last iwm(4) commit.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 07:19:10

Modified files:
	shells/es      : Makefile 

Log message:
mandoc(1) now supports .ta, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 07:31:58

Modified files:
	math/netcdf    : Makefile 
Added files:
	math/netcdf/patches: patch-ncgen_ncgen_1 

Log message:
USE_GROFF no longer needed.  While here, add missing escaping
in the ncgen(1) manual that caused loss of a text line.


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/08 07:51:10

Modified files:
	sys/netinet6   : icmp6.c ip6_output.c 

Log message:
Remove icmp6_reflect() micro optimization to simplify code and avoid a
M_LOOP flag dance in ip6_output().

ok bluhm@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/08 08:27:28

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
In iwm_send_cmd(), look at the generation counter instead of the STOPPED flag
to determine whether the interface was reset while we were sleeping. The flag
will be set if the interface is still down when the task wakes up, but the
interface could already be up again in which case the flag will be cleared.

ok mpi@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/08 08:45:47

Modified files:
	lib/libc/gen   : basename.3 dirname.3 

Log message:
Update STANDARDS section, these are now in XSI BASE.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 08:51:52

src/regress/usr.bin/mandoc/roff/ti

Update of /cvs/src/regress/usr.bin/mandoc/roff/ti
In directory cvs.openbsd.org:/tmp/cvs-serv13114/ti

Log Message:
Directory /cvs/src/regress/usr.bin/mandoc/roff/ti added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/08 08:53:27

Modified files:
	lib/libc/gen   : glob.c 

Log message:
Fix exponential CPU use with repeated '*' operators by changing '*'
handling to be interative instead of recursive.
Fix by Yves Orton, ported to OpenBSD glob.c by Ray Lai.  OK tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 09:33:43

Modified files:
	share/man/man7 : roff.7 
	usr.bin/mandoc : mdoc_man.c roff.c roff.h roff_html.c 
	                 roff_term.c roff_validate.c term.h term_ascii.c 
	                 term_ps.c 
	regress/usr.bin/mandoc/roff: Makefile 
Added files:
	regress/usr.bin/mandoc/roff/ti: Makefile basic-man.in 
	                                basic-man.out_ascii 
	                                basic-mdoc.in 
	                                basic-mdoc.out_ascii 

Log message:
Basic implementation of the roff(7) .ti (temporary indent) request.
Needed by about four dozen ports (thanks to naddy@ for the research).


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/08 09:40:05

Modified files:
	x11/ede/lib    : Makefile 
Added files:
	x11/ede/lib/patches: patch-edelib_ts_scheme-private_h 

Log message:
add missing non-inline declarations for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 09:44:56

Modified files:
	databases/gdbm : Makefile 

Log message:
mandoc now supports .ta and .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/08 09:47:49

Modified files:
	sys/kern       : uipc_mbuf.c 

Log message:
add a compile time assertion MSIZE == sizeof(struct mbuf)
ok kettenis mpi tom


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 10:14:32

Modified files:
	x11/qt5/qtbase/patches: patch-configure 
Added files:
	x11/qt5/qtbase/patches: patch-mkspecs_openbsd-clang_qmake_conf 
	                        patch-mkspecs_openbsd-clang_qplatformdefs_h 

Log message:
add glue to detect clang, and basic configuration


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/08 10:14:47

Modified files:
	sys/netinet6   : icmp6.c 

Log message:
Fix a possible NULL pointer deference on icmp6 echo reply caught by
clang.

with tweak from and ok bluhm@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/08 10:15:34

Modified files:
	.              : errata60.html errata61.html 

Log message:
release libssl errata.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 10:17:22

Added files:
	astro/stellarium/patches: 
	                          patch-plugins_TelescopeControl_src_servers_Socket_hpp 

Log message:
missing include on OpenBSD, fd_set not defined


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 10:36:17

Modified files:
	devel/autogen  : Makefile 

Log message:
mandoc(1) now supports .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 10:57:08

Modified files:
	devel/glib2    : Makefile distinfo 
	devel/glib2/patches: patch-gio_kqueue_gkqueuefilemonitor_c 
	                     patch-gio_kqueue_kqueue-helper_c 
	devel/glib2/pkg: PLIST 

Log message:
Update to glib2-2.52.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 11:01:18

Modified files:
	productivity   : Makefile 
Removed files:
	productivity/tryton: DESCR-module Makefile Makefile.inc 
	productivity/tryton/account: Makefile distinfo 
	productivity/tryton/account/pkg: PLIST 
	productivity/tryton/account_asset: Makefile distinfo 
	productivity/tryton/account_asset/pkg: PLIST 
	productivity/tryton/account_be: Makefile distinfo 
	productivity/tryton/account_be/pkg: PLIST 
	productivity/tryton/account_credit_limit: Makefile distinfo 
	productivity/tryton/account_credit_limit/pkg: PLIST 
	productivity/tryton/account_de_skr03: Makefile distinfo 
	productivity/tryton/account_de_skr03/pkg: PLIST 
	productivity/tryton/account_dunning: Makefile distinfo 
	productivity/tryton/account_dunning/pkg: PLIST 
	productivity/tryton/account_dunning_letter: Makefile distinfo 
	productivity/tryton/account_dunning_letter/pkg: PLIST 
	productivity/tryton/account_fr: Makefile distinfo 
	productivity/tryton/account_fr/pkg: PLIST 
	productivity/tryton/account_invoice: Makefile distinfo 
	productivity/tryton/account_invoice/pkg: PLIST 
	productivity/tryton/account_invoice_history: Makefile distinfo 
	productivity/tryton/account_invoice_history/pkg: PLIST 
	productivity/tryton/account_invoice_line_standalone: Makefile 
	                                                     distinfo 
	productivity/tryton/account_invoice_line_standalone/pkg: PLIST 
	productivity/tryton/account_invoice_stock: Makefile distinfo 
	productivity/tryton/account_invoice_stock/pkg: PLIST 
	productivity/tryton/account_payment: Makefile distinfo 
	productivity/tryton/account_payment/pkg: PLIST 
	productivity/tryton/account_payment_sepa: Makefile distinfo 
	productivity/tryton/account_payment_sepa/pkg: PLIST 
	productivity/tryton/account_product: Makefile distinfo 
	productivity/tryton/account_product/pkg: PLIST 
	productivity/tryton/account_statement: Makefile distinfo 
	productivity/tryton/account_statement/pkg: PLIST 
	productivity/tryton/account_stock_anglo_saxon: Makefile distinfo 
	productivity/tryton/account_stock_anglo_saxon/pkg: PLIST 
	productivity/tryton/account_stock_continental: Makefile distinfo 
	productivity/tryton/account_stock_continental/pkg: PLIST 
	productivity/tryton/analytic_account: Makefile distinfo 
	productivity/tryton/analytic_account/pkg: PLIST 
	productivity/tryton/analytic_invoice: Makefile distinfo 
	productivity/tryton/analytic_invoice/pkg: PLIST 
	productivity/tryton/analytic_purchase: Makefile distinfo 
	productivity/tryton/analytic_purchase/pkg: PLIST 
	productivity/tryton/analytic_sale: Makefile distinfo 
	productivity/tryton/analytic_sale/pkg: PLIST 
	productivity/tryton/bank: Makefile distinfo 
	productivity/tryton/bank/pkg: PLIST 
	productivity/tryton/calendar: Makefile distinfo 
	productivity/tryton/calendar/pkg: PLIST 
	productivity/tryton/calendar_classification: Makefile distinfo 
	productivity/tryton/calendar_classification/pkg: PLIST 
	productivity/tryton/calendar_scheduling: Makefile distinfo 
	productivity/tryton/calendar_scheduling/pkg: PLIST 
	productivity/tryton/calendar_todo: Makefile distinfo 
	productivity/tryton/calendar_todo/pkg: PLIST 
	productivity/tryton/carrier: Makefile distinfo 
	productivity/tryton/carrier/pkg: PLIST 
	productivity/tryton/carrier_percentage: Makefile distinfo 
	productivity/tryton/carrier_percentage/pkg: PLIST 
	productivity/tryton/carrier_weight: Makefile distinfo 
	productivity/tryton/carrier_weight/pkg: PLIST 
	productivity/tryton/company: Makefile distinfo 
	productivity/tryton/company/pkg: PLIST 
	productivity/tryton/company_work_time: Makefile distinfo 
	productivity/tryton/company_work_time/pkg: PLIST 
	productivity/tryton/country: Makefile distinfo 
	productivity/tryton/country/pkg: PLIST 
	productivity/tryton/currency: Makefile distinfo 
	productivity/tryton/currency/pkg: PLIST 
	productivity/tryton/dashboard: Makefile distinfo 
	productivity/tryton/dashboard/pkg: PLIST 
	productivity/tryton/google_maps: Makefile distinfo 
	productivity/tryton/google_maps/pkg: PLIST 
	productivity/tryton/ldap_authentication: Makefile distinfo 
	productivity/tryton/ldap_authentication/pkg: PLIST 
	productivity/tryton/ldap_connection: Makefile distinfo 
	productivity/tryton/ldap_connection/pkg: PLIST 
	productivity/tryton/party: Makefile distinfo 
	productivity/tryton/party/pkg: PLIST 
	productivity/tryton/party_relationship: Makefile distinfo 
	productivity/tryton/party_relationship/pkg: PLIST 
	productivity/tryton/party_siret: Makefile distinfo 
	productivity/tryton/party_siret/pkg: PLIST 
	productivity/tryton/party_vcarddav: Makefile distinfo 
	productivity/tryton/party_vcarddav/pkg: PLIST 
	productivity/tryton/product: Makefile distinfo 
	productivity/tryton/product/pkg: PLIST 
	productivity/tryton/product_attribute: Makefile distinfo 
	productivity/tryton/product_attribute/pkg: PLIST 
	productivity/tryton/product_cost_fifo: Makefile distinfo 
	productivity/tryton/product_cost_fifo/pkg: PLIST 
	productivity/tryton/product_cost_history: Makefile distinfo 
	productivity/tryton/product_cost_history/pkg: PLIST 
	productivity/tryton/product_measurements: Makefile distinfo 
	productivity/tryton/product_measurements/pkg: PLIST 
	productivity/tryton/product_price_list: Makefile distinfo 
	productivity/tryton/product_price_list/pkg: PLIST 
	productivity/tryton/production: Makefile distinfo 
	productivity/tryton/production/pkg: PLIST 
	productivity/tryton/project: Makefile distinfo 
	productivity/tryton/project/pkg: PLIST 
	productivity/tryton/project_invoice: Makefile distinfo 
	productivity/tryton/project_invoice/pkg: PLIST 
	productivity/tryton/project_plan: Makefile distinfo 
	productivity/tryton/project_plan/pkg: PLIST 
	productivity/tryton/project_revenue: Makefile distinfo 
	productivity/tryton/project_revenue/pkg: PLIST 
	productivity/tryton/proteus: Makefile distinfo 
	productivity/tryton/proteus/pkg: DESCR PLIST 
	productivity/tryton/purchase: Makefile distinfo 
	productivity/tryton/purchase/pkg: PLIST 
	productivity/tryton/purchase_invoice_line_standalone: Makefile 
	                                                      distinfo 
	productivity/tryton/purchase_invoice_line_standalone/pkg: PLIST 
	productivity/tryton/purchase_shipment_cost: Makefile distinfo 
	productivity/tryton/purchase_shipment_cost/pkg: PLIST 
	productivity/tryton/sale: Makefile distinfo 
	productivity/tryton/sale/pkg: PLIST 
	productivity/tryton/sale_credit_limit: Makefile distinfo 
	productivity/tryton/sale_credit_limit/pkg: PLIST 
	productivity/tryton/sale_invoice_grouping: Makefile distinfo 
	productivity/tryton/sale_invoice_grouping/pkg: PLIST 
	productivity/tryton/sale_opportunity: Makefile distinfo 
	productivity/tryton/sale_opportunity/pkg: PLIST 
	productivity/tryton/sale_price_list: Makefile distinfo 
	productivity/tryton/sale_price_list/pkg: PLIST 
	productivity/tryton/sale_shipment_cost: Makefile distinfo 
	productivity/tryton/sale_shipment_cost/pkg: PLIST 
	productivity/tryton/sale_shipment_grouping: Makefile distinfo 
	productivity/tryton/sale_shipment_grouping/pkg: PLIST 
	productivity/tryton/sale_supply: Makefile distinfo 
	productivity/tryton/sale_supply/pkg: PLIST 
	productivity/tryton/sale_supply_drop_shipment: Makefile distinfo 
	productivity/tryton/sale_supply_drop_shipment/pkg: PLIST 
	productivity/tryton/stock: Makefile distinfo 
	productivity/tryton/stock/pkg: PLIST 
	productivity/tryton/stock_forecast: Makefile distinfo 
	productivity/tryton/stock_forecast/pkg: PLIST 
	productivity/tryton/stock_inventory_location: Makefile distinfo 
	productivity/tryton/stock_inventory_location/pkg: PLIST 
	productivity/tryton/stock_location_sequence: Makefile distinfo 
	productivity/tryton/stock_location_sequence/pkg: PLIST 
	productivity/tryton/stock_lot: Makefile distinfo 
	productivity/tryton/stock_lot/pkg: PLIST 
	productivity/tryton/stock_package: Makefile distinfo 
	productivity/tryton/stock_package/pkg: PLIST 
	productivity/tryton/stock_product_location: Makefile distinfo 
	productivity/tryton/stock_product_location/pkg: PLIST 
	productivity/tryton/stock_split: Makefile distinfo 
	productivity/tryton/stock_split/pkg: PLIST 
	productivity/tryton/stock_supply: Makefile distinfo 
	productivity/tryton/stock_supply/pkg: PLIST 
	productivity/tryton/stock_supply_day: Makefile distinfo 
	productivity/tryton/stock_supply_day/pkg: PLIST 
	productivity/tryton/stock_supply_forecast: Makefile distinfo 
	productivity/tryton/stock_supply_forecast/pkg: PLIST 
	productivity/tryton/stock_supply_production: Makefile distinfo 
	productivity/tryton/stock_supply_production/pkg: PLIST 
	productivity/tryton/timesheet: Makefile distinfo 
	productivity/tryton/timesheet/pkg: PLIST 
	productivity/tryton/timesheet_cost: Makefile distinfo 
	productivity/tryton/timesheet_cost/pkg: PLIST 
	productivity/tryton/tryton: Makefile distinfo 
	productivity/tryton/tryton/pkg: DESCR PLIST 
	productivity/tryton/trytond: Makefile distinfo 
	productivity/tryton/trytond/patches: patch-etc_trytond_conf 
	productivity/tryton/trytond/pkg: DESCR PLIST README trytond.rc 

Log message:
Delete tryton; the version we have in ports is not really maintained. I started
to work on an diff to update everything to the latest release just to realise
that there wasn't a point in doing this it's essentially a matter of
ftp+tar xzf. Not worth maintaining 100+ packages.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 11:01:41

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register tryton and trytond removal.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 11:17:50

Modified files:
	x11/gnome/desktop: Makefile distinfo 

Log message:
Update to gnome-desktop-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 11:19:21

Modified files:
	meta/gnome     : Makefile 

Log message:
Welcome GNOME 3.24.2!


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 11:25:41

Modified files:
	math/yorick    : Makefile 

Log message:
mandoc(1) now supports .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 11:41:49

Modified files:
	misc/viz       : Makefile 

Log message:
mandoc(1) now supports .ta and .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/08 11:52:46

Modified files:
	devel/jdk/1.8  : Makefile 

Log message:
no longer hangs. make sure your ld.so is uptodate!!!


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 12:01:02

Modified files:
	databases/evolution-data-server: Makefile distinfo 
Removed files:
	databases/evolution-data-server/patches: patch-CMakeLists_txt 
	                                         patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Update to evolution-data-server-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 12:01:16

Modified files:
	mail/evolution : Makefile distinfo 
Removed files:
	mail/evolution/patches: 
	                        patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Update to evolution-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 12:01:29

Modified files:
	mail/evolution-ews: Makefile distinfo 
Removed files:
	mail/evolution-ews/patches: 
	                            patch-cmake_modules_SetupBuildFlags_cmake 

Log message:
Update to evolution-ews-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 12:10:25

Modified files:
	net/arpwatch   : Makefile 
	net/libnet/1.0 : Makefile 
	net/packit     : Makefile 
	net/sing       : Makefile 
	net/tcpreplay  : Makefile 
	net/tcpshow    : Makefile 
	net/tcpslice   : Makefile 

Log message:
mandoc(1) now supports .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/05/08 12:19:02

Modified files:
	sys/dev/ic     : rtwn.c 

Log message:
8192C is the only MIMO chip supported by this driver, all others are 1T1R.
This diff corrects dmesg to properly show that all others are 1T1R, since right
now it only applies to 8188C and all others incorrectly display 0T0R.

hint & OK stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/08 12:46:03

Modified files:
	devel/libsoup  : Makefile distinfo 
	devel/libsoup/pkg: PLIST 

Log message:
Update to libsoup-2.58.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 12:46:38

Modified files:
	news/tin       : Makefile 
	x11/dclock     : Makefile 

Log message:
mandoc(1) now supports .ta and .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 12:49:59

Modified files:
	print/bibview  : Makefile 
	print/l2a      : Makefile 
	security/libident: Makefile 
	x11/xprompt    : Makefile 

Log message:
mandoc(1) now supports .ti, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/08 12:54:01

Modified files:
	x11/gnome/gjs  : Makefile distinfo 

Log message:
update to gjs-1.48.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/08 13:17:22

Modified files:
	sysutils/beats/filebeat: Makefile distinfo 
	sysutils/beats/filebeat/pkg: PLIST 
	sysutils/beats/heartbeat: Makefile distinfo 
	sysutils/beats/heartbeat/pkg: PLIST 
	sysutils/beats/metricbeat: Makefile distinfo 
	sysutils/beats/metricbeat/pkg: PLIST 
	sysutils/beats/packetbeat: Makefile distinfo 
	sysutils/beats/packetbeat/pkg: PLIST 
Removed files:
	sysutils/beats/filebeat/patches: 
	                                 patch-libbeat_outputs_console_console_go 

Log message:
update to beats-5.4.0

https://www.elastic.co/guide/en/beats/libbeat/5.4/release-notes-5.4.0.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/08 13:20:58

Modified files:
	textproc/elasticsearch: Makefile distinfo 
	textproc/elasticsearch/pkg: PLIST 

Log message:
update to elasticsearch-5.4.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/08 13:41:11

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to p5-SVG-2.75


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/08 13:42:24

Modified files:
	net/pork       : Makefile 
Added files:
	net/pork/patches: patch-src_pork_h patch-src_pork_queue_c 

Log message:
The author did not understand the semantics of "inline" at all.
Define it away.  Fixes the build with clang.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/08 14:04:06

Modified files:
	.              : ftp.html httpslist 
	build          : mirrors.dat 
	openbgpd       : ftp.html 
	openntpd       : portable.html 
	openssh        : ftp.html portable.html 

Log message:
https for openbsd.c3sl.ufpr.br


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/05/08 14:13:10

Modified files:
	sys/arch/i386/stand/libsa: pxe_net.c 

Log message:
Guard debug printf with NETIF_DEBUG ifdef like the other debug prints.

ok tom@


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/05/08 14:13:46

Modified files:
	sys/lib/libsa  : nfs.c 

Log message:
Guard debug printf with NFS_DEBUG ifdef like the other debug prints.

ok tom@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/05/08 14:13:47

Modified files:
	games/blobwars : Makefile distinfo 
	games/blobwars/patches: patch-makefile patch-src_init_cpp 
	                        patch-src_main_cpp patch-src_map_cpp 
	games/blobwars/pkg: PLIST 
Added files:
	games/blobwars/patches: patch-Makefile 

Log message:
Update to blobwars-2.00.

ok rsadowski@


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/08 14:15:34

Modified files:
	usr.sbin/ocspcheck: ocspcheck.c 

Log message:
Print size_t's correctly.
Fix from Jonas 'Sortie' Termansen <sortie@maxsi.org>


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/05/08 14:16:24

Removed files:
	games/blobwars/patches: patch-makefile 

Log message:
Grr. rm patches/patch-makefile.


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/05/08 14:24:03

Modified files:
	sys/net        : pf_table.c 

Log message:
Replace the global variables pfr_{sin,sin6} with stack local variables
so that we can run these parts of pf in parallel.  Also replace a
single usage of pfr_mask with a stack local variable.

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 14:33:40

Modified files:
	usr.bin/mandoc : man.c roff.c 

Log message:
Line-breaking roff(7) requests also break man(7) next-line scope.
Considering that real roff implements next-line scope using input
line traps, that isn't all that surprising.
Issue found in the games/xbattle port.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 14:37:06

Modified files:
	games/xbattle  : Makefile 

Log message:
Only minor whitespace differences between groff and mandoc caused
by invalid man(7) syntax, so drop USE_GROFF.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/08 14:45:23

Modified files:
	sysutils/beats : Makefile.inc 

Log message:
add plumbing for installing modules; not actually used yet


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/05/08 14:55:29

Modified files:
	sys/dev/pckbc  : pms.c 
	sys/dev/usb    : ubcmtp.c 
	sys/dev/wscons : wsconsio.h wsmouse.c wsmouseinput.h wstpad.c 

Log message:
improved coordinate filters

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/08 14:58:40

Modified files:
	gnu/gcc/gcc    : opts.c opts.h toplev.c 

Log message:
gcc 4.9 makes unknown -Wno-* vanish.

Reimplement that from scratch in our ancient gcc, because it's really
useful for porting newer code and dealing with compiler variations.
(slightly tweaked to reset location to unknown location after the okays)

okay kettenis@ jasper@

found out https://gcc.gnu.org/bugzilla/show_bug.cgi?id=28322
after the patch, which explains a similar reasoning better, and leads
to another patch for older GCC, possibly GPLv3.


CVSROOT:	/cvs
Module name:	src
Changes by:	beck@cvs.openbsd.org	2017/05/08 15:12:36

Modified files:
	usr.bin/openssl: ca.c 

Log message:
simplify startdate/enddate validation
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/08 15:13:26

Modified files:
	sys/netinet6   : mld6.c 

Log message:
Fix a compilation error on arm64 that was caught by clang.

Found by kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/08 15:17:09

Modified files:
	sys/arch/amd64/amd64: db_trace.c 

Log message:
After a break point at the beginning of a function, printing its
arguments faulted in ddb.  Accessing the register arguments was off
by one and in wrong order.
OK dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 15:35:35

Modified files:
	net/ap-utils   : Makefile 

Log message:
These manuals are written in such a messy style that they actually
look a bit better with mandoc than with groff (but no tool will
make them look nice).  Drop USE_GROFF.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/08 15:40:10

Modified files:
	net/pchar      : Makefile 
Added files:
	net/pchar/patches: patch-PctestIpv4File_cc patch-PctestIpv4_h 
	                   patch-PctestIpv6File_cc patch-PctestIpv6_h 
	                   patch-Pctest_h patch-ResultTable_cc 
	                   patch-TestRecord_cc patch-configure 
	                   patch-main_cc 

Log message:
fix a number of warnings and errors for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 16:03:53

Modified files:
	textproc/lgrind: Makefile 

Log message:
no relevant difference in formatting, drop USE_GROFF


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/08 16:23:35

Modified files:
	x11/xscreensaver: Makefile 

Log message:
No relevant formatting differences, mandoc even looks better in a
number of respects, so drop USE_GROFF.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/08 16:57:38

Modified files:
	usr.bin/ssh    : digest-libc.c digest-openssl.c digest.h mac.c 

Log message:
remove hmac-ripemd160; ok dtucker


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/08 19:26:34

Modified files:
	build          : mirrors.dat 

Log message:
re-add UH line mistakenly removed in the previous commit.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/05/08 22:11:18

Modified files:
	sysutils/u-boot: Makefile distinfo 
	sysutils/u-boot/pkg: PFRAG.aarch64 PFRAG.arm 
Added files:
	sysutils/u-boot/patches: patch-lib_bch_c 
Removed files:
	sysutils/u-boot/patches: patch-tools_Makefile 

Log message:
update to U-Boot 2017.05

Tested on CuBox-i4Pro, BeagleBone Black, PandaBoard ES and
Raspberry Pi 3 Model B.


CVSROOT:	/cvs
Module name:	ports
Changes by:	patrick@cvs.openbsd.org	2017/05/08 23:58:36

Modified files:
	devel/arm-none-eabi/gcc-linaro/patches: patch-gcc_configure 

Log message:
Fixup and remove duplicate addition of a patch.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 00:07:07

Modified files:
	cad/xtrkcad    : Makefile distinfo 
	cad/xtrkcad/patches: patch-app_bin_CMakeLists_txt 
	cad/xtrkcad/pkg: PLIST 

Log message:
Simple update to 4.3.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 00:09:42

Modified files:
	devel/py-voluptuous: Makefile distinfo 

Log message:
simple update to 0.10.5, fixing some unicode translations


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 00:12:09

Modified files:
	www/py-urllib3 : Makefile distinfo 
	www/py-urllib3/pkg: PLIST 

Log message:
Update to 1.21.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 00:18:13

Modified files:
	cad/xtrkcad    : Makefile 
Added files:
	cad/xtrkcad/patches: patch-app_lib_CMakeLists_txt 

Log message:
Add patch file missed in last commit


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 00:21:30

Modified files:
	cad/xtrkcad    : Makefile 

Log message:
Fixup Makefile, Need more coffee


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:11:56

Modified files:
	devel/xdg-utils: Makefile distinfo 
	devel/xdg-utils/patches: patch-scripts_xdg-email_in 
	                         patch-scripts_xdg-mime_in 
	                         patch-scripts_xdg-open_in 
	                         patch-scripts_xdg-screensaver_in 
	                         patch-scripts_xdg-utils-common_in 

Log message:
Update to xdg-utils-1.1.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:18:13

Modified files:
	devel/appstream-glib: Makefile distinfo 
	devel/appstream-glib/pkg: PLIST 

Log message:
Update to appstream-glib-0.6.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:29:42

Modified files:
	x11/gnome/maps : Makefile distinfo 

Log message:
Update to gnome-maps-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:33:33

Modified files:
	mail/cyrus-imapd: Makefile distinfo 
	mail/cyrus-imapd/patches: patch-configure 
Added files:
	mail/cyrus-imapd/patches: patch-imap_mbexamine_c 
Removed files:
	mail/cyrus-imapd/patches: patch-imap_mailbox_c 
	                          patch-imap_sync_client_c 

Log message:
Update to cyrus-imapd-2.5.11.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:36:52

Modified files:
	x11/gnome/at-spi2-core: Makefile distinfo 

Log message:
Update to at-spi2-core-2.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:37:02

Modified files:
	x11/gnome/at-spi2-atk: Makefile distinfo 

Log message:
Update to at-spi2-atk-2.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 01:46:05

Modified files:
	databases/p5-DBIx-SearchBuilder: Makefile distinfo 

Log message:
Update to p5-DBIx-SearchBuilder-1.67.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:47:49

Modified files:
	x11/gnome/user-docs: Makefile distinfo 
	x11/gnome/user-docs/pkg: PLIST 

Log message:
Update to gnome-user-docs-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 01:49:35

Modified files:
	x11/gnome/music: Makefile distinfo 

Log message:
Update to gnome-music-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:00:58

Modified files:
	devel/p5-DateTime-Format-Pg: Makefile distinfo 

Log message:
Update to p5-DateTime-Format-Pg-0.16013.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:07:01

Modified files:
	devel/p5-DateTime-Set: Makefile distinfo 

Log message:
Update to p5-DateTime-Set-0.3900.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:12:45

Modified files:
	devel/p5-File-HomeDir: Makefile distinfo 

Log message:
Update to p5-File-HomeDir-1.002.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:16:32

Modified files:
	devel/p5-File-pushd: Makefile distinfo 

Log message:
Update to p5-File-pushd-1.014.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:22:00

Modified files:
	devel/p5-IPC-Run: Makefile distinfo 

Log message:
Update to p5-IPC-Run-0.95.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:29:07

Modified files:
	devel/p5-Log-Dispatch-FileRotate: Makefile distinfo 

Log message:
Update to p5-Log-Dispatch-FileRotate-1.25.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 02:35:56

Modified files:
	x11/gnome/builder: Makefile distinfo 
	x11/gnome/builder/pkg: PLIST 

Log message:
Update to gnome-builder-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 02:41:24

Modified files:
	devel/p5-MooseX-AttributeHelpers: Makefile distinfo 

Log message:
Update to p5-MooseX-AttributeHelpers-0.25.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/09 03:19:03

Modified files:
	devel/p5-Path-Class: Makefile distinfo 

Log message:
Update to p5-Path-Class-0.37.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/09 03:31:07

Modified files:
	sys/net        : if.c 

Log message:
pfctlinput(PRC_IFDOWN, ...) has no effect on OpenBSD so remove it.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/09 03:32:21

Modified files:
	sys/netinet6   : ip6_output.c nd6.c 

Log message:
Kill commented out code referencing pfctlinput2() and a wrong comment
about pfctlinput(PRC_HOSTDEAD).

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/09 03:36:04

Modified files:
	sys/uvm        : uvm_meter.c 

Log message:
Stop considering some sleeping threads are running.

PZERO used to be a special value in the first BSD releases but since
the introduction of tsleep(9) there's no way to tell if a thread is
going to sleep for a "short" period of time.

This remove the only (ab)use of ``p_priority'' outside the scheuler
logic, which will help moving avway from a priority-based scheduler.

ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/09 03:37:25

Modified files:
	sys/kern       : uipc_domain.c 

Log message:
Convert a splsoftnet()/splx() dance to NET_ASSERT_LOCKED().

pfctlinput() is only called in the input path with the NET_LOCK() held.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/09 05:00:48

Modified files:
	usr.bin/tmux   : cmd-rotate-window.c 

Log message:
Set current pane in rotate-window.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/09 05:01:06

Modified files:
	sys/netinet    : tcp_subr.c 

Log message:
Convert diagnostic panic to compile time assert in tcp6_ctlinput().
No binary change.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/05/09 05:08:22

Modified files:
	multimedia/libv4l: Makefile distinfo 

Log message:
Update to libv4l 1.12.4

No functional change as the update only contains changes in libdvbv5 which we
currently do not build on OpenBSD.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/09 05:09:38

Modified files:
	sys/ddb        : db_ctf.c 

Log message:
Use C99 types.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/05/09 05:59:38

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
Add aarch64 to ALL_ARCHS. OK espie@.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 06:23:04

Modified files:
	usr.sbin/syspatch: syspatch.8 

Log message:
Document that patches are cumulative and as such it is not possible to install
only a subset of them.

with input from jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/09 07:01:42

Modified files:
	games/micropolis: Makefile 
	games/micropolis/patches: patch-Micropolis patch-src_sim_g_ani_c 
	                          patch-src_sim_g_bigmap_c 
	                          patch-src_sim_g_map_c 
	                          patch-src_sim_g_setup_c 
	                          patch-src_sim_headers_sim_h 
	                          patch-src_sim_makefile 
	                          patch-src_sim_s_alloc_c 
	                          patch-src_sim_s_disast_c 
	                          patch-src_sim_s_eval_c 
	                          patch-src_sim_s_fileio_c 
	                          patch-src_sim_s_gen_c 
	                          patch-src_sim_s_init_c 
	                          patch-src_sim_s_msg_c 
	                          patch-src_sim_s_power_c 
	                          patch-src_sim_s_scan_c 
	                          patch-src_sim_s_sim_c 
	                          patch-src_sim_s_traf_c 
	                          patch-src_sim_s_zone_c 
	                          patch-src_sim_sim_c 
	                          patch-src_sim_w_budget_c 
	                          patch-src_sim_w_con_c 
	                          patch-src_sim_w_date_c 
	                          patch-src_sim_w_editor_c 
	                          patch-src_sim_w_eval_c 
	                          patch-src_sim_w_graph_c 
	                          patch-src_sim_w_keys_c 
	                          patch-src_sim_w_map_c 
	                          patch-src_sim_w_resrc_c 
	                          patch-src_sim_w_sound_c 
	                          patch-src_sim_w_sprite_c 
	                          patch-src_sim_w_stubs_c 
	                          patch-src_sim_w_tk_c 
	                          patch-src_sim_w_tool_c 
	                          patch-src_sim_w_update_c 
	                          patch-src_sim_w_util_c 
	                          patch-src_sim_w_x_c 
	                          patch-src_tcl_makefile 
	                          patch-src_tcl_tclcmdmz_c 
	                          patch-src_tcl_tclenv_c 
	                          patch-src_tcl_tclglob_c 
	                          patch-src_tcl_tclparse_c 
	                          patch-src_tcl_tclunxaz_c 
	                          patch-src_tcl_tclutil_c 
	                          patch-src_tclx_config_linux 
	                          patch-src_tclx_config_mk 
	                          patch-src_tclx_src_tclxcclk_c 
	                          patch-src_tclx_src_tclxclck_c 
	                          patch-src_tclx_src_tclxfcmd_c 
	                          patch-src_tclx_src_tclxfsca_c 
	                          patch-src_tclx_src_tclxgdat_y 
	                          patch-src_tclx_src_tclxint_h 
	                          patch-src_tclx_src_tclxlib_c 
	                          patch-src_tclx_src_tclxproc_c 
	                          patch-src_tclx_src_tclxsig_c 
	                          patch-src_tclx_src_tclxstr_c 
	                          patch-src_tclx_src_tclxunix_c 
	                          patch-src_tclx_tkucbsrc_tkevent_sed 
	                          patch-src_tclx_ucbsrc_makefile 
	                          patch-src_tclx_ucbsrc_tclbasic_sed 
	                          patch-src_tclx_ucbsrc_tclexpr_sed 
	                          patch-src_tk_makefile 
	                          patch-src_tk_tkbitmap_c 
	                          patch-src_tk_tkbutton_c 
	                          patch-src_tk_tkcmds_c 
	                          patch-src_tk_tkconfig_c 
	                          patch-src_tk_tkcursor_c 
	                          patch-src_tk_tkerror_c 
	                          patch-src_tk_tkevent_c 
	                          patch-src_tk_tkfont_c 
	                          patch-src_tk_tkoption_c 
	                          patch-src_tk_tkpack_c 
	                          patch-src_tk_tkpixmap_c 
	                          patch-src_tk_tkrawtcp_c 
	                          patch-src_tk_tkselect_c 
	                          patch-src_tk_tksend_c 
	                          patch-src_tk_tkshare_c 
	                          patch-src_tk_tkwindow_c 
	                          patch-src_tk_tkwm_c 

Log message:
use modern idioms for subst, pass X11BASE on the command line.
regen all patches for newer headers.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/09 07:04:36

Modified files:
	usr.bin/tmux   : server-client.c tmux.h tty.c 

Log message:
If the current screen was complex enough, it was possible to make redraw
itself hit the "terminal can't keep up" check. To avoid this, record how
much data we send during redraw (we know we will be starting with 0) and
skip the check until it has been flushed. GitHub issue 912.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/09 07:33:50

Modified files:
	sys/netinet    : in_proto.c 
	sys/netinet6   : in6_proto.c 

Log message:
Remove rip_output() and rip6_output() from inetsw and inet6sw.  The
rip_output() function is never called via the pr_output pointer.
rip_usrreq(PRU_SEND) calls rip_output() directly.  raw_usrreq() is
never called from inetsw.  Situation in inet and inet6 is analog.
OK claudio@ mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	tsg@cvs.openbsd.org	2017/05/09 07:37:08

Modified files:
	infrastructure/lib/OpenBSD/PortGen/Port: CPAN.pm 

Log message:
Set CONFIGURE_STYLE = modbuild tiny for p5 ports using Module::Build::Tiny.
While at it, fix indentation.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 07:38:55

Modified files:
	devel/ruby-puppet_forge: Makefile distinfo 

Log message:
simple update to 2.2.4, loosen dependency to ruby-minitar


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/05/09 07:40:18

Modified files:
	app/cwm        : calmwm.h conf.c kbfunc.c mousefunc.c xevents.c 

Log message:
Alter callbacks to take a struct instead of a growing number of arguments;
greatly simplifies upcoming work.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 07:44:03

Modified files:
	devel/ruby-gettext-setup: Makefile distinfo 
	devel/ruby-gettext-setup/pkg: PLIST 

Log message:
Update to 0.24


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 07:45:59

Modified files:
	sysutils/ruby-r10k: Makefile distinfo 

Log message:
Bugfix update to 2.5.4, tighten dependency to ruby-minitar, as it
is in the gemspec


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/05/09 07:52:45

Modified files:
	lib/libkeynote : signature.c 

Log message:
Prevent memory leak on sbuf by freeing it unconditionally and ensure
finalbuf is also free'd if kn_encode_base64 somehow fails

hint from tb@, OK millert@ and tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/09 08:09:37

Modified files:
	usr.bin/mandoc : man_html.c man_term.c mdoc_html.c mdoc_term.c 

Log message:
Trailing \c suppresses the output line break even if
the next line is a text line starting with whitespace.
Quirk found in the sysutils/rancid port.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/09 08:18:28

Modified files:
	infrastructure/lib/DPB: Vars.pm 

Log message:
if I want to enforce rules on WRKDIST, I'd better respect them first


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/09 08:51:11

Modified files:
	graphics/pstoedit: Makefile 
	net/netpipes   : Makefile 
	x11/x11vnc     : Makefile 

Log message:
unimportant whitespace differences only, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/09 09:11:33

Modified files:
	sys/arch/octeon/conf: ld.script 
	sys/arch/octeon/octeon: locore.S 

Log message:
Mix bits from the built-in RNG with the randomdata section at boot time.
This should improve considerably the quality of early entropy and
stack protector guard data on octeon.

Suggested by and OK deraadt@
OK kettenis@, jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/09 09:20:55

Modified files:
	sys/arch/loongson/dev: htb.c 

Log message:
Fix range check.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/09 09:29:10

Modified files:
	sys/arch/loongson/loongson: generic3a_machdep.c 

Log message:
Whitelist SMBus IO addresses to let the driver, piixpm(4), work again.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 09:42:10

Modified files:
	x11/gnome/getting-started-docs: Makefile distinfo 

Log message:
Update to gnome-getting-started-docs-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/09 11:08:34

Modified files:
	www/kibana     : Makefile distinfo 
	www/kibana/pkg : PLIST 

Log message:
update to kibana-5.4.0

from Pavel Korovin (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/09 11:19:30

Modified files:
	sysutils/consul: Makefile 

Log message:
set version.Version to ensure the newer version check doesn't fire errorneously

ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/09 11:25:50

Modified files:
	x11/gnome/settings-daemon: Makefile distinfo 
	x11/gnome/settings-daemon/patches: patch-configure_ac 

Log message:
Update to gnome-settings-daemon-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/09 11:31:14

Modified files:
	www/webkitgtk4 : Makefile 
	www/webkitgtk4/patches: patch-Source_cmake_OptionsCommon_cmake 

Log message:
replace fragile hack with more sturdy cmake magic. okay aja@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/09 11:56:55

Modified files:
	usr.bin/tmux   : cmd-send-keys.c 

Log message:
If the target pane for send-keys in in a mode with a key table (that is,
copy mode), then look the key up in the table and fire any command
instead of delivering the key to the pane directly where it will be
ignored. This makes C-b C-b (send-prefix) work in copy mode again.


CVSROOT:	/cvs
Module name:	www
Changes by:	brynet@cvs.openbsd.org	2017/05/09 12:13:00

Modified files:
	.              : want.html 

Log message:
Remove my request, thanks generously to Bill Allaire


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/05/09 12:43:40

Modified files:
	app/cwm        : xevents.c 

Log message:
drop obsolete comment


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/09 14:09:48

Modified files:
	graphics/xanim : Makefile 
Added files:
	graphics/xanim/patches: patch-xa_g72x_c patch-xa_input_c 
	                        patch-xa_x11_c 

Log message:
fix mostly passing of bogus arguments to unused parameters; for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 14:49:15

Modified files:
	www/sope       : Makefile distinfo 

Log message:
simple update to 2.3.20


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 14:50:06

Modified files:
	www/sogo       : Makefile distinfo 
	www/sogo/patches: patch-UI_Scheduler_UIxCalListingActions_m 
	www/sogo/pkg   : PLIST 

Log message:
simple update to 2.3.20, mostly bux fixes, few new features/enhancements


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 14:58:53

Modified files:
	sysutils/ruby-puppet-syntax: Makefile distinfo 
	sysutils/ruby-puppet-syntax/pkg: PLIST 

Log message:
Simple update to 2.4.0


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/09 15:06:12

Modified files:
	faq            : current.html 

Log message:
users running amd64 -current from late april or earlier need to build a
compiler before attempting to build a kernel due to -msave-args.

prompted by naddy


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 15:06:43

Modified files:
	sysutils/mcollective: Makefile distinfo 

Log message:
Minor update to 2.10.3


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/09 15:09:27

Modified files:
	gnu/llvm/tools/clang/lib/Basic: Targets.cpp 
	gnu/llvm/tools/clang/lib/Driver: Tools.cpp 
	lib/libcompiler_rt: Makefile 

Log message:
Enable TLS support but default to the emulatated TLS model.  Enable the
runtime support code libcompiler_rt for this.  This code uses functions that
live in libpthread, so code that uses TLS support will need to be linked
with -lpthread.  This should allow more ports to build with base clang.

ok espie@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/09 15:11:18

Modified files:
	faq            : current.html 

Log message:
fix id attribute. thanks, naddy


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/09 15:11:45

Modified files:
	sys/arch/arm64/conf: GENERIC RAMDISK 

Log message:
Enable dwge(4).  If the network hardware is initialized by U-Boot, the
Gigabit Ethernet port on the FireFly-RK3399 actually works!


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/09 15:13:24

Modified files:
	sysutils/mcollective-plugins/puppet-agent: Makefile distinfo 

Log message:
simple update to 1.13.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	gsoares@cvs.openbsd.org	2017/05/09 16:22:36

Modified files:
	plan9/plan9port: Makefile distinfo 
	plan9/plan9port/patches: patch-bin_9c 

Log message:
update to latest github commit


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/09 18:45:55

Modified files:
	faq            : current.html 

Log message:
shorten the text a little and fix a validator warning


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:06:25

Modified files:
	devel/tcllib   : Makefile 

Log message:
New home for DISTFILES.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:06:38

Modified files:
	devel/tklib    : Makefile 

Log message:
New home for DISTFILES.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:08:52

Modified files:
	net/tclcurl    : Makefile 
	net/tclcurl/pkg: PLIST 
Added files:
	net/tclcurl/patches: patch-configure 

Log message:
Stop treating loadable lib as linkable lib.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:10:50

Modified files:
	databases/pgtcl: Makefile 
	databases/pgtcl/patches: patch-configure 
	databases/pgtcl/pkg: PLIST 

Log message:
Take maintainership. ok old maintainer, espie@

Stop treating loadable lib as linkable lib.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:20:34

Modified files:
	lang/tcl/8.6   : Makefile distinfo 
	lang/tcl/8.6/patches: patch-unix_Makefile_in 
	                      patch-unix_configure 
	lang/tcl/8.6/pkg: PLIST 

Log message:
Update to 8.6.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:21:05

Modified files:
	x11/tk/8.6     : Makefile distinfo 
	x11/tk/8.6/patches: patch-library_tk_tcl patch-unix_Makefile_in 
	x11/tk/8.6/pkg : PLIST 

Log message:
Update to 8.6.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:21:52

Modified files:
	devel/tclthread: Makefile distinfo 
	devel/tclthread/patches: patch-configure 
	devel/tclthread/pkg: PLIST 

Log message:
Update to 2.8.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:22:33

Modified files:
	databases/tdbc : Makefile distinfo 
	databases/tdbc/patches: patch-Makefile_in patch-pkgIndex_tcl_in 
	databases/tdbc/pkg: PLIST 
Added files:
	databases/tdbc/patches: patch-configure 
Removed files:
	databases/tdbc/patches: patch-configure_in 
	                        patch-tclconfig_tcl_m4 

Log message:
Update to 1.0.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/09 19:23:05

Modified files:
	databases/tdbc-sqlite3: Makefile distinfo 
Removed files:
	databases/tdbc-sqlite3/patches: patch-Makefile_in 

Log message:
Update to 1.0.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/09 20:20:22

Modified files:
	graphics/djview4: Makefile 
	graphics/djvulibre: Makefile 
	graphics/gmt   : Makefile 
	graphics/tgif  : Makefile 
	mail/asmail    : Makefile 

Log message:
unimportant formatting differences only, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 01:10:13

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.47.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 01:10:30

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.84.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 01:36:25

Modified files:
	x11/gnome/todo : Makefile distinfo 

Log message:
Update to gnome-todo-3.24.1.


CVSROOT:	/cvs
Module name:	www
Changes by:	benoit@cvs.openbsd.org	2017/05/10 01:51:26

Modified files:
	.              : want.html 

Log message:
I need a laptop for ports development.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 02:05:04

Modified files:
	devel/git      : Makefile distinfo 
	devel/git/patches: patch-Makefile 
	                   patch-t_t9200-git-cvsexportcommit_sh 
	                   patch-t_test-lib_sh 
	devel/git/pkg  : PLIST-main 

Log message:
Update to git-2.13.0.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	dcoppa@cvs.openbsd.org	2017/05/10 02:27:50

Modified files:
	lib/freetype/src/psaux: psobjs.c t1decode.c 

Log message:
Fixes for CVE-2017-8105 and CVE-2017-8287

out-of-bounds write caused by a heap-based buffer overflow related
to the t1_decoder_parse_charstrings function in psaux/t1decode.c

out-of-bounds write caused by a heap-based buffer overflow related
to the t1_builder_close_contour function in psaux/psobjs.c

From upstream via Arch Linux
OK matthieu@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	dcoppa@cvs.openbsd.org	2017/05/10 02:30:56

Modified files:
	lib/freetype/src/psaux: Tag: OPENBSD_6_1 psobjs.c t1decode.c 

Log message:
[MFC] Fixes for CVE-2017-8105 and CVE-2017-8287

out-of-bounds write caused by a heap-based buffer overflow related
to the t1_decoder_parse_charstrings function in psaux/t1decode.c

out-of-bounds write caused by a heap-based buffer overflow related
to the t1_builder_close_contour function in psaux/psobjs.c

From upstream via Arch Linux
OK matthieu@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/10 02:37:15

Modified files:
	usr.bin/vmstat : vmstat.8 vmstat.c 

Log message:
There's no difference between short and long sleepers, so just print
their number.

While here print the amount of memory in M instead of K to make the output
fit it 80 columns.

Reminded by tb@, ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/05/10 03:09:45

Modified files:
	usr.bin/fstat  : fstat.1 

Log message:
Explain about 0x0 PCB addresses in fstat(1) output. Suggestions/ok bluhm@ jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/10 03:48:04

Modified files:
	sys/dev/hid    : hidkbd.c 

Log message:
Make this compile with HIDKBD_DEBUG defined.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 04:18:15

Modified files:
	x11/gnome/gdm  : Makefile distinfo 
	x11/gnome/gdm/patches: patch-daemon_gdm-manager_c 
	                       patch-daemon_gdm-session_c 

Log message:
Update to gdm-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/10 04:46:05

Modified files:
	databases/ruby-hiera3: Makefile distinfo 
	databases/ruby-hiera3/pkg: PLIST 

Log message:
Simple update to 3.3.1


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/10 04:46:59

Modified files:
	usr.bin/tmux   : cmd-send-keys.c key-bindings.c server-client.c 
	                 tmux.h 

Log message:
Insert copy mode bindings at the right place in the command queue.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 04:57:54

Modified files:
	www/webkitgtk4 : Makefile distinfo 
	www/webkitgtk4/patches: 
	                        patch-Source_JavaScriptCore_heap_MachineStackMarker_cpp 
	                        patch-Source_cmake_OptionsCommon_cmake 

Log message:
Update to webkitgtk4-2.16.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/10 04:58:36

Modified files:
	telephony/asterisk-sounds: asterisk-sounds.port.mk 

Log message:
set BUILD_DEPENDS on telephony/asterisk, there's no point packaging these
(fairly large) sound files on arch where asterisk doesn't work.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 05:25:53

Modified files:
	devel/p5-File-DesktopEntry: Makefile distinfo 

Log message:
Update to p5-File-DesktopEntry-0.22.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/10 05:30:25

Log message:
    Import p5-LaTeXML for generating HTML/XML output from TeX files.
    
    %-------------------------------------------------------------------------------
    In brief, latexml is a program, written in Perl, that attempts to faithfully
    mimic TeX’s behavior, but produces XML instead of dvi. The document model of
    the target XML makes explicit the model implied by LaTeX. The processing and
    model are both extensible; you can define the mapping between TeX constructs
    and the XML fragments to be created. A postprocessor, latexmlpost converts this
    XML into other formats such as HTML or XHTML, with options to convert the math
    into MathML (currently only presentation) or images.
    %-------------------------------------------------------------------------------
    
    OK benoit@, "reads ok" edd@
    
    Status:
    
    Vendor Tag:	pirofti
    Release Tags:	pirofti_20170510
    
    N ports/textproc/p5-LaTeXML/Makefile
    N ports/textproc/p5-LaTeXML/distinfo
    N ports/textproc/p5-LaTeXML/pkg/DESCR
    N ports/textproc/p5-LaTeXML/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 05:31:28

Modified files:
	devel/p5-File-RsyncP: Makefile distinfo 

Log message:
Update to p5-File-RsyncP-0.74.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/10 05:31:46

Modified files:
	textproc       : Makefile 

Log message:
Link LaTeXML


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 05:37:22

Modified files:
	x11/gtk+3      : Makefile distinfo 

Log message:
Update to gtk+3-3.22.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 05:51:14

Modified files:
	devel/p5-Locale-Maketext-Lexicon: Makefile distinfo 
	devel/p5-Locale-Maketext-Lexicon/pkg: PLIST 

Log message:
Update to p5-Locale-Maketext-Lexicon-1.00.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 06:10:05

Modified files:
	devel/p5-Log-Dispatch-FileRotate: Makefile distinfo 

Log message:
Update to p5-Log-Dispatch-FileRotate-1.26.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/10 06:19:27

Added files:
	devel/cmocka/patches: patch-ConfigureChecks_cmake 

Log message:
actually exert tls in the check, so that the absence of -pthread makes it
fail.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 06:22:50

Modified files:
	devel/p5-PAR   : Makefile distinfo 

Log message:
Update to p5-PAR-1.015.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/10 06:32:48

Modified files:
	www/dokuwiki   : Makefile distinfo 
	www/dokuwiki/pkg: PLIST 

Log message:
Update to 2017-02-19b


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 06:33:14

Modified files:
	devel/p5-Parse-Method-Signatures: Makefile distinfo 

Log message:
Update to p5-Parse-Method-Signatures-1.003019.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/10 06:36:35

Modified files:
	sys/arch/amd64/amd64: identcpu.c 

Log message:
The setting of the cpu feature flags for PCLMUL and AES-NI was guarded with
!SMALL_KERNEL and CRYPTO. Move it out of !SMALL_KERNEL to make use of these
features on RAMDISK_CD. Fixes a performance regression in the installer
introduced with the new aes implementation. In particular, it halves the
time needed to extract baseXX.tgz and compXX.tgz on my T420.

tweaks & ok mikeb


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 06:37:37

Modified files:
	x11/gnome/control-center: Makefile distinfo 

Log message:
Update to gnome-control-center-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/10 06:47:56

Modified files:
	mail/imapsync  : Makefile distinfo 

Log message:
Update to 1.727


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 06:48:01

Modified files:
	devel/p5-PerlIO-eol: Makefile distinfo 

Log message:
Update to p5-PerlIO-eol-0.16.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 06:52:41

Modified files:
	devel/p5-Test-File-ShareDir: Makefile distinfo 

Log message:
Update to p5-Test-File-ShareDir-1.001002.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 06:57:24

Modified files:
	devel/p5-Test-NoTabs: Makefile distinfo 

Log message:
Update to p5-Test-NoTabs-2.00.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/10 07:05:42

Modified files:
	usr.bin/tmux   : cmd-set-option.c cmd-show-options.c tmux.1 

Log message:
Expand formats in option names and add -F flag to do so in option values as well.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 07:29:27

Modified files:
	lang/guile2    : Makefile distinfo 
	lang/guile2/pkg: PLIST 
Removed files:
	lang/guile2/patches: patch-libguile_filesys_c 

Log message:
Update to guile2-2.2.2.
Remove BROKEN, we'll see if it still hangs in dpb(1).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 07:29:51

Modified files:
	x11/gnome/aisleriot: Makefile distinfo 
	x11/gnome/aisleriot/pkg: PLIST 

Log message:
Update to aisleriot-3.22.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/10 08:26:19

Modified files:
	graphics/tkpng : Makefile 
	graphics/tkpng/patches: patch-configure 
	graphics/tkpng/pkg: PLIST 

Log message:
Stop treating loadable lib as linkable lib.

ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/10 08:27:01

Modified files:
	x11/tkdnd      : Makefile 
	x11/tkdnd/patches: patch-unix_configure 
	x11/tkdnd/pkg  : PLIST 

Log message:
Stop treating loadable lib as linkable lib.

ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/10 08:27:47

Modified files:
	x11/tkhtml     : Makefile 
	x11/tkhtml/patches: patch-configure 
	x11/tkhtml/pkg : PLIST 

Log message:
Stop treating loadable lib as linkable lib.

ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/10 08:28:12

Modified files:
	x11/tktray     : Makefile 
	x11/tktray/patches: patch-configure 
	x11/tktray/pkg : PLIST 

Log message:
Stop treating loadable lib as linkable lib.

ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/10 08:28:43

Modified files:
	x11/tktreectrl : Makefile 
	x11/tktreectrl/patches: patch-configure 
	x11/tktreectrl/pkg: PLIST 

Log message:
Stop treating loadable lib as linkable lib.

ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/10 08:51:50

Modified files:
	x11/gnome/photos: Makefile distinfo 

Log message:
Update to gnome-photos-3.24.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/10 09:21:02

Modified files:
	sys/arch/loongson/dev: htb.c htbvar.h 
	sys/arch/loongson/include: autoconf.h 
	sys/arch/loongson/loongson: generic3a_machdep.c 

Log message:
Add a PCI attach hook mechanism for htb(4), similar to the one
in bonito(4). Use the hook for setting up the PIC.

Discussed with miod@ long ago


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/10 09:47:34

Modified files:
	sys/dev/usb    : usbdi.c 

Log message:
Revert r1.61 and partially 1.60.  The resulting logic is currently a
noop and prevent us from fixing real use-after-free.

Since xfer->status is reset by *_device_intr_done(), checking for
USBD_IOERROR cannot be true.

Problem reported by tb@ because ubcmtp(4) triggers some I/O errors
when multiple fingers are used.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/10 10:04:21

Modified files:
	sys/arch/loongson/loongson: generic3a_machdep.c 
	sys/arch/mips64/include: loongson3.h 

Log message:
Hook up HPET as a timecounter.


CVSROOT:	/cvs
Module name:	ports
Changes by:	millert@cvs.openbsd.org	2017/05/10 10:07:54

Modified files:
	security/sudo  : Makefile distinfo 

Log message:
update to sudo 1.8.20


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/10 10:47:03

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
We can use ECH to clear sections of lines, so use it for internal panes
(that don't touch an edge). Move all the tty clear code into two common
functions rather than having the same bunch of checks everywhere.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/10 10:48:36

Modified files:
	usr.bin/tmux   : cmd-refresh-client.c resize.c tmux.h 

Log message:
Prevent control clients from affecting the session size until they have
specified a size with refresh-client -C. Prompted by a different change
with the same purpose from George Nachman.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/10 11:35:40

Modified files:
	sys/dev/usb    : usbdi.c 

Log message:
It is unsafe to dereference ``xfer'' after calling the callback as it
might free it.

Prevent a use-after-free in various aynchronous cases.  Found while
looking at another user-after-free pointed out by ehrhardt@.

Committing now to find if other drivers rely on this use-after-free.

tb@ confirmed ubcmtp(4) is now fixed.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/10 12:40:13

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Move to the right cursor position before using spaces to clear.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 13:15:53

Modified files:
	devel/p5-Set-Object: Makefile distinfo 
	devel/p5-Set-Object/pkg: PLIST 

Log message:
Update to p5-Set-Object-1.35.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/10 13:21:04

Modified files:
	www/epiphany   : Makefile distinfo 

Log message:
update to epiphany-3.24.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 13:40:09

Modified files:
	devel/p5-Test-MockObject: Makefile distinfo 
	devel/p5-Test-MockObject/pkg: PLIST 

Log message:
Update to p5-Test-MockObject-1.20161202.


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/05/10 13:47:17

Modified files:
	sys/dev/wscons : wstpad.c 

Log message:
Adapt the filter parameters to the X/Y ratio.

ok mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 14:11:16

Modified files:
	misc/p5-I18N-Charset: Makefile distinfo 

Log message:
Update to p5-I18N-Charset-1.417.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/10 14:18:32

Modified files:
	misc/p5-Lingua-Romana-Perligata: Makefile distinfo 

Log message:
Update to p5-Lingua-Romana-Perligata-0.601.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/10 15:41:27

Modified files:
	sys/sys        : mbuf.h 

Log message:
Declare struct m_hdr as __aligned(8).  This forces the compiler to pad out to
the next 8-byte boundary.  This avoids introducing additional padding
between struct m_hdr and union M_dat in struct mbuf when we add a 64-bit
timestamp in struct pkthdr, which would lead to a miscalculation of MLEN and
panics on 32-bit architectures.  Note that using __aligned(sizeof(int64_t))
here would make the compiler crash!

Put back the packet timestamp now that it is (hopefully) safe to do so.

ok bluhm@, mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/10 15:48:29

Modified files:
	include        : stdlib.h 

Log message:
Add bounded attribute to freezero().  OK tom@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/10 15:56:53

Modified files:
	usr.bin/nc     : nc.1 netcat.c 

Log message:
Implement nc -W recvlimit to terminate netcat after receiving a
number of packets.  This allows to send a UDP request, receive a
reply and check the result on the command line.
input jmc@; OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/10 15:58:55

Modified files:
	sys/arch/arm64/arm64: bus_dma.c pmap.c 
	sys/arch/arm64/include: pmap.h 

Log message:
Remove pmep_pa_is_mem().  Instead create write-back cachable mappings by
default an require callers of pmap_enter() and require pmap_kenter_pa()
to explicitly request uncached mappings by passing the PMAP_NOCACHE flag
in the low bits of the physical address like we do on other architectures.

ok drahn@, patrick@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/10 16:06:33

Modified files:
	x11/dmenu      : Makefile distinfo 
	x11/dmenu/patches: patch-Makefile patch-config_def_h 
	                   patch-config_mk 

Log message:
update to 4.7 from Hiltjo Posthuma


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/10 16:21:39

Modified files:
	regress/sys/netinet/ipsec: Makefile README 

Log message:
Run tcpdump(8) on the enc0 device while the test is sending IPsec
packets.  Then check whether decrypted packets have been processed
by bpf(4) as expected.


CVSROOT:	/cvs
Module name:	www
Changes by:	danj@cvs.openbsd.org	2017/05/10 17:17:59

Modified files:
	.              : want.html 

Log message:
I got a desktop, many thanks to the OpenBSD Foundation!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/10 17:34:25

Modified files:
	games/xchomp   : Makefile 
	games/xchomp/patches: patch-demo_c patch-main_c patch-props_c 
Added files:
	games/xchomp/patches: patch-contact_c patch-drivers_c 
	                      patch-maze_c patch-resources_c 
	                      patch-status_c patch-xchomp_h 

Log message:
fix build with clang. clean-up prototypes, it's not that large.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/10 17:51:19

Modified files:
	archivers/libtar: Makefile 

Log message:
tls without threads -> no tls


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/10 18:21:50

Modified files:
	security/libssh/patches: patch-tests_unittests_torture_misc_c 
Added files:
	security/libssh/patches: patch-ConfigureChecks_cmake 

Log message:
exact same fix as cmocka


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/10 18:29:50

Modified files:
	security/gpgme : Makefile 

Log message:
no tls without pthread


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/10 18:35:09

Modified files:
	mail/libetpan  : Makefile distinfo 

Log message:
Update to libetpan-1.8

From the ChangeLog: "fixed crash (CVE-2017-8825)"


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/10 18:41:14

Modified files:
	devel/pcre++   : Makefile 
	net/maradns    : Makefile 

Log message:
unimportant whitespace differences only, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/10 18:42:05

Modified files:
	sys/uvm        : uvm_init.c uvm_km.c uvm_km.h 

Log message:
reorder uvm init to avoid use before initialisation.

the particular use before init was in uvm_init step 6, which calls
kmeminit to set up malloc(9), which calls uvm_km_zalloc, which calls
pmap_enter, which calls pool_get, which tries to allocate a page
using km_alloc, which isnt initalised until step 9 in uvm_init.

uvm_km_page_init calls kthread_create though, which uses malloc
internally, so it cant be reordered before malloc init.

to cope with this, uvm_km_page_init is split up. it sets up the
subsystem, and is called before kmeminit. the thread init is moved
to uvm_km_page_lateinit, which is called after kmeminit in uvm_init.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/10 19:26:37

Modified files:
	meta/tor-browser: Makefile 
	www/tor-browser: Makefile.inc 
	www/tor-browser/browser: Makefile distinfo 
	www/tor-browser/browser/files: extension-overrides.js 
	www/tor-browser/https-everywhere: Makefile distinfo 
	www/tor-browser/noscript: Makefile distinfo 
	www/tor-browser/tor-launcher: Makefile 
	www/tor-browser/torbutton: Makefile 

Log message:
Update to tor-browser 6.5.2, from MAINTAINER Sean Levy

Prodded by landry@, looks good to edd@


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/10 19:37:24

Modified files:
	sys/arch/amd64/stand/efiboot: efidev.c 

Log message:
Casting int is required for passing uint64 value to "%u" since we don't
assume the size of int.  The problem was spotted by Michele Curti.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/10 20:26:39

Modified files:
	lib/libcrypto/evp: e_chacha20poly1305.c 

Log message:
Fix a problem introduced in freezero() conversion and use
sizeof(struct) not sizeof(pointer).

otto@ points out that on OpenBSD currently freezero() would have still
zeroed the entire allocation, but this is not documented behaviour and
may change in future.

ok tom@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/11 00:18:03

Modified files:
	net/owncloudclient: Makefile distinfo 
	net/owncloudclient/patches: patch-src_gui_application_cpp 
	                            patch-src_libsync_utility_cpp 

Log message:
update to owncloudclient-2.3.2


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/11 00:55:47

Modified files:
	sys/uvm        : uvm_km.c 

Log message:
unbreak PMAP_DIRECT archs.

found by jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/11 01:24:42

Modified files:
	usr.bin/tmux   : cmd-resize-pane.c 

Log message:
Change how we resolve which pane is dragging when there are multiple
options - choose the largest pane, which is more likely to be the one the
user wants to resize. Prompted by a report from Thomas Sattler.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/11 01:31:20

Modified files:
	usr.sbin/vmd   : virtio.c 

Log message:
typo, spotted by dhill.

ok reyk@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/11 01:34:54

Modified files:
	usr.bin/tmux   : environ.c tmux.h 

Log message:
Make environ_log prefix take a format.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 01:41:47

Modified files:
	x11/gtk+3      : Makefile distinfo 

Log message:
Update to gtk+3-3.22.14.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/11 02:00:41

Modified files:
	sys/arch/i386/i386: vmm.c 
	sys/arch/amd64/amd64: vmm.c 

Log message:
panic doesn't need \n.

Suggested by Michael W. Bombardieri, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 02:13:44

Modified files:
	x11/gnome/initial-setup: Makefile distinfo 
	x11/gnome/initial-setup/patches: 
	                                 patch-gnome-initial-setup_Makefile_in 
	                                 patch-gnome-initial-setup_pages_Makefile_in 
	                                 patch-gnome-initial-setup_pages_account_Makefile_in 
	                                 patch-gnome-initial-setup_pages_password_Makefile_in 
	x11/gnome/initial-setup/pkg: PLIST 

Log message:
Update to gnome-initial-setup-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 02:17:02

Modified files:
	security/libhttpseverywhere: Makefile distinfo 

Log message:
Update to libhttpseverywhere-0.4.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 03:25:27

Modified files:
	sysutils/salt  : Makefile distinfo 
	sysutils/salt/pkg: PLIST 

Log message:
Update to salt-2016.11.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/05/11 04:23:41

Modified files:
	multimedia/libv4l: Makefile distinfo 

Log message:
Update to libv4l 1.12.5

(Again) no functional change as the update only contains changes in libdvbv5
which we currently do not build on OpenBSD.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	dcoppa@cvs.openbsd.org	2017/05/11 04:34:54

Modified files:
	lib/freetype/src/psaux: Tag: OPENBSD_6_0 psobjs.c t1decode.c 

Log message:
[MFC] Fixes for CVE-2017-8105 and CVE-2017-8287

out-of-bounds write caused by a heap-based buffer overflow related
to the t1_decoder_parse_charstrings function in psaux/t1decode.c

out-of-bounds write caused by a heap-based buffer overflow related
to the t1_builder_close_contour function in psaux/psobjs.c

From upstream via Arch Linux
OK matthieu@

diff for OPENBSD_6_0 by tj@, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/11 04:50:22

Modified files:
	sys/net        : fq_codel.c 

Log message:
Increment drop counter on the enqueue failure


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 05:16:16

Modified files:
	x11/gnome/yelp : Makefile 
	x11/gnome/devhelp: Makefile 

Log message:
on clang arch, they won't have access to estdc++


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/11 05:22:30

Modified files:
	sys/netinet    : Tag: OPENBSD_6_1 igmp.c ip_icmp.c 

Log message:
If m is not a continuous mbuf cluster, m_pullup() in pr_input may
change the pointer.  Then *mp keeps the invalid pointer and it might
be used.  Fix the potential use after free in igmp_input_if() and
icmp_input_if().  As the input buffers normally deal with mbuf
clusters, the use after free should not happen.
OK mikeb@ mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/11 05:36:20

Modified files:
	sys/netinet    : ip_input.c 
	sys/netinet6   : ip6_input.c 

Log message:
Fix white spaces and wrap long line.  No binary change.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/11 05:38:50

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Need to redraw out to cellsize (total cells used in a line) rather than
cellused (only non-space cells) because there may be cells with a
nondefault background.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/11 05:39:30

Modified files:
	usr.bin/tmux   : screen-write.c 

Log message:
Clear to start of screen needs to use background colour.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/11 05:42:45

Modified files:
	regress/sys/netinet/ipsec: Makefile 

Log message:
Use the new netcat -W recvlimit feature to speed up the test.


CVSROOT:	/cvs
Module name:	src
Changes by:	tom@cvs.openbsd.org	2017/05/11 05:52:18

Modified files:
	include        : stdlib.h 

Log message:
arc4random_buf should be bounded buffer, not bounded string

ok millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/11 06:14:43

Modified files:
	sys/netinet    : ipsec_input.c 

Log message:
IPv6 IPsec transport mode did not work if pf is enabled.  The
decrypted packets in the input path were not checked with pf.  So
with stateful filtering on enc0, direction aware protocols like
ping or TCP did not pass.  Add an explicit pf_test() in
ipsec_common_input_cb() for IPv6 transport mode to fix this.
OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/11 06:18:37

Modified files:
	regress/sys/netinet/ipsec: Makefile 

Log message:
Enable IPv6 IPsec transport mode tests for ping and TCP over ESP
and IPComp.  The kernel has been fixed.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/11 06:22:26

Modified files:
	sys/net        : fq_codel.c fq_codel.h 

Log message:
Add pf queue configuration glue for FQ-CoDel


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 07:26:04

Modified files:
	devel/p5-Class-Tiny: Makefile distinfo 

Log message:
Update to p5-Class-Tiny-1.006.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 07:38:33

Modified files:
	devel/p5-Devel-PartialDump: Makefile distinfo 

Log message:
Update to p5-Devel-PartialDump-0.18.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/11 07:44:15

Modified files:
	databases/postgresql: Makefile 
Added files:
	databases/postgresql/patches: patch-src_pl_plperl_GNUmakefile 

Log message:
Fix bug with create extension plperl
( Util.c: loadable library and perl binaries are mismatched )
Spotted and fix by Markus Hennecke, Thanks !


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 07:45:54

Modified files:
	devel/p5-Perl6-Junction: Makefile distinfo 

Log message:
Update to p5-Perl6-Junction-1.60000.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 07:56:55

Modified files:
	x11/gnome/documents: Makefile distinfo 
	x11/gnome/documents/pkg: PLIST 

Log message:
Update to gnome-documents-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 08:01:57

Modified files:
	editors/joe    : Makefile distinfo 

Log message:
Update to joe-4.4.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/11 08:03:19

Modified files:
	sys/net        : rtable.c 

Log message:
No need to go through a remove/insert cycle when there's a single route
entry on the multipath list.

Fix a NULL dereference triggered by a CPU doing a lookup when another one
is updating the priorities of some routes.  By not doing a remove/insert
we ensure that ``an_rtlist'' is never empty and do not need a conditional
in the fast path.

Problem reported by and ok markus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 08:10:21

Modified files:
	lang/guile2/pkg: PLIST 

Log message:
Fix packaging; reported by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 08:18:56

Modified files:
	games/wtf      : Makefile distinfo 

Log message:
Update to wtf-20170510.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/11 08:34:53

Modified files:
	www/chromium   : Makefile distinfo 

Log message:
update to 58.0.3029.110


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 08:42:17

Modified files:
	x11/gnome/sushi: Makefile 

Log message:
unhardcode libestdc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 08:51:15

Modified files:
	mail/p5-Email-Valid: Makefile distinfo 

Log message:
Update to p5-Email-Valid-1.202.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 08:53:04

Added files:
	security/libnipper/patches: patch-device_common_misc_cpp 
	                            patch-report_report-text_cpp 

Log message:
trivial fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 09:03:42

Modified files:
	net/p5-Net-Dict: Makefile distinfo 

Log message:
Update to p5-Net-Dict-2.21.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 09:26:11

Modified files:
	sysutils/p5-Capture-Tiny: Makefile distinfo 

Log message:
Update to p5-Capture-Tiny-0.46.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/11 09:30:37

Modified files:
	devel/nspr     : Makefile 

Log message:
add aarch64 to ONLY_FOR_ARCHS, missed commit when I fixed the patches


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/11 09:42:10

Modified files:
	sys/arch/mips64/mips64: cpu.c 

Log message:
Set up IPI handling on the primary CPU before booting secondary CPUs.
This ensures the IPI handler is in place before the first IPI is sent.

Drop the comment about xheart because it is somewhat misleading.

Discussed with miod@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 09:42:28

Modified files:
	textproc/p5-Text-PDF: Makefile distinfo 
	textproc/p5-Text-PDF/pkg: PLIST 

Log message:
Update to p5-Text-PDF-0.31.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/11 09:44:43

Modified files:
	textproc/zathura/core: Makefile 
	textproc/zathura/plugins: Makefile.inc 

Log message:
MODGCC4_ARCHS * -> ${GCC3_ARCHS} ${GCC4_ARCHS}


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/11 09:46:33

Modified files:
	textproc/p5-XML-Simple: Makefile distinfo 

Log message:
Update to p5-XML-Simple-2.24.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/11 09:47:45

Modified files:
	sys/arch/sgi/include: bus.h 
	sys/arch/sgi/localbus: imc.c macebus.c 
	sys/arch/sgi/pci: macepcibridge.c 
	sys/arch/sgi/sgi: bus_dma.c 
	sys/arch/sgi/xbow: xbridge.c 

Log message:
The device_to_pa routine really isn't needed. We always have physical
addresses. While there, pave the way for BUS_DMA_64BIT (not working
yet).

Diff from miod@; OK dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/11 10:28:16

Modified files:
	sys/net        : fq_codel.c 

Log message:
Remove a leftover from the ifq_mfreeml conversion


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 10:28:58

Modified files:
	net/mutella    : Makefile 
Added files:
	net/mutella/patches: patch-mutella_common_h 
	                     patch-mutella_uiremote_cpp 

Log message:
trivial clang  fixes


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/11 10:29:55

Modified files:
	www/squid      : Makefile 
Added files:
	www/squid/patches: 
	                   patch-helpers_basic_auth_LDAP_basic_ldap_auth_8 
	                   patch-helpers_basic_auth_RADIUS_basic_radius_auth_8 
	                   patch-helpers_external_acl_file_userip_ext_file_userip_acl_8 
	                   patch-tools_squidclient_squidclient_1 

Log message:
Unimportant whitespace differences only, drop USE_GROFF.

While here, fix a number of quite serious escaping errors in
four manual pages that caused loss of important information.
I will also send those upstream.

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 10:33:43

ports/math/aamath/patches

Update of /cvs/ports/math/aamath/patches
In directory cvs.openbsd.org:/tmp/cvs-serv48142/patches

Log Message:
Directory /cvs/ports/math/aamath/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 10:34:03

Added files:
	math/aamath/patches: patch-expr_cc patch-expr_h 

Log message:
trivial fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 10:40:58

Added files:
	math/mcl/patches: patch-src_impala_matrix_c 

Log message:
restrict is a reserved keyword now


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/11 11:22:22

Modified files:
	x11/gnome/gucharmap: Makefile distinfo 

Log message:
update to gucharmap-9.0.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/11 11:23:44

Modified files:
	x11/gnome/calendar: Makefile distinfo 
	x11/gnome/calendar/pkg: PLIST 

Log message:
update to gnome-calendar-3.24.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/11 12:26:48

Modified files:
	devel/py-uncompyle6: Makefile distinfo 
	devel/py-uncompyle6/pkg: PLIST 

Log message:
Update to py-uncompyle6 2.9.11


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/11 12:45:11

Modified files:
	devel/py-lazy-object-proxy: Makefile distinfo 

Log message:
Update to py-lazy-object-proxy 1.3.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/11 12:56:52

Modified files:
	devel/py-test-cov: Makefile distinfo 

Log message:
Update to py-test-cov 2.5.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/11 13:10:51

Modified files:
	www/py-requests: Makefile distinfo 
	www/py-requests/pkg: PLIST 

Log message:
Update to py-requests 2.14.2


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/11 13:13:17

Modified files:
	usr.bin/tic    : dump_entry.c 

Log message:
Fix the index check in the FNKEY macro.  This is only used when
restricting the output to a version usable on AIX or HP-UX.
OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 13:24:01

Modified files:
	games/crimson/patches: patch-Makefile_in 
Added files:
	games/crimson/patches: patch-src_cf_path_cpp 

Log message:
fix crimson build. from freebsd


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/11 13:25:53

Modified files:
	devel/py-hypothesis: Makefile distinfo 
	devel/py-hypothesis/pkg: PLIST 

Log message:
Update to py-hypothesis 3.8.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 13:41:33

Added files:
	editors/subtitleeditor/patches: 
	                                patch-plugins_subtitleformats_sami_sami_cc 
	                                patch-src_document_cc 
	                                patch-src_document_h 
	                                patch-src_vp_gstplayer_cc 

Log message:
fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 13:44:00

Added files:
	x11/gaia/patches: patch-programs_gaia_GPSSourceNMEA_cc 
	                  patch-programs_gaia_Hud_cc 

Log message:
missing protos, fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 13:52:15

Modified files:
	games/starlanes: Makefile 
Added files:
	games/starlanes/patches: patch-starlanes_c 

Log message:
remove old build earlier.
fixes for clang, mostly namespace collision, and a portability bug


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/11 14:17:17

Modified files:
	bin/ksh        : README 

Log message:
a little tidy up; from raf czlonka


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 14:20:16

Added files:
	sysutils/cdrtools/patches: patch-include_schily_sha2_h 

Log message:
fix for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 14:27:07

Modified files:
	x11/gnome/initial-setup: Makefile 
	x11/gnome/libgepub: Makefile 
	x11/gnome/online-accounts: Makefile 

Log message:
unhardcode libestdc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 14:29:32

Modified files:
	productivity/glabels: Makefile 

Log message:
unhardcode libestdc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 14:50:55

Modified files:
	audio/wmtune   : Makefile 
	converters/pflogx: Makefile 
	databases/architect: Makefile 
	devel/ctftools : Makefile 
	devel/gmc4cc   : Makefile 
	devel/libbfio  : Makefile 
	devel/luaprofiler: Makefile 
	devel/p5-Expect: Makefile 
	education/gamgi: Makefile 
	fonts/spranq-ecofont-ttf: Makefile 
	games/egoboo   : Makefile 
	games/hypatia  : Makefile 
	games/love     : Makefile 
	lang/clojure   : Makefile 
	mail/vrfy      : Makefile 
	misc/p5-Finance-Bank-DE-DTA-Create: Makefile 
	net/openfire   : Makefile 
	net/sipsak     : Makefile 
	print/apsfilter: Makefile 
	productivity/when: Makefile 
	security/chntpw: Makefile 
	sysutils/cl-launch: Makefile 
	sysutils/setquota: Makefile 
	sysutils/wmcb  : Makefile 
	www/php-markdown: Makefile 
	www/piwik      : Makefile 
	www/ratproxy   : Makefile 

Log message:
kill most of the / at the end of WRK* variables


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 14:54:31

Modified files:
	x11/gtk+3      : Makefile distinfo 

Log message:
Update to gtk+3-3.22.15.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/11 15:10:22

Modified files:
	sysutils/terraform: Makefile distinfo 

Log message:
Update to terraform-0.9.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 15:19:42

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
meh. need a LIBECXX for ports that depend loosely on estdc++ on !clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 15:22:31

Modified files:
	productivity/glabels: Makefile 
	x11/gnome/initial-setup: Makefile 
	x11/gnome/libgepub: Makefile 
	x11/gnome/online-accounts: Makefile 

Log message:
fix fix... replace estdc++ with LIBECXX
found by aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/11 15:23:49

Modified files:
	x11/gnome/sushi: Makefile 
	x11/gnome/yelp : Makefile 
	x11/gnome/devhelp: Makefile 

Log message:
more estdc++ mixup, should cover them all


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/11 18:09:17

Modified files:
	regress/sys/netinet/ipsec: Makefile README 
Added files:
	regress/sys/netinet/ipsec: pf.conf 

Log message:
Run all IPsec tests with a pf rule that logs everything on the enc0
interface.  Use tcpdump to write the pflog0 output into a file.
Then grep can verify that all encrypted packets have been processed
by pf.


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/05/11 22:53:07

Modified files:
	regress/lib/libsndio/cap: cap.c 

Log message:
Fix typos and spacing. From Andre Smagin <as at smagin.com>. Thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/12 00:01:40

Modified files:
	databases/puppetdb4: Makefile distinfo 

Log message:
Update to 4.4.0, mostly some performance tweaks


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 00:22:15

Modified files:
	devel/p5-B-Hooks-OP-Check: Makefile distinfo 

Log message:
Update to p5-B-Hooks-OP-Check-0.21.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 00:44:04

Modified files:
	devel/p5-Class-Multimethods: Makefile distinfo 
	devel/p5-Class-Multimethods/pkg: PLIST 

Log message:
Update to p5-Class-Multimethods-1.701.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/12 01:12:10

Modified files:
	net/libproxy   : Makefile distinfo 
	net/libproxy/patches: patch-libproxy_CMakeLists_txt 

Log message:
Update to libproxy-0.4.15.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 01:15:48

Modified files:
	devel/p5-Devel-Cover: Makefile distinfo 

Log message:
Update to p5-Devel-Cover-1.25.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/12 01:19:20

Modified files:
	www/webkitgtk4 : Tag: OPENBSD_6_1 Makefile distinfo 
	www/webkitgtk4/patches: Tag: OPENBSD_6_1 
	                        patch-Source_JavaScriptCore_heap_MachineStackMarker_cpp 
	                        patch-Source_cmake_OptionsCommon_cmake 

Log message:
MFC:
Reliability update to webkitgtk4-2.16.2. Keeping this port up-to-date with
the latest upstream release will help catching up with security updates.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/12 01:26:15

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.48.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/12 01:26:25

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.85.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 01:26:49

Modified files:
	devel/p5-File-ChangeNotify: Makefile distinfo 

Log message:
Update to p5-File-ChangeNotify-0.27.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/12 01:41:00

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 
Added files:
	sysutils/google-cloud-sdk/patches: 
	                                   patch-bin_docker-credential-gcloud 

Log message:
Update to google-cloud-sdk-155.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 01:58:48

Modified files:
	www/py-webob   : Makefile distinfo 
	www/py-webob/pkg: PLIST 

Log message:
Update to py-webob 1.7.2, add py3 flavor.

From Nils Reusse <n dot reusse at hxgn dot net>


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 01:59:56

Modified files:
	www            : Makefile 

Log message:
+py-webob,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/05/12 02:13:42

Modified files:
	security/burpsuite: Makefile distinfo 

Log message:
update burpsuite to 1.7.22.
release notes: http://releases.portswigger.net/2017/04/1722.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 02:21:23

Log message:
    Import to py-cheroot 5.5.0.
    From Nils Reusse <n dot reusse at hxgn dot net>
    
    DESCR:
    
    Cheroot is the high-performance, pure-Python HTTP server used by CherryPy.
    
    Status:
    
    Vendor Tag:	shadchin
    Release Tags:	shadchin_20170512
    
    N ports/www/py-cheroot/Makefile
    N ports/www/py-cheroot/distinfo
    N ports/www/py-cheroot/pkg/PLIST
    N ports/www/py-cheroot/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 02:23:35

Modified files:
	devel/p5-IO-Pager: Makefile distinfo 

Log message:
Update to p5-IO-Pager-0.38.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 02:31:27

Modified files:
	devel/p5-Sub-Uplevel: Makefile distinfo 

Log message:
Update to p5-Sub-Uplevel-0.2800.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/12 02:46:28

Modified files:
	sys/arch/i386/i386: locore.s 
	sys/arch/i386/include: atomic.h 

Log message:
Make atomic.h ready to be included in userland.

- prefix the LOCK macro with an underscore
- keep setbits/clearbits and virtio barriers inside _KERNEL
- Get rid of unused futex_atomic_ucas_int32().

ok dlg@, kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/12 02:47:03

Modified files:
	sys/arch/amd64/include: atomic.h 

Log message:
Make atomic.h ready to be included in userland.

- prefix the LOCK macro with an underscore
- keep setbits/clearbits and virtio barriers inside _KERNEL

ok dlg@, kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/12 02:47:48

Modified files:
	sys/arch/powerpc/include: atomic.h 

Log message:
Make atomic.h ready to be included in userland.

- keep setbits/clearbits inside _KERNEL

ok dlg@, kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/12 02:48:31

Modified files:
	sys/arch/arm64/include: atomic.h 

Log message:
Make atomic.h ready to be included in userland.

- keep setbits/clearbits and virtio barriers inside _KERNEL

ok dlg@, kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 02:53:03

Modified files:
	www            : Makefile 

Log message:
+py-cheroot
+py-cheroot,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/12 02:53:46

Modified files:
	sys/arch/arm/include: atomic.h 

Log message:
Make atomic.h ready to be included in userland.

- keep setbits/clearbits and virtio barriers inside _KERNEL
- prefix def_atomic_xxx macros with underscores


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/12 03:16:55

Modified files:
	sys/dev/hid    : hidkbd.c 
	sys/dev/wscons : wskbd.c wskbdvar.h 
	sys/dev/usb    : ukbd.c 

Log message:
Introduce a new keyboard console hook to enter ddb(4) and make ukbd(4)
use it.

Instead of defering every input of a USB console keyboard to a timeout
via a queue of one element, only differ entering ddb(4) once a matching
control sequenece has been typed.

This prevent loosing inputs when a USB console keyboard is "too fast".

Fix a problem reported by matthieu@, Adam McDougall and Hrvoje Popovski.

ok stsp@, dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 03:23:43

Modified files:
	textproc/py-chardet: Makefile distinfo 
	textproc/py-chardet/pkg: PLIST 

Log message:
Update to py-chardet 3.0.2 and take maintainership.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 03:32:52

Modified files:
	shells/py-qtconsole: Makefile distinfo 
	shells/py-qtconsole/pkg: PLIST 

Log message:
Update to py-qtconsole 4.3.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/12 03:39:17

Modified files:
	devel/py-test-cov: Makefile distinfo 

Log message:
Update to py-test-cov 2.5.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/12 03:56:34

Modified files:
	editors/neovim : Makefile 
Added files:
	editors/neovim/patches: 
	                        patch-runtime_autoload_health_provider_vim 
	                        patch-runtime_autoload_health_vim 

Log message:
Neovim: Fix various bits in ':CheckHealth', including detection of Python.

Issue found by tb@ when the ${LOCALBASE}/bin/python symlink is not existing.
Upstream fixed a couple of other bugs in the same PR. Thanks all.

OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/12 04:08:33

Log message:
    Import devel/py-uv.
    
    ---8<---
    pyuv is a Python module which provides an interface to libuv. libuv is a high
    performance asynchronous networking and platform abstraction library.
    --->8---
    
    OK tb@, shadchin@. Thanks.
    
    Status:
    
    Vendor Tag:	edd
    Release Tags:	edd_20170512
    
    N ports/devel/py-uv/Makefile
    N ports/devel/py-uv/distinfo
    N ports/devel/py-uv/patches/patch-setup_libuv_py
    N ports/devel/py-uv/pkg/DESCR
    N ports/devel/py-uv/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/12 04:09:20

Modified files:
	devel          : Makefile 

Log message:
Link devel/py-uv.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/12 04:14:09

Log message:
    Import editors/py-neovim.
    
    ---8<---
    Implements support for python plugins in Nvim. Also works as a library for
    connecting to and scripting Nvim processes through its msgpack-rpc API.
    --->8---
    
    OK tb@. Thanks!
    
    Status:
    
    Vendor Tag:	edd
    Release Tags:	edd_20170512
    
    N ports/editors/py-neovim/Makefile
    N ports/editors/py-neovim/distinfo
    N ports/editors/py-neovim/pkg/DESCR
    N ports/editors/py-neovim/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/12 04:15:21

Modified files:
	editors        : Makefile 

Log message:
Link editors/py-neovim.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/12 04:17:27

Modified files:
	devel          : Makefile 

Log message:
Don't forget to link the python3 FLAVOR of devel/py-uv.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 04:45:38

Modified files:
	usr.bin/tmux   : format.c tmux.h window-copy.c window.c 

Log message:
Store copy mode search string in pane so search-again command works even
if you exit and reenter copy mode (it doesn't remember the position,
just the search string), suggested by espie@.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 04:49:04

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Can use DECFRA to clear area when not using default background.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 04:50:12

Modified files:
	usr.bin/tmux   : input.c screen-write.c tmux.h tty.c 

Log message:
ECH needs to use background colour.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 05:13:43

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Can use INDN to clear regions with default background colour if margins
are supported.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/12 05:15:51

Modified files:
	build          : mirrors.dat 

Log message:
https for mirror.dalenys.com; from Julien Dhaille


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/12 05:16:09

Modified files:
	.              : ftp.html httpslist 
	openbgpd       : ftp.html 
	openssh        : ftp.html portable.html 
	openntpd       : portable.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 05:19:24

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Regions can't be smaller than 2 so don't try to clear them by scrolling if so.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 07:00:56

Modified files:
	usr.bin/tmux   : grid-view.c grid.c input.c screen-write.c 
	                 server-fn.c tmux.h tty.c window-copy.c 

Log message:
Scrolling needs to use background colour.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 07:27:57

Modified files:
	usr.bin/tmux   : format.c 

Log message:
Only redraw single client, and tweak some logging.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 07:29:05

Modified files:
	usr.bin/tmux   : screen-write.c 

Log message:
Need to clear tty context before using it.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/12 07:40:29

Modified files:
	sys/net        : if_switch.c switchofp.c 

Log message:
Make a kernel with switch(4) but without INET6 compile again.
Sprinkle some #ifdef INET6 and do not use in6addr_any from the
netinet6 code.
test and OK rzalamena@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/12 08:04:09

Modified files:
	sys/netinet    : ip_input.c ip_var.h 
	sys/netinet6   : ip6_input.c 

Log message:
Use the IPsec policy check from ipv4_input() also when forwarding
in ip6_input().  While there avoid an ugly #ifdef in ipv4_input().
OK mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 08:11:54

Modified files:
	games/lostpixels: Makefile 

Log message:
lose the / at end of WRKDIST


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 08:13:54

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Cannot rely on cursor position after DL and IL (some terminals move to
column 0, some do not).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/12 08:19:50

Modified files:
	telephony/asterisk-sounds: asterisk-sounds.port.mk 

Log message:
Oops, remove BUILD_DEPENDS which causes a loop because asterisk RUN_DEPENDS
on some of the sound files. Reported by dhill.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 08:23:22

Modified files:
	mail/p5-MIME-Charset: Makefile distinfo 

Log message:
Update to p5-MIME-Charset-1.012.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 08:30:32

ports/x11/libqaccessibilityclient/patches

Update of /cvs/ports/x11/libqaccessibilityclient/patches
In directory cvs.openbsd.org:/tmp/cvs-serv85613/patches

Log Message:
Directory /cvs/ports/x11/libqaccessibilityclient/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 08:30:57

Added files:
	x11/libqaccessibilityclient/patches: 
	                                     patch-src_qaccessibilityclient_accessibleobject_h 

Log message:
clang doesn't like forward declares and namespace errors


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/12 08:31:23

Modified files:
	sys/netinet    : ipsec_input.c 

Log message:
Instead of printing a debug message at the end of processing, panic
early if the IPsec security protocol is unknown.  ipsec_common_input()
and ipsec_common_input_cb() can only be called with the IP protocols
ESP, AH, or IPComp.  Everything else is a programming mistake.
OK claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/05/12 08:33:39

Modified files:
	x11/smplayer   : Makefile distinfo 
	x11/smplayer/patches: patch-src_preferences_cpp 

Log message:
Update SMPlayer to 17.5.0

Test by Josh and benoit@

OK benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/05/12 08:34:53

Modified files:
	x11/smtube     : Makefile distinfo 
	x11/smtube/pkg : PLIST 

Log message:
Update for SMTube to 17.5.0

Test by Josh, Thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/12 08:37:52

Modified files:
	bin/ksh        : emacs.c 

Log message:
Improve UTF-8 handling on lines that are wider than the terminal,
in two respects:

1. During output in x_e_putc(), when counting display columns,
skip UTF-8 continuation bytes.  Fixes backward movements that
cause horizontal scrolling.

2. After deleting characters, recalculate the last byte that fits
on the line.

Patch from <Anton dot Lindqvist at gmail dot com> on tech@.
OK millert@ tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 08:38:18

Modified files:
	math/foma      : Makefile distinfo 
	math/foma/patches: patch-Makefile 

Log message:
Update to foma-0.9.17.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 08:52:26

Modified files:
	net/queryperf  : Makefile distinfo 

Log message:
Update to queryperf-9.11.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 08:56:56

Modified files:
	usr.bin/tmux   : screen-write.c 

Log message:
Need to store bg for ECH.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/12 09:04:07

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Make sure we have a valid URL in /etc/installurl to prevent ending up stuck in
ftp(1) interactive mode.

reported by and OK sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/12 09:11:02

Modified files:
	sbin/ifconfig  : ifconfig.8 

Log message:
Make the markup of negative parameters consistently use .Cm;
those are command modifiers, not flags.  Inconsistency noticed
and patch sent in by Anton dot Lindqvist at gmail dot com.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 09:11:18

Modified files:
	devel/msp430/libc: Makefile 
	devel/ti-msp430gcc: Makefile 
	graphics/asymptote: Makefile 
	java/tanukiwrapper: Makefile 
	mail/zarafa/zarafa: Makefile 
	security/libssh: Makefile 

Log message:
zap remaining trailing / at end of WRK*


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 09:15:25

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
forbid any of the WRK* variables to end with a /
discussed with sthen@
various things are cleaner that way


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 09:18:13

Modified files:
	usr.bin/tmux   : grid.c 

Log message:
When expanding a line in order to clear it, we need to use the default
background colour - there may be portions that we do not want to clear
with the new background colour.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 09:29:50

Modified files:
	security/distorm3: Makefile distinfo 

Log message:
Update to distorm3-3.3.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 09:34:42

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
sanitize DIST_SUBDIR as well, which is actually already clean thru
the ports tree


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 09:49:18

Added files:
	textproc/jq/patches: patch-configure 

Log message:
fix configure test to actually emit TLS code.
If the variable is static, clang optimizes it all away!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 10:02:04

Added files:
	multimedia/ogmrip/patches: patch-libogmrip_ogmrip-encoding_h 

Log message:
somewhat non trivial patch for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 10:05:06

Modified files:
	x11/qt5/qtbase/patches: patch-mkspecs_openbsd-clang_qmake_conf 

Log message:
qmake does really weird things with includes. We have to register
/usr/include/c++/v1  in order for net/transmission and others to build


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 10:36:01

Modified files:
	infrastructure/mk: bsd.port.mk modules.port.mk 

Log message:
crude mechanism to choose gcc4 or base clang automatically
ports clang turns out to be more complicated... we'll see what we do with
it later


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 10:56:59

Modified files:
	infrastructure/mk: modules.port.mk 

Log message:
fix logic for !clang


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/12 11:35:34

Modified files:
	usr.bin/mandoc : Makefile 

Log message:
Fix the man.cgi target after the recent file additions;
this didn't break the build because it's not built by default.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/12 11:56:39

Modified files:
	usr.bin/mandoc : html.c mdoc_html.c 

Log message:
Make the tag column in .Bl -tag lists wider:
1. I forgot about the 2n padding between tag and body.
2. The factor 1.1 was too small for bold fold, make it *1.15 + 1n.
Ugliness spotted by tb@.


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/05/12 12:03:00

Modified files:
	usr.sbin/user  : user.c 

Log message:
Replace memset(3) with explicit_bzero(3) on user(8) on sensitive data
(passwords) as soon as they are not needed on memory anymore.

OK millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 12:18:09

Modified files:
	infrastructure/mk: bsd.port.mk 
	databases/sqlports: Makefile 
	databases/sqlports/files: Info.pm TreeWalker.pm 
	databases/sqlports/pkg: DESCR-compact DESCR-main 

Log message:
support WANT_CXX and LIBECXX in sqlports


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 12:19:42

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
forgot to commit CXX11 list


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 12:23:59

Modified files:
	x11/qt5/qtbase/pkg: PLIST-main 

Log message:
add the clang files


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/12 12:33:13

Modified files:
	.              : cvsync.html 
	build/mirrors  : cvsync.html.head 

Log message:
four repos are available, not six.

reported by multiplexd at gmx.com


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/12 13:15:22

Modified files:
	sys/net        : fq_codel.c fq_codel.h 

Log message:
Export delay statistics instead of bucket information


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 13:21:42

Modified files:
	security/p5-File-Scan-ClamAV: Makefile distinfo 

Log message:
Update to p5-File-Scan-ClamAV-1.95.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/12 13:25:19

Modified files:
	sys/arch/amd64/amd64: copy.S 

Log message:
Make copyin(9) and copyout(9) atomic for naturally aligned 32-bit words.

ok mpi@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 13:49:54

Modified files:
	textproc/p5-HTML-Summary: Makefile distinfo 
	textproc/p5-HTML-Summary/pkg: PLIST 

Log message:
Update to p5-HTML-Summary-0.022.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 14:00:43

Modified files:
	textproc/p5-Text-vCard: Makefile distinfo 

Log message:
Update to p5-Text-vCard-3.09.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 14:11:58

Modified files:
	textproc/p5-XML-RSS: Makefile distinfo 

Log message:
Update to p5-XML-RSS-1.59.


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/05/12 14:15:52

Modified files:
	usr.sbin/smtpd : smtpd.c 

Log message:
queue is not owned by _smtpd but _smtpq so a bug in lookup process does not
allow read/write of envelopes and messages, unfortunately the purge_task()
function which is in charge of garbage collecting left-overs from aborted
transactions is still executed as _smtpd preventing it from working.

issue reported by Philippe Meunier, fix from Edgar Pettijohn


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 14:19:48

Modified files:
	textproc/p5-XML-XPath: Makefile distinfo 
	textproc/p5-XML-XPath/pkg: PLIST 

Log message:
Update to p5-XML-XPath-1.40.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/12 14:27:25

Modified files:
	math/sc        : Makefile 
	math/sc/patches: patch-Makefile patch-abbrev_c patch-help_c 
	                 patch-lex_c patch-psc_c patch-sc_c patch-sc_doc 
	                 patch-sc_h patch-torev patch-vi_c 
	                 patch-xmalloc_c 
Added files:
	math/sc/patches: patch-cmds_c patch-color_c patch-frame_c 
	                 patch-gram_y patch-interp_c patch-pipe_c 
	                 patch-range_c patch-screen_c patch-sort_c 
	                 patch-vmtbl_c 

Log message:
Fix missing return values, missing prototypes, missing includes; for clang.
Also fix numerous harmless warnings since they drown out the important ones.
Fix code bugs revealed in the process.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/12 14:34:29

Modified files:
	sys/netinet    : tcp_usrreq.c 

Log message:
Use the common switch(af) construct for address family specific
code in tcp_usrreq(PRU_CONNECT).  Do not access sockaddr_in before
checking the address family.  Return EAFNOSUPPORT error in the
default case.
OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/12 14:49:20

Modified files:
	share/man/man7 : ports.7 

Log message:
No more CD-ROM releases, and advertise HTTP for
package download rather than FTP.  Based on a patch
from <timo dot myyra at wickedbsd dot net>, tweaked by me.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/12 14:54:50

Modified files:
	www/p5-WWW-Search: Makefile distinfo 

Log message:
Update to p5-WWW-Search-2.517.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 15:25:00

Modified files:
	games/xbattle/patches: patch-command_c patch-draw_c patch-edit_c 
	                       patch-error_c patch-extern_h patch-init_c 
	                       patch-main_c patch-replay_c patch-shape_c 
	                       patch-utils_c patch-window_c 
Added files:
	games/xbattle/patches: patch-load_c patch-parse_c 
	                       patch-shape_diamond_c patch-shape_hex_c 
	                       patch-shape_octagon_c 
	                       patch-shape_square_c 
	                       patch-shape_triangle_c patch-update_c 

Log message:
give prototypes/forward declarations until clang stops warnings.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 15:26:32

Modified files:
	editors/emacs21: Makefile 
	editors/emacs21/patches: patch-src_s_openbsd_h 

Log message:
clang can't link with gcc, so add the missing define in the clang case.
and it can't optimize malloc too much, or the undump magic fails.
(thanks to kettenis@ for the second part)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/12 15:41:47

Modified files:
	security/tcltls: Makefile 
	security/tcltls/patches: patch-configure 
	security/tcltls/pkg: PLIST 

Log message:
Stop treating loadable lib as linkable lib.

ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/12 15:44:33

Modified files:
	lang/tcl/8.5   : Makefile distinfo 
	lang/tcl/8.5/patches: patch-unix_Makefile_in 
	lang/tcl/8.5/pkg: PLIST 

Log message:
Update to 8.5.19.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/12 15:44:44

Modified files:
	x11/tk/8.5     : Makefile distinfo 
	x11/tk/8.5/pkg : PLIST 

Log message:
Update to 8.5.19.


CVSROOT:	/cvs
Module name:	src
Changes by:	jcs@cvs.openbsd.org	2017/05/12 16:16:54

Modified files:
	sys/dev/ic     : nvme.c 

Log message:
subtract one sector from the disk size before passing it back to the
scsi layer, which will add one sector back

fixes incorrect disk size reporting which was causing fdisk to
create a protective MBR of one too many sectors, which caused our
EFI bootloader to fail to recognize it as a GPT disk

ok dlg


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 16:42:46

Modified files:
	usr.bin/tmux   : format.c 

Log message:
Reset updated flag when restarting job so new output is detected,
reported by Gregory Pakosz in GitHub issue 922.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 16:43:15

Modified files:
	usr.bin/tmux   : format.c 

Log message:
Remove an unused variable.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/12 16:43:21

Modified files:
	sys/net        : if_bridge.c 

Log message:
Unify duplicate code from address family switch in bridge_ipsec().
Remove an if condition that cannot happen.
OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/12 17:05:58

Modified files:
	sys/netinet    : ip_input.c ip_var.h ipsec_input.c 

Log message:
IPsec packets were passed through ip_input() a second time after
they have been decrypted.  That means that all the IP header fields
were checked twice.  Also fragment reassembly was tried twice.
At pf incoming packets in tunnel mode appeared twice on the enc0
interface, once as IP-in-IP and once as the inner packet.  In the
outgoing path pf only sees the inner packet.  Asymmetry is bad for
stateful filtering.
IPv6 shows that IPsec works without that.  After decrypting immediately
continue with local delivery.  In tunnel mode the IP-in-IP protocol
functions pass the inner header to ip6_input().  In transport mode
only pf_test() has to be called for the enc0 device.
Introduce ip_local() to avoid needless processing and cleaner pf
behavior in IPv4 IPsec.
OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 17:06:43

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Can scroll away full lines to clear them too.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 17:09:25

Modified files:
	graphics/luvcview/patches: patch-v4l2uvc_h 

Log message:
get rid of trivial nested function as clang does not support them


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/12 17:10:19

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Compare >= for columns not >.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 17:10:26

Added files:
	graphics/luvcview/patches: patch-v4l2uvc_c 

Log message:
get rid of trivial nested function, as clang does not support this extension


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 17:47:57

Modified files:
	security/botan2/patches: patch-configure_py 

Log message:
buggy configure, add support for -L, as clang will not link with /usr/local
by default.

(patch sent to upstream)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 18:15:38

Modified files:
	multimedia/streamdvd: Makefile 
	multimedia/streamdvd/patches: patch-Makefile 
Added files:
	multimedia/streamdvd/patches: patch-mplex_lpcmstrm_in_cpp 
	                              patch-mplex_mplex_cpp 

Log message:
make it build with clang, give it a proper makefile, separate C from C++,
add the required extern C, and fix one strrchr...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/12 19:52:38

Modified files:
	telephony/libzrtp: Makefile 
	telephony/libzrtp/patches: patch-third_party_bnlib_Makefile_in 

Log message:
tweak makefile so that we can substitute -lcompiler_rt for -lgcc
fixes build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/05/13 01:11:29

Modified files:
	lib/libc/stdlib: malloc.c posix_memalign.3 

Log message:
- fix bug wrt posix_memalign(3) of blocks between half a page and a page
- document posix_memalign() does not play nice with reacallocarray(3) and
freezero(3)


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/13 01:30:50

Modified files:
	usr.bin/tmux   : grid.c tty.c 

Log message:
Some other unused variables.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 01:40:44

Modified files:
	audio/p5-Audio-Musepack: Makefile distinfo 
	audio/p5-Audio-Musepack/pkg: PLIST 

Log message:
Update to p5-Audio-Musepack-1.0.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/13 01:41:59

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Scroll the right number of lines off the region when clearing.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 01:45:07

Modified files:
	net/iperf/patches: patch-configure_ac 

Log message:
fix build with clang, just remove nonsensical configure fragment


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 01:52:16

Modified files:
	devel/p5-Context-Preserve: Makefile distinfo 

Log message:
Update to p5-Context-Preserve-0.02.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 01:57:58

Added files:
	mail/mimetic/patches: patch-mimetic_os_mmfile_cxx 

Log message:
trivial patch for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 01:57:59

Modified files:
	devel/p5-IPC-Run: Makefile distinfo 

Log message:
Update to p5-IPC-Run-0.96.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 02:20:33

ports/games/qgo/patches

Update of /cvs/ports/games/qgo/patches
In directory cvs.openbsd.org:/tmp/cvs-serv79203/patches

Log Message:
Directory /cvs/ports/games/qgo/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 02:21:07

Added files:
	games/qgo/patches: patch-src_matrix_cpp patch-src_tree_cpp 

Log message:
iostream.h is dead, deal with it


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 02:37:23

Modified files:
	devel/p5-MooseX-Traits: Makefile distinfo 
	devel/p5-MooseX-Traits/pkg: PLIST 

Log message:
Update to p5-MooseX-Traits-0.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/13 02:44:52

Modified files:
	graphics/libgexiv2: Makefile distinfo 
	graphics/libgexiv2/pkg: PLIST 

Log message:
Update to libgexiv2-0.10.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/13 02:51:57

Modified files:
	devel/py-backports-functools-lru-cache: Makefile distinfo 
	devel/py-backports-functools-lru-cache/pkg: PLIST 

Log message:
Update to py-backports-functools-lru-cache 1.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 02:53:15

Modified files:
	devel/p5-Path-Tiny: Makefile distinfo 

Log message:
Update to p5-Path-Tiny-0.104.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 02:53:52

Added files:
	www/mongrel2/patches: patch-src_mem_align_h 

Log message:
avoid conflict with clang's header version.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/13 02:54:53

Modified files:
	security/gnutls: Makefile distinfo 

Log message:
Update to gnutls-3.5.12.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 03:11:40

Modified files:
	devel/p5-Sys-SigAction: Makefile distinfo 
	devel/p5-Sys-SigAction/pkg: PLIST 

Log message:
Update to p5-Sys-SigAction-0.23.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/13 03:43:45

Modified files:
	devel/leatherman: Makefile distinfo 
	devel/leatherman/pkg: PLIST 

Log message:
- update to leatherman-0.12.1

ok sebastia@ (new maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 03:49:51

Modified files:
	x11/kde4       : kde4.port.mk 
	x11/qt5        : qt5.port.mk 
	devel/atk2mm   : Makefile 
	devel/bullet   : Makefile 
	devel/glib2mm  : Makefile 
	devel/libsigc++-2: Makefile 
	devel/pangomm  : Makefile 
	devel/spidermonkey38: Makefile 
	games/dhewm3   : Makefile 
	graphics/cairomm: Makefile 
	graphics/cfdg  : Makefile 
	graphics/tesseract/tesseract: Makefile 
	mail/mimetic   : Makefile 
	math/ginac     : Makefile 
	multimedia/sfml: Makefile 
	net/bro        : Makefile 
	net/znc        : Makefile 
	print/cups-filters: Makefile 
	security/botan2: Makefile 
	textproc/enchant: Makefile 
	textproc/libxml++: Makefile 
	textproc/libxml++3: Makefile 
	textproc/pdfgrep: Makefile 
	textproc/podofo: Makefile 
	x11/gtk2mm     : Makefile 
	x11/gtk3mm     : Makefile 

Log message:
first batch of WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 03:54:24

Modified files:
	graphics/libgexiv2: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 03:54:48

Modified files:
	security/gnutls: Makefile 

Log message:
use lang/clang if amd64 and system compiler is not clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 03:56:03

Modified files:
	infrastructure/lib/DPB: Distfile.pm 

Log message:
normalize just in case


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/13 04:16:05

Modified files:
	www/lynx       : Makefile distinfo 

Log message:
Update lynx to 2.8.9pl14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 04:33:14

Modified files:
	audio/moc      : Makefile 
	multimedia/gstreamer1/plugins-good: Makefile 
	x11/wxSVG      : Makefile 
	multimedia/libvpx: Makefile 

Log message:
vpx builds just fine with base clang instead of ports clang, unhardcode
libestdc++ accordingly.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/13 05:06:01

Modified files:
	x11/qt5/qtbase : Makefile 

Log message:
missing bump after addition of the clang files; ok espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/13 05:21:32

Modified files:
	sysutils/consul: Makefile 
	sysutils/consul/files: config.json.in 

Log message:
Drop the deprecated bootstrap option (bootstrap_expect is preferred
nowadays) and run in client mode by default.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/13 05:30:54

Modified files:
	x11/gnome/documents: Makefile 

Log message:
Missing BDEP and RDEP on devel/libgdata (for introspection).

breakage reported by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/13 06:25:55

Modified files:
	sys/dev/fdt    : rkpinctrl.c 

Log message:
Handle drive strength.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 06:34:01

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
ouch, WANT_CXX should trigger modules.port.mk
didn't run into that because my test cases had other modules


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/13 06:53:22

Modified files:
	x11/gnome/documents: Makefile 

Log message:
And another one spotted by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/13 07:18:25

Modified files:
	www/racktables : Makefile distinfo 
	www/racktables/pkg: PLIST 

Log message:
update to RackTables-0.20.13


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 07:19:42

Modified files:
	net/queryperf  : Makefile 

Log message:
Update licence spotted by sthen@, thanks !


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/13 07:25:41

Modified files:
	security/py-passlib: Makefile 

Log message:
add py-bcrypt as an RDEP as it's quite a common backend to use on OpenBSD

as discussed with and OK sthen@ (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 08:01:44

Modified files:
	textproc/p5-PPIx-Regexp: Makefile distinfo 

Log message:
Update to p5-PPIx-Regexp-0.051.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 08:11:59

Modified files:
	textproc/tinyxml2: Makefile distinfo 

Log message:
Update to tinyxml2-4.0.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/13 08:38:28

Modified files:
	usr.sbin/pkg_add: pkg_add.1 

Log message:
No more CD releases, and advertise HTTP rather than FTP for packages.
Patch from <Timo dot Myyra at wickedbsd dot net>.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/13 08:42:44

Modified files:
	www/p5-XML-Atom: Makefile distinfo 
	www/p5-XML-Atom/pkg: PLIST 

Log message:
Update to p5-XML-Atom-0.42.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 09:40:27

Modified files:
	productivity/workrave: Makefile 

Log message:
WANT_CXX. Adjust XOPEN_SOURCE to let libc++ work


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 09:44:09

Modified files:
	devel/vte3     : Makefile 
	graphics/nomacs: Makefile 
	multimedia/gstreamer1/mm: Makefile 
	graphics/pdf2djvu: Makefile 
	x11/dbusmenu-qt: Makefile 
	x11/gnome/libgnomecanvasmm: Makefile 
	x11/gnome/system-monitor: Makefile 
	x11/gtkglextmm : Makefile 
	x11/gtksourceviewmm3: Makefile 
	x11/libqaccessibilityclient: Makefile 

Log message:
more WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 09:47:06

Modified files:
	www/webkitgtk4 : Makefile 
Added files:
	www/webkitgtk4/patches: 
	                        patch-Source_WebCore_PAL_pal_CMakeLists_txt 

Log message:
clang does not look into /usr/local by default, so let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 09:47:52

Modified files:
	www/epiphany   : Makefile 

Log message:
same LIBECXX as used by webkitgtk4


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/13 09:50:07

Modified files:
	.              : want.html 

Log message:
my old soekris is on its last leg, now having frequent lock-ups.
could really use a modern replacement.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/13 10:14:41

Modified files:
	regress/sys/crypto/enc: Makefile 

Log message:
Pick aes.c instead of rijndael.c


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 11:40:26

Modified files:
	audio/cantata  : Makefile 
	audio/pavucontrol: Makefile 
	editors/subtitleeditor: Makefile 
	geo/qgis       : Makefile 
	net/owncloudclient: Makefile 
	net/transmission: Makefile 
	print/poppler  : Makefile 
	net/telepathy/folks: Makefile 
	sysutils/gsmartcontrol: Makefile 
	textproc/gtranslator: Makefile 
	www/webkit     : Makefile 
	x11/fsv        : Makefile 

Log message:
more WANT_CXX / LIBECXX


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/13 11:41:57

Modified files:
	sys/netinet    : tcp_usrreq.c 

Log message:
Do not check for mapped addresses in tcp_usrreq(PRU_CONNECT),
this is done in in6_pcbconnect().
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/13 11:42:55

Modified files:
	sys/netinet6   : in6_pcb.c 

Log message:
Do not check for locally bound mapped addresses in in6_pcbconnect(),
this is done during bind(2) in in6_pcbaddrisavail().
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/13 11:44:00

Modified files:
	sys/netinet6   : raw_ip6.c 

Log message:
Check for mapped addesses in rip6_output() like it is done in
udp6_output().  Move the EAFNOSUPPORT error from rip6_usrreq() to
rip6_output() like it is done for UDP.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/13 11:44:38

Modified files:
	sys/netinet6   : udp6_output.c 

Log message:
Return EADDRNOTAVAIL if UDP sendto(2) is used with a mapped address.
OK mpi@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/13 11:45:20

Modified files:
	.              : errata60.html errata61.html 

Log message:
release freetype errata.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 11:52:28

Modified files:
	graphics/shotwell: Makefile 

Log message:
use LIBECXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 11:53:28

Modified files:
	multimedia/x265: Makefile 

Log message:
builds fine with base clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 11:55:01

Modified files:
	x11/gnome/builder: Makefile 
	x11/gnome/gjs  : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 11:55:40

Modified files:
	x11/gnome/mutter: Makefile 

Log message:
remove more warnings because clang is just better


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 11:56:55

Modified files:
	games/ufoai/base: Makefile 
	games/ufoai/base/patches: patch-build_flags_mk 
Added files:
	games/ufoai/base/patches: 
	                          patch-src_client_battlescape_cl_particle_cpp 
	                          patch-src_client_renderer_r_state_cpp 
	                          patch-src_shared_shared_cpp 
	                          patch-src_shared_sharedptr_h 
	                          patch-src_shared_ufotypes_h 
	                          patch-src_shared_vector_h 
	                          patch-src_tools_memory_cpp 
	                          patch-src_tools_radiant_libs_string_WildcardMatcher_h 
	                          patch-src_tools_radiant_radiant_ui_colourscheme_ColourSchemeManager_h 
	                          patch-src_tools_radiant_radiant_ui_colourscheme_ColourScheme_h 

Log message:
fix configury for clang, fix code for building under more stringent C++11


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/13 12:06:35

Modified files:
	.              : errata60.html errata61.html 

Log message:
fix date.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 12:26:03

Modified files:
	textproc/calibre: Makefile 
	textproc/calibre/patches: patch-setup_build_py 

Log message:
make sure to have correct access to /usr/local, fixes build with clang
also use .beforesubst so regenerating patches is less of a pain


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 12:38:25

Modified files:
	net/minbif/patches: patch-src_server_poll_inetd_cpp 
Added files:
	net/minbif/patches: patch-src_im_request_cpp 
	                    patch-src_irc_dcc_cpp 
	                    patch-src_sockwrap_sockwrap_cpp 

Log message:
missing unistd


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 12:45:38

Added files:
	math/veusz/patches: patch-veusz_helpers_src_qtloops_isnan_h 

Log message:
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 13:07:05

Added files:
	devel/arm-elf/gdb/patches: patch-sim_arm_armsupp_c 

Log message:
return a value, taken from git


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 13:15:41

ports/devel/kf5/kfilemetadata/patches

Update of /cvs/ports/devel/kf5/kfilemetadata/patches
In directory cvs.openbsd.org:/tmp/cvs-serv9395/patches

Log Message:
Directory /cvs/ports/devel/kf5/kfilemetadata/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 13:17:44

Added files:
	devel/kf5/kfilemetadata/patches: patch-src_xattr_p_h 

Log message:
missing include


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 13:28:24

Modified files:
	devel/msp430/binutils: Makefile 

Log message:
Werror considered harmful


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 13:40:22

Modified files:
	infrastructure/bin: update-patches 

Log message:
bogus fuzz for two lines cases


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/13 13:54:28

Modified files:
	x11/sct        : Makefile distinfo 
	x11/sct/pkg    : PLIST 

Log message:
update to 0.4

ok rsadowski


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 14:11:24

Modified files:
	emulators/simh : Makefile 

Log message:
clang just does not do lto in our configuration


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 14:28:37

Modified files:
	emulators/stella: Makefile 
Added files:
	emulators/stella/patches: patch-Makefile 

Log message:
don't try to compile C files with c++, clang really doesn't like that.
Fix the flags so that png is found again.
Unconfuse LDFLAGS and CXXFLAGS>


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 14:59:05

Modified files:
	emulators/vbam : Makefile 
Added files:
	emulators/vbam/patches: patch-fex_fex_blargg_common_h 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 15:56:14

Modified files:
	games/dustrac/patches: patch-CMakeLists_txt 

Log message:
simple fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/13 16:00:23

Modified files:
	games/extremetuxracer: Makefile 
Added files:
	games/extremetuxracer/patches: patch-src_quadtree_cpp 

Log message:
clang: pointer comparison
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/05/13 16:27:20

Modified files:
	net/olsrd      : Makefile distinfo 
	net/olsrd/patches: patch-make_Makefile_obsd 
	                   patch-src_cfgparser_local_mk 
	                   patch-src_plugin_loader_c 
	net/olsrd/pkg  : PLIST-main 
Added files:
	net/olsrd/patches: patch-src_bsd_kernel_routes_c 
	                   patch-src_bsd_net_c patch-src_olsr_random_h 
	                   patch-src_unix_ifnet_c 
	net/olsrd/pkg  : olsrd.rc 
Removed files:
	net/olsrd/pkg  : DESCR-plugins MESSAGE-main PLIST-plugins 

Log message:
Update our very much outdated net/olsrd port to current release 0.9.0.3.
Add patches for rdomain support and a few bug fixes.
Roll the -plugins subpackage into -main, and add an rc.d script.

Lightly tested in Berlin's Freifunk OLSR mesh over ral(4) in IBSS mode.

martin@ has rescinded maintainership which I am taking over.
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/05/14 00:40:35

Modified files:
	devel/sdl2     : Makefile 
Added files:
	devel/sdl2/patches: patch-include_SDL_endian_h 

Log message:
Use endian.h to determine endianess instead of an incomplete list of
arch ifdefs which didn't cover powerpc.

From Donovan Watteau.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/14 03:01:31

Modified files:
	devel/tcllib   : Makefile distinfo 
	devel/tcllib/patches: patch-installer_tcl 
	                      patch-support_installation_actions_tcl 
	                      patch-support_installation_modules_tcl 
	devel/tcllib/pkg: PLIST 

Log message:
Update to 1.18pl0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/14 03:02:01

Modified files:
	devel/tklib    : Makefile distinfo 
	devel/tklib/patches: patch-support_installation_modules_tcl 
	devel/tklib/pkg: PLIST 

Log message:
Update to 0.6pl3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	gsoares@cvs.openbsd.org	2017/05/14 05:27:52

Modified files:
	devel/cppcheck : Makefile distinfo 
	devel/cppcheck/pkg: PLIST 

Log message:
update to cppcheck-1.79


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/14 05:36:20

Modified files:
	devel/py-certifi: Makefile distinfo 

Log message:
Bump to 2017.4.17

OK shadchin@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/14 05:37:18

Modified files:
	sysutils/py-elasticsearch-curator: Makefile distinfo 

Log message:
Small update to 5.0.2, now requires just updated py-certifi


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/14 05:38:48

Modified files:
	sysutils/py-elasticsearch-curator: Makefile 

Log message:
Require right version of py-certifi, bump REVISION


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/14 06:01:52

Modified files:
	share/man/man5 : printcap.5 

Log message:
Default lpd spool directory is /var/spool/output/lpd.

reported by martin at martinbrandenburg dot com
ok tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/14 06:02:03

Modified files:
	games/galois   : Makefile 
Added files:
	games/galois/patches: patch-src_grid_h 

Log message:
most esoteric fix ever for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/14 06:17:47

Modified files:
	sys/dev/pv     : vioscsi.c 

Log message:
Align vioscsi's bus_dma* dancing with vioblk. Eliminates
creating/destroying maps on each i/o.

ok sf@, "makes sense" dlg@ as part of larger diff.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 06:26:59

Modified files:
	usr.bin/mandoc : html.c 

Log message:
Tweak previous: tb@ noticed that some browser/font combinations
have so amazingly wide bold fonts (for the same nominal font size)
that adding 15% to the column width still isn't sufficient to make
text reliably fit, so go for 20%.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/14 06:43:55

Modified files:
	infrastructure/lib/DPB: Heuristics.pm 

Log message:
when requeuing, all infos are not defined for all paths.
this is just a heuristics, so it doesn't matter, but the least
we can do is not crash


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 07:20:02

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
remove the -s option, it is fully covered by mandoc -Tlint;
OK jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 07:59:53

Modified files:
	usr.bin/mandoc : mdoc_validate.c 

Log message:
warn about punctuation between .Xr and .Rs in SEE ALSO;
inspired by mdoclint


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/14 08:04:00

ports/net/tcl-snmptools/patches

Update of /cvs/ports/net/tcl-snmptools/patches
In directory cvs.openbsd.org:/tmp/cvs-serv88118/patches

Log Message:
Directory /cvs/ports/net/tcl-snmptools/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/14 08:06:38

Modified files:
	net/tcl-snmptools: Makefile 
	net/tcl-snmptools/pkg: PLIST 
Added files:
	net/tcl-snmptools/patches: patch-configure 

Log message:
Stop treating loadable lib as linkable lib.
Better install dir. Slight Makefile tidy. Separated build.

ok matthieu@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/14 08:20:46

Modified files:
	www/py-beautifulsoup4: Makefile distinfo 

Log message:
Update to py-beautifulsoup4 4.6.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 08:30:03

Modified files:
	devel/openmpi  : Makefile 

Log message:
unimportant blank line differences only, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 09:46:10

Modified files:
	archivers/luazlib/patches: patch-test_lua 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 10:36:55

Modified files:
	net/prosody    : Makefile distinfo 
	net/prosody/patches: patch-certs_Makefile patch-prosody 
	                     patch-tests_test_lua 

Log message:
Update to prosody-0.9.12

From Henrik Friedrichsen (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 10:37:07

Modified files:
	editors/se     : Makefile 

Log message:
identical output, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 10:37:52

Modified files:
	x11/ogle       : Makefile 

Log message:
unimportant whitespace differences only, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 10:39:02

Added files:
	net/prosody/patches: patch-tests_run_tests_sh 
Removed files:
	net/prosody/patches: patch-prosody 

Log message:
Missed in previous


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 10:43:33

Modified files:
	net/openvpn    : Makefile distinfo 
	net/openvpn/patches: patch-configure 

Log message:
Security update to openvpn-2.4.2

OK gonzalo@ jca@ (maitainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 11:41:27

Modified files:
	archivers/lha  : Makefile 

Log message:
groff is actually unused, drop USE_GROFF, no package change, no bump:
man/mann/lha.n is commented out in the PLIST
man/ja_JP.EUC/man1/lha.1 is installed unformatted even with USE_GROFF


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 11:45:21

Modified files:
	print/py-relatorio: Makefile distinfo 
	print/py-relatorio/pkg: PLIST 

Log message:
Update to py-relatorio-0.6.4

From semarie


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 11:45:52

Modified files:
	graphics/pycha : Makefile distinfo 
	graphics/pycha/pkg: PLIST 

Log message:
Update to pycha-0.7.0

From semarie


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/14 11:49:27

Modified files:
	devel/uthash   : Makefile distinfo 
	devel/uthash/patches: patch-tests_Makefile 

Log message:
Update devel/uthash to 2.0.2, and take maintainership.

Also remove the unneeded PORTHOME directive.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/14 12:37:08

Modified files:
	sysutils/duplicity: Makefile distinfo 
Removed files:
	sysutils/duplicity/patches: 
	                            patch-testing_functional_test_restart_py 

Log message:
Update to duplicity-0.7.12


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/14 12:51:22

Modified files:
	net/librsync   : Makefile 
Added files:
	net/librsync/patches: patch-src_search_c 

Log message:
Fix a crash that can affect duplicity.

Problem reported by danj@, already fixed upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/14 13:46:38

Modified files:
	databases/p5-DBIx-Class-Cursor-Cached: Makefile distinfo 

Log message:
Update to p5-DBIx-Class-Cursor-Cached-1.001004.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 13:49:29

Modified files:
	japanese/Wnn   : Makefile 
	japanese/kakasi: Makefile 

Log message:
groff is not used at all, so delete USE_GROFF;
no package change, no bump;
OK espie@ (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 13:53:58

Modified files:
	japanese/canna : Makefile 

Log message:
This port runs groff (along with jnroff) during the "build" target,
not during the "package" target, so "BUILD_DEPENDS += textproc/groff"
makes more sense than "USE_GROFF = Yes".
No package change, no bump.
OK espie@ (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/14 13:54:42

Modified files:
	devel/p5-IO-Pager: Makefile distinfo 
	devel/p5-IO-Pager/pkg: PLIST 

Log message:
Update to p5-IO-Pager-0.39.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 14:02:00

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete the -a option, it's now fully covered by mandoc -Tlint;
OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/14 14:06:50

Modified files:
	devel/p5-Term-Shell: Makefile distinfo 
	devel/p5-Term-Shell/pkg: PLIST 

Log message:
Update to p5-Term-Shell-0.09.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/14 14:36:21

Modified files:
	sysutils/facter: Makefile distinfo 
	sysutils/facter/patches: patch-lib_CMakeLists_txt 
Added files:
	sysutils/facter/patches: patch-lib_src_facts_posix_cache_cc 

Log message:
Update to 3.6.4

Since 3.5, facts can be configured to be cached in facter.conf,
cached facts are stored in ${LOCALSTATEDIR}/puppetlabs/facter/cached_facts/

Feedback jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/14 15:16:52

ports/textproc/tinyxml2/patches

Update of /cvs/ports/textproc/tinyxml2/patches
In directory cvs.openbsd.org:/tmp/cvs-serv5470/patches

Log Message:
Directory /cvs/ports/textproc/tinyxml2/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/14 15:18:05

Modified files:
	textproc/tinyxml2: Makefile 
Added files:
	textproc/tinyxml2/patches: patch-xmltest_cpp 

Log message:
unbreak on 32-bit


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/14 15:24:13

Modified files:
	sysutils/mcollective: Makefile distinfo 

Log message:
simple update to 2.10.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/14 15:24:59

Modified files:
	infrastructure/bin: register-plist 

Log message:
allow register-plist to display a diff even without write access to
the plist directory.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/14 17:12:55

Modified files:
	korean/hanterm-xf: Makefile 

Log message:
Translate the manual page from EUC-KR to UTF-8 using iconv(1) at build
time and install the unformatted version to be processed by mandoc(1)
at run time rather than misformatting it with USE_GROFF.
OK Jung Lee (MAINTAINER) and naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	stu@cvs.openbsd.org	2017/05/14 22:05:55

Modified files:
	textproc/pdf4tcl: Makefile distinfo 
	textproc/pdf4tcl/pkg: DESCR 

Log message:
Update to 0.9.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/15 01:54:44

Modified files:
	usr.bin/tmux   : tmux.1 tmux.h tty.c 

Log message:
The Konsole SU bug means it can't clear the entire scroll region (it
ignores if >= size, not if > as I first thought). So we can't
effectively fix it in code - remove the workarounds which just cause
bugs on other terminals.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 03:17:33

Modified files:
	sys/arch/mips64/include: atomic.h 

Log message:
Make atomic.h ready to be included in userland.

- keep setbits/clearbits inside _KERNEL

ok visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/15 04:02:02

Modified files:
	geo/mapserver  : Makefile distinfo 
	geo/mapserver/patches: patch-CMakeLists_txt 
Removed files:
	geo/mapserver/patches: patch-cmake_FindPHP5_cmake patch-mapwms_c 

Log message:
Bugfix update to mapserver 7.0.5.

See
http://mapserver.org/development/changelog/changelog-7-0.html#changelog-7-0-5


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/15 04:27:29

Modified files:
	x11/kde4/cantor: Makefile 

Log message:
Prior to the last commit to ../kde4.port.mk (r1.35) the fortran-related
WANTLIBs of gcc4.port.mk weren't getting used for some reason. Bump REVISION
because WANTLIB has now changed (specifically, quadmath is now listed on
i386/amd64 whereas it wasn't before).


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/15 04:40:47

Modified files:
	usr.sbin/httpd : server_http.c 

Log message:
Avoid a crash servicing requests when a server is configured with
"block return 401".  Problem reported by Jurjen Oskam.
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 04:52:08

Modified files:
	sys/dev/usb    : ehci.c ohci.c uhci.c usbdi.c usbdi.h 
	sys/dev/usb/dwc2: dwc2.c 

Log message:
Replace remaining SPLUSBCHECK by a splsoftassert(IPL_SOFTUSB).

USB is the last real user of IPL_SOFTNET.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 05:05:51

Modified files:
	sys/dev/usb    : usbdi.h 

Log message:
Use splraise() rather than splsoftnet() which is going away.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/15 05:23:25

Modified files:
	sbin/pfctl     : parse.y pfctl.c pfctl_parser.c pfctl_queue.c 
	sys/conf       : files 
	sys/net        : pf_ioctl.c pfvar.h 

Log message:
Hook up FQ-CoDel to the tree and enable configuration in the pfctl(8)

OK sthen, visa


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/15 05:24:37

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
Document the new flow queue specification

With input and OK sthen


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/15 05:59:30

Modified files:
	sys/net        : fq_codel.c 

Log message:
clang warns on unused static const variables.  Remove one such unused
variable so the kernel will build on arm64 again.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 06:26:01

Modified files:
	sys/kern       : uipc_socket.c uipc_socket2.c 
	sys/net        : if.c if_pflow.c pf.c pf_ioctl.c pf_norm.c 
	                 pfvar.h 
	sys/sys        : systm.h 
	sys/uvm        : uvm_vnode.c 

Log message:
Enable the NET_LOCK(), take 3.

Recursions are still marked as XXXSMP.

ok deraadt@, bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/15 06:50:48

Modified files:
	x11/kde4/cantor: Makefile 

Log message:
explicitly list gcc4 MODULES in x11/kde4/cantor, this needs fortran so always
needs the gcc4 module - it won't come in via WANT_CXX on arches where clang
is the primary compiler in base. ok espie


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 06:57:42

Modified files:
	sys/net        : if_bridge.c 

Log message:
bridge_ioctl() doesn't need to call splnet().

All interface ioctl()s are executed with the NET_LOCK() held, which
protects all soft states of the network stack.  IPL_NET is only needed
in drivers dealing with hardware and by extension the wireless stack.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 07:00:10

Modified files:
	sys/kern       : uipc_socket.c 

Log message:
so_splicelen needs to be protected by the socket lock.  We are now
safe since we're always holding the KERNEL_LOCK() but we want to move
away from that.

Suggested by and ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/15 07:10:33

Modified files:
	regress/sys/net/pf_forward: Makefile 

Log message:
Use netcat options -n, -W, -w to simplify test.  Wrap long lines.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 07:36:05

Modified files:
	regress/usr.bin/mdoclint: mdoclint 

Log message:
Delete the obsolete 9-argument-check for .Sh.
Delete the section ordering check covered by mandoc.
Some simplifications and forgotten -a cleanup.
OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 08:03:53

Modified files:
	sys/net        : if_mpw.c 

Log message:
if_input() doesn't need splnet().

ok rzalamena@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/15 08:09:13

Modified files:
	sys/net        : if_gre.c 

Log message:
Protect the gloal list of gre(4) interfaces by the NET_LOCK().

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/15 08:18:42

Modified files:
	net            : Makefile 
Removed files:
	net/sharity-light: Makefile distinfo 
	net/sharity-light/files: Makefile.unshlight unshlight.c 
	net/sharity-light/patches: patch-README patch-nfs-version 
	                           patch-rumba_c 
	net/sharity-light/pkg: DESCR PLIST 

Log message:
Remove the old SMB1->NFS translator sharity-light. No support for encrypted
passwords (required by default since NT4 SP3 and dangerous to disable) so
very limited server support. SMB1 needs to die anyway. And even when it
worked, it never really worked particularly well.  ok ajacoutot@ jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/15 08:30:56

Modified files:
	net/openvpn    : Makefile 
Added files:
	net/openvpn/patches: patch-include_openvpn-plugin_h_in 

Log message:
openvpn-plugin.h now makes use of size_t, so include stddef.h

Unbreaks openvpn-auth-ldap.  Reported by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/15 08:33:20

Modified files:
	sys/net        : if_gre.c 

Log message:
Remove unused variable mobileip_softc_list.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/15 08:37:41

Modified files:
	textproc/calibre: Makefile distinfo 
	textproc/calibre/patches: patch-src_calibre_gui2___init___py 
	textproc/calibre/pkg: PLIST 

Log message:
update to calibre-2.85.1


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/15 08:57:29

Modified files:
	usr.bin/tmux   : layout-set.c 

Log message:
Notify layout changed when choosing predefined layouts, from Joshua Brot.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/15 09:10:27

Modified files:
	sysutils/rcm   : Makefile distinfo 

Log message:
Update to rcm-1.3.1

Same patch from maintainer Mike Burns mike+openbsd <at> mike-burns.com with
addition NO_TEST from me. Thanks!

ok sthen@, "looks okay" @landry


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 09:14:11

Modified files:
	usr.sbin/pkg_add/OpenBSD: PackingElement.pm 

Log message:
Properly register manual pages in non-English language directories.
Before this, pkg_add(1) neglected running makewhatis(8) in directories
like /usr/local/man/ru/.
OK espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/15 09:15:44

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
quirk for sharity-light, reminded by aja@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/15 10:24:44

Modified files:
	sbin/pfctl     : pfctl_queue.c 

Log message:
Put the closing parenthesis in the right spot and fix std-dev calculation


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/15 10:39:58

Modified files:
	audio/wavpack  : Makefile 
Added files:
	audio/wavpack/patches: patch-cli_Makefile_am 

Log message:
Disable wavpack's internal MD5 implementation in favour of the one in libc,
the internal one has problems with strict alignment architectures. Reported by
Graham Stevens, help from juanfra@, ok tim@ (maintainer).


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/15 10:44:04

Modified files:
	usr.bin/tmux   : tmux.h tty-acs.c tty-term.c tty.c 

Log message:
Check the terminfo(5) U8 capability and disable using UTF-8 for ACS if
it is present and zero. This is useful for users with terminals or fonts
that do not correctly support UTF-8 line drawing characters. GitHub
issue 927, reported by Hiroaki Yamazoe and Akinori Hattori.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/15 10:55:53

Modified files:
	distrib/miniroot: install.sub 

Log message:
- Move the dmesg listener code into it's own start_dmesg_listener() function.
- Add -f option to rm in unlock() to be able to use it in the new function.

OK halex@, krw@, tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/15 10:56:42

Modified files:
	sbin/pfctl     : pfctl_parser.c 

Log message:
Fixup printing of queue bandwidth specifications

Reported by Carl Mascott, thanks!  OK sthen


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/15 11:02:48

Modified files:
	distrib/miniroot: install.sub 

Log message:
- move NIFS into the block of global variables
- sort global variable block alphabetically


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/15 11:12:25

Modified files:
	distrib/miniroot: install.sub 

Log message:
- export EDITOR and COLUMNS on assignment
- move EDITOR into the block of global variables and export
- break long line in COLUMNS assignment


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/15 11:16:31

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
tweak previous; ok mikeb


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 11:24:48

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
Delete the -H option.
What it did was nothing but bad advice nowadays.
OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/15 12:05:34

Modified files:
	lib/libc/stdlib: malloc.3 

Log message:
Typo: freezeo -> freezero

From "fenderq" on freenode via tj@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 12:26:21

ports/textproc/sim/patches

Update of /cvs/ports/textproc/sim/patches
In directory cvs.openbsd.org:/tmp/cvs-serv88608/patches

Log Message:
Directory /cvs/ports/textproc/sim/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 12:34:20

Modified files:
	textproc/sim   : Makefile 
Added files:
	textproc/sim/patches: patch-sim_1 

Log message:
Fix a small number of syntax errors in the manual page that mangled
the text so much (with both groff and mandoc) that it bacame hard
to understand.  After that, formatting is identical, so drop
USE_GROFF.

While here, update HOMEPAGE and MASTER_SITES, even though our version
of this software is so outdated that it is no longer available even
on the new site.  The old site doesn't exist any longer, at all.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 12:37:29

Modified files:
	textproc/sim   : Makefile 

Log message:
Gah, i forgot the bump, sorry!


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/05/15 12:41:30

Modified files:
	emulators/xcopilot: Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/15 12:44:13

Modified files:
	devel/py-country: Makefile distinfo 

Log message:
Update to py-country 17.5.14


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/15 12:51:38

Modified files:
	net/transmission: Makefile 

Log message:
unbreak


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/15 13:02:16

Modified files:
	sys/dev/pv     : vioscsi.c 

Log message:
vioscsi: Fix allocation of segments

Port the logic to calculate the number of segments in virtqueue and
dmamaps from vioblk.

This fixes the virtqueue indirect descriptors being two entries too
small the dmamaps being much larger than necessary.

If the device does not support the required number of segments, refuse
to use it.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/15 13:12:00

Modified files:
	faq            : current.html 

Log message:
due to an off-by-one in the driver, users of nvme(4) with GPT need to do a
backup, re-initialize the GPT and do a fresh install instead of upgrading
to avoid losing data.

with help from jcs


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/15 13:54:22

Modified files:
	graphics/gd    : Makefile distinfo 
Removed files:
	graphics/gd/patches: patch-src_gd_crop_c patch-src_gd_gd2_c 
	                     patch-src_gd_gif_out_c patch-src_webpimg_c 

Log message:
update to gd-2.2.4

SECURITY fix for:
CVE-2016-9317,CVE-2016-6912,CVE-2016-10166,CVE-2016-10167,
CVE-2016-5767,CVE-2016-10168,CVE-2015-8874,CVE-2016-9933

Initial diff from me, diff to replace multimedia/libvpx with
graphics/libwebp from Brad Smith

ok sthen@, "looks okay" @landry


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/15 13:56:03

Modified files:
	cad/pcb        : Makefile 
	converters/libpst: Makefile 
	devel/cvsgraph : Makefile 
	graphics/libgphoto2: Makefile 
	graphics/mscgen: Makefile 
	graphics/p5-GD : Makefile 
	math/gnuplot   : Makefile 
	math/graphviz  : Makefile 
	net/amule      : Makefile 
	net/mldonkey   : Makefile 
	net/rtg        : Makefile 
	print/texlive/base: Makefile 
	sysutils/modlogan: Makefile 

Log message:
Bump REVISION and adjust WANTLIB after gd update

ok sthen@, "looks okay" @landry


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/15 14:09:11

Modified files:
	regress/sys/netinet/ipsec: Makefile 

Log message:
Try to work around a race in the daily test run.  Before killing
tcpdump, sleep a while to collect all data.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/15 14:53:33

Modified files:
	www/ruby-capybara-webkit: Makefile 

Log message:
fix nonsense, you can't run-depend on qt5


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/15 17:04:52

Modified files:
	sys/dev/fdt    : rkclock.c rkclock_clocks.h 

Log message:
Add some SD/MMC controller-related clocks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/15 17:44:41

Modified files:
	net/openvpn    : Tag: OPENBSD_6_1 Makefile distinfo 
	net/openvpn/patches: Tag: OPENBSD_6_1 patch-configure 
	                     patch-src_openvpn_tun_c 
Added files:
	net/openvpn/patches: Tag: OPENBSD_6_1 
	                     patch-include_openvpn-plugin_h_in 

Log message:
MFC SECURITY update to openvpn-2.4.2

Several security fixes after audits by Quarkslabs and Cryptography
Engineering.  At least:

CVE-2017-7478 Don't assert out on receiving too-large control packets
CVE-2017-7479 Drop packets instead of assert out if packet id rolls over

More details:

https://community.openvpn.net/openvpn/wiki/QuarkslabAndCryptographyEngineerAudits
https://community.openvpn.net/openvpn/wiki/ChangesInOpenvpn24

While here, backport a strict alignement fix from stsp@.
ok danj@ pirofti@.  Also add a missing #include to openvpn-plugin.h, to
unbreak net/openvpn-auth-ldap build.


CVSROOT:	/cvs
Module name:	src
Changes by:	jcs@cvs.openbsd.org	2017/05/15 20:22:51

Modified files:
	sys/dev/rasops : rasops.c 

Log message:
when allocating a new screen, only copy the current buffer contents
to it for visible screens (i.e., the console).  initialize other
virtual screens with just blank character cells.

ok mpi


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/15 20:53:28

Modified files:
	sys/arch/amd64/stand/efiboot: efiboot.c 

Log message:
Compare device pathes properly to find the booted disk.
Work with and test by Michele Curti.


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/15 20:56:23

Modified files:
	sys/arch/amd64/stand/efiboot: efidev.c 

Log message:
Tweak previous, s/int/unsigned/, since the format character is %u.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/15 22:55:27

Modified files:
	usr.bin/openssl: openssl.1 

Log message:
typo: ket -> key.

from "fenderq" on freenode via tj


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/15 23:44:44

Modified files:
	www/youtube-dl : Makefile distinfo 
	www/youtube-dl/pkg: PLIST 

Log message:
update youtube-dl to 2017.05.14

ok pirofti@ (maintainer), jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/05/15 23:48:07

Modified files:
	sys/dev        : audio.c 

Log message:
Remove references to /dev/soundN, which was removed last year.
From Jan Stary <hans at stare.cz>, thanks.


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/15 23:52:52

Modified files:
	lib/libtls     : tls_ocsp.c 

Log message:
Plug a memory leak. The main_cert needs to be X509_free()ed since
SSL_get_peer_certificate() increases the ref count whereas extra_certs
do not because SSL_get_peer_cert_chain() won't increase ref counts.
OK beck@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 01:26:51

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.49.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 01:27:03

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.86.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 01:43:48

Modified files:
	x11/gnome/builder: Makefile 
Added files:
	x11/gnome/builder/patches: 
	                           patch-plugins_todo_todo_plugin___init___py 

Log message:
Needs GNU grep(1).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 02:00:54

Modified files:
	print/cups-filters: Makefile distinfo 

Log message:
Update to cups-filters-1.14.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/16 02:11:27

Modified files:
	net/libmaxminddb: Makefile distinfo 

Log message:
Update libmaxminddb to 1.2.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/16 02:28:08

Modified files:
	devel/p5-Devel-StackTrace-AsHTML: Makefile distinfo 

Log message:
Update to p5-Devel-StackTrace-AsHTML-0.15.

ok Abel Abraham Camarillo Ojeda (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/16 02:28:29

Modified files:
	sys/netinet    : ip_mroute.c 

Log message:
Call rtfree() after each use of routes and make sure the route is valid
when finding one. Since rtfree() is being called and rt_llinfo being
removed, add checks everywhere to make sure we are using a route that is
not being removed.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/16 02:32:17

Modified files:
	sys/netinet    : ip_mroute.c 

Log message:
Let malloc() block when the caller of the add route function is
setsockopt(), otherwise use non-blocking malloc() for network stack
calls.

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 02:45:32

Modified files:
	net/samba      : Makefile 
	net/samba/pkg  : PLIST-tevent 

Log message:
/usr/local/include/samba-4.0/ was not registered in any subpackage; make
-tevent own it since all include/samba-4.0 consumers depend on it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/16 02:45:54

Modified files:
	games/wtf      : Makefile distinfo 

Log message:
Update to wtf-20170512.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 02:47:22

Modified files:
	net/munin      : Makefile 
	net/munin/pkg  : PLIST-main PLIST-server 

Log message:
/usr/local/libexec/munin/ should be owned by -main, not -server so that it
is properly removed at pkg_delete time.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 02:48:57

Modified files:
	net/munin      : Makefile 
	net/munin/pkg  : PLIST-main PLIST-server 

Log message:
Same for share/examples/munin/ which I missed in previous.


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/16 02:50:18

Modified files:
	sys/netinet6   : ip6_mroute.c ip6_mroute.h 

Log message:
Make the IPv6 multicast routing code use the OpenBSD routing table
instead of implementing its own. This makes the IPv6 multicast routing
code look more like the IPv4 version.

ok bluhm@, mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/16 05:02:44

Modified files:
	net/unifi      : Makefile distinfo 
	net/unifi/pkg  : PLIST 

Log message:
update to unifi 5.4.16, req by Brad


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/16 05:35:36

Modified files:
	sys/net        : if_pflog.c 

Log message:
Kill unused global list and protect global array by the NET_LOCK().

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/16 05:36:17

Modified files:
	sys/net        : if_pflog.h 

Log message:
Remove list member now that the global list is gone.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/16 06:24:04

Modified files:
	sys/net        : bfd.c bridgestp.c if.c if_bridge.c if_pfsync.c 
	                 if_ppp.c if_pppoe.c pf.c pf_if.c pfkey.c 
	                 pfkeyv2.c route.c 
	sys/netinet    : igmp.c in.c ip_input.c ip_ipsp.c ip_mroute.c 
	                 ipsec_input.c ipsec_output.c tcp_timer.c 
	                 tcp_usrreq.c 
	sys/netinet6   : frag6.c in6.c in6_ifattach.c ip6_mroute.c 
	                 mld6.c nd6.c nd6_nbr.c nd6_rtr.c 

Log message:
Replace remaining splsoftassert(IPL_SOFTNET) by NET_ASSERT_LOCKED().

ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/16 06:57:26

Modified files:
	usr.bin/tmux   : grid.c server-client.c 

Log message:
Line length and spaces to tabs.


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/16 07:05:07

Modified files:
	sys/netinet    : ip_mroute.c 

Log message:
Make return values more meaningful by using errno instead of -1 or 1.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/16 07:09:21

Modified files:
	sys/netinet    : ip_mroute.c 

Log message:
Sync three changes that were caught by IPv6 multicast routing review:

* use a variable to allow disabling debugs on run-time
* fix a potential memory leak on copyout() failure
* don't just blindly use the first address provided by ifalist

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/16 07:30:48

Modified files:
	sys/sys        : mutex.h 

Log message:
use _mtx_init instead of __mtx_init inside mtx_init on !WITNESS kernels

_mtx_init uses __MUTEX_IPL to wrap the ipl argument to __mtx_init.
without this, mutexes were initted below the mp floor, which allowed
deadlocks with the kernel lock to occur.

reported by hrvoje popovski and pinpointed by mikeb@
tweaks from phessler@
ok mpi@ visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/16 07:38:36

Modified files:
	infrastructure/mk: arch-defines.mk 

Log message:
put the >=17 there, doesn't change anything in the generated packages


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/16 08:57:28

Modified files:
	math/py-bottleneck: Makefile distinfo 
	math/py-bottleneck/patches: patch-setup_py 

Log message:
Update to py-bottleneck 1.2.1


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/16 09:57:03

Modified files:
	sys/sys        : mbuf.h 

Log message:
Using __aligned(8) to tag 'struct m_hdr' triggers warnings on landisk:

/usr/src/sys/dev/ic/re.c:1602: warning: ignoring alignment for stack allocated 'mh'

So instead add explicit padding on ILP32 systems.

ok deraadt@, mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/16 10:09:49

Modified files:
	print/ghostscript/gnu: Tag: OPENBSD_6_1 Makefile 
Added files:
	print/ghostscript/gnu/patches: Tag: OPENBSD_6_1 
	                               patch-psi_zfrsd_c 
	                               patch-psi_zmisc3_c 

Log message:
Backport CVE-2017-8291 fix from blumh@.

OK ajacoutot@


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/16 10:48:23

ports/devel/p5-Log-Any/patches

Update of /cvs/ports/devel/p5-Log-Any/patches
In directory cvs.openbsd.org:/tmp/cvs-serv61028/patches

Log Message:
Directory /cvs/ports/devel/p5-Log-Any/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/16 10:49:41

Modified files:
	devel/p5-Log-Any: Makefile distinfo 
	devel/p5-Log-Any/pkg: PLIST 
Added files:
	devel/p5-Log-Any/patches: patch-lib_Log_Any_Adapter_Base_pm 
	                          patch-lib_Log_Any_Adapter_Test_pm 
	                          patch-lib_Log_Any_Manager_pm 
	                          patch-lib_Log_Any_Proxy_Test_pm 

Log message:
update to 1.049 and fix man pages


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/16 10:53:37

Log message:
    Import p5-Sub-Quote, a package that provides performant ways
    to generate subroutines from strings.
    
    ok jasper@
    
    Status:
    
    Vendor Tag:	giovanni
    Release Tags:	giovanni_20170516
    
    N ports/devel/p5-Sub-Quote/Makefile
    N ports/devel/p5-Sub-Quote/distinfo
    N ports/devel/p5-Sub-Quote/pkg/PLIST
    N ports/devel/p5-Sub-Quote/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/16 10:54:05

Modified files:
	usr.bin/ssh    : PROTOCOL.certkeys 

Log message:
mention that Ed25519 keys are valid as CA keys; spotted by
Jakub Jelen


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/16 10:55:02

Modified files:
	devel          : Makefile 

Log message:
+p5-Sub-Quote


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/16 10:56:15

Modified files:
	usr.bin/ssh    : kexgexc.c 

Log message:
remove duplicate check; spotted by Jakub Jelen


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/16 10:57:45

Modified files:
	devel/p5-Moo   : Makefile distinfo 
	devel/p5-Moo/pkg: PLIST 

Log message:
Update to 2.003002, now it needs devel/p5-Sub-Quote (previously integrated in Moo)

maintainer timeout
ok jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/16 11:01:35

Modified files:
	devel/p5-Search-Elasticsearch: Makefile distinfo 
	devel/p5-Search-Elasticsearch/pkg: PLIST 

Log message:
update to 5.02
ok jasper@ on a very similar diff


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/16 11:13:52

Modified files:
	productivity/radicale: Makefile distinfo 
	productivity/radicale/pkg: PLIST 

Log message:
Security update to radicale-1.1.2 addressing CVE-2017-8342:

"Radicale before 1.1.2 and 2.x before 2.0.0rc2 is prone to timing oracles and
simple brute-force attacks when using the htpasswd authentication method."

MAINTAINER timed-out
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/16 11:15:40

Modified files:
	productivity/radicale: Makefile 
	productivity/radicale/patches: patch-config 
	productivity/radicale/pkg: PLIST README 
Added files:
	productivity/radicale/patches: patch-logging 

Log message:
various tweaks:
- install the 'rights' file and update README accordingly
- tune down default logging from DEBUG to INFO

MAINTAINER timed-out
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/16 11:16:38

Modified files:
	lang/elixir    : Makefile distinfo 

Log message:
update to elixir-1.4.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 11:35:37

Log message:
    Import awless-0.0.23.
    
    awless is a fast, powerful and easy-to-use command line interface (CLI) to
    manage Amazon Web Services. It will help you to:
    <...>
    
    ok robert@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170516
    
    N ports/sysutils/awless/distinfo
    N ports/sysutils/awless/Makefile
    N ports/sysutils/awless/pkg/DESCR
    N ports/sysutils/awless/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/16 11:36:25

Modified files:
	sysutils       : Makefile 

Log message:
+awless


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 11:55:05

Modified files:
	mail/mozilla-thunderbird: Makefile distinfo 
	mail/thunderbird-i18n: Makefile.inc distinfo 

Log message:
Bugfix update to thunderbird 52.1.1.

See https://www.mozilla.org/en-US/thunderbird/52.1.1/releasenotes/


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/16 13:05:36

Modified files:
	usr.bin/mandoc : main.c mandoc.1 mandoc.h read.c 

Log message:
Introduce a new mandoc(1) message level, -W style, below -W warning.
Switch -W all from meaning -W warning to meaning -W style.
The meaning of -T lint does *not* change, it still implies -W warning.
No messages on the new level yet, but they will come.

Usually, i do not lightly make the user interface larger.
But this has been planned for years, and EXIT STATUS 1
was reserved for it all the time.  The message system
is now stable enough to finally implement it.

jmc@ regarding the concept: "really good idea"


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:24:06

ports/devel/py-twisted/pkg

Update of /cvs/ports/devel/py-twisted/pkg
In directory cvs.openbsd.org:/tmp/cvs-serv9887/pkg

Log Message:
Directory /cvs/ports/devel/py-twisted/pkg added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:27:29

Modified files:
	devel/py-twisted: Makefile 
Added files:
	devel/py-twisted/pkg: DESCR PLIST 
Removed files:
	devel/py-twisted: Makefile.inc 
	devel/py-twisted/conch: Makefile 
	devel/py-twisted/conch/pkg: DESCR PLIST 
	devel/py-twisted/core: Makefile 
	devel/py-twisted/core/files: twisted-regen-dropin.cache 
	devel/py-twisted/core/pkg: DESCR PLIST 
	devel/py-twisted/lore: Makefile 
	devel/py-twisted/lore/pkg: DESCR PLIST 
	devel/py-twisted/mail: Makefile 
	devel/py-twisted/mail/pkg: DESCR PLIST 
	devel/py-twisted/names: Makefile 
	devel/py-twisted/names/pkg: DESCR PLIST 
	devel/py-twisted/news: Makefile 
	devel/py-twisted/news/pkg: DESCR PLIST 
	devel/py-twisted/pair: Makefile 
	devel/py-twisted/pair/pkg: DESCR PLIST 
	devel/py-twisted/runner: Makefile 
	devel/py-twisted/runner/pkg: DESCR PLIST 
	devel/py-twisted/web: Makefile 
	devel/py-twisted/web/pkg: DESCR PLIST 
	devel/py-twisted/web2: Makefile 
	devel/py-twisted/web2/pkg: DESCR PLIST 
	devel/py-twisted/words: Makefile 
	devel/py-twisted/words/pkg: DESCR PLIST 

Log message:
Belated update to Twisted 17.1.0.

All the hard work by Pavel Korovin (thanks!), who takes maintainership
from eric@.  The different sub-parts of twisted were all merged in the
same project, ports using it will be adapted shortly.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:28:27

Added files:
	devel/py-twisted: distinfo 
Removed files:
	devel/py-twisted/core/patches: patch-twisted_internet_process_py 
	                               patch-twisted_python_test_test_release_py 
	                               patch-twisted_trial_test_test_loader_py 
	devel/py-twisted/web2/patches: 
	                               patch-lib_twisted_web2_test_test_static_py 
	                               patch-twisted_web2_test_test_stream_py 

Log message:
CVS hits you. you die.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:30:17

Modified files:
	www/py-nevow   : Makefile distinfo 
	www/py-nevow/patches: patch-setup_py 
	www/py-nevow/pkg: PLIST 

Log message:
Update to py-nevow 0.14.2 to work with newer twisted.
From Pavel Korovin again.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:31:34

Modified files:
	databases/py-carbon: Makefile 
	net/avahi      : Makefile 
	net/telepathy/telepathy-gabble: Makefile 
	net/telepathy/telepathy-haze: Makefile 
	net/telepathy/telepathy-idle: Makefile 
	net/telepathy/telepathy-logger: Makefile 
	x11/kde4/kajongg: Makefile 

Log message:
Fix pkgpaths pointing to devel/py-twisted, and bump REVISIONs.
From Pavel Korovin.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:33:09

Modified files:
	devel/py-buildslave: Makefile 

Log message:
Fix pkgpath for twisted, buildslave works fine with the newer version,
tested on my production instance.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:34:50

Modified files:
	devel/py-buildbot: Makefile 
Added files:
	devel/py-buildbot/patches: patch-buildbot_status_web_baseweb_py 

Log message:
Fix RDEP for twisted update, and add a oneliner patch to fix runtime,
also tested on my buildbot instance.

Many thanks to Pavel Korovin for polishing this twisted updated, finally
paving the way to update buildbot to the 0.9 branch.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/16 13:35:25

Modified files:
	usr.bin/mandoc : mandoc.1 

Log message:
missing space between macro arg and punctuation;


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:36:54

Modified files:
	games          : Makefile 
	devel          : Makefile 
	databases      : Makefile 
	news           : Makefile 

Log message:
Unlink hellanzb, castle-combat, londonlaw, py-axiom and py-epsilon


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:38:38

Removed files:
	devel/py-epsilon: Makefile distinfo 
	devel/py-epsilon/pkg: DESCR PLIST 

Log message:
Remove py-epsilon, it was only used by a previous version of py-nevow,
and the divmod umbrella it was under died a while ago. Even if it's been
more or less de-facto adopted by the twisted project, no point in
keeping it in tree for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:39:56

Removed files:
	databases/py-axiom: Makefile distinfo 
	databases/py-axiom/pkg: DESCR PLIST 

Log message:
Remove py-axiom, it was only used by a previous version of py-nevow,
and the divmod umbrella it was under died a while ago. Even if it's been
more or less de-facto adopted by the twisted project, no point in
keeping it in tree for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:44:04

Removed files:
	news/hellanzb  : Makefile distinfo 
	news/hellanzb/pkg: DESCR PLIST MESSAGE 
	news/hellanzb/patches: patch-Hellanzb_Core_py 
	                       patch-Hellanzb_HellaReactor_py 
	                       patch-Hellanzb_HellaXMLRPC_HtPasswdAuth_py 
	                       patch-Hellanzb_HellaXMLRPC_xmlrpc_py 
	                       patch-setup_py 

Log message:
Remove hellanzb, development dead upstream since 7+ years, probably
doesnt work with newer twisted, and there are other alternatives to
download NZB 'free content' (sabnzbd and sickbeard are in the portstree)


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:48:38

Removed files:
	games/londonlaw: Makefile distinfo 
	games/londonlaw/pkg: DESCR PLIST 
	games/londonlaw/patches: patch-londonlaw_server_Game_py 
	                         patch-setup_py 

Log message:
Remove londonlaw, probably doesnt work with newer twisted, and upstream
is dead. If anyone feels like reviving it from the Attic, start by
https://github.com/anyc/londonlaw


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:50:42

Removed files:
	games/castle-combat: Makefile distinfo 
	games/castle-combat/pkg: DESCR PLIST 
	games/castle-combat/patches: patch-castle-combat_py 
	                             patch-data_doc_rules_html 
	                             patch-src_common_py 
	                             patch-src_menu_py 

Log message:
Remove castle-combat, last upstream release was 10+ years ago so it
probably doesnt work with newer twisted. Prove me wrong :)


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 13:52:46

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
add quirks for py-axiom, py-epsilon, hellanzb, londonlaw & castle-combat


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/16 14:01:04

Removed files:
	devel/py-twisted/conch: distinfo 
	devel/py-twisted/core: distinfo 
	devel/py-twisted/lore: distinfo 
	devel/py-twisted/mail: distinfo 
	devel/py-twisted/names: distinfo 
	devel/py-twisted/news: distinfo 
	devel/py-twisted/pair: distinfo 
	devel/py-twisted/runner: distinfo 
	devel/py-twisted/web: distinfo 
	devel/py-twisted/web2: distinfo 
	devel/py-twisted/words: distinfo 

Log message:
Dammit CVS.


CVSROOT:	/cvs
Module name:	www
Changes by:	fcambus@cvs.openbsd.org	2017/05/16 14:29:02

Modified files:
	.              : macppc.html 

Log message:
Fix broken link.

Reported by Scott Cheloha, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/16 14:52:54

Modified files:
	sys/arch/powerpc/powerpc: pmap.c 

Log message:
Implement copyin32(9).

ok mpi@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/16 14:53:42

Modified files:
	sys/arch/sparc64/sparc64: locore.s 

Log message:
Implement copyin32(9).

ok mpi@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/16 15:42:14

Modified files:
	usr.bin/netstat: inet.c 

Log message:
When printing a tcpcb with -P and -v, also show the inp in netstat
output.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	sashan@cvs.openbsd.org	2017/05/16 16:16:30

Modified files:
	sys/net        : pf.c 

Log message:
- percpu anchor stacks
we actually don't need to pre-allocate per_anchor_stack[], if we use
a 'natural' recursion, when doing anchor tree traversal.

O.K. mikeb@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/16 16:29:02

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
tweak the bandwidth description; help/ok mikeb


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/16 16:29:07

Modified files:
	usr.bin/systat : pftop.c 

Log message:
Improve the precision of displayed bandwidth values

Carl Mascott has reported the issue and helped with the fix.  OK tb


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/16 19:24:17

Modified files:
	usr.bin/ssh    : auth.c log.c log.h monitor_wrap.c servconf.c 
	                 sshd_config.5 

Log message:
allow LogLevel in sshd_config Match blocks; ok dtucker bz#2717


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/16 23:00:17

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
add some devices from submitted dmesgs


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/16 23:00:58

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 00:10:44

Modified files:
	sysutils/awless: Makefile 

Log message:
Add HOMEPAGE.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/17 00:31:15

Modified files:
	devel/gitsh    : Makefile distinfo 
	devel/gitsh/pkg: PLIST 

Log message:
update gitsh to 0.11.2

Initial diff from maintainer Mike Burns, Thanks!
- Fix missing depends (spotted by sthen@)
- Use HOMEPAGE in MASTER_SITES
- Remove SEPARATE_BUILD
- Review and input from jca@ and sthen@

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/17 01:31:20

Modified files:
	mail/libetpan  : Tag: OPENBSD_6_1 Makefile 
Added files:
	mail/libetpan/patches: Tag: OPENBSD_6_1 
	                       patch-src_low-level_imf_mailimf_c 

Log message:
Backport net/libetpan CVE-2017-8825 fix from danj@.

OK danj@, jca@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/17 01:34:19

Modified files:
	databases/postgresql: Makefile distinfo 
	databases/postgresql/pkg: PLIST-docs PLIST-server 

Log message:
Security update to 9.6.3 ( CVE-2017-7484, CVE-2017-7485, CVE-2017-7486)


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/17 02:13:33

Modified files:
	sys/uvm        : uvm_map.c 

Log message:
Raise "uvm_map_entry_kmem_pool" IPL level to IPL_VM to prevent a deadlock.

A deadlock can occur when the uvm_km_thread(), running without KERNEL_LOCK()
is interrupted by and non-MPSAFE handler while holding the pool's mutex.  At
that moment if another CPU is holding the KERNEL_LOCK() and wants to grab the
pool mutex, like in sys_kbind(), kaboom!

This is a temporaty solution, a more generate approach regarding mutexes and
un-KERNEL_LOCK()ed threads is beeing discussed.

Deadlock reported by sthen@, ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 02:50:09

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.50.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 02:50:24

Modified files:
	sysutils/awscli: Makefile distinfo 
	sysutils/awscli/pkg: PLIST 

Log message:
Update to awscli-1.11.87.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/17 02:59:05

Modified files:
	sys/nfs        : nfs_socket.c nfs_syscalls.c nfs_vfsops.c 

Log message:
Remove useless splsoftnet().

Outside of USB, no code is executed in a softnet interrupt context.  So
what's protecting NFS data structures is the KERNEL_LOCK().

But more importantly, since r1.114 of nfs_socket.c, the 'softnet' thread
is no longer executing NFS code.

ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/17 03:00:08

Modified files:
	sys/net        : if_gif.c 

Log message:
Protect the global list of interfaces with the NET_LOCK().

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 03:58:26

Modified files:
	graphics/gegl  : Makefile 

Log message:
Sync WANTLIB.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 03:58:38

Modified files:
	graphics/babl  : Makefile distinfo 
	graphics/babl/pkg: PLIST 

Log message:
Update to babl-0.1.26.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 04:01:14

Modified files:
	graphics/gegl03: Makefile distinfo 
	graphics/gegl03/pkg: PLIST 
Removed files:
	graphics/gegl03/patches: patch-configure patch-gegl_Makefile_in 

Log message:
Update to gegl03-0.3.16.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 04:39:44

Added files:
	x11/sisctrl/patches: patch-src_sisctrl_gui_c 

Log message:
trivial fix for clangg


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 05:00:07

Added files:
	games/lgeneral/patches: patch-lgeneral_deploy_h 
	                        patch-lgeneral_gui_c 
	                        patch-lgeneral_gui_h 
	                        patch-lgeneral_sdl_c 
	                        patch-lgeneral_sdl_h 
	                        patch-lgeneral_theme_c 
	                        patch-lgeneral_tools_c 
	                        patch-lgeneral_tools_h 
	                        patch-lgeneral_unit_c 
	                        patch-lgeneral_unit_h 

Log message:
those people don't understand inline, plus numerous typos


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 05:16:38

Modified files:
	infrastructure/mk: pkgpath.mk 

Log message:
expose all the package-args targets, as suitable ports introspection
targets (useful to check if some wide-sweeping change will affect
built packages)


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/05/17 05:20:33

Modified files:
	net/tor        : Makefile distinfo 

Log message:
Update to tor 0.3.0.7.  SECURITY fix for TROVE-2017-002 (relays only).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 05:31:17

Modified files:
	infrastructure/bin: update-patches 
	infrastructure/man/man1: update-patches.1 

Log message:
add a FORCE_REGEN env option


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/17 05:34:17

Modified files:
	devel/bpython  : Makefile 
	devel/py-test  : Makefile 
	devel/py-nose  : Makefile 
	www/py-tornado : Makefile 

Log message:
Fix remaining pkgpaths for twisted update, reported by naddy@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/17 05:35:35

Modified files:
	www/py-mechanize: Makefile 

Log message:
Fix one more, this one reported by nigel@. sqlports should now build.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/17 05:52:25

Modified files:
	sys/arch/loongson/dev: bonito.c voyager.c 
	sys/arch/loongson/include: intr.h 

Log message:
Make IPL_MPSAFE effective on loongson.

Testing help from fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 06:10:53

Modified files:
	games/wizznic  : Makefile 

Log message:
assert gnu89-inline, the semantics is too deeply ingrained to be worth
fixing.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 06:46:42

Added files:
	net/olsrd/patches: patch-Makefile_inc 

Log message:
remove bogus CCACHE logic, actually honor CC


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/17 06:53:31

Modified files:
	x11/p5-X11-Protocol-Other: Makefile 
	x11/p5-X11-Protocol-Other/pkg: PLIST 

Log message:
Install examples
ok ajacoutot@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/17 07:23:58

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Tweak remote fs check.


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/17 07:25:27

Modified files:
	sys/netinet6   : ip6_mroute.c 

Log message:
Optimize multicast packet sending by using m_dup_pkt() instead of
m_copym() for cloning packets. m_dup_pkt() creates a new mbuf with the
whole packet content and also pre allocates the space for layer 2
headers (Ethernet/VLAN).

ok mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/17 07:30:05

Modified files:
	mail/rspamd    : Makefile 
	mail/rspamd/pkg: PLIST 

Log message:
fix @sample filename:

share/examples/rspamd/redirectors.inc
-@sample ${SYSCONFDIR}/rspamd/redirections.inc
+@sample ${SYSCONFDIR}/rspamd/redirectors.inc


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/17 07:52:33

Modified files:
	net/GeoIP      : Makefile distinfo 

Log message:
update to GeoIP-1.6.11, update geolite db while there


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 07:53:49

Modified files:
	games/golly    : Makefile 
	games/golly/patches: patch-gui-wx_configure_configure 
Added files:
	games/golly/patches: patch-gui-wx_configure_Makefile_in 

Log message:
don't use -Wl,--as-needed for final links of executables.
This assumes runtime support works in a certain way, which is wildly
inaccurate with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/17 07:59:03

Modified files:
	net/GeoIP      : distinfo 

Log message:
oops, regen distinfo


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/17 07:59:41

Modified files:
	net/arp-scan   : Makefile distinfo 

Log message:
update OUI vendor database


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/17 08:00:06

Modified files:
	usr.sbin/smtpd : ca.c config.c ioev.c lka.c mta_session.c 
	                 smtp_session.c ssl.c 

Log message:
Introduce more use of freezero().  Also, remove ptr conditionals before
many functions which are free(NULL)-compat
ok gilles


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 08:14:27

Modified files:
	x11/nitrogen   : Makefile 

Log message:
WANTCXX


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 08:43:43

src/regress/lib/libc/qsort

Update of /cvs/src/regress/lib/libc/qsort
In directory cvs.openbsd.org:/tmp/cvs-serv81551/qsort

Log Message:
Directory /cvs/src/regress/lib/libc/qsort added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 08:47:06

Modified files:
	regress/lib/libc: Makefile 
Added files:
	regress/lib/libc/qsort: Makefile qsort_test.c 

Log message:
Add qsort(3) regress based on Bentley & McIlroy's "Engineering a Sort Function"


CVSROOT:	/cvs
Module name:	ports
Changes by:	jcs@cvs.openbsd.org	2017/05/17 09:04:46

Modified files:
	x11/xbanish    : Makefile distinfo 

Log message:
update to xbanish 1.5, now with pledge


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 09:13:30

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
There's no need to track the number of errors (and the counter might
wrap), make it a flag instead.  Pointed out by schwarze@


CVSROOT:	/cvs
Module name:	ports
Changes by:	tb@cvs.openbsd.org	2017/05/17 09:18:05

Modified files:
	x11/xbanish    : Makefile 

Log message:
Add "# uses pledge()" marker.

ok jcs


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/17 09:20:23

Modified files:
	usr.bin/tmux   : cmd-command-prompt.c cmd-confirm-before.c 
	                 status.c tmux.h 

Log message:
Tidy command prompt callbacks and pass in the client.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/17 09:39:36

Modified files:
	sys/netinet    : in_proto.c 
	sys/netinet6   : in6_proto.c 

Log message:
The large and nested GIF #ifdef in protosw made it hard to figure
out what is going on.  There were also some inconsistencies that
seem to be oversights.  Use more specific the #ifdefs.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 10:03:32

Modified files:
	net/kismet     : Makefile 
	net/kismet/patches: patch-Makefile_in patch-gpsmap_cc 
Added files:
	net/kismet/patches: patch-alertracker_h patch-config_h_in 
	                    patch-frontend_h patch-gpsdump_cc 
	                    patch-gpsdump_h patch-kismet_server_cc 
	                    patch-macaddr_h patch-packet_h 
	                    patch-packetracker_cc patch-packetstream_h 
	                    patch-panelfront_cc patch-panelfront_h 
	                    patch-server_protocols_cc 
	                    patch-server_protocols_h patch-tcpclient_h 
	                    patch-tcpserver_cc patch-tcpserver_h 
	                    patch-timetracker_h patch-tracktypes_h 
	                    patch-util_h 

Log message:
let it build with clang: fix depends line, const correct char*,
typedef nonsense, and delete vs new[]


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 10:26:51

Modified files:
	audio/pulseaudio: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 10:58:20

Modified files:
	lib/libc/stdlib: qsort.c 

Log message:
The BSD qsort() performs tail recursion elimination on the second
side of the array being partitioned to save on stack space.  Greater
savings can be gained by choosing recursion for the smaller side
of the partition and eliminating recursion for the larger side.
This also results in a small but measurable performance gain.
OK otto@ schwarze@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/17 11:26:35

Modified files:
	faq            : faq5.html 

Log message:
noperm implies nodev, so no need to have nodev in the example fstab line

noted by "bink" on freenode


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/17 11:40:07

Modified files:
	faq            : faq5.html 

Log message:
mount mfs noperm partition with nosuid


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 11:53:48

Modified files:
	usr.bin/mandoc : mdoc_html.c 

Log message:
Delete pointless width calculation for SYNOPSIS .Nm block heads.
Just let HTML <table> do its work of selecting the needed width.
<Anton dot Lindqvist at gmail dot com> reported that the manually
calculated width was insufficient in some manual pages.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/17 11:54:29

Modified files:
	regress/sys/crypto/aesxts: Makefile aes_xts.c 
	sys/crypto     : aes.h xform.c 

Log message:
Revert MI AES-XTS code back to T-tables amid poor performance

Suffered by many, the revert tested by stsp@.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 12:07:03

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
Add "killer" input from "algorithmic complexity attacks and libc
qsort()".  This causes quadratic behavior with the 4.4BSD qsort's
"switch to insertion sort" optimization when the input appears to
be mostly sorted.  That optimization was removed in qsort.c r1.12
but it is worth having in the regress test too.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/17 14:09:36

Modified files:
	devel/gtest    : Makefile 
Added files:
	devel/gtest/patches: patch-googletest_cmake_internal_utils_cmake 

Log message:
Enable gtest patches, from Greg Steuck.
Greg contacted the maintainer who said he's no longer interested,
so drop MAINTAINER and bump REVISION while there.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/17 14:21:22

Modified files:
	faq            : faq4.html 

Log message:
clarify that fw_update should be run post-install, not in the installer,
when wireless networking is your only option.

reported by han on freenode
ok tb


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/17 14:23:45

Modified files:
	devel/protobuf : Makefile 
	devel/protobuf/patches: patch-Makefile_in patch-configure 
	                        patch-src_Makefile_in 
	                        patch-src_google_protobuf_message_cc 
Added files:
	devel/protobuf/patches: 
	                        patch-src_google_protobuf_compiler_cpp_cpp_unittest_cc 
	                        patch-src_google_protobuf_extension_set_unittest_cc 
	                        patch-src_google_protobuf_generated_message_reflection_unittest_cc 
	                        patch-src_google_protobuf_io_printer_unittest_cc 
	                        patch-src_google_protobuf_io_tokenizer_unittest_cc 
	                        patch-src_google_protobuf_message_unittest_cc 
	                        patch-src_google_protobuf_reflection_ops_unittest_cc 
	                        patch-src_google_protobuf_repeated_field_unittest_cc 

Log message:
Unbreak protobuf tests following the gtest update, from Greg Steuck with some
tweaks by me. Greg contacted the maintainer who said he's no longer interested,
so drop MAINTAINER and bump REVISION while there. Also switch MASTER_SITES from
googlecode to github.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 14:28:35

Modified files:
	regress/lib/libc/qsort: Makefile qsort_test.c 

Log message:
Approximate nlgn instead of using libm.  The same approximation may
be used in qsort.c in a later commit.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 15:18:41

Modified files:
	usr.bin/mandoc : mansearch.c 

Log message:
Do not warn if a database file does not exist
because that is simply equivalent to an empty database.
Suggested by ajacoutot@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 15:24:48

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
Add "median of three" killer, as seen in "Introspective Sorting and
Selection Algorithms" by David R  Musser.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/17 15:40:13

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
Avoid running the "killer" tests multiple times with the same
parameters.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 16:07:46

Modified files:
	regress/usr.bin/mandoc/db/out: all.derr padfmagic.dout 
	                               padimacro.dout padmmacro.dout 
	regress/usr.bin/mandoc/db/run: Makefile 

Log message:
Stop testing the creation and the properties of empty databases.
They are about to be deprecated.
For the tests built on top of them,
use a database containing a single page instead.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 16:26:52

Modified files:
	usr.bin/mandoc : makewhatis.8 mandocdb.c 

Log message:
Never create empty databases.

When pkg_add(1)ing packages installing manual pages into some directory,
the database in that directory automatically gets created or updated,
no change so far.  This patch causes the database file to be
automatically unlinked when pkg_delete(1)ing the last package having
manual pages in that directory, to leave less cruft behind.

Suggested by ajacoutot@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 16:39:53

Added files:
	graphics/xpaint/patches: patch-rw_readWritePS_c 

Log message:
return fix for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 16:46:44

Modified files:
	regress/usr.bin/mandoc/db/run: Makefile 

Log message:
*Add* a test checking that no empty databases get created,
by *removing* one line from the Makefile.  Neat, isn't it?


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 16:53:33

ports/games/taisei/patches

Update of /cvs/ports/games/taisei/patches
In directory cvs.openbsd.org:/tmp/cvs-serv36244/patches

Log Message:
Directory /cvs/ports/games/taisei/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 16:54:28

Modified files:
	games/taisei   : Makefile 
Added files:
	games/taisei/patches: patch-src_boss_h patch-src_enemy_h 
	                      patch-src_item_c patch-src_item_h 
	                      patch-src_laser_h 
	                      patch-src_menu_replayview_c 
	                      patch-src_player_h patch-src_projectile_h 
	                      patch-src_stages_stage1_c 
	                      patch-src_stageutils_h 

Log message:
gnu89-inline, complex is NOT "complex double", snprintf format, and two
nits...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 17:01:26

Added files:
	net/cnupm/patches: patch-Makefile_inc patch-cnupm_Makefile 

Log message:
stupid compiler flags


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 17:08:24

Modified files:
	net/spectrum/patches: patch-src_spectrum_util_cpp 
Added files:
	net/spectrum/patches: patch-src_configinterface_cpp 
	                      patch-src_utf8_checked_h 

Log message:
trivial clang fixes


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 17:20:00

Modified files:
	usr.bin/mandoc : mandoc.1 

Log message:
Modernize an example showing antiquated syntax,
and delete an example showing the arcane -W stop option.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/17 17:21:55

Modified files:
	net/spectrum-tools: Makefile 
Added files:
	net/spectrum-tools/patches: patch-spectool_curses_c 
	                            patch-spectool_gtk_c 
	                            patch-spectool_gtk_channel_c 
	                            patch-spectool_gtk_hw_registry_c 
	                            patch-spectool_gtk_planar_c 
	                            patch-spectool_gtk_spectral_c 
	                            patch-spectool_gtk_topo_c 
	                            patch-spectool_gtk_widget_c 
	                            patch-spectool_raw_c 

Log message:
fix function returns, gnu89-inlines, clang works


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 17:22:29

Modified files:
	usr.bin/mandoc : man.1 

Log message:
Fix documentation bug:
man(1) does not ignore manpath directories lacking mandoc.db(5) files;
instead, it uses filename lookup to find manuals in such directories.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/17 17:39:15

Modified files:
	share/man/man7 : mandoc_char.7 
	usr.bin/mandoc : main.c mandoc.1 

Log message:
Delete the -T xhtml command line option.
It has been obsolete for more than two years.
Use -T html.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/17 19:27:49

Modified files:
	sys/arch/arm/armv7: armv7_mutex.c 
	sys/arch/arm/include: mutex.h 
	sys/arch/sh/include: mutex.h 
	sys/arch/sh/sh : mutex.c 

Log message:
Fix kernel build on armv7 and sh.

Pointed out by deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/17 23:12:34

Modified files:
	usr.sbin/pcidump: pcidump.c 

Log message:
When an array of PCIe extended cability strings was added it missed
some offsets, leading to the wrong strings being used in some cases.
Add the missing strings.

ok mpi@ deraadt@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/17 23:47:13

Modified files:
	sys/arch/arm64/arm64: locore.S 

Log message:
AAPCS64 requires 16 byte stack alignment.  Set the bits in the system
control register to enable alignment fault exceptions if the stack
pointer is not correctly aligned when used as a base address in load or
store instructions.

drahn@ pointed out that FreeBSD made this change in svn rev 295270 and
believes we should do the same.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 00:33:13

Modified files:
	net/p5-Nmap-Parser: Makefile distinfo 

Log message:
Update to p5-Nmap-Parser-1.34.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/18 00:39:49

Modified files:
	lang/rust      : Makefile 
	lang/rust/pkg  : PFRAG.amd64-main PFRAG.i386-main 

Log message:
Add a symlink to base libgcc.a in rust libraries subdir, so that
clang/rust finds it when linking some rust code - somewhat needed by
stylo (the css engine written in rust within mozilla). Modeled after
what is done in lang/g77.

From semarie@, who discussed it with espie@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 00:55:34

Modified files:
	devel/p5-Test-WWW-Mechanize: Makefile distinfo 

Log message:
Update to p5-Test-WWW-Mechanize-1.48.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 01:03:02

Modified files:
	textproc/p5-LaTeX-Encode: Makefile distinfo 

Log message:
Update to p5-LaTeX-Encode-0.092.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/18 01:08:45

Modified files:
	sys/kern       : kern_synch.c 

Log message:
Do not panic if we find ourself on the sleep queue while being SONPROC.

If the rwlock passed to rwsleep(9) is contented, the CPU will call wakeup()
between sleep_setup() and sleep_finish().  At this moment curproc is on the
sleep queue but marked as SONPROC.  Avoid panicing in this case.

Problem reported by sthen@

ok kettenis@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/18 01:57:04

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.51.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/18 01:57:18

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.88.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/18 02:35:56

Modified files:
	sys/dev/ic     : athn.c 

Log message:
Fix a uvm fault in athn_clock_rate():
Don't deref an IEEE80211_CHAN_ANYC channel pointer.
ok mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 02:38:48

Modified files:
	www/p5-WWW-Shorten: Makefile distinfo 
	www/p5-WWW-Shorten/pkg: PLIST 

Log message:
Update to p5-WWW-Shorten-3.093.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 02:42:37

Modified files:
	www/p5-WWW-Shorten-Googl: Makefile distinfo 

Log message:
Update to p5-WWW-Shorten-Googl-1.100.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/18 03:15:16

Modified files:
	sys/sys        : systm.h 

Log message:
Add copyin32(9) prototype.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/18 03:20:06

Modified files:
	sys/arch/amd64/amd64: machdep.c 
	sys/arch/i386/i386: machdep.c 

Log message:
Since copyin(9) already doeas access 32-bit quantities atomically, we can
add copyin32(9) as a simple C wrapper around it.  These wrappers do check
alignment and return EFAULT if the userland pointer is misaligned.  This is
enough to guarantee that the access doesn't cross a cache line boundary which
could make the access non-atomic.

ok mpi@, visa@, tedu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 04:29:00

Modified files:
	multimedia/dvdauthor: Makefile 

Log message:
nested functions are not "mandatory", get it to build with clang, even
if we lose some functionality (this code is such a mess that I don't
even know what we lose)


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/05/18 04:39:20

Modified files:
	sysutils/gkrellm/gkrellm/patches: 
	                                  patch-src_sysdeps_bsd-net-open_c 

Log message:
Remove unneeded & dying <netinet/tcpip.h>

ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/05/18 04:40:08

Modified files:
	shells/nsh/patches: patch-stats_c 

Log message:
Remove unneeded and dying headers.

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/18 04:56:45

Modified files:
	sys/net        : if_gif.c 
	sys/netinet    : in_proto.c ip_ipip.c ip_ipip.h ip_ipsp.c 
	                 ip_ipsp.h ipsec_output.c 
	sys/netinet6   : in6_proto.c 

Log message:
The function name ip4_input() is confusing as it also handles IPv6
packets.  This is the IP in IP protocol input function, so call it
ipip_input().  Rename the existing ipip_input() to ipip_input_gif()
as it is the input function used by the gif interface.  Pass the
address family to make it consistent with pr_input.  Use __func__
in debug print and panic messages.  Move all ipip prototypes to the
ip_ipip.h header file.
OK dhill@ mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	mpi@cvs.openbsd.org	2017/05/18 05:34:35

Modified files:
	infrastructure/db: config.site 

Log message:
netinet/tcpip.h is going away.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/18 05:38:07

Modified files:
	sys/netinet    : tcp_debug.c tcp_debug.h tcp_input.c 
	                 tcp_output.c tcp_subr.c tcp_usrreq.c 
	usr.sbin/trpt  : trpt.c 
Removed files:
	sys/netinet    : tcpip.h 
	sys/netinet6   : tcpipv6.h 

Log message:
Merge the content of <netinet/tcpip.h> and <netinet6/tcpipv6.h> in
<netinet/tcp_debug.h>.

The IPv6 variant was always included and the IPv4 version is not
present on all systems.

Most of the offending ports are already fixed, thanks to sthen@!


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/18 05:50:47

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
better describe "!";
from michal mazurek, tweaked a bit by myself


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/18 06:02:06

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Don't pass `-m' to ftp(1). Instead let isatty() decide whether we display the
progress bar or not for better cron(1)/logger(1) output.

req. by henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/18 06:24:15

Modified files:
	usr.sbin/pkg_add/OpenBSD: PackageLocator.pm PackageRepository.pm 

Log message:
introduce new url "installpath" to mean "the contents of installurl"
use it to simplify logic.

have ./ always be silent, wherever it may come from.

zap NOINSTALLPATH since it's more intuitive to just define PKG_PATH=
(nothing) now.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/18 06:29:54

Modified files:
	usr.sbin/pkg_add: pkg_add.1 

Log message:
document installpath, explain PKG_PATH defaults in terms of it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 06:31:20

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
various things should refer to BUILD_PACKAGES instead of MULTI_PACKAGES


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 06:38:46

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
get FETCH_PACKAGES to find things by default by using installpath.
no incidence for people who haven't updated pkg_add yet, this used to
not work, so this will still not work for them :)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 06:41:58

Modified files:
	net/kismet/patches: patch-gpsmap_cc 

Log message:
there was already one const there. noticed by nigel, as stupid gcc dislikes
const const.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/18 06:58:43

Modified files:
	productivity/homebank: Makefile distinfo 

Log message:
Update to 5.1.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/18 07:27:14

Modified files:
	multimedia/get_iplayer: Makefile distinfo 
	multimedia/get_iplayer/patches: patch-get_iplayer 

Log message:
update to get_iplayer-3.01


CVSROOT:	/cvs
Module name:	src
Changes by:	jcs@cvs.openbsd.org	2017/05/18 07:29:32

Modified files:
	sys/arch/i386/conf: GENERIC 

Log message:
enable acpisbs on i386 for old MacBooks

tested by Jan Stary


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/18 07:30:21

Modified files:
	devel/re2c     : Makefile distinfo 

Log message:
update to re2c-0.16


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 07:41:33

Added files:
	multimedia/libmp4v2/patches: patch-src_bmff_typebmff_cpp 
	                             patch-src_itmf_type_cpp 

Log message:
steal modern compiler fixes from their git


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/18 07:51:42

Modified files:
	net/rrdtool    : Makefile distinfo 
	net/rrdtool/patches: patch-bindings_Makefile_in patch-configure 
	                     patch-doc_Makefile_in 
	                     patch-examples_Makefile_in 
	                     patch-examples_rrdcached_Makefile_in 
	                     patch-src_Makefile_in 
	                     patch-src_rrd_graph_helper_c 
	                     patch-src_rrd_lastupdate_c 
	                     patch-src_rrd_tool_c 
	net/rrdtool/pkg: PLIST-main PLIST-python 
Removed files:
	net/rrdtool/patches: patch-src_rrd_cgi_c 

Log message:
update to rrdtool-1.7.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/18 08:09:06

Modified files:
	x11/xfce4/terminal: Makefile distinfo 

Log message:
Update to xfce4-terminal 0.8.5.1


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/18 08:35:23

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/18 08:38:25

Modified files:
	net/radcli     : Makefile distinfo 

Log message:
update to radcli-1.2.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 08:47:27

Modified files:
	net/retroshare/patches: 
	                        patch-src_libretroshare_src_rsserver_rsinit_cc 
Added files:
	net/retroshare/patches: 
	                        patch-src_libbitdht_src_util_bdthreads_cc 
	                        patch-src_libretroshare_src_dbase_findex_cc 
	                        patch-src_libretroshare_src_dbase_findex_h 
	                        patch-src_libretroshare_src_retroshare_rsflags_h 
	                        patch-src_libretroshare_src_util_argstream_h 
	                        patch-src_retroshare-gui_src_gui_common_GroupTreeWidget_cpp 

Log message:
classical fixes for C++, clang happy


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/18 08:48:27

Modified files:
	sys/dev/usb    : if_umb.c 

Log message:
Grab the netlock in umb_state_task() and umb_decode_ip_configuration()
when calling in_ioctl().  These ioctls modify the routing table,
which is global.  So they need the lock.
Found with Zaur Molotnikov's static lock analyzer.
OK gerhard@ mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/18 08:50:08

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
use mergesort instead of heapsort when comparing results


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/18 09:12:56

Modified files:
	devel/py-hypothesis: Makefile distinfo 

Log message:
Update to py-hypothesis 3.8.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/18 09:18:39

Modified files:
	textproc/py-chardet: Makefile distinfo 

Log message:
Update to py-chardet 3.0.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/18 09:29:35

Modified files:
	sysutils/flashrom: Makefile 
Added files:
	sysutils/flashrom/patches: patch-hwaccess_c patch-physmap_c 

Log message:
adjust error message text, the securelevel mechanism changed in src/etc/rc 1.432


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/18 09:41:59

Modified files:
	sys/arch/hppa/hppa: locore.S machdep.c 
	sys/arch/hppa/include: cpu.h 

Log message:
Implement copyin32(9).

"your chicken scratches look fine to me" deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/05/18 10:58:06

Modified files:
	www/aria2      : Makefile distinfo 

Log message:
Upgrade for Aria2 to 1.32.0.

OK benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/18 12:50:32

Modified files:
	sys/kern       : exec_subr.c 

Log message:
Add a gap of 1MB between the stack and mmap spaces.

ok deraadt@, millert@, stefan@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/18 13:23:02

Modified files:
	net/nfsen      : Makefile 
Added files:
	net/nfsen/patches: patch-libexec_NfSenRRD_pm 

Log message:
patch to relax the version check, breakage reported by nigel@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 15:27:47

Modified files:
	sysutils/usmb  : Makefile 
	sysutils/usmb/patches: patch-usmb_c patch-usmb_dir_c 

Log message:
fix memset size, as found by clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 17:28:53

Modified files:
	net/ns         : Makefile 
	net/ns/patches : patch-common_packet_h 
	                 patch-indep-utils_cmu-scen-gen_setdest_setdest_h 
Added files:
	net/ns/patches : patch-autoconf_h_in patch-common_packet_cc 
	                 patch-common_ptypes2tcl_cc 
	                 patch-common_tclAppInit_cc 
	                 patch-common_tkAppInit_cc 
	                 patch-dccp_bsd_queue_h patch-dccp_dccp_ackv_cc 
	                 patch-dccp_dccp_ackv_h patch-dccp_dccp_cc 
	                 patch-dccp_dccp_h 
	                 patch-indep-utils_cmu-scen-gen_setdest_calcdest_cc 
	                 patch-indep-utils_cmu-scen-gen_setdest_setdest_cc 
	                 patch-linkstate_ls_cc patch-linkstate_ls_h 
	                 patch-mac_mac-802_11Ext_cc 
	                 patch-mac_mac-802_11Ext_h 
	                 patch-mac_wireless-phyExt_cc 
	                 patch-mac_wireless-phyExt_h 
	                 patch-mdart_mdart_adp_cc 
	                 patch-mdart_mdart_function_h 
	                 patch-mdart_mdart_queue_h patch-mobile_god_cc 
	                 patch-mobile_god_h patch-nix_nixnode_cc 
	                 patch-queue_errmodel_cc patch-sctp_sctp-cmt_cc 
	                 patch-sctp_sctp-cmt_h patch-tcp_tcp-full_cc 
	                 patch-tcp_tcp-full_h patch-tcp_tcp-session_h 
	                 patch-tcp_tcp_cc patch-tcp_tcp_h 
	                 patch-tools_rng_cc 

Log message:
fix build with clang, errors, plus a lot of warnings


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 17:42:44

Modified files:
	net/tacacs+/patches: patch-Makefile patch-generate_passwd_c 
	                     patch-tac_plus_h 
Added files:
	net/tacacs+/patches: patch-dump_c patch-maxsess_c patch-packet_c 

Log message:
let it compile with clang, sprinkle a few missing includes


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/18 18:08:25

Added files:
	x11/fleditor/patches: patch-fltk_editengine_h 
	                      patch-src_editengine_cxx 

Log message:
fix for clang. contrary to habit, this string *can't* be constant!


CVSROOT:	/cvs
Module name:	www
Changes by:	juanfra@cvs.openbsd.org	2017/05/18 18:46:47

Modified files:
	faq            : faq5.html 

Log message:
Use "git config" instead of the config file. Tweaks and OK tb@.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/18 18:49:53

Modified files:
	sys/arch/hppa/include: intr.h 

Log message:
tweak the spllower asm so it is more straightforward.

this properly identifies the registers used as input and output
operands to the code running in the trap handler, and passes them
to the asm statement as such. this means we dont have to do an extra
copy in the asm, or an extra clobber to keep the compiler away from
the registers. it also lets gcc set up and use the input register
nicely before it reaches the asm.

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/18 18:50:24

Modified files:
	sys/arch/mips64/mips64: lcore_access.S 

Log message:
Implement copyin32(9) for mips64.

OK kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/18 18:52:49

Modified files:
	sys/arch/mips64/include: lock.h 
	sys/arch/mips64/mips64: lock_machdep.c 

Log message:
Replace __cpu_cas() with atomic_cas_ulong().

OK kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/18 20:33:27

Modified files:
	sysutils/duplicity: Makefile 
	sysutils/duplicity/pkg: DESCR 

Log message:
Sync DESCR with upstream

prodded a while ago by mmcc


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/18 22:08:00

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
Add input targeted at the Bentley and McIrlroy quicksort generated
by McIlroy's "A Killer Adversary for Quicksort".  This results in
quadratic behavior and the test aborts before completion.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 22:50:12

Modified files:
	databases/py-sqlalchemy-migrate: Makefile distinfo 

Log message:
Update to py-sqlalchemy-migrate-0.11.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 23:06:27

Modified files:
	devel/libtermkey: Makefile distinfo 
	devel/libtermkey/pkg: PLIST 

Log message:
Update to libtermkey-0.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 23:16:54

Modified files:
	devel/p5-YAML-XS: Makefile distinfo 

Log message:
Update to p5-YAML-XS-0.65.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 23:22:20

Modified files:
	mail/p5-MIME-Base32: Makefile distinfo 
	mail/p5-MIME-Base32/pkg: PLIST 

Log message:
Update to p5-MIME-Base32-1.303.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/18 23:30:36

Modified files:
	www/p5-Dancer-Plugin-Thumbnail: Makefile distinfo 

Log message:
Update to p5-Dancer-Plugin-Thumbnail-0.14.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/18 23:57:31

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
return EIO to vmd if the guest HLTs with interrupts disabled


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/18 23:59:27

Modified files:
	share/man/man9 : mbuf.9 

Log message:
header updates from kevlo;


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/19 00:29:21

Modified files:
	sys/arch/amd64/amd64: identcpu.c vmm.c 
	sys/arch/amd64/include: vmmvar.h 

Log message:
Respect max VPID/ASID limits. VMX VPIDs are capped at 4095, for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/19 01:32:33

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.52.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/19 01:32:44

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.89.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:37:00

Log message:
    Import math/p5-Business-Hours.
    
    This module is a simple tool for calculating business hours in a time period.
    Over time, additional functionality will be added to make it easy to calculate
    the number of business hours between arbitrary dates.
    
    OK and input from benoit@, sthen@, tsg@
    
    Status:
    
    Vendor Tag:	pirofti
    Release Tags:	pirofti_20170519
    
    N ports/math/p5-Business-Hours/Makefile
    N ports/math/p5-Business-Hours/distinfo
    N ports/math/p5-Business-Hours/pkg/DESCR
    N ports/math/p5-Business-Hours/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:38:06

Modified files:
	math           : Makefile 

Log message:
Link p5-Business-Hours


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:40:52

Log message:
    Import www/p5-CSS-Minifier-XS.
    
    CSS::Minifier::XS is a CSS "minifier"; its designed to remove un-necessary
    whitespace and comments from CSS files, while also not breaking the CSS.
    
    CSS::Minifier::XS is similar in function to CSS::Minifier, but is substantially
    faster as its written in XS and not just pure Perl.
    
    OK and input from sthen@, also OK benoit@, robert@
    
    Status:
    
    Vendor Tag:	pirofti
    Release Tags:	pirofti_20170519
    
    N ports/www/p5-CSS-Minifier-XS/Makefile
    N ports/www/p5-CSS-Minifier-XS/distinfo
    N ports/www/p5-CSS-Minifier-XS/pkg/DESCR
    N ports/www/p5-CSS-Minifier-XS/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:42:10

Modified files:
	www            : Makefile 

Log message:
Link p5-CSS-Minifier-XS


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:43:24

Log message:
    Import www/p5-JavaScript-Minifier-XS.
    
    JavaScript::Minifier::XS is a JavaScript "minifier"; its designed to remove
    un-necessary whitespace and comments from JavaScript files, which also not
    breaking the JavaScript.
    
    JavaScript::Minifier::XS is similar in function to JavaScript::Minifier, but is
    substantially faster as its written in XS and not just pure Perl.
    
    OK and input from sthen@, also OK benoit@, robert@
    
    Status:
    
    Vendor Tag:	pirofti
    Release Tags:	pirofti_20170519
    
    N ports/www/p5-JavaScript-Minifier-XS/Makefile
    N ports/www/p5-JavaScript-Minifier-XS/distinfo
    N ports/www/p5-JavaScript-Minifier-XS/pkg/DESCR
    N ports/www/p5-JavaScript-Minifier-XS/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:45:36

Modified files:
	www            : Makefile 

Log message:
Link p5-JavaScript-Minifier-XS


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:50:28

Log message:
    Import devel/p5-Log-Dispatch-Perl.
    
    The "Log::Dispatch::Perl" module offers a logging alternative using standard
    Perl core functions. It allows you to fall back to the common Perl alternatives
    for logging, such as "warn" and "cluck". It also adds the possibility for a
    logging action to halt the current environment, such as with "die" and "croak".
    
    OK sthen@, benoit@, robert@
    
    Status:
    
    Vendor Tag:	pirofti
    Release Tags:	pirofti_20170519
    
    N ports/devel/p5-Log-Dispatch-Perl/Makefile
    N ports/devel/p5-Log-Dispatch-Perl/distinfo
    N ports/devel/p5-Log-Dispatch-Perl/pkg/DESCR
    N ports/devel/p5-Log-Dispatch-Perl/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:51:56

Modified files:
	devel          : Makefile 

Log message:
Link p5-Log-Dispatch-Perl


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:57:59

Log message:
    Import www/p5-Data-Page-Pageset.
    
    Split long page lists into pretty intervals
    1-6 7-12 13 14 15 16 17 18 19-24 25-30 31-36 37-41
    
    OK and input from sthen@, also OK benoit@, robert@
    
    Status:
    
    Vendor Tag:	pirofti
    Release Tags:	pirofti_20170519
    
    N ports/www/p5-Data-Page-Pageset/Makefile
    N ports/www/p5-Data-Page-Pageset/distinfo
    N ports/www/p5-Data-Page-Pageset/pkg/DESCR
    N ports/www/p5-Data-Page-Pageset/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 01:59:53

Modified files:
	www            : Makefile 

Log message:
Link p5-Data-Page-Pageset


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/19 02:06:59

Modified files:
	www/youtube-dl : Makefile distinfo 

Log message:
Update youtube-dl to 2017.05.18.1.

Unbreaks youtube with
version 2017.05.18.1
* [jsinterp] Fix typo and cleanup regular expressions (#13134)

version 2017.05.18
+ [jsinterp] Add support for quoted names and indexers (#13123,
#13124, #13125, #13126, #13128, #13129, #13130, #13131, #13132)

OK and input sthen@, also OK danj@.

From Hiltjo Posthuma, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/19 02:07:33

Modified files:
	databases/openldap: Makefile 
	databases/openldap/pkg: DESCR-main DESCR-server 

Log message:
add a gssapi flavour to openldap, from Kurt Mosiejczuk with a few tweaks,
looks fine to aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/19 02:08:15

Modified files:
	databases      : Makefile 

Log message:
build openldap gssapi


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/19 02:22:53

Modified files:
	games/adventure: hdr.h init.c 

Log message:
Silence a whole slew of clang warnings by doing a no-op in the crazy
internal obfuscation scheme the other way around, thereby avoiding a
signed underflow.

ok mestre


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/19 02:31:43

Modified files:
	sys/scsi       : scsiconf.h 

Log message:
Add some comments about the assumptions of the scsi mid layer

ok krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/19 03:06:39

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
replace tabs with spaces, for consistency, in the BNF display;
from michal mazurek


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 03:19:49

Modified files:
	geo/gdal       : Makefile distinfo 
	geo/gdal/patches: patch-apps_gdalserver_c patch-configure 
	                  patch-frmts_openjpeg_openjpegdataset_cpp 
	                  patch-swig_perl_GNUmakefile 
	                  patch-swig_python_setup_py 
	geo/gdal/pkg   : PLIST-main PLIST-python 
Added files:
	geo/gdal/patches: patch-port_cpl_port_h 

Log message:
Update to GDAL 2.2.0.

See http://www.osgeo.org/node/1789.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 04:02:58

Modified files:
	geo/mapproxy   : Makefile distinfo 
	geo/mapproxy/pkg: PLIST 
Removed files:
	geo/mapproxy/patches: patch-setup_cfg 

Log message:
Update to mapproxy 1.10.0.

Switch to use pypi.io as upstream instead of github, allows to get rid
of a patch and the post-patch target.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 04:10:27

Modified files:
	devel/cargo    : Makefile 

Log message:
Remove the use of gcc4 module, not needed anymore since rust has the
libgcc.a symlink pointing to the basesystem libgcc. From semarie@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/19 04:18:57

Modified files:
	sys/dev/ic     : r92creg.h 

Log message:
Fix R92C_USTIME_TSF register definition.
According to Kevin Lo it was wrong (and is also wrong in the Linux driver).
FreeBSD made the same change in r282623.
Patch by Kevin Lo.


CVSROOT:	/cvs
Module name:	src
Changes by:	rzalamena@cvs.openbsd.org	2017/05/19 04:43:05

Modified files:
	sys/net        : pf.c 

Log message:
Change PF behavior to allow MLD Listener Report packets to be sent
without needing a previously created state by MLD Listener Query. It
wasn't working because: (1) you might not have a previous MLD Listener
Query and (2) the addresses of the Query and Report don't match.

ok mikeb@, sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/19 04:53:33

Modified files:
	sys/dev/pci    : if_rtwn.c 

Log message:
Make rtwn(4) support fixed transmit rates set with ifconfig(8).
Useful for development and testing but not recommended for regular usage.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/19 05:30:40

Modified files:
	sys/dev/pci    : if_rtwn.c 

Log message:
Make rtwn(4) add frames which failed to transmit to AMRR's transmit counter.
More closely matches what other drivers are doing.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/19 05:42:48

Modified files:
	sys/dev/ic     : ar9003.c ar9003reg.h athnreg.h 

Log message:
Make monitor work with athn(4) on my 3T3R AR9380 device.
This card can now receive packets. Transmit is still broken and
Kevin Lo reports that his 2T2R AR9380 device cannot receive yet.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 06:26:43

Modified files:
	net/libtorrent : Makefile 
	net/libtorrent/patches: patch-src_torrent_utils_net_h 
Added files:
	net/libtorrent/patches: clangpatch-src_torrent_utils_log_cc 
	                        clangpatch-src_utils_queue_buckets_h 
	                        patch-src_net_socket_set_h 
	                        patch-src_torrent_common_h 
	                        patch-src_torrent_data_block_failed_h 
	                        patch-src_torrent_data_transfer_list_cc 
	                        patch-src_torrent_utils_extents_h 
	                        patch-src_utils_instrumentation_h 

Log message:
one of the more fun fixes for clang. I don't know where freebsd gets their
tr1, but we don't, so fix it by subsitution. Leaves us with a few nits to
fix. Conditionalize clang patches that interfere with tr1 substitution...


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/05/19 06:54:31

Modified files:
	sbin/disklabel : disklabel.8 editor.c 

Log message:
tweak partition sizes for auto-alloction to better suit 8G disks
ok kr@ aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 07:19:59

Modified files:
	multimedia/mediatomb: Makefile 
Added files:
	multimedia/mediatomb/patches: patch-src_hash_dbo_hash_h 
	                              patch-src_hash_dbr_hash_h 
	                              patch-src_hash_dso_hash_h 
	                              patch-src_singleton_h 
	                              patch-tombupnp_upnp_src_genlib_net_http_webserver_c 
	                              patch-tombupnp_upnp_src_uuid_upnp_md5_c 

Log message:
build with clang


CVSROOT:	/cvs
Module name:	www
Changes by:	edd@cvs.openbsd.org	2017/05/19 08:04:18

Modified files:
	.              : want.html 

Log message:
Add 2 x Yubikeys to want.html.

GnuPG2 MAINTAINER pea@ and myself would like the ability to properly test gpg2
port updates.

Apparently I don't need an OK for want.html, but since I have two:
OK tb@, pea@. Thanks.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/19 08:11:30

Modified files:
	.              : errata60.html errata61.html 

Log message:
release exec_subr errata.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/19 09:09:34

Modified files:
	.              : index.html 

Log message:
admit to the existence of the #openbsd irc channel on freenode.

discussed with deraadt, tb, brynet


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/05/19 10:40:59

Modified files:
	sys/kern       : Tag: OPENBSD_6_1 exec_subr.c 

Log message:
MFC: Add a gap of 1MB between the stack and mmap spaces.


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/05/19 10:42:44

Modified files:
	sys/kern       : Tag: OPENBSD_6_0 exec_subr.c 

Log message:
MFC: Add a gap of 1MB between the stack and mmap spaces.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/19 10:56:49

Modified files:
	share/man/man5 : installurl.5 

Log message:
Clarify that /etc/installurl is only created when using the http method.
Xr pkg_add while there.

ok jmc


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/05/19 11:35:54

Log message:
    This is a display-based version of the Space Invaders game.
    The object of the game is to prevent the aliens to invade you.
    For that you need to destroy all fifty-five aliens before they either
    reach your laser base or the floor.
    
    input and ok tb@
    
    Status:
    
    Vendor Tag:	mglocker
    Release Tags:	mglocker_2017-May-19
    
    N ports/games/spaceinvaders/distinfo
    N ports/games/spaceinvaders/Makefile
    N ports/games/spaceinvaders/pkg/PLIST
    N ports/games/spaceinvaders/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/19 12:15:15

Modified files:
	sys/dev/ic     : r92creg.h rtwn.c 

Log message:
Repair rtwn(4) IQ calibration.

Restore behaviour from before the fix of the botched R92C_USTIME_TSF register
definition. IQ cal code was referring to this register by name, but actually
needs to use the old value. So add a register definition for the old value
under a new name (R92C_BCN_CTRL1) and use this name in the IQ cal code.

Discussed with Kevin Lo


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/19 13:08:22

Modified files:
	.              : books.html 

Log message:
add httpd and relayd mastery.


CVSROOT:	/cvs
Module name:	src
Changes by:	eric@cvs.openbsd.org	2017/05/19 13:56:42

Modified files:
	usr.sbin/smtpd : smtpctl.c 

Log message:
- switch to recallocarray
- remove pre-allocation
- use a better growth pattern

ok gilles@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/19 15:07:17

Modified files:
	usr.bin/ssh    : PROTOCOL.agent 

Log message:
Now that we no longer support SSHv1, replace the contents of this file
with a pointer to https://tools.ietf.org/html/draft-miller-ssh-agent-00
It's better edited, doesn't need to document stuff we no longer implement
and does document stuff that we do implement (RSA SHA256/512 signature
flags)


CVSROOT:	/cvs
Module name:	www
Changes by:	djm@cvs.openbsd.org	2017/05/19 15:19:01

Modified files:
	openssh        : specs.html 

Log message:
link to I-D version of the ssh-agent protocol


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 15:54:35

Modified files:
	www/mozilla-firefox: Makefile distinfo 
	www/firefox-i18n: Makefile.inc distinfo 

Log message:
Bugfix update to firefox 53.0.3.

See https://www.mozilla.org/en-US/firefox/53.0.3/releasenotes/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 15:55:40

Modified files:
	www/firefox-esr: Makefile distinfo 
	www/firefox-esr-i18n: Makefile.inc distinfo 

Log message:
Bugfix update to firefox-esr 52.1.2.

See https://www.mozilla.org/en-US/firefox/52.1.2/releasenotes/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 15:58:35

Modified files:
	www/mozilla-firefox: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC: bugfix update to firefox 53.0.3.

See https://www.mozilla.org/en-US/firefox/53.0.3/releasenotes/

Packages for -stable available at
https://packages.rhaalovely.net/pub/OpenBSD/6.1/packages/${ARCH}


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/19 15:59:45

Modified files:
	www/firefox-esr: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC: bugfix update to firefox-esr 52.1.2.

See https://www.mozilla.org/en-US/firefox/52.1.2/releasenotes/

Packages for -stable available at
https://packages.rhaalovely.net/pub/OpenBSD/6.1/packages/${ARCH}


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 16:25:53

Modified files:
	net/libtorrent : Makefile 
	net/libtorrent/patches: patch-src_net_socket_set_h 
	                        patch-src_torrent_common_h 
	                        patch-src_torrent_data_block_failed_h 
	                        patch-src_torrent_data_transfer_list_cc 
	                        patch-src_torrent_utils_extents_h 
	                        patch-src_torrent_utils_net_h 
	                        patch-src_utils_instrumentation_h 
Added files:
	net/libtorrent/patches: patch-src_data_memory_chunk_cc 
	                        patch-src_protocol_request_list_cc 
	                        patch-src_torrent_data_file_cc 
	                        patch-src_torrent_download_cc 
	                        patch-src_torrent_peer_connection_list_cc 

Log message:
static members must exist, even have external linkage for some, so
that rtorrent can work
bump accordingly.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 16:26:32

Modified files:
	net/rtorrent   : Makefile 
Added files:
	net/rtorrent/patches: patch-src_core_manager_cc 
	                      patch-src_core_poll_manager_cc 
	                      patch-src_display_window_file_list_cc 
	                      patch-src_rpc_exec_file_cc 
	                      patch-src_rpc_object_storage_cc 
	                      patch-src_signal_handler_cc 

Log message:
make it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 16:37:35

Added files:
	net/freetalk/patches: patch-src_callbacks_cc 

Log message:
can't modify read-only result, make a copy first (clang error)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 16:43:11

ports/net/p5-Net-RawIP/patches

Update of /cvs/ports/net/p5-Net-RawIP/patches
In directory cvs.openbsd.org:/tmp/cvs-serv17078/patches

Log Message:
Directory /cvs/ports/net/p5-Net-RawIP/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 16:43:54

Added files:
	net/p5-Net-RawIP/patches: patch-RawIP_xs 

Log message:
clang really hates wrong returns


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 16:55:35

Modified files:
	net/gnugk      : Makefile 
	net/gnugk/patches: patch-yasocket_cxx 
Added files:
	net/gnugk/patches: patch-Toolkit_cxx patch-gk_cxx 

Log message:
use .beforesubst so that patch regen doesn't fuck up
missing headers for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:14:09

Added files:
	net/centerim/patches: patch-libicq2000_src_ContactTree_cpp 
	                      patch-libjabber_jconn_c 
	                      patch-src_hooks_abstracthook_h 

Log message:
fix compilation with clang. warns a lot about stuff that shouldn't be though


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:17:24

Modified files:
	textproc/clo++/patches: patch-configure patch-src_Generator_cc 
Added files:
	textproc/clo++/patches: patch-src_StrUtil_cc 

Log message:
fix with clang (strrchr). regen patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:20:59

Added files:
	math/minisat/patches: patch-core_SolverTypes_h 

Log message:
fix friend


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:23:11

Modified files:
	misc/hfsplus   : Makefile 

Log message:
assert gnu89-inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:33:02

Added files:
	misc/xnc/patches: patch-bookmark_cxx patch-filedir_softmagic_c 
	                  patch-plugins_aqua_aquagui_cxx 
	                  patch-plugins_five_fivegui_cxx 

Log message:
fixes for clang, still warns a lot


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:36:08

Modified files:
	misc/wmtimer   : Makefile 

Log message:
assert gnu89 inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:39:14

Modified files:
	mail/wmmail    : Makefile 

Log message:
assert gnu89 inlines, fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:41:25

Modified files:
	mail/wmmultipop3: Makefile 
	mail/wmpop3    : Makefile 

Log message:
more gnu89 inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:42:51

Modified files:
	graphics/wmphoto: Makefile 

Log message:
gnu89 inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/19 17:59:17

Added files:
	graphics/dia/patches: patch-lib_Makefile_in 

Log message:
--export-dynamic  is a linker option, pass it straight thru.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/19 20:35:47

Modified files:
	usr.bin/ssh    : readconf.c 

Log message:
there's no reason to artificially limit the key path here, just check
that it fits PATH_MAX; spotted by Matthew Patton


CVSROOT:	/cvs
Module name:	www
Changes by:	djm@cvs.openbsd.org	2017/05/19 22:33:16

Modified files:
	openssh        : specs.html 

Log message:
we no longer implement SSHv1, so remove references to its
specifications


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/20 01:43:10

Modified files:
	graphics/p5-Image-ExifTool: Makefile distinfo 
	graphics/p5-Image-ExifTool/pkg: PLIST 

Log message:
Update to p5-Image-ExifTool-10.50.

from Patrick Keshishian (Maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/20 01:55:14

Modified files:
	devel/p5-Expect: Makefile distinfo 

Log message:
Update to p5-Expect-1.35.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/20 02:02:16

Modified files:
	devel/py-altgraph: Makefile distinfo 

Log message:
Update to py-altgraph-0.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/20 02:10:23

Modified files:
	devel/py-configargparse: Makefile distinfo 

Log message:
Update to py-ConfigArgParse-0.12.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/20 03:31:19

Modified files:
	usr.bin/tsort  : tsort.c 

Log message:
reorg node struct so it's packed tighter (found by clang actually)
mark usage __dead
okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/20 04:13:42

Modified files:
	sys/dev/usb    : uslcom.c 

Log message:
Accept baud rates up to 2 Mbps as these are supported by CP2104 and later
variants.

ok jsg@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/20 04:25:46

Modified files:
	share/man/man4 : uslcom.4 

Log message:
Mention that not all varaints support baud rates up to 2 Mbps.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/20 04:32:43

Added files:
	devel/boost/patches: 
	                     patch-libs_config_test_boost_has_nl_types_h_ipp 

Log message:
make sure the one test that boost fails on clang conforms to what gcc does


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/20 05:25:15

Modified files:
	textproc/jo    : Makefile distinfo 
	textproc/jo/pkg: DESCR 

Log message:
Update jo to 1.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/20 06:48:56

Modified files:
	lib/libc/hidden: stdlib.h 
	lib/libc/stdlib: heapsort.c qsort.c 

Log message:
Use David Musser's introsort algorithm to fall back to heapsort(3)
when the recursion depth reaches 2*lg(n + 1).  This avoids quicksort's
quadratic behavior for pathological input without appreciably
changing the average run time.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/20 07:09:01

Modified files:
	lib/libc/stdlib: qsort.3 

Log message:
Document that qsort falls back to heapsort() if the recursion depth
exceeds 2 lg N and add a reference to the introsort paper.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/20 08:24:46

Modified files:
	share/man/man4 : uslcom.4 

Log message:
spelling;


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/20 11:13:01

Modified files:
	games/lgeneral : Makefile 
	games/lgeneral/patches: patch-lgeneral_gui_c 
Removed files:
	games/lgeneral/patches: patch-lgeneral_gui_h 
	                        patch-lgeneral_sdl_c 
	                        patch-lgeneral_sdl_h 
	                        patch-lgeneral_theme_c 
	                        patch-lgeneral_tools_c 
	                        patch-lgeneral_tools_h 
	                        patch-lgeneral_unit_c 
	                        patch-lgeneral_unit_h 

Log message:
bleh sdl wants gnu89 inlines anyway, so just assert it, and don't convert
the rest...


CVSROOT:	/cvs
Module name:	src
Changes by:	sashan@cvs.openbsd.org	2017/05/20 16:56:43

Modified files:
	sys/net        : pf.c 

Log message:
- fixes regression found by pf_forward test

O.K. bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/20 17:12:40

Modified files:
	sys/dev/fdt    : rkclock.c rkclock_clocks.h 

Log message:
More SD/MMC controller-related clocks.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/20 18:06:40

Modified files:
	.              : cvsync.html 
	build/mirrors  : cvsync.html.head 

Log message:
remove mention of sup and cvsup; from amit kulkarni


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/20 18:43:52

Added files:
	databases/strigi/patches: 
	                          patch-libstreamanalyzer_lib_rdfnamespaces_h 
	                          patch-libstreamanalyzer_plugins_endplugins_ffmpegendanalyzer_cpp 
	                          patch-strigidaemon_bin_daemon_xesam_xesamsearch_h 

Log message:
fix for clang


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/20 20:37:52

Modified files:
	sbin/iked      : dh.c 
	usr.sbin/ikectl: ikeca.c 
	usr.sbin/radiusd: radiusd.c 
	usr.sbin/sasyncd: monitor.c 

Log message:
A few more freezero() uses
ok yasuoka mikeb


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 02:59:45

Modified files:
	sys/dev/fdt    : files.fdt 
	sys/arch/arm64/conf: GENERIC RAMDISK 
Added files:
	sys/dev/fdt    : dwmmc.c 

Log message:
Add dwmmc(4), a driver for the Synopsis Designware SD/MMC controller as found
on various Rockchip SoCs.

This is still WIP.  Next steps will be to get rid of various busy-wait loops
and add DMA support.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/21 03:09:58

Modified files:
	distrib/miniroot: install.sub 

Log message:
Ensure a clean initial state (e.g. in case of an installer restart)
by moving setting ulimit, unmounting all filesystems and cleaning up
the dhcp state upwards to before sourcing install.md.

OK tb@

While here, 1>/dev/null -> >/dev/null.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 03:33:38

ports/textproc/arabica/patches

Update of /cvs/ports/textproc/arabica/patches
In directory cvs.openbsd.org:/tmp/cvs-serv21786/patches

Log Message:
Directory /cvs/ports/textproc/arabica/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 03:49:30

Added files:
	devel/boost/patches: patch-tools_build_src_engine_jam_h 

Log message:
do not redefine unix if it's already there, silences some clang warnings


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 03:50:45

Added files:
	textproc/arabica/patches: 
	                          patch-include_SAX_helpers_AttributesImpl_hpp 
	                          patch-include_SAX_helpers_AttributesImpl_hpp.orig 
	                          patch-include_Taggle_impl_html_HTMLScanner_hpp 
	                          patch-include_XPath_impl_xpath_logical_hpp 
	                          patch-include_io_convert_adaptor_hpp 
	                          patch-include_io_socket_stream_hpp 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 04:50:19

ports/devel/boost/files

Update of /cvs/ports/devel/boost/files
In directory cvs.openbsd.org:/tmp/cvs-serv30910/files

Log Message:
Directory /cvs/ports/devel/boost/files added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 05:22:31

Modified files:
	devel/boost    : Makefile 
Added files:
	devel/boost/files: user.hpp 

Log message:
first try at a clang compile, reuse gcc config so that stuff that builds
does build.

todo:
- enable more stuff
- look closer at the tooling, needs something like the gcc config change

but at least, this allows us to look at the remaining ports.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/21 05:23:30

Modified files:
	security/gnupg2: Makefile distinfo 
	security/gnupg2/pkg: PLIST 

Log message:
Update to 2.1.21
Yubikey tested by Pavel Korovin, thanks !
ok edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 05:28:27

Added files:
	databases/soprano/patches: patch-client_socket_cpp 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 05:52:04

Modified files:
	sys/dev/fdt    : if_dwge_fdt.c 
	sys/dev/ic     : dwc_gmac.c dwc_gmac_var.h 

Log message:
Rockchip SoCs needs some additional register twiddling when the link speed
changes to set the appropriate clock.  Add a sc_statchg callback in the
core softc that gets called when the link status changes.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/21 05:54:41

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
correct a return value test
ok millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/21 05:57:53

Modified files:
	print/texlive  : Makefile.inc 
	print/texlive/base: Makefile distinfo 
	print/texlive/base/pkg: DESCR PLIST README 
	print/texlive/texmf: Makefile adj.mk distinfo 
	print/texlive/texmf/files: mk_plists.py 
	print/texlive/texmf/patches: 
	                             patch-texmf-dist_doc_info_texdraw_info 
	                             patch-texmf-dist_scripts_bibexport_bibexport_sh 
	                             patch-texmf-dist_scripts_context_stubs_unix_mtxrun 
	                             patch-texmf-dist_web2c_texmf_cnf 
	                             patch-texmf-dist_web2c_texmfcnf_lua 
	print/texlive/texmf/pkg: PLIST-buildset PLIST-context PLIST-docs 
	                         PLIST-full PLIST-main 

Log message:
Update TeX Live to 2016.

Testing and input from:
* sthen@
* Nicola Tomasone
* pirofti@
* giovanni@
* Ze Loff
* rsadowski@

OK pirofti@

Many thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 06:34:39

Modified files:
	x11/pinot      : Makefile 
Added files:
	x11/pinot/patches: patch-IndexSearch_ModuleFactory_cpp 
	                   patch-Tokenize_filters_GMimeMboxFilter_cc 

Log message:
build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/21 07:00:53

Modified files:
	etc/etc.loongson: MAKEDEV.md 
	sys/arch/loongson/conf: GENERIC 
	sys/arch/loongson/include: autoconf.h pmon.h vmparam.h 
	sys/arch/loongson/loongson: conf.c generic3a_machdep.c machdep.c 
	                            pmon.c 
	sys/arch/mips64/conf: files.mips64 
	sys/dev/pci/drm/radeon: radeon_bios.c 
	sys/kern       : kern_pledge.c 
	sys/uvm        : uvm_device.c 
Added files:
	sys/lib/libkern/arch/mips64: sync.S 

Log message:
Enable radeondrm(4) on loongson to get accelerated graphics
with the RS780E chipset.

OK kettenis@, jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/21 07:02:52

Modified files:
	etc/etc.loongson: MAKEDEV 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/21 07:07:19

Modified files:
	share/man/man8/man8.loongson: MAKEDEV.8 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 07:12:45

Added files:
	devel/xulrunner/24/patches: patch-js_src_jsopcode_cpp 

Log message:
allow clang to go further, pointer comparison


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	visa@cvs.openbsd.org	2017/05/21 07:18:29

Modified files:
	driver         : Makefile 
	lib/mesa       : Makefile.bsd-wrapper 
	xserver/hw/xfree86/os-support/bsd: sgi_video.c 

Log message:
Make X work with radeondrm(4) hardware on loongson.

OK jsg@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	visa@cvs.openbsd.org	2017/05/21 07:22:23

Modified files:
	distrib/sets/lists/xbase: md.loongson 
	distrib/sets/lists/xserv: md.loongson 

Log message:
sync


CVSROOT:	/cvs
Module name:	www
Changes by:	edd@cvs.openbsd.org	2017/05/21 07:42:51

Modified files:
	.              : want.html 

Log message:
want.html: The request for Yubikeys has now been fulfilled.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/21 08:22:36

Modified files:
	sys/arch/loongson/loongson: pmon.c 

Log message:
Tweak style.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 08:44:31

Modified files:
	math/calc      : Makefile distinfo 
	math/calc/pkg  : PLIST 

Log message:
update to calc-2.12.5.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 08:52:54

Modified files:
	multimedia/minidlna: Makefile distinfo 
	multimedia/minidlna/patches: patch-minidlna_conf 
	                             patch-upnphttp_c patch-utils_c 
Removed files:
	multimedia/minidlna/patches: patch-inotify_c patch-inotify_h 
	                             patch-minidlna_c patch-scanner_c 
	                             patch-upnpglobalvars_c 
	                             patch-upnpglobalvars_h 

Log message:
udpate to MiniDLNA-1.2.0, rescan patch is now committed upstream


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 09:02:41

Modified files:
	graphics/ImageMagick: Makefile distinfo 

Log message:
update to ImageMagick-6.9.8-6


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/21 09:41:49

Modified files:
	textproc/ripgrep: Makefile distinfo 

Log message:
Update to ripgrep-0.5.2

From semarie, discussed with espie


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/21 10:12:43

Modified files:
	net/openvpn    : Makefile 
	net/openvpn/patches: patch-src_openvpn_route_c 

Log message:
Add support for non-0 routing tables

Patch from Steven McDonald, already committed upstream.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 10:23:56

Modified files:
	sys/dev/fdt    : dwmmc.c 

Log message:
Actually wait on auto command done (ACD) as was the intention.


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/05/21 10:33:53

Modified files:
	share/man/man4 : route.4 
	sys/net        : route.h 

Log message:
Fix copy/paste in comment.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 11:27:22

Modified files:
	www/squid      : Makefile 

Log message:
use WANT_CXX


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	shadchin@cvs.openbsd.org	2017/05/21 11:36:40

Modified files:
	dist/xkeyboard-config/symbols: pc 

Log message:
Add "Sun LKeys" section, this patch forgot add in last update.

noticed deraadt@, ok matthieu@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 11:44:52

Modified files:
	sys/dev/fdt    : dwmmc.c 
	sys/arch/armv7/conf: GENERIC RAMDISK 

Log message:
Add support for the SD/MMC controller found on Samsuung Exynos5.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 11:47:01

Modified files:
	sys/arch/armv7/exynos: files.exynos 
Removed files:
	sys/arch/armv7/exynos: exesdhc.c 

Log message:
Remove exesdhc(4).  This driver was never finished and has been replaced
by dwmmc(4).


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/21 11:47:53

Modified files:
	graphics/clutter/core: Makefile distinfo 
	graphics/clutter/core/pkg: PLIST 
Removed files:
	graphics/clutter/core/patches: patch-tests_conform_actor-graph_c 

Log message:
update to clutter-1.26.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/21 11:48:10

Modified files:
	x11/gnome/mutter: Makefile distinfo 
	x11/gnome/mutter/patches: patch-src_compositor_compositor_c 
	                          patch-src_core_main_c 

Log message:
update to mutter-3.24.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/21 11:48:25

Modified files:
	x11/gnome/shell: Makefile distinfo 

Log message:
update to gnome-shell-3.24.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/21 11:48:41

Modified files:
	x11/gnome/shell-extensions: Makefile distinfo 
	x11/gnome/shell-extensions/pkg: PLIST 

Log message:
update to gnome-shell-extensions-3.24.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/21 11:49:04

Modified files:
	devel/vte3     : Makefile distinfo 

Log message:
update to vte-0.48.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/21 11:49:17

Modified files:
	x11/gnome/terminal: Makefile distinfo 

Log message:
update to gnome-terminal-3.24.2


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 11:49:45

Modified files:
	sys/arch/armv7/exynos: exclock.c 

Log message:
Add clocks for SD/MCC controller on Exynos 5420/5800.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/21 11:51:30

Modified files:
	devel/py-spark-parser: Makefile distinfo 

Log message:
Update to py-spark-parser 1.6.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/21 11:54:10

Modified files:
	devel/py-xdis  : Makefile distinfo 

Log message:
Update to py-xdis 3.3.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/21 12:02:39

Modified files:
	devel/py-hypothesis: Makefile distinfo 

Log message:
Update to py-hypothesis 3.9.0


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/21 12:22:51

Modified files:
	faq            : faq5.html 

Log message:
replace the 'why is /usr/obj on its own partition' with a short section on
ctags files, which allow you to navigate the source trees quickly.

ok tj


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/21 13:14:36

Modified files:
	sys/arch/arm64/arm64: pmap.c 

Log message:
Give the vp pool its own allocator.  Avoiding the logic that creates large
pool pages that fit at least 8 pool items reduces the kva pressure.
Unfortunately this doesn't completely eliminate the problems sthen@ is
seeing.

ok drahn@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 15:05:22

Modified files:
	math/calc      : Makefile 
Added files:
	math/calc/patches: patch-version_c 

Log message:
Fix intermittent segfault in the version string printing that was introduced
in the last update.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 15:46:32

Modified files:
	databases/pecl-redis: Makefile distinfo 

Log message:
update to pecl-redis-3.1.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/21 15:51:27

Modified files:
	www/pecl-geoip : Makefile distinfo 
Removed files:
	www/pecl-geoip/patches: patch-config_m4 

Log message:
update to pecl-geoip-1.1.1


CVSROOT:	/cvs
Module name:	www
Changes by:	espie@cvs.openbsd.org	2017/05/21 16:36:26

Modified files:
	.              : want.html 

Log message:
we finally killed those boxen, they were taking rackspace for obsolete
builds.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/21 16:53:36

Modified files:
	faq            : upgrade40.html 

Log message:
fix weird linebreak inside <pre>


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/21 16:57:30

Modified files:
	faq            : upgrade35.html upgrade36.html upgrade37.html 
	                 upgrade38.html upgrade39.html upgrade41.html 
	                 upgrade42.html upgrade43.html 

Log message:
more of these linebreaks inside <pre>


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/21 17:12:55

Modified files:
	libressl       : openbsd.css 
	openbgpd       : openbsd.css 
	opencvs        : openbsd.css 
	openntpd       : openbsd.css 
	opensmtpd      : openbsd.css 
	openssh        : openbsd.css 
	.              : openbsd.css 

Log message:
treat text inside <tt> as preformatted. avoids unfortunate linebreaks
in commands and paths.

discussed with tj


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/21 17:16:04

Modified files:
	faq            : upgrade59.html upgrade60.html upgrade61.html 

Log message:
remove redundant css


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 17:33:12

Added files:
	net/radcli/patches: patch-lib_util_c 

Log message:
bogus char at end of constant (there's no 'd' for doubles)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 17:39:46

Modified files:
	games/sdlroids : Makefile 

Log message:
assert gnu89 inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 17:41:47

ports/games/xwelltris/patches

Update of /cvs/ports/games/xwelltris/patches
In directory cvs.openbsd.org:/tmp/cvs-serv33745/patches

Log Message:
Directory /cvs/ports/games/xwelltris/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 17:42:17

Added files:
	games/xwelltris/patches: patch-src_sdl_sdlwelldrawing_cxx 

Log message:
pointer vs integer


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/21 18:13:09

Added files:
	games/widelands/patches: patch-src_i18n_cc 
	                         patch-src_journal_exceptions_h 
	                         patch-src_main_cc 
	                         patch-src_network_network_lan_promotion_cc 
	                         patch-src_writeHTML_cc 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/21 19:56:22

Modified files:
	sys/net        : if_ethersubr.c 

Log message:
white space fix. no functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/21 20:23:18

Log message:
    Import py-simpleeval-0.9.5 from semarie with minor tweaks from me
    
    A quick single file library for easily adding evaluatable expressions into
    python projects.
    
    Say you want to allow a user to set an alarm volume, which could depend on the
    time of day, alarm level, how many previous alarms had gone off, and if there
    is music playing at the time.
    
    Or if you want to allow simple formulae in a web application, but don't want to
    give full eval() access, or don't want to run in javascript on the client side.
    
    Status:
    
    Vendor Tag:	danj
    Release Tags:	danj_20170521
    
    N ports/devel/py-simpleeval/Makefile
    N ports/devel/py-simpleeval/distinfo
    N ports/devel/py-simpleeval/pkg/DESCR
    N ports/devel/py-simpleeval/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/05/21 20:26:01

Modified files:
	devel          : Makefile 

Log message:
+ py-simpleeval
+ py-simpleeval,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/21 23:25:03

Modified files:
	graphics/rawtherapee: Makefile distinfo 
	graphics/rawtherapee/patches: patch-CMakeLists_txt 
	                              patch-rtengine_sleef_c 
	graphics/rawtherapee/pkg: PLIST 

Log message:
update to rawtherapee-5.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 02:04:07

Modified files:
	lang/gcc/4.9   : gcc4.port.mk 

Log message:
provide an indirection to libatomic, because at least one port depends on it
when not built with base clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 02:04:39

Modified files:
	x11/ogre       : Makefile 

Log message:
fix packaging with clang, requires -current gcc4.port.mk for gcc4


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 02:06:25

Modified files:
	infrastructure/mk: modules.port.mk 

Log message:
improvements to WANT_CXX
- add clang to the list of keywords (to mean ports' clang)
- take MODGCC4_ARCHS/MODCLANG_ARCHS into account if they're defined,
so we can skip one compiler if it's not appropriate and go to the next
one.

This should take care of 95% of the remaining gcc4/clang users on "some
architectures"


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/22 03:05:49

Modified files:
	print/texlive  : Makefile.inc 

Log message:
tweak the comment about ftp.tug.org which doesn't work with ftp(1)'s keepalive
implementation

drop the ftp.math.utah.edu mirror as some people have had problems with it
stalling

ok edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/22 03:24:24

Modified files:
	mail/gmime30   : Makefile distinfo 

Log message:
Update to gmime30-3.0.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 04:22:25

Modified files:
	x11/vlc        : Makefile 
	x11/vlc/patches: patch-include_vlc_fixups_h 
Added files:
	x11/vlc/patches: patch-Makefile_in patch-include_vlc_atomic_h 
	                 patch-include_vlc_playlist_h 
	                 patch-modules_demux_mp4_libmp4_h 
	                 patch-modules_gui_qt4_dialogs_messages_cpp 
	                 patch-modules_gui_qt4_dialogs_messages_hpp 
	                 patch-modules_gui_skins2_src_dialogs_cpp 

Log message:
let it build with base clang.
there's an horrible work-around because we have use_locale stubs only
in C++ mode...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 04:25:02

Modified files:
	www/mozilla-firefox: Makefile 

Log message:
allow build with clang, be explicit about the C++ lib


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 04:26:14

Modified files:
	www/firefox-esr: Makefile 

Log message:
let it build with base clang, be explicit about the c++ lib


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/05/22 07:07:44

Modified files:
	sysutils/ruby-puppet/4: Makefile distinfo 
	sysutils/ruby-puppet/4/pkg: PLIST 

Log message:
Long overdue update 4.8.4 -> 4.10.1
Check Puppet release notes for detailed
changes for all the revisions in between.

runs for me since a week without issues.

OK jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/05/22 07:40:54

Added files:
	usr.sbin/smtpd : smtpf_session.c 

Log message:
stub for the smtp filter protocol, currently always returns -1


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/05/22 07:43:15

Modified files:
	usr.sbin/smtpd : parse.y smtp.c smtpd.h 
	usr.sbin/smtpd/smtpd: Makefile 

Log message:
- filters are currently broken, do not allow using them until we're done


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:47:39

Modified files:
	archivers/zstd : Makefile 

Log message:
okay, this is C, but still does not need gcc4 on clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:48:39

Added files:
	games/dustrac/patches: patch-src_editor_editorview_cpp 

Log message:
missing includes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:52:55

Modified files:
	graphics/rawtherapee: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/22 07:54:14

Modified files:
	sys/kern       : subr_witness.c 

Log message:
Drop kernel trace points. The trace facility does not exist on OpenBSD.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:54:20

Modified files:
	productivity/libalkimia: Makefile 

Log message:
allow build with clang, /usr/local does not come for free


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:54:51

Modified files:
	productivity/ledger: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:55:54

Modified files:
	multimedia/mlt : Makefile 

Log message:
swig will use g++ if we don't tell it otherwise. Unhardcode


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:57:11

Modified files:
	textproc/vislcg3: Makefile 

Log message:
WANT_CXX. No need for LIBECXX because ports clang will bring it and base
clang has LIBCXX already


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 07:58:24

Modified files:
	www/seamonkey  : Makefile 

Log message:
most complex WANT_CXX yet. The one for which I wrote the *ARCHS support


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 08:00:21

Modified files:
	databases/mongodb: Makefile 
	databases/mongodb/patches: patch-SConstruct 
Added files:
	databases/mongodb/patches: 
	                           patch-src_mongo_platform_stack_locator_openbsd_cpp 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 08:01:52

Added files:
	textproc/clucene/patches: 
	                          patch-src_shared_CLucene_LuceneThreads_h 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 08:02:55

Added files:
	net/kea/patches: patch-src_lib_util_watch_socket_cc 

Log message:
missing include for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 08:22:24

Added files:
	mail/zarafa/zarafa/patches: 
	                            patch-provider_libserver_ECConvenientDepthObjectTable_cpp 
	                            patch-provider_plugins_plugin_h 

Log message:
clang wants const correct operators


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 08:25:14

Modified files:
	games/scorched3d/patches: patch-src_client_client_SecureID_cpp 

Log message:
misses unistd


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/22 08:26:08

Modified files:
	sys/netinet    : ip_icmp.c 

Log message:
Fix a mbuf leak when reflecting an ICMP packet with IP options.
Free the options in icmp_input_if() after a successful call to
icmp_reflect().
bug report and analysis by Hendrik Gerlach
OK krw@ claudio@ phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 08:42:47

Removed files:
	x11/kde4/libkdcraw/patches: patch-libkdcraw_kdcraw_cpp 
	                            patch-libkdcraw_kdcraw_p_h 

Log message:
zap old patches that are no longer needed.  pkg-config finds  its includes
correctly, and since clang does not have /usr/local/include in its default
path, it will fail miserably.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/22 08:51:10

Modified files:
	usr.bin/systat : pftop.c 

Log message:
Support for displaying flow queues alongside H-FSC

This (ab)uses the fact that node->qstats.data.period field in
hfsc_class_stats structure is at the same offset as the 'flows'
field in fqcodel_stats.

While here make use of a presently empty field "SCH" to display
the queue management policy (flow or fifo) which is not strictly
a scheduler, but it will hopefully become descriptive and useful
later. This distinguishes flow queues from the regular HFSC ones.

OK sthen, visa


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 09:02:40

Modified files:
	graphics/inkscape: Makefile 
Added files:
	graphics/inkscape/patches: patch-src_libavoid_connector_cpp 
	                           patch-src_ui_tools_flood-tool_cpp 

Log message:
allow build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 09:06:28

Modified files:
	games/openxcom : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/22 10:00:47

Modified files:
	bin/md5        : md5.c 

Log message:
obvious use for freezero()


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/22 10:25:09

Modified files:
	sys/netinet    : Tag: OPENBSD_6_1 ip_icmp.c 

Log message:
Fix a mbuf leak when reflecting an ICMP packet with IP options.
Free the options in icmp_input_if() after a successful call to
icmp_reflect().
bug report and analysis by Hendrik Gerlach
OK krw@ claudio@ phessler@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/22 10:25:52

Modified files:
	sys/netinet    : Tag: OPENBSD_6_0 ip_icmp.c 

Log message:
Fix a mbuf leak when reflecting an ICMP packet with IP options.
Free the options in icmp_input_if() after a successful call to
icmp_reflect().
bug report and analysis by Hendrik Gerlach
OK krw@ claudio@ phessler@ millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 10:26:49

Modified files:
	net/nepenthes  : Makefile 
	net/nepenthes/patches: 
	                       patch-modules_download-curl_download-curl_hpp 
	                       patch-modules_submit-http_HTTPSession_hpp 
	                       patch-modules_submit-http_submit-http_hpp 
	                       patch-modules_submit-norman_submit-norman_hpp 
Added files:
	net/nepenthes/patches: 
	                       patch-modules_dnsresolve-adns_dnsresolve-adns_cpp 
	                       patch-modules_download-csend_CSendDialogue_cpp 
	                       patch-modules_download-ftp_download-ftp_cpp 
	                       patch-modules_download-http_HTTPDialogue_cpp 
	                       patch-modules_download-rcp_RCPDialogue_cpp 
	                       patch-modules_download-tftp_TFTPDialogue_cpp 
	                       patch-modules_log-prelude_log-prelude_hpp 
	                       patch-modules_module-honeytrap_PCAPSocket_cpp 
	                       patch-modules_module-peiros_PeirosParser_cpp 
	                       patch-modules_module-peiros_PeirosParser_hpp 
	                       patch-modules_module-peiros_TapInterface_hpp 
	                       patch-modules_module-portwatch_module-portwatch_cpp 
	                       patch-modules_shellcode-generic_sch_generic_unicode_cpp 
	                       patch-modules_shellcode-signatures_sch_engine_unicode_cpp 
	                       patch-modules_submit-gotek_gotekDATADialogue_hpp 
	                       patch-modules_submit-gotek_submit-gotek_cpp 
	                       patch-modules_vuln-bagle_vuln-bagle_cpp 
	                       patch-modules_vuln-dameware_vuln-dameware_cpp 
	                       patch-modules_vuln-dcom_vuln-dcom_cpp 
	                       patch-modules_vuln-ftpd_vuln-ftpd_cpp 
	                       patch-modules_vuln-iis_vuln-iis_cpp 
	                       patch-modules_vuln-kuang2_vuln-kuang2_cpp 
	                       patch-modules_vuln-lsass_vuln-lsass_cpp 
	                       patch-modules_vuln-msdtc_vuln-msdtc_cpp 
	                       patch-modules_vuln-msmq_vuln-msmq_cpp 
	                       patch-modules_vuln-mydoom_vuln-mydoom_cpp 
	                       patch-modules_vuln-optix_vuln-optix_cpp 
	                       patch-modules_vuln-pnp_vuln-pnp_cpp 
	                       patch-modules_vuln-sub7_vuln-sub7_cpp 
	                       patch-modules_vuln-wins_vuln-wins_cpp 
	                       patch-modules_x-5_x-5_cpp 
	                       patch-modules_x-6_x-6_cpp 
	                       patch-nepenthes-core_include_DownloadUrl_hpp 
	                       patch-nepenthes-core_src_Config_cpp 
	                       patch-nepenthes-core_src_DownloadManager_cpp 
	                       patch-nepenthes-core_src_DownloadUrl_cpp 
	                       patch-nepenthes-core_src_EventManager_cpp 
	                       patch-nepenthes-core_src_FileLogger_cpp 
	                       patch-nepenthes-core_src_LogManager_cpp 
	                       patch-nepenthes-core_src_ModuleManager_cpp 
	                       patch-nepenthes-core_src_Nepenthes_cpp 
	                       patch-nepenthes-core_src_RingFileLogger_cpp 
	                       patch-nepenthes-core_src_SocketManager_cpp 
	                       patch-nepenthes-core_src_Utilities_cpp 

Log message:
let it build with clang, missing includes, and a shitload of actual bugs
because -Werror is more picky


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/22 11:15:52

Modified files:
	distrib/miniroot: install.sub 

Log message:
No need to trim a trailling blank, bsort (in scan_dmesg) does not
emit one anymore.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/22 11:16:43

Modified files:
	regress/lib/libc/qsort: Makefile qsort_test.c 
Added files:
	regress/lib/libc/qsort: antiqsort.c 

Log message:
Instead of embedding pre-generated tables from  McIlroy's "A Killer
Adversary for Quicksort", just include the code to generate them.
Also allow the number of elements to be specified on the command line.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/22 11:52:16

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
Add timing and test name options.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 12:25:41

Modified files:
	graphics/darktable: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 12:26:30

Added files:
	games/valyriatear/patches: 
	                           patch-src_luabind_luabind_detail_object_rep_hpp 

Log message:
build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/22 12:28:02

Modified files:
	graphics/asymptote: Makefile 
	x11/gnustep/dbuskit: Makefile 

Log message:
Fix ports using texinfo during the build stage.

texinfo was removed from texlive in favour of the existing port.

Spotted by naddy@ in a bulk, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 12:28:05

Added files:
	x11/xdrawchem/patches: patch-xdrawchem_ioiface_cpp 
	                       patch-xdrawchem_molecule_obmol_cpp 

Log message:
build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/22 13:03:24

Modified files:
	distrib/miniroot: install.sub 

Log message:
The DISPLAY variable is actually not a global variable as it's used
only once in questions(). Use scan_dmesg() output directly to test
for wsdisplay* in dmesg.boot instead.

Change comment, now that it only refers to setting CONSOLE.

no objection tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/22 13:15:29

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
some tweaks to the QUEUEING section;
from mikeb and myself


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 13:39:00

Modified files:
	productivity/akonadi/patches: patch-CMakeLists_txt 
	                              patch-server_src_storage_dbconfigpostgresql_cpp 
Added files:
	productivity/akonadi/patches: 
	                              patch-cmake_modules_FindSqlite_cmake 

Log message:
figure out how to get to sqlite during tests. fixes clang configure


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/22 14:03:43

Modified files:
	mail/akpop3d   : Makefile 
	mail/akpop3d/patches: patch-authenticate_c 
	mail/akpop3d/pkg: PLIST 

Log message:
unbreak authentication, spotted by aja@
explicitely disable mysql support
hints and ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/22 14:04:12

Modified files:
	sys/netinet    : ip_input.c ip_var.h 
	sys/netinet6   : ip6_input.c 

Log message:
Use the IPsec policy check from IPv4 also when doing local delivery
in ip6_local() to our IPv6 stack.
OK mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 14:30:52

Added files:
	graphics/aqsis/patches: patch-libs_core_ddmanager_ddmanager_cpp 
	                        patch-libs_shadervm_shaderexecenv_shadeops_tmap_cpp 
	                        patch-libs_util_posix_execute_system_cpp 
	                        patch-libs_util_posix_socket_system_cpp 

Log message:
trivial clang patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 14:34:10

Modified files:
	devel/keystone : Makefile 

Log message:
WANT_CXX, reason is atomics usage.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/22 14:57:54

Modified files:
	.              : errata60.html errata61.html 

Log message:
release icmp_opts errata.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/22 16:20:01

Modified files:
	x11/gnome/vinagre: Makefile 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/22 16:23:11

Modified files:
	sys/netinet    : ip_input.c ip_ipsp.h ip_var.h ipsec_input.c 
	sys/netinet6   : ip6_input.c 

Log message:
Move IPsec forward and local policy check functions to ipsec_input.c
and give them better names.
input and OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/23 00:55:05

Modified files:
	usr.sbin/smtpd : smtpctl.8 

Log message:
"update table" is for tables of type file only; ok gilles


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 01:19:14

Modified files:
	devel/pango    : Makefile distinfo 

Log message:
Update to pango-1.40.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 01:24:16

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.53.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 01:24:28

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.90.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 01:26:51

Modified files:
	sysutils/awless: Makefile distinfo 

Log message:
Update to awless-0.0.24.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 02:00:49

Modified files:
	devel/avr32/gcc-bootstrap: Makefile 
	devel/avr/gcc  : Makefile 

Log message:
assert gnu89 inlines


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/23 02:13:10

Modified files:
	sys/netinet6   : ip6_input.c 

Log message:
Bump the right counters.  One of these was caught by clang because of a
mismatched enum.

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/23 02:13:35

Modified files:
	net/seafile    : Makefile.inc 
	net/seafile/ccnet: distinfo 
	net/seafile/client: distinfo 
	net/seafile/seafile: distinfo 
Added files:
	net/seafile/ccnet/patches: patch-lib_rsa_c 
Removed files:
	net/seafile/client/patches: patch-src_seafile-applet_cpp 

Log message:
Update to seafile-6.0.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/23 02:30:53

Modified files:
	mail/akpop3d   : Tag: OPENBSD_6_1 Makefile 
	mail/akpop3d/patches: Tag: OPENBSD_6_1 patch-authenticate_c 
	mail/akpop3d/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
Unbreak authentication
explicitely disable mysql support
spotted by I. Schuchardt
ok tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 02:57:27

Modified files:
	www/owncloud   : Makefile distinfo 
	www/owncloud/patches: patch-_htaccess patch-version_php 
	www/owncloud/pkg: PLIST 

Log message:
Update to owncloud-10.0.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/23 03:00:53

Modified files:
	sysutils/dfc   : Makefile distinfo 
	sysutils/dfc/patches: patch-CMakeLists_txt 
	sysutils/dfc/pkg: PLIST 
Added files:
	sysutils/dfc/patches: patch-src_platform_services-bsd_c 
Removed files:
	sysutils/dfc/patches: patch-src_util_c 

Log message:
Update to dfc-3.1.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 03:02:45

Modified files:
	x11/gnome/maps : Makefile distinfo 

Log message:
Update to gnome-maps-3.24.3.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/23 03:09:03

Modified files:
	sys/net        : pf.c 

Log message:
Move the common length check in pf_pull_hdr() after the address
family switch.  This makes the specific calculation more obvious.
OK claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/23 03:16:29

Modified files:
	geo/qgis       : Makefile distinfo 
	geo/qgis/patches: patch-doc_CMakeLists_txt 
	                  patch-src_app_qgisapp_cpp 
	geo/qgis/pkg   : PLIST 

Log message:
Bugfix update to QGIS 2.18.8.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/23 03:39:48

Modified files:
	sysutils/dfc   : Makefile 

Log message:
Fix WANTLIB


CVSROOT:	/cvs
Module name:	ports
Changes by:	awolk@cvs.openbsd.org	2017/05/23 03:54:13

Modified files:
	editors/ghostwriter: Makefile distinfo 

Log message:
Update editors/ghostwriter 1.4.2 => 1.5

OK landry@

port changes:
- no need to @sed VERSION as upstream stopped shelling out to git

upstream changelog:
---
New Features

* HUD windows can now be closed using the Esc key when they have focus.
* A new option has been added to highlight double spaces at the end of a line.
* Github-style task lists can now be made using the * and + bullet point
characters, in addition to the - character.
* Support for ConTeXt and wkhtmltopdf when exporting to PDF with Pandoc has been
added.
* Auto-matching characters for selected text now respects the existing preferences
for the matching done while typing without text selected.
* Typing a single quote (') will no longer result in a second quote being
automatically inserted after the cursor if the cursor is positioned in the
middle of a word.
* Most settings have been moved into a new Preferences dialog to accommodate the
ever increasing number of application options.
* Font size can now be increased by pressing Ctrl+=or decreased by pressing
Ctrl+-. It can also be changed by using Ctrl and the mouse wheel.
* When exporting to other file formats, the output file will be opened after
export with its default application.
* E-books created using Pandoc will now also be generated with a table of
contents.
* When passing in a file path via the command line, a new file will be created
with that path if it does not already exist.
* When typing a * character, ghostwriter would auto-insert a second * character in
anticipation of emphasized text. The auto-inserted second * will now be removed
if a space is typed to accommodate a bullet list instead.
* Rudimentary support for HiDPI has been added. See notes below.
* Various performance enhancements and tweaks have been made under the hood.

Fixes

* Issue #128: Hyphenated words are now considered one word for spell checking.
* Issue #131: ghostwriter can now be built from its source tarball without needing
git to be installed.
* Issue #132: Linux desktop file now specifies that ghostwriter can open only one
file from the command line rather than multiple files.
* Issue #170: Ctrl+M now opens the HTML Preview instead of Ctrl+W. This is to
avoid a conflict with closing windows in Linux.
* Issue #219: Copy and paste no longer makes the word count jump.
* Sundry minor fixes have been added.
---


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/23 05:11:16

Modified files:
	multimedia/py-pafy: Makefile distinfo 
	multimedia/py-pafy/pkg: PLIST 

Log message:
Update to py-pafi-0.5.3.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 06:01:53

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Shorten varname.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 06:05:54

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Only install /bsd.mp on SP machines if it's already there (a default
installation will not have it).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 07:00:47

Modified files:
	graphics/sane-backends: Makefile distinfo 
	graphics/sane-backends/patches: patch-backend_Makefile_in 
	                                patch-backend_canon-sane_c 
	                                patch-backend_dll_c 
	                                patch-backend_dll_conf_in 
	                                patch-backend_genesys_low_c 
	                                patch-backend_kvs40xx_h 
	                                patch-backend_sm3600-scanusb_c 
	                                patch-backend_v4l_c 
	                                patch-backend_xerox_mfp_h 
	                                patch-configure 
	graphics/sane-backends/pkg: PLIST 
Added files:
	graphics/sane-backends/patches: patch-backend_epsonds_c 
	                                patch-frontend_scanimage_c 
Removed files:
	graphics/sane-backends/patches: patch-backend_kodakaio_c 
	                                patch-backend_kvs20xx_opt_c 
	                                patch-include_sane_sanei_thread_h 
	                                patch-sanei_sanei_ir_c 

Log message:
Update to sane-backends-1.0.27.
- now uses libusb1, so ping me if you see a regression


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 07:01:05

Modified files:
	print/hplip    : Makefile 

Log message:
Regen WANTLIB after sane-backends update.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/23 07:08:28

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Hide sh(1) error message when /etc/installurl does not exist; we already
error out with a message in this case since _MIRROR is empty.

reported by tedu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/23 07:44:13

Modified files:
	security/dropbear: Makefile distinfo 

Log message:
update to dropbear-2017.75
CVE-2017-9078: double-free in server TCP listener cleanup
CVE-2017-9079: information disclosure with ~/.ssh/authorized_keys symlink.


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/23 08:09:00

Modified files:
	build          : mirrors.dat 

Log message:
add openbsd.mirror.constant.com (Piscataway NJ USA), from John Struse


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/23 08:09:16

Modified files:
	.              : ftp.html ftplist httpslist 
	openbgpd       : ftp.html 
	openssh        : ftp.html portable.html 
	openntpd       : portable.html 

Log message:
sync


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/05/23 08:09:42

Modified files:
	build          : mirrors.dat 

Log message:
better ME


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 08:16:41

Modified files:
	x11/vlc/patches: patch-include_vlc_atomic_h 

Log message:
gcc 4.9.4's std::atomic_uint_least32_t is bogus (__atomic_base instead
of atomic), so use the full name.

This should work with both libstdc++ and libc++

noticed by Mark Patruck.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/23 08:17:00

Modified files:
	databases/postgresql: Makefile 
	databases/postgresql/pkg: README-server 

Log message:
switch README to using rcctl, ok pea@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 08:19:01

Added files:
	lang/sbcl/patches: patch-src_runtime_Config_generic-openbsd 
	                   patch-src_runtime_gc-common_c 

Log message:
let it build with clang, thx kettenis@ for useful hints


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/23 08:35:04

Modified files:
	net/freeradius3: Makefile 
Added files:
	net/freeradius3/patches: patch-configure 
Removed files:
	net/freeradius3/patches: patch-configure_ac 

Log message:
apply patch-configure_ac to configure; now freeradius3 is back on a normal
release it's not regenerating the autoconf scripts. fixes accidentally picking
up collectdclient.

use WANT_CXX and MODGCC4_LANGS=c; thread-local-storage.


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/05/23 08:57:30

Modified files:
	.              : Makefile.cross 

Log message:
Adjust cross-toolchain environment to the changes in the clang build
fabric.  Since we now also build and use LLVM's lld we can copy lld to
the proper directory akin to what we do with clang.  Build compiler-rt
early as it is needed for building libc.

"go for it" mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 09:12:28

Modified files:
	infrastructure/mk: modules.port.mk 

Log message:
forgot about that one, fixes zstd


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 09:18:46

Modified files:
	games/openxcom : Makefile 

Log message:
forgot to remove gcc4, let WANT_CXX do its job


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/23 09:24:10

Modified files:
	devel/py-hypothesis: Makefile distinfo 

Log message:
Update to py-hypothesis 3.10.0


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/23 10:53:15

Modified files:
	sys/arch/loongson/loongson: yeeloong_machdep.c 

Log message:
Rate limit messages about spurious ISA interrupts on yeeloong systems.
On suspend, the USB driver is put to polling mode and it no longer
claims interrupt requests. If the USB controller keeps raising new
requests faster than spurious interrupt messages can be printed,
interrupt processing hogs all CPU time and the suspend code gets
stuck. The rate limiting should prevent this from happening.

Suspend issue with USB Wi-Fi reported by fcambus@
Fix tested by and OK fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/23 11:44:39

Modified files:
	www/jupyter-notebook: Makefile distinfo 
	www/jupyter-notebook/pkg: PLIST 

Log message:
Update to jupyter-notebook 5.0.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/23 11:46:31

Modified files:
	textproc/py-MarkupSafe: Makefile distinfo 
	textproc/py-MarkupSafe/pkg: PLIST 

Log message:
Update to py-MarkupSafe 1.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 11:52:34

Modified files:
	infrastructure/bin: update-patches 

Log message:
if PATCHORIG!=.orig, say it. avoids head-scratching when fixing a port you
don't know too well...


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/23 11:52:39

Modified files:
	textproc/py-nltk: Makefile distinfo 
	textproc/py-nltk/pkg: PLIST 

Log message:
Update to py-nltk 3.2.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 11:54:54

Modified files:
	games/openmw   : Makefile 
Added files:
	games/openmw/patches: patch-apps_openmw_main_cpp 

Log message:
WANT_CXX, missing proto for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/23 11:55:02

Modified files:
	www            : Makefile 

Log message:
+py-bokeh,python3

ok ajacoutot@(maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 11:55:52

Modified files:
	x11/kde4/kate/patches: patch-tests_CMakeLists_txt 
Added files:
	x11/kde4/kate/patches: patch-part_view_kateviewhelpers_cpp 

Log message:
minor clang fixes


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 12:43:41

Modified files:
	devel/avr32/gcc: Makefile 

Log message:
assert gnu89 inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:18:45

Modified files:
	devel/leatherman: Makefile 
Added files:
	devel/leatherman/patches: patch-cmake_cflags_cmake 

Log message:
let it build with clang, adjust -Werror to "work".


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:52:14

Added files:
	games/mars/patches: patch-include_Hud_TabStats_hpp 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:53:27

Modified files:
	devel/cpp-hocon: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:55:13

Modified files:
	lang/pypy      : Makefile 

Log message:
surprisingly this builds just fine with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:55:37

Modified files:
	mail/lumail    : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:56:06

Modified files:
	mail/mozilla-thunderbird: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:56:36

Modified files:
	multimedia/mkvtoolnix: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:57:50

Modified files:
	sysutils/gource: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 14:58:22

Modified files:
	sysutils/grive2: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 15:00:59

Modified files:
	mail/evolution-rss/patches: patch-src_rss_c 

Log message:
return value


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 15:01:46

Modified files:
	www/cclive     : Makefile 
	www/cclive/patches: patch-src_cc_options_h 

Log message:
fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 15:26:06

Added files:
	multimedia/swftools/patches: patch-configure 
	                             patch-lib_pdf_xpdf_GlobalParams_cc 
	                             patch-m4_gcc_2_95_m4 

Log message:
really stupid fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 16:56:57

Modified files:
	x11/cegui      : Makefile 
	games/sumwars  : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 17:19:08

Modified files:
	math/eigen2    : Makefile 
Added files:
	math/eigen2/patches: patch-Eigen_src_Array_BooleanRedux_h 

Log message:
clang insists on more correct C++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 18:59:18

ports/security/p5-Crypt-OpenSSL-X509/patches

Update of /cvs/ports/security/p5-Crypt-OpenSSL-X509/patches
In directory cvs.openbsd.org:/tmp/cvs-serv40741/patches

Log Message:
Directory /cvs/ports/security/p5-Crypt-OpenSSL-X509/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 18:59:48

Added files:
	security/p5-Crypt-OpenSSL-X509/patches: patch-Makefile_PL 

Log message:
don't Werror the option clang doesn't get


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 19:01:29

Modified files:
	games/alephone/alephone/patches: 
	                                 patch-Source_Files_Sound_SoundManager_cpp 
Added files:
	games/alephone/alephone/patches: 
	                                 patch-Source_Files_CSeries_csalerts_sdl_cpp 

Log message:
missing prototypes


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/23 19:27:40

Modified files:
	games/0ad/base : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/05/23 22:19:43

Modified files:
	security/burpsuite: Makefile distinfo 

Log message:
update burpsuite to 1.7.23.
release notes: http://releases.portswigger.net/2017/05/1723.html


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/23 22:55:57

Modified files:
	usr.sbin/ikectl: ikeca.c 

Log message:
Set REQ_EXT in req section so ikectl ca certificate revoke will work again.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 01:08:59

Modified files:
	mail/evolution-rss/patches: patch-src_rss_c 

Log message:
Add a comment or this chunk will be lost at next update for sure.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 01:10:46

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.54.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 01:11:00

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.91.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/24 01:50:25

Modified files:
	devel/p5-File-Touch: Makefile distinfo 

Log message:
Update to p5-File-Touch-0.11.

ok Abel Abraham Camarillo Ojeda (Maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 02:07:32

Modified files:
	audio/clementine: Makefile 
Added files:
	audio/clementine/patches: patch-src_library_groupbydialog_h 

Log message:
let it build with clang. don't -Werror, because that doesn't work with
extended warnings


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 02:30:20

Modified files:
	devel/boost    : Makefile 
	devel/boost/files: user.hpp 
	devel/boost/patches: patch-boost_config_compiler_clang_hpp 
Added files:
	devel/boost/patches: 
	                     patch-boost_asio_detail_handler_type_requirements_hpp 
	                     patch-boost_concept_detail_general_hpp 
	                     patch-boost_range_config_hpp 
	                     patch-boost_static_assert_hpp 
	                     patch-libs_config_test_boost_has_part_alloc_ipp 
	                     patch-libs_config_test_boost_no_inline_memb_init_ipp 
	                     patch-libs_config_test_boost_no_std_allocator_ipp 
	                     patch-libs_math_test_compile_test_test_compile_result_hpp 

Log message:
improve the clang config: boost hardcodes __attribute__((unused)) on the
wrong compiler, so re-add it (dependent ports will whine a lot less)
tell boost we have threads and int128 (there's not issue about dual
compiler for clang)


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 02:30:31

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Also trap INT when reverting a patch.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 02:32:16

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Don't fill up /tmp when installing or reverting multiple patches at once.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 02:43:04

Modified files:
	mail/evolution-rss/patches: patch-src_rss_c 

Log message:
Upstream actually fixed it 2 years ago.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 03:16:57

Modified files:
	infrastructure/bin: update-patches 

Log message:
if the WRKDIST doesn't exist, don't even try


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/05/24 03:18:15

Modified files:
	usr.sbin/user  : user.c 

Log message:
Remove 2 unused parameters from copydotfiles function
While here sort headers and add missing prototypes

OK tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/05/24 03:19:55

Modified files:
	usr.bin/encrypt: encrypt.c 

Log message:
Use freezero instead of explicit_bzero+free

OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 03:22:48

Modified files:
	infrastructure/bin: update-patches 

Log message:
do the check upfront, this one works


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 03:26:35

Modified files:
	multimedia/mjpegtools: Makefile 
	multimedia/mjpegtools/patches: patch-configure_ac 
Added files:
	multimedia/mjpegtools/patches: patch-lavtools_jpeg2yuv_c 
	                               patch-lavtools_lav_io_c 
	                               patch-lavtools_lavtrans_c 
	                               patch-lavtools_liblavplay_c 
	                               patch-mpeg2enc_ontheflyratectlpass1_hh 
	                               patch-y4mdenoise_MotionSearcher_hh 
	                               patch-yuvdenoise_main_c 
	                               patch-yuvfilters_yuvkineco_c 

Log message:
build with clang, remove nopic non sense, two phase dependent lookup, and
a shitload of actual abs errors...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 04:29:40

Modified files:
	x11/kde4/py-kde/patches: patch-CMakeLists_txt 
Added files:
	x11/kde4/py-kde/patches: patch-sip_solid_powermanagement_sip 
	                         patch-sip_solid_predicate_sip 

Log message:
fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 04:31:21

Modified files:
	net/icinga/core2: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 05:21:13

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Preserve the modification time when install(1)ing.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/24 05:58:29

Modified files:
	net/samba      : Makefile 
Added files:
	net/samba/patches: patch-source3_rpc_server_srv_pipe_c 

Log message:
SECURITY fix for CVE-2017-7494

o CVE-2017-7494 rpc_server3: Refuse to open pipe names with /


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/24 06:03:02

Modified files:
	net/samba      : Tag: OPENBSD_6_1 Makefile 
Added files:
	net/samba/patches: Tag: OPENBSD_6_1 
	                   patch-source3_rpc_server_srv_pipe_c 

Log message:
SECURITY fix for CVE-2017-7494

o CVE-2017-7494 rpc_server3: Refuse to open pipe names with /


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/24 06:19:42

Modified files:
	devel/py-test  : Makefile distinfo 
	devel/py-test/pkg: PLIST 

Log message:
Update to py-test 3.1.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 06:46:40

Added files:
	x11/kde4/ruby-qt/patches: patch-src_qtruby_cpp 

Log message:
trivial fix for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/24 07:06:47

Modified files:
	games/warzone2100: Makefile distinfo 
	games/warzone2100/pkg: PLIST 
Removed files:
	games/warzone2100/patches: patch-src_scripttabs_cpp 

Log message:
Updateb to warzone2100-3.2.3.
Remove patch committed upstream


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/24 07:26:03

Modified files:
	usr.sbin/smtpd : smtpd.conf.5 

Log message:
document that "for local" is the default; while here,
paste in the "table <aliases>" text;

ok gilles


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/24 07:33:00

Modified files:
	sys/arch/mips64/include: cpu.h 
	sys/arch/mips64/mips64: context.S cpu.c 

Log message:
Add an idle cycle implementation for R4600/R5000/RM7000 CPUs and their
derivatives. This lets the kernel utilize the CPUs' Standby Mode to
reduce the power consumption of an idle system.

Suggested by and input from miod@.
He also tested this patch on an RM7000 O2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 07:52:34

Modified files:
	archivers/unzip: Makefile 

Log message:
extend PORTROACH to skip 5.5.1 as well


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 08:04:50

Modified files:
	benchmarks/bonnie++: Makefile distinfo 
	benchmarks/bonnie++/patches: patch-Makefile_in patch-port_h_in 

Log message:
update to bonnie++-1.97.3, builds with clang now.
remove -Winit-self and reattempt GCC3_ARCHS while there.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 08:05:42

Modified files:
	comms/fldigi   : Makefile distinfo 

Log message:
update to FLdigi-4.0.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 08:07:11

Modified files:
	databases/py-mongo: Makefile distinfo 
	databases/py-mongo/pkg: PLIST 

Log message:
update to py-mongo-3.4.0, add py3 support, drop sphinx docs
from Andrew Aldridge with minor tweak


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 08:07:45

Modified files:
	databases      : Makefile 

Log message:
build py-mongo,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/24 08:41:36

Modified files:
	devel/p5-File-DesktopEntry: Makefile 

Log message:
add missing runtime dependency
ok benoit@
spotted by kasimov.an@gmail.com


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/24 08:54:28

Log message:
    Import to py-webencodings 0.5.1, ok sthen@
    
    DESCR:
    
    This is a Python implementation of the WHATWG Encoding standard.
    
    In order to be compatible with legacy web content when interpreting
    something like Content-Type: text/html; charset=latin1, tools need
    to use a particular set of aliases for encoding labels as well as
    some overriding rules. For example, US-ASCII and iso-8859-1 on the
    web are actually aliases for windows-1252, and an UTF-8 or UTF-16
    BOM takes precedence over any other encoding declaration. The
    Encoding standard defines all such details so that implementations
    do not have to reverse-engineer each other.
    
    This module has encoding labels and BOM detection, but the actual
    implementation for encoders and decoders is Python's.
    
    Status:
    
    Vendor Tag:	shadchin
    Release Tags:	shadchin_20170524
    
    N ports/textproc/py-webencodings/Makefile
    N ports/textproc/py-webencodings/distinfo
    N ports/textproc/py-webencodings/pkg/PLIST
    N ports/textproc/py-webencodings/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/24 08:56:50

Modified files:
	textproc       : Makefile 

Log message:
+py-webencodings
+py-webencodings,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 09:29:55

Modified files:
	games/bastet   : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 09:37:35

Modified files:
	games/blobby   : Makefile 
Added files:
	games/blobby/patches: patch-src_raknet_RakPeer_cpp 

Log message:
I don't even want to know how g++ compiled that one.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/24 09:44:42

Modified files:
	textproc/icu4c : Makefile 
	textproc/icu4c/patches: patch-source_common_Makefile_in 
	                        patch-source_common_putilimp_h 
	                        patch-source_config_mh-bsd-gcc 
	textproc/icu4c/pkg: PLIST 
Added files:
	textproc/icu4c/patches: patch-source_common_putil_cpp 
	                        patch-source_common_unicode_uconfig_h 
	                        patch-source_i18n_Makefile_in 
	                        patch-source_io_Makefile_in 
	                        patch-source_layoutex_Makefile_in 
	                        patch-source_stubdata_Makefile_in 
	                        patch-source_tools_ctestfw_Makefile_in 
	                        patch-source_tools_toolutil_Makefile_in 
Removed files:
	textproc/icu4c/patches: patch-source_config_Makefile_inc_in 
	                        patch-source_icudefs_mk_in 

Log message:
Spring cleaning:
* as per upstream recommendation
- use --with-data-packaging=archive on all archs
- pass -DICU_NO_USER_DATA_OVERRIDE
- pass --disable-renaming (fixes the infamous symbol mismatch)
* don't duplicate libicutest installation
* don't strip static libraries (from FreeBSD)
* when not in POSIX/C mode, assume UTF-8 by default like Darwin (from FreeBSD)
* sync config/mh-bsd-gcc with config/mh-linux
* build extra tool
* remove uneeded patches / chunks
* bump major


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 09:50:20

Modified files:
	games/gargoyle : Makefile 
Added files:
	games/gargoyle/patches: patch-terps_bocfel_process_h 

Log message:
I don't really want to know how jam does shitz, but at least this gets to
the C compiles and not the C++ compiles (which use ${CC} even though there
is a ${CXX}...)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 09:52:52

Modified files:
	games/opensonic: Makefile 

Log message:
assert gnu89-inline


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 09:58:52

ports/games/pentobi/patches

Update of /cvs/ports/games/pentobi/patches
In directory cvs.openbsd.org:/tmp/cvs-serv56520/patches

Log Message:
Directory /cvs/ports/games/pentobi/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 09:59:28

Added files:
	games/pentobi/patches: 
	                       patch-src_libboardgame_sgf_MissingProperty_cpp 

Log message:
fix with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/24 10:20:26

Modified files:
	usr.sbin/tcpdump: print-pflog.c 

Log message:
Sync NO_PID value from kernel header to tcpdump source.  It is
#ifdef _KERNEL, so it does not work automatically.  This prevents
some bogus uid and pid print when dumping from pflog interface.
from Matthias Pitzl; OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/24 10:26:58

Modified files:
	sys/net        : bpf.c 

Log message:
When using "tcpdump proto 128" the filter never matched.  A sign
expansion bug in bpf prevented protocols above 127.  m_data is
signed, bpf_mbuf_ldb() returns unsigned.
bug report Matthias Pitzl; OK deraadt@ millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 10:30:52

Modified files:
	multimedia/mlt : Makefile 
Added files:
	multimedia/mlt/patches: patch-src_framework_mlt_property_h 

Log message:
let glue match the compat glue in libc++, and also removes one clang
warning...

helps kdeenlive build eventually


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/24 10:34:17

Modified files:
	sys/net        : fq_codel.c 

Log message:
Fail with EINVAL when asked to create a non-root queue instead of panicking

Prompted by a bug report from semarie@, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 10:41:26

ports/multimedia/kdenlive/patches

Update of /cvs/ports/multimedia/kdenlive/patches
In directory cvs.openbsd.org:/tmp/cvs-serv60539/patches

Log Message:
Directory /cvs/ports/multimedia/kdenlive/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 10:42:17

Added files:
	multimedia/kdenlive/patches: 
	                             patch-src_scopes_audioscopes_spectrogram_cpp 

Log message:
abs doesn't work too well with unsigned params


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/24 12:24:07

Log message:
    import p5-Crypt-OpenSSL-EC 1.01
    from Nils Frohberg; OK sthen@
    
    Comment:
    EC using OpenSSL
    
    Description:
    Crypt::OpenSSL::EC is a perl module that provides a standard (non-OO)
    interface to the OpenSSL EC (Elliptic Curve) library.
    
    Status:
    
    Vendor Tag:	nilsf
    Release Tags:	bluhm_20170524
    
    N ports/security/p5-Crypt-OpenSSL-EC/Makefile
    N ports/security/p5-Crypt-OpenSSL-EC/distinfo
    N ports/security/p5-Crypt-OpenSSL-EC/pkg/DESCR
    N ports/security/p5-Crypt-OpenSSL-EC/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/24 12:35:14

Log message:
    import p5-Crypt-OpenSSL-ECDSA 0.08
    from Nils Frohberg; OK sthen@
    
    Comment:
    ECDSA encoding and decoding using OpenSSL
    
    Description:
    Crypt::OpenSSL::ECDSA is a perl module that provides an interface
    to the ECDSA (Elliptic Curve Digital Signature Algorithm) functions
    in OpenSSL.
    
    Status:
    
    Vendor Tag:	nilsf
    Release Tags:	bluhm_20170524
    
    N ports/security/p5-Crypt-OpenSSL-ECDSA/Makefile
    N ports/security/p5-Crypt-OpenSSL-ECDSA/distinfo
    N ports/security/p5-Crypt-OpenSSL-ECDSA/pkg/DESCR
    N ports/security/p5-Crypt-OpenSSL-ECDSA/pkg/PLIST
    N ports/security/p5-Crypt-OpenSSL-ECDSA/patches/patch-ECDSA_xs
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 12:37:23

ports/games/ri-li/patches

Update of /cvs/ports/games/ri-li/patches
In directory cvs.openbsd.org:/tmp/cvs-serv27659/patches

Log Message:
Directory /cvs/ports/games/ri-li/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 12:37:43

Added files:
	games/ri-li/patches: patch-src_audio_cc patch-src_ecran_cc 
	                     patch-src_editeur_cc patch-src_jeux_cc 
	                     patch-src_loco_cc patch-src_main_cc 
	                     patch-src_menu_cc patch-src_mouse_cc 
	                     patch-src_sprite_cc patch-src_tableau_cc 
	                     patch-src_utils_cc 

Log message:
surprisingly enough, this converts easily to modern C++


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/24 12:38:05

Modified files:
	security       : Makefile 

Log message:
+p5-Crypt-OpenSSL-EC
+p5-Crypt-OpenSSL-ECDSA


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/24 12:47:36

Modified files:
	devel/p5-Exporter-Tiny: Makefile distinfo 

Log message:
update p5-Exporter-Tiny to 1.000000


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 12:49:31

Modified files:
	games/vodovod  : Makefile 
	games/vodovod/patches: patch-config_cpp patch-hiscore_cpp 
Added files:
	games/vodovod/patches: patch-effects_cpp patch-effects_h 
	                       patch-hiscore_h patch-njamfont_cpp 

Log message:
make it build with clang, correct some horrible code


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/05/24 13:06:04

Modified files:
	games/spaceinvaders: Makefile distinfo 
	games/spaceinvaders/pkg: DESCR 

Log message:
update to spaceinvaders-0.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 13:19:22

Modified files:
	games/warmux/patches: 
	                      patch-tools_servers_game_server_Makefile_in 
Added files:
	games/warmux/patches: patch-lib_fixedpoint_fixed_class_h 
	                      patch-src_Makefile_in 
	                      patch-src_tool_string_tools_h 
	                      patch-tools_list_games_Makefile_in 
	                      patch-tools_servers_index_server_Makefile_in 
	                      patch-tools_servers_index_server_server_h 

Log message:
let it build with clang, as-needed nonsensical for end program


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 13:33:53

Modified files:
	graphics/gfract: Makefile 
	graphics/gfract/patches: patch-Makefile 
Added files:
	graphics/gfract/patches: patch-Tool_cpp patch-color_cpp 

Log message:
let it compile with clang without too much noise


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 13:38:09

Modified files:
	devel/kf5/kactivities: Makefile 

Log message:
okay, just look into /usr/local/include, please ?


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 14:16:58

ports/devel/etl/patches

Update of /cvs/ports/devel/etl/patches
In directory cvs.openbsd.org:/tmp/cvs-serv25952/patches

Log Message:
Directory /cvs/ports/devel/etl/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 14:17:31

Modified files:
	devel/etl      : Makefile 
Added files:
	devel/etl/patches: patch-ETL__stringf_h patch-ETL__surface_h 

Log message:
steal freebsd patches to allow etl to actually be useful


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/24 14:18:14

Modified files:
	lang/go        : Makefile distinfo 

Log message:
Security update to 1.8.2 (CVE-2017-8932)
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/24 15:18:25

Modified files:
	lib/libc/stdlib: qsort.c 

Log message:
Support swapping 32-bit aligned elements on 64-bit platforms.
Previously they would be swapped a byte at a time when sizeof(int)
!= sizeof(long).  Idea from FreeBSD.


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/05/24 15:27:32

Modified files:
	usr.sbin/smtpd : mta_session.c 

Log message:
Fix a possible fatal() when smtpd is configured to *force* relaying over
SMTPS, that the connection succeeds, but that something causes a failure
in the TLS code path afterwards. Session gets downgraded so it can use a
plaintext connector but since it's not allowed to do so, it fatal()-s.
This didn't impact STARTTLS, only SMTPS.

Issue experienced a few times by stsp@ triggered by a suspend.
ok eric@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 15:27:45

Modified files:
	multimedia/synfig: Makefile 
	multimedia/synfig/patches: patch-src_synfig_main_cpp 
Added files:
	multimedia/synfig/patches: patch-src_synfig_transform_cpp 

Log message:
WANT_CXX + trivial C++ patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 15:28:21

Modified files:
	devel/kf5/kactivities-stats: Makefile 

Log message:
want /usr/local


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 17:59:42

Modified files:
	multimedia/synfigstudio: Makefile 
Added files:
	multimedia/synfigstudio/patches: patch-src_gui_dialogs_about_cpp 
	                                 patch-src_gui_iconcontroller_cpp 
	                                 patch-src_gui_splash_cpp 

Log message:
simple fixes for C++11 (user-defined literals require a space for splicing
string literals together)


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 18:04:15

Modified files:
	devel/libmagic : Makefile distinfo 
	devel/py-libmagic: Makefile distinfo 
Removed files:
	devel/libmagic/patches: patch-src_ascmagic_c 

Log message:
update to {py-,}libmagic from file-5.31


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 18:05:06

Modified files:
	devel/perltidy : Makefile distinfo 
	devel/perltidy/pkg: PLIST 

Log message:
update to Perl-Tidy-20170521


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/24 18:13:47

Modified files:
	math/calc      : Makefile distinfo 
Removed files:
	math/calc/patches: patch-version_c 

Log message:
update to calc-2.12.5.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/24 18:14:40

Added files:
	misc/spdrs60/patches: patch-spdrs60_srcpmessage_cpp 
	                      patch-spdrs60_srcpmessage_h 

Log message:
one default constructor to build them all


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/24 21:19:39

Modified files:
	sys/arch/sparc64/dev: iommu.c psycho.c pyro.c schizo.c vdsk.c 
	                      viommu.c 
	sys/arch/sparc64/include: atomic.h bus.h ctlreg.h psl.h 
	sys/arch/sparc64/sparc64: cpu.c ipifuncs.c lock_machdep.c 
	                          machdep.c vm_machdep.c 
	sys/dev/pci/drm: drmP.h 

Log message:
tweak sparc64 membars as a step toward making them usable in userland.

specifically, dont rely on magic in ctlreg to implement membars. moving
that to atomic.h would add a lot of pollution to the namespace, so
move to passing the membar options to a single __membar macro.

this tweaks everything that was using the ctlreg backend to either use
an appropriate membar_foo(), or to use __membar() in the MD code.

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/24 21:50:10

Modified files:
	sys/arch/amd64/include: lock.h 

Log message:
Drop trailing semicolon from a macro.

OK dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/24 21:54:10

Modified files:
	sys/arch/amd64/amd64: lapic.c 
	sys/arch/amd64/include: cpufunc.h 

Log message:
Replace the only usage of x86_pause() with SPINLOCK_SPIN_HOOK.

OK dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 02:13:58

Modified files:
	security/libhttpseverywhere: Makefile distinfo 

Log message:
Update to libhttpseverywhere-0.4.4.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/25 02:25:00

Modified files:
	distrib/miniroot: install.sub 

Log message:
Replace various echo "..."; exit 1 with a new err_exit() function.

diskussed with tb@ and halex@
OK krw@ on a similar diff


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 02:54:31

Modified files:
	devel/py-test  : Makefile 

Log message:
missing BDEP on devel/py-setuptools_scm${MODPY_FLAVOR}


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 03:02:05

Modified files:
	audio/ardour   : Makefile 
	audio/ardour/patches: patch-SConstruct 
	                      patch-gtk2_ardour_ardour_ui_cc 
	                      patch-gtk2_ardour_gain_meter_cc 
Added files:
	audio/ardour/patches: patch-gtk2_ardour_automation_selectable_h 
	                      patch-gtk2_ardour_connection_editor_h 
	                      patch-gtk2_ardour_io_selector_h 
	                      patch-gtk2_ardour_tempo_lines_h 
	                      patch-libs_ardour_ardour_io_h 
	                      patch-libs_ardour_ardour_recent_sessions_h 
	                      patch-libs_ardour_audiosource_cc 
	                      patch-libs_pbd_fpu_cc 
	                      patch-libs_pbd_mountpoint_cc 
	                      patch-libs_pbd_pbd_ringbuffer_h 
	                      patch-libs_pbd_pbd_stl_delete_h 

Log message:
make it build with clang, most painful part was scons


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 03:30:04

Modified files:
	games/sumwars  : Makefile 

Log message:
unbreak packaging, WANT_CXX got lost


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 03:40:18

Modified files:
	share/man/man8 : rc.d.8 

Log message:
Four, not three variables can be overriden. But the number is not important
so just drop it.
reported by thelocals_job_applicant at protonmail


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 03:57:10

Modified files:
	net/py-boto    : Makefile distinfo 

Log message:
Update to py-boto-2.47.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 04:05:23

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.55.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 04:05:35

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.92.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 04:18:13

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-156.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 04:34:11

Added files:
	audio/xmms2/patches: 
	                     patch-src_include_xmmsclient_xmmsclient++_coll_h 

Log message:
let xmms2 build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 04:35:32

Modified files:
	audio/ncmpcpp  : Makefile 

Log message:
WANT_CXX. Explicitly ask for /usr/local


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 04:54:19

Added files:
	devel/msp430/gdb/patches: patch-sim_msp430_interp_c 

Log message:
fix return error on clang. still doesn't link (relocation error)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 05:03:31

Modified files:
	games/xmoto    : Makefile 
	games/xmoto/patches: patch-src_helpers_System_cpp 
Added files:
	games/xmoto/patches: patch-src_include_xm_hashmap_h 

Log message:
build with clang: zap extra warnings, const correct


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 05:15:41

Modified files:
	lang/intel2gas/patches: patch-intel2gas_cc 
Added files:
	lang/intel2gas/patches: patch-strhandle_cc 

Log message:
let it compile with clang (dirty const_cast, code is really not const correct


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 05:23:02

Added files:
	lang/jruby/patches: patch-jffi_jni_GNUmakefile 

Log message:
Werror considered harmful


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 05:26:15

Modified files:
	graphics/openimageio: Makefile 
Added files:
	graphics/openimageio/patches: patch-CMakeLists_txt 

Log message:
WANT_CXX, silence warnings (-Werror) with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 05:27:08

Modified files:
	lang/librep    : Makefile 

Log message:
assert gnu89 inlines


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 05:31:45

Modified files:
	www/webkitgtk4 : Makefile distinfo 
Removed files:
	www/webkitgtk4/patches: 
	                        patch-Source_WebCore_bindings_scripts_generate-bindings-all_pl 

Log message:
SECURITY update to webkitgtk4-2.16.3.
- CVE-2017-2496, CVE-2017-2539, CVE-2017-2510


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/05/25 05:34:21

Modified files:
	databases/postgresql: Tag: OPENBSD_6_1 Makefile distinfo 
	databases/postgresql/pkg: Tag: OPENBSD_6_1 PLIST-docs 
	                          PLIST-server 

Log message:
Backport postgresql security update 9.6.3.

Fixes CVE-2017-7484, CVE-2017-7485, CVE-2017-7486.

OK pea@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/25 05:35:00

Modified files:
	www/webkitgtk4 : Tag: OPENBSD_6_1 Makefile distinfo 
Removed files:
	www/webkitgtk4/patches: Tag: OPENBSD_6_1 
	                        patch-Source_WebCore_bindings_scripts_generate-bindings-all_pl 

Log message:
MFC:
SECURITY update to webkitgtk4-2.16.3.
- CVE-2017-2496, CVE-2017-2539, CVE-2017-2510


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/25 05:44:02

ports/devel/py-nbconvert/patches

Update of /cvs/ports/devel/py-nbconvert/patches
In directory cvs.openbsd.org:/tmp/cvs-serv64477/patches

Log Message:
Directory /cvs/ports/devel/py-nbconvert/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/25 05:45:25

Modified files:
	devel/py-nbconvert: Makefile distinfo 
	devel/py-nbconvert/pkg: PLIST 
Added files:
	devel/py-nbconvert/patches: patch-nbconvert_exporters_html_py 
	                            patch-nbconvert_filters_markdown_mistune_py 

Log message:
Updatre to py-nbconvert 5.2.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/25 05:47:06

Modified files:
	devel/py-hypothesis: Makefile distinfo 
	devel/py-hypothesis/pkg: PLIST 

Log message:
Update to py-hypothesis 3.11.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 05:48:11

Log message:
    import ports/devel/blocksruntime, tweaks/ok pirofti@
    
    A clone of the BlocksRuntime library portion of the compiler-rt library
    (http://compiler-rt.llvm.org/) for use with the clang compiler's -fblocks
    option.
    
    Status:
    
    Vendor Tag:	sthen
    Release Tags:	sthen_20170525
    
    N ports/devel/blocksruntime/Makefile
    N ports/devel/blocksruntime/distinfo
    N ports/devel/blocksruntime/pkg/PLIST
    N ports/devel/blocksruntime/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 05:48:45

Modified files:
	devel          : Makefile 

Log message:
+blocksruntime


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 05:51:27

Modified files:
	www/liferea    : Makefile 

Log message:
unhardcode estdc++


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/25 06:10:04

Modified files:
	distrib/miniroot: install.sub 

Log message:
Move the code that runs the installer script in non-interactive
mode into a dedicated do_autoinstall() function.

OK halex@, krw@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 06:44:20

Modified files:
	devel/libqtelegram-aseman-edition: Makefile 

Log message:
let it build with clang by cheating... those narrowing conversions are awful


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 06:56:35

Added files:
	net/iperf3/patches: patch-src_Makefile_in 

Log message:
disable building the profiled binary, it wasn't installed anyway, and fails with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 07:03:28

Modified files:
	net/cutegram   : Makefile 

Log message:
same work-around as parent port...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 07:24:10

Modified files:
	www/havp       : Makefile 
Added files:
	www/havp/patches: patch-havp_sockethandler_h 

Log message:
build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 07:28:27

Modified files:
	security/clamav: Makefile 
Added files:
	security/clamav/patches: patch-libclamav_clamav_h 

Log message:
clean non portable construct from include. stops clang warnings


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 08:14:43

Modified files:
	textproc/isearch/patches: patch-doctype_medline_cxx 
	                          patch-src_Iindex_cxx 
	                          patch-src_index_cxx 
	                          patch-src_string_hxx 
Added files:
	textproc/isearch/patches: patch-Isearch-cgi_cgi-util_cxx 
	                          patch-Isearch-cgi_cgi-util_hxx 
	                          patch-Isearch-cgi_isrch_fetch_cxx 
	                          patch-Isearch-cgi_isrch_srch_cxx 
	                          patch-Isearch-cgi_search_form_cxx 
	                          patch-doctype_colondoc_cxx 
	                          patch-doctype_dif_cxx 
	                          patch-doctype_dtconf_cxx 
	                          patch-doctype_firstline_cxx 
	                          patch-doctype_html_cxx 
	                          patch-doctype_iafadoc_cxx 
	                          patch-doctype_irlist_cxx 
	                          patch-doctype_listdigest_cxx 
	                          patch-doctype_maildigest_cxx 
	                          patch-doctype_mailfolder_cxx 
	                          patch-doctype_memodoc_cxx 
	                          patch-doctype_referbib_cxx 
	                          patch-doctype_sgmltag_cxx 
	                          patch-src_Isearch_cxx 
	                          patch-src_Iutil_cxx patch-src_defs_hxx 
	                          patch-src_fc_hxx patch-src_fpt_cxx 
	                          patch-src_fpt_hxx patch-src_idb_cxx 
	                          patch-src_idb_hxx patch-src_idbobj_hxx 
	                          patch-src_infix2rpn_cxx 
	                          patch-src_infix2rpn_hxx 
	                          patch-src_marc_cxx 
	                          patch-src_marclib_cxx 
	                          patch-src_marclib_hxx 
	                          patch-src_registry_cxx 
	                          patch-src_registry_hxx 
	                          patch-src_sw_hxx 

Log message:
let it compile with clang. there are serious concerns about the bogosity
of this code.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 08:39:24

Modified files:
	security/openssl: Makefile distinfo 
	security/openssl/patches: patch-config 
	security/openssl/pkg: PLIST 

Log message:
update to OpenSSL-1.0.2l


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 08:39:59

Modified files:
	net/trickle    : Makefile 
	net/trickle/patches: patch-Makefile_in 

Log message:
don't use a local copy of getopt, use libc's. ok mestre@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 10:31:41

Modified files:
	sysutils/apcupsd: Makefile 
Added files:
	sysutils/apcupsd/patches: patch-configure 

Log message:
upstream try to avoid dynamic-linking to produce a binary that works more easily
across linux distributions; that's not really useful for us, and the way they
did it (link with cc -lsupc++) doesn't work so well with clang. just switch to
normal linking with c++. ok espie@ kirby@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/25 11:00:24

Modified files:
	lib/libcrypto/objects: obj_mac.num objects.txt 

Log message:
Add definitions for three OIDs used in EV certificates.

From Kyle J. McKay <mackyle at gmail dot com>


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 11:06:26

Modified files:
	mail/neomutt   : Makefile distinfo 
	mail/neomutt/patches: patch-main_c patch-mutt_sasl_c 
	mail/neomutt/pkg: PLIST 
Removed files:
	mail/neomutt/patches: patch-mutt_sasl_h 

Log message:
update to neomutt-20170428


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 11:47:08

Modified files:
	mail/metamail/patches: patch-src_metamail_codes_c 
	                       patch-src_metamail_mailto_c 
	                       patch-src_metamail_metamail_c 
	                       patch-src_metamail_uue_c 
	                       patch-src_richmail_richtext_c 
Added files:
	mail/metamail/patches: patch-src_richmail_iso2022_c 

Log message:
minimal compile fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/25 12:07:53

Modified files:
	comms/gammu    : Makefile distinfo 

Log message:
update to gammu-1.38.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 12:09:55

Added files:
	lang/ucblogo/patches: patch-graphics_c patch-xgraphics_c 
	                      patch-xgraphics_h 

Log message:
fiddle with macro so it returns the right type


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 12:37:14

Modified files:
	games/omega/patches: patch-Makefile patch-fixstr_c patch-omega_c 
Added files:
	games/omega/patches: patch-compress_c 

Log message:
void fixes for clang, regen other patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 12:42:31

Modified files:
	mail/neomutt   : Makefile 
	mail/neomutt/patches: patch-mutt_sasl_c 
	mail/neomutt/pkg: PLIST 
Added files:
	mail/neomutt/patches: patch-mutt_sasl_h 

Log message:
tweaks to neomutt:

- s/mutt/neomutt in doc/examples dirs

- running autoconf here requires autopoint from gettext-tools; found by tb@

- reinstate patch-mutt_sasl_h; found by tb@ (missing prototype; removed in
error while fixing patch-mutt_sasl_c).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 13:19:41

Modified files:
	devel/valgrind : Makefile 
Added files:
	devel/valgrind/patches: patch-Makefile_tool_am 

Log message:
surprisingly few changes for building on clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 13:33:20

Added files:
	multimedia/swfmill/patches: patch-src_gSWFParseXML_cpp 
	                            patch-src_gSWFWriteXML_cpp 

Log message:
fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/25 13:46:59

Modified files:
	games/instead  : Makefile distinfo 
	games/instead/pkg: PLIST 

Log message:
Update to instead_3.0.0. From maintainer Roman Yakovlev,  thanks!
Drop devel/lua from CATEGORIES. lang/lua already set by lua.port.mk.
Inspired by fcambus@;s comment to original diff.
"Reads good" rsadowski@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/25 14:11:03

Modified files:
	usr.bin/yacc   : closure.c lalr.c main.c mkpar.c reader.c 
	                 verbose.c 

Log message:
fix a variety of warnings. from Brian Callahan


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/25 14:25:50

Modified files:
	usr.bin/talk   : talk.1 

Log message:
incompatibilities with 4.2 are no longer interesting


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/25 14:27:55

Modified files:
	libexec/talkd  : talkd.8 

Log message:
Xr inetd as a hint about what flavor of crazy you're dealing with


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/25 15:21:18

Added files:
	sys/dev/acpi   : efi.h 

Log message:
Add a header with EFI/UEFI-related definitions for use by the kernel.  For
now this only contains definitions for parsing the EFI memory map.

I anticipate adding limited support for the EFI system table and some of
the EFI runtime services, but not much more.

ok mlarkin@, patrick@, tom@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 16:25:25

Modified files:
	devel/gdb      : Makefile 

Log message:
avoid wasting time on aarch64, there is no gdb yet


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 16:57:42

Modified files:
	lang/ocaml     : Makefile 

Log message:
let ocaml's build dep on devel/gdb (for libbfd.a) be conditional, don't
use it on aarch64 where gdb hasn't been ported yet.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/25 16:59:13

Modified files:
	devel/gdb      : Makefile 

Log message:
add comment re lang/ocaml and aarch64


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 17:15:41

Modified files:
	infrastructure/bin: update-patches 

Log message:
remove most of the useless stuff that update-patches shows by default.
add a few useful messages instead.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/25 17:40:06

Modified files:
	emulators/mednafen/patches: patch-src_nes_ines-correct_inc 
Added files:
	emulators/mednafen/patches: patch-src_nes_ines_cpp 

Log message:
don't compare pointer, not enough to fully fix with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/25 19:40:07

Modified files:
	usr.bin/ssh    : PROTOCOL 

Log message:
fix references to obsolete v00 cert format; spotted by Jakub Jelen


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/25 23:42:58

Modified files:
	graphics/vigra : Makefile distinfo 
	graphics/vigra/patches: patch-test_CMakeLists_txt 
	graphics/vigra/pkg: PLIST 

Log message:
update to vigra-1.11.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/26 02:09:59

Modified files:
	devel/arm-none-eabi/gcc-linaro: Makefile 

Log message:
mark BROKEN-i386, BROKEN-armv7 for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 03:37:05

Modified files:
	lang/gcc/4.9   : gcc4.port.mk 

Log message:
introduce the full name of the C++ pkgpath, to be used by a few ports
that run depend on it


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 03:52:16

Modified files:
	devel/qt-creator: Makefile 
	lang/node      : Makefile 
	www/chromium   : Makefile 
	www/iridium    : Makefile 

Log message:
use the MODGCC4* variables instead of hardcoding dependencies.
convert to WANT_CXX even though it might not work yet.
bump the ports that didn't even the full spec


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/26 04:32:51

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	mestre@cvs.openbsd.org	2017/05/26 04:34:53

Modified files:
	net/mcabber/patches: patch-mcabber_main_c 

Log message:
Fix copy pasto from my last commit


CVSROOT:	/cvs
Module name:	ports
Changes by:	mestre@cvs.openbsd.org	2017/05/26 04:36:44

Added files:
	games/ioquake3/patches: patch-Makefile 
	                        patch-code_tools_lcc_cpp_unix_c 

Log message:
Allow games/ioquake3 to be compiled with clang by using libc's getopt instead
of an handrolled one

OK espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 04:50:28

Modified files:
	infrastructure/man/man1: update-patches.1 

Log message:
document PATCH_VERBOSE


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/05/26 04:52:13

Modified files:
	.              : hackathons.html 
Added files:
	images/hackathons: d2k17-s.gif d2k17.gif 

Log message:
d2k17 has begun in starnberg


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/26 04:59:55

Modified files:
	sys/dev/pv     : vioblk.c vioscsi.c virtio.c virtiovar.h 

Log message:
Move vioblk and vioscsi more fully into the world of iopool and
'modern' scsi. Eliminates use of XS_NO_CCB.

Resource optimization to follow.

ok sf@, "makes sense" dlg@ earlier version


CVSROOT:	/cvs
Module name:	www
Changes by:	jsg@cvs.openbsd.org	2017/05/26 05:23:51

Modified files:
	.              : hackathons.html 

Log message:
link to the larger d2k17 image


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 05:43:43

Modified files:
	net/argus/patches: patch-Makefile_in 

Log message:
unfuck build system


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/26 05:45:57

Modified files:
	bin/ksh        : sh.1 

Log message:
document behaviour when CDPATH unset;
requested by a mail on misc, via otto;

ok otto


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 06:10:13

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.56.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 06:10:31

Modified files:
	sysutils/awscli: Makefile distinfo 
	sysutils/awscli/pkg: PLIST 

Log message:
Update to awscli-1.11.93.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/05/26 06:12:01

Modified files:
	graphics/vigra : Makefile distinfo 

Log message:
Upstream rerolled tarball. Noticed by espie@, thanks!
Previous tarball contetnt was somewhere between 1.11.0 and 1.11.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 06:34:33

Modified files:
	devel/p5-List-MoreUtils: Makefile distinfo 
	devel/p5-List-MoreUtils/pkg: PLIST 

Log message:
update p5-List-MoreUtils to 0.419
XS code has been split into a separate module
license change discussed with afresh1@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 06:42:16

Modified files:
	sysutils/terraform: Makefile distinfo 

Log message:
Update to terraform-0.9.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 06:53:52

Modified files:
	security/vault : Makefile 

Log message:
Display proper version instead of 'unknown'.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/26 07:13:50

Modified files:
	sys/dev/usb    : ohci.c ohcivar.h 

Log message:
Prepare ohci_intr1() for IPL_MPSAFE.

Stop manipulating the done list and root hub port status in the interrupt
handler.

Some parts lifted from NetBSD's r1.157 but with functionnal polling and
without leaving WDH interrupts masked after exiting ddb(4).

Fix an splassert() by no longer calling usb_transfer_complete() in the
interrupt handler.

Issue reported by claudio@, brynet@ and Jacqueline Jolicoeur.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/26 07:32:11

Modified files:
	security/letsencrypt: Makefile.inc 
	security/letsencrypt/client: distinfo 
	security/letsencrypt/py-acme: distinfo 

Log message:
update to certbot/py-acme 0.14.2


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/26 08:07:03

Modified files:
	usr.sbin/bgpd  : parse.y 

Log message:
Allow nested {} in prefix lists.

Diff from Denis Fondras, many thanks!

OK claudio@ phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/26 08:08:51

Modified files:
	usr.sbin/bgpd  : parse.y 

Log message:
Expand RIB names in groups

Diff from Denis Fondras, many thanks!

OK claudio@ phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/26 08:25:14

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Move the two loops through the leases file
looking for a valid recorded lease into a separate
function and thus make them consistent.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/26 08:26:33

Modified files:
	sys/dev/pci/drm: drm_linux.h 

Log message:
The Linux code really isn't up to the same standard as our other code, and
clang complains about it a lot.  Since we don't want to fix the code,
suppress certain warnings using #pragma clang diagnostic.

ok jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/26 08:35:49

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Whitespace rectification of a couple of mis-indentations.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 08:43:25

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Fix logic.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 08:50:15

Modified files:
	devel/codeblocks: Makefile 

Log message:
let it build with clang, deactivate nullptr work-around


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 08:51:27

Modified files:
	editors/abiword: Makefile 
Added files:
	editors/abiword/patches: patch-src_af_xap_xp_xap_Dialog_cpp 
	                         patch-src_wp_ap_gtk_ap_UnixApp_cpp 

Log message:
build with clang, trivial fixes


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/26 08:57:41

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Move logic to set default client-identifier into a
separate function so it can be used in multiple
places.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/26 09:26:28

Modified files:
	sys/dev/pv     : vioblk.c 

Log message:
vioblk: set VIOBLK_DONE from vioblk_vq_done1

If the device needs to be reset due to a poll timeout, we need accurate
information which requests are already completed. Otherwise, there will
be a panic "scsi_done called twice on xs", as found out by mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 09:28:00

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Don't try to revert the same patch in a loop if it returns an error.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/26 09:30:21

Modified files:
	sys/dev/pv     : virtio.c 

Log message:
virtio: minor tweak

use qe_desc_base instead of calculating the address again


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/26 09:30:49

Modified files:
	telephony/asterisk: Makefile 
Added files:
	telephony/asterisk/patches: patch-autoconf_ast_check_raii_m4 

Log message:
pass LDFLAGS to the autoconf test for clang -fblocks. still broken:

- clang + ld.bfd: link fails in autoconf test, undefined symbols.

- clang + ld.lld: package builds, dlopen()ing the .so modules that use -fblocks
fails at runtime.

because with clang + ld.lld it does build but results in unusable packages,
explicitly mark BROKEN-aarch64 for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/26 09:42:45

Modified files:
	telephony/asterisk: Makefile distinfo 

Log message:
update to asterisk-13.15.1, fixing AST-2017-004: Memory exhaustion
on short SCCP packets. This only affects SCCP users (chan_skinny).

13.15.1 also added some fixes to the bundled copy of PJSIP
(used by chan_pjsip, *not* used by chan_sip) -
AST-2017-002: Buffer Overrun in PJSIP transaction layer,
AST-2017-003: Crash in PJSIP multi-part body parser
- however that copy is not used by this package and will need to
be fixed separately.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 09:43:18

Modified files:
	www/ruby-capybara-webkit: Makefile 

Log message:
Temporarily mark BROKEN until jca@ has time to look at this new breakage.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 09:56:51

Modified files:
	sys/netinet    : ip_ipip.c 

Log message:
Instead of looking at the IP version of the header, use the outer
address family passed to ipip_input().
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 10:05:35

Modified files:
	usr.bin/nc     : netcat.c 

Log message:
Fix gcc warnings triggered by WARNINGS=yes.
OK florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 10:27:25

Modified files:
	sys/netinet    : ip_ipip.c 

Log message:
In IPIP input rename the variable ipo to ip as it is used for inner
and outer header.  Reset values depending on the the mbuf when the
mbuf is adjusted.  Check the length of the inner IP header with the
correct size in case of IPv6.  Check the IPv4 header size including
IP options.  For the IPIP statistics the inner header length has
to be subtracted from the packet size as the outer header has already
been stripped off.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/26 10:32:14

Modified files:
	lib/libcrypto/ec: ec_asn1.c 

Log message:
Avoid a potential NULL pointer dereference in d2i_ECPrivateKey().

Reported by Robert Swiecki, who found the issue using honggfuzz.

ok bcook@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 10:41:57

Log message:
    import p5-List-MoreUtils-XS 0.418
    p5-List-MoreUtils has been split in two modules upstream.
    Better use the software in our ports tree as build dependency, patch
    away the included modules.
    OK sthen@
    
    Comment:
    provide compiled List::MoreUtils functions
    
    Description:
    All of the functions are implementable in only a couple of lines
    of Perl code.  Using the functions from this module however should
    give slightly better performance as everything is implemented in
    C.  The pure-Perl implementation of these functions only serves as
    a fallback in case the C portions of this module couldn't be compiled
    on this machine.
    
    Status:
    
    Vendor Tag:	bluhm
    Release Tags:	bluhm_20170526
    
    N ports/devel/p5-List-MoreUtils-XS/distinfo
    N ports/devel/p5-List-MoreUtils-XS/Makefile
    N ports/devel/p5-List-MoreUtils-XS/pkg/DESCR
    N ports/devel/p5-List-MoreUtils-XS/pkg/PLIST
    N ports/devel/p5-List-MoreUtils-XS/patches/patch-MANIFEST
    N ports/devel/p5-List-MoreUtils-XS/patches/patch-Makefile_PL
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 10:46:09

Modified files:
	devel          : Makefile 

Log message:
+p5-List-MoreUtils-XS


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/05/26 10:48:22

Modified files:
	regress/lib/libcrypto/chacha: chachatest.c 

Log message:
Synchronise chacha test cases with the referenced draft - this adds a
missing test case, reassigns two of the labels and removes a test case
that was from an earlier draft.

Inconsistency noted by Steven Roberts <fenderq at gmail dot com>, some time
ago...


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/05/26 11:34:45

Modified files:
	.              : hackathons.html 

Log message:
fix date


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/26 11:38:46

Modified files:
	usr.sbin/identd: identd.c 
	usr.sbin/slowcgi: slowcgi.c 
	usr.sbin/tftp-proxy: tftp-proxy.c 
	usr.sbin/tftpd : tftpd.c 

Log message:
Sync the severity of the syslog_* functions shared between identd, slowcgi,
tftp-proxy and tftpd to the severity used in log.c style loggers.
This also fixes an issue where syslog_err and syslog_errx logged with
different severities.

Sure deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/26 11:51:10

Added files:
	x11/kde4/artikulate/patches: patch-libsound_src_CMakeLists_txt 

Log message:
Fix build with clang in base (wrong CMake variable used).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 11:54:31

Modified files:
	x11/gtk+2      : Makefile 

Log message:
unconditionalize Wno-*, gcc4 has supported it for long enough by now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 12:02:01

Modified files:
	x11/gtk+2      : Makefile 

Log message:
Move away from the special mpi debug section.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 12:09:15

Modified files:
	games/pingus   : Makefile 
	games/pingus/patches: patch-src_pingus_pingus_main_cpp 
Added files:
	games/pingus/patches: patch-src_lisp_getters_hpp 
	                      patch-src_pingus_pingus_level_hpp 
	                      patch-src_pingus_prefab_file_hpp 
	                      patch-src_pingus_screens_pingus_menu_cpp 
	                      patch-src_util_file_reader_hpp 

Log message:
let pingus build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/26 12:40:05

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Get rid of the DELAY() hack in the firmware loader for 8000 family
iwm(4) devices. I don't see any problems without this hack.
I suppose the underlying problem was fixed in if_iwm.c r1.146.

Add some additional error checking while here.

Tested by me on 8260 and by claudio@ on 8265.
ok claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 12:57:47

Modified files:
	x11/herbstluftwm: Makefile 

Log message:
unhardcode the build system. fixes clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 12:58:52

Modified files:
	x11/gnome/baobab: Makefile 
	x11/gnome/clocks: Makefile 
	x11/gnome/terminal: Makefile 
	x11/gnome/totem: Makefile 

Log message:
Our gcc(1) does not choke on unkwown -Wno-foobar options.


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/26 13:11:20

Modified files:
	sys/net        : pfkey.c pfkeyv2.c pfkeyv2.h 

Log message:
There is only one version of pfkey in OpenBSD and this will not change any
time soon so remove all the code to support multiple pfkey versions.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/26 13:15:06

Modified files:
	sys/arch/amd64/conf: RAMDISK_CD 

Log message:
Enable chvgpio(4) in RAMDISK_CD on amd64.
Makes the King Jim portabook's keyboard work in bsd.rd.
ok deraadt mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/26 13:19:23

Modified files:
	games/trek     : Makefile play.c setup.c trek.h 
Removed files:
	games/trek     : dumpgame.c 

Log message:
save and restore hasn't worked for some time, not since -fPIE, since it
uses a pointer equality check for save game validity. remove it.
discovered by the ever inquisitive mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:26:15

Log message:
    import devel/py-freezegun, a test dependency for the upcoming khal port
    
    FreezeGun is a library that allows your python tests to travel
    through time by mocking the datetime module.
    
    with input from danj
    
    ok danj
    
    Status:
    
    Vendor Tag:	jung
    Release Tags:	jung-20170526
    
    N ports/devel/py-freezegun/Makefile
    N ports/devel/py-freezegun/distinfo
    N ports/devel/py-freezegun/pkg/PLIST
    N ports/devel/py-freezegun/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:27:56

Log message:
    import devel/py-icalendar, a dependency for the upcoming khal port
    
    This is an attempt at making an iCalendar package for Python, to parse and
    generate iCalendar files.  The inspiration has come from the email package in
    the standard lib, yet efficient and powerful.
    
    ok danj
    
    Status:
    
    Vendor Tag:	jung
    Release Tags:	jung-20170526
    
    N ports/devel/py-icalendar/distinfo
    N ports/devel/py-icalendar/Makefile
    N ports/devel/py-icalendar/pkg/PLIST
    N ports/devel/py-icalendar/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:31:46

Modified files:
	devel          : Makefile 

Log message:
link devel/py-freezegun


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/26 13:34:12

Modified files:
	usr.bin/ssh    : channels.c channels.h 

Log message:
remove channel_input_close_confirmation (ssh1 only); ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/26 13:35:50

Modified files:
	usr.bin/ssh    : channels.c channels.h 

Log message:
remove SSH_CHANNEL_XXX_DRAINING (ssh1 only); ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:36:21

Modified files:
	devel          : Makefile 

Log message:
link devel/py-icalendar


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:39:04

Modified files:
	devel          : Makefile 

Log message:
add py3 flavor for py-freezegun


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:43:03

Log message:
    import productivity/khal
    
    Khal is a standards based CLI (console) calendar program, able to synchronize
    with CalDAV servers through vdirsyncer.
    
    with input from danj
    
    ok danj
    
    Status:
    
    Vendor Tag:	jung
    Release Tags:	jung-20170526
    
    N ports/productivity/khal/Makefile
    N ports/productivity/khal/distinfo
    N ports/productivity/khal/pkg/PLIST
    N ports/productivity/khal/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 13:45:23

Modified files:
	productivity   : Makefile 

Log message:
link productivity/khal


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/26 13:48:28

Modified files:
	games/trek     : trek.6 
	games/trek/USD.doc: trek.me 
Removed files:
	games/trek/DOC : read_me.nr things 

Log message:
forgot to remove mention of deleted dump/restart.
also delete ancient todo file:
Frankly,
I am getting pretty sick of playing this game.
Hence,
the version which you get may have several bugs


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 13:56:30

Removed files:
	graphics/shotwell/patches: patch-Makefile_in 

Log message:
Drop uneeded patch.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/26 14:16:57

Modified files:
	tests/portcheck: t17.sample 

Log message:
Oops, forgot to commit that bit a long time before.

Noticed by jca@, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/26 14:27:02

Modified files:
	usr.bin/patch  : pch.c 

Log message:
sometimes patches coming from other places have extra a/ and b/ directories
prepended to filenames. detect this condition and attempt to correct it.
ok openbsd


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/26 14:27:21

Modified files:
	regress/usr.bin/patch: Makefile 
Added files:
	regress/usr.bin/patch: t19.diff t19.in t19.out 

Log message:
add a test for the git diffs, suggested by tom


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/26 14:34:49

Modified files:
	usr.bin/ssh    : sshbuf.c 

Log message:
sshbuf_consume: reset empty buffer; ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/26 14:37:57

Modified files:
	www/surf       : Makefile distinfo 
	www/surf/patches: patch-config_def_h patch-config_mk 

Log message:
update www/surf to 2.0 using newer webkitgtk4, following upstream changes

ok zhuk

note: this update makes www/surf2 mostly superfluous, so may be removed soon


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/26 14:40:31

Modified files:
	infrastructure/bin: portcheck 

Log message:
Use dumb Makefile pipe trick from DPB/Vars.pm instead of trying to access
an existing port (devel/quirks) which could be broken, resulting in strange
errors on portcheck side.

Prompted and solution provided by espie@, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 14:43:12

Modified files:
	audio/speech-dispatcher: Makefile distinfo 
	audio/speech-dispatcher/patches: 
	                                 patch-src_api_python_speechd_config_config_py_in 

Log message:
Update to speech-dispatcher-0.8.7.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/26 14:50:57

Modified files:
	graphics/tiff  : Makefile distinfo 
	graphics/tiff/patches: patch-libtiff_tif_getimage_c 
	                       patch-libtiff_tif_luv_c 
	                       patch-man_Makefile_in 
	graphics/tiff/pkg: PLIST 

Log message:
Security update to 4.0.8:
Fixes CVE-2017-5225, CVE-2017-7592 to -7602


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/26 14:55:09

Modified files:
	infrastructure/bin: portcheck 

Log message:
More obvious error message for empty patches.

ok zhuk@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/26 14:55:31

Modified files:
	usr.sbin/bgpd  : bgpd.8 parse.y rde_attr.c session.c 

Log message:
AS 0 is special and should be considered an error.

Drop the session if it shows during OPEN or CAPA, or mark as invalid if
it is part of an Update.

required by RFC 7607

man page OK jmc@
OK florian@ benno@ claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 15:17:12

Modified files:
	graphics/argyll: Makefile distinfo 
	graphics/argyll/patches: patch-icc_icc_h 
	graphics/argyll/pkg: PLIST 

Log message:
Update to argyllcms-1.9.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/05/26 15:23:14

Modified files:
	usr.sbin/ldapd : btree.c 

Log message:
Don't overflow uint16 when the filesystem block size is >32K.
Reported and initial diagnosis from Allan Streib, help/ok millert deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/05/26 15:27:11

Modified files:
	shells/osh     : Makefile distinfo 
Removed files:
	shells/osh/patches: patch-Makefile 

Log message:
Update to osh 4.3.2, patch upstreamed.


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/05/26 15:30:00

Modified files:
	usr.sbin/smtpd : lka_session.c smtpd.h 
	usr.sbin/smtpd/smtpd: Makefile 
Added files:
	usr.sbin/smtpd : mda_variables.c 

Log message:
move variables expansion out of lka_session into their own file, this is a
mechanical diff to simplify a bit the lka code and prepare for moving
variables outside of the lookup process into the chrooted mda process.
no functional change for now.

ok eric@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/26 15:34:47

Modified files:
	games/pioneers : Makefile distinfo 
	games/pioneers/pkg: PLIST 
Removed files:
	games/pioneers/patches: patch-Makefile_in patch-configure 

Log message:
Update to pioneers-15.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 15:46:17

Modified files:
	net/p5-Net-Inspect: Makefile distinfo 

Log message:
update p5-Net-Inspect to 0.327


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/05/26 15:50:35

Modified files:
	devel/p5-Devel-CheckOS: Makefile distinfo 

Log message:
update p5-Devel-CheckOS to 1.80


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/26 16:01:39

Added files:
	multimedia/k3b-kde4/patches: patch-CMakeLists_txt 

Log message:
Unbreak for Clang.

The hack to be revisited when we have CMake 3.8 and, therefore, c_std_99.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/26 16:07:16

Modified files:
	devel/valgrind : Makefile 
Added files:
	devel/valgrind/patches: patch-coregrind_m_main_c 

Log message:
changes to workaround major breakages in valgrind:

- add USE_WXNEEDED.

- add a patch from smccalib at protonmail,ch from
https://marc.info/?l=openbsd-ports&m=149541633922860&w=2


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/26 20:27:48

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
add missing prototype


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:41:43

Modified files:
	audio/mpd      : Makefile 
	audio/openal   : Makefile 
	devel/cbmc     : Makefile 
	devel/cppcheck : Makefile 

Log message:
use WANT_CXX, these build trivially


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:45:18

Modified files:
	emulators/desmume: Makefile 
	emulators/mgba : Makefile 

Log message:
compiles like a charm with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:47:41

Modified files:
	emulators/snes9x: Makefile 
	emulators/xnp2 : Makefile 
	emulators/xroar: Makefile 

Log message:
more WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:51:02

Modified files:
	games/lugaru   : Makefile 
	games/supertux : Makefile 

Log message:
more WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:54:31

Modified files:
	games/supertuxkart: Makefile 
	geo/pgrouting  : Makefile 
	geo/viking     : Makefile 
	graphics/ffmpeg: Makefile 
	graphics/glm   : Makefile 
	graphics/libgxps: Makefile 
	graphics/ttfautohint: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:56:48

Modified files:
	lang/guile2    : Makefile 
	lang/racket-minimal: Makefile 

Log message:
more WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:58:08

Modified files:
	lang/ucblogo   : Makefile 

Log message:
one single substitution using beforesubst


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 22:59:05

Modified files:
	mail/evolution-rss: Makefile 

Log message:
re-conditionalize estdc++


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 23:02:07

Modified files:
	misc/gtk3mm-documentation: Makefile 
	multimedia/gstreamer1: Makefile.inc 
	multimedia/qt-gstreamer: Makefile 
	net/filezilla  : Makefile 
	net/gdnsd      : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 23:04:07

Modified files:
	productivity/taskd: Makefile 
	productivity/taskwarrior: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 23:07:48

Modified files:
	sysutils/logstalgia: Makefile 
	sysutils/tmux-mem-cpu-load: Makefile 
	textproc/highlight: Makefile 
	www/aria2      : Makefile 
	www/epiphany   : Makefile 
	www/newsbeuter : Makefile 
	x11/girara     : Makefile 
	x11/gnome/recipes: Makefile 
	x11/gnome/shell: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 23:09:04

Modified files:
	x11/lemonbar   : Makefile 
	x11/worker     : Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/26 23:16:18

Modified files:
	games/tome4    : Makefile 

Log message:
WANT_CXX ignore build system


CVSROOT:	/cvs
Module name:	www
Changes by:	krw@cvs.openbsd.org	2017/05/26 23:53:38

Modified files:
	.              : cvsync.html 

Log message:
Fix entry for UofT cvsync machine.

ok nick@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 00:21:43

Modified files:
	net/dnsdist    : Makefile 
	net/powerdns   : Makefile 
Added files:
	net/dnsdist/patches: patch-ext_json11_json11_cpp 
	net/powerdns/patches: patch-ext_json11_json11_cpp 

Log message:
WANT_CXX
fix json11 (from freebsd)


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/27 00:23:49

Modified files:
	sys/arch/mips64/mips64: pmap.c 

Log message:
Check cache_valias_mask earlier in the expression. The value is zero
on most systems, so this tweak should save an iota of CPU time.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 00:38:23

Modified files:
	emulators/qemu : Makefile 
	emulators/qemu/patches: patch-configure 

Log message:
let it build with clang, just need to patch tls auto-detection


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 00:44:14

Modified files:
	sys/net        : if_tun.c 

Log message:
Remove superflyous splnet()/splx() dances.

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 00:54:40

Modified files:
	graphics/blender: Makefile 
Added files:
	graphics/blender/patches: patch-intern_cycles_bvh_bvh_build_cpp 
	                          patch-intern_itasc_kdl_tree_hpp 
	                          patch-intern_opensubdiv_opensubdiv_converter_cc 

Log message:
WANT_CXX and small clang fixes


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/27 01:07:14

Modified files:
	build          : mirrors.dat 

Log message:
Fix entry for UofT cvsync machine, matching krw's edit of cvsync.html.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 01:26:23

Modified files:
	sysutils/awless: Makefile distinfo 

Log message:
Update to awless-0.0.25.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 01:37:36

Modified files:
	libexec/getty  : subr.c 

Log message:
unifdef XXX_DELAY which is older than i am


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 01:39:27

Modified files:
	libexec/rpc.rwalld: rwalld.c 

Log message:
remove support for OSF


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 01:44:28

Modified files:
	libexec/rpc.rstatd: rstat_proc.c 

Log message:
bzero -> memset


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/27 01:55:27

Modified files:
	emulators/stella: Makefile 

Log message:
Fix HOMEPAGE and MASTER_SITES, project moved to GitHub and the distfiles
have been removed from SourceForge.

OK benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 01:55:44

Modified files:
	usr.bin/banner : Makefile banner.c banner.h chset.c 

Log message:
trim some unused compile options for alternative character forms.


CVSROOT:	/cvs
Module name:	ports
Changes by:	akfaew@cvs.openbsd.org	2017/05/27 02:01:33

Modified files:
	net/bitlbee    : Makefile distinfo 

Log message:
Update to bitlbee-3.5.1

OK sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 02:02:40

Modified files:
	sys/conf       : GENERIC 
	sys/kern       : uipc_domain.c 

Log message:
Kill option KEY, it is a useless knob, nobody uses pfkeyv2 without IPSEC or
tcp md5. OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 02:03:29

Modified files:
	share/man/man4 : options.4 

Log message:
option KEY got tedued.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 02:18:46

Modified files:
	games/warzone2100: Makefile 
	games/warzone2100/patches: patch-configure_ac 
Added files:
	games/warzone2100/patches: patch-3rdparty_glm_core_type_half_inl 
	                           patch-lib_exceptionhandler_exceptionhandler_cpp 
	                           patch-lib_netplay_netplay_cpp 

Log message:
WANT_CXX, patches inspired by freebsd.

horrible hack to prevent build failure if incompatible ports' glm is
installed...


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 02:31:08

Modified files:
	usr.sbin/acme-client: main.c 

Log message:
Use basename(3) instead of hand rolling it.
Gets rid of double slashes, pointed out by Raf Czlonka (rczlonka at
gmail), thanks!

OK benno


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 02:33:25

Modified files:
	usr.sbin/relayd: Makefile ca.c check_tcp.c config.c hce.c 
	                 parse.y relay.c relay_http.c relayd.c relayd.h 
	                 ssl.c 
Added files:
	usr.sbin/relayd: boguskeys.h check_tls.c 

Log message:
Migrate relayd to use libtls for TLS. Still does the TLS privsep via the
engine but at least we can use a sane API for new features.
Going in now so it is possible to work with this in tree.
General agreement at d2k17.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/27 02:35:55

Modified files:
	sys/dev/pv     : vioscsi.c 

Log message:
Move error path to end of function where god intended it
to be. goto'ing upwards into an 'if' statement block
is weird.

ok sf@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 02:40:14

Modified files:
	x11/vlc        : Makefile distinfo 
	x11/vlc/patches: patch-Makefile_in patch-configure_ac 
	                 patch-modules_gui_qt4_dialogs_messages_cpp 
	                 patch-share_Makefile_am 
	x11/vlc/pkg    : PLIST-main 

Log message:
SECURITY update to vlc-2.2.6.

from Brad (maintainer) and a few tweaks by myself


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 02:41:44

Modified files:
	emulators/mupen64plus/video-glide64mk2: Makefile 
Added files:
	emulators/mupen64plus/video-glide64mk2/patches: 
	                                                patch-src_Glide64_3dmath_cpp 

Log message:
differing builtins, WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 03:01:22

Modified files:
	sys/arch/sparc64/conf: ld.script 

Log message:
Make room for another 4GB of .text.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 03:03:22

Modified files:
	sys/arch/sparc64/sparc64: pmap.c 

Log message:
Claim physical memory allocated during early bootstrap from the PROM.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/05/27 03:05:18

Modified files:
	distrib/miniroot: install.sub 

Log message:
De-duplicate sets selection instructions, and give a short example.
Still one lines shorter.

Input and okay from tedu@ and deraadt@; also a "weak" okay from sthen@.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 03:05:25

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
When running from cron, the ftp(1) progress bar is not shown; that's all fine
and dandy except that if there's fetch/verify error, we may not know which
syspatch caused this. So if we're not associated with a terminal, just echo
what ftp -VD would (without the progress bar).


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/27 03:26:42

Modified files:
	usr.sbin/bgpd  : bgpd.h 

Log message:
fix the reference to draft-ymbk-grow-blackholing, to RFC 7999


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 03:27:36

Modified files:
	sysutils/facter: Makefile 

Log message:
Needs bdep on devel/gettext-tools (/usr/local/bin/xgettext).


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 03:28:28

Modified files:
	libexec/getty  : main.c 

Log message:
remove the getname() code trying to handle baud < 1200 terminals.
leave the special down under code until somebody unearths why it exists.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/27 03:31:14

Modified files:
	libexec/getty  : gettytab.5 main.c 

Log message:
Stop supporting primordial # (erase) and @ (kill) sequences.
ok tedu


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/27 03:34:55

Modified files:
	libexec/getty  : main.c 

Log message:
Stop echoing ANSI sequences back to the console, by expanding ESC character
to literal ^[.  This makes getty interaction appear more like login, and
stops a mid-ANSI sequence parsing problem that messed up login, making it
freeze the session until timeout.
ok tedu fcambus


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 03:51:07

Modified files:
	usr.bin/doas   : doas.c 

Log message:
for password failure, print Authorization failed instead of EPERM.
will make things less confusing with commands rejected by config file.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/27 03:51:12

Modified files:
	productivity/vym: Makefile 
Added files:
	productivity/vym/patches: patch-exports_cpp 

Log message:
Unbreak build with Clang.

Still wondering how things were supposed to work with GCC.


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 03:51:18

Modified files:
	sys/net        : route.c 

Log message:
In ifa_ifwithroute() the rtalloc() needs to be done against the rdomain
so use rtable_l2() to get the right id. Fixes adding routes to rtables.
OK mpi@ phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 03:54:43

Modified files:
	sys/arch/arm64/arm64: machdep.c 
	sys/arch/arm64/include: vmparam.h 

Log message:
Use EFI memory map to discover available physical memory.
Fall back on improved code that parses the FDT /memory node.
However, on machines with "real" UEFI firmware, /memory may include
reserved memory that we shouldn't use (it does on the Overdrive 1000).
On those machines, make sure that you use BOOTAA64 0.3 or later such that
the EFI memory map gets used.

For now, print out the EFI memory map to help debug any issues.

ok patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/27 04:22:06

Modified files:
	sys/dev/pv     : virtio.c 

Log message:
virtio: Remove MINSEG_INDIRECT

Remove MINSEG_INDIRECT as a tweakable define. Always use indirect
descriptors if we have more than 1 segment. Add a comment to document
the way if_vio.c uses maxnsegs in virtio_alloc_vq() to disable
indirect descriptors for a queue.

Based on a diff from krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 04:22:50

Modified files:
	sys/arch/amd64/include: cpufunc.h 

Log message:
there shouldn't be any need to check for PGE on amd64. ok deraadt mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 04:24:02

Modified files:
	sys/net        : pipex.c 

Log message:
Remove obsolete comment talking about splnet().


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/27 04:24:31

Modified files:
	sys/dev/pv     : virtiovar.h virtio.c 

Log message:
virtio: remove unused vq_maxsegsize


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/27 04:24:44

Modified files:
	usr.sbin/bgpd  : bgpd.conf.5 bgpd.h parse.y printconf.c 
	                 rde_filter.c 

Log message:
allow us to use 'local-as' in the filter language

"match in from any set community local-as:neighbor-as"

OK claudio@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/27 04:25:44

Modified files:
	sbin/wsconsctl : wsconsctl.8 

Log message:
Mention the display.font variable in EXAMPLES.

As mentioned by miod@ here [1], wsconsctl(8) has a currently
undocumented 'display.font' variable allowing to change the
current font on framebuffer consoles.

[1] http://undeadly.org/cgi?action=article&sid=20131023125815

OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/27 04:33:15

Modified files:
	usr.sbin/bgpd  : bgpd.conf.5 parse.y printconf.c rde.c 
	                 rde_filter.c rde_update.c session.c 

Log message:
Allow OpenBGPD to selectively choose which local ASN to use per-peer.
This is intended to be used for ASN migrations, not for permanent use.

You MUST use filters to protect yourself from receiving your own routes.
There be dragons and grues.

OK claudio@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/05/27 04:35:41

Modified files:
	usr.bin/libtool/LT: Getopt.pm 

Log message:
Make libtool handle --tag=... inside command line.

Unbreaks (and changes PLIST) multimedia/lives under Clang, and maybe others.

okay espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 04:36:18

Modified files:
	sys/kern       : uipc_mbuf.c 

Log message:
Refactor m_makespace() using MCLGETI to simplify the logic of this function.
Still quite complicated but more legible in the end and it will do less
M_GET calls for huge packets.
OK bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/27 04:36:42

Modified files:
	multimedia/lives: Makefile 
	multimedia/lives/pkg: PLIST 

Log message:
Unbreak for base Clang case.

Requires recent libtool to build due to --tag=disable-static handling fixes.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:37:04

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
bluhm pointed out that the prefix itself can be scoped, too. So we
need to pass around sockaddr_in6s for that, too. While here add some
more validation of what we get handed in as proposal from engine.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:37:56

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
send route label


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:38:54

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
move towards $thing proposals and attach them to iface


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:39:32

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
we need to loop over all proposals


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:40:43

Modified files:
	usr.sbin/slaacd: engine.c slaacd.h 
	usr.sbin/slaacctl: slaacctl.c 

Log message:
no longer carry addresses in struct radv_prefix


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:41:41

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
proposal state


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:42:51

Modified files:
	usr.sbin/slaacd: engine.c engine.h slaacd.c 

Log message:
use new address_proposal struct to generate proposals


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:45:14

Modified files:
	usr.sbin/slaacd: engine.c engine.h frontend.c slaacd.c slaacd.h 

Log message:
handle proposal ack


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:46:27

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
remove unused vars


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:47:23

Modified files:
	usr.sbin/slaacd: engine.c engine.h frontend.c slaacd.c slaacd.h 

Log message:
configure address on interface


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:49:38

Modified files:
	usr.sbin/slaacd: frontend.c 

Log message:
sync route socket processing to netcfgd
- handle multiple messages
- switch to get_rtaddrs() to get an array of addresses transported in
the message


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:50:25

Modified files:
	usr.sbin/slaacd: engine.c frontend.c slaacd.c slaacd.h 

Log message:
delete proposal if address gets deleted


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:52:16

Modified files:
	usr.sbin/slaacd: engine.c frontend.c slaacd.c slaacd.h 
	usr.sbin/slaacctl: slaacctl.c 

Log message:
show address proposals in slaacdctl show interface output


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:53:37

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
do not use %hhu


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:53:59

Modified files:
	usr.sbin/slaacctl: slaacctl.c 

Log message:
do not use %hhu


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:54:44

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
there is no need to construct and send a proposal if we reached the
limit and just remove the list element directly afterwards


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 04:54:47

Modified files:
	games/eduke32  : Makefile 

Log message:
let it build with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/27 04:55:45

Modified files:
	usr.sbin/bgpd  : mrt.c 

Log message:
this expects 2byte ASN, so use that, instead of an asn that may or may not fit

noticed by and OK claudio@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:55:50

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
handle expiration / renewal of non-privacy addresses


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 04:57:23

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
SOCK_CLOEXEC | SOCK_NONBLOCK


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/27 04:58:53

Modified files:
	regress/sys/netinet/ipsec: Makefile 

Log message:
Do not use reject routes as they prevent path MTU discovery.
Drop possible old TCP connections from previous test runs.
Adapt regex that checks tcpdump pflog0, output has been fixed.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pea@cvs.openbsd.org	2017/05/27 05:18:27

Modified files:
	lang/go        : Makefile distinfo 
	lang/go/pkg    : PLIST 

Log message:
Update to 1.8.3
ok jsing@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/27 06:00:28

Modified files:
	sys/dev/wscons : ascii.h 

Log message:
Add missing comments for CAN and SUB, for consistency.

OK tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/27 06:09:27

Modified files:
	usr.sbin/bgpd  : bgpd.h 

Log message:
bump the size of ctl rib flags

OK claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 06:20:43

Added files:
	multimedia/swfmill/patches: patch-src_codegen_parsexml_xsl 
	                            patch-src_codegen_writexml_xsl 
Removed files:
	multimedia/swfmill/patches: patch-src_gSWFParseXML_cpp 
	                            patch-src_gSWFWriteXML_cpp 

Log message:
actually, that's generated code, so coooool!  copy-and-paste bugs 10s of times


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 06:21:50

Modified files:
	sys/arch/i386/i386: cpu.c 
	sys/arch/i386/include: cpufunc.h 
	sys/arch/amd64/amd64: cpu.c 
	sys/arch/amd64/include: cpufunc.h 

Log message:
manually inline tlbflushg. it's short and there's only one caller.
ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 06:37:16

Modified files:
	x11/gtk+2      : Makefile 

Log message:
vi(1) did not like me on that one...
thanks naddy@ for spotting it.


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/27 06:39:12

Modified files:
	sys/net        : pipex.c 

Log message:
Use rn_inithead() instead of rn_inithead0().  Since rn_inithead0()
doesn't trigger rn_initmask() and first session had caused panics.

Reported by VOblezov at mtsbank.ru.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/27 06:40:51

Modified files:
	sys/dev/ic     : nvme.c nvmevar.h 

Log message:
nvme: Add suspend/resume code

Based on an initial patch by ehrhardt@ . Thanks to claudio@ for testing
and deraadt@ for advice.

"go ahead" deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/27 06:49:03

Modified files:
	x11/gbdfed     : Makefile 

Log message:
Remove defunct HOMEPAGE and switch MASTER_SITES to distfiles.pl.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 07:10:07

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
remove unused vars


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/27 07:31:06

Modified files:
	.              : INDEX 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 07:51:52

Modified files:
	etc/rc.d       : rc.subr ypbind 
	share/man/man8 : rc.d.8 rc.subr.8 

Log message:
Add an ALRM timer to cope with 2 annoying issues in rc.d(8):
- prevent a daemon from hanging the boot
(typo in your flagsm e.g. httpd_flags=-d)
- make sure we can get the status of a backgrounded daemon instead of always
returning success

Side effect of this is that we can kill a knob! rip rc_bg :-)
Ports will need love, and a second commit is coming for that.

The diff is small yet not trivial so I am committing early in the release
process in one shot so it can easily be reverted if needed. I started working on
this during g2k16 in Cambridge then finished it in Brisbane for a2k17 where
robert@, beck@ and sthen@ agreed it was the correct way to go and I should move
ahead with it post 6.1.

If you see any regression, please talk to me!


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 07:53:07

Modified files:
	audio/ympd/pkg : ympd.rc 
	audio/zeya/pkg : zeya.rc 
	databases/mariadb/pkg: mysqld.rc 
	databases/puppetdb/pkg: puppetdb.rc 
	databases/puppetdb4/pkg: puppetdb.rc 
	devel/go-tools/pkg: godoc.rc 
	devel/jenkins/pkg: jenkins.rc 
	games/hedgewars/pkg: hedgewars_server.rc 
	games/ioquake3/pkg: ioq3ded.rc 
	games/yquake2/pkg: q2ded.rc 
	misc/rocrail/pkg: rocrail.rc 
	net/syncthing/pkg: syncthing.rc 
	net/gnugk/pkg  : gnugk.rc 
	net/ices2/pkg  : ices2.rc 
	net/maradns-deadwood/pkg: deadwood.rc 
	net/mfi/pkg    : mfi.rc 
	net/munin/pkg  : munin_asyncd.rc 
	net/unifi/pkg  : unifi.rc 
	net/mlvpn/pkg  : mlvpn.rc 
	net/openfire/pkg: openfire.rc 
	print/cups-filters/pkg: cups_browsed.rc 
	security/heimdal/pkg: kadmind.rc kpasswdd.rc 
	security/snort2pf/pkg: snort2pf.rc 
	security/sshguard/pkg: sshguard.rc 
	security/yubiserve/pkg: yubiserve.rc 
	security/vault/pkg: vault.rc 
	sysutils/facette/pkg: facette.rc 
	sysutils/freedt/pkg: svscan.rc 
	sysutils/consul/pkg: consul.rc 
	sysutils/logstash/pkg: logstash.rc 
	sysutils/riemann/pkg: riemann.rc 
	sysutils/serf/pkg: serf.rc 
	sysutils/beats/filebeat/pkg: filebeat.rc 
	sysutils/beats/packetbeat/pkg: packetbeat.rc 
	sysutils/beats/hwsensorsbeat/pkg: hwsensorsbeat.rc 
	sysutils/beats/heartbeat/pkg: heartbeat.rc 
	sysutils/beats/metricbeat/pkg: metricbeat.rc 
	sysutils/amazon-ssm-agent/pkg: amazon_ssm_agent.rc 
	sysutils/consul-template/pkg: consul_template.rc 
	sysutils/rundeck/pkg: rundeck.rc 
	telephony/stuntman/pkg: stunserver.rc 
	www/ajaxterm/pkg: ajaxterm.rc 
	www/rt/pkg     : rt.rc 
	www/gitea/pkg  : gitea.rc 
	www/kibana/pkg : kibana.rc 
	x11/gnome/gdm/pkg: gdm.rc 
	x11/kde/base3/pkg: kdm.rc 
	x11/kde4/workspace/pkg: kdm.rc 
	x11/slim/pkg   : slim.rc 
	x11/x11vnc/pkg : x11vnc.rc 

Log message:
Cope with recent rc.subr(8) change (removal of rc_bg etc.)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 07:55:37

Modified files:
	x11/gtksourceview3: Makefile distinfo 

Log message:
update to gtksourceview3-3.24.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 07:55:59

Modified files:
	audio/ympd     : Makefile 
	audio/zeya     : Makefile 
	databases/mariadb: Makefile 
	databases/puppetdb: Makefile 
	databases/puppetdb4: Makefile 
	devel/go-tools : Makefile 
	devel/jenkins/devel: Makefile 
	devel/jenkins/stable: Makefile 
	games/hedgewars: Makefile 
	games/ioquake3 : Makefile 
	games/yquake2  : Makefile 
	misc/rocrail   : Makefile 
	net/syncthing  : Makefile 
	net/gnugk      : Makefile 
	net/ices2      : Makefile 
	net/maradns-deadwood: Makefile 
	net/mfi        : Makefile 
	net/munin      : Makefile 
	net/unifi      : Makefile 
	net/mlvpn      : Makefile 
	net/openfire   : Makefile 
	print/cups-filters: Makefile 
	security/heimdal: Makefile 
	security/snort2pf: Makefile 
	security/sshguard: Makefile 
	security/yubiserve: Makefile 
	security/vault : Makefile 
	sysutils/facette: Makefile 
	sysutils/freedt: Makefile 
	sysutils/consul: Makefile 
	sysutils/logstash: Makefile 
	sysutils/riemann: Makefile 
	sysutils/serf  : Makefile 
	sysutils/beats/filebeat: Makefile 
	sysutils/beats/packetbeat: Makefile 
	sysutils/beats/hwsensorsbeat: Makefile 
	sysutils/beats/heartbeat: Makefile 
	sysutils/beats/metricbeat: Makefile 
	sysutils/amazon-ssm-agent: Makefile 
	sysutils/consul-template: Makefile 
	sysutils/rundeck: Makefile 
	telephony/stuntman: Makefile 
	www/ajaxterm   : Makefile 
	www/rt         : Makefile 
	www/gitea      : Makefile 
	www/kibana     : Makefile 
	x11/gnome/gdm  : Makefile 
	x11/kde/base3  : Makefile 
	x11/kde4/workspace: Makefile 
	x11/slim       : Makefile 
	x11/x11vnc     : Makefile 

Log message:
I forgot the bump commit...


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 07:58:45

Modified files:
	graphics/p5-SVG: Makefile distinfo 

Log message:
update to p5-SVG-2.77


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 08:02:36

Modified files:
	devel/libgit2/py-git2: Makefile distinfo 

Log message:
update to py-git2-0.25.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 08:04:25

Modified files:
	devel/ruby-rspec/specinfra: Makefile distinfo 
	devel/ruby-rspec/specinfra/pkg: PLIST 

Log message:
update to specinfra-2.68.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 08:04:38

Modified files:
	devel/ruby-rspec/serverspec: Makefile distinfo 

Log message:
update to serverspec-2.38.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 08:05:00

Modified files:
	sysutils/monit : Makefile distinfo 
	sysutils/monit/patches: patch-monitrc 

Log message:
update to monit-5.22.0


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/27 08:16:45

Modified files:
	sys/dev/pci    : ahci_pci.c 

Log message:
remove #ifdef HIBERNATE section that declares stuff that lives in ahci.c


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 08:16:49

Modified files:
	net/mfi        : Makefile 
	net/mfi/pkg    : mfi.rc 

Log message:
Make it possible to pass daemon_flags.

ok jasper@ (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 08:20:39

Modified files:
	lib/librthread : rthread.h rthread_libc.c 
Added files:
	lib/librthread : synch.h rthread_cond.c rthread_mutex.c 

Log message:
New mutex and condvar implementations based on futex(2).

Not enabled yet, it needs some SPINLOCK_SPIN_HOOK love and
some bumps.

Tested by many including sthen@ in a bulk.

ok visa@, sthen@, kettenis@, tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 08:24:29

Modified files:
	regress/lib/libpthread/sigwait: sigwait.c 

Log message:
Go to sleep to let our contending thread win a race.

Because we cannot assume that the contending thread will grab it
between our unlock/lock.

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 08:33:39

Modified files:
	sys/arch/alpha/alpha: locore.s 

Log message:
Implement copyin32(9) for alpha.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 08:39:34

Modified files:
	graphics/sane-backends: Makefile 

Log message:
--without-api-spec in case we detect ghostscript, transig and/or texlive
which may break the port if dpb junks one of them.

reported by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 09:05:16

Modified files:
	sys/ddb        : db_ctf.c 

Log message:
Spring cleanup:

- Cache the string table pointer
- Unify return statements
- Use the end of the symbol table rather than counting symbols


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 09:08:43

Modified files:
	x11/gnome/recipes: Makefile distinfo 
	x11/gnome/recipes/pkg: PLIST 
Added files:
	x11/gnome/recipes/patches: patch-meson_build 
	                           patch-src_gr-recipe-formatter_c 
	                           patch-src_gr-recipe-store_c 

Log message:
update to gnome-recipes-1.4.4


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 09:11:03

Modified files:
	sys/arch/sparc64/include: lock.h 
	sys/arch/sparc64/sparc64: lock_machdep.c 

Log message:
Move SPINLOCK_SPIN_HOOK to the header used by other archs in order to
prepare the terrain for MI locks.

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/27 09:32:51

Modified files:
	lib/libc/hash  : sha2.c 
	sys/lib/libsa  : sha2.c 

Log message:
move sha224_initial_hash_value[] under !SHA2_SMALL; ok deraadt@ millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/27 09:51:36

Modified files:
	x11/gnome/recipes/patches: patch-src_gr-recipe-formatter_c 
	                           patch-src_gr-recipe-store_c 

Log message:
sync with what's been submitted upstream and add BZ urls


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/27 10:04:38

Modified files:
	regress/lib/libpthread/restart/connect: connect.c 

Log message:
Do not connect to cvs.openbsd.org in regress.  Run on loopback to
make the test pass without internet access.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 10:08:23

Modified files:
	sys/ddb        : db_sym.c 

Log message:
Make ddb print again filename and linenumber if a bsd.gdb was loaded.
mpi@ agrees that this is correct.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 10:16:49

Modified files:
	usr.sbin/slaacd: Makefile engine.c frontend.c slaacd.c slaacd.h 

Log message:
Generate a fake ack (or is it an alternative ack?) internally.
This allows slaacd to configure addresses in the absence of
netcfgd and might be a less scary step forward to move
stateless address autoconfiguration out of the kernel.

This intentionally a compile time option and will go away
once we figure out how to do proposals.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/27 10:41:10

Modified files:
	sys/kern       : uipc_mbuf.c 

Log message:
Put an assert that M_PKTHDR is set before accessing m_pkthdr in the
mbuf functions.
OK claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 10:41:41

Modified files:
	games/stone-soup: Makefile 
	games/stone-soup/patches: patch-source_Makefile 
Added files:
	games/stone-soup/patches: patch-source_rltiles_Makefile 

Log message:
stupid build system. unhardcode gcc/g++, get sqlite path in the right location.
force everything in the build system


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 10:42:41

Modified files:
	sys/kern       : sys_futex.c 

Log message:
Use copyin32(9) to atomically copy the futex from user space.

On !MULTIPROCESSOR kernels we still fall back on copyin(9), but that is
fine.  This will break m88k MULTIPROCESSOR kernels.

ok deraadt@, mpi@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 10:54:57

Modified files:
	textproc/link-grammar: Makefile 
Added files:
	textproc/link-grammar/patches: patch-link-grammar_utilities_h 

Log message:
allow base clang and libc++
really dirty trick to cope with a really dirty trick...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 11:31:46

Modified files:
	sysutils/simple-mtpfs: Makefile 

Log message:
WANT_CXX, tell configure to look into /usr/local


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/27 11:43:22

Modified files:
	graphics/vigra : Makefile 

Log message:
Disable tests until the template mismatch issue with
gaussianGradientMultiArray() calls gets fixed.

okay espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/27 12:04:07

Modified files:
	usr.sbin/bgpd  : parse.y 

Log message:
allow only one network <prefix> statement per for the same prefix.
ok florian@ phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/27 12:10:28

Modified files:
	x11/kde4       : kde4.port.mk 

Log message:
forgotten commit... not sure it's actually useful, but better safe than
sorry


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/27 12:12:23

Modified files:
	usr.sbin/bgpd  : bgpd.conf.5 bgpd.h parse.y printconf.c rde.c 

Log message:
Allow an administrator to disable the bgp loop detection algorithm,
which is useful in very limited situations.

Angry dragons and grues will hunt for you, if you use it.

OK claudio@ sthen@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 12:33:21

Modified files:
	sys/net        : if_pfsync.c 

Log message:
Remove useless splnet()/splx() dances.

pfsyncioctl() is executed with the NET_LOCK() held which is enough.

ok sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 12:36:20

Modified files:
	sys/net        : if_pppoe.c 

Log message:
Protect the global list of softc with the NET_LOCK().

While here remove superfluous splnet()/splx() in the ioctl routine.

ok sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 12:37:09

Modified files:
	usr.sbin/slaacctl: slaacctl.c 
	usr.sbin/slaacd: engine.c slaacd.h 

Log message:
print router preference


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/27 12:38:07

Modified files:
	usr.sbin/slaacd: slaacd.h 

Log message:
use sizeof("constant string") to avoid magic number


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/27 12:39:17

Modified files:
	sys/net        : if_ppp.c 

Log message:
Protect the global list of softc with the NET_LOCK().

ok sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/27 12:50:53

Modified files:
	sys/net        : pfkeyv2.c 
	sys/kern       : uipc_socket.c uipc_socket2.c 

Log message:
Push the NET_LOCK down into PF_KEY so that it can be treated like PF_ROUTE.
Only pfkeyv2_send() needs the NET_LOCK() so grab it at the start and release
at the end.  This should allow to push the locks down in other places.
OK mpi@, bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/27 12:54:09

Modified files:
	regress/lib/libc/qsort: qsort_test.c 

Log message:
Also test arrays of double and long long.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 13:26:35

Modified files:
	infrastructure/templates: rc.template 

Log message:
Fix rc.d template.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/27 13:26:52

Modified files:
	devel/py-freezegun: Makefile distinfo 

Log message:
update to 0.3.9


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/05/27 13:27:20

Modified files:
	devel/py-icalendar: Makefile distinfo 
	devel/py-icalendar/pkg: PLIST 

Log message:
update to 3.11.4


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/27 13:27:45

Modified files:
	sys/dev/ic     : nvme.c 

Log message:
nvme: Don't set prp1 for DEL_IOCQ

NVM_ADMIN_DEL_IOCQ does not need prp1 (just as NVM_ADMIN_DEL_IOSQ).
Remove what is likely a cut'n'paste error from the *_ADD_* code.

tested by claudio@
ok jmatthew@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/27 13:38:38

Modified files:
	sbin/pfctl     : pfctl_osfp.c 

Log message:
Move includes.

This reduces the diff with usr.sbin/tcpdump/pfctl_osfp.c. The change
from tcpdump is newer, so change pfctl. No binary change.

OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 13:47:08

Modified files:
	sys/sys        : atomic.h 

Log message:
Add membar_enter_after_atomic(9) and membar_exit_before_atomic(9) APIs to
allow important optimizations on architectures where atomic instructions
include and implied memory barrier.

ok mikeb@, visa@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 13:55:48

Modified files:
	etc/rc.d       : rc.subr ypbind 
	share/man/man8 : rc.subr.8 

Log message:
Ok turns out we still want to keep the rc_bg variable around but we need
to know which daemon cannot background themselves (actually we want to
know the opposite, but there are much more). However, it's only needed in
_rc_wait and rc.subr still does its magic without the need to add `&'.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 13:57:08

Modified files:
	audio/ympd     : Makefile 
	audio/ympd/pkg : ympd.rc 
	audio/zeya     : Makefile 
	audio/zeya/pkg : zeya.rc 
	databases/mariadb: Makefile 
	databases/mariadb/pkg: mysqld.rc 
	databases/puppetdb: Makefile 
	databases/puppetdb/pkg: puppetdb.rc 
	databases/puppetdb4: Makefile 
	databases/puppetdb4/pkg: puppetdb.rc 
	devel/go-tools : Makefile 
	devel/go-tools/pkg: godoc.rc 
	devel/jenkins/devel: Makefile 
	devel/jenkins/pkg: jenkins.rc 
	devel/jenkins/stable: Makefile 
	games/hedgewars: Makefile 
	games/hedgewars/pkg: hedgewars_server.rc 
	games/ioquake3 : Makefile 
	games/ioquake3/pkg: ioq3ded.rc 
	games/yquake2  : Makefile 
	games/yquake2/pkg: q2ded.rc 
	misc/rocrail   : Makefile 
	misc/rocrail/pkg: rocrail.rc 
	net/syncthing  : Makefile 
	net/syncthing/pkg: syncthing.rc 
	net/gnugk      : Makefile 
	net/gnugk/pkg  : gnugk.rc 
	net/ices2      : Makefile 
	net/ices2/pkg  : ices2.rc 
	net/maradns-deadwood: Makefile 
	net/maradns-deadwood/pkg: deadwood.rc 
	net/munin      : Makefile 
	net/munin/pkg  : munin_asyncd.rc 
	net/mlvpn      : Makefile 
	net/mlvpn/pkg  : mlvpn.rc 
	net/openfire   : Makefile 
	net/openfire/pkg: openfire.rc 
	print/cups-filters: Makefile 
	print/cups-filters/pkg: cups_browsed.rc 
	security/heimdal: Makefile 
	security/heimdal/pkg: kadmind.rc kpasswdd.rc 
	security/snort2pf: Makefile 
	security/snort2pf/pkg: snort2pf.rc 
	security/sshguard: Makefile 
	security/sshguard/pkg: sshguard.rc 
	security/yubiserve: Makefile 
	security/yubiserve/pkg: yubiserve.rc 
	security/vault : Makefile 
	security/vault/pkg: vault.rc 
	sysutils/facette: Makefile 
	sysutils/facette/pkg: facette.rc 
	sysutils/freedt: Makefile 
	sysutils/freedt/pkg: svscan.rc 
	sysutils/consul: Makefile 
	sysutils/consul/pkg: consul.rc 
	sysutils/riemann: Makefile 
	sysutils/riemann/pkg: riemann.rc 
	sysutils/serf  : Makefile 
	sysutils/serf/pkg: serf.rc 
	sysutils/beats/filebeat: Makefile 
	sysutils/beats/filebeat/pkg: filebeat.rc 
	sysutils/beats/packetbeat: Makefile 
	sysutils/beats/packetbeat/pkg: packetbeat.rc 
	sysutils/beats/hwsensorsbeat: Makefile 
	sysutils/beats/hwsensorsbeat/pkg: hwsensorsbeat.rc 
	sysutils/beats/heartbeat: Makefile 
	sysutils/beats/heartbeat/pkg: heartbeat.rc 
	sysutils/beats/metricbeat: Makefile 
	sysutils/beats/metricbeat/pkg: metricbeat.rc 
	sysutils/amazon-ssm-agent: Makefile 
	sysutils/amazon-ssm-agent/pkg: amazon_ssm_agent.rc 
	sysutils/consul-template: Makefile 
	sysutils/consul-template/pkg: consul_template.rc 
	sysutils/rundeck: Makefile 
	sysutils/rundeck/pkg: rundeck.rc 
	telephony/stuntman: Makefile 
	telephony/stuntman/pkg: stunserver.rc 
	www/ajaxterm   : Makefile 
	www/ajaxterm/pkg: ajaxterm.rc 
	www/rt         : Makefile 
	www/rt/pkg     : rt.rc 
	www/gitea      : Makefile 
	www/gitea/pkg  : gitea.rc 
	www/kibana     : Makefile 
	www/kibana/pkg : kibana.rc 
	x11/x11vnc     : Makefile 
	x11/x11vnc/pkg : x11vnc.rc 
	net/mfi        : Makefile 
	net/mfi/pkg    : mfi.rc 
	net/unifi      : Makefile 
	net/unifi/pkg  : unifi.rc 
	sysutils/logstash: Makefile 
	sysutils/logstash/pkg: logstash.rc 
	x11/gnome/gdm  : Makefile 
	x11/gnome/gdm/pkg: gdm.rc 

Log message:
Bring rc_bg back.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/05/27 14:02:49

Modified files:
	net/bitlbee    : Makefile 

Log message:
Add missing build dependency textproc/docbook-xsl, otherwise it tries to
fetch xhtml/docbook.xsml from the net during build.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/05/27 14:09:38

Modified files:
	productivity/khal: Makefile 

Log message:
Add missing build dependency devel/py-setuptools_scm.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/05/27 14:12:12

Modified files:
	sys/arch/i386/include: atomic.h 
	sys/arch/amd64/include: atomic.h 

Log message:
On i386 and amd64, atomic instructions include an implicit memory barrier.

ok mikeb@, visa@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	jung@cvs.openbsd.org	2017/05/27 14:18:04

Modified files:
	share/man/man5 : port-modules.5 

Log message:
remove devel/waf gone 2 years ago, may not come back but still gives nightmares

ok ajacoutot


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/27 15:00:51

Modified files:
	x11/gnome/gdm  : Makefile 
	x11/gnome/gdm/pkg: gdm.rc 

Log message:
Let's experiment for a bit; it seems that we don't need to wait for
/usr/libexec/getty to be available before starting gdm; it's probably
because gdm takes so long to start...


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/27 15:06:06

Modified files:
	sys/net        : if_pflow.c if_pflow.h 

Log message:
move sending of pflow packet into a task, seperated from the data
collection by a mbuf queue. with help from mpi@
ok florian@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/27 15:13:48

Modified files:
	x11/gbdfed     : Makefile 

Log message:
Forgot to bump REVISION in the previous commit.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/27 15:44:22

Modified files:
	sys/net        : if_pflow.c 

Log message:
fix previous as noted by mpi, thx florian


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/27 15:55:52

Modified files:
	sys/netinet    : ip_carp.c 

Log message:
Fix the carp mode 'balancing ip-stealth'.  Set the link state UP
if at least one vhid is in state MASTER.
from Florian Riehm; OK florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/27 17:58:16

Modified files:
	usr.sbin/vmd   : virtio.c 

Log message:
use pread and pwrite to save code and syscalls. ok mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/27 19:33:26

Modified files:
	sys/arch/i386/include: atomic.h 

Log message:
remove bogus atomic_swap_64 code from i386

xchg can't handle 64 bit values on i386.  gcc errors if the code
is called, clang errors if it is included.

ok mlarkin@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 01:17:53

Modified files:
	sbin/pfctl     : pfctl_osfp.c 

Log message:
print_ioctl() is unused if not debugging. Found with clang, after
marking the function "static". Use OSFP_DEBUG, in a similar
fashion to OPT_DEBUG (pfctl_optimize.c).

OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/05/28 01:27:01

Modified files:
	bin/ksh        : vi.c 
	regress/bin/ksh/vi: vi.sh 

Log message:
Fix cursor position while removing characters from the command line.

While here, remove a condition that becomes redundant.

ok schwarze@ tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 01:28:58

Modified files:
	security/libtasn1: Makefile distinfo 

Log message:
Update to libtasn1-4.11.


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 01:40:12

Modified files:
	usr.sbin/tcpdump: pfctl_osfp.c 

Log message:
Catch up with pfctl/pfctl_osfp.c, no binary change.

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 01:57:03

Modified files:
	x11/gnome/recipes/patches: patch-src_gr-recipe-formatter_c 

Log message:
committed upstream


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/05/28 02:03:36

Modified files:
	bin/chmod      : Makefile chmod.c chown.8 

Log message:
chown: Remove SUPPORT_DOT ifdef - it's on by default for 22 years

The old syntax was deprecated 25 years ago when the utility was
first standardised in IEEE Std 1003.2-1992 ("POSIX.2"). There was
no POSIX version of chown with the dot separator.

Let's stop pretending that it will ever go away.

OK jung@, deraadt@, jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 02:04:06

Modified files:
	devel/ruby-rspec/3/core: Makefile distinfo 
	devel/ruby-rspec/3/core/pkg: PLIST 
	devel/ruby-rspec/3/expectations: Makefile distinfo 
	devel/ruby-rspec/3/expectations/pkg: PLIST 
	devel/ruby-rspec/3/mocks: Makefile distinfo 
	devel/ruby-rspec/3/rspec: Makefile distinfo 
	devel/ruby-rspec/3/support: Makefile distinfo 
	devel/ruby-rspec/3/support/pkg: PLIST 

Log message:
update to rspec 3.6.0


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/05/28 02:07:33

Modified files:
	etc            : netstart 

Log message:
etc/netstart: use colon separator instead of dot with chown

OK jung@, deraadt@, jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	awolk@cvs.openbsd.org	2017/05/28 02:15:35

Modified files:
	net/corebird   : Makefile distinfo 
	net/corebird/pkg: PLIST 

Log message:
Update net/corebird 1.4.2 => 1.5

OK fcambus@

upstream changelog:
---
Changelog:
- Media attached to tweets can be downloaded using Right Click
and selecting "save as"
- Profiles use the profile background color set in the Twitter
settings if no banner is set
- The tweet compose window now features a "favorite image" view that
allows users to save often sent images and quickly add them to tweets
- The media dialog now shows Previous/Next buttons to quickly switch
between multiple media attachments of a tweet>
- The Vine support has been removed since the project is discontinued
- Allow text selection in Direct Messages
- New --account parameter allows opening the window for the given
account only
- Support tweets with up to 50 replied-to users.
- Add back verified icons next to user avatars
- Redesigned account creation UI
- Tons of bug fixes
---


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 02:22:18

Modified files:
	devel/git-lfs  : Makefile distinfo 
	devel/git-lfs/pkg: PLIST 

Log message:
update to git-lfs-2.1.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 02:27:35

Modified files:
	devel/git-cola : Makefile distinfo 
	devel/git-cola/pkg: PLIST 

Log message:
update to git-cola-2.11


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 02:29:33

Modified files:
	devel/pkgconfig: Makefile distinfo 

Log message:
update to pkgconfig-0.29.2


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 02:38:10

Modified files:
	etc/rc.d       : rc.subr 

Log message:
Drop useless lines continuation; no functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 02:47:19

Modified files:
	devel/pcre2    : Makefile distinfo 
	devel/pcre2/pkg: PLIST 

Log message:
update to pcre2-10.23


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 02:47:19

Modified files:
	sys/arch/amd64/amd64: lock_machdep.c 
	sys/arch/i386/i386: lock_machdep.c 

Log message:
Use intr_disable()/intr_restore() to reduce differences with sparc64
mp_lock.

ok kettenis@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/28 02:51:06

Modified files:
	libexec/getty  : main.c 

Log message:
Do a better job of not printing sequences we cannot reverse in DELETE or
KILL.  Therefore we can do a better job cleaning up.
testing by benno


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/28 02:59:05

Modified files:
	usr.sbin/smtpd : smtpd.conf.5 

Log message:
split the two "listen on" directives into two separate items;
the markup that we were using wouldn;t have worked with groff anyway
but, more worringly, it didn;t work with mandoc either;


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/28 03:00:24

Modified files:
	usr.sbin/smtpd : smtpd.conf.5 

Log message:
mark up "masquerade";


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/05/28 03:24:56

Modified files:
	distrib/miniroot: install.sub 

Log message:
Remove _mode variable and use AI_MODE directly instead. Use the
exit code of ftp consistently to determine success of fetching the
response file.

discussed with and OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 03:25:31

Modified files:
	sysutils/amazon-ssm-agent: Makefile distinfo 
	sysutils/amazon-ssm-agent/patches: 
	                                   patch-agent_appconfig_constants_unix_go 
	                                   patch-agent_fileutil_fileutil_unix_go 
	                                   patch-agent_platform_platform_unix_go 
	                                   patch-agent_ssm_service_go 
	                                   patch-makefile 
	sysutils/amazon-ssm-agent/pkg: PLIST amazon_ssm_agent.rc 
Removed files:
	sysutils/amazon-ssm-agent/patches: 
	                                   patch-agent_managedInstances_sharedCredentials_shared_Credentials_go 

Log message:
Update to amazon-ssm-agent-2.0.790.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/28 03:25:51

Modified files:
	sys/netinet    : ip_input.c ip_var.h ipsec_input.c 
	sys/netinet6   : ip6_input.c ip6_var.h 

Log message:
Rename ip_local() to ip_deliver() and give it the same parameters
as the pr_input functions.  Add an assert that IPv4 delivery ends
in IP proto done to assure that IPv4 protocol functions work like
IPv6.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 03:31:45

Modified files:
	etc/rc.d       : rc.subr 

Log message:
When a daemon reaches its timeout when starting, display "timeout" instead
of "ok" so the user is warned and has a chance to fix it (most of the time
due to bogus flags). Daemons reaching the timeout without being able to
start are still marked as "failed" (which should also give a clue to the
user that some investigation is needed).

prodded by beck@ a while ago
discussed with and ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 03:35:14

Modified files:
	sys/net        : if_enc.c 

Log message:
Protect the global array of interfaces with the NET_LOCK().

ok sashan@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 03:35:26

Modified files:
	mail/rspamd    : Makefile distinfo 

Log message:
update to rspamd-1.5.8

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/28 03:35:56

Modified files:
	usr.sbin/slaacd: engine.c engine.h frontend.c slaacd.c slaacd.h 
	usr.sbin/slaacctl: slaacctl.c 

Log message:
propose and configure default gateway


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 03:38:32

Modified files:
	sys/net        : if_trunk.c 

Log message:
Remove useless splnet()/splx() dances.

Data structures modified in the ioctl path are protected by the NET_LOCK().

ok sashan@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 03:39:26

Modified files:
	graphics/potrace: Makefile distinfo 

Log message:
update to potrace-1.14


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 03:45:25

Modified files:
	lib/librthread : rthread_mutex.c 

Log message:
Use membar_enter_after_atomic() and membar_exit_before_atomic().


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 03:52:22

Modified files:
	math/gunits    : Makefile distinfo 
	math/gunits/pkg: PLIST 

Log message:
update da g-g-g-g-units to 2.14 yo


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/28 03:59:58

Modified files:
	sys/dev/pci    : if_iwm.c if_iwmvar.h 

Log message:
Remove unused flag IWM_FLAG_STOPPED.
ok tedu@ of course


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 04:00:00

Modified files:
	usr.sbin/traceroute: traceroute.c 

Log message:
move as many globals as possible into the main function - thats the
only place where they are used.
Only exception: v6flags - make it an argument to usage()
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 04:01:52

Modified files:
	usr.sbin/traceroute: traceroute.c traceroute.h worker.c 

Log message:
introduce struct tr_conf to keep all of the configuration.
Functions needing access to any of those vars get it passed as a parameter.
result: even less global vars.
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 04:04:27

Modified files:
	usr.sbin/traceroute: traceroute.c traceroute.h worker.c 

Log message:
check_tos() gets a parameter so i can remove another global var.
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 04:06:12

Modified files:
	usr.sbin/tcpdump: pfctl_osfp.c 

Log message:
Reduce differences between the two pfctl_osfp.c files.

Apply three commits from pfctl/pfctl_osfp.c

OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 04:06:13

Modified files:
	usr.sbin/traceroute: traceroute.c traceroute.h 

Log message:
style(9) some variable declarations
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 04:12:42

Modified files:
	etc/rc.d       : rc.subr 

Log message:
Indent and rename var; no functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 04:37:26

Modified files:
	usr.sbin/httpd : config.c httpd.c httpd.h proc.c 

Log message:
use __func__ in log messages.
From Hiltjo Posthuma hiltjo -AT codemadness -DOT- org, thanks!
ok florian, claudio


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 04:39:15

Modified files:
	usr.sbin/relayd: agentx.c ca.c check_icmp.c check_script.c 
	                 check_tcp.c hce.c pfe.c pfe_filter.c 
	                 pfe_route.c proc.c relay.c relay_http.c 
	                 relay_udp.c relayd.c snmp.c ssl.c 

Log message:
use __func__ in log messages. fix some whitespace while here.
From Hiltjo Posthuma hiltjo -AT codemadness -DOT- org, thanks!
ok florian, claudio


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 04:49:14

Modified files:
	net/py-paho-mqtt: Makefile distinfo 
	net/py-paho-mqtt/pkg: PLIST 

Log message:
update to py-paho-mqtt-1.2.3


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/28 05:03:48

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Fix some spurious fatal firmware errors in iwm(4).

If we are not in SCAN state anymore by the time hardware signals completion
of a scan command, exit the scan completion handler immediately instead of
calling ieee80211_end_scan().

Tested by tb@ and myself.
ok mpi@ tb@ zhuk@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/28 05:17:33

Modified files:
	usr.sbin/smtpd : smtpd.conf.5 

Log message:
reinstate the description of "mask-source" to "listen on socket": my changes
two revisions previous inadvertently removed it;

ok gilles


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 05:41:52

Modified files:
	sys/ddb        : db_ctf.c db_elf.c db_elf.h 

Log message:
Merge two functions to lookup ELF sections by name.

ok claudio@, jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 05:49:39

Modified files:
	sysutils/amazon-ssm-agent: Makefile 
	sysutils/amazon-ssm-agent/patches: patch-makefile 

Log message:
Add support for i386.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 05:52:06

Modified files:
	graphics/ffmpeg: Makefile 

Log message:
stupid typo


CVSROOT:	/cvs
Module name:	ports
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 05:53:52

Modified files:
	net/bitlbee    : Makefile 
	net/bitlbee/pkg: PLIST 

Log message:
Add an install-dev step, this is required by bitlbee-facebook.

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 05:59:36

Log message:
    Import net/bitlbee-facebook
    
    The Facebook protocol plugin for bitlbee. This plugin uses the Facebook
    Mobile API.
    
    OK sthen@
    
    Status:
    
    Vendor Tag:	akfaew
    Release Tags:	akfaew_20170528
    
    N ports/net/bitlbee-facebook/distinfo
    N ports/net/bitlbee-facebook/Makefile
    N ports/net/bitlbee-facebook/pkg/PLIST
    N ports/net/bitlbee-facebook/pkg/DESCR
    N ports/net/bitlbee-facebook/pkg/README
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/28 05:59:52

Modified files:
	graphics/ffmpeg: Makefile 

Log message:
Bump, to be on a safe side after fixing resulting plist.

okay espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 06:03:02

Modified files:
	net            : Makefile 

Log message:
Add bitlbee-facebook


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/28 06:12:39

Modified files:
	audio/openal   : Makefile 

Log message:
Leaving clang and/or gcc4 in modules could have fun effects after
switching to WANT_CXX. Zap 'em and unbreak openal.

reported by naddy@, okay espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 06:13:06

Modified files:
	www/epiphany   : Makefile 

Log message:
unbreak


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/28 06:13:22

Modified files:
	audio/openal   : Makefile 

Log message:
... and bump for safety as well.


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/28 06:21:36

Modified files:
	usr.sbin/bgpd  : bgpd.h control.c rde.c rde.h rde_rib.c 
	                 session.c session.h 

Log message:
Implement an XON/XOFF protocol between the RDE and the SE to throttle
per control session and peer the generation of imsg in the RDE. This
reduces the memory pressure in the SE substantially and also a bit in
the RDE. Makes the RDE more responsive for bgpctl commands.
Tested by me with 100 peers * 2000 prefixes and by phessler@ on an AMS-IX
border router with 200+ session. Convergance time got quite a bit better.
OK phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/28 06:22:54

Modified files:
	sys/netinet    : ip_input.c 

Log message:
clang warns on unused labels.  Place a recently introduced label under
ifdef IPSEC to fix the clang build when IPSEC is not defined.

ok deraadt@ bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/28 06:37:10

Modified files:
	sysutils/facter: Makefile 

Log message:
We have wrappers for ccache+egcc cases for a while, drop unneded lines.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 06:47:24

Modified files:
	sys/net        : if.c 
	sys/netinet    : ip_carp.c 

Log message:
Leaving IP multicast group requires the NET_LOCK().

Grab the lock before calling carpdetach().

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/28 06:51:34

Modified files:
	sys/net        : if.c if_ethersubr.c if_pppx.c netisr.h pipex.c 
	                 pipex_local.h 

Log message:
Remove all splnet/splx from pipex(4) and pppx(4) and replace some of
them by NET_LOCK/NET_UNLOCK.  Also make the timeout for pipex_timer
run with a thread context and replace pipex softintr by NETISR_PIPEX.

ok mpi


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 06:53:02

Modified files:
	sysutils/gitolite: Makefile 

Log message:
update HOMEPAGE


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/28 07:20:37

Modified files:
	sys/arch/i386/conf: Makefile.i386 

Log message:
Build i386 kernels with -ffreestanding, matching amd64 and various
other platforms.

ok visa@ kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 07:23:50

Modified files:
	textproc/py-vobject: Makefile distinfo 
	textproc/py-vobject/pkg: DESCR PLIST 

Log message:
- update to py-vobject-0.9.4.1
- sync DESCR


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 07:48:23

Modified files:
	textproc/py-vobject: Makefile 

Log message:
re-instate PKGNAME that got lost half an hour ago


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 07:52:31

Modified files:
	textproc/py-vobject: Makefile 
	textproc/py-vobject/pkg: PLIST 

Log message:
add python3 flavor


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 07:53:12

Modified files:
	textproc       : Makefile 

Log message:
+py-vobject,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/28 07:59:05

Modified files:
	sys/netinet    : ip_ipip.c 

Log message:
Call bpf_mtap_af() a bit earlier in ipip_input().  This prepares
upcoming diffs, no functional change.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 08:16:12

Modified files:
	net/bitlbee-facebook: Makefile 
	net/bitlbee-facebook/pkg: DESCR PLIST 
Removed files:
	net/bitlbee-facebook/pkg: README 

Log message:
Move bitlbee wiki URL from README to DESCR.
@comment libtool la file.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 08:24:19

Modified files:
	sys/ddb        : db_ctf.c 
	sys/arch/amd64/amd64: db_trace.c 
	sys/arch/i386/i386: db_trace.c 

Log message:
If a function is not found in the CTF data, do not assume it takes no
argument.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 08:26:38

Modified files:
	sys/net        : if_trunk.c 

Log message:
trunk_port_destroy() needs the NET_LOCK().

It brings the interface down and restore the original lladdr.

Found by Hrvoje Popovski


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/28 08:37:48

Modified files:
	sbin/dhclient  : dispatch.c 

Log message:
Elegant and reliable link status checking courtesy of mpi@.

Less of unreliable ioctl(SIOCGIFMEDIA), more getifaddrs().

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/28 08:54:00

Modified files:
	sys/net        : pf.c 

Log message:
Pf was handling IPv4 and IPv6 differently regarding AH extension
headers.  pf_walk_header6() steps over it and detects the real
protocol.  So to implement a minimal header walking function
pf_walk_header() for IPv4.  It does the header checks and jumps
over AH.  Then pf does not understand AH as a protocol, it is just
an extension that authenticates the packet.  Move some header and
option checks to pf_walk_header() for consistency with IPv6.  This
also improves the header check for IPv4 packets in ICMP payload.
OK henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/28 09:03:53

Modified files:
	sys/net        : if_trunk.c 

Log message:
Add missing NET_UNLOCK() in error path.

Spotted by sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/28 09:15:21

Modified files:
	sbin/pfctl     : parse.y 

Log message:
Don't check np->port for NULL - it's an array, it's never NULL.

OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/28 09:16:08

Modified files:
	sys/arch/mips64/mips64: ipifuncs.c 

Log message:
mips64_multicast_ipi() excludes current CPU.
The caller does not have to do that.


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/28 09:16:33

Modified files:
	usr.sbin/bgpd  : bgpd.c bgpd.h config.c kroute.c parse.y 

Log message:
so far, bgpd was hardcoded to use rtable 0 for nexthop verification.
instead, use the rtable bgpd was started in (route -T <n> exec / rc.d
daemon_rtable) for nexthop verification and as default Adj-RIB-In and
Loc-RIB. This allows multiple bgpds in different rdomains on the same
machine - bgp router virtualization if you like buzzwords.
initial version written under contract more than a year ago, it took us
a while to wrap our brains around the bgpd <-> rdomain interactions -
1) RIBs, 2) nexthop verification and 3) tcp sockets.
ok & input phessler claudio benno


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/28 09:16:52

Modified files:
	usr.sbin/bgpd  : bgpd.conf.5 

Log message:
we're not hardcoded to table 0 any more


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/05/28 09:36:45

Modified files:
	sys/dev/acpi   : dsdt.c 

Log message:
Remove a redundant assignment introduced in revision 1.219 but favor the
assignment outside of the conditional.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/28 09:46:06

Modified files:
	sys/arch/mips64/mips64: ipifuncs.c 

Log message:
Use fast path if remote call is not needed.

Note that rendezvous calls are no longer necessarily
serialized systemwide.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 09:46:12

Modified files:
	mail/cyrus-imapd: Makefile distinfo 
	mail/cyrus-imapd/files: imapd.conf 
	mail/cyrus-imapd/patches: patch-Makefile_in patch-configure 
	                          patch-imap_mbexamine_c 
	                          patch-imap_tls_c 
	mail/cyrus-imapd/pkg: DESCR PLIST cyrus_imapd.rc 
Added files:
	mail/cyrus-imapd/patches: 
	                          patch-doc_examples_cyrus_conf_normal_conf 
	                          patch-doc_legacy_install-upgrade_html 
	                          patch-imap_fud_c patch-lib_imapoptions 
	                          patch-man_imapd_conf_5 
	                          patch-tools_masssievec 
	                          patch-tools_rehash 
	                          patch-tools_translatesieve 
	                          patch-tools_upgradesieve 
Removed files:
	mail/cyrus-imapd/patches: patch-lib_util_h 
	                          patch-master_conf_normal_conf 

Log message:
Major update to cyrus-imapd-3.0.1.
- cleanup and fix some ports specific stuff while here

Refer to upstream for changes and upgrade notes.
Note that altnamespace and unixhierarchysep are now on by default on, to match
the behaviour of most other IMAP servers in the world.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 09:48:36

Modified files:
	mail/cyrus-imapd: Makefile 

Log message:
Indent.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/28 09:48:49

Modified files:
	usr.sbin/ldapd : syntax.c 

Log message:
Fix checks for seconds and timezones in generalized times.
Fixing the CHECK_RANGE macro in r1.4 revealed that the seconds check
accidentally relied on the macro being broken.  While looking into this I
noticed that the timezone check was also wrong, treating the timezone as
optional for generalized times.

investigation and diff mostly by Seiya Kawashima.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/28 09:54:08

Modified files:
	graphics/digikam-kde4: Makefile 
	x11/kde-applications/libkface: Makefile 

Log message:
zap opencv XXX tag

After the last opencv update the XXX tag is not more necessary.

ok jca@, "go for it" zhuk@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/28 09:58:02

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
No need to constantly re-add the default route. It will not expire
like the prefixes.  We might want to check if someone deleted the
route by hand though.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 10:18:23

Modified files:
	x11/gnome/recipes: Makefile 

Log message:
unbreak for gcc4/clang, even if we change it later


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 10:20:08

Modified files:
	editors/calligra: Makefile 

Log message:
fix for clang, short circuit bogus libpqxx header auto-detection


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 10:23:28

Modified files:
	lang/scheme48  : Makefile distinfo 
	lang/scheme48/patches: patch-Makefile_in 

Log message:
update to newer version, bug-fixes clang, actually.

okay maintainer


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/28 10:36:53

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
get a new privacy address before the old one expires


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/28 10:43:45

Modified files:
	sys/net        : pf.c pfvar.h 

Log message:
Fix bad white spaces, wrap long lines, kill some empty lines.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/28 10:52:27

Modified files:
	usr.sbin/bgpd  : bgpd.conf.5 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/28 10:55:54

Modified files:
	sys/net        : pf.c 

Log message:
Limit the nested header chain for IPv6 extensions headers and for
authentication headers in the IPv4 case.  This prevents spending
excessive cpu time on crafted packets.
OK henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/28 10:57:01

Modified files:
	usr.bin/cvs    : logmsg.c 

Log message:
Bring the opencvs log message template inline with other cvs implementations.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/28 10:58:54

Modified files:
	usr.bin/cvs    : status.c 

Log message:
Teach opencvs status to display the sticky tag according to what it really
represents if it is a branch or a revision.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/28 11:01:10

Modified files:
	usr.bin/cvs    : commit.c 

Log message:
Don't allow opencvs to commit towards tags that are not branches.

Gets rid of the old logic that wasn't working and replaced it with
a simplified version.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/28 11:11:34

Modified files:
	usr.bin/cvs    : cvs.h file.c import.c 

Log message:
Let opencvs show ignored files on import, not showing them is just confusing.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/28 11:12:48

Modified files:
	sys/arch/mips64/mips64: ipifuncs.c 

Log message:
Do not allow NULL callback at rendezvous and clear callback
pointer at the end to catch errors faster.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/28 11:20:11

Modified files:
	x11/gnome/recipes: Makefile 

Log message:
switch to clang by default; tested with base and ports clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/05/28 12:16:24

Modified files:
	devel/apktool  : Makefile distinfo 

Log message:
update apktool to 2.2.2.
ok benoit@.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 12:31:35

Modified files:
	share/misc     : inter.phone 

Log message:
convert to UTF-8


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 12:35:58

Modified files:
	share/misc     : airport 

Log message:
add HWD - Hayward Executive Airport. After extensive discussion, the
decision was made that a missed approach at the DH counts as "being at
the airport"

ok phessler, deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/28 12:42:00

Modified files:
	sys/net        : pipex.c 

Log message:
Use interface index instead of ifnet pointer.


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/28 12:43:51

Modified files:
	sys/net        : if_pppx.c pipex_local.h 

Log message:
Use interface index and if_{put,get} instead of ifnet pointer.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 12:49:43

Modified files:
	audio/cantata  : Makefile 
	devel/spidermonkey38: Makefile 
	devel/vte3     : Makefile 
	games/dhewm3   : Makefile 
	games/extremetuxracer: Makefile 
	graphics/cfdg  : Makefile 

Log message:
c c++ is default for WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 12:51:27

Modified files:
	etc/rc.d       : rc.subr 

Log message:
Move check later to mitigate a possible race.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 12:55:04

Modified files:
	graphics/maim  : Makefile 
	graphics/nomacs: Makefile 
	graphics/pdf2djvu: Makefile 
	graphics/slop  : Makefile 
	graphics/vigra : Makefile 

Log message:
more WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/28 12:55:25

Modified files:
	sys/net        : pipex.c 

Log message:
Check also whether the interfaces is matched when pipex check PPPoE
packets.  This fixes the problem when pipex connects with pppoe(4)
through pair(4).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 12:56:30

Modified files:
	textproc/the_silver_searcher: Makefile 

Log message:
WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 12:57:40

Modified files:
	share/misc     : airport 

Log message:
The High Council of Deciders has determined that railway stations, even
those with IATA codes, are not airports and therefore do not qualify for
inclusion in this file.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 12:58:11

Modified files:
	x11/gnome/builder: Makefile 
	x11/gnome/documents: Makefile 
	x11/gnome/gjs  : Makefile 

Log message:
a bit more WANT_CXX tidy


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/28 13:00:52

Modified files:
	usr.bin/tmux   : cmd-refresh-client.c 

Log message:
Also recalculate session sizes when refreh-client -C is used. GitHub
issue 947.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/28 13:13:13

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
pasto, typos, spelling; ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 13:15:18

Modified files:
	share/misc     : airport 

Log message:
typo


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 13:26:33

Added files:
	share/man/man7 : airport.7 

Log message:
document /usr/share/misc/airport contents and rules, after lengthy
hackroom discussion about train stations.
ok mlarkin, feedback deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/28 13:29:27

Modified files:
	graphics/hugin : Makefile 
	graphics/enblend-enfuse: Makefile 

Log message:
more WANT_CXX


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 13:42:26

Modified files:
	share/misc     : Makefile 
Removed files:
	share/misc     : operator 

Log message:
please read operator(7) for this information.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/28 13:44:52

Modified files:
	share/man/man7 : Makefile 

Log message:
install new manpage, noted by tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/28 13:46:55

Modified files:
	usr.bin/tmux   : cmd-new-session.c 

Log message:
Change so that sessions created detached (-d or no client) are always
80x24 and the status line is not applied until they attach. Also make -x
and -y work for control clients whether the session is detached or not.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/28 13:57:38

Modified files:
	usr.sbin/slaacd: engine.c engine.h slaacd.c 

Log message:
set autoconfprivacy flag; prodding naddy


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/05/28 14:03:16

Modified files:
	www/nextcloud  : Makefile distinfo 
	www/nextcloud/patches: 
	                       patch-apps_updatenotification_appinfo_info_xml 
	                       patch-version_php 
	www/nextcloud/pkg: PLIST 

Log message:
Upgrade for Nextcloud to 12.0.0:

https://nextcloud.com/changelog/

OK kirby@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/28 14:10:59

Modified files:
	usr.sbin/bgpd  : rde.c session.c 

Log message:
Close imsg pipes later in the process. The shutdown code still tires to
send imsgs and so the SE and RDE crashed because of this late in shutdown.
OK benno@ phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/28 14:12:51

Modified files:
	security/clamav: Makefile 
	security/clamav/pkg: clamd.rc 

Log message:
set daemon_timeout for clamd; startup can be rather slow if you have large
rulesets (for example the sanesecurity anti-spam/malware rules often used
on mail servers)


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/28 14:14:15

Modified files:
	usr.sbin/bgpd  : bgpd.h logmsg.c 

Log message:
Introduce log_peer_info() and make log_peer_warn() log at LOG_ERR instead
of LOG_CRIT (which should only be used for fatal).
OK benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/28 14:15:02

Modified files:
	usr.sbin/bgpd  : rde.c 

Log message:
Print when we send or recv an EOR marker.
Req by and OK benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 14:20:00

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
typo in comment


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 14:34:33

Modified files:
	games/robots   : score.c 

Log message:
high scores printed too far to the right, move it left a little


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/28 14:40:13

Modified files:
	usr.sbin/slaacd: engine.c slaacd.c 

Log message:
removed if 0'ed code; it gets in the way of grepping for things


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/28 14:48:29

Modified files:
	sys/net        : pipex.c 

Log message:
Process packets immediately without queuing since pipex is believed MP safe
already, for PPPoE case as first step.

ok mpi


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 15:01:13

Modified files:
	games/robots   : main.c 

Log message:
if your dying scream would escape the death field, realign to stay within


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/28 15:05:54

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
only mark privacy addresses as such instead of all configured addresses
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 15:09:24

Modified files:
	games/robots   : robots.6 

Log message:
there are no bugs; i fixed them


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 15:13:39

Modified files:
	games/robots   : rnd_pos.c 

Log message:
remove unused macro


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/05/28 15:18:21

Modified files:
	share/misc     : airport 

Log message:
Add ZIA, even given that I didn't visit it after it actually became ZIA
instead of Ramenskoe Airfield.

approved by deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/28 15:21:00

Modified files:
	share/misc     : airport 

Log message:
Add BND, I've been there many times.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/28 15:23:47

Modified files:
	regress/sys/netinet/ipsec: Makefile 

Log message:
Now that pf looks behind IPv4 authentication headers, disable the
transport mode tests that fail because of floating states.  At least
IPv4 and IPv6 are in sync now.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 15:57:19

Modified files:
	sys/net        : pipex_local.h 

Log message:
fix broken include on previous pipex commit

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 15:59:56

Modified files:
	usr.bin/signify: Makefile 
	distrib/special/signify: Makefile 
Removed files:
	usr.bin/signify: smult_curve25519_ref.c 

Log message:
when copying curvy files from ssh, an extra one snuck in.
signify doesn't do any kex stuff and doesn't need scalarmult.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/28 16:27:10

Modified files:
	games/robots   : robots.6 

Log message:
remove some escapes that are unnecessary/harmful. ok jmc schwarze


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/28 17:23:40

Modified files:
	usr.bin/tmux   : input.c 

Log message:
Support OSC 10 and 11 to set foreground and background colours, from
"bertnp" in GitHub issue 942.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 17:50:20

Modified files:
	sys/arch/amd64/include: vmmvar.h 

Log message:
rename some fields


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 17:56:13

Modified files:
	usr.sbin/vmd   : vm.c 

Log message:
SVM: add some exit types

Also, fix a comment that wasn't applicable anymore, and change a format
from decimal to hex


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/28 18:05:28

Modified files:
	share/misc     : airport 

Log message:
mlarkin and airport.7 say "must have been there", not "flown there".
Add XFW, Hamburg-Finkenwerder (the Airbus factory)
ok mlarkin fcambus


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/28 18:41:11

ports/devel/cpp-hocon/patches

Update of /cvs/ports/devel/cpp-hocon/patches
In directory cvs.openbsd.org:/tmp/cvs-serv26582/devel/cpp-hocon/patches

Log Message:
Directory /cvs/ports/devel/cpp-hocon/patches added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/28 22:40:35

Modified files:
	libexec/getty  : main.c 

Log message:
do not need dev[] wasting bss space


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/28 23:59:45

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
vmm(4): Enable support for AMD-V (SVM) CPUs.

Tested on the following CPUs:

AMD C-60 APU
AMD GX-412TC SOC (PCEngines APU2C4)
AMD Opteron(tm) Processor 6128

... and various others via bochs/simulators, on a variety of different
guest VM types. Also verified no regressions on my x230 Intel machine
since this diff slightly changes CPUID behaviour WRT cache information.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 00:06:52

Modified files:
	sys/arch/m88k/m88k: subr.S 

Log message:
copyin32 implementation from miod@

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 00:08:21

Modified files:
	sys/net        : if.c 

Log message:
Do not try to grab the NET_LOCK() while holding an ifp reference.

Fix a deadlock with a thread trying to detach the corresponding interface.

ok sashan@, bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 00:14:10

Modified files:
	sys/ddb        : db_ctf.c db_extern.h db_sym.h 
	sys/arch/amd64/amd64: db_trace.c 
	sys/arch/i386/i386: db_trace.c 

Log message:
Pass the symbol instead of its name when looking for CTF infos.

ok jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 00:44:54

Modified files:
	sys/net        : if_vlan.c 

Log message:
Pass SIOCGIFMEDIA to vlan's parent interface.

ok krw@, dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/29 01:15:23

Modified files:
	usr.sbin/vmd   : vmd.c 

Log message:
vmd(8): prevent crashing when presented with a vm name argument to
"vmctl stop" that doesn't exist.

Diff from Pratik Vyas, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 01:46:32

Modified files:
	usr.bin/tmux   : tmux.1 

Log message:
Tweak text to mention initial size, from John Hood.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/29 01:47:13

Modified files:
	sys/scsi       : cd.c scsi_base.c scsiconf.h sd.c st.c 

Log message:
To prevent anyone else from stumbling on this (now) archaic bit of
history, nuke all mentions of XS_NO_CCB and the #define.

2006 - 2017. R.I.P.

ok kettenis@ inferred ok dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/29 01:49:27

Modified files:
	usr.sbin/bgpd  : parse.y 

Log message:
remove the file permission check for bgpd.conf

OK deraadt@, henning@, sthen@, and everyone who has ever been annoyed


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 01:54:46

Modified files:
	usr.sbin/slaacd: engine.c frontend.c 

Log message:
only send router solicitation on RTM_NEWADDR if the l2 address changed


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 01:58:33

Modified files:
	usr.bin/tmux   : window-copy.c 

Log message:
Do not factor in screen_hsize() for the visible copy mode screen when
adjusting the selection, it should never have any useful history (and
when it does, after resize, we shouldn't use it). From Michal Mazurek.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 02:15:39

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
Compare the l2 address from which the slaac address was formed with
the current interface l2 address. Only update the address lifetime if
they are the same. This way we get a new address on ifconfig lladdr
random.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/29 02:28:02

Modified files:
	x11/polkit-qt  : Makefile 

Log message:
somehow, my previous builds if polkit-qt,qt5 always managed to find a
libestdc++ on the machine.  I guess that I've now removed enough gcc
that this becomes obviously wrong. fix for clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/29 02:35:08

Modified files:
	www/p5-HTML-Tidy: Makefile distinfo 

Log message:
Update to p5-HTML-Tidy-1.58.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 02:59:42

Modified files:
	usr.sbin/slaacd: engine.c frontend.c slaacd.c 

Log message:
clang points out that the first argument to setproctitle is a format
string. Not really an issue since we are eventually passing in a
string literal...
While here don't set the proctitle for the main process to play nicer
with rc.d(8)


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/29 03:37:33

Modified files:
	distrib/sets/lists/base: mi 
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/29 03:40:02

Modified files:
	lib/libc/compat-43: sigblock.3 sigsetmask.3 sigvec.3 
	lib/libc/gen   : Makefile.inc posix_spawnattr_getpgroup.3 
	lib/libc/sys   : sigaction.2 sigpending.2 sigprocmask.2 
	                 sigsuspend.2 
	lib/libpthread/man: pthread_sigmask.3 
Added files:
	lib/libc/gen   : sigaddset.3 
Removed files:
	lib/libc/gen   : sigsetops.3 

Log message:
It is distasteful to have manual pages which don't refer to real
function calls, but instead a "class" of functions like "sigsetops".
Rename to sigaddset", and while at it improve documentation in sigprocmask(2)
to point to it.
ok tedu


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/29 03:40:14

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/29 03:44:01

Modified files:
	etc            : rc 
	lib/libcrypto  : Makefile 

Log message:
Randomize link-order of libcrypto as we do with libc.  This library
has many small functions without significant local storage, therefore
less tail protection from -fstack-protector-strong to prevent their use
as ROP gadgets.  It is used in security contexts.  Also many functions
dribble pointers onto the stack, allowing discovery of gadgets via the
fixed relative addresses, so let's randomly bias those.
ok tedu jsing

The rc script will soon need a strategy for skipping this step on
machines with poor IO performance.  Or maybe do it less often?  However,
I don't see many more libraries we'll do this with, these are the two
most important ones.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/29 03:56:33

Modified files:
	usr.sbin/bgpctl: bgpctl.8 bgpctl.c 
	usr.sbin/bgpd  : bgpd.conf.5 config.c 

Log message:
change bgpd's control socket from /var/run/bgpd.sock to
/var/run/bgpd.sock.<rdomain> in both bgpd and bgpctl. makes life
easier for admins.
ok phessler, claudio, henning, feedback from Job Snijders


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 04:24:06

Modified files:
	etc            : Makefile rc rc.conf 
Added files:
	etc/rc.d       : slaacd 

Log message:
rc.d(8) for slaacd
OK phessler, deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/29 04:55:34

Modified files:
	sys/conf       : files 
	sys/net        : pfkeyv2.c pfkeyv2.h 
Removed files:
	sys/net        : pfkey.c 

Log message:
PFKEY version 2 is the only pfkey version supported. No need for extra
abstraction. First step of making PF_KEY a bit more like PF_ROUTE.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 04:56:46

src/regress/sys/fileops

Update of /cvs/src/regress/sys/fileops
In directory cvs.openbsd.org:/tmp/cvs-serv49186/regress/sys/fileops

Log Message:
Directory /cvs/src/regress/sys/fileops added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 04:57:08

src/regress/sys/fileops/ffs

Update of /cvs/src/regress/sys/fileops/ffs
In directory cvs.openbsd.org:/tmp/cvs-serv44546/regress/sys/fileops/ffs

Log Message:
Directory /cvs/src/regress/sys/fileops/ffs added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 04:57:09

src/regress/sys/fileops/msdos16

Update of /cvs/src/regress/sys/fileops/msdos16
In directory cvs.openbsd.org:/tmp/cvs-serv44546/regress/sys/fileops/msdos16

Log Message:
Directory /cvs/src/regress/sys/fileops/msdos16 added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 04:57:09

src/regress/sys/fileops/msdos32

Update of /cvs/src/regress/sys/fileops/msdos32
In directory cvs.openbsd.org:/tmp/cvs-serv44546/regress/sys/fileops/msdos32

Log Message:
Directory /cvs/src/regress/sys/fileops/msdos32 added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 05:00:04

Modified files:
	regress/sys    : Makefile 

Log message:
Regress test for sparse files & mmap with different FSs

This test creates a file with a hole in the middle and then checks that
when reading or mmaping the whole file, the data is correct.

This catches the bug introduced by the
"Implement VFS read clustering for MSDOSFS" commit that hat to be
reverted.

For now, we run the test with FAT16, FAT32, FFS

With much advice from bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 05:01:16

Added files:
	regress/sys/fileops: Makefile Makefile.inc fileops.c 
	regress/sys/fileops/ffs: Makefile 
	regress/sys/fileops/msdos16: Makefile 
	regress/sys/fileops/msdos32: Makefile 

Log message:
Regress test for sparse files & mmap with different FSs

This test creates a file with a hole in the middle and then checks that
when reading or mmaping the whole file, the data is correct.

This catches the bug introduced by the
"Implement VFS read clustering for MSDOSFS" commit that hat to be
reverted.

For now, we run the test with FAT16, FAT32, FFS

With much advice from bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	anton@cvs.openbsd.org	2017/05/29 05:03:50

Modified files:
	textproc/lowdown: Makefile distinfo 

Log message:
Update to lowdown-0.1.11.

While here, update my own email.

ok fcambus@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/29 05:10:29

Modified files:
	lib/libc/compat-43: sigblock.3 sigsetmask.3 sigvec.3 

Log message:
sort SEE ALSO;


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/29 05:13:09

Modified files:
	lib/libc/sys   : sigaction.2 

Log message:
sort SEE ALSO;


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/29 05:46:49

Modified files:
	sys/arch/mips64/mips64: mips64_machdep.c 

Log message:
Invalidate OCTEON icache after TLB ASID wraparound, otherwise userspace
might execute stale instructions. The cache is virtually tagged and does
not seem to pick up TLB alterations automatically.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/29 05:56:33

Added files:
	mail/cyrus-imapd/patches: patch-imap_sync_support_c 

Log message:
Unbreak if libical is found at configure time since we're not bulding
http support.
breakage reported by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 05:59:32

Modified files:
	regress/sys    : Makefile 

Log message:
Re-add line continuation \ that went missing in the previous commit


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 06:10:51

Removed files:
	sys/sys        : scanio.h 

Log message:
scanner support died some time ago, the header can be removed too.
a gift from miod


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/29 06:11:07

Modified files:
	net/bitlbee    : Makefile 
	net/bitlbee/pkg: PLIST README 
Added files:
	net/bitlbee/pkg: bitlbee.rc 

Log message:
add an rc script for bitlbee, ok Tom Doherty (maintainer), ajacoutot@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 06:12:35

Modified files:
	sys/sys        : systm.h 

Log message:
clang has builtin_memmove. ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/29 06:13:05

Modified files:
	games/residualvm: Makefile 

Log message:
Switch to a newer compiler (via WANT_CXX), GCC 4.2.1 miscompiles on some arch.
From Donovan Watteau, looks good to juanfra@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/29 06:13:43

Modified files:
	games/scummvm  : Makefile 
Added files:
	games/scummvm/patches: patch-engines_mads_palette_cpp 

Log message:
Switch to a newer compiler (via WANT_CXX), GCC 4.2.1 miscompiles on some arch.
Add upstream patch to fix off-by-ones. From Donovan Watteau, looks good to
juanfra@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 06:13:50

Modified files:
	share/man/man7 : Makefile hostname.7 intro.7 
Removed files:
	share/man/man7 : mailaddr.7 

Log message:
remove mailaddr.7 and its many lies.
ok gilles jmc mpi


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 06:15:39

Modified files:
	usr.bin/mail   : mail.1 

Log message:
remove mention of Berknet and mailaddr.7


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 06:16:50

Modified files:
	usr.sbin/smtpd : aliases.5 

Log message:
rm xr mailaddr.7


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/29 06:28:54

Modified files:
	usr.sbin/pkg_add/OpenBSD: FwUpdate.pm PackageLocator.pm 
	                          PackageRepositoryList.pm State.pm 

Log message:
Refactor locator code so it's a proper object.
allow  fw_update to short-circuit entirely, thus the specific
treatment of paths is actually less of a special case,
and the code that reaches into /etc/installurl is no longer used
at all in that case.

problem noticed by mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/29 06:41:57

Modified files:
	usr.sbin/bgpctl: bgpctl.8 

Log message:
avoid Xr to self;


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/29 06:48:11

Modified files:
	usr.sbin/bgpd  : rde.c 

Log message:
Fix crash in IMSG_CTL_SHOW_RIB_PREFIX handling. The ctx is not added to
the list in that case so don't try to LIST_REMOVE it.
Problem found by benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/29 06:50:33

Modified files:
	usr.bin/mail   : mail.1 

Log message:
tweak previous to read a little better;


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 06:51:56

Modified files:
	usr.sbin       : Makefile 

Log message:
hook up slaacd and slaacctl.
OK naddy, deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/29 06:54:05

Modified files:
	usr.sbin/pkg_add/OpenBSD: PackageRepository.pm 

Log message:
do not whine if installpath is undef.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/29 06:56:26

Modified files:
	usr.sbin/snmpd : proc.c 
	usr.sbin/switchd: proc.c 
	usr.sbin/vmd   : proc.c 

Log message:
sync proc.c changes from relayd/httpd


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/29 06:58:37

Modified files:
	sys/conf       : files 
	sys/arch/amd64/amd64: hibernate_machdep.c 
	sys/dev/ic     : nvmevar.h nvme.c 

Log message:
Add hibernate support for nvme(4).  This creates a separate IO queue that is
only active during hibernation, preallocating the the submission and completion
queues during attach as they need to be page-aligned.

tested on an x270 that successfully hibernates now.
ok dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/29 07:09:17

Modified files:
	bin/ksh        : alloc.c history.c 

Log message:
Change the mmap(2)-based binary history file with lots of magic and a
tendency for corruption to a simpler plaintext version.

To convert your current ksh history to plaintext, issue

fc -ln 1 | sed 's/^	//' > ~/ksh_hist.txt

before upgrading and use ksh_hist.txt as HISTFILE after the upgrade.

Original patch by marco in 2011. Ported to current during g2k16 by me.
Testing, bugfixes and improvements in joint work with natano.

Additional testing by anton and mestre. Includes some tweaks by anton.
Committing now to shake out remaining bugs before 6.2 is cut.

ok deraadt, mestre, anton, sthen


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/29 07:10:02

Modified files:
	faq            : current.html 

Log message:
add instructions for migrating to the plaintext ksh history file


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/29 07:10:40

Modified files:
	usr.sbin/bgpd  : rde.c 

Log message:
After some consideration, revert last commit and don't abuse rde_dump_done.
IMSG_CTL_SHOW_RIB_PREFIX case is not using rib_dump_r and so should not use
rde_dump_done, instead send the IMSG_CTL_END msg and free the ctx directly.
This is easier to understand.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/29 07:28:59

Modified files:
	lang/mono      : Makefile 

Log message:
Mono clearly violates W^X, so mark it as such.

Allows it to be built on amd64 at least.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 07:30:35

Modified files:
	usr.bin/kdump  : Makefile mkioctls 

Log message:
zap scanio.h, found by deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 07:48:12

Modified files:
	sys/msdosfs    : denode.h msdosfs_vnops.c 

Log message:
Implement VFS read clustering for MSDOSFS

This is the reverted commit by mpi@ from msdosfs_vnops.c 1.105 plus some
additional tweaks to fix some cluster/block number confusion that lead
to regressions when seeking past the end of a file.

The original commit message was:

The logic used in msdosfs_bmap() to loop calling pcbmap() comes from
FreeBSD and is not really efficient but it is good enough since it is
only called when generating I/O.

With this diff I get a 100% improvement when reading big files from a
crappy USB stick.

With this and bread_cluster(9) modified to not re-fetch B_CACHED buffers,
reading large contiguous files with chunk sizes of MAXPHYS is almost as
fast as physio(9) on the same device.

For a 'real world' example, when copying music files from a USB stick I
see a speed jump from 15MB/s on -current to 24Mb/s with this diff.

While here rename some 'lbn' variables into 'cn' to better reflect what
we're dealing with.

Tested by Mathieu, with support from deraadt@

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/29 07:49:40

Modified files:
	regress/sys/fileops: Makefile.inc fileops.c 

Log message:
Minor regress test cleanup.
OK sf@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/29 08:03:46

Modified files:
	sys/arch/mips64/mips64: pmap.c 

Log message:
Reduce code duplication. The local-CPU-only case is now handled
without a lock in smp_rendezvous_cpus().


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 08:05:31

Modified files:
	sys/dev/ata    : wd.c 
	sys/scsi       : sd.c 
	sys/sys        : dkio.h 

Log message:
Add an ioctl to tell storage devices to flush their internal caches

Currently implemented for wd and sd.
Initially ported from netbsd by pedro@

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 08:07:16

Modified files:
	sys/msdosfs    : msdosfs_vfsops.c 
	sys/ufs/ffs    : ffs_vfsops.c 

Log message:
msdosfs & ffs: flush cache if updating mount from r/w to r/o

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/29 08:08:49

Modified files:
	sys/scsi       : sd.c 

Log message:
sd: flush cache when closing writable FD

Don't skip the cache flush until the last opening of the device is
closed. Otherwise, when umounting a writable partition while a different
partition is still mounted read-only, the necessary disk flush may be
delayed for a very long time.

ok krw@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 08:18:32

Modified files:
	sys/net        : pf.c 

Log message:
export_pflow() is no longer grabbing the NET_LOCK(), so no need to
release it beforehand.

ok henning@, benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 08:19:50

Modified files:
	sys/arch/alpha/alpha: lock_machdep.c machdep.c mutex.c 
	sys/arch/alpha/include: cpu.h lock.h 
	sys/arch/amd64/amd64: fpu.c lapic.c lock_machdep.c pmap.c 
	sys/arch/amd64/include: lock.h 
	sys/arch/hppa/hppa: lock_machdep.c 
	sys/arch/i386/i386: lock_machdep.c pmap.c 
	sys/arch/i386/include: lock.h 
	sys/arch/i386/isa: npx.c 
	sys/arch/luna88k/luna88k: machdep.c 
	sys/arch/m88k/m88k: m8820x_machdep.c m88k_machdep.c mplock.c 
	sys/arch/mips64/mips64: lock_machdep.c 
	sys/arch/powerpc/include: lock.h 
	sys/arch/powerpc/powerpc: lock_machdep.c mutex.c 
	sys/arch/sparc64/include: cpu.h lock.h 
	sys/arch/sparc64/sparc64: lock_machdep.c 

Log message:
Kill SPINLOCK_SPIN_HOOK, use CPU_BUSY_CYCLE() instead.

ok visa@, kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/29 08:21:10

Modified files:
	lang/libv8     : Makefile 

Log message:
allow libv8 to build with clang.
problem found by zhuk@ in mono.

still warns a heck of a lot, to be revisited later


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/29 08:22:51

Modified files:
	usr.sbin/bgpd  : session.c 

Log message:
fix "depend on" when carp interface goes from MASTER into state INIT
aka UNKNOWN.
ok claudio@ phessler@ and henning helped along too


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/29 08:28:01

Modified files:
	sys/net        : pfkeyv2.c pfkeyv2.h 

Log message:
Kill struct pfkey_version and move struct pfkeyv2_socket & dump_state
to pfkeyv2.c. These structs are nowhere else needed.
OK gcc


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 08:36:22

Modified files:
	sys/netinet    : in.c in_var.h ip_input.c ip_output.c 
	sys/netinet6   : ip6_input.c 

Log message:
Per-interface list of addresses, both multicast and unicast, are
currently protected by the NET_LOCK().

They are not accessed in the hot path, so protecting them with a
mutex could be an option.  However since we're now going to run
with a NET_LOCK() for some time, assert that it is held.

IPsec is not yet ready to run without KERNEL_LOCK(), so assert it
is held, even in the forwarding path.

Tested by sthen@, ok visa@, claudio@, bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 08:37:51

Modified files:
	gnu/llvm/lib/MC: MCAsmInfoELF.cpp 

Log message:
openbsd does not use nonexec stack segment header hints.
in fact, false is a much better default for UsesNonexecutableStackSection.
platforms that require it can reenable, instead, saving the rest of us an
unnecessary program header (causes trouble for some special binaries).
ok kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/29 08:37:53

Modified files:
	databases/postgresql-plv8: Makefile 

Log message:
fix typo in comment and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/29 08:41:16

Modified files:
	usr.bin/compress: zopen.c 

Log message:
Remove unused zclose function.

From Brian Callahan, thanks!

OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/29 08:43:53

Modified files:
	geo/geoclue2   : Makefile distinfo 

Log message:
update to geoclue-2.4.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/29 08:44:40

Modified files:
	productivity/radicale: Makefile distinfo 
	productivity/radicale/pkg: README 

Log message:
update to radicale-1.1.3 which adds a migration path to radicale 2

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 08:47:54

Modified files:
	lib/librthread : rthread_mutex.c synch.h 

Log message:
SPINLOCK_SPIN_HOOK is no more, define our own set of macros.

Prodded by kettenis@ and tedu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/05/29 09:05:06

Modified files:
	mail/p5-Mail-DMARC: Makefile distinfo 

Log message:
update to 1.20170222
hints and ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/29 09:12:23

Modified files:
	net/ncftp      : Makefile distinfo 

Log message:
* update to 3.2.6
* stop porting forward the KAME patch, i.e., no more IPv6 support
* pass maintainership
ok daniel@ fcambus@ sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/29 09:21:12

Modified files:
	distrib/sets/lists/base: mi 
	distrib/sets/lists/comp: mi 
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/05/29 09:36:31

Modified files:
	devel/py-testpath: Makefile distinfo 
	devel/py-testpath/pkg: PLIST 

Log message:
Update to py-testpath 0.3.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/29 09:38:20

Modified files:
	databases/postgresql-plv8/patches: patch-plv8_cc 
	                                   patch-plv8_func_cc 
Added files:
	databases/postgresql-plv8/patches: patch-plv8_type_cc 

Log message:
now that libv8 builds, hack around the disgusting hack they use to "poison"
postgresql, which ends up breaking math.h with libc++ as well


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/29 09:43:21

Modified files:
	graphics/hugin : Makefile 

Log message:
unbreak


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 09:43:48

Modified files:
	usr.bin/tmux   : format.c tmux.1 

Log message:
Add m: for fnmatch(3) format matching.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/29 10:44:57

Modified files:
	security/libewf: Makefile 

Log message:
don't pick up gmkdir in configure


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/29 10:52:01

Modified files:
	x11/gnome/recipes: Makefile 

Log message:
complete the list of MODGNOME_TOOLS

missing itstool spotted by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/29 11:10:06

Modified files:
	mail/offlineimap: Makefile distinfo 
	mail/offlineimap/patches: patch-offlineimap_conf 

Log message:
update to offlineimap-7.1.1

from Remi Locherer (MAINTAINER)


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/29 11:18:56

Modified files:
	usr.bin/cvs    : file.c update.c 

Log message:
cvs_file_classify() was making the mistake of only taking over a sticky
tag from Entries for a given file if the sticky tag is present.

while changing this we can simplify some logic in update.c on how it
decides what tag to use for file classification.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/29 11:41:38

Modified files:
	net/py-pcapy   : Makefile distinfo 
	net/py-pcapy/patches: patch-setup_py 

Log message:
update to py-pcapy-0.11.1, add do-test so "make test" does something


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/29 11:50:43

Modified files:
	lang/mono      : Makefile 

Log message:
add XXX comment about wxneeded and clang


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 12:06:34

Modified files:
	usr.bin/tmux   : cmd-find-window.c format.c tmux.1 tmux.h 
	                 window.c 

Log message:
Add ||, && format operators and C: to search pane content.


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/05/29 12:49:24

Modified files:
	games/spaceinvaders: Makefile distinfo 

Log message:
update to spaceinvaders-0.8


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/05/29 13:49:53

Modified files:
	games/spaceinvaders: Makefile 

Log message:
remove REVISION

suggested by tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/05/29 13:54:32

Modified files:
	games          : Makefile 

Log message:
+spaceinvaders

ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/29 14:23:18

Modified files:
	usr.sbin/bgpctl: bgpctl.8 
	usr.sbin/bgpd  : bgpd.conf.5 

Log message:
change section title in bgpd.conf talking about MPLS,
add a bit about working with multiple bgpds in rdomains in bgpctl.
shouting from claudio@ and help from jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/29 14:26:09

src/regress/sbin/iked/test_helper

Update of /cvs/src/regress/sbin/iked/test_helper
In directory cvs.openbsd.org:/cvs.d/hack/markus/src/regress/sbin/iked/test_helper

Log Message:
Directory /cvs/src/regress/sbin/iked/test_helper added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/29 14:26:10

src/regress/sbin/iked/parser

Update of /cvs/src/regress/sbin/iked/parser
In directory cvs.openbsd.org:/cvs.d/hack/markus/src/regress/sbin/iked/parser

Log Message:
Directory /cvs/src/regress/sbin/iked/parser added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/29 14:26:21

src/regress/sbin/iked/compat

Update of /cvs/src/regress/sbin/iked/compat
In directory cvs.openbsd.org:/cvs.d/hack/markus/src/regress/sbin/iked/compat

Log Message:
Directory /cvs/src/regress/sbin/iked/compat added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 14:28:57

Modified files:
	sys/netinet6   : in6.c 

Log message:
Allow passing in IN6_IFF_AUTOCONF from userland. Needed by slaacd(8)
OK naddy


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/29 14:31:12

Modified files:
	sys/net        : pfkeyv2.c 

Log message:
Replace handrolled list with LIST_* macros. OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/29 14:31:31

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
The kernel sets IN6_IFF_AUTOCONF for autoconf addresses, also make
slaacd(8) do that. At least you can identify them in ifconfig output.
Difference pointed out by & OK naddy


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/29 14:35:47

Modified files:
	share/man/man5 : bsd.regress.mk.5 

Log message:
Add more regress guidelines to bsd.regress.mk(5) man page.
input schwarze@ jmc@; OK henning@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 14:37:30

Modified files:
	usr.bin/tmux   : server-client.c tmux.h 

Log message:
Function to count clients.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 14:41:29

Modified files:
	usr.bin/tmux   : options-table.c server-client.c status.c tmux.h 

Log message:
Store a copy of the old status line, will be needed soon for new choose mode.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/29 14:42:53

Modified files:
	usr.bin/tmux   : status.c tmux.h 

Log message:
Add a flag to stop the prompt input being expanded.


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/29 14:59:32

Modified files:
	regress/sbin/iked: Makefile 
Added files:
	regress/sbin/iked: Makefile.inc 

Log message:


Added files:
	regress/sbin/iked/parser: Makefile common.c test_parser_fuzz.c 
	                          tests.c 
	regress/sbin/iked/test_helper: Makefile fuzz.c test_helper.c 
	                               test_helper.h 

Log message:
fuzz the iked payload parser using the openssh unit-test framework
from hshoexer


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/29 15:19:30

Modified files:
	lib/librthread : Makefile 

Log message:
Enable futex-based mutex and condvar.

ok everybody


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/29 15:27:36

Modified files:
	usr.sbin/bgpctl: bgpctl.8 

Log message:
missing .El;


CVSROOT:	/cvs
Module name:	ports
Changes by:	abieber@cvs.openbsd.org	2017/05/29 16:41:32

Modified files:
	security/keybase: Makefile distinfo 
	security/keybase/patches: patch-go_client_cmd_update_go 

Log message:
Bump to latest version.

OK awolk@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/29 22:45:38

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
typo - extra semicolon


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 23:57:46

Modified files:
	usr.bin/vmstat : dkstats.c 

Log message:
rename variable to avoid shadow. from Brian Callahan


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/29 23:58:44

Modified files:
	usr.bin/hexdump: odsyntax.c 

Log message:
fix a shadow warning. from Brian Callahan


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/30 00:01:30

Modified files:
	usr.bin/top    : machine.c 

Log message:
avoid some shadow warnings. from Brian Callahan


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 00:38:10

Modified files:
	regress/lib/libpthread/socket/1: socket1.c 

Log message:
Fix a race by always modifying the 'counter' variable while holding the
mutex.

ok tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 00:42:13

Modified files:
	sys/net        : if.c 

Log message:
Clear the internal table used by if_get(9) and sleep until all
remaining ifp references are released *without* the NET_LOCK().

It's safe to do so because the KERNEL_LOCK() serializes accesses
to ``if_map''.

More importantly this fix possible deadlocks between if_get() and
the NET_LOCK().  It is now possible to call them in whatever order.

ok visa@, dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/30 00:48:37

Modified files:
	databases/gdbm : Makefile distinfo 
	databases/gdbm/pkg: PLIST 

Log message:
update to gdbm-1.13

tested in a bulk/ok aja@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 00:55:40

Modified files:
	usr.bin/patch  : pch.c 

Log message:
Unbreak previous for git diffs that do not have the a/ prefix.
Found the hard way be me, OK tedu


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 01:05:22

Modified files:
	usr.bin/mg     : dir.c fileio.c modes.c re_search.c search.c 
	                 tags.c 

Log message:
fix -Wshadow warnings.
Found by bcallah, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	akfaew@cvs.openbsd.org	2017/05/30 01:08:56

Modified files:
	games/freeciv  : Makefile distinfo 

Log message:
update to freeciv-2.5.7

OK zhuk@ kirby@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/30 01:11:40

Modified files:
	usr.bin/mg     : tutorial 

Log message:
The is open-file command is actually called find-file.  Typo pointed out
by "Choose a display name <thelocals_job_applicant protonmail com>".


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 01:40:24

Modified files:
	sys/dev/hid    : hidkbd.c 

Log message:
Use memmove() instead of memcpy(), buffers are overlapping.

From Coverity via NetBSD via miod@

ok claudio@, tedu@, deraadt@, krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 01:50:37

Modified files:
	sys/dev/usb    : if_umb.c 
	sys/net        : if.c if_ethersubr.c if_mpe.c if_ppp.c if_pppx.c 
	                 if_spppsubr.c if_tun.c pipex.c 
	sys/netinet    : in.h ip_divert.c ip_gre.c ip_input.c ip_ipip.c 
	                 ip_var.h 
	sys/netinet6   : in6.h ip6_divert.c ip6_input.c 
	sys/netmpls    : mpls_input.c 

Log message:
Introduce ipv{4,6}_input(), two wrappers around IP queues.

This will help transitionning to an un-KERNEL_LOCK()ed IP
forwarding path.

Disucssed with bluhm@, ok claudio@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/30 01:53:49

Modified files:
	faq            : current.html 

Log message:
add a comment to make clear that there is a <tab> in the sed incantation
and use &#09; to use an actual tab character. found the hard way by florian


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/30 01:54:36

Modified files:
	devel/boost    : Makefile 

Log message:
rename COMPILER as TOOLSET in prevision of impending change


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/30 02:08:15

Modified files:
	lang/erlang    : Makefile.inc 

Log message:
erlang wants COMPILER to mean something, let it not interfere


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/30 02:10:01

Modified files:
	sys/net        : pf.c pfvar.h 

Log message:
teach pf_build_tcp() about SACK, ok & with sashan


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/30 02:13:48

Modified files:
	usr.bin/tmux   : key-bindings.c 

Log message:
Preserve search string when entering prompt again.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/30 02:23:32

Modified files:
	devel/lazarus  : Makefile 

Log message:
four failing builds in a row, we can say that problem is not i386
only.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 02:24:56

Modified files:
	sys/dev/ic     : pcdisplay_subr.c pcdisplayvar.h 

Log message:
Remove the unused pcdisplay_mapchar_simple function in pcdisplay(4).

It has been unused since this code was imported from NetBSD.

OK mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/30 02:35:32

Modified files:
	sys/dev/pv     : virtio.c virtiovar.h 

Log message:
virtio: Do LIFO in the freelist

Use a SLIST instead of a SIMPLEQ and use LIFO instead of FIFO. This should
improve cache usage.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/30 02:43:52

src/regress/sys/fileops/ext2

Update of /cvs/src/regress/sys/fileops/ext2
In directory cvs.openbsd.org:/tmp/cvs-serv78569/ext2

Log Message:
Directory /cvs/src/regress/sys/fileops/ext2 added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/30 02:44:58

Modified files:
	regress/sys/fileops: Makefile 
Added files:
	regress/sys/fileops/ext2: Makefile 

Log message:
fileops test: Also run on ext2fs

Also sort subdirs in makefile


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 02:49:32

Modified files:
	usr.bin/ssh    : authfile.c 

Log message:
revise sshkey_load_public(): remove ssh1 related comments, remove extra
open()/close() on keyfile, prevent leak of 'pub' if 'keyp' is NULL,
replace strlcpy+cat with asprintf; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 02:49:58

Modified files:
	usr.bin/ssh    : auth2-chall.c channels.c 

Log message:
remove ssh1 references; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 02:52:20

Modified files:
	usr.bin/ssh    : auth.c auth.h auth2-hostbased.c auth2-pubkey.c 
	                 monitor.c monitor_wrap.c monitor_wrap.h 
	                 ssh-pkcs11-client.c ssh-pkcs11-helper.c ssh.c 
	                 sshconnect.c sshconnect.h sshconnect2.c sshd.c 

Log message:
switch from Key typedef with struct sshkey; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 02:58:34

Modified files:
	etc            : rc.conf 
	sys/netinet6   : nd6_rtr.c 

Log message:
Enable slaacd(8) by default and disable router solicitation and
advertisement processing in the kernel.
Go for it!!! deraadt@
additional encouragement to push forward from at least mpi and henning
special thanks to naddy for being an early adopter and finding bugs.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 03:10:49

Modified files:
	sys/netinet6   : in6.h 

Log message:
Keep ipv6_input() definition inside _KERNEL.

Unbreak userland, found the hardway by deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/30 03:33:31

Modified files:
	usr.sbin/ypldap: Makefile aldap.c aldap.h ldapclient.c parse.y 
	                 ypldap.conf.5 ypldap.h 

Log message:
Teach ypldap to use tls when connecting to ldap servers.
libtls help from jsing@, linker help from deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/30 03:40:08

Modified files:
	usr.sbin/tcpdump: print-bgp.c 

Log message:
Enable more error codes for BGP. These were commited some time ago, but
never enabled. Also add error codes for FSM.

With input from Job Snijders.

OK phessler@ (previous version), claudio@, deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	florian@cvs.openbsd.org	2017/05/30 03:58:44

Modified files:
	faq            : current.html 

Log message:
a bit of explanation for slaacd


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/30 04:18:23

Modified files:
	converters/p5-MARC-Record: Makefile distinfo 

Log message:
Update to p5-MARC-Record-2.0.7.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 04:19:22

Modified files:
	sys/dev/wsfont : wsfont.c 
Removed files:
	sys/dev/wsfont : lucida16x29.h omron12x20.h 

Log message:
Remove lucida16x29.h and omron12x20 fonts.

- lucida16x29 is a bad conversion from a truetype font, it is too bold
which makes it unreadable.
- omron12x20 is a serif font, and is very difficult to read due to
inconsistencies in character spacing, alignement, and width.

Moreover, both fonts only have 96 glyphs.

No objection from mlarkin@

OK mpi@, jcs@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 04:20:55

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 04:24:05

Modified files:
	usr.sbin/slaacd: slaacd.8 

Log message:
reduce lies


CVSROOT:	/cvs
Module name:	ports
Changes by:	anton@cvs.openbsd.org	2017/05/30 04:26:07

Modified files:
	sysutils/pick  : Makefile 
	sysutils/yank  : Makefile 

Log message:
Update my own email.

ok landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/30 04:32:53

Modified files:
	sys/ufs/ext2fs : ext2fs_vfsops.c 

Log message:
ext2fs: Mark superblock as not modified when written

I have seen spurious "file system not clean; please fsck(8)" warnings
during "mount -ur". Set e2fs_fmod = 0 when writing the superblock (as
ffs does).

"Makes sense" deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	anton@cvs.openbsd.org	2017/05/30 04:47:25

Modified files:
	geo/openbsd-developers: Makefile 
	geo/openbsd-developers/files: OpenBSD 

Log message:
Add myself to geo/openbsd-developers.

ok pea@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/30 04:50:33

Modified files:
	sys/net80211   : ieee80211_proto.c 

Log message:
Always set the link state DOWN once we enter ieee80211_newstate(), regardless
of whether the wifi interface happens to be leaving RUN state. The interface
is never usable during state transitions so setting the link DOWN is the only
reasonable option when any transition is triggered.

Fixes a problem where, at boot time, the link state of wifi interfaces was
reported to userland as UNKNOWN (which, curiously, has value 0). dhclient's
link detection logic was recently changed from ifmedia to getifaddrs which
exposed the UNKOWN link state. Since dhclient assumes an UNKNOWN link state
means UP it would start trying to negotiate a lease too early during boot.

Problem reported by tb@
ok krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/30 05:00:38

Modified files:
	sys/net80211   : ieee80211.c ieee80211_var.h 

Log message:
Introduce ieee80211_min_basic_rate() and ieee80211_max_basic_rate().

These helpers can be used by drivers to improve compatibility with APs
that disable some mandatory PHY rates in the basic rate set.

For instance, many of our drivers hard-code 11b rates on 2 Ghz and run
into problems when APs disable them. Since 11b rates are being disabled
by default by some vendors, hardcoding them is not a good idea anymore.

ok mpi@ phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/30 05:01:38

Modified files:
	sys/dev/pci    : if_iwn.c 

Log message:
Use ieee80211_{min,max}_basic_rate() in iwn(4).
ok mpi@ phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/30 05:02:39

Modified files:
	sys/dev/pv     : virtio.c 

Log message:
virtio: Put entries in freelist in reverse order

This avoids breaking krw@'s ongoing work on improving virtio_enqueue_trim().


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/30 05:24:10

Modified files:
	www/p5-HTML-TableExtract: Makefile distinfo 

Log message:
Update to p5-HTML-TableExtract-2.15.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/30 05:57:59

Modified files:
	regress/sbin/route: Makefile 

Log message:
Remove the .INTERRUPT target, it prevented to terminate the test
with Ctrl-C in some situations.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/30 06:03:11

Modified files:
	regress/sbin   : Makefile 

Log message:
Link iked test to build so that obj directories are created.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/30 06:04:27

Modified files:
	etc            : rc rc.conf 
	etc/rc.d       : rc.subr 
	usr.sbin/rcctl : rcctl.sh 
	share/man/man8 : rc.conf.8 

Log message:
Introduce a scary rc.conf(8) knob library_aslr=(YES|NO) to turn off the
reordering of libraries by rc(8). This way machines with very slow disk I/O
have a chance of booting within reasonable time now that libcrypto is also
randomized.

Discussed with various;
input & ok from deraadt ajacoutot


CVSROOT:	/cvs
Module name:	src
Changes by:	friehm@cvs.openbsd.org	2017/05/30 06:09:27

Modified files:
	share/man/man9 : mbuf_tags.9 
	sys/netinet    : ip_carp.c ip_carp.h ip_icmp.c ip_input.c 
	sys/netinet6   : icmp6.c ip6_input.c 
	sys/sys        : mbuf.h 

Log message:
Carp balancing ip does not work since there is a mac filter in
ether_input(). Now we use mbuf tags instead of modifying the MAC
address.

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/30 06:13:04

Modified files:
	sbin/pfctl     : pfctl.c 

Log message:
fix a comment


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/30 06:14:38

Modified files:
	share/man/man5 : bsd.regress.mk.5 

Log message:
tweak previous; ok bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/30 06:17:17

Modified files:
	usr.sbin/ypldap: ypldap.conf.5 

Log message:
remove an extra .Ed;


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/30 06:24:43

Modified files:
	share/man/man9 : mbuf_tags.9 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/30 06:31:54

Modified files:
	audio/mpd      : Makefile distinfo 
Added files:
	audio/mpd/patches: patch-src_Main_cxx 

Log message:
Update to mpd 0.20.8.

Fixes a database update issue reported by ajacoutot@, fix found via
FreeBSD by Andre Smagin (cf https://github.com/MusicPlayerDaemon/MPD/issues/41)

ok dcoppa@ (maintainer) ajacoutot@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 06:32:59

Modified files:
	mail/evolution : Makefile 
Added files:
	mail/evolution/patches: 
	                        patch-src_modules_cal-config-weather_evolution-cal-config-weather_c 

Log message:
Fix conditional.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/30 06:38:36

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
fix a jumbled conditional clang warns about; ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/30 06:39:33

Modified files:
	usr.sbin/slaacd: slaacd.8 

Log message:
tweak previous; ok florian


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 06:41:55

Modified files:
	sys/arch/i386/i386: vector.s 
	sys/arch/amd64/amd64: vector.S 

Log message:
move some data tables out of .text and into .rodata where they belong

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	friehm@cvs.openbsd.org	2017/05/30 06:42:31

Modified files:
	usr.sbin/ospf6d: kroute.c ospf6d.c ospf6d.h rde.c 

Log message:
Adding multipath route support to ospf6d. Almost copied from ospfd.

OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/30 06:47:47

Modified files:
	sys/dev/pv     : vioblk.c vioscsi.c virtio.c virtiovar.h 

Log message:
Statically allocate resource to requests, and only create requests
that there will be resources for.

Protect request list with a mutex.

Makes everything much more scsi-like. Fewer splbio() dances.  Uses
less memory and eliminates superfluous freeing and acquiring of the
same resources over and over.

ok sf@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 06:48:02

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
print more useful information when an error is returned from uvm_fault
when processing NPT/EPT violations


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/05/30 06:52:59

Modified files:
	usr.sbin/tcpdump: print-bgp.c 

Log message:
The capability error codes never made it into a standard and now error
code 7 is for enhanced route refresh.

OK claudio@ phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/30 07:12:30

Modified files:
	net/freeradius3: Makefile distinfo 
	net/freeradius3/patches: patch-src_main_detail_c 
	                         patch-src_main_tls_c 
	net/freeradius3/pkg: PLIST-main PLIST-mysql PLIST-pgsql 

Log message:
update to freeradius 3.0.14.

Security update for configurations with TLS; FreeRADIUS intentionally
skips inner authentication for TLS resumption, however it allows a
session to be resumed before the initial connection has authenticated,
allowing access without auth to a malicious supplicant. CVE-2017-9148,
See http://seclists.org/oss-sec/2017/q2/342

Workaround: set "enabled = no" in the cache section of raddb/mods-enabled/eap.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 07:13:47

Modified files:
	usr.sbin/vmd   : virtio.c virtio.h 

Log message:
increase vmd(8) virtio queue size from 64 to 128. Also fix an old
copypaste bug that didn't hurt us as long as all the queue sizes were
the same, which was the case up to now.

suggested by sf@, ok krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 07:14:44

Modified files:
	sys/dev/wsfont : wsfont.c 
Removed files:
	sys/dev/wsfont : qvss8x15.h vt220l8x10.h vt220l8x8.h 

Log message:
Remove qvss8x15, vt220l8x8, and vt220l8x10 fonts.

Those fonts are not compiled in by default, and are smaller than the
smallest font (bold8x16_iso1) we currently include.

OK mpi@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 07:16:09

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/30 07:56:07

Modified files:
	usr.sbin/pkg_add: pkg_add.1 

Log message:
waive signature check waving

ok jmc espie


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/30 08:04:02

Modified files:
	sys/dev/ic     : ahci.c 

Log message:
Remove comments about implementing FIS-based switching with port multipliers,
which we can safely assume isn't going to happen now.  No code changes.


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:10:53

Modified files:
	usr.bin/ssh    : auth2-hostbased.c auth2-pubkey.c monitor.c 
	                 monitor_wrap.c monitor_wrap.h 

Log message:
switch auth2-pubkey.c to modern APIs; with & ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/30 08:13:33

Modified files:
	devel/mono-addins: Makefile 

Log message:
well, in theory at least, it should build on archs with tls support.


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:13:40

Modified files:
	usr.bin/ssh    : sshconnect.c 

Log message:
switch sshconnect.c to modern APIs; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:15:17

Modified files:
	usr.bin/ssh    : ssh-pkcs11.c 

Log message:
sshkey_new() might return NULL (pkcs#11 code only); ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:16:41

Modified files:
	usr.bin/ssh    : key.c key.h ssh-add.c ssh-keygen.c 

Log message:
remove unused wrapper functions from key.[ch]; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:18:15

Modified files:
	usr.bin/ssh    : auth2-chall.c auth2-gss.c auth2.c packet.h 

Log message:
sshd: pass struct ssh to auth functions; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:19:15

Modified files:
	usr.bin/ssh    : sshconnect2.c 

Log message:
ssh: pass struct ssh to auth functions, too; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 08:21:33

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
Update default router states; pointed out by naddy


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 08:23:10

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
Remove default router proposals and address_proposals
when their lifetime reaches zero.


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:23:52

Modified files:
	usr.bin/ssh    : auth2-chall.c auth2-gss.c auth2.c channels.c 
	                 channels.h clientloop.c dispatch.c dispatch.h 
	                 kex.c kex.h kexdhc.c kexdhs.c kexecdhc.c 
	                 kexecdhs.c kexgexc.c kexgexs.c serverloop.c 
	                 sshconnect2.c 

Log message:
protocol handlers all get struct ssh passed; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:25:42

Modified files:
	usr.bin/ssh    : auth2-hostbased.c 

Log message:
switch auth2-hostbased.c to modern APIs; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:26:49

Modified files:
	usr.bin/ssh    : auth2-passwd.c 

Log message:
switch auth2-passwd.c to modern APIs; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:27:22

Modified files:
	usr.bin/ssh    : auth2-none.c 

Log message:
switch auth2-none.c to modern APIs; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 08:29:59

Modified files:
	usr.bin/ssh    : auth.h auth2-chall.c auth2-gss.c 
	                 auth2-hostbased.c auth2-kbdint.c auth2-none.c 
	                 auth2-passwd.c auth2-pubkey.c auth2.c 

Log message:
switch auth2 to ssh_dispatch API; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 08:45:22

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
fix previous; actually free the memory


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/30 08:52:38

Modified files:
	share/misc     : Makefile 
Removed files:
	share/misc     : ascii 

Log message:
Remove /usr/share/misc/ascii since we have ascii(7).
OK schwarze@ deraadt@ sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/30 08:54:09

Modified files:
	lib/libc/stdlib: qsort.c 

Log message:
Don't fall back to heapsort() if we would otherwise switch to
insertion sort (when the number of elements is < 7).


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 08:56:34

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
no need to pass the slaacd_iface around, the proposal has the if_index


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/30 09:02:22

Modified files:
	sys/arch/amd64/stand: Makefile.inc 

Log message:
Build amd64 bootstrap with -ffreestanding.
"totally makes sense" kettenis@
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 09:04:45

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
getrtable() is now permitted in "stdio".  It carries no risk factors.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/30 09:06:00

Modified files:
	share/man/man7 : ascii.7 

Log message:
Remove FILES section now that /usr/share/misc/ascii is no more.
Noted by jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/30 09:07:01

Modified files:
	usr.bin/id     : id.1 id.c 

Log message:
id -R: make current rdomain more easily accessible to the shell
ok benno deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/30 09:10:48

Modified files:
	usr.bin/w      : Makefile extern.h w.c 
Removed files:
	bin/ps         : fmt.c 

Log message:
stop reacharound from w(1) to ps(1); no functional change;
diff from bcallah@; OK tedu@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 09:11:32

Modified files:
	sys/arch/i386/i386: cpu.c locore.s machdep.c 
	sys/arch/amd64/amd64: cpu.c identcpu.c 
	sys/arch/amd64/include: cpufunc.h 

Log message:
Support for SMAP is pretty small, so don't exclude it from the RAMDISKS.
ok jsg visa


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 09:29:39

Modified files:
	net/ekg        : Makefile 

Log message:
Fix MASTER_SITES.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/30 09:29:53

Modified files:
	usr.bin/id     : id.1 id.c 

Log message:
usage and order tweaks from jmc


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/30 09:36:13

Modified files:
	regress/sbin/iked/parser: Makefile 

Log message:
Organize iked parser regress Makefile similar to mandoc dbm_dump.
When object files from other parts of the tree are needed, build
them there and symlink them into the regress obj directory.
OK markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 09:39:05

Modified files:
	sys/arch/amd64/amd64: db_trace.c 
	sys/arch/arm64/arm64: db_trace.c 
	sys/arch/hppa/hppa: db_interface.c 
	sys/arch/i386/i386: db_trace.c 
	sys/arch/m88k/m88k: db_trace.c 
	sys/arch/mips64/mips64: trap.c 
	sys/arch/powerpc/ddb: db_trace.c 
	sys/arch/sh/sh : db_disasm.c db_trace.c 
	sys/arch/sparc64/sparc64: openfirm.c 
	sys/ddb        : db_elf.c db_hangman.c db_sym.c db_sym.h 
	                 db_ctf.c 
	sys/sys        : exec_elf.h 

Log message:
Kill db_sym_t.

ok deraadt@, kettenis@, jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 09:39:49

Modified files:
	usr.sbin/slaacd: engine.c slaacd.c slaacd.h 

Log message:
delete default route from FIB when it expires


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 09:57:12

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
delete default route from FIB when we receive advertisement with
router lifetime of 0


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 10:07:22

Modified files:
	sys/netinet    : ip_ah.c ip_esp.c 

Log message:
add sizes to free() calls


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 10:16:47

Modified files:
	sys/net        : if_mpe.c if_tun.c 

Log message:
sizes for free()


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/30 10:21:08

Modified files:
	usr.bin/mandoc : libmdoc.h mdoc_argv.c mdoc_macro.c 
	regress/usr.bin/mandoc/mdoc/Ad: font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/An: break.in 
	regress/usr.bin/mandoc/mdoc/Ap: middle.in middle.out_ascii 
	                                middle.out_markdown 
	regress/usr.bin/mandoc/mdoc/Aq: empty.in empty.out_ascii 
	                                empty.out_markdown 
	                                empty.out_utf8 
	regress/usr.bin/mandoc/mdoc/Ar: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/At: invalid.in invalid.out_ascii 
	                                invalid.out_markdown 
	regress/usr.bin/mandoc/mdoc/Brq: empty.in empty.out_ascii 
	                                 empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Bx: args.in args.out_ascii 
	                                args.out_markdown 
	regress/usr.bin/mandoc/mdoc/Cd: Makefile 
	regress/usr.bin/mandoc/mdoc/Cm: Makefile 
	regress/usr.bin/mandoc/mdoc/Dq: empty.in empty.out_ascii 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Dv: font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/Em: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Eo: empty.in empty.out_ascii 
	                                empty.out_markdown obsolete.in 
	                                obsolete.out_ascii 
	                                obsolete.out_markdown 
	regress/usr.bin/mandoc/mdoc/Er: noarg.in noarg.out_ascii 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ev: font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fl: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fo: font.in font.out_ascii 
	                                font.out_markdown punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ic: Makefile 
	regress/usr.bin/mandoc/mdoc/In: font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/Li: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ms: font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/Mt: simple.in simple.out_ascii 
	                                simple.out_markdown 
	regress/usr.bin/mandoc/mdoc/No: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ns: punct.in 
	regress/usr.bin/mandoc/mdoc/Oo: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Op: punct.in 
	regress/usr.bin/mandoc/mdoc/Pa: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Qq: empty.in empty.out_ascii 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sq: empty.in empty.out_ascii 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/St: call.in 
	regress/usr.bin/mandoc/mdoc/Sx: noarg.in noarg.out_ascii 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sy: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Tn: noarg.in noarg.out_ascii 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Va: Makefile 
	regress/usr.bin/mandoc/mdoc/Xr: args.in args.out_ascii 
	                                args.out_markdown 
Added files:
	regress/usr.bin/mandoc/mdoc/Cd: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Cm: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ic: punct.in punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Va: punct.in punct.out_ascii 
	                                punct.out_markdown 

Log message:
Macro argument quoting does not prevent recognition of punctuation
and of called macros.

This bug affects almost all macros, and fixing it simplifies the
code.  It is amazing that the bogus ARGS_QWORD feature got implemented
in the first place, and then carrier along for more than eight years
without anybody ever noticing that it was pointless.

Reported by Leah Neukirchen <leah at vuxu dot org>, found on Void Linux.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/30 10:21:55

Modified files:
	sys/net80211   : ieee80211.c 
	sys/dev/pci    : if_iwn.c 

Log message:
Improve the new ieee80211_{min,max}_rates() APIs and fix regressions.

Instead of returning an index into ni_rates, return the RVAL of the
basic rate we want to use. This allows a driver to unambiguously map
the basic rate to the corresponding hardware-specific rate value, and
reduces the possibility of bugs where indices are used with arrays
they weren't intended for.

Adjust iwn(4) accordingly, and use the lowest instead of the highest
basic rate in iwn_tx() to cope better in noisy environments.

Fixes association problems on 5GHz reported by tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/30 10:30:22

Modified files:
	usr.sbin/radiusd: radiusd_radius.c 

Log message:
Don't call TAILQ_REMOVE twice.  This caused radiusd crash if it has a
pending request when it stops.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/30 10:31:25

Modified files:
	usr.bin/mandoc : mdoc_html.c mdoc_man.c mdoc_markdown.c 
	                 mdoc_term.c 
	regress/usr.bin/mandoc/mdoc/Lk: noarg.in 

Log message:
fix formatting of intermediate punctuation in .Lk


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 10:46:04

Modified files:
	lib/libc/sys   : pledge.2 

Log message:
getrlimit is now allowed by "stdio"


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/30 11:15:06

Modified files:
	sbin/pflogd    : pflogd.8 

Log message:
Fix escaping: .Nm Op Fl "Dx" turning into "pflogd [-DragonFly]"
is funny, but not useful, so say .Nm Op Fl \&Dx as required.


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/30 11:22:00

Modified files:
	usr.sbin/npppd/common: addr_range.c addr_range.h debugutil.c 
	                       hash.h radish.h 
	usr.sbin/npppd/npppd: fsm.c fsm.h lcp.c mppe.c npppd_pool.c 
	                      ppp.h 

Log message:
Stop using __P macro.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/30 11:28:03

Modified files:
	share/man/man7 : operator.7 

Log message:
Don't mention the operator file -- it was moved to the attic.

From Michael Reed, thanks.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/30 11:47:11

Modified files:
	sys/dev/pv     : if_vio.c vioblk.c viocon.c 

Log message:
Replace nifty DBGPRINT() with a more familiar DPRINTF() and adjust
the formats to add in the __func__ and "\n" being magically added by
DBGPRINT(). Fixes a few botches by certain devs who assumed DBGPRINT()
must be just like DPRINTF.

ok sf@ reyk@ on earlier version


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/30 11:48:23

Added files:
	graphics/asymptote/patches: patch-genv_cc patch-prc_writePRC_h 

Log message:
remove dependencies to libstdc++ internals.
not enough to make it work with clang, but necessary anyway


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 11:49:47

Modified files:
	sys/arch/amd64/amd64: vmm.c vmm_support.S 
	sys/arch/amd64/include: specialreg.h vmmvar.h 

Log message:
FPU context save/restore for SVM in vmm(4), matches a previous diff
from a few weeks ago that did the same for Intel/VMX.

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/30 11:50:08

Modified files:
	share/man/man7 : airport.7 

Log message:
various mdoc(7) fixes, triggered by a smaller diff from Michael Reed on tech@


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/30 11:52:05

Modified files:
	usr.sbin/npppd/common: radish.c radish.h 
	usr.sbin/npppd/npppd: Makefile 

Log message:
Remove never used ifdefs, define FATAL macro properly and define function
parameters in modern way.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/30 11:56:47

Modified files:
	usr.sbin/vmd   : virtio.c vm.c vmd.h 

Log message:
split vioblk read/write functions into start and finish as prep for
async io operations. ok mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/30 12:00:53

Modified files:
	devel/boost    : Makefile 
	devel/boost/files: user.hpp 
Added files:
	devel/boost/patches: patch-boost_type_traits_is_convertible_hpp 

Log message:
Better Clang support for Boost. Allows facter & friends to be built.

To be revisited later if something else will break under CMake.

a lot of valuable input from espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/05/30 12:01:27

Modified files:
	devel/cpp-hocon: Makefile 
	devel/cpp-hocon/pkg: PLIST 
	devel/leatherman: Makefile 
	devel/leatherman/pkg: PLIST 
	sysutils/facter: Makefile 
Added files:
	devel/cpp-hocon/patches: patch-lib_CMakeLists_txt 
	                         patch-lib_tests_CMakeLists_txt 
	devel/leatherman/patches: patch-cmake_leatherman_cmake_in 
	sysutils/facter/patches: patch-cmake_FindCPPHOCON_cmake 
	                         patch-lib_src_facts_glib_load_average_resolver_cc 

Log message:
Bring facter & friends into land of Position Independent Code.

This makes all of those build with Clang, but you'll need updated boost
first (not enforcing dependency because we don't have Clang on amd64 as well).


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/30 12:07:38

Modified files:
	databases/gdbm : Makefile 

Log message:
zap unused variable


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/30 12:08:15

Modified files:
	usr.sbin/bgpd  : rde.h rde_attr.c rde_update.c 

Log message:
remove extended communities that have the transitive bit set from
routes announced to an ebgp peer (ref. rfc4360). While here remove the
pratial flag from extended and large communities.
ok claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 12:14:03

Modified files:
	x11/gnome/session: Makefile 
Added files:
	x11/gnome/session/patches: 
	                           patch-gnome-session_gsm-fail-whale-dialog_c 

Log message:
Add a patch from GNOME BZ to mitigate a crash of gnome-session-failed.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 12:18:08

Modified files:
	usr.sbin/slaacctl: slaacctl.c 
	usr.sbin/slaacd: engine.c frontend.c slaacd.c 

Log message:
whitespace encountered during review


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/30 12:37:19

Modified files:
	sys/ddb        : db_structinfo.c 

Log message:
Header sys/scanio.h has been deleted, do not include it here.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/30 12:49:14

Modified files:
	www/nghttp2    : Makefile distinfo 

Log message:
update to nghttp2-1.23.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/30 12:50:12

Modified files:
	graphics/darktable: Makefile distinfo 

Log message:
update to darktable-2.2.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 12:53:37

Modified files:
	net/avahi      : Makefile 
Added files:
	net/avahi/patches: patch-avahi-daemon_main_c 

Log message:
Silence a useless warning; we will never have NSS.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 12:57:01

Modified files:
	security/nss   : Makefile 
	security/nss/patches: patch-nss_lib_freebl_blapi_h 
Added files:
	security/nss/patches: patch-nss_lib_freebl_alghmac_h 

Log message:
Define HMAC_Update to NSS_HMAC_Update to prevent clashing symbol with libcrypto.

input from landry@ and miod@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/30 12:57:20

Modified files:
	editors/calligra: Makefile distinfo 
	editors/calligra/patches: patch-plan_CMakeLists_txt 
	editors/calligra/pkg: DESCR PLIST 
Added files:
	editors/calligra/patches: 
	                          patch-plugins_colorengines_lcms2_tests_CMakeLists_txt 
	                          patch-plugins_videoshape_FullScreenPlayer_cpp 
	                          patch-plugins_videoshape_FullScreenPlayer_h 
	                          patch-plugins_videoshape_SelectVideoWidget_cpp 
	                          patch-plugins_videoshape_VideoThumbnailer_cpp 
	                          patch-plugins_videoshape_VideoThumbnailer_h 
	                          patch-stage_CMakeLists_txt 
	                          patch-stage_plugins_eventactions_sound_KPrSoundEventAction_cpp 
Removed files:
	editors/calligra/patches: patch-cmake_modules_FindPoppler_cmake 
	                          patch-kexi_CMakeLists_txt 
	                          patch-kexi_widget_CMakeLists_txt 
	                          patch-krita_image_kis_image_config_cpp 
	                          patch-krita_plugins_extensions_gmic_3rdparty_gmic_CImg_h 
	                          patch-libs_db_drivers_sqlite_icu_sqliteicu_h 
	                          patch-libs_flake_tests_CMakeLists_txt 
	                          patch-libs_kotext_tests_CMakeLists_txt 
	                          patch-libs_pigment_tests_CMakeLists_txt 
	                          patch-plan_libs_kernel_tests_CMakeLists_txt 
	                          patch-plan_plugins_schedulers_rcps_CMakeLists_txt 
	                          patch-plan_plugins_schedulers_tj_CMakeLists_txt 
	                          patch-plan_plugins_scripting_CMakeLists_txt 
	                          patch-plugins_chartshape_tests_odf_bubble-chart_CMakeLists_txt 
	                          patch-plugins_chartshape_tests_odf_bug239802_CMakeLists_txt 
	                          patch-plugins_chartshape_tests_odf_default-calligra-chart_CMakeLists_txt 
	                          patch-plugins_chartshape_tests_odf_default-ooo-chart_CMakeLists_txt 
	                          patch-plugins_semanticitems_CMakeLists_txt 
	                          patch-plugins_semanticitems_contact_CMakeLists_txt 
	                          patch-stage_part_CMakeLists_txt 

Log message:
Update Calligra to 3.0.1

From release notes:

"We have chosen to cut back on the number of applications. Krita has left us to
be independent and although it was emotional it was also done with complete
support from both sides. We are saying goodbye to Author, which never
differentiated itself from Words. We also removed Braindump the purpose of
which will be better fitted by a new application (nothing planned from our
side). Flow and Stage has gone in this release but we intend to bring them back
in the future. And Kexi has own release schedule but is still part of the
Calligra community."
-- https://www.calligra.org/news/calligra-3-0-released/

Many hints and tweaks from lendry@, sthen@ and jca@:

- Remove some kf5 libs from LIB_DEPENDS. They are only used
as RUN_DEPENDS. spotted by  jca@

- Add devel/gettext as RUN_DEPENDS and libiconv as LIB_DEPENDS.

- Make the update process possible for editors/calligra-l10
-- idea from landry@ Thanks!

... and some more. Thanks!

ok landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/30 12:58:37

Modified files:
	usr.bin/ssh    : readconf.c readconf.h ssh.1 ssh.c ssh_config.5 

Log message:
Add RemoteCommand option to specify a command in the ssh config
file instead of giving it on the client's command line.  This command
will be executed on the remote host.  The feature allows to automate
tasks using ssh config.
OK markus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/05/30 13:11:52

Modified files:
	x11/gnome/online-accounts: Makefile distinfo 

Log message:
update to gnome-online-accounts-3.24.1


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 13:13:20

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
Add missing KERNEL_LOCKs to a few error paths.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/30 13:16:32

Removed files:
	editors/calligra-l10n: Makefile Makefile.inc Makefile.langs 
	                       distinfo 
	editors/calligra-l10n/bs: Makefile 
	editors/calligra-l10n/ca: Makefile 
	editors/calligra-l10n/ca@valencia: Makefile 
	editors/calligra-l10n/cs: Makefile 
	editors/calligra-l10n/da: Makefile 
	editors/calligra-l10n/de: Makefile 
	editors/calligra-l10n/el: Makefile 
	editors/calligra-l10n/en_GB: Makefile 
	editors/calligra-l10n/es: Makefile 
	editors/calligra-l10n/et: Makefile 
	editors/calligra-l10n/fi: Makefile 
	editors/calligra-l10n/fr: Makefile 
	editors/calligra-l10n/gl: Makefile 
	editors/calligra-l10n/hu: Makefile 
	editors/calligra-l10n/it: Makefile 
	editors/calligra-l10n/ja: Makefile 
	editors/calligra-l10n/kk: Makefile 
	editors/calligra-l10n/nb: Makefile 
	editors/calligra-l10n/nl: Makefile 
	editors/calligra-l10n/pkg: DESCR PLIST-bs PLIST-ca 
	                           PLIST-ca@valencia PLIST-cs PLIST-da 
	                           PLIST-de PLIST-el PLIST-en_GB 
	                           PLIST-es PLIST-et PLIST-fi PLIST-fr 
	                           PLIST-gl PLIST-hu PLIST-it PLIST-ja 
	                           PLIST-kk PLIST-nb PLIST-nl PLIST-pl 
	                           PLIST-pt PLIST-pt_BR PLIST-ru 
	                           PLIST-sk PLIST-sv PLIST-tr PLIST-uk 
	                           PLIST-zh_CN PLIST-zh_TW 
	editors/calligra-l10n/pl: Makefile 
	editors/calligra-l10n/pt: Makefile 
	editors/calligra-l10n/pt_BR: Makefile 
	editors/calligra-l10n/ru: Makefile 
	editors/calligra-l10n/sk: Makefile 
	editors/calligra-l10n/sv: Makefile 
	editors/calligra-l10n/tr: Makefile 
	editors/calligra-l10n/uk: Makefile 
	editors/calligra-l10n/zh_CN: Makefile 
	editors/calligra-l10n/zh_TW: Makefile 

Log message:
remove calligra localization

All localizations are in editors/calligra now.

ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/30 13:17:10

Modified files:
	editors        : Makefile 

Log message:
unhook calligra-l10n


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:19:38

Modified files:
	x11/mate/caja  : Makefile distinfo 
	x11/mate/caja/pkg: PLIST 

Log message:
update to caja-1.18.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:20:17

Modified files:
	x11/mate/engrampa: Makefile distinfo 

Log message:
update to engrampa-1.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:20:35

Modified files:
	x11/mate/eom   : Makefile distinfo 
	x11/mate/eom/pkg: PLIST 

Log message:
update to eom-1.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:22:12

Modified files:
	x11/mate/libmateweather: Makefile distinfo 

Log message:
update to libmateweather-1.18.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:22:29

Modified files:
	x11/mate/marco : Makefile distinfo 

Log message:
update to marco-1.18.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:22:52

Modified files:
	x11/mate/panel : Makefile distinfo 

Log message:
update to mate-panel-1.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:23:15

Modified files:
	x11/mate/pluma : Makefile distinfo 

Log message:
update to pluma-1.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:23:35

Modified files:
	x11/mate/terminal: Makefile distinfo 

Log message:
update to mate-terminal-1.18.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:23:59

Modified files:
	x11/mate/themes: Makefile distinfo 
	x11/mate/themes/pkg: PLIST 

Log message:
update to mate-themes-3.22.9


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:24:20

Modified files:
	x11/mate/utils : Makefile distinfo 
	x11/mate/utils/pkg: PLIST 

Log message:
update to mate-utils-1.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/05/30 13:24:56

Removed files:
	x11/mate/libmateweather/patches: patch-configure_ac 

Log message:
remove patch that has been pushed upstream


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 13:27:16

Modified files:
	usr.sbin/slaacd: frontend.c 

Log message:
Send a source link-layer address option with our solicitations.
Servers following RFC 7772 may then send us unicast router
advertisments and thus reduce multicast traffic which might
increase the battery life of other devices using the same shared
media.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/30 13:28:09

Modified files:
	sys/dev/pv     : vioblk.c vioscsi.c virtio.c 

Log message:
More minor virtio tweaks

* add some comments about virtio_enqueue_trim
* include mutex.h explicitly
* make VIRTIO_DEBUG == 1 less verbose in vioblk

ok krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/30 13:29:31

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 
	regress/usr.bin/mandoc: Makefile.inc 
	regress/usr.bin/mandoc/mdoc/Tn: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ud: arg.out_lint 

Log message:
STYLE message about useless macros we don't want (Bt Tn Ud);
not a WARNING because they don't endanger portability


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 13:31:29

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
SVM: return EIO to vmd to stop the guest when it HLTs with interrupts
disabled (no NMI support yet)


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/30 13:37:54

Modified files:
	sys/net        : pf_ioctl.c pfvar.h 

Log message:
g/c DIOCCLRRULECTRS
kinda deprecated for a decade now, nothing in base uses it, nothing in
ports uses it (thanks sthen)
ok phessler sashan


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/30 13:38:17

Modified files:
	usr.bin/ssh    : ssh_config.5 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/30 13:38:47

Modified files:
	share/man/man4 : pf.4 

Log message:
remove DIOCCLRRULECTRS here as well, pt out by sashan


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/30 13:40:55

Modified files:
	sys/net        : pfvar.h 

Log message:
remove XXX from the comments marking "holes" in the ioctls. I see very
very little value in these comments at all, but the XXX is just wrong and
in the way when looking for real XXXs. phessler agrees


CVSROOT:	/cvs
Module name:	ports
Changes by:	millert@cvs.openbsd.org	2017/05/30 13:55:15

Modified files:
	security/sudo  : Makefile distinfo 

Log message:
update to sudo 1.8.20p1


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/05/30 13:56:35

Modified files:
	devel/doc++    : Makefile 
	devel/doc++/pkg: PLIST 
	fonts/ru-pscyr : Makefile 
	fonts/ru-pscyr/pkg: PLIST 
	print/texinfo  : Makefile 
	print/texinfo/pkg: PLIST 
	textproc/latex2html: Makefile 
	textproc/latex2html/pkg: PLIST 
	textproc/p5-LaTeXML: Makefile 
	textproc/p5-LaTeXML/pkg: PLIST 
	graphics/asymptote: Makefile 
	graphics/asymptote/pkg: PLIST 

Log message:
Remove share/texmf-local PLIST entries for TeX Live RUN_DEPENDS.

Now that TeX Live installs these automatically, there is no need to have these
entries in the PLIST.

OK zhuk@, thanks.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 14:00:48

Modified files:
	sys/net        : pf_if.c pf_ruleset.c 

Log message:
sizes for free()
ok henning


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 14:10:45

Modified files:
	usr.sbin/tcpdump: print-smb.c smb.h 

Log message:
MIN->MINIMUM, even though smb is currently disabled.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 14:12:46

Modified files:
	devel/git-bz   : Makefile distinfo 
Removed files:
	devel/git-bz/patches: patch-git-bz 

Log message:
Update to git-bz-20150908.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/30 14:20:45

Modified files:
	usr.bin/mandoc : mandoc.1 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/05/30 14:31:24

Modified files:
	sys/arch/amd64/amd64: vmm.c 
	sys/arch/amd64/include: vmmvar.h 

Log message:
event injection framework, will be used for other features coming shortly

ok deraadt


CVSROOT:	/cvs
Module name:	www
Changes by:	florian@cvs.openbsd.org	2017/05/30 14:33:38

Modified files:
	.              : innovations.html 

Log message:
mention slaacd


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 14:44:14

Modified files:
	devel/libconfuse: Makefile distinfo 
	devel/libconfuse/pkg: PLIST 

Log message:
Update to libconfuse-3.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/05/30 14:46:03

Modified files:
	regress/usr.bin/doas: Makefile t-permit-1.conf 

Log message:
First pass to make bluhm@ happy regarding doas regress conf.

1. Make permit tests use wsrc instead of wobj (because basically, to run
test you need obj being writable, unless you want to pollute /usr/src);
2. Test if current user is in wobj group prior running the test, and skip
the test if he is not.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 14:48:04

Modified files:
	devel/libmtp   : Makefile distinfo 

Log message:
Update to libmtp-1.1.13.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/30 15:05:44

Modified files:
	net/librenms   : Makefile distinfo 
	net/librenms/patches: patch-config_php_default patch-daily_sh 
	                      patch-html_install_php 
	                      patch-html_pages_about_inc_php 
	                      patch-includes_common_php 
	                      patch-includes_defaults_inc_php 
	                      patch-includes_functions_php 
	                      patch-lib_influxdb-php_requirements_sh 
	                      patch-librenms_nonroot_cron 
	                      patch-poller-wrapper_py patch-validate_php 
	net/librenms/pkg: PLIST 

Log message:
update to librenms-1.28, many nice improvements including:
- major overhaul of wireless sensors
- faster page/graph generation
- lots of additional device support as usual


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:16:43

Modified files:
	x11/mate       : Makefile 

Log message:
Sort.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/30 15:21:47

Modified files:
	mail/mutt      : Makefile distinfo 
	mail/mutt/patches: patch-main_c patch-mutt_sasl_c 
	                   patch-mutt_sasl_h 

Log message:
update to mutt-1.8.3, "This is a bug-fix release. Of note to Gmail users
is a potential crash fix when copy/moving messages to its Trash folder."


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:22:15

Modified files:
	x11/mate/menus : Makefile 
	x11/mate/menus/pkg: PLIST 

Log message:
Comment libtool files for python module.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:32:08

Modified files:
	x11/mate/atril : Makefile 
	x11/mate/atril/pkg: PLIST 
	x11/mate/caja-extensions: Makefile 
	x11/mate/caja-extensions/pkg: PLIST 
	x11/mate/control-center: Makefile 
	x11/mate/control-center/pkg: PLIST 
	x11/mate/engrampa: Makefile 
	x11/mate/engrampa/pkg: PLIST 
	x11/mate/eom   : Makefile 
	x11/mate/eom/pkg: PLIST 
	x11/mate/libmatemixer: Makefile 
	x11/mate/libmatemixer/pkg: PLIST 
	x11/mate/notification-daemon: Makefile 
	x11/mate/notification-daemon/pkg: PLIST 
	x11/mate/pluma : Makefile 
	x11/mate/pluma/pkg: PLIST 
	x11/mate/settings-daemon: Makefile 
	x11/mate/settings-daemon/pkg: PLIST 

Log message:
Comment libtool files for modules.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:35:01

Modified files:
	x11/mate/engrampa: Makefile 
	x11/mate/eom   : Makefile 
	x11/mate/pluma : Makefile 

Log message:
Move USE_WXNEEDED to the top of Makefile.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/05/30 15:42:54

Modified files:
	sys/dev/ic     : pcdisplay_subr.c 

Log message:
Use the CD bit (Cursor Disable) in the cursor start register to properly
disable hardware cursor.

From NetBSD.

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:44:58

Modified files:
	x11/mate/atril : Makefile 
	x11/mate/atril/pkg: DESCR 
	x11/mate/caja  : Makefile 
	x11/mate/caja/pkg: DESCR 
	x11/mate/calc  : Makefile 
	x11/mate/calc/pkg: DESCR 
	x11/mate/control-center: Makefile 
	x11/mate/control-center/pkg: DESCR 
	x11/mate/engrampa: Makefile 
	x11/mate/engrampa/pkg: DESCR 
	x11/mate/eom   : Makefile 
	x11/mate/eom/pkg: DESCR 
	x11/mate/libmatemixer: Makefile 
	x11/mate/libmatemixer/pkg: DESCR 
	x11/mate/libmateweather: Makefile 
	x11/mate/libmateweather/pkg: DESCR 
	x11/mate/marco : Makefile 
	x11/mate/marco/pkg: DESCR 
	x11/mate/media : Makefile 
	x11/mate/media/pkg: DESCR 
	x11/mate/menus : Makefile 
	x11/mate/menus/pkg: DESCR 
	x11/mate/notification-daemon: Makefile 
	x11/mate/notification-daemon/pkg: DESCR 
	x11/mate/pluma : Makefile 
	x11/mate/pluma/pkg: DESCR 
	x11/mate/power-manager: Makefile 
	x11/mate/power-manager/pkg: DESCR 
	x11/mate/screensaver: Makefile 
	x11/mate/screensaver/patches: patch-src_gs-auth-bsdauth_c 
	x11/mate/screensaver/pkg: DESCR 
	x11/mate/session-manager: Makefile 
	x11/mate/session-manager/pkg: DESCR 
	x11/mate/settings-daemon: Makefile 
	x11/mate/settings-daemon/pkg: DESCR 
	x11/mate/terminal: Makefile 
	x11/mate/terminal/pkg: DESCR 
	x11/mate/utils : Makefile 
	x11/mate/utils/pkg: DESCR 

Log message:
fmt(1) DESCR.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/30 15:44:59

Modified files:
	usr.bin/tmux   : Makefile arguments.c cfg.c cmd-choose-tree.c 
	                 cmd-copy-mode.c cmd-find-window.c cmd-queue.c 
	                 cmd-run-shell.c cmd-split-window.c cmd.c 
	                 format.c key-bindings.c options-table.c 
	                 screen-write.c tmux.1 tmux.h window-clock.c 
	                 window-copy.c window.c 
Added files:
	usr.bin/tmux   : mode-tree.c window-buffer.c window-client.c 
	                 window-tree.c 
Removed files:
	usr.bin/tmux   : cmd-choose-buffer.c cmd-choose-client.c 
	                 window-choose.c 

Log message:
Rewrite of choose mode, both to simplify and tidy the code and to add
some modern features.

Now the common code is in mode-tree.c, which provides an API used by the
three modes now separated into window-{buffer,client,tree}.c. Buffer
mode shows buffers, client mode clients and tree mode a tree of
sessions, windows and panes.

Each mode has a common set of key bindings plus a few that are specific
to the mode. Other changes are:

- each mode has a preview pane: for buffers this is the buffer content
(very useful), for others it is a preview of the pane;

- items may be sorted in different ways ('O' key);

- multiple items may be tagged and an operation applied to all of them
(for example, to delete multiple buffers at once);

- in tree mode a command may be run on the selected item (session,
window, pane) or on tagged items (key ':');

- displayed items may be filtered in tree mode by using a format (this
is used to implement find-window) (key 'f');

- the custom format (-F) for the display is no longer available;

- shortcut keys change from 0-9, a-z, A-Z which was always a bit weird
with keys used for other uses to 0-9, M-a to M-z.

Now that the code is simpler, other improvements will come later.

Primary key bindings for each mode are documented under the commands in
the man page (choose-buffer, choose-client, choose-tree).

Parts written by Thomas Adam.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:46:03

Modified files:
	x11/mate/screensaver: Makefile 
	x11/mate/screensaver/patches: patch-src_gs-auth-bsdauth_c 

Log message:
BSDauth type: auth-gnome-screensaver -> auth-mate-screensaver


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:52:18

Modified files:
	x11/mate/atril : Makefile 
	x11/mate/caja-extensions: Makefile 
	x11/mate/calc  : Makefile 
	x11/mate/engrampa: Makefile 
	x11/mate/eom   : Makefile 
	x11/mate/icon-theme: Makefile 
	x11/mate/media : Makefile 
	x11/mate/pluma : Makefile 
	x11/mate/terminal: Makefile 
	x11/mate/utils : Makefile 

Log message:
Consistent indentation.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/30 15:57:39

Modified files:
	sys/net        : if_pflow.c 

Log message:
remove no longer needed splnet/splx.
ok florian@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/30 15:59:34

Modified files:
	x11/mate       : Makefile.inc 
	x11/mate/atril : Makefile 
	x11/mate/caja  : Makefile 
	x11/mate/caja-extensions: Makefile 
	x11/mate/calc  : Makefile 
	x11/mate/control-center: Makefile 
	x11/mate/desktop: Makefile 
	x11/mate/engrampa: Makefile 
	x11/mate/eom   : Makefile 
	x11/mate/icon-theme: Makefile 
	x11/mate/libmatekbd: Makefile 
	x11/mate/libmatemixer: Makefile 
	x11/mate/marco : Makefile 
	x11/mate/media : Makefile 
	x11/mate/menus : Makefile 
	x11/mate/notification-daemon: Makefile 
	x11/mate/panel : Makefile 
	x11/mate/pluma : Makefile 
	x11/mate/session-manager: Makefile 
	x11/mate/settings-daemon: Makefile 
	x11/mate/terminal: Makefile 
	x11/mate/themes: Makefile 
	x11/mate/utils : Makefile 

Log message:
Explicitely pass CONFIGURE_STYLE in all ports; too much magic otherwise
coupled with the mate MODULE. Matches the x11/gnome subdir.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/05/30 15:59:36

Modified files:
	regress/usr.bin/doas: Makefile 

Log message:
Make doas regression tests that involve doas running use a non-nosuid
partition, or skip if it could not find a one.

thanks bluhm@ for valuable input


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/30 16:04:46

Modified files:
	usr.sbin/slaacd: slaacd.c 

Log message:
Oops, this was RTP_BGP during development to be able to easier spot
the configured route. Should be RTP_DEFAULT.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/30 16:06:39

Modified files:
	editors/TeXmacs/patches: patch-configure_in 
Added files:
	editors/TeXmacs/patches: patch-src_Plugins_Qt_QTMSockets_cpp 
	                         patch-src_Plugins_Unix_unix_sys_utils_cpp 

Log message:
minor cleanup, not enough for clang yet though


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/05/30 16:19:36

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/05/30 16:32:10

Modified files:
	sys/arch/amd64/stand: Makefile.inc 
	sys/arch/amd64/stand/biosboot: Makefile 
	sys/arch/amd64/stand/boot: Makefile 
	sys/arch/amd64/stand/cdboot: Makefile 
	sys/arch/amd64/stand/pxeboot: Makefile 

Log message:
Allow building the bootstrap with clang:
* skip the integrated assembler for assym.h
* use as(1) to build biosboot.S and the various versions of srt0.S
ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/30 16:48:27

Modified files:
	net/freeradius3: Tag: OPENBSD_6_1 Makefile distinfo 
	net/freeradius3/patches: Tag: OPENBSD_6_1 
	                         patch-src_main_detail_c 
	                         patch-src_main_tls_c 
	net/freeradius3/pkg: Tag: OPENBSD_6_1 PLIST-main PLIST-mysql 
	                     PLIST-pgsql 
Added files:
	net/freeradius3/patches: Tag: OPENBSD_6_1 patch-configure 
Removed files:
	net/freeradius3/patches: Tag: OPENBSD_6_1 patch-configure_ac 

Log message:
MFC update to freeradius 3.0.14.

Security update for configurations with TLS; FreeRADIUS intentionally
skips inner authentication for TLS resumption, however it allows a
session to be resumed before the initial connection has authenticated,
allowing access without auth to a malicious supplicant. CVE-2017-9148,
See http://seclists.org/oss-sec/2017/q2/342

Workaround: set "enabled = no" in the cache section of raddb/mods-enabled/eap.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/05/30 17:30:48

Modified files:
	usr.sbin/ntpd  : client.c ntp.c ntpd.conf.5 ntpd.h parse.y 

Log message:
add option "query from <ip>" to ntpd.conf, to specify a local IP
address for outgoing ntp queries.
From Job Snijders, thanks!
with feedback and ok henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/30 18:34:33

Modified files:
	sys/lib/libsa  : aes_xts.c 
	sys/crypto     : xform.c 

Log message:
make the AES-XTS mode a little more constant-time, though the AES
implementation that it depends on currently isn't.

ok mikeb tom


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/30 18:43:04

Modified files:
	usr.bin/ssh    : channels.c 

Log message:
fix possible OOB strlen() in SOCKS4A hostname parsing; ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	stefan@cvs.openbsd.org	2017/05/30 21:24:20

Modified files:
	gnu/gcc/gcc/config/i386: openbsd64.h 
	gnu/usr.bin/cc/cc_tools: auto-host.h 

Log message:
Make gcc move switch tables into .rodata instead of .text on i386/amd64

For C++, gcc has to make use of comdat sections instead
of .gnu.linkonce sections for this because
switch tables and functions would now end up
in different .gnu.linkonce sections. This can cause ld
to sometimes incorrectly discard the switch tables, which causes
linker errors. With comdat sections, making the switch table
and function sections belong together is more reliable.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/30 21:37:54

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
Add Ralink RT5360.  From Kevin Lo.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/30 21:38:35

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/30 21:45:15

Modified files:
	share/man/man4 : ral.4 
	sys/dev/ic     : rt2860.c rt2860reg.h 
	sys/dev/pci    : if_ral_pci.c 

Log message:
Add support for Ralink RT5360.  From Kevin Lo who tested with a
D-Link DWA-525 rev A2.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/30 22:14:34

Modified files:
	usr.sbin/relayd: relayd.c 

Log message:
Fix a memory leak in pkey_add() error path.  All current callers fatal
if pkey_add() fails.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/30 22:17:12

Modified files:
	usr.bin/ssh    : kexc25519c.c 

Log message:
one more void *ctx => struct ssh *ssh conversion


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/30 22:18:58

Modified files:
	usr.bin/audioctl: audioctl.c 

Log message:
close fd on an exit path


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/30 22:19:28

Modified files:
	usr.bin/ssh    : kexc25519s.c 

Log message:
one more void *ctx => struct ssh *ssh conversion


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/05/30 22:27:51

Modified files:
	security/yara  : Makefile.inc 
	security/yara/main: distinfo 
	security/yara/python: Makefile distinfo 
	security/yara/python/pkg: PLIST 

Log message:
update yara to 3.6.0.
ok benoit@.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/30 22:29:44

Modified files:
	usr.bin/ssh    : PROTOCOL.certkeys 

Log message:
spell out that custom options/extensions should follow the usual SSH
naming rules, e.g. "extension@example.com"


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/30 22:35:38

Modified files:
	sys/dev/ic     : dpt.c 

Log message:
avoid going outside array bounds
ok krw@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 22:50:55

Modified files:
	usr.sbin/smtpd : dns.c 

Log message:
typo; from Edgar Pettijohn


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/30 22:52:11

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
use strerror; from Edgar Pettijohn


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/30 23:08:46

Modified files:
	usr.bin/ssh    : sshconnect2.c 

Log message:
another ctx => ssh conversion (in GSSAPI code)


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/30 23:14:51

Modified files:
	sys/net        : if_vlan.c 

Log message:
make vlan use their parents lladdr all the time, not just when theyre up.

krw@ has been having issues with dhclient on vlan interfaces because
i made them only configure the lladdr when they were brought up.
dhclient likes to read the mac address and then bring them up.

this makes vlan copy the parents lladdr onto the vlan interface
when the parent is configured. this probably helps with v6 addresses
on vlan interfaces too.

the new code still supports configuring a custom lladdr on a vlan
interface. this can be done both before and after a parent is
configured, and if a parent is removed.

while here, if the parent is reconfigured while the vlan is up, dont
error if the new parent is the same as the current one. this should
make running netstart again less noisy.

ok krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/05/30 23:25:12

Modified files:
	sbin/ifconfig  : ifconfig.c 

Log message:
fold the vnetid and parent lines into a single encap line.

this is a modest attempt to shorten the ifconfig output. encap wont
show up if neither vnetid or parent are supplied by an interface.

whitespace tweaks from benno@
output tweaks from reyk@
ok deraadt@ henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/30 23:34:14

Modified files:
	usr.bin/ssh    : auth2.c 

Log message:
use the ssh_dispatch_run_fatal variant


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/30 23:47:29

Modified files:
	sys/dev/ata    : atascsi.h 

Log message:
fix SATA_SStatus_DET_OFFLINE value and add newer SStatus bits
from Imre Vadasz via sf@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/05/30 23:54:06

Modified files:
	sys/dev/ata    : atascsi.h 

Log message:
add some details relating to SATA device power management
part of a diff from Imre Vadasz via sf@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/05/30 23:59:09

Modified files:
	sys/net        : if.c if_ethersubr.c if_switch.c 
	sys/netinet    : ip_input.c ip_var.h 
	sys/netinet6   : ip6_input.c ip6_var.h 

Log message:
Move IPv4 & IPv6 incoming/forwarding path, PIPEX ppp processing and
IPv4 & IPv6 dispatch functions outside the KERNEL_LOCK().

We currently rely on the NET_LOCK() serializing access to most global
data structures for that.  IP input queues are no longer used in the
forwarding case.  They still exist as boundary between the network and
transport layers because TCP/UDP & friends still need the KERNEL_LOCK().

Since we do not want to grab the NET_LOCK() for every packet, the
softnet thread will do it once before processing a batch.  That means
the L2 processing path, which is currently running without lock, will
now run with the NET_LOCK().

IPsec isn't ready to run without KERNEL_LOCK(), so the softnet thread
will grab the KERNEL_LOCK() as soon as ``ipsec_in_use'' is set.

Tested by Hrvoje Popovski.

ok visa@, bluhm@, henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/31 00:23:19

Modified files:
	usr.sbin/ntpd  : ntpd.conf.5 

Log message:
tweak previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/05/31 00:46:57

Modified files:
	usr.sbin/ikectl: ikeca.c 

Log message:
ca_revoke() gets called two ways.  Directly from ca_opt() with keyname
set to the cert to revoke, and indirectly from ca_create() with a
keyname set to NULL.

ca_create() sets REQ_EXT so avoid setting it in ca_revoke() when keyname
is NULL and the crl database is being initialised.

Avoids "REQ_EXT already set" when creating a CA error introduced
in rev 1.44 which set REQ_EXT unconditionally in ca_revoke().


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/05/31 00:59:13

Modified files:
	bin/ksh        : vi.c 
	regress/bin/ksh/vi: vi.sh 

Log message:
Allow replacement of UTF-8 characters in vi mode.

Reported by Walter Alejandro Iglesias on tech@.

ok schwarze@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/31 01:00:13

Modified files:
	usr.bin/ssh    : auth2.c clientloop.c dispatch.c dispatch.h 
	                 serverloop.c ssh-keyscan.c sshconnect2.c sshd.c 

Log message:
remove now obsolete ctx from ssh_dispatch_run; ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 01:12:28

Modified files:
	sys/sys        : event.h 

Log message:
make a copy of the first EV_SET argument to prevent multiple evaluation.
matches freebsd, fixes lldb. from Kamil Rytarowski at NetBSD.
while here, make the same change to KNOTE. ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/31 01:13:19

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.57.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/31 01:13:35

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.94.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/31 01:14:58

Modified files:
	usr.sbin/slaacd: engine.c frontend.c slaacd.h 

Log message:
remove DEBUG_IMSG; I have figured out imsg flow by now; no binary
change


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 01:18:10

Modified files:
	usr.sbin/bind/bin/dig: dighost.c 

Log message:
add a workaround for the rebound portjacking hijinks. ok millert


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/31 01:19:46

Modified files:
	security/libtasn1: Makefile distinfo 

Log message:
Update to libtasn1-4.12.
- upstream fixed an soname issue which might have been the reason for the
recent pkg_add issues wrt libtasn1; bump major to be on the safe side.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 01:20:26

Modified files:
	usr.bin/lex    : scanopt.c scanopt.h 

Log message:
we can just use void for functions that always return 0.
from Michael W. Bombardieri


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/31 01:25:20

Modified files:
	textproc/highlight: Makefile distinfo 
	textproc/highlight/patches: patch-man_highlight_1 
	                            patch-src_makefile 

Log message:
Update to highlight-3.37.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/31 01:30:33

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
do not leak address and dfr proposals if an interface goes away


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/05/31 01:31:05

Modified files:
	www/owncloud   : Makefile distinfo 
	www/owncloud/patches: patch-version_php 
	www/owncloud/pkg: PLIST 

Log message:
Update to owncloud-10.0.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/05/31 01:48:04

Modified files:
	share/mk       : bsd.dep.mk 

Log message:
Drop -t option from ctags call.

The option has been deprecated for almost 7 years by now.

ok tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 01:55:05

Modified files:
	meta/qt5       : Makefile 
	net/mono-zeroconf: Makefile 

Log message:
replace dependencies by stuff that actually exists, as the bootstrap
requires pseudo flavors, which are actually default, and do NOT contain
those subpackages. Somehow no-one noticed those packages haven't been
in snapshots for a while


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/31 01:55:29

Modified files:
	distrib/miniroot: install.sub 

Log message:
Change cp -pR to pax copy mode with -k when copying /etc/skel. This way
we keep existing files in the user's home directory that might have been
installed from siteXX.tgz. Found the hard way by Erling Westenvik.
Thanks to trondd for helpful analysis.

"If that's what it does, I'm all for it" halex


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/31 02:02:56

Modified files:
	distrib/miniroot: install.sub 

Log message:
whitespace nit


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 02:08:18

Modified files:
	archivers/zstd : Makefile 
	audio/ardour   : Makefile 
	audio/cantata  : Makefile 
	audio/clementine: Makefile 
	audio/mpd      : Makefile 
	audio/ncmpcpp  : Makefile 
	audio/openal   : Makefile 
	audio/pavucontrol: Makefile 
	audio/pulseaudio: Makefile 
	converters/unoconv: Makefile 
	databases/mongodb: Makefile 
	devel/atk2mm   : Makefile 
	devel/bullet   : Makefile 
	devel/cbmc     : Makefile 
	devel/codeblocks: Makefile 
	devel/cpp-hocon: Makefile 
	devel/cppcheck : Makefile 
	devel/glib2mm  : Makefile 
	devel/keystone : Makefile 
	devel/leatherman: Makefile 
	devel/libsigc++-2: Makefile 
	devel/pangomm  : Makefile 
	devel/qt-creator: Makefile 
	devel/spidermonkey38: Makefile 
	devel/vte3     : Makefile 
	devel/xulrunner/24: Makefile 
	editors/abiword: Makefile 
	editors/libreoffice: Makefile 
	editors/subtitleeditor: Makefile 
	emulators/desmume: Makefile 
	emulators/emulationstation: Makefile 
	emulators/mednafen: Makefile 
	emulators/mgba : Makefile 
	emulators/mupen64plus/video-glide64mk2: Makefile 
	emulators/qemu : Makefile 
	emulators/snes9x: Makefile 
	emulators/vbam : Makefile 
	emulators/xnp2 : Makefile 
	emulators/xroar: Makefile 
	games/0ad/base : Makefile 
	games/bastet   : Makefile 
	games/dhewm3   : Makefile 
	games/extremetuxracer: Makefile 
	games/flightgear/base: Makefile 
	games/galois   : Makefile 
	games/gottcode : Makefile.inc 
	games/lugaru   : Makefile 
	games/openmw   : Makefile 
	games/openxcom : Makefile 
	games/pingus   : Makefile 
	games/solarus/solarus: Makefile 
	games/stone-soup: Makefile 
	games/sumwars  : Makefile 
	games/supertux : Makefile 
	games/supertuxkart: Makefile 
	games/tome4    : Makefile 
	games/ufoai/base: Makefile 
	games/warzone2100: Makefile 
	geo/osm2pgsql  : Makefile 
	geo/pgrouting  : Makefile 
	geo/qgis       : Makefile 
	geo/viking     : Makefile 
	graphics/blender: Makefile 
	graphics/cairomm: Makefile 
	graphics/cfdg  : Makefile 
	graphics/darktable: Makefile 
	graphics/enblend-enfuse: Makefile 
	graphics/ffmpeg: Makefile 
	graphics/glm   : Makefile 
	graphics/hugin : Makefile 
	graphics/inkscape: Makefile 
	graphics/libgexiv2: Makefile 
	graphics/libgxps: Makefile 
	graphics/maim  : Makefile 
	graphics/mapnik: Makefile 
	graphics/nomacs: Makefile 
	graphics/openimageio: Makefile 
	graphics/pdf2djvu: Makefile 
	graphics/rawtherapee: Makefile 
	graphics/simgear: Makefile 
	graphics/slop  : Makefile 
	graphics/tesseract/tesseract: Makefile 
	graphics/ttfautohint: Makefile 
	graphics/vigra : Makefile 
	infrastructure/mk: bsd.port.mk modules.port.mk 
	lang/guile2    : Makefile 
	lang/node      : Makefile 
	lang/pypy      : Makefile 
	lang/racket-minimal: Makefile 
	mail/lumail    : Makefile 
	mail/mimetic   : Makefile 
	mail/mozilla-thunderbird: Makefile 
	math/ginac     : Makefile 
	misc/gtk3mm-documentation: Makefile 
	multimedia/gstreamer1: Makefile.inc 
	multimedia/gstreamer1/mm: Makefile 
	multimedia/libvpx: Makefile 
	multimedia/mkvtoolnix: Makefile 
	multimedia/qt-gstreamer: Makefile 
	multimedia/sfml: Makefile 
	multimedia/synfig: Makefile 
	multimedia/synfigstudio: Makefile 
	multimedia/x265: Makefile 
	net/bro        : Makefile 
	net/dnsdist    : Makefile 
	net/filezilla  : Makefile 
	net/freeradius3: Makefile 
	net/gdnsd      : Makefile 
	net/icinga/core2: Makefile 
	net/owncloudclient: Makefile 
	net/powerdns   : Makefile 
	net/transmission: Makefile 
	net/znc        : Makefile 
	print/cups-filters: Makefile 
	productivity/ledger: Makefile 
	productivity/taskd: Makefile 
	productivity/taskwarrior: Makefile 
	productivity/workrave: Makefile 
	security/botan2: Makefile 
	sysutils/facter: Makefile 
	sysutils/gource: Makefile 
	sysutils/grive2: Makefile 
	sysutils/gsmartcontrol: Makefile 
	sysutils/logstalgia: Makefile 
	sysutils/simple-mtpfs: Makefile 
	sysutils/tmux-mem-cpu-load: Makefile 
	textproc/enchant: Makefile 
	textproc/highlight: Makefile 
	textproc/libxml++: Makefile 
	textproc/libxml++3: Makefile 
	textproc/link-grammar: Makefile 
	textproc/pdfgrep: Makefile 
	textproc/pdftk : Makefile 
	textproc/podofo: Makefile 
	textproc/the_silver_searcher: Makefile 
	textproc/vislcg3: Makefile 
	www/aria2      : Makefile 
	www/cclive     : Makefile 
	www/chromium   : Makefile 
	www/epiphany   : Makefile 
	www/firefox-esr: Makefile 
	www/iridium    : Makefile 
	www/mozilla-firefox: Makefile 
	www/newsbeuter : Makefile 
	www/seamonkey  : Makefile 
	www/squid      : Makefile 
	www/tor-browser/browser: Makefile 
	www/webkit     : Makefile 
	www/webkitgtk4 : Makefile 
	x11/cegui      : Makefile 
	x11/dbusmenu-qt: Makefile 
	x11/fsv        : Makefile 
	x11/girara     : Makefile 
	x11/gnome/aisleriot: Makefile 
	x11/gnome/builder: Makefile 
	x11/gnome/gjs  : Makefile 
	x11/gnome/libgnomecanvasmm: Makefile 
	x11/gnome/recipes: Makefile 
	x11/gnome/shell: Makefile 
	x11/gnome/system-monitor: Makefile 
	x11/gnustep    : gnustep.port.mk 
	x11/gnustep/libobjc2: Makefile 
	x11/gnustep/make: Makefile 
	x11/gtk2mm     : Makefile 
	x11/gtk3mm     : Makefile 
	x11/gtkglextmm : Makefile 
	x11/gtksourceviewmm3: Makefile 
	x11/herbstluftwm: Makefile 
	x11/kde4       : kde4.port.mk 
	x11/kde4/cantor: Makefile 
	x11/lemonbar   : Makefile 
	x11/libqaccessibilityclient: Makefile 
	x11/nitrogen   : Makefile 
	x11/ogre       : Makefile 
	x11/pinot      : Makefile 
	x11/qt5        : qt5.port.mk 
	x11/vlc        : Makefile 
	x11/worker     : Makefile 
Added files:
	infrastructure/mk: compiler.port.mk 

Log message:
switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/31 02:09:45

Modified files:
	usr.bin/ssh    : monitor.c monitor_wrap.h opacket.h packet.c 
	                 packet.h session.c sshd.c umac.c 

Log message:
clear session keys from memory; ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 02:10:01

Modified files:
	games/eduke32  : Makefile 
	games/eduke32/patches: patch-Makefile_common 
Added files:
	games/eduke32/patches: patch-Makefile patch-Makefile_deps 
	                       patch-build_Makefile_deps 

Log message:
also switch to COMPILER, as weel as pending patch to kill hidden dep on lz4


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/05/31 02:10:24

Modified files:
	sys/dev/pv     : virtio.c 

Log message:
Optimize virtio_enqueue_trim() a bit by nuking unneeded
re-initializations of statically set fields. Move a common
chunk out of both clauses of if/else.

No intentional functional change.

ok sf@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/05/31 02:12:27

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
document COMPILER, this is getting to be clean enough to be documentable


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/31 02:14:52

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Implement support for iwm(4) firmware's missed beacon notification.
Requested by deraadt@
ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/31 02:23:33

Modified files:
	sys/arch/amd64/stand/libsa: cmd_i386.c 

Log message:
Disable "machine boot" and "machine comaddr" from efiboot.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 02:30:22

Modified files:
	share/man/man7 : Makefile 
Added files:
	share/man/man7 : utf8.7 

Log message:
add a tiny, to be improved, man page for utf8 encoding.
ok stsp


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/31 02:33:12

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Add missing function prototype for iwm_rx_bmiss().


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 02:39:21

Modified files:
	databases/sqlports: Makefile 
	databases/sqlports/files: Info.pm 
	databases/sqlports/pkg: DESCR-compact DESCR-main 

Log message:
pass COMPILER/COMPILER_LANGS thru


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/05/31 02:40:32

Modified files:
	sys/arch/amd64/stand/efiboot: conf.c efiboot.c efiboot.h 
	sys/arch/amd64/stand/libsa: dev_i386.c 

Log message:
Add serial console support for efiboot.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 02:43:44

Modified files:
	usr.bin/tmux   : tmux.h tty-term.c tty.c 

Log message:
Look for setrgbf and setrgbb terminfo extensions for RGB colour. This is
the most reasonable of the various (some bizarre) suggestions for
capabilities.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 02:53:39

Modified files:
	infrastructure/mk: modules.port.mk 

Log message:
put a guard to prevent the nasty issue I ran into with cantor


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/31 02:55:10

Modified files:
	sys/kern       : uipc_socket.c 
	sys/sys        : socket.h 

Log message:
new socketoption SO_ZEROIZE: zero out all mbufs sent over socket
ok deraadt bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/05/31 02:57:48

Modified files:
	sys/dev/pci    : virtio_pci.c 

Log message:
virtio_pci: Support IPL_MPSAFE interrupt handlers


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/31 02:58:52

Modified files:
	usr.bin/ssh    : channels.c packet.c 

Log message:
These shutdown() SHUT_RDWR are not needed before close()
ok djm markus claudio


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/31 03:15:42

Modified files:
	usr.bin/ssh    : auth2-pubkey.c authfile.c bitmap.c clientloop.c 
	                 hostfile.c krl.c misc.c scp.c session.c 
	                 ssh-pkcs11.c sshbuf.c sshkey.c utf8.c xmalloc.c 
	                 xmalloc.h 

Log message:
Switch to recallocarray() for a few operations.  Both growth and shrinkage
are handled safely, and there also is no need for preallocation dances.
Future changes in this area will be less error prone.
Review and one bug found by markus


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/31 03:17:40

Modified files:
	sys/dev/ic     : ath.c 
	sys/dev/pci    : if_iwm.c 
	sys/net80211   : ieee80211.c ieee80211_var.h 

Log message:
The net80211 stack was providing a 'beacon miss timeout' value (in ms)
which specified how much time may elapse without beacons before drivers
begin searching for a new AP.

Drivers convert this timeout value into the amount of beacons they're allowed
to miss. Having the stack provide this number upfront simplifies things.

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/31 03:19:10

Modified files:
	sys/net        : pf.c 
	share/man/man5 : pf.conf.5 

Log message:
Block IPv6 packets in pf(4) that have hop-by-hop options header or
destination options header.  Such packets can be passed by adding
"allow-opts" to the rule.  So IPv6 options are handled like their
counterpart in IPv4 now.
tested by benno@; OK henning@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/05/31 03:25:17

Modified files:
	regress/sys/netinet6/frag6: Makefile 
Added files:
	regress/sys/netinet6/frag6: pf.conf 

Log message:
As pf blocks packets with IPv6 options header, the tests needs an
allow-opts rule.


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/05/31 03:30:38

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
clarify that translations happen immediately on match rules, not generally
Tony Gong <tony.y.gong at gmail>


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/05/31 03:39:03

Modified files:
	usr.sbin/slaacd: engine.c 

Log message:
Deleting a default route proposal is a bit of work and the code got
copied around (not always correctly). Introduce free_dfr_proposal() to
have this in one place.


CVSROOT:	/cvs
Module name:	www
Changes by:	bluhm@cvs.openbsd.org	2017/05/31 03:43:15

Modified files:
	faq            : current.html 

Log message:
Now pf blocks IPv6 options.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 03:58:36

Modified files:
	share/man/man7 : utf8.7 

Log message:
utf8 has an rfc


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/05/31 04:03:03

Modified files:
	faq            : current.html 

Log message:
ocd


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/31 04:04:29

Modified files:
	usr.bin/ssh    : monitor.c 

Log message:
use SO_ZEROIZE for privsep communication (if available)


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/31 04:06:02

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
minor tweaks;


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 04:09:31

Modified files:
	share/man/man7 : utf8.7 

Log message:
perhaps a few more words about encoding format


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 04:15:51

Modified files:
	usr.bin/tmux   : server-client.c tmux.h window.c 

Log message:
Because we defer actually resizing applications (calling TIOCSWINSZ)
until the end of the server loop, tmux may have gone through several
internal resizes in between. This can be a problem if the final size is
the same as the initial size (what the application things it currently
is), because the application may choose not to redraw, assuming the
screen state is unchanged, when in fact tmux has thrown away parts of
the screen, assuming the application will redraw them.

To avoid this, do an extra resize if the new size is the same size as
the initial size. This should force the application to redraw when tmux
needs it to, while retaining the benefits of deferring (so we now resize
at most two times instead of at most one - and only two very rarely).

Fixes a problem with break-pane and zoomed panes reported by Michal
Mazurek.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 04:29:15

Modified files:
	usr.bin/tmux   : server-client.c tmux.h tty.c 

Log message:
It is not OK to ignore SIGWINCH if SIOCGWINSZ reports the size has
unchanged, because it may have changed and changed back in the time
between us getting the signal and calling ioctl(). Always redraw when we
see SIGWINCH.


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/05/31 04:29:47

Modified files:
	lib/libc/sys   : Makefile.inc 

Log message:
install futex(2), ok mpi


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/05/31 04:30:30

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/31 04:44:00

Modified files:
	usr.sbin/bgpd  : bgpd.h kroute.c parse.y printconf.c rde_attr.c 
	                 util.c 

Log message:
Rework the way we do extended communities (mainly in the parser) and update
the IANA table to a somewhat more complete list. This includes BGP Prefix
Origin Validation State support via the ext-community ovs keyword.
OK henning@ benno@ based on a diff by Job Snijders


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/31 04:47:21

Modified files:
	usr.sbin/bgpd  : kroute.c 

Log message:
Oups, that should have not been committed. Revert.


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/31 04:48:06

Modified files:
	usr.sbin/bgpctl: bgpctl.c 

Log message:
Update ext community printer to the changes done in bgpd.
OK henning@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/31 04:49:10

Modified files:
	usr.sbin/bgpd  : bgpd.8 bgpd.conf.5 

Log message:
Man page bits for ext-community which grew a few more subtypes.
Based on a diff from Job Snijders


CVSROOT:	/cvs
Module name:	src
Changes by:	markus@cvs.openbsd.org	2017/05/31 04:54:00

Modified files:
	usr.bin/ssh    : auth-options.c auth-options.h auth2-pubkey.c 

Log message:
make sure we don't pass a NULL string to vfprintf (triggered by the
principals-command regress test); ok bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 05:00:00

Modified files:
	usr.bin/tmux   : server-client.c tmux.h 

Log message:
Some applications like vi(1) and tmux until 10 minutes or so ago, do not
redraw on SIGWINCH if the size returns to the original size between the
original SIGWINCH and when they get around to calling TIOCGWINSZ. So use
the existing resize timer to introduce a small delay between the two
resizes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/31 05:21:17

Modified files:
	games/wtf      : Makefile distinfo 

Log message:
Update to wtf-20170529.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/31 05:42:57

Modified files:
	www/p5-HTML-Lint: Makefile distinfo 

Log message:
Update to p5-HTML-Lint-2.26.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/05/31 05:49:28

Modified files:
	geo/qgis       : Makefile distinfo 
	geo/qgis/patches: patch-src_app_qgisapp_cpp 
	geo/qgis/pkg   : PLIST 

Log message:
Bugfix update to QGIS 2.18.9.


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/31 06:24:06

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
add ieee80211_min_basic_rate() to iwm(4), to select the lowest available
datarate for management frames

based on revs 1.187 and r 1.188 from iwn(4)

OK stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/05/31 06:34:52

Modified files:
	lang/seed7     : Makefile distinfo 
	lang/seed7/pkg : PLIST 

Log message:
Update to seed7-20170530.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/05/31 06:46:30

Modified files:
	share/man/man7 : utf8.7 

Log message:
section order;


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/05/31 07:05:43

Modified files:
	sys/net        : if_pflow.c if_pflow.h 

Log message:
Use mbuf_queue to properly serialize access to pflow output queue.

Input from mpi@, jmatthew@; OK mpi@, henning@, benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/05/31 07:22:16

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
another place to use ieee80211_min_basic_rate() to select the minimum tx rate

OK stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/31 07:53:28

Modified files:
	www/nghttp2    : Makefile distinfo 

Log message:
update to nghttp2-1.23.1


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/05/31 08:52:05

Modified files:
	sys/kern       : kern_event.c 
	sys/sys        : event.h 
	lib/libc/sys   : kqueue.2 

Log message:
Add support for EV_RECEIPT and EV_DISPATCH flags

From FreeBSD via Jan Schreiber <jes at posteo ! de>, thanks!
OK tedu, bluhm


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 09:03:27

Modified files:
	converters/unoconv: Makefile 
	converters/unoconv/pkg: PLIST 
Added files:
	converters/unoconv/pkg: PFRAG.PRELOAD_WRAPPER 

Log message:
fix packaging in the non-wrapped case, for when libreoffice will build


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/05/31 09:04:38

Added files:
	www/p5-WWW-Curl/patches: patch-curlopt-constants_c 

Log message:
Curl defines this as empty, so perl fucks up with clang.
hilarious discussion at upstream


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 09:26:41

Modified files:
	usr.bin/tmux   : window-buffer.c 

Log message:
Need time.h.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 09:27:57

Modified files:
	usr.bin/tmux   : window-client.c 

Log message:
time.h here too.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/31 09:30:12

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 

Log message:
STYLE message about missing use of Ox/Nx/Fx/Dx; OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/31 09:35:22

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
remove -X, it was just migrated to mandoc -Wstyle; OK wiz@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/05/31 10:11:16

Modified files:
	graphics/tiff  : Tag: OPENBSD_6_1 Makefile distinfo 
	graphics/tiff/patches: Tag: OPENBSD_6_1 
	                       patch-libtiff_tif_getimage_c 
	                       patch-libtiff_tif_luv_c 
	                       patch-man_Makefile_in 
	graphics/tiff/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
Security update to 4.0.8:
Fixes CVE-2017-5225, CVE-2017-7592 to -7602


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/05/31 10:12:39

Modified files:
	sys/dev/pci    : if_iwn.c 

Log message:
Implement support for missed beacon notifications in iwn(4).
Works with WIFIonICE.
ok phessler@


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/31 10:13:25

Modified files:
	usr.bin/cvs    : tag.c 

Log message:
Fix opencvs tag so it does not attempt to to local operations in a remote setup.

While here make sure the "up-to-date" check (-c) works as one expects.


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/31 10:14:37

Modified files:
	usr.bin/cvs    : annotate.c 

Log message:
fix indentation


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/31 10:18:20

Modified files:
	usr.bin/cvs    : repository.c 

Log message:
When unlocking a directory only unlock the given one rather then all repo_locks.


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/31 10:31:55

Modified files:
	usr.bin/cvs    : rcs.c 

Log message:
Plug memleak in rcs_translate_tag() that was causing havoc on large repos.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 10:44:33

Modified files:
	usr.bin/tmux   : cmd-find-window.c 

Log message:
Shut up a warning.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/31 10:44:52

Modified files:
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/05/31 10:48:16

Modified files:
	usr.bin/cvs    : commit.c 

Log message:
Do not use CVS_LOCK_REPO for committing.

This flag tells our file recursion code that for each directory entered
we should lock it. Commit however locks all relevant directories on its
own when it is about to make changes and should not depend on the file
recursion code to do so.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/31 11:16:48

Modified files:
	share/man/man7 : airport.7 utf8.7 

Log message:
use the standard OpenBSD license for new manual pages
rather than some 2-clause variant of the ancient BSD license;
OK benno@ tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/05/31 11:56:48

Modified files:
	usr.bin/tmux   : cmd-set-option.c format.c job.c options.c 
	                 screen-write.c utf8.c window-buffer.c 

Log message:
Style and spacing nits.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/31 11:58:56

Modified files:
	share/man/man7 : utf8.7 

Log message:
about ten different improvements; OK tedu@ espie@ bentley@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/05/31 13:18:19

Modified files:
	sys/arch/i386/conf: Makefile.i386 files.i386 ld.script 
	sys/arch/i386/i386: autoconf.c locore.s 
	sys/arch/amd64/amd64: autoconf.c locore.S 
	sys/arch/amd64/conf: Makefile.amd64 files.amd64 ld.script 
Added files:
	sys/conf       : makegap.sh 
	sys/arch/i386/i386: locore0.S 
	sys/arch/amd64/amd64: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.
Late during kernel boot, unmap the early startup code.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code,
which has been unmapped.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.

ok kettenis mlarkin visa, also thanks to tedu for getting me back to this


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/05/31 13:41:30

Modified files:
	usr.bin/from   : from.c 

Log message:
Use ferror() to check for getline() failure.  From Scott Cheloha.
OK jung@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/05/31 13:51:27

Modified files:
	games/battlestar: battlestar.c 

Log message:
late game space battles require tty pledge to clear screen, etc.
from tomr


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/31 13:59:38

Modified files:
	databases/openldap: Makefile 
Added files:
	databases/openldap/patches: 
	                            patch-servers_slapd_back-mdb_search_c 

Log message:
add upstream patch to openldap:
ITS#8655 fix double free on paged search with pagesize 0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/05/31 14:00:56

Modified files:
	databases/openldap: Tag: OPENBSD_6_1 Makefile 
Added files:
	databases/openldap/patches: Tag: OPENBSD_6_1 
	                            patch-servers_slapd_back-mdb_search_c 

Log message:
MFC: add upstream patch to openldap:
ITS#8655 fix double free on paged search with pagesize 0


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/05/31 14:01:51

Modified files:
	usr.sbin/bgpd  : parse.y 

Log message:
Too vs To. Found by Denis Fondras openbsd (at) ledeuns (dot) net


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/31 14:16:49

Modified files:
	devel/pcre     : Makefile distinfo 
	devel/pcre/pkg : PLIST 
Added files:
	devel/pcre/patches: patch-configure 
Removed files:
	devel/pcre/patches: patch-pcre_compile_c patch-pcre_internal_h 
	                    patch-pcreposix_c 

Log message:
update to pcre-8.40

ok jca@ robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/05/31 14:18:43

Modified files:
	bin/ksh        : vi.c 

Log message:
Let the 's' command delete the right number of bytes when UTF-8
characters are involved; similar to what anton@ previously did for 'r';
OK tb@ anton@;
also tested by Walter Alejandro Iglesias <wai at roquesor dot com>.


CVSROOT:	/cvs
Module name:	ports
Changes by:	millert@cvs.openbsd.org	2017/05/31 14:33:44

Modified files:
	security/sudo  : Makefile distinfo 

Log message:
update to sudo 1.8.20p2; no real change on OpenBSD


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/05/31 14:43:49

Modified files:
	usr.sbin/slaacctl: slaacctl.8 

Log message:
No slaacd.conf(5) is currently planned. Remove Xr to nonexistent manual.

ok florian


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/31 15:38:10

ports/devel/kf5/kactivities/patches

Update of /cvs/ports/devel/kf5/kactivities/patches
In directory cvs.openbsd.org:/tmp/cvs-serv66532/patches

Log Message:
Directory /cvs/ports/devel/kf5/kactivities/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/31 15:47:17

Added files:
	devel/kf5/kactivities/patches: patch-autotests_common_test_h 

Log message:
unbreak build with -fno-operator-names

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/05/31 16:02:09

Modified files:
	editors/calligra: Makefile 
	editors/calligra/patches: 
	                          patch-plugins_videoshape_FullScreenPlayer_cpp 
	                          patch-plugins_videoshape_FullScreenPlayer_h 
	                          patch-plugins_videoshape_SelectVideoWidget_cpp 
	                          patch-plugins_videoshape_VideoThumbnailer_cpp 
	                          patch-plugins_videoshape_VideoThumbnailer_h 
	                          patch-stage_plugins_eventactions_sound_KPrSoundEventAction_cpp 

Log message:
unbreak calligra build

Use phonon-qt5 and not phonon(kde4) includes. Calligra is a pure KDE5
application.

spotted by naddy@ Thanks

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/05/31 16:30:21

Modified files:
	infrastructure/templates: mk.conf.template 

Log message:
poison WANT_CXX, ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	abieber@cvs.openbsd.org	2017/05/31 17:50:54

Modified files:
	games/ioquake3 : Makefile distinfo 

Log message:
Bump to latest version. Full changlog here:
https://github.com/ioquake/ioq3/compare/d4e1a01f33cde5566b636f461de06b1df9657e25...8a50e2aa09e05149f4d0b72b148da12caa56f73f

OK awolk@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/05/31 22:51:58

Modified files:
	usr.bin/ssh    : sshbuf-getput-basic.c bitmap.c 

Log message:
fix casts re constness


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 00:08:09

Modified files:
	x11/mate/atril : Makefile 
	x11/mate/calc  : Makefile 
	x11/mate/control-center: Makefile 
	x11/mate/engrampa: Makefile 
	x11/mate/eom   : Makefile 
	x11/mate/marco : Makefile 
	x11/mate/panel : Makefile 
	x11/mate/pluma : Makefile 
	x11/mate/power-manager: Makefile 
	x11/mate/terminal: Makefile 
	x11/mate/utils : Makefile 

Log message:
Missing yelp in MODGNOME_TOOLS.
Reported by Leo Unglaub for mata-terminal (missing bdep on itstool).


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/01 00:16:43

Modified files:
	usr.bin/ssh    : packet.c 

Log message:
some warnings spotted by clang; ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/01 00:58:25

Modified files:
	usr.bin/ssh    : sshbuf.c 

Log message:
unconditionally zero init size of buffer; ok markus@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/01 00:59:21

Modified files:
	usr.bin/ssh    : bitmap.c 

Log message:
no need to bzero allocated space now that we use use recallocarray;
ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/01 01:04:54

Modified files:
	www/p5-CGI-Compile: Makefile distinfo 

Log message:
Update to p5-CGI-Compile-0.22.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 01:18:26

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.58.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 01:18:38

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.95.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 01:21:46

Modified files:
	sysutils/awless: Makefile distinfo 

Log message:
Update to awless-0.1.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/01 01:42:48

Modified files:
	graphics/sane-backends: Makefile 
	graphics/sane-backends/pkg: PLIST 

Log message:
un-tedu graphics/sane-backends, removing sys/scanio.h caused one of the backends
not to be built, breaking packaging and knocking out about 15 ports.  ok aja


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/01 01:58:56

Modified files:
	usr.bin/units  : units.lib 

Log message:
update currency exchange rates;


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 02:01:29

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/patches: patch-bin_bq 
	                                   patch-bin_docker-credential-gcloud 
	                                   patch-bin_gcloud 
	                                   patch-bin_git-credential-gcloud_sh 
	                                   patch-bin_gsutil 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-157.0.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/06/01 02:08:24

Modified files:
	usr.bin/cvs    : add.c admin.c annotate.c checkout.c commit.c 
	                 cvs.c cvs.h diff.c edit.c file.c getlog.c 
	                 import.c init.c release.c remove.c root.c 
	                 status.c tag.c update.c util.c version.c 
	                 watch.c 

Log message:
Stop looking at current_cvsroot->cr_method to figure out if we're remote or not.

Instead use cvsroot_is_local() and cvsroot_is_remote().


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/06/01 02:17:27

Modified files:
	usr.bin/cvs    : client.c 

Log message:
Don't look at file_type until after cvs_remote_classify_file() was called.
The file status may be unknown until after that call.


CVSROOT:	/cvs
Module name:	src
Changes by:	joris@cvs.openbsd.org	2017/06/01 02:38:56

Modified files:
	usr.bin/cvs    : file.c 

Log message:
If CVS_LOCK_REPO is set only attempt to unlock the repo if we're local.

Otherwise we end up calling cvs_repository_unlock() with garbage from the
stack if we're dealing with a remote cvsroot.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/01 02:46:34

Modified files:
	lib/librthread : Makefile 

Log message:
New condvar introduced a regression with vmd(8), revert until it is found.

Reported by Gregor Best.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/01 03:47:55

Modified files:
	sys/dev/usb    : ohci.c ohcivar.h 

Log message:
Defering some processing to the soft-interrupt handler introduced a
race.  Revert for now.

Issue found by claudio@.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/01 04:43:34

Modified files:
	distrib/sets/lists/base: md.alpha md.amd64 md.arm64 md.armv7 
	                         md.hppa md.i386 md.landisk md.loongson 
	                         md.luna88k md.macppc md.octeon md.sgi 
	                         md.socppc md.sparc64 
	distrib/sets/lists/comp: md.alpha md.amd64 md.arm64 md.armv7 
	                         md.hppa md.i386 md.landisk md.loongson 
	                         md.luna88k md.macppc md.octeon md.sgi 
	                         md.socppc md.sparc64 

Log message:
crtbegin and crtend files need to be in comp, to support relink of
libraries other than crt0
noticed by mikeb, solution from kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/01 04:59:23

Modified files:
	lib/librthread : Makefile 

Log message:
Re-enabled futex based condvar & mutexes, they are not the cause of
vmd(8)'s regression.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/01 05:18:53

Modified files:
	sys/arch/i386/stand: Makefile.inc 
	sys/arch/i386/stand/biosboot: Makefile 
	sys/arch/i386/stand/boot: Makefile 
	sys/arch/i386/stand/cdboot: Makefile 
	sys/arch/i386/stand/pxeboot: Makefile 

Log message:
Sync with amd64 and allow building the i386 bootstrap with clang:
* build with -ffreestanding
* skip the integrated assembler for assym.h
* use as(1) to build biosboot.S and the various versions of srt0.S
ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 05:29:12

Modified files:
	games/vegastrike/engine: Makefile 
	games/vegastrike/engine/patches: patch-Makefile_in 
	                                 patch-configure 
	                                 patch-src_cmd_unit_generic_cpp 
Added files:
	games/vegastrike/engine/patches: 
	                                 patch-setup_src_include_central_cpp 
	                                 patch-setup_src_include_display_gtk_cpp 
	                                 patch-setup_src_include_file_cpp 
	                                 patch-setup_src_include_general_cpp 
	                                 patch-src_audio_Exceptions_h 
	                                 patch-src_cmd_script_script_statement_cpp 
	                                 patch-src_cmd_unit_jump_h 
	                                 patch-src_cmd_unit_physics_h 
	                                 patch-src_gldrv_hashtable_3d_h 
	                                 patch-src_gui_textinputdisplay_h 
	                                 patch-src_physics_h 
	                                 patch-src_ship_commands_cpp 

Log message:
fix with clang


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/01 05:32:15

Modified files:
	sys/arch/amd64/stand/efiboot: conf.c efiboot.c 

Log message:
Don't panic when we cannot locate a handle for the Serial IO protocol.
Fixes reports on tech and in private.

ok yasuoka@ stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 05:43:44

Modified files:
	graphics/babl  : Makefile distinfo 

Log message:
Update to babl-0.1.28.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/01 05:44:00

Modified files:
	graphics/gegl03: Makefile distinfo 

Log message:
Update to gegl03-0.3.18.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 05:47:06

Modified files:
	x11/gnustep    : Makefile.inc 

Log message:
bad sebastia. COPYING in libobjc2 is a short BSD clone licence.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 05:57:42

Modified files:
	games/residualvm: Makefile 
	games/scummvm  : Makefile 

Log message:
timing. those snuck in while I was doing the change


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/01 06:06:29

Modified files:
	archivers/zstd : Makefile 

Log message:
LANGS -> COMPILER_LANGS


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/01 06:14:48

Modified files:
	lib/libc/arch/i386: SYS.h 

Log message:
Remove branch prediction hint from conditional branch instruction.
These hints are not recognized by clang's builtin assembler.
From the corresponding amd64 change.  ok visa@ kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 06:18:54

Modified files:
	www/p5-WWW-Curl/patches: patch-Makefile_PL 
Removed files:
	www/p5-WWW-Curl/patches: patch-curlopt-constants_c 

Log message:
oops, curlopt-constants is a generated file, so patch the generator instead


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 06:26:14

Modified files:
	usr.sbin/acpidump: acpidump.8 

Log message:
mention /var/db/acpi; diff from Jan Stary <hans at stare dot cz>;
OK deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 07:05:23

Modified files:
	faq/ports      : guide.html 

Log message:
Without distinfo, "make fetch-all" is no longer willing to fetch anything,
but without the distfile, you cannot compute distinfo.
So tell people to use "make makesum", which will also fetch what's needed.


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/06/01 07:30:08

Modified files:
	x11/smplayer   : Makefile distinfo 

Log message:
Update for SMPlayer to 17.6.0:

(2017-05-23)
* (Add bookmark) Set focus on the name field.
* Save bookmarks just after edit.

(2017-05-16)
* Add an option in preferences -> network -> chromecast to convert
automatically
SRT subtitles to VTT.

(2017-05-11)
* Possibility to pass options to the acompressor filter (in smplayer.ini).

OK benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 07:37:08

Modified files:
	x11/gnustep/make: Makefile 
Added files:
	x11/gnustep/make/patches: clangpatch-target_make 

Log message:
base clang requires -lc++abi   for objc2 code to be linking, so fix that


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 07:40:46

Modified files:
	x11/gnustep/make: Makefile 

Log message:
bump REVISION.
Remove PKG_ARCH=* this didn't even make sense before as there
are configuration discrepancies between architectures, and now the
clang files are different


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/01 07:42:01

Modified files:
	net/knot       : Makefile distinfo 
	net/knot/patches: patch-samples_knot_sample_conf_in 
	net/knot/pkg   : PLIST knot.rc 
Added files:
	net/knot/patches: patch-src_contrib_lmdb_mdb_c 
	                  patch-src_libknot_lookup_h 

Log message:
Major update to knot-2.4.2

Upstream stopped supporting LTS 1.6.* releases.  Let's move to the 2.x
branch which only supports LMDB (patched to use MDB_WRITEMAP) and
uses __thread (thus, needs clang or lang/gcc).

The config format changed a bit, /usr/local/libexec/knot1to2 might help.

Most work done by Alexis Vachette, ok fcambus@


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 08:00:55

Modified files:
	faq/ports      : specialtopics.html 

Log message:
Add a handful of recommendations for non-English manual pages.
When these were shown on the ports@ mailing list, no objections
came up, but a small amount of support was voiced.
Can be improved in tree if needed.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/01 08:12:23

Modified files:
	faq/ports      : specialtopics.html 

Log message:
<me> -> <em>


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 08:18:06

Modified files:
	editors/joe    : Makefile 

Log message:
Use iconv(1) to convert the russian manual page from KOI8-T to UTF-8
before installing; sthen@ agrees with the general direction.

Even though the russian manual is known to be heavily outdated, i
strongly dislike the idea of expecting porters to judge the quality
of the content of third-party documentation (as opposed to fixing
technical issues).  When i said as much on ports@, nobody really
objected.

So for now, merely fix the encoding.  If people *really* want the
manual page deleted, that can still be done.


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/01 08:38:28

Modified files:
	sbin/pfctl     : pfctl_parser.c 
	sys/net        : pf_ioctl.c 
	usr.bin/systat : pf.c 
	usr.sbin/snmpd : mib.c 

Log message:
Return time_uptime as value for when pf was enabled instead of
time_second.  Since time_second changes depending on the wall-
clock time, time_second is not a reliable source for the status.
We can even end up with a negative time delta.  Thus, use the
monotonically growing time_uptime and export it to userland.

ok bluhm@ mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 08:55:24

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
Delete -f.  What matters is covered by mandoc.
OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/06/01 09:23:43

Modified files:
	sbin/iked      : iked.conf.5 ikev2.c 

Log message:
Expand $eapid in iked tags, allowing PF rules to be written based on EAP
identity (username). OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 09:24:41

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 

Log message:
STYLE message about full stop at the end of .Nd; inspired by mdoclint(1)


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/01 10:36:52

Log message:
    Import graphics/krita 3.1.4
    
    Krita is a raster graphics editor based on Qt 5 and the KDE Frameworks 5. Krita
    is designed to be a digital painting application. It has been influenced to
    some extent by software like Corel Painter and SAI. Krita packs with some key
    features different from most of its kind, including the ability to work with
    both bitmap and vector illustration.
    
    - Typo tweak from sthen@
    - Tested from mitchell wodach. Thanks!
    - Many input and tweaks from jca@ Thanks!
    
    ok jca@
    
    Status:
    
    Vendor Tag:	rsadowski
    Release Tags:	rsadowski_20170601
    
    N ports/graphics/krita/Makefile
    N ports/graphics/krita/distinfo
    N ports/graphics/krita/patches/patch-plugins_extensions_gmic_3rdparty_gmic_CImg_h
    N ports/graphics/krita/patches/patch-plugins_tools_basictools_kis_tool_colorpicker_cc
    N ports/graphics/krita/pkg/DESCR
    N ports/graphics/krita/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/01 10:38:40

Modified files:
	graphics       : Makefile 

Log message:
unhook krita


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/01 11:07:21

Modified files:
	databases/sqlite3: Makefile distinfo 

Log message:
Update to sqlite 3.19.2, will be required by gecko 54 or 55 anyway..

See https://www.sqlite.org/changes.html for a list of changes since 3.17.0
Went into a bunch of amd64 bulks.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/01 11:15:00

Modified files:
	faq/ports      : specialtopics.html 

Log message:
tweak previous; misc spelling, grammar, wording and formatting fixes


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/01 11:20:54

Modified files:
	faq/ports      : specialtopics.html 

Log message:
missed some markup for displayed commands


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 13:05:15

Modified files:
	usr.bin/mandoc : mandoc.c mandoc.h mdoc_term.c term.c 
	regress/usr.bin/mandoc/roff/esc: h.in 
	share/man/man7 : roff.7 

Log message:
Minimal implementation of the \h (horizontal motion) escape sequence.
Good enough to cope with the average DocBook insanity.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 13:18:56

Modified files:
	databases/pgbouncer: Makefile 
	databases/skytools: Makefile 

Log message:
Drop USE_GROFF and bump.
Mandoc now copes with DocBook lists implemented with \h.


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 13:38:43

Modified files:
	faq/ports      : specialtopics.html 

Log message:
Remove rants about DocBook.  It hasn't got better and isn't likely to
any time soon, but i'm seriously working on getting mandoc to cope
with what it spews, and to free porters from having to bother about it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/01 13:58:04

Modified files:
	devel/git      : Makefile 
	devel/scons    : Makefile 

Log message:
Drop USE_GROFF and bump.
Mandoc now copes with DocBook lists implemented with \h.


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/06/01 14:18:44

Modified files:
	usr.sbin/bind/bin/dig: dighost.c 

Log message:
Revert 1.16 ("add a workaround for the rebound portjacking hijinks"),
it breaks at least nslookup, host, dig +tcp.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/01 14:37:38

Modified files:
	bin/ksh        : sh.1 

Log message:
The fact is simple: Subshells have the same PPID as the current shell.
What is not so simple is squinting hard enough to conclude that POSIX
actually says that. I'm still not sure how to do that.
Problem with the shell manual pointed out by "Choose a display name".

ok otto, halex, jmc


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 14:47:38

Modified files:
	lang/luajit    : Makefile 

Log message:
help this build with clang... apparently the dependent ports like it.
might be not 100% right, but it won't even build without it anyway.


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/01 15:19:07

Modified files:
	sys/arch/arm64/dev: simplebus.c 

Log message:
Pass the correct dma tag to the load buffer function.  Passing t only
passes the tag where the pointer to the simplebus_dmamap_load_buffer()
wrapper is stored in.  We want to call the load buffer function that
was passed from our parent device, so we have to pass the parent's tag.
Otherwise we end up in a recursive and neverending loop.

This only occurs when a simplebus attaches to a simplebus, which we
apparently didn't have so far.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/01 15:35:28

Log message:
    Import net/packetq.
    
    packetq is a command line tool to run SQL queries directly on PCAP files,
    the results can be output as JSON (default), formatted/compact CSV and
    XML. It also contains a very simplistic web-server in order to inspect
    PCAP files remotely.
    
    OK jca@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170601
    
    N ports/net/packetq/Makefile
    N ports/net/packetq/distinfo
    N ports/net/packetq/pkg/PLIST
    N ports/net/packetq/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/01 15:36:12

Modified files:
	net            : Makefile 

Log message:
Add packetq.


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/06/01 16:26:08

Modified files:
	graphics/gimp/stable: Makefile distinfo 
	graphics/gimp/stable/patches: patch-app_Makefile_in 
	                              patch-etc_Makefile_in 
	                              patch-plug-ins_common_Makefile_in 
	graphics/gimp/stable/pkg: PLIST 

Log message:
update to 2.8.22
hints and ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/01 17:17:01

Modified files:
	sys/dev/pci    : if_sk.c 

Log message:
reorder ops in sk_start to avoid possibly rolling back ifq_deq.

instead of checking for space after beggining to deq a packet, check
for space before committing to handling a packet. this means we
can use ifq_dequeue instead of ifq_deq_begin/commit/rollback.

ok mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/01 17:22:14

Modified files:
	sys/dev/pci    : if_msk.c 

Log message:
reorder ops in sk_start to avoid possibly rolling back ifq_deq.

instead of checking for space after beggining to deq a packet, check
for space before committing to handling a packet. this means we
can use ifq_dequeue instead of ifq_deq_begin/commit/rollback.

this is a port of src/sys/dev/pci/if_sk.c r1.187, but tweaked to
account for msk using twice the tx ring descriptors thanks to its
annoying support for 64bit addresses.

tested on an od1000
ok jmatthew@ sthen@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/01 17:39:47

Modified files:
	faq/ports      : guide.html 

Log message:
the obsolescence of NEED_VERSION has been pointed out for nearly 15 years.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/01 18:07:12

Modified files:
	sys/net        : ifq.c 

Log message:
be less tricky about when ifq_free is handled.

instead of assuming start routines only run inside the ifq serialiser,
only rely on the serialisation provided by the ifq mtx which is
explicitly used during ifq_deq ops.

ie, free the mbufs in ifq_free at the end of ifq_deq ops instead
of in the ifq_serialiser loop. ifq deq ops arent necessarily called
within the serialiser.

this should fix panics caused by fq codel on top of bce (which calls
bce_start from it's tx completion path instead of ifq_restart).

ok mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/01 19:47:36

Modified files:
	sys/dev/pci    : if_msk.c if_mskvar.h 

Log message:
only update the tx descriptors high address if it changes.

this should effectively double (or restore?) the number of packets that
can be fit on the tx ring.

tested on an od1000.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/01 19:52:01

Modified files:
	net/wireshark  : Makefile distinfo 
	net/wireshark/patches: 
	                       patch-ui_qt_capture_filter_syntax_worker_cpp 
	                       patch-ui_qt_compiled_filter_output_cpp 

Log message:
update to wireshark-2.2.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/01 20:21:06

Modified files:
	devel/boost    : Makefile 
Added files:
	devel/boost/patches: patch-boost_log_detail_event_hpp 

Log message:
fix nasty clang bug that prevented facter from building


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/01 22:26:23

Modified files:
	net/knot       : Makefile 

Log message:
Drop the gettext module


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/02 00:06:10

Modified files:
	usr.bin/ssh    : Makefile.inc 

Log message:
rationalise the long list of manual CDIAGFLAGS that we add; most of
these were redundant to -Wall -Wextra


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/02 00:39:56

Modified files:
	sysutils/amazon-ssm-agent: Makefile distinfo 
	sysutils/amazon-ssm-agent/patches: 
	                                   patch-agent_platform_platform_unix_go 

Log message:
Update to amazon-ssm-agent-2.0.796.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/02 00:49:54

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.59.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/02 00:50:06

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.96.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/02 00:57:35

Modified files:
	devel/p5-Type-Tiny: Makefile distinfo 
	devel/p5-Type-Tiny/pkg: PLIST 

Log message:
Update to p5-Type-Tiny-1.002000.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/02 01:04:49

Modified files:
	sysutils/salt-testing: Makefile distinfo 
	sysutils/salt-testing/pkg: PLIST 

Log message:
Update to salt-testing-2017.6.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/02 01:20:02

Modified files:
	graphics/shotwell: Makefile distinfo 
	graphics/shotwell/pkg: PLIST 

Log message:
Update to shotwell-0.26.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/02 01:26:47

Modified files:
	math/udunits   : Makefile distinfo 

Log message:
Update to udunits-2.2.25.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/02 01:41:47

Modified files:
	www/p5-WWW-Shorten-Bitly: Makefile distinfo 

Log message:
Update to p5-WWW-Shorten-Bitly-2.001.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 02:29:19

Modified files:
	games/vms-empire: Makefile 
	graphics/pdf2djvu: Makefile 
	lang/clisp     : Makefile 

Log message:
Drop USE_GROFF and bump.
Mandoc now copes with DocBook lists implemented with \h.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 02:56:32

Modified files:
	mail/bogofilter: Makefile 
	mail/courier-imap: Makefile 
	mail/maildrop  : Makefile 

Log message:
Drop USE_GROFF and bump.
Mandoc now handles DocBook lists implemented with \h.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/02 03:20:04

Modified files:
	textproc/pdftk : Makefile 

Log message:
the java in pdftk wants a matching C++, so this will remain a user of gcc4.
Zap include paths that are obviously no longer necessary, since they've
never been updated and nothing broke


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/06/02 04:13:25

Modified files:
	math/maxima    : Makefile distinfo 
	math/maxima/pkg: PLIST 

Log message:
Update to Maxima 5.40.0

OK pirofti@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/02 04:42:26

Modified files:
	x11/gnome/recipes: Makefile 

Log message:
WANTLIB typo


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/02 04:47:30

Modified files:
	sys/dev/pci    : if_sk.c 

Log message:
handle 64bit dva in the tx path as well as the rx path.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 04:51:56

Modified files:
	multimedia/mkvtoolnix: Makefile 
	net/netatalk   : Makefile 
	net/spectrum   : Makefile 
	net/yaz        : Makefile 
	textproc/patchutils: Makefile 

Log message:
Drop USE_GROFF and bump.
Mandoc now copes with DocBook lists using \h.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/02 04:52:26

Modified files:
	gnu/llvm/tools/clang/include/clang/Basic: DiagnosticGroups.td 

Log message:
Synonym -Wno-cpp for -Wno-#warnings. That one is not a headache for
scripting.
(got it into upstream, it's just a backport)
okay kettenis@, patrick@


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/02 05:06:08

Modified files:
	sys/dev/fdt    : xhci_fdt.c 

Log message:
Attach the xhci(4) FDT driver to the generic-xhci compatible as well.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/02 05:18:16

Modified files:
	sys/dev/pci    : if_iwn.c 

Log message:
When iwn(4) firmware reports missed beacons, send a probe request only
if ic_mgt_timer indicates that we're not already waiting for a response.
Fixes a flood of probe requests sent out while the interrupt kept firing.

Also, read the missed beacon counter value after DMA sync.

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/02 05:18:37

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
When iwm(4) firmware reports missed beacons, send a probe request only
if ic_mgt_timer indicates that we're not already waiting for a response.
Fixes a flood of probe requests sent out while the interrupt kept firing.

Also, byteswap the missed beacon counter value when reading it.

ok mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 05:33:16

Modified files:
	www/cclive     : Makefile 
	www/sarg       : Makefile 
	x11/fluxbox    : Makefile 
	x11/fvwm2      : Makefile 
	x11/stalonetray: Makefile 

Log message:
Drop USE_GROFF and bump.
Mandoc now copes with DocBook lists using \h.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/06/02 06:26:21

Modified files:
	devel/mingw    : Makefile 
	devel/mingw/patches: patch-x86-mingw32-build_sh 
	                     patch-x86-mingw32-build_sh_conf 

Log message:
Prepare MinGW for clang.

Lots of help and OK espie@, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 06:41:28

Modified files:
	usr.bin/mandoc : chars.c 
	share/man/man7 : mandoc_char.7 
	regress/usr.bin/mandoc/char/unicode: latin1.in latin1.out_ascii 
	                                     latin1.out_html 
	                                     latin1.out_utf8 named.in 
	                                     named.out_ascii 
	                                     named.out_html 
	                                     named.out_utf8 namediff.in 
	                                     namediff.out_ascii 
	                                     namediff.out_html 
	                                     namediff.out_utf8 

Log message:
add about 15 missing character escape sequences found in groff_char(7);
triggered by multimedia/mkvtoolnix mkvmerge(1) using \(S2


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/02 06:57:45

Modified files:
	sys/conf       : makegap.sh 

Log message:
typo; meant to say locore0.S


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/02 07:11:01

Modified files:
	www/youtube-dl : Makefile distinfo 

Log message:
update youtube-dl to 2017.05.29

ok pirofti@ jca@


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 07:59:15

Modified files:
	faq/ports      : specialtopics.html 

Log message:
Delete the paragraph about USE_GROFF in imake ports.
What was there was obviously wrong, as noticed by tb@.
Looking at a number of modern imake ports,
it appears that nothing special is needed nowadays.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/02 08:30:03

Modified files:
	devel/mingw/patches: patch-x86-mingw32-build_sh 

Log message:
add quite a few -Wno-*   so that the logs are more or less readable.
Unfortunately, -pedantic turns some warnings back on, so don't bother
with -Wno-switch.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/02 08:30:27

Modified files:
	net/mtr        : Makefile distinfo 
	net/mtr/pkg    : PLIST 
Added files:
	net/mtr/patches: patch-packet_packet_c 
Removed files:
	net/mtr/patches: patch-gtk_c patch-mtr_c patch-net_c 

Log message:
update to mtr-0.92, features include:

- shiny new DNS code that gets rid of the horrible libbind hack.

- the privileged packet sending code has been split out into a separate
"mtr-packet" process with a clear separation between init/main code, which
communicates with the main mtr process over a pipe.

Patch to add a pledge to mtr-packet, currently disabled; it works for
ICMP but requires additional sockopts to work with UDP.


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/02 09:09:13

Modified files:
	sys/dev/usb    : if_run.c 

Log message:
Remove a bogus run_read() call about getting MAC version.
ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/02 09:31:26

Modified files:
	sys/net80211   : ieee80211_proto.c 

Log message:
Scale the missed beacon counter threshold to the AP's beacon interval.

This should make fading APs time out consistently regardless of what the
beacon interval is set to (range is 1 to 2^16 TU, though in practice 100 TU
seems to be a common value).

Print the beacon interval and missed beacon counter threshold to dmesg
if the DEBUG flag was set on the wireless interface with ifconfig(8).
This should help with diagnosing any issues that pop up.

Requested and diff eye-balled by kettenis@
help & ok tb@ phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/02 09:40:27

Modified files:
	x11/gnome/recipes: Makefile 

Log message:
bump, this is a mess, thx jasper@ :(


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/06/02 10:04:11

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
Intel HD Graphics 510.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/06/02 10:04:36

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/02 10:12:38

Modified files:
	net/unifi      : Makefile distinfo 
	net/unifi/patches: patch-unifi_sh_api 
	net/unifi/pkg  : PLIST 

Log message:
update to unifi-5.4.17. this one is a stable candidate rather than an
actual stable release, but upstream has updated to a newer version of
snappy-java that no longer includes the openbsd .so files that are
needed, so I've switched to a local-built version and would like to
get this in early to get potential feedback.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/02 10:47:23

Modified files:
	infrastructure/db: user.list 

Log message:
reserve uid for mtr


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/02 10:50:16

Modified files:
	net/mtr        : Makefile 
	net/mtr/patches: patch-packet_packet_c 
	net/mtr/pkg    : PLIST 

Log message:
mtr tweaks:
- fix displayed version string (problem from github tarball).
- add a new _mtr user
- drop mtr-packet to _mtr rather than to getgid()/getuid()
- chroot to /var/empty


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/02 11:24:39

Modified files:
	sysutils/ansible: Makefile 
Added files:
	sysutils/ansible/patches: 
	                          patch-lib_ansible_plugins_filter_core_py 

Log message:
unbreak password_hash('blowfish')

originally reported by jiri b.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/02 11:39:05

Modified files:
	sysutils/ansible: Makefile distinfo 
Removed files:
	sysutils/ansible/patches: 
	                          patch-lib_ansible_plugins_connection___init___py 

Log message:
- update to ansible-2.3.1, includes a fix for CVE-2017-7481


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/02 11:43:55

Modified files:
	textproc/elasticsearch: Makefile distinfo 
	textproc/elasticsearch/pkg: PLIST 

Log message:
update to elasticsearch-5.4.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/02 11:52:05

Modified files:
	sysutils/beats/filebeat: Makefile distinfo 
	sysutils/beats/heartbeat: Makefile distinfo 
	sysutils/beats/metricbeat: Makefile distinfo 
	sysutils/beats/metricbeat/pkg: PLIST 
	sysutils/beats/packetbeat: Makefile distinfo 

Log message:
update beats to 5.4.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/02 11:58:46

Modified files:
	sysutils/ansible: Tag: OPENBSD_6_1 Makefile distinfo 
	sysutils/ansible/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
security update to ansible-2.2.3

https://github.com/ansible/ansible/blob/stable-2.2/CHANGELOG.md#223-the-battle-of-evermore---05-09-2017


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/02 12:15:29

Modified files:
	faq            : faq10.html 

Log message:
yptest was sent to the bitbucket in the sky 18 months ago.

from Kurt Mosiejczuk


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 13:21:03

Modified files:
	usr.bin/mandoc : mandoc.c mandoc.h term.c 
	share/man/man7 : roff.7 

Log message:
Partial implementation of \h (horizontal line drawing function).
A full implementation would require access to output device properties
and state variables (both only available after the main parser has
finalized the parse tree) before numerical expansions in the roff
preprocessor (i.e., before the main parser is even started).

Not trying to pull that stunt right now because the static-width
implementation committed here is sufficient for tcl-style manual pages
and already more complicated than i would have suspected.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 13:54:15

Modified files:
	databases/tdbc : Makefile 
	databases/tdbc-sqlite3: Makefile 
	devel/tcllib   : Makefile 
	devel/tclthread: Makefile 
	devel/tklib    : Makefile 
	misc/memchan   : Makefile 

Log message:
drop USE_GROFF and bump; mandoc groks enough \l now


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/02 14:02:39

Modified files:
	games/fortune/fortune: fortune.c 

Log message:
Fix an infinite loop in fortune(6).

When invoking fortune with the -l option (to get long dictums only),
the program gets stuck in an infinite loop because fortlen() doesn't
return the fortune length correctly.

OK mestre@, tb@, deraadt@, schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/06/02 14:03:54

Modified files:
	regress/lib/libm/fenv: Makefile 

Log message:
Use += instead of = for extra flag. Prompted by miod@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 14:22:01

Modified files:
	x11/byzi       : Makefile 
	x11/tkcon      : Makefile 
	x11/tktreectrl : Makefile 
	x11/tktray     : Makefile 

Log message:
drop USE_GROFF and bump; mandoc groks enough \l now


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/02 14:25:50

Modified files:
	sys/dev/pv     : xen.c 

Log message:
Perform grant table page allocation outside of the table mutex

witness(4) has found that km_alloc will trigger an rw_enter via uvm_map
and vm_map_lock.  While rw_enter is called with RW_SLEEPFAIL, there's
also an msleep in there, so it's easier to avoid getting in the middle
of that.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 14:47:13

Modified files:
	x11/tktable    : Makefile 
Added files:
	x11/tktable/patches: patch-doc_tkTable_n 

Log message:
fix manual page that is completely broken with both groff and mandoc,
and drop USE_GROFF while here


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/06/02 16:37:49

Modified files:
	net/unifi      : Makefile 

Log message:
Append snappy-java-1.1.2.6.jar:0 to DISTFILES instead of using SUPDISTFILES.

ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 16:41:28

Modified files:
	plan9/9libs    : Makefile 

Log message:
no relevant formatting differences, drop USE_GROFF and bump;
committing from i386


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 17:17:08

Modified files:
	devel/arm-none-eabi: Makefile.inc 
	devel/arm-none-eabi/binutils: Makefile 
	devel/arm-none-eabi/gcc-linaro: Makefile 
	devel/arm-none-eabi/gdb: Makefile 
	devel/arm-none-eabi/newlib: Makefile 

Log message:
no relevant formatting differences, drop USE_GROFF
and bump those three of the four pacakges that change


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/02 17:25:03

Modified files:
	lang/mono      : Makefile 

Log message:
almost identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/06/02 17:43:00

Modified files:
	lang/clisp     : Makefile 
	lang/clisp/pkg : PLIST 

Log message:
Quick fix: drop manpages rendered to PostScript from plist.

However, this is not enough, because if groff is installed,
the .ps files will be generated. I'll have a look on how to
completely disable the use of groff here, as suggested by
Ingo.


CVSROOT:	/cvs
Module name:	src
Changes by:	halex@cvs.openbsd.org	2017/06/02 18:10:20

Modified files:
	share/misc     : inter.phone 

Log message:
fix spelling in a handful of the Swedish entries


CVSROOT:	/cvs
Module name:	src
Changes by:	halex@cvs.openbsd.org	2017/06/02 18:22:34

Modified files:
	share/misc     : airport 

Log message:
use proper name for LPI


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/02 22:34:41

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Avoid printing garbage when aborting a program that tries to use a
prohibited sysctl.

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/03 01:15:23

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Foreground colours with the bright attribute set need to use the bright
entries in the palette. GitHub issue 954.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/06/03 02:50:38

Modified files:
	sys/dev/pv     : vioblk.c virtiovar.h 

Log message:
vioblk/virtio: Re-arrange some struct members

This reduces holes/padding and makes the structs smaller.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/03 03:20:32

Modified files:
	devel/libspectrum: Makefile distinfo 

Log message:
Update to libspectrum-1.3.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/06/03 03:40:42

Modified files:
	textproc/libxml: Makefile 
Added files:
	textproc/libxml/patches: patch-parser_c patch-valid_c 

Log message:
Security update for textproc/libxml

Patches for CVE-2017-9047, CVE-2017-9048, CVE-2017-9049, CVE-2017-9050.
From Matthias Pitzl, thanks!

OK ajacoutot


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/03 03:57:19

Modified files:
	x11/mate/atril : Makefile 
	x11/mate/pluma : Makefile 

Log message:
stdc++, estdc++ -> ${LIBCXX}, ${LIBECXX}


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/06/03 03:58:52

src/sbin/slaacd

Update of /cvs/src/sbin/slaacd
In directory cvs.openbsd.org:/tmp/cvs-serv22210/sbin/slaacd

Log Message:
Directory /cvs/src/sbin/slaacd added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/06/03 04:00:29

Modified files:
	etc/rc.d       : slaacd 
	sbin           : Makefile 
	usr.sbin       : Makefile 
	usr.sbin/slaacctl: Makefile 
Added files:
	sbin/slaacd    : Makefile control.c control.h engine.c engine.h 
	                 frontend.c frontend.h log.c log.h slaacd.8 
	                 slaacd.c slaacd.h 
Removed files:
	usr.sbin/slaacd: Makefile control.c control.h engine.c engine.h 
	                 frontend.c frontend.h log.c log.h slaacd.8 
	                 slaacd.c slaacd.h 

Log message:
Move slaacd to /sbin
jca points out that all the other interface configuration tools live
there (like ifconfig or dhclient). Furthermore it starts so early in
the boot process that /usr might not be mounted yet if it's a nfs
filesystem.
sthen and deraadt agree


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/06/03 04:01:04

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 04:09:10

Added files:
	net/libaccounts-glib/patches: patch-libaccounts-glib_Makefile_am 

Log message:
bogus option makes it error out with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 04:14:48

ports/devel/stp/patches

Update of /cvs/ports/devel/stp/patches
In directory cvs.openbsd.org:/tmp/cvs-serv62725/patches

Log Message:
Directory /cvs/ports/devel/stp/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 04:15:25

Added files:
	devel/stp/patches: patch-configure 

Log message:
that old shit actually tried to create directories under /usr/local
during configure...


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/03 04:44:41

Modified files:
	net/knot       : Makefile 

Log message:
Fix build on i386, requires 64 bits atomics

This means you need at least an i586 processor to run knot.  The other
32 bits archs are probably still broken.

Reported by & ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/06/03 04:49:07

Modified files:
	textproc/libxml: Tag: OPENBSD_6_1 Makefile 
Added files:
	textproc/libxml/patches: Tag: OPENBSD_6_1 patch-parser_c 
	                         patch-valid_c 

Log message:
Backport recent textproc/libxml security fixes.

Patches CVE-2017-9047, CVE-2017-9048, CVE-2017-9049 and CVE-2017-9050.
From Matthias Pitzl, thanks!

OK ajacoutot@


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/06/03 04:53:02

Modified files:
	faq            : current.html 

Log message:
use cut instead of sed, to avoid the embedded tab.  ok tb@


CVSROOT:	/cvs
Module name:	www
Changes by:	florian@cvs.openbsd.org	2017/06/03 05:14:41

Modified files:
	faq            : current.html 

Log message:
slaacd moved to /sbin


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 05:17:13

ports/x11/gnome/aisleriot/patches

Update of /cvs/ports/x11/gnome/aisleriot/patches
In directory cvs.openbsd.org:/tmp/cvs-serv73461/patches

Log Message:
Directory /cvs/ports/x11/gnome/aisleriot/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 05:17:58

Modified files:
	x11/gnome/aisleriot: Makefile 
Added files:
	x11/gnome/aisleriot/patches: patch-acinclude_m4 

Log message:
in this case, bogus warning flags are enough to make it not build with
clang... so fix it


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/03 05:58:10

Modified files:
	sys/net80211   : ieee80211_crypto_tkip.c ieee80211_crypto_wep.c 

Log message:
Explicitly zero out the wepseed for TKIP and WEP.

ok stsp


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/03 05:58:55

Modified files:
	sys/net        : if_tun.c 

Log message:
Add missing NET_LOCK().

Found by jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 06:16:19

Modified files:
	usr.bin/mandoc : main.c mandoc.1 

Log message:
enable -Wstyle by default in -Tlint; OK jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 06:23:13

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete -n option, now covered by mandoc; OK jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/03 06:46:37

Modified files:
	textproc/ispell: Makefile distinfo 
	textproc/ispell/patches: patch-Makefile patch-correct_c 
	                         patch-languages_english_english_2 
	                         patch-languages_english_english_3 
	                         patch-term_c 
	textproc/ispell/pkg: PLIST-main 
Added files:
	textproc/ispell/patches: patch-deformatters_Makefile 
	                         patch-local_h_bsd patch-lookup_c 
Removed files:
	textproc/ispell/patches: patch-config_X patch-local_h_samp 

Log message:
update to ispell-3.4.00 and patch to fix some implicit declarations, done
while investigating a crash (bogus free) reported by Bryan Linton when running
"DICTIONARY=/usr/local/lib/ispell/american.hash ispell" (but it doesn't fix this)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 07:03:34

Added files:
	games/eliot/patches: patch-dic_csv_helper_cpp 
	                     patch-dic_header_cpp 

Log message:
fixes for clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/03 07:09:06

Modified files:
	mail/neomutt   : Makefile distinfo 
	mail/neomutt/patches: patch-main_c patch-mutt_sasl_c 
	                      patch-mutt_sasl_h 
	mail/neomutt/pkg: PLIST 
Added files:
	mail/neomutt/patches: patch-doc_Makefile_am 

Log message:
update to neomutt-20170602


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/03 07:17:41

Modified files:
	databases/openldap: Makefile distinfo 
Added files:
	databases/openldap/patches: patch-libraries_libldap_tls_o_c 
Removed files:
	databases/openldap/patches: 
	                            patch-servers_slapd_back-mdb_search_c 

Log message:
update to openldap-2.4.45, rolling in the vuln fix previously patched.

upstream added openssl 1.1.x support, so patch to cope with various
OPENSSL_VERSION_NUMBER ifdefs.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 08:21:44

ports/lang/freehdl/patches

Update of /cvs/ports/lang/freehdl/patches
In directory cvs.openbsd.org:/tmp/cvs-serv79648/patches

Log Message:
Directory /cvs/ports/lang/freehdl/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 08:25:16

Modified files:
	lang/freehdl   : Makefile 
Added files:
	lang/freehdl/patches: patch-freehdl_kernel-classes_hh 
	                      patch-freehdl_kernel-db_hh 
	                      patch-freehdl_kernel-fhdl-stream_hh 
	                      patch-freehdl_kernel-list_hh 
	                      patch-freehdl_kernel-sig-info_hh 
	                      patch-freehdl_kernel-util_hh 
	                      patch-freehdl_std-vhdl-types_hh 
	                      patch-kernel_driver_info_cc 
	                      patch-kernel_fhdl_stream_cc 
	                      patch-kernel_sig_info_cc 
	                      patch-v2cc_v2cc-decl_cc 
	                      patch-v2cc_v2cc-explore_cc 
	                      patch-v2cc_v2cc-expr_cc 
	                      patch-v2cc_v2cc-util_cc 
	                      patch-v2cc_v2cc-util_h patch-v2cc_v2cc_cc 

Log message:
let it build with clang. patches similar to pkgsrc and freebsd


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 08:28:40

Modified files:
	net/ocserv     : Makefile 
	net/megatools  : Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 08:47:52

ports/net/libmaxminddb/patches

Update of /cvs/ports/net/libmaxminddb/patches
In directory cvs.openbsd.org:/tmp/cvs-serv1350/patches

Log Message:
Directory /cvs/ports/net/libmaxminddb/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 08:59:11

Modified files:
	devel/boost/files: user.hpp 

Log message:
clean up Vadim's mess, reorg file so that what we're doing is actually
documented


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 09:01:46

Modified files:
	www/chromium   : Makefile 

Log message:
allows base clang to pass the bootstrap step, even though there are lots
of issues later


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/03 09:02:26

Modified files:
	infrastructure/mk: compiler.port.mk modules.port.mk 

Log message:
sooner or later, we'll run into ports that really require a gcc...


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/03 09:44:03

Modified files:
	sys/net80211   : ieee80211_input.c ieee80211_node.c 
	                 ieee80211_proto.c 

Log message:
Add a few sizes to free().

Input, help & ok stsp


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 09:54:09

Modified files:
	usr.bin/mandoc : man.c mandoc.h read.c 
	regress/usr.bin/mandoc/man/B: Makefile 
	regress/usr.bin/mandoc/man/SH: Makefile noarg.in noarg.out_ascii 
	                               noarg.out_lint 
	regress/usr.bin/mandoc/man/SS: Makefile noarg.in noarg.out_ascii 
	                               noarg.out_lint 
	regress/usr.bin/mandoc/man/TP: Makefile broken.in 
	                               broken.out_ascii broken.out_lint 
Added files:
	regress/usr.bin/mandoc/man/B: blank.in blank.out_ascii 
	                              blank.out_lint 

Log message:
ignore blank lines in man(7) next line scope;
strange groff edge case behaviour found in multimedia/mjpegtools


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 10:14:00

Modified files:
	multimedia/mjpegtools: Makefile 
Added files:
	multimedia/mjpegtools/patches: patch-docs_mjpegtools_1 

Log message:
Minimally patch up the extremely crappy mjpegtools(1) manual to give
it a chance to render at all.

While here, drop USE_GROFF.  While mjpegtools(1) does contain .ec, it
never passes an argument and never calls .eo, so it has no effect.


CVSROOT:	/cvs
Module name:	ports
Changes by:	steven@cvs.openbsd.org	2017/06/03 10:23:09

Modified files:
	databases/libdbi: Makefile distinfo 
	databases/libdbi/patches: patch-Makefile_in patch-configure 
	databases/libdbi/pkg: PLIST 

Log message:
update to 0.9.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	steven@cvs.openbsd.org	2017/06/03 10:24:05

Modified files:
	databases/libdbi-drivers: Makefile distinfo 
	databases/libdbi-drivers/patches: patch-configure 
	                                  patch-drivers_freetds_dbd_freetds_c 
	databases/libdbi-drivers/pkg: PLIST-main PLIST-sqlite 
	                              PLIST-sqlite3 
Added files:
	databases/libdbi-drivers/patches: patch-tests_test_libdbi_sh 
	                                  patch-tests_test_pgsql_sh 

Log message:
update to 0.9.0


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/03 11:43:01

Modified files:
	usr.bin/tmux   : input.c options-table.c tmux.1 window-copy.c 

Log message:
Make set-clipboard a three-state option so tmux itself can ignore the
sequencess.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/03 15:04:49

Modified files:
	www/squid      : Makefile distinfo 
Removed files:
	www/squid/patches: 
	                   patch-helpers_basic_auth_LDAP_basic_ldap_auth_8 
	                   patch-helpers_basic_auth_RADIUS_basic_radius_auth_8 
	                   patch-helpers_external_acl_file_userip_ext_file_userip_acl_8 
	                   patch-tools_squidclient_squidclient_1 

Log message:
update to squid-3.5.26


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/03 15:50:43

Modified files:
	faq            : current.html 

Log message:
rephrase and simplify a few things, more consistent whitespace and markup


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/03 16:04:06

Modified files:
	faq            : current.html 

Log message:
more tweaking


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:08:02

Modified files:
	sys/conf       : makegap.sh 

Log message:
use .balign instead of .align, it is portable to more architectures
discussed with patrick


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:11:27

Modified files:
	sys/conf       : makegap.sh 

Log message:
".section .bss" is portable to more platforms than plain ".bss"


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:21:34

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/luna88k/conf: Makefile.luna88k 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/socppc/conf: Makefile.socppc 
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
Create gap.S and gap.o with umask 077.  Create lorder and bsd* with umask 007.
Prying eyes cannot look at the kernels in the compile directory.
ok tb rpe, kernel developers seem unimpacted


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:23:47

Modified files:
	etc            : Makefile 

Log message:
kernels in compile dirs are og-rwx, so need to make them readable in
$RELEASEDIR
ok tb rpe


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:25:19

Modified files:
	distrib/alpha/bsd.rd: Makefile 
	distrib/amd64/ramdiskA: Makefile.inc 
	distrib/amd64/ramdisk_cd: Makefile.inc 
	distrib/hppa/ramdisk: Makefile 
	distrib/i386/common: Makefile.inc 
	distrib/ramdisk: Makefile 
	distrib/sparc64/bsd.rd: Makefile 
	distrib/sparc64/common: Makefile.inc 

Log message:
kernels in compile dirs are readonly, and the bsd.rd we created has
tracked that permission.  Make the copy in $RELEASEDIR a+r


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:27:41

Modified files:
	distrib/miniroot: install.sub 

Log message:
After installing, chmod og-rwx {/bsd bsd.mp bsd.sp bsd.rd }
(Should we make them kmem readable?  Let's ignore that for now and see
if any issues surface).
ok tb rpe


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:33:36

Modified files:
	etc            : rc 

Log message:
Immediately after mounting / read-write, chmod og-rwx the kernel.  Remote
prying eyes were already been hindered at determining kernel addresses, now
local prying eyes are also hindered.
ok tb rpe


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 16:59:09

Modified files:
	etc            : rc 

Log message:
We have been running a small awk program before installing the relinked libc.
Perform the same kind of test for relinked libcrypto, using an openssl
sequence (proposed by sthen)


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/03 17:31:37

Modified files:
	usr.sbin/config: exec_elf.c 

Log message:
config -e mode should match our other policies which ensure og-rwx /bsd.
pointed out by brynet


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 18:08:56

Modified files:
	share/man/man7 : roff.7 
	usr.bin/mandoc : read.c roff.c 

Log message:
Pure preprocessor implementation of the roff(7) .ec and .eo requests
(escape character control), touching nothing after the preprocessing
stage and keeping even the state variable local to the preprocessor.
Since the escape character is also used for line continuation, this
requires pulling the implementation of line continuation from the
input reader to the preprocessor, which also considerably shortens
the code required for that.

When the escape character is changed, simply let the preprocessor
replace bare by escaped backslashes and instances of the non-standard
escape character with bare backslashes - that's all we need.

Oh, and if anybody dares to use these requests in OpenBSD manuals,
sending a medium-sized pack of axe-murderes after them might be a
worthwhile part of the punishment, but probably insuffient on its own.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 18:26:16

Modified files:
	devel/grcs     : Makefile 

Log message:
mandoc groks .ec and .eo now; drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 19:01:19

Modified files:
	x11/rxvt       : Makefile 

Log message:
Rather than making the manual page unusable for mandoc by preprocessing
it with GNU tbl(1) at build time, simply install the man(7)/tbl(7)
source unmangled --> identical formatting, drop USE_GROFF.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/03 19:20:47

Modified files:
	faq            : current.html 

Log message:
more stylistic tweaks


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 19:24:07

Modified files:
	productivity/tdl: Makefile 
	productivity/tdl/patches: patch-Makefile_in 
Added files:
	productivity/tdl/patches: patch-tdl_1 

Log message:
Don't spoil the tables by running GNU tbl(1) at build time,
just install the source and drop USE_GROFF.
While here, fix wrong escaping that may lose information.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 20:58:48

Modified files:
	sysutils/rdiff-backup: Makefile 
	www/man2web    : Makefile 

Log message:
whitespace differences only, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/03 21:25:50

Modified files:
	net/dictd      : Makefile 

Log message:
mandoc now copes with blank lines in TP heads; drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/03 22:29:23

Modified files:
	sys/dev/pci    : if_sk.c 

Log message:
use htolem32 and lemtoh32 instead of htole32 and letoh32.

saves about half a k on sparc64.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/06/03 23:04:24

Modified files:
	sys/dev/pv     : vmt.c 

Log message:
update link to Ken Kato's vmware backdoor protocol documentation
from Seth Jackson


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/06/04 00:21:37

Modified files:
	sys/arch/amd64/include: bus.h 

Log message:
Re-arrange struct bus_dmamap members

This reduces holes/padding and makes the struct smaller by 8 bytes.

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/04 02:02:20

Modified files:
	usr.bin/tmux   : screen-write.c tmux.1 tty.c 

Log message:
Typo/style; plus man page escaping from jmc.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/04 02:12:40

Modified files:
	security/p5-Crypt-OpenSSL-EC: Makefile distinfo 

Log message:
Update to p5-Crypt-OpenSSL-EC-1.31.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/04 02:25:57

Modified files:
	usr.bin/tmux   : log.c proc.c server.c signal.c tmux.1 tmux.h 

Log message:
Support SIGUSR2 to stop and start logging for an existing server. Also
we currently only have two log levels so just use -v and -vv rather than
-v and -vvvv, and clarify the man page entry for -v.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/04 02:55:10

ports/sysutils/awscli/patches

Update of /cvs/ports/sysutils/awscli/patches
In directory cvs.openbsd.org:/tmp/cvs-serv97594/patches

Log Message:
Directory /cvs/ports/sysutils/awscli/patches added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/04 03:02:36

Modified files:
	usr.bin/tmux   : input.c screen.c tmux.h utf8.c window.c 

Log message:
Be more strict about escape sequences that rename windows or set titles:
ignore any that not valid UTF-8 outright, and for good measure pass the
result through our UTF-8-aware vis(3).


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/04 03:02:57

Modified files:
	usr.bin/tmux   : utf8.c 

Log message:
Remove unused variable.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/04 03:22:34

Modified files:
	usr.bin/tmux   : input.c 

Log message:
Add a timeout to prevent the sequences which wait for a specific
terminator (OSC, APC and DCS) waiting forever, which helps to avoid
garbage (cat /dev/random) locking up panes completely. This (and the
last commit) prompted by a discussion with theo.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/04 03:34:14

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.60.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/04 03:34:46

Modified files:
	sysutils/awscli: Makefile distinfo 
Added files:
	sysutils/awscli/patches: patch-awscli_help_py 

Log message:
Update to awscli-1.11.97 and drop the requirement on groff.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/04 04:40:07

Modified files:
	net/packetq    : Makefile distinfo 

Log message:
Update packetq to 1.3.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/04 04:57:59

Modified files:
	net/libmaxminddb: Makefile 
Added files:
	net/libmaxminddb/patches: patch-configure 
	                          patch-include_maxminddb_h 
	                          patch-src_maxminddb_c 

Log message:
remove the problematic shit that doesn't compile with our old gcc
because the combo of -fms-extensions -std=c99

okay fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/06/04 05:45:04

Modified files:
	net/olsrd      : Makefile distinfo 
	net/olsrd/patches: patch-Makefile_inc patch-make_Makefile_obsd 
	                   patch-src_bsd_kernel_routes_c 
	                   patch-src_bsd_net_c 
	                   patch-src_cfgparser_local_mk 
	                   patch-src_olsr_random_h 
	                   patch-src_plugin_loader_c 
	                   patch-src_unix_ifnet_c 
	net/olsrd/pkg  : PLIST-main 

Log message:
Update olsrd (again) to the actual latest stable release 0.9.6.1.
ok phessler@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/04 05:45:31

Modified files:
	graphics/asymptote: Makefile distinfo 
Added files:
	graphics/asymptote/patches: patch-settings_cc 
Removed files:
	graphics/asymptote/patches: patch-genv_cc patch-prc_writePRC_h 

Log message:
update to asymptote-2.41

tests pass on amd64/gcc and amd64/ports clang.
aarch64/clang not tested as it hanged again (pv)..


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/04 06:25:19

Modified files:
	share/mk       : bsd.dep.mk 

Log message:
pass better arguments to mkdep.
- some std= parameters are actually critical, -std=c++11 makes a huge
difference for clang.
- explicitly ask mkdep to run the C++ compiler for C++ code, as again,
some compilers will see the difference.

(this should allow us to repair make depend under src/gnu/usr.bin/clang)

okay kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/04 06:48:42

Modified files:
	sys/net80211   : ieee80211_input.c ieee80211_node.c 

Log message:
Add sizes for free for the RSN IEs. Rewrite ieee80211_save_ie() slightly
to make it more readable.

help, many explanations and ok stsp


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/04 07:20:17

ports/sysutils/amazon-ecs-cli/patches

Update of /cvs/ports/sysutils/amazon-ecs-cli/patches
In directory cvs.openbsd.org:/tmp/cvs-serv13295/patches

Log Message:
Directory /cvs/ports/sysutils/amazon-ecs-cli/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/04 07:20:43

Modified files:
	sysutils/amazon-ecs-cli: Makefile distinfo 
Added files:
	sysutils/amazon-ecs-cli/patches: 
	                                 patch-ecs-cli_vendor_github_com_docker_docker_pkg_system_stat_openbsd_go 

Log message:
Update to ecs-cli-0.5.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/04 07:29:12

Modified files:
	sysutils/ec2-api-tools: Makefile 

Log message:
It looks like groff is not needed anymore.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/04 07:39:25

Modified files:
	games/fortune/fortune: fortune.c 
	games/fortune/strfile: strfile.c 

Log message:
Use proper bool types in fortune(6).

OK tb@, phessler@ (previous version)


CVSROOT:	/cvs
Module name:	src
Changes by:	aoyama@cvs.openbsd.org	2017/06/04 07:48:13

Modified files:
	sys/arch/luna88k/dev: lunaws.c sio.c siotty.c siovar.h 

Log message:
Sync with current NetBSD/luna68k code.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/04 07:55:04

Modified files:
	sys/conf       : makegap.sh 

Log message:
Don't need to provide a padbyte value for .bss, it will always be 0
pointed out by kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/04 07:57:29

Modified files:
	usr.sbin/installboot: i386_installboot.c 

Log message:
Malloc the superblock buffer to make sure that it is properly aligned.
On i386, clang puts the char array at an odd address in .bss.
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/06/04 08:02:24

Modified files:
	sys/dev/pci/drm/ttm: ttm_bo.c ttm_bo_api.h ttm_bo_driver.h 
	                     ttm_bo_manager.c ttm_bo_util.c ttm_bo_vm.c 

Log message:
Switch the TTM code over to the generic DRM VMA manager.

ok jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/04 08:10:42

Modified files:
	sys/arch/arm64/arm64: autoconf.c locore.S 
	sys/arch/arm64/conf: Makefile.arm64 files.arm64 
Added files:
	sys/arch/arm64/arm64: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.
Late during kernel boot, unmap the early startup code.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code,
which has been unmapped.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.

With guidance and ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/04 08:20:12

Modified files:
	libexec/ld.so/i386: rtld_machine.c 

Log message:
For the memory operand, clang passes in an address relative to the
stack pointer.  We cannot use this twice while pushing values on
the stack.  Instead load the operand address into a register and
use this as base address.  Use %edx since it is already marked as
clobbered.  Also fixes a syntax problem for clang.
ok mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/04 08:21:49

Modified files:
	sys/arch/arm64/arm64: locore.S 

Log message:
Remove comment that no longer is true.  esym is not written by our
bootloader anymore, so it doesn't matter where it is stored.  While
there do some whitespace cleanup.


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/04 08:26:27

Modified files:
	libexec/ld.so/aarch64: ldasm.S 

Log message:
Remove the sigprocmask stub that has long been made unused since
the use of kbind.  The code was #if 0'd anyway.

Reminded by miod@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/06/04 09:06:22

Modified files:
	sys/dev/pci/drm/radeon: radeon_object.h 

Log message:
Switch the radeondrm(4) driver over to TTM using the new DRM VMA manager.

ok jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/04 09:36:34

Modified files:
	usr.bin/tmux   : mode-tree.c 

Log message:
Do not leak command, from David CARLIER.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/04 10:27:12

Modified files:
	www/py-gunicorn/patches: patch-requirements_test_txt 

Log message:
regen patch


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/04 10:36:39

Modified files:
	www/py-gunicorn: Makefile 
	www/py-gunicorn/pkg: PLIST 

Log message:
unbreak, found by semarie


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/04 11:03:39

Modified files:
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/i386/conf: Makefile.i386 

Log message:
Create gap.* with umask 007 instead of 077 to make kernel builds after
make release work without prior cleanup.

discussed with deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsing@cvs.openbsd.org	2017/06/04 11:50:16

Modified files:
	lang/go-bootstrap: Makefile 
	lang/go-bootstrap/pkg: PLIST 

Log message:
Build lang/go-bootstrap without enabling cgo.

This functionality is not required for bootstrapping lang/go - disabling
it reduces future maintenance and allows it to build with clang.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsing@cvs.openbsd.org	2017/06/04 12:04:03

Modified files:
	lang/go        : Makefile 
	lang/go/patches: patch-src_cmd_link_internal_ld_lib_go 
Added files:
	lang/go/patches: patch-src_cmd_go_go_test_go 
	                 patch-src_cmd_link_internal_ld_ldelf_go 

Log message:
Make lang/go work with clang.

This requires three changes:

- OpenBSD clang produces __guard_local symbols that are marked as hidden,
which causes problems with the go linker. Workaround this by explicitly
making __guard_local symbols visible when reading in an ELF object.

- OpenBSD clang currently fails to correctly report the compiler runtime
via --print-libgcc-file-name. Workaround this issue by hardcoding it
for the time being.

- The TestCgoConsistentResults test passes successfully outside of ports,
however fails under a ports build. This requires further investigation
but we can just skip the test for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/04 12:06:28

Added files:
	graphics/krita/patches: patch-plugins_extensions_CMakeLists_txt 

Log message:
unbreak with clang, no reason to insist on gcc


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/04 12:48:09

Modified files:
	usr.bin/mandoc : man_term.c mdoc_term.c term.c term.h 

Log message:
Make term_flushln() simpler and more robust:
Eliminate the "overstep" state variable.
The information is already contained in "viscol".
Minus 60 lines of code, no functional change intended.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/04 13:05:03

Modified files:
	devel/boost    : Makefile 
	devel/boost/files: user.hpp 

Log message:
the tests are wrong, but it's simpler to define the annoying constant to 0


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/04 13:23:20

Modified files:
	sys/dev/isa    : if_eg.c 

Log message:
Remove unused function, as pointed out by clang.  ok deraadt@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	afresh1@cvs.openbsd.org	2017/06/04 13:26:18

Modified files:
	gnu/usr.bin/perl/cpan/File-Path/lib/File: Path.pm 
	gnu/usr.bin/perl/cpan/File-Path/t: FilePathTest.pm Path.t 
	                                   Path_root.t Path_win32.t 

Log message:
Update to perl File::Path 2.13 for security fixes

Reccomended by upstream - jkeenan AT pobox.com

OK sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	afresh1@cvs.openbsd.org	2017/06/04 13:29:56

Modified files:
	gnu/usr.bin/perl/cpan/File-Path/lib/File: Tag: OPENBSD_6_0 
	                                          Path.pm 

Log message:
Use fchmod to avoid a race condition in File::Path

See errata 026_perl

Commit it deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	afresh1@cvs.openbsd.org	2017/06/04 13:30:26

Modified files:
	gnu/usr.bin/perl/cpan/File-Path/lib/File: Tag: OPENBSD_6_1 
	                                          Path.pm 

Log message:
Use fchmod to avoid a race condition in File::Path

See errata 010_perl

Commit it deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/04 14:05:21

Modified files:
	.              : errata60.html errata61.html 

Log message:
release perl errata.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/04 14:26:18

Modified files:
	gnu/usr.bin/binutils-2.17/gas/config: tc-i386.c 

Log message:
Replace ((2 << 31) - 1) with 0xffffffff, which is equivalent but doesn't
cause a shift overflow on a 32-bit arch (i386).  ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/04 14:28:05

Modified files:
	sys/dev/isa    : if_ex.c 

Log message:
fix a bungled logical/bitwise expression pointed out by clang; ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/04 15:04:47

Modified files:
	graphics/asymptote: Makefile 

Log message:
remove stray COMPILER= setting from testing


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/06/04 15:09:15

Modified files:
	lang/clisp     : Makefile 

Log message:
Disable the use of groff.

Otherwise, the PostScript versions of the man pages may
be created or not during build, depending on wether groff
is installed or not, which may lead to consusion when
updating this port.

Suggested by Ingo a few days ago.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/04 16:22:05

Modified files:
	graphics/asymptote: Makefile 

Log message:
Add a "NOT_FOR_ARCHS=${CLANG_ARCHS}" to asymptote for now, with a
comment explaining what's not working (I would have just let it fail
so it's easier to spot, but it hangs during build). this is a terminal
port, not knocking out others.

This does not fail with ports clang though..


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/04 16:25:31

Modified files:
	devel/mingw    : Makefile 
	devel/mingw/patches: patch-x86-mingw32-build_sh_conf 

Log message:
THIS configuration fragment *is* clang specific


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/04 16:29:32

Modified files:
	www/netsurf/libnsfb: Makefile 
Added files:
	www/netsurf/libnsfb/patches: patch-Makefile 

Log message:
disable hidden dep on libvncserver


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/04 16:31:43

Modified files:
	x11/kde4/cantor: Makefile 

Log message:
bump, this lost and regained some fortran-related lib deps at some point
run into by naddy and aja


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/04 16:43:50

Modified files:
	share/man/man7 : roff.7 
	usr.bin/mandoc : man_term.c mdoc_man.c mdoc_term.c roff.c roff.h 
	                 roff_html.c roff_term.c roff_validate.c 
	                 tbl_term.c term.c term.h 

Log message:
Implement the roff(7) .mc (right margin character) request.
The Tcl/Tk manual pages use this extensively.
Delete the TERM_MAXMARGIN hack, it breaks .mc inside .nf;
instead, implement a proper TERMP_BRNEVER flag.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/04 17:03:19

Modified files:
	sys/arch/i386/i386: acpi_wakecode.S mptramp.s 

Log message:
Catch up with changes made on amd64 (kettenis@):

Generating mixed 16-bit/32-bit/64-bit code with clang's integrated
assembler is a bit tricky.  It supports the .code16, .code32 and
.code64 directives.  But it doesn't know about the data16/data32 and
addr16/addr32 instruction prefixes.  Instead it tries to determine
those from the instruction opcode.  It mostly succeeds, but there are
a couple of corner cases where clang will generate the "addr32" form
where gas generates the "addr16" form in .code16 segments.  That
should be no problem (and just waste a couple of bytes), but it makes
comparing the generated code a bit difficult.

Allow the trampoline code to be compiled with both.  For clang #define
away the addr32 prefix and avoid using the data32 prefix by using a
mnemonic that explicitly encodes the size of the operand.  Add a few
addr32 prefixes in .code16 blocks to reduce the differences between
code generated by clang and gas.

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/04 17:21:02

Modified files:
	lang/tcl/8.5   : Makefile 
	lang/tcl/8.6   : Makefile 
	x11/tk/8.5     : Makefile 
	x11/tk/8.6     : Makefile 

Log message:
mandoc groks .mc now; drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/04 17:22:57

Modified files:
	infrastructure/mk: bsd.port.mk 
	lang/clang     : clang.port.mk 
	lang/gcc/4.6   : gcc4.port.mk 
	lang/gcc/4.9   : gcc4.port.mk 
	lang/gcc/6     : gcc4.port.mk 

Log message:
Write out wrapper scripts for compilers using -B to set the toolchain
search path to ${WRKDIR}/bin. Ensures that the ld wrapper script needed
for USE_WXNEEDED gets used (clang was ignoring it otherwise).

Rework ccache support and gcc4/clang MODULES to use the same wrapper
generator as above, setting up a list of command names (cc, c++, etc) and
destinations (egcc, eg++, etc) as the port is processed, and writing the
wrappers in one place in bsd.port.mk, with an optional wrapper (e.g.
ccache), and with an echo to make it clear on screen/in log which
compiler binaries were chosen (easier than inspecting the wrapper
scripts) and whether ccache is used.

Initial wrapper using -B from espie, ccache bits from me, discussed
with/ok espie.  Been through a bulk on i386.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/04 19:42:45

Modified files:
	usr.sbin/cron  : cron.c 

Log message:
Set the group on cron's Unix domain socket _before_ making it
group-writable, not after.  Pointed out by Solar Designer.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/04 22:57:37

Modified files:
	sys/dev/ic     : qla.c qlareg.h qlavar.h 

Log message:
use byte swapping loads and stores.

shrinks the code a bit on sparc64.

ok jmatthew@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/04 23:10:23

Modified files:
	sbin/ifconfig  : ifconfig.c 

Log message:
remove vlan(4) specific output handling

vlan(4) now understands the generic vnetid and ifparent ioctls, so
this is redundant.

ok henning@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/05 01:10:06

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
thinko. breaks devel/llvm on a clang arch


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/05 01:26:30

Modified files:
	emulators/advancemame: Makefile distinfo 

Log message:
Update advancemame to 3.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/05 01:34:12

Modified files:
	security/libgcrypt: Makefile distinfo 

Log message:
Update to libgcrypt-1.7.7.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/05 01:52:34

Modified files:
	sysutils/fleetctl: Makefile distinfo 
	sysutils/fleetctl/pkg: PLIST 

Log message:
update to fleet-1.0.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/05 01:57:11

Modified files:
	emulators/advancemess: Makefile distinfo 

Log message:
Update advancemess to 3.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/05 02:01:39

Modified files:
	sysutils/py-augeas: Makefile distinfo 
	sysutils/py-augeas/pkg: PLIST 

Log message:
- update to py-augeas-1.0.2
- re-space


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/05 03:23:25

Modified files:
	textproc/p5-Pod-Spell: Makefile distinfo 
	textproc/p5-Pod-Spell/pkg: PLIST 

Log message:
Update to p5-Pod-Spell-1.20.


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/06/05 03:42:45

Modified files:
	distrib/syspatch: diff.sh 

Log message:
do not remove used files from the fakeroot


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/06/05 03:44:56

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
do not add ./ to the path of the files in the tarball


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/06/05 03:46:25

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
set BUILDUSER to build by default, this can be overwritten from the environment


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/06/05 03:47:54

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
a kernel errata requires a full build as well in case some headers
change so let's do a full build all the time


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/06/05 03:51:28

Modified files:
	share/mk       : bsd.lib.mk 

Log message:
exclude more objects from the readelf output when building syspatches (needed on i386)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/05 04:10:33

Modified files:
	devel/spidermonkey38: Makefile 

Log message:
Fix path in comment.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/05 04:17:41

Modified files:
	lang/libv8     : Makefile 
	lang/mono      : Makefile 

Log message:
Revert wxneeded hack; USE_WXNEEDED does the right thing with clang now.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 06:43:59

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/luna88k/conf: Makefile.luna88k 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
The arm* architectures edit the ld.script, creating a copy in the compile
directories.  Copy it in the same way on other architectures, for the same
effect.  Something upcoming will want that file there anyways.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/05 07:51:11

src/regress/bin/ksh/edit

Update of /cvs/src/regress/bin/ksh/edit
In directory cvs.openbsd.org:/tmp/cvs-serv25636/edit

Log Message:
Directory /cvs/src/regress/bin/ksh/edit added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 07:52:32

Modified files:
	sys/conf       : makegap.sh 

Log message:
Avoid use of _C_LABEL, since it is not portable to all our architectures.
And anyways, everything is ELF now.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/05 07:54:39

Modified files:
	regress/bin/ksh: Makefile 
Removed files:
	regress/bin/ksh/vi: Makefile config.h edit.h sh.h test_vi.c 
	                    vi.sh 

Log message:
Rewrite ksh edit mode regression tests.

Instead of calling x_vi() directly, run ksh in a pseudo tty.
This makes the process of adding tests for emacs mode simpler since the code can
be shared.

With feedback and help from millert@ and schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/05 08:10:11

Added files:
	regress/bin/ksh/edit: Makefile edit.c emacs.sh subr.sh vi.sh 

Log message:
Add new edit regress files.

Absent from my previous commit.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/05 08:33:42

Modified files:
	usr.bin/mkdep  : mkdep.gcc.sh 

Log message:
explicitly pass -w since clang -M doesn't imply it.

okay millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/05 08:48:09

Modified files:
	databases/sqlports: Makefile 
	databases/sqlports/files: Info.pm Var.pm 
	databases/sqlports/pkg: DESCR-compact DESCR-main 

Log message:
add COMPILER_LINKS. Tweak USE_WXNEEDED to support a 3rd option (special)


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/05 09:23:11

Modified files:
	sys/arch/octeon/conf: Makefile.octeon files.octeon 
	sys/arch/octeon/octeon: locore.S 
Added files:
	sys/arch/octeon/octeon: locore0.S 

Log message:
Randomize the link order of .o files in the kernel on octeon.
Unlike on some other architectures, it is not possible to unmap
the early boot code. Instead, the code is smashed during boot.

Input from deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/05 09:24:57

Modified files:
	etc/rc.d       : rc.subr 

Log message:
Fix logic in _rc_wait to properly cope with setproctitle(3) daemons. It was a
regression from my recent rc.subr changes.

reported by deraadt@ and naddy@ : pflogd was marked as failed during boot while
it was properly running


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/05 09:26:32

Modified files:
	mail/dovecot   : Makefile distinfo 
	mail/dovecot/pkg: PLIST-server 

Log message:
update to dovecot-2.2.30.1, from Brad


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 09:58:14

Modified files:
	sys/arch/amd64/conf: Makefile.amd64 

Log message:
use same idiom as other Makefiles


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 09:58:33

Modified files:
	sys/arch/arm64/conf: Makefile.arm64 

Log message:
track permissions of original file


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/05 10:03:32

Modified files:
	print/hplip    : Makefile 
	print/hplip/pkg: PLIST-hpaio README-common 

Log message:
Automatically enable hpaio in sane using:
/etc/sane.d/dll.d/hpaio
One less manual thing to do...


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/05 11:34:09

Modified files:
	regress/bin/ksh/edit: emacs.sh 

Log message:
Test insertion of non-ASCII characters, in particular making sure
that valid input does not cause writing invalid intermediate states
to the terminal, and that invalid input is not delayed waiting for
more input, but written through right away.

Currently failing, but expected to be fixed shortly.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 11:47:33

Modified files:
	sys/conf       : makegap.sh 

Log message:
include machine/param.h before machine.asm.h because uhm alpha.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 11:49:06

Modified files:
	sys/arch/alpha/alpha: autoconf.c locore.s 
	sys/arch/alpha/conf: Makefile.alpha files.alpha 
	sys/arch/alpha/include: param.h 
Added files:
	sys/arch/alpha/alpha: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.

Late during kernel boot, smash the startup code with traps so that
it does not point to the other randomly placed code.  It has be smashed,
because alpha (insecurely in my view) runs in the KSEG0 space.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code,
which is gone.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/05 12:31:24

Modified files:
	etc/rc.d       : rc.subr 

Log message:
Temporarily disable the second call to rc_check until I figure out what
is going on. Should fix another case of false negative reported by sthen
(redis).


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 12:56:30

Modified files:
	sys/arch/hppa/conf: ld.script 

Log message:
Increase kernel size, by pushing rodata 1MB forward, from 5MB to 6MB.
This seems to satisfy the BTLB granularity.  Good enough for now.
ok kettenis


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/05 12:59:07

Modified files:
	sys/arch/hppa/hppa: locore.S 
	sys/arch/hppa/conf: Makefile.hppa files.hppa 
Added files:
	sys/arch/hppa/hppa: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.

The bootstrap code will need smashing because it is mapped by BLTB,
but this is a bit involved so not done yet.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code
(which will be gone when it is smashed).

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/05 13:44:26

Modified files:
	devel/grcs     : Makefile 

Log message:
BUILD_DEPENDS += textproc/groff
because soelim(1) is used at build time.
No bump needed because *if* it built, the package was correct.
Problem reported and patch OK'ed by naddy@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/05 14:20:49

Modified files:
	lang/ghc       : Makefile 

Log message:
Set USE_WXNEEDED=special; don't use the wrapper script, but do record
USE_WXNEEDED in sqlports.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/05 14:41:53

Log message:
    Small add-on for the python requests http library. Makes use of python
    3.2's concurrent.futures or the backport for prior versions of python.
    
    The additional API and changes are minimal and strives to avoid
    surprises.
    
    Feedback sthen@ danj@
    
    OK danj@
    
    Status:
    
    Vendor Tag:	sebastia
    Release Tags:	sebastia_20170605
    
    N ports/www/py-requests-futures/distinfo
    N ports/www/py-requests-futures/Makefile
    N ports/www/py-requests-futures/pkg/DESCR
    N ports/www/py-requests-futures/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/05 14:43:38

Modified files:
	www            : Makefile 

Log message:
hook up py-requests-futures


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/05 14:44:47

Log message:
    import py-planet
    
    This library provides a command-line-interface (CLI) and Python library
    to make access to Planet's public Data API easy to use.
    
    The Data API is a REST HTTP API interface to Planet's imagery archive.
    The API supports the following tasks: quick-searching assets and viewing
    thumbnails of imagery; filtering imagery by location, date, satellite
    source, cloud cover, and many other attributes; and downloading imagery
    and metadata in several formats.
    
    Feedback sthen@, danj@
    
    OK danj@
    
    Status:
    
    Vendor Tag:	sebastia
    Release Tags:	sebastia_20170605
    
    N ports/geo/py-planet/distinfo
    N ports/geo/py-planet/Makefile
    N ports/geo/py-planet/pkg/DESCR
    N ports/geo/py-planet/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/05 14:46:51

Modified files:
	geo            : Makefile 

Log message:
hook up py-planet


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/05 15:53:12

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
support for overriding CC/CXX was accidentally lost with the COMPILER_LINKS
changes, reinstate it. feedback/ok espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/06/05 15:54:07

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
initial docs for COMPILER_WRAPPER and COMPILER_LINKS


CVSROOT:	/cvs
Module name:	src
Changes by:	sashan@cvs.openbsd.org	2017/06/05 16:18:28

Modified files:
	sys/net        : pf.c pf_ioctl.c pf_norm.c pfvar_priv.h 

Log message:
- let's add PF_LOCK()
to enable PF_LOCK(), you must add 'option WITH_PF_LOCK' to your kernel
configuration. The code does not do much currently it's just the very
small step towards MP.

O.K. henning@, mikeb@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/05 16:27:58

Modified files:
	share/man/man8 : release.8 

Log message:
Show usage of sysmerge and MAKEDEV instead of just mentioning them.
From Scott Cheloha, thanks.

ok jmc and positive feedback from several


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/06/05 17:55:19

Modified files:
	www/ruby-capybara-webkit/patches: patch-src_webkit_server_pro 
	www/ruby-capybara-webkit: Makefile 

Log message:
Unbreak by switching to gcc4 module, which supports -std=gnu++0x

Additionally, patch out support to precompile headers.


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/05 18:52:02

Modified files:
	sys/dev/usb    : usbdevs 

Log message:
Sort DLINK section and add USB device ID of D-Link DWA-131 rev E1.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/05 19:02:18

Modified files:
	sys/dev/usb    : ukbdmap.c usbdevs.h usbdevs_data.h 

Log message:
Regen.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/05 20:35:40

Modified files:
	sys/arch/arm64/conf: Makefile.arm64 

Log message:
correct the depend list of a target introduced in rev 1.9
from deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/05 22:52:40

Modified files:
	sbin/ifconfig  : ifconfig.c 

Log message:
make vnetid and parent commands available in SMALL ifconfigs.

the code behind the commands has been built on SMALL forever, this just
moves it available in the cmd table. the binary doesnt change size.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/06 02:05:01

Modified files:
	regress/bin/ksh/edit: emacs.sh 

Log message:
Test insertion of unmatched meta sequence.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/06 02:11:23

Modified files:
	etc            : MAKEDEV.man 

Log message:
Mention that the special files are created in the current working
directory. Suggested by Scott Cheloha.

discussed with jmc


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/06 02:12:01

Modified files:
	share/man/man8/man8.alpha: MAKEDEV.8 
	share/man/man8/man8.amd64: MAKEDEV.8 
	share/man/man8/man8.arm64: MAKEDEV.8 
	share/man/man8/man8.armv7: MAKEDEV.8 
	share/man/man8/man8.hppa: MAKEDEV.8 
	share/man/man8/man8.i386: MAKEDEV.8 
	share/man/man8/man8.landisk: MAKEDEV.8 
	share/man/man8/man8.loongson: MAKEDEV.8 
	share/man/man8/man8.luna88k: MAKEDEV.8 
	share/man/man8/man8.macppc: MAKEDEV.8 
	share/man/man8/man8.octeon: MAKEDEV.8 
	share/man/man8/man8.sgi: MAKEDEV.8 
	share/man/man8/man8.socppc: MAKEDEV.8 
	share/man/man8/man8.sparc64: MAKEDEV.8 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	anton@cvs.openbsd.org	2017/06/06 02:15:50

Modified files:
	sysutils/yank  : Makefile distinfo 

Log message:
Update yank to 0.8.3.

ok tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 02:45:02

Modified files:
	graphics/libgphoto2: Makefile distinfo 

Log message:
Update to libgphoto-2.5.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 02:45:16

Modified files:
	graphics/gphoto2: Makefile distinfo 

Log message:
update to gphoto-2.5.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 02:46:38

Modified files:
	security/p5-Crypt-OpenSSL-Bignum: Makefile distinfo 

Log message:
Update to p5-Crypt-OpenSSL-Bignum-0.08.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 02:52:02

Modified files:
	sysutils/py-augeas: Makefile 

Log message:
Missing BDEP and RDEP.
echo '127.0.0.1 pypi.python.org' >>/etc/hosts to the rescue!


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 02:56:56

Modified files:
	textproc/py-m2r: Makefile distinfo 

Log message:
Update to py-m2r-0.1.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 02:57:11

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.61.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 02:57:24

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.98.


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/06/06 03:12:17

Modified files:
	usr.bin/ssh    : packet.c 

Log message:
Fix compression output stats broken in rev 1.201.  Patch originally by
Russell Coker via Debian bug #797964 and Christoph Biedl.  ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 03:15:47

Modified files:
	print/hplip    : Makefile distinfo 
	print/hplip/patches: patch-Makefile_in 
	print/hplip/pkg: PLIST-hpaio PLIST-hpijs 

Log message:
Update to hplip-3.17.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 03:24:31

Modified files:
	editors/ne     : Makefile distinfo 
	editors/ne/patches: patch-src_makefile 

Log message:
Update to ne-3.1.1.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/06 03:40:24

Modified files:
	gnu/llvm/tools/clang/lib/Driver: Tools.cpp 

Log message:
Enable -fwrapv by default with clang to treat signed integer overflows
as defined.  This is done to prevent dangerous optimisations which could
remove security critical overflow checks.

Base gcc has -fno-strict-overflow by default, with clang this is
identical to -fwrapv.

Prompted by naddy@ discovering a hang with a clang compiled i386 kernel
that was resolved with -fwrapv.

ok kettenis@ pascal@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/06 03:42:09

Modified files:
	share/man/man1 : clang-local.1 

Log message:
mention -fwrapv being on by default


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/06 05:39:55

Modified files:
	sys/net        : pfkeyv2_convert.c 

Log message:
Fix build without PF.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/06 05:51:13

Modified files:
	sys/net        : if_etherip.c 

Log message:
Do not rely on <net/rtable.h> beeing included by other headers.

Fix build without PF, PIPEX nor IPSEC.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/06 07:07:23

Modified files:
	sys/net        : pipex.c 

Log message:
Update panic strings, pipex no longer use rn_inithead0().


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/06 07:19:29

Modified files:
	regress/sys/net/rtable: kern_compat.h 

Log message:
Update stubs to work with radix tree.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/06/06 07:57:23

Modified files:
	sbin/slaacd    : slaacd.h 

Log message:
We are going to start slaacd(8) much earlier, before /var is even
mounted. Move control socket to /dev for now.
Input & OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/06/06 07:59:37

Modified files:
	etc            : rc 

Log message:
start slaacd as early as possible, right after pf and sysctl.conf are
setup.
Input & OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/06 08:12:59

Modified files:
	devel/llvm     : Makefile 
	devel/llvm/patches: patch-tools_clang_lib_Basic_Targets_cpp 
	                    patch-tools_clang_lib_Driver_Tools_cpp 

Log message:
enable TLS emulation by default just like in base clang

ok espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/06 08:17:44

Modified files:
	lang/lucee     : Makefile distinfo 

Log message:
update to lucee-5.1.4.19


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/06 08:32:00

Modified files:
	math/calc      : Makefile distinfo 
	math/calc/patches: patch-calc_man 

Log message:
update to calc-2.12.6.0


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/06 08:35:53

Modified files:
	sys/arch/octeon/octeon: autoconf.c locore.S 

Log message:
Implement startup smashing in C. The code should be moved
under arch/mips64 once loongson and sgi have gap.o.

Discussed with deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/06 08:39:48

Modified files:
	sys/arch/octeon/octeon: locore.S 

Log message:
Remove code that is not needed right now.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/06 08:53:28

Modified files:
	usr.bin/tmux   : tty.c 

Log message:
Delete input event when evbuffer_read() fails to avoid just spinning
around a dead file descriptor. Seems to fix a problem reported by Greg
Hurrell in GitHub issue 941.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/06 08:58:39

Modified files:
	security/pcsc-lite: Makefile distinfo 
	security/pcsc-lite/patches: patch-src_testpcsc_c 
Added files:
	security/pcsc-lite/patches: patch-src_error_c 

Log message:
Update to pcsc-lite-1.8.21


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/06 08:58:58

Modified files:
	security/ccid  : Makefile distinfo 
	security/ccid/patches: patch-src_Makefile_in 

Log message:
Update to ccid-1.4.27


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/06 09:00:56

Modified files:
	share/man/man7 : roff.7 
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_man.c read.c roff.c 
	                 roff.h roff_html.c roff_term.c roff_validate.c 

Log message:
Minimal implementation of the roff(7) .ce request (center a number
of input lines without filling).
Contrary to groff, high-level macros abort .ce mode for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/06 09:05:44

Modified files:
	games/xboing   : Makefile 
	games/xjig     : Makefile 
	x11/bricons    : Makefile 

Log message:
mandoc(1) supports .ce now, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/06 09:07:35

Modified files:
	usr.bin/tmux   : window-tree.c 

Log message:
Do not pass a state into commands when fired on individual items in tree
mode, rely on the %% target substitution in the command for the chosen
pane and leave the default target as the current pane (where the mode
is). Otherwise, joinp and similar end up with -t and -s the
same. Reported by Jacob Niehus in GitHub issue 960.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/06 09:49:35

Modified files:
	usr.bin/tmux   : server-client.c 

Log message:
Continue and pass keys through if they are repeated keys, so that the
first key after a repeated key doesn't get lost.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 10:50:43

Modified files:
	x11/worker     : Makefile distinfo 
	x11/worker/pkg : PLIST 

Log message:
Update to worker-3.9.0.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 11:06:15

Modified files:
	textproc/nfoview: Makefile distinfo 
	textproc/nfoview/pkg: PLIST 

Log message:
Update to nfoview-1.22.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 11:41:11

Modified files:
	x11/xpad       : Makefile distinfo 
	x11/xpad/pkg   : PLIST 
Removed files:
	x11/xpad/patches: patch-src_xpad-pad_c 

Log message:
Update to xpad-4.8.0.

from new MAINTAINER Brian Callahan


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/06 13:01:27

Modified files:
	sys/dev        : softraid.c 

Log message:
Provide sufficient info in error messages to identify
softraid volume and backing disk when i/o errors occur.

Original issue reported by Paul de Weerd.

Suggestions from jsing@.

ok deraadt@ mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/06/06 13:47:22

Modified files:
	sys/dev/wscons : wsconsio.h wstpad.c 

Log message:
Add support for tap gestures.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/06 14:33:28

Modified files:
	sys/dev/pv     : xbf.c 

Log message:
Call xbf_intr for polled transfers that can't sleep


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/06 14:34:07

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
Don't patch(1) as the 'build' user; it has no right over the src tree.
That bug was hidden because patch(1) returns '0' on that particular case.
To be fixed...

ok robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/06 15:12:01

Modified files:
	sys/dev/pv     : xbf.c 

Log message:
Rewrite the driver to handle 64kb transfers

Although several codepaths in the kernel such as coredump
and buffercache read-ahead feature assume that underlying
hardware is capable of handling 64kb transfers without any
issues, xbf was setup to rely on a single descriptor per
transfer which limited the maximum size of an individual
transfer to 11 4k segments amounting to 44k bytes.

To avoid overbooking, a metadata object is allocated for
each transfer to keep track of associated descriptors
limiting the maximum amount of outstanding transfers to
half the ring size.

The issue was reported by Dan Cross <crossd at gmail.com>,
thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/06/06 15:53:07

Modified files:
	sys/dev/usb    : ubcmtp.c 
	sys/dev/pckbc  : pms.c 
	sys/dev/wscons : wsmouseinput.h 

Log message:
Set the weak variant of hysteresis as default.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/06 18:50:30

Modified files:
	share/man/man7 : roff.7 
	usr.bin/mandoc : roff.c roff.h 

Log message:
Implement the roff(7) .rn (rename macro or string) request.
Renaming a user-defined macro is very simple: just copy
the definition to the new name and delete the old name.
Renaming high-level macros is a bit tricky: use a dedicated
key-value-table, with non-standard names as keys and standard
names as values.  When a macro is found that is not user-defined,
look it up in the "renamed" table and translate it back to the
standard name before passing it on to the high-level parsers.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/06 19:07:06

Modified files:
	mail/cucipop   : Makefile 
	sysutils/lockfile: Makefile 

Log message:
mandoc copes with .rn now, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/06 19:24:27

Modified files:
	x11            : Makefile 

Log message:
unhook rxvt


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/06 19:26:07

Removed files:
	x11/rxvt       : Makefile distinfo 
	x11/rxvt/files : rxvt.desktop 
	x11/rxvt/patches: patch-configure patch-rclock_feature_h 
	                  patch-src_Makefile_in patch-src_command_c 
	                  patch-src_init_c patch-src_ptytty_c 
	                  patch-src_rxvt_h patch-src_screen_c 
	x11/rxvt/pkg   : DESCR-clock DESCR-main MESSAGE-main PLIST-clock 
	                 PLIST-main 

Log message:
Upstream is dead and code has security issues (CVE-2017-7483 for instance)
Users can easily switch to rxvt-unicode

ok tb@ fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/06 19:26:40

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
register rxvt departure


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/06 19:48:15

Modified files:
	regress/usr.bin/ssh: proto-version.sh 

Log message:
unbreak after sshv1 purge


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/06 20:13:52

Modified files:
	usr.bin/mandoc : term.c term.h 

Log message:
The \h escape sequence provides another method for moving backwards,
and after that, previously written output gets overwritten, but
overwriting with blanks does *not* erase previously written content.
Yes, manual pages exist that are crazy enough to rely on that...


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/06 20:17:01

Modified files:
	mail/procmail  : Makefile 
Added files:
	mail/procmail/patches: patch-man_procmailrc_man 

Log message:
Mandoc now copes with .rn and \h'-...', drop USE_GROFF and bump.
While here, fix an escaping error causing information loss.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 21:02:29

Modified files:
	www/uget       : Makefile distinfo 

Log message:
Update to uget-2.0.9.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 21:08:42

Modified files:
	www/rawdog     : Makefile distinfo 

Log message:
Update to rawdog-2.22.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/06 21:49:51

Modified files:
	sysutils/supervisor: Makefile distinfo 
	sysutils/supervisor/patches: patch-supervisor_skel_sample_conf 

Log message:
Update to supervisor-3.3.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/07 02:39:37

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.62.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/07 02:40:09

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.99.


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/06/07 03:11:52

Modified files:
	usr.bin/htpasswd: htpasswd.c 

Log message:
htpasswd: use crypt_newhash instead of the bcrypt API

man bcrypt states:
These functions are deprecated in favor of crypt_checkpass(3) and
crypt_newhash(3).

hence with this change we move htpasswd to the new API, while here
also change the rounds from a hardcoded 8 to automatic selection based
on system performance.

OK florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/07 03:41:57

Modified files:
	bin/chmod      : chmod.1 

Log message:
X is not restricted to just the + operator;

diff from klemens nanni
confirmed by otto


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 03:46:32

Modified files:
	sbin/ifconfig  : ifconfig.8 

Log message:
update the VLAN doco.

the parameters are parent and vnetid, not vlandev and vlan. svlan(4) is
also a thing.

ok jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/07 03:58:30

Modified files:
	textproc/icu4c/patches: patch-source_common_putilimp_h 

Log message:
No more sparc.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/06/07 06:23:49

ports/security/yara/main/patches

Update of /cvs/ports/security/yara/main/patches
In directory cvs.openbsd.org:/tmp/cvs-serv71874/patches

Log Message:
Directory /cvs/ports/security/yara/main/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/06/07 06:24:52

Modified files:
	security/yara  : Makefile.inc 
	security/yara/main: Makefile distinfo 
	security/yara/python: distinfo 
Added files:
	security/yara/main/patches: patch-libyara_modules_pe_c 

Log message:
update yara to 3.6.1, and link to LibreSSL instead of OpenSSL.
discussed with&patch from antoine[at]freebsd[dot]org.
ok benoit@.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/07 07:25:18

Modified files:
	usr.sbin/smtpd : smtpd.conf.5 

Log message:
reword "listen on socket" somewhat; ok gilles


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/07 07:28:02

Modified files:
	sys/net        : route.c 
	sys/netinet    : in_pcb.c 
	sys/netinet6   : nd6_rtr.c 

Log message:
Grab the KERNEL_LOCK() around rtm*() functions.  Routing sockets globals
aren't protected by the NET_LOCK().

While here change lock assertions in rt_{set,put}gwroute(), the NET_LOCK()
is enough.

Tested by Hrvoje Popovski.

ok jmatthew@, claudio@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/07 07:30:36

Modified files:
	sys/kern       : kern_malloc.c 

Log message:
Assert that the calling CPU is holding the KERNEL_LOCK() in malloc(9)
and free(9).

The exception is at early boot when only one CPU is running since we
grab the KERNL_LOCK() relatively late in main().

ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/07 07:41:02

Modified files:
	sys/kern       : uipc_socket2.c 

Log message:
Assert that the KERNEL_LOCK() is held when messing with routing,
pfkey and unix sockets.

ok claudio@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/07 08:37:30

Modified files:
	usr.bin/tmux   : mode-tree.c tmux.1 tmux.h window-buffer.c 
	                 window-client.c window-tree.c 

Log message:
Add simple searching (C-s and n) to the various choose modes: by name
for client and tree, and by name and content for buffer.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/07 08:40:21

Modified files:
	devel/bpython  : Makefile distinfo 

Log message:
Update to bpython-0.16.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/07 08:41:53

Modified files:
	usr.sbin/vmd   : loadfile.h 

Log message:
vmd: properly advertise 640k base memory, not 636k. That was a holdover
from before we had seabios support (to fake a hole where the EBDA would
be), and seabios always assumes 640k low memory is available. Fixes a
problem where FreeDOS guests whose seabios placed the virtio ring too
close to 640k would crash vmd. tested on a variety of guest OS, with
and without seabios. no regressions seen.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/07 08:50:17

Modified files:
	games/brumbrumrally: Makefile distinfo 
Removed files:
	games/brumbrumrally/patches: patch-src_Menu_cpp 
	                             patch-src_hqx_common_h 

Log message:
Update to brumbrumrally-0.7.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/07 08:53:28

Modified files:
	usr.sbin/vmd   : ns8250.c ns8250.h vm.c vmm.h 

Log message:
vmd: Implement simulated baudrate support in the ns8250 module. The
previous version was allowing an output rate that is "too fast", and linux
guests would give up after 512 characters TXed ("too much work for irq4").

This diff calculates the approximate rate we can sustain at the current
programmed baud rate and limits the output to that rate by inserting a
HZ delay after a specified number of characters have been transmitted.
This fixes the linux guest console issue.

Note that the console now outputs at more or less the selected baud rate,
instead of nearly instantaneously as before - if you selected 9600 in
your guest VMs before, you might want to change that to 115200 now for a
better console experience.

krw@ "seems like a good idea to me"


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/07 09:00:05

Modified files:
	games/armagetronad: Makefile distinfo 
	games/armagetronad/patches: patch-config_Makefile_in 
Removed files:
	games/armagetronad/patches: patch-src_network_nNetObject_cpp 
	                            patch-src_tools_tResourceManager_cpp 

Log message:
Update to armagetronad-0.2.8.3.4.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/07 09:27:46

Modified files:
	usr.bin/tmux   : mode-tree.c proc.c tmux.h window-buffer.c 

Log message:
Return 1 if name matches not 0, also fix some spaces.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/07 09:41:30

Modified files:
	devel          : Makefile 
	devel/py-cloudpickle: Makefile 
	devel/py-cloudpickle/pkg: PLIST 

Log message:
add py3 support to devel/py-cloudpickle, from bcallah


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/07 09:49:21

Modified files:
	sys/dev/pv     : xbf.c 

Log message:
Acquire submit queue mutex only once per xbf_complete_cmd invocation
and remove some leftover assertions.


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/06/07 10:01:07

Modified files:
	share/mk       : bsd.lib.mk 

Log message:
make sure there are no duplicate object files linked when building syspatches


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/07 10:25:18

Modified files:
	textproc/icu4c : Makefile 

Log message:
Reinstate -finhibit-size-directive when using gcc. It was the removal of that
patch that triggered the symbol(icudt58_dat) size mismatch warning...
We can now use --with-data-packaging=archive only on powerpc and arm which means
using php-intl or anything linked to icu in a chroot will work.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/06/07 10:47:29

Modified files:
	sbin/ifconfig  : brconfig.c 

Log message:
Fix clang warning about tautological compare: an unsigned long can't
be negative.  ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/07 11:03:39

Modified files:
	devel/kf5      : Makefile kf5.port.mk 
	devel/kf5/attica: Makefile distinfo 
	devel/kf5/baloo: Makefile 
	devel/kf5/bluez-qt: Makefile distinfo 
	devel/kf5/breeze-icons: distinfo 
	devel/kf5/breeze-icons/pkg: PLIST 
	devel/kf5/extra-cmake-modules: distinfo 
	devel/kf5/extra-cmake-modules/patches: 
	                                       patch-kde-modules_KDECompilerSettings_cmake 
	devel/kf5/extra-cmake-modules/pkg: PLIST 
	devel/kf5/frameworkintegration: Makefile distinfo 
	devel/kf5/frameworkintegration/pkg: PLIST 
	devel/kf5/kactivities: Makefile distinfo 
	devel/kf5/kactivities-stats: Makefile distinfo 
	devel/kf5/kapidox: distinfo 
	devel/kf5/kapidox/pkg: PLIST 
	devel/kf5/karchive: Makefile distinfo 
	devel/kf5/kauth: Makefile distinfo 
	devel/kf5/kbookmarks: Makefile distinfo 
	devel/kf5/kcmutils: Makefile distinfo 
	devel/kf5/kcodecs: Makefile distinfo 
	devel/kf5/kcompletion: Makefile distinfo 
	devel/kf5/kconfig: Makefile distinfo 
	devel/kf5/kconfig/pkg: PLIST 
	devel/kf5/kconfigwidgets: Makefile distinfo 
	devel/kf5/kcoreaddons: Makefile distinfo 
	devel/kf5/kcrash: Makefile distinfo 
	devel/kf5/kdbusaddons: Makefile distinfo 
	devel/kf5/kdeclarative: Makefile distinfo 
	devel/kf5/kdeclarative/pkg: PLIST 
	devel/kf5/kded : Makefile distinfo 
	devel/kf5/kdelibs4support: Makefile distinfo 
	devel/kf5/kdelibs4support/pkg: PLIST 
	devel/kf5/kdesignerplugin: Makefile distinfo 
	devel/kf5/kdesignerplugin/pkg: PLIST 
	devel/kf5/kdesu: Makefile distinfo 
	devel/kf5/kdewebkit: Makefile distinfo 
	devel/kf5/kdnssd: Makefile distinfo 
	devel/kf5/kdoctools: Makefile distinfo 
	devel/kf5/kdoctools/pkg: PLIST 
	devel/kf5/kemoticons: Makefile distinfo 
	devel/kf5/kfilemetadata: Makefile distinfo 
	devel/kf5/kfilemetadata/pkg: PLIST-locale PLIST-main 
	devel/kf5/kglobalaccel: Makefile distinfo 
	devel/kf5/kguiaddons: Makefile distinfo 
	devel/kf5/khtml: Makefile distinfo 
	devel/kf5/ki18n: Makefile distinfo 
	devel/kf5/ki18n/pkg: PLIST 
	devel/kf5/kiconthemes: Makefile distinfo 
	devel/kf5/kidletime: Makefile distinfo 
	devel/kf5/kimageformats: Makefile distinfo 
	devel/kf5/kinit: Makefile distinfo 
	devel/kf5/kio  : Makefile distinfo 
	devel/kf5/kio/pkg: PLIST 
	devel/kf5/kitemmodels: Makefile distinfo 
	devel/kf5/kitemviews: Makefile distinfo 
	devel/kf5/kjobwidgets: Makefile distinfo 
	devel/kf5/kjs  : Makefile distinfo 
	devel/kf5/kjs/patches: patch-src_kjs_collector_cpp 
	devel/kf5/kjsembed: Makefile distinfo 
	devel/kf5/kmediaplayer: Makefile distinfo 
	devel/kf5/knewstuff: Makefile distinfo 
	devel/kf5/knewstuff/pkg: PLIST 
	devel/kf5/knotifications: Makefile distinfo 
	devel/kf5/knotifyconfig: Makefile distinfo 
	devel/kf5/kpackage: Makefile distinfo 
	devel/kf5/kpackage/pkg: PLIST 
	devel/kf5/kparts: Makefile distinfo 
	devel/kf5/kpeople: Makefile distinfo 
	devel/kf5/kplotting: Makefile distinfo 
	devel/kf5/kpty : Makefile distinfo 
	devel/kf5/kross: Makefile distinfo 
	devel/kf5/krunner: Makefile distinfo 
	devel/kf5/kservice: Makefile distinfo 
	devel/kf5/ktexteditor: Makefile distinfo 
	devel/kf5/ktexteditor/pkg: PLIST 
	devel/kf5/ktextwidgets: Makefile distinfo 
	devel/kf5/kunitconversion: Makefile distinfo 
	devel/kf5/kwallet: Makefile distinfo 
	devel/kf5/kwallet/patches: 
	                           patch-src_runtime_kwalletd_backend_blowfish_cc 
	devel/kf5/kwidgetsaddons: Makefile distinfo 
	devel/kf5/kwidgetsaddons/pkg: PLIST 
	devel/kf5/kwindowsystem: Makefile distinfo 
	devel/kf5/kxmlgui: Makefile distinfo 
	devel/kf5/kxmlrpcclient: Makefile distinfo 
	devel/kf5/oxygen-icons: Makefile distinfo 
	devel/kf5/oxygen-icons/pkg: PLIST 
	devel/kf5/plasma-framework: Makefile distinfo 
	devel/kf5/plasma-framework/pkg: PLIST 
	devel/kf5/prison: Makefile distinfo 
	devel/kf5/solid: Makefile distinfo 
	devel/kf5/sonnet: Makefile distinfo 
	devel/kf5/syntax-highlighting: Makefile distinfo 
	devel/kf5/syntax-highlighting/pkg: PLIST 
	devel/kf5/threadweaver: Makefile distinfo 
Removed files:
	devel/kf5/baloo/files: FindInotify.cmake 
	devel/kf5/kwallet/patches: 
	                           patch-src_runtime_kwalletd_CMakeLists_txt 
	                           patch-tests_kwalletd_CMakeLists_txt 
	devel/kf5/sonnet/patches: patch-cmake_FindHUNSPELL_cmake 

Log message:
Update KDE Frameworks to 5.34.0

A few tweaks from zhuk@. Thanks!

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/07 11:08:34

Modified files:
	net/irssi      : Tag: OPENBSD_6_1 Makefile 
Added files:
	net/irssi/patches: Tag: OPENBSD_6_1 patch-src_irc_dcc_dcc-get_c 
	                   patch-src_irc_dcc_dcc-resume_c 

Log message:
backport patches for CVE-2017-9468 and CVE-2017-9469

ok awolk@, Wiktor Izdebski (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 11:38:08

Modified files:
	usr.bin/mandoc : man_term.c mdoc_term.c roff_term.c tbl_term.c 
	                 term.c term.h term_ascii.c term_ps.c 

Log message:
Prepare the terminal driver for filling multiple columns in parallel,
first step: split column data out of the terminal state struct into
a new column state struct and use an array of such column state
structs.  No functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/07 11:39:44

Modified files:
	x11            : Makefile 

Log message:
hook x11/mate up to the build, ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/06/07 11:51:23

Modified files:
	www/kcgi       : Makefile distinfo 

Log message:
Update kcgi to 0.9.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/06/07 11:54:38

Modified files:
	sysutils/login_duo: Makefile distinfo 

Log message:
Update login_duo to 1.9.21


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/07 11:59:36

Modified files:
	usr.sbin/cron  : atrun.c 

Log message:
When running at jobs, open the at spool and use the directory fd
with openat(), fstatat() and unlinkat().  This is similar to how
we run cron jobs and eliminates the need for run_job() to find the
basename of the at file.  OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 14:01:07

Modified files:
	usr.bin/mandoc : term.c term.h 

Log message:
Prepare the terminal driver for filling multiple columns in parallel,
second step: make the per-column byte pointer persistent across
term_flushln() calls, such that a subsequent call can continue at
the point where the previous call left.  If more than one column
is in use, return from term_flushln() when the column is full,
rather than breaking the output line.

No functional change, because nothing sets up multiple columns yet.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/07 14:09:07

Modified files:
	regress/sys/net/pf_fragment: pf.conf 

Log message:
To test IPv6 fragements with extension header, the pf pass rules
need an allow-opts.  Otherwise pf blocks packets with option header.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 14:30:13

Modified files:
	usr.bin/mandoc : mdoc.c 

Log message:
Make "new sentence, new line" detection stricter:
Also catch cases where the new sentence starts with a one-letter word
and the input line is broken right after that word.
Suggested by Thomas Klausner <wiz @ NetBSD>.

It's merely a three-bit diff, changing one byte from 0x34 to 0x33,
so what can possibly go wrong...


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/07 14:53:59

Modified files:
	sys/kern       : kern_pledge.c 
	sys/sys        : acct.h 
	usr.bin/lastcomm: lastcomm.1 lastcomm.c 
	lib/libc/sys   : pledge.2 

Log message:
Add an acct(5) flag for pledge violations.  Then lastcomm(1) shows
when something went wrong.  This allows to monitor whether the
system is under attack and that the attack has been prevented by
OpenBSD pledge(2).
OK deraadt@ millert@ jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 14:58:36

Modified files:
	usr.bin/mandoc : mdoc.c 

Log message:
Also catch "new sentence, new line" if there are three blanks
between the sentences.  Thomas Klausner says he has seen some
of these, and i don't see any false positives.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 15:05:19

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
Remove "new sentence, new line" detection, covered by mandoc.
OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/07 15:47:07

Modified files:
	sbin/ifconfig  : ifconfig.8 

Log message:
use the same formatting for vlan as the rest of the page; ok dlg


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/07 15:57:46

Modified files:
	net/irssi      : Makefile distinfo 
	net/irssi/patches: patch-src_core_settings_c 
	                   patch-src_fe-common_core_Makefile_in 
	                   patch-src_perl_Makefile_in 
	net/irssi/pkg  : PLIST 

Log message:
update to irssi-1.0.3, based on a diff from viq (maintainer)
fixes include

v1.0.3 2017-06-06  The Irssi team <staff@irssi.org>
- Fix out of bounds read when scanning expandos (GL!11).
- Fix invalid memory access with quoted filenames in DCC
(GL#8, GL!12).
- Fix null-pointer dereference on DCC without address (GL#9, GL!13).
- Improve integer overflow handling. Originally reported by
oss-fuzz#525 (#706).

v1.0.2 2017-03-10  The Irssi team <staff@irssi.org>
- Prevent some null-pointer crashes (GL!9).
- Correct dereferencing of already freed server objects during
output of netjoins. Found by APic (GL!10, GL#7).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/07 15:58:16

Modified files:
	net/irssi-xmpp : Makefile 
Added files:
	net/irssi-xmpp/patches: patch-src_core_xmpp-servers_c 

Log message:
unbreak irssi-xmp with irssi 1.x, from viq (irssi maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/07 15:59:08

Modified files:
	net            : Makefile 
Removed files:
	net/irssi-silc : Makefile distinfo 
	net/irssi-silc/patches: 
	                        patch-apps_irssi_src_fe-common_silc_Makefile_in 
	                        patch-apps_irssi_src_fe-common_silc_fe-common-silc_c 
	                        patch-apps_irssi_src_silc_core_Makefile_in 
	                        patch-apps_irssi_src_silc_core_client_ops_c 
	                        patch-apps_irssi_src_silc_core_silc-core_c 
	                        patch-apps_irssi_src_silc_core_silc-nicklist_c 
	                        patch-configure_ac patch-doc_Makefile_in 
	                        patch-lib_Makefile_in 
	                        patch-lib_silcclient_client_connect_c 
	                        patch-lib_silcclient_command_c 
	                        patch-lib_silccore_silcpacket_c 
	                        patch-lib_silcske_silcske_c 
	net/irssi-silc/pkg: DESCR MESSAGE PLIST 

Log message:
remove the irssi-silc plugin, it's failing with irssi-1.0.3.
i'd suggest using silc-client if this is still needed (it's based on irssi
anyway).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/07 16:00:05

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
register irssi-silc removal


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/07 16:02:00

Modified files:
	devel/py-cloudpickle/pkg: PLIST 

Log message:
unbreak py27 packaging, missed MODPY_COMMENT. breakage reported by nigel@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/07 17:15:49

Modified files:
	usr.sbin/vmctl : main.c 

Log message:
vmctl: change default "vmctl console" (cu) baud rate to 115200. Not
strictly needed but matches the previous baudrate diff committed earlier
to vmd.

ok deraadt, phessler


CVSROOT:	/cvs
Module name:	ports
Changes by:	mlarkin@cvs.openbsd.org	2017/06/07 17:21:33

Modified files:
	emulators/sdlmame: Makefile 

Log message:
sdlmame: this requires USE_WXNEEDED for various games

ok sthen


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 17:29:31

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c roff.h 

Log message:
style checks related to .Er; inspired by mdoclint(1)


CVSROOT:	/cvs
Module name:	ports
Changes by:	brynet@cvs.openbsd.org	2017/06/07 17:34:03

Modified files:
	lang/gcc/4.6   : Makefile 
	lang/gcc/4.6/pkg: PLIST-main 
	lang/gcc/4.9   : Makefile 
	lang/gcc/4.9/patches: patch-gcc_config_i386_i386_c 
	lang/gcc/4.9/pkg: PLIST-main 
	lang/gcc/6     : Makefile 
	lang/gcc/6/patches: patch-gcc_config_i386_i386_c 
	lang/gcc/6/pkg : PLIST-main 

Log message:
Backport, or rather forward port, a fix for the broken stack-protector on amd64.

This mirrors a change made to base gcc4.2 by martynas@ in 2014.

https://marc.info/?l=openbsd-ports&m=149656580518245&w=2

Includes an independent fix from upstream for gcc6, currently unlinked
from builds

Also, stop installing libssp as it broken on OpenBSD as it tries to use gets()

pirofti@ ok'd an earlier version, suggestions from sthen@
"doesn't look dangerous" espie@
"pretty astounding" deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/07 17:36:43

Modified files:
	usr.bin/at     : at.c 
	usr.sbin/cron  : atrun.c cron.c database.c env.c globals.h 
	                 user.c 

Log message:
In cron(8), require that crontab and at files in the spool be owned
by group crontab.  The at(1) command now creates files owned by
group crontab, the crontab(1) command already does this.

Files in the crontab spool with parse errors are now ignored;
crontab(1) will not install a crontab file with parse errors.
The system crontab file (/etc/crontab) is not affected by this.

The required permissions on crontab files have been tightened.
Files in the cron spool must be mode 0600 (as created by crontab(1)).
The system crontab file may be readable/writable by the owner,
readable by group and readable by other.  The system crontab must
be readable by the owner.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/07 18:21:23

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h read.c 

Log message:
Portable mandoc just got a warning about unknown .Lb names
which we don't want in OpenBSD, but let's keep the message table
and the manual page in sync.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 18:46:42

Modified files:
	sbin/ifconfig  : ifconfig.8 

Log message:
consistently use lowercase suffixes for 802.1 things.

eg, 802.1x, 802.1q, and 802.1ad


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 19:17:01

Modified files:
	share/man/man4 : vlan.4 

Log message:
consistently use lowercase for the 802.1 suffixes.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 19:34:00

Modified files:
	sys/dev/ic     : gem.c 

Log message:
make the gem tx path MPSAFE.

this mostly follows the pattern in ifq.h

ok jmatthew@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 21:12:53

Modified files:
	share/man/man9 : RBT_INIT.9 
	sys/sys        : tree.h 
	sys/kern       : subr_tree.c 

Log message:
add RBT_SET_LEFT, RBT_SET_RIGHT, and RBT_SET_PARENT

this are provided so an RBT and it's topology can be copied without
having to reinsert the copied nodes into a new tree.

there are two reasons RBT_LEFT/RIGHT/PARENT macros cant be used like
RB_LEFT/RIGHT/PARENT for this. firstly, RBT_LEFT and co are functions that
return a pointer value, they dont provide access to the pointer
itself for use as an lvalue that you can assign to. secondly, RBT
entries dont store pointers to other nodes, they point to the
RBT_ENTRY structures inside other nodes. this means that RBT_SET_LEFT
and co have to get an offset from the node to the RBT_ENTRY and
store that.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 21:22:56

Modified files:
	sys/kern       : subr_tree.c 

Log message:
use unsigned long instead of caddr_t to move between nodes and entries.

this removes the need for sys/param.h. this code can be built with
only sys/tree.h, which in turn only needs sys/_null.h.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 21:30:52

Modified files:
	sys/kern       : subr_tree.c 

Log message:
make rb_n2e return a struct rb_entry *, not void *

maybe this will help prevent misassignment in the future.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/07 21:37:25

Modified files:
	sys/sys        : tree.h 

Log message:
remove the _rb_color prototype in RBT, it's unused/unimplimented


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/07 23:35:25

Modified files:
	sys/arch/landisk/conf: Makefile.landisk files.landisk 
	sys/arch/landisk/landisk: locore.S 
Added files:
	sys/arch/landisk/landisk: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.

I haven't worked on the unmap/smashing of the startup code yet.


CVSROOT:	/cvs
Module name:	ports
Changes by:	anton@cvs.openbsd.org	2017/06/08 01:20:51

Modified files:
	devel/ruby-bundler: Makefile distinfo 
	devel/ruby-bundler/pkg: PLIST 

Log message:
Update bundler to 1.15.1.

ok jeremy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:23:43

Modified files:
	security/gnutls: Tag: OPENBSD_6_1 Makefile 
Added files:
	security/gnutls/patches: Tag: OPENBSD_6_1 
	                         patch-lib_ext_status_request_c 

Log message:
Fix for GNUTLS-SA-2017-4
- decoding a status response TLS extension with valid contents could lead to a crash due to a null pointer dereference


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:25:12

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.63.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:25:28

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.100.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:29:13

Modified files:
	sysutils/amazon-ssm-agent: Makefile distinfo 

Log message:
Update to amazon-ssm-agent-2.0.805.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:33:37

Modified files:
	security/gnutls: Makefile distinfo 

Log message:
SECURITY update to gnutls-3.5.13.
GNUTLS-SA-2017-4: decoding a status response TLS extension with valid contents could lead to a crash due to a null pointer dereference


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:39:31

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-158.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/08 01:40:00

Modified files:
	sysutils/terraform: Makefile distinfo 

Log message:
Update to terraform-0.9.8.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/08 01:48:04

Modified files:
	usr.bin/tmux   : window-client.c 

Log message:
Add size to client descriptions in list, suggested by Greg Hurrell.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/08 04:09:40

Modified files:
	www/kibana     : Makefile distinfo 
	www/kibana/pkg : PLIST 

Log message:
security update to kibana-5.4.1, from Pavel Korovin, ok pea@
(-stable has 5.2.2 which isn't affected)

ESA-2017-07 CVE-2017-8439 2017-06-01 Kibana version 5.4.0 was affected
by a Cross Site Scripting (XSS) bug in the Time Series Visual Builder.
This bug could allow an attacker to obtain sensitive information from
Kibana users. All Kibana 5.4.0 users should upgrade to version 5.4.1.
If upgrading is impossible, the time series visual builder can be
disabled by setting metrics.enabled: false in the kibana.yml. Note that
this will trigger a re-optimization when you restart Kibana.

ESA-2017-08 CVE-2017-8440 2017-06-01 Starting in version 5.3.0, Kibana
had a cross-site scripting (XSS) vulnerability in the Discover page
that could allow an attacker to obtain sensitive information from or
perform destructive actions on behalf of other Kibana users.  Thanks to
Thomas G ytil for reporting this issue. All users of Kibana 5.3 or 5.4
should upgrade to versions 5.3.3 and 5.4.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/06/08 04:25:01

Modified files:
	games/spaceinvaders: Makefile distinfo 

Log message:
update to spaceinvaders-1.4.
remove do-build section since latest version can do 'make all'.
ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/08 05:44:00

Modified files:
	sys/arch/loongson/conf: Makefile.loongson files.loongson 
	sys/arch/loongson/loongson: autoconf.c locore.S 
Added files:
	sys/arch/loongson/loongson: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.

Late during kernel boot, smash the startup code with traps so that
it does not point to the other randomly placed code.  It has be smashed,
because loongson runs in the kseg0 space.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/08 05:45:44

Modified files:
	usr.sbin/ikectl: ikeca.c 

Log message:
Invoke openssl with -passin file rather than -key in ca_revoke().
From Andrei-Marius Radu via sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/08 05:47:25

Modified files:
	sys/arch/sgi/conf: Makefile.sgi files.sgi 
	sys/arch/sgi/sgi: autoconf.c locore.S 
Added files:
	sys/arch/sgi/sgi: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.

Late during kernel boot, smash the startup code with traps so that
it does not point to the other randomly placed code.  It has be smashed,
because sgi runs in the kseg0 or xkphys space.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/08 06:02:52

Modified files:
	sys/arch/loongson/loongson: autoconf.c 
	sys/arch/mips64/include: autoconf.h 
	sys/arch/mips64/mips64: mips64_machdep.c 
	sys/arch/octeon/octeon: autoconf.c 
	sys/arch/sgi/sgi: autoconf.c 

Log message:
Move loongson/octeon/sgi unmap_startup() under arch/mips64.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/08 06:11:46

Modified files:
	sys/arch/octeon/octeon: locore.S locore0.S 

Log message:
Wrap startup code with .ent and .end for proper disassembly.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/08 06:37:14

Modified files:
	share/man/man4 : gre.4 

Log message:
wrec.org is dead. Use working links instead.
patch from jj, found by "Norrland" on icb. Thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/08 06:53:39

Modified files:
	mail           : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	mail/teapop    : Makefile distinfo 
	mail/teapop/patches: patch-etc_Makefile_in 
	                     patch-teapop_Makefile_in 
	mail/teapop/pkg: DESCR PLIST 

Log message:
remove old port mail/teapop; broken since getpwnam_shadow changes, 2003 code,
no update in ports since 2006, homepage is 404.  ok fcambus@ danj@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/08 06:54:40

Modified files:
	usr.bin/mandoc : html.c man_html.c man_term.c mdoc_man.c 
	                 mdoc_term.c out.c out.h roff_html.c roff_term.c 
	                 term.c term_tab.c 

Log message:
make the internal a2roffsu() interface more powerful by returning
a pointer to the end of the parsed data, making it easier to
parse subsequent bytes


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/08 07:28:03

Modified files:
	sys/netinet6   : nd6_nbr.c 

Log message:
Notify userland when a new ND is reachable.

The same notification is already present in ARP.

From Jan Klemkow, ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/08 07:28:46

Removed files:
	devel/kf5/kactivities/patches: patch-autotests_common_test_h 

Log message:
Kill patch already present in 5.34.0, missed in previous

Spotted by espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/08 07:43:24

Modified files:
	devel/ocaml-ocamlbuild: Makefile 

Log message:
don't peek in /usr/local during fake


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/08 08:27:47

Modified files:
	telephony/libzrtp: Makefile distinfo 
	telephony/libzrtp/pkg: PLIST 
Removed files:
	telephony/libzrtp/patches: patch-Makefile_am patch-configure_in 
	                           patch-include_zrtp_config_h 
	                           patch-include_zrtp_config_user_h 
	                           patch-src_zrtp_c 

Log message:
update to libzrtp-0.20170606

In the process:

* change upstream to https://github.com/juha-h/libzrtp
* remove patches that are already integrated by upstream
* avoid hidden dependency on doxygen


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/08 08:29:37

Modified files:
	telephony/baresip/baresip: Makefile distinfo 
	telephony/baresip/baresip/patches: patch-src_config_c 
	telephony/baresip/baresip/pkg: PLIST-main 
	telephony/baresip/re: Makefile distinfo 
	telephony/baresip/re/patches: patch-Makefile 
	telephony/baresip/rem: Makefile distinfo 

Log message:
Update to baresip-0.5.3, rem-0.5.1, re-0.5.3

While at it, disable Daala support, as corresponding module is not being
updated upstream.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/08 08:38:35

Modified files:
	regress/usr.sbin/syslogd: args-client-multilisten.pl 

Log message:
Start syslogd with -rr.  With different timing the order of messages
changed.  Then a "last message repeated" confused the test.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/08 09:25:57

Modified files:
	lang/gprolog   : Makefile distinfo 
	lang/gprolog/patches: patch-EnginePl_machine_h 
	                      patch-EnginePl_obj_chain_h 
	                      patch-Ma2Asm_Makefile_in patch-Makefile_in 
	                      patch-Pl2Wam_check_boot 
	lang/gprolog/pkg: PLIST 
Added files:
	lang/gprolog/patches: patch-configure_in 
Removed files:
	lang/gprolog/patches: patch-Fd2C_Makefile_in 
	                      patch-Pl2Wam_Makefile_in 
	                      patch-TopComp_Makefile_in 

Log message:
update to 1.4.4, fix configure so that various patches are no longer needed
maintainer timeout


CVSROOT:	/cvs
Module name:	src
Changes by:	henning@cvs.openbsd.org	2017/06/08 09:39:38

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
clarify set prio: the second prio given applies to
1) TCP ACKs
2) packets with ToS=lowdelay
and not TCP ACKs that have ToS=lowdelay
confusion discovered during bsdcan pf tutorial


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/08 09:50:46

Modified files:
	graphics/quirc : Makefile distinfo 

Log message:
update to libquirc-1.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/08 09:59:11

Modified files:
	sysutils/coreutils: Makefile 

Log message:
bcallah takes maintainer


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/08 10:03:04

Modified files:
	graphics/img2pdf: Makefile distinfo 

Log message:
Update to img2pdf-0.2.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/08 10:14:39

Modified files:
	net/unifi      : Makefile distinfo 

Log message:
update to unifi-5.4.18 stable candidate


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/08 10:16:43

Modified files:
	databases/mongodb: Makefile distinfo 
Added files:
	databases/mongodb/patches: 
	                           patch-src_mongo_util_processinfo_openbsd_cpp 

Log message:
update to MongoDB-3.2.13, from Andrew Aldridge


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/08 10:18:50

Removed files:
	databases/mongodb/patches: 
	                           patch-src_mongo_util_signal_handlers_synchronous_cpp 

Log message:
missed cvs rm


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/08 10:23:39

Modified files:
	usr.sbin/cron  : atrun.c 

Log message:
Add logging for when we find a non-file in the at spool that was
a file when we scanned the at spool earlier.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/08 11:13:39

Modified files:
	usr.sbin/cron  : cron.8 

Log message:
update permissions info to match recent changes


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/08 11:14:02

Modified files:
	sys/kern       : kern_sig.c 
	sys/sys        : acct.h 
	share/man/man5 : acct.5 
	usr.bin/lastcomm: lastcomm.1 lastcomm.c 

Log message:
ASLR, W^X, and guard pages trigger processor traps that result in
SIGILL, SIGBUS, SIGSEGV signals.  Make such memory violations visible
in lastcomm(1).  This also works if a programm tries to hide them
with a signal handler.  Manual kill -SEGV does not generate false
positives.
OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/08 11:29:33

Log message:
    Start with a clean /var/account/acct accounting file and turn on
    process accounting with accton(8).  Each test executes a command
    with a unique name and checks the flags in the lastcomm(1) output.
    Run tests with fork, su, core, xsig, pledge, trap accounting.
    
    Status:
    
    Vendor Tag:	bluhm
    Release Tags:	bluhm_20170608
    
    N src/regress/usr.bin/lastcomm/Makefile
    N src/regress/usr.bin/lastcomm/crash.c
    N src/regress/usr.bin/lastcomm/LICENSE
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/08 11:33:21

Modified files:
	regress/usr.bin: Makefile 

Log message:
Link lastcomm regress to build.


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/08 11:44:44

Modified files:
	net/py-geventhttpclient: Makefile 

Log message:
fix tests

No changes in the package contents, thus no revision bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/08 12:05:04

Log message:
    Import x11/x2goclient 4.1.0.0
    
    The x2goclient application provides you the possibility to access the
    remote running desktop, exchange files with it and redirect sound from
    the session on the server to your local client.
    
    ok jca@ Many thanks!
    
    Status:
    
    Vendor Tag:	rsadowski
    Release Tags:	rsadowski_20170608
    
    N ports/x11/x2goclient/Makefile
    N ports/x11/x2goclient/distinfo
    N ports/x11/x2goclient/patches/patch-src_sshmasterconnection_cpp
    N ports/x11/x2goclient/patches/patch-src_sshprocess_cpp
    N ports/x11/x2goclient/patches/patch-x2goclient_pro
    N ports/x11/x2goclient/pkg/DESCR
    N ports/x11/x2goclient/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/08 12:11:15

Modified files:
	share/man/man7 : tbl.7 
	usr.bin/mandoc : mandoc.h out.c out.h tbl.c tbl_data.c 
	                 tbl_html.c tbl_layout.c tbl_term.c 
	regress/usr.bin/mandoc/tbl/mod: Makefile 
Added files:
	regress/usr.bin/mandoc/tbl/mod: width.in width.out_ascii 

Log message:
Implement w layout specifier (minimum column width).
Improve width calculation of text blocks.
Reduces the groff/mandoc diff in Base+Xenocara by about 800 lines.


CVSROOT:	/cvs
Module name:	ports
Changes by:	steven@cvs.openbsd.org	2017/06/08 12:19:37

Modified files:
	sysutils/syslog-ng: Makefile distinfo 
	sysutils/syslog-ng/files: syslog-ng.conf 
	sysutils/syslog-ng/patches: patch-Makefile_in patch-configure 
	                            patch-libtest_mock-transport_c 
	                            patch-modules_afsocket_transport-unix-socket_c 
	                            patch-modules_dbparser_patternize_c 
	sysutils/syslog-ng/pkg: PLIST 
Removed files:
	sysutils/syslog-ng/patches: patch-lib_tlscontext_c 
	                            patch-modules_afmongodb_libmongo-client_src_mongo-utils_c 

Log message:
update to 3.9.1


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/08 12:25:16

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete -e and -l, now covered by mandoc; OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/08 12:33:08

Modified files:
	.              : Makefile.cross 

Log message:
Pass CC and CXX to make depend as well.  As soon as we support
dependencies in the clang makefiles we need to make sure to use
a compiler that supports C++11.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/08 13:23:39

Modified files:
	sbin/ifconfig  : ifconfig.8 ifconfig.c 

Log message:
remove the timeslot code, it was only for now deleted T1 devices.
ok sthen


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/08 13:34:03

Modified files:
	security/pcsc-lite: Makefile 
Removed files:
	security/pcsc-lite/patches: patch-src_error_c 

Log message:
Remove local hack and switch to gcc from ports.

I'm not sure and there could even be security implications...

https://github.com/LudovicRousseau/PCSC/commit/eab1d67295e4e1d5c12bbca77bc57c50fd384a4e


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/08 13:35:34

Modified files:
	usr.bin/mandoc : roff.c 

Log message:
Properly reinitialize roffce_node between parses,
or this may crash with use-after-free in makewhatis(8);
reported by jmc@, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/08 13:40:49

Modified files:
	sys/arch/armv7/stand/efiboot: exec.c 

Log message:
Remove esym (.data) patching.  Thanks to Mark we stopped requiring this
and with the random-order kernel we shouldn't be doing that anyway.

ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/08 13:43:22

Modified files:
	x11            : Makefile 

Log message:
unhook x2goclient


CVSROOT:	/cvs
Module name:	src
Changes by:	aoyama@cvs.openbsd.org	2017/06/08 15:30:26

Modified files:
	distrib/sets/lists/comp: md.luna88k 

Log message:
Add a missing header file.

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/08 18:32:23

ports/devel/py-argcomplete/patches

Update of /cvs/ports/devel/py-argcomplete/patches
In directory cvs.openbsd.org:/tmp/cvs-serv17379/patches

Log Message:
Directory /cvs/ports/devel/py-argcomplete/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/08 18:35:38

Modified files:
	devel/py-argcomplete: Makefile distinfo 
	devel/py-argcomplete/pkg: PLIST 
Added files:
	devel/py-argcomplete/patches: patch-setup_py 

Log message:
Update to py-argcomplete-1.8.2

initial diff from jsg@, then tweaked by sthen@ and finished by myself
ok sthen@ shadchin@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/08 19:36:05

Modified files:
	sbin/ifconfig  : ifconfig.8 

Log message:
turns out the case of 802.1 suffixes is significant. fix up 802.1X and Q.

pointed out by jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/08 19:39:07

Modified files:
	share/man/man4 : vlan.4 

Log message:
turns out the case on 802.1 suffixes is significant. fix 802.1Q

pointed out by jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/06/08 22:40:04

Modified files:
	usr.bin/ssh    : packet.c 

Log message:
Add comments referring to the relevant RFC sections for rekeying
behaviour.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/09 00:40:24

Modified files:
	usr.bin/ssh    : sshkey.c 

Log message:
better translate libcrypto errors by looking deeper in the accursed
error stack for codes that indicate the wrong passphrase was supplied
for a PEM key. bz#2699 ok dtucker@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/09 00:43:01

Modified files:
	usr.bin/ssh    : ssh.1 

Log message:
in description of public key authentication, mention that the server
will send debug messages to the client for some error conditions
after authentication has completed. bz#2709 ok dtucker


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/09 00:47:13

Modified files:
	usr.bin/ssh    : mux.c 

Log message:
return failure rather than fatal() for more cases during mux
negotiations. Causes the session to fall back to a non-mux connection
if they occur. bz#2707 ok dtucker@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/09 01:10:50

Modified files:
	x11/gnome/todo : Makefile distinfo 
	x11/gnome/todo/pkg: PLIST 

Log message:
Update to gnome-todo-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/09 01:20:51

Modified files:
	security/libhttpseverywhere: Makefile distinfo 

Log message:
Update to libhttpseverywhere-0.4.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/09 01:26:24

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.64.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/09 01:26:34

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.101.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/09 01:32:26

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
/etc/mtree/BSD.x11.dist is part of base, not X; so check for
/var/sysmerge/xetc.tgz to detect whether we have the x sets installed.


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/09 01:37:38

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Drop uneeded return from rollback_patch().


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/09 02:44:52

Modified files:
	audio/mpd      : Makefile distinfo 

Log message:
Bugfixing update to mpd-0.20.9


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/09 03:21:24

Modified files:
	usr.bin/tmux   : input.c tmux.1 window-copy.c 

Log message:
Add a hook when the clipboard is set.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/09 03:27:02

Modified files:
	databases/redis: Makefile distinfo 

Log message:
Update to redis-3.2.9


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/09 04:20:22

Modified files:
	graphics/feh   : Makefile distinfo 
	graphics/feh/patches: patch-Makefile patch-man_feh_pre 

Log message:
Update to feh-2.19


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/09 04:29:22

Modified files:
	devel/git      : Makefile distinfo 
	devel/git/patches: patch-Makefile 

Log message:
Update to git-2.13.1

ok jung@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/09 04:34:41

Modified files:
	devel/qmake    : qmake.port.mk 

Log message:
so qmake dependency handling is still basically broken.
mark everything that depends on it nojunk, because I'm fed up
of qt-creator and other things randomly breaking


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/09 05:13:18

Modified files:
	multimedia     : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	multimedia/daala: Makefile distinfo 
	multimedia/daala/pkg: DESCR PLIST 

Log message:
drop multimedia/daala

Orphaned port of video codec with dubious future.

OK sthen@, jca@ and ajacoutot@


CVSROOT:	/cvs
Module name:	ports
Changes by:	krw@cvs.openbsd.org	2017/06/09 06:03:35

Modified files:
	lang/rust      : Makefile 

Log message:
Bump LIBESTDC_VERSION to 17.1.

ok espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/09 06:50:45

Modified files:
	devel/quirks   : Makefile 

Log message:
Bump version after adding daala to the list


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/09 06:56:44

Modified files:
	sys/net        : route.c route.h rtsock.c 
	sys/netinet    : in_pcb.c 
	sys/netinet6   : nd6_rtr.c 

Log message:
Replace rtrequest(RTM_DELETE...) rtrequest_delete() and do not even
try to remove a route from the table if it is and invalid cache.

This is a step towards decoupling code dealing with userland and kernel
inserted routes.

ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/06/09 07:31:03

Modified files:
	usr.sbin/rtadvd: rtadvd.c 

Log message:
If we receive a router solicitation with a source link-layer address
option respond with a unicast advertisement. This improves air time on
wireless networks and reduces energy consumption on battery powered
devices. For details see RFC 7772 "Reducing Energy Consumption of
Router Advertisements" aka BCP 202.
Input & OK bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/09 07:32:29

Modified files:
	sysutils/dmidecode: Makefile distinfo 
	sysutils/dmidecode/pkg: DESCR 
Added files:
	sysutils/dmidecode/patches: patch-util_c 

Log message:
update to dmidecode-3.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/09 07:36:08

Modified files:
	devel/cmocka   : Makefile distinfo 

Log message:
update to cmocka-1.1.1

From Brian Callahan, who is now MAINTAINER.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/09 07:46:15

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Fix the resume code path in iwm(4) to no longer call iwm_stop() before
initializing the hardware. Prevents "acquiring device failed" messages
during resume. Also, start the hardware up in DVACT_RESUME already and
verify that it has started by the time we reach DVACT_WAKEUP, before
scheduling the iwm_init_task which loads firmware etc.
With help from deraadt@
test & ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/09 07:47:26

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Introduce iwm_nic_assert_locked() to verify that the driver has correctly
requested MAC access before accessing certain registers, as required
by the hardware.

Use it to assert that hardware is still in an accessible state before
reading or writing such a register. For now, panic if that check fails.
The long term goal is to make this a non-fatal error and handle it properly
in all code paths that end up reading or writing such a register.

Fix a missing NIC lock on 8000 hardware, found by this new assertion.

Also, grab the NIC lock early during hardware init and keep it until init
is done. The previous code relinquished and reacquired the NIC lock several
times during the init sequence. It seems this is what was causing some random
errors when the interface was brought up, such as "could not enable Tx queue",
"could not add aux station", and "could not add phy context".
For some reason, bsd.rd kernels were suffering particularly hard from such
problems, to the point where some machines could not be upgraded over iwm(4).
This change does not eliminate such problems entirely but is a step forward.

Prodded by deraadt@
This change has already been in snaps for a while.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/09 08:00:46

Modified files:
	usr.bin/tmux   : key-bindings.c 

Log message:
Use brackets around prompts which looks better and matches the other modes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/09 08:28:17

Modified files:
	security/letsencrypt: Makefile.inc 
	security/letsencrypt/client: distinfo 
	security/letsencrypt/client/pkg: PLIST 
	security/letsencrypt/py-acme: distinfo 

Log message:
update to certbot/py-acme 0.15.0


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/09 08:30:09

Modified files:
	.              : ftp.html httpslist 
	build          : mirrors.dat 
	openbgpd       : ftp.html 
	openntpd       : portable.html 
	openssh        : ftp.html portable.html 

Log message:
https for mirrors.pidginhost.com


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/09 08:34:10

Modified files:
	sys/dev/pci    : if_xge.c 

Log message:
Convert to ifq_dequeue and perform m_defrag if the mbuf doesn't fit

With suggestions from and OK dlg


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/09 08:36:43

Modified files:
	sys/dev/pv     : if_xnf.c 

Log message:
Remove a WAITOK that has sneaked in


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/09 09:09:51

Modified files:
	audio/ncmpcpp  : Makefile distinfo 
	audio/ncmpcpp/patches: patch-doc_ncmpcpp_1 patch-src_ncmpcpp_cpp 
	                       patch-src_status_cpp 
Added files:
	audio/ncmpcpp/patches: patch-configure 
	                       patch-src_curses_strbuffer_h 
Removed files:
	audio/ncmpcpp/patches: patch-src_actions_cpp 
	                       patch-src_configuration_cpp 
	                       patch-src_lyrics_cpp 
	                       patch-src_tag_editor_cpp 
	                       patch-src_tiny_tag_editor_cpp 
	                       patch-src_utility_type_conversions_cpp 
	                       patch-src_window_h 

Log message:
Update to ncmpcpp-0.8


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/09 09:17:20

Modified files:
	usr.bin/tmux   : window-buffer.c 

Log message:
Default sort for buffer mode should be time not name.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/09 09:29:15

Modified files:
	usr.bin/tmux   : cmd-choose-tree.c mode-tree.c tmux.1 tmux.h 
	                 window-buffer.c window-client.c window-tree.c 

Log message:
Add -O option to choose-* to set initial sort order.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/09 09:32:40

Modified files:
	games/monop    : monop.6 

Log message:
Correct number of players, the program enforces a range from 2 to 9.

OK tb@, jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/09 10:01:39

Modified files:
	usr.bin/tmux   : cmd-choose-tree.c mode-tree.c tmux.1 tmux.h 
	                 window-buffer.c window-client.c window-tree.c 

Log message:
Extend filters (f key) to buffer and client mode and add -f flag to
specify to command.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/09 10:46:57

Modified files:
	usr.sbin/adduser: adduser.8 

Log message:
mention that the config file is created at first run, since it doesn't
exist on a default install (thus making it impossible to read and study)


CVSROOT:	/cvs
Module name:	src
Changes by:	sashan@cvs.openbsd.org	2017/06/09 11:43:06

Modified files:
	sys/net        : if_pfsync.c 

Log message:
- pfsync_input() must grab PF_LOCK
reported and patch tested by Hrvoje Popovski

O.K. bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/09 14:38:48

Modified files:
	sys/dev/pv     : if_xnf.c 

Log message:
Fill RX ring during init and bail early on send if OACTIVE is set
or IFF_RUNNING is not.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/09 16:12:54

Modified files:
	security/pcsc-lite: Makefile 

Log message:
use COMPILER to select a modern compiler (needed for TLS emulation in this
case), rather than MODULES=gcc4, so it uses clang in base where available.
ok dcoppa


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/09 19:27:44

Modified files:
	usr.bin/mandoc : mdoc_man.c 

Log message:
do not break the line between Bsx/Bx/Fx/Nx/Ox/Dx and its arguments


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/09 19:48:31

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 
	regress/usr.bin/mandoc/mdoc/Ad: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/An: break.in break.out_lint 
	regress/usr.bin/mandoc/mdoc/Aq: Makefile empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown 
	                                empty.out_utf8 
	regress/usr.bin/mandoc/mdoc/Ar: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Bl: breakingIt.in 
	                                breakingIt.out_ascii 
	                                breakingIt.out_markdown noIt.in 
	                                noIt.out_ascii noIt.out_markdown 
	regress/usr.bin/mandoc/mdoc/Brq: Makefile empty.in 
	                                 empty.out_ascii 
	                                 empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Bx: Makefile args.in args.out_ascii 
	                                args.out_markdown 
	regress/usr.bin/mandoc/mdoc/Cm: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Dq: Makefile empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Dv: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Em: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Er: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ev: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fl: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fo: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ic: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/In: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Lb: badargs.in badargs.out_ascii 
	                                badargs.out_lint 
	                                badargs.out_markdown 
	regress/usr.bin/mandoc/mdoc/Li: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Lk: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ms: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Mt: Makefile simple.in 
	                                simple.out_ascii 
	                                simple.out_markdown 
	regress/usr.bin/mandoc/mdoc/Nm: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/No: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Oo: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Op: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Pa: Makefile punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Qq: Makefile empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sq: Makefile empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sy: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ux: Makefile 
	regress/usr.bin/mandoc/mdoc/Va: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Vt: noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Xr: args.in args.out_ascii 
	                                args.out_lint args.out_markdown 
Added files:
	regress/usr.bin/mandoc/mdoc/Aq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Ar: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Brq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Bx: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Dq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Fl: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Fo: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Mt: simple.out_lint 
	regress/usr.bin/mandoc/mdoc/Nm: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Oo: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Op: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Pa: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Qq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Sq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Ux: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 

Log message:
style message about missing blank before trailing delimiter;
inspired by mdoclint(1), and jmc@ considers it useful


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/10 00:33:34

Modified files:
	usr.bin/ssh    : sftp.c 

Log message:
implement sorting for globbed ls; bz#2649 ok dtucker@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/10 00:36:46

Modified files:
	usr.bin/ssh    : sftp-common.c 

Log message:
print '?' instead of incorrect link count (that the protocol doesn't
provide) for remote listings. bz#2710 ok dtucker@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/10 00:52:28

Modified files:
	usr.sbin/tcpdump: tcpdump.8 

Log message:
Don't describe AppleTalk's output format and bugs.

OK claudio@
jmc@ doesn't object


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/10 01:17:27

Modified files:
	textproc/halibut: Makefile distinfo 

Log message:
Update to halibut 1.2, from bcallah@ (who takes maintainership)


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/10 01:25:22

Modified files:
	x11/xfce4/xfce4-dict: Makefile distinfo 
	x11/xfce4/xfce4-dict/pkg: PLIST 

Log message:
Update to xfce4-dict 0.8.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/10 01:29:40

Modified files:
	x11/xfce4/tumbler: Makefile distinfo 
	x11/xfce4/tumbler/pkg: PLIST 

Log message:
Bugfix update to tumbler 0.1.32


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/10 01:45:40

Modified files:
	geo/mapproxy   : Makefile distinfo 

Log message:
Update to mapproxy 1.10.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/10 02:37:26

Modified files:
	textproc/xerces-c: Makefile 

Log message:
xerces-c-2.x moved to archive. Update MASTER_SITES


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/10 02:44:00

Modified files:
	comms/py-gammu : Makefile distinfo 

Log message:
bugfix update to python-gammu-2.8


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/10 04:12:06

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
use mandoc annotations for flags and such


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/10 04:13:10

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
perl(1)'s ...


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/10 05:19:41

Modified files:
	sysutils/monit : Makefile distinfo 
	sysutils/monit/patches: patch-Makefile_in 

Log message:
- update to monit-5.23.0
- drop maintainership

tested by landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/10 05:28:30

Modified files:
	etc            : daily 
	share/man/man8 : daily.8 

Log message:
Report processes that were killed due to pledge or memory access
violations in the daily mail.
OK millert@ jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	aoyama@cvs.openbsd.org	2017/06/10 06:23:00

Modified files:
	sys/arch/luna88k/dev: lunaws.c siotty.c 

Log message:
Use software interrupt to process TX/RX data between sio and tty(4)
layer.

This is a straightforwad port of current NetBSD/luna68k implementation
by Izumi Tsutsui.  Tested on both LUNA-88K and LUNA-88K2.


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/10 06:58:37

Modified files:
	sys/dev/usb    : if_urndis.c 

Log message:
Pass M_CANFAIL to malloc(9) calls which use M_WAITOK but are tested
for failure.

ok armani@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 07:10:52

Modified files:
	lib/libcrypto/man: DH_generate_parameters.3 

Log message:
repair broken markup of callback argument; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 07:24:03

Modified files:
	lib/libc/rpc   : xdr.3 

Log message:
fix a sentence that used unusual terminology, the wrong macro,
and broken delimiter syntax; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 07:31:45

Modified files:
	usr.sbin/httpd : patterns.7 

Log message:
Fix broken escaping: "\." is almost never what you want; found with
mandoc -Tlint.  While here, make macro usage more consistent.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/10 07:47:20

Modified files:
	x11/gnome/calendar: Makefile distinfo 

Log message:
update to gnome-calendar-3.24.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/10 07:49:19

Modified files:
	x11/gnome/libgweather: Makefile distinfo 
	x11/gnome/libgweather/pkg: PLIST 

Log message:
update to libgweather-3.24.1


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 07:58:59

Modified files:
	lib/libssl/man : SSL_CTX_set_alpn_select_cb.3 
	                 SSL_CTX_set_generate_session_id.3 

Log message:
fix broken markup of callback arguments; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 08:07:23

Modified files:
	lib/libc/gen   : glob.3 

Log message:
Fix broken markup of function pointer invocations; found
with mandoc -Tlint.  While here, delete .Tn macros.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 08:15:52

Modified files:
	lib/libkeynote : keynote.3 

Log message:
fix imprecise .Fa markup; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/06/10 08:18:37

Modified files:
	audio/exaile   : Makefile distinfo 
	audio/exaile/patches: patch-Makefile patch-xl_main_py 
	                      patch-xlgui___init___py 
	audio/exaile/pkg: PLIST 
Removed files:
	audio/exaile/patches: patch-xlgui_collection_py 

Log message:
Update to 3.4.0
from new maintainer Brian Callahan with a tweak by me


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 08:31:59

Modified files:
	lib/libkeynote : keynote.4 

Log message:
remove lots of bogus escaping, some of which even broke the output;
found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 08:38:29

Modified files:
	sbin/fsdb      : fsdb.8 

Log message:
missing space before trailing punctuation; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/10 08:44:59

Modified files:
	x11/gnome/bijiben: Makefile distinfo 
	x11/gnome/bijiben/pkg: PLIST 
Removed files:
	x11/gnome/bijiben/patches: 
	                           patch-data_org_gnome_bijiben-search-provider_ini 
	                           patch-src_bijiben-shell-search-provider_c 

Log message:
update to bijiben-3.24.0


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 08:54:42

Modified files:
	usr.bin/sort   : sort.1 

Log message:
add missing blanks before several delimiters; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 09:39:43

Modified files:
	bin/csh        : csh.1 

Log message:
missing blank before full stop, found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 10:00:27

Modified files:
	share/man/man1 : gcc-local.1 

Log message:
improve semantic markup for __attribute__


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 10:32:08

Modified files:
	share/man/man7 : mdoc.7 roff.7 

Log message:
minor markup simplifications


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/10 10:53:58

Modified files:
	usr.bin/mandoc : mdoc_validate.c 

Log message:
Reduce false positives for the "no blank before trailing delimiter" message.
This brings us down to one false positive for about every 18 pages.


CVSROOT:	/cvs
Module name:	www
Changes by:	henning@cvs.openbsd.org	2017/06/10 11:46:32

Modified files:
	.              : events.html 

Log message:
link my bsdcan slides


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/10 11:56:29

Modified files:
	sbin/dhclient  : conflex.c dhcpd.h parse.c 

Log message:
Nuke unused global warnings_occurred.


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/06/10 12:02:23

Modified files:
	net/tor        : Makefile distinfo 

Log message:
SECURITY update to tor 0.3.0.8.  Fixes CVE-2017-0375 and CVE-2017-0376.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/10 12:03:50

Modified files:
	sbin/dhclient  : clparse.c dhcpd.h 

Log message:
Nuke unused field bootp_policy and associated enum{}.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/10 12:14:10

Modified files:
	usr.bin/nc     : netcat.c 

Log message:
If -P and -c were given, a second pledge call tried to add "rpath" to the
first pledge promises, so nc exited with EPERM. To fix this, merge the
pledge of the Pflag && usetls case into the first pledge block. This
allows us to get rid of the second pledge block and thus to simplify the
logic a bit. While there, add a missing blank to an error string.

Joint effort by the #openbsd-daily code reading group, problem found and
initial patch by <rain1 openmailbox org>.

ok awolk


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/06/10 19:10:22

Modified files:
	devel/py-sh    : Makefile distinfo 

Log message:
Update to py-sh 1.12.14.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/06/10 19:11:03

Modified files:
	devel/mercurial: Makefile distinfo 

Log message:
Update to mercurial 4.2.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/06/10 19:11:45

Modified files:
	devel/tortoisehg: Makefile distinfo 

Log message:
Update to tortoisehg 4.2.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/10 20:06:36

Modified files:
	sys/dev/ic     : sti.c 

Log message:
integer overflow for two range checks
fix from C Turt, ok miod


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/10 21:03:05

Modified files:
	sys/arch/octeon/octeon: machdep.c 

Log message:
Add a memory barrier to ensure that stores become visible
in a proper order.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/10 21:35:30

Modified files:
	sys/arch/mips64/include: cpu.h mips_cpu.h 
	sys/arch/mips64/mips64: mips64r2.S 
	sys/arch/octeon/octeon: machdep.c 

Log message:
Fix TLB size computation on OCTEON II and III. The CPUs have utilized
the whole TLB space even before this. However, TLB initialization on
boot and TLB flush on ASID wraparound have been incomplete. These have
caused crashes of processes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/11 03:02:43

Modified files:
	sysutils/ranger: Makefile 
Added files:
	sysutils/ranger/patches: patch-doc_ranger_1 
	                         patch-ranger_ext_img_display_py 

Log message:
Fix default path for w3mimgdisplay.

Spotted by "rage_311" on /r/openbsd (reddit)


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/11 04:01:23

Modified files:
	sys/arch/loongson/include: intr.h 
	sys/arch/mips64/mips64: interrupt.c 
	sys/arch/octeon/include: intr.h 
	sys/arch/sgi/include: intr.h 

Log message:
Define register_splx_handler() in one place.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/11 04:53:07

Modified files:
	usr.bin/nc     : netcat.c 

Log message:
Simple style(9) fixes from Juuso Lapinlampi, mostly whitespace and
omitting parentheses in return statements. Binary change because of
return instead of exit(3) from main and because help() is now __dead.

ok awolk


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/11 06:15:50

Modified files:
	net/openvpn    : Makefile 
	net/openvpn/patches: patch-src_openvpn_route_c 
	                     patch-src_openvpn_syshead_h 
	                     patch-src_openvpn_tun_c 

Log message:
Pushed upstream.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 08:03:46

Modified files:
	share/man/man8 : diskless.8 

Log message:
make two macros more semantic


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 08:08:39

Modified files:
	audio/beets    : Makefile distinfo 
	audio/beets/pkg: PLIST 

Log message:
update to beets-1.4.4


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 08:10:24

Modified files:
	usr.bin/mandoc : mdoc_validate.c 
	regress/usr.bin/mandoc/mdoc/No: punct.out_lint 

Log message:
Do not issue the message "no blank before trailing delimiter" for .No.
In practice, that message only matters inside .Bf, and even there, it
can occasionally be a false positive.  In all other cases, it usually
is a false positive, so it is better to drop it outright.
Suggested by jmc@.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/11 08:38:52

Modified files:
	usr.bin/nc     : netcat.c 

Log message:
Continue the flattening of the pledge logic started in r1.184 and place
a blank space somewhere else.

suggested by and ok jsing


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 08:41:58

Modified files:
	devel          : Makefile 
	devel/py-algorithm-munkres: Makefile distinfo 
	devel/py-algorithm-munkres/pkg: PLIST 

Log message:
update to py-algorithm-munkres 1.0.10, add py3 flavour


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 08:47:32

Modified files:
	audio          : Makefile 
	audio/py-musicbrainzngs: Makefile 
	audio/py-musicbrainzngs/pkg: PLIST 

Log message:
add py3 support for audio/py-musicbrainzngs


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 08:50:01

Modified files:
	audio/beets    : Makefile 

Log message:
adjust RUN_DEPENDS grouping, the only remaining dep for py3 support is py-discogs-client


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:10:09

Modified files:
	textproc/cdiff : Makefile distinfo 

Log message:
update to cdiff-1.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:14:18

Modified files:
	x11/sakura     : Makefile distinfo 

Log message:
update to sakura-3.4.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:22:55

Modified files:
	devel/log4cpp  : Makefile distinfo 
	devel/log4cpp/pkg: PLIST 

Log message:
update to log4cpp-1.1.2l


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:23:03

ports/devel/log4cpp/patches

Update of /cvs/ports/devel/log4cpp/patches
In directory cvs.openbsd.org:/tmp/cvs-serv28800/patches

Log Message:
Directory /cvs/ports/devel/log4cpp/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:23:18

Added files:
	devel/log4cpp/patches: patch-src_Appender_cpp 

Log message:
missed in previous


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/11 09:29:13

Modified files:
	graphics/liblqr: Makefile distinfo 
	graphics/liblqr/pkg: DESCR 
Removed files:
	graphics/liblqr/patches: patch-lqr_lqr_energy_c 

Log message:
update liblqr to 0.4.1

- trailing whitespace note by jca@

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:32:30

Modified files:
	devel/libvirt-glib: Makefile distinfo 
	devel/libvirt-glib/pkg: PLIST 

Log message:
update to libvirt-glib-1.0.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 09:38:25

Modified files:
	devel/libconfuse: Makefile distinfo 
	devel/libconfuse/pkg: PLIST 

Log message:
- update to libconfuse-3.2
- remove html docs that are also available at ${HOMEPAGE}


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/11 10:15:52

Modified files:
	devel/msgpack  : Makefile distinfo 
	devel/msgpack/patches: patch-CMakeLists_txt 
	                       patch-test_CMakeLists_txt 
	devel/msgpack/pkg: PLIST 
Added files:
	devel/msgpack/patches: patch-include_msgpack_sysdep_h 
	                       patch-include_msgpack_vrefbuffer_h 

Log message:
update to msgpack-2.1.2


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 10:43:18

Modified files:
	lib/libz       : compress.3 

Log message:
Add missing .Fn markup to in() and out(); found with mandoc -Tlint.
Delete useless \*(Gt and \*(Lt while here.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 10:58:49

Modified files:
	usr.sbin/crunchgen: crunchgen.8 

Log message:
missing .Fn markup for main(); found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 11:06:27

Modified files:
	share/man/man9 : fork1.9 

Log message:
missing .Fn macros; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 11:16:36

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 

Log message:
style message about missing .Fn markup; inspired by mdoclint


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/06/11 11:32:19

Modified files:
	usr.bin/ktrace : ktrace.c 

Log message:
usr/bin/ktrace: replace snprintf(3)/write(2) with dprintf(3)

Brought to attention by BlackFrog on #openbsd-daily

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/11 11:44:26

Modified files:
	devel/bpython  : Makefile 

Log message:
switch homepage to https

ok jca@ benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/11 11:47:45

Modified files:
	x11/kde-applications: Makefile Makefile.inc 
	x11/kde-applications/gpgmepp: Makefile 

Log message:
first kde-applications bits for further work. No functional changes.

ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/06/11 12:23:57

Modified files:
	net/tor        : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
SECURITY update to tor 0.2.9.11; fixes CVE-2017-0375 and CVE-2017-0376.

ok danj@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/11 12:56:09

Modified files:
	lib/libc/sys   : pledge.2 

Log message:
request -> promises; from scott cheloha


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 13:36:31

Modified files:
	usr.bin/mandoc : libmandoc.h man_validate.c mandoc.c mandoc.h 
	                 mdoc_validate.c read.c 

Log message:
Style message about legacy man(7) date format in mdoc(7) documents
and operating system dependent messages about missing or unexpected
Mdocdate; inspired by mdoclint(1).


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/11 13:43:16

Modified files:
	regress/usr.bin/lastcomm: Makefile 

Log message:
Fix a test race, wait after kill in case writing the core dump takes
a while.  Adjust wrong comments.  Mention regress- in program name
to make clear where violations seen in process accounting happend.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 13:48:28

Modified files:
	regress/usr.bin/mandoc/char/space: esct-mdoc.out_lint 
	                                   tab.out_lint 
	                                   trailing-mdoc.out_lint 
	regress/usr.bin/mandoc/char/unicode: invalid.out_lint 
	regress/usr.bin/mandoc/eqn/define: infinite.out_lint 
	                                   invalid.out_lint 
	regress/usr.bin/mandoc/eqn/over: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ad: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/An: break.out_lint 
	regress/usr.bin/mandoc/mdoc/Aq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Ar: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/At: invalid.out_lint 
	regress/usr.bin/mandoc/mdoc/Bd: badargs.out_lint 
	                                beforeNAME.out_lint 
	                                blank.out_lint break.out_lint 
	                                broken.out_lint nested.out_lint 
	                                unclosed.out_lint 
	regress/usr.bin/mandoc/mdoc/Bf: badargs.out_lint break.out_lint 
	                                broken.out_lint 
	                                multiargs.out_lint 
	regress/usr.bin/mandoc/mdoc/Bk: badarg.out_lint broken.out_lint 
	regress/usr.bin/mandoc/mdoc/Bl: badargs.out_lint bareIt.out_lint 
	                                bareTa.out_lint break.out_lint 
	                                breakingIt.out_lint 
	                                broken.out_lint column.out_lint 
	                                empty.out_lint 
	                                emptyhead.out_lint 
	                                emptyitem.out_lint 
	                                emptytag.out_lint noIt.out_lint 
	                                notype.out_lint tag.out_lint 
	regress/usr.bin/mandoc/mdoc/Brq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Bx: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Cd: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Cm: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/D1: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Db: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Dd: badarg.out_lint dupe.out_lint 
	                                long.out_lint manarg.out_lint 
	                                order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dl: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Dq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Dt: badsec.out_lint case.out_lint 
	                                dupe.out_lint fourargs.out_lint 
	                                late.out_lint missing.out_lint 
	                                noarg.out_lint nobody.out_lint 
	                                nosec.out_lint order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dv: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Em: noarg.out_lint punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Eo: break.out_lint obsolete.out_lint 
	                                unclosed.out_lint 
	regress/usr.bin/mandoc/mdoc/Er: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ev: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ex: noname.out_lint nostd.out_lint 
	regress/usr.bin/mandoc/mdoc/Fd: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Fl: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Fo: noarg.out_lint nohead.out_lint 
	                                obsolete.out_lint punct.out_lint 
	                                warn.out_lint 
	regress/usr.bin/mandoc/mdoc/Ic: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/In: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Lb: badargs.out_lint 
	regress/usr.bin/mandoc/mdoc/Li: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Lk: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ms: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Mt: simple.out_lint 
	regress/usr.bin/mandoc/mdoc/Nd: broken.out_lint noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Nm: badNAME.out_lint 
	                                badNAMEuse.out_lint 
	                                break.out_lint broken.out_lint 
	                                punct.out_lint 
	regress/usr.bin/mandoc/mdoc/No: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Ns: position.out_lint 
	regress/usr.bin/mandoc/mdoc/Oo: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Op: break.out_lint broken.out_lint 
	                                punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Pa: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Pf: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Pp: arg.out_lint 
	regress/usr.bin/mandoc/mdoc/Qq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Rs: allch.out_lint args.out_lint 
	                                empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Rv: noname.out_lint nostd.out_lint 
	regress/usr.bin/mandoc/mdoc/Sh: badNAME.out_lint before.out_lint 
	                                empty.out_lint 
	                                emptyNAME.out_lint 
	                                first.out_lint nohead.out_lint 
	                                order.out_lint 
	                                orderNAME.out_lint 
	                                parbefore.out_lint 
	                                parborder.out_lint 
	                                punctNAME.out_lint 
	                                subbefore.out_lint 
	regress/usr.bin/mandoc/mdoc/Sm: badarg.out_lint twoarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Sq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/St: badargs.out_lint call.out_lint 
	regress/usr.bin/mandoc/mdoc/Sx: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Sy: noarg.out_lint punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Tn: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ud: arg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ux: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Va: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Vt: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Xr: args.out_lint 
	regress/usr.bin/mandoc/mdoc/blank: comment.out_lint 
	                                   line.out_lint list.out_lint 
	regress/usr.bin/mandoc/mdoc/break: brokenbreaker.out_lint 
	                                   notopen.out_lint 
	                                   tail.out_lint twice.out_lint 
	                                   two.out_lint 
	regress/usr.bin/mandoc/roff/args: mdoc.out_lint 
	regress/usr.bin/mandoc/roff/de: escname.out_lint indir.out_lint 
	                                infinite.out_lint 
	regress/usr.bin/mandoc/roff/esc: B.out_lint h.out_lint 
	                                 ignore.out_lint w.out_lint 
	regress/usr.bin/mandoc/roff/ft: badargs-mdoc.out_lint 
	regress/usr.bin/mandoc/roff/ig: basic.out_lint 
	regress/usr.bin/mandoc/roff/it: badarg.out_lint 
	regress/usr.bin/mandoc/roff/string: name.out_lint 

Log message:
churn caused by the new Mdocdate messages, no easy way to avoid this :(


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/11 13:59:57

Modified files:
	sys/netinet    : ip_ipip.c 

Log message:
Use a common 'goto bad' style and set mp to NULL after freeing it
in ipip_input_gif().  This prevents a use-after-free if there is a
bug in the IP input functions.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/11 14:02:48

Modified files:
	usr.bin/mandoc : mdoc_validate.c 

Log message:
ooops, fix a glitch in the previous commit...


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/11 14:21:37

Modified files:
	faq            : faq13.html 
	faq/ports      : index.html 

Log message:
faq13: only two MIDI ports are shown
ports/index.html: soure -> source

patch from Arnaud <funkygoby mailoo org>


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/11 14:32:19

Modified files:
	games/gottcode : Makefile.inc 
	games/gottcode/connectagram: Makefile distinfo 
	games/gottcode/connectagram/pkg: PLIST 
	games/gottcode/cutemaze: Makefile distinfo 
	games/gottcode/cutemaze/pkg: PLIST 
	games/gottcode/hexalate: Makefile distinfo 
	games/gottcode/hexalate/pkg: PLIST 
	games/gottcode/peg-e: Makefile distinfo 
	games/gottcode/peg-e/patches: patch-peg-e_pro 
	games/gottcode/simsu: Makefile distinfo 
	games/gottcode/tanglet: Makefile distinfo 
	games/gottcode/tanglet/pkg: PLIST 
	games/gottcode/tetzle: Makefile distinfo 
	games/gottcode/tetzle/pkg: PLIST 

Log message:
Update gottcode games, from bcallah, thanks!

Note that they now all use QT5.
* connectagram-1.2.4
* cutemaze-1.2.0
* hexalate-1.1.0
* peg-e-1.2.2
* simsu-1.3.3
* tanglet-1.4.0
* tetzle-2.1.0


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/11 14:50:33

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/luna88k/conf: Makefile.luna88k 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/socppc/conf: Makefile.socppc 
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
Use umask 077 instead of cp -p when installing the kernel as root.
Otherwise owner of /bsd could be the build user with permissions
inherited from the compile directory.
OK deraadt@ tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 15:14:22

Modified files:
	audio          : Makefile 
	audio/py-discogs-client: Makefile 
	audio/py-discogs-client/pkg: PLIST 

Log message:
add py3 support for py-discogs-client, remove unnecessary deps (they're
shown in upstream repo's CI test deps but aren't needed at runtime or for
the normal tests in the distributed tar.gz). looks ok to Johan Huldtgren
(maintainer).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 15:17:44

Modified files:
	audio/py-discogs-client: Makefile 

Log message:
add TEST_DEPENDS = ${RUN_DEPENDS}


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/11 15:20:30

Modified files:
	audio/beets    : Makefile 

Log message:
shuffle RDEPs again, we now have py3 flavours of everything needed to
be able to switch to py3 so no need to list them separately.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/11 16:02:02

Modified files:
	x11/mate/session-manager: Makefile 

Log message:
Fix LIB_DEPENDS to unbreak.

reported by naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/11 16:51:21

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/luna88k/conf: Makefile.luna88k 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/socppc/conf: Makefile.socppc 
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
make vers.o not depend on gap.o using a trick, because it is piece of
fiction participating only in the linkphase.
tricks from rpe and espie


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/11 21:00:26

Modified files:
	sys/dev/pci    : if_re_pci.c pcireg.h 

Log message:
From FreeBSD (r227593, r307982):
More and more RealTek controllers started to implement EEE feature.
Vendor driver seems to load a kind of firmware for EEE with
additional PHY fixups.  It is known that the EEE feature may need
ASPM support.  Unfortunately there is no documentation for EEE of
the controller so enabling ASPM may cause more problems.

The Realtek vendor drivers for FreeBSD and Linux also disable ASPM and
clock request.  While here, add a define for the ECPM (Enable Clock Power
Management) bit.

Tested by stsp@ and myself.
ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/11 22:57:42

Modified files:
	sys/dev/ic     : nvme.c 

Log message:
typo; from bryan vyhmeister


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/12 01:04:24

Modified files:
	usr.bin/tmux   : input-keys.c key-string.c tmux.h tty-keys.c 

Log message:
Add explicit keys for the bracketed paste sequences, both to avoid mix
ups with other keys and to make logs clearer.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 01:14:15

Modified files:
	devel          : Makefile 

Log message:
typo: p5-Algorithm-Munkres,python3 -> py-algorithm-munkres,python3
reported by jasper@


CVSROOT:	/cvs
Module name:	ports
Changes by:	nigel@cvs.openbsd.org	2017/06/12 01:34:25

Modified files:
	devel          : Makefile 

Log message:
Fix Makefile ident header
Ok Sthen


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 01:37:37

Modified files:
	net/dnsmasq    : Makefile distinfo 
	net/dnsmasq/patches: patch-man_dnsmasq_8 patch-src_config_h 

Log message:
Update to dnsmasq-2.77.

from Brad (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 02:00:29

Modified files:
	x11/gnome/latexila: Makefile distinfo 
	x11/gnome/latexila/pkg: PLIST 

Log message:
Update to latexila-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/12 02:40:02

Modified files:
	devel/git      : Makefile 
Added files:
	devel/git/patches: patch-sha1dc_sha1_c 

Log message:
Fix endianess detection wrt SHA1
(upstream git commit 6b851e536b05e0c8c61f77b9e4c3e7cedea39ff8)

Breakage reported by tb@ and Brian Callahan
OK tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 02:54:55

Modified files:
	multimedia/x264: Makefile 

Log message:
Drop MODULES and use COMPILER instead.

from Brad (maintaine) with input from espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 02:56:43

Modified files:
	multimedia/xine-lib: Makefile 

Log message:
Drop the devel/gettext and clang MODULES and use COMPILER.

from Btad (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/06/12 03:05:56

Log message:
    A collection of command line tools for ARM devices with Allwinner SoCs.
    
    feedback and ok sthen@
    
    Status:
    
    Vendor Tag:	mglocker
    Release Tags:	mglocker_2017-Jun-12
    
    N ports/sysutils/sunxi-tools/distinfo
    N ports/sysutils/sunxi-tools/Makefile
    N ports/sysutils/sunxi-tools/pkg/DESCR
    N ports/sysutils/sunxi-tools/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 03:06:11

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.65.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 03:06:22

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.102.


CVSROOT:	/cvs
Module name:	ports
Changes by:	mglocker@cvs.openbsd.org	2017/06/12 03:16:12

Modified files:
	sysutils       : Makefile 

Log message:
+sunxi-tools


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/12 04:57:35

Modified files:
	usr.bin/tmux   : screen-write.c 

Log message:
Need to flush out the linefeed after wrapper. GitHub issue 970.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/12 04:57:58

Modified files:
	audio/calf     : Makefile 
	audio/calf/pkg : DESCR 
	audio/rsynth   : Makefile 
	audio/rsynth/pkg: DESCR 
	converters/lua-utf8: Makefile 
	converters/lua-utf8/pkg: DESCR 
	devel/p5-Carp-Always: Makefile 
	devel/p5-Carp-Always/pkg: DESCR 
	devel/p5-Data-Uniqid: Makefile 
	devel/p5-Data-Uniqid/pkg: DESCR 
	devel/p5-Math-Base-Convert: Makefile 
	devel/p5-Math-Base-Convert/pkg: DESCR 
	devel/p5-Test-YAML: Makefile 
	devel/p5-Test-YAML/pkg: DESCR 
	devel/lua-tz   : Makefile 
	devel/lua-tz/pkg: DESCR 
	devel/premake4 : Makefile 
	devel/premake4/pkg: DESCR 
	devel/py-test-xdist: Makefile 
	devel/py-test-xdist/pkg: DESCR 
	fonts/profont  : Makefile 
	fonts/profont/pkg: DESCR 
	games/ioquake3 : Makefile 
	games/ioquake3/pkg: README 
	graphics/fotowall: Makefile 
	graphics/fotowall/pkg: DESCR 
	lang/ruby/1.8  : Makefile 
	lang/ruby/1.8/pkg: DESCR-iconv 
	mail/offlineimap: Makefile 
	mail/offlineimap/pkg: DESCR 
	net/openvpn-auth-ldap: Makefile 
	net/openvpn-auth-ldap/pkg: MESSAGE 
	net/rbldnsd    : Makefile 
	net/rbldnsd/pkg: README 
	net/seafile/ccnet: Makefile 
	net/seafile/ccnet/pkg: DESCR 
	net/seafile/client: Makefile 
	net/seafile/client/pkg: DESCR 
	textproc/redland: Makefile 
	textproc/redland/pkg: DESCR-mysql DESCR-pgsql 
	textproc/lua-cosmo: Makefile 
	textproc/lua-cosmo/pkg: DESCR 
	www/minitube   : Makefile 
	www/minitube/pkg: README 
	www/mozilla-sync/full: Makefile 
	www/mozilla-sync/full/pkg: README 
	www/ruby-httpi : Makefile 
	www/ruby-httpi/pkg: DESCR 
	www/drupal7/core7: Makefile 
	www/drupal7/core7/pkg: DESCR 
	x11/irrlicht   : Makefile 
	x11/irrlicht/pkg: DESCR 
	x11/qwt        : Makefile 
	x11/qwt/pkg    : README 
	x11/rxvt-unicode: Makefile 
	x11/rxvt-unicode/pkg: README 

Log message:
Remove trailing lines.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/12 05:48:34

Modified files:
	lang/php       : Makefile.inc 
	lang/php/5.5   : Makefile 
	lang/php/5.6   : Makefile 
	lang/php/7.0   : Makefile distinfo 
	lang/php/7.0/patches: patch-configure_in 
	                      patch-ext_standard_config_m4 
	                      patch-main_php_h 

Log message:
update to php-7.0.20, sync -intl WANTLIB
ok robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/12 06:35:07

Modified files:
	sys/dev/pv     : if_xnf.c 

Log message:
ifq_start does OACTIVE and RUNNING checks for the driver

Reminded by dlg@.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 07:41:24

Modified files:
	usr.sbin/vmd   : vmd.h 

Log message:
device path should be PATH_MAX.  Any NAME_MAX without +1 is suspect
to begin with anyways.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 07:45:39

Modified files:
	sys/dev/wscons : wsmux.c 

Log message:
specify free() size from the old allocation, not new allocation.
fix from C Turt


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 08:23:26

Modified files:
	usr.bin/patch  : patch.c 

Log message:
rejname[] is also -r option buffer, and should be PATH_MAX
ok millert


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/12 08:46:00

Modified files:
	sys/dev        : softraid_crypto.c 

Log message:
Fix a long standing off-by-one bug in the softraid crypto number of keys
calculation - we allow one key per 0.5TB, which should allow up to 16TB
disks, however the disk size was treated like a block offset and shifted.
This meant that the maximum size was actually 16TB minus one block.

While here also calculate the number of keys as an absolute value, rather
than as the upper inclusive bound - adjust the logic in the associated for
and if statements to match.

ok krw@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/12 09:09:07

Modified files:
	sys/dev        : softraid_crypto.c 

Log message:
Factor out and reuse the code that frees the crypto sessions, instead of
duplicating it.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/12 09:15:08

Modified files:
	sys/dev        : softraid_crypto.c 

Log message:
Fix another long standing softraid crypto bug where if all 32 keys are in
use, when freeing crypto sessions we run straight off the end of the array
and start blatting memory - clearly no one has a softraid crypto volume
that exceeds 15.5TB in size...


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/12 09:43:25

Modified files:
	sys/dev        : softraid.c 

Log message:
Upon failure, only return zero from the softraid ioctl handler when there
is at least one bio status message. It is a much nicer user experience when
we properly report failures, however in the case that we fail to do this,
getting an errno back from the ioctl is somewhat better than simply
printing "unknown error" from bioctl(8).


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/12 10:30:32

Modified files:
	editors/nano   : Makefile distinfo 
	editors/nano/patches: patch-doc_nano_1 patch-src_Makefile_in 
	editors/nano/pkg: PLIST 

Log message:
Update to 2.8.4.  Accumulated changes include the ability to search help
texts, and miscellaneous bug fixes.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/12 10:39:51

Modified files:
	sys/dev        : softraid_crypto.c softraidvar.h 

Log message:
Limit the maximum size of softraid crypto volumes that can be created to
the size that is currently supported (a data area of 16TB, or
2^32 * 32 + 528 blocks including the softraid metadata/boot area), rather
than successfully creating the volume and then failing during resource
allocation (without properly reporting why it failed).

Found the hard way by sharon s. <mymlact at gmx dot com>


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/12 10:40:26

Added files:
	x11/sakura/patches: patch-src_sakura_c 

Log message:
add missing patch; no bump as it didn't build

reminded by nigel@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/06/12 10:58:32

Modified files:
	regress/usr.bin/sed: Makefile 
Added files:
	regress/usr.bin/sed: commandD1.expected commandD1.sed 
	                     commandc1.expected commandc1.sed 
	                     commandl1.expected commandl1.sed 
	                     commandl2.expected commandl2.sed 

Log message:
Add some tests from kshe48@zoho.com. Currently failing, but will be fixed soon.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/12 11:20:45

Modified files:
	sysutils/collectd: Tag: OPENBSD_6_1 Makefile 
Added files:
	sysutils/collectd/patches: Tag: OPENBSD_6_1 patch-src_network_c 

Log message:
Backport patch for CVE-2017-7401


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/12 11:22:42

Modified files:
	sysutils/collectd: Makefile distinfo 

Log message:
Security update to collectd-5.7.2, fixes CVE-2017-7401

Tested by Pavel Korovin


CVSROOT:	/cvs
Module name:	src
Changes by:	mglocker@cvs.openbsd.org	2017/06/12 12:26:33

Modified files:
	sys/arch/armv7/stand/efiboot: exec.c 

Log message:
Backout last change to remove esym .data patching because it breaks
boot for e.g. the BBB and the C.H.I.P.; 'panic: initarm: out of memory'.
Better solution to be found as discussed with patrick@.

ok jsg@


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/06/12 12:34:05

Modified files:
	sys/dev/ic     : Tag: OPENBSD_6_1 sti.c 

Log message:
MFC: fix an integer overflow in two range checks of the sti display driver.

ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/06/12 12:36:58

Modified files:
	sys/dev/ic     : Tag: OPENBSD_6_0 sti.c 

Log message:
MFC: fix an integer overflow in two range checks of the sti display driver.

ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/12 12:37:12

Modified files:
	lib/libc/stdio : printf.3 

Log message:
Add dprintf() and vdprintf() RETURN VALUES.  OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/12 12:38:57

Modified files:
	usr.bin/vi/common: recover.c 

Log message:
Use openat() and unlinkat() instead of chdir()ing to the recovery dir.
Since we use flock() and not fcntl() locking we can open the recovery
file read-only.  OK martijn@


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/06/12 12:40:43

Modified files:
	sys/dev/wscons : Tag: OPENBSD_6_1 wsmux.c 

Log message:
MFC: specify free() size from the old allocation, not new allocation.

ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/06/12 12:41:46

Modified files:
	sys/dev/wscons : Tag: OPENBSD_6_0 wsmux.c 

Log message:
MFC: specify free() size from the old allocation, not new allocation.

ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/12 12:49:34

Modified files:
	distrib/special/route: Makefile 
	etc            : Makefile 
	games/wargames : Makefile 
	gnu/lib/libobjc: Makefile.bsd-wrapper 
	gnu/lib/libstdc++: Makefile.bsd-wrapper 
	gnu/usr.bin/binutils: Makefile.bsd-wrapper 
	gnu/usr.bin/binutils-2.17: Makefile.bsd-wrapper 
	gnu/usr.bin/cvs: Makefile.bsd-wrapper 
	gnu/usr.bin/gcc: Makefile.bsd-wrapper 
	gnu/usr.bin/texinfo: Makefile.bsd-wrapper 
	sbin/route     : Makefile 
	share/dict     : Makefile 
	share/misc     : Makefile 
	share/snmp     : Makefile 
	share/tabset   : Makefile 
	share/tmac     : Makefile 
	share/tmac/mdoc: Makefile 
	sys/arch/alpha/stand/boot: Makefile 
	sys/arch/alpha/stand/bootxx: Makefile 
	sys/arch/alpha/stand/netboot: Makefile 
	usr.sbin/bind  : Makefile.bsd-wrapper 
	usr.sbin/nsd   : Makefile.bsd-wrapper 

Log message:
destroy lint remnants.
okay millert@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/12 12:51:53

Modified files:
	sbin/ldattach  : Makefile 

Log message:
redundant, gets BINDIR from ../Makefile.inc


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 12:55:42

Modified files:
	usr.bin/mandoc : mandoc_aux.c mandoc_aux.h tbl_term.c term.c 
	                 term.h 
	regress/usr.bin/mandoc/char/unicode: input.out_ascii 

Log message:
Implement automatic line breaking
inside individual table cells that contain text blocks.
This cures overlong lines in various Xenocara manuals.


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/06/12 12:56:13

Modified files:
	usr.sbin/ypbind: ypbind.c 

Log message:
Use unlinkat() when removing the contents of a directory so we don't
need to construct paths.  OK deraadt@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/12 13:59:19

Modified files:
	.              : errata60.html errata61.html 

Log message:
release wsmux and sti errata.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 14:14:03

Modified files:
	usr.bin/mandoc : out.c out.h tbl_html.c tbl_term.c 

Log message:
fix column width calculation for text block cells


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/12 14:37:30

Modified files:
	audio/mpg123   : Makefile distinfo 
Removed files:
	audio/mpg123/patches: patch-configure 

Log message:
maintenance update to 1.25.0


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 14:44:57

Modified files:
	usr.bin/mandoc : tbl_term.c 

Log message:
implement the tbl(7) "allbox" option;
used for example by curs_getch(3) and GLwDrawingArea(3)


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/12 14:56:20

Modified files:
	games/fortune/datfiles: fortunes2 

Log message:
/usr/games/lib doesn't exist any more, use the new path.

OK tb@ deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 15:31:20

Modified files:
	databases/mariadb: Makefile 

Log message:
Mandoc understands enough tbl(7) now, drop USE_GROFF and bump.

Admittedly, two tables look substantially different.
But the input is clearly broken (literal tabs and .PP macros
inside tbl text blocks), mandoc loses no information,
and the groff rendering is uglier than what mandoc does.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 15:55:16

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Pledge is fairly done, so the kernel printf's can be converted to log()
calls.  They'll be a little less visible, but still in the system logs.
ok bluhm


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 16:05:41

Modified files:
	usr.bin/mandoc : out.c 

Log message:
If a tbl(7) layout contains a 'w' (minimum width) modifier for a
given column, that column contains no literal or numeric cell of
larger width, and all text block cells in that column can be line
wrapped to fit into that minimum width, groff does not increase
that column width beyond the specified minimum: so do the same.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 16:48:52

Modified files:
	usr.bin/mandoc : tbl_term.c 

Log message:
Two minor fixes for the "allbox" modifier:
1. It does not reduce explicit "||" in the layout to "|".
2. It does not cause three horizontal lines at the end of a table,
even if the table ends with an explicit "_" data line.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 16:50:02

Modified files:
	regress/usr.bin/mandoc/tbl/data: Makefile 
	regress/usr.bin/mandoc/tbl/opt: box.in box.out_ascii 
Added files:
	regress/usr.bin/mandoc/tbl/data: block_wrap.in 
	                                 block_wrap.out_ascii 

Log message:
test the new allbox and wrapping features


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 17:07:01

Modified files:
	databases/mysql-utilities: Makefile 

Log message:
Mandoc understands enough tbl(7) now such that no relevant formatting
differences remain, so drop USE_GROFF and bump.

Some of the manuals look seriously ugly with both groff and mandoc,
and in some cases, how mandoc handles the broken input is less ugly -
this is no doubt unusually intense DocBook insanity...


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 17:17:17

Modified files:
	devel/ccache   : Makefile 

Log message:
Delete a comment about USE_GROFF; no package change, no bump.

Formatting with groff and mandoc is now almost identical, and given
that this is DocBook stuff, there is no reason to assume that it
will break more badly than similar ports in the future.

Mandoc ignores the .sp requests in the table and issues UNSUPP
messages about them, but actually, they are pointless and the table
looks better without them.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/12 17:20:10

Modified files:
	sys/net        : hfsc.c 

Log message:
have the timeout call if qstart via the serialiser isntead of directly

hfsc schedules a timeout to keep traffic moving if somethings has been
delayed an no other tx activity has occurred. that timeout was calling
(*ifp->if_qstart)(ifq) rather than ifq_start. the latter prevents
concurrent calls to if_qstart.

without this change bjorn ketelaars on misc@ was experiencing weird
pauses in traffic and lockups because the tx ring was corrupted
because re_start was run concurrently, once from the stack and once
from hfsc.

thanks to bjorn ketelaars for debugging, and mikeb@ for most of the
legwork in diagnosing the problem.
ok mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/06/12 17:37:44

Modified files:
	sbin/pflogd    : privsep.c 

Log message:
pledge(2) bpf has been in use for some time now on tcpdump(8), this will enable
it also for pflogd(8)'s priv proc.

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 17:48:04

Modified files:
	devel/cdk      : Makefile 

Log message:
Mandoc understands enough tbl(7) now such that only trivial formatting
differences remain, so do not run GNU tbl(1) at build time, drop
USE_GROFF, and bump.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 18:16:09

Modified files:
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
First step of randomized link for sparc64:  gap.S and randomize files.
locore isn't split up yet, nor is the startup code smashed.
ok dlg, pieces seen before by kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/12 18:22:33

Modified files:
	sysutils/syslog-ng: Makefile 

Log message:
mandoc understands enough tbl(7) now, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	www
Changes by:	jsg@cvs.openbsd.org	2017/06/12 18:33:00

Modified files:
	.              : errata60.html 

Log message:
correct a typo


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 19:42:12

Modified files:
	sys/arch/macppc/macppc: machdep.c 

Log message:
Prepare install_extint() for the vector being relative-negative (ie
lower in the address space).  Previously it could only be higher
than... uhm locore.o
Discussed with drahn and tom


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 19:42:52

Added files:
	sys/arch/macppc/conf: ld.script 

Log message:
add a dummy ld.script.  macppc does not use one of these yet, but
infrastructure that is coming requires an architecture to carry such a
file.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/12 19:44:29

Modified files:
	sys/arch/macppc/conf: Makefile.macppc files.macppc 
	sys/arch/macppc/macppc: locore.S 
Added files:
	sys/arch/macppc/macppc: locore0.S 

Log message:
Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code
(which will be gone when it is smashed).

The bootstrap code unmapping or smashing isn't done yet, and there is
some potential for more bits from locore.S to move to locore0.S


CVSROOT:	/cvs
Module name:	src
Changes by:	yasuoka@cvs.openbsd.org	2017/06/12 23:40:22

Modified files:
	usr.sbin/radiusd: radiusd.c 

Log message:
Initialize the length parameter for radius_get_vs_raw_attr() since
it's read/write.  diff from IIJ.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/13 00:16:31

Modified files:
	sys/sys        : sysctl.h 
	sys/kern       : kern_sysctl.c 

Log message:
use size_t for the size of things in memory, not int.

this tweaks the len argument to sysctl_rdstring, sysctl_struct, and
sysctl_rdstruct.

there's probably more to fix.

ok millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/13 01:05:22

Modified files:
	devel/meson    : Makefile distinfo 
	devel/meson/pkg: PLIST 

Log message:
Update to meson-0.41.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/13 01:09:55

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.66.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/13 01:10:06

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.103.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/13 01:12:33

Modified files:
	usr.bin/tmux   : server-client.c 

Log message:
Remove xterm flag from key before checking prefix, reported by Peter
Fern in GitHub issue 974.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/13 01:43:15

Modified files:
	net/ekg        : Makefile 
	net/ekg/patches: patch-src_stuff_c 
Removed files:
	net/ekg/patches: patch-src_commands_c patch-src_dynstuff_c 
	                 patch-src_ekg_c patch-src_events_c 
	                 patch-src_events_h patch-src_log_h 
	                 patch-src_msgqueue_c patch-src_msgqueue_h 
	                 patch-src_python_c patch-src_simlite_c 
	                 patch-src_stuff_h patch-src_ui-ncurses_c 
	                 patch-src_userlist_c patch-src_userlist_h 
	                 patch-src_vars_c patch-src_voice_c 
	                 patch-src_xmalloc_c 

Log message:
Use sed in a pre-configure target in order to drop most required patches
for external libgadu support.

No objection from Aleksander Piotrowski (MAINTAINER).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/13 01:43:56

Modified files:
	audio/quodlibet: Makefile 
	multimedia/gstreamer1/plugins-base: Makefile 
	multimedia/shrip: Makefile 
	net/gpodder    : Makefile 
	textproc/catfish: Makefile 
	x11/xfe        : Makefile 

Log message:
use the textproc/intltool MODULE.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/13 01:45:48

Modified files:
	x11/gnome/tweak-tool: Makefile distinfo 
	x11/gnome/tweak-tool/pkg: PLIST 

Log message:
Update to gnome-tweak-tool-3.24.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/13 01:46:00

Modified files:
	devel/py-greenlet: Makefile distinfo 

Log message:
update to py-greenlet-0.4.12

OK edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/13 01:46:44

Modified files:
	devel/py-gevent: Makefile distinfo 

Log message:
update to py-gevent 1.2.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/13 01:47:51

Modified files:
	devel/py-dulwich: Makefile distinfo 

Log message:
update to py-dulwich 0.17.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/13 01:57:18

Modified files:
	telephony/libzrtp: Makefile 

Log message:
undo partial commit


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/13 02:00:24

Modified files:
	sys/dev/wscons : wsconsio.h 

Log message:
Increase WSFONT_NAME_SIZE size, this will allow storing longer font
names in wsdisplay_font structures.

OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/13 02:02:57

Modified files:
	telephony/libzrtp: Makefile 
	telephony/baresip/baresip: Makefile 
Added files:
	telephony/libzrtp/patches: patch-Makefile_am 

Log message:
Fix linking in libzrtp

REVISION bump in baresip to force update


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/13 03:24:24

Log message:
    Import JA2 Stracciatella,an improved, cross-platform, stable Jagged
    Alliance 2 runtime.
    Tweaks and OK zhuk@
    
    Status:
    
    Vendor Tag:	kirby
    Release Tags:	kirby_20170613
    
    N ports/games/ja2-stracciatella/Makefile
    N ports/games/ja2-stracciatella/distinfo
    N ports/games/ja2-stracciatella/pkg/DESCR
    N ports/games/ja2-stracciatella/pkg/PLIST
    N ports/games/ja2-stracciatella/pkg/README
    N ports/games/ja2-stracciatella/patches/patch-Makefile
    N ports/games/ja2-stracciatella/patches/patch-ja2config_h
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/13 03:26:40

Modified files:
	games          : Makefile 

Log message:
Add ja2-stracciatella to the build


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/13 05:22:15

Modified files:
	usr.bin/ssh    : sshkey.h 

Log message:
missing prototype.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/13 05:32:01

Modified files:
	mail/neomutt   : Makefile distinfo 
	mail/neomutt/patches: patch-main_c 

Log message:
update to neomutt-20170609


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/13 05:41:11

Modified files:
	sys/kern       : subr_pool.c 

Log message:
when enabling cpu caches, check the item size against the right thing

lists of free items on the per cpu caches are built out the pool items
as struct pool_cache_items, not struct pool_cache. make the KASSERT
in pool_cache_init check that properly.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/13 06:13:59

Modified files:
	usr.bin/ssh    : kex.c 

Log message:
Do not require that unknown EXT_INFO extension values not contain
\0 characters. This would cause fatal connection errors if an
implementation sent e.g. string-encoded sub-values inside a value.

Reported by Denis Bider; ok markus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 06:31:44

Modified files:
	databases/postgresql-previous: Makefile 

Log message:
This port does not actually install any manual pages, so drop USE_GROFF.
No package change except timestamps in +CONTENTS and *.a files, so no bump.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/13 06:57:00

Modified files:
	emulators/fuse : Makefile distinfo 

Log message:
Update fuse to 1.3.6.

OK bentley@


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 06:59:47

Modified files:
	databases/postgresql: Makefile 

Log message:
The manual manual pages (of the usual poor DocBook quality) now
look better with mandoc than with groff, so drop USE_GROFF and bump
those four of the six subpackages that contain manual pages.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/13 07:41:15

Modified files:
	sys/arch/mips64/mips64: pmap.c 

Log message:
Tweak order of operands to check constant `cache_valias_mask' first.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 07:50:17

Modified files:
	usr.bin/mandoc : roff.c 

Log message:
Explicitly ignore .br, .ce, and .sp inside tbl(7) text blocks.
With the current code structure, they would appear at the wrong
place in the syntax tree, so it is better to not insert them
into the tree at all and issue an UNSUPP message instead.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/13 08:02:25

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
	net            : Makefile 
Removed files:
	net/aiccu      : Makefile distinfo 
	net/aiccu/patches: patch-common_aiccu_h patch-doc_aiccu_1 
	                   patch-doc_aiccu_conf 
	net/aiccu/pkg  : DESCR MESSAGE PLIST aiccu.rc 

Log message:
Remove net/aiccu.  SixXS has shut down on 2017-06-06, after which there
is no further use for this client.
https://www.sixxs.net/sunset/


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/13 08:06:39

Modified files:
	sys/arch/mips64/mips64: pmap.c 

Log message:
Do not invalidate remote TLB entries with new mappings because the
virtual addresses really should not have TLB hits. This reduces IPIs.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 08:22:57

Modified files:
	devel/jdk/1.8  : Makefile 

Log message:
Whitespace and unimportant font differences only,
so drop USE_GROFF and bump.

There are two tables in java(1) and jcmd(1) that look horrible
either way.  No point in keeping groff just for that.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 08:26:56

Modified files:
	devel/jdk/1.7  : Makefile 

Log message:
Delete USE_GROFF to avoid noise when greping the ports tree,
even 1.8 works with mandoc now.
No need to bump because this is not even connected to the build.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 08:38:38

Modified files:
	usr.bin/mandoc : tbl_term.c 
	regress/usr.bin/mandoc/tbl/layout: span.in span.out_ascii 

Log message:
fix the interaction of the allbox option with spanned cells in the layout


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/13 09:02:23

Modified files:
	devel/git      : Makefile 
Added files:
	devel/git/patches: patch-config_mak_uname patch-t_t0001-init_sh 
	                   patch-t_t7004-tag_sh 

Log message:
Fix failing tests
ok tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 09:05:22

Modified files:
	usr.bin/mandoc : mandoc.1 manpath.c 

Log message:
Delete the arbitrary range restriction for -Owidth.
We provide users with tools.  We don't attempt to prevent them from
using them in stupid ways: depending on the context, not every
stupid-looking use is necessarily actually stupid, and not every
stupidity can be automatically detected anyway, so don't even try.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 09:37:30

Modified files:
	sys/arch/landisk/conf: Makefile.landisk 
Added files:
	sys/arch/landisk/conf: ld.script 

Log message:
needs a fake ld.script for KARL tooling


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/13 09:49:32

Modified files:
	sbin/dhclient  : bpf.c dhclient.c dhcpd.h options.c 

Log message:
Rename 'packet' field to 'recv_packet' and 'bootrequest_packet'
field to 'sent_packet'. Also 'bootrequest_packet_length' to
'sent_packet_length'.

Adopt consistent idiom of a local variable 'packet' to point at
packet being manipulated.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/13 10:02:46

Modified files:
	sbin/dhclient  : dhcpd.h 

Log message:
Kill unused #define IFI_NOMEDIA.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 10:11:58

Modified files:
	usr.bin/mandoc : tbl_layout.c 

Log message:
If the layout is empty except for requesting a left vertical frame,
record that detail in struct tbl_opts, such that term_tbl() can do
correct column calculations and doesn't prematurely break lines.
Fixes the tbl/layout/empty regression test that got broken when
line breaking in text block cells was implemented.


CVSROOT:	/cvs
Module name:	www
Changes by:	giovanni@cvs.openbsd.org	2017/06/13 10:14:46

Modified files:
	.              : events.html 

Log message:
I will give a talk about pledge(2) at pkgsrcCon next July


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 10:28:06

Modified files:
	distrib/amd64/iso: Makefile 
	distrib/i386/iso: Makefile 
	etc/etc.amd64  : disktab 
	etc/etc.i386   : disktab 

Log message:
The KARL compile.tgz linkkit adds some growth to the base set.
Prepare the install*.fs files for this growth.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 10:40:01

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
newbsd: target which re-links a kernel.  We cannot use the bsd: target
since it has source dependencies, and relinking doesn't have any.  Also
the bsd: target is created by config(8)...
worked on with rpe.


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 11:04:52

Modified files:
	.              : events.html 

Log message:
create eurobsd2017 stub


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 11:05:50

Modified files:
	x11/xtacy      : Makefile 

Log message:
uses .br and macros inside tbl(7), but formatting differences are very
minor and don't harm readability, so drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 11:09:52

Modified files:
	etc            : Makefile 

Log message:
For KARL, include a linkkit into the base set, as usr/share/compile.tgz.
This contains the relevant pieces from all the GENERIC* compile directories
(*.o ld.script Makefile gap.S).  It also includes the machine/ subdir for
now, to support re-randomizing of gap.S, though other methods are being
investigated.  (Any binutils ld.script hackers out there?)
collaboration with rpe


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 11:10:00

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 11:12:06

Modified files:
	.              : events.html 

Log message:
better flow


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/13 11:30:18

Modified files:
	devel/msgpack  : Makefile 
	devel/msgpack/patches: patch-include_msgpack_sysdep_h 
	                       patch-include_msgpack_vrefbuffer_h 
Added files:
	devel/msgpack/patches: patch-include_msgpack_v1_vrefbuffer_hpp 

Log message:
patches merged upstream including additional fix from upstream for c++


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/06/13 12:13:18

Modified files:
	sys/msdosfs    : denode.h msdosfs_vnops.c 

Log message:
Revert 'Implement VFS read clustering for MSDOSFS' again

This has again caused regressions, this time when reading from msdosfs.

This reverts

denode.h 1.31
msdosfs_vnops.c 1.114

Requested by deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/06/13 12:42:52

Modified files:
	devel/py-olefile: Makefile distinfo 
	devel/py-olefile/pkg: PLIST 

Log message:
Update to olefile 0.44 and add Python 3 flavor

Update by rpointel@
OK rpointel@


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/06/13 12:47:49

Modified files:
	devel          : Makefile 

Log message:
+py-olefile,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 13:33:24

Modified files:
	usr.bin/mandoc : man_macro.c 
	regress/usr.bin/mandoc/man/RS: Makefile 
Added files:
	regress/usr.bin/mandoc/man/RS: an-margin.in an-margin.out_ascii 

Log message:
Partial support for the \n[an-margin] number register.

Manuals autogenerated from reStructuredText are reckless enough
to peek at this non-portable, implementation-dependent, highly
groff-specific internal register - for no good reason, because the
man(7) language natively provides in a much simpler way what they
are trying to emulate here with much fragility.

A full implementation would be very hard because it would require
access to output-device-specific formatting data at the roff(7)
preprocessor stage, which mandoc doesn't support at all.
So hardcode a few magic numbers as reStructuredText expects them
for terminal output.  For other output modes (like HTML), code using
this register is utterly broken anyway.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 13:41:55

Modified files:
	lib/libc/hash  : md5.3 

Log message:
no need for branding in .Nd line


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/13 13:49:18

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sort


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 14:30:26

Modified files:
	audio/beets    : Makefile 
	devel/mercurial: Makefile 
	multimedia/mpv : Makefile 

Log message:
mandoc handles reStructuredText output now, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	www
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/13 15:21:38

Modified files:
	.              : events.html 

Log message:
Mention all OpenBSD developers talks at EuroBSDcon 2017.

req by and OK deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/13 15:46:16

Log message:
    Import sysutils/bdfresize.
    
    Bdfresize is a command to magnify or reduce fonts which are described
    with the standard BDF format.
    
    OK awolk@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170613
    
    N ports/sysutils/bdfresize/Makefile
    N ports/sysutils/bdfresize/distinfo
    N ports/sysutils/bdfresize/patches/patch-charresize_c
    N ports/sysutils/bdfresize/pkg/DESCR
    N ports/sysutils/bdfresize/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/13 15:47:42

Modified files:
	sysutils       : Makefile 

Log message:
Add bdfresize.


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/06/13 18:31:38

Modified files:
	usr.bin/ssh    : sshconnect2.c 

Log message:
Add user@host prefix to client's "Permisison denied" messages, useful in
particular when using "stacked" connections where it's not clear which
host is denying.  bz#2720, ok djm@ markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 19:31:19

Modified files:
	share/man/man7 : roff.7 
	usr.bin/mandoc : html.c mandoc.c mandoc.h mdoc_markdown.c term.c 
	regress/usr.bin/mandoc/roff/esc: Makefile 
Added files:
	regress/usr.bin/mandoc/roff/esc: p.in p.out_ascii 

Log message:
implement the roff(7) \p (break output line) escape sequence


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/13 19:41:58

Modified files:
	security/pgp5  : Makefile 

Log message:
mandoc now handles \p, so drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/13 20:54:36

Modified files:
	net/nmap       : Makefile distinfo 
	net/nmap/pkg   : PLIST-main 

Log message:
Update to nmap-7.50.

from David CARLIER (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/13 21:00:40

Modified files:
	sys/kern       : kern_sysctl.c 
	sys/sys        : sysctl.h 

Log message:
tweak sysctl_string and sysctl_tstring to use size_t for lengths, not int

theyre both wrappers around sysctl__string, which is where half the
fix is too.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/13 23:22:28

Modified files:
	www/mozilla    : mozilla.port.mk 

Log message:
Bump dependencies for mozilla 54, and some cleanup.

- nss 3.30.1 is required
- nspr 4.14 is required
- remove plumbing for gtk3 FLAVOR, now the default anyway
- switch default MASTER_SITES and HOMEPAGE to https (from naddy@)


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/13 23:23:10

Modified files:
	www/seamonkey  : Makefile 
	mail/mozilla-thunderbird: Makefile 
	devel/xulrunner/24: Makefile 
	www/tor-browser/browser: Makefile 

Log message:
Bump REVISIONs for mozilla.port.mk changes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/13 23:26:19

Modified files:
	www/firefox-esr: Makefile distinfo 
	www/firefox-esr-i18n: Makefile.inc distinfo 

Log message:
Update to firefox-esr 52.2.0.

See https://www.mozilla.org/en-US/firefox/52.2.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-16/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/13 23:30:05

Modified files:
	www/mozilla-firefox: Makefile distinfo 
	www/mozilla-firefox/patches: 
	                             patch-storage_mozStorageConnection_cpp 
	www/mozilla-firefox/pkg: PLIST 
	www/firefox-i18n: Makefile.inc distinfo 
Added files:
	www/mozilla-firefox/patches: 
	                             patch-js_src_jit_ProcessExecutableMemory_h 
Removed files:
	www/mozilla-firefox/patches: 
	                             patch-js_src_jit_ProcessExecutableMemory_cpp 
	                             patch-media_libstagefright_binding_mp4parse_capi_Cargo_toml 

Log message:
Update to firefox 54.0.

See https://www.mozilla.org/en-US/firefox/54.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-15/
- move ulimit patch around (#1347139)
- Remove Cargo.toml patch, merged upstream in #1360521
tested by several, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/13 23:35:20

Modified files:
	www/firefox-esr: Tag: OPENBSD_6_1 Makefile distinfo 
	www/firefox-esr-i18n: Tag: OPENBSD_6_1 Makefile.inc distinfo 

Log message:
MFC: update to firefox-esr 52.2.0.

See https://www.mozilla.org/en-US/firefox/52.2.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-16/

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/13 23:37:55

Modified files:
	www/mozilla-firefox: Tag: OPENBSD_6_1 Makefile distinfo 
	www/mozilla-firefox/patches: Tag: OPENBSD_6_1 
	                             patch-storage_mozStorageConnection_cpp 
	www/firefox-i18n: Tag: OPENBSD_6_1 Makefile.inc distinfo 
Added files:
	www/mozilla-firefox/patches: Tag: OPENBSD_6_1 
	                             patch-js_src_jit_ProcessExecutableMemory_h 
Removed files:
	www/mozilla-firefox/patches: Tag: OPENBSD_6_1 
	                             patch-browser_installer_Makefile_in 
	                             patch-js_src_jit_ProcessExecutableMemory_cpp 

Log message:
MFC: update to firefox 54.0.

See https://www.mozilla.org/en-US/firefox/54.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-15/

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub

Note that i might not be able to keep updating this port in -stable, as
upstream plans to hard-require rust 1.17 or 1.18 (see
https://bugzilla.mozilla.org/show_bug.cgi?id=1370874) which would mean
updating rust/cargo in -stable...


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/14 01:37:17

Modified files:
	usr.bin/tmux   : cmd-find.c 

Log message:
Add missing error message when no target, GitHub issue 971.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/14 01:38:17

Modified files:
	devel/sdcc     : Makefile distinfo 
	devel/sdcc/pkg : PLIST 
Removed files:
	devel/sdcc/patches: patch-sdcc_device_examples_mcs51_simple2_go 
	                    patch-sdcc_device_examples_mcs51_simple2_test 
	                    patch-sdcc_device_examples_mcs51_simple_go 
	                    patch-sdcc_device_examples_mcs51_simple_test 
	                    patch-sdcc_sim_ucsim_conf 
	                    patch-sdcc_sim_ucsim_configure 
	                    patch-sdcc_sim_ucsim_libltdl_acinclude_m4 
	                    patch-sdcc_sim_ucsim_libltdl_aclocal_m4 
	                    patch-sdcc_sim_ucsim_libltdl_configure 

Log message:
Update to sdcc-3.6.0.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/14 01:42:41

Modified files:
	usr.bin/tmux   : cmd-string.c 

Log message:
Don't overwrite error message when it is available in
cmd_string_parse. Reported by Jimi Damon in GitHub issue 975.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/14 01:43:03

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.67.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/14 01:43:16

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.104.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/14 01:52:41

Modified files:
	www/py-bokeh   : Makefile distinfo 
	www/py-bokeh/pkg: PLIST 

Log message:
Update to py-bokeh-0.12.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/14 02:02:46

Modified files:
	cad/gerbv      : Makefile distinfo 
	cad/gerbv/pkg  : PLIST 

Log message:
Update to gerbv-2.6.2.

from Brian Callahan (new maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 03:47:37

Modified files:
	sys/dev/pv     : hyperv.c hypervvar.h 

Log message:
Add another type of a scatter-gather list operation used by StorVSC

Obtained from FreeBSD.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 04:24:51

Added files:
	sys/dev/pv     : hvs.c 

Log message:
Hyper-V storage driver

Based on the FreeBSD driver, attaches only to emulated SCSI controllers.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 04:25:40

Modified files:
	sys/dev/pv     : files.pv 

Log message:
Hookup hvs(4)


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 04:34:41

Added files:
	share/man/man4 : hvs.4 

Log message:
hvs(4) man page


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 04:35:36

Modified files:
	share/man/man4 : Makefile 

Log message:
Hook up hvs.4


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 04:36:37

Modified files:
	share/man/man4 : pvbus.4 

Log message:
Mention hvs(4)


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 06:05:37

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Increase the maximum amount of requests and do some cleanup


CVSROOT:	/cvs
Module name:	ports
Changes by:	gsoares@cvs.openbsd.org	2017/06/14 06:17:25

Modified files:
	devel/afl      : Makefile distinfo 

Log message:



CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 06:28:41

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Special handling for request 0 clashes with CCB 0


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/14 06:42:09

Modified files:
	share/man/man4 : pvbus.4 

Log message:
match the (hvs) description to the man page; ok mikeb


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 07:00:13

Modified files:
	usr.bin/mandoc : mdoc_man.c roff.c roff.h roff_html.c 
	                 roff_term.c roff_validate.c 
	share/man/man7 : roff.7 

Log message:
implement roff(7) .rj (right justify) request


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/14 07:12:49

Modified files:
	sys/arch/armv7/armv7: armv7_start.S 
	sys/arch/armv7/conf: Makefile.armv7 files.armv7 
Added files:
	sys/arch/armv7/armv7: locore0.S 

Log message:
Split early startup code out of armv7_start.S into locore0.S.  Adjust
link run so that this locore0.o is always at the start of the
executable.  But randomize the link order of all other .o files in the
kernel, so that their exec/rodata/data/bss segments land all over the
place.  Note that this commit does not yet unmap the early bootcode
since this is not as easy as on arm64.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code,
which has been unmapped.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.

With guidance and ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 08:01:34

Modified files:
	usr.bin/mandoc : roff.c 
	regress/usr.bin/mandoc/roff/cond: Makefile 
	share/man/man7 : roff.7 
Added files:
	regress/usr.bin/mandoc/roff/cond: string.in string.out_ascii 

Log message:
implement the roff(7) d (macro or string defined) conditional


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 08:04:21

Modified files:
	sysutils/downtimed: Makefile 

Log message:
mandoc now understands ".if d", so drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 08:23:50

Modified files:
	usr.bin/mandoc : term_ascii.c 

Log message:
harmless, but weird typo; found with afterstep_faq(1)


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 09:24:50

Modified files:
	x11/afterstep  : Makefile 
Added files:
	x11/afterstep/patches: patch-src_ASDocGen_ASDocGen_c 
	                       patch-src_ASDocGen_source_FAQ_03-GettingAndInstalling 

Log message:
Fix a very weird encoding error that screwed up the content of the
afterstep_faq(1) manual.  I'm not going to debug XML parsers, so
just patch the documentation such that the XML stuff yields a valid
manual page.

Only whitespace differences between groff and mandoc formatting,
so drop USE_GROFF and bump.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/14 09:39:55

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h 

Log message:
No need for two 'flags' fields. Consolidate into one, fixing
value of IFI_HUP while passing.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/14 09:57:25

Modified files:
	sbin/dhclient  : bpf.c dhclient.c dhcpd.h options.c 

Log message:
Start consolidating client_state into interface_info. First
fields to move: recv_packet, sent_packet and sent_packet_length.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/14 10:09:42

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h options.c 

Log message:
Move xid, secs, first_sending, startup_time fields from
client_state to interface_info.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/14 10:29:58

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h 

Log message:
Move state, destination, interval, requested_address from
client_state to interface_info.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/14 10:32:11

Modified files:
	usr.sbin/mailwrapper: mailwrapper.c 

Log message:
Remove main() prototype and unused envp argument.

ok deraadt@ martijn@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/14 10:36:10

Modified files:
	distrib/sgi/iso: Makefile 
	etc/etc.sgi    : disktab 

Log message:
Grow sgi iso, to account for base containing compile.tgz.
SGI has 8 kernels, so the file is 113MB!


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/14 10:52:35

Modified files:
	sbin/dhclient  : clparse.c dhclient.c dhcpd.h dispatch.c 

Log message:
Move active, new, offered_leases, leases from
client_state to interface_info.

Nuke empty struct client_state.

No intentional functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/14 10:56:04

Modified files:
	sys/dev/pci    : if_iwm.c if_iwmvar.h 

Log message:
Make iwm(4) wait for the PHY calibration result notification during HW init.
Code inspection revealed that Linux does this, and so should we.
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/14 10:56:50

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Make the iwm(4) ioctl handler wait until the transition to SCAN has completed
when bringing the interface up. Otherwise we get racy behaviour when running
ifconfig commands which issue several ioctls in quick succession.
Should fix the occasional "could not initiate scan" errors.
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/14 10:57:48

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
When a task in iwm(4) obtains an rwlock(9), bail out if the device was
reset while the task was asleep waiting for the lock.
ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/14 10:58:28

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Currently, iwm(4) uses only one phy context, so stop sending commands to the
firmware for unused ones. This should be refactored further, but for now this
change is good enough to reduce the amount of commands we throw at the firmware.
ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/14 11:11:20

Modified files:
	devel/qt-creator: Makefile distinfo 
	devel/qt-creator/patches: 
	                          patch-src_plugins_projectexplorer_gcctoolchain_cpp 
	                          patch-src_plugins_qmakeprojectmanager_qmakebuildconfiguration_cpp 
	                          patch-src_shared_qbs_src_lib_corelib_tools_processutils_cpp 
	                          patch-src_shared_qbs_src_lib_corelib_tools_tools_pri 
	devel/qt-creator/pkg: PLIST 

Log message:
update qt-creator to 4.3.0

Take maintainership.

PLIST tweak and ok from zhuk@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 11:50:44

Modified files:
	usr.bin/mandoc : man_term.c mdoc_term.c roff_term.c tbl_term.c 
	                 term.c term.h term_tab.c 
	regress/usr.bin/mandoc/man/HP: spacing.in 
	regress/usr.bin/mandoc/man/IP: width.in 
	regress/usr.bin/mandoc/man/RS: width.in 
	regress/usr.bin/mandoc/man/TP: width.in 
	regress/usr.bin/mandoc/mdoc/Bd: offset-neg.in 
	regress/usr.bin/mandoc/mdoc/Bl: offset.in offset.out_ascii 
	                                offset.out_markdown tag.in 
	regress/usr.bin/mandoc/roff/esc: h.in h.out_ascii h.out_lint 
	regress/usr.bin/mandoc/roff/ta: basic-man.in basic-man.out_ascii 
	regress/usr.bin/mandoc/roff/ti: basic-man.in 
	regress/usr.bin/mandoc/tbl/mod: width.in 

Log message:
improve rounding rules for scaling units
in horizontal orientation in the terminal formatter


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 12:23:26

Modified files:
	usr.bin/mandoc : out.c term.c 
	regress/usr.bin/mandoc/roff/esc: Makefile 
Added files:
	regress/usr.bin/mandoc/roff/esc: l.in l.out_ascii l.out_lint 

Log message:
let \l use the right fill character


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/14 12:30:03

Modified files:
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 12:34:10

Modified files:
	devel/sdlmm    : Makefile 

Log message:
With roff_term.c rev. 1.12, mandoc now gets the indentation right,
allowing output comparison, and it turns out mandoc output is
actually better than groff output because mandoc treat the invalid
font \fC as roman, while groff simply ignores the escape sequence.

So, drop USE_GROFF and bump.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 13:39:05

Modified files:
	usr.bin/mandoc : roff.c 
	share/man/man7 : roff.7 

Log message:
simple implementation of the roff(7) .als (macro alias) request,
sufficient for pages using po4a(1)


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 13:42:53

Modified files:
	net/amule      : Makefile 

Log message:
mandoc now understands .als, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 14:01:14

Modified files:
	devel/libvstr  : Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/14 14:02:01

Modified files:
	www/firefox-esr-i18n: distinfo 

Log message:
fix Japanese language pack


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/14 14:09:21

Modified files:
	www/firefox-esr-i18n: Tag: OPENBSD_6_1 distinfo 

Log message:
fix Japanese language pack


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 14:20:34

Modified files:
	security/towitoko: Makefile 

Log message:
ancient DocBook stuff containing large amounts of syntax errors,
but none of them cause relevant formatting differences,
so drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/14 14:21:32

Modified files:
	x11/mate/pluma : Makefile 

Log message:
Missing BDEP+RDEP on devel/iso-codes.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/14 14:27:08

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c 

Log message:
No need to be coy - call a "struct interface_info *" a
"struct interface_info *" and not a "void *".

No intentional functional change.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 14:43:53

Modified files:
	audio/mp3wrap  : Makefile 

Log message:
ancient DocBook stuff with harmless errors and
without formatting differences, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/14 14:48:54

Modified files:
	usr.sbin/tcpdump: print-atalk.c privsep.c privsep.h 

Log message:
Don't support loading appletalk addresses from /etc/appletalk.names.

OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 14:56:42

Modified files:
	usr.bin/mandoc : chars.c 
	regress/usr.bin/mandoc/char/unicode: ascii.in ascii.out_ascii 
	                                     ascii.out_html 
	                                     ascii.out_utf8 
	share/man/man7 : mandoc_char.7 

Log message:
add the \(ru (0.5m baseline ruler) character escape sequence,
abused by mail/nmh; groff_char(7) confirms that this really exists


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/14 15:21:43

Modified files:
	devel/giblib   : Makefile 

Log message:
remove dead homepage url and fix MASTER_SITES
ok dcoppa@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/06/14 15:39:53

Modified files:
	etc            : rc 

Log message:
Add a new function reorder_kernel() that relinks and installs the
new kernel in the background on system startup. It stores the hash
of the new kernel and sends a notification email to the admin or
root user. If it finds /usr/share/compile.tgz, it removes the
existing compile dir and replaces it with the content of (new)
archive. If the hash of /bsd does not match the stored one, no
relinking happens.

Idea from, joint work with and OK deraadt@
OK tb@ halex@
unnoticed by many


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 16:08:21

src/regress/usr.bin/mandoc/roff/po

Update of /cvs/src/regress/usr.bin/mandoc/roff/po
In directory cvs.openbsd.org:/tmp/cvs-serv5276/po

Log Message:
Directory /cvs/src/regress/usr.bin/mandoc/roff/po added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 16:20:10

Modified files:
	graphics/pqiv  : Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 16:24:11

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Borrow some of dlg's smarts to make this look like a real SCSI driver


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/14 16:35:43

Modified files:
	sys/arch/amd64/conf: GENERIC RAMDISK_CD 

Log message:
Enable hvs(4), "go for it" from deraadt.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 16:50:37

Modified files:
	usr.bin/mandoc : mdoc_man.c roff.c roff.h roff_html.c 
	                 roff_term.c roff_validate.c 
	regress/usr.bin/mandoc/roff: Makefile 
	share/man/man7 : roff.7 
Added files:
	regress/usr.bin/mandoc/roff/po: Makefile basic-mdoc.in 
	                                basic-mdoc.out_ascii 

Log message:
Naive implementation of the roff(7) .po (page offset) request.

This clearly works when .po is called on the top level, but might
not be sophisticated enough if people call .po inside indentation-changing
contexts, but i haven't seen that in manual pages (yet :).


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 17:23:51

Modified files:
	usr.bin/mandoc : term.c 
	regress/usr.bin/mandoc/roff/esc: h.in h.out_ascii h.out_lint 
	share/man/man7 : roff.7 

Log message:
implement so-called absolute horizontal motion: \h'|...',
used for example by zoem(1)


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 18:27:23

Modified files:
	usr.bin/mandoc : out.c 
	regress/usr.bin/mandoc/tbl/data: Makefile 
Added files:
	regress/usr.bin/mandoc/tbl/data: block_width.in 
	                                 block_width.out_ascii 

Log message:
round default width of tbl(7) text blocks in the same way as groff


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 18:41:06

Modified files:
	misc/gpsd      : Makefile 

Log message:
Crappy DocBook v1.75.2 stuff.
Looks better with mandoc than with groff now,
so drop USE_GROFF and bump the two subpackages containing manuals.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/14 19:00:42

Modified files:
	x11/xbae       : Makefile 

Log message:
These manuals look quite broken with groff because groff sets the
column separation in the excessively wide tables to zero, so you
cannot easily see the word boundaries.

With mandoc, the manuals are actually readable if you make your
terminal window wider than 132 columns, so drop USE_GROFF and bump.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/14 20:52:30

Modified files:
	sys/sys        : pool.h 

Log message:
add some kinfo structs and sysctl mibs for info about per cpu pool caches

there are two sysctls, one that shows info about the pools global
cache info, and another that dumps info about the caches on all the
cpus in one go.

ok mikeb@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/14 21:44:18

Modified files:
	sys/kern       : subr_pool.c 

Log message:
implement the backend of the sysctls that report pool cache info.

KERN_POOL_CACHE reports info about the global cache info, like how long
the lists of cache items the cpus build should be and how many of these
lists are idle on the pool struct.

KERN_POOL_CACHE_CPUS reports counters from each each. the counters
are for how many item and list operations the cache has handled on
a cpu. the sysctl provides an array of ncpusfound * struct
kinfo_pool_cache_cpu, not a single struct kinfo_pool_cache_cpu.

tested by hrvoje popovski
ok mikeb@ millert@
----------------------------------------------------------------------


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/14 21:47:08

Modified files:
	usr.bin/systat : pool.c systat.1 

Log message:
add a rough start to a pcache view, to show pool cpu cache info.

ok mikeb@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/14 21:48:50

Modified files:
	sys/kern       : subr_pool.c 

Log message:
white space tweaks. no functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/14 21:50:51

Modified files:
	sys/kern       : subr_pool.c 

Log message:
report contention on caches global data to userland.


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/15 00:44:47

Modified files:
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 

Log message:
"10th's of a second" -> "tenths of a second"

ok jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 01:14:57

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.68.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 01:15:09

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.105.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 01:24:09

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-159.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 01:52:33

Modified files:
	security       : Makefile 
Removed files:
	security/samhain: Makefile distinfo 
	security/samhain/patches: patch-c_random_sh patch-configure 
	                          patch-samhainrc_freebsd 
	security/samhain/pkg: DESCR-client DESCR-main DESCR-server 
	                      PLIST-client PLIST-main PLIST-server 
	                      README-client README-server samhain.rc 
	                      samhain_signed.rc yule.rc 

Log message:
Remove samhain which has been left dormant in ports with no interest from
anyone.

ok robert@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 01:54:28

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register samhain, samhain-docs and samhain-server removal.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:28:52

Log message:
    Qt Data Visualization module provides a way to visualize data in 3D as bar,
    scatter, and surface graphs. It is especially useful for visualizing depth maps
    and large quantities of rapidly changing data, such as data received from
    multiple sensors. The look and feel of graphs can be customized by using themes
    or by adding custom items and labels to them.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtdatavis3d/distinfo
    N ports/x11/qt5/qtdatavis3d/Makefile
    N ports/x11/qt5/qtdatavis3d/pkg/DESCR-main
    N ports/x11/qt5/qtdatavis3d/pkg/DESCR-examples
    N ports/x11/qt5/qtdatavis3d/pkg/DESCR-docindex
    N ports/x11/qt5/qtdatavis3d/pkg/DESCR-qch
    N ports/x11/qt5/qtdatavis3d/pkg/DESCR-html
    N ports/x11/qt5/qtdatavis3d/pkg/PLIST-main
    N ports/x11/qt5/qtdatavis3d/pkg/PLIST-qch
    N ports/x11/qt5/qtdatavis3d/pkg/PLIST-examples
    N ports/x11/qt5/qtdatavis3d/pkg/PLIST-docindex
    N ports/x11/qt5/qtdatavis3d/pkg/PLIST-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:30:14

Log message:
    A Qt 5 module that adds support for getting events from gamepad devices
    on multiple platforms.
    
    This module provides classes that can:
    - read input events from game controllers (Button and Axis events),
    both from C++ and Qt Quick (QML);
    - provide a queryable input state (by processing events);
    - provide key bindings.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtgamepad/Makefile
    N ports/x11/qt5/qtgamepad/distinfo
    N ports/x11/qt5/qtgamepad/pkg/PLIST-main
    N ports/x11/qt5/qtgamepad/pkg/PLIST-qch
    N ports/x11/qt5/qtgamepad/pkg/PLIST-examples
    N ports/x11/qt5/qtgamepad/pkg/PLIST-docindex
    N ports/x11/qt5/qtgamepad/pkg/PLIST-html
    N ports/x11/qt5/qtgamepad/pkg/DESCR-main
    N ports/x11/qt5/qtgamepad/pkg/DESCR-examples
    N ports/x11/qt5/qtgamepad/pkg/DESCR-docindex
    N ports/x11/qt5/qtgamepad/pkg/DESCR-qch
    N ports/x11/qt5/qtgamepad/pkg/DESCR-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:31:04

Log message:
    Qt Network Authorization provides a set of APIs that enable Qt applications
    to obtain limited access to online accounts and HTTP services without exposing
    users' passwords.
    
    Currently, the supported authorization protocol is OAuth 1 & 2.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtnetworkauth/Makefile
    N ports/x11/qt5/qtnetworkauth/distinfo
    N ports/x11/qt5/qtnetworkauth/pkg/PLIST-main
    N ports/x11/qt5/qtnetworkauth/pkg/PLIST-qch
    N ports/x11/qt5/qtnetworkauth/pkg/PLIST-examples
    N ports/x11/qt5/qtnetworkauth/pkg/PLIST-docindex
    N ports/x11/qt5/qtnetworkauth/pkg/PLIST-html
    N ports/x11/qt5/qtnetworkauth/pkg/DESCR-main
    N ports/x11/qt5/qtnetworkauth/pkg/DESCR-examples
    N ports/x11/qt5/qtnetworkauth/pkg/DESCR-docindex
    N ports/x11/qt5/qtnetworkauth/pkg/DESCR-qch
    N ports/x11/qt5/qtnetworkauth/pkg/DESCR-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:32:16

Log message:
    Qt Purchasing is an add-on library that enables Qt applications to support
    in-app purchases. It is a cross-platform library that currently supports
    purchases made to the Mac App Store on OS X, App Store on iOS, and Google Play
    on Android.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtpurchasing/Makefile
    N ports/x11/qt5/qtpurchasing/distinfo
    N ports/x11/qt5/qtpurchasing/pkg/DESCR-main
    N ports/x11/qt5/qtpurchasing/pkg/PLIST-main
    N ports/x11/qt5/qtpurchasing/pkg/PLIST-qch
    N ports/x11/qt5/qtpurchasing/pkg/PLIST-examples
    N ports/x11/qt5/qtpurchasing/pkg/PLIST-docindex
    N ports/x11/qt5/qtpurchasing/pkg/PLIST-html
    N ports/x11/qt5/qtpurchasing/pkg/DESCR-examples
    N ports/x11/qt5/qtpurchasing/pkg/DESCR-docindex
    N ports/x11/qt5/qtpurchasing/pkg/DESCR-qch
    N ports/x11/qt5/qtpurchasing/pkg/DESCR-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:33:50

Log message:
    Qt Remote Objects (QtRO) is an inter-process communication (IPC) module
    developed for Qt. The idea is to extend existing Qt's functionalities to enable
    an easy exchange of information between processes or computers.
    
    One of the key features of Qt to enable this is the distinction between an
    objects API (defined by its Q_Property, Signals and Slots) and the
    implementation of that API. The purpose of QtRO is to meet the expected API,
    even if the true QObject is in a different process. A Slot called on a copy of
    an object (called a Replica) is forwarded to the true object (called a Source)
    for handling. Updates to the Source, either property changes or emitted Signals,
    are forwarded to every Replica.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtremoteobjects/Makefile
    N ports/x11/qt5/qtremoteobjects/distinfo
    N ports/x11/qt5/qtremoteobjects/pkg/DESCR-main
    N ports/x11/qt5/qtremoteobjects/pkg/DESCR-examples
    N ports/x11/qt5/qtremoteobjects/pkg/DESCR-docindex
    N ports/x11/qt5/qtremoteobjects/pkg/DESCR-qch
    N ports/x11/qt5/qtremoteobjects/pkg/DESCR-html
    N ports/x11/qt5/qtremoteobjects/pkg/PLIST-main
    N ports/x11/qt5/qtremoteobjects/pkg/PLIST-qch
    N ports/x11/qt5/qtremoteobjects/pkg/PLIST-examples
    N ports/x11/qt5/qtremoteobjects/pkg/PLIST-docindex
    N ports/x11/qt5/qtremoteobjects/pkg/PLIST-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:35:15

Log message:
    The Qt SCXML module provides functionality to create state machines from SCXML
    files. This includes both dynamically creating state machines (loading the SCXML
    file and instantiating states and transitions) and generating a C++ file that
    has a class implementing the state machine. It also contains functionality to
    support data models and executable content.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtscxml/Makefile
    N ports/x11/qt5/qtscxml/distinfo
    N ports/x11/qt5/qtscxml/pkg/DESCR-main
    N ports/x11/qt5/qtscxml/pkg/PLIST-main
    N ports/x11/qt5/qtscxml/pkg/PLIST-qch
    N ports/x11/qt5/qtscxml/pkg/PLIST-examples
    N ports/x11/qt5/qtscxml/pkg/PLIST-docindex
    N ports/x11/qt5/qtscxml/pkg/PLIST-html
    N ports/x11/qt5/qtscxml/pkg/DESCR-examples
    N ports/x11/qt5/qtscxml/pkg/DESCR-docindex
    N ports/x11/qt5/qtscxml/pkg/DESCR-qch
    N ports/x11/qt5/qtscxml/pkg/DESCR-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:36:13

Log message:
    The module enables a Qt application to support accessibility features such as
    text-to-speech, which is useful for end-users who are visually challenged or
    cannot access the application for whatever reason. The most common use case
    where text-to-speech comes in handy is when the end-user is driving and cannot
    attend the incoming messages on the phone.  In such a scenario, the messaging
    application can read out the incoming message.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtspeech/Makefile
    N ports/x11/qt5/qtspeech/distinfo
    N ports/x11/qt5/qtspeech/pkg/DESCR-main
    N ports/x11/qt5/qtspeech/pkg/DESCR-examples
    N ports/x11/qt5/qtspeech/pkg/DESCR-docindex
    N ports/x11/qt5/qtspeech/pkg/DESCR-qch
    N ports/x11/qt5/qtspeech/pkg/DESCR-html
    N ports/x11/qt5/qtspeech/pkg/PLIST-main
    N ports/x11/qt5/qtspeech/pkg/PLIST-qch
    N ports/x11/qt5/qtspeech/pkg/PLIST-examples
    N ports/x11/qt5/qtspeech/pkg/PLIST-docindex
    N ports/x11/qt5/qtspeech/pkg/PLIST-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:37:08

Log message:
    The Qt Virtual Keyboard project provides an input framework and reference
    keyboard frontend for Qt 5 on Linux Desktop/X11, Windows Desktop, and Boot2Qt
    targets.
    
    The input framework makes it easy to write custom input methods or to integrate
    3rd party input engines. The input methods can be implemented in C++ or QML.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtvirtualkeyboard/Makefile
    N ports/x11/qt5/qtvirtualkeyboard/distinfo
    N ports/x11/qt5/qtvirtualkeyboard/pkg/DESCR-main
    N ports/x11/qt5/qtvirtualkeyboard/pkg/PLIST-main
    N ports/x11/qt5/qtvirtualkeyboard/pkg/PLIST-qch
    N ports/x11/qt5/qtvirtualkeyboard/pkg/PLIST-examples
    N ports/x11/qt5/qtvirtualkeyboard/pkg/PLIST-docindex
    N ports/x11/qt5/qtvirtualkeyboard/pkg/PLIST-html
    N ports/x11/qt5/qtvirtualkeyboard/pkg/DESCR-examples
    N ports/x11/qt5/qtvirtualkeyboard/pkg/DESCR-docindex
    N ports/x11/qt5/qtvirtualkeyboard/pkg/DESCR-qch
    N ports/x11/qt5/qtvirtualkeyboard/pkg/DESCR-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:38:31

Removed files:
	x11/qt5/qtwebkit/pkg: DESCR-examples 

Log message:
Unused file: Qt5 Webkit examples live in a different castle..


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:41:48

Log message:
    QtWebkit contains classes and functions for embedding web content in
    applications using the Webkit framework.
    
    This package contains sources for QtWebkit usage examples.
    
    This is a part of upcoming Qt 5.9.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170615
    
    N ports/x11/qt5/qtwebkit-examples/Makefile
    N ports/x11/qt5/qtwebkit-examples/distinfo
    N ports/x11/qt5/qtwebkit-examples/pkg/PLIST
    N ports/x11/qt5/qtwebkit-examples/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:44:38

ports/x11/qt5/qtbase/files

Update of /cvs/ports/x11/qt5/qtbase/files
In directory cvs.openbsd.org:/tmp/cvs-serv10868/files

Log Message:
Directory /cvs/ports/x11/qt5/qtbase/files added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 02:54:46

Modified files:
	devel/qmake    : qmake.port.mk 

Log message:
Make -recursive optional, it breaks quite a few upcoming Qt 5.9 ports.
Yes, this is a bug in qmake infrastructure, but Qt is moving towards qbs
anyway, so no reason to spend time on fixing qmake.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/15 03:01:49

Modified files:
	net/isc-bind   : Makefile distinfo 

Log message:
update to BIND 9.10.5-P1

* With certain RPZ configurations, a response with TTL 0 could cause
named to go into an infinite query loop. This flaw is disclosed in
CVE-2017-3140. [RT #45181]

A server is potentially vulnerable to degradation of service if
1. the server is configured to use RPZ,
2. the server uses NSDNAME or NSIP policy rules, and
3. an attacker can cause the server to process a specific query


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/15 03:02:53

Modified files:
	net/isc-bind   : Tag: OPENBSD_6_1 Makefile distinfo 
	net/isc-bind/patches: Tag: OPENBSD_6_1 patch-bin_dig_dig_c 
	                      patch-bin_dig_nslookup_c 
	                      patch-lib_isc_unix_net_c 
	                      patch-lib_isc_unix_socket_c 
	net/isc-bind/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
update to BIND 9.10.5-P1

* With certain RPZ configurations, a response with TTL 0 could cause
named to go into an infinite query loop. This flaw is disclosed in
CVE-2017-3140. [RT #45181]

A server is potentially vulnerable to degradation of service if
1. the server is configured to use RPZ,
2. the server uses NSDNAME or NSIP policy rules, and
3. an attacker can cause the server to process a specific query


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/06/15 03:38:17

Modified files:
	www/sblg       : Makefile distinfo 

Log message:
Update to sblg-0.4.2.

From Bryan Vyhmeister. Thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/15 04:00:56

Modified files:
	audio/libmikmod: Makefile distinfo 

Log message:
Update libmikmod to 3.3.11.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/15 04:01:42

Modified files:
	audio/mikmod   : Makefile distinfo 

Log message:
Update mikmod to 3.2.8.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/15 04:55:42

Modified files:
	net/gajim      : Makefile distinfo 
	net/gajim/pkg  : PLIST 

Log message:
update gajim to 0.16.8

ok pea@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 05:33:18

Modified files:
	graphics/ffmpeg: Makefile distinfo 
	graphics/ffmpeg/patches: patch-libavutil_internal_h 

Log message:
Update to ffmpeg-20170610.

from Brad (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 05:33:50

Modified files:
	x11/mplayer    : Makefile 

Log message:
Sync FFMPEG_V with graphics/ffmpeg.

from Brad (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/15 05:48:49

Modified files:
	sys/dev/wscons : wsconsio.h 
	usr.sbin/wsfontload: wsfontload.c 

Log message:
We do not support iso7 nor pcvt encoding, so remove macro definitions
and commented entries.

OK mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 07:48:42

Modified files:
	usr.bin/m4     : eval.c extern.h gnum4.c m4.1 main.c misc.c 
	                 tokenizer.l 
	regress/usr.bin/m4: Makefile 
Added files:
	regress/usr.bin/m4: fatalwarnings.m4 fatalwarnings.out 

Log message:
Add -E flag (make warnings fatal), following the behavior of GNU m4 1.4.9+
Help and direction millert@ espie@ anton@ deraadt@

ok espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/15 08:40:37

Modified files:
	print/hplip    : Makefile 
	print/hplip/patches: patch-base_password_py 
	print/hplip/pkg: README-common 

Log message:
Fix plugins installation.

issue reported by Reheis Claus


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 09:01:28

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Correct the number of targets vs number of LUNs

jsg@ has found out that the number of targets wasn't correct and
it turns out that the device supports up to 2 targets and 1 or 64
LUNs depending on whether it's taking over an IDE device or is a
virtual SCSI.

While here make sure the command response is copied back only for
synchronous commands that are issued during initialization phase.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 09:53:23

Modified files:
	share/man/man5 : port-modules.5 

Log message:
The devel/qmake port module handles Qt3 as well.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 09:55:14

Modified files:
	devel/qmake    : qmake.port.mk 

Log message:
Add tests handling to devel/qmake, to be used by upcoming Qt 5.9, at least.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 10:03:52

Modified files:
	share/man/man5 : port-modules.5 

Log message:
Document MODQMAKE_RECURSIVE and test framework support for devel/qmake.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 10:06:02

Modified files:
	share/man/man5 : port-modules.5 

Log message:
It's never too late to document x11/kde module. At least a (non-obvious) bit.


CVSROOT:	/cvs
Module name:	src
Changes by:	zhuk@cvs.openbsd.org	2017/06/15 10:07:54

Modified files:
	share/man/man5 : port-modules.5 

Log message:
Assorted tweaks for x11/qt* modules description.


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/15 10:29:20

Log message:
    Import net/pidgin-window-merge
    
    Window Merge is a Pidgin plugin that merges a conversation window with the Buddy
    List window. It can be used to achieve a rudimentary "single window mode" for
    Pidgin. Both Window Merge and Pidgin itself should be kept updated for the most
    stable experience.
    
    This project was not written and is not maintained by Pidgin developers. The
    nature of this project can potentially destabilize Pidgin or its other plugins,
    so use it at your own risk.
    
    ok @rsadowski
    
    Status:
    
    Vendor Tag:	czarkoff
    Release Tags:	czarkoff_20170615
    
    N ports/net/pidgin-window-merge/Makefile
    N ports/net/pidgin-window-merge/distinfo
    N ports/net/pidgin-window-merge/pkg/DESCR
    N ports/net/pidgin-window-merge/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/15 10:39:16

Modified files:
	net            : Makefile 

Log message:
+pidgin-window-merge


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/15 10:56:11

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Nuke unused parameter 'client_addr' from packet_to_lease().


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/15 11:06:17

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h options.c 

Log message:
Nuke unused parameter 'client_addr' from the 'handlers', i.e.
dhcpoffer(), dhcpack(), dhcpnak().


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 12:00:26

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Put back copying of the response message into the polling callback

The response message is allocated on the stack of hvs_intr and its
content is valid during a single message processing loop iteration.
Due to the fact that polled transfers finish completion in a callee
context, the cached pointer to the response message becomes stale
very quickly.  To avoid this situation the poll completion callback
needs to make sure the content of the response is provided to the
next completion routine.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/15 12:02:17

Modified files:
	graphics/glm   : Makefile distinfo 
	graphics/glm/patches: patch-CMakeLists_txt 
	graphics/glm/pkg: PLIST 

Log message:
update glm to 0.9.8.4

CXXFLAGS tweak and ok czarkoff@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/15 12:03:10

Modified files:
	graphics/slop  : Makefile distinfo 

Log message:
update slop to 6.3.38

ok czarkoff@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/15 12:03:59

Modified files:
	graphics/maim  : Makefile distinfo 

Log message:
update maim to 5.4.63

ok czarkoff@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 12:05:52

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Remove the structure definition for an old (pre Win8) I/O request type
since the new one is backwards compatible and the correct length of the
request can be specified w/o an actual definition.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 12:21:08

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Provide storage for the response message in each CCB


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/15 13:37:04

Modified files:
	games/ufoai/base/patches: 
	                          patch-src_client_battlescape_cl_particle_cpp 
	                          patch-src_client_renderer_r_state_cpp 

Log message:
add upstream commit IDs


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/15 13:37:10

Modified files:
	usr.bin/at     : at.c 

Log message:
Finer grained pledge for at(1).  After setegid(), do a three-way pledge:
For AT and BATCH:	"stdio rpath wpath cpath fattr getpw unix"
For ATRM:		"stdio rpath cpath getpw unix"
For ATQ and CAT:	"stdio rpath getpw"
"unix" is needed for poke_daemon() and "fattr" to chmod +x spoolfile.

idea and ok millert


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 14:06:13

Modified files:
	sys/dev/pv     : if_hvn.c 

Log message:
Support executing NVSP and RNDIS commands during autoconf


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 14:08:56

Modified files:
	sys/dev/pv     : hyperv.c 

Log message:
Make sure we can free GPA handles when cold


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/15 14:10:25

Modified files:
	games/hunt     : README 

Log message:
Remove the Installation section and fix a nonexistent path.

OK tb@ (fix paths diff) deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/15 14:12:12

Modified files:
	sys/dev/pv     : hyperv.c 

Log message:
Don't defer attaching PV devices

Now that both hvn(4) and hvs(4) can perform VMBus channel operations
during autoconf, it's no longer necessary to defer their attachment.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 17:34:35

Log message:
    Import converters/p5-Date-Tolkien-Shire-Data
    ok benoit@
    
    This Perl module contains common or near-common code factored out of
    Date::Tolkien::Shire and DateTime::Fiction::JRRTolkien::Shire. This is
    mostly data and calculations common to the two modules, but there is
    also a piece of new functionality: an output formatter for Shire dates
    analogous to strftime(). All functionality is provided by subroutines.
    
    Because of its nature, you probably do not want to use this module
    directly.  At least, not without looking into Date::Tolkien::Shire which
    is a semi-thin object-oriented front end to this module, or
    DateTime::Fiction::JRRTolkien::Shire which is a somewhat-quirky member
    of the DateTime family.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170615
    
    N ports/converters/p5-Date-Tolkien-Shire-Data/Makefile
    N ports/converters/p5-Date-Tolkien-Shire-Data/distinfo
    N ports/converters/p5-Date-Tolkien-Shire-Data/pkg/DESCR
    N ports/converters/p5-Date-Tolkien-Shire-Data/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 17:35:25

Modified files:
	converters     : Makefile 

Log message:
+p5-Date-Tolkien-Shire-Data


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 17:36:32

Modified files:
	converters/p5-Date-Tolkien-Shire: Makefile distinfo 

Log message:
Update to 1.901
Now uses its dependent port, converters/p5-Date-Tolkien-Shire-Data

ok benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 17:48:49

Modified files:
	graphics/mandelbulber: Makefile distinfo 
	graphics/mandelbulber/patches: patch-makefiles_makefile 
	                               patch-makefiles_objects_mk 
	                               patch-makefiles_src_subdir_mk 

Log message:
Update to 1.21

ok rsadowski@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/15 19:33:20

Modified files:
	sys/kern       : subr_pool.c 

Log message:
split returning an item to the pool pages out of pool_put as pool_do_put.

this lets pool_cache_list_put return items to the pages. currently,
if pool_cache_list_put is called while the per cpu caches are
enabled, the items on the list will put put straight back onto
another list in the cpu cache. this also avoids counting puts for
these items twice. a put for the items have already been coutned
when the items went to a cpu cache, it doesnt need to be counted
again when it goes back to the pool pages.

another side effect of this is that pool_cache_list_put can take
the pool mutex once when returning all the items in the list with
pool_do_put, rather than once per item.

ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/15 19:55:45

Modified files:
	sys/sys        : pool.h 
	sys/kern       : subr_pool.c 

Log message:
add garbage collection of unused lists percpu cached items.

the cpu caches in pools amortise the cost of accessing global
structures by moving lists of items around instead of individual
items. excess lists of items are stored in the global pool struct,
but these idle lists never get returned back to the system for use
elsewhere.

this adds a timestamp to the global idle list, which is updated
when the idle list stops being empty. if the idle list hasn't been
empty for a while, it means the per cpu caches arent using the idle
entries and they can be recovered. timestamping the pages prevents
recovery of a lot of items that may be used again shortly. eg, rx
ring processing and replenishing from rate limited interrupts tends
to allocate and free items in large chunks, which the timestamping
smooths out.

gc'ed lists are returned to the pool pages, which in turn get gc'ed
back to uvm.

ok visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 21:36:44

Log message:
    Import lang/gravity
    ok juanfra@
    
    Gravity is a powerful, dynamically typed, lightweight, embeddable
    programming language written in C without any external dependencies
    (except for stdlib). It is a class-based concurrent scripting language
    with modern Swift-like syntax.
    
    Gravity supports procedural programming, object-oriented programming,
    functional programming and data-driven programming. Thanks to special
    built-in methods, it can also be used as a prototype-based programming
    language.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170615
    
    N ports/lang/gravity/Makefile
    N ports/lang/gravity/distinfo
    N ports/lang/gravity/pkg/PLIST
    N ports/lang/gravity/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/15 21:37:21

Modified files:
	lang           : Makefile 

Log message:
+gravity


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/15 23:19:15

Modified files:
	usr.sbin/pcidump: pcidump.c 

Log message:
PCI Express extendeded capability 0x1c is LN Requester according to the
PCI-SIG Lightweight Notification (LN) Protocol ECN document.

From Masanobu SAITOH.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/06/15 23:48:54

Modified files:
	x11/evilwm     : Makefile distinfo 
	x11/evilwm/patches: patch-Makefile 
	x11/evilwm/pkg : PLIST 

Log message:
update evilwm to 1.1.1

- remove Victor Sahlstedt as maintainer (bounce email)

bcallah@


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/06/16 00:46:54

Modified files:
	sbin/init      : init.c 
	sbin/reboot    : reboot.c 

Log message:
s/CPU_LIDSUSPEND/CPU_LIDACTION/
ok mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/16 01:23:51

Modified files:
	net/pidgin-window-merge: Makefile 

Log message:
Use MODGNU_AUTO*_DEPENDS.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/16 01:25:10

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.69.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/16 01:25:23

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.106.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/16 02:45:34

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
In iwm_init() save the generation counter once before looping over
tsleep(9), instead of saving it during every iteration.


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/16 03:34:36

Modified files:
	graphics/glm   : Makefile 

Log message:
fix typo


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/16 04:20:52

Modified files:
	share/mk       : bsd.dep.mk bsd.lib.mk bsd.prog.mk 

Log message:
introduce a BUILDFIRST/BUILDAFTER mechanism:
record every standard component built in bsd.lib.mk/bsd.prog.mk in BUILDAFTER
and have BUILDAFTER depend on BUILDFIRST, thus making possible to build
some stuff early without relying on "make depend"

okay tb@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/16 04:25:54

Modified files:
	bin/csh        : Makefile 
	gnu/lib/libiberty: Makefile.bsd-wrapper 
	gnu/usr.bin/cc/libcpp: Makefile 
	gnu/usr.bin/cc/libgcov: Makefile 
	gnu/usr.bin/cc/libobjc: Makefile 
	lib/libcrypto  : Makefile 
	lib/libcurses  : Makefile 
	lib/libedit    : Makefile 
	lib/librpcsvc  : Makefile 
	sbin/isakmpd   : Makefile 
	sbin/wsconsctl : Makefile 
	usr.bin/awk    : Makefile 
	usr.bin/infocmp: Makefile 
	usr.bin/tic    : Makefile 
	usr.bin/tset   : Makefile 
	usr.sbin/rpc.lockd: Makefile 
	usr.sbin/rpc.statd: Makefile 
	usr.sbin/ypserv/ypserv: Makefile 

Log message:
mark files as BUILDFIRST, or write explicit dependencies, so that most
programs will build even without a make depend first.
okay tb@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/16 04:58:43

Modified files:
	share/man/man4 : pppoe.4 
	sys/net        : if_spppsubr.c 

Log message:
In sppp(4), allow additional 'wildcard' addresses for the destination.
Any address within the range 0.0.0.1 - 0.0.0.255 can now be used.
This allows for multiple pppoe(4) interfaces with dynamic addresses within
the same routing table. Which used to work before OpenBSD 5.8, but since 5.8
only one interface in a routing table can use destination address 0.0.0.1.

Problem first reported by Steve (fiverings04 at australian yahoo) on misc@.
I ran into it on an EdgeRouter lite which is supposed to serve two ADSL lines.
ok sthen@ mpi@
man page help from jmc@ for an earlier variant of this change


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/16 05:50:06

Modified files:
	usr.bin/tmux   : tty-term.c 

Log message:
Log terminal capabilities for each new terminal.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 07:59:02

Modified files:
	mail/pear-Mail-Mime: Makefile distinfo 
	mail/pear-Mail-Mime/pkg: PLIST 

Log message:
update to pear-Mail-Mime 1.10.1, enable tests


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:02:43

Modified files:
	net/pear-Net-Sieve: Makefile distinfo 

Log message:
update to pear-Net-Sieve-1.4.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:03:46

Modified files:
	net/pear-Net-SMTP: Makefile distinfo 

Log message:
update to pear-Net-SMTP-1.8.0, enable tests


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:07:30

Modified files:
	mail/pear-Mail : Makefile distinfo 
	mail/pear-Mail/pkg: PLIST 

Log message:
update to pear-Mail-1.4.1, enable tests


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:08:52

Modified files:
	security/pear-Auth-SASL: Makefile distinfo 

Log message:
update to pear-Auth-SASL-1.1.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:10:39

Modified files:
	net/pear-Net-IDNA2: Makefile distinfo 
	net/pear-Net-IDNA2/pkg: PLIST 

Log message:
nupdate to pear-Net-IDNA2-0.2.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:12:04

Modified files:
	net/pear-Net-Socket: Makefile distinfo 
	net/pear-Net-Socket/pkg: PLIST 

Log message:
update to pear-Net-Socket-1.2.2


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/16 08:12:12

Modified files:
	sbin/dhclient  : clparse.c dhclient.c dhcpd.h 

Log message:
Nuke 'is_bootp' field and just use a #define to check if the lease
has DHO_DHCP_MESSAGE_TYPE info.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:23:13

Modified files:
	math/calc      : Makefile distinfo 

Log message:
update to calc-2.12.6.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:24:52

Modified files:
	audio/p5-Audio-Scan: Makefile distinfo 

Log message:
update to p5-Audio-Scan-0.98


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 08:35:11

Modified files:
	devel/py-parsedatetime: Makefile distinfo 
	devel/py-parsedatetime/patches: patch-setup_py 

Log message:
update to py-parsedatetime-2.4


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/16 08:57:51

Modified files:
	sys/dev/ic     : r92creg.h rtwn.c rtwnvar.h 
	sys/dev/pci    : if_rtwn.c 
	sys/dev/usb    : if_urtwn.c 

Log message:
- Fix incorrect values in the computation of transmit power for the
rtl8188eu chipset.
- Small code refactoring:
- replace hardcoded rate indexes with their name, like athn(4).
- replace fields offsets with the structure; from FreeBSD r294198.
- be compliant with definitions of the efuse in vendor hal_pg.h and
rename struct r92c_rom member names: s/channel_plan/reserved5/,
s/xtal_calib/channel_plan.
- no need to disable HWPDN twice in urtwn_r88e_power_on().

Tested by stsp@ and myself with RTL8188CUS, RTL8192CU, RTL8188EU, and
RTL8188CE devices.

ok stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 09:05:00

Modified files:
	net/ladvd      : Makefile distinfo 
	net/ladvd/pkg  : PLIST 
Added files:
	net/ladvd/patches: patch-src_netif_bsd_c 
Removed files:
	net/ladvd/patches: patch-configure_ac patch-src_netif_c 

Log message:
update to ladvd-1.1.1, from Paul de Weerd (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/16 09:12:16

Modified files:
	textproc/asciinema: Makefile distinfo 
	textproc/asciinema/pkg: PLIST 

Log message:
Update to asciinema-1.4.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/16 09:12:38

Modified files:
	usr.bin/tmux   : cmd-queue.c cmd-find.c 

Log message:
Tweak some logging.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/06/16 09:13:29

Modified files:
	.              : MODULES 3RDPARTY 

Log message:
update


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/16 09:25:09

Modified files:
	devel/intellij : Makefile distinfo 
	devel/intellij/files: idea 
	devel/intellij/pkg: PLIST 

Log message:
update to intellij-2017.1.4, adjust wrapper script to raise datasize-cur (like
what's done in chromium's wrapper). from maintainer Caspar Schutijser, minor
tweak to script by me.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/16 12:55:07

Modified files:
	devel/msgpack  : Makefile distinfo 
	devel/msgpack/patches: patch-CMakeLists_txt 
	                       patch-test_CMakeLists_txt 
	devel/msgpack/pkg: PLIST 
Removed files:
	devel/msgpack/patches: patch-include_msgpack_sysdep_h 
	                       patch-include_msgpack_v1_vrefbuffer_hpp 
	                       patch-include_msgpack_vrefbuffer_h 

Log message:
- update to msgpack-2.1.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/16 13:01:05

Modified files:
	graphics/birdfont: Makefile distinfo 
	graphics/birdfont/pkg: PLIST 

Log message:
update to birdfont-2.18.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/16 13:02:15

Modified files:
	x11/gnome/gjs  : Makefile distinfo 

Log message:
update to gjs-1.48.4


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/06/16 13:59:13

Modified files:
	sbin/pfctl     : pfctl.c 

Log message:
pfctl: merge identifical if conditions and void functions discarding ret values

Transform the following functions (which never return anything other than 0, and
whose return value is never used) to void:

* pfctl_clear_stats, pfctl_clear_interface_flags, pfctl_clear_rules,
pfctl_clear_src_nodes, pfctl_clear_states
* pfctl_kill_src_nodes, pfctl_net_kill_states, pfctl_label_kill_states,
pfctl_id_kill_states, pfctl_key_kill_states

inside main: merge two identical if conditions next to each other into one.

Submitted by rain1 (thanks!) with additional credit to:
- mikeb@ for pointing out we can void all _clear_ functions
- ghostyy for pointing out all _kill_ functions can be voided

OK tb@, mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/16 14:00:41

Modified files:
	usr.bin/mandoc : tbl_data.c tbl_term.c 
	regress/usr.bin/mandoc/tbl/layout: Makefile 
Added files:
	regress/usr.bin/mandoc/tbl/layout: lines-nogroff.in 
	                                   lines-nogroff.out_ascii 
	                                   lines.in lines.out_ascii 

Log message:
Multiple tbl(7) improvements:
* Do not discard data that lacks a matching layout cell but remains
within the number of columns of the table as a whole.
* Do not insert dummy data rows for any layout row starting with a
horizontal line, but only for layout rows that would discard all
the data on a matching non-empty data row.
* Print horizontal lines specified in the layout even if there is
no matching data cell.
* Improve the logic for extending vertical lines to adjacent rows,
for choosing cross marks versus line segments, and some related details.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/16 14:45:23

Modified files:
	games/xjewel   : Makefile 

Log message:
These tables now look better with mandoc than with groff,
drop USE_GROFF and bump.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/06/16 17:41:29

Modified files:
	textproc/latexmk: Makefile distinfo 
	textproc/latexmk/patches: patch-latexmk_pl 

Log message:
Update latexmk to latexmk-452c.

From Nils Reuße, OK tb@. Thanks, and sorry for the delay.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/16 18:16:20

Modified files:
	sysutils/nut   : Makefile 

Log message:
Output of mandoc looks better than output of groff not only in spite
of the large number of UNSUPP messages, but precisely because of them:
all those .sp requests inside tables are completely pointless and
only spew gratuitious blank lines with groff.  Besides, mandoc is
more reliable than groff with respect to the special characters
used when it comes to -Tascii output.

The about 25 broken .so files are already commented out in the
PLIST, and none of them are needed on OpenBSD, all the names are
in the NAME sections anyway.

So drop USE_GROFF and bump those three of the four subpackages
that contain manual pages.


CVSROOT:	/cvs
Module name:	src
Changes by:	aoyama@cvs.openbsd.org	2017/06/16 18:28:18

Modified files:
	sys/arch/luna88k/dev: if_le.c 

Log message:
Fix comment.  This gap is not only on LUNA-88K2 but also on LUNA-88K.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/16 18:42:37

Modified files:
	databases/openldap: Makefile 

Log message:
No relevant formatting differences, drop USE_GROFF and bump.
But keep textproc/groff in BUILD_DEPENDS because soelim(1)
is used at "make build" time.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/16 19:26:48

Modified files:
	usr.bin/mandoc : man_term.c 

Log message:
properly set the default indentation
such that even pages without any .SH macros get it


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/16 19:31:46

Modified files:
	shells/perlsh  : Makefile 

Log message:
almost identical formatting of very badly broken manual pages,
drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/16 19:50:10

Modified files:
	devel/sdcc     : Makefile 

Log message:
sdcc has a BDEP on boost. Spotted by nigel@ in a bulk. Change my email
since I'm here anyway.

ok nigel@


CVSROOT:	/cvs
Module name:	src
Changes by:	bcallah@cvs.openbsd.org	2017/06/16 19:55:16

Modified files:
	usr.bin/m4     : Makefile tokenizer.l 

Log message:
Don't need to link with -ll or -ly.
ok millert@ (who spotted and provided the -ll removal bits)


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/16 20:06:53

Modified files:
	lang/rust      : Makefile distinfo 
	lang/rust/patches: patch-src_bootstrap_lib_rs 
	                   patch-src_etc_rust-gdb 
	lang/rust/pkg  : PFRAG.amd64-main PFRAG.i386-main PLIST-doc 
Added files:
	lang/rust/patches: patch-src_bootstrap_flags_rs 
Removed files:
	lang/rust/patches: patch-src_bootstrap_step_rs 
	                   patch-src_tools_compiletest_src_main_rs 

Log message:
Update to rust-1.18.0

From semarie (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/16 20:08:10

Modified files:
	devel/cargo    : Makefile distinfo 
	devel/cargo/patches: patch-src_cargo_util_config_rs 

Log message:
Update to cargo-0.19.0

From semarie (maintainer) and a minor tweak by me


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/16 21:45:36

Modified files:
	sys/arch/mips64/mips64: pmap.c 

Log message:
Invalidate remote TLB entries by address range. This reduces
the number of IPIs required when removing mappings.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/17 01:04:38

Modified files:
	devel          : Makefile 
	devel/py-blessings: Makefile 
	devel/py-blessings/pkg: PLIST 

Log message:
add python3 flavor


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/17 01:07:56

Modified files:
	devel          : Makefile 
	devel/py-curtsies: Makefile 
	devel/py-curtsies/pkg: PLIST 

Log message:
add python3 flavor


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/17 01:22:23

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.107.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/17 01:23:28

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.70.


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/06/17 01:26:50

Modified files:
	net/syncthing  : Makefile distinfo 

Log message:
Update to Syncthing 0.14.30

"go ahead" edd@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/17 01:43:27

Modified files:
	games/ufoai/data: Makefile distinfo 
	games/ufoai/data/pkg: PLIST 

Log message:
Upstream re-rolled tarball with missing maps.
http://ufoai.org/forum/index.php?topic=8724.msg63142#msg63142


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/06/17 03:32:26

Modified files:
	sys/arch/i386/include: cpufunc.h 

Log message:
add rdtsc() to match amd64
ok mikeb@ mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/17 03:55:01

Modified files:
	regress/bin/ksh/edit: edit.c subr.sh 

Log message:
Pass the command to execute as an argument. Allows the edit program to be
reused.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/17 05:28:07

Modified files:
	security/glib-openssl: Makefile distinfo 
Removed files:
	security/glib-openssl/patches: patch-tls_openssl_gtlsbio_c 
	                               patch-tls_openssl_gtlsclientconnection-openssl_c 
	                               patch-tls_openssl_openssl-module_c 

Log message:
Update to glib-openssl-2.50.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 05:36:16

Modified files:
	graphics/zbar  : Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 07:05:47

Modified files:
	usr.bin/mandoc : man.c man_term.c mdoc.c 
	regress/usr.bin/mandoc/roff/esc: c.in c.out_ascii c_man.in 
	                                 c_man.out_ascii 

Log message:
correct handling of blank lines after \c


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 07:14:49

Modified files:
	net/mcabber    : Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/17 07:23:32

Modified files:
	net/neon       : Makefile distinfo 
Added files:
	net/neon/patches: patch-src_ne_openssl_c 

Log message:
update to neon-0.30.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/17 07:25:55

Modified files:
	devel          : Makefile 
	devel/bpython  : Makefile 
	devel/bpython/pkg: PLIST 

Log message:
add python3 flavor

ok bcallah@ (MAINTAINER)


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 08:55:02

Modified files:
	usr.bin/mandoc : tbl_term.c term.h term_tab.c 
	regress/usr.bin/mandoc/tbl/data: block_width.in 
	                                 block_width.out_ascii 
	regress/usr.bin/mandoc/tbl/layout: center.in center.out_ascii 
	                                   span.in span.out_ascii 
	regress/usr.bin/mandoc/tbl/mod: expand.in expand.out_ascii 
	                                font.in font.out_ascii 
	                                font.out_lint 

Log message:
tables leak tab settings to subsequent text


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 09:04:08

Modified files:
	graphics/exiv2 : Makefile 

Log message:
almost identical output, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 09:25:37

Modified files:
	math/blas      : Makefile 

Log message:
In these manual pages, the SYNOPSIS looks seriously better with mandoc
than with groff because groff inserts lots of whitespace that harms
readability.  Identical formatting outside the SYNOPSIS.

Drop USE_GROFF and bump.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/17 09:53:03

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h 

Log message:
DECLINE offers as they are deemed invalid. Decline them at the
first problem rather than continuing to look for other reasons
to decline them. Nuke is_invalid field since it is now unused.
More informative log message when a lease is determined to be
unacceptable.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 10:47:29

Modified files:
	usr.bin/mandoc : man_macro.c man_validate.c 
	regress/usr.bin/mandoc/man/TP: Makefile 
Added files:
	regress/usr.bin/mandoc/man/TP: indent.in indent.out_ascii 

Log message:
if .in is used inside the .TP head, it's always relative


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 10:51:03

Modified files:
	x11/gbdfed     : Makefile 

Log message:
identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 10:58:24

Modified files:
	misc/brltty    : Makefile 

Log message:
almost identical formatting, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/17 10:58:55

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h 

Log message:
We accept either the first offer received, or an offer for the
current address if one arrives inside select_timeout. So there
is no need to keep a list of received offers. Just keep the
best one and DECLINE the rest. Nuke now unused 'offered_leases'
TAILQ.

Also fixes the oddity that the *last* offer for the current
address is taken rather than the *first*.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/17 11:10:26

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h 

Log message:
Rename struct interface_info field 'new' to clearer 'offer'.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 11:22:04

Modified files:
	comms/hylafax  : Makefile 

Log message:
No important formatting differences, drop USE_GROFF and bump.
Actually, mandoc output is slightly more readable because it
handles the footnote markers (superscript 1, 2, 3) better.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 11:27:28

Modified files:
	devel/libfmt   : Makefile 

Log message:
no relevant formatting differences, drop USE_GROFF and bump


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 11:45:23

Modified files:
	net/argus-clients: Makefile 

Log message:
Drop USE_GROFF and bump.

There is a bit less bold face with mandoc because with mandoc, .in
terminates .ft, but in many of these cases, i doubt that the author
even intended so much bold face, and the mandoc output looks better.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/17 12:14:47

Modified files:
	bin/csh        : file.c 

Log message:
Move win variable.

ok deraadt@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 13:17:41

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete the -d option and the "use .Fn or .Xr for functions" check,
both covered by mandoc now; OK jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/17 13:20:30

Modified files:
	sys/dev/ic     : vga.c 

Log message:
The fonts we are looping through in vga_selectfont() are the builtin
font which is using the IBM encoding, and some potentially loaded fonts
which are either IBM or ISO encoded.

Therefore the condition checked by vga_valid_font() is always true, and
we can remove it. Thanks to miod@ for pointing this out.

OK tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/17 13:27:54

Modified files:
	usr.sbin/wsfontload: wsfontload.c 

Log message:
Since WSFONT_NAME_SIZE was switched from 16 to 32, account for the
change in wsfontload as well: tweak spacing and printf format string.

OK deraadt@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/17 14:23:17

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Shuffle dhcp[offer|ack|nak]() functions together for easy reference.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/06/17 15:58:59

Modified files:
	x11/kde4/libs  : Makefile 
Added files:
	x11/kde4/libs/patches: patch-kio_kio_kautomount_h 

Log message:
Fix upcoming breakage in py-kde4 due to upcoming devel/py-sip update.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 16:40:27

Modified files:
	usr.bin/mandoc : man_validate.c mandoc.1 mandoc.h 
	                 mdoc_validate.c read.c roff.c roff.h 

Log message:
style message about missing RCS ids; inspired by mdoclint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 16:46:26

Modified files:
	regress/usr.bin/mandoc/char/space: esct-man.out_lint 
	                                   esct-mdoc.out_lint 
	                                   tab-man.out_lint tab.out_lint 
	                                   trailing-mdoc.out_lint 
	regress/usr.bin/mandoc/char/unicode: input.out_lint 
	                                     invalid.out_lint 
	regress/usr.bin/mandoc/eqn/define: infinite.out_lint 
	                                   invalid.out_lint 
	regress/usr.bin/mandoc/eqn/over: noarg.out_lint 
	regress/usr.bin/mandoc/man/B: args.out_lint blank.out_lint 
	regress/usr.bin/mandoc/man/IP: empty.out_lint 
	regress/usr.bin/mandoc/man/OP: args.out_lint 
	regress/usr.bin/mandoc/man/PD: args.out_lint 
	regress/usr.bin/mandoc/man/PP: args.out_lint empty.out_lint 
	regress/usr.bin/mandoc/man/RS: REarg.out_lint empty.out_lint 
	                               lonelyRE.out_lint noRE.out_lint 
	regress/usr.bin/mandoc/man/SH: broken.out_lint 
	                               broken_eline.out_lint 
	                               empty_before.out_lint 
	                               noarg.out_lint 
	regress/usr.bin/mandoc/man/SS: broken.out_lint 
	                               broken_eline.out_lint 
	                               noarg.out_lint 
	regress/usr.bin/mandoc/man/TH: case.out_lint nobody.out_lint 
	                               sixargs.out_lint 
	regress/usr.bin/mandoc/man/TP: broken.out_lint double.out_lint 
	                               eof.out_lint 
	regress/usr.bin/mandoc/man/TS: break.out_lint vspace.in 
	                               vspace.out_ascii 
	regress/usr.bin/mandoc/man/UR: args.out_lint noUE.out_lint 
	regress/usr.bin/mandoc/man/blank: afterSH.out_lint 
	                                  afterSS.out_lint line.out_lint 
	regress/usr.bin/mandoc/man/nf: args.out_lint dupe.out_lint 
	regress/usr.bin/mandoc/mdoc/Ad: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/An: break.out_lint 
	regress/usr.bin/mandoc/mdoc/Aq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Ar: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/At: invalid.out_lint 
	regress/usr.bin/mandoc/mdoc/Bd: badargs.out_lint 
	                                beforeNAME.out_lint 
	                                blank.out_lint break.out_lint 
	                                broken.out_lint nested.out_lint 
	                                unclosed.out_lint 
	regress/usr.bin/mandoc/mdoc/Bf: badargs.out_lint break.out_lint 
	                                broken.out_lint 
	                                multiargs.out_lint 
	regress/usr.bin/mandoc/mdoc/Bk: badarg.out_lint broken.out_lint 
	regress/usr.bin/mandoc/mdoc/Bl: badargs.out_lint bareIt.out_lint 
	                                bareTa.out_lint break.out_lint 
	                                breakingIt.out_lint 
	                                broken.out_lint column.out_lint 
	                                empty.out_lint 
	                                emptyhead.out_lint 
	                                emptyitem.out_lint 
	                                emptytag.out_lint noIt.out_lint 
	                                notype.out_lint tag.out_lint 
	regress/usr.bin/mandoc/mdoc/Brq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Bx: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Cd: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Cm: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/D1: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Db: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Dd: badarg.out_lint dupe.out_lint 
	                                late.out_lint long.out_lint 
	                                manarg.out_lint noarg.out_lint 
	                                order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dl: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Dq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Dt: badsec.out_lint case.out_lint 
	                                dupe.out_lint fourargs.out_lint 
	                                late.out_lint missing.out_lint 
	                                noarg.out_lint nobody.out_lint 
	                                nosec.out_lint order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dv: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Em: noarg.out_lint punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Eo: break.out_lint obsolete.out_lint 
	                                unclosed.out_lint 
	regress/usr.bin/mandoc/mdoc/Er: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ev: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ex: noname.out_lint nostd.out_lint 
	regress/usr.bin/mandoc/mdoc/Fd: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Fl: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Fo: noarg.out_lint nohead.out_lint 
	                                obsolete.out_lint punct.out_lint 
	                                warn.out_lint 
	regress/usr.bin/mandoc/mdoc/Ic: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/In: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Lb: badargs.out_lint 
	regress/usr.bin/mandoc/mdoc/Li: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Lk: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ms: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Mt: simple.out_lint 
	regress/usr.bin/mandoc/mdoc/Nd: broken.out_lint noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Nm: badNAME.out_lint 
	                                badNAMEuse.out_lint 
	                                break.out_lint broken.out_lint 
	                                punct.out_lint 
	regress/usr.bin/mandoc/mdoc/No: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Ns: position.out_lint 
	regress/usr.bin/mandoc/mdoc/Oo: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Op: break.out_lint broken.out_lint 
	                                punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Os: dupe.out_lint late.out_lint 
	regress/usr.bin/mandoc/mdoc/Pa: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Pf: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Pp: arg.out_lint 
	regress/usr.bin/mandoc/mdoc/Qq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Rs: allch.out_lint args.out_lint 
	                                empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Rv: noname.out_lint nostd.out_lint 
	regress/usr.bin/mandoc/mdoc/Sh: badNAME.out_lint before.out_lint 
	                                empty.out_lint 
	                                emptyNAME.out_lint 
	                                first.out_lint nohead.out_lint 
	                                order.out_lint 
	                                orderNAME.out_lint 
	                                parbefore.out_lint 
	                                parborder.out_lint 
	                                punctNAME.out_lint 
	                                subbefore.out_lint 
	regress/usr.bin/mandoc/mdoc/Sm: badarg.out_lint twoarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Sq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/St: badargs.out_lint call.out_lint 
	regress/usr.bin/mandoc/mdoc/Sx: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Sy: noarg.out_lint punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Tn: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ud: arg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ux: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Va: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Vt: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Xr: args.out_lint 
	regress/usr.bin/mandoc/mdoc/blank: comment.out_lint 
	                                   line.out_lint list.out_lint 
	regress/usr.bin/mandoc/mdoc/break: brokenbreaker.out_lint 
	                                   notopen.out_lint 
	                                   tail.out_lint twice.out_lint 
	                                   two.out_lint 
	regress/usr.bin/mandoc/roff/args: man.in man.out_ascii 
	                                  man.out_lint mdoc.out_lint 
	                                  roff.in roff.out_ascii 
	                                  roff.out_lint 
	regress/usr.bin/mandoc/roff/br: args.out_lint 
	regress/usr.bin/mandoc/roff/cc: basic.out_lint 
	regress/usr.bin/mandoc/roff/cond: close.out_lint if.out_lint 
	regress/usr.bin/mandoc/roff/de: escname.out_lint indir.out_lint 
	                                infinite.out_lint 
	regress/usr.bin/mandoc/roff/esc: B.out_lint h.out_lint 
	                                 ignore.out_lint l.out_lint 
	                                 w.out_lint 
	regress/usr.bin/mandoc/roff/ft: badargs-mdoc.out_lint 
	                                badargs.out_lint 
	regress/usr.bin/mandoc/roff/ig: basic.out_lint 
	regress/usr.bin/mandoc/roff/it: badarg.out_lint 
	regress/usr.bin/mandoc/roff/nr: divzero.out_lint 
	                                escname.out_lint 
	regress/usr.bin/mandoc/roff/sp: badargs-man.out_lint 
	regress/usr.bin/mandoc/roff/string: escape.in escape.out_ascii 
	                                    name.out_lint zerolength.in 
	                                    zerolength.out_ascii 
	regress/usr.bin/mandoc/roff/tr: args.out_lint 
	regress/usr.bin/mandoc/tbl/data: block_unclosed.out_lint 
	                                 empty.out_lint 
	regress/usr.bin/mandoc/tbl/layout: center.in center.out_ascii 
	                                   complex.out_lint 
	                                   empty.out_lint numbers.in 
	                                   numbers.out_ascii span.in 
	                                   span.out_ascii 
	regress/usr.bin/mandoc/tbl/macro: man.in man.out_ascii 
	                                  man.out_lint nested.in 
	                                  nested.out_ascii 
	                                  nested.out_lint 
	regress/usr.bin/mandoc/tbl/mod: badfont.out_lint font.out_lint 
	regress/usr.bin/mandoc/tbl/opt: box.in box.out_ascii 
	                                invalid.out_lint 

Log message:
churn related to the new style message about RCS ids


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/17 17:06:43

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h read.c roff.c 

Log message:
style message about duplicate RCS ids; inspired by mdoclint


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/18 05:05:20

Modified files:
	sys/arch/octeon/octeon: machdep.c 
	sys/arch/octeon/include: intr.h 

Log message:
Drop unnecessary call to octeon_setintrmask(). The function gets called
by the splx() handler.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 05:21:39

Modified files:
	sbin/dhclient  : dhcpd.h 

Log message:
Nuke unused pointer to non-existant struct.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 05:26:14

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Make 'DEBUG' compile again.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/06/18 06:03:47

Modified files:
	usr.sbin/ifstated: ifstated.c ifstated.h log.c parse.y 
Added files:
	usr.sbin/ifstated: log.h 

Log message:
update log.c in ifstated to the same used in bgpd etc.
Done by Rob Pierce <rob AT 2keys DOT ca>, thanks


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/18 06:48:13

Modified files:
	sys/arch/octeon/dev: octeon_intr.c 
	sys/arch/octeon/octeon: machdep.c 

Log message:
Move IPI control entry points into octeon_intr.c.
Needed by upcoming driver changes.


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/06/18 07:21:48

Modified files:
	sys/dev/wscons : wsmousevar.h wstpad.c 

Log message:
Remove remnants of old versions.


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/06/18 07:34:03

Modified files:
	sys/dev/pckbc  : pms.c 

Log message:
pms/alps: configure compat mode


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/18 07:58:45

Modified files:
	sys/arch/octeon/conf: GENERIC RAMDISK files.octeon 
	sys/arch/octeon/dev: octeon_intr.c octeon_iobus.c 
	sys/arch/octeon/include: intr.h 
Added files:
	sys/arch/octeon/dev: octciu.c 

Log message:
Split octeon interrupt code into a glue layer and a CIU driver.
This makes possible to add drivers for other interrupt controllers
on the platform.

The glue layer has been derived from arm64/armv7.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 08:54:19

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Nuke stray and misleading comment.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/18 08:56:03

Modified files:
	audio/mp3blaster: Makefile distinfo 
	audio/mp3blaster/patches: patch-mp3blaster_1 
	                          patch-mpegsound_mpegsound_h 
	                          patch-mpegsound_oggplayer_cc 
	                          patch-src_splay_cc 
Removed files:
	audio/mp3blaster/patches: patch-nmixer_1 patch-src_global_cc 

Log message:
Update to 3.2.6 -- bug fixes collected over the last 8 years.
ok rsadowski@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/18 09:56:30

src/regress/usr.bin/mandoc/roff/rn

Update of /cvs/src/regress/usr.bin/mandoc/roff/rn
In directory cvs.openbsd.org:/tmp/cvs-serv5977/rn

Log Message:
Directory /cvs/src/regress/usr.bin/mandoc/roff/rn added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 10:37:19

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Drop (int) casts of (time_t - time_t) calculations that
are assigned to an int variable.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/18 10:55:02

Modified files:
	devel/bpython  : Makefile 

Log message:
Disable tests until py-twisted+deps have a python3 flavor.
Unbreaks sqlports.
diff from jasper@
ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/18 10:55:49

Modified files:
	games/wtf      : Makefile distinfo 

Log message:
Update to 20170614 and take MAINTAINER.
ok benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 11:01:46

Modified files:
	sbin/dhclient  : dispatch.c dhcpd.h dhclient.c 

Log message:
Convert last set_timeout() use to set_timeout_interval() and
then remove set_timeout() and rename set_timeout_interval() to
set_timeout().


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/18 11:35:40

Modified files:
	usr.bin/mandoc : roff.c 
	regress/usr.bin/mandoc/roff: Makefile 
	regress/usr.bin/mandoc/roff/cond: string.in string.out_ascii 
	regress/usr.bin/mandoc/roff/de: append.in append.out_ascii 
	regress/usr.bin/mandoc/roff/string: Makefile 
Added files:
	regress/usr.bin/mandoc/roff/rn: Makefile append.in 
	                                append.out_ascii 
	regress/usr.bin/mandoc/roff/string: std.in std.out_ascii 
	                                    std.out_lint 

Log message:
Implement appending to standard man(7) and mdoc(7) macros with .am.

With roff_getstrn(), provide finer control which definitions
can be used for what:
* All definitions can be used for .if d tests and .am appending.
* User-defined for \* expansion, .dei expansion, and macro calling.
* Predefined for \* expansion.
* Standard macros, original or renamed, for macro calling.

Several related improvements while here:
* Do not return string table entries that have explicitly been removed.
* Do not create a rentab entry when trying to rename a non-existent macro.
* Clear an existing rentab entry when the external interface
roff_setstr() is called with its name.
* Avoid trailing blanks in macro lines generated from renamed
and from aliased macros.
* Delete the duplicate __m*_reserved[] tables, just use roff_name[].


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/18 11:49:44

Modified files:
	regress/bin/ksh/edit: edit.c 

Log message:
Don't write input if ICANON is enabled. Also, write one byte at a time.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/18 12:32:52

Modified files:
	databases/sqlite3: Makefile 

Log message:
Bugfix update to sqlite 3.19.3, required by gecko 55.

Fixes a single bug, see https://sqlite.org/src/info/fda22108 for details.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/18 13:02:59

Modified files:
	databases/sqlite3: Makefile distinfo 

Log message:
When bumping PKGNAME, make sure that DISTNAME matches and that we match
the new distfile..

Sigh... shouldnt commit when totally tired.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/18 14:24:47

Modified files:
	mail/mozilla-thunderbird: Makefile distinfo 
	mail/thunderbird-i18n: Makefile.inc distinfo 

Log message:
Update to thunderbird 52.2.0.

See https://www.mozilla.org/en-US/thunderbird/52.2.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-17/


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 14:44:03

Modified files:
	devel/py-uncompyle6: Makefile distinfo 
	devel/py-uncompyle6/pkg: PLIST 

Log message:
Update to py-uncompyle6 2.11.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 14:52:50

Modified files:
	devel/py-entrypoints: Makefile distinfo 
Removed files:
	devel/py-entrypoints/patches: patch-setup_py 

Log message:
Update to py-entrypoints 0.2.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 14:57:53

Modified files:
	devel/py-hypothesis: Makefile distinfo 

Log message:
Update to py-hypothesis 3.11.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 15:05:12

Modified files:
	devel/py-setuptools_scm: Makefile distinfo 

Log message:
Update to py-setuptools_scm 1.15.6


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 15:08:15

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c 

Log message:
Move the timeout information into struct interface_info with
the rest of the dhcp state. One less struct (dhcp_timeout) to
worry about, one less field (ifi) to keep track of.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	espie@cvs.openbsd.org	2017/06/18 15:09:07

Modified files:
	app/xterm      : Makefile 
	lib/fontconfig : Makefile 
	lib/fontconfig/fc-case: Makefile 
	lib/fontconfig/fc-glyphname: Makefile 
	lib/fontconfig/fc-lang: Makefile 
	lib/fontconfig/src: Makefile 
	lib/freetype   : Makefile 

Log message:
let X directories build even if you forget depend.
- use BUILDFIRST
- have fontconfig use normal 'all' targets to make sure its files are built
- explicitly document the fontconfig lib order

okay matthieu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 15:41:36

Modified files:
	devel/py-isort : Makefile distinfo 
	devel/py-isort/pkg: PLIST 

Log message:
Update to py-isort 4.2.15


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 15:43:20

Modified files:
	devel/py-test  : Makefile distinfo 

Log message:
Update to py-test 3.1.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/18 15:58:45

Modified files:
	textproc/py-chardet: Makefile distinfo 

Log message:
Update to py-chardet 3.0.4


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/18 19:09:09

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Erroneous host names in various options should be ignored
and not cause the lease to be declined. Restore inadvertantly
changed behaviour. Tweak logic to also ignore invalid
host names in domain-search.

Reported by Christer Solskogen via misc@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/18 21:06:26

Modified files:
	lib/libc       : Symbols.list shlib_version 
	lib/libc/gen   : Makefile.inc 
	lib/libc/stdlib: malloc.c 
	sys/sys        : tree.h 
	usr.sbin/procmap: Makefile 
Added files:
	lib/libc/gen   : tree.c 
	lib/libc/hidden/sys: tree.h 

Log message:
port the RBT code to userland by making it part of libc.

src/lib/libc/gen/tree.c is a copy of src/sys/kern/subr_tree.c, but with
annotations for symbol visibility. changes to one should be reflected
in the other.

the malloc debug code that uses RB code is ported to RBT.

because libc provides the RBT code, procmap doesn't have to reach into
the kernel and build subr_tree.c itself now.

mild enthusiasm from many
ok guenther@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/18 22:48:49

Modified files:
	security/nss   : Makefile distinfo 
	security/nss/pkg: PLIST 

Log message:
Update to nss 3.31, required by gecko 55.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.31_release_notes


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/19 00:04:16

Modified files:
	games/tetris   : tetris.6 

Log message:
No need for a conditional to choose between nroff and troff.

ok jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/19 00:05:33

Modified files:
	usr.bin/who    : who.1 

Log message:
Mark up "am i" as Cm, not Ar.

While here, remove a leftover Tn macro.

ok jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/19 02:35:24

Modified files:
	share/mk       : bsd.own.mk 

Log message:
g/c ASPICFLAG.

This used to be necessary a long time ago in the... gcc 2.95 days.

from miod@


CVSROOT:	/cvs
Module name:	src
Changes by:	gilles@cvs.openbsd.org	2017/06/19 02:35:56

Modified files:
	usr.sbin/smtpd : smtp_session.c 

Log message:
fix descriptor leak in the smtp congestion mechanism

diff from Henri Kemppainen; ok gilles@ eric@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/19 02:38:03

Modified files:
	x11/gnome/libxklavier: Makefile distinfo 
	x11/gnome/libxklavier/pkg: PLIST 

Log message:
Update to libxklavier 5.4.

Upstream is more or less dead/dormant, but
fedora/gentoo/ubuntu/archlinux ship this version, coming from a new
upstream, with only 'A couple of introspection fixes' in the changelog.

ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/19 03:12:04

Modified files:
	databases/openldap: Makefile 
	databases/openldap/pkg: PLIST-main PLIST-server 

Log message:
Some manpages were in the wrong subpackage; move to the correct one
and update @conflict.

This is an old bug, but only noticed after the switch to mandoc which
means that rather than rendering the manuals with groff (dereferencing
symlinks *before* packaging, so all files were present), the files
were installed directly, resulting in symlinks in the package. This
resulted in -client having symlinks to files which are in -main,
causing problems with pkg_add -u as reported by aja@.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/19 03:36:27

Modified files:
	sys/dev/ic     : re.c 

Log message:
Do not call txeof nor rxeof in the watchdog routine.

They cannot be serialized with the interrupt routine and are
useless because the driver is reinitialized right after.

Pointed by and ok mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/19 03:42:45

Modified files:
	sys/net        : radix.c radix.h 

Log message:
Make rn_match() and rn_lookup() safe to be used in parrallel, when
different trees are manipulated:

- Stop writting to global variables
- Use a buffer on the stack
- Anotate read/only arrays as such

While here introduce a SALEN() macro and assert that the KERNEL_LOCK()
is held when a tree is modified.

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/19 03:53:51

Modified files:
	devel/jansson  : Makefile distinfo 

Log message:
update to jansson-2.10


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/19 04:22:05

Modified files:
	infrastructure/man/man1: dpb.1 

Log message:
ssh protocol 1 is dead, don't even mention it


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/19 05:00:18

Modified files:
	sys/dev/pci/drm/i915: i915_drv.c 

Log message:
Add a handler for the WSDISPLAYIO_GINFO ioctl in inteldrm, allowing
to retrieve basic information about a framebuffer display.

OK visa@, tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/19 05:03:30

Modified files:
	sys/dev/pci/drm/radeon: radeon_kms.c 

Log message:
Add a handler for the WSDISPLAYIO_GINFO ioctl in radeondrm, allowing
to retrieve basic information about a framebuffer display.

OK visa@, deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/19 06:05:23

Modified files:
	databases/evolution-data-server: Makefile distinfo 

Log message:
Update to evolution-data-server-3.24.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/19 06:05:45

Modified files:
	mail/evolution : Makefile distinfo 
Removed files:
	mail/evolution/patches: 
	                        patch-src_modules_cal-config-weather_evolution-cal-config-weather_c 

Log message:
Update to evolution-3.24.3.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/19 06:05:59

Modified files:
	mail/evolution-ews: Makefile distinfo 

Log message:
Update to evolution-ews-3.24.3.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/19 06:53:50

Modified files:
	usr.bin/mandoc : mdoc_html.c 

Log message:
Fix a regression in the previous revision:
When there is no link description, reuse the URI.
Reported by tj@ and tb@.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/19 07:00:54

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	visa@cvs.openbsd.org	2017/06/19 07:27:00

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
ASPICFLAG is no longer set by bsd.own.mk. Remove it from bsd.port.mk.

OK mpi@, jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/19 07:31:04

Modified files:
	sys/arch/octeon/dev: octciu.c 

Log message:
Use a consistent naming for fdt attach arguments.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/19 07:45:22

Modified files:
	sys/arch/octeon/dev: octrtc.c 
	sys/arch/octeon/include: octeonvar.h 

Log message:
There is no RTC on the E1000 board.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/19 07:54:55

Modified files:
	sys/arch/octeon/octeon: machdep.c 

Log message:
Use type register_t instead of __register_t. Drop unneeded __unused.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/19 08:25:53

Modified files:
	sys/arch/octeon/octeon: machdep.c 

Log message:
Use octeon_model_family() for SoC identification as in the rest
of the code.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/19 08:47:27

Modified files:
	sys/arch/octeon/include: octeonreg.h 
	sys/arch/octeon/octeon: machdep.c 

Log message:
Fix the timecounter register on CN72xx/CN73xx.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/19 11:00:16

Modified files:
	sys/netinet    : ip_input.c ip_mroute.c 
	sys/netinet6   : ip6_input.c 

Log message:
The IP multicast forward functions return an errno, call the variable
error.  Make the ip_mforward() return value consistent.  Simplify
the caller logic in ipv6_input() like in IPv4.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/19 11:11:40

Modified files:
	x11/xloadimage : Makefile 
	x11/xloadimage/pkg: PLIST 

Log message:
Mark this @conflict with upcoming x11/xli port and bump.
ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/19 11:14:19

Log message:
    Import x11/xli, a very lightweight image viewer for X11.
    ok sthen@
    
    xli is an image display program for X. It is a fork of xloadimage.
    
    A variety of options are available to modify images prior to viewing.
    These options include clipping, dithering, depth reduction, zoom (either
    X or Y axis independently or both at once), brightening or darkening,
    input gamma correction, and image merging. When applicable, these
    options are done automatically (eg. a color image to be displayed on a
    monochrome screen will be dithered automatically). A utility (xlito) is
    provided that allows these viewing options to be appended to the image
    files.
    
    xli can also be used to set the X background image if called as xsetbg.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170619
    
    N ports/x11/xli/Makefile
    N ports/x11/xli/distinfo
    N ports/x11/xli/patches/patch-xli_h
    N ports/x11/xli/patches/patch-xlito_c
    N ports/x11/xli/pkg/PLIST
    N ports/x11/xli/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/19 11:15:26

Modified files:
	x11            : Makefile 

Log message:
+xli


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/19 11:35:04

Modified files:
	usr.sbin/config: main.c 

Log message:
delete accidental blank line


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/19 11:58:49

Modified files:
	share/man/man9 : mbuf.9 
	sys/sys        : mbuf.h 
	sys/net        : bsd-comp.c if_gif.c pf_norm.c ppp-deflate.c 
	sys/netinet    : igmp.c ip_carp.c ip_ether.c ip_icmp.c 
	                 ip_input.c ip_ipip.c ipsec_input.c 
	sys/netinet6   : ip6_input.c 
	sys/nfs        : nfs_socket.c 

Log message:
When dealing with mbuf pointers passed down as function parameters,
bugs could easily result in use-after-free or double free.  Introduce
m_freemp() which automatically resets the pointer before freeing
it.  So we have less dangling pointers in the kernel.
OK krw@ mpi@ claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/19 12:26:30

Modified files:
	graphics/py-opengl: Makefile distinfo 
	graphics/py-opengl/patches: patch-OpenGL___init___py 
	graphics/py-opengl/pkg: PLIST 

Log message:
Update to py-opengl 3.1.0.

While here add a python3 FLAVOR. Disable tests with the latter as it
would require a python3 FLAVOR for pygame.

Tested by fcambus@ and matthieu@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/19 12:27:05

Modified files:
	graphics       : Makefile 

Log message:
+py-opengl,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/19 12:35:05

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Terminate pledge log(9) with newline.  This fixes dmesg(8) output.
found by regress/sys/kern/pledge/generic; OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/19 12:36:13

Modified files:
	share/man/man9 : mbuf.9 

Log message:
missing letter in previous;


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/19 13:28:35

Modified files:
	sbin/dhclient  : bpf.c dhclient.c dispatch.c parse.c 

Log message:
Various KNF nits.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/19 13:53:16

Modified files:
	devel/py-simplejson: Makefile distinfo 

Log message:
Update to py-simplejson 3.11.0


CVSROOT:	/cvs
Module name:	src
Changes by:	friehm@cvs.openbsd.org	2017/06/19 13:55:57

Modified files:
	usr.sbin/ospf6ctl: ospf6ctl.c 
	usr.sbin/ospf6d: kroute.c ospf6d.h rde.c 

Log message:
Import route priority support from ospfd to ospf6d.
Also remove the RTF_UP flag from hdr.rtm_flags in send_rtmsg() since
ospfd and bgpd don't set the flag.

OK bluhm@ claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	natano@cvs.openbsd.org	2017/06/19 13:57:07

Modified files:
	audio/clementine: Makefile 

Log message:
On startup clementine errors out with an error message, due to
devel/sqlite3 not being built with support for fts3_tokenizer().

Let's use their shipped version sqlite instead of the system version
to circumvent that issue.

ok zhuk


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/19 15:02:11

Modified files:
	net/openvpn-auth-ldap: Makefile 
	net/openvpn-auth-ldap/patches: patch-src_Makefile_in 
	                               patch-tests_Makefile_in 
Added files:
	net/openvpn-auth-ldap/patches: patch-aclocal_m4 
	                               patch-src_TRObject_h 
	                               patch-src_TRObject_m 
	                               patch-src_auth-ldap_m 
	                               patch-tests_TRHash_m 
	                               patch-tests_tests_c 
	                               patch-tests_tests_h 

Log message:
Use the modern libobjc2 runtime from x11/gnustep/libbojc2, make
use of the gnustep module.

Patches for the modern runtime from Debian (pointer to it from jca@)

Additionally, some failing tests, due to using the modern runtime, are disabled

The package is currently broken, and this is an attempt to fix it, and
give people a chance to actually test it.

proposed to go ahead by sthen@, also OK espie@, jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/19 16:50:50

Modified files:
	etc            : rc 
	sys/arch/amd64/include: biosvar.h 
	sys/arch/amd64/stand/boot: Makefile 
	sys/arch/amd64/stand/efiboot: Makefile.common 
	sys/arch/amd64/stand/libsa: diskprobe.c 
	sys/arch/i386/include: biosvar.h 
	sys/arch/i386/stand/boot: Makefile 
	sys/arch/i386/stand/libsa: diskprobe.c 
	sys/stand/boot : boot.c 

Log message:
As early as possible, create a link /bsd.booted to the /bsd kernel we
presume we booted from.  If you boot from another kernel, we cannot help
you later with hibernate, sorry -- The kernel does not get a useable
filename from the bootblocks.

In the bootblocks, detect a live hibernate signature and boot from
/bsd.booted instead.

with yasuoka, lots of discussion with mlarkin, ok tom


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/19 17:03:35

Modified files:
	devel/py-futures: Makefile distinfo 
	devel/py-futures/pkg: PLIST 

Log message:
Update to 3.1.1
ok shadchin@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/19 17:44:11

Modified files:
	share/man/man9 : Makefile 
Added files:
	share/man/man9 : pool_cache_init.9 

Log message:
talk about the per cpu caches in pools by documenting pool_cache_init()

this describes what the per cpu caches do, and has some bonus doco about
what the sysctls provide thanks to a suggestion from mikeb@

some tweaks are coming, but this is mostly right.

ok jmc@ schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/19 17:45:13

Modified files:
	share/man/man9 : pool_cache_init.9 

Log message:
s/can be from process context/can be called from process context/

from schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/19 17:45:42

Modified files:
	share/man/man9 : pool_cache_init.9 

Log message:
s/pool_set_hardlimit/pool_sethardlimit/

from schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/19 17:48:49

Modified files:
	share/man/man9 : pool_cache_init.9 

Log message:
s/a active/an active/


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/19 17:57:12

Modified files:
	sys/sys        : pool.h 
	sys/kern       : subr_pool.c 

Log message:
dynamically scale the size of the per cpu cache lists.

if the lock around the global depot of extra cache lists is contented
a lot in between the gc task runs, consider growing the number of
entries a free list can hold.

the size of the list is bounded by the number of pool items the
current set of pages can represent to avoid having cpus starve each
other. im not sure this semantic is right (or the least worst) but
we're putting it in now to see what happens.

this also means reality matches the documentation i just committed
in pool_cache_init.9.

tested by hrvoje popovski and amit kulkarni
ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/19 19:59:12

Modified files:
	usr.sbin/vmd   : virtio.h 

Log message:
Revert a previous commit that increased the virtio queue size since it
appears to be causing some instability.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/06/19 22:37:17

Modified files:
	share/man/man9 : pool_cache_init.9 

Log message:
fix some nits
ok dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/19 23:34:41

Modified files:
	sys/arch/amd64/amd64: identcpu.c vmm.c 
	sys/arch/amd64/include: cpu.h specialreg.h 

Log message:
SVM: better cleanbits handling. Fixes an issue on Bulldozer CPUs causing
#TF exceptions during guest VM boot

ok brynet


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/20 00:25:01

Modified files:
	sys/arch/amd64/amd64: vmm.c 
	sys/arch/amd64/include: specialreg.h 

Log message:
remove some magic numbers in the flush-by-asid code and check if the CPU
supports that feature before we try to use it.

discussed with deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/20 00:37:30

Modified files:
	distrib/sets/lists/comp: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/20 00:38:53

Modified files:
	devel/nspr     : Makefile distinfo 
	devel/nspr/patches: patch-nspr_configure_in 
	                    patch-nspr_pr_src_misc_prnetdb_c 

Log message:
Update to nspr 4.15, required by fx 55.0b3.

See https://groups.google.com/forum/#!topic/mozilla.dev.tech.nspr/gMvzfJxmvn8

Add a chunk to patch-nspr_configure_in to workaround #1374538.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 01:18:19

Modified files:
	net/libepc     : Makefile distinfo 
	net/libepc/patches: patch-tests_framework_c 
	net/libepc/pkg : PLIST 
Added files:
	net/libepc/patches: patch-examples_simple-publisher_c 

Log message:
Update to libepc-0.4.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 01:27:03

Modified files:
	devel/meson    : Makefile distinfo 

Log message:
Update to meson-0.41.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 01:29:18

Modified files:
	security/py-libnacl: Makefile distinfo 
	security/py-libnacl/pkg: PLIST 

Log message:
Update to py-libnacl-1.5.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/20 01:32:56

Modified files:
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 

Log message:
Better document the :s ex command and its variants.

ok jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 01:33:55

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.71.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 01:34:06

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.108.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/20 03:03:39

Modified files:
	sys/net        : radix.c 

Log message:
Remove KERNEL_LOCK() asserts.

pf table code iterates on a radix tree and currently relies on the
NET_LOCK() to do the serialization.

Found the hardway by jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/20 03:10:04

Modified files:
	sys/kern       : uipc_socket.c 

Log message:
Convert sodidle() to timeout_set_proc(9), it needs a process context
to grab the rwlock.

Problem reported by Rivo Nurges.

ok bluhm@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/20 04:10:43

Modified files:
	faq/pf         : ftp.html 

Log message:
since 5.3, tftpproxy is started as a daemon, not via inetd.
while there, sync the pf rules with tftp-proxy(8) and fix a typo.

original diff from martin ziemer on misc, thanks!
help and ok sthen


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/20 05:12:13

Modified files:
	sys/net        : if_gif.c 
	sys/netinet    : ip_ipip.c ip_ipip.h 

Log message:
Do not use the interface pointer after if_put().  Rename ipip_input_gif()
to ipip_input_if() and always pass the ifp.  Only dump the packet
to bpf if we are called with a gif(4) interface.
OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 05:48:53

Modified files:
	multimedia/gstreamer1: Makefile.inc 
	multimedia/gstreamer1/core: Makefile distinfo 
	multimedia/gstreamer1/core/pkg: PLIST 
	multimedia/gstreamer1/plugins-bad: Makefile distinfo 
	multimedia/gstreamer1/plugins-base: Makefile distinfo 
	multimedia/gstreamer1/plugins-good: distinfo 
	multimedia/gstreamer1/plugins-libav: distinfo 
	multimedia/gstreamer1/plugins-libav/patches: 
	                                             patch-gst-libs_ext_libav_configure 
	multimedia/gstreamer1/plugins-ugly: distinfo 
	multimedia/gstreamer1/py-gstreamer: distinfo 

Log message:
Update the gstreamer1 gang to version 1.12.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	tom@cvs.openbsd.org	2017/06/20 06:39:20

Modified files:
	sys/arch/amd64/include: biosvar.h 
	sys/arch/i386/include: biosvar.h 

Log message:
Fix a couple of comment typos in amd64 and i386 biosvar.h


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/20 07:51:46

Modified files:
	sys/net80211   : ieee80211.c 

Log message:
Initialize the link state of a wireless interface to DOWN when the
interface is attached to the net80211 layer. Prevents confusion
in cases where drivers forget to initialize the link state.
ok mpi@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/20 07:52:40

Modified files:
	sys/dev/pci    : if_iwm.c if_iwmvar.h 

Log message:
Remove the IWM_FLAG_HW_INITED flag from iwm(4). This flag was redundant.
The IFF_RUNNING flag in struct ifnet serves the same purpose.
ok mpi@ kettenis@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	gerhard@cvs.openbsd.org	2017/06/20 08:11:46

Modified files:
	sys/kern       : kern_sysctl.c 

Log message:
Do not touch file pointers for which FILE_IS_USABLE() is false.
They're might not be fully constructed.

ok mpi@ deraadt@ bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/20 08:59:39

Modified files:
	security/ikeman: Makefile 
Added files:
	security/ikeman/patches: patch-log_c 

Log message:
includes cleanup for ikeman's log.c; notably removes an unnecessary
sys/tree.h that was breaking build following RBT


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/06/20 09:14:10

Modified files:
	net/olsrd      : Makefile 
	net/olsrd/patches: patch-src_bsd_kernel_routes_c 
	                   patch-src_bsd_net_c 
Added files:
	net/olsrd/patches: patch-make_hash_source_sh 

Log message:
Several fixes for our net/olsrd port:

Make sendto() work for IPv4 by setting the IP_MULTICAST_IF socket option.
Allows this port to drop the dependency on net/libnet and stop using the
associated sendto() replacement hack (which supports only IPv4).

Make IPv6 work: Fix adding/deleting IPv6 routes, and don't complain
about a missing net.inet6.icmp6.rediraccept sysctl.

Also enable the verbose build so build logs show the commands
being used to compile things.

ok danj@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/20 09:46:18

Modified files:
	infrastructure/lib/DPB: Job.pm Logger.pm 
	infrastructure/lib/DPB/Core: Init.pm 
	infrastructure/lib/DPB/Job: Fetch.pm 

Log message:
move redirect to UserProxy and introduce write_error.
redirect is only called thru a user, so have the error message be
more helpful in telling which user can't perform the redirect.
likewise, write_error should tell which user is involved.
don't wrap redirect_fh in run_as, because we're not opening any
new file.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/20 09:47:05

Modified files:
	infrastructure/lib/DPB: User.pm 

Log message:
... works better with the actual redirect/write_error code


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/20 09:47:49

Modified files:
	infrastructure/lib/DPB: Util.pm 

Log message:
tweak die_bang to disable tracing, since we know exactly why we're dying
and we don't need any trace in that case.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/20 09:48:12

Modified files:
	infrastructure/lib/DPB: Vars.pm 

Log message:
wrap long line


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/20 09:49:00

Modified files:
	sys/dev/usb/dwc2: dwc2_hcdintr.c 

Log message:
Check the validity of the `qtd' pointer after each interrupt case
and bail out if the pointer has become invalid. This prevents
use-after-free memory accesses that corrupted the dwc2qtd pool.

This fix improves stability on the Raspberry Pi 3.

From Linux commit dc8730846948e517169f630826cd2c97615f5ee8
OK kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/20 10:44:06

Modified files:
	bin/csh        : misc.c 

Log message:
Don't try to close every single file descriptor up to _SC_OPEN_MAX in csh.
Instead, close the fds that reside in between the gaps of used fds and once the
largest used fd is reached call closefrom().

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/20 10:46:51

Modified files:
	regress/bin/ksh/edit: vi.sh 

Log message:
Fix EOL tests for ksh vi mode.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/20 11:12:15

Log message:
    Import PDAL 1.5.0.
    
    PDAL is a C++ BSD library for translating and manipulating point cloud
    data. It is very much like the GDAL library which handles raster and
    vector data.
    
    In addition to the library code, PDAL provides a suite of command-line
    applications that users can conveniently use to process, filter,
    translate, and query point cloud data.
    
    WWW: https://pdal.io
    
    ok sthen@ ajacoutot@
    
    Status:
    
    Vendor Tag:	landry
    Release Tags:	landry_20170620
    
    N ports/geo/pdal/distinfo
    N ports/geo/pdal/Makefile
    N ports/geo/pdal/patches/patch-cmake_modules_FindGEOS_cmake
    N ports/geo/pdal/patches/patch-dimbuilder_CMakeLists_txt
    N ports/geo/pdal/patches/patch-pdal_util_CMakeLists_txt
    N ports/geo/pdal/patches/patch-pdal_util_Utils_cpp
    N ports/geo/pdal/patches/patch-pdal_PluginManager_cpp
    N ports/geo/pdal/patches/patch-pdal_PipelineReaderXML_cpp
    N ports/geo/pdal/patches/patch-test_unit_ProgramArgsTest_cpp
    N ports/geo/pdal/patches/patch-CMakeLists_txt
    N ports/geo/pdal/patches/patch-cmake_macros_cmake
    N ports/geo/pdal/pkg/PLIST
    N ports/geo/pdal/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/20 11:13:21

Modified files:
	sys/kern       : uipc_socket.c 

Log message:
In ddb print socket bit field so_state in hex to match SS_ defines.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/20 11:14:47

Log message:
    Import py-laspy 1.5.0.
    
    Laspy is a pythonic library for reading, modifying and writing LAS
    files, ie point cloud data. Support for LAZ is limited to reading LAS
    version 1.0-1.4 files. Laspy is compatible with Python 2.6+ and 3.5+.
    
    Laspy includes a set of command line tools which can be used to do basic
    file operations like format translation and validation as well as
    comparing LAS files.
    
    WWW: https://github.com/laspy/laspy
    
    ok sthen@
    
    Status:
    
    Vendor Tag:	landry
    Release Tags:	landry_20170620
    
    N ports/geo/py-laspy/Makefile
    N ports/geo/py-laspy/distinfo
    N ports/geo/py-laspy/pkg/PLIST
    N ports/geo/py-laspy/pkg/DESCR
    N ports/geo/py-laspy/patches/patch-setup_py
    N ports/geo/py-laspy/patches/patch-laspy_file_py
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/20 11:16:25

Modified files:
	geo            : Makefile 

Log message:
+pdal, py-laspy & py-laspy,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/20 11:24:09

Modified files:
	usr.bin/mandoc : cgi.c eqn.c eqn_html.c 

Log message:
KNF: remove parentheses from switch case labels; no binary change


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/06/20 11:32:20

Modified files:
	bin/ksh        : emacs.c ksh.1 

Log message:
'^T' is documented to be bounded to transpose-chars while in emacs
mode, not "stuff". While here, remove the poorly described "stuff"
and "stuff" bind functions as well..

In the unlikely event anyone has those in .kshrc, they'll need to
be removed.

ok anton@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/20 11:38:40

Modified files:
	net/haproxy    : Makefile distinfo 
	net/haproxy/patches: patch-Makefile 

Log message:
Update to haproxy-1.6.13


CVSROOT:	/cvs
Module name:	src
Changes by:	tj@cvs.openbsd.org	2017/06/20 12:02:26

Modified files:
	share/man/man8 : afterboot.8 

Log message:
doas won't be configured after the first boot, so stop recommending
use of it to change root's password. remove a leftover sentence and
apply minor grammar tweaks while here.

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/20 12:05:44

Modified files:
	usr.sbin/pkg_add/OpenBSD: PackageRepository.pm 

Log message:
trim more error messages
- if we can't retrieve the package, of course signify will say it's truncated
so that's redundant.
- if you give a full package name, can_be_empty should make directories
vanish.

(landry just discovered 6.1/packages-stable by accident, make it vanish
again so he can't find it back... :D )


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/20 12:32:26

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
Set SRCDIR according to build type and s/X11SRC/XSRCDIR

ok robert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/06/20 13:26:34

Modified files:
	www/sope       : Makefile distinfo 

Log message:
update to 2.3.21
ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/06/20 13:28:25

Modified files:
	www/sogo       : Makefile distinfo 
	www/sogo/pkg   : PLIST 
Removed files:
	www/sogo/patches: patch-UI_Scheduler_UIxCalListingActions_m 

Log message:
update to 2.3.21
ok sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/06/20 13:52:26

Modified files:
	misc/memcached : Makefile distinfo 
	misc/memcached/patches: patch-configure patch-memcached_c 

Log message:
bugfix update to 1.4.37 and regen patches


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/20 14:23:39

Modified files:
	net/py-idna    : Makefile distinfo 

Log message:
Update to py-idna 2.5

ok sthen@, bcallah@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/20 14:24:07

Modified files:
	usr.bin/locate/locate: Makefile 
Removed files:
	usr.bin/locate/locate: concatdb.sh 

Log message:
Remove locate.concatdb, it never worked.

OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/20 14:40:54

Modified files:
	games/hack     : Makequest READ_ME 
Removed files:
	games/hack     : hack.sh 

Log message:
Fix a path in Makequest and remove hack.sh (it never worked).

OK tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/20 15:05:46

Modified files:
	sys/arch/amd64/amd64: autoconf.c 
	sys/arch/i386/i386: autoconf.c 

Log message:
use [] instead of * for reaching regions to unmap, making this more
similar to smashing versions written by visa


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/20 15:27:07

Modified files:
	devel/py-simplejson: Makefile distinfo 

Log message:
Update to py-simplejson 3.11.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/20 15:28:54

Modified files:
	www/py-urllib3 : Makefile 
	www/py-urllib3/pkg: PLIST 

Log message:
Add py3 flavor and enable test.

ok sthen@, sebastia@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/20 15:33:11

Modified files:
	www            : Makefile 

Log message:
+py-urllib3,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/20 16:29:38

Modified files:
	net/openvpn-auth-ldap: Makefile 

Log message:
Drop extra line, and ack successful test reports from Sebastien Leclerc


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/20 18:10:23

Modified files:
	gnu/usr.bin/cc/cc_tools: Makefile 

Log message:
DEPENDSFILE comes from FreeBSD, we don't have it. replace it with its
value .depend, so that the conditional is really used.

okay guenther@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/20 18:11:36

Modified files:
	usr.bin/make   : cond.c 

Log message:
error out if an exists condition tests an empty path, because that makes
zero sense.

this would have caught DEPENDSFILE in gnu/cc/cc_tools

okay guenther@,  also tested by krw@


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/20 19:02:26

Modified files:
	comms/gammu    : Makefile distinfo 

Log message:
update to gammu-1.38.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/20 19:03:28

Modified files:
	comms/py-gammu : Makefile distinfo 

Log message:
update to python-gammu-2.9


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 00:24:28

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/21 01:14:05

Log message:
    Import productivity/tudu.
    
    TuDu is a command line program to manage hierarchical todos. Each task
    has a title, a long text description, a deadline (tudu warns you when the
    date is close), and a scheduled date. There are categories and priorities.
    
    OK jca@
    
    Status:
    
    Vendor Tag:	fcambus
    Release Tags:	fcambus_20170621
    
    N ports/productivity/tudu/Makefile
    N ports/productivity/tudu/distinfo
    N ports/productivity/tudu/pkg/PLIST
    N ports/productivity/tudu/pkg/DESCR
    N ports/productivity/tudu/patches/patch-configure
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/21 01:15:11

Modified files:
	productivity   : Makefile 

Log message:
Add tudu.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 01:18:02

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.72.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 01:18:14

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.109.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 01:33:05

Modified files:
	x11/gtk+3      : Makefile distinfo 

Log message:
Update to gtk+3-3.22.16.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 02:05:05

Modified files:
	x11/gnome/session/patches: 
	                           patch-gnome-session_gsm-fail-whale-dialog_c 

Log message:
Committed upstream.


CVSROOT:	/cvs
Module name:	src
Changes by:	akfaew@cvs.openbsd.org	2017/06/21 02:21:14

Modified files:
	share/man/man4 : viocon.4 

Log message:
List all five devices, not just the first two.

OK jmc@ sf@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/21 04:26:11

Added files:
	x11/xli/patches: patch-rlelib_c 

Log message:
kill ancient unneeded header, say "hello clang"


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/21 05:28:06

Modified files:
	net/libepc/patches: patch-tests_framework_c 

Log message:
you guys missed one, or gcc gets ioctl magically


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/21 05:35:11

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Include the request id in the I/O debug output


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/21 06:37:24

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Allow familiar idiom free_client_lease(NULL).


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 06:37:41

Modified files:
	www/webkitgtk4 : Makefile distinfo 

Log message:
SECURITY update ot webkitgtk4-2.16.4.
- CVE-2017-2538


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 06:38:36

Modified files:
	www/webkitgtk4 : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
SECURITY update of webkitgtk4-2.16.4.
- CVE-2017-2538


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/21 06:51:09

Modified files:
	net/openvpn    : Makefile distinfo 
	net/openvpn/patches: patch-configure patch-src_openvpn_route_c 
	                     patch-src_openvpn_tun_c 
Removed files:
	net/openvpn/patches: patch-include_openvpn-plugin_h_in 
	                     patch-src_openvpn_syshead_h 

Log message:
SECURITY update to openvpn-2.4.3

Fixes for:
- CVE-2017-7508 Remotely-triggerable ASSERT() on malformed IPv6 packet
- CVE-2017-7520 Pre-authentication remote crash/information disclosure
for clients
- CVE-2017-7521 Potential double-free in --x509-alt-username
- CVE-2017-7512 Remote-triggerable memory leaks
- CVE-2017-7522 Post-authentication remote DoS when using
the --x509-track option
- Null-pointer dereference in establish_http_proxy_passthru()

Full description at
https://community.openvpn.net/openvpn/wiki/VulnerabilitiesFixedInOpenVPN243

This update kills some of our patches that were committed upstream.
Similar diff proposed by pirofti@, ok pirofti@ stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/21 06:53:11

Modified files:
	net/openvpn    : Tag: OPENBSD_6_1 Makefile distinfo 
	net/openvpn/patches: Tag: OPENBSD_6_1 patch-configure 
	                     patch-src_openvpn_route_c 
	                     patch-src_openvpn_tun_c 
Removed files:
	net/openvpn/patches: Tag: OPENBSD_6_1 
	                     patch-include_openvpn-plugin_h_in 
	                     patch-src_openvpn_syshead_h 

Log message:
SECURITY update to openvpn-2.4.3

Fixes for:
- CVE-2017-7508 Remotely-triggerable ASSERT() on malformed IPv6 packet
- CVE-2017-7520 Pre-authentication remote crash/information disclosure
for clients
- CVE-2017-7521 Potential double-free in --x509-alt-username
- CVE-2017-7512 Remote-triggerable memory leaks
- CVE-2017-7522 Post-authentication remote DoS when using
the --x509-track option
- Null-pointer dereference in establish_http_proxy_passthru()

Full description at
https://community.openvpn.net/openvpn/wiki/VulnerabilitiesFixedInOpenVPN243

This update kills some of our patches that were committed upstream.
Similar diff proposed by pirofti@, ok pirofti@ stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/21 06:57:07

Added files:
	graphics/mandelbulber/patches: patch-src_Render3D_cpp 

Log message:
how can one choose C++ and not know such basics. Begars the mind.
fix build with clang


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 07:47:19

Modified files:
	x11/gnome/session: Makefile 
Added files:
	x11/gnome/session/patches: 
	                           patch-gnome-session_gsm-shell-extensions_c 

Log message:
shell-extension: fix warning when iterating over extension list (upstream).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/21 08:14:22

Modified files:
	devel/sdcc     : Makefile 

Log message:
and that makes 3!
-fms-extensions is inoperative with clang, and it sure builds without it
(unnamed structs work as long as you don't try any pedantic standard)


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/21 08:34:25

Modified files:
	.              : want.html 

Log message:
remove my entry, with a very big thanks to adam mcdougall.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 08:56:28

Modified files:
	x11/gnome/totem-pl-parser: Makefile distinfo 
	x11/gnome/totem-pl-parser/pkg: PLIST 

Log message:
Update to totem-pl-parser-3.10.8.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/21 09:16:32

Modified files:
	sysutils/sysclean: Makefile distinfo 

Log message:
Update to sysclean-2.3.

from Sebastien Marie (dev / maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/21 09:24:34

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c 

Log message:
Consistently use time(&var) idiom rather than tossing in a few
var = time(NULL). Flip "struct interface *" to be the first
parameter in set_timeout(), as in other functions taking the
state info.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/21 09:29:23

Modified files:
	sys/net        : pf.c 

Log message:
Fix kernel diagnostic assertion "(sk->inp == NULL) || (sk->inp->inp_pf_sk
== NULL)".  The problem was that setting the inp pointer in the
statekey to NULL was delayed until the statekey refcounter reached
0.  So the inp could get linked to another statekey while an mbuf
in the socket buffer was keeping the refcounter at 1.  Set the
statekey inp pointer to NULL in pf_state_key_detach() immediately,
then the kassert can be even stricter.
OK sashan@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/06/21 09:38:00

Modified files:
	lang/jruby     : Makefile distinfo 
	lang/jruby/pkg : PLIST 

Log message:
Update to JRuby 9.1.12.0


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/21 09:49:27

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
No need to manually check validity of ifi->active when
REBOOT'ing. It will be pointing to a recorded lease if
anything. So rely on get_recorded_lease() to return the
next valid candidate lease, which might be the lease
ifi->active was pointing at.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/21 10:37:48

Modified files:
	sys/dev/pv     : if_hvn.c 

Log message:
Return early from NVS command submission if no response is required


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/21 10:39:05

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Teach get_recorded_lease() that static leases do not
expire.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/21 10:51:07

Modified files:
	gnu/llvm/lib/MC: MCAsmInfoELF.cpp 

Log message:
For a decade or more, we've patched gcc to make -fno-ident the default.
clang doesn't seem to have a command line option for the feature,
so just hard wire it off. We don't need advertisements in our binaries.
ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 11:13:20

Modified files:
	sys/kern       : kern_pledge.c 

Log message:
Permit TIOCSTAT on a tty.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/21 12:03:50

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
Recognize well-known functions names (the same that Heirloom recognizes,
which includes those recognized by groff) and wrap them in a roman box
unless they already are in roman context.
Missing feature reported by bentley@.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/21 12:18:08

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Don't confuse SCSI command status and transfer error code.
While here, make SCSI command completion routine more robust.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/21 12:37:38

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
quoted words are not parsed for defined keys


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/21 12:44:58

Modified files:
	net/openvpn    : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
openvpn re-rolled 2.4.3 tarballs...

Lots of churn because the previous tarball was generated with automake
1.14.1, the new one with 1.15.

-SHA256 (openvpn-2.4.3.tar.gz) = hKAao98MEqNVLKO6qjnXABN7W85LbeaD/of7eb+l3ws=
-SIZE (openvpn-2.4.3.tar.gz) = 1397306
+SHA256 (openvpn-2.4.3.tar.gz) = zuPTykYpYKUKZ8Dr0YbgG20T23AnUgVmNpUVLJrKhXk=
+SIZE (openvpn-2.4.3.tar.gz) = 1422692

Not discussed with upstream yet.  Committing this now because of the
security issues fixed by openvpn-2.4.3.

Issue also noticed by robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/21 12:55:15

Modified files:
	bin/csh        : file.c 

Log message:
Replace usage of TIOCSTI in csh using a more common IO-loop where ICANON is
disabled and a single char of input is read at a time. This requires the line
editing capabilities provided when ICANON is enabled to be implemented.

With help and feedback from deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/21 12:59:54

src/regress/bin/csh

Update of /cvs/src/regress/bin/csh
In directory cvs.openbsd.org:/tmp/cvs-serv15630/csh

Log Message:
Directory /cvs/src/regress/bin/csh added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/21 13:00:13

Modified files:
	net/openvpn    : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
Switch to self-hosted tarballs

Upstream seems to serve two versions of the 2.4.3 tarball (issues with
cloudflare ?).


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/21 13:01:23

Modified files:
	net/openvpn    : Makefile 

Log message:
Switch to self-hosted tarballs

Upstream seems to serve two versions of the 2.4.3 tarball (issues with
cloudflare ?).


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/21 13:03:30

Modified files:
	regress/bin    : Makefile 
Added files:
	regress/bin/csh: Makefile filec.sh 

Log message:
Add regression tests for the filec feature in csh.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 13:23:12

Modified files:
	gnu/usr.bin/binutils-2.17/gas/config: tc-i386.c 

Log message:
Large nopsleds make it easier for ROP machinery to sloppily reach targets.
Convert these to "trapsleds' instead.  Since these can occur inside
fall-through blocks of code (and gcc sure isn't helping us by identifying
those), convert most to "short jump over" followed a sequence of int3.
This works for sled sizes 3-15, for i386 and amd64.   Work by Todd Mortimer
ok mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/21 13:27:55

Modified files:
	x11/gnome/gjs  : Makefile distinfo 

Log message:
update to gjs-1.48.5


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/21 13:36:23

Modified files:
	bin/csh        : file.c 

Log message:
Minor style(9) corrections and whitespace cleanup to csh.

ok deraadt@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 14:08:53

Modified files:
	sys/arch/amd64/conf: ld.script 
	sys/arch/i386/conf: ld.script 

Log message:
Fill space between sections with traps, rather than nops.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 14:29:39

Modified files:
	gnu/usr.bin/binutils-2.17/ld/emulparams: elf_i386_obsd.sh 
	                                         elf_x86_64_obsd.sh 

Log message:
Intra-segment traps instead of nops.  Similar to kernel change, further
reduction in nopsleds in code and data segments (if those data segments
ever become X, that is)
ok mlarkin


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/21 14:30:39

Modified files:
	net            : Makefile 
Removed files:
	net/texapp     : Makefile distinfo 
	net/texapp/pkg : DESCR PLIST 

Log message:
Remove net/texapp. The service it targeted has been shut down.
ok fcambus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/21 14:31:13

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register texapp removal.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 14:31:46

Modified files:
	gnu/usr.bin/binutils-2.17/bfd: elf64-x86-64.c 

Log message:
elf64_x86_64_plt0_entry had a hardcoded nop-sled, before the subsequent
plt entry.  Since previous effective instruction is a a jmp, this can be
a sequence of traps.
ok mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/21 14:47:46

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
Outside explicit font context, give every letter its own box.
The formatters need this to correctly select fonts.
Missing feature reported by bentley@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/06/21 14:56:07

Modified files:
	x11/dstat      : Makefile distinfo 

Log message:
update to dstat-0.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/21 15:19:05

Modified files:
	archivers/unrar: Makefile distinfo 
	archivers/unrar/patches: patch-makefile patch-os_hpp 
	                         patch-rijndael_cpp 

Log message:
Security update to 5.50 beta 4 to fix the VMSF_DELTA filter signedness
error and unspecified other issues.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/21 15:24:09

Modified files:
	astro/ansiweather: Makefile distinfo 

Log message:
Update ansiweather to 1.11.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 17:21:35

Modified files:
	sys/arch/hppa/conf: ld.script 

Log message:
Better off padding with 0x0.  0x0 = "break 0,0".

(BTW, the binutils disasm cannot handle that instruction with those
parameters, because the decoder logic is wrong..)


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/21 17:26:51

Modified files:
	faq            : faq14.html 

Log message:
bioctl is used for both the creation and attaching of encrypted volumes.
this only needs to be explained once, not three or four times.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 17:52:55

Modified files:
	etc            : Makefile 

Log message:
When building a snapshot, install the compile.tgz file to builder's
/usr/share/ so that next boot will find it and perhaps use it.
ok tb rpe


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 17:54:19

Modified files:
	distrib/miniroot: install.sub 

Log message:
/var/db/kernel.SHA256 contains the hash of the /bsd kernel.  Upon
install or upgrade, set it correctly.
diff from rpe, also thanks tb for comments and review


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/21 18:30:06

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
Fix font selection for text boxes in the terminal formatter.
Issue reported by bentley@.

The AST data structure is powerful enough that all required
information can easily be provided in the parser, and no change
of the formatting code is needed.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 19:26:28

Modified files:
	sys/arch/i386/stand/libsa: diskprobe.c 
	sys/arch/amd64/stand/libsa: diskprobe.c 

Log message:
Only print the magic '&' letter on a disk if the hibernate partition is
valid.  This is an undocumented little debugging diagnostic, much like
the '*'.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/21 20:30:34

Modified files:
	share/man/man9 : pool_cache_init.9 

Log message:
items get returns to pools with pool_put, not pool_get.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/21 20:44:37

Modified files:
	sys/dev/fdt    : sximmc.c 
	sys/dev/pci    : if_ix.c 
	sys/dev/usb    : if_ure.c xhci.c 

Log message:
double ;;.  xhci one found by geoffhill


CVSROOT:	/cvs
Module name:	src
Changes by:	tom@cvs.openbsd.org	2017/06/21 23:32:47

Modified files:
	sys/dev/pci/drm: drmP.h 

Log message:
Fix another ;; in sys/dev


CVSROOT:	/cvs
Module name:	ports
Changes by:	bentley@cvs.openbsd.org	2017/06/21 23:46:49

Modified files:
	www/sblg       : Makefile distinfo 

Log message:
Update to sblg-0.4.3.

From Bryan Vyhmeister. Thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	jmatthew@cvs.openbsd.org	2017/06/22 00:21:12

Modified files:
	sys/arch/amd64/amd64: cpu.c 
	sys/arch/i386/i386: cpu.c 
	sys/dev/pv     : pvbus.c pvvar.h 

Log message:
Add a hypervisor-specific function pointer in pvbus(4) that gets called during
cpu_hatch() on each cpu, allowing initialization of per-cpu features on each
cpu as it starts up.

input from reyk@ and mikeb@
ok mikeb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 01:44:26

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.73.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 01:44:41

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.110.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 02:08:55

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-160.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 02:30:43

Modified files:
	sysutils/amazon-ecs-cli: Makefile distinfo 

Log message:
Update to ecs-cli-0.6.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 02:49:30

Modified files:
	astro/stellarium: Makefile distinfo 
	astro/stellarium/pkg: PLIST 
Removed files:
	astro/stellarium/patches: 
	                          patch-plugins_TelescopeControl_src_servers_Socket_hpp 

Log message:
Update to stellarium-0.16.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 02:54:16

Modified files:
	mail/cyrus-imapd: Makefile distinfo 
	mail/cyrus-imapd/patches: patch-Makefile_in patch-configure 
	mail/cyrus-imapd/pkg: PLIST 
Removed files:
	mail/cyrus-imapd/patches: patch-imap_sync_support_c 
	                          patch-tools_upgradesieve 

Log message:
Update to cyrus-imapd-3.0.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 03:44:24

Modified files:
	security/libhttpseverywhere: Makefile distinfo 

Log message:
Update to libhttpseverywhere-0.4.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/22 04:04:20

Modified files:
	x11/gnome/nautilus-sendto: Makefile distinfo 
	x11/gnome/nautilus-sendto/pkg: PLIST 

Log message:
Update to nautilus-sendto-3.8.5.


CVSROOT:	/cvs
Module name:	src
Changes by:	tom@cvs.openbsd.org	2017/06/22 05:34:51

Modified files:
	sys/net        : if_vlan.c 
	sys/netinet    : ip_carp.c 
	sys/arch/armv7/imx: imxgpio.c 
	sys/arch/macppc/dev: mesh.c 
	sys/arch/sh/dev: shpcic.c 

Log message:
Fix the remaining ';;'s in sys/


CVSROOT:	/cvs
Module name:	src
Changes by:	tom@cvs.openbsd.org	2017/06/22 07:21:10

Modified files:
	sys/arch/m88k/m88k: eh_common.S 

Log message:
Tidy up comment about double load opcodes in m88k/eh_common.S (and fix ;; -> ||)

ok miod@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/22 07:51:49

Modified files:
	share/man/man8 : starttls.8 

Log message:
typo; from jack burton


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/22 08:40:20

Modified files:
	sys/arch/mips64/mips64: cache_tfp.c 

Log message:
Improve the coalescing of instruction cache flushes on R8000 in order
not to perform redundant work. There is no direct way to flush the
cache; rather, the kernel evicts unwanted bits from the cache by
executing a block of instructions, which is expensive.

With this diff, make build time decreases about 0.4%.

Diff from miod@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/22 09:08:53

Modified files:
	sbin/dhclient  : dhcpd.h parse.c 

Log message:
Drop support for old (>4yr) timestamp formats in leases
files.

ok tb@ millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/22 09:52:46

Modified files:
	telephony/stuntman: Makefile distinfo 

Log message:
update to stuntman-1.2.13, from maintainer Roman Kravchuk


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/22 09:56:29

Modified files:
	sys/sys        : hibernate.h 
	sys/kern       : subr_hibernate.c 

Log message:
calculate a "sum" based upon pointers to functions all over the kernel,
so that an unhibernate kernel can detect if it is running with the
kernel it booted.
ok mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/22 09:57:17

Modified files:
	usr.sbin/config: config.h main.c mkmakefile.c 

Log message:
Generate the newbsd: and install-update: targets here, rather than
in the source Makefile.* files.
ok tb rpe mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/22 10:01:48

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/sparc64/conf: Makefile.sparc64 
	sys/conf       : makegap.sh 

Log message:
Generate a gap.link script, and use that to generate gap.o.  On multi-ABI
architectures we must also link against a gapdummy.o to repair the ABI
of the resulting .o file.  Woe is me.
Also repair install: target to update the linkkit & hash when a kernel
is installed.
ok rpe tb mlarkin and tested by others also


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/22 10:02:42

Modified files:
	etc            : Makefile 

Log message:
compile.tgz no longer needs to contain machine/ subdir, instead it needs
makegap.sh
ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/22 10:03:36

Modified files:
	etc            : rc 

Log message:
Adjust relink procedure to use new targets.  Better use semantics for
users and developers.
diff from rpe, ok tb


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/22 10:10:34

Modified files:
	regress/usr.bin/gzip: Makefile 
Removed files:
	regress/usr.bin/gzip: t1.sh t2.sh 

Log message:
Convert shell script tests to regress make rules.  Having only one
tool and more verbosity allows better debugging.  Additional tests
check that gzip and gunzip preserve file permissions and ownership.


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/22 10:16:56

Modified files:
	faq            : current.html 

Log message:
document KARL; from tb


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/22 10:47:17

Modified files:
	net/olsrd      : Makefile 

Log message:
drop the gettext module from olsrd, ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/22 11:08:20

Modified files:
	usr.bin/make   : gnode.h make.c targ.c 

Log message:
better display of cycles in -j mode.
lots of tests by krw@
review and comments by pirofti@, more tweaks to come


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/22 11:09:10

Modified files:
	usr.bin/make   : make.c 

Log message:
zap trailing spaces from the previous commits and also other trailing
spaces


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/22 11:28:00

Modified files:
	lib/libcrypto/x509v3: v3_purp.c x509v3.h 

Log message:
Distinguish between self-issued certificates and self-signed certificates.
The certificate verification code has special cases for self-signed
certificates and without this change, self-issued certificates (which it
seems are common place with openvpn/easyrsa) were also being included in
this category.

Based on BoringSSL.

Thanks to Dale Ghent <daleg at elemental dot org> for assisting in
identifying the issue and testing this fix.

ok inoguchi@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/22 11:34:25

Modified files:
	lib/libtls     : tls_server.c 

Log message:
Use the standard `rv' idiom in tls_keypair_load_cert(), rather than
duplicating clean up code.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/22 11:47:56

Modified files:
	lib/libtls     : tls.c 

Log message:
Remove dead code that has remained hiding since ressl.c r1.14!


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/22 11:48:42

Modified files:
	regress/sys/crypto/aesctr: Makefile 
	regress/sys/crypto/enc: Makefile 

Log message:
Pick rijndael.c lost after backout; requested by bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/22 11:55:48

Modified files:
	lib/libtls     : tls.c 

Log message:
Plug a memory leak in tls_keypair_cert_hash(), introduced in r1.60.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/22 11:58:54

Modified files:
	lib/libtls     : tls.c 

Log message:
Fix incorrect indentation.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/06/22 12:03:57

Modified files:
	lib/libtls     : tls.c tls_internal.h tls_server.c tls_util.c 

Log message:
Use the tls_password_cb() callback with all PEM_read_bio_*() calls, so that
we can prevent libcrypto from going behind our back and trying to read
passwords from standard input (which we may not be permitted to do).

Found by jsg@ with httpd and password protected keys.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/22 12:05:31

Modified files:
	bin/csh        : file.c 
	regress/bin/csh: filec.sh 

Log message:
Make sure to abort loops when pressing ^C in csh.

Regression found by deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/22 12:07:31

Modified files:
	regress/sys/crypto: Makefile 
	regress/sys/crypto/aes: Makefile 
	regress/sys/crypto/aesctr: Makefile 
	regress/sys/crypto/aesxts: Makefile 
	regress/sys/crypto/chachapoly: Makefile 
	regress/sys/crypto/cmac: Makefile 
	regress/sys/crypto/enc: Makefile 
	regress/sys/crypto/gmac: Makefile 
	regress/sys/crypto/hmac: Makefile 
	regress/sys/crypto/key_wrap: Makefile 

Log message:
Do not skip any crypto tests.  Remove useless make code, use defaults
where appropriate.
OK mikeb@


CVSROOT:	/cvs
Module name:	www
Changes by:	sthen@cvs.openbsd.org	2017/06/22 12:29:15

Modified files:
	build          : mirrors.dat 

Log message:
lowercase for GZ


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/22 13:34:25

Modified files:
	x11/gnome/gucharmap: Makefile distinfo 

Log message:
update to gucharmap-10.0.0


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/22 14:06:14

Modified files:
	regress/usr.sbin/switchd: run.pl 
Added files:
	regress/usr.sbin/switchd: Proc.pm Switchd.pm 

Log message:
Get the framework from relayd regress to start switchd on demand.
This allows to run the test without manual setup.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/22 14:07:43

Modified files:
	textproc/elasticsearch: Makefile distinfo 

Log message:
update to elasticsearch-5.4.2l


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/22 14:09:17

Modified files:
	x11/gtksourceview3: Makefile distinfo 

Log message:
update to gtksourceview-3.24.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/22 14:09:44

Modified files:
	x11/gnome/recipes: Makefile distinfo 
	x11/gnome/recipes/patches: patch-meson_build 
	x11/gnome/recipes/pkg: PLIST 
Removed files:
	x11/gnome/recipes/patches: patch-src_gr-recipe-formatter_c 

Log message:
update to gnome-recipes-1.4.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/22 14:09:54

Modified files:
	sysutils/beats/filebeat: Makefile distinfo 
	sysutils/beats/heartbeat: Makefile distinfo 
	sysutils/beats/metricbeat: Makefile distinfo 
	sysutils/beats/packetbeat: Makefile distinfo 

Log message:
update beats to 5.4.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	jung@cvs.openbsd.org	2017/06/22 14:12:08

Modified files:
	productivity/khal: Makefile distinfo 

Log message:
update to khal-0.9.6


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/22 14:17:22

Modified files:
	regress/usr.sbin/switchd: OFP.pm run.pl 

Log message:
Perl on 32 bit architectures does not support pack('Q'), replace
it with 'NN'.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/22 14:18:22

Modified files:
	sysutils/py-ghmi: Makefile distinfo 
	sysutils/py-ghmi/pkg: PLIST 

Log message:
update to py-ghmi-1.0.20


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/22 14:38:32

Modified files:
	usr.sbin/wsfontload: wsfontload.c 

Log message:
Close file descriptor on an exit path.

OK gsoares@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/06/22 14:44:36

Modified files:
	libexec/ld.so  : path.c 

Log message:
Do not interpret an empty path as current working directory "." when
parsing LD_LIBRARY_PATH, and in DT_RPATH and DT_RUNPATH attributes and
in ld.so.hints.

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/22 15:26:54

Modified files:
	gnu/usr.bin/binutils-2.17/ld/emulparams: elf_i386_obsd.sh 

Log message:
i386 uses a intentional fallthrough between appended code blocks in .init,
which we cannot TRAPSLED FILL.  This needs to be done a different way.
diagnosis with kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/22 15:55:48

Modified files:
	net/scamper    : Makefile distinfo 

Log message:
update to scamper-20161204a


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/22 17:05:46

Log message:
    Import devel/py-iso639, a Python library for the ISO 639 language code
    standard.
    ok sthen@, wording for COMMENT and pkg/DESCR schwarze@
    
    iso-639 is a Python library for the ISO 639 standard. It supports
    ISO 639-1 for two-letter language codes, ISO 639-2 and ISO 639-3 for
    three-letter language codes, and ISO 639-5 for language group codes.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170622
    
    N ports/devel/py-iso639/Makefile
    N ports/devel/py-iso639/distinfo
    N ports/devel/py-iso639/pkg/PLIST
    N ports/devel/py-iso639/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/22 17:10:00

Log message:
    Import devel/py-iso3166, a self-contained ISO 3166-1 country definitions
    library.
    ok sthen@
    
    ISO 3166-1 defines two-letter, three-letter, and three-digit country
    codes. python-iso3166 is a self-contained library that converts between
    these codes and the corresponding country name.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170622
    
    N ports/devel/py-iso3166/Makefile
    N ports/devel/py-iso3166/distinfo
    N ports/devel/py-iso3166/pkg/PLIST
    N ports/devel/py-iso3166/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/22 17:10:45

Modified files:
	devel          : Makefile 

Log message:
+py-iso3133
+py-iso639


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/22 18:30:17

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
Simplify font handling:
1. Inherit the font attribute from the parent box, such that iteration
is no longer required to find the current font.
2. For well-known function name tokens, do not insert an EQN_LISTONE
box into the AST; simply set the font attribute of the text box
itself that contains the name.

Also improve word splitting of unquoted strings in default font mode:
3. Split between numbers and punctuation because both will soon get
different HTML markup.
4. Do not split between letters.  With the newly ubiquitious font
attributes, all formatters will be able to figure out what to do
without putting each letter into a separate box.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/22 19:02:18

Modified files:
	sys/sys        : pool.h 
	sys/kern       : subr_pool.c 
	usr.bin/systat : pool.c 
	share/man/man9 : pool_cache_init.9 

Log message:
change the semantic for calculating when to grow the size of a cache list.

previously it would figure out if there's enough items overall for
all the cpus to have full active an inactive free lists. this
included currently allocated items, which pools wont actually hold
on a free list and cannot predict when they will come back.

instead, see if there's enough items in the idle lists in the depot
that could instead go on all the free lists on the cpus. if there's
enough idle items, then we can grow.

tested by hrvoje popovski and amit kulkarni
ok visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/22 19:21:56

Modified files:
	sys/kern       : subr_pool.c 

Log message:
set the alignment of the per cpu cache structures to CACHELINESIZE.

hardcoding 64 is too optimistic.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/22 20:31:39

Modified files:
	usr.bin/mandoc : eqn_html.c html.c html.h 

Log message:
Write text boxes as <mi>, <mn>, or <mo> as appropriate,
and write fontstyle or fontweight attributes where required.
Missing features reported by bentley@.


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/06/22 21:25:53

Modified files:
	usr.bin/ssh/moduli-gen: moduli-gen.sh 

Log message:
Run the screen twice so we end up with more candidate groups.  ok djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/06/22 21:30:42

Modified files:
	etc            : moduli 
	usr.bin/ssh/moduli-gen: moduli.2048 moduli.3072 moduli.4096 
	                        moduli.6144 moduli.7680 moduli.8192 

Log message:
Import regenerated moduli.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/23 00:07:51

Modified files:
	share/man/man1 : clang-local.1 

Log message:
i didn't know we had clang-local until reminded by jsg.
mention the disabling of ident strings.


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/06/23 01:24:48

Modified files:
	usr.bin/ssh    : clientloop.c 

Log message:
When using the escape sequence &~ the code path is client_loop() ->
client_simple_escape_filter() -> process_escapes() -> fork() and the pledge for
this path lacks the proc promise and therefore aborts the process.
The solution is to just add proc the promise to this specific pledge.

Reported by Gregoire Jadi gjadi ! omecha.info
Insight with tb@, OK jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 01:29:17

Modified files:
	devel/glib2    : Makefile distinfo 
	devel/glib2/pkg: PLIST 

Log message:
Update to glib2-2.52.3.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/23 03:55:10

Modified files:
	sys/arch/amd64/include: asm.h 
	sys/arch/arm/include: asm.h 
	sys/arch/arm64/include: asm.h 
	sys/arch/hppa/include: asm.h 
	sys/arch/powerpc/include: asm.h 
	sys/arch/sh/include: asm.h 
	sys/arch/sparc64/include: asm.h 

Log message:
Unbreak profiling assembly functions in userland by defining the
correct prologue if compiled with -DPROF.

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/23 04:51:25

Modified files:
	audio/libmikmod: Makefile distinfo 

Log message:
Update libmikmod to 3.3.11.1.

Thanks Ozkan Sezer for the heads up.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/23 04:58:32

Modified files:
	security/lastpass-cli: Makefile distinfo 
	security/lastpass-cli/patches: patch-CMakeLists_txt 

Log message:
update to lastpass-cli 1.2.0, from maintainer Björn Ketelaars


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/23 05:18:12

Modified files:
	sys/net        : if.c 
	sys/sys        : mbuf.h 

Log message:
Resetting the mbuf header in if_input_local() was stripping off the
M_LOOP flag.  This broke IPv6 multicast.  Always set M_LOOP when
going through if_input_local() and adjust the flag's comment.
report rzalamena@; OK mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/23 05:40:36

Modified files:
	net/libmaxminddb: Makefile distinfo 
Added files:
	net/libmaxminddb/pkg: DESCR-asn PLIST-asn 

Log message:
Update a few things in libmaxminddb:

- Update the geolite2 maintainer target to cope with new upstream
packaging scheme, and also fetch the ASN database
- Add a subpackage for the ASN database
- Update GeoLite2 databases to latest version

OK sthen@


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/23 05:49:13

Modified files:
	faq            : upgrade61.html 

Log message:
add a reminder to explain how to enable karl for people upgrading manually.

prompted by a mail by paul de weerd.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/23 05:54:22

Modified files:
	gnu/usr.bin/cc/cc_tools: Makefile 

Log message:
Always include Makefile.dep, conditionally including it based on the
existence of a .depend file can lead to various problems.

The logic before rev 1.15 resulted in Makefile.dep always being
included as DEPENDSFILE was never set so this returns to the old
behaviour.

ok espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	reyk@cvs.openbsd.org	2017/06/23 06:37:09

Log message:
    The Microsoft Azure Linux Agent (waagent) manages Linux & BSD
    provisioning, and VM interaction with the Azure Fabric Controller.
    
    OpenBSD is supported by upstream since version 2.2.13.
    
    OK sthen@
    
    Status:
    
    Vendor Tag:	reyk
    Release Tags:	reyk_20170623
    
    N ports/sysutils/waagent/Makefile
    N ports/sysutils/waagent/distinfo
    N ports/sysutils/waagent/pkg/DESCR
    N ports/sysutils/waagent/pkg/PLIST
    N ports/sysutils/waagent/pkg/waagent.rc
    N ports/sysutils/waagent/patches/patch-azurelinuxagent_common_conf_py
    N ports/sysutils/waagent/patches/patch-azurelinuxagent_ga_update_py
    N ports/sysutils/waagent/patches/patch-config_openbsd_waagent_conf
    N ports/sysutils/waagent/patches/patch-config_waagent_conf
    N ports/sysutils/waagent/patches/patch-azurelinuxagent_common_osutil_openbsd_py
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	reyk@cvs.openbsd.org	2017/06/23 06:46:45

Modified files:
	sysutils       : Makefile 

Log message:
add waagent, OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 06:49:55

Modified files:
	devel/glib2mm  : Makefile distinfo 
	devel/glib2mm/pkg: PLIST 

Log message:
Update to glib2mm-2.52.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/06/23 06:56:25

Modified files:
	games/adventure: extern.h io.c wizard.c 

Log message:
Remove unused confirm() and datime() functions.

Those functions are unused and have been compiled out since 1998,
it's time to let them go.

OK sthen@, tom@, mestre@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 06:59:37

Modified files:
	sysutils/salt  : Makefile distinfo 
	sysutils/salt/pkg: PLIST 

Log message:
Update to salt-2016.11.6.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 07:11:17

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.74.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 07:11:32

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.111.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 07:39:48

Modified files:
	x11/gtk3mm     : Makefile distinfo 

Log message:
Update to gtk3mm-3.22.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/06/23 08:41:54

Modified files:
	sys/dev/ic     : rtwn.c 
	sys/dev/usb    : if_urtwn.c 

Log message:
- Fix Tx queues to USB endpoints mapping and merge urtwn_r92c_dma_init()
and urtwn_r88e_dma_init() into one; from FreeBSD r291902.

- Change the way the number of pages for public queue is calculated;
Based on the vendor driver's _InitQueueReservedPage(), the formula for
calculation of the number of pages for public priority queue is as follows:

if the device has 3 endpoints:
PUBQ = total number of Tx pages - HQ - LQ - NQ

if the device has 2 endpoints (i.e. has high and normal priority queues):
PUBQ = total number of Tx pages - HQ - NQ

- Don't write MCS8..MCS15 Tx power if the WNIC is a 1-stream Tx;

- Set R88E_TX_PAGE_COUNT to a correct value;

- Minimal enhancement in urtwn_open_pipes() for upcoming rtl8192eu chipset
support;

Tested with USB-N10 Nano (rtl8188cu), DWA-131 rev B (rtl8192cu), and
TL-WN725N v2 (rtl8188eu) on amd64.

ok stsp@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/23 08:54:03

Modified files:
	net/olsrd      : Makefile 

Log message:
Bump.
-@depend devel/gettext:gettext->=0.10.38:gettext-0.19.8.1


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/23 09:36:52

Modified files:
	usr.bin/tmux   : cmd-set-option.c key-string.c options-table.c 
	                 tmux.1 tmux.h tty-keys.c 

Log message:
Add user-keys option to allow user-defined keys to be set, from Dan
Aloni.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/23 09:40:56

Modified files:
	sbin/dhclient  : dhcpd.h kroute.c privsep.c privsep.h 

Log message:
Take reyk's imsg resolv.conf improvements of a while ago to their
logical conclusion.

Nuke _PATH_RESOLV_CONF since the value is only meant to be
known inside priv_write_resolv_conf(). Just use a local const char *.

Bring priv_write_resolv_conf() into line with other priv_ functions
invoked from the dispatch loop. i.e. don't pass it the imsg, just pass
a pointer to the data and a size after ensuring there is data to pass.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/23 10:09:38

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Use a const char * for "/etc/resolv.conf.tail" instead of repeating the
text in various forms in different error messages. Also makes the error
messages consistent by always displaying the full path name.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	dcoppa@cvs.openbsd.org	2017/06/23 10:15:20

Modified files:
	lib/freetype   : CMakeLists.txt ChangeLog ChangeLog.20 
	                 ChangeLog.21 ChangeLog.22 ChangeLog.23 
	                 ChangeLog.24 ChangeLog.25 ChangeLog.26 Jamfile 
	                 Jamrules Makefile README README.git autogen.sh 
	                 configure modules.cfg shlib_version 
	                 vms_make.com 
	lib/freetype/builds: detect.mk exports.mk freetype.mk 
	                     link_dos.mk link_std.mk modules.mk 
	                     toplevel.mk 
	lib/freetype/builds/amiga: README makefile makefile.os4 
	                           smakefile 
	lib/freetype/builds/amiga/include/config: ftconfig.h ftmodule.h 
	lib/freetype/builds/amiga/src/base: ftdebug.c ftsystem.c 
	lib/freetype/builds/ansi: ansi-def.mk ansi.mk 
	lib/freetype/builds/beos: beos-def.mk beos.mk detect.mk 
	lib/freetype/builds/cmake: iOS.cmake testbuild.sh 
	lib/freetype/builds/compiler: ansi-cc.mk bcc-dev.mk bcc.mk 
	                              emx.mk gcc-dev.mk gcc.mk intelc.mk 
	                              unix-lcc.mk visualage.mk 
	                              visualc.mk watcom.mk win-lcc.mk 
	lib/freetype/builds/dos: detect.mk dos-def.mk dos-emx.mk 
	                         dos-gcc.mk dos-wat.mk 
	lib/freetype/builds/mac: ftmac.c 
	lib/freetype/builds/os2: detect.mk os2-def.mk os2-dev.mk 
	                         os2-gcc.mk 
	lib/freetype/builds/symbian: bld.inf freetype.mmp 
	lib/freetype/builds/unix: config.guess config.sub configure 
	                          configure.ac configure.raw detect.mk 
	                          freetype-config.in freetype2.m4 
	                          ft-munmap.m4 ftconfig.in ftsystem.c 
	                          install.mk pkg.m4 unix-cc.in 
	                          unix-def.in unix-dev.mk unix-lcc.mk 
	                          unix.mk unixddef.mk 
	lib/freetype/builds/vms: ftconfig.h ftsystem.c 
	lib/freetype/builds/wince: ftdebug.c 
	lib/freetype/builds/wince/vc2005-ce: freetype.vcproj index.html 
	lib/freetype/builds/wince/vc2008-ce: freetype.vcproj index.html 
	lib/freetype/builds/windows: detect.mk ftdebug.c w32-bcc.mk 
	                             w32-bccd.mk w32-dev.mk w32-gcc.mk 
	                             w32-icc.mk w32-intl.mk w32-lcc.mk 
	                             w32-mingw32.mk w32-vcc.mk 
	                             w32-wat.mk win32-def.mk 
	lib/freetype/builds/windows/vc2005: freetype.vcproj index.html 
	lib/freetype/builds/windows/vc2008: freetype.vcproj index.html 
	lib/freetype/builds/windows/vc2010: freetype.vcxproj index.html 
	lib/freetype/builds/windows/visualc: freetype.dsp 
	                                     freetype.vcproj index.html 
	lib/freetype/builds/windows/visualce: freetype.dsp 
	                                      freetype.vcproj index.html 
	lib/freetype/devel: ft2build.h ftoption.h 
	lib/freetype/docs: CHANGES CUSTOMIZE DEBUG INSTALL INSTALL.ANY 
	                   INSTALL.CROSS INSTALL.GNU INSTALL.MAC 
	                   INSTALL.UNIX INSTALL.VMS TODO VERSIONS.TXT 
	                   formats.txt freetype-config.1 raster.txt 
	                   release 
	lib/freetype/docs/reference: ft2-auto_hinter.html 
	                             ft2-base_interface.html 
	                             ft2-basic_types.html 
	                             ft2-bdf_fonts.html 
	                             ft2-bitmap_handling.html 
	                             ft2-bzip2.html 
	                             ft2-cache_subsystem.html 
	                             ft2-cff_driver.html 
	                             ft2-cid_fonts.html 
	                             ft2-computations.html 
	                             ft2-error_code_values.html 
	                             ft2-error_enumerations.html 
	                             ft2-font_formats.html 
	                             ft2-gasp_table.html 
	                             ft2-glyph_management.html 
	                             ft2-glyph_stroker.html 
	                             ft2-glyph_variants.html 
	                             ft2-gx_validation.html 
	                             ft2-gzip.html 
	                             ft2-header_file_macros.html 
	                             ft2-header_inclusion.html 
	                             ft2-incremental.html ft2-index.html 
	                             ft2-lcd_filtering.html 
	                             ft2-list_processing.html 
	                             ft2-lzw.html ft2-mac_specific.html 
	                             ft2-module_management.html 
	                             ft2-multiple_masters.html 
	                             ft2-ot_validation.html 
	                             ft2-outline_processing.html 
	                             ft2-pfr_fonts.html 
	                             ft2-quick_advance.html 
	                             ft2-raster.html ft2-sfnt_names.html 
	                             ft2-sizes_management.html 
	                             ft2-system_interface.html 
	                             ft2-toc.html 
	                             ft2-truetype_engine.html 
	                             ft2-truetype_tables.html 
	                             ft2-tt_driver.html 
	                             ft2-type1_tables.html 
	                             ft2-user_allocation.html 
	                             ft2-version.html 
	                             ft2-winfnt_fonts.html 
	lib/freetype/include: ft2build.h 
	lib/freetype/include/freetype: Makefile freetype.h ftadvanc.h 
	                               ftautoh.h ftbbox.h ftbdf.h 
	                               ftbitmap.h ftbzip2.h ftcache.h 
	                               ftcffdrv.h ftchapters.h ftcid.h 
	                               fterrdef.h fterrors.h ftfntfmt.h 
	                               ftgasp.h ftglyph.h ftgxval.h 
	                               ftgzip.h ftimage.h ftincrem.h 
	                               ftlcdfil.h ftlist.h ftlzw.h 
	                               ftmac.h ftmm.h ftmodapi.h 
	                               ftmoderr.h ftotval.h ftoutln.h 
	                               ftpfr.h ftrender.h ftsizes.h 
	                               ftsnames.h ftstroke.h ftsynth.h 
	                               ftsystem.h fttrigon.h ftttdrv.h 
	                               fttypes.h ftwinfnt.h t1tables.h 
	                               ttnameid.h tttables.h tttags.h 
	                               ttunpat.h 
	lib/freetype/include/freetype/config: ftconfig.h ftheader.h 
	                                      ftoption.h ftstdlib.h 
	lib/freetype/include/freetype/internal: autohint.h ftcalc.h 
	                                        ftdebug.h ftdriver.h 
	                                        ftgloadr.h ftmemory.h 
	                                        ftobjs.h ftpic.h 
	                                        ftrfork.h ftserv.h 
	                                        ftstream.h fttrace.h 
	                                        ftvalid.h internal.h 
	                                        psaux.h pshints.h sfnt.h 
	                                        t1types.h tttypes.h 
	lib/freetype/include/freetype/internal/services: svbdf.h svcid.h 
	                                                 svfntfmt.h 
	                                                 svgldict.h 
	                                                 svgxval.h 
	                                                 svkern.h 
	                                                 svmetric.h 
	                                                 svmm.h 
	                                                 svotval.h 
	                                                 svpfr.h 
	                                                 svpostnm.h 
	                                                 svprop.h 
	                                                 svpscmap.h 
	                                                 svpsinfo.h 
	                                                 svsfnt.h 
	                                                 svttcmap.h 
	                                                 svtteng.h 
	                                                 svttglyf.h 
	                                                 svwinfnt.h 
	lib/freetype/src: Jamfile 
	lib/freetype/src/autofit: Jamfile afangles.c afblue.c afblue.cin 
	                          afblue.dat afblue.h afblue.hin afcjk.c 
	                          afcjk.h afcover.h afdummy.c afdummy.h 
	                          aferrors.h afglobal.c afglobal.h 
	                          afhints.c afhints.h afindic.c 
	                          afindic.h aflatin.c aflatin.h 
	                          aflatin2.c aflatin2.h afloader.c 
	                          afloader.h afmodule.c afmodule.h 
	                          afpic.c afpic.h afranges.c afranges.h 
	                          afscript.h afshaper.c afshaper.h 
	                          afstyles.h aftypes.h afwarp.c afwarp.h 
	                          afwrtsys.h autofit.c module.mk 
	                          rules.mk 
	lib/freetype/src/base: Jamfile basepic.c basepic.h ftadvanc.c 
	                       ftapi.c ftbase.c ftbase.h ftbbox.c 
	                       ftbdf.c ftbitmap.c ftcalc.c ftcid.c 
	                       ftdbgmem.c ftdebug.c ftfntfmt.c 
	                       ftfstype.c ftgasp.c ftgloadr.c ftglyph.c 
	                       ftgxval.c ftinit.c ftlcdfil.c ftmac.c 
	                       ftmm.c ftobjs.c ftotval.c ftoutln.c 
	                       ftpatent.c ftpfr.c ftpic.c ftrfork.c 
	                       ftsnames.c ftstream.c ftstroke.c 
	                       ftsynth.c ftsystem.c fttrigon.c fttype1.c 
	                       ftutil.c ftwinfnt.c rules.mk 
	lib/freetype/src/bdf: Jamfile bdf.c 
	lib/freetype/src/bzip2: Jamfile ftbzip2.c rules.mk 
	lib/freetype/src/cache: Jamfile ftcache.c ftcbasic.c ftccache.c 
	                        ftccache.h ftccback.h ftccmap.c 
	                        ftcerror.h ftcglyph.c ftcglyph.h 
	                        ftcimage.c ftcimage.h ftcmanag.c 
	                        ftcmanag.h ftcmru.c ftcmru.h ftcsbits.c 
	                        ftcsbits.h rules.mk 
	lib/freetype/src/cff: Jamfile cf2error.h cf2ft.c cf2intrp.c 
	                      cff.c cffcmap.c cffcmap.h cffdrivr.c 
	                      cffdrivr.h cfferrs.h cffgload.c cffgload.h 
	                      cffload.c cffload.h cffobjs.c cffobjs.h 
	                      cffparse.c cffparse.h cffpic.c cffpic.h 
	                      cfftoken.h cfftypes.h module.mk rules.mk 
	lib/freetype/src/cid: Jamfile ciderrs.h cidgload.c cidgload.h 
	                      cidload.c cidload.h cidobjs.c cidobjs.h 
	                      cidparse.c cidparse.h cidriver.c 
	                      cidriver.h cidtoken.h module.mk rules.mk 
	                      type1cid.c 
	lib/freetype/src/gxvalid: Jamfile README gxvalid.c gxvalid.h 
	                          gxvbsln.c gxvcommn.c gxvcommn.h 
	                          gxverror.h gxvfeat.c gxvfeat.h 
	                          gxvfgen.c gxvjust.c gxvkern.c 
	                          gxvlcar.c gxvmod.c gxvmod.h gxvmort.c 
	                          gxvmort.h gxvmort0.c gxvmort1.c 
	                          gxvmort2.c gxvmort4.c gxvmort5.c 
	                          gxvmorx.c gxvmorx.h gxvmorx0.c 
	                          gxvmorx1.c gxvmorx2.c gxvmorx4.c 
	                          gxvmorx5.c gxvopbd.c gxvprop.c 
	                          gxvtrak.c module.mk rules.mk 
	lib/freetype/src/gzip: Jamfile ftgzip.c rules.mk 
	lib/freetype/src/lzw: Jamfile ftlzw.c ftzopen.c ftzopen.h 
	                      rules.mk 
	lib/freetype/src/otvalid: Jamfile module.mk otvalid.c otvalid.h 
	                          otvbase.c otvcommn.c otvcommn.h 
	                          otverror.h otvgdef.c otvgpos.c 
	                          otvgpos.h otvgsub.c otvjstf.c 
	                          otvmath.c otvmod.c otvmod.h rules.mk 
	lib/freetype/src/pcf: Jamfile pcf.c pcf.h pcfdrivr.c pcfread.c 
	lib/freetype/src/pfr: Jamfile module.mk pfr.c pfrcmap.c 
	                      pfrcmap.h pfrdrivr.c pfrdrivr.h pfrerror.h 
	                      pfrgload.c pfrgload.h pfrload.c pfrload.h 
	                      pfrobjs.c pfrobjs.h pfrsbit.c pfrsbit.h 
	                      pfrtypes.h rules.mk 
	lib/freetype/src/psaux: Jamfile afmparse.c afmparse.h module.mk 
	                        psaux.c psauxerr.h psauxmod.c psauxmod.h 
	                        psconv.c psconv.h psobjs.c psobjs.h 
	                        rules.mk t1cmap.c t1cmap.h t1decode.c 
	                        t1decode.h 
	lib/freetype/src/pshinter: Jamfile module.mk pshalgo.c pshalgo.h 
	                           pshglob.c pshglob.h pshinter.c 
	                           pshmod.c pshmod.h pshnterr.h pshpic.c 
	                           pshpic.h pshrec.c pshrec.h rules.mk 
	lib/freetype/src/psnames: Jamfile module.mk psmodule.c 
	                          psmodule.h psnamerr.h psnames.c 
	                          pspic.c pspic.h pstables.h rules.mk 
	lib/freetype/src/raster: Jamfile ftmisc.h ftraster.c ftraster.h 
	                         ftrend1.c ftrend1.h module.mk raster.c 
	                         rasterrs.h rastpic.c rastpic.h rules.mk 
	lib/freetype/src/sfnt: Jamfile module.mk pngshim.c pngshim.h 
	                       rules.mk sfdriver.c sfdriver.h sferrors.h 
	                       sfnt.c sfntpic.c sfntpic.h sfobjs.c 
	                       sfobjs.h ttbdf.c ttbdf.h ttcmap.c 
	                       ttcmap.h ttcmapc.h ttkern.c ttkern.h 
	                       ttload.c ttload.h ttmtx.c ttmtx.h 
	                       ttpost.c ttpost.h ttsbit.c ttsbit.h 
	lib/freetype/src/smooth: Jamfile ftgrays.c ftgrays.h ftsmerrs.h 
	                         ftsmooth.c ftsmooth.h ftspic.c ftspic.h 
	                         module.mk rules.mk smooth.c 
	lib/freetype/src/tools: afblue.pl glnames.py 
	                        update-copyright-year 
	lib/freetype/src/tools/docmaker: content.py docmaker.py 
	                                 formatter.py sources.py 
	                                 tohtml.py utils.py 
	lib/freetype/src/tools/ftfuzzer: README ftfuzzer.cc ftmutator.cc 
	                                 rasterfuzzer.cc runinput.cc 
	lib/freetype/src/truetype: Jamfile module.mk rules.mk truetype.c 
	                           ttdriver.c ttdriver.h tterrors.h 
	                           ttgload.c ttgload.h ttgxvar.c 
	                           ttgxvar.h ttinterp.c ttinterp.h 
	                           ttobjs.c ttobjs.h ttpic.c ttpic.h 
	                           ttpload.c ttpload.h ttsubpix.c 
	                           ttsubpix.h 
	lib/freetype/src/type1: Jamfile module.mk rules.mk t1afm.c 
	                        t1afm.h t1driver.c t1driver.h t1errors.h 
	                        t1gload.c t1gload.h t1load.c t1load.h 
	                        t1objs.c t1objs.h t1parse.c t1parse.h 
	                        t1tokens.h type1.c 
	lib/freetype/src/type42: Jamfile module.mk rules.mk t42drivr.c 
	                         t42drivr.h t42error.h t42objs.c 
	                         t42objs.h t42parse.c t42parse.h 
	                         t42types.h type42.c 
	lib/freetype/src/winfonts: Jamfile fnterrs.h module.mk rules.mk 
	                           winfnt.c winfnt.h 
Added files:
	lib/freetype/docs/reference: ft2-pcf_driver.html 
	lib/freetype/include/freetype: ftpcfdrv.h 

Log message:
Update to freetype-2.8

No fallout in a bulk build on i386 (sthen@)

OK matthieu@, sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/23 10:18:02

Modified files:
	sbin/dhclient  : privsep.c 

Log message:
Oops. Remove extraneous 'return' and some braces from
priv_write_resolv_conf() code that was moved into the
dispatch loop.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/06/23 10:59:22

Modified files:
	lang/bacon     : Makefile distinfo 

Log message:
Update to bacon 3.5.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/23 11:21:18

Modified files:
	lang/elixir    : Makefile distinfo 

Log message:
update to elixir-1.4.5


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/23 12:51:28

Modified files:
	sys/dev/pv     : if_hvn.c 

Log message:
Finish up minor changes in the output and clear the BATCHED channel flag


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/23 12:54:44

Modified files:
	sys/dev/pv     : hyperv.c 

Log message:
s/membar_sync/virtio_membar_sync/


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/23 13:02:41

Modified files:
	x11/gnome/mutter: Makefile distinfo 

Log message:
update to mutter-3.24.3


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/23 13:05:42

Modified files:
	sys/dev/pv     : hyperv.c hypervvar.h 

Log message:
Introduce deferred interrupt processing capability

Hyper-V interrupts seem to be sometimes delivered before the message
becomes available on the channel ring.  This is reproducible on hvs(4)
under load.  This change is modelled on the workaround found in the
Linux driver.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/23 13:07:13

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Request deferred interrupt processing


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/23 13:07:25

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete -r, RCS id checks are now covered by mandoc,
and garbage collect the unused "inliteral" state variable;
ok jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/23 13:09:21

Modified files:
	sys/dev/pv     : hyperv.c 

Log message:
Event interrupt handler should call hv_channel_schedule now


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/23 13:16:49

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete warning about missing whitespace before trailing punctuation;
mandoc handles this now, not in exactly the same way, but catching
all the important cases, and with less false positives;
no objection from jmc@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	dcoppa@cvs.openbsd.org	2017/06/23 13:28:03

Modified files:
	.              : 3RDPARTY 

Log message:
Update


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/23 13:50:42

Modified files:
	www            : Makefile 
	www/surf       : Makefile 
	www/surf/pkg   : PLIST 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	www/surf2      : Makefile distinfo 
	www/surf2/patches: patch-Makefile patch-config_def_h 
	                   patch-config_mk patch-surf_1 
	www/surf2/pkg  : DESCR PLIST 

Log message:
Remove www/surf2 in favor of www/surf

Prodded by jung@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/23 13:51:07

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h 

Log message:
Once you have forked into two processes, setting a global flag
in one process does not mean the other process can see the
change. Nuke the pointless IFI_NEW_LLADDR.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/23 13:56:57

Modified files:
	regress/usr.bin/mdoclint: mdoclint 

Log message:
delete unused "lastline" state variable and some commented out lines;
no functional change


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/23 14:57:51

Modified files:
	gnu/lib/libiberty/src/testsuite: test-demangle.c 
	                                 test-expandargv.c 
	                                 test-pexecute.c 

Log message:
Make libiberty test programs compile and run without segfault.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/23 15:04:34

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
splitting a text box sometimes requires wrapping it in a list


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/23 16:59:27

Modified files:
	usr.bin/mandoc : eqn_html.c 

Log message:
Consistently treat character escape sequences as operators,
not as letters, even if their names contain letters.

This is certainly not perfect, but code to recognize that \(*a is
not an operator but a letter would need a huge table, or Unicode
character property support, which won't happen at this time.


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/23 18:20:18

Log message:
    import telegram-purple
    
    Telegram-purple is a libpurple protocol plugin that adds support for the
    Telegram messenger.
    
    OK, feedback and tweaks bcallah@, sthen@
    
    Status:
    
    Vendor Tag:	czarkoff
    Release Tags:	czarkoff_20170624
    
    N ports/net/telegram-purple/Makefile
    N ports/net/telegram-purple/distinfo
    N ports/net/telegram-purple/patches/patch-Makefile_in
    N ports/net/telegram-purple/patches/patch-tgl_Makefile_in
    N ports/net/telegram-purple/pkg/DESCR
    N ports/net/telegram-purple/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/23 18:25:12

Modified files:
	net            : Makefile 

Log message:
+telegram-purple


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/23 23:24:11

Modified files:
	usr.bin/ssh    : session.c 

Log message:
no need to call log_init to reinitialise logged PID in child sessions,
since we haven't called openlog() in log_init() since 1999; ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/23 23:35:05

Modified files:
	usr.bin/ssh    : ssh_config.5 sshconnect.c sshd.8 

Log message:
use HostKeyAlias if specified instead of hostname for matching host
certificate principal names; bz#2728; ok dtucker@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/23 23:37:44

Modified files:
	usr.bin/ssh    : sshconnect.c 

Log message:
switch sshconnect.c from (slightly abused) select() to poll();
ok deraadt@ a while back


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/24 00:28:50

Modified files:
	usr.bin/ssh    : sshd.8 

Log message:
word fix;


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/24 00:34:38

Modified files:
	usr.bin/ssh    : auth.c auth.h auth2-gss.c auth2-hostbased.c 
	                 auth2-pubkey.c auth2.c gss-serv.c monitor.c 
	                 servconf.c servconf.h session.c ssh-gss.h 
	                 sshd_config.5 

Log message:
refactor authentication logging

optionally record successful auth methods and public credentials
used in a file accessible to user sessions

feedback and ok markus@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/24 00:35:24

Modified files:
	regress/usr.bin/ssh: Makefile 
Added files:
	regress/usr.bin/ssh: authinfo.sh 

Log message:
regress test for ExposeAuthInfo


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/24 00:38:11

Modified files:
	usr.bin/ssh    : packet.c 

Log message:
don't pass pointer to struct sshcipher between privsep processes,
just redo the lookup in each using the already-passed cipher name.
bz#2704 based on patch from Brooks Davis; ok markus dtucker


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/24 00:57:04

Modified files:
	usr.bin/ssh    : sshd_config.5 

Log message:
spelling;


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/24 01:08:57

Modified files:
	usr.bin/ssh    : sshd_config.5 

Log message:
correct env var name


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/24 01:36:39

Modified files:
	x11/gnome/session: Makefile 
Added files:
	x11/gnome/session/patches: patch-configure_ac 
	                           patch-gnome-session_Makefile_am 
	                           patch-gnome-session_gsm-consolekit_c 
	                           patch-gnome-session_gsm-manager_c 
	                           patch-gnome-session_gsm-system_c 
	                           patch-gnome-session_gsm-system_h 
	                           patch-gnome-session_gsm-systemd_c 
	                           patch-gnome-session_org_freedesktop_DBus_xml 

Log message:
Merge fixes from upstream to make sure gnome processes are properly killed
at logout.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/24 01:48:34

Modified files:
	devel/py-hypothesis: Makefile distinfo 

Log message:
Update to py-hypothesis 3.11.6


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	kettenis@cvs.openbsd.org	2017/06/24 02:54:32

Modified files:
	driver/xf86-video-intel/src/sna: kgem.c 

Log message:
Initialize flags member of struct drm_915_gem_mmap as the upcoming inteldrm(4)
update checks it.

Upstream fixed this differently, but that fix doesn't work for us as our
ioctl(2) subsystem works differently from Linux.

ok jsg@, tom@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/24 03:51:46

ports/devel/py-jupyter_client/patches

Update of /cvs/ports/devel/py-jupyter_client/patches
In directory cvs.openbsd.org:/tmp/cvs-serv42511/patches

Log Message:
Directory /cvs/ports/devel/py-jupyter_client/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/24 03:52:46

Modified files:
	devel/py-jupyter_client: Makefile distinfo 
	devel/py-jupyter_client/pkg: PLIST 
Added files:
	devel/py-jupyter_client/patches: patch-setup_py 

Log message:
Update to py-jupyter_client 5.1.0


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/24 04:09:26

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h privsep.c privsep.h 

Log message:
Use a local variable rather than a global flag to record
the reception of a IMSG_HUP message and trigger the
desired restart.

Nuke the now pointless IFI_HUP.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/24 04:27:15

Modified files:
	x11/mate/themes: Makefile distinfo 
	x11/mate/themes/pkg: PLIST 

Log message:
update to 3.22.12


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/24 04:29:22

Modified files:
	textproc/py-numpydoc: Makefile distinfo 
	textproc/py-numpydoc/pkg: PLIST 

Log message:
Update to py-numpydoc 0.7.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/24 05:22:19

Modified files:
	www/kibana     : Makefile distinfo 
	www/kibana/pkg : PLIST 

Log message:
update to kibana-5.4.2, from Pavel Korovin (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/06/24 06:31:59

Modified files:
	devel/apr      : Makefile distinfo 
	devel/apr/pkg  : PLIST 

Log message:
Update to APR 1.6.2.
Patch by David CARLIER (devnexen at gmail)


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/06/24 06:32:20

Modified files:
	devel/apr-util : Makefile distinfo 
	devel/apr-util/pkg: PLIST 

Log message:
Update to APR-util 1.6.0.
Patch by David CARLIER (devnexen at gmail)


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 07:49:19

Modified files:
	usr.bin/mandoc : st.in 
	share/man/man7 : mdoc.7 

Log message:
Delete .St -p1003.1-2013.
It is an OpenBSD addition that did not get used a single time in
three years, and groff did not pick it up either, so removing it
does not affect any existing manuals anywhere.
Cleanup suggested by jmc@, OK bentley@.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	dcoppa@cvs.openbsd.org	2017/06/24 07:58:55

Modified files:
	lib/freetype/docs: documentation.html index.html 
	                   subpixel-hinting.html 
	                   text-rendering-general.html 
	lib/freetype/docs/css: freetype2.css 
	lib/freetype/docs/design: design-4.html design-5.html 
	lib/freetype/docs/glyphs: glyphs-1.html glyphs-2.html 
	                          glyphs-3.html glyphs-4.html 
	                          glyphs-5.html glyphs-6.html 
	                          glyphs-7.html index.html 
	lib/freetype/docs/tutorial: index.html step1.html step2.html 
	                            step3.html 

Log message:
Update to freetype-doc-2.8


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 08:38:28

Modified files:
	usr.bin/mandoc : att.c cgi.c main.c man_html.c man_validate.c 
	                 mandoc.1 mandoc.h mandocdb.c mdoc_html.c 
	                 mdoc_validate.c read.c roff.c roff.h 
	                 roff_html.c roff_term.c st.c 

Log message:
Split -Wstyle into -Wstyle and the even lower -Wbase, and add
-Wopenbsd and -Wnetbsd to check conventions for the base system of
a specific operating system.  Mark operating system specific messages
with "(OpenBSD)" at the end.

Please use just "-Tlint" to check base system manuals (defaulting
to -Wall, which is now -Wbase), but prefer "-Tlint -Wstyle" for the
manuals of portable software projects you maintain that are not
part of OpenBSD base, to avoid bogus recommendations about base
system conventions that do not apply.

Issue originally reported by semarie@, solution using
an idea from tedu@, discussed with jmc@ and jca@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/24 09:07:24

Modified files:
	devel/py-testpath: Makefile 

Log message:
Fix RDEP, py-pathlib not need for py3 flavor


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/24 09:12:43

Modified files:
	databases/py-pickleshare: Makefile 

Log message:
Fix RDEP, py-pathlib not need for py3 flavor


CVSROOT:	/cvs
Module name:	www
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 09:13:08

Modified files:
	openssh        : list.html 

Log message:
typo; from <Andrew dot Darqui at gmail dot com>


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 09:59:28

Modified files:
	usr.bin/mandoc : mandoc.h mdoc_validate.c read.c mandoc.1 

Log message:
in the base system, suggest leaving .Os blank; inspired by mdoclint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 10:10:01

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
obvious removal of -o, now covered by mandoc


CVSROOT:	/cvs
Module name:	src
Changes by:	martijn@cvs.openbsd.org	2017/06/24 10:30:47

Modified files:
	usr.bin/vi/common: mem.h 

Log message:
Fix a check in ADD_SPACE_{GOTO,RET} that potentially allowed for a
NULL-dereference.

OK tom@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 11:36:50

Modified files:
	usr.bin/mandoc : msec.in 

Log message:
delete old, undocumented, obsolete section names that nobody uses


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 12:58:09

Modified files:
	usr.bin/mandoc : mandoc.h mdoc_validate.c read.c 

Log message:
operating system dependent message about unknown architecture;
inspired by mdoclint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 13:05:36

Modified files:
	usr.bin/mandoc : mandoc.1 

Log message:
document message "unknown architecture"


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/24 13:36:08

Modified files:
	x11            : Makefile 
Removed files:
	x11/mrxvt      : Makefile distinfo 
	x11/mrxvt/files: mrxvt.desktop 
	x11/mrxvt/patches: patch-configure_ac patch-doc_mrxvt_1 
	                   patch-src_init_c patch-src_mpng_c 
	                   patch-src_ptytty_c patch-src_rxvt_h 
	x11/mrxvt/pkg  : DESCR PLIST 

Log message:
Remove x11/mrxvt.

Mrxvt is based on rxvt which we recently removed due to the fact that
upstream is dead and that the code is vulnerable to CVE-2017-7483.

Mrxvt is vulnerable as well, and latest release is from 2008.

OK danj@, tb@, bentley@, bcallah@, dcoppa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/06/24 13:40:24

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register removal of mrxvt.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/24 14:19:42

Modified files:
	www/trac       : Makefile distinfo 
	www/trac/pkg   : PLIST 

Log message:
update to trac-1.2.2


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/24 14:32:39

Modified files:
	sys/net        : pf_norm.c 

Log message:
To avoid packet loss due to reuse of the 16 bit IPv4 fragment id,
we need suitable data structures.  Organize the pf fragments with
two red-black trees.  One is holding the address and protocol
information and the other has only the fragment id.  This will allow
to drop fragemts for specific connections more aggressively.  `
from markus@; OK sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/24 15:08:28

Modified files:
	usr.bin/mandoc : mandoc.1 

Log message:
delete useless .Ns macro that jmc@ found with mdoclint(1)


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/24 17:32:57

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c kroute.c 
	                 privsep.c privsep.h 

Log message:
Tweak handling of HUP and new LLADDR. Just use expose and use sighup()
function. Don't exit dispatch() loop on SIGHUP, wait for privileged
child to execvp() dhclient. Eliminate struct imsg_hup since its
contents were not being used except in priv_cleanup(). And
'active_addr' works just as well there.

Cleaner and eliminates some extraneous log entries.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/24 18:38:38

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Oops. Revert unintentional/premature functional change. Deleting the
address configured by dhclient should cause exit, not restart. There
is no need to invoke sendhup(). Just exit and let the privileged child
follow.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/24 18:44:49

Modified files:
	sbin/dhclient  : kroute.c 

Log message:
priv_add_address() is no longer invoked to signal the deletion of the
active address. So no need to check for the magic INADDR_ANY address.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	deraadt@cvs.openbsd.org	2017/06/24 21:27:24

Modified files:
	distrib/sets/lists/xbase: mi 
	distrib/sets/lists/xshare: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/06/25 00:54:26

Modified files:
	sys/conf       : makegap.sh 

Log message:
ldd is more strict wrt semicolons, they can only appear after an
expression line. Removing the extra semicolons makes both ld and
ldd accept the link script generated, although ldd produces a wrong
object file on arm64; ok kettenis@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/25 01:23:54

Modified files:
	share/man/man7 : man.7 
	usr.bin/mandoc : man_html.c man_macro.c man_term.c 
	                 man_validate.c mandoc.1 roff.c roff.h 

Log message:
Add support for the MT and ME mailto macros, used for example in wg(8).

feedback and ok schwarze@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/25 01:44:45

Modified files:
	mail/mozilla-thunderbird: Makefile distinfo 
	mail/thunderbird-i18n: Makefile.inc distinfo 

Log message:
Bugfix update to thunderbird 52.2.1.

Fixes issues with gmail, see
https://www.mozilla.org/en-US/thunderbird/52.2.1/releasenotes/


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/25 02:31:44

Modified files:
	regress/bin/ksh/edit: edit.c 

Log message:
Capture SIGINT and print out all received output so far. Useful when debugging
broken tests.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/25 02:49:47

Modified files:
	geo/mapproxy   : Makefile distinfo 

Log message:
Update to mapproxy 1.10.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/25 02:50:41

Modified files:
	geo/mapserver  : Makefile distinfo 

Log message:
Bugfix update to mapserver 7.0.6.

See http://mapserver.org/development/changelog/changelog-7-0.html#changelog-7-0-6


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/25 02:51:53

Modified files:
	bin/ksh        : emacs.c 

Log message:
Don't output partial UTF-8 characters in ksh emacs mode. Instead, try to read a
complete UTF-8 character first. Fixes an issue while running ksh in tmux where
UTF-8 characters inserted in columns other than the last one are discarded.

With help from nicm@ and schwarze@ who also wrote the UTF-8 validation, thanks!

ok schwarze@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 03:21:05

Modified files:
	x11/gnome/latexila: Makefile distinfo 

Log message:
Update to latexila-3.24.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 03:25:18

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.75.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 03:25:30

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.112.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 03:49:48

Modified files:
	security/libhttpseverywhere: Makefile 

Log message:
Consistency.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 04:08:54

Modified files:
	sysutils/amazon-ssm-agent: Makefile distinfo 

Log message:
Update to amazon-ssm-agent-2.0.834.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/25 04:31:47

Modified files:
	net/xl2tpd     : Makefile distinfo 
	net/xl2tpd/pkg : PLIST 

Log message:
Update to xl2tpd 1.3.9.

ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 05:07:19

Modified files:
	devel/meson    : meson.port.mk 

Log message:
Pass MAKE_ENV, FAKE_SETUP and ALL_TEST_ENV so that we can benefit from the magic
of bsd.port.mk. Fixes $CC path detection.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 05:07:58

Modified files:
	x11/gnome/recipes: Makefile 

Log message:
Remove workaround in the pre-build target; needs a recent meson.build.mk


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 05:16:38

Modified files:
	devel/meson    : meson.port.mk 

Log message:
By default, don't use "-Wl,--no-undefined when linking", it's fine to have
undefined references to libc functions.
CONFIGURE_ARGS += -Db_lundef=false


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/25 05:23:42

Modified files:
	sysutils/ansible: Makefile 
Added files:
	sysutils/ansible/patches: 
	                          patch-lib_ansible_modules_packaging_os_openbsd_pkg_py 

Log message:
handle versionless names with branch notation

reported by landry@ patch by Patrik Lundin via upstream


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 05:24:29

Modified files:
	devel/meson    : meson.port.mk 

Log message:
meson(1) needs UTF-8 encoding.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 05:25:01

Modified files:
	security/libhttpseverywhere: Makefile 

Log message:
-Db_lundef=false is now the default.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 05:41:10

ports/devel/appstream-glib/patches

Update of /cvs/ports/devel/appstream-glib/patches
In directory cvs.openbsd.org:/tmp/cvs-serv74650/patches

Log Message:
Directory /cvs/ports/devel/appstream-glib/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 06:05:09

Modified files:
	devel/appstream-glib: Makefile distinfo 
	devel/appstream-glib/pkg: PLIST 
Added files:
	devel/appstream-glib/patches: 
	                              patch-libappstream-builder_meson_build 
	                              patch-libappstream-glib_meson_build 

Log message:
Update to appstream-glib-0.7.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 06:05:53

Modified files:
	security/libhttpseverywhere: Makefile 
	security/libhttpseverywhere/patches: patch-meson_build 

Log message:
Use soversion instead of version (which can be computed automatically from
soversion). Meson uses -Wl,-soname which fucks things up.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/25 06:48:04

Modified files:
	regress/usr.bin/mandoc/db: Makefile 

Log message:
add some empty targets that were missing


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/25 06:48:58

Modified files:
	regress/usr.bin/mandoc/char/space: esct-man.out_lint 
	                                   esct-mdoc.out_lint 
	                                   tab-man.out_lint tab.out_lint 
	                                   trailing-mdoc.out_lint 
	regress/usr.bin/mandoc/char/unicode: input.out_lint 
	                                     invalid.out_lint 
	regress/usr.bin/mandoc/eqn/define: infinite.out_lint 
	                                   invalid.out_lint 
	regress/usr.bin/mandoc/eqn/over: noarg.out_lint 
	regress/usr.bin/mandoc/man/B: args.out_lint blank.out_lint 
	regress/usr.bin/mandoc/man/IP: empty.out_lint 
	regress/usr.bin/mandoc/man/OP: args.out_lint 
	regress/usr.bin/mandoc/man/PD: args.out_lint 
	regress/usr.bin/mandoc/man/PP: args.out_lint empty.out_lint 
	regress/usr.bin/mandoc/man/RS: REarg.out_lint empty.out_lint 
	                               lonelyRE.out_lint noRE.out_lint 
	regress/usr.bin/mandoc/man/SH: broken.out_lint 
	                               broken_eline.out_lint 
	                               empty_before.out_lint 
	                               noarg.out_lint 
	regress/usr.bin/mandoc/man/SS: broken.out_lint 
	                               broken_eline.out_lint 
	                               noarg.out_lint 
	regress/usr.bin/mandoc/man/TH: case.out_lint nobody.out_lint 
	                               sixargs.out_lint 
	regress/usr.bin/mandoc/man/TP: broken.out_lint double.out_lint 
	                               eof.out_lint 
	regress/usr.bin/mandoc/man/TS: break.out_lint 
	regress/usr.bin/mandoc/man/UR: args.out_lint noUE.out_lint 
	regress/usr.bin/mandoc/man/blank: afterSH.out_lint 
	                                  afterSS.out_lint line.out_lint 
	regress/usr.bin/mandoc/man/nf: args.out_lint dupe.out_lint 
	regress/usr.bin/mandoc/mdoc/Ad: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/An: break.out_lint 
	regress/usr.bin/mandoc/mdoc/Aq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Ar: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/At: invalid.out_lint 
	regress/usr.bin/mandoc/mdoc/Bd: badargs.out_lint 
	                                beforeNAME.out_lint 
	                                blank.out_lint break.out_lint 
	                                broken.out_lint nested.out_lint 
	                                unclosed.out_lint 
	regress/usr.bin/mandoc/mdoc/Bf: badargs.out_lint break.out_lint 
	                                broken.out_lint 
	                                multiargs.out_lint 
	regress/usr.bin/mandoc/mdoc/Bk: badarg.out_lint broken.out_lint 
	regress/usr.bin/mandoc/mdoc/Bl: badargs.out_lint bareIt.out_lint 
	                                bareTa.out_lint break.out_lint 
	                                breakingIt.out_lint 
	                                broken.out_lint column.out_lint 
	                                empty.out_lint 
	                                emptyhead.out_lint 
	                                emptyitem.out_lint 
	                                emptytag.out_lint noIt.out_lint 
	                                notype.out_lint tag.out_lint 
	regress/usr.bin/mandoc/mdoc/Brq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Bx: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Cd: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Cm: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/D1: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Db: args.out_lint 
	regress/usr.bin/mandoc/mdoc/Dd: badarg.out_lint dupe.out_lint 
	                                late.out_lint long.out_lint 
	                                manarg.out_lint noarg.out_lint 
	                                order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dl: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Dq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Dt: badsec.out_lint case.out_lint 
	                                dupe.out_lint fourargs.out_lint 
	                                late.out_lint missing.out_lint 
	                                noarg.out_lint nobody.out_lint 
	                                nosec.out_lint order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dv: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Em: noarg.out_lint punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Eo: break.out_lint obsolete.out_lint 
	                                unclosed.out_lint 
	regress/usr.bin/mandoc/mdoc/Er: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ev: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ex: noname.out_lint nostd.out_lint 
	regress/usr.bin/mandoc/mdoc/Fd: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Fl: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Fo: noarg.out_lint nohead.out_lint 
	                                obsolete.out_lint punct.out_lint 
	                                warn.out_lint 
	regress/usr.bin/mandoc/mdoc/Ic: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/In: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Lb: badargs.out_lint 
	regress/usr.bin/mandoc/mdoc/Li: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Lk: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ms: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Mt: simple.out_lint 
	regress/usr.bin/mandoc/mdoc/Nd: broken.out_lint noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Nm: badNAME.out_lint 
	                                badNAMEuse.out_lint 
	                                break.out_lint broken.out_lint 
	                                punct.out_lint 
	regress/usr.bin/mandoc/mdoc/No: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Ns: position.out_lint 
	regress/usr.bin/mandoc/mdoc/Oo: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Op: break.out_lint broken.out_lint 
	                                punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Os: dupe.out_lint late.out_lint 
	regress/usr.bin/mandoc/mdoc/Pa: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Pf: spacing.out_lint 
	regress/usr.bin/mandoc/mdoc/Pp: arg.out_lint 
	regress/usr.bin/mandoc/mdoc/Qq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Rs: allch.out_lint args.out_lint 
	                                empty.out_lint 
	regress/usr.bin/mandoc/mdoc/Rv: noname.out_lint nostd.out_lint 
	regress/usr.bin/mandoc/mdoc/Sh: badNAME.out_lint before.out_lint 
	                                empty.out_lint 
	                                emptyNAME.out_lint 
	                                first.out_lint nohead.out_lint 
	                                order.out_lint 
	                                orderNAME.out_lint 
	                                parbefore.out_lint 
	                                parborder.out_lint 
	                                punctNAME.out_lint 
	                                subbefore.out_lint 
	regress/usr.bin/mandoc/mdoc/Sm: badarg.out_lint twoarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Sq: empty.out_lint 
	regress/usr.bin/mandoc/mdoc/St: badargs.out_lint call.out_lint 
	regress/usr.bin/mandoc/mdoc/Sx: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Sy: noarg.out_lint punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Tn: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ud: arg.out_lint 
	regress/usr.bin/mandoc/mdoc/Ux: punct.out_lint 
	regress/usr.bin/mandoc/mdoc/Va: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Vt: noarg.out_lint 
	regress/usr.bin/mandoc/mdoc/Xr: args.out_lint 
	regress/usr.bin/mandoc/mdoc/blank: comment.out_lint 
	                                   line.out_lint list.out_lint 
	regress/usr.bin/mandoc/mdoc/break: brokenbreaker.out_lint 
	                                   notopen.out_lint 
	                                   tail.out_lint twice.out_lint 
	                                   two.out_lint 
	regress/usr.bin/mandoc/roff/args: man.out_lint mdoc.out_lint 
	                                  roff.out_lint 
	regress/usr.bin/mandoc/roff/br: args.out_lint 
	regress/usr.bin/mandoc/roff/cc: basic.out_lint 
	regress/usr.bin/mandoc/roff/cond: close.out_lint if.out_lint 
	regress/usr.bin/mandoc/roff/de: escname.out_lint indir.out_lint 
	                                infinite.out_lint 
	regress/usr.bin/mandoc/roff/esc: B.out_lint h.out_lint 
	                                 ignore.out_lint l.out_lint 
	                                 w.out_lint 
	regress/usr.bin/mandoc/roff/ft: badargs-mdoc.out_lint 
	                                badargs.out_lint 
	regress/usr.bin/mandoc/roff/ig: basic.out_lint 
	regress/usr.bin/mandoc/roff/it: badarg.out_lint 
	regress/usr.bin/mandoc/roff/nr: divzero.out_lint 
	                                escname.out_lint 
	regress/usr.bin/mandoc/roff/sp: badargs-man.out_lint 
	regress/usr.bin/mandoc/roff/string: name.out_lint std.out_lint 
	regress/usr.bin/mandoc/roff/tr: args.out_lint 
	regress/usr.bin/mandoc/tbl/data: block_unclosed.out_lint 
	                                 empty.out_lint 
	regress/usr.bin/mandoc/tbl/layout: complex.out_lint 
	                                   empty.out_lint 
	regress/usr.bin/mandoc/tbl/macro: man.out_lint nested.out_lint 
	regress/usr.bin/mandoc/tbl/mod: badfont.out_lint font.out_lint 
	regress/usr.bin/mandoc/tbl/opt: invalid.out_lint 

Log message:
cope with changes in BASE messages


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/25 07:35:42

Modified files:
	geo/qgis       : Makefile distinfo 
	geo/qgis/pkg   : PLIST 

Log message:
Update to QGIS 2.18.10.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/25 08:01:02

src/regress/usr.bin/mandoc/man/MT

Update of /cvs/src/regress/usr.bin/mandoc/man/MT
In directory cvs.openbsd.org:/tmp/cvs-serv29759/MT

Log Message:
Directory /cvs/src/regress/usr.bin/mandoc/man/MT added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/25 08:02:23

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/sparc64/conf: Makefile.sparc64 

Log message:
dull dependency for copying makegap.sh to obj, so that installs
without src and comp work.  That is what we've designed for, but since
we always have src and comp on our systems it is so easy to slide...
problem first noted by rpe.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/25 08:09:14

Modified files:
	regress/usr.bin/mandoc/man: Makefile 
Added files:
	regress/usr.bin/mandoc/man/MT: Makefile args.in args.out_ascii 
	                               args.out_lint noME.in 
	                               noME.out_ascii noME.out_lint 

Log message:
test new MT macro


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-alicloud

Update of /cvs/ports/sysutils/terraform/provider-alicloud
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-alicloud

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-alicloud added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-archive

Update of /cvs/ports/sysutils/terraform/provider-archive
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-archive

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-archive added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-arukas

Update of /cvs/ports/sysutils/terraform/provider-arukas
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-arukas

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-arukas added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-atlas

Update of /cvs/ports/sysutils/terraform/provider-atlas
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-atlas

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-atlas added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-aws

Update of /cvs/ports/sysutils/terraform/provider-aws
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-aws

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-aws added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-azure

Update of /cvs/ports/sysutils/terraform/provider-azure
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-azure

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-azure added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-azurerm

Update of /cvs/ports/sysutils/terraform/provider-azurerm
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-azurerm

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-azurerm added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-bitbucket

Update of /cvs/ports/sysutils/terraform/provider-bitbucket
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-bitbucket

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-bitbucket added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-chef

Update of /cvs/ports/sysutils/terraform/provider-chef
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-chef

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-chef added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-circonus

Update of /cvs/ports/sysutils/terraform/provider-circonus
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-circonus

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-circonus added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-clc

Update of /cvs/ports/sysutils/terraform/provider-clc
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-clc

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-clc added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-cloudflare

Update of /cvs/ports/sysutils/terraform/provider-cloudflare
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-cloudflare

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-cloudflare added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-cloudstack

Update of /cvs/ports/sysutils/terraform/provider-cloudstack
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-cloudstack

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-cloudstack added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-cobbler

Update of /cvs/ports/sysutils/terraform/provider-cobbler
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-cobbler

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-cobbler added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-consul

Update of /cvs/ports/sysutils/terraform/provider-consul
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-consul

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-consul added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-datadog

Update of /cvs/ports/sysutils/terraform/provider-datadog
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-datadog

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-datadog added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-digitalocean

Update of /cvs/ports/sysutils/terraform/provider-digitalocean
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-digitalocean

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-digitalocean added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-dme

Update of /cvs/ports/sysutils/terraform/provider-dme
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-dme

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-dme added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-dns

Update of /cvs/ports/sysutils/terraform/provider-dns
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-dns

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-dns added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-dnsimple

Update of /cvs/ports/sysutils/terraform/provider-dnsimple
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-dnsimple

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-dnsimple added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-docker

Update of /cvs/ports/sysutils/terraform/provider-docker
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-docker

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-docker added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-dyn

Update of /cvs/ports/sysutils/terraform/provider-dyn
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-dyn

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-dyn added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-external

Update of /cvs/ports/sysutils/terraform/provider-external
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-external

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-external added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-fastly

Update of /cvs/ports/sysutils/terraform/provider-fastly
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-fastly

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-fastly added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-github

Update of /cvs/ports/sysutils/terraform/provider-github
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-github

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-github added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-gitlab

Update of /cvs/ports/sysutils/terraform/provider-gitlab
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-gitlab

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-gitlab added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-google

Update of /cvs/ports/sysutils/terraform/provider-google
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-google

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-google added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:00

ports/sysutils/terraform/provider-grafana

Update of /cvs/ports/sysutils/terraform/provider-grafana
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-grafana

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-grafana added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-heroku

Update of /cvs/ports/sysutils/terraform/provider-heroku
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-heroku

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-heroku added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-http

Update of /cvs/ports/sysutils/terraform/provider-http
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-http

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-http added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-icinga2

Update of /cvs/ports/sysutils/terraform/provider-icinga2
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-icinga2

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-icinga2 added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-ignition

Update of /cvs/ports/sysutils/terraform/provider-ignition
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-ignition

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-ignition added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-influxdb

Update of /cvs/ports/sysutils/terraform/provider-influxdb
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-influxdb

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-influxdb added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-kubernetes

Update of /cvs/ports/sysutils/terraform/provider-kubernetes
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-kubernetes

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-kubernetes added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-librato

Update of /cvs/ports/sysutils/terraform/provider-librato
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-librato

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-librato added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-local

Update of /cvs/ports/sysutils/terraform/provider-local
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-local

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-local added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-logentries

Update of /cvs/ports/sysutils/terraform/provider-logentries
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-logentries

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-logentries added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-mailgun

Update of /cvs/ports/sysutils/terraform/provider-mailgun
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-mailgun

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-mailgun added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-mysql

Update of /cvs/ports/sysutils/terraform/provider-mysql
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-mysql

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-mysql added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-newrelic

Update of /cvs/ports/sysutils/terraform/provider-newrelic
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-newrelic

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-newrelic added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-nomad

Update of /cvs/ports/sysutils/terraform/provider-nomad
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-nomad

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-nomad added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-ns1

Update of /cvs/ports/sysutils/terraform/provider-ns1
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-ns1

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-ns1 added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-null

Update of /cvs/ports/sysutils/terraform/provider-null
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-null

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-null added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-oneandone

Update of /cvs/ports/sysutils/terraform/provider-oneandone
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-oneandone

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-oneandone added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-opc

Update of /cvs/ports/sysutils/terraform/provider-opc
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-opc

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-opc added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-openstack

Update of /cvs/ports/sysutils/terraform/provider-openstack
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-openstack

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-openstack added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-opsgenie

Update of /cvs/ports/sysutils/terraform/provider-opsgenie
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-opsgenie

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-opsgenie added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-ovh

Update of /cvs/ports/sysutils/terraform/provider-ovh
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-ovh

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-ovh added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-packet

Update of /cvs/ports/sysutils/terraform/provider-packet
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-packet

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-packet added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-pagerduty

Update of /cvs/ports/sysutils/terraform/provider-pagerduty
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-pagerduty

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-pagerduty added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-postgresql

Update of /cvs/ports/sysutils/terraform/provider-postgresql
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-postgresql

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-postgresql added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-powerdns

Update of /cvs/ports/sysutils/terraform/provider-powerdns
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-powerdns

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-powerdns added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-profitbricks

Update of /cvs/ports/sysutils/terraform/provider-profitbricks
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-profitbricks

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-profitbricks added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-rabbitmq

Update of /cvs/ports/sysutils/terraform/provider-rabbitmq
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-rabbitmq

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-rabbitmq added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-rancher

Update of /cvs/ports/sysutils/terraform/provider-rancher
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-rancher

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-rancher added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-random

Update of /cvs/ports/sysutils/terraform/provider-random
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-random

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-random added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-rundeck

Update of /cvs/ports/sysutils/terraform/provider-rundeck
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-rundeck

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-rundeck added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-scaleway

Update of /cvs/ports/sysutils/terraform/provider-scaleway
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-scaleway

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-scaleway added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-softlayer

Update of /cvs/ports/sysutils/terraform/provider-softlayer
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-softlayer

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-softlayer added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-spotinst

Update of /cvs/ports/sysutils/terraform/provider-spotinst
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-spotinst

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-spotinst added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-statuscake

Update of /cvs/ports/sysutils/terraform/provider-statuscake
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-statuscake

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-statuscake added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-template

Update of /cvs/ports/sysutils/terraform/provider-template
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-template

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-template added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:01

ports/sysutils/terraform/provider-terraform

Update of /cvs/ports/sysutils/terraform/provider-terraform
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-terraform

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-terraform added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:02

ports/sysutils/terraform/provider-tls

Update of /cvs/ports/sysutils/terraform/provider-tls
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-tls

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-tls added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:02

ports/sysutils/terraform/provider-triton

Update of /cvs/ports/sysutils/terraform/provider-triton
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-triton

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-triton added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:02

ports/sysutils/terraform/provider-ultradns

Update of /cvs/ports/sysutils/terraform/provider-ultradns
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-ultradns

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-ultradns added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:02

ports/sysutils/terraform/provider-vault

Update of /cvs/ports/sysutils/terraform/provider-vault
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-vault

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-vault added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:02

ports/sysutils/terraform/provider-vcd

Update of /cvs/ports/sysutils/terraform/provider-vcd
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-vcd

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-vcd added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:02:02

ports/sysutils/terraform/provider-vsphere

Update of /cvs/ports/sysutils/terraform/provider-vsphere
In directory cvs.openbsd.org:/tmp/cvs-serv32016/provider-vsphere

Log Message:
Directory /cvs/ports/sysutils/terraform/provider-vsphere added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:05:01

ports/sysutils/terraform/terraform

Update of /cvs/ports/sysutils/terraform/terraform
In directory cvs.openbsd.org:/tmp/cvs-serv83391/terraform

Log Message:
Directory /cvs/ports/sysutils/terraform/terraform added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:05:09

ports/sysutils/terraform/terraform/pkg

Update of /cvs/ports/sysutils/terraform/terraform/pkg
In directory cvs.openbsd.org:/tmp/cvs-serv59128/terraform/pkg

Log Message:
Directory /cvs/ports/sysutils/terraform/terraform/pkg added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 09:11:00

Modified files:
	sysutils/terraform: Makefile 
	sysutils/terraform/pkg: DESCR PLIST 
Added files:
	sysutils/terraform: Makefile.inc 
	sysutils/terraform/provider-alicloud: Makefile distinfo 
	sysutils/terraform/provider-archive: Makefile distinfo 
	sysutils/terraform/provider-arukas: Makefile distinfo 
	sysutils/terraform/provider-atlas: Makefile distinfo 
	sysutils/terraform/provider-aws: Makefile distinfo 
	sysutils/terraform/provider-azure: Makefile distinfo 
	sysutils/terraform/provider-azurerm: Makefile distinfo 
	sysutils/terraform/provider-bitbucket: Makefile distinfo 
	sysutils/terraform/provider-chef: Makefile distinfo 
	sysutils/terraform/provider-circonus: Makefile distinfo 
	sysutils/terraform/provider-clc: Makefile distinfo 
	sysutils/terraform/provider-cloudflare: Makefile distinfo 
	sysutils/terraform/provider-cloudstack: Makefile distinfo 
	sysutils/terraform/provider-cobbler: Makefile distinfo 
	sysutils/terraform/provider-consul: Makefile distinfo 
	sysutils/terraform/provider-datadog: Makefile distinfo 
	sysutils/terraform/provider-digitalocean: Makefile distinfo 
	sysutils/terraform/provider-dme: Makefile distinfo 
	sysutils/terraform/provider-dns: Makefile distinfo 
	sysutils/terraform/provider-dnsimple: Makefile distinfo 
	sysutils/terraform/provider-docker: Makefile distinfo 
	sysutils/terraform/provider-dyn: Makefile distinfo 
	sysutils/terraform/provider-external: Makefile distinfo 
	sysutils/terraform/provider-fastly: Makefile distinfo 
	sysutils/terraform/provider-github: Makefile distinfo 
	sysutils/terraform/provider-gitlab: Makefile distinfo 
	sysutils/terraform/provider-google: Makefile distinfo 
	sysutils/terraform/provider-grafana: Makefile distinfo 
	sysutils/terraform/provider-heroku: Makefile distinfo 
	sysutils/terraform/provider-http: Makefile distinfo 
	sysutils/terraform/provider-icinga2: Makefile distinfo 
	sysutils/terraform/provider-ignition: Makefile distinfo 
	sysutils/terraform/provider-influxdb: Makefile distinfo 
	sysutils/terraform/provider-kubernetes: Makefile distinfo 
	sysutils/terraform/provider-librato: Makefile distinfo 
	sysutils/terraform/provider-local: Makefile distinfo 
	sysutils/terraform/provider-logentries: Makefile distinfo 
	sysutils/terraform/provider-mailgun: Makefile distinfo 
	sysutils/terraform/provider-mysql: Makefile distinfo 
	sysutils/terraform/provider-newrelic: Makefile distinfo 
	sysutils/terraform/provider-nomad: Makefile distinfo 
	sysutils/terraform/provider-ns1: Makefile distinfo 
	sysutils/terraform/provider-null: Makefile distinfo 
	sysutils/terraform/provider-oneandone: Makefile distinfo 
	sysutils/terraform/provider-opc: Makefile distinfo 
	sysutils/terraform/provider-openstack: Makefile distinfo 
	sysutils/terraform/provider-opsgenie: Makefile distinfo 
	sysutils/terraform/provider-ovh: Makefile distinfo 
	sysutils/terraform/provider-packet: Makefile distinfo 
	sysutils/terraform/provider-pagerduty: Makefile distinfo 
	sysutils/terraform/provider-postgresql: Makefile distinfo 
	sysutils/terraform/provider-powerdns: Makefile distinfo 
	sysutils/terraform/provider-profitbricks: Makefile distinfo 
	sysutils/terraform/provider-rabbitmq: Makefile distinfo 
	sysutils/terraform/provider-rancher: Makefile distinfo 
	sysutils/terraform/provider-random: Makefile distinfo 
	sysutils/terraform/provider-rundeck: Makefile distinfo 
	sysutils/terraform/provider-scaleway: Makefile distinfo 
	sysutils/terraform/provider-softlayer: Makefile distinfo 
	sysutils/terraform/provider-spotinst: Makefile distinfo 
	sysutils/terraform/provider-statuscake: Makefile distinfo 
	sysutils/terraform/provider-template: Makefile distinfo 
	sysutils/terraform/provider-terraform: Makefile distinfo 
	sysutils/terraform/provider-tls: Makefile distinfo 
	sysutils/terraform/provider-triton: Makefile distinfo 
	sysutils/terraform/provider-ultradns: Makefile distinfo 
	sysutils/terraform/provider-vault: Makefile distinfo 
	sysutils/terraform/provider-vcd: Makefile distinfo 
	sysutils/terraform/provider-vsphere: Makefile distinfo 
	sysutils/terraform/terraform: Makefile distinfo 
	sysutils/terraform/terraform/pkg: DESCR PLIST 
Removed files:
	sysutils/terraform: distinfo 

Log message:
Update to terraform-0.10.0-beta1.

While this is a beta release, I'd rather get it in tree asap because upstream
split all providers into their own project. So now we have one terraform and
69 terraform-providers (for now). See this URL for details:
https://www.hashicorp.com/blog/upcoming-provider-changes-in-terraform-0-10/

If you miss a provider for your iac declaration you have the choice of
downloading hashicorp binaries over the net or better: installing the
corresponding OpenBSD package.
e.g.
pkg_add terraform-provider-aws
cd /path/to/where/foo.tf/is/stored
terraform init <- this will record the sha256 sum of the plugin


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/25 10:17:06

Modified files:
	sysutils/terraform/terraform: Makefile 
	sysutils/terraform/terraform/pkg: PLIST 

Log message:
Needs a pkgpath marker.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/25 11:14:24

Modified files:
	sys/conf       : makegap.sh 

Log message:
lld's linker-script parser has to be fixed to accept ; after LONG()
directives.  binutils requires it, and binutils is the authoritative
parser in this regard.  This means arm64 +lld remains broken (but all
the other architectures work)


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/25 11:28:39

Modified files:
	bin/ksh        : emacs.c 

Log message:
No need to NUL-terminate the line buffer since it's handled by x_e_getu8() by
now.

ok schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/25 11:42:37

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 

Log message:
Catch typos in .Sh names; suggested by jmc@.

I'm using a very simple, linear time / zero space fuzzy string
matching heuristic rather than a full Levenshtein metric, to keep
the code both simple and fast.


CVSROOT:	/cvs
Module name:	ports
Changes by:	phessler@cvs.openbsd.org	2017/06/25 12:09:51

Log message:
    import geteltorito, which extracts the initial boot image from a cd
    
    Helpful for extracting Thinkpad BIOS updates so you can put them on a
    usb stick to install......
    
    OK stsp@
    
    Status:
    
    Vendor Tag:	phessler
    Release Tags:	phessler_20170625
    
    N ports/archivers/geteltorito/Makefile
    N ports/archivers/geteltorito/distinfo
    N ports/archivers/geteltorito/pkg/DESCR
    N ports/archivers/geteltorito/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	phessler@cvs.openbsd.org	2017/06/25 12:10:39

Modified files:
	archivers      : Makefile 

Log message:
+geteltorito


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/06/25 12:30:39

Modified files:
	infrastructure/man/man1: dpb.1 

Log message:
Fix four issues found with mandoc -Tlint:
* missing blank before trailing delimiter
* typo in the name of the AUTHORS section
* missing .An macro in the AUTHORS section
* section ordering


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/25 15:33:23

Modified files:
	regress/usr.sbin/acme-client: Makefile 
Added files:
	regress/usr.sbin/acme-client: acme-client.conf httpd.conf 
Removed files:
	regress/usr.sbin/acme-client: create-httpd-env.sh 

Log message:
Convert the acme-client test to use a config file acme-client.conf.
Restructure the Makefile, put httpd.conf in separate config file.
Skip test if domain name for letsencrypt.org is not set.
discussed with benno@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/25 15:53:57

Modified files:
	www/chromium   : Makefile distinfo 
	www/chromium/patches: patch-BUILD_gn 
	                      patch-ash_display_mirror_window_controller_cc 
	                      patch-base_BUILD_gn 
	                      patch-base_allocator_allocator_shim_cc 
	                      patch-base_debug_stack_trace_h 
	                      patch-base_posix_unix_domain_socket_linux_cc 
	                      patch-base_process_process_metrics_h 
	                      patch-base_process_process_metrics_openbsd_cc 
	                      patch-base_process_process_posix_cc 
	                      patch-base_sys_info_openbsd_cc 
	                      patch-base_trace_event_malloc_dump_provider_cc 
	                      patch-build_config_BUILD_gn 
	                      patch-build_config_compiler_BUILD_gn 
	                      patch-build_config_compiler_compiler_gni 
	                      patch-build_toolchain_gcc_toolchain_gni 
	                      patch-cc_BUILD_gn 
	                      patch-chrome_app_chrome_command_ids_h 
	                      patch-chrome_app_chrome_main_delegate_cc 
	                      patch-chrome_app_chromium_strings_grd 
	                      patch-chrome_app_generated_resources_grd 
	                      patch-chrome_app_google_chrome_strings_grd 
	                      patch-chrome_app_mash_mash_runner_cc 
	                      patch-chrome_app_settings_strings_grdp 
	                      patch-chrome_browser_about_flags_cc 
	                      patch-chrome_browser_after_startup_task_utils_cc 
	                      patch-chrome_browser_browser_process_impl_cc 
	                      patch-chrome_browser_browser_process_impl_h 
	                      patch-chrome_browser_browser_resources_grd 
	                      patch-chrome_browser_chrome_browser_main_cc 
	                      patch-chrome_browser_chrome_content_browser_client_cc 
	                      patch-chrome_browser_chrome_content_browser_client_h 
	                      patch-chrome_browser_custom_handlers_protocol_handler_registry_cc 
	                      patch-chrome_browser_download_chrome_download_manager_delegate_cc 
	                      patch-chrome_browser_extensions_BUILD_gn 
	                      patch-chrome_browser_extensions_api_messaging_message_service_cc 
	                      patch-chrome_browser_extensions_api_settings_private_prefs_util_cc 
	                      patch-chrome_browser_extensions_external_provider_impl_cc 
	                      patch-chrome_browser_memory_details_cc 
	                      patch-chrome_browser_metrics_chrome_browser_main_extra_parts_metrics_cc 
	                      patch-chrome_browser_notifications_message_center_notification_manager_cc 
	                      patch-chrome_browser_plugins_plugins_resource_service_cc 
	                      patch-chrome_browser_process_singleton_posix_cc 
	                      patch-chrome_browser_profiles_profile_impl_io_data_cc 
	                      patch-chrome_browser_resources_plugin_metadata_plugins_linux_json 
	                      patch-chrome_browser_sync_chrome_sync_client_cc 
	                      patch-chrome_browser_ui_browser_command_controller_cc 
	                      patch-chrome_browser_ui_startup_startup_browser_creator_cc 
	                      patch-chrome_browser_ui_tab_helpers_cc 
	                      patch-chrome_browser_ui_toolbar_app_menu_model_cc 
	                      patch-chrome_browser_ui_views_apps_chrome_native_app_window_views_aura_cc 
	                      patch-chrome_browser_ui_views_chrome_browser_main_extra_parts_views_cc 
	                      patch-chrome_browser_ui_views_first_run_dialog_cc 
	                      patch-chrome_browser_ui_views_tabs_tab_drag_controller_cc 
	                      patch-chrome_browser_ui_webui_about_ui_cc 
	                      patch-chrome_browser_ui_webui_chrome_web_ui_controller_factory_cc 
	                      patch-chrome_browser_ui_webui_options_browser_options_handler_cc 
	                      patch-chrome_browser_ui_webui_options_browser_options_handler_h 
	                      patch-chrome_browser_ui_webui_settings_md_settings_localized_strings_provider_cc 
	                      patch-chrome_browser_web_applications_web_app_h 
	                      patch-chrome_common_chrome_switches_cc 
	                      patch-chrome_common_chrome_switches_h 
	                      patch-chrome_common_extensions_chrome_extensions_client_cc 
	                      patch-chrome_common_extensions_command_cc 
	                      patch-chrome_common_pref_names_cc 
	                      patch-chrome_common_pref_names_h 
	                      patch-chrome_common_url_constants_cc 
	                      patch-chrome_common_url_constants_h 
	                      patch-chromecast_browser_cast_content_browser_client_cc 
	                      patch-components_autofill_core_browser_autofill_experiments_cc 
	                      patch-components_filesystem_file_system_app_cc 
	                      patch-components_metrics_BUILD_gn 
	                      patch-components_omnibox_browser_omnibox_field_trial_cc 
	                      patch-components_policy_resources_policy_templates_json 
	                      patch-components_tracing_common_process_metrics_memory_dump_provider_cc 
	                      patch-content_app_content_main_runner_cc 
	                      patch-content_browser_BUILD_gn 
	                      patch-content_browser_accessibility_browser_accessibility_h 
	                      patch-content_browser_accessibility_browser_accessibility_manager_h 
	                      patch-content_browser_browser_main_loop_cc 
	                      patch-content_browser_child_process_launcher_helper_linux_cc 
	                      patch-content_browser_devtools_protocol_color_picker_cc 
	                      patch-content_browser_download_base_file_cc 
	                      patch-content_browser_gpu_gpu_data_manager_impl_private_cc 
	                      patch-content_browser_gpu_gpu_internals_ui_cc 
	                      patch-content_browser_media_media_internals_cc 
	                      patch-content_browser_ppapi_plugin_process_host_cc 
	                      patch-content_browser_renderer_host_render_message_filter_cc 
	                      patch-content_browser_renderer_host_render_message_filter_h 
	                      patch-content_browser_renderer_host_render_process_host_impl_cc 
	                      patch-content_browser_renderer_host_render_view_host_impl_cc 
	                      patch-content_browser_renderer_host_render_widget_host_view_aura_cc 
	                      patch-content_browser_renderer_host_render_widget_host_view_event_handler_cc 
	                      patch-content_browser_utility_process_host_impl_cc 
	                      patch-content_child_child_process_cc 
	                      patch-content_child_child_process_h 
	                      patch-content_child_child_thread_impl_cc 
	                      patch-content_child_child_thread_impl_h 
	                      patch-content_common_BUILD_gn 
	                      patch-content_common_sandbox_init_openbsd_cc 
	                      patch-content_gpu_gpu_main_cc 
	                      patch-content_renderer_render_thread_impl_cc 
	                      patch-content_renderer_renderer_main_cc 
	                      patch-content_renderer_webscrollbarbehavior_impl_aura_cc 
	                      patch-content_shell_browser_shell_browser_context_cc 
	                      patch-device_bluetooth_BUILD_gn 
	                      patch-gpu_ipc_service_gpu_init_cc 
	                      patch-ipc_ipc_message_utils_h 
	                      patch-mash_package_mash_packaged_service_cc 
	                      patch-media_audio_BUILD_gn 
	                      patch-media_audio_audio_manager_cc 
	                      patch-media_base_video_frame_cc 
	                      patch-media_base_video_frame_h 
	                      patch-media_capture_video_linux_v4l2_capture_delegate_cc 
	                      patch-media_capture_video_video_capture_device_client_cc 
	                      patch-media_capture_video_video_capture_device_factory_cc 
	                      patch-media_media_options_gni 
	                      patch-net_BUILD_gn 
	                      patch-net_dns_dns_util_cc 
	                      patch-net_socket_udp_socket_posix_cc 
	                      patch-net_tools_cert_verify_tool_verify_using_path_builder_cc 
	                      patch-pdf_pdfium_pdfium_engine_cc 
	                      patch-services_ui_gpu_gpu_main_cc 
	                      patch-storage_browser_quota_quota_settings_cc 
	                      patch-third_party_WebKit_Source_platform_fonts_FontCache_cpp 
	                      patch-third_party_WebKit_Source_platform_fonts_FontCache_h 
	                      patch-third_party_WebKit_Source_platform_fonts_FontPlatformData_cpp 
	                      patch-third_party_WebKit_Source_platform_fonts_FontPlatformData_h 
	                      patch-third_party_WebKit_Source_platform_fonts_SimpleFontData_cpp 
	                      patch-third_party_WebKit_Source_platform_fonts_skia_FontCacheSkia_cpp 
	                      patch-third_party_WebKit_Source_platform_heap_StackFrameDepth_cpp 
	                      patch-third_party_WebKit_Source_web_PopupMenuImpl_cpp 
	                      patch-third_party_WebKit_Source_wtf_BUILD_gn 
	                      patch-third_party_angle_BUILD_gn 
	                      patch-third_party_ffmpeg_BUILD_gn 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_asm 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_ia32_config_h 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_asm 
	                      patch-third_party_ffmpeg_chromium_config_Chrome_openbsd_x64_config_h 
	                      patch-third_party_ffmpeg_libavutil_cpu_c 
	                      patch-third_party_skia_src_ports_SkOSFile_stdio_cpp 
	                      patch-third_party_webrtc_BUILD_gn 
	                      patch-third_party_webrtc_base_BUILD_gn 
	                      patch-third_party_webrtc_base_platform_thread_cc 
	                      patch-third_party_webrtc_modules_audio_device_BUILD_gn 
	                      patch-third_party_webrtc_system_wrappers_BUILD_gn 
	                      patch-third_party_zlib_BUILD_gn 
	                      patch-tools_gn_bootstrap_bootstrap_py 
	                      patch-ui_base_dragdrop_os_exchange_data_provider_factory_cc 
	                      patch-ui_base_resource_resource_bundle_cc 
	                      patch-ui_gfx_canvas_skia_cc 
	                      patch-ui_gfx_font_list_cc 
	                      patch-ui_gl_BUILD_gn 
	                      patch-ui_gl_generate_bindings_py 
	                      patch-ui_gl_sync_control_vsync_provider_h 
	                      patch-ui_resources_ui_resources_grd 
	                      patch-ui_views_controls_label_cc 
	                      patch-ui_views_controls_textfield_textfield_cc 
	                      patch-ui_views_mus_aura_init_cc 
	                      patch-ui_views_views_delegate_cc 
	                      patch-ui_views_views_delegate_h 
	                      patch-ui_views_views_switches_cc 
	                      patch-v8_BUILD_gn 
	                      patch-v8_src_base_platform_platform-posix_cc 
	                      patch-v8_src_globals_h 
	www/chromium/pkg: PLIST 
Added files:
	www/chromium/patches: patch-base_i18n_icu_util_cc 
	                      patch-chrome_app_chrome_main_cc 
	                      patch-chrome_app_theme_chrome_unscaled_resources_grd 
	                      patch-chrome_browser_background_background_mode_optimizer_cc 
	                      patch-chrome_browser_extensions_api_webrtc_audio_private_webrtc_audio_private_api_cc 
	                      patch-chrome_browser_flag_descriptions_cc 
	                      patch-chrome_browser_flag_descriptions_h 
	                      patch-chrome_browser_resources_settings_appearance_page_appearance_page_html 
	                      patch-chrome_browser_ui_webui_sandbox_internals_ui_cc 
	                      patch-chrome_common_chrome_features_cc 
	                      patch-chrome_common_chrome_features_h 
	                      patch-content_browser_accessibility_ax_platform_position_cc 
	                      patch-content_browser_gpu_gpu_data_manager_impl_private_h 
	                      patch-content_browser_gpu_gpu_feature_checker_impl_cc 
	                      patch-content_browser_renderer_host_media_in_process_buildable_video_capture_device_cc 
	                      patch-content_browser_tracing_tracing_controller_impl_cc 
	                      patch-content_browser_zygote_host_zygote_host_impl_linux_h 
	                      patch-content_public_browser_zygote_host_linux_h 
	                      patch-gpu_ipc_client_gpu_memory_buffer_impl_cc 
	                      patch-gpu_ipc_common_gpu_memory_buffer_support_cc 
	                      patch-gpu_ipc_service_gpu_memory_buffer_factory_cc 
	                      patch-headless_lib_browser_headless_content_browser_client_cc 
	                      patch-headless_lib_browser_headless_content_browser_client_h 
	                      patch-headless_lib_headless_content_main_delegate_cc 
	                      patch-headless_lib_headless_content_main_delegate_h 
	                      patch-headless_lib_headless_macros_h 
	                      patch-ipc_ipc_channel_common_cc 
	                      patch-ipc_ipc_channel_h 
	                      patch-ipc_ipc_channel_mojo_cc 
	                      patch-third_party_WebKit_Source_platform_wtf_BUILD_gn 
	                      patch-third_party_WebKit_Source_platform_wtf_StackUtil_cpp 
	                      patch-third_party_angle_src_gpu_info_util_SystemInfo_internal_h 
	                      patch-third_party_angle_src_gpu_info_util_SystemInfo_linux_cpp 
	                      patch-third_party_angle_src_gpu_info_util_SystemInfo_x11_cpp 
	                      patch-third_party_swiftshader_BUILD_gn 
	                      patch-third_party_swiftshader_src_Common_MutexLock_hpp 
	                      patch-third_party_swiftshader_src_Common_SharedLibrary_hpp 
	                      patch-third_party_swiftshader_src_Common_Socket_cpp 
	                      patch-third_party_swiftshader_src_OpenGL_libEGL_Display_cpp 
	                      patch-third_party_swiftshader_src_OpenGL_libEGL_EGLSurface_cpp 
	                      patch-third_party_swiftshader_src_OpenGL_libEGL_libEGL_cpp 
	                      patch-third_party_swiftshader_src_OpenGL_libEGL_libEGL_hpp 
	                      patch-third_party_swiftshader_src_OpenGL_libGLES_CM_libGLES_CM_hpp 
	                      patch-third_party_swiftshader_src_OpenGL_libGLESv2_libGLESv2_hpp 
	                      patch-third_party_swiftshader_third_party_llvm-subzero_build_Linux_include_llvm_Config_config_h 
	                      patch-ui_gfx_gpu_memory_buffer_cc 
	                      patch-ui_gfx_gpu_memory_buffer_h 
	                      patch-ui_gfx_ipc_gfx_param_traits_macros_h 
	                      patch-ui_gfx_linux_client_native_pixmap_dmabuf_cc 
	                      patch-ui_gfx_mojo_buffer_types_struct_traits_cc 
	                      patch-ui_gfx_mojo_buffer_types_struct_traits_h 
	                      patch-ui_gfx_native_pixmap_handle_cc 
	                      patch-ui_gfx_native_pixmap_handle_h 
	                      patch-ui_native_theme_native_theme_base_cc 
	                      patch-ui_native_theme_native_theme_h 
	                      patch-ui_strings_app_locale_settings_grd 
	                      patch-ui_views_window_frame_background_cc 
	                      patch-v8_src_trap-handler_handler-inside_cc 
Removed files:
	www/chromium/patches: 
	                      patch-chrome_app_resources_locale_settings_grd 
	                      patch-chromecast_browser_cast_browser_main_parts_cc 
	                      patch-content_browser_renderer_host_media_video_capture_manager_cc 
	                      patch-content_common_set_process_title_linux_cc 
	                      patch-content_common_set_process_title_linux_h 
	                      patch-gpu_config_gpu_info_collector_linux_cc 
	                      patch-gpu_config_gpu_info_collector_linux_h 
	                      patch-gpu_config_gpu_info_collector_x11_cc 
	                      patch-third_party_WebKit_Source_wtf_MathExtras_h 
	                      patch-third_party_WebKit_Source_wtf_StackUtil_cpp 
	                      patch-ui_accessibility_platform_ax_platform_node_h 
	                      patch-ui_app_list_app_list_constants_cc 
	                      patch-ui_app_list_app_list_constants_h 
	                      patch-ui_app_list_views_app_list_item_view_cc 
	                      patch-ui_views_accessibility_native_view_accessibility_h 
	                      patch-v8_src_wasm_wasm-result_h 

Log message:
update to 59.0.3071.109


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/25 15:59:59

Modified files:
	regress/usr.sbin/switchd: Makefile 

Log message:
Clean all files created during switchd regress.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/25 16:06:06

Modified files:
	regress/usr.sbin/ldapd: Makefile 

Log message:
Do not run .END cleanup during clean, cleandir, obj in ldapd regress.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/25 16:07:55

Modified files:
	regress/usr.sbin: Makefile 

Log message:
Link acme-client, ldapd, switchd regress to build.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/06/25 16:22:06

Modified files:
	sbin/ifconfig  : ifconfig.c 

Log message:
Make ifconfig(8) default to prefixlen 128 when setting an IPv6 destination
address on a point-to-point interface. Makes it easier to configure IPv6 on
interfaces such as gif(4). Specifying 'prefixlen 128' is no longer required.
This is consistent with IPv4 where a netmask is not required either.
ok mpi@ bluhm@ benno@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/25 16:34:36

Modified files:
	net/librenms   : Makefile distinfo 
	net/librenms/patches: patch-includes_defaults_inc_php 
	                      patch-includes_functions_php 
	net/librenms/pkg: PLIST 
Added files:
	net/librenms/patches: patch-includes_process_config_inc_php 

Log message:
update to librenms-1.29


CVSROOT:	/cvs
Module name:	src
Changes by:	ratchov@cvs.openbsd.org	2017/06/26 01:02:16

Modified files:
	sys/dev        : audio.c 

Log message:
Factor a variable assignment in audiopoll().
From Michael Bombardieri, thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/26 01:19:15

Modified files:
	devel/git      : Makefile distinfo 
	devel/git/patches: patch-t_test-lib_sh 
Removed files:
	devel/git/patches: patch-sha1dc_sha1_c 

Log message:
Update to git-2.13.2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/26 03:06:57

Modified files:
	sysutils/terraform: Makefile.inc 

Log message:
point to PKGDIR, fixes packaging on any privsep bulk


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/26 03:08:00

Modified files:
	sys/netinet    : ip_ipsp.c ip_ipsp.h 

Log message:
Split a part of tdb_delete() into tdb_unlink() so that we can remove
a TDB from the hash table without actually free()ing it.  That way we
can modify the TDB and then put it back in using puttdb().

ok claudio@


CVSROOT:	/cvs
Module name:	src
Changes by:	patrick@cvs.openbsd.org	2017/06/26 03:17:55

Modified files:
	sys/net        : pfkeyv2.c pfkeyv2_parsemessage.c 

Log message:
Allow updating the destination address of an existing TDB.  Since the
destination address is used as an index when looking for a TDB, we need
to supply the new destination address in a different member.  For this,
re-use the proxy address, that so far no one else has been using.  It
would make sense to rename this member in the future.

ok claudio@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/26 03:32:32

Modified files:
	sys/kern       : uipc_socket.c uipc_usrreq.c uipc_socket2.c 
	                 sys_generic.c 
	sys/miscfs/fifofs: fifo_vnops.c 
	sys/net        : pfkeyv2.c rtsock.c 
	sys/netinet    : ip_divert.c ip_mroute.c raw_ip.c tcp_usrreq.c 
	                 tcp_subr.c tcp_output.c udp_usrreq.c 
	                 tcp_input.c 
	sys/netinet6   : ip6_divert.c ip6_mroute.c raw_ip6.c 
	sys/nfs        : nfs_socket.c 
	sys/sys        : socketvar.h event.h 

Log message:
Assert that the corresponding socket is locked when manipulating socket
buffers.

This is one step towards unlocking TCP input path.  Note that all the
functions asserting for the socket lock are not necessarilly MP-safe.
All the fields of 'struct socket' aren't protected.

Introduce a new kernel-only kqueue hint, NOTE_SUBMIT, to be able to
tell when a filter needs to lock the underlying data structures.  Logic
and name taken from NetBSD.

Tested by Hrvoje Popovski.

ok claudio@, bluhm@, mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/06/26 04:04:21

Modified files:
	usr.sbin/bgpd  : parse.y 

Log message:
allow setting localpref to 0

from Job Snijders
ok phessler@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/06/26 04:05:57

Modified files:
	usr.sbin/bgpd  : bgpd.conf.5 bgpd.h parse.y 
	usr.sbin/bgpctl: bgpctl.c parser.c 

Log message:
add support for the "graceful shutdown" well-known community as described
in draft-ietf-grow-bgp-gshut

from Job Snijders
ok phessler@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/06/26 04:08:06

Modified files:
	usr.sbin/bgpd  : parse.y 
	usr.sbin/bgpctl: parser.c 

Log message:
let admins set an unknown well-known community

from Job Snijders
ok phessler@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	phessler@cvs.openbsd.org	2017/06/26 04:09:13

Modified files:
	usr.sbin/bgpctl: bgpctl.c 

Log message:
don't print the WELLKNOWN string for unknown well-known communities

from Job Snijders
ok phessler@ benno@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/26 05:04:26

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
when splitting a composite word,
do not forget to close the inserted list box


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/26 06:12:30

src/regress/usr.bin/mandoc/eqn/delim

Update of /cvs/src/regress/usr.bin/mandoc/eqn/delim
In directory cvs.openbsd.org:/tmp/cvs-serv40093/delim

Log Message:
Directory /cvs/src/regress/usr.bin/mandoc/eqn/delim added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/06/26 06:26:52

Modified files:
	textproc/highlight: Makefile distinfo 

Log message:
Update to highlight-3.38.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kirby@cvs.openbsd.org	2017/06/26 06:42:22

Modified files:
	net/seafile    : Makefile.inc 
	net/seafile/ccnet: distinfo 
	net/seafile/client: distinfo 
	net/seafile/seafile: distinfo 
	net/seafile/seafile/patches: patch-daemon_http-tx-mgr_c 

Log message:
update to seafile-6.0.7


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/26 07:36:18

Modified files:
	devel/appstream-glib: Makefile 

Log message:
docbook is needed after all.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/26 07:46:50

Modified files:
	devel/libbfio  : Makefile 

Log message:
CONFIGURE_STYLE=simple  is a bad idea for gnu configure, because we have
caching that prevents hidden build dependencies on gawk and the likes...


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/26 07:59:54

Modified files:
	security/libbde: Makefile 

Log message:
yet another misuse of CONFIGURE_STYLE=simple


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/26 08:12:35

Modified files:
	sys/netinet6   : icmp6.c 

Log message:
When pinging an IPv6 link-local address, the reflected packet had
::1 as source address.  It should be the link-local address of the
attached interface.  The rtalloc() in icmp6_reflect() did not find
the correct local address.  The IPv6 routing table does not use
sin6_scope_id, but the embedded scope.  So do not recover the scope.
bug report Harald Dunkel; OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/26 10:14:25

Modified files:
	sys/conf       : makegap.sh 

Log message:
note.ABI-tag and .MIPS.options are not needed anymore when
we use gapdummy.o


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/26 10:54:31

Modified files:
	sys/arch/octeon/octeon: cn3xxx.dts cn3xxx_dts.S 

Log message:
Arrange a phandle for the "ciu" node.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/26 11:00:50

Modified files:
	sys/conf       : makegap.sh 

Log message:
RANDOM1 was subject to rather bad modulus bias. Improve the situation a bit
by implementing an arc4random_uniform(3) clone with beloved jot(1) and
using it.

discussed with and ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/26 11:16:30

Modified files:
	www/chromium   : Makefile 
	www/chromium/patches: 
	                      patch-base_process_process_handle_openbsd_cc 

Log message:
do not call malloc and sysctl twice that was introduced by a bad copy & paste

diff from Caspar Schutijser


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/26 11:18:58

Modified files:
	.              : 27.html 28.html 29.html 30.html 31.html 32.html 
	                 33.html 34.html 35.html 36.html 37.html 38.html 
	                 39.html 40.html 41.html 42.html 43.html 44.html 
	                 45.html 46.html 47.html 48.html 49.html 50.html 
	                 51.html 52.html 53.html 54.html 55.html 56.html 
	                 57.html 58.html 59.html 60.html 61.html 
	                 alpha.html amd64.html announce28.html 
	                 anoncvs.html arm64.html armv7.html cats.html 
	                 crypto.html cvsync.html ddb.html errata26.html 
	                 errata27.html errata28.html errata29.html 
	                 errata30.html errata31.html errata32.html 
	                 errata33.html errata34.html errata35.html 
	                 errata36.html errata37.html errata38.html 
	                 errata39.html errata40.html errata41.html 
	                 errata44.html errata45.html errata46.html 
	                 errata47.html errata48.html errata52.html 
	                 errata53.html errata54.html errata55.html 
	                 errata56.html errata57.html errata58.html 
	                 errata59.html errata60.html errata61.html 
	                 events.html ftp.html hp300.html hppa.html 
	                 httpd.conf index.html innovations.html 
	                 landisk.html luna88k.html lyrics.html 
	                 mac68k.html macppc.html mail.html mvme68k.html 
	                 mvme88k.html palm.html plus27.html plus28.html 
	                 plus29.html plus30.html plus31.html plus32.html 
	                 plus33.html plus34.html plus35.html plus36.html 
	                 plus37.html plus38.html plus39.html plus40.html 
	                 plus41.html plus42.html plus43.html plus44.html 
	                 plus45.html plus46.html plus47.html plus48.html 
	                 plus49.html plus50.html plus51.html plus52.html 
	                 plus53.html plus54.html plus55.html plus56.html 
	                 plus57.html plus58.html plus59.html plus60.html 
	                 report.html sgi.html socppc.html solbourne.html 
	                 sparc.html sparc64.html stable.html sun3.html 
	                 vax.html zaurus.html 
	build/mirrors  : anoncvs.html.end anoncvs.html.head 
	                 cvsync.html.end cvsync.html.head ftp.html.end 
	                 openssh-portable.html.head 
	faq            : faq1.html faq10.html faq11.html faq13.html 
	                 faq14.html faq15.html faq4.html faq5.html 
	                 faq6.html faq7.html faq8.html index.html 
	                 upgrade35.html upgrade36.html upgrade37.html 
	                 upgrade38.html upgrade39.html upgrade40.html 
	                 upgrade41.html upgrade42.html upgrade43.html 
	                 upgrade44.html upgrade45.html upgrade46.html 
	                 upgrade47.html upgrade48.html upgrade49.html 
	                 upgrade50.html upgrade51.html upgrade52.html 
	                 upgrade53.html upgrade54.html upgrade55.html 
	                 upgrade56.html upgrade57.html upgrade58.html 
	                 upgrade59.html upgrade60.html upgrade61.html 
	faq/pf         : anchors.html authpf.html carp.html config.html 
	                 example1.html filter.html ftp.html index.html 
	                 logging.html macros.html nat.html options.html 
	                 perf.html pools.html shortcuts.html tables.html 
	                 tagging.html 
	faq/ports      : differences.html guide.html index.html 
	                 specialtopics.html testing.html 
	libressl       : index.html patches.html signing.html 
	openbgpd       : index.html manual.html papers.html 
	opencvs        : manual.html 
	openntpd       : features.html manual.html 
	opensmtpd      : manual.html 
	opensmtpd/faq  : certificates.html config.html example1.html 
	                 filters.html index.html options.html rules.html 
	openssh        : features.html goals.html history.html 
	                 index.html legacy.html manual.html 
	                 portable.html specs.html 
	spamd          : index.html 

Log message:
move man.openbsd.org links from http:// to https://
reduces the number of http:// links in www/ from >33k to <7k

thanks to schwarze for doing the work


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/06/26 12:31:57

Modified files:
	distrib/sgi/ramdisk: install.md 

Log message:
Add a MDKERNEL variable that contains the name of the boot kernel.
This will be used by the installer in an upcoming change.

OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/26 12:33:24

Modified files:
	sys/net        : pf_norm.c pfvar.h 

Log message:
Fragments for a single connection (a combination of proto,src,dst,af)
may easily reuse the fragment id as it is only 16 bit for IPv4.  To
avoid that pf reassembles them into the wrong packet, throw away
stale fragments.  With the default timeout this happens after 12,000
newer fragements have been seen.
from markus@; OK sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/26 12:42:23

Modified files:
	sys/dev/pv     : hyperv.c 

Log message:
Rework the deferred interrupt loop

By performing a task_add an interrupt handler can rely on the
taskq_thread to invoke it again with an additional benefit of
being able to sched_pause when required. In the long run more
than 99.8% of calls do not require an additional iteration.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/26 13:06:12

Modified files:
	sys/netinet    : ip_input.c ip_var.h 

Log message:
Convert ip_input() to a pr_input style function.  Goal is to process
IPsec packets without additional enqueueing.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/26 13:53:00

Modified files:
	usr.bin/mandoc : eqn.c libroff.h 

Log message:
Complete rewrite of the lexer in a single function with four operation
modes instead of four functions, resulting in considerable
simplification, fifty lines less of code, fifteen fewer automatic
variables, and several bug fixes, for example:

1. The delim control statement consumes exactly two bytes of input,
requires no whitespace after these two bytes, and does not treat
quotes in any special way.
2. If the argument of left, right, gfont, gsize, or size is defined
as an alias, only the first word of the value is used as the
delimiter, font name, or font size.
3. If a back, fwd, down, or up keyword is followed by another keyword
instead of the required number, GNU eqn does nothing useful, but
typically errors out.  So no need to have special handling (with
an ugly goto!) for it in mandoc.

Also getting rid of one pointless static buffer and twelve redundant
calls to strlcpy(3).


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/26 14:11:23

Modified files:
	regress/usr.bin/mandoc/eqn: Makefile 
	regress/usr.bin/mandoc/eqn/define: Makefile invalid.out_ascii 
	regress/usr.bin/mandoc/eqn/fromto: basic.out_ascii 
	                                   basic.out_html 
	                                   noarg.out_ascii 
	regress/usr.bin/mandoc/eqn/matrix: basic.in basic.out_ascii 
	                                   basic.out_html 
	regress/usr.bin/mandoc/eqn/nullary: Makefile roman.in 
	                                    roman.out_ascii 
	                                    roman.out_html 
	regress/usr.bin/mandoc/eqn/over: precedence.out_ascii 
	                                 precedence.out_html 
	regress/usr.bin/mandoc/eqn/size: basic.out_ascii 
	regress/usr.bin/mandoc/eqn/subsup: combine.out_ascii 
	                                   combine.out_html 
	                                   noarg.out_ascii 
	                                   noarg.out_html 
	                                   sub_group.out_ascii 
	                                   sub_group.out_html 
	regress/usr.bin/mandoc/eqn/unary: Makefile diacrit.out_ascii 
	                                  diacrit.out_html sqrt.in 
	                                  sqrt.out_ascii sqrt.out_html 
Added files:
	regress/usr.bin/mandoc/eqn/define: font.in font.out_ascii 
	                                   quoted.in quoted.out_ascii 
	regress/usr.bin/mandoc/eqn/delim: Makefile basic.in 
	                                  basic.out_ascii 
	regress/usr.bin/mandoc/eqn/nullary: symbol.in symbol.out_ascii 
	                                    symbol.out_html 
	                                    symbol.out_utf8 
	regress/usr.bin/mandoc/eqn/unary: bold.in bold.out_ascii 
	                                  bold.out_html 

Log message:
catch up with the recent eqn(7) improvements


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/26 14:12:14

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Minor cleanup; when polling delay before calling the interrupt handler


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/26 14:41:37

Modified files:
	sys/netinet6   : Tag: OPENBSD_6_1 icmp6.c 

Log message:
When pinging an IPv6 link-local address, the reflected packet had
::1 as source address.  It should be the link-local address of the
attached interface.  The rtalloc() in icmp6_reflect() did not find
the correct local address.  The IPv6 routing table does not use
sin6_scope_id, but the embedded scope.  So do not recover the scope.
bug report Harald Dunkel; OK mpi@
The regression was introduced in rev 1.202 just before 6.1 release.
OK for stable benno@ deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/26 19:35:20

Modified files:
	archivers/lz4  : Makefile distinfo 
	archivers/lz4/patches: patch-Makefile patch-lib_Makefile 
Added files:
	archivers/lz4/patches: patch-lib_lz4_c patch-lib_lz4opt_h 
Removed files:
	archivers/lz4/patches: patch-programs_Makefile 
	                       patch-tests_Makefile 

Log message:
update to lz4-1.7.5 + upstream patch for https://github.com/lz4/lz4/issues/369
which reads a byte from invalid memory, crashing tests on OpenBSD. Info at
https://github.com/lz4/lz4/commit/6ad3a983dbf3a25273e04051d29022c72c469cd5


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/26 21:42:00

Modified files:
	etc            : rc 

Log message:
remove some old cruft.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/26 22:22:13

Modified files:
	sys/arch/macppc/conf: Makefile.macppc 

Log message:
the illegal instruction is 0x00000000


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/27 00:12:53

Modified files:
	distrib/sets/lists/base: mi 
	distrib/sets/lists/comp: mi 

Log message:
throw strip into base, until we consider a solution for the
linkkit bsd.gdb strip gongshow


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/27 02:13:05

Modified files:
	print/cups     : Makefile 

Log message:
Drop /etc/rc.d/init.d from WRKINST. It was never packaged but espie wanted
it gone.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/27 05:48:00

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
remove -DSw; the useful parts are now covered by mandoc;
discussed with jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/06/27 06:02:43

Modified files:
	sys/kern       : uipc_socket.c uipc_socket2.c 
	sys/nfs        : nfs_socket.c nfs_syscalls.c 

Log message:
Add missing solock()/sounlock() dances around sbreserve().

While here document an abuse of parent socket's lock.

Problem reported by krw@, analysis and ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	abieber@cvs.openbsd.org	2017/06/27 06:04:09

Modified files:
	lang/node      : Makefile distinfo 
	lang/node/patches: patch-Makefile patch-common_gypi 
	                   patch-deps_cares_include_ares_h 
	                   patch-deps_npm_node_modules_node-gyp_gyp_pylib_gyp_generator_ninja_py 
	                   patch-deps_npm_node_modules_node-gyp_lib_build_js 
	                   patch-deps_npm_node_modules_node-gyp_lib_configure_js 
	                   patch-deps_npm_node_modules_node-gyp_lib_install_js 
	                   patch-deps_v8_Makefile 
	                   patch-deps_v8_src_globals_h 
	                   patch-deps_v8_tools_gyp_v8_gyp 
	                   patch-lib_module_js patch-node_gyp 
	                   patch-tools_test_py 
	lang/node/pkg  : PLIST 

Log message:
Update to v6.11.0

- regen patches (thanks danj@)
- full changelog here: https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V6.md#6.11.0

OK danj@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/27 06:04:26

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Avoid testing an uninitialised variable in the SCSI_BUSY/SCSI_QUEUE_FULL
paths of hvs_scsi_cmd_done().

ok mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/06/27 06:10:21

Modified files:
	sbin/fsck_msdos: dir.c 

Log message:
Avoid the possibility of accessing an array out of bounds.
Found with cppcheck. ok krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/27 06:17:35

Modified files:
	usr.bin/mandoc : mandoc.1 mdoc_validate.c 
	regress/usr.bin/mandoc/mdoc/Ns: position.in position.out_ascii 
	                                position.out_lint 
	                                position.out_markdown 

Log message:
warn about .Ns macros that have no effect because they are followed
by an isolated closing delimiter; inspired by mdoclint


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/27 06:21:07

Modified files:
	sysutils/libregf: Makefile 

Log message:
fix sloppy update (option changed name)


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/27 06:24:17

Modified files:
	.              : hackathons.html 

Log message:
fix invalid html (except for missing alt= fields for images)
* use relative links if possible
* quote URIs after href=
* open and close some tags properly
* avoid duplicate "id" fields
* use &amp; instead of literal &


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/27 06:39:22

ports/mail/rcube-ldapAliasSync/patches

Update of /cvs/ports/mail/rcube-ldapAliasSync/patches
In directory cvs.openbsd.org:/tmp/cvs-serv91263/patches

Log Message:
Directory /cvs/ports/mail/rcube-ldapAliasSync/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/27 06:41:26

Modified files:
	mail/rcube-ldapAliasSync: Makefile distinfo 
	mail/rcube-ldapAliasSync/pkg: PLIST 
Added files:
	mail/rcube-ldapAliasSync/patches: patch-ldapAliasSync_php 

Log message:
update to rcube-ldapAliasSync-20160131 and patch to use rcube:: prefix for
write_log (using without this was deprecated in 1.2, dropped in 1.3)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/27 06:43:53

Modified files:
	www/webkitgtk4 : Makefile distinfo 

Log message:
Update to webkitgtk4-2.16.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/27 06:44:38

Modified files:
	www/webkitgtk4 : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
Bugfix update to webkitgtk4-2.16.5.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/06/27 07:01:33

Modified files:
	.              : 35.html 37.html 50.html errata34.html 
	                 errata35.html errata58.html errata59.html 
	                 events.html lyrics.html plus32.html plus33.html 
	                 plus34.html plus47.html plus51.html plus52.html 
	faq/pf         : carp.html 
	openbgpd       : manual.html 
	openntpd       : manual.html 
	opensmtpd      : manual.html 
	openssh        : list.html manual.html report.html 
	spamd          : index.html 

Log message:
move a few links from http:// to https://


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/27 07:14:24

Modified files:
	graphics/cairo : Makefile distinfo 
	graphics/cairo/patches: patch-util_cairo-fdr_Makefile_in 
	                        patch-util_cairo-sphinx_Makefile_in 
	                        patch-util_cairo-trace_Makefile_in 
	graphics/cairo/pkg: PLIST 

Log message:
Update to cairo-1.14.10.
- take over maintainer

ok eric@ (former maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/27 07:24:49

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c 

Log message:
Nuke get_rdomain() and just snag the interface rdomain from the same
ifa we use to get the interface hw address. One less socket() and
ioctl()! MIssed cleanup from shift to just watching RTM_IFINFO
messages for rdomain switch.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/27 07:28:02

Modified files:
	sys/netinet6   : ip6_input.c ip6_var.h 

Log message:
Convert ip6_input() to a pr_input style function.  Goal is to process
IPsec packets without additional enqueueing.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/27 07:56:15

Modified files:
	sys/dev/pv     : hyperv.c 

Log message:
Provide a handler stub for the "channel rescind" message


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/27 08:05:55

Modified files:
	graphics/py-cairo: Makefile distinfo 
	graphics/py-cairo/pkg: PLIST 

Log message:
Update to py-cairo-1.13.3.
- take maintainer (eric@ agrees)


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/27 08:37:08

Modified files:
	bin/csh        : file.c 

Log message:
in recently commited TIOCSTI replacement code, do not assume
little-endian or unsigned char :-)
ok anton


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/27 09:02:18

Modified files:
	bin/csh        : file.c 

Log message:
Tweak previous: align declarations and rename local variable.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/27 09:14:36

Modified files:
	x11/mate/atril : Makefile 

Log message:
kill hidden dep on kpathsea


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/06/27 09:22:17

Modified files:
	.              : errata61.html 

Log message:
release icmp6_linklocal errata.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/27 09:47:10

Modified files:
	infrastructure/mk: bsd.port.mk 

Log message:
move readmes/rcscripts generation into a separate target
'generate-readmes' that's always run, without a cookie.

this allows fine tweaks to that part without needing to rerun
fake every time.

Also places the automatic creation of PKGDIR where it belongs (in
update-plist) and have the new target error out implicitly if
PKGDIR is wrong.

slightly tweaked version compared to published tech@ patch, as it
turns out that scraping old files each time doesn't work,
in practice, as some readmes come from the actual distfile...


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/27 09:56:15

Modified files:
	sbin/dhclient  : bpf.c 

Log message:
Make if_register_bpf() the same as the other if_register_*() functions
by directly assigning the socket fd to ifi->bfdesc rather than
returning it and having the caller do the assignment.


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/27 09:58:07

Modified files:
	usr.sbin/bgpd  : bgpd.c 

Log message:
move a global into local context; from rob pierce


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/27 10:02:05

Modified files:
	share/man/man4 : softraid.4 

Log message:
Remove an extra '\n' from the printf strings fed into disklabel -E

from corsah () mail ! ru


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/27 10:43:29

Modified files:
	gnu/llvm/lib/Target/X86/MCTargetDesc: X86AsmBackend.cpp 

Log message:
trapsleds for clang, similar to the change on gas side.
Also from Todd Mortimer
tested by espie


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/27 12:23:29

Modified files:
	usr.bin/mandoc : out.c out.h tbl_layout.c tbl_term.c 

Log message:
Implement spacing of columns as defined in the table layout;
this is for example used by lftp(1)
and, ironically, misused by our very own tbl(7) manual...


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/27 13:16:40

Modified files:
	net/curl       : Makefile distinfo 
Removed files:
	net/curl/patches: patch-docs_cmdline-opts_Makefile_in 
	                  patch-src_Makefile_in 

Log message:
Maintenance update to 7.54.1.  The security fix does not affect us.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/27 13:51:28

Modified files:
	regress/usr.bin/mandoc/tbl/mod: Makefile 
Added files:
	regress/usr.bin/mandoc/tbl/mod: spacing.in spacing.out_ascii 

Log message:
test inter-column spacing


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/06/27 14:46:34

Modified files:
	usr.sbin/ifstated: ifstated.c 

Log message:
Hoist some privileged code in preparation for future work.
Based on an approach in vmd with mc146818/ns8250.
diff by Rob Pierce <rob -AT- 2keys -DOT- ca>

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/27 15:43:46

Modified files:
	bin/cp         : cp.1 cp.c utils.c 
	bin/mv         : mv.1 mv.c 
	bin/rm         : rm.1 rm.c 

Log message:
add a -v verbose flag to cp, mv, and rm. useful for monitoring progress,
and present on several other systems. some ok, some less ok.
from Job Snijders


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/27 15:49:47

Modified files:
	bin/cp         : cp.c 
	bin/rm         : rm.c 

Log message:
fix a few lines of unusual length


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/27 16:18:24

Modified files:
	sys/sys        : sockio.h 

Log message:
remove the obsolete timeslot ioctl


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/27 18:59:30

Modified files:
	share/man/man7 : tbl.7 

Log message:
Rewrite half of this, i was completely unaware how bad it was.
Remove several lies, lots of duplicate information,
and a lengthy discussion of features we don't support.
Clarify the wording in some places and make it more concise in others.
Delete examples from where they don't belong
and write a new EXAMPLES section from scratch.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/06/27 19:09:22

Modified files:
	usr.bin/ssh    : authfd.c authfd.h ssh-keygen.1 ssh-keygen.c 
	                 sshkey.c sshkey.h 

Log message:
Allow ssh-keygen to use a key held in ssh-agent as a CA when signing
certificates. bz#2377 ok markus


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/06/27 20:41:23

Modified files:
	security/lynis : Makefile distinfo 
	security/lynis/pkg: PLIST 

Log message:
Update for Lynis to 2.5.1:

https://cisofy.com/changelog/lynis/2.5.1/

OK bcallah@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/28 00:24:39

Modified files:
	bin/cp         : cp.1 
	bin/mv         : mv.1 
	bin/rm         : rm.1 

Log message:
add -v to SYNOPSIS and STANDARDS;


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/28 00:45:31

Modified files:
	usr.bin/tmux   : alerts.c tmux.1 

Log message:
Fix visual-silence (check accidentally the wrong way round), from Brad
Town. Plus some tmux.1 fixes from jmc@.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/28 01:10:02

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
fix potential use of uninitialized variable, noticed by jsg@.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/28 01:16:58

Modified files:
	sys/arch/amd64/amd64: acpi_wakecode.S 

Log message:
hide symbols used in the ACPI resume trampoline pages

ok deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/28 01:37:38

Modified files:
	gnu/llvm/lib/MC: MCELFStreamer.cpp 

Log message:
if we return nullptr for a "noexec" section, then don't change section.
prevents core dumps :)

okay tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/28 01:40:08

Modified files:
	gnu/usr.bin/perl: Makefile.bsd-wrapper Makefile.bsd-wrapper1 

Log message:
move all the post-Configure stuff to Makefile.bsd-wrapper1 instead of just
the man parts.

just leave Configure and forwarding targets in Makefile.bsd-wrapper,
this allows bsd.lib.mk to function normally without depend, because all
the puzzle is here.

okay millert@ afresh1@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 02:46:15

Modified files:
	sysutils/amazon-ssm-agent: Makefile distinfo 

Log message:
Update to amazon-ssm-agent-2.0.842.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 02:49:05

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.76.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 02:49:18

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.113.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/28 02:51:36

Modified files:
	sys/arch/i386/i386: acpi_wakecode.S 

Log message:
hide symbols in the acpi trampoline pages. matches a previous diff from
amd64.

tested un-zzz and un-ZZZ on i386 VM, no issues seen.

ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 03:56:09

Modified files:
	net/bro        : Makefile distinfo 
	net/bro/patches: patch-aux_broctl_BroControl_options_py 
	net/bro/pkg    : PLIST 
Removed files:
	net/bro/patches: patch-aux_broctl_aux_pysubnettree_patricia_c 
	                 patch-aux_broctl_bin_run-bro 
	                 patch-cmake_OSSpecific_cmake 
	                 patch-cmake_bro-plugin-create-package_sh 
	                 patch-src_Sessions_cc patch-src_bro_bif 
	                 patch-src_broxygen_Manager_cc 
	                 patch-src_iosource_Packet_cc 
	                 patch-src_iosource_Packet_h 
	                 patch-src_patricia_c 

Log message:
Update to bro-2.5.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/06/28 04:16:40

Modified files:
	math/hdf5      : Makefile distinfo 
Removed files:
	math/hdf5/patches: patch-tools_lib_h5diff_array_c 

Log message:
Update to HDF5 1.8.19

OK pirofti@


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/28 04:20:08

Modified files:
	telephony/baresip/re: Makefile distinfo 
	telephony/baresip/re/patches: patch-Makefile 

Log message:
update to re-0.5.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/28 04:20:25

Modified files:
	telephony/baresip/baresip: Makefile distinfo 
	telephony/baresip/baresip/patches: patch-src_config_c 

Log message:
update to baresip 0.5.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/06/28 04:20:28

Modified files:
	infrastructure/mk: bsd.port.mk pkgpath.mk 

Log message:
turn generate-readmes into a "full" target with locking and everything
(but still no cookie)


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/28 04:24:23

Modified files:
	share/man/man7 : ports.7 

Log message:
extra step between fake and package


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/06/28 04:26:44

Modified files:
	telephony/libzrtp: Makefile distinfo 

Log message:
update libzrtp


CVSROOT:	/cvs
Module name:	src
Changes by:	aoyama@cvs.openbsd.org	2017/06/28 04:31:48

Modified files:
	sys/arch/luna88k/luna88k: isr.c 

Log message:
Delete '0x' in DIAGNOSTIC panic message; ipl value is printed in decimal.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/28 04:33:09

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
document generate-readmes and diagnostic for missing PKGDIR.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/28 04:34:10

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
and emphasize that PKGDIR must exist.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/06/28 04:38:16

Modified files:
	usr.sbin/ifstated: ifstated.c 

Log message:
usage() gets __dead attribute, from Rob Pierce


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/06/28 05:10:08

Modified files:
	usr.sbin/ifstated: ifstated.c ifstated.h 

Log message:
whitespace fixes, from Rob Pierce and me


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/28 05:36:40

Modified files:
	usr.bin/tmux   : cmd-send-keys.c input-keys.c tmux.h window.c 

Log message:
Apply the xterm key flag when needed for send-keys, fixes problem
reported by Franky Spamschleuder.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/28 05:53:08

Modified files:
	sbin/dhclient  : kroute.c 

Log message:
Be consistent and always use socket(..., SOCK_DGRAM, ...) for
the sockets being used to issue ioctl()'s.

ok claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 06:22:28

Modified files:
	x11/gnome/control-center: Makefile 
	x11/gnome/control-center/pkg: PLIST 
Added files:
	x11/gnome/control-center/files: os-release.in 

Log message:
Provide an /etc/os-release file; gnomecc uses it to display info about the
base system; that file may be moved to a more generic package at some
point.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/28 06:52:27

Modified files:
	usr.bin/mandoc : man.c 

Log message:
fix incomplete handling of roff(7) nodes in man(7) block next-line scope;
assertion failure in tclsh(1) reported by deraadt@ via bentley@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/28 06:53:46

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Consistently use socket(..., AF_INET) for routing
sockets to cut down on unwanted IPv6 messages.

suggested by & ok claudio@


CVSROOT:	/cvs
Module name:	ports
Changes by:	abieber@cvs.openbsd.org	2017/06/28 07:06:48

Modified files:
	www/luakit     : Makefile distinfo 
	www/luakit/patches: patch-Makefile 
	www/luakit/pkg : PLIST 

Log message:
Upstream is back up and running! This update includes:

- Updateded to WebKit 2 API.
- New widget types.
- Updated adblocker.
- Vertical tab support.
- Auto recovery of sessions.

Full list available here: https://aidanholm.github.io/luakit/

Port update includes:

- cleanup of Makefile
- us luakit's 'install' target

consensus (of two / myself) was to commit!


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 07:16:49

Modified files:
	devel/py-setproctitle/patches: patch-Makefile 
	graphics/netpbm: Makefile 
	security/hydra/patches: patch-hydra-gtk_make_xhydra_sh 
	www/netsurf/netsurf-fb/patches: 
	                                patch-frontends_framebuffer_Makefile 
	devel/protobuf-c/patches: patch-Makefile_am 
	net/librenms/patches: patch-includes_functions_php 
	security/password-store/patches: patch-Makefile 
	                                 patch-src_password-store_sh 
Removed files:
	x11/dunst/patches: patch-Makefile 

Log message:
Our cp(1), mv(1) and rm(1) support `-v' now.

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/28 07:34:52

Modified files:
	lib/libcrypto/perlasm: x86gas.pl 

Log message:
.init stub creation doesn't need a jmp + .align to reach a branch target,
just fall into the code.  The .align created a FILL zone in the .init section,
which on i386 was filled with a NOP-sled, something we want to get away
from.
discussed with kettenis and tom


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/06/28 07:37:56

Modified files:
	usr.bin/file   : Makefile file.c 

Log message:
Simplify file(1) by removing the no longer necessary parent/child separation
and just drop privileges in the main process.

Also allows for a tighter "stdio" pledge.

passing regress tests still pass

ok nicm@ with helpful feedback


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/28 07:52:44

Modified files:
	audio/gsm      : Makefile distinfo 
	audio/gsm/patches: patch-Makefile 

Log message:
update to gsm-1.0.17


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/28 08:07:11

Modified files:
	usr.sbin/dhcpd : dhcpd.conf.5 

Log message:
remove a contradictory sentence (see dhcp-options(5)) which claims
hostnames which resolve to muliple ip addresses are all forwarded to
the client;

issue reported by edgar pettijohn;
discussed with dhcpd's de facto maintainer, kenneth westerback;


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/28 08:35:43

Modified files:
	sbin/dhclient  : dhclient.8 dhclient.c dhcpd.h kroute.c 
	                 privsep.c privsep.h 

Log message:
Stop trying to clean up addresses, routes and "-L" file
whenever dhclient dies. Eliminates differences in handling
and thus need to intercept signals INT, TERM, USR1,
USR2. Eliminates need for 'zapzombies' field and thus
entire struct imsg_flushroutes. Eliminates need for 'imsg'
parameter to and associated logic in priv_flush_routes().

Address, routes and '-L' file are still cleaned out when
binding a lease.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/28 08:49:26

Modified files:
	usr.bin/paste  : paste.1 

Log message:
Remove the nonsensical "-s - -" in the third example; quirk reported
by Redouan Ait Mallouk <raitmallouk at gmail dot com>.

The paste(1) utility allows two equivalent solutions for many tasks
involving only one input stream; while here, make that more obvious
by always showing both solutions.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/28 08:58:23

Modified files:
	usr.bin/mail   : tty.c 

Log message:
Replace usage of TIOCSTI in mail while editing headers using a more common
IO-loop where ICANON is disabled and a single char of input is read at a time.
This requires the line editing capabilities provided when ICANON is enabled to
be implemented.

ok deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/28 09:03:42

Modified files:
	net/vsftpd     : Makefile 
	net/vsftpd/patches: patch-sysdeputil_c 

Log message:
use getpwnam_shadow to unbreak non-anonymous ftp connections in vsftpd.
ok benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/28 09:06:48

src/regress/usr.bin/mail

Update of /cvs/src/regress/usr.bin/mail
In directory cvs.openbsd.org:/tmp/cvs-serv79296/mail

Log Message:
Directory /cvs/src/regress/usr.bin/mail added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/28 09:09:41

Modified files:
	regress/usr.bin: Makefile 
Added files:
	regress/usr.bin/mail: Makefile send.sh 

Log message:
Add regression tests for mail.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/28 09:23:19

Modified files:
	sbin/dhclient  : dhcpd.h kroute.c 

Log message:
resolv_conf_priority() is a function local to kroute.c, no
need to expose its definition in dhcpd.h. While here change
the parameter from struct interface_info to int and just pass
the only field used (rdomain).


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/28 09:40:54

Modified files:
	usr.bin/file   : file.c 

Log message:
perform an initial pledge very early on, and drop tzset to later.
ok nicm brynet


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/28 09:42:49

Modified files:
	usr.bin/file   : file.c 

Log message:
remove excess #include


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/28 09:45:32

Modified files:
	sbin/dhclient  : kroute.c 

Log message:
delete_route() doesn't need any info from its struct interface_info
parameter as the route message already has the correct tableid. So
eliminate the useless parameter.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/28 10:09:17

Modified files:
	sysutils/d-feet: Makefile distinfo 
	sysutils/d-feet/pkg: PLIST 

Log message:
Update to d-feet-0.3.12.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/28 10:26:55

Modified files:
	devel/scons    : Makefile distinfo 
	devel/scons/pkg: PLIST 
Removed files:
	devel/scons/patches: patch-engine_SCons_Tool_m4_py 

Log message:
Update to 2.5.1
changelog: https://bitbucket.org/scons/scons/src/rel_2.5.1/src/CHANGES.txt
build tested all its dependencies successfully (thanks to bentley@ for
help)
Patch goes away because our m4(1) now has the -E flag
Take maintainer.
ok bentley@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/28 10:31:52

Modified files:
	sbin/dhclient  : dhclient.c kroute.c privsep.c privsep.h 

Log message:
Only pass required fields of interface_info to priv_* functions
and friends. i.e. ifi->name, ifi->rdomain, or both.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/28 10:34:59

Modified files:
	shells/nsh     : Makefile 
	shells/nsh/patches: patch-commands_c patch-conf_c patch-stats_c 
Added files:
	shells/nsh/patches: patch-Makefile patch-arp_c patch-externs_h 

Log message:
disable timeslots code to unbreak following SIOCSIFTIMESLOT removal


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/28 10:43:46

Log message:
    Import games/openrct2, an open source re-implementation of RollerCoaster
    Tycoon 2.
    ok bentley@
    
    OpenRCT2 is an open source re-implementation of RollerCoaster Tycoon 2
    and the original RollerCoaster Tycoon, construction and management
    simulation games that simulate amusement park management. You can also
    build your own roller coasters.
    
    OpenRCT2 requires game files from RollerCoaster Tycoon 2 in order to
    work properly. It will also use files from the original RollerCoaster
    Tycoon if available.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170628
    
    N ports/games/openrct2/Makefile
    N ports/games/openrct2/distinfo
    N ports/games/openrct2/patches/patch-src_openrct2_common_h
    N ports/games/openrct2/patches/patch-src_openrct2_CMakeLists_txt
    N ports/games/openrct2/patches/patch-CMakeLists_txt
    N ports/games/openrct2/pkg/PLIST
    N ports/games/openrct2/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/28 10:44:50

Modified files:
	games          : Makefile 

Log message:
+openrct2


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/06/28 11:04:10

Modified files:
	net/p5-Net-DNS : Makefile distinfo 

Log message:
update p5-Net-DNS to 1.11


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/06/28 11:14:16

Modified files:
	usr.bin/file   : file.c 

Log message:
Fix stdin file read support, accidentally broken in my last commit.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/28 11:28:39

Modified files:
	regress/usr.bin/file: Makefile 
Added files:
	regress/usr.bin/file: stdin.out 

Log message:
Test for file from stdin.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/28 11:49:51

Modified files:
	devel/py-py    : Makefile distinfo 

Log message:
Update to py-py-1.4.34 and remove maintainer

ok eric@ (previous maintainer), tweak/ok shadchin@


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/28 11:54:31

Modified files:
	sbin/dhclient  : dhclient.8 

Log message:
reinstate .El removed in previous;


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/28 11:59:31

Modified files:
	audio/beets    : Makefile distinfo 
	audio/beets/pkg: PLIST 

Log message:
update to beets-1.4.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/28 12:00:36

Log message:
    Import py-test-expect 1.1.0, ok danj@
    
    DESCR:
    
    A py.test plugin that stores test expectations by saving the set of
    failing tests, allowing them to be marked as xfail when running them
    in future. The tests expectations are stored such that they can be
    distributed alongside the tests. However, note that test expectations
    can only be reliably shared between Python 2 and Python 3 if they only
    use ASCII characters in their node ids: this likely isn't a limitati
    n if tests are using the normal Python format, as Python 2 only allows
    ASCII characters in identifiers.
    
    Status:
    
    Vendor Tag:	shadchin
    Release Tags:	shadchin_20170628
    
    N ports/devel/py-test-expect/Makefile
    N ports/devel/py-test-expect/distinfo
    N ports/devel/py-test-expect/pkg/PLIST
    N ports/devel/py-test-expect/pkg/DESCR
    N ports/devel/py-test-expect/patches/patch-pytest_expect_expect_py
    N ports/devel/py-test-expect/patches/patch-setup_py
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/28 12:02:24

Modified files:
	devel/py-html5lib: Makefile distinfo 
	devel/py-html5lib/pkg: PLIST 
Removed files:
	devel/py-html5lib/patches: patch-html5lib_ihatexml_py 
	                           patch-html5lib_treebuilders_etree_lxml_py 

Log message:
Update to py-html5lib 0.999999999

ok danj@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/28 12:03:20

Modified files:
	www/py-bleach  : Makefile distinfo 
	www/py-bleach/pkg: PLIST 

Log message:
Update to py-bleach 2.0.0

ok danj@


CVSROOT:	/cvs
Module name:	ports
Changes by:	shadchin@cvs.openbsd.org	2017/06/28 12:05:51

Modified files:
	devel          : Makefile 

Log message:
+py-test-expect
+py-test-expect,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/28 12:24:02

Modified files:
	sys/conf       : files 
	sys/net        : hfsc.c 

Log message:
hfsc.c should depend on pf instead of inet

Discussed with and OK henning@ at d2k17 as a part of a larger diff.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/28 12:31:03

Modified files:
	sys/net        : pfvar.h 

Log message:
Extend pf queueing ops to include queue manager hooks

Discussed with and OK henning@ at d2k17 as a part of a larger diff.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/28 13:13:35

Modified files:
	sys/net        : fq_codel.c 

Log message:
Provide pf queue manager API

Discussed with and OK henning@ at d2k17 as a part of a larger diff.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/28 13:27:42

Modified files:
	sys/net        : pf_ioctl.c 

Log message:
Tighten up FQ-CoDel vs HFSC checks

PFQS_FLOWQUEUE is about to become a flag that HFSC classes may specify
as well; thus a better way of telling FQ-CoDel and HFSC apart needs to
be found.  At the moment its derived from the queue specification.

Discussed with and OK henning@ at d2k17 as a part of a larger diff.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/06/28 13:30:25

Modified files:
	sys/net        : pf_ioctl.c pfvar.h 

Log message:
Introduce a simple mechanism to select the appropriate queue manager

Discussed with and OK henning@ at d2k17 as a part of a larger diff.


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/06/28 13:30:39

Modified files:
	editors/texworks: Makefile 

Log message:
Switch to C++-11 for a pending udpate of print/poppler.

No mixup of libstdc++ and libestdc++, so this one should be safe.

ok edd@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/06/28 13:50:16

Modified files:
	editors/texmaker: Makefile 

Log message:
Switch to C++-11 for a pending udpate of print/poppler.

As in texworks, no mixup of libstdc++ and libestdc++.

ok shadchin@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	job@cvs.openbsd.org	2017/06/28 16:07:50

Modified files:
	geo/openbsd-developers: Makefile 
	geo/openbsd-developers/files: OpenBSD 

Log message:
Add Job


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/06/28 18:33:59

Modified files:
	sysutils/collectd: Makefile 
Added files:
	sysutils/collectd/patches: patch-src_email_c patch-src_exec_c 
	                           patch-src_unixsock_c 

Log message:
Enlarge some buffers because 2048 is not enough to get getgrnam_r result.
Also fix errno handling in exec.c. Many thanks to jca@ for the help.

"if it builds, ship it" jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/06/28 19:25:59

Modified files:
	lib/libevent   : event.3 

Log message:
take const off the timeval argument in the pending functions.

event_pending, evtimer_pending, and signal_pending all write to the
timeval because that's how they tell the caller when the event is
meant to fire.

ok deraadt@ millert@ jmc@ schwarze@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/28 19:42:27

Modified files:
	devel/libmagic : Makefile 
	devel/libmagic/pkg: PLIST 

Log message:
Put the magic file format manpage in section 5

From Klemens Nanni


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/06/28 21:48:44

Modified files:
	sys/dev        : ipmi.c 

Log message:
set c.c_maxrxlen to something. apparently lost a line somewhere.
maybe it works now? :)
from Colin Stolley via Paul B. Henson


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/28 22:10:07

Modified files:
	sys/kern       : kern_pledge.c tty.c 
	share/man/man4 : tty.4 

Log message:
Due to risks known for decades, TIOCSTI now performs no action, and simply
returns EIO.  The base system has been cleaned of TIOCSTI uses (collaboration
between anton and I), and the ports tree appears mostly clean.  A few
stragglers may be discovered and cleaned up later...
In a month or so, we should see if the #define can be removed entirely.
ok anton tedu, support from millert


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/28 22:23:12

Modified files:
	sys/sys        : ttycom.h 
	bin/csh        : file.c 

Log message:
Switch TIOCSTAT to _IO().  Two decades ago it was mistakenly defined to
take an argument.  Discussed with millert and tedu.


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/28 22:24:31

Modified files:
	share/man/man7 : eqn.7 

Log message:
Fix incorrectly swapped labels of left/right arrows.

ok schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/28 23:40:37

Modified files:
	sys/arch/arm64/arm64: autoconf.c 
	sys/arch/arm64/conf: Makefile.arm64 

Log message:
TEMPORARILY disable gap compilation, until lld is fixed/updated to
newer code with a variety of ld.script bugs fixed.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/29 00:15:30

Modified files:
	sys/arch/i386/i386: locore0.S 

Log message:
hide some locore0 symbols that are only used inside locore0.

ok deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/29 01:01:49

Modified files:
	usr.bin/calendar/calendars: calendar.ushistory 

Log message:
spelling fix; from greg lehey, freebsd r320427;


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/29 01:11:24

Modified files:
	sys/arch/i386/i386: machdep.c 

Log message:
Remove an "#if 1" that had been in the code for 16 years. I think it's
safe to say it's been enabled long enough to warrant permanent inclusion.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/29 01:19:40

Modified files:
	sys/arch/amd64/amd64: machdep.c 

Log message:
Remove a block of "#if 0" code that has been in the file since r1.1, 13
years ago. This was part of the original reset code port from i386, and
we've never been able to reset amd64 in the way the code tries to do in
the #if 0 block since we don't have a 'PTD' variable in amd64.

I thought to keep this around for diffability with i386, but that's pretty
pointless now as the diff between the two machdep.c files is over 5000
lines already...


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/29 01:27:05

Modified files:
	devel/ruby-puppet_forge: Makefile distinfo 
	devel/ruby-puppet_forge/pkg: PLIST 

Log message:
Minor update to 2.2.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/29 01:29:07

Modified files:
	sysutils/ruby-r10k: Makefile distinfo 
	sysutils/ruby-r10k/pkg: PLIST 

Log message:
Minor update to 2.5.5


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/29 01:51:59

Modified files:
	sys/arch/i386/i386: mptramp.s 

Log message:
suppress local symbols in mptramp. Matches a similar diff in
acpi_wakecode.s that was committed previously.

Tested MP boot, un-zzz, un-ZZZ, no issues seen.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/29 02:14:36

Modified files:
	sys/arch/amd64/amd64: mptramp.S 

Log message:
suppress local symbols in mptramp. Matches a similar diff in
acpi_wakecode.s that was committed previously. Also remove an extra
symbol (mp_tramp_pdirpa) that was duplicated with mp_pdirpa.

Tested MP boot, un-zzz, un-ZZZ, no issues seen.


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/29 02:24:10

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
add some comments, no functional change


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 02:36:22

Modified files:
	devel/libwnck3 : Makefile distinfo 
	devel/libwnck3/patches: patch-libwnck_tasklist_c 

Log message:
Update to libwnck3-3.24.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 02:38:36

Modified files:
	x11/gnome/tracker: Makefile distinfo 

Log message:
Update to meta-tracker-1.12.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 02:40:38

Modified files:
	devel/libmagic : Makefile 
	devel/libmagic/pkg: DESCR 

Log message:
Fix a couple of typos.
from Klemens Nanni


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 02:44:03

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-161.0.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/06/29 02:45:20

Modified files:
	usr.sbin/vipw  : vipw.c 

Log message:
Move <fcntl.h> to its alphabetic spot and add __dead attribute to usage()

ok mestre


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/29 02:49:33

Modified files:
	net/lftp       : Makefile 
Added files:
	net/lftp/patches: patch-doc_lftp_1 

Log message:
Switch lftp to using mandoc, fixing tables.

Add a patch from schwarze@ to avoid information loss in both groff and
mandoc (".PP text" to ".PP\ntext").

"It looks like pkg_create(1) is not passing the -t option to groff(1)
because lftp(1) lacks the tbl(7) annotation that you can see in the
first source line of, for example, xz(1)." and OK schwarze@

OK rsadowski@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 03:35:45

Modified files:
	graphics/openscenegraph: Makefile 
	graphics/openscenegraph/patches: patch-CMakeLists_txt 

Log message:
Don't pick up libvncserver.
While here, drop gettext module and regen WANTLIB.


CVSROOT:	/cvs
Module name:	ports
Changes by:	job@cvs.openbsd.org	2017/06/29 03:37:45

Modified files:
	geo/openbsd-developers: Makefile 
	geo/openbsd-developers/files: OpenBSD 

Log message:
Update entry for Job

Turns out I don't live in Paris.

OK sthen@ phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/29 04:31:06

Modified files:
	net/ldns       : Makefile.inc distinfo 
	net/ldns/libldns: Makefile 
	net/ldns/libldns/patches: patch-Makefile_in 
	net/ldns/libldns/pkg: PLIST 
	net/ldns/utils : Makefile 
	net/ldns/utils/patches: patch-examples_configure_ac 
	                        patch-examples_ldns-signzone_c 
Removed files:
	net/ldns/libldns/patches: patch-doc_doxyparse_pl 
	net/ldns/utils/patches: patch-dnssec_c patch-dnssec_sign_c 
	                        patch-ldns_dnssec_h 

Log message:
update to ldns-1.7.0, maintainer timeout


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/06/29 04:56:18

Modified files:
	sys/arch/octeon/dev: cn30xxgmx.c 

Log message:
Always use the maximum permissible frame size for Rx size limit.
This lets a change of interface MTU take effect immediately without
link cycling and brings cnmac(4) into line with other jumbo frame
capable NIC drivers.

Prompted by Joe Holden on misc@
OK dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/29 06:00:38

Modified files:
	mail/rspamd    : Makefile distinfo 
	mail/rspamd/patches: patch-CMakeLists_txt 
	                     patch-contrib_zstd_CMakeLists_txt 
	mail/rspamd/pkg: PLIST 

Log message:
Update to rspamd 1.6.1.

rmilter support is now deprecated, see
https://rspamd.com/announce/2017/06/12/rspamd-1.6.0.html. Drop gd
dependency following upstream.

ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/29 07:04:09

Modified files:
	sys/arch/armv7/conf: Makefile.armv7 

Log message:
0xd4d4d4d4 is a useful 'trap instruction' on arm64, but not on arm32.
0xffffffff seems better in userland and kernel. still not exactly happy
with the situation.
long discussion with kettenis.  anyone else have an opinion?


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/29 07:16:39

Modified files:
	share/man/man7 : mdoc.7 

Log message:
Clarify that .Ta as a line macro is a portability problem,
even though mandoc(1) handles it;
triggered by a question from Yuri Pankov (illumos).


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/06/29 07:41:50

Modified files:
	databases/ksql : Makefile distinfo 
	databases/ksql/pkg: PLIST 

Log message:
Update ksql to 0.1.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/29 07:52:38

Modified files:
	x11/mate/themes: Makefile 

Log message:
add missing build dependency


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 07:54:13

Modified files:
	x11/gnome/control-center: Makefile 
	x11/gnome/control-center/pkg: PLIST 
Removed files:
	x11/gnome/control-center/files: os-release.in 

Log message:
Revert /etc/os-release addition; while it fixes the immediate problem here,
it may lead to inconsistent behaviour in other applications (thinking we
are Linux).

thank you sthen@ for the ports source grep(1)


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/29 07:55:53

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c kroute.c 

Log message:
delete_addresses(), interface_status(), addressinuse(),
lease_as_string() and rewrite_option_db() only use the
interface name, so supply just the name.

Tweak interface_link_forceup() to use the same param
name as other functions taking the interface name.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/29 07:59:03

Modified files:
	security/libgpg-error: Makefile 
Added files:
	security/libgpg-error/patches: patch-doc_gpgrt_info 

Log message:
Fix info file so that install-info --delete succeeds.

Reported by many including tedu@, ok ajacoutot@

If you see an error message about gpgrt.info at pkg_add time, you can
manually fix your install with:

sed -i 's/^\* libgpg-error: (gnupg)/* libgpg-error: (gpgrt)/' /usr/local/info/dir


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 08:35:10

Log message:
    Import google-compute-engine-2.4.0.
    
    Google Compute Engine offers scripts and daemons which runs in the
    background and provides the following services:
    <...>
    
    from MAINTAINER Helen Koike  helen dot koike at collabora dot com with a few tweaks
    ok sthen@
    
    Status:
    
    Vendor Tag:	ajacoutot
    Release Tags:	ajacoutot_20170629
    
    N ports/sysutils/google-compute-engine/Makefile
    N ports/sysutils/google-compute-engine/distinfo
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_accounts_accounts_daemon_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_accounts_accounts_utils_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_clock_skew_clock_skew_daemon_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_config_manager_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_instance_setup_instance_config_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_instance_setup_instance_setup_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_ip_forwarding_ip_forwarding_daemon_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_ip_forwarding_ip_forwarding_utils_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_metadata_scripts_script_executor_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_network_setup_network_setup_py
    N ports/sysutils/google-compute-engine/patches/patch-google_compute_engine_network_utils_py
    N ports/sysutils/google-compute-engine/patches/patch-setup_py
    N ports/sysutils/google-compute-engine/pkg/DESCR
    N ports/sysutils/google-compute-engine/pkg/PLIST
    N ports/sysutils/google-compute-engine/pkg/README
    N ports/sysutils/google-compute-engine/pkg/google_accounts_daemon.rc
    N ports/sysutils/google-compute-engine/pkg/google_clock_skew_daemon.rc
    N ports/sysutils/google-compute-engine/pkg/google_compute_engine.rc
    N ports/sysutils/google-compute-engine/pkg/google_ip_forwarding_daemon.rc
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/29 08:35:43

Modified files:
	sysutils       : Makefile 

Log message:
+google-compute-engine


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/29 09:21:46

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 
	regress/usr.bin/mandoc/mdoc/Bl: Makefile column.in 
	                                column.out_lint 
Added files:
	regress/usr.bin/mandoc/mdoc/Bl: column_nogroff.in 
	                                column_nogroff.out_ascii 
	                                column_nogroff.out_lint 
	                                column_nogroff.out_markdown 

Log message:
warn about some non-portable idioms in .Bl -column;
triggered by a question from Yuri Pankov (illumos)


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/06/29 09:32:36

Modified files:
	share/man/man7 : hier.7 
	share/man/man8 : rc.8 

Log message:
some kernel relink bits, tweaked by deraadt;


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/06/29 09:43:54

Modified files:
	security/yara  : Makefile.inc 
	security/yara/main: distinfo 
	security/yara/python: distinfo 
Removed files:
	security/yara/main/patches: patch-libyara_modules_pe_c 

Log message:
update yara to 2.6.2.
ok benoit@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/29 09:55:21

Modified files:
	mail/rmilter   : Makefile 
	mail/rmilter/pkg: DESCR 

Log message:
Modify rmilter's DESCR to warn that it is now obsolete and should be replaced
by rspamd 1.6+'s built-in milter support.

The package is maintained in the short term to ease transition, but will be
removed later.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/29 09:56:14

Log message:
    Import lang/algol68g, the Algol 68 Genie compiler-interpreter.
    ok benoit@
    
    The Algol 68 Genie project preserves and promotes Algol 68 out of
    educational as well as scientific-historical interest, by making
    available a recent checkout compiler-interpreter written from scratch
    together with extensive documentation for both the language and this new
    implementation. Algol 68 Genie is a fast compiler-interpreter which
    ranks among the most complete implementations of the language.
    
    Status:
    
    Vendor Tag:	bcallah
    Release Tags:	bcallah_20170629
    
    N ports/lang/algol68g/Makefile
    N ports/lang/algol68g/distinfo
    N ports/lang/algol68g/patches/patch-source_a68g_c
    N ports/lang/algol68g/patches/patch-configure
    N ports/lang/algol68g/patches/patch-source_a68g_h
    N ports/lang/algol68g/pkg/PLIST
    N ports/lang/algol68g/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/29 09:56:43

Modified files:
	lang           : Makefile 

Log message:
+algol68g


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/06/29 10:20:49

Modified files:
	share/man/man4 : tty.4 

Log message:
Mention TIOCSTAT in tty(4).

ok deraadt@ millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/06/29 10:30:47

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
Skip whitespace at the beginning of eqn(7) nodes,
in particular ~ and ^ that misrendered;
found by bentley@ in glCopyTexSubImage1D(3); also affected
glAccum(3), glClipPlane(3), glDrawPixels(3), glEvalMesh(3), and others.


CVSROOT:	/cvs
Module name:	src
Changes by:	martijn@cvs.openbsd.org	2017/06/29 10:49:59

Modified files:
	bin/ksh        : sh.h vi.c 

Log message:
Increase the input line buffer to 4096 bytes.

Sounds good to deraadt@
OK anton@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/06/29 10:51:35

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/luna88k/conf: Makefile.luna88k 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/socppc/conf: Makefile.socppc 
	sys/arch/sparc64/conf: Makefile.sparc64 
	sys/arch/arm64/conf: Makefile.arm64 

Log message:
put SYSTEM_SWAP_DEP out of its misery, it died in 1997, along with config.old
"go for it" deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/29 11:10:06

Modified files:
	net/knot       : Makefile distinfo 

Log message:
SECURITY update to knot-2.4.5

o Improper TSIG validity period check can allow TSIG forgery
No CVE assigned (yet?)


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/29 11:17:28

Modified files:
	sys/arch/amd64/amd64: locore.S mutex.S vector.S 
	sys/arch/i386/i386: in_cksum.s locore.s mutex.S 

Log message:
Put asm-generated strings into .rodata
ok millert


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/06/29 11:36:16

Modified files:
	sys/arch/alpha/include: asm.h 
	sys/arch/amd64/include: asm.h 
	sys/arch/arm/include: asm.h 
	sys/arch/arm64/include: asm.h 
	sys/arch/i386/include: asm.h 
	sys/arch/mips64/include: asm.h 
	sys/arch/powerpc/include: asm.h 
	sys/arch/sh/include: asm.h 
	sys/arch/sparc64/include: asm.h 
	sys/dev/ic     : dwc_gmac.c 
	sys/dev/usb/dwc2: dwc2.c dwc2_core.c dwc2_coreintr.c dwc2_hcd.c 
	                  dwc2_hcdddma.c dwc2_hcdintr.c dwc2_hcdqueue.c 

Log message:
kill RCSID macros; discussed with millert


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/29 11:46:47

Modified files:
	textproc/py-elasticsearch: Makefile distinfo 
	textproc/py-elasticsearch/pkg: PLIST 

Log message:
Update to 5.4.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/29 11:48:22

Modified files:
	sysutils/py-elasticsearch-curator: Makefile distinfo 

Log message:
Update to 5.1.1, bump dependency to py-elasticsearch >=5.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/06/29 13:00:28

Modified files:
	www/chromium   : Makefile distinfo 
	www/chromium/patches: patch-chrome_common_chrome_switches_cc 

Log message:
update to 59.0.3071.115;

use a hand-crafted tarball this time because google failed to create a
a working one :)


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/29 13:58:36

Modified files:
	archivers/unrar: Tag: OPENBSD_6_1 Makefile distinfo 
	archivers/unrar/patches: Tag: OPENBSD_6_1 patch-makefile 
	                         patch-os_hpp patch-rijndael_cpp 

Log message:
Security update to 5.50 beta 4 to fix the VMSF_DELTA filter signedness
error and unspecified other issues.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/29 15:14:54

Modified files:
	net/isc-bind   : Makefile distinfo 

Log message:
Update to BIND 9.10.5-P2

An error in TSIG handling could permit unauthorized zone transfers
or zone updates. CVE-2017-3142, CVE-2017-3143.

Also updates the address of b.root in hints.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/29 15:15:31

Modified files:
	net/isc-bind   : Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
Update to BIND 9.10.5-P2

An error in TSIG handling could permit unauthorized zone transfers
or zone updates. CVE-2017-3142, CVE-2017-3143.

Also updates the address of b.root in hints.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/06/29 15:37:43

Modified files:
	sbin/dhclient  : clparse.c conflex.c dhcpd.h dhctoken.h parse.c 

Log message:
Nuke undocumented long-deprecated and/or unsupported lease
fields 'hardware', 'alias', 'media', 'medium', 'ethernet'.

Also remove now-unused parse_ethernet().

Making these parsing failures will smoke out anybody with
leases or conf files from the last century.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/29 16:02:19

Modified files:
	usr.bin/tmux   : tmux.1 

Log message:
Use 100 as the example for command-alias because the defaults are from 0
to (currently) 5.


CVSROOT:	/cvs
Module name:	www
Changes by:	dlg@cvs.openbsd.org	2017/06/29 18:40:21

Modified files:
	faq            : current.html 

Log message:
document the changes to vlan/svlan configuration

prompted by a discussion with naddy@
tweaks and ok from tb@ naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/06/29 22:17:23

Modified files:
	usr.bin/ssh    : ssh-keyscan.c 

Log message:
Only call close once in confree().  ssh_packet_close will close the FD
so only explicitly close non-SSH channels.  bz#2734, from
bagajjal at microsoft.com, ok djm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/29 23:24:36

Modified files:
	www/mozilla-firefox: Makefile distinfo 
	www/firefox-i18n: Makefile.inc distinfo 

Log message:
Update to firefox 54.0.1.

See https://www.mozilla.org/en-US/firefox/54.0.1/releasenotes/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/29 23:26:23

Modified files:
	www/firefox-esr: Makefile distinfo 
	www/firefox-esr-i18n: Makefile.inc distinfo 

Log message:
Update to firefox-esr 52.2.1.

See https://www.mozilla.org/en-US/firefox/52.2.1/releasenotes/


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/29 23:28:58

Modified files:
	www/mozilla-firefox: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC: update to firefox 54.0.1.

See https://www.mozilla.org/en-US/firefox/54.0.1/releasenotes/

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/06/29 23:29:34

Modified files:
	www/firefox-esr: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
MFC: update to firefox-esr 52.2.1.

See https://www.mozilla.org/en-US/firefox/52.2.1/releasenotes/

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/30 00:17:47

Modified files:
	sys/arch/i386/i386: locore.s 

Log message:
Remove unused variables


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/06/30 00:25:29

Modified files:
	sys/dev/acpi   : acpivideo.c 

Log message:
Fix a format string specifier error in a debug printf.

Noticed and reported by Fasse:

fasse dot f2 at gmail dot com

Thanks.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/30 01:46:11

Modified files:
	x11/dbus       : Makefile distinfo 

Log message:
Update to dbus-1.10.20.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/30 01:47:36

Modified files:
	security/libgcrypt: Makefile distinfo 

Log message:
SECURITY update to libgcrypt-1.7.8.
[CVE-2017-7526]
- See https://eprint.iacr.org/2017/627 for details.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/30 01:50:07

Modified files:
	security/libgcrypt: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
SECURITY update to libgcrypt-1.7.8.
[CVE-2017-7526]
- See https://eprint.iacr.org/2017/627 for details.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/30 01:55:12

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.77.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/06/30 01:55:23

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.114.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/30 02:05:08

Modified files:
	devel/leatherman: Makefile distinfo 
	devel/leatherman/pkg: PLIST 

Log message:
Update to 1.0.0, bump library versions since symbols disappeared


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/30 02:06:45

Modified files:
	sysutils/facter: Makefile distinfo 
Added files:
	sysutils/facter/patches: patch-lib_inc_facter_facts_vm_hpp 
	                         patch-lib_src_facts_openbsd_dmi_resolver_cc 
	                         patch-lib_src_facts_resolvers_virtualization_resolver_cc 

Log message:
Update to 3.7.0
while there, make the virtual fact properly report 'vmm' as hypervisor
when running as VM in vmm.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/06/30 02:12:58

Modified files:
	net/ladvd      : Makefile 
	net/ladvd/pkg  : ladvd.rc 

Log message:
Fix pexp in rcscript.

You may need to manually remove /var/run/rc.d/ladvd.

From MAINTAINER Paul de Weerd.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/30 02:16:25

Modified files:
	databases/ruby-hiera3: Makefile distinfo 
	databases/ruby-hiera3/pkg: PLIST 

Log message:
Update to 3.4.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/30 02:21:18

Modified files:
	sysutils/ruby-puppet-syntax: Makefile distinfo 
	sysutils/ruby-puppet-syntax/pkg: PLIST 

Log message:
Minor update to 2.4.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/06/30 02:31:20

Modified files:
	devel/ruby-gettext-setup: Makefile distinfo 
	devel/ruby-gettext-setup/pkg: PLIST 

Log message:
Minor update to 0.25


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/06/30 02:39:16

Modified files:
	games/fortune/fortune: fortune.c 

Log message:
Add missing rot13 function prototype


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/30 04:45:49

Modified files:
	devel/jsoncpp  : Makefile distinfo 

Log message:
Update to jsoncpp-1.8.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/30 04:50:53

Modified files:
	security/pcsc-lite: Makefile distinfo 

Log message:
Bugfixing update to pcsc-lite-1.8.22


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 05:25:29

Modified files:
	lib/libexpat   : COPYING Changes Makefile README expat_config.h 
	lib/libexpat/doc: reference.html 
	lib/libexpat/examples: elements.c outline.c 
	lib/libexpat/lib: expat.h expat_external.h internal.h 
	                  winconfig.h xmlparse.c xmlrole.c xmltok.c 
	                  xmltok_impl.c 
Added files:
	lib/libexpat   : AUTHORS Symbols.map 
	lib/libexpat/lib: siphash.h 

Log message:
Update libexpat to version 2.2.1 which has some security fixes.
- CVE-2017-9233 CVE-2016-9063 CVE-2016-5300 CVE-2016-4472 CVE-2016-0718
CVE-2015-2716 CVE-2015-1283 CVE-2012-6702 CVE-2012-0876 have been
addressed.  Not all of them affect OpenBSD as we had fixes before.
- Upstream uses arc4random_buf(3) now.  Delete all code for other
entropy sources to make sure to compile the correct one.  Our
library already used arc4random(3) before.
- The overflow fixes in rev 1.11 and 1.12 of lib/xmlparse.c
have been commited upstream in a different way.  Use the upstream
code to make maintenance easier.
- Although it should be ABI compatible, there is a new global
symbol align_limit_to_full_utf8_characters.  As it is in
lib/internal.h, add a Symbols.map to restrict the export.  Do not
bump the shared library version.
- Use the internal expat's siphash.h.
ports build ajacoutot@; move ahead deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 05:29:15

Modified files:
	sys/netinet6   : ip6_forward.c 

Log message:
In OpenBSD 6.0 we had the check (ip6_forward_rt.ro_tableid !=
m->m_pkthdr.ph_rtableid) after going to reroute in ip6_forward().
As this had been lost during refactoring, the old route was used
after pf has changed the routing table.  Solution is to reset the
route, then it is not valid and will be reallocated.
from markus@; OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 07:25:02

Removed files:
	lib/libexpat/lib: amigaconfig.h macconfig.h 

Log message:
AmigaOS and pre-X Mac OS support has been dropped in upstream
libexpat.  Remove obsolete header files, missed in previous commit.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/30 07:26:22

Modified files:
	mail/roundcubemail: Makefile distinfo 
	mail/roundcubemail/patches: patch-UPGRADING patch-bin_update_sh 
	                            patch-config_config_inc_php_sample 
	                            patch-config_defaults_inc_php 
	mail/roundcubemail/pkg: PLIST 

Log message:
update to roundcubemail-1.3.0, ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/30 07:26:33

Modified files:
	mail/rcube-contextmenu: Makefile distinfo 
	mail/rcube-contextmenu/pkg: PLIST 

Log message:
update to rcube-contextmenu-2.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	uaa@cvs.openbsd.org	2017/06/30 07:26:43

Log message:
    initial revision
    
    Status:
    
    Vendor Tag:	uaa
    Release Tags:	uaa_20170630
    
    N ports/sysutils/xorriso/distinfo
    N ports/sysutils/xorriso/Makefile
    N ports/sysutils/xorriso/pkg/PLIST
    N ports/sysutils/xorriso/pkg/DESCR
    N ports/sysutils/xorriso/patches/patch-configure
    N ports/sysutils/xorriso/patches/patch-libisofs_eltorito_c
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	uaa@cvs.openbsd.org	2017/06/30 07:33:26

Log message:
    initial import
    
    Status:
    
    Vendor Tag:	uaa
    Release Tags:	uaa_20170630
    
    U ports/sysutils/xorriso/distinfo
    U ports/sysutils/xorriso/Makefile
    U ports/sysutils/xorriso/pkg/PLIST
    U ports/sysutils/xorriso/pkg/DESCR
    U ports/sysutils/xorriso/patches/patch-configure
    U ports/sysutils/xorriso/patches/patch-libisofs_eltorito_c
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/30 07:37:34

Modified files:
	net/radcli     : Makefile distinfo 
Removed files:
	net/radcli/patches: patch-lib_util_c 

Log message:
update to radcli-1.2.8


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/06/30 07:49:09

Modified files:
	textproc/hs-HaXml: Makefile distinfo 
	textproc/hs-HaXml/pkg: PLIST 

Log message:
Update to HaXml-1.25.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/30 08:11:08

Modified files:
	net/knot       : Tag: OPENBSD_6_1 Makefile 
Added files:
	net/knot/patches: Tag: OPENBSD_6_1 patch-src_libknot_tsig-op_c 

Log message:
Backport fix for Knot DNS TSIG forgery issue from upstream's repo.  ok jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 08:39:56

src/lib/libexpat/tests

Update of /cvs/src/lib/libexpat/tests
In directory cvs.openbsd.org:/tmp/cvs-serv44007/tests

Log Message:
Directory /cvs/src/lib/libexpat/tests added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 08:40:14

src/lib/libexpat/tests/benchmark

Update of /cvs/src/lib/libexpat/tests/benchmark
In directory cvs.openbsd.org:/tmp/cvs-serv56762/tests/benchmark

Log Message:
Directory /cvs/src/lib/libexpat/tests/benchmark added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/06/30 08:42:05

Modified files:
	usr.bin/vi/common: options.c 
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 

Log message:
Add mdoc(7) macros to vi's built-in lists of roff paragraph/section macros.

ok jmc@, no objection schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 08:43:26

Added files:
	lib/libexpat/tests: README.txt chardata.c chardata.h memcheck.c 
	                    memcheck.h minicheck.c minicheck.h 
	                    runtests.c runtestspp.cpp xmltest.sh 
	lib/libexpat/tests/benchmark: README.txt benchmark.c 

Log message:
Add test suite source files for expat 2.2.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/06/30 08:56:08

Log message:
    Build and run libexpat regress tests from src/lib/libexpat/tests.
    
    Status:
    
    Vendor Tag:	bluhm
    Release Tags:	bluhm_20170630
    
    N src/regress/lib/libexpat/Makefile
    N src/regress/lib/libexpat/Makefile.inc
    N src/regress/lib/libexpat/runtests/Makefile
    N src/regress/lib/libexpat/runtestspp/Makefile
    N src/regress/lib/libexpat/benchmark/Makefile
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	pirofti@cvs.openbsd.org	2017/06/30 10:43:53

Modified files:
	www/rt         : Makefile distinfo 
	www/rt/patches : patch-Makefile_in 
	                 patch-sbin_rt-test-dependencies_in 
	www/rt/pkg     : PLIST 

Log message:
Update www/rt to 4.4.1.

OK robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/06/30 10:46:02

Modified files:
	distrib/miniroot: install.sub 

Log message:
Create a unique kernel to boot from during install and upgrade.

- update the linkkit directory
- chroot and relink/install new kernel using the linkkit Makefile

Idea from and OK deraadt@
OK tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/06/30 11:06:03

Modified files:
	etc            : rc 

Log message:
Improve reorder_kernel()

- check for and exit if /usr/share is on a nfs mounted filesystem
- add trap handlers that mail the logfile to the admin user
- use $_compile instead of $_compile_dir like in the installer
- use $_compile/$_kernel instead of $_kernel_dir
- remove the now redundant sha256 -h ... after make newinstall
- write stdout/stderr of the background subshell to a logfile

OK tb@ deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/06/30 12:05:57

Modified files:
	lang/vala      : Makefile distinfo 

Log message:
update to vala-0.36.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/06/30 13:19:26

Modified files:
	editors/texworks: Makefile 

Log message:
- add ${LIB_DEPENDS} to LIB_DEPENDS-* so that there's a valid path to
libestdc++, unbreaks packaging

- drop old x11/dbus LIB_DEPENDS which has not had a matching WANTLIB for
a long time

ok kili@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/30 13:32:16

Modified files:
	audio/opus     : Makefile distinfo 

Log message:
Update to 1.2.1.
For a description of the codec improvements in 1.2, see
https://people.xiph.org/~jm/opus/opus-1.2/


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/30 13:45:14

Modified files:
	audio/opus-tools: Makefile 
	audio/opusfile : Makefile 

Log message:
update master site


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/06/30 16:11:09

Modified files:
	archivers/quazip: Makefile distinfo 

Log message:
Bugfix update to quazip, also this release tweaks the license.
Take maintainer.
ok rsadowski@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/06/30 16:22:45

Modified files:
	www/rt         : Makefile 

Log message:
fix dependency


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/30 16:24:08

Modified files:
	usr.bin/tmux   : screen-write.c tmux.h window-client.c 
	                 window-tree.c 

Log message:
Try to show a better preview of sessions and windows in tree mode.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/30 16:36:11

Modified files:
	usr.bin/tmux   : window-tree.c 

Log message:
Fix previous when we end up able to show no panes.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/06/30 16:37:35

Modified files:
	usr.bin/tmux   : window-tree.c 

Log message:
Don't write over right border.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/01 03:47:23

Modified files:
	usr.bin/mandoc : Makefile main.c manconf.h mandoc.1 mandoc.h 
	                 manpath.c mansearch.c mdoc_validate.c read.c 
Added files:
	usr.bin/mandoc : mandoc_xr.c mandoc_xr.h 

Log message:
Basic reporting of .Xrs to manual pages that don't exist
in the base system, inspired by mdoclint(1).

We are able to do this because (1) the -mdoc parser, the -Tlint validator,
and the man(1) manual page lookup code are all in the same program
and (2) the mandoc.db(5) database format allows fast lookup.

Feedback from, previous versions tested by, and OK jmc@.

A few features will be added to this in the tree, step by step.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/01 04:38:39

Modified files:
	x11/xfce4/thunar: Makefile distinfo 

Log message:
Update to thunar 1.6.12.

https://mail.xfce.org/pipermail/xfce-announce/2017-July/000536.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/01 05:05:41

Modified files:
	print/cups     : Makefile distinfo 
	print/cups/patches: patch-Makedefs_in 
	                    patch-config-scripts_cups-sharedlibs_m4 
	                    patch-ppdc_Makefile 
	                    patch-test_run-stp-tests_sh 
	print/cups/pkg : PLIST-main 

Log message:
Update to cups-2.2.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/01 05:14:59

Modified files:
	textproc/elasticsearch: Makefile distinfo 

Log message:
update to elasticsearch-5.4.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/01 05:15:08

Modified files:
	sysutils/beats/filebeat: Makefile distinfo 
	sysutils/beats/heartbeat: Makefile distinfo 
	sysutils/beats/metricbeat: Makefile distinfo 
	sysutils/beats/packetbeat: Makefile distinfo 

Log message:
update to beats-5.4.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/01 05:15:50

Modified files:
	devel/ruby-rspec/specinfra: Makefile distinfo 

Log message:
update to specinfra-2.68.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/01 05:23:44

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.78.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/01 05:23:57

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.115.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/01 05:25:03

Modified files:
	print/cups-filters: Makefile distinfo 

Log message:
Update to cups-filters-1.14.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/01 05:53:11

Modified files:
	graphics/birdfont: Makefile distinfo 

Log message:
update to birdfont-2.19.0


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/01 06:00:12

Modified files:
	usr.bin/mandoc : main.c 

Log message:
When checking the validity of cross references with -Tlint,
fall back from database search to file system search
just like man(1) does when looking up manuals.

This is not too expensive because on a system having up-to-date
mandoc.db(5) files, it only prolongs the time needed to check
*invalid* references - and you are supposed to have many of those,
right?  And on a system with missing or invalid mandoc.db(5) files,
spending a bit of time and warning loudly about the real problem
is also better than quickly issuing bogus warnings about cross
references that are actually valid.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/01 06:23:22

Modified files:
	usr.sbin/pkg_add/OpenBSD: AddDelete.pm 

Log message:
go thru POSIX::Termios to turn off kerninfo.
wasn't even aware that stuff existed, thanks nicm@

NOKERNINFO hardcoded, because it's not in the POSIX module, shouldn't be
a big issue.

okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/01 06:53:56

Modified files:
	usr.bin/mandoc : main.c 

Log message:
When checking cross references with -Tlint, ultimately fall back to
looking in the current working directory.  Not a security issue
because the files are never open(2)ed, only access(2)ed.
Requested by jmc@ and inspired by mdoclint(1).

This cannot be perfect because it only works for files having the
exact filename ./pagename.sec - mandoc has no way to figure out
which files might contain a manual for multiple names, or that files
in autohell might be called ./pagename.man.in instead, or which
subdirectories might contain additional source files.  Also, it may
hide messages if you have bogus stuff lying around in the directory
where you run mandoc -Tlint.  But jmc@ considers it important, and
good enough for everyday use.

Also avoid leaking the memory for the file name while here.


CVSROOT:	/cvs
Module name:	ports
Changes by:	mortimer@cvs.openbsd.org	2017/07/01 06:56:04

Modified files:
	geo/openbsd-developers: Makefile 
	geo/openbsd-developers/files: OpenBSD 

Log message:
Add mortimer@
ok job@ espie@ stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/01 07:17:09

Modified files:
	regress/usr.bin/mdoclint: mdoclint mdoclint.1 

Log message:
delete -p options, the relevant parts are now covered by mandoc;
OK jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/07/01 07:35:30

Modified files:
	sysutils/collectd/patches: patch-src_email_c patch-src_exec_c 
	                           patch-src_unixsock_c 

Log message:
Patches were committed upstream


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/07/01 07:50:45

Modified files:
	usr.bin/ssh    : authfd.c authfile.c rsa.c rsa.h ssh-add.c 
	                 ssh-agent.c ssh-keygen.c ssh-rsa.c sshconnect.c 
	                 sshd.c sshkey.c sshkey.h 
	usr.bin/ssh/lib: Makefile 

Log message:
remove post-SSHv1 removal dead code from rsa.c and merge the
remaining bit that it still used into ssh-rsa.c; ok markus


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/07/01 07:54:39

Modified files:
	misc/memcached : Makefile distinfo 

Log message:
update to 1.4.38


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/07/01 08:14:27

Modified files:
	devel/subversion: Makefile 

Log message:
Tell devel/subversion regress tests to clean up after themselves. Avoids
running out of space in /usr/ports/pobj when running 'make regress' here.


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/07/01 08:34:29

Modified files:
	usr.bin/file   : magic-load.c 

Log message:
magicfp is fclosed where it was opened, remove fclose from magic_load()

ok nicm deraadt


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/01 08:37:25

Modified files:
	games/hack     : Makefile 

Log message:
missed BUILDFIRST. Allow stuff to proceed without depends
as found by krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/01 08:41:54

Modified files:
	share/mk       : bsd.dep.mk bsd.lib.mk bsd.prog.mk bsd.sys.mk 
	                 sys.mk 

Log message:
effectively kill depend as an independant target (there are a few corners
where a separate depend step is still needed, mostly gcc3 and mesa).

Use of BUILDFIRST is mostly enough to make sure important stuff is built
first.

Otherwise, this makes use of -M* compiler options to generate dependencies
on the fly.  There is a bit of behind-the-scene for targets with several
steps (like yacc and/or libraries) and the compiler needs extra hand-holding
with assembler files (don't know why, don't care).

Idea based on guenther@'s initial kernel work, loads of input from
drahn, aoyama, tb, etc.

okay tb@

"why wait" deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/01 09:13:10

Modified files:
	sysutils/xorriso: Makefile 
	sysutils/xorriso/patches: patch-configure 

Log message:
Don't hardcode /usr/local.


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/07/01 09:56:11

Modified files:
	sys/dev/ic     : r92creg.h rtwn.c 

Log message:
- Avoid possible use of uninitialized variable; noticed by jsg@
- Only set value in R92C_FAST_EDCA_CTRL register if the device is
combo WiFi/Bluetooth; confirmed by Yan-Hsuan Chuan from Realtek
- There's no need to set the default value for the R92C_PIFS since
default value is 0x1c; confirmed by Yan-Hsuan Chuan from Realtek
- Disable usb Rx aggregation mode for rtl8188cu/rtl8192cu;
vendor drivers use DMA Rx aggregation mode for rtl8188cu/rtl8192cu/rtl8188eu
and use USB Rx aggregation mode for later chipsets.

Tested by stsp and me.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/01 10:12:03

Added files:
	sys/dev/pci/drm: drm_internal.h 

Log message:
Update inteldrm(4) to code based on Linux 4.4.70.  This brings us support for
Skylake and Cherryview and better support for Broadwell and Valleyview.  Also
adds MST support.  Some tweaks to the TTM code and radeondrm(4) to keep it
working with the updated generic DRM code needed for inteldrm(4).

Tested by many.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/01 10:14:10

Modified files:
	sys/dev/pci/drm: drm_irq.c drm_linux.c drm_linux.h 
	                 drm_linux_list.h drm_mm.c drm_mm.h drm_mode.h 
	                 drm_modes.c drm_rect.c drm_rect.h 
	                 drm_vma_manager.c files.drm i915_drm.h 
	                 i915_pciids.h linux_hdmi.h 
	sys/dev/pci/drm/i915: dvo.h dvo_ch7017.c dvo_ch7xxx.c dvo_ivch.c 
	                      dvo_ns2501.c dvo_sil164.c dvo_tfp410.c 
	                      i915_dma.c i915_drv.c i915_drv.h 
	                      i915_gem.c i915_gem_context.c 
	                      i915_gem_evict.c i915_gem_execbuffer.c 
	                      i915_gem_gtt.c i915_gem_stolen.c 
	                      i915_gem_tiling.c i915_gpu_error.c 
	                      i915_irq.c i915_reg.h i915_suspend.c 
	                      i915_trace.h intel_bios.c intel_bios.h 
	                      intel_crt.c intel_ddi.c intel_display.c 
	                      intel_dp.c intel_drv.h intel_dvo.c 
	                      intel_fbdev.c intel_hdmi.c intel_i2c.c 
	                      intel_lvds.c intel_modes.c 
	                      intel_opregion.c intel_overlay.c 
	                      intel_panel.c intel_pm.c 
	                      intel_ringbuffer.c intel_ringbuffer.h 
	                      intel_sdvo.c intel_sdvo_regs.h 
	                      intel_sideband.c intel_sprite.c intel_tv.c 
	                      intel_uncore.c 
	sys/dev/pci/drm/radeon: atombios_crtc.c atombios_dp.c 
	                        atombios_i2c.c nid.h r100.c radeon.h 
	                        radeon_connectors.c radeon_device.c 
	                        radeon_display.c radeon_fb.c 
	                        radeon_i2c.c radeon_irq_kms.c 
	                        radeon_kms.c radeon_legacy_crtc.c 
	                        radeon_legacy_encoders.c radeon_mode.h 
	                        radeon_pm.c 
	sys/dev/pci/drm/ttm: ttm_bo_manager.c 
Added files:
	sys/dev/pci/drm: drm_linux_atomic.h drm_mipi_dsi.h drm_modes.h 
	                 drm_modeset_lock.c drm_modeset_lock.h 
	                 drm_panel.c drm_panel.h drm_plane_helper.c 
	                 drm_plane_helper.h drm_probe_helper.c 
	                 linux_list_sort.c linux_types.h 
	                 linux_ww_mutex.h 
	sys/dev/pci/drm/i915: i915_cmd_parser.c i915_gem_batch_pool.c 
	                      i915_gem_batch_pool.h i915_gem_fence.c 
	                      i915_gem_gtt.h i915_gem_render_state.c 
	                      i915_gem_render_state.h i915_gem_userptr.c 
	                      i915_guc_reg.h i915_guc_submission.c 
	                      i915_params.c i915_vgpu.c i915_vgpu.h 
	                      intel_atomic.c intel_atomic_plane.c 
	                      intel_audio.c intel_csr.c intel_dp_mst.c 
	                      intel_dsi.c intel_dsi.h 
	                      intel_dsi_panel_vbt.c intel_dsi_pll.c 
	                      intel_fbc.c intel_fifo_underrun.c 
	                      intel_frontbuffer.c intel_gtt.c 
	                      intel_guc.h intel_guc_fwif.h 
	                      intel_guc_loader.c intel_hotplug.c 
	                      intel_lrc.c intel_lrc.h intel_mocs.c 
	                      intel_mocs.h intel_psr.c 
	                      intel_renderstate.h 
	                      intel_renderstate_gen6.c 
	                      intel_renderstate_gen7.c 
	                      intel_renderstate_gen8.c 
	                      intel_renderstate_gen9.c 
	                      intel_runtime_pm.c 
	sys/dev/pci/drm/radeon: radeon_dp_auxch.c 

Log message:
Update inteldrm(4) to code based on Linux 4.4.70.  This brings us support for
Skylake and Cherryview and better support for Broadwell and Valleyview.  Also
adds MST support.  Some tweaks to the TTM code and radeondrm(4) to keep it
working with the updated generic DRM code needed for inteldrm(4).

Tested by many.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/01 10:47:08

ports/security/keepassxc/patches

Update of /cvs/ports/security/keepassxc/patches
In directory cvs.openbsd.org:/tmp/cvs-serv11832/patches

Log Message:
Directory /cvs/ports/security/keepassxc/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/01 10:48:57

Modified files:
	security/keepassxc: Makefile distinfo 
	security/keepassxc/pkg: PLIST 
Added files:
	security/keepassxc/patches: patch-src_CMakeLists_txt 

Log message:
update keepassxc to 2.2.0

sed(1) instead of perl(1) tweak and ok giovanni@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/01 11:25:03

Added files:
	x11/krusader   : Makefile distinfo 
	x11/krusader/pkg: DESCR PLIST 

Log message:
re-add krusader 2.6.0

Krusader is an advanced twin panel (commander style) file manager for KDE and
other desktops in the *nix world, similar to Midnight or Total Commander. It
provides all the file management features you could possibly want. Plus:

- Extensive archive handling
- Mounted filesystem support
- File transfers with (S)FTP
- Advanced search module
- An internal viewer and editor
- Directory synchronisation
- File content comparisons
- Powerful batch renaming
- And much much more ...

It supports a wide variety of archive formats and can handle other KIO slaves
such as smb or fish. It is (almost) completely customizable, very user friendly
and fast.

cvs re-adding help from schwarze@. Thanks!

ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/01 11:26:28

Modified files:
	x11            : Makefile 

Log message:
unhook krusader


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/01 11:32:31

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
remove krusader entry after re-adding a new version.

spotted by landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/07/01 12:00:03

Modified files:
	gnu/usr.bin/binutils-2.17/ld/emulparams: armelf_obsd.sh 
	                                         elf32bmip.sh 
	                                         elf32bmipn32-defs.sh 
	                                         elf32ppc.sh 
	                                         elf32ppc_obsd.sh 
	                                         elf64_sparc_obsd.sh 
	                                         elf64alpha.sh 
	                                         elf64btsmip_obsd.sh 
	                                         elf64ltsmip_obsd.sh 
	                                         elf_i386_obsd.sh 
	                                         elf_x86_64_obsd.sh 
	                                         hppaobsd.sh 
	                                         shelf_obsd.sh 
	gnu/usr.bin/binutils-2.17/ld/scripttempl: elf.sc 

Log message:
provide both TRAP and NOP values for our architectures, then change
elf.sc to FILL .text segment with TRAP.  .init/.fini remain NOP FILL.

It is possible that some of these TRAP values aren't perfect yet, but
they can be changed.  When doing so also change the ld.script and gap.o
TRAP value.

discussions with mortimer, ok kettenis


CVSROOT:	/cvs
Module name:	ports
Changes by:	pascal@cvs.openbsd.org	2017/07/01 13:11:57

Modified files:
	net/tor        : Makefile distinfo 

Log message:
SECURITY update to 0.3.0.9.  Fixes CVE-2017-0377.


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/07/01 13:38:41

Modified files:
	sys/arch/amd64/amd64: codepatch.c 
	sys/arch/amd64/include: codepatch.h 

Log message:
Use absolute pointers in codepatch entries

Instead of offsets to KERNBASE, store absolute pointers in the
codepatch entries. This makes the resulting kernel a few KB larger on
amd64, but KERNBASE will go away when ASLR is introduced.

Requested by deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	sf@cvs.openbsd.org	2017/07/01 13:42:59

Modified files:
	sys/arch/i386/i386: codepatch.c 
	sys/arch/i386/include: codepatch.h 

Log message:
Use absolute pointers in codepatch entries

Instead of offsets to KERNBASE, store absolute pointers in the
codepatch entries. KERNBASE will go away when ASLR is introduced.

Requested by deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/01 14:12:31

Modified files:
	net/gophernicus: Makefile distinfo 

Log message:
Update to 2.5, bugfix update.
Requested by fcambus@
ok jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/07/01 15:07:13

Modified files:
	usr.bin/file   : file.c 

Log message:
close open fd after testing files, ensuring that fd isn't stdin.

ok nicm@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/07/01 16:55:44

Removed files:
	usr.bin/ssh    : rsa.c rsa.h 

Log message:
actually remove these files


CVSROOT:	/cvs
Module name:	ports
Changes by:	uaa@cvs.openbsd.org	2017/07/01 17:10:35

Modified files:
	sysutils/xorriso: Makefile 
	sysutils/xorriso/pkg: DESCR 
Removed files:
	sysutils/xorriso/patches: patch-configure 

Log message:
removed patch-configure, now LDFLAGS and CPPFLAGS are set by CONFIGURE_ENV.
removed REVISION and NO_TEST from Makefile.
DESCR is better described.

ok by jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/01 17:27:56

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c kroute.c 
	                 privsep.c privsep.h 

Log message:
Eliminate multiple socket openings/closings and pass
fd'd from main loops as required. One socket to do
ioctl's per process (called ioctlfd) and one socket to
do route messages per socket (called routefd).

Clean up local variable declaration lists in passing.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/01 18:51:50

Modified files:
	games/chessx   : Makefile distinfo 
	games/chessx/patches: patch-chessx_pro 
	games/chessx/pkg: PLIST 

Log message:
Update to 1.4.6 -- noticed during the quazip update.
ok Roman Yakovlev (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/01 18:54:05

Modified files:
	games/instead  : Makefile distinfo 

Log message:
Bugfix update to 3.0.1
ok Roman Yakovlev (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/01 18:55:18

Modified files:
	games/instead-launcher: Makefile distinfo 
Removed files:
	games/instead-launcher/patches: patch-qunzip_cpp 

Log message:
Trivial update to 0.7.0 -- patch goes away as it was applied upstream
ok Roman Yakovlev (MAINTAINER)


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/01 18:59:11

Modified files:
	x11/worker     : Makefile distinfo 
	x11/worker/pkg : PLIST 

Log message:
Minor update to 3.10.0 -- biggest changes are an improved file viewer and
the file context menu added an option to change filters


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/01 21:04:21

Modified files:
	sysutils/xorriso: Makefile 

Log message:
zap, not needed any more


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/01 21:06:14

Modified files:
	sysutils       : Makefile 

Log message:
+xorriso


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/07/01 23:18:42

Modified files:
	math/R         : Makefile distinfo 
	math/R/pkg     : PLIST 

Log message:
Update to R 3.4.1

OK rsadowski@, pirofti@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/02 01:27:16

Modified files:
	share/man/man4/man4.octeon: Makefile 
Added files:
	share/man/man4/man4.octeon: octciu.4 

Log message:
Add octciu(4) manual page.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/02 01:42:58

Modified files:
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/02 01:46:05

Modified files:
	distrib/sets/lists/comp: mi 
	distrib/sets/lists/man: mi 

Log message:
Fix the set of octmmc.4.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/02 02:23:59

Modified files:
	editors/texworks: Makefile 

Log message:
bump REVISIONs for texworks - it seems that it did package ok in
some cases but not others, reported by naddy@ aja@.

i386 builds were seeing this before the dep changes in my last
commit to this file:

===>  Building package for texworks-0.4.4p0v0
Create /mnt/packages/i386/all/texworks-0.4.4p0v0.tgz
LIB_DEPENDS x11/dbus not needed for editors/texworks,-main ?
Missing library for estdc++>=17.0


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/02 03:11:13

Modified files:
	sbin/dhclient  : dhcpd.h kroute.c privsep.c 

Log message:
Unbreak tree by putting revised resolv_conf_priority() declaration in
correct place and passing the invocation the correct parameters.

Noticed by & initial diff from matthieu@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	espie@cvs.openbsd.org	2017/07/02 03:52:23

Modified files:
	lib/mesa       : Makefile.bsd-wrapper 

Log message:
add a real dependency on the shadow tree, removes the need to run
make depend

okay matthieu@

(I added a comment explaining why this comes after bsd.xorg.mk)


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	espie@cvs.openbsd.org	2017/07/02 03:53:05

Modified files:
	share/mk       : bsd.xorg.mk 

Log message:
xenocara is the first tree to zap 'make depend'!

okay matthieu@


CVSROOT:	/cvs
Module name:	src
Changes by:	brynet@cvs.openbsd.org	2017/07/02 04:58:15

Modified files:
	usr.bin/file   : magic-load.c 

Log message:
Replace fgetln with POSIX getline, even though file was using fgetln in
the idiomatic safe way. Also, check for stream errors with ferror and
err(1, "") in that case.

with feedback from joerg@, schwarze@, nicm@

ok nicm "code is shorter anyway", and joerg@ for an earlier diff


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/02 05:52:44

Modified files:
	distrib/miniroot: install.sub 

Log message:
NIFS is checked inside start_cgiinfo() already.
No need to do this check twice.

from Klemens Nanni


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/02 05:53:35

Modified files:
	distrib/miniroot: install.sub 

Log message:
Tweak comment


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/02 06:45:43

Modified files:
	distrib/miniroot: install.sub 

Log message:
Shorter version of the same.

based on a mail from Klemens Nanni on tech@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/02 07:45:36

Modified files:
	archivers/snappy: Makefile 

Log message:
Drop maintainership, I no longer use snappy.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/02 08:27:30

Modified files:
	usr.sbin/ifstated: ifstated.c ifstated.h parse.y 

Log message:
Rename one of the "always" variables to "body" for improved readability.
No functional change.
from Rob Pierce.

ok stsp@ and me


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/02 08:28:45

Modified files:
	usr.sbin/ifstated: ifstated.c 

Log message:
Remove variable assignment in declaration and add whitespace to improve
readability. No functional change.
from Rob Pierce.

ok stsp@ and me


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/02 08:30:35

Modified files:
	usr.sbin/ifstated: ifstated.h 

Log message:
Remove unused variable from header file.
from Rob Pierce.

ok stsp@ and me


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/07/02 08:48:19

Modified files:
	sys/dev/ic     : rtwn.c 
	sys/net80211   : ieee80211.h 

Log message:
Add the definition of IEEE80211_DUR_DS_SHSLOT.

From IEEE Std. 802.11-2016, Table 18-5 "ERP characteristics", p. 2332:

aSlotTime characteristic:
If dont11OperatingClassesRequired is false:
Long  = 20 us
Short = 9 us

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/02 09:28:26

Modified files:
	usr.sbin/ifstated: ifstated.c ifstated.h parse.y 

Log message:
Second diff to rename additional "always" variable in struct ifsd_config.
from Rob Pierce.
Requested by stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/02 09:31:48

Modified files:
	usr.bin/mandoc : main.c mandoc.1 mandoc.h mandoc_xr.c 
	                 mandoc_xr.h mdoc_validate.c read.c 

Log message:
add warning "cross reference to self"; inspired by mdoclint


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/02 10:18:44

Modified files:
	www/linkchecker: Makefile 
Added files:
	www/linkchecker/patches: patch-linkcheck___init___py 

Log message:
Fix requests version detection

Reported by MrSatterly, fix from upstream.


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/02 10:33:10

Modified files:
	graphics/ansilove: Makefile distinfo 

Log message:
Update ansilove to 3.0.7 and add HOMEPAGE.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/02 10:47:46

Modified files:
	www/nginx      : Makefile distinfo 

Log message:
update to 1.12.0


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/02 11:03:45

Modified files:
	share/mk       : bsd.README 

Log message:
document new depends somewhat.
I asked jmc, told me to go ahead and he'd review it when he can.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/02 11:55:14

Modified files:
	share/mk       : bsd.lib.mk 

Log message:
somehow, I did NOT commit the patch I sent to tb@. Matthieu noticed it.
commit the right DEPS definition.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/02 12:11:28

Modified files:
	lib/libkeynote : Makefile 

Log message:
repair the tree, make sure y.tab.h is there before compiling yacc files.

problem noticed by deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/02 12:26:56

Added files:
	sysutils/pftop/patches: patch-Makefile 

Log message:
Use BUILDFIRST for yacc-produced files


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/02 12:38:24

Modified files:
	archivers/p7zip: Makefile 
	archivers/p7zip/patches: patch-C_CpuArch_h 

Log message:
Detect endianness thru endian.h

Fixes build on at least mips64el, and might fix a problem on powerpc.
From Donovan Watteau, ok Josh Grosse (maintainer) bcallah@


CVSROOT:	/cvs
Module name:	src
Changes by:	tobias@cvs.openbsd.org	2017/07/02 13:06:12

Modified files:
	libexec/ld.so/ldd: ldd.c 

Log message:
Fixed a typo in error message.

ok jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	anton@cvs.openbsd.org	2017/07/02 13:37:22

Modified files:
	sysutils/pick  : Makefile distinfo 

Log message:
Update pick to 1.7.0.

ok jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/07/02 13:49:31

Modified files:
	sys/arch/amd64/amd64: vmm.c 

Log message:
re-enable PAT

discussed with deraadt a month or so ago, this has been sitting in my
tree since then.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/02 14:33:06

Modified files:
	net/dsocks     : Makefile 

Log message:
overriding the flags on the command line means bsd.dep.mk can't do its job.
fix it.

(not an issue with clang)


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/02 14:45:33

Modified files:
	sysutils/ruby-puppet/4: Makefile distinfo 
	sysutils/ruby-puppet/4/patches: patch-lib_puppet_defaults_rb 
	                                patch-lib_puppet_provider_package_openbsd_rb 

Log message:
Update to 4.10.4

with the openbsd package provider, don't look
into pkg.conf anymore to find the installation source, just let
pkg_add do it's magic, or rely on environment variables..


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/02 14:46:12

Modified files:
	sysutils/pftop/patches: patch-Makefile 

Log message:
fix the fix.  yacc rules that generate a .h file that we need to depend on
MUST be explicitly written


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/02 14:58:55

Modified files:
	sys/dev/pci/drm: drm_linux.h drm_mipi_dsi.h drm_panel.c 
	                 drm_panel.h files.drm 
	sys/dev/pci/drm/i915: intel_bios.c intel_display.c intel_dsi.c 
	                      intel_dsi.h intel_dsi_panel_vbt.c 
	                      intel_dsi_pll.c 
Added files:
	sys/dev/pci/drm: drm_mipi_dsi.c 

Log message:
Enable MIPI/DSI support for inteldrm(4).  Makes the display on my ASUS
Transformer Book T100HA work (with some ugly error/warning messages).


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/02 15:04:48

Modified files:
	sysutils/pftop/patches: patch-Makefile 

Log message:
forgot about the multiple targets semantic. Fix it properly for parallel
make


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/02 15:17:12

Modified files:
	usr.bin/mandoc : main.c mandoc_xr.c mandoc_xr.h 

Log message:
If a single page references the same non-existent manual more than
once, print "(N times)" after the message "referenced manual not
found", to lessen the risk that people fix the first instance and
miss the others; jmc@ confirmed that this is useful.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/02 16:20:22

Modified files:
	textproc/the_silver_searcher: Makefile distinfo 
Removed files:
	textproc/the_silver_searcher/patches: patch-src_ignore_c 
	                                      patch-src_options_c 
	                                      patch-src_scandir_h 
	                                      patch-src_search_c 

Log message:
Update to 2.0.0 -- Please note that this breaks backwards compatibility as
.agignore was renamed to .ignore!
ok Florian Stinglmayr (MAINTAINER)


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/07/02 17:19:07

Modified files:
	usr.bin/bc     : bc.y scan.l tty.c 

Log message:
whitespace


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/02 18:17:52

Modified files:
	usr.bin/bc     : Makefile 

Log message:
be explicit in the lex/yacc dependencies
reluctant okay deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/07/02 19:28:53

Modified files:
	security/sqlmap: Makefile distinfo 
	security/sqlmap/pkg: PLIST 

Log message:
Update for SQLmap to 1.1.7:

https://github.com/sqlmapproject/sqlmap

OK rpointel@


CVSROOT:	/cvs
Module name:	ports
Changes by:	pd@cvs.openbsd.org	2017/07/02 21:45:18

Modified files:
	geo/openbsd-developers: Makefile 
	geo/openbsd-developers/files: OpenBSD 

Log message:
add myself

ok mlarkin@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/02 23:43:56

Modified files:
	misc/supercat  : Makefile distinfo 
	misc/supercat/pkg: PLIST 

Log message:
Update to 0.5.6 -- adds case-insensitive REs. Tweak license marker to be
more specific (GPLv3+).
ok Girish Venkatachalam (MAINTAINER)


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/03 00:32:55

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
intel optanes are a thing


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/03 00:33:24

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/07/03 01:01:14

Modified files:
	usr.bin/vi/common: main.c options.c options.h options_f.c 
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 
	usr.bin/vi/include: com_extern.h options_def.h 

Log message:
Remove settings that were unimplemented for 20 years; update STANDARDS.

ok jmc@ natano@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/03 01:54:18

Modified files:
	share/mk       : bsd.dep.mk 

Log message:
explicitly pass -MD -MP in DFLAGS, so that even if CFLAGS are forced
on the command line, things will still work


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/03 01:58:42

Modified files:
	sys/arch/octeon/octeon: cn3xxx.dts cn3xxx_dts.S 

Log message:
Add the first UART into the fdt blob.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/03 02:08:30

Modified files:
	usr.bin/tmux   : tmux.c 

Log message:
Try C.UTF-8 which is also a commonly useful locale on some platforms,
from Romain Francoise.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/03 02:11:21

Modified files:
	sys/net        : pf.c 

Log message:
Drop the KERNEL_LOCK() in pf_purge_thread().

The NET_LOCK() is currently what guarantees that accesses to PF data
structures are serialized.

While here use rwsleep(9) instead of calling NET_LOCK()/NET_UNLOCK()
for every iteration.

Tested by Hrvoje Popovski, ok sashan@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/03 02:16:03

Modified files:
	usr.bin/tmux   : cmd-pipe-pane.c server.c tmux.h window.c 

Log message:
Do not close panes until process has exited and any outstanding data
has been written to the pipe-pane event if there is one. GitHub issue 991.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/03 02:17:20

Modified files:
	sys/arch/octeon/conf: GENERIC RAMDISK files.octeon 
	sys/arch/octeon/dev: cn30xxuart.c mainbus.c 
	sys/arch/octeon/include: autoconf.h 
	sys/arch/octeon/octeon: machdep.c 
Removed files:
	sys/arch/octeon/dev: octeon_uartbus.c uartbusvar.h 

Log message:
Attach com(4) using fdt on octeon.

The relevant part of uartbus(4) is made part of the com(4) glue
to avoid extra maneuvers in the code.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/03 02:23:36

Modified files:
	share/man/man4 : com.4 

Log message:
Update attachment on octeon.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/03 02:27:07

Modified files:
	sys/miscfs/fifofs: fifo_vnops.c 

Log message:
Not all sockets require the NET_LOCK().  So use solock() instead in
fifo_close().

ok millert@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/03 02:27:59

Modified files:
	share/man/man4 : com.4 

Log message:
Note arm64 and armv7.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/03 02:29:24

Modified files:
	sys/kern       : uipc_socket.c 

Log message:
Protect `so_state', `so_error' and `so_qlen' with the socket lock in
kqueue filters.

ok millert@, bluhm@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/03 02:31:39

Modified files:
	sys/miscfs/fifofs: fifo_vnops.c 

Log message:
Protect `so_state', `so_snd' and `so_rcv' with the socket lock in
kqueue filters.

ok millert@, bluhm@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/03 02:32:10

Modified files:
	editors/libreoffice: Makefile distinfo 
	editors/libreoffice/patches: 
	                             patch-sc_qa_unit_subsequent_filters-test_cxx 
	                             patch-vcl_unx_generic_plugadapt_salplug_cxx 
Added files:
	editors/libreoffice/patches: 
	                             patch-solenv_gbuild_platform_unxgcc_mk 

Log message:
update to 5.2.7.2


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/07/03 03:20:27

Modified files:
	faq            : faq5.html 

Log message:
cvs diff, not only diff. noticed by landry


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/07/03 03:21:09

Modified files:
	sys/dev/ic     : athn.c bwi.c rt2560.c rt2661.c rt2860.c 
	sys/dev/usb    : if_otus.c if_ral.c if_rum.c if_run.c if_urtw.c 

Log message:
Replace slot time durations with macros.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/03 03:39:48

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
check that a cachehit hasn't expired before using it.


CVSROOT:	/cvs
Module name:	ports
Changes by:	feinerer@cvs.openbsd.org	2017/07/03 04:24:55

Modified files:
	print/texinfo  : Makefile distinfo 
	print/texinfo/pkg: PLIST 

Log message:
Update to Texinfo 6.4

ok kili@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/03 05:02:02

Modified files:
	editors/libreoffice/patches: patch-configure 

Log message:
unbreak build


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/03 05:21:23

Removed files:
	regress/usr.bin/mdoclint: Makefile mdoclint mdoclint.1 

Log message:
Remove mdoclint(1) from the tree.
All functionality is now covered by mandoc -Tlint.
OK jmc@ wiz@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/03 06:38:50

Modified files:
	usr.bin/tmux   : tmux.h window.c 

Log message:
Change previous to not wait for both process exit and pty close -
instead if there is a pipe-pane active, do not exit until all data is
read (including any libevent hasn't seen yet). Fixes problem reported by
Theo Buehler and still seems to solve the original issue.


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/07/03 07:26:05

Modified files:
	sys/dev/pci/drm/i915: intel_i2c.c 

Log message:
merge error, revealed by clang; ok kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/03 07:40:00

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.c mandoc.h read.c 

Log message:
warn about time machines; suggested by Thomas Klausner <wiz @ NetBSD>


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/07/03 08:30:11

Modified files:
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 

Log message:
markup fixes;


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/03 09:11:02

Modified files:
	share/mk       : bsd.dep.mk 

Log message:
re-add dependencies from SRCS to corresponding OBJS.
the old mkdep run did walk the SRCS list and write those as a side-effect.

Without this, bsd.prog.mk .SUFFIXES order will have OBJS depend on the
wrong src file.

Causes of the alpha/stand/bootxx breakage.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/03 09:17:11

Modified files:
	usr.bin/mklocale: Makefile 

Log message:
allows working without depends, as discovered and discussed with drahn@
okay drahn@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/03 09:26:27

Modified files:
	devel/libmtp   : Makefile 

Log message:
use gcc to unbreak build on mips64el, original version using MODULES from
Donovan Watteau, modified following a suggestion from jca. ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/03 09:42:26

Modified files:
	net/unifi      : Makefile 

Log message:
unifi 5.4.18 moved from stable candidate to stable


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/03 10:24:51

Modified files:
	regress/lib    : Makefile 

Log message:
Link all lib regress tests to the build.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/03 10:36:48

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
don't bother caching invalid or very short lived responses


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/03 10:37:07

Modified files:
	sys/arch/mips64/mips64: trap.c 

Log message:
Use copyin32() instead of copyin() in RDHWR emulation.
This reduces emulation time about 5%.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/03 11:02:15

Modified files:
	geo/postgis    : Makefile distinfo 
	geo/postgis/pkg: PLIST 

Log message:
Update to postgis 2.3.3.

See http://postgis.net/2017/07/01/postgis-2.3.3/


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/03 11:29:06

Modified files:
	graphics/libraw: Makefile distinfo 
	graphics/libraw/pkg: PLIST 

Log message:
update LibRaw to 0.18.2

ok and nits (MASTER_SITES, kill MODGCC4_LANGS) from jca@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/03 11:33:01

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h mdoc_validate.c read.c 

Log message:
report trailing delimiters after macros where they are usually a mistake;
the idea came up in a discussion with Thomas Klausner <wiz at NetBSD>


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/03 12:19:55

Modified files:
	share/man/man5 : bsd.regress.mk.5 
	sbin/isakmpd   : Makefile 
	regress/sbin/isakmpd/crypto: Makefile 
	regress/sbin/isakmpd/dh: Makefile 
	regress/sbin/isakmpd/exchange: Makefile 
	regress/sbin/isakmpd/hmac: Makefile 
	regress/sbin/isakmpd/prf: Makefile 
	regress/sbin/isakmpd/util: Makefile 
	regress/sbin/isakmpd/x509: Makefile 
	lib/libedit    : Makefile 
	regress/lib/libedit/chared: Makefile 
	regress/lib/libedit/keymacro: Makefile 
	regress/lib/libedit/read: Makefile 
Added files:
	regress/sbin/isakmpd: Makefile.inc 
	regress/lib/libedit: Makefile.inc 

Log message:
Generate source and header files for regress on demand.
OK espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/03 12:45:31

Modified files:
	geo/gdal       : Makefile distinfo 
Removed files:
	geo/gdal/patches: patch-port_cpl_port_h 

Log message:
Update to gdal 2.2.1.

See http://trac.osgeo.org/gdal/wiki/Release/2.2.1-News
Remove patch-port_cpl_port_h as std::isnan() is now properly detected
since http://trac.osgeo.org/gdal/changeset/38141/


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/03 12:45:34

Modified files:
	usr.sbin/ifstated: ifstated.c 

Log message:
Remove obvious clear_config() comments and misleading state_change() comments.
Also relocate do_action() calls for the init block from change_state() to
occur with the corresponding do_action() calls for the body block.
From Rob Pierce
ok stsp@ and i


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/03 12:52:55

Modified files:
	net/telepathy/folks: Makefile distinfo 

Log message:
update to folks-0.11.4


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/03 12:57:35

Modified files:
	textproc/pdfpc : Makefile distinfo 
	textproc/pdfpc/pkg: PLIST 
Added files:
	textproc/pdfpc/patches: patch-src_CMakeLists_txt 
Removed files:
	textproc/pdfpc/patches: patch-src_classes_window_overview_vala 

Log message:
update to pdfpc-4.0.7


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/03 13:02:04

Modified files:
	sbin/slaacd    : engine.c frontend.c slaacd.c 

Log message:
s/log_warn/log_warnx/ where errno is not set


CVSROOT:	/cvs
Module name:	src
Changes by:	claudio@cvs.openbsd.org	2017/07/03 13:23:47

Modified files:
	sys/net        : pfkeyv2.c raw_cb.c raw_cb.h raw_usrreq.c 
	                 rtsock.c 

Log message:
Both PF_ROUTE and PF_KEY need to start to take care of their own PCB list
to simplify the locking of those lists. For now move the LIST_ENTRY from
rawcb into routecb and in the pfkey case a new keycb. Do some cleanup and
renaming in the pfkey code but more to come.
OK bluhm@ mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/03 13:35:06

Modified files:
	regress/sys/netinet6/autoport: autoport.pl 

Log message:
Add more checks and debug info to identify the sporadic test failures.


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/07/03 16:01:03

Modified files:
	.              : innovations.html 

Log message:
mention kernel-relinking


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/03 16:01:47

Modified files:
	net/unifi      : Makefile distinfo 
	net/unifi/patches: patch-unifi_sh_api 
	net/unifi/pkg  : PLIST 

Log message:
switch net/unifi to the 5.5.x branch now that unifi-5.5.19 has been
released as stable.

note that the mongodb migration which takes place at startup can be
rather slow - backing up config before upgrading is always recommended
with unifi, but especially so for this type of update.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/03 16:06:11

Modified files:
	sbin/dhclient  : bpf.c 

Log message:
sizeof(struct sockaddr_in) != sizeof(struct in_addr).

Fix construction of the unicast UDP packets being sent
out via sendmsg(). Accidentally broken in r1.32 (5.6)
when types were juggled.

ok bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/03 16:14:20

Modified files:
	telephony/kamailio: Makefile distinfo 
	telephony/kamailio/patches: patch-etc_kamailio_cfg 
	                            patch-utils_kamctl_kamctl 
	                            patch-utils_kamctl_kamctl_base 
	                            patch-utils_kamctl_kamctlrc 
	                            patch-utils_kamctl_kamdbctl_base 
	telephony/kamailio/pkg: PLIST-ldap PLIST-main PLIST-mysql 
	                        PLIST-postgresql kamailio.rc 
Added files:
	telephony/kamailio/patches: patch-src_Makefile_defs 
	                            patch-src_Makefile_libs 
	                            patch-src_core_cfg_y 
	                            patch-src_core_list_h 
	                            patch-src_core_msg_translator_c 
	                            patch-src_core_pt_c 
	                            patch-src_core_rand_fastrand_c 
	                            patch-src_core_rand_fastrand_h 
	                            patch-src_core_select_core_c 
	                            patch-src_core_sip_msg_clone_c 
	                            patch-src_core_tcp_read_c 
	                            patch-src_core_timer_c 
	                            patch-src_lib_srdb1_Makefile 
	                            patch-src_lib_srdb2_Makefile 
	                            patch-src_lib_srutils_Makefile 
	                            patch-src_lib_trie_Makefile 
	                            patch-src_main_c 
	                            patch-src_modules_auth_identity_auth_crypt_c 
	                            patch-src_modules_auth_identity_auth_identity_c 
	                            patch-src_modules_ctl_init_socks_c 
	                            patch-src_modules_db_berkeley_Makefile 
	                            patch-src_modules_db_berkeley_bdb_lib_c 
	                            patch-src_modules_db_berkeley_km_bdb_lib_c 
	                            patch-src_modules_db_mysql_my_cmd_c 
	                            patch-src_modules_ipops_detailed_ip_type_c 
	                            patch-src_modules_lcr_lcr_mod_c 
	                            patch-src_modules_ldap_ld_session_h 
	                            patch-src_modules_nat_traversal_nat_traversal_c 
	                            patch-src_modules_rls_utils_c 
	                            patch-src_modules_rls_utils_h 
	                            patch-src_modules_seas_ha_c 
	                            patch-src_modules_tls_tls_init_c 
	                            patch-src_modules_xhttp_pi_xhttp_pi_fnc_c 
	                            patch-src_modules_xmlrpc_xmlrpc_c 
	                            patch-utils_kamctl_kamdbctl_pgsql 
	telephony/kamailio/pkg: DESCR-berkeley DESCR-presence DESCR-xml 
	                        PLIST-berkeley PLIST-presence PLIST-xml 
Removed files:
	telephony/kamailio/patches: patch-Makefile_defs 
	                            patch-Makefile_libs patch-cfg_y 
	                            patch-lib_binrpc_Makefile 
	                            patch-lib_binrpc_binrpc_api_c 
	                            patch-lib_kcore_Makefile 
	                            patch-lib_kmi_Makefile 
	                            patch-lib_print_Makefile 
	                            patch-lib_srdb1_Makefile 
	                            patch-lib_srdb2_Makefile 
	                            patch-lib_srutils_Makefile 
	                            patch-lib_trie_Makefile patch-list_h 
	                            patch-main_c 
	                            patch-modules_auth_auth_mod_c 
	                            patch-modules_ctl_init_socks_c 
	                            patch-modules_db_berkeley_Makefile 
	                            patch-modules_db_berkeley_bdb_lib_c 
	                            patch-modules_db_berkeley_km_bdb_lib_c 
	                            patch-modules_db_mysql_my_cmd_c 
	                            patch-modules_dmq_usrloc_usrloc_sync_c 
	                            patch-modules_lcr_lcr_mod_c 
	                            patch-modules_ldap_ld_session_h 
	                            patch-modules_mediaproxy_mediaproxy_c 
	                            patch-modules_mi_xmlrpc_abyss_data_h 
	                            patch-modules_mi_xmlrpc_abyss_xmlrpc_int_h 
	                            patch-modules_nat_traversal_nat_traversal_c 
	                            patch-modules_nathelper_nathelper_c 
	                            patch-modules_pv_pv_time_c 
	                            patch-modules_rls_utils_c 
	                            patch-modules_rls_utils_h 
	                            patch-modules_sca_sca_subscribe_c 
	                            patch-modules_sca_sca_subscribe_h 
	                            patch-modules_seas_encode_msg_c 
	                            patch-modules_seas_ha_c 
	                            patch-modules_sipcapture_sipcapture_c 
	                            patch-modules_tls_tls_init_c 
	                            patch-modules_tsilo_ts_hash_h 
	                            patch-modules_xhttp_pi_xhttp_pi_fnc_c 
	                            patch-msg_translator_c patch-pt_c 
	                            patch-rand_fastrand_c 
	                            patch-rand_fastrand_h 
	                            patch-select_core_c 
	                            patch-sip_msg_clone_c patch-timer_c 
	telephony/kamailio/pkg: DESCR-xmlrpc PLIST-xmlrpc 

Log message:
update to Kamailio 5.0.2, from maintainer Roman Kravchuk,
plus minor wantlib cleanup by me


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/03 16:15:47

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
handle kamailio-xmlrpc -> kamailo-xml


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/03 16:21:47

Modified files:
	bin/chio       : Makefile 
	sbin/iked      : Makefile 
	usr.bin/doas   : Makefile 
	usr.sbin/acme-client: Makefile 
	usr.sbin/httpd : Makefile 
	usr.sbin/ldapctl: Makefile 
	usr.sbin/npppd/npppd: Makefile 
	usr.sbin/relayd: Makefile 
	usr.sbin/sasyncd: Makefile 
	usr.sbin/smtpd/smtpctl: Makefile 
	usr.sbin/snmpd : Makefile 
	usr.sbin/switchd: Makefile 
	usr.sbin/vmd   : Makefile 
	usr.sbin/ypldap: Makefile 

Log message:
no need to generate y.tab.h if nothing uses it, set YFLAGS to nothing
instead of CLEANFILES += y.tab.h

okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/03 16:48:02

Modified files:
	usr.bin/tmux   : window-tree.c 

Log message:
Change session and window preview so that the current window or pane is
always shown.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/03 17:05:21

Modified files:
	sys/kern       : uipc_syscalls.c 

Log message:
Do not grab the socket lock in doaccept() twice.  Pass NOTE_SUBMIT
to KNOTE() as we are already holding the lock.  Fixes "panic:
rw_enter: netlock locking against myself" reported by Gregor Best
and reproduced with src/regress/lib/libtls/gotls.
OK millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/03 17:27:53

Modified files:
	sys/dev/pci    : nvme_pci.c 

Log message:
blacklist MSI on intel m.2 optane parts. it just doesnt work there.

discovered by jmatthew@
tweaks and ok jsg@ kettenis@


CVSROOT:	/cvs
Module name:	www
Changes by:	deraadt@cvs.openbsd.org	2017/07/03 17:47:21

Modified files:
	.              : innovations.html 

Log message:
trap sleds


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/03 18:30:45

Modified files:
	usr.sbin/rebound: rebound.c 

Log message:
properly adjust the ttl of replies instead of freezing them in time


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/03 18:59:11

Modified files:
	share/mk       : bsd.dep.mk bsd.lib.mk bsd.prog.mk 

Log message:
let BUILDFIRST just build first, using the same trick guenther@ did in
kernel Makefiles (thank you!), also add lex and yacc generated files to
that list.

Let those lex/yacc variables be defined for bsd.lib.mk as well.

Complete the SRCS -> OBJS hints with the library dependency

This should fix most dependency problems.

Commit now, so that people can check if something else is still amiss.
krw@ agrees


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/03 19:07:32

Modified files:
	usr.sbin/identd: identd.c 

Log message:
include stdarg.h explicitly instead of relying on event.h to bring it in.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/03 19:09:42

Modified files:
	usr.sbin/identd: identd.c 

Log message:
consistently use the evtimer wrappers around the connection timeout.

this is instead of setting the timeout up with event_set and
event_add, but removing it with evtimer_del. this uses evtimer_set
and evtimer_add.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/04 01:12:15

Modified files:
	sysutils/amazon-ssm-agent: Makefile distinfo 

Log message:
Update to amazon-ssm-agent-2.0.847.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/04 01:29:32

Modified files:
	bin/ksh        : eval.c ksh.1 lex.c misc.c sh.h 
Added files:
	regress/bin/ksh: strsub.t 

Log message:
Add support for pattern substitution to variables in ksh using a common syntax
borrowed from ksh93.

Survived a ports build performed by naddy@ and encouraged by many.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/04 01:42:35

Modified files:
	productivity/gnucash: Makefile distinfo 

Log message:
Update to gnucash-2.6.17.


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/07/04 01:56:08

Modified files:
	devel/libspectrum: Makefile distinfo 

Log message:
Update to libspectrum-1.3.5.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/04 02:17:55

Modified files:
	editors/libreoffice: Makefile 
	editors/libreoffice/patches: 
	                             patch-shell_source_unix_exec_shellexec_cxx 
Added files:
	editors/libreoffice/patches: 
	                             patch-shell_source_unix_misc_senddoc_sh 

Log message:
fix path to xdg-open and friends and add run dependency for devel/xdg-utils


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/04 02:29:27

Modified files:
	telephony/kamailio: Makefile 
Added files:
	telephony/kamailio/patches: patch-utils_kamcmd_kamcmd_c 
	telephony/kamailio/pkg: DESCR-radius PLIST-radius 

Log message:
patch Kamailio's kamcmd to use arc4random, from Roman Kravchuk (maintainer)
enable radius support, from me, ok maintainer


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/04 02:39:57

Modified files:
	usr.bin/m4     : Makefile 

Log message:
generate the parser directly instead of fucking around


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/04 03:00:12

Modified files:
	sys/arch/sparc64/include: atomic.h 

Log message:
Export our atomic definitions to userland instead of gcc builtins.

ok kettenis@, dlg@


CVSROOT:	/cvs
Module name:	src
Changes by:	job@cvs.openbsd.org	2017/07/04 03:33:36

Modified files:
	etc/examples   : bgpd.conf 

Log message:
Add GRACEFUL_SHUTDOWN example to bgpd.conf

OK phessler@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/04 05:06:27

Modified files:
	www/c-icap/c-icap: Makefile distinfo 
	www/c-icap/c-icap/patches: patch-c-icap_conf_in 
	                           patch-cfg_param_c 
	                           patch-docs_man_c-icap_8_in 
	                           patch-txt_format_c 
	www/c-icap/c-icap/pkg: PLIST-main 
Added files:
	www/c-icap/c-icap/patches: patch-openssl_net_io_ssl_c 

Log message:
update to c-icap 0.5.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/04 05:06:38

Modified files:
	www/c-icap/modules: Makefile distinfo 
Removed files:
	www/c-icap/modules/patches: 
	                            patch-services_virus_scan_clamav_mod_c 

Log message:
update to c-icap-modules 0.4.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/04 05:08:14

Modified files:
	www/nghttp2    : Makefile distinfo 

Log message:
update to nghttp2-1.24.0


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/04 05:09:44

Modified files:
	security/clamav-unofficial-sigs: Makefile 
	devel/cgdb     : Makefile 
	comms/amtterm  : Makefile 

Log message:
drop maintainer


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/07/04 05:16:38

Modified files:
	net/vsftpd     : Makefile 

Log message:
drop maintainer


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/04 05:46:15

Modified files:
	bin/ksh        : eval.c ksh.1 lex.c misc.c sh.h 
	regress/bin/ksh: strsub.t 

Log message:
Backout previous due to a bug discovered by zhuk@ that requires some tinkering
and is not an easy fix for now.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/04 05:59:46

Modified files:
	net/maradns-deadwood: Makefile distinfo 

Log message:
update to maradns-deadwoord-3.2.10


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/04 06:26:14

Modified files:
	usr.bin/tmux   : mode-tree.c window-tree.c 

Log message:
Handle 0 size of preview box in caller.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/04 06:43:07

Modified files:
	gnu/lib/libobjc: Makefile.bsd-wrapper 
	gnu/usr.bin/gcc: Makefile.bsd-wrapper 

Log message:
complete "nodepend" in source

- mix-up between .ALLSRC and .IMPSRC, compile the right gc.c file
- add explicit targets for pre-generated stuff


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/04 06:47:51

Modified files:
	usr.sbin/tftp-proxy: tftp-proxy.c 

Log message:
Include stdarg.h explicitly instead of relying on event.h to bring it in.
prompted by dlg's commit to identd
OK dlg


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/04 06:48:36

Modified files:
	usr.sbin/slowcgi: slowcgi.c 

Log message:
consistently use the evtimer wrappers around the connection timeout.

this is instead of setting the timeout up with event_set and
event_add, but removing it with evtimer_del. this uses evtimer_set
and evtimer_add.

prompted by dlg's commit to identd
OK dlg


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/04 06:51:18

Modified files:
	sys/kern       : uipc_socket2.c 
	sys/sys        : socketvar.h 

Log message:
Assert that the socket lock is held when `so_qlen' is modified.

ok bluhm@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/07/04 06:51:59

Modified files:
	converters/convmv: Makefile distinfo 

Log message:
Update to convmv-2.03.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/04 06:52:48

Modified files:
	sys/kern       : uipc_socket2.c 

Log message:
Assert that the socket lock is held when `so_state' is modified.

ok bluhm@, visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/04 06:58:32

Modified files:
	x11/gnome/keyring: Makefile distinfo 
	x11/gnome/keyring/pkg: PLIST 

Log message:
Update to gnome-keyring-3.20.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/04 06:58:32

Modified files:
	sys/sys        : socketvar.h 
	sys/kern       : uipc_socket.c uipc_socket2.c 

Log message:
Always hold the socket lock when calling sblock().

Implicitely protects `so_state' with the socket lock in sosend().

ok visa@, bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/04 07:10:13

Modified files:
	gnu/usr.bin/perl: Makefile.bsd-wrapper 

Log message:
Should have committed this two days ago, last part that ran during depend
can run normally


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/04 07:27:12

Modified files:
	devel/git      : Makefile 

Log message:
Drop the gettext module

ok benoit@ (maintainer)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/04 07:59:57

Modified files:
	www/py-jwt     : Makefile distinfo 
Removed files:
	www/py-jwt/patches: patch-setup_py 

Log message:
Update to PyJWT-1.5.2

from maintainer Johan Huldtgren


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/04 08:10:15

Modified files:
	sys/net        : pf.c 

Log message:
Revert previous, it exposed two edge cases still requiring the
KERNEL_LOCK().

- radix_node_head are still allocated with malloc(9) and pf_table can
free(9) some.

- pfsync(4) might send some traffic which can exercise IPsec code

Found by bluhm@ and Hrvoje Popovski


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/04 08:33:43

Modified files:
	lib/librthread : Makefile 

Log message:
Enable the use of futex(2) in librthread on mips64.

OK mpi@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 08:40:30

Modified files:
	usr.bin/mandoc : main.c mandoc.1 read.c 

Log message:
Printing "BASE:" in messages about violations of base system conventions
is confusing, simply print "STYLE:", which is intuitive and does not
sound excessively alarming; suggested by jmc@, OK tedu@ jmc@.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 08:53:27

Modified files:
	regress/usr.bin/mandoc: Makefile.inc 
	regress/usr.bin/mandoc/char/N: basic.in 
	regress/usr.bin/mandoc/char/accent: combine.in nocombine.in 
	                                    utf8only.in 
	regress/usr.bin/mandoc/char/bar: man.in mdoc.in mdoc.out_ascii 
	regress/usr.bin/mandoc/char/hyphen: man.in mdoc.in 
	                                    mdoc.out_ascii 
	regress/usr.bin/mandoc/char/space: break.in break.out_ascii 
	                                   eos-man.in eos.in 
	                                   eos.out_ascii esct-man.in 
	                                   esct-man.out_lint 
	                                   esct-mdoc.in 
	                                   esct-mdoc.out_ascii 
	                                   esct-mdoc.out_lint 
	                                   leading-man.in 
	                                   leading-mdoc.in 
	                                   leading-mdoc.out_ascii 
	                                   multiple.in 
	                                   multiple.out_ascii nobreak.in 
	                                   nobreak.out_ascii tab-man.in 
	                                   tab-man.out_lint tab.in 
	                                   tab.out_ascii tab.out_lint 
	                                   trailing-mdoc.in 
	                                   trailing-mdoc.out_ascii 
	                                   trailing-mdoc.out_lint 
	                                   zerowidth.in 
	regress/usr.bin/mandoc/char/unicode: ascii.in input.in 
	                                     input.out_lint invalid.in 
	                                     invalid.out_ascii 
	                                     invalid.out_lint 
	                                     invalid.out_utf8 latin1.in 
	                                     latin1diff.in man.in 
	                                     mdoc.in mdoc.out_utf8 
	                                     named.in namediff.in 
	                                     nogroff.in 
	regress/usr.bin/mandoc/eqn/define: font.in font.out_ascii 
	                                   infinite.in 
	                                   infinite.out_ascii 
	                                   infinite.out_lint invalid.in 
	                                   invalid.out_ascii 
	                                   invalid.out_lint quoted.in 
	                                   quoted.out_ascii 
	regress/usr.bin/mandoc/eqn/delim: basic.in basic.out_ascii 
	regress/usr.bin/mandoc/eqn/fromto: basic.in basic.out_ascii 
	                                   noarg.in noarg.out_ascii 
	regress/usr.bin/mandoc/eqn/matrix: basic.in basic.out_ascii 
	                                   empty.in empty.out_ascii 
	regress/usr.bin/mandoc/eqn/nullary: roman.in roman.out_ascii 
	                                    symbol.in symbol.out_ascii 
	                                    symbol.out_utf8 
	regress/usr.bin/mandoc/eqn/over: noarg.in noarg.out_ascii 
	                                 noarg.out_lint precedence.in 
	                                 precedence.out_ascii 
	regress/usr.bin/mandoc/eqn/size: basic.in basic.out_ascii 
	regress/usr.bin/mandoc/eqn/subsup: combine.in combine.out_ascii 
	                                   noarg.in noarg.out_ascii 
	                                   sub_group.in 
	                                   sub_group.out_ascii 
	regress/usr.bin/mandoc/eqn/unary: bold.in bold.out_ascii 
	                                  diacrit.in diacrit.out_ascii 
	                                  sqrt.in sqrt.out_ascii 
	regress/usr.bin/mandoc/man/B: args.in args.out_lint blank.in 
	                              blank.out_lint 
	regress/usr.bin/mandoc/man/BI: emptyargs.in literal.in 
	regress/usr.bin/mandoc/man/EX: args.in nested.in spacing.in 
	regress/usr.bin/mandoc/man/HP: break.in literal.in macrotag.in 
	                               manyargs.in spacing.in 
	regress/usr.bin/mandoc/man/IP: empty.in empty.out_lint 
	                               literal.in longhead.in 
	                               manyargs.in spacing.in width.in 
	regress/usr.bin/mandoc/man/MT: args.in args.out_lint noME.in 
	                               noME.out_lint 
	regress/usr.bin/mandoc/man/OP: args.in args.out_lint 
	regress/usr.bin/mandoc/man/PD: args.in args.out_lint nextline.in 
	                               spacing.in 
	regress/usr.bin/mandoc/man/PP: args.in args.out_lint empty.in 
	                               empty.out_lint 
	regress/usr.bin/mandoc/man/RS: REarg.in REarg.out_lint 
	                               an-margin.in breaking.in 
	                               broken.in empty.in empty.out_lint 
	                               literal.in lonelyRE.in 
	                               lonelyRE.out_lint nested.in 
	                               noRE.in noRE.out_lint nowidth.in 
	                               width.in 
	regress/usr.bin/mandoc/man/SH: broken.in broken.out_lint 
	                               broken_eline.in 
	                               broken_eline.out_lint 
	                               empty_before.in 
	                               empty_before.out_lint longarg.in 
	                               noarg.in noarg.out_lint 
	regress/usr.bin/mandoc/man/SS: broken.in broken.out_lint 
	                               broken_eline.in 
	                               broken_eline.out_lint longarg.in 
	                               noarg.in noarg.out_lint 
	regress/usr.bin/mandoc/man/TH: baddate.in baddate.out_lint 
	                               case.in case.out_lint 
	                               emptydate.in emptydate.out_lint 
	                               isodate.in longdate.in 
	                               longdate.out_lint longtit.in 
	                               longvol.in mdocdate.in noTH.in 
	                               noarg.in noarg.out_ascii 
	                               noarg.out_lint nobody.in 
	                               nobody.out_lint onearg.in 
	                               onearg.out_ascii onearg.out_lint 
	                               onlyyear.in sixargs.in 
	                               sixargs.out_lint twoargs.in 
	                               twoargs.out_ascii 
	                               twoargs.out_lint 
	regress/usr.bin/mandoc/man/TP: badarg.in broken.in 
	                               broken.out_lint double.in 
	                               double.out_lint eof.in 
	                               eof.out_lint fill.in indent.in 
	                               literal.in longhead.in 
	                               macrotag.in manyargs.in 
	                               sameline.in spacing.in width.in 
	regress/usr.bin/mandoc/man/TS: break.in break.out_lint vspace.in 
	regress/usr.bin/mandoc/man/UR: args.in args.out_lint noUE.in 
	                               noUE.out_lint 
	regress/usr.bin/mandoc/man/blank: afterSH.in afterSH.out_lint 
	                                  afterSS.in afterSS.out_lint 
	                                  line.in line.out_lint 
	regress/usr.bin/mandoc/man/nf: args.in args.out_lint dupe.in 
	                               dupe.out_lint indent.in 
	                               userdef.in vert.in 
	regress/usr.bin/mandoc/mdoc/Ad: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/An: break.in break.out_ascii 
	                                break.out_lint 
	                                break.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ap: eos.in eos.out_ascii 
	                                eos.out_markdown middle.in 
	                                middle.out_ascii 
	                                middle.out_markdown 
	regress/usr.bin/mandoc/mdoc/Aq: author.in author.out_ascii 
	                                author.out_markdown 
	                                author.out_utf8 empty.in 
	                                empty.out_ascii empty.out_lint 
	                                empty.out_markdown 
	                                empty.out_utf8 
	regress/usr.bin/mandoc/mdoc/Ar: font.in font.out_ascii 
	                                font.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/At: invalid.in invalid.out_ascii 
	                                invalid.out_lint 
	                                invalid.out_markdown 
	regress/usr.bin/mandoc/mdoc/Bd: badargs.in badargs.out_ascii 
	                                badargs.out_lint 
	                                badargs.out_markdown 
	                                beforeNAME.in 
	                                beforeNAME.out_ascii 
	                                beforeNAME.out_lint 
	                                beforeNAME.out_markdown blank.in 
	                                blank.out_ascii blank.out_lint 
	                                blank.out_markdown break.in 
	                                break.out_ascii break.out_lint 
	                                break.out_markdown broken.in 
	                                broken.out_ascii broken.out_lint 
	                                broken.out_markdown centered.in 
	                                centered.out_ascii 
	                                centered.out_markdown empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown nested.in 
	                                nested.out_ascii nested.out_lint 
	                                nested.out_markdown 
	                                offset-empty.in 
	                                offset-empty.out_ascii 
	                                offset-empty.out_markdown 
	                                offset-neg.in 
	                                offset-neg.out_ascii 
	                                offset-neg.out_markdown 
	                                spacing.in spacing.out_ascii 
	                                spacing.out_markdown unclosed.in 
	                                unclosed.out_ascii 
	                                unclosed.out_lint 
	                                unclosed.out_markdown 
	regress/usr.bin/mandoc/mdoc/Bf: badargs.in badargs.out_ascii 
	                                badargs.out_lint break.in 
	                                break.out_ascii break.out_lint 
	                                broken.in broken.out_ascii 
	                                broken.out_lint multiargs.in 
	                                multiargs.out_ascii 
	                                multiargs.out_lint nest.in 
	                                nest.out_ascii 
	regress/usr.bin/mandoc/mdoc/Bk: badarg.in badarg.out_ascii 
	                                badarg.out_lint break.in 
	                                break.out_ascii broken.in 
	                                broken.out_ascii broken.out_lint 
	                                inputlines.in 
	                                inputlines.out_ascii lines.in 
	                                lines.out_ascii synopsis.in 
	                                synopsis.out_ascii 
	regress/usr.bin/mandoc/mdoc/Bl: badargs.in badargs.out_ascii 
	                                badargs.out_lint 
	                                badargs.out_markdown bareIt.in 
	                                bareIt.out_ascii bareIt.out_lint 
	                                bareIt.out_markdown bareTa.in 
	                                bareTa.out_ascii bareTa.out_lint 
	                                bareTa.out_markdown break.in 
	                                break.out_ascii break.out_lint 
	                                breakingIt.in 
	                                breakingIt.out_ascii 
	                                breakingIt.out_lint 
	                                breakingIt.out_markdown 
	                                breakingTa.in 
	                                breakingTa.out_ascii 
	                                breakingTa.out_markdown 
	                                broken.in broken.out_ascii 
	                                broken.out_lint 
	                                broken.out_markdown bullet.in 
	                                bullet.out_ascii 
	                                bullet.out_markdown colNoIt.in 
	                                colNoIt.out_ascii 
	                                colNoIt.out_markdown column.in 
	                                column.out_ascii column.out_lint 
	                                column.out_markdown 
	                                column_nogroff.in 
	                                column_nogroff.out_ascii 
	                                column_nogroff.out_lint 
	                                column_nogroff.out_markdown 
	                                dash.in dash.out_ascii 
	                                dash.out_markdown dash.out_utf8 
	                                diag.in diag.out_ascii 
	                                diag.out_markdown empty.in 
	                                empty.out_ascii empty.out_lint 
	                                empty.out_markdown emptyhead.in 
	                                emptyhead.out_ascii 
	                                emptyhead.out_lint 
	                                emptyhead.out_markdown 
	                                emptyitem.in emptyitem.out_ascii 
	                                emptyitem.out_lint 
	                                emptyitem.out_markdown 
	                                emptytag.in emptytag.out_ascii 
	                                emptytag.out_lint 
	                                emptytag.out_markdown enum.in 
	                                enum.out_ascii enum.out_markdown 
	                                extend.in extend.out_ascii 
	                                extend.out_markdown hang.in 
	                                hang.out_ascii hang.out_markdown 
	                                inset.in inset.out_ascii 
	                                inset.out_markdown item.in 
	                                item.out_ascii item.out_markdown 
	                                multitag.in multitag.out_ascii 
	                                multitag.out_markdown 
	                                multitype.in multitype.out_ascii 
	                                multitype.out_markdown nested.in 
	                                nested.out_ascii 
	                                nested.out_markdown noIt.in 
	                                noIt.out_ascii noIt.out_lint 
	                                noIt.out_markdown notype.in 
	                                notype.out_ascii notype.out_lint 
	                                notype.out_markdown offset.in 
	                                offset.out_ascii 
	                                offset.out_markdown ohang.in 
	                                ohang.out_ascii 
	                                ohang.out_markdown secstart.in 
	                                secstart.out_ascii 
	                                secstart.out_markdown tag.in 
	                                tag.out_ascii tag.out_lint 
	                                tag.out_markdown unclosed.in 
	                                unclosed.out_ascii 
	                                unclosed.out_markdown 
	regress/usr.bin/mandoc/mdoc/Brq: empty.in empty.out_ascii 
	                                 empty.out_lint 
	                                 empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Bx: args.in args.out_ascii 
	                                args.out_lint args.out_markdown 
	regress/usr.bin/mandoc/mdoc/Cd: eos.in eos.out_ascii 
	                                eos.out_markdown font.in 
	                                font.out_ascii font.out_markdown 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Cm: basic.in basic.out_ascii 
	                                basic.out_markdown font.in 
	                                font.out_ascii font.out_markdown 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/D1: spacing.in spacing.out_ascii 
	                                spacing.out_lint 
	                                spacing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Db: args.in args.out_ascii 
	                                args.out_lint 
	regress/usr.bin/mandoc/mdoc/Dd: badarg.in badarg.out_lint 
	                                dupe.in dupe.out_lint late.in 
	                                late.out_lint long.in 
	                                long.out_lint manarg.in 
	                                manarg.out_lint noarg.in 
	                                noarg.out_lint order.in 
	                                order.out_lint 
	regress/usr.bin/mandoc/mdoc/Dl: spacing.in spacing.out_ascii 
	                                spacing.out_lint 
	                                spacing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Dq: empty.in empty.out_ascii 
	                                empty.out_lint 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Dt: badsec.in badsec.out_lint 
	                                case.in case.out_ascii 
	                                case.out_lint case.out_markdown 
	                                dupe.in dupe.out_ascii 
	                                dupe.out_lint dupe.out_markdown 
	                                fourargs.in fourargs.out_ascii 
	                                fourargs.out_lint 
	                                fourargs.out_markdown late.in 
	                                late.out_ascii late.out_lint 
	                                late.out_markdown missing.in 
	                                missing.out_ascii 
	                                missing.out_lint 
	                                missing.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown nobody.in 
	                                nobody.out_ascii nobody.out_lint 
	                                nobody.out_markdown nosec.in 
	                                nosec.out_ascii nosec.out_lint 
	                                nosec.out_markdown order.in 
	                                order.out_ascii order.out_lint 
	                                order.out_markdown 
	regress/usr.bin/mandoc/mdoc/Dv: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Em: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Eo: break.in break.out_ascii 
	                                break.out_lint 
	                                break.out_markdown empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown obsolete.in 
	                                obsolete.out_ascii 
	                                obsolete.out_lint 
	                                obsolete.out_markdown 
	                                unclosed.in unclosed.out_ascii 
	                                unclosed.out_lint 
	                                unclosed.out_markdown 
	regress/usr.bin/mandoc/mdoc/Er: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ev: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ex: args.in args.out_ascii 
	                                args.out_markdown noname.in 
	                                noname.out_ascii noname.out_lint 
	                                noname.out_markdown nostd.in 
	                                nostd.out_ascii nostd.out_lint 
	                                nostd.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fd: break.in break.out_ascii 
	                                break.out_markdown empty.in 
	                                empty.out_ascii empty.out_lint 
	                                empty.out_markdown eos.in 
	                                eos.out_ascii eos.out_markdown 
	                                font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fl: font.in font.out_ascii 
	                                font.out_markdown multiarg.in 
	                                multiarg.out_ascii 
	                                multiarg.out_markdown noarg.in 
	                                noarg.out_ascii 
	                                noarg.out_markdown parsed.in 
	                                parsed.out_ascii 
	                                parsed.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Fo: basic.in basic.out_ascii 
	                                basic.out_markdown break.in 
	                                break.out_ascii 
	                                break.out_markdown eos.in 
	                                eos.out_ascii eos.out_markdown 
	                                font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown nohead.in 
	                                nohead.out_ascii nohead.out_lint 
	                                nohead.out_markdown obsolete.in 
	                                obsolete.out_ascii 
	                                obsolete.out_lint 
	                                obsolete.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown section.in 
	                                section.out_ascii 
	                                section.out_markdown warn.in 
	                                warn.out_ascii warn.out_lint 
	                                warn.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ft: font.in font.out_ascii 
	                                font.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ic: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/In: break.in break.out_ascii 
	                                break.out_markdown eos.in 
	                                eos.out_ascii eos.out_markdown 
	                                font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Lb: badargs.in badargs.out_ascii 
	                                badargs.out_lint 
	                                badargs.out_markdown break.in 
	                                break.out_ascii 
	                                break.out_markdown eos.in 
	                                eos.out_ascii eos.out_markdown 
	regress/usr.bin/mandoc/mdoc/Li: font.in font.out_ascii 
	                                font.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Lk: font.in font.out_ascii link.in 
	                                link.out_ascii link.out_markdown 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ms: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Mt: font.in font.out_ascii simple.in 
	                                simple.out_ascii simple.out_lint 
	                                simple.out_markdown 
	regress/usr.bin/mandoc/mdoc/Nd: broken.in broken.out_ascii 
	                                broken.out_lint hyph.in 
	                                hyph.out_ascii hyph.out_markdown 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown par.in 
	                                par.out_ascii par.out_markdown 
	regress/usr.bin/mandoc/mdoc/Nm: badNAME.in badNAME.out_ascii 
	                                badNAME.out_lint badNAMEuse.in 
	                                badNAMEuse.out_ascii 
	                                badNAMEuse.out_lint break.in 
	                                break.out_ascii break.out_lint 
	                                break.out_markdown broken.in 
	                                broken.out_ascii broken.out_lint 
	                                broken.out_markdown empty.in 
	                                empty.out_ascii 
	                                empty.out_markdown emptyNAME.in 
	                                emptyNAME.out_ascii 
	                                emptyNAMEuse.in 
	                                emptyNAMEuse.out_ascii font.in 
	                                font.out_ascii font.out_markdown 
	                                long.in long.out_ascii 
	                                long.out_markdown par.in 
	                                par.out_ascii par.out_markdown 
	                                parns.in parns.out_ascii 
	                                parns.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/No: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown spacing.in 
	                                spacing.out_ascii 
	                                spacing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ns: position.in position.out_ascii 
	                                position.out_lint 
	                                position.out_markdown punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Oo: punct.in punct.out_ascii 
	                                punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Op: break.in break.out_lint 
	                                break.out_markdown broken.in 
	                                broken.out_ascii broken.out_lint 
	                                broken.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Os: dupe.in dupe.out_ascii 
	                                dupe.out_lint dupe.out_markdown 
	                                late.in late.out_ascii 
	                                late.out_lint late.out_markdown 
	                                long.in long.out_ascii 
	                                long.out_markdown missing.in 
	                                missing.out_ascii 
	                                missing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ox: keep.in keep.out_ascii 
	                                keep.out_markdown 
	regress/usr.bin/mandoc/mdoc/Pa: font.in font.out_ascii 
	                                font.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Pf: spacing.in spacing.out_ascii 
	                                spacing.out_lint 
	                                spacing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Pp: arg.in arg.out_ascii 
	                                arg.out_lint arg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Qq: empty.in empty.out_ascii 
	                                empty.out_lint 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/Rs: allch.in allch.out_ascii 
	                                allch.out_lint 
	                                allch.out_markdown 
	                                allch.out_utf8 args.in 
	                                args.out_ascii args.out_lint 
	                                args.out_markdown break.in 
	                                break.out_ascii 
	                                break.out_markdown 
	                                break.out_utf8 empty.in 
	                                empty.out_ascii empty.out_lint 
	                                empty.out_markdown 
	                                empty.out_utf8 three_authors.in 
	                                three_authors.out_ascii 
	                                three_authors.out_markdown 
	                                three_authors.out_utf8 
	regress/usr.bin/mandoc/mdoc/Rv: args.in args.out_ascii 
	                                args.out_markdown noname.in 
	                                noname.out_ascii noname.out_lint 
	                                nostd.in nostd.out_ascii 
	                                nostd.out_lint 
	                                nostd.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sh: badNAME.in badNAME.out_ascii 
	                                badNAME.out_lint 
	                                badNAME.out_markdown before.in 
	                                before.out_ascii before.out_lint 
	                                before.out_markdown empty.in 
	                                empty.out_ascii empty.out_lint 
	                                empty.out_markdown emptyNAME.in 
	                                emptyNAME.out_ascii 
	                                emptyNAME.out_lint 
	                                emptyNAME.out_markdown first.in 
	                                first.out_ascii first.out_lint 
	                                first.out_markdown nohead.in 
	                                nohead.out_ascii nohead.out_lint 
	                                nohead.out_markdown order.in 
	                                order.out_ascii order.out_lint 
	                                order.out_markdown orderNAME.in 
	                                orderNAME.out_ascii 
	                                orderNAME.out_lint 
	                                orderNAME.out_markdown 
	                                parbefore.in parbefore.out_ascii 
	                                parbefore.out_lint 
	                                parbefore.out_markdown 
	                                parborder.in parborder.out_ascii 
	                                parborder.out_lint 
	                                parborder.out_markdown 
	                                punctNAME.in punctNAME.out_ascii 
	                                punctNAME.out_lint 
	                                punctNAME.out_markdown 
	                                subbefore.in subbefore.out_ascii 
	                                subbefore.out_lint 
	                                subbefore.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sm: badarg.in badarg.out_ascii 
	                                badarg.out_lint 
	                                badarg.out_markdown noarg.in 
	                                noarg.out_ascii 
	                                noarg.out_markdown scope.in 
	                                scope.out_ascii 
	                                scope.out_markdown spacing-No.in 
	                                spacing-No.out_ascii 
	                                spacing-No.out_markdown 
	                                spacing-Op.in 
	                                spacing-Op.out_ascii 
	                                spacing-Op.out_markdown 
	                                twoarg.in twoarg.out_ascii 
	                                twoarg.out_lint 
	                                twoarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sq: empty.in empty.out_ascii 
	                                empty.out_lint 
	                                empty.out_markdown 
	regress/usr.bin/mandoc/mdoc/St: badargs.in badargs.out_ascii 
	                                badargs.out_lint 
	                                badargs.out_markdown call.in 
	                                call.out_ascii call.out_lint 
	                                call.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sx: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Sy: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Tn: font.in font.out_ascii 
	                                font.out_markdown noarg.in 
	                                noarg.out_ascii noarg.out_lint 
	                                noarg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ud: arg.in arg.out_ascii 
	                                arg.out_lint arg.out_markdown 
	regress/usr.bin/mandoc/mdoc/Ux: eos.in eos.out_ascii 
	                                eos.out_markdown punct.in 
	                                punct.out_ascii punct.out_lint 
	                                punct.out_markdown spacing.in 
	                                spacing.out_ascii 
	                                spacing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Va: basic.in basic.out_ascii 
	                                basic.out_markdown font.in 
	                                font.out_ascii font.out_markdown 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown punct.in 
	                                punct.out_ascii 
	                                punct.out_markdown 
	regress/usr.bin/mandoc/mdoc/Vt: child.in child.out_ascii 
	                                child.out_markdown font.in 
	                                font.out_ascii font.out_markdown 
	                                noarg.in noarg.out_ascii 
	                                noarg.out_lint 
	                                noarg.out_markdown spacing.in 
	                                spacing.out_ascii 
	                                spacing.out_markdown 
	regress/usr.bin/mandoc/mdoc/Xr: args.in args.out_ascii 
	                                args.out_lint args.out_markdown 
	regress/usr.bin/mandoc/mdoc/blank: comment.in comment.out_ascii 
	                                   comment.out_lint 
	                                   comment.out_markdown line.in 
	                                   line.out_ascii line.out_lint 
	                                   list.in list.out_ascii 
	                                   list.out_lint 
	                                   list.out_markdown 
	regress/usr.bin/mandoc/mdoc/break: brokenbreaker.in 
	                                   brokenbreaker.out_ascii 
	                                   brokenbreaker.out_lint 
	                                   brokenbreaker.out_markdown 
	                                   notopen.in notopen.out_ascii 
	                                   notopen.out_lint 
	                                   notopen.out_markdown tail.in 
	                                   tail.out_ascii tail.out_lint 
	                                   tail.out_markdown twice.in 
	                                   twice.out_ascii 
	                                   twice.out_lint 
	                                   twice.out_markdown two.in 
	                                   two.out_ascii two.out_lint 
	                                   two.out_markdown 
	regress/usr.bin/mandoc/roff/args: man.in man.out_lint mdoc.in 
	                                  mdoc.out_ascii mdoc.out_lint 
	                                  roff.in roff.out_lint 
	regress/usr.bin/mandoc/roff/br: args.in args.out_lint 
	regress/usr.bin/mandoc/roff/cc: basic.in basic.out_lint 
	regress/usr.bin/mandoc/roff/cond: before-Dd.in 
	                                  before-Dd.out_ascii close.in 
	                                  close.out_lint ie.in if.in 
	                                  if.out_lint numeric.in 
	                                  register.in strcmp.in 
	                                  string.in 
	regress/usr.bin/mandoc/roff/de: Dd.in Dd.out_ascii 
	                                Dd.out_ascii_opt Makefile TH.in 
	                                append.in append.out_ascii 
	                                cond.in cond.out_ascii 
	                                escname.in escname.out_ascii 
	                                escname.out_lint factorial.in 
	                                factorial.out_ascii indir.in 
	                                indir.out_ascii indir.out_lint 
	                                infinite.in infinite.out_ascii 
	                                infinite.out_lint startde.in 
	                                startde.out_ascii 
	regress/usr.bin/mandoc/roff/ds: append.in append.out_ascii 
	                                escname.in escname.out_ascii 
	                                nested.in nested.out_ascii 
	                                quoting.in quoting.out_ascii 
	regress/usr.bin/mandoc/roff/esc: B.in B.out_ascii B.out_lint 
	                                 c.in c.out_ascii c_man.in e.in 
	                                 e.out_ascii f.in f.out_ascii 
	                                 h.in h.out_ascii h.out_lint 
	                                 ignore.in ignore.out_ascii 
	                                 ignore.out_lint l.in 
	                                 l.out_ascii l.out_lint multi.in 
	                                 multi.out_ascii o.in 
	                                 o.out_ascii one.in 
	                                 one.out_ascii p.in p.out_ascii 
	                                 two.in two.out_ascii w.in 
	                                 w.out_ascii w.out_lint z.in 
	                                 z.out_ascii 
	regress/usr.bin/mandoc/roff/ft: badargs-mdoc.in 
	                                badargs-mdoc.out_ascii 
	                                badargs-mdoc.out_lint badargs.in 
	                                badargs.out_lint 
	regress/usr.bin/mandoc/roff/ig: basic.in basic.out_ascii 
	                                basic.out_lint 
	regress/usr.bin/mandoc/roff/it: badarg.in badarg.out_ascii 
	                                badarg.out_lint double.in 
	                                text.in text.out_ascii 
	regress/usr.bin/mandoc/roff/ll: basic.in basic.out_ascii 
	regress/usr.bin/mandoc/roff/na: args.in 
	regress/usr.bin/mandoc/roff/nr: argc.in argc.out_ascii 
	                                divzero.in divzero.out_lint 
	                                escname.in escname.out_lint 
	                                eval.in int.in predef.in rr.in 
	                                scale.in 
	regress/usr.bin/mandoc/roff/po: basic-mdoc.in 
	                                basic-mdoc.out_ascii 
	regress/usr.bin/mandoc/roff/ps: ignore.in 
	regress/usr.bin/mandoc/roff/rm: basic.in basic.out_ascii 
	regress/usr.bin/mandoc/roff/rn: append.in append.out_ascii 
	regress/usr.bin/mandoc/roff/scale: horiz.in 
	regress/usr.bin/mandoc/roff/sp: badargs-man.in 
	                                badargs-man.out_lint 
	                                badargs-mdoc.in 
	                                badargs-mdoc.out_ascii 
	                                negative.in scaling-man.in 
	                                scaling-mdoc.in 
	                                scaling-mdoc.out_ascii 
	regress/usr.bin/mandoc/roff/string: escape.in infinite.in 
	                                    name.in name.out_ascii 
	                                    name.out_lint std.in 
	                                    std.out_lint zerolength.in 
	regress/usr.bin/mandoc/roff/ta: basic-man.in basic-mdoc.in 
	                                basic-mdoc.out_ascii 
	regress/usr.bin/mandoc/roff/ti: basic-man.in basic-mdoc.in 
	                                basic-mdoc.out_ascii 
	regress/usr.bin/mandoc/roff/tr: args.in args.out_lint 
	regress/usr.bin/mandoc/tbl/data: blankline.in block_unclosed.in 
	                                 block_unclosed.out_lint 
	                                 block_width.in 
	                                 block_width.out_ascii 
	                                 block_wrap.in 
	                                 block_wrap.out_ascii empty.in 
	                                 empty.out_lint 
	regress/usr.bin/mandoc/tbl/layout: center.in complex.in 
	                                   complex.out_lint empty.in 
	                                   empty.out_lint emptyline.in 
	                                   lines-nogroff.in 
	                                   lines-nogroff.out_ascii 
	                                   lines.in lines.out_ascii 
	                                   numbers.in span.in 
	regress/usr.bin/mandoc/tbl/macro: column.in column.out_ascii 
	                                  man.in man.out_lint nested.in 
	                                  nested.out_lint 
	regress/usr.bin/mandoc/tbl/mod: badfont.in badfont.out_lint 
	                                expand-toowide.in expand.in 
	                                font.in font.out_lint 
	                                misalign.in spacing.in width.in 
	regress/usr.bin/mandoc/tbl/opt: box.in center.in invalid.in 
	                                invalid.out_lint 

Log message:
Messages of the -Wbase level now print STYLE:.  Since this
causes horrible churn anyway, profit of the opportunity to stop
excessive testing, such that this is hopefully the last instance
of such churn.  Consistently use OpenBSD RCS tags, blank .Os,
blank fourth .TH argument, and Mdocdate like everywhere else.
Use -Ios=OpenBSD for platform-independent predictable output.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/04 08:54:15

Modified files:
	sys/arch/armv7/stand/efiboot: Makefile 

Log message:
zap .o, put both .c at deraadt@'s request


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/07/04 09:04:49

Modified files:
	security/hydra : Makefile distinfo 
	security/hydra/patches: patch-configure 

Log message:
Little update for Hydra to 8.5:

https://github.com/vanhauser-thc/thc-hydra

OK benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 09:33:03

Modified files:
	lib/libc/stdio : fgetln.3 

Log message:
1. mild deprecation notice
2. point to getline (suggested by nicm@)
3. cross reference fgetc(3) rather than putc(3)
4. add missing error handling to the example code

OK nicm@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/04 09:43:38

Modified files:
	sbin/ping      : ping.c 

Log message:
replace perror(3) with err(3); from Klemens Nanni


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/04 09:52:26

Modified files:
	usr.sbin/ldapd : evbuffer_tls.c 
	usr.sbin/syslogd: evbuffer_tls.c 

Log message:
It does not make sense to use ioctl(FIONREAD) with TLS as libtls
has already read the buffer from kernel to user land.  I have blindly
copied this code from libevent for syslogd(8) TLS, remove it together
with the bug.  It caused hangs in ldapd(8).
report, analysis, testing, OK Seiya Kawashima, Robert Klein, gsoares@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/04 09:55:22

Modified files:
	sbin/ping      : ping.c 

Log message:
calculate multiples of 4 smarter; from Klemens Nanni


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/07/04 10:38:53

Modified files:
	devel/cmake    : Makefile 
Added files:
	devel/cmake/patches: patch-Modules_FindLibXml2_cmake 

Log message:
include/libxml2/libxml/encoding.h wants iconv.h, so teach
FindLibXml2.cmake how to find the libiconv include directory.

Problem spotted by landry@ while porting geo/pgpointcloud


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/04 11:29:51

Modified files:
	sys/kern       : tty_pty.c 

Log message:
some of this code was written in an era when spaces cost extra.
add a little breathing room.


CVSROOT:	/cvs
Module name:	ports
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 11:44:13

Modified files:
	textproc/groff : Makefile 
	textproc/groff/patches: patch-tmac_an-old_tmac 
	                        patch-tmac_doc-common 

Log message:
Set the default operating system name for manual pages
to just "OpenBSD": that's the obvious thing to do, no idea why i
didn't do it long ago.  So far, man(7) had no default at all, and
the "OpenBSD ports" used by mdoc(7) no longer makes sense because
only about 25 ports use groff nowadays, and none of those use mdoc(7).
This change is also simplifies groff-mandoc comparisons.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/04 12:02:21

Modified files:
	regress/sbin/isakmpd: Makefile.inc 

Log message:
Do not add isakmpd obj directory to .PATH.  We must compile some
fake objects from regress ourselves.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/04 13:02:11

Modified files:
	etc            : rc 

Log message:
Switch reorder_kernel() from sending emails to logging via syslog
and to write the logfile inside the kernel compile dir.

- turn the whole reorder_kernel function into a subshell {} -> ()
- create kernel compile dir early on
- redirect all stdout/stderr to a logfile inside this dir
- setup ERR trap handler that
- disables the EXIT trap handler
- syslogs the error and hints to the logfile
- additionally sends this message to the console
- setup EXIT trap handler that syslogs success
- wipe only the content instead of the whole kernel compile dir
- reestablish stdout redirection to the log after the wipe
- remove -q option of sha256 to log check result
- run reorder_kernel() in the background

OK deraadt@ tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/04 13:09:16

Modified files:
	x11/gnome/characters: Makefile distinfo 
	x11/gnome/characters/pkg: PLIST 

Log message:
update to gnome-characters-3.24.0


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/04 13:59:51

Modified files:
	usr.sbin/relayd: relay.c relay_udp.c relayd.h 

Log message:
make relayd not crash in relay_udp_server() when using a dns relay.
needs revisiting. From Rivo Nurges, thanks.
ok florian@


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/07/04 14:07:51

Modified files:
	devel/cmake    : Makefile 
Removed files:
	devel/cmake/patches: patch-Modules_FindLibXml2_cmake 

Log message:
Revert previous


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/04 14:25:53

Modified files:
	usr.sbin/syspatch: syspatch.sh 

Log message:
Detect upfront whether we have a particular set installed and if not, do *not*
list a matching syspatch as available. This will allow to skip the syspatches
for the X sets for example if we don't have them installed. If we do install
these sets a posteriori, then syspatch *will* list the X syspatches if there are
any.

req. by many
ok robert@


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/04 14:27:09

Modified files:
	usr.sbin/relayd: check_tcp.c 

Log message:
if configured, set the ttl (IPV6_UNICAST_HOPS) for ipv6 tcp checks.
From Kapetanakis Giannis, thanks.
ok florian@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 14:59:17

Modified files:
	usr.bin/mandoc : tbl_data.c 
	regress/usr.bin/mandoc/tbl/data: Makefile 
Added files:
	regress/usr.bin/mandoc/tbl/data: insert.in insert.out_ascii 
	                                 insert.out_lint 

Log message:
It turns out association of tbl spans with layout rows is simpler than
i thought.  Fixing a bug in curs_addch(3) and minus 25 lines of code.


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/04 15:04:14

Modified files:
	usr.sbin/ifstated: ifstated.h 

Log message:
Fix some variable alignment whitespace.
From Rob Pierce


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/04 15:09:52

Modified files:
	usr.sbin/ifstated: ifstated.c 

Log message:
rename fetch_state() to fetch_ifstate(). The word "state" is a bit
overloaded in this daemon.
From Rob Pierce


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/04 15:13:03

Modified files:
	usr.sbin/ifstated: parse.y 

Log message:
delete tokens that have never been used.
From Rob Pierce
ok yacc and gcc


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/04 15:34:08

Modified files:
	sysutils/terraform/terraform: Makefile 

Log message:
Fix PKGNAME.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/04 15:56:05

Modified files:
	regress/lib/libedit: Makefile.inc 
	regress/lib/libedit/read: Makefile 

Log message:
Fix building the libedit regress programs.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/04 16:21:31

Modified files:
	usr.bin/tmux   : tmux.1 window-tree.c 

Log message:
< and > keys to scroll preview list left and right in tree mode.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/04 16:27:23

Modified files:
	sys/dev/pci/drm: drm_drv.c 

Log message:
Ignore entries with specific PCI subvendor/subdevice such that we don't
inadvertedly match the Intel HD Graphics P4000 as a "Quanta transcode"
device.

Thanks to Joe Gidi for figuring out that I inadvertedly brought this back.
Hopefully fixing it this way prevents it from happening again.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 16:49:59

Modified files:
	usr.bin/mandoc : roff.c 
	regress/usr.bin/mandoc/roff/cond: ie.in ie.out_ascii 

Log message:
Fix handling of \} on roff request lines.
Cures bogus error messages in pages generated with pod2man(1).


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 17:07:40

Modified files:
	gnu/usr.sbin/mkhybrid/src: mkhybrid.8tbl 

Log message:
proper escaping to prevent information loss; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 17:11:26

Modified files:
	usr.sbin/bind/bin/dig: nslookup.1 

Log message:
Fix the only remaining mandoc(1) ERROR in the base system.
(Can't resist the temptation to commit 'cause it allows
such a cute commit message.)


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/04 17:12:01

Modified files:
	regress/usr.bin/file: Makefile 

Log message:
Fix file regress from stdin if obj directory exists.


CVSROOT:	/cvs
Module name:	src
Changes by:	mestre@cvs.openbsd.org	2017/07/04 17:13:09

Modified files:
	sbin/pflogd    : privsep.c 

Log message:
Revert back previous, pledge cannot be enabled on the privsep'd proc yet, at
least not as is

Reported by tim@, OK deraadt@ to backout the pledge for now


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/04 17:38:49

Modified files:
	usr.bin/mandoc : apropos.1 

Log message:
cross reference to self; found with mandoc(1)


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/04 17:54:52

Modified files:
	regress/bin/ksh/edit: Makefile 

Log message:
Switch to build user if run as root.  Prompt output $ or # affects test.


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/05 00:31:59

Modified files:
	regress/bin/ksh/edit: emacs.sh subr.sh 

Log message:
Add tests for file completion in ksh emacs mode, currently failing.

While here, pass the v option to hexdump in order to output all data.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/05 00:45:27

Modified files:
	security/gnutls: Makefile distinfo 

Log message:
Update to gnutls-3.5.14.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/05 01:15:40

Modified files:
	sbin/ping      : ping.c 

Log message:
remove useless (void)printf casts, diff from Klemens Nanni, massaged
by me.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/05 03:40:16

Modified files:
	usr.sbin/syslogd: syslogd.8 

Log message:
Some documentation improvements:

- Fix TLS s/server/client/

- Use 'remote loghost' consistently, even if it's not clear to which
endpoint this correspond.

- Replace 'forwarding' by 'sending' to remove the ambiguity about the
inserted hostname.

- Do not use the word 'server' with 'socket' to avoid confusion with
a TLS server.

- Prefer 'senders' than 'clients' when it comes to spoofing, to reduce
one usage of the word 'client.

ok jmc@, bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/05 03:51:37

Modified files:
	sys/netinet6   : nd6_nbr.c 

Log message:
If we are sending a neighbor solicitation for a link local address
send it with a link local source address as well.

This helps upstream routers with their own source address
selection.

A reoccurring scenario is:
- gateway on fe80::1%if
- the gateway does not have an IP in the same prefix as our global address

When we want to talk to the outside world we first need to resolve the
gateway. We copy the source address from our outgoing packet to the
neighbor solicitation packet (a global address) and ask for layer2
information of a link local address.

The upstream router now needs to do source address selection of it's
own. Since we are coming from a global address and there is no address
from the same prefix the router uses another global address lying
around.

We then drop this with "ND packet from non-neighbor".

Reported over the years by a few people, most recently by Marc Peters
on bugs@ who confirmed that this fixes the problem.

OK stsp@, mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/05 04:22:06

Modified files:
	audio/generaluser-gs-soundfont: Makefile 
	audio/p5-Audio-Scan: Makefile 
	audio/libbs2b  : Makefile 
	comms/rtl-sdr  : Makefile 
	devel/blocksruntime: Makefile 
	devel/cvs-fast-export: Makefile 
	devel/cvsutils : Makefile 
	devel/reposurgeon: Makefile 
	devel/re2c     : Makefile 
	emulators/dynagen: Makefile 
	emulators/dynamips: Makefile 
	graphics/autopano-sift-c: Makefile 
	graphics/enblend-enfuse: Makefile 
	mail/nmzmail   : Makefile 
	net/dnstop     : Makefile 
	net/flow-tools : Makefile 
	net/icli       : Makefile 
	net/mlvpn      : Makefile 
	net/mrtg       : Makefile 
	net/vncsnapshot: Makefile 
	net/zsync      : Makefile 
	sysutils/binwalk: Makefile 
	sysutils/cpuid : Makefile 
	textproc/iksemel: Makefile 
	textproc/libtranslate: Makefile 
	textproc/namazu: Makefile 
	textproc/pugixml: Makefile 
	www/chive      : Makefile 
	www/haserl     : Makefile 
	www/syweb      : Makefile 
	sysutils/symon : Makefile 
	x11/x11vnc     : Makefile 
	x11/autocutsel : Makefile 

Log message:
drop MAINTAINER on a few things


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/05 04:22:32

Modified files:
	.              : Makefile 

Log message:
bye bye depends
okay tb@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/05 04:41:01

Modified files:
	share/mk       : bsd.README 

Log message:
document that we're no longer using 'make depend'


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/05 04:48:41

Modified files:
	sys/arch/amd64/amd64: db_trace.c 

Log message:
Comments are lying.


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/07/05 05:11:56

Modified files:
	usr.sbin/dhcrelay: dhcrelay.c 

Log message:
Don't stop logging to stderr when running in foreground with -d.

Pointed out by Kapetanakis Giannis


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/05 05:34:10

Modified files:
	sys/netinet    : ip_input.c ip_ipip.c ipsec_input.c 
	sys/netinet6   : ip6_input.c ip6_var.h 

Log message:
The IP in IP input function strips the outer header and reinserts
the inner IP packet into the internet queue.  The IPv6 local delivery
code has a loop to deal with header chains.  The idea is to use
this loop and avoid the queueing and rescheduling.  The IPsec packet
will be processed in a single flow.
Merge the IP deliver loop from both IP versions into a single
ip_deliver() function that can handle both addresss families.  This
allows to process an IP in IP header like a normal extension header.
If af != AF_UNSPEC, we are already in a deliver loop and have the
kernel look.  Then we can just return the next protocol.  Otherwise
we enqueue.  The dequeue thread has the kernel lock and starts an
IP delivery loop.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/05 05:40:17

Modified files:
	sys/net        : pf_ioctl.c 

Log message:
Convert pf tagname malloc(9) into pool_get(9) to make it MP safe.
While there use TAILQ_FOREACH macro for traversing tags.
OK mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/05 05:43:09

Modified files:
	lib/libc/sys   : pledge.2 
	lib/libcrypto/man: X509V3_get_d2i.3 X509v3_get_ext_by_NID.3 
	lib/libkeynote : keynote.3 
	lib/libssl/man : SSL_CIPHER_get_name.3 SSL_num_renegotiations.3 
	share/man/man9 : socreate.9 

Log message:
fix cross references to self; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/05 05:44:35

Modified files:
	lib/libc/string: strmode.3 

Log message:
void functions don't return 0

From Klemens Nanni


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/05 05:54:23

Modified files:
	www/phantomjs  : Makefile distinfo 
	www/phantomjs/patches: patch-build_sh patch-src_phantomjs_pro 
	                       patch-src_qt_mkspecs_openbsd-g++_qmake_conf 
	                       patch-src_qt_preconfig_sh 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_heap_MachineStackMarker_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_jit_ExecutableAllocatorFixedVMPool_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_Atomics_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_NullPtr_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_Platform_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_html_HTMLImageElement_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_Timer_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_Timer_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_network_qt_QNetworkReplyHandler_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebKit_qt_WebCoreSupport_NotificationPresenterClientQt_cpp 
	                       patch-src_qt_src_corelib_arch_qatomic_i386_h 
	                       patch-src_qt_src_corelib_codecs_qiconvcodec_cpp 
	                       patch-src_qt_src_corelib_concurrent_qtconcurrentiteratekernel_cpp 
	                       patch-src_qt_src_corelib_global_qglobal_h 
	                       patch-src_qt_src_corelib_io_qfsfileengine_unix_cpp 
	                       patch-src_qt_src_corelib_kernel_qmetaobject_cpp 
	                       patch-src_qt_src_corelib_plugin_qlibrary_unix_cpp 
	                       patch-src_qt_src_corelib_statemachine_qabstractstate_p_h 
	                       patch-src_qt_src_corelib_tools_qiterator_h 
	                       patch-src_qt_src_gui_dialogs_qprintdialog_unix_cpp 
	                       patch-src_qt_src_gui_gui_pro 
	                       patch-src_qt_src_gui_image_qmnghandler_pri 
	                       patch-src_qt_src_gui_image_qnativeimage_cpp 
	                       patch-src_qt_src_gui_image_qpixmap_x11_cpp 
	                       patch-src_qt_src_gui_itemviews_qlistview_cpp 
	                       patch-src_qt_src_gui_kernel_qkeymapper_x11_cpp 
	                       patch-src_qt_src_gui_painting_qcosmeticstroker_cpp 
	                       patch-src_qt_src_gui_painting_qcosmeticstroker_p_h 
	                       patch-src_qt_src_gui_painting_qprinter_cpp 
	                       patch-src_qt_src_network_access_qhttpmultipart_cpp 
	www/phantomjs/pkg: PLIST 
Added files:
	www/phantomjs/patches: patch-build_py 
	                       patch-src_qt_qtbase_config_tests_unix_iconv_iconv_pro 
	                       patch-src_qt_qtbase_config_tests_unix_pulseaudio_pulseaudio_pro 
	                       patch-src_qt_qtbase_configure 
	                       patch-src_qt_qtbase_mkspecs_features_create_cmake_prf 
	                       patch-src_qt_qtbase_mkspecs_openbsd-g++_qmake_conf 
	                       patch-src_qt_qtbase_qmake_generators_makefile_cpp 
	                       patch-src_qt_qtbase_qmake_generators_unix_unixmake2_cpp 
	                       patch-src_qt_qtbase_qmake_generators_unix_unixmake_cpp 
	                       patch-src_qt_qtbase_qmake_generators_unix_unixmake_h 
	                       patch-src_qt_qtbase_src_3rdparty_forkfd_forkfd_c 
	                       patch-src_qt_qtbase_src_3rdparty_icu_dependency_pri 
	                       patch-src_qt_qtbase_src_concurrent_qtconcurrentiteratekernel_cpp 
	                       patch-src_qt_qtbase_src_corelib_io_qfilesystemwatcher_cpp 
	                       patch-src_qt_qtbase_src_corelib_io_qlockfile_unix_cpp 
	                       patch-src_qt_qtbase_src_corelib_io_qstorageinfo_unix_cpp 
	                       patch-src_qt_qtbase_src_corelib_kernel_qcore_unix_p_h 
	                       patch-src_qt_qtbase_src_corelib_tools_qbytearray_cpp 
	                       patch-src_qt_qtbase_src_corelib_tools_qbytearray_h 
	                       patch-src_qt_qtbase_src_gui_image_qxbmhandler_cpp 
	                       patch-src_qt_qtbase_src_network_kernel_qdnslookup_unix_cpp 
	                       patch-src_qt_qtbase_src_network_socket_qnativesocketengine_unix_cpp 
	                       patch-src_qt_qtbase_src_network_ssl_qsslcontext_openssl_cpp 
	                       patch-src_qt_qtbase_src_network_ssl_qsslsocket_cpp 
	                       patch-src_qt_qtbase_src_platformheaders_platformheaders_pro 
	                       patch-src_qt_qtbase_src_plugins_platforms_xcb_qxcbscreen_cpp 
	                       patch-src_qt_qtbase_src_testlib_qtestcase_cpp 
	                       patch-src_qt_qtbase_src_tools_qdoc_htmlgenerator_cpp 
	                       patch-src_qt_qtbase_src_tools_qdoc_tokenizer_cpp 
	                       patch-src_qt_qtwebkit_Source_JavaScriptCore_dfg_DFGDisassembler_cpp 
	                       patch-src_qt_qtwebkit_Source_JavaScriptCore_heap_MachineStackMarker_cpp 
	                       patch-src_qt_qtwebkit_Source_JavaScriptCore_jit_ExecutableAllocator_h 
	                       patch-src_qt_qtwebkit_Source_JavaScriptCore_jsc_pro 
	                       patch-src_qt_qtwebkit_Source_WTF_wtf_MathExtras_h 
	                       patch-src_qt_qtwebkit_Source_WTF_wtf_Platform_h 
	                       patch-src_qt_qtwebkit_Source_WTF_wtf_RandomNumberSeed_h 
	                       patch-src_qt_qtwebkit_Source_WebCore_Target_pri 

Log message:
update to phantomjs-2.1.1, from Pavel Korovin
no reply from maintainer


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/05 06:23:46

Modified files:
	bin/ed         : ed.1 
	lib/libssl/man : SSL_CTX_set_tmp_dh_callback.3 
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 
	share/man/man7 : mdoc.7 roff.7 

Log message:
nits about trailing punctuation found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/05 06:43:10

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
Add Intel Braswell Sensor Hub device.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/05 06:43:32

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/05 06:44:24

Modified files:
	.              : INDEX 

Log message:
sync; 9940


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/05 07:30:01

Modified files:
	share/mk       : bsd.dep.mk 

Log message:
based on florian@'s observation and guenther@'s work in kernel makefiles.
don't include .d files during obj and cleanup, because those files might
be utterly bogus following an untimely reboot.

This allows cleaning stuff up without needing to manually remove those
files.

okay millert@, kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/05 07:31:40

Modified files:
	share/mk       : bsd.sys.mk sys.mk 

Log message:
make use of (f)lex -o option to create unique temporary files, so that
make -j will be happier.

okay millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/05 08:19:53

Modified files:
	lang/seed7     : Makefile distinfo 

Log message:
Update to 20170702. Re-take MAINTAINER.
ok benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/05 08:47:58

Modified files:
	sys/netinet    : ip_input.c 

Log message:
Fix RAMDISK build.

OK bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/05 08:58:59

Modified files:
	sys/arch/arm64/conf: RAMDISK 
	sys/arch/armv7/conf: RAMDISK 

Log message:
Enable NFSCLIENT to let installation over NFS work.

OK kettenis@, deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/05 09:03:20

Modified files:
	usr.bin/mandoc : eqn.c eqn_html.c eqn_term.c mandoc.h tree.c 

Log message:
The EQN_LISTONE box type is pointless.
Simplify by just using EQN_LIST with expectargs = 1.
Noticed while investigating a bug report from bentley@.
No functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/05 09:15:48

Modified files:
	usr.sbin/hostapd: Makefile 

Log message:
forgot to commit this one


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/05 09:20:10

Modified files:
	lib/libcrypto/x509v3: Tag: OPENBSD_6_1 x509v3.h v3_purp.c 

Log message:
MFC:

Distinguish between self-issued certificates and self-signed certificates.
The certificate verification code has special cases for self-signed
certificates and without this change, self-issued certificates (which it
seems are common place with openvpn/easyrsa) were also being included in
this category.

ok inoguchi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/05 09:31:45

Modified files:
	regress/sbin/isakmpd: Makefile.inc 
	regress/lib/libedit: Makefile.inc 
	regress/lib/libedit/chared: Makefile test_gets.c 
	regress/lib/libedit/keymacro: test_get.c 
	regress/lib/libedit/read: Makefile glue.c test_getcmd.c 
	                          test_read_char.c test_read_char.sh 
	regress/lib/libedit/readline: history.c 

Log message:
Implement the generated dependency with a stamp file to avoid needless
recompiling of the test programs.  Add some RCS ids.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/05 09:38:35

Modified files:
	lib/libtls     : tls_server.c 

Log message:
RFC 6066 states that IP literals are not permitted in "HostName" for a
TLS Server Name extension, however seemingly several clients (including
Python, Ruby and Safari) violate the RFC. Given that this is a fairly
widespread issue, if we receive a TLS Server Name extension that contains
an IP literal, pretend that we did not receive the extension rather than
causing a handshake failure.

Issue raised by jsg@

ok jsg@


CVSROOT:	/cvs
Module name:	www
Changes by:	tj@cvs.openbsd.org	2017/07/05 09:56:53

Modified files:
	.              : errata61.html 

Log message:
release libcrypto errata.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/07/05 10:11:03

Modified files:
	faq/ports      : specialtopics.html 

Log message:
add a reminder to remove 'make depend' when we roll the faq to 6.2


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/05 10:17:42

Modified files:
	sbin/dhclient  : clparse.c dhclient.c dhcpd.h 

Log message:
Remove knowledge of struct interface_info from clparse.c. Just
pass the interface name and the TAILQ to put static leases into.

Add a TAILQ for static leases to struct client_config to hold the
static leases until it's time to add them to ifi.

Add add_lease() to add leases to a TAILQ while checking for
leases that are superseded by the new lease.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/05 11:03:58

Modified files:
	security/opendnssec: Makefile 
	security/opendnssec/pkg: README 

Log message:
spello


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/05 12:56:33

Modified files:
	usr.bin/vi/docs/USD.doc/vi.man: vi.1 

Log message:
avoid double space caused by end-of-sentence detection; requested by jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/05 13:27:26

Modified files:
	regress/bin/ksh/edit: emacs.sh subr.sh 

Log message:
Revert previously added tests for file completion that are currently failing.

Prodded by bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/05 13:40:58

Modified files:
	regress/bin/ksh/edit: emacs.sh vi.sh 

Log message:
Favor a UID-agnostic prompt in ksh edit mode tests. Allows the tests to pass
when executed as root.

Spotted by bluhm@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jeremy@cvs.openbsd.org	2017/07/05 13:43:17

Modified files:
	emulators/pcsxr: Makefile 
	emulators/yabause: Makefile 

Log message:
Drop maintainership of pcsxr and yabause


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/05 14:18:11

Modified files:
	sbin/slaacd    : engine.c 

Log message:
Validate prefix information in router advertisements according to RFC
4862 Section 5.5.3.

This very likely solves the problem of slaacd generating privacy
addresses at a very high rate as reported by Matthias Schmidt on
bugs@; thanks!

The problem is that we constantly generate new privacy addresses if we
receive a router advertisement with a pltime of 0 since that address
will immediately be deprecated.

This needs revisiting since we will run into the same problem with
other low pltimes.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/05 14:30:13

Modified files:
	sys/dev/pci/drm: drmP.h drm_linux.c drm_linux.h 
	sys/dev/pci/drm/i915: i915_drv.c i915_drv.h intel_panel.c 
	sys/dev/pci/drm/radeon: atombios_encoders.c 
	                        radeon_legacy_encoders.c 

Log message:
Fix native/raw backlight support in inteldrm(4).


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/05 15:09:09

Modified files:
	www/sope       : Makefile distinfo 

Log message:
Update to 3.2.9, needed for the SOGo update over the major release.

Tests and Feedback from giovanni@, landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/05 15:11:50

Modified files:
	www/sogo       : Makefile distinfo 
	www/sogo/pkg   : PLIST README 

Log message:
Update to 3.2.9, needed for the SOGo update over the major release.

Under the hood, it's compatible to the legacy 2.X version, and no
DB upgrade etc. needed. On the frontent side, it provides a new,
shiny web interface.

Tests, feedback and OK giovanni@, landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/05 15:29:42

Modified files:
	graphics/freeglut: Makefile distinfo 
	graphics/freeglut/patches: patch-include_GL_freeglut_ext_h 
	graphics/freeglut/pkg: PLIST 

Log message:
update freeglut to 3.0.0

patch-include_GL_freeglut_ext_tweak to fix lang/parrot build from and ok jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/05 16:04:11

Modified files:
	www/lynx       : Makefile distinfo 

Log message:
Update lynx to 2.8.9pl15.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/05 16:05:12

Removed files:
	graphics/freeglut/patches: patch-Makefile_in 

Log message:
forgot to actually remove this one


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/05 16:29:42

Modified files:
	sysutils/terraform/terraform: Makefile 

Log message:
Really fix PKGNAME; I forgot that GH_* was doing some magic already,


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/05 18:08:52

Modified files:
	usr.bin/mandoc : eqn.c eqn_term.c 
	regress/usr.bin/mandoc/eqn/fromto: Makefile 
	regress/usr.bin/mandoc/eqn/over: precedence.in 
	                                 precedence.out_ascii 
	                                 precedence.out_html 
	regress/usr.bin/mandoc/eqn/subsup: Makefile 
	regress/usr.bin/mandoc/eqn/unary: bold.in bold.out_ascii 
	                                  bold.out_html diacrit.in 
	                                  diacrit.out_ascii 
	                                  diacrit.out_html sqrt.in 
	                                  sqrt.out_ascii sqrt.out_html 
Added files:
	regress/usr.bin/mandoc/eqn/fromto: precedence.in 
	                                   precedence.out_ascii 
	                                   precedence.out_html 
	regress/usr.bin/mandoc/eqn/subsup: precedence.in 
	                                   precedence.out_ascii 
	                                   precedence.out_html 

Log message:
Fix operator precedence according to Brian W. Kernighan and Lorinda
L. Cherry, "Typesetting Mathematics - User's Guide (Second Edition)",
August 15, 1978, paragraph 23; swarm of bugs pointed out by bentley@.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/05 18:18:33

Modified files:
	regress/usr.bin/mandoc/eqn/fromto: precedence.out_ascii 
	regress/usr.bin/mandoc/eqn/over: precedence.out_ascii 
	regress/usr.bin/mandoc/eqn/subsup: precedence.out_ascii 
	regress/usr.bin/mandoc/eqn/unary: bold.out_ascii 
	                                  diacrit.out_ascii 
	                                  sqrt.out_ascii 

Log message:
fix date


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/07/05 22:32:30

Modified files:
	sys/arch/i386/i386: vmm_support.S 

Log message:
remove an unneeded .align and .code32

ok deraadt


CVSROOT:	/cvs
Module name:	ports
Changes by:	rpointel@cvs.openbsd.org	2017/07/05 22:35:45

Modified files:
	security/yara  : Makefile.inc 
	security/yara/main: distinfo 
	security/yara/python: distinfo 

Log message:
update yara to 3.6.3, bugfixes update.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/05 23:32:32

Modified files:
	devel/sdl2     : Makefile 
Added files:
	devel/sdl2/patches: patch-src_video_x11_SDL_x11window_c 

Log message:
Fix SDL2 apps SIGBUS on mips64el.

https://bugzilla.libsdl.org/show_bug.cgi?id=3692
https://hg.libsdl.org/SDL/rev/97c66d81b2c9

SDL2 calls XChangeProperty with an integer while X11 expects a long.

From Donovan Watteau, thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/05 23:49:10

Modified files:
	net/dsocks     : Makefile 

Log message:
work-around no longer needed, bsd.dep.mk has been tweaked


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/07/06 00:17:05

Modified files:
	sys/arch/amd64/amd64: locore.S locore0.S 
	sys/arch/i386/i386: apicvec.s locore.s 

Log message:
0xcc-fill a few more alignments.  Not because these ones matter particularily,
but because elimination highlights more important ones.
Cursory review mortimer, ok mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/07/06 00:19:15

Modified files:
	sys/arch/amd64/include: vmmvar.h 
	sys/arch/i386/include: vmmvar.h 
	usr.sbin/vmd   : pci.c pci.h 

Log message:
vmd: increase the max number of disks from 2 to 4. Requires kernel rebuild
as a struct passed to vmm has changed size.

ok deraadt, pd


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/07/06 00:21:56

Modified files:
	sys/arch/amd64/conf: ld.script 

Log message:
Disassociate PA load address of the kernel from VA, such that PA isn't
a mask of VA, but can be an offset (once other code is ready...).  Also,
simplify and remove useless symbols.
ok mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/06 00:33:42

Modified files:
	regress/bin/csh: filec.sh 

Log message:
Add tests for all features of file completion in csh.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/06 00:52:31

Modified files:
	converters/dos2unix: Makefile distinfo 
	converters/dos2unix/patches: patch-Makefile 

Log message:
Minor update to 7.3.5 -- take maintainer.
ok benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/06 01:16:11

Modified files:
	editors/moe    : Makefile distinfo 
	editors/moe/patches: patch-window_vector_cc 

Log message:
Minor update to 1.9 -- take maintainer.
ok benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/06 01:57:33

Modified files:
	archivers/libzip: Makefile distinfo 
	archivers/libzip/pkg: PLIST 

Log message:
Update to 1.2.0 -- take maintainer
Major bump to SHARED_LIB due to symbols being removed from the library.
Changelog: https://nih.at/libzip/NEWS.html
ok kirby@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/06 02:01:09

Modified files:
	audio/mscore   : Makefile distinfo 
	audio/mscore/patches: patch-CMakeLists_txt 
	                      patch-build_gen-qt-projectfile 
	                      patch-mscore_CMakeLists_txt 
	audio/mscore/pkg: PLIST 

Log message:
Major update to 2.1 -- take maintainer.
Changelog: https://musescore.org/en/2.1
ok benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/06 02:03:28

Modified files:
	audio/checkmate: Makefile distinfo 

Log message:
Minor update to 0.21
ok benoit@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsg@cvs.openbsd.org	2017/07/06 04:09:26

Modified files:
	sys/dev/pci/drm/i915: i915_devlist.h 

Log message:
sync the list of pci devices which don't require aperture
ok kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/07/06 04:51:01

Modified files:
	devel/subversion: Makefile distinfo 

Log message:
Update to Apache Subversion 1.9.6. Contains a server-side SHA1 collision fix.


CVSROOT:	/cvs
Module name:	ports
Changes by:	stsp@cvs.openbsd.org	2017/07/06 04:53:44

Modified files:
	devel/subversion: Tag: OPENBSD_6_1 Makefile distinfo 

Log message:
For 6.1-stable:
Update to Apache Subversion 1.9.6. Contains a server-side SHA1 collision fix.
Direct update for -stable discussed with danj@ and sthen@ a few days ago.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/06 05:08:41

Modified files:
	archivers/pecl-lzf: Makefile distinfo 

Log message:
update to pecl-lzf-1.6.6, from maintainer Johan Huldtgren


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/06 05:09:50

Modified files:
	security/lastpass-cli: Makefile distinfo 
	security/lastpass-cli/patches: patch-CMakeLists_txt 

Log message:
Update to lastpass-cli-1.2.1, fixing a regression with 'lpass show'
From maintainer Björn Ketelaars


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 05:17:58

Modified files:
	lib/libexpat   : Makefile shlib_version 
Removed files:
	lib/libexpat   : Symbols.map 

Log message:
Compile libexpat with -fvisibility=hidden.  This restricts the
exported symbols to the indended API.  We do not need a Symbols.map
anymore.  Major library bump is necessary as some internal functions
vanish from the ABI.
Discussed upstream with Sebastian Pipping; ports bulk build ajacoutot@;
OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/07/06 05:27:56

Modified files:
	sys/arch/amd64/stand/libsa: exec_i386.c 

Log message:
Remove bogus arguments from a printf in the bootloader.

ok tom@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/06 06:15:23

Modified files:
	usr.sbin/switchd: Makefile 
	usr.sbin/switchctl: Makefile 

Log message:
/tmp/cvsa9y4jm


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/06 06:20:24

Modified files:
	sysutils/mcollective: Makefile distinfo 
	sysutils/mcollective/pkg: PLIST 

Log message:
Update to 2.11.0


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 07:06:34

Modified files:
	lib/libexpat/lib: siphash.h 
	lib/libexpat/tests: runtests.c 

Log message:
Add ULL suffix to 64 bit constants.  This avoids compiler warnings
on i386 and allows to compile the C++ test.  Upstream dropped the
ULL in an insufficient attempt to make the siphash code C89 compatible.
Their fix will be more complicated.
No binary change.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 07:11:15

Modified files:
	regress/lib/libexpat: Makefile.inc 
	regress/lib/libexpat/runtests: Makefile 
	regress/lib/libexpat/runtestspp: Makefile 

Log message:
Link the runtests programs statically and explain why.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/06 07:20:51

Modified files:
	graphics/iec16022: Makefile distinfo 

Log message:
update to iec16022-0.3.0


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 07:20:54

Modified files:
	regress/sys/netinet/in_pcbbind: runtest.c 

Log message:
Initialize the return value and do not use garbage as exit status.
Then the test passes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/06 07:55:05

Modified files:
	sysutils/freeipmi: Makefile distinfo 
	sysutils/freeipmi/patches: patch-etc_Makefile_in 
	                           patch-libfreeipmi_Makefile_in 
	                           patch-libipmidetect_Makefile_in 
	                           patch-man_Makefile_in 

Log message:
update to freeipmi-1.5.6


CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2017/07/06 08:15:14

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 08:17:11

Modified files:
	regress/usr.bin/sed: Makefile 

Log message:
Disable new tests until sed has been adapted.
Discussed with otto@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/06 08:56:39

Modified files:
	sbin/slaacd    : slaacd.h 

Log message:
move rpref enum definition up so that we can #ifndef SMALL a big block


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/06 08:57:29

Modified files:
	sbin/slaacd    : slaacd.c slaacd.h 

Log message:
reorder imsg_type enum so that we can #ifndef SMALL all the control
related imsg types


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/06 09:02:53

Modified files:
	sbin/slaacd    : control.h engine.c frontend.c frontend.h log.h 
	                 slaacd.c slaacd.h 

Log message:
Sprinkel in some #ifndef SMALL to make slaacd smaller for the
installer.

This removes the control socket handling which is useless because we
won't have slaacctl in the installer.

Also deraadt@ pointed out that this would be the first use of log.c in
the installer where we don't have syslogd running so it's rather
pointless. So this completely neuters logging.

The log.h change doesn't interfere with benno@'s efforts of unifying
log.c

The installer version of slaacd won't even compile control.c and log.c


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/06 09:04:10

src/distrib/special/slaacd

Update of /cvs/src/distrib/special/slaacd
In directory cvs.openbsd.org:/tmp/cvs-serv38547/distrib/special/slaacd

Log Message:
Directory /cvs/src/distrib/special/slaacd added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/06 09:05:28

Added files:
	distrib/special/slaacd: Makefile 

Log message:
installer version of slaacd, not hooked up to the build yet


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 09:42:04

Modified files:
	bin/ksh        : ksh.1 
	lib/libc/gen   : glob.3 
	lib/libcrypto/man: OCSP_sendreq_new.3 OPENSSL_config.3 
	                   openssl.cnf.5 
	share/man/man4/man4.macppc: macobio.4 
	share/man/man4/man4.sparc64: fhc.4 
	share/man/man6 : intro.6 
	share/man/man9 : mi_switch.9 
	sys/arch/landisk/stand/mbr: mbr.8 

Log message:
fix broken cross references; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2017/07/06 10:23:11

Modified files:
	lib/libc/stdlib: strtoimax.c strtol.c strtoll.c strtoul.c 
	                 strtoull.c strtoumax.c 

Log message:
The 0x (or 0X) prefix in base 16 is optional so only skip over the
prefix if the character following it is a valid hex char.  The C99
standard is clear that given the string "0xy" zero should be returned
and endptr set to point to the "x".  OK deraadt@ espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	anton@cvs.openbsd.org	2017/07/06 10:34:28

Modified files:
	regress/bin/csh: Makefile 
	regress/usr.bin/mail: Makefile 

Log message:
Do not suppress what's going on.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 10:50:58

Modified files:
	usr.bin/arch   : arch.1 
	usr.sbin/mopd/mopa.out: mopa.out.1 
	usr.sbin/mopd/mopchk: mopchk.1 
	usr.sbin/mopd/mopprobe: mopprobe.1 
	usr.sbin/mopd/moptrace: moptrace.1 

Log message:
delete duplicate RCS IDs; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 10:52:32

Modified files:
	share/man/man4 : pcscp.4 

Log message:
delete duplicate RCS ID and lots of .Tn


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/06 10:56:52

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c options.c 

Log message:
cons_options() only needs to know a buffer and a length to
pack options into. Not all the gory details of interface_info.

Move some of the raw packet processing out of options.c's
do_packet() and into the more obvious dispatch.c's
packethandler().

Mention that RFC791 is why we use 576-byte UDP packets.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 10:58:34

Modified files:
	usr.sbin/quot  : quot.8 

Log message:
fix RCS Id; found with mandoc -Tlint


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/07/06 11:01:10

Modified files:
	app/cwm        : Makefile 

Log message:
from src, by espie@:
no need to generate y.tab.h if nothing uses it, set YFLAGS to nothing


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/07/06 11:09:17

Modified files:
	app/cwm        : cwmrc.5 

Log message:
fix a few WARNINGS (new sentence, new line and extraneous Pp macro) found with
mandoc -Tlint


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/06 11:12:22

Modified files:
	lib/libtls     : Symbols.list tls.c tls.h tls_config.c 
	                 tls_internal.h 

Log message:
Add support for providing CRLs to libtls - once a CRL is provided we
enable CRL checking for the full certificate chain.

Based on a diff from Jack Burton <jack at saosce dot com dot au>, thanks!

Discussed with beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/06 11:12:44

Modified files:
	lib/libtls     : shlib_version 

Log message:
Bump minor due to symbol addition.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 11:24:49

Modified files:
	sys/arch/landisk/stand/boot: boot.8 
	sys/arch/landisk/stand/mbr: mbr.8 
	sys/arch/landisk/stand/xxboot: xxboot.8 

Log message:
Delete cross references to boot_landisk(8).
According to tobiasu@, landisk is moribund and writing new manual
pages for it would be a waste of time.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/06 11:27:19

Modified files:
	lib/libtls/man : tls_load_file.3 

Log message:
Document tls_config_set_crl_file() and tls_config_set_crl_mem().

Based on a diff from Jack Burton <jack at saosce dot com dot au>, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 11:39:45

Modified files:
	sys/arch/socppc/stand/boot: boot.8 

Log message:
Our website says that socppc was discontinued after 5.8 (thanks to
tobiasu@ for pointing that out), but the manual pages are still
installed.  I have no idea how to properly tedu an architecture, so
deleting the dead .Xr to boot_socppc(8) is all i'm doing in this respect.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 13:20:21

Modified files:
	share/man/man6 : intro.6 

Log message:
revert previous, requested by jmc@; he says the broken .Xr is intentional


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 13:27:37

Modified files:
	usr.bin/mg     : display.c 

Log message:
Fix display of overlong lines containing non-ASCII bytes.
Also fixes a crash reported by Hiltjo Posthuma <hiltjo at codemadness
dot org>, though in a different way than with the patch he sent.
OK florian@ bcallah@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 13:40:18

Modified files:
	regress/bin/ksh/edit: Makefile 

Log message:
anton@ has fixed the test script so that it can run as root.  Remove
my workaround that switched to build user.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/07/06 14:23:15

Modified files:
	audio/mpg123   : Makefile distinfo 

Log message:
update to 1.25.1: some bug fixes in libmpg123


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/07/06 14:31:55

Modified files:
	editors/nano   : Makefile distinfo 

Log message:
maintenance update to 2.8.5


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/07/06 14:42:17

Modified files:
	archivers/unrar: Makefile distinfo 

Log message:
update to 5.50 beta 5 (5.5.6)


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/06 15:25:38

Modified files:
	lang           : Makefile 
	lang/sbcl      : Makefile 

Log message:
don't build threads flavor for now, it doesn't build reliably, and blocks
normal sbcl.

maintainer agrees, add comment per aja@'s request, which is a good idea.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 15:33:45

Modified files:
	regress/usr.bin/dc: Makefile 
	regress/usr.bin/diff: Makefile 
	regress/usr.bin/file: Makefile 
	regress/usr.bin/patch: Makefile 

Log message:
Delete variable REGRESS_TARGET, missing plural S is a typo and it
is not used.  Convert tests into a common style.
OK anton@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/06 15:41:59

Modified files:
	share/man/man5 : port-modules.5 

Log message:
REGRESS_TARGET has been renamed to TEST_TARGET.
spotted by anton@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/06 16:19:24

Modified files:
	distrib/sets/lists/base: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/06 16:58:44

Modified files:
	usr.bin/mandoc : mandoc.1 mandoc.h read.c 
	regress/usr.bin/mandoc/char/space: trailing-mdoc.out_lint 
	regress/usr.bin/mandoc/man/SH: noarg.out_lint 
	regress/usr.bin/mandoc/man/SS: noarg.out_lint 
	regress/usr.bin/mandoc/man/TH: case.out_lint 
	regress/usr.bin/mandoc/man/nf: dupe.out_lint 
	regress/usr.bin/mandoc/mdoc/Bd: blank.out_lint 
	regress/usr.bin/mandoc/mdoc/Dd: dupe.out_lint 
	regress/usr.bin/mandoc/mdoc/Dt: case.out_lint dupe.out_lint 
	                                late.out_lint 
	regress/usr.bin/mandoc/mdoc/Os: dupe.out_lint 
	regress/usr.bin/mandoc/mdoc/blank: comment.out_lint 
	regress/usr.bin/mandoc/roff/args: man.out_lint mdoc.out_lint 
	                                  roff.out_lint 
	regress/usr.bin/mandoc/roff/nr: escname.out_lint 
	regress/usr.bin/mandoc/roff/string: name.out_lint 

Log message:
Now that we have the -Wstyle message level, downgrade six warnings
that are not syntax mistakes and that do not cause wrong formatting
or content to style suggestions.
Also upgrade two warnings that may cause information loss to errors.


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/07/06 18:09:14

Modified files:
	libexec/spamd-setup: spamd-setup.c 

Log message:
switch user to _spamd before executing ftp(1) to fetch lists.
sprinkle in some closefrom(2); ok deraadt@ beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/07/06 18:10:15

Modified files:
	libexec/spamd-setup: spamd-setup.c 

Log message:
allow fetching lists from https:// URLs too


CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2017/07/06 21:53:12

Modified files:
	usr.bin/ssh    : ssh-keygen.1 ssh-keygen.c 

Log message:
When generating all hostkeys (ssh-keygen -A), clobber existing keys
if they exist but are zero length. zero-length keys could previously
be made if ssh-keygen failed part way through generating them, so avoid
that case too. bz#2561 reported by Krzysztof Cieplucha; ok dtucker@


CVSROOT:	/cvs
Module name:	src
Changes by:	bcook@cvs.openbsd.org	2017/07/06 23:28:12

Modified files:
	lib/libcrypto  : Tag: OPENBSD_6_1 opensslv.h 

Log message:
bump to LibreSSL 2.5.5


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/07/07 00:22:20

Modified files:
	xserver/Xi     : sendexev.c 
	xserver/dix    : events.c swapreq.c 

Log message:
Merge upstream fixes to the X event swapping code.

(CVE-2017-10971 and CVE-2017-10972).


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/07 01:13:14

Modified files:
	usr.bin/tmux   : cmd-find.c 

Log message:
When working out the current client (for example for switch-client with
no target), prefer clients attached to the current session if there is
one. GitHub issue 995 from Jan Larres.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 01:46:25

Modified files:
	sysutils/awless: Makefile distinfo 

Log message:
Update to awless-0.1.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/07/07 03:14:26

Modified files:
	usr.bin/telnet : externs.h sys_bsd.c terminal.c 

Log message:
Remove unnecessary #ifdefs in telnet. No binary change.

OK deraadt@, tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/07/07 03:15:59

Modified files:
	share/man/man4 : lpt.4 

Log message:
Make configuration lines match GENERIC files.

This adds amd64 and splits up alpha and i386.

OK deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/07 04:04:43

Modified files:
	sys/arch/octeon/dev: octciu.c 

Log message:
Fix function name in panic message.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/07 04:10:17

Modified files:
	x11/xscreensaver: Makefile distinfo 
	x11/xscreensaver/pkg: PLIST 

Log message:
update to xscreensaver-5.37


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/07 04:17:28

Modified files:
	www/lynx       : Makefile 
	www/lynx/patches: patch-src_LYReadCFG_c 

Log message:
Avoid parsing DOWNLOADER and PRINTER directives from lynx.cfg.

As a side note, there is no need to explicitely disable parsing UPLOADER
directives because we --disable-dired at configure time, nor EXTERNAL
directives as we do not build with --enable-externs.

OK mestre@, tb@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/07 04:40:13

Modified files:
	www/sope       : Makefile distinfo 

Log message:
Update to 3.2.10

OK giovanni@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/07 04:41:05

Modified files:
	www/sogo       : Makefile distinfo 
	www/sogo/pkg   : PLIST 

Log message:
update to 3.2.10

OK giovanni@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/07 04:49:12

Modified files:
	regress/sys/uvm/mmap_hint: mmap_hint.c 

Log message:
Make mmap_hint.c compile on i386 by adding includes.  Unfortunately
test is still failing.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/07 04:56:13

Modified files:
	regress/usr.bin/libtool: Makefile 

Log message:
Make libtool regress tests pass:
- There are no NOPIC architectures anymore.
- Add DISABLED targets for tests failing intensionally without
touching the real targets.
- In execute mode libtool command line must use ./p2 as .  is not
in my PATH.
OK mpi@ espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/07 06:26:51

Modified files:
	net/libmaxminddb: Makefile distinfo 

Log message:
Update GeoLite2 databases to latest version.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/07 06:41:59

Modified files:
	games/atc      : grammar.y 

Log message:
we're not shooting yacception

okay millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 06:48:13

Modified files:
	sysutils/terraform/provider-alicloud: Makefile 
	sysutils/terraform/provider-archive: Makefile 
	sysutils/terraform/provider-arukas: Makefile 
	sysutils/terraform/provider-atlas: Makefile 
	sysutils/terraform/provider-aws: Makefile 
	sysutils/terraform/provider-azure: Makefile 
	sysutils/terraform/provider-azurerm: Makefile 
	sysutils/terraform/provider-bitbucket: Makefile 
	sysutils/terraform/provider-chef: Makefile 
	sysutils/terraform/provider-circonus: Makefile 
	sysutils/terraform/provider-clc: Makefile 
	sysutils/terraform/provider-cloudflare: Makefile 
	sysutils/terraform/provider-cloudstack: Makefile 
	sysutils/terraform/provider-cobbler: Makefile 
	sysutils/terraform/provider-consul: Makefile 
	sysutils/terraform/provider-datadog: Makefile 
	sysutils/terraform/provider-digitalocean: Makefile 
	sysutils/terraform/provider-dme: Makefile 
	sysutils/terraform/provider-dns: Makefile 
	sysutils/terraform/provider-dnsimple: Makefile 
	sysutils/terraform/provider-docker: Makefile 
	sysutils/terraform/provider-dyn: Makefile 
	sysutils/terraform/provider-external: Makefile 
	sysutils/terraform/provider-fastly: Makefile 
	sysutils/terraform/provider-github: Makefile 
	sysutils/terraform/provider-gitlab: Makefile 
	sysutils/terraform/provider-google: Makefile 
	sysutils/terraform/provider-grafana: Makefile 
	sysutils/terraform/provider-heroku: Makefile 
	sysutils/terraform/provider-http: Makefile 
	sysutils/terraform/provider-icinga2: Makefile 
	sysutils/terraform/provider-ignition: Makefile 
	sysutils/terraform/provider-influxdb: Makefile 
	sysutils/terraform/provider-kubernetes: Makefile 
	sysutils/terraform/provider-librato: Makefile 
	sysutils/terraform/provider-local: Makefile 
	sysutils/terraform/provider-logentries: Makefile 
	sysutils/terraform/provider-mailgun: Makefile 
	sysutils/terraform/provider-mysql: Makefile 
	sysutils/terraform/provider-newrelic: Makefile 
	sysutils/terraform/provider-nomad: Makefile 
	sysutils/terraform/provider-ns1: Makefile 
	sysutils/terraform/provider-null: Makefile 
	sysutils/terraform/provider-oneandone: Makefile 
	sysutils/terraform/provider-opc: Makefile 
	sysutils/terraform/provider-openstack: Makefile 
	sysutils/terraform/provider-opsgenie: Makefile 
	sysutils/terraform/provider-ovh: Makefile 
	sysutils/terraform/provider-packet: Makefile 
	sysutils/terraform/provider-pagerduty: Makefile 
	sysutils/terraform/provider-postgresql: Makefile 
	sysutils/terraform/provider-powerdns: Makefile 
	sysutils/terraform/provider-profitbricks: Makefile 
	sysutils/terraform/provider-rabbitmq: Makefile 
	sysutils/terraform/provider-rancher: Makefile 
	sysutils/terraform/provider-random: Makefile 
	sysutils/terraform/provider-rundeck: Makefile 
	sysutils/terraform/provider-scaleway: Makefile 
	sysutils/terraform/provider-softlayer: Makefile 
	sysutils/terraform/provider-spotinst: Makefile 
	sysutils/terraform/provider-statuscake: Makefile 
	sysutils/terraform/provider-template: Makefile 
	sysutils/terraform/provider-terraform: Makefile 
	sysutils/terraform/provider-tls: Makefile 
	sysutils/terraform/provider-triton: Makefile 
	sysutils/terraform/provider-ultradns: Makefile 
	sysutils/terraform/provider-vault: Makefile 
	sysutils/terraform/provider-vcd: Makefile 
	sysutils/terraform/provider-vsphere: Makefile 

Log message:
Bump all after terraform pkgname change.
reported by naddy@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 06:50:49

Modified files:
	devel/goffice  : Makefile distinfo 

Log message:
Update to goffice-0.10.35.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 06:51:10

Modified files:
	math/gnumeric  : Makefile distinfo 

Log message:
Update to gnumeric-1.12.35.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 06:57:45

Modified files:
	net/py-boto    : Makefile distinfo 

Log message:
Update to py-boto-2.48.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/07 07:44:45

Modified files:
	share/mk       : sys.mk 

Log message:
unbreak
this specific rule is only triggered twice in the whole ports tree
(sysutils/xjobs and print/l2a)

This fixes them


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 07:52:12

Modified files:
	net/py-botocore: Makefile distinfo 
	net/py-botocore/pkg: PLIST 

Log message:
Update to py-botocore-1.5.80.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 07:52:23

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.117.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/07 08:11:07

Modified files:
	share/mk       : sys.mk 

Log message:
COMPILE.c already does -c, so no need to double it.
no functional change


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/07 08:12:39

Modified files:
	sysutils/go-cs : Makefile distinfo 

Log message:
Update to go-cs-0.7.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/07 08:12:43

Modified files:
	regress/usr.bin/make: Makefile 
Added files:
	regress/usr.bin/make: tok.l 

Log message:
trigger default .l.o  rule and check the produced file has the right name


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/07 08:39:45

Modified files:
	usr.bin/tmux   : format.c tmux.1 

Log message:
Add a pane_pipe format to show if pipe-pane is active, GitHub issue 990.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/07 08:49:04

Modified files:
	sys/arch/octeon/dev: octmmc.c 

Log message:
Add logic for running SD commands. Tested with a few different makes
of MMC/SD memory.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/07 08:53:07

Modified files:
	sbin/dhclient  : dhclient.c dhcpd.h dispatch.c options.c 

Log message:
Rename cons_options() to pack_options(), and do_packet() to
unpack_options(). Store the unpacked options in a static
variable. Move remaining raw packet processing from unpack_options()
to packethandler().

No more struct interface_info knowledge in options.c


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/07 09:14:47

Modified files:
	sbin/dhclient  : bpf.c dhcpd.h packet.c 

Log message:
assemble_eh_header() needs only to know about hw_addr.

No more struct interface_info knowledge in packet.c


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/07 09:39:30

Modified files:
	sbin/dhclient  : dhclient.c privsep.c privsep.h 

Log message:
dispatch_imsg() only needs to know name and rdomain.

No more struct interface_info knowledge in privsep.[ch]


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/07 10:01:58

Modified files:
	sysutils/bacula: Makefile distinfo 
	sysutils/bacula/patches: patch-configure 
	                         patch-src_lib_Makefile_in 
	                         patch-src_stored_Makefile_in 
	                         patch-src_stored_bacula-sd_conf_in 
	sysutils/bacula/pkg: PLIST-main PLIST-mysql PLIST-pgsql 
	                     PLIST-server PLIST-sqlite3 
Removed files:
	sysutils/bacula/patches: patch-src_dird_Makefile_in 
	                         patch-src_filed_Makefile_in 

Log message:
Major update to Bacula-9.0.0: note that this requires a database schema
change, so follow the usual upgrade documentation. This is still compatible
with older File Daemons (clients).


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/07 10:19:30

Modified files:
	usr.bin/mandoc : mandoc.1 

Log message:
Radically simplify the definitions what the message levels ERROR
and WARNING mean: minus 20 lines of mdoc source.  OK jmc@.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/07 10:21:34

Modified files:
	distrib/miniroot: install.sub 

Log message:
Replace a doubled period and add a blank space in front of a bracket.
From Klemens Nanni

ok rpe


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/07 10:21:55

Modified files:
	security/letsencrypt: Makefile.inc 
	security/letsencrypt/client: distinfo 
	security/letsencrypt/py-acme: distinfo 

Log message:
update to certbot-0.16.0


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/07 10:27:26

Modified files:
	usr.bin/tmux   : window-tree.c 

Log message:
Fix size of rightmost preview section.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/07 10:30:06

Modified files:
	usr.bin/htpasswd: htpasswd.1 

Log message:
clarify which httpd we are talking about;
from Raf Czlonka <rczlonka at gmail dot com>


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/07 10:31:37

Modified files:
	regress/usr.bin/make: Makefile mk12 mk21 t21.out 

Log message:
Disable tests that fail due to known make bugs, fix the others.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/07 10:58:45

Modified files:
	sbin/dhclient  : clparse.c dhclient.c dhcp.h dhcpd.h options.c 
	                 tables.c 

Log message:
Replace the many occurances of '256' with a new #define
DHO_COUNT.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/07 11:05:50

Log message:
    import py-flexmock-0.10.2
    
    flexmock is a testing library for Python that makes it easy to create
    mocks, stubs and fakes.
    
    ok aja@
    
    Status:
    
    Vendor Tag:	jasper
    Release Tags:	jasper_20170707
    
    N ports/devel/py-flexmock/Makefile
    N ports/devel/py-flexmock/distinfo
    N ports/devel/py-flexmock/pkg/DESCR
    N ports/devel/py-flexmock/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/07 11:08:02

Modified files:
	devel          : Makefile 

Log message:
+py-flexmock
+py-flexmock,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/07 11:15:21

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
simplify the eqn_box_makebinary() function by removing the trivial pos
parameter; also minus two lines of code; no functional change


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/07/07 11:25:09

Modified files:
	usr.sbin/dhcrelay: dispatch.c 

Log message:
Handle carp(4) as HTYPE_ETHER.

This fixes "dhcrelay -i carpX" that used to work when dhcrelay didn't care.

Reported and tested by Kapetanakis Giannis bilias at edu.physics.uoc.gr


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/07 12:06:51

Modified files:
	sys/dev/pci/drm: drm_linux.h 

Log message:
You win some, you los some.  The Linux 4.4 code is still sub-standard but
triggers different warnings now.

ok naddy@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/07 13:06:15

Modified files:
	usr.bin/mandoc : eqn_term.c 
	regress/usr.bin/mandoc/eqn/fromto: basic.out_ascii 
	                                   noarg.out_ascii 
	                                   precedence.out_ascii 
	regress/usr.bin/mandoc/eqn/over: noarg.out_ascii 
	                                 precedence.out_ascii 
	regress/usr.bin/mandoc/eqn/subsup: combine.out_ascii 
	                                   noarg.out_ascii 
	                                   precedence.out_ascii 
	                                   sub_group.out_ascii 

Log message:
add parentheses to the output where required for disambiguation


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/07/07 13:14:46

Modified files:
	lib/libc/stdlib: malloc.c 

Log message:
Only access offset if canaries are enabled *and* size > 0, otherwise offset
is not initialized. Problem spotted by Carlin Bingham; ok phessler@ tedu@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/07 13:39:17

Modified files:
	usr.bin/mandoc : mandoc.h tree.c 

Log message:
garbage collect unused enum member EQN_ROOT


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/07 13:58:07

Log message:
    Import citus 6.2.2.
    
    Citus horizontally scales PostgreSQL across multiple machines using
    sharding and replication. Its query engine parallelizes incoming SQL
    queries across these servers to enable human real-time (less than a
    second) responses on large datasets.
    
    Citus extends the underlying database rather than forking it, which
    gives developers and enterprises the power and familiarity of a
    traditional relational database. As an extension, Citus supports new
    PostgreSQL releases, allowing users to benefit from new features while
    maintaining compatibility with existing PostgreSQL tools.
    
    From Martijn Rijkeboer, ok sthen@
    
    Status:
    
    Vendor Tag:	mrijkeboer
    Release Tags:	landry_20170707
    
    N ports/databases/citus/Makefile
    N ports/databases/citus/distinfo
    N ports/databases/citus/pkg/DESCR
    N ports/databases/citus/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/07 13:58:35

Modified files:
	databases      : Makefile 

Log message:
+citus


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/07 17:15:27

Modified files:
	regress/sys/kern: Makefile 
	regress/sys/kern/setuid: Makefile 
	regress/sys/net/pf_forward: Makefile 
	regress/sys/net/pf_fragment: Makefile 
	regress/sys/net/pf_print: Makefile 
	regress/sys/net/pf_state: Makefile 
	regress/sys/net/pf_table: Makefile 
	regress/sys/netinet/arp: Makefile 
	regress/sys/netinet/ipsec: Makefile 
	regress/sys/netinet/pmtu: Makefile 
	regress/sys/netinet6/frag6: Makefile 
	regress/sys/netinet6/nd6: Makefile 
	regress/sys/netinet6/rh0: Makefile 

Log message:
Remove useless make depend targets.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/07 17:55:21

Modified files:
	regress        : Makefile 
	regress/lib/libedit/chared: test_gets.c 
	regress/lib/libedit/keymacro: test_get.c 
	regress/lib/libpthread: Makefile 
	regress/sbin/pfctl: Makefile 
	regress/sbin/route: Makefile 
	regress/usr.bin/cvs: Makefile 
	regress/usr.bin/mandoc/db/mlinks: mlinks.1 
	regress/usr.sbin/arp: Makefile 

Log message:
Remove all references to "make depend" from regress.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/07 18:08:26

Modified files:
	regress/lib/libc/malloc/malloc0test: Makefile 

Log message:
Run malloc0test with all possible malloc options.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/07 18:36:10

Modified files:
	sbin/dhclient  : bpf.c clparse.c dhclient.c dhcp.h dhcpd.h 
	                 kroute.c options.c packet.c parse.c privsep.h 

Log message:
Always use uintNN_t instead of sometimes u_intNN_t
and sometimes uintNN_t.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/07 20:13:36

Modified files:
	share/man/man8 : ssl.8 

Log message:
add a hint about subjectAltName. this isn't great, but i'm not sure how
to improve it without muddying up the whole page, and at a minimum it
gives the reader a clue about some concepts to search the web for.
if you can do better, make it so. :)


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/07/07 21:25:40

Modified files:
	sysutils/dtb   : Makefile distinfo 
	sysutils/dtb/pkg: PLIST 

Log message:
update dtb to linux 4.12


CVSROOT:	/cvs
Module name:	ports
Changes by:	jsg@cvs.openbsd.org	2017/07/07 21:43:39

Modified files:
	devel/afl      : Makefile distinfo 

Log message:
update to afl 2.45b


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/08 01:02:58

Modified files:
	audio/scmpc    : Makefile 
	net/nagios/nsca-ng: Makefile 
	x11/i3status   : Makefile 
	x11/tilda      : Makefile 

Log message:



CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/08 02:28:01

Modified files:
	lang/python    : Makefile python.port.mk 
Removed files:
	lang/python/3.4: Makefile distinfo 
	lang/python/3.4/files: CHANGES.OpenBSD 
	lang/python/3.4/patches: patch-Makefile_pre_in 
	                         patch-Modules_pyexpat_c 
	                         patch-configure_ac patch-setup_py 
	lang/python/3.4/pkg: DESCR-gdbm DESCR-idle DESCR-main 
	                     DESCR-tests DESCR-tkinter PLIST-gdbm 
	                     PLIST-idle PLIST-main PLIST-tests 
	                     PLIST-tkinter 
	lang/python/3.5: Makefile distinfo 
	lang/python/3.5/files: CHANGES.OpenBSD 
	lang/python/3.5/patches: patch-Lib_test_test_locale_py 
	                         patch-Makefile_pre_in 
	                         patch-configure_ac patch-setup_py 
	lang/python/3.5/pkg: DESCR-gdbm DESCR-idle DESCR-main 
	                     DESCR-tests DESCR-tkinter PLIST-gdbm 
	                     PLIST-idle PLIST-main PLIST-tests 
	                     PLIST-tkinter 

Log message:
Retire python 3.4 and 3.5, python 3.6 is the default python3 version
since 7 months, and nothing uses those anymore.
ok rpointel@ (MAINTAINER) ajacoutot@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/08 03:19:02

Modified files:
	sys/kern       : uipc_socket.c 
	sys/miscfs/fifofs: fifo_vnops.c 
	sys/sys        : socketvar.h 

Log message:
Revert grabbing the socket lock in kqueue filters.

It is unsafe to sleep while iterating the list of pending events in
kqueue_scan().

Reported by abieber@ and juanfra@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/08 04:34:14

Added files:
	geo/qlandkartegt/patches: patch-src_CCanvas_cpp 
	                          patch-src_CMap3D_cpp 
	                          patch-src_CWptDB_cpp 

Log message:
fix where to find isinf/isnan so that this builds again.
(no need for a bump, didn't build before)
okay landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/08 07:37:23

Modified files:
	usr.sbin/acme-client: revokeproc.c 

Log message:
fix typo in comment

from Hiltjo Posthuma


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/08 07:43:09

Modified files:
	usr.bin/mandoc : tbl_term.c 

Log message:
Correctly handle horizontal spans at the beginning of rows,
fixing an assertion failure found by jsg@ with afl(1).

While here, also drop printing of whitespace in tbl_data()
which makes no difference because column positioning code
in term_tbl() already takes care of that.


CVSROOT:	/cvs
Module name:	src
Changes by:	kevlo@cvs.openbsd.org	2017/07/08 08:26:23

Modified files:
	sys/dev/ic     : r92creg.h rtwn.c rtwnvar.h 

Log message:
- For RTL8188CUS/RTL8192CU, we have to force 8051 reset/enable before waiting
for firmware to get ready.  It fixes "urtwn0: could not load firmware page"
while running stsp@'s script: dhclient urtwn0; ifconfig urtwn0 down;
ifconfig urtwn0 scan in a loop.

- Minor cleanup for rtwn_read_rom()/rtwn_get_txpower(); no need to use
callbacks.

Tested by stsp@ and me.

ok stsp@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/08 08:51:01

Modified files:
	usr.bin/mandoc : eqn.c eqn_html.c eqn_term.c html.h libmandoc.h 
	                 libroff.h mandoc.h read.c roff.c roff.h 
	                 roff_int.h term.h tree.c 

Log message:
1. Eliminate struct eqn, instead use the existing members
of struct roff_node which is allocated for each equation anyway.
2. Do not keep a list of equation parsers, one parser is enough.
Minus fifty lines of code, no functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/08 09:26:27

Modified files:
	sbin/dhclient  : clparse.c 

Log message:
Always use strcasecmp() when comparing user input to option
names, not just 2 out of 3.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/08 09:28:05

Modified files:
	usr.bin/mandoc : roff.c 

Log message:
fix an assertion failure triggered by .ce in next-line scope;
found by jsg@ with afl(1)


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 09:39:11

Modified files:
	distrib/amd64/ramdisk_cd: Makefile 
	etc/etc.amd64  : disktab 

Log message:
Increase size to make slaacd fit.
Size problem noted by me, correct fix from deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 09:40:29

Modified files:
	distrib/arm64/ramdisk: list 
	distrib/armv7/ramdisk: list 
	distrib/miniroot: makeconf.awk 

Log message:
slaacd needs libevent on the ramdisk
move forward deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 09:41:25

Modified files:
	distrib/miniroot: group master.passwd 

Log message:
_slaacd user/group for installer
move forward deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 09:42:47

Modified files:
	distrib/alpha/bsd.rd: list.local 
	distrib/amd64/ramdisk_cd: list.local 
	distrib/arm64/ramdisk: list 
	distrib/armv7/ramdisk: list 
	distrib/hppa/ramdisk: list.local 
	distrib/i386/ramdisk_cd: list.local 
	distrib/landisk/ramdisk: list 
	distrib/loongson/ramdisk: list 
	distrib/luna88k/ramdisk: list 
	distrib/macppc/ramdisk: list 
	distrib/octeon/ramdisk: list 
	distrib/sgi/ramdisk: list 
	distrib/socppc/ramdisk: list 
	distrib/sparc64/ramdisk: list 
	distrib/special: Makefile 

Log message:
hook up slaacd to the installer on media where we have INET6


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 09:45:11

Modified files:
	distrib/miniroot: dot.profile 
	sys/netinet6   : nd6_rtr.c 

Log message:
Enable slaacd on the installer and temporarily neuter router
advertisement processing and solicitation sending like we already did
for the non-install kernels.

Next step will be to tedu all that code from the kernel.

OK rpe@ for the installer bits
move forward deraadt@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/08 10:09:17

Modified files:
	databases/py-whisper: Makefile distinfo 
	databases/py-whisper/pkg: PLIST 

Log message:
update to py-whisper-1.0.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/08 10:09:46

Modified files:
	databases/py-carbon: Makefile distinfo 
	databases/py-carbon/patches: patch-lib_carbon_conf_py 
	                             patch-setup_cfg patch-setup_py 
	databases/py-carbon/pkg: PLIST 

Log message:
update to py-carbon-1.0.1


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 10:21:51

Modified files:
	sbin/ping      : ping.c 

Log message:
Consistently use if (option & F_FOO); from Klemens Nanni, thanks!


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/08 10:22:29

Modified files:
	sbin/ping      : ping.c 

Log message:
Consistently use if ((option & F_FOO) && (option & F_BAR)) instead of
if (option & F_FOO && option & F_BAR).

Prompted by a reverse diff from Klemens Nanni. Both forms are
equivalent due to operator precedence, I consider the later to be
easier on the eyes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/08 11:21:12

Modified files:
	databases/citus: Makefile 

Log message:
Needs a BDEP on databases/postgresql,-server.
While here, properly indent the Makefile.
Remove databases/postgresql from MODULES, it's only needed for regression
tests which in this port are not even building properly.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/08 11:37:36

Modified files:
	sysutils/collectd: Makefile 
	sysutils/collectd/pkg: collectd.rc 

Log message:
Make the rc.d script match our style and remove obvious comment.
While here, remove the gettext MODULE.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/08 11:52:42

Modified files:
	usr.bin/mandoc : libmandoc.h libroff.h read.c roff.c roff_int.h 
	                 tbl.c tbl_data.c 

Log message:
Simplify by creating struct roff_node syntax tree nodes for tbl(7)
right from roff_parseln() rather than delegating to read.c,
similar to what i just did for eqn(7).

The interface function roff_span() becomes obsolete and is deleted,
the former interface function roff_addtbl() becomes static,
the interface functions tbl_read() and tbl_cdata() become void,
and minus twelve linus of code.

No functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 11:52:44

Modified files:
	share/man/man8 : ssl.8 

Log message:
spelling fix from Hiltjo Posthuma


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/07/08 12:32:54

Modified files:
	usr.bin/ssh    : ssh-keygen.1 

Log message:
slightly rework previous, to avoid an article issue;


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/08 13:36:58

Modified files:
	sys/dev/pci/drm: drm.h 

Log message:
Remove duplicate typedesf that are now provided by linux_types.h.


CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/07/08 14:17:30

Log message:
    Comment:
    games cataloging tool and emulator launcher
    
    Description:
    GR-lida is a software for cataloging games and a launcher for emulators. It
    includes support for plugins, additional artwork and manuals.
    
    Maintainer: Juan Francisco Cantero Hurtado <juanfra@openbsd.org>
    
    WWW: http://www.gr-lida.org/
    
    OK bcallah@
    
    Status:
    
    Vendor Tag:	juanfra
    Release Tags:	juanfra_20170708
    
    N ports/emulators/gr-lida/Makefile
    N ports/emulators/gr-lida/distinfo
    N ports/emulators/gr-lida/patches/patch-gr-lida_pro
    N ports/emulators/gr-lida/patches/patch-src_funciones_cpp
    N ports/emulators/gr-lida/pkg/DESCR
    N ports/emulators/gr-lida/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	juanfra@cvs.openbsd.org	2017/07/08 14:18:55

Modified files:
	emulators      : Makefile 

Log message:
+emulators/gr-lida


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/08 14:38:31

Modified files:
	sbin/dhclient  : clparse.c dhclient.c dhcpd.h options.c Makefile 

Log message:
Fold tables.c into options.c and stop exporting the one
table (dhcp_options) involved. Provide functions
code_to_name(), name_to_code(), code_to_format() and
replace direct access to dhcp_options with them. Eliminate
unneeded 'struct option'.

Unhook tables.c from Makefile.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/08 14:40:42

Modified files:
	distrib/special/dhclient: Makefile 

Log message:
Unhook tables.c from Makefile.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 15:45:35

Modified files:
	lib/libc/net   : inet_addr.3 inet_ntop.3 

Log message:
update the little endian processor list to give it a chance of matching
what the reader is using.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 16:01:09

Modified files:
	usr.bin/lock   : lock.c 

Log message:
can just continue after readpassphrase returns null, the sighandler will
have already printed a message.
from Scott Cheloha


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 16:07:39

Modified files:
	usr.bin/lock   : lock.c 

Log message:
instead of using time(), refer to getitimer to find out how long the
timeout is.
from Scott Cheloha


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 16:14:48

Modified files:
	usr.bin/lock   : lock.c 

Log message:
clean up some unused variables. also, making a variable global isn't the
best way to zero initialize it if that's all you need.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 16:19:23

Modified files:
	usr.bin/lock   : lock.c 

Log message:
use crypt_newhash to protect the password. from Scott Cheloha


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 16:22:04

Modified files:
	usr.bin/lock   : lock.c 

Log message:
remove ARGSUSED, from Scott Cheloha.
and while we're cleaning, switch __progname to getprogname.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/08 16:27:17

Modified files:
	usr.bin/lock   : lock.c 

Log message:
this program was infected with lint era casts. i think we're past that now.


CVSROOT:	/cvs
Module name:	src
Changes by:	pd@cvs.openbsd.org	2017/07/08 18:51:40

Modified files:
	usr.sbin/vmctl : main.c vmctl.c vmctl.h 
	usr.sbin/vmd   : control.c i8253.c i8253.h mc146818.c mc146818.h 
	                 vm.c vmd.c vmd.h vmm.c 

Log message:
vmd/vmctl: Add ability to pause / unpause vms

With help from Ashwin Agrawal

ok reyk@ mlarkin@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/07/09 01:39:36

Modified files:
	.              : 3RDPARTY 

Log message:
update


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/09 01:47:10

Modified files:
	mail/rspamd    : Makefile distinfo 

Log message:
Update to rspamd 1.6.2, from 'Akai'

See https://github.com/vstakhov/rspamd/releases/tag/1.6.2


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/09 02:33:11

Removed files:
	games/fortune/tools: Do_spell Do_troff Troff.mac Troff.sed 
	                     do_sort 

Log message:
Remove old junk. From Matthew Martin

ok bentley


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/09 02:35:22

ports/math/moo/patches

Update of /cvs/ports/math/moo/patches
In directory cvs.openbsd.org:/tmp/cvs-serv40189/patches

Log Message:
Directory /cvs/ports/math/moo/patches added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/09 02:41:47

Modified files:
	sbin/slaacd    : engine.c 

Log message:
If we lower the pltime for privacy addresses skew it by
ND6_PRIV_MAX_DESYNC_FACTOR like RFC 4941 tells us to.
Toss in a arc4random_uniform for good measure like the kernel always
did.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/09 03:00:56

Modified files:
	sbin/slaacd    : engine.c 

Log message:
Ignore prefixes with a pltime < ND6_PRIV_MAX_DESYNC_FACTOR seconds
(512 in our case) for privacy addresses as per RFC 4941.


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/07/09 03:46:47

Modified files:
	.              : innovations.html 

Log message:
fix doubled 'be'

From Klemens Nanni


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/09 04:03:05

Modified files:
	audio/exaile   : Makefile distinfo 
	audio/exaile/patches: patch-Makefile patch-xl_main_py 
	                      patch-xlgui___init___py 
	audio/exaile/pkg: PLIST 

Log message:
Bugfix and translation update to 3.4.5
Tarballs are now on GitHub.
Remove gettext module while here (replace with BDEP=gettext-tools)
Swap to my @openbsd.org email while here too.

ok landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/09 04:38:22

Modified files:
	geo/mapproxy   : Makefile distinfo 

Log message:
Update to mapproxy 1.10.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	czarkoff@cvs.openbsd.org	2017/07/09 05:01:57

Modified files:
	net            : Makefile 
	devel          : Makefile 
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 
Removed files:
	devel/libqtelegram-aseman-edition: Makefile distinfo 
	devel/libqtelegram-aseman-edition/pkg: DESCR PLIST 
	net/cutegram   : Makefile distinfo 
	net/cutegram/pkg: DESCR PLIST 

Log message:
remove net/cutegram and devel/libqtelegram-aseman-edition

Cutegram appears to be abandoned upstream in the middle of major refactoring.
Libqtelegram-aseman-edition was a subproject within cutegram, and without
cutegram itself is no longer useful in ports tree.

OK bcallah@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/09 06:38:47

Modified files:
	sbin/dhclient  : dhclient.c dhctoken.h kroute.c 

Log message:
Whitespace tweaks to assuage auto-indent.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 08:04:50

Modified files:
	sbin/wsconsctl : map_scan.l 
	share/mk       : bsd.dep.mk bsd.sys.mk 
	games/atc      : lex.l 
	usr.bin/m4     : Makefile 
	usr.bin/rdist  : Makefile client.c docmd.c rdist.c 
	usr.sbin/config: scan.l 

Log message:
have bsd.prog.mk/bsd.lib.mk generate .y -> .c/.h rules without intermediate
files. This fixes up parallel builds in the default case.
FreeBSD does something similar.

okay millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/09 08:05:37

Modified files:
	mail/smtp-vilter/patches: 
	                          patch-backend_vilter-attachment_Makefile 
	                          patch-backend_vilter-clamd_Makefile 
	                          patch-backend_vilter-icap_Makefile 
	                          patch-backend_vilter-regex_Makefile 
	                          patch-backend_vilter-spamd_Makefile 
	                          patch-bin_smtp-vilter_scan_l 
	sysutils/tabled/patches: patch-Makefile 
Added files:
	mail/smtp-vilter/patches: patch-backend_vilter-attachment_scan_l 
	                          patch-backend_vilter-clamd_scan_l 
	                          patch-backend_vilter-icap_scan_l 
	                          patch-backend_vilter-regex_scan_l 
	                          patch-backend_vilter-spamd_scan_l 
	                          patch-bin_smtp-vilter_Makefile 
	mail/ldapvacation/patches: patch-src_ldapvacation_Makefile 
	                           patch-src_ldapvacation_scan_l 
	mail/smsmail/patches: patch-src_Makefile patch-src_scan_l 
	sysutils/tabled/patches: patch-scan_l 
	math/moo/patches: patch-Makefile patch-scan_l 

Log message:
bring those 5 ports in line with src
okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 09:28:00

Modified files:
	usr.bin/make   : engine.c 

Log message:
there's no need to fork/exec to execute comments
okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 09:28:36

Modified files:
	gnu/usr.bin/clang/clang: Makefile 
	gnu/usr.bin/clang/clang-tblgen: Makefile 
	gnu/usr.bin/clang/include/clang/AST: Makefile 
	gnu/usr.bin/clang/include/clang/Basic: Makefile 
	gnu/usr.bin/clang/include/clang/Driver: Makefile 
	gnu/usr.bin/clang/include/clang/Parse: Makefile 
	gnu/usr.bin/clang/include/clang/Sema: Makefile 
	gnu/usr.bin/clang/include/clang/Serialization: Makefile 
	gnu/usr.bin/clang/include/clang/intrin: Makefile 
	gnu/usr.bin/clang/include/llvm/AArch64: Makefile 
	gnu/usr.bin/clang/include/llvm/ARM: Makefile 
	gnu/usr.bin/clang/include/llvm/Config: Makefile 
	gnu/usr.bin/clang/include/llvm/IR: Makefile 
	gnu/usr.bin/clang/include/llvm/Mips: Makefile 
	gnu/usr.bin/clang/include/llvm/PowerPC: Makefile 
	gnu/usr.bin/clang/include/llvm/Sparc: Makefile 
	gnu/usr.bin/clang/include/llvm/X86: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64AsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64AsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64CodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64Desc: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64Disassembler: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64Info: Makefile 
	gnu/usr.bin/clang/libLLVMAArch64Utils: Makefile 
	gnu/usr.bin/clang/libLLVMARMAsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMARMAsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMARMCodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMARMDesc: Makefile 
	gnu/usr.bin/clang/libLLVMARMDisassembler: Makefile 
	gnu/usr.bin/clang/libLLVMARMInfo: Makefile 
	gnu/usr.bin/clang/libLLVMAnalysis: Makefile 
	gnu/usr.bin/clang/libLLVMAsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMAsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMBitReader: Makefile 
	gnu/usr.bin/clang/libLLVMBitWriter: Makefile 
	gnu/usr.bin/clang/libLLVMCodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMCore: Makefile 
	gnu/usr.bin/clang/libLLVMCoroutines: Makefile 
	gnu/usr.bin/clang/libLLVMCoverage: Makefile 
	gnu/usr.bin/clang/libLLVMDebugInfoCodeView: Makefile 
	gnu/usr.bin/clang/libLLVMDebugInfoDWARF: Makefile 
	gnu/usr.bin/clang/libLLVMDebugInfoMSF: Makefile 
	gnu/usr.bin/clang/libLLVMDemangle: Makefile 
	gnu/usr.bin/clang/libLLVMGlobalISel: Makefile 
	gnu/usr.bin/clang/libLLVMIRReader: Makefile 
	gnu/usr.bin/clang/libLLVMInstCombine: Makefile 
	gnu/usr.bin/clang/libLLVMInstrumentation: Makefile 
	gnu/usr.bin/clang/libLLVMLTO: Makefile 
	gnu/usr.bin/clang/libLLVMLinker: Makefile 
	gnu/usr.bin/clang/libLLVMMC: Makefile 
	gnu/usr.bin/clang/libLLVMMCDisassembler: Makefile 
	gnu/usr.bin/clang/libLLVMMCParser: Makefile 
	gnu/usr.bin/clang/libLLVMMIRParser: Makefile 
	gnu/usr.bin/clang/libLLVMMipsAsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMMipsAsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMMipsCodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMMipsDesc: Makefile 
	gnu/usr.bin/clang/libLLVMMipsDisassembler: Makefile 
	gnu/usr.bin/clang/libLLVMMipsInfo: Makefile 
	gnu/usr.bin/clang/libLLVMObjCARCOpts: Makefile 
	gnu/usr.bin/clang/libLLVMObject: Makefile 
	gnu/usr.bin/clang/libLLVMOption: Makefile 
	gnu/usr.bin/clang/libLLVMPasses: Makefile 
	gnu/usr.bin/clang/libLLVMPowerPCAsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMPowerPCAsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMPowerPCCodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMPowerPCDesc: Makefile 
	gnu/usr.bin/clang/libLLVMPowerPCDisassembler: Makefile 
	gnu/usr.bin/clang/libLLVMPowerPCInfo: Makefile 
	gnu/usr.bin/clang/libLLVMProfileData: Makefile 
	gnu/usr.bin/clang/libLLVMScalarOpts: Makefile 
	gnu/usr.bin/clang/libLLVMSelectionDAG: Makefile 
	gnu/usr.bin/clang/libLLVMSparcAsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMSparcAsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMSparcCodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMSparcDesc: Makefile 
	gnu/usr.bin/clang/libLLVMSparcDisassembler: Makefile 
	gnu/usr.bin/clang/libLLVMSparcInfo: Makefile 
	gnu/usr.bin/clang/libLLVMSupport: Makefile 
	gnu/usr.bin/clang/libLLVMTableGen: Makefile 
	gnu/usr.bin/clang/libLLVMTarget: Makefile 
	gnu/usr.bin/clang/libLLVMTransformUtils: Makefile 
	gnu/usr.bin/clang/libLLVMVectorize: Makefile 
	gnu/usr.bin/clang/libLLVMX86AsmParser: Makefile 
	gnu/usr.bin/clang/libLLVMX86AsmPrinter: Makefile 
	gnu/usr.bin/clang/libLLVMX86CodeGen: Makefile 
	gnu/usr.bin/clang/libLLVMX86Desc: Makefile 
	gnu/usr.bin/clang/libLLVMX86Disassembler: Makefile 
	gnu/usr.bin/clang/libLLVMX86Info: Makefile 
	gnu/usr.bin/clang/libLLVMX86Utils: Makefile 
	gnu/usr.bin/clang/libLLVMipo: Makefile 
	gnu/usr.bin/clang/libclangAST: Makefile 
	gnu/usr.bin/clang/libclangAnalysis: Makefile 
	gnu/usr.bin/clang/libclangBasic: Makefile 
	gnu/usr.bin/clang/libclangCodeGen: Makefile 
	gnu/usr.bin/clang/libclangDriver: Makefile 
	gnu/usr.bin/clang/libclangEdit: Makefile 
	gnu/usr.bin/clang/libclangFrontend: Makefile 
	gnu/usr.bin/clang/libclangFrontendTool: Makefile 
	gnu/usr.bin/clang/libclangLex: Makefile 
	gnu/usr.bin/clang/libclangParse: Makefile 
	gnu/usr.bin/clang/libclangRewrite: Makefile 
	gnu/usr.bin/clang/libclangRewriteFrontend: Makefile 
	gnu/usr.bin/clang/libclangSema: Makefile 
	gnu/usr.bin/clang/libclangSerialization: Makefile 
	gnu/usr.bin/clang/liblldConfig: Makefile 
	gnu/usr.bin/clang/liblldCore: Makefile 
	gnu/usr.bin/clang/liblldELF: Makefile 
	gnu/usr.bin/clang/lld: Makefile 
	gnu/usr.bin/clang/llvm-tblgen: Makefile 

Log message:
zap empty depends/silence empty installs.
okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 09:29:52

Modified files:
	share/mk       : bsd.prog.mk 

Log message:
add support to compile several progs at once us
by using alternate setup
PROGS = a b c along with SRCS_a = ... , SRCS_b = ... , SRCS_c = ...

okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 09:32:09

Modified files:
	lib/libpcap    : Makefile scanner.l 

Log message:
use working boilerplate for yacc/lex instead of homemade rules.
okay millert@
(forgot the obvious scanner.l tweak in my diff)


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 11:17:46

Modified files:
	share/mk       : bsd.README 

Log message:
document more reality.
proper english usage and okay jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	jasper@cvs.openbsd.org	2017/07/09 12:18:38

Modified files:
	x11/i3lock     : Makefile distinfo 
	x11/i3lock/patches: patch-Makefile 
Removed files:
	x11/i3lock/patches: patch-i3lock_c patch-unlock_indicator_c 
	                    patch-unlock_indicator_h patch-xcb_c 

Log message:
update to i3lock-2.9.1 and remove all bsd_auth patches that have been merged upstream

from Kaashif Hymabaccus


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 12:28:44

Modified files:
	share/mk       : bsd.README 

Log message:
document PROGS, okay jmc@


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/09 12:33:22

Modified files:
	lang/gravity   : Makefile distinfo 
	lang/gravity/pkg: PLIST 

Log message:
Update to 0.2.8 -- upstream now produces tagged GitHub tarballs.
Condense the 2 pre-configure sed lines into 1.
Don't install yet another copy of the MIT license, at the request of aja@.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/09 12:45:27

Modified files:
	sbin/dhclient  : clparse.c dhcpd.h parse.c 

Log message:
Some parsing code cleanup: add parse_boolean(); pass literal format
chars to parse_decimal() instead of less obvious *fmt; refactor
to eliminate need for the 'alloc:' and 'bad_flag:' labels and the
invidious backwards goto's to them.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/09 13:19:58

Modified files:
	sbin/dhclient  : bpf.c conflex.c dhclient.c kroute.c options.c 
	                 packet.c parse.c 

Log message:
Be consistent. "return (e);" -> "return e;"


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/09 15:23:19

Modified files:
	bin/date       : Makefile 
	bin/expr       : Makefile 
	bin/test       : Makefile 
	sbin/atactl    : Makefile 
	sbin/bioctl    : Makefile 
	sbin/growfs    : Makefile 
	sbin/mount     : Makefile 
	sbin/mount_vnd : Makefile 
	sbin/scan_ffs  : Makefile 
	usr.bin/cap_mkdb: Makefile 
	usr.bin/encrypt: Makefile 
	usr.bin/fmt    : Makefile 
	usr.bin/gencat : Makefile 
	usr.bin/htpasswd: Makefile 
	usr.bin/keynote: Makefile 
	usr.bin/less/lesskey: Makefile 
	usr.bin/openssl: Makefile 
	usr.bin/pkill  : Makefile 
	usr.bin/tcpbench: Makefile 
	usr.bin/true   : Makefile 
	usr.bin/tsort  : Makefile 
	usr.bin/usbhidaction: Makefile 
	usr.bin/xinstall: Makefile 
	usr.bin/ypwhich: Makefile 

Log message:
remove redundant variable declarations in Makefiles, since those are
the default.

okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/09 15:29:19

Modified files:
	sbin/dhclient  : clparse.c 

Log message:
Be consistent. "return (e);" -> "return e;"


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/09 16:33:09

Modified files:
	usr.bin/tmux   : cmd-kill-session.c server-fn.c server.c 
	                 session.c tmux.h 

Log message:
Some extra logging to show why tmux might exit.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/09 16:43:07

Modified files:
	regress/usr.bin/pkg-config: Makefile 

Log message:
Make pkg-config regress tests pass:
- Allow to override PKG_CONFIG and check correct place in logfile.
- Replace "if ...; then false; fi" with a simple ! .
- Remove comments about failing test which do not fail.
- Adapt regress to changes in pkg-config rev 1.64 and 1.72 regarding
static and missing tests.
OK jasper@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/09 18:47:47

Modified files:
	sbin/dhclient  : bpf.c clparse.c conflex.c dhclient.c kroute.c 
	                 options.c packet.c parse.c 

Log message:
Use a modern spacious idiom on all function local variable
declarations.


CVSROOT:	/cvs
Module name:	src
Changes by:	mortimer@cvs.openbsd.org	2017/07/09 18:59:24

Modified files:
	sys/arch/amd64/amd64: codepatch.c 
	sys/arch/i386/i386: codepatch.c 

Log message:
Replace codepatch nopsleds with trapsleds.
ok sf@ mlarkin@
suggested by deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/10 00:38:07

Modified files:
	lib/libc/sys   : kqueue.2 

Log message:
replace Fifos with FIFOs.

ok jmc@ visa@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 01:02:56

Modified files:
	net/irssi      : Makefile distinfo 

Log message:
update to irssi-1.0.4, from viq (maintainer). security fixes;

CVE-2017-10965: NULL dereference when receiving messages with invalid
time stamps

CVE-2017-10966: use-after-free


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/10 01:10:29

Modified files:
	usr.bin/make   : varmodifiers.c 

Log message:
Also check for NUL termination at the first character of tstr in
the error path of VarModifiers_Apply().  This prevents a sporadic
crash in make's regress target t41.
OK espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/10 01:28:26

Modified files:
	distrib/syspatch: bsd.syspatch.mk 

Log message:
Set XSRCDIR to /usr/xenocara if it's not defined. Matches what
/usr/X11R6/share/mk/bsd.xorg.mk does.

ok robert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 01:38:04

Modified files:
	net/isc-bind   : Makefile distinfo 

Log message:
update to BIND-9.10.5-P3

9.10.5-P2 broke verification of TSIG signed TCP message sequences where
not all the messages contain TSIG records. These may be used in AXFR and
IXFR responses. [RT #45509]


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 01:38:05

Modified files:
	net/isc-bind   : Tag: OPENBSD_6_1 Makefile distinfo 
	net/isc-bind/patches: Tag: OPENBSD_6_1 patch-bin_dig_dig_c 
	                      patch-bin_dig_nslookup_c 
	                      patch-lib_isc_unix_net_c 
	                      patch-lib_isc_unix_socket_c 
	net/isc-bind/pkg: Tag: OPENBSD_6_1 PLIST 

Log message:
update to BIND-9.10.5-P3

9.10.5-P2 broke verification of TSIG signed TCP message sequences where
not all the messages contain TSIG records. These may be used in AXFR and
IXFR responses. [RT #45509]


CVSROOT:	/cvs
Module name:	ports
Changes by:	florian@cvs.openbsd.org	2017/07/10 01:42:13

Modified files:
	net/powerdns   : Makefile distinfo 

Log message:
update to 4.0.4
OK sthen


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/10 01:51:37

Modified files:
	share/mk       : bsd.README 

Log message:
Thinko. It's called BUILDAFTER
"noticed" by Ingo.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/10 01:59:00

Modified files:
	share/mk       : bsd.dep.mk 

Log message:
re-add unintentionally removed cleandir part that rm tags from the .CURDIR


CVSROOT:	/cvs
Module name:	www
Changes by:	pea@cvs.openbsd.org	2017/07/10 02:45:59

Modified files:
	build          : support.dat 
	.              : support.html 

Log message:
Add myself
ok sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	otto@cvs.openbsd.org	2017/07/10 03:44:16

Modified files:
	lib/libc/stdlib: malloc.c 

Log message:
one more instance of the previous commit; also initialize ->offset to a
definite value in the size == 0 case


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 04:17:27

Modified files:
	mail/neomutt   : Makefile distinfo 
	mail/neomutt/patches: patch-main_c patch-mutt_sasl_c 
	                      patch-mutt_sasl_h 
	mail/neomutt/pkg: PLIST 
Removed files:
	mail/neomutt/patches: patch-doc_Makefile_am 

Log message:
update to neomutt-20170707


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/10 04:34:51

Modified files:
	sysutils/psftools: Makefile distinfo 

Log message:
Update psftools to 1.0.10.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/10 05:18:48

Modified files:
	etc            : daily 

Log message:
Test if an acct file exists before trying to rename it.  This silences
false warnings in the frist three daily mails after process accounting
has been turned on.
from Raf Czlonka


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/10 05:25:44

Modified files:
	share/mk       : bsd.README 

Log message:
two minor tweaks and two minor fixes; OK espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/10 05:28:43

ports/x11/qt5/qtmultimedia/patches

Update of /cvs/ports/x11/qt5/qtmultimedia/patches
In directory cvs.openbsd.org:/tmp/cvs-serv31047/patches

Log Message:
Directory /cvs/ports/x11/qt5/qtmultimedia/patches added to the repository


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/07/10 07:36:58

Modified files:
	app/cwm        : kbfunc.c 

Log message:
Replace fgetln(3) with POSIX getline(3); inspired by brynet and Ingo.

feedback and ok brynet@


CVSROOT:	/cvs
Module name:	ports
Changes by:	uaa@cvs.openbsd.org	2017/07/10 07:47:41

Modified files:
	devel/openocd  : Makefile distinfo 
	devel/openocd/patches: patch-src_flash_mflash_c 
	devel/openocd/pkg: PLIST 

Log message:
update 0.9.0 -> 0.10.0

ok sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/10 08:07:40

Log message:
    Somehow I've missed this Qt5 module when preparing (not committed) 5.9.0
    update. Let put it in now, and make future 5.9.1 commit churn smaller.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170710
    
    N ports/x11/qt5/qtcharts/Makefile
    N ports/x11/qt5/qtcharts/distinfo
    N ports/x11/qt5/qtcharts/pkg/DESCR-main
    N ports/x11/qt5/qtcharts/pkg/PLIST-main
    N ports/x11/qt5/qtcharts/pkg/PLIST-qch
    N ports/x11/qt5/qtcharts/pkg/PLIST-examples
    N ports/x11/qt5/qtcharts/pkg/PLIST-docindex
    N ports/x11/qt5/qtcharts/pkg/PLIST-html
    N ports/x11/qt5/qtcharts/pkg/DESCR-examples
    N ports/x11/qt5/qtcharts/pkg/DESCR-docindex
    N ports/x11/qt5/qtcharts/pkg/DESCR-qch
    N ports/x11/qt5/qtcharts/pkg/DESCR-html
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/10 08:09:59

Modified files:
	usr.bin/ssh/scp: Makefile 
	usr.bin/ssh/sftp: Makefile 
	usr.bin/ssh/ssh-add: Makefile 
	usr.bin/ssh/ssh-agent: Makefile 
	usr.bin/ssh/ssh-keygen: Makefile 
	usr.bin/ssh/ssh-keyscan: Makefile 

Log message:
zap redundant Makefile variables.
okay djm@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/10 08:11:47

Modified files:
	sbin/dhclient  : dhclient.c kroute.c privsep.c privsep.h 

Log message:
Use ioctlfd/routefd sockets rather than rolling one's own
for resolving 'egress' and adding a route. Move creation
of main()'s ioctlfd up so it can be used for the
'egress' resolution.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/10 08:23:25

Modified files:
	graphics/pdfsandwich: Makefile 
	graphics/pdfsandwich/pkg: PLIST 

Log message:
Don't ship compressed man pages.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/10 08:44:05

Modified files:
	editors/TeXmacs: Makefile 
	editors/TeXmacs/pkg: PLIST 

Log message:
Don't ship compressed man pages.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/10 08:49:33

Modified files:
	x11/lumina     : Makefile distinfo 
	x11/lumina/patches: patch-src-qt5_OS-detect_pri 
	x11/lumina/pkg : PLIST 
Added files:
	x11/lumina/patches: 
	                    patch-src-qt5_desktop-utils_desktop-utils_pro 

Log message:
Update to lumina-1.3.0pl1.

from Bryan C. Everly (maintainer) with tweaks


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/07/10 09:42:46

Modified files:
	share/man/man5 : spamd.conf.5 

Log message:
Switch sample path for black/whitelist files from /var/mail (which is meant to
be for mailboxes) to /etc/mail. Fritjof Bornebusch reported that security(8)
complains about files in /var/mail and suggested a subdirectory, but /etc
seems a better idea all-round, and matches hier(7).  ok jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/10 10:17:51

Modified files:
	sys/arch/octeon/dev: octmmc.c 

Log message:
Keep refusing SDIO initialization. The driver cannot work properly
with SDIO because it does not handle card interrupts.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/10 10:31:29

Modified files:
	share/man/man4/man4.octeon: octmmc.4 

Log message:
Update BUGS.


CVSROOT:	/cvs
Module name:	ports
Changes by:	dcoppa@cvs.openbsd.org	2017/07/10 10:52:03

Modified files:
	www/tomcat/v6  : Makefile distinfo 
	www/tomcat/v6/pkg: PLIST-examples 
	www/tomcat/v7  : Makefile distinfo 
	www/tomcat/v7/pkg: PLIST-examples 
	www/tomcat/v8  : Makefile distinfo 
	www/tomcat/v8/pkg: PLIST-examples PLIST-main 

Log message:
Updates:

6.0.51 -> 6.0.53

7.0.76 -> 7.0.79

8.5.12 -> 8.5.16


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/10 11:13:24

Modified files:
	sbin/dhclient  : bpf.c dhclient.c dhcpd.h 

Log message:
Take some of the mystery out of who does what by
renaming "if_register_bpf()" to "get_bpf_sock()",
"if_register_send()" to "get_udp_sock()" and
"if_register_receive()" to "configure_bpf_sock()".

Pull back interface_info knowledge and just pass
the interface name, rdomain and bpf socket fd as
required.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 12:12:05

Modified files:
	security/opendnssec: Makefile distinfo 

Log message:
update to opendnssec-1.4.14, from maintainer Patrik Lundin


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/10 12:48:37

Modified files:
	regress/usr.bin/libtool: Makefile 

Log message:
The libtool regress used PROGS as a regular variable.  Rename it
to avoid the new special meaning in bsd.prog.mk.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/10 12:56:24

Modified files:
	regress/libexec/ld.so/initfirst/test1/prog1: Makefile 
	regress/sys/nfs: Makefile 

Log message:
ld.so and nfs regress were using PROGS variable before it was added
to bsd.prog.mk.  Remove local additions and use global rules.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 13:04:12

Modified files:
	shells/nsh     : Makefile 
	shells/nsh/pkg : PLIST 

Log message:
convert nsh's save.sh from a symlink to an @sample, such that it can be
modified or pointed to an alternative file (e.g. save-ro.sh instead of the
standard save-rw.sh) and have the changes stay intact after pkg_add -u.


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/10 13:52:09

Modified files:
	sbin/route     : Makefile 

Log message:
zap depend ghost.
add a comment explaining why keywords.h is in the source tree even though
it's exactly what keywords.sh generates, so that people don't try adding
the generating rule again.

okay millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/10 14:10:36

Modified files:
	shells/nsh     : Makefile 
Added files:
	shells/nsh/patches: patch-MANUAL 

Log message:
tweak nsh's MANUAL a bit, especially rc.local suggestions (/usr/local/bin isn't
in the default PATH, and the current example with tee hangs)


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/10 15:30:37

Modified files:
	bin/csh        : Makefile 
	games/hack     : Makefile 
	gnu/lib/libiberty: Makefile.bsd-wrapper 
	gnu/usr.bin/cc/cc1plus: Makefile 
	gnu/usr.bin/cc/cc_tools: Makefile 
	gnu/usr.bin/cc/libobjc: Makefile 
	lib/csu        : Makefile 
	lib/libcrypto  : Makefile 
	lib/libcurses  : Makefile 
	lib/libedit    : Makefile 
	sbin/isakmpd   : Makefile 
	sbin/wsconsctl : Makefile 
	usr.bin/awk    : Makefile 
	usr.bin/mklocale: Makefile 
	usr.sbin/rpc.lockd: Makefile 
	usr.sbin/rpc.statd: Makefile 
	usr.sbin/ypserv/ypserv: Makefile 

Log message:
remove misc. depend and yacc nits that no longer matter.
okay millert@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/10 15:37:26

Modified files:
	lib/libevent   : kqueue.c 

Log message:
if there are no changes for kevent, pass in NULL instead.
this has no effect except to make ktrace output prettier.
ok bluhm mpi


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/10 15:39:38

Modified files:
	share/man/man9 : style.9 

Log message:
prefer getprogname to the magic global __progname.
from Matthew Martin


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/10 16:48:00

Modified files:
	share/man/man7 : ports.7 

Log message:
Fix non-portable .Lk usage that results in complete garbage with groff
and looks better, but still not good with mandoc.
Issue pointed out by Jan Stary <hans at stare dot cz>.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/10 17:05:54

Modified files:
	devel/cmake    : Makefile 
Added files:
	devel/cmake/patches: patch-Modules_FindLibXml2_cmake 

Log message:
Use standard CMake idiom for Foo_INCLUDE_DIR/DIRS and Foo_LIBRARY/LIBRARIES
in FindLibXml2.cmake.

To be used by pgpointcloud port. See also the upstream merge request #1043:
https://gitlab.kitware.com/cmake/cmake/merge_requests/1043

okay dcoppa@, landry@


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/10 17:49:10

Modified files:
	sys/kern       : kern_malloc.c kern_malloc_debug.c 

Log message:
make malloc(9) mpsafe by using a mutex instead of splvm.

this is almost a straightforward change of spl ops with mutex ops,
except the accounting has been shuffled around. memory is counted
as used before an attempt to allocate it from uvm is made to prevent
overcommitting memory. this is modelled on how pools limit allocations.

the uvm bits have been eyeballed by kettenis@ who says they should be safe.
visa@ found some nits which have been fixed.

tested by chris@ and amit kulkarni
ok kettenis@ visa@ mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/10 18:25:19

Modified files:
	regress/sys/netinet/sendsrcaddr: Makefile runtest.c 

Log message:
Rewrite regress sendsrcaddr so that is uses UDP sockets on localhost,
does not try to connect to google and avoids BPF programming.


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/07/11 00:08:40

Modified files:
	usr.sbin/smtpd : parse.y smtpd.conf.5 

Log message:
Remove "listen secure" syntax from smtpd.conf. It's broken since a couple of
months and noone complained.

Users should replace existing "listen secure" directives with two separate
"tls" and "smtps" listeners. i.e. a line like

listen on $iface tls pki $pki

has to be replaced with

listen on $iface tls pki $pki
listen on $iface smtps pki $pki

Relaying syntax is not affected by this change.

suggested by eric
ok gilles


CVSROOT:	/cvs
Module name:	www
Changes by:	natano@cvs.openbsd.org	2017/07/11 00:21:20

Modified files:
	faq            : current.html 

Log message:
The "listen secure" syntax in smtpd.conf is gone. ok gilles


CVSROOT:	/cvs
Module name:	www
Changes by:	tb@cvs.openbsd.org	2017/07/11 02:16:10

Modified files:
	faq            : current.html 

Log message:
tweak previous:
fix date of entry, fix line to be modified and other minor nits


CVSROOT:	/cvs
Module name:	src
Changes by:	reyk@cvs.openbsd.org	2017/07/11 04:28:24

Modified files:
	usr.sbin/dhcpd : dhcp.c 

Log message:
Handle DHCPINFORM from clients behind a DHCP relay.

The dhcpinform() function has assumed that ciaddr matches the packet's
IP source address and didn't consider a relay, such as dhcrelay(8) -
indicated by giaddr, has forwarded the request.

Tested by landry@
OK krw@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/11 06:51:05

Modified files:
	sys/net        : if.c 
	sys/netinet6   : in6.c in6_ifattach.c in6_var.h nd6.c nd6.h 
	                 nd6_nbr.c nd6_rtr.c 

Log message:
Purging is at last at hand. Day of Doom is here. All that is evil
shall all be cleansed.

Remove sending of router solicitations and processing of router
advertisements from the kernel. It's handled by slaacd(8) these days.

Input & OK bluhm@, mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/11 07:00:59

Modified files:
	usr.sbin/relayd: relayd.conf.5 

Log message:
The config option is called "no splice", the parser rejects "nosplice".


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/11 07:14:59

Modified files:
	usr.bin/tee    : tee.c 

Log message:
Replace manual list with SLIST.
from Klemens Nanni


CVSROOT:	/cvs
Module name:	src
Changes by:	fcambus@cvs.openbsd.org	2017/07/11 08:32:16

Modified files:
	games/backgammon/backgammon: main.c 

Log message:
User count checks have been compiled out since 1998, get rid of them.

OK mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	espie@cvs.openbsd.org	2017/07/11 09:15:47

Modified files:
	gnu/usr.bin/gcc: Makefile.bsd-wrapper 

Log message:
protoize.1 isn't generated, so don't list it as a target, because it
fucks up make recognition of generated vs pre-existing file.

also zap .PATH.1   thingy that's no longer needed at all.


CVSROOT:	/cvs
Module name:	src
Changes by:	robert@cvs.openbsd.org	2017/07/11 12:16:48

Modified files:
	share/mk       : bsd.lib.mk 
	distrib/syspatch: bsd.syspatch.mk 

Log message:
use the previous syspatch's fake root for getting the link order
instead of using / where the libraries are re-ordered on reboot

ok aja@


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/11 12:50:19

Log message:
    Import pgpointcloud 1.1.0pre0 (snapshot from git master)
    
    LIDAR sensors quickly produce millions of points with large numbers of
    variables measured on each point. The challenge for a point cloud database
    extension is efficiently storing this data while allowing high fidelity access
    to the many variables stored.
    
    PostgreSQL Pointcloud deals with all this variability by using a "schema
    document" to describe the contents of any particular LIDAR point. Each point
    contains a number of dimensions, and each dimension can be of any data type,
    with scaling and/or offsets applied to move between the actual value and the
    value stored in the database. The schema document format used by PostgreSQL
    Pointcloud is the same one used by the [PDAL](http://pointcloud.org) library.
    
    Note that this needs cmake 3.7.2p3 to build.
    
    ok dcoppa@
    
    Status:
    
    Vendor Tag:	landry
    Release Tags:	landry_20170711
    
    N ports/geo/pgpointcloud/Makefile
    N ports/geo/pgpointcloud/distinfo
    N ports/geo/pgpointcloud/patches/patch-lib_sort_r_sort_r_h
    N ports/geo/pgpointcloud/patches/patch-CMakeLists_txt
    N ports/geo/pgpointcloud/pkg/PLIST
    N ports/geo/pgpointcloud/pkg/DESCR
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/11 12:50:52

Modified files:
	geo            : Makefile 

Log message:
+pgpointcloud


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/11 13:41:30

Modified files:
	usr.sbin/relayd: check_icmp.c 

Log message:
Correctly set ttl for IPv4 and IPv6.
Problem noted and fix from Kapetanakis Giannis, thanks!
Input & OK jca.


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 13:56:29

ports/security/qca/patches

Update of /cvs/ports/security/qca/patches
In directory cvs.openbsd.org:/tmp/cvs-serv93017/patches

Log Message:
Directory /cvs/ports/security/qca/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 13:59:22

ports/security/qoauth/patches

Update of /cvs/ports/security/qoauth/patches
In directory cvs.openbsd.org:/tmp/cvs-serv61622/patches

Log Message:
Directory /cvs/ports/security/qoauth/patches added to the repository


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:40:44

Modified files:
	security/qca   : Makefile distinfo 
Added files:
	security/qca/patches: patch-QcaConfig_cmake_in 
	security/qca/pkg: DESCR-gnupg DESCR-main DESCR-ossl PLIST-gnupg 
	                  PLIST-main PLIST-ossl 
Removed files:
	security/qca/pkg: DESCR PLIST 

Log message:
update qca to 2.1.3.

- Merge security/{qca-ossl,qca-gnupg,qca2} into qca
to solve the update process (hint from sthen@ thanks)
- Disable SSL2 and SSL3 by default!
- Many useful tweaks and advice from landry@. Many thanks!

This patch includes the last BUILD_PACKAGES:M* block tweak
from landry@

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:42:34

Modified files:
	audio/clementine: Makefile 
	geo/qgis       : Makefile 
	graphics/digikam-kde4: Makefile 
	net/konversation: Makefile 
	net/libktorrent: Makefile 
	net/psi        : Makefile 
	security/qoauth: Makefile 
	x11/kde4/kget  : Makefile 
	x11/kde4/kopete: Makefile 
	x11/kde4/ksirk : Makefile 
	x11/kde4/libs  : Makefile 
	x11/kde4/okteta: Makefile 
	x11/kde4/okular: Makefile 
	x11/kde4/plasma-addons: Makefile 
	x11/kde4/runtime: Makefile 
Added files:
	security/qoauth/patches: patch-src_src_pro 
	                         patch-tests_ft_interface_ft_interface_pro 
	                         patch-tests_ut_interface_ut_interface_pro 
Removed files:
	net/psi/patches: patch-configure 

Log message:
Bump all and adjust WANTLIB and patches after qca update
OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:45:11

Removed files:
	security/qca-gnupg: Makefile distinfo 
	security/qca-gnupg/files: conf.pri 
	security/qca-gnupg/pkg: DESCR PLIST 

Log message:
Remove security/qca-gnupg

merge into security/qca

OK sthen@, many tweaks from landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:46:49

Removed files:
	security/qca-ossl: Makefile distinfo 
	security/qca-ossl/files: conf.pri 
	security/qca-ossl/patches: patch-qca-ossl_cpp 
	security/qca-ossl/pkg: DESCR PLIST 

Log message:
Remove security/qca-ossl

merge into security/qca

OK sthen@, many tweaks from landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:48:18

Removed files:
	security/qca2  : Makefile distinfo 
	security/qca2/patches: patch-configure patch-crypto_prf_in 
	                       patch-qcm_qca_qcm 
	                       patch-src_botantools_botan_botan_secmem_h 
	                       patch-src_src_pro 
	security/qca2/pkg: DESCR PLIST 

Log message:
Remove security/qca2

merge into security/qca

OK sthen@, many tweaks from landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:49:17

Removed files:
	security/qca-tls: Makefile distinfo 
	security/qca-tls/patches: patch-configure patch-qca-tls_cpp 
	security/qca-tls/pkg: DESCR PLIST 

Log message:
Remove security/qca-tls

badly outdated and upstream dead

OK sthen@, many tweaks from landry@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:50:27

Modified files:
	security       : Makefile 

Log message:
unhook qca-tls qca-ossl qca-gnupg qca2


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/11 14:52:04

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
Register removal of qca-tls


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/11 16:17:28

Modified files:
	share/mk       : bsd.README 

Log message:
Move the section about <bsd.sys.mk> up just below <sys.mk> which it is
closely related to.  Delete the example involving PARALLEL, which no
longer exists.  Instead, add a different example involving yacc(1).
OK espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/11 17:04:43

Modified files:
	mail/dovecot   : Makefile distinfo 
	mail/dovecot/pkg: PLIST-server 

Log message:
update to dovecot-2.2.31, from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/11 17:05:05

Modified files:
	mail/dovecot-pigeonhole: Makefile distinfo 

Log message:
update to dovecot-pigeonhole-0.4.19, from Brad


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/11 17:10:11

Modified files:
	x11/kde4/ktouch: Makefile 

Log message:
Noone loves you, poor little KTouch. Noone, except KDE porting team.

... add missing run-time dependency. Initial report from rsadowski@.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/11 17:27:13

Modified files:
	usr.bin/signify: signify.c 

Log message:
fix style compliance, in the keyname compliance function no less


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/11 17:34:16

Modified files:
	devel/kf5      : Makefile.inc 

Log message:
Zap the line disabled a long time ago.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/11 17:38:53

Modified files:
	share/mk       : bsd.README 

Log message:
explain the limitations of PROGS; joint work with espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/11 17:52:05

Modified files:
	usr.bin/signify: zsig.c 

Log message:
adjust size to be one less than power of 2, so that doubling will never
roll to 0, but instead something very large, and thus fail in realloc


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/11 18:05:04

Modified files:
	devel/kf5      : kf5.port.mk 
	devel/kf5/baloo: Makefile 
	devel/kf5/baloo/pkg: PLIST 
	devel/kf5/bluez-qt: Makefile 
	devel/kf5/bluez-qt/pkg: PLIST 
	devel/kf5/kactivities: Makefile 
	devel/kf5/kactivities/pkg: PLIST 
	devel/kf5/kdeclarative: Makefile 
	devel/kf5/kdeclarative/pkg: PLIST 
	devel/kf5/knewstuff: Makefile 
	devel/kf5/knewstuff/pkg: PLIST 
	devel/kf5/kpeople: Makefile 
	devel/kf5/kpeople/pkg: PLIST 
	devel/kf5/krunner: Makefile 
	devel/kf5/krunner/pkg: PLIST 
	devel/kf5/plasma-framework: Makefile 
	devel/kf5/plasma-framework/pkg: PLIST 
	devel/kf5/solid: Makefile 
	devel/kf5/solid/pkg: PLIST 

Log message:
Change directory for QML files from ${PREFIX}/lib/qml/ to ${MODQT_LIBDIR}/qml.

This way QML-based KDE5 apps could pick up their dependencies automatically.

Based on discussion with rsadowski@ and czarkoff@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/07/11 18:05:05

Modified files:
	mail/offlineimap: Makefile distinfo 
	mail/offlineimap/patches: patch-offlineimap_conf 

Log message:
Update to offlineimap-7.1.2

From the announcement mail:
This release introduces better Davmail support, better reliability when
in IMAP/IMAP mode, better output on some errors, and minor fixes.

From Remi Locherer (maintainer)


CVSROOT:	/cvs
Module name:	src
Changes by:	mlarkin@cvs.openbsd.org	2017/07/11 23:32:50

Modified files:
	sys/arch/amd64/include: vmmvar.h 
	sys/arch/i386/include: vmmvar.h 

Log message:
Make max memory for VMs equal to MAXDSIZ to avoid failing later during
VM setup.

ok pd


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/07/11 23:44:33

Modified files:
	share/man/man4 : athn.4 otus.4 rsu.4 rtwn.4 uath.4 urtwn.4 

Log message:
Mark up firmware pathnames with Pa.

ok jmc@


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/12 00:09:03

Modified files:
	usr.sbin/rtadvd: if.c 

Log message:
Don't clobber errno, we want to log_warn what went wrong.
OK benno, millert


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/12 00:09:59

Modified files:
	usr.sbin/rtadvd: log.c log.h 

Log message:
Bring over fatal{,x} from bgpd so that we can have format strings.
OK benno


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/12 00:11:07

Modified files:
	usr.sbin/rtadvd: config.c if.c rtadvd.c 

Log message:
replace
log_warnx("foo");
exit(1);
with
fatalx("foo);
OK benno


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/12 00:11:45

Modified files:
	usr.sbin/rtadvd: if.c 

Log message:
errno is not set, use log_warnx
OK benno


CVSROOT:	/cvs
Module name:	src
Changes by:	natano@cvs.openbsd.org	2017/07/12 00:26:33

Modified files:
	sys/arch/amd64/amd64: machdep.c 
	sys/arch/amd64/include: cpu.h 
	sys/arch/arm/include: cpu.h 
	sys/arch/i386/i386: machdep.c 
	sys/arch/i386/include: cpu.h 
	sys/arch/loongson/loongson: machdep.c 
	sys/arch/mips64/include: cpu.h 

Log message:
remove CPU_LIDSUSPEND/machdep.lidsuspend

"fire away!" tedu


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/12 00:39:13

Modified files:
	sys/kern       : subr_pool.c 

Log message:
When there is no contention on a pool cache lock, lower the number
of items that a cache list is allowed to hold. This lets the cache
release resources back to the common pool after pressure on the cache
has decreased.

OK dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/12 01:46:01

Modified files:
	security/heimdal: Makefile distinfo 

Log message:
SECURITY update to heimdal-7.4.0.
CVE-2017-11103: Orpheus' Lyre KDC-REP service name validation


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/12 01:54:09

Modified files:
	sysutils/go-cs : Makefile distinfo 

Log message:
Update to go-cs-0.8.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/12 02:00:17

Modified files:
	sysutils/backuppc: Makefile distinfo 
Removed files:
	sysutils/backuppc/patches: patch-lib_BackupPC_Xfer_Smb_pm 

Log message:
Minor update to BackupPC 3.3.2, fixing issues with modern Perl
(unescaped left curly brace in BackupPC/Lib.pm:1228).

Samba 4.2-specific patch is no longer needed.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/12 02:05:13

Modified files:
	security/heimdal: Tag: OPENBSD_6_1 Makefile 
Added files:
	security/heimdal/patches: Tag: OPENBSD_6_1 
	                          patch-lib_krb5_ticket_c 

Log message:
Merge upstream fix for:
CVE-2017-11103: Orpheus' Lyre KDC-REP service name validation


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/12 02:51:42

Modified files:
	sys/kern       : subr_pool.c 

Log message:
Compute the level of contention only once.

Suggested by and OK dlg@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/12 03:02:28

Modified files:
	sysutils/firmware: Makefile Makefile.inc 
	sysutils/firmware/athn: Makefile 
	sysutils/firmware/rsu: Makefile 
	sysutils/firmware/ulpt: Makefile 

Log message:
- change some sysutils/firmware/* PERMIT_* from Yes to "firmware" - these
shouldn't end up in normal package mirrors. add a check to Makefile.inc so
this doesn't get added to others.

- add an extra printed warning at the end of ulpt "fake" stage; as pointed
out by stsp after discussion with bentley@ the license for this says "you
may not put the software onto any public network"


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/12 03:07:53

Modified files:
	usr.bin/tmux   : proc.c server-client.c server-fn.c tmux.h 

Log message:
proc_send_s now seems unnecessary.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/12 03:21:25

Modified files:
	usr.bin/tmux   : client.c tmux.c tmux.h 

Log message:
Make shell_command a global like other stuff rather than making it an
exception and using callback argument.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/12 03:24:17

Modified files:
	usr.bin/tmux   : Makefile client.c cmd-pipe-pane.c job.c proc.c 
	                 server.c tmux.h window.c 
Removed files:
	usr.bin/tmux   : signal.c 

Log message:
Move signal code into proc.c.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/12 03:25:47

Modified files:
	sys/kern       : uipc_syscalls.c 

Log message:
Do not call fo_ioctl() in syscall that do, or will, take the socket
lock.

Prevents a future lock recursion since soo_ioctl() will need to grab
the lock.

ok bluhm@, visa@


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/12 04:04:51

Modified files:
	usr.bin/tmux   : cmd-pipe-pane.c job.c server.c window.c 

Log message:
Block signals between forking and clearing signal handlers (or calling
event_reinit) - if the child gets a signal and fires the libevent signal
handler during this period it could write a signal into the parent's
signal pipe. GitHub issue 1001 from Aaron van Geffen.


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/12 04:56:47

Modified files:
	sys/sys        : socketvar.h 

Log message:
Kill 'rwlock' forward declaration, this should have been removed with
sbsleep().


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/12 05:13:22

Modified files:
	sys/kern       : vfs_bio.c 

Log message:
Invalidate read-ahead buffers when read short

Buffercache performs read-ahead for cluster reads by extending
the length of an original read operation to the MAXPHYS (64k).
Upon I/O completion, the length is trimmed and the buffer is
returned to the filesystem and the remaining data is cached.

However, under certain circumstances, the underlying hardware
may fail to do a complete I/O operation and return with a non-
zero value of the residual length (i.e. data that wasn't read).
The residual length may exceed the size of an original request
and must be re-adjusted to uphold the contract with the caller,
e.g. the filesystem. At the same time, read-ahead buffers that
cover chunks of memory corresponding to the residual length
must be invalidated and not cached.

Discussed at length during d2k17, ok tedu


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/12 05:36:22

Modified files:
	games/fortune/fortune: fortune.6 fortune.c 

Log message:
Inspect LC_CTYPE and if it isn't UTF-8, weed out bytes that are not
printable ASCII.  That makes using UTF-8 in fortune datfiles safe.
Potential usefulness of UTF-8 in fortune datfiles noticed by bentley@.
OK tedu@ millert@.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/12 06:35:31

Modified files:
	usr.bin/tmux   : proc.c 

Log message:
Do not need to set up USR2 twice.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/12 07:25:12

Modified files:
	sys/arch/octeon/dev: octciu.c 

Log message:
Reorganize separate configuration fields into per-CPU structs
to compact the data indexing. This additionally improves the cache
locality of the data.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/12 07:40:59

Modified files:
	sys/dev/ic     : wdc.c wdcvar.h 
	sys/dev/pci    : pciide.c 

Log message:
Introduce two quirks to prevent attaching ATA and ATAPI devices

Hyper-V and Xen have varying support for detaching emulated IDE
devices ranging from none on Hyper-V to only IDE disks but not
CDROM (Xen). The quirk mechanism provides a way of enforcing the
desired behavior.

With suggestions and OK kettenis, tedu, mlarkin


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/12 07:44:54

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Prefer paravirtualized interface for IDE disks as well


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/12 08:07:55

Modified files:
	sys/net        : pf_lb.c 

Log message:
Use a 32 bit variable to detect integer overflow when searching for
an unused nat port.  Prevents a possible endless loop if high port
is 65535 or low port is 0.
report and analysis Jingmin Zhou; OK sashan@ visa@


CVSROOT:	/cvs
Module name:	www
Changes by:	bcook@cvs.openbsd.org	2017/07/12 08:09:09

Modified files:
	libressl       : index.html releases.html 

Log message:
updates for 2.5.5, 2.6.0


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/12 08:25:36

Modified files:
	sys/dev/pci    : if_vic.c 

Log message:
Reshuffle vic_start and get rid of the dequeue begin/rollback/commit dance

Tested on ESXi 5.5.0, OK reyk


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/12 08:31:06

Modified files:
	usr.bin/tmux   : mode-tree.c window-tree.c 

Log message:
Line up keys in tree mode, and don't expand windows with one pane. From
Thomas Adam.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/12 08:36:57

Modified files:
	sys/dev/pci    : if_txp.c if_txpreg.h 

Log message:
Tweak txp to avoid ifq_deq_begin/commit/rollback

Setup the transmit ring the way FreeBSD driver does giving each
descriptor a 16 fragment chain and revamp the start routine to
use m_defrag for long chains and avoid the dequeue begin/commit/
rollback dance.

OK dlg


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/12 09:21:12

Modified files:
	regress/usr.sbin/pkg_add: Makefile 

Log message:
Disable failing pkg_add tests and document when they were added.
Targets are still executed, but are expected to fail.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/12 10:53:58

Modified files:
	sys/netinet    : icmp6.h 
	sys/netinet6   : icmp6.c nd6.c nd6.h 

Log message:
Get rid of ICMPV6CTL_ND6_DRLIST and ICMPV6CTL_ND6_PRLIST sysctls
With this we can also get rid of in6_prefix and in6_defrouter. They
are meaningless, the kernel no longer tracks this information.

Pointed out by & OK mpi


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/07/12 10:56:26

Modified files:
	app/cwm        : calmwm.h conf.c kbfunc.c 

Log message:
rename one function, matching others, to help upcoming change


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/12 10:56:48

Modified files:
	usr.sbin/ndp   : ndp.8 ndp.c 

Log message:
Remove defunct code, the kernel no longer provides
ICMPV6CTL_ND6_DRLIST and ICMPV6CTL_ND6_PRLIST sysctls since it no
longer tracks that information.

We can no longer flush or list the prefix list or the default router
list.

Pointed out by & OK mpi


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/12 11:02:27

Modified files:
	security/qca   : Makefile 
	security/qca/pkg: PLIST-main 

Log message:
Teach security/qca to use cert.pem from base.

OK sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/12 11:15:38

Modified files:
	security/qca   : Makefile 

Log message:
s/BASESYSCONFDIR/SYSCONFDIR/

"BASESYSCONFDIR is a user setting while /etc/ssl/cert.pem
is a fixed location."

hint from jca@


CVSROOT:	/cvs
Module name:	ports
Changes by:	gonzalo@cvs.openbsd.org	2017/07/12 11:30:46

Modified files:
	security/lynis : Makefile distinfo 
	security/lynis/pkg: PLIST 

Log message:
Update for Lynis to 2.5.2:

https://cisofy.com/changelog/lynis/2.5.2/

OK benoit@


CVSROOT:	/cvs
Module name:	ports
Changes by:	rsadowski@cvs.openbsd.org	2017/07/12 12:09:29

Modified files:
	security/qca   : Makefile 

Log message:
replace SYSCONFDIR with hardcoded "/etc/" for /etc/ssl/cert.pem.

Preferred solution by jca@ sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/07/12 13:29:54

Removed files:
	textproc/arabica/patches: 
	                          patch-include_SAX_helpers_AttributesImpl_hpp.orig 

Log message:
rm accidental leftover


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/12 13:55:29

Modified files:
	telephony/asterisk: Makefile distinfo 
	telephony/asterisk/patches: patch-Makefile 
	                            patch-build_tools_cflags_xml 
	                            patch-configure_ac 
	telephony/asterisk/pkg: PLIST-main 
Removed files:
	telephony/asterisk/patches: patch-main_libasteriskssl_c 
	                            patch-main_tcptls_c 

Log message:
update to asterisk-13.17.0


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	kettenis@cvs.openbsd.org	2017/07/12 14:08:07

Modified files:
	xserver/hw/xfree86/drivers/modesetting: drmmode_display.c 

Log message:
Add code to update the value of the RandR "Backlight" property based on the
KMS connector property of the same name if such a property is present.

ok matthieu@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/12 14:12:19

Modified files:
	sys/dev/pci/drm: drm_crtc.c drm_crtc.h drm_linux.c drm_linux.h 
	sys/dev/pci/drm/i915: i915_drv.c 

Log message:
Add a "Backlight" property to connectors with an associated backlight
controller for the inteldrm(4) driver.  If wscons(4) provides backlight
control, prefer ir over raw hardware control and attach it to LVDS, eDP
and DSI connectors which are the connector types typically connected to
laptop screens.


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/07/12 14:42:18

Modified files:
	audio/mpg123   : Makefile distinfo 

Log message:
update to 1.25.2: some bug fixes in libmpg123


CVSROOT:	/cvs
Module name:	ports
Changes by:	fcambus@cvs.openbsd.org	2017/07/12 15:11:47

Modified files:
	net/packetq    : Makefile distinfo 

Log message:
Update packetq to 1.4.0.

Thanks Jerry Lundstrom for the heads up.


CVSROOT:	/cvs
Module name:	src
Changes by:	sthen@cvs.openbsd.org	2017/07/12 16:52:54

Modified files:
	share/man/man5 : bsd.port.mk.5 

Log message:
consistently use "User settings" instead of a mixture of this and a
couple of "User-settings" in bsd.port.mk(5).  ok espie@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/12 16:56:22

Modified files:
	regress/sys/uvm/mmap_hint: mmap_hint.c 

Log message:
We cannot mmap(2) memory at VM_MAXUSER_ADDRESS as the full allocated
page must be below that address.  Subtract PAGE_SIZE from the hint
address, then regress passes.


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/07/12 16:57:40

Modified files:
	usr.sbin/relayd: check_icmp.c 

Log message:
Consistently use the variable "ttl" for get/setsockopt

ok benno@ on an earlier version, input from Kapetanakis Giannis


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/07/12 17:10:28

Modified files:
	usr.sbin/vipw  : vipw.c 

Log message:
Useless include

from Matthew Martin


CVSROOT:	/cvs
Module name:	ports
Changes by:	kili@cvs.openbsd.org	2017/07/12 17:13:08

Modified files:
	editors/ktikz  : Makefile 

Log message:
Use C++-11 to let it build with newer poppler.

ok pirofti@ (maintainer).


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/07/12 17:18:24

Modified files:
	usr.sbin/ypldap: entries.c 

Log message:
Log when we have finished pushing users and groups

Helps people testing new configurations.  From Kurt Mosiejczuk


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/12 17:46:30

Modified files:
	net/rrdtool    : Makefile 
	net/rrdtool/pkg: rrdcached.rc 

Log message:
When creating rrdcached's /var/run directory in rc_pre, set ownership to
${daemon_user} rather than hardcoded _rrdcached.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/12 18:29:14

Modified files:
	regress/sys/kern/siginfo-fault: Makefile siginfo-fault.c 

Log message:
Improve error messages of siginfo-fault regress to make clear which
tests fail.  First run all checks and report problmes, finally exit
with the total number of failures.  Unfortunately it still fails.


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/12 18:52:29

Modified files:
	net/samba      : Makefile 
Added files:
	net/samba/patches: patch-source4_heimdal_lib_krb5_ticket_c 

Log message:
SECURITY fix for CVE-2017-11103

CVE-2017-11103: Orpheus' Lyre mutual authentication validation bypass

The fix affects the embedded Heimdal copy.

https://github.com/heimdal/heimdal/commit/6dd3eb836bbb80a00ffced4ad57077a1cdf227ea
https://www.orpheus-lyre.info/
https://www.samba.org/samba/security/CVE-2017-11103.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/12 18:53:25

Modified files:
	net/samba      : Tag: OPENBSD_6_1 Makefile 
Added files:
	net/samba/patches: Tag: OPENBSD_6_1 
	                   patch-source4_heimdal_lib_krb5_ticket_c 

Log message:
SECURITY fix for CVE-2017-11103

CVE-2017-11103: Orpheus' Lyre mutual authentication validation bypass

The fix affects the embedded Heimdal copy.

https://github.com/heimdal/heimdal/commit/6dd3eb836bbb80a00ffced4ad57077a1cdf227ea
https://www.orpheus-lyre.info/
https://www.samba.org/samba/security/CVE-2017-11103.html


CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/07/12 19:29:40

Log message:
    Import py-monotonic, tweaks/ok jca@
    
    This module provides a monotonic() function which returns the value
    (in fractional seconds) of a clock which never goes backwards.
    
    On Python 3.3 or newer, monotonic will be an alias of time.monotonic
    from the standard library. On older versions, it will fall back to an
    equivalent implementation.
    
    Status:
    
    Vendor Tag:	danj
    Release Tags:	danj_20170712
    
    N ports/devel/py-monotonic/Makefile
    N ports/devel/py-monotonic/distinfo
    N ports/devel/py-monotonic/pkg/DESCR
    N ports/devel/py-monotonic/pkg/PLIST
    N ports/devel/py-monotonic/patches/patch-monotonic_py
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	danj@cvs.openbsd.org	2017/07/12 19:30:55

Modified files:
	devel          : Makefile 

Log message:
+ py-monotonic
+ py-monotonic,python3


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/07/12 20:05:14

Modified files:
	games/fortune  : Notes 
	games/fortune/datfiles: fortunes fortunes-o.real 

Log message:
Convert fortunes to UTF-8 from the old "backspace punctuation" method.

suggested by tedu, ok schwarze@ stsp@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/12 20:45:56

Modified files:
	games/fortune/datfiles: fortunes fortunes2 fortunes2-o limerick 

Log message:
Use an umlaut in Mobius and uppercase one instance of möbius visible in
bentley's previous commit.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/12 20:57:52

Modified files:
	games/grdc     : grdc.c 

Log message:
Convert fprintf(stderr, ...) to errx/warnx (with slight change of output).

From Scott Cheloha


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/12 23:37:53

Modified files:
	sys/arch/octeon/dev: octciu.c 

Log message:
Get cpuid from `ci' to avoid an extra function call.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/12 23:53:57

Modified files:
	sys/arch/octeon/dev: octciu.c 
	sys/arch/octeon/include: octeonreg.h 

Log message:
Add handling for the third interrupt summary vector,
needed by upcoming work.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/13 00:39:54

Modified files:
	usr.bin/time   : time.c 

Log message:
use monotonic clock for computing elapsed time
from Scott Cheloha. ok dlg.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:13:39

Modified files:
	x11/kde4/runtime: Makefile 

Log message:
Missed bump after the qca update.


CVSROOT:	/cvs
Module name:	ports
Changes by:	bcallah@cvs.openbsd.org	2017/07/13 01:36:05

Modified files:
	math/wcalc     : Makefile distinfo 
Removed files:
	math/wcalc/patches: patch-files_c patch-main_c 

Log message:
Update to 2.5 -- all the patches go way, tweak license marker
MAINTAINER timeout
ok rsadowski@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:36:39

Modified files:
	net/avahi      : Makefile distinfo 
	net/avahi/patches: patch-avahi-compat-libdns_sd_warn_c 
	net/avahi/pkg  : PLIST-main 
Added files:
	net/avahi/patches: patch-configure_ac 
Removed files:
	net/avahi/patches: patch-configure 

Log message:
Update to avahi-0.7.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:40:00

Modified files:
	graphics/py-cairo: Makefile distinfo 

Log message:
Update to py-cairo-1.14.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:43:17

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.81.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:43:28

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.118.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:48:11

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 
	sysutils/google-cloud-sdk/pkg: PLIST 

Log message:
Update to google-cloud-sdk-162.0.0.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 01:51:38

Modified files:
	sysutils/salt  : Makefile distinfo 
	sysutils/salt/pkg: PLIST 

Log message:
Update to salt-2017.7.0.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/07/13 02:10:50

Modified files:
	share/man/man4 : run.4 

Log message:
The 'Tenda W311M' USB wifi stick works with run(4).


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/07/13 02:29:36

Modified files:
	share/man/man1 : help.1 

Log message:
Missing trailing / in url

from Andras Farkas


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/13 02:40:06

Modified files:
	x11/mate/themes: Makefile distinfo 
	x11/mate/themes/pkg: PLIST 

Log message:
update to mate-themes-3.22.13


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/13 02:44:47

Modified files:
	x11/mate/control-center: Makefile distinfo 

Log message:
update to mate-control-center-1.18.2


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/13 02:46:46

Modified files:
	x11/mate/media : Makefile distinfo 

Log message:
update to mate-media-1.18.1


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/13 02:52:23

Modified files:
	x11/mate/panel : Makefile distinfo 
	x11/mate/panel/pkg: PLIST 

Log message:
update to mate-panel-1.18.3


CVSROOT:	/cvs
Module name:	ports
Changes by:	mestre@cvs.openbsd.org	2017/07/13 03:36:12

Modified files:
	net/mcabber    : Makefile distinfo 

Log message:
Update to mcabber-1.1.0

OK maintainer Markus Hennecke


CVSROOT:	/cvs
Module name:	ports
Changes by:	jca@cvs.openbsd.org	2017/07/13 04:35:30

Modified files:
	x11/gnome/photos: Makefile 

Log message:
BROKEN on powerpc

undefined reference to `__sync_add_and_fetch_8'


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/13 05:23:53

Modified files:
	sys/dev/pv     : hvs.c 

Log message:
Add a comment explaining why pciide(4) must skip attaching disks

Requested by kettenis@.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/13 05:24:58

Modified files:
	regress/sys/uvm/mmap_hint: Makefile mmap_hint.c 

Log message:
Round VM_MAXUSER_ADDRESS down to next page to make mmap_hint regress
pass on sparc64.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/13 05:28:02

Modified files:
	usr.sbin/ndp   : ndp.8 ndp.c 

Log message:
Simplify usage and man page synopsis after removal of prefix list and
default router flags.
Pointed out and diff from jcm@, OK me

While reviewing the diff I stumbled upon the H flag, which is now
useless, too. jmc suggested that I commit his diff and zap H at the
same time.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/13 05:43:55

Modified files:
	infrastructure/mk: bsd.port.mk compiler.port.mk 

Log message:
now that COMPILER works, we can have a simpler mechanism to figure out
the C++ library getting used in most cases.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/13 05:46:14

Modified files:
	databases/sqlports/files: TreeWalker.pm 

Log message:
backsubst COMPILER_LIBCXX there as well


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/13 05:58:14

Modified files:
	editors/calligra: Makefile 
	editors/calligra/pkg: PLIST 

Log message:
Unbreak (hopefully) Calligra after recent QML files placement change.
I could not build calligra right now, but at least things won't go worse.

Missed this among other KF5 stuff.

Inpired by mail from aja@ via rsadowski@.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/13 06:04:20

Modified files:
	share/mk       : bsd.README 

Log message:
add sys.mk to the table of contents, and make the description of
bsd.sys.mk more specific; wording with one tweak from espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 06:25:52

Modified files:
	graphics/evince: Makefile 
Added files:
	graphics/evince/patches: patch-backend_comics_comics-document_c 
	                         patch-configure 

Log message:
SECURITY fix for CVE-2017-1000083): Evince command injection vulnerability
in CBT handler (comics: Remove support for tar and tar-like commands).


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/13 06:50:50

Modified files:
	sys/arch/octeon/conf: GENERIC RAMDISK files.octeon 
Added files:
	sys/arch/octeon/dev: octcib.c 

Log message:
Add a driver for the CIB interrupt controller. Certain device
controllers need it on CN70xx/CN71xx.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/13 06:51:44

Modified files:
	graphics/evince: Tag: OPENBSD_6_1 Makefile 
Added files:
	graphics/evince/patches: Tag: OPENBSD_6_1 
	                         patch-backend_comics_comics-document_c 
	                         patch-configure 

Log message:
SECURITY fix for CVE-2017-1000083): Evince command injection vulnerability
in CBT handler (comics: Remove support for tar and tar-like commands).


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/13 06:54:50

Modified files:
	share/man/man4/man4.octeon: Makefile 
Added files:
	share/man/man4/man4.octeon: octcib.4 

Log message:
Add a manual page for octcib(4).


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/13 06:57:24

Modified files:
	distrib/sets/lists/man: mi 

Log message:
sync


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/13 07:24:03

Modified files:
	net            : Makefile 
	net/py-netaddr : Makefile 
	net/py-netaddr/pkg: DESCR PLIST 

Log message:
add py3 support to net/py-netaddr, drop hard ipython dependency (it's
only used for the interactive shell), enable tests.  ok abieber@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/13 07:31:45

Removed files:
	www/phantomjs/patches: patch-build_sh patch-src_phantomjs_pro 
	                       patch-src_qt_mkspecs_openbsd-g++_qmake_conf 
	                       patch-src_qt_preconfig_sh 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_heap_MachineStackMarker_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_jit_ExecutableAllocatorFixedVMPool_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_Atomics_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_NullPtr_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_JavaScriptCore_wtf_Platform_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_html_HTMLImageElement_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_Timer_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_Timer_h 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebCore_platform_network_qt_QNetworkReplyHandler_cpp 
	                       patch-src_qt_src_3rdparty_webkit_Source_WebKit_qt_WebCoreSupport_NotificationPresenterClientQt_cpp 
	                       patch-src_qt_src_corelib_arch_qatomic_i386_h 
	                       patch-src_qt_src_corelib_codecs_qiconvcodec_cpp 
	                       patch-src_qt_src_corelib_concurrent_qtconcurrentiteratekernel_cpp 
	                       patch-src_qt_src_corelib_global_qglobal_h 
	                       patch-src_qt_src_corelib_io_qfsfileengine_unix_cpp 
	                       patch-src_qt_src_corelib_kernel_qmetaobject_cpp 
	                       patch-src_qt_src_corelib_plugin_qlibrary_unix_cpp 
	                       patch-src_qt_src_corelib_statemachine_qabstractstate_p_h 
	                       patch-src_qt_src_corelib_tools_qiterator_h 
	                       patch-src_qt_src_gui_dialogs_qprintdialog_unix_cpp 
	                       patch-src_qt_src_gui_gui_pro 
	                       patch-src_qt_src_gui_image_qmnghandler_pri 
	                       patch-src_qt_src_gui_image_qnativeimage_cpp 
	                       patch-src_qt_src_gui_image_qpixmap_x11_cpp 
	                       patch-src_qt_src_gui_itemviews_qlistview_cpp 
	                       patch-src_qt_src_gui_kernel_qkeymapper_x11_cpp 
	                       patch-src_qt_src_gui_painting_qcosmeticstroker_cpp 
	                       patch-src_qt_src_gui_painting_qcosmeticstroker_p_h 
	                       patch-src_qt_src_gui_painting_qprinter_cpp 
	                       patch-src_qt_src_network_access_qhttpmultipart_cpp 

Log message:
remove phantomjs empty patches, spotted by espie. needs more work but this is a first step.


CVSROOT:	/cvs
Module name:	www
Changes by:	bcook@cvs.openbsd.org	2017/07/13 08:28:59

Modified files:
	build          : Makefile 

Log message:
bump openntpd 6.2p1


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/13 08:41:17

Modified files:
	share/man/man5 : pf.conf.5 

Log message:
* Clarify that filter rules are evaluated once per packet and interface,
not only once per packet.
* Clarify that the syntax   anchor "name" { ... }   both loads and
evaluates the anchor, rather than merely loading it.
Triggered by questions from Benedikt Neuffer <bene at usta dot de>.
OK mikeb@


CVSROOT:	/cvs
Module name:	src
Changes by:	mpi@cvs.openbsd.org	2017/07/13 08:54:25

Modified files:
	sys/net        : pipex.c 

Log message:
Set the ipl of pipex pools to IPL_SOFTNET.

Fix floor splassert reported by mlarkin@ and Marko Cupać.

ok dlg@, visa@, yasuoka@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/13 09:12:47

Modified files:
	usr.bin/mandoc : roff.c 

Log message:
eqn(7) .EQ has to break man(7) next-line scope, or tree corruption
and use after free many ensue; again found by jsg@ with afl(1)


CVSROOT:	/cvs
Module name:	www
Changes by:	bcook@cvs.openbsd.org	2017/07/13 09:14:18

Modified files:
	openntpd       : index.html portable.html 
Added files:
	openntpd/txt   : release-6.1p1.txt release-6.2p1.txt 

Log message:
bump for OpenNTPD 6.1 an 6.2


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/13 10:19:38

Modified files:
	sys/kern       : uipc_socket.c 

Log message:
Do not unlock the netlock in the goto out error path before it has
been acquired in sosend().  Fixes a kernel lock assertion panic.
OK visa@ mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/13 11:01:14

Modified files:
	shells/nsh     : Makefile 
Added files:
	shells/nsh/patches: patch-sysctl_c 

Log message:
IPV6CTL_MAXIFDEFROUTERS, IPV6CTL_MAXIFPREFIXES going away - patch nsh to cope.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/13 11:12:51

Modified files:
	usr.sbin/rebound: rebound.8 rebound.c 

Log message:
add an option to listen to an address other than localhost,
upgrading to a mini recursive resolver for small networks.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/13 11:17:27

Modified files:
	lib/libc/gen   : sysctl.3 
	sys/netinet6   : in6.h in6_proto.c ip6_var.h 

Log message:
Get rid of ip6.maxifprefixes and ip6.maxifdefrouters, the kernel no
longer tracks prefixes or default routers from router advertisements.
Pointed out by jmc.
ports tree grepping sthen, who only found nsh
OK mpi, sthen


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/07/13 11:44:36

Modified files:
	sys/dev/pci    : if_tl.c 

Log message:
Fix multicast reception: use unsigned chars to avoid accidental sign
extension in hash calculation.  Reported & diagnosed by Nick Briggs.
ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	naddy@cvs.openbsd.org	2017/07/13 11:45:00

Modified files:
	sys/dev/pci    : if_wb.c 

Log message:
kill a prototype for a nonexisting function; ok mpi@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sebastia@cvs.openbsd.org	2017/07/13 12:29:02

Modified files:
	sysutils/ruby-puppet-lint: Makefile distinfo 
	sysutils/ruby-puppet-lint/pkg: PLIST 

Log message:
update to 2.3.0


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/07/13 13:16:33

Modified files:
	usr.sbin/rpc.bootparamd: bootparams.5 
	share/man/man5 : changelist.5 defaultdomain.5 login.conf.5 
	                 myname.5 netgroup.5 spamd.conf.5 
	usr.bin/doas   : doas.conf.5 
	usr.sbin/npppd/npppd: npppd-users.5 
	usr.bin/ssh    : ssh_config.5 sshd_config.5 
	share/man/man8 : daily.8 rc.8 rc.shutdown.8 security.8 

Log message:
man pages with pseudo synopses which list filenames end up creating
very ugly output in man -k; after some discussion with ingo, we feel
the simplest fix is to remove such SYNOPSIS sections: the info is hardly
helpful at page top, is contained already in FILES, and there are
sufficiently few that just zapping them is simple;

ok schwarze, who also helpfully ran things through a build to check
output;


CVSROOT:	/cvs
Module name:	ports
Changes by:	naddy@cvs.openbsd.org	2017/07/13 13:31:14

Modified files:
	archivers/libarchive: Makefile distinfo 
	archivers/libarchive/patches: patch-configure 
Removed files:
	archivers/libarchive/patches: 
	                              patch-libarchive_archive_openssl_hmac_private_h 

Log message:
Maintenance update to 3.3.2.
libarchive no longer builds with lzo2 support.  This was already lost
accidentally in the previous update.


CVSROOT:	/cvs
Module name:	src
Changes by:	dtucker@cvs.openbsd.org	2017/07/13 21:18:21

Modified files:
	usr.bin/ssh    : clientloop.c 

Log message:
Make ""Killed by signal 1" LogLevel verbose so it's not shown at the default
level.  Prevents it from appearing during ssh -J and equivalent ProxyCommand
configs. bz#1906, bz#2744, feedback&ok markus@


CVSROOT:	/cvs
Module name:	ports
Changes by:	benoit@cvs.openbsd.org	2017/07/13 22:54:23

Modified files:
	devel/git      : Makefile distinfo 
	devel/git/patches: patch-t_t1450-fsck_sh 

Log message:
Update to git-2.13.3.


CVSROOT:	/cvs
Module name:	src
Changes by:	dlg@cvs.openbsd.org	2017/07/13 23:34:10

Modified files:
	sys/arch/alpha/alpha: locore0.S 

Log message:
fix GET_CURPCB on !MULTIPROCESSOR builds.

this lets GENERIC work as well as GENERIC.MP. it should also fix
bsd.rd. tested by me on an es45.

from a grumpy alpha user


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/14 01:42:51

Modified files:
	infrastructure/bin: portcheck 

Log message:
Catch QML-specific errors, inspired by recently discovered breakage.


CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/14 01:43:43

Log message:
    Test for Qt5 QML outside lib/qt5/qml.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170714
    
    N ports/tests/portcheck/t19/Makefile
    N ports/tests/portcheck/t19/distinfo
    N ports/tests/portcheck/t19/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/14 01:44:33

Log message:
    Test for missing x11/qt5/qtdeclarative dependency.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170714
    
    N ports/tests/portcheck/t20/Makefile
    N ports/tests/portcheck/t20/distinfo
    N ports/tests/portcheck/t20/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/14 01:44:55

Log message:
    Test for QML files with missing Qt dependency.
    
    Status:
    
    Vendor Tag:	zhuk
    Release Tags:	zhuk_20170714
    
    N ports/tests/portcheck/t21/Makefile
    N ports/tests/portcheck/t21/distinfo
    N ports/tests/portcheck/t21/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	zhuk@cvs.openbsd.org	2017/07/14 01:45:36

Modified files:
	tests/portcheck: Makefile 
Added files:
	tests/portcheck: t19.sample t20.sample t21.sample 

Log message:
Hook up QML-related tests.


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/14 02:04:23

Modified files:
	usr.bin/tmux   : proc.c server-client.c 

Log message:
Fix redraw defer code in the presence of multiple clients - the timer
may be needed for all of them, so don't delete it on the first; and
don't skip setting the redraw flag if the timer is already running.

Reported by Pol Van Aubel in GitHub issue 1003.


CVSROOT:	/cvs
Module name:	src
Changes by:	florian@cvs.openbsd.org	2017/07/14 03:29:40

Modified files:
	sbin/slaacd    : engine.c frontend.c slaacd.c 

Log message:
run IMSG_UPDATE_IF through the main process, reduces upcomming diff
for RFC 7217 support


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 03:43:37

Modified files:
	net/dhcpcd/pkg : README 
	net/dhcpcd     : Makefile 

Log message:
Adjust the sample DHCPv6-PD configuration in dhcpcd's pkg-readme following
earlier feedback from naddy, and a reminder about rtsol from Ross L Richardson.

- convert some description into comments in the sample config

- disable all hooks in DHCPv6-PD sample by overriding "script", they're
often not needed in this situation (and disabling hooks individually with
nohook leaves you open to the potential for new ones being added later)

- rtsol -> "inet6 autoconf"


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/14 04:40:31

src/regress/usr.sbin/ifstated

Update of /cvs/src/regress/usr.sbin/ifstated
In directory cvs.openbsd.org:/tmp/cvs-serv46020/ifstated

Log Message:
Directory /cvs/src/regress/usr.sbin/ifstated added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	benno@cvs.openbsd.org	2017/07/14 04:41:30

Added files:
	regress/usr.sbin/ifstated: Makefile ifstated statemachine 

Log message:
Add regression tests for ifstated.
Not hooked into regress/usr.sbin/Makefile yet.
From Rob Pierce <rob@2keys.ca>


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/14 05:18:04

Modified files:
	sys/dev/pci/drm: drm_dp_helper.c drm_dp_mst_topology.c 
	                 drm_linux.h 
	sys/dev/pci/drm/i915: intel_sdvo.c 
	sys/dev/pci/drm/radeon: atombios_i2c.c radeon_i2c.c 

Log message:
Add some more i2c glue to reduce the diffs to Linux.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 05:36:43

Modified files:
	x11/xscreensaver: Makefile 
	x11/xscreensaver/pkg: PLIST 

Log message:
Stop creating dot.desktop files; iirc it was needed during the GNOME 2
ages but is now useless and conflicts with mate-screensaver.

conflict reported by espie@


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	kettenis@cvs.openbsd.org	2017/07/14 05:38:05

Modified files:
	xserver/hw/xfree86/common: xf86pciBus.c 

Log message:
Use the modesetting driver by default on 4th generation Intel Graphics and
later.  This matches what several Linux distros do these days as it tends to
work better than the intel driver in most cases.

There are some performance issues with vncviewer on at least Ivy Bridge and
Haswell.  But for now that regression outweighs the benefits.

ok robert@, tedu@, sthen@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 05:43:51

Modified files:
	misc/osinfo/osinfo-db-tools: Makefile 

Log message:
Sync WANTLIB after libarchive lost lzo2.

reported by nigel@


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/14 06:20:32

Modified files:
	sys/arch/amd64/amd64: trap.c 
	sys/arch/i386/i386: trap.c 

Log message:
The regress test src/regress/sys/kern/siginfo-fault checks whether
the si_code is SEGV_ACCERR after memory access with wrong permissions
has triggert a SIGSEGV.  Adapt the behavior of i386 and amd64 kernel.
Remove the useless code that changed error from EACCES to EFAULT
in amd64.  Also convert variable name rv to errno in i386 to make
it look like amd64.
OK kettenis@


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 06:34:14

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.82.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 06:34:25

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.119.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 06:41:58

Modified files:
	sysutils/amazon-ecs-cli: Makefile distinfo 

Log message:
Update to ecs-cli-0.6.1.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/14 07:08:41

Modified files:
	sbin/dhclient  : dispatch.c 

Log message:
bpf(4) *may* deliver more than one captured packet at a time. So when
the bpf socket signals that it has data, call packethandler() in a
loop until no more bpf packets are available.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 07:24:19

Modified files:
	security/libsodium: Makefile distinfo 
Removed files:
	security/libsodium/patches: patch-src_libsodium_Makefile_in 

Log message:
update to libsodium-1.0.13


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/14 07:31:44

Modified files:
	regress/usr.sbin/httpd/tests: LICENSE Makefile 
	                              args-get-1048576.pl 
	                              args-get-1073741824.pl 
	                              args-get-512.pl 
	                              args-get-range-512.pl 
	                              args-get-range-multipart.pl 
	                              args-get-slash.pl 
	                              args-tls-get-range-512.pl 
	                              args-tls-get-range-multipart.pl 
	                              funcs.pl 

Log message:
Do not mix Perl read() with sysread().  Data could get stuck in the
buffered IO and test run-regress-args-get-1073741824.pl would fail
on slow hardware.  Introduce a common function read_part() that
uses Perl read().  Limit debug output to one line per 1% of data.
Remove unused function http_server().  Fix whitespace.  Cleanup
Makefile.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 07:32:27

Modified files:
	usr.bin/mandoc : eqn_html.c 

Log message:
do not print <math class="eqn"><mrow></mrow></math> for empty .EQ;
issue reported by bentley@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/14 07:47:09

Modified files:
	sbin/dhclient  : dhclient.c 

Log message:
Pour the few relevant bits of the current lease and the offered
renewal lease into canonical forms and compare those rather than the
leases themselves. Eliminates spurious interface and route
manipulation when irrelevant aspects of the leases are changed by the
DHCP server.

Problem found by Paul de Weerd when his DHCP server returned
renewed leases differing only by a decremented dhcp-lease-time option.

ok mpi@


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/14 08:03:15

Modified files:
	sbin/dhclient  : clparse.c dhclient.c kroute.c options.c parse.c 

Log message:
Replace remaining "!<pointer>" expressions with
"<pointer> == NULL". And of course "<pointer>"
expressions with "<pointer> != NULL".


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 08:36:40

Modified files:
	multimedia/gstreamer1: Makefile.inc 
	multimedia/gstreamer1/core: Makefile distinfo 
	multimedia/gstreamer1/plugins-bad: Makefile distinfo 
	multimedia/gstreamer1/plugins-base: Makefile distinfo 
	multimedia/gstreamer1/plugins-good: distinfo 
	multimedia/gstreamer1/plugins-libav: distinfo 
	multimedia/gstreamer1/plugins-ugly: distinfo 
	multimedia/gstreamer1/py-gstreamer: distinfo 

Log message:
Update the gstreamer1 gang to version 1.12.2.


CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2017/07/14 08:41:03

Modified files:
	regress/usr.sbin/relayd: LICENSE args-http-filter-null-host.pl 
	                         args-http-host3.pl 
	                         args-http-slow-consumer.pl funcs.pl 

Log message:
Do not mix Perl read() with sysread().  Data could get stuck in the
buffered IO and test run-regress-args-http-chunked.pl would fail
on slow hardware.  Limit debug output to one line per 1% of data.
Improve function write_syswrite().  Sync with httpd regress.  Fix
whitespace.


CVSROOT:	/cvs
Module name:	ports
Changes by:	giovanni@cvs.openbsd.org	2017/07/14 09:01:09

Modified files:
	security/cyrus-sasl2: Makefile 
Added files:
	security/cyrus-sasl2/patches: patch-lib_checkpw_c 

Log message:
fix interoperability between cyrus-sasl and courier-authdaemond
committed upstream
ok aja@


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/07/14 09:26:14

Modified files:
	usr.bin/mandoc : html.c 

Log message:
Print HTML character references as 4+ digits hexadecimal, like Unicode.

tweaks + ok schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 09:50:38

Modified files:
	regress/usr.bin/mandoc/char/unicode: invalid.out_html 
	                                     latin1.out_html 
	                                     latin1diff.out_html 
	                                     named.out_html 
	                                     namediff.out_html 
	                                     nogroff.out_html 
	regress/usr.bin/mandoc/eqn/fromto: basic.out_html 
	regress/usr.bin/mandoc/eqn/nullary: roman.out_html 
	                                    symbol.out_html 
	regress/usr.bin/mandoc/eqn/subsup: precedence.out_html 
	regress/usr.bin/mandoc/eqn/unary: diacrit.out_html 

Log message:
adapt to hex format of character entities,
committed by bentley@ in html.c rev. 1.86


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 10:05:52

Modified files:
	usr.bin/mandoc : html.c mandoc.css mdoc_html.c 

Log message:
Handle .Bl -compact via CSS rather than writing individual style
attributes into .It blocks; suggested by Steffen Nurpmeso <steffen
at sdaoden dot eu> on <groff at GNU dot org> in April 2017.

Delete margin-bottom and margin-top style names and the 'v' argument
letter from print_otag() because they are no longer used.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:09:22

Added files:
	net/py-smbc    : Makefile distinfo 
	net/py-smbc/pkg: DESCR PLIST 

Log message:
Resurrect and update to py-smbc-1.0.15.7. Needed by the upcoming
resurrection of py-cups and system-config-printer.
Add a python3 FLAVOR.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:10:10

Modified files:
	net            : Makefile 

Log message:
+py-smbc
+py-smbc,python3


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:11:14

Added files:
	print/py-cups  : Makefile distinfo 
	print/py-cups/patches: patch-setup_py 
	print/py-cups/pkg: DESCR PLIST 

Log message:
Resurrect and update to py-cups-1.9.73. Add a python3 FLAVOR.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:12:00

Added files:
	print/system-config-printer: Makefile distinfo 
	print/system-config-printer/patches: patch-Makefile_am 
	                                     patch-cupshelpers_cupshelpers_py 
	                                     patch-firewallsettings_py 
	                                     patch-jobviewer_py 
	print/system-config-printer/pkg: DESCR PLIST 

Log message:
Resurrect and update to system-config-printer-1.5.9.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:12:54

Modified files:
	print          : Makefile 

Log message:
+py-cups
+py-cups,python3
+system-config-printer


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:13:41

Modified files:
	x11/gnome/control-center: Makefile 

Log message:
Needs print/system-config-printer to interact with CUPS.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/14 10:15:07

Modified files:
	devel/quirks   : Makefile 
	devel/quirks/files: Quirks.pm 

Log message:
py-cups and system-config-printer are back.


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/14 10:21:03

Modified files:
	sbin/dhclient  : bpf.c clparse.c conflex.c dhclient.c dispatch.c 
	                 kroute.c options.c packet.c parse.c privsep.c 

Log message:
Replace remaining "!var" expressions with
"<var> == 0", "!(<var> & FLAG)" with
"(<var> & FLAG) == 0", "!<func()>"
with "<func()> == 0" and "!<define>" with
"<define> == 0". And the positive cases
as well.

A few stray == NULL and != NULL as well.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 10:28:35

Modified files:
	usr.bin/mandoc : html.c 

Log message:
Fix an assertion failure triggered by print_otag("sw+-l", NULL).
Even though we skip the style when the argument is NULL,
we must still consume the options.
Not found with afl(1), but during manual testing of the previous patch...


CVSROOT:	/cvs
Module name:	src
Changes by:	krw@cvs.openbsd.org	2017/07/14 10:35:59

Modified files:
	sbin/dhclient  : bpf.c 

Log message:
"ioctl() < 0" ==> "ioctl() == -1" as god and guenther@
intended.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 10:49:16

Modified files:
	usr.bin/mandoc : roff.c 

Log message:
Explicitly initialize a variable where the compiler is (understandably)
unable to figure out that it is never used uninitialized.
While here, tweak the content of the variable to make its usage
easier to understand.  No functional change.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/14 10:50:41

Modified files:
	sys/net        : pfkeyv2_parsemessage.c 
	sys/netinet    : ip_var.h 

Log message:
kernels don't build without MROUTING because ip_var.h only sometimes
introduces a forward decl for socket. turns out the affected file doesn't
need ip_var.h, so remove it. then move the decl to the bottom to prevent
the problem from recurring.
bug report by Nick Briggs
ok mpi


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 11:04:12

Modified files:
	www/apache-httpd: Makefile distinfo 
	www/apache-httpd/patches: patch-configure patch-docs_man_httpd_8 
	www/apache-httpd/pkg: PLIST-main 
Added files:
	www/apache-httpd/patches: patch-modules_ssl_mod_ssl_c 
	                          patch-modules_ssl_ssl_engine_init_c 
	                          patch-modules_ssl_ssl_engine_io_c 
	                          patch-modules_ssl_ssl_engine_kernel_c 
	                          patch-modules_ssl_ssl_engine_vars_c 
	                          patch-modules_ssl_ssl_private_h 
	                          patch-modules_ssl_ssl_util_ssl_h 

Log message:
security update to apache-httpd-2.4.26, from David CARLIER with minor tweaks from me
(2.4.27 to follow)


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 11:06:51

Modified files:
	www/apache-httpd: Makefile 

Log message:
oops, reinstate a line i dropped by mistake


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 11:10:46

Added files:
	www/apache-httpd/patches: patch-support_ab_c 

Log message:
additional patch for ab with earlier libressl (SSL_CTX_set_*_proto_version),
not needed for -current, but easier to keep in sync for -stable if it's here


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 11:14:03

Modified files:
	devel/llvm     : Makefile distinfo 
	devel/llvm/patches: patch-tools_clang_lib_Basic_Targets_cpp 
	                    patch-tools_clang_lib_Driver_ToolChains_cpp 
	                    patch-tools_clang_lib_Driver_Tools_cpp 
	                    patch-tools_lld_ELF_DriverUtils_cpp 
	                    patch-tools_lld_ELF_Driver_cpp 
	lang/clang     : clang.port.mk 
Added files:
	devel/llvm/patches: patch-lib_MC_MCAsmInfoELF_cpp 
	                    patch-lib_MC_MCELFStreamer_cpp 
	                    patch-lib_Target_Sparc_SparcFrameLowering_cpp 
	                    patch-lib_Target_X86_MCTargetDesc_X86AsmBackend_cpp 
	                    patch-tools_clang_include_clang_Basic_DiagnosticGroups_td 
Removed files:
	devel/llvm/patches: patch-lib_Support_Triple_cpp 
	                    patch-tools_lld_ELF_Config_h 
	                    patch-tools_lld_ELF_SyntheticSections_cpp 

Log message:
update to LLVM-4.0.1, from Brad (maintainer)
been through i386 and amd64 bulks


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 11:14:33

Modified files:
	www/apache-httpd: Makefile distinfo 

Log message:
update to httpd-2.4.27


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 11:16:13

Modified files:
	usr.bin/mandoc : roff.c 

Log message:
The .Dd and .TH macros must interrupt .ce, too;
fixing tree corruption and assertion failure found by jsg@ with afl(1)


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/07/14 11:23:38

Modified files:
	app/cwm        : Makefile calmwm.h conf.c kbfunc.c 
Removed files:
	app/cwm        : mousefunc.c 

Log message:
Pull over the remaining re-implemented window move/resize functions and create
a wrapper so that the key and mouse based move/resize callbacks can be unified.
This has already been done with other window operations and menus.


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	okan@cvs.openbsd.org	2017/07/14 12:01:46

Modified files:
	app/cwm        : kbfunc.c 

Log message:
remove extra parentheses


CVSROOT:	/cvs
Module name:	ports
Changes by:	bluhm@cvs.openbsd.org	2017/07/14 12:12:05

Modified files:
	textproc/libxml: Makefile 
	textproc/libxml/patches: patch-parser_c patch-valid_c 
Added files:
	textproc/libxml/patches: patch-nanohttp_c 

Log message:
Fix libxml2 CVE-2017-7375, CVE-2017-7376, CVE-2017-9663.
From Matthias Pitzl; OK danj@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/14 12:18:05

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
always give commas their own <mo> element,
suggested by bentley@, improves e.g. glMultMatrix(3)


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/14 12:24:51

Modified files:
	sys/dev/pv     : if_xnf.c 

Log message:
Support out-of-order TX completion notifications

Apparently, just like the disk interface, the network backend may
post TX completions out-of-order, i.e. the ring position doesn't
determine which descriptor is being completed and the code must
look at the response id inside the completion message.  It might
seem obvious, but since networking hardware doesn't usually work
this way, it was something that has been overlooked.

Based on instability reports from Kirill Miazine <km at krot ! org>,
thanks!


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 12:31:32

Modified files:
	www/apache-httpd: Tag: OPENBSD_6_1 Makefile distinfo 
	www/apache-httpd/patches: Tag: OPENBSD_6_1 patch-configure 
	                          patch-docs_man_httpd_8 
	www/apache-httpd/pkg: Tag: OPENBSD_6_1 PLIST-main 

Log message:
MFC security update to Apache httpd-2.4.27

fixed in 2.4.26:

ap_get_basic_auth_pw() Authentication Bypass CVE-2017-3167
mod_ssl Null Pointer Dereference CVE-2017-3169
mod_http2 Null Pointer Dereference CVE-2017-7659
ap_find_token() Buffer Overread CVE-2017-7668
mod_mime Buffer Overread CVE-2017-7679

fixed in 2.4.27:

Read after free in mod_http2 CVE-2017-9789
Uninitialized memory reflection in mod_auth_digest CVE-2017-9788


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 12:32:13

Added files:
	www/apache-httpd/patches: Tag: OPENBSD_6_1 
	                          patch-modules_ssl_mod_ssl_c 
	                          patch-modules_ssl_ssl_engine_init_c 
	                          patch-modules_ssl_ssl_engine_io_c 
	                          patch-modules_ssl_ssl_engine_kernel_c 
	                          patch-modules_ssl_ssl_engine_vars_c 
	                          patch-modules_ssl_ssl_private_h 
	                          patch-modules_ssl_ssl_util_ssl_h 
	                          patch-support_ab_c 

Log message:
MFC security update to Apache httpd-2.4.27

fixed in 2.4.26:

ap_get_basic_auth_pw() Authentication Bypass CVE-2017-3167
mod_ssl Null Pointer Dereference CVE-2017-3169
mod_http2 Null Pointer Dereference CVE-2017-7659
ap_find_token() Buffer Overread CVE-2017-7668
mod_mime Buffer Overread CVE-2017-7679

fixed in 2.4.27:

Read after free in mod_http2 CVE-2017-9789
Uninitialized memory reflection in mod_auth_digest CVE-2017-9788


CVSROOT:	/cvs
Module name:	src
Changes by:	nicm@cvs.openbsd.org	2017/07/14 12:49:07

Modified files:
	usr.bin/tmux   : client.c cmd-pipe-pane.c job.c proc.c server.c 
	                 tmux.h window.c 

Log message:
Because ignore SIGCHLD early, letting signal_del restore it doesn't work
correctly, so set it explicitly back to default (and the others for good
measure).


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/14 13:09:52

Modified files:
	sys/dev/pv     : xen.c xenvar.h 

Log message:
Silence the interrupt source until the interrupt task has done its job

This small change significantly improves performance under load and halves
the number of received interrupts.


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/14 14:08:46

Modified files:
	sys/dev/pv     : xen.c 

Log message:
Reduce the number of CAS loops from ludicrous to ridiculous

Now that the source of the delay with releasing grant table entries has
been identified and fixed the number of attempts to CAS entry flags can
be substantially reduced and while it's decreased by a factor of 100000,
it should go down at least a 100 more in the future.


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/14 14:39:29

Modified files:
	www/chromium   : Makefile 
Added files:
	www/chromium/patches: patch-chrome_browser_ui_libgtkui_gtk_ui_cc 

Log message:
Backport a fix from chromium git so that DPI settings are honored.

https://bugs.chromium.org/p/chromium/issues/detail?id=732440
https://chromium.googlesource.com/chromium/src/+/b50cab37a165f1f11d9a046d7f3367e4a563a73f


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/07/14 14:51:17

Modified files:
	usr.bin/newsyslog: newsyslog.c 

Log message:
TAILQs instead of hand-rolled lists

ok millert@


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 15:16:20

Modified files:
	mail/neomutt   : Makefile distinfo 

Log message:
update to neomutt-20170714


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 15:43:22

Modified files:
	sysutils/bacula: Makefile distinfo 

Log message:
update to bacula-9.0.1


CVSROOT:	/cvs
Module name:	src
Changes by:	mikeb@cvs.openbsd.org	2017/07/14 15:53:34

Modified files:
	sys/dev/pv     : xen.c 

Log message:
Spacing


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/14 16:15:31

Modified files:
	www/phantomjs  : Makefile 
	www/phantomjs/patches: patch-src_qt_qtbase_configure 
	                       patch-src_qt_qtbase_mkspecs_openbsd-g++_qmake_conf 
Added files:
	www/phantomjs/patches: 
	                       patch-src_qt_qtbase_mkspecs_openbsd-clang_qmake_conf 
	                       patch-src_qt_qtbase_mkspecs_openbsd-clang_qplatformdefs_h 
	                       patch-src_qt_qtbase_src_corelib_plugin_qlibrary_unix_cpp 

Log message:
reinstate shared library suffix diff from before the phantomjs update.

create a separate configuration for openbsd-clang, similar to what's done
in qt5/qtbase. it doesn't build yet there though, there's a problem early on
when it detects STL..


CVSROOT:	/cvs
Module name:	src
Changes by:	jca@cvs.openbsd.org	2017/07/14 16:17:16

Modified files:
	usr.bin/newsyslog: newsyslog.c 

Log message:
Don't bother freeing memory just before exiting.

Suggested by & ok bluhm@


CVSROOT:	/cvs
Module name:	src
Changes by:	pd@cvs.openbsd.org	2017/07/14 23:05:36

Modified files:
	usr.sbin/vmctl : Makefile main.c vmctl.8 vmctl.c vmctl.h 
	usr.sbin/vmd   : config.c control.c ns8250.c vm.c vmd.c vmd.h 
	                 vmm.c 

Log message:
Add vmctl send and vmctl receive

ok reyk@ and mlarkin@


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/15 00:35:42

Modified files:
	sys/arch/octeon/dev: octeon_iobus.c 

Log message:
iobus_h is unused, remove it.


CVSROOT:	/cvs
Module name:	src
Changes by:	tb@cvs.openbsd.org	2017/07/15 01:11:42

Modified files:
	etc            : ksh.kshrc 

Log message:
Replace some `eval` with $(eval) for consistency and use
parameter expansion instead of basename(1). From Raf Czlonka

ok rpe


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/07/15 01:33:56

Modified files:
	usr.sbin/vmctl : vmctl.8 

Log message:
consistent case;


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/15 03:02:20

Modified files:
	sysutils/terraform/terraform: Makefile distinfo 

Log message:
Update to terraform-0.10.0beta2.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/15 03:05:10

Modified files:
	security/libhttpseverywhere: Makefile distinfo 

Log message:
Update to libhttpseverywhere-0.4.7.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/15 03:17:29

Modified files:
	sysutils/google-cloud-sdk: Makefile distinfo 

Log message:
Update to google-cloud-sdk-162.0.1.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/15 03:21:04

Modified files:
	net/py-botocore: Makefile distinfo 

Log message:
Update to py-botocore-1.5.83.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/15 03:21:16

Modified files:
	sysutils/awscli: Makefile distinfo 

Log message:
Update to awscli-1.11.120.


CVSROOT:	/cvs
Module name:	ports
Changes by:	sthen@cvs.openbsd.org	2017/07/15 06:09:17

Modified files:
	security/libsodium: Makefile 
	security/libsodium/pkg: PLIST 

Log message:
oops, my make plist failed because I had a .orig file in pkg/.
regen to unbreak consumers, reported by naddy


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/15 07:17:07

Modified files:
	usr.bin/mandoc : mandocdb.c 

Log message:
Improve rev. 1.199 further:
If a database is empty, we already don't write a database file and
delete an existing one.  If none exists, that only means the database
was empty and remains so, which is not an error.  So don't nag about
it, in particular because that would be a weekly(8) annoyance.
Issue reported by jmc@.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/15 07:55:05

Modified files:
	sys/dev/pci/drm/i915: intel_display.c 

Log message:
Disable the has_audio pipe config check.  We don't manage the HDMI/DP audio
capabilities yet so discrepancies are not entirely unexpected.


CVSROOT:	/cvs
Module name:	src
Changes by:	bentley@cvs.openbsd.org	2017/07/15 09:06:31

Modified files:
	usr.bin/mandoc : eqn.c 

Log message:
Print the right character for mathematical overbar.

ok schwarze@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/07/15 09:48:08

Modified files:
	sys/dev/pci    : if_iwm.c if_iwmvar.h 

Log message:
Get rid of the device reset hack in iwm_newstate_task().

Instead, maintain firmware state in accordance to the current net80211
state by adding/updating/removing MAC config, PHY->MAC binding, and the
station in the firmare station table (we only add the AP to this table).
By eliminating the iwm_stop() call from iwm_newstate_task(), this change
prepares future work on fixing races between ioctls and tasks scheduled
by this driver.

There's a known new occasional fatal firmware error which results in
the message "iwm0: could not remove MAC context (error 35)"
I expect to fix this soon.

tested by tb@ on 7265, by jcs@ on 8265, and by myself on 7260/7265/8260
ok mpi@ tb@


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/07/15 09:59:52

Modified files:
	regress/sbin/pfctl: pfcmd1.opts 

Log message:
regress/sbin/pfctl - use -n for pfcmd group

Passing in the -n which just results in the rules being parsed.

The definition for the pfctlcmd testing group in the Makefile is:
# pfcmd: test pfctl command line parsing

This test passeed only because pfctl didn't exit with an error
when it was asked to clear tables from a non existing anchor.

with the -n flag we still test if the anchor command can be combined
with -Fa but don't actually attempt to run the clearing code.

OK mikeb@, sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	awolk@cvs.openbsd.org	2017/07/15 10:01:14

Modified files:
	sbin/pfctl     : pfctl.h pfctl_table.c 

Log message:
sbin/pfctl: void functions and exit(3) on error

Changes:
voided:
- pfctl_clear_tables
- pfctl_show_tables
- pfctl_show_ifaces

Those functions now exit(3) in case of error instead
of passing it up to the callers (where it was ignored).

OK mikeb@, sashan@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/15 10:25:08

Modified files:
	regress/usr.bin/mandoc/eqn/subsup: precedence.out_ascii 
	                                   precedence.out_html 
	regress/usr.bin/mandoc/eqn/unary: diacrit.out_ascii 
	                                  diacrit.out_html 

Log message:
Catch up with eqn.c rev. 1.41 by bentley@:
Print the right character for mathematical overbar.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/15 10:35:48

Modified files:
	usr.bin/mandoc : mandoc.css 

Log message:
correct left margins for different classes of definition lists


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/15 10:40:24

Modified files:
	usr.bin/mandoc : mdoc_validate.c 

Log message:
If -column, -diag, -inset, -item, or -ohang lists have a -width,
don't just talk about ignoring it, actually do ignore it.
No change for terminal output, improves HTML output.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/15 11:08:26

Modified files:
	regress/lib/libc/strtol: strtoltest.c 

Log message:
Add a test that covers the recently fixed "0x" prefix handling issue.


CVSROOT:	/cvs
Module name:	src
Changes by:	tedu@cvs.openbsd.org	2017/07/15 11:20:56

Modified files:
	sys/arch/i386/i386: bios.c 

Log message:
usingacpi might be referenced in apm only code, so adjust #if guard
from Nick Briggs


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/15 11:27:39

Modified files:
	usr.bin/nc     : nc.1 netcat.c 

Log message:
Add a "-T tlscompat" option to nc(1), which enables the use of all TLS
protocols and "compat" ciphers. This allows for TLS connections to TLS
servers that are using less than ideal cipher suites, without having to
resort to "-T tlsall" which enables all known cipher suites.

Diff from Kyle J. McKay <mackyle at gmail dot com>

ok beck@


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/15 11:29:26

Modified files:
	usr.bin/mandoc : mandoc.css mdoc_html.c 

Log message:
use the same width increase logic for .Bl -hang as for .Bl -tag


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/15 11:40:53

Modified files:
	lib/libssl     : s3_lib.c 

Log message:
Remove unused variable.

Reported by <dravion at ht-foss dot net>


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/15 11:57:46

Modified files:
	usr.bin/mandoc : html.c mdoc_html.c 

Log message:
In .Bl -tag and -hang, do not print a margin-left style attribute
for each individual item if the -width argument matches the default
of 6n.  Suggested by Steffen Nurpmeso <steffen at sdaoden dot eu>
on <groff at GNU dot org> in April 2017.


CVSROOT:	/cvs
Module name:	src
Changes by:	jmc@cvs.openbsd.org	2017/07/15 12:11:47

Modified files:
	usr.bin/nc     : nc.1 

Log message:
grammar was ass backwards;


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/07/15 13:20:51

Modified files:
	app/xterm      : MANIFEST NEWS THANKS Tekproc.c XTerm.ad 
	                 button.c cachedGCs.c charclass.c charclass.h 
	                 charproc.c configure.in ctlseqs.ms ctlseqs.txt 
	                 cursor.c data.h doublechr.c fontutils.c 
	                 fontutils.h graphics.c graphics_regis.c html.c 
	                 input.c main.c main.h menu.c menu.h minstall.in 
	                 misc.c print.c ptydata.c ptyx.h resize.c 
	                 screen.c terminfo trace.c trace.h util.c 
	                 version.c version.h wcwidth.c wcwidth.h 
	                 xstrings.c xstrings.h xterm.h xterm.log.html 
	                 xterm.man xterm_io.h xtermcfg.h xtermcfg.hin 
	                 xutf8.c 
	app/xterm/package: xterm.spec 
	app/xterm/package/debian: changelog control copyright rules 
	                          xterm-dev.docs xterm-dev.menu 
	app/xterm/package/freebsd: Makefile 
	app/xterm/vttests: 256colors.pl 256colors2.pl 88colors.pl 
	                   88colors2.pl dynamic.pl query-color.pl 
	                   resize.pl tcapquery.pl 

Log message:
Update to xterm 330


CVSROOT:	/cvs
Module name:	xenocara
Changes by:	matthieu@cvs.openbsd.org	2017/07/15 13:23:49

Modified files:
	.              : 3RDPARTY 

Log message:
update


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/15 16:35:56

Modified files:
	distrib/miniroot: install.sub 

Log message:
Rework vlan configuration in the installer, triggered by the vlan
releated changes in ifconfig. Put the vlan configuration into its
own function vlan_config() which is called from configure_ifs().

NOTE: Depending on how you use autoinstall(8) related to vlans
(espcially if you rely on the default answers) you should check
that everything still works.

Prompted by and OK dlg@
'looks good' benno@
positive feedback tb@ deraadt@


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/15 16:48:12

Modified files:
	distrib/miniroot: install.sub 

Log message:
- remove superfluous blanks from v[46]_info() output
- tweak comments

Based on a diff from and discussions with Klemens Nanni.


CVSROOT:	/cvs
Module name:	src
Changes by:	rpe@cvs.openbsd.org	2017/07/15 17:01:33

Modified files:
	distrib/miniroot: install.sub 

Log message:
add comment


CVSROOT:	/cvs
Module name:	ports
Changes by:	jturner@cvs.openbsd.org	2017/07/15 19:52:10

Modified files:
	sysutils/tarsnap: Makefile distinfo 

Log message:
Update tarsnap to 1.0.38

Major changes:
- tarsnap accepts an --iso-dates option, which causes times to be
printed in YYYY-MM-DD HH:MM:SS format rather than the traditional
unix ls -l style.
- tarsnap accepts a --force-resources option to proceed with
decryption of a passphrase-encrypted key file even if it is
anticipated to use an excessive amount of memory or CPU time. (This
may be useful if tarsnap inaccurately estimates the amount of memory
your system has available.)
- tarsnap accepts an --archive-names <file> option, which reads a list
of archive names to operate on when operating in -d and --print-stats
modes.


CVSROOT:	/cvs
Module name:	ports
Changes by:	landry@cvs.openbsd.org	2017/07/16 00:50:12

Modified files:
	x11/xfce4/terminal: Makefile distinfo 

Log message:
Update to xfce4-terminal 0.8.6


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/16 02:49:18

Modified files:
	graphics/evince: Makefile 
	graphics/evince/patches: patch-configure 

Log message:
Fix typo in desktop file.


CVSROOT:	/cvs
Module name:	ports
Changes by:	ajacoutot@cvs.openbsd.org	2017/07/16 03:27:58

Modified files:
	net/avahi      : Makefile 
Added files:
	net/avahi/patches: patch-autogen_sh 

Log message:
Don't hardcode AUTOCONF/AUTOMAKE versions.
Fix a build failure if autoconf-2.63 is installed.

reported by espie@


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/16 03:38:44

Added files:
	x11/nx/nxcomp/patches: patch-Types_h 

Log message:
snatch a path from macports that allows nxcomp to be built with libc++ and
base clang. no need for a bump because this will only affect libc++ builds


CVSROOT:	/cvs
Module name:	ports
Changes by:	kettenis@cvs.openbsd.org	2017/07/16 06:44:19

Modified files:
	devel/arm-none-eabi/binutils: Makefile distinfo 
	devel/arm-none-eabi/binutils/patches: patch-bfd_doc_Makefile_in 
	                                      patch-binutils_doc_Makefile_in 
	                                      patch-gas_doc_Makefile_in 
	                                      patch-gprof_Makefile_in 
	                                      patch-ld_Makefile_in 
	                                      patch-libiberty_Makefile_in 
	                                      patch-libiberty_testsuite_Makefile_in 
	devel/arm-none-eabi/binutils/pkg: PLIST 

Log message:
Update to binutils 2.27.

ok patrick@, bmercer@, jsg@, sthen@


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/16 07:41:58

Modified files:
	sys/dev/pci    : pcidevs 

Log message:
Update Skylake Graphics IDs.


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/16 07:42:20

Modified files:
	sys/dev/pci    : pcidevs.h pcidevs_data.h 

Log message:
regen


CVSROOT:	/cvs
Module name:	ports
Changes by:	robert@cvs.openbsd.org	2017/07/16 08:11:21

Added files:
	sysutils/firmware/vmm/patches: patch-Makefile 

Log message:
For gcc stack alignment is specified with -mpreferred-stack-boundary,
clang has the option -mstack-alignment for that purpose, so check what
the compiler supports and use that flag.
This does not fix the build of seabios with clang but moves us forward
a bit to the next error.


CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/07/16 10:23:40

Log message:
    Import x11/xcape:
    
    ---8<---
    xcape allows you to use a modifier key as another key when pressed and released
    on its own. Note that it is slightly slower than pressing the original key,
    because the pressed event does not occur until the key is released. The default
    behaviour is to generate the Escape key when Left Control is pressed and
    released on its own. (If you don't understand why anybody would want this, I'm
    guessing that Vim is not your favourite text editor ;)
    --->8---
    
    From Jon Bernard, with input from myself, sthen@ and schwarze@.
    
    OK sthen@.
    
    Thanks all.
    
    Status:
    
    Vendor Tag:	edd
    Release Tags:	edd_20170716
    
    N ports/x11/xcape/Makefile
    N ports/x11/xcape/distinfo
    N ports/x11/xcape/pkg/DESCR
    N ports/x11/xcape/pkg/PLIST
    
    No conflicts created by this import

CVSROOT:	/cvs
Module name:	ports
Changes by:	edd@cvs.openbsd.org	2017/07/16 10:26:50

Modified files:
	x11            : Makefile 

Log message:
Link x11/xcape.


CVSROOT:	/cvs
Module name:	src
Changes by:	visa@cvs.openbsd.org	2017/07/16 10:47:07

Modified files:
	sys/arch/alpha/conf: Makefile.alpha 
	sys/arch/amd64/conf: Makefile.amd64 
	sys/arch/arm64/conf: Makefile.arm64 
	sys/arch/armv7/conf: Makefile.armv7 
	sys/arch/hppa/conf: Makefile.hppa 
	sys/arch/i386/conf: Makefile.i386 
	sys/arch/landisk/conf: Makefile.landisk 
	sys/arch/loongson/conf: Makefile.loongson 
	sys/arch/macppc/conf: Makefile.macppc 
	sys/arch/octeon/conf: Makefile.octeon 
	sys/arch/sgi/conf: Makefile.sgi 
	sys/arch/sparc64/conf: Makefile.sparc64 
	sys/conf       : makegap.sh 

Log message:
Pass the linker from make environment to makegap.sh. This is (only)
a partial solution to cross compiling the kernel with KARL.

OK deraadt@ a while ago


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/16 11:53:29

Modified files:
	regress/usr.bin/mandoc/mdoc/Bl: Makefile diag.in diag.out_ascii 
	                                diag.out_markdown inset.in 
Added files:
	regress/usr.bin/mandoc/mdoc/Bl: diag.out_lint inset.out_lint 

Log message:
test -diag -width and -inset -width


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/16 11:59:13

Modified files:
	regress/usr.bin/mandoc/mdoc/Bl: diag.out_ascii diag.out_markdown 
	                                inset.out_ascii 
	                                inset.out_markdown 

Log message:
fix dates


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/07/16 12:00:53

Modified files:
	sys/dev/wscons : wstpad.c 

Log message:
Minor changes in the setup.

1. Add middle-button areas to the clickpad defaults.
2. Handle the edge areas more uniformly.
3. Don't disable sw buttons at the bottom edge.


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/16 12:14:37

Modified files:
	lib/libssl     : Makefile t1_lib.c 
Added files:
	lib/libssl     : ssl_tlsext.c ssl_tlsext.h 

Log message:
Start rewriting TLS extension handling.

Introduce a TLS extension handling framework that has per-extension type
functions to determine if an extension is needed, to build the extension
data and parse the extension data. This is somewhat analogous to BoringSSL,
however these build and parse functions are intentionally symetrical. The
framework is hooked into the existing TLS handling code in such a way that
we can gradual convert the extension handling code.

Convert the TLS Server Name Indication extension to the new framework,
while rewriting it to use CBB/CBS and be more strict in the process.

Discussed with beck@

ok inoguchi@


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/16 12:15:21

src/regress/lib/libssl/tlsext

Update of /cvs/src/regress/lib/libssl/tlsext
In directory cvs.openbsd.org:/tmp/cvs-serv6703/tlsext

Log Message:
Directory /cvs/src/regress/lib/libssl/tlsext added to the repository


CVSROOT:	/cvs
Module name:	src
Changes by:	jsing@cvs.openbsd.org	2017/07/16 12:18:10

Modified files:
	regress/lib/libssl: Makefile 
Added files:
	regress/lib/libssl/tlsext: Makefile tlsexttest.c 

Log message:
Provide a new regress test for TLS extension handlers, currently covering
the newly converted SNI code.


CVSROOT:	/cvs
Module name:	src
Changes by:	bru@cvs.openbsd.org	2017/07/16 12:30:24

Modified files:
	sys/dev/wscons : wsmouse.c 

Log message:
Explain the multi-touch tracking function.


CVSROOT:	/cvs
Module name:	src
Changes by:	schwarze@cvs.openbsd.org	2017/07/16 12:44:15

Modified files:
	usr.bin/mandoc : mandoc.css 

Log message:
The only elements using floats are dt.It-tag, so the only elements
allowed to the right of them are dd.It-tag.
Fixes overlapping rendering after long tag lists without bodies,
for example in the Xenocara apm(4) manual.  Issue reported by tj@.


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/16 13:14:29

Modified files:
	x11/vlc        : Makefile 

Log message:
fix for other arches, and use COMPILER_LIBCXX


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/16 13:19:06

Modified files:
	archivers/fuse-zip: Makefile 
	archivers/lzip/lzip: Makefile 
	archivers/lzip/lziprecover: Makefile 
	archivers/lzip/plzip: Makefile 
	archivers/innoextract: Makefile 
	archivers/p7zip: Makefile 
	archivers/par2cmdline: Makefile 
	archivers/pecl-rar: Makefile 
	archivers/quazip: Makefile 
	archivers/snappy: Makefile 
	archivers/unrar: Makefile 
	archivers/zipios: Makefile 
	astro/celestia : Makefile 
	audio/akode    : Makefile 
	audio/aqualung : Makefile 
	audio/audacious-plugins: Makefile 
	audio/audacity : Makefile 
	audio/calf     : Makefile 
	audio/caps-plugins: Makefile 
	audio/chromaprint: Makefile 
	audio/clementine: Makefile 
	audio/cmt      : Makefile 
	audio/easytag  : Makefile 
	audio/espeak   : Makefile 
	audio/festival/core: Makefile 
	audio/flac     : Makefile 
	audio/gimmix   : Makefile 
	audio/gmpc-plugins: Makefile 
	audio/ocp      : Makefile 
	audio/gogglesmm: Makefile 
	audio/grip     : Makefile 
	audio/hydrogen : Makefile 
	audio/id3ed    : Makefile 
	audio/id3lib   : Makefile 
	audio/ladspa   : Makefile 
	audio/libcanberra: Makefile 
	audio/libcdio  : Makefile 
	audio/liblastfm: Makefile 
	audio/goattracker: Makefile 
	audio/libmodplug: Makefile 
	audio/libmusicbrainz: Makefile 
	audio/libmusicbrainz5: Makefile 
	audio/libofa   : Makefile 
	audio/libsidplay: Makefile 
	audio/lmms     : Makefile 
	audio/mac      : Makefile 
	audio/mcp-plugins: Makefile 
	audio/milkytracker: Makefile 
	audio/mp3blaster: Makefile 
	audio/mpd      : Makefile 
	audio/mumble   : Makefile 
	audio/musique  : Makefile 
	audio/ncmpcpp  : Makefile 
	audio/openal   : Makefile 
	audio/xcd      : Makefile 
	audio/adplay   : Makefile 
	audio/paulstretch: Makefile 
	audio/picard   : Makefile 
	audio/pms      : Makefile 
	audio/pulseaudio: Makefile 
	audio/py-tagpy : Makefile 
	audio/adplug   : Makefile 
	audio/ruby-id3lib: Makefile 
	audio/ruby-taglib: Makefile 
	audio/sidplay  : Makefile 
	audio/soundtouch: Makefile 
	audio/taglib   : Makefile 
	audio/tagtool  : Makefile 
	audio/tempest  : Makefile 
	audio/vagalume : Makefile 
	audio/vamp-plugin-sdk: Makefile 
	audio/libbs2b  : Makefile 
	audio/xmms2    : Makefile 
	audio/moc      : Makefile 
	benchmarks/bonnie++: Makefile 
	benchmarks/sysbench: Makefile 
	biology/nutdb  : Makefile 
	cad/fritzing   : Makefile 
	cad/geda-gaf   : Makefile 
	cad/gnucap     : Makefile 
	cad/gtkwave    : Makefile 
	cad/kicad      : Makefile 
	cad/necpp      : Makefile 
	cad/openscad   : Makefile 
	cad/qcad       : Makefile 
	cad/qucs       : Makefile 
	comms/fldigi   : Makefile 
	comms/gmfsk    : Makefile 
	comms/gpsk31   : Makefile 
	comms/hamlib   : Makefile 
	comms/hylafax  : Makefile 
	comms/owx      : Makefile 
	comms/qtserialport: Makefile 
	converters/html2text: Makefile 
	converters/libpst: Makefile 
	converters/pflogx: Makefile 
	converters/lastools: Makefile 
	converters/wv2 : Makefile 
	databases/apache-couchdb: Makefile 
	databases/db/v4: Makefile 
	databases/evolution-data-server: Makefile 
	databases/kyotocabinet: Makefile 
	databases/leveldb: Makefile 
	databases/libdbi-drivers: Makefile 
	databases/libpqxx: Makefile 
	databases/mariadb: Makefile 
	databases/mongodb: Makefile 
	databases/mysqlcc: Makefile 
	databases/openldap: Makefile 
	databases/pgadmin3: Makefile 
	databases/postgresql-plv8: Makefile 
	databases/py-odbc: Makefile 
	databases/qt3-sqlite3-plugin: Makefile 
	databases/riak : Makefile 
	databases/sqlitebrowser: Makefile 
	databases/sqliteman: Makefile 
	databases/strigi: Makefile 
	databases/xapian-core: Makefile 
	databases/libzdb: Makefile 
	databases/xapian-bindings: Makefile 
	geo/garmindev  : Makefile 
	geo/gdal       : Makefile 
	geo/geos       : Makefile 
	geo/gpsbabel   : Makefile 
	geo/gpstk      : Makefile 
	geo/mapserver  : Makefile 
	geo/merkaartor : Makefile 
	geo/postgis    : Makefile 
	geo/pgrouting  : Makefile 
	geo/qlandkartegt: Makefile 
	geo/spatialindex: Makefile 
	geo/spatialite/gis: Makefile 
	geo/spatialite/gui: Makefile 
	geo/spatialite/librasterlite: Makefile 
	geo/spatialite/libspatialite: Makefile 
	geo/spatialite/tools: Makefile 
	geo/spatialite/librasterlite2: Makefile 
	geo/spatialite/librewms: Makefile 
	geo/osm2pgrouting: Makefile 
	geo/osm2pgsql  : Makefile 
	devel/astyle   : Makefile 
	devel/atf      : Makefile 
	devel/atlas    : Makefile 
	devel/beediff  : Makefile 
	devel/boehm-gc : Makefile 
	devel/boost    : Makefile 
	devel/bouml    : Makefile 
	devel/ccrtp    : Makefile 
	devel/cpp-hocon: Makefile 
	devel/cln      : Makefile 
	devel/codeblocks: Makefile 
	devel/codeworker: Makefile 
	devel/commoncpp: Makefile 
	devel/mico     : Makefile 
	devel/cppcheck : Makefile 
	devel/cpptest  : Makefile 
	devel/cppunit  : Makefile 
	devel/cryptopp : Makefile 
	devel/dee      : Makefile 
	devel/doc++    : Makefile 
	devel/doxygen  : Makefile 
	devel/fox      : Makefile 
	devel/flatzebra: Makefile 
	devel/gdb      : Makefile 
	devel/geany    : Makefile 
	devel/gettext  : Makefile 
	devel/gflags   : Makefile 
	devel/jsoncpp  : Makefile 
	devel/glog     : Makefile 
	devel/gmp      : Makefile 
	devel/gperf    : Makefile 
	devel/guilib   : Makefile 
	devel/gwenhywfar: Makefile 
	devel/harfbuzz : Makefile 
	devel/cmake    : Makefile 
	devel/mygui    : Makefile 
	devel/log4cpp  : Makefile 
	devel/kdiff3   : Makefile 
	devel/kyua-cli : Makefile 
	devel/libaudiofile: Makefile 
	devel/libconfig: Makefile 
	devel/libmemcached: Makefile 
	devel/libofx   : Makefile 
	devel/libplist : Makefile 
	devel/log4cplus: Makefile 
	devel/lutok    : Makefile 
	devel/monotone : Makefile 
	devel/mozjs17  : Makefile 
	devel/mysql++  : Makefile 
	devel/py-sip   : Makefile 
	devel/ninja    : Makefile 
	devel/libbinio : Makefile 
	devel/ode      : Makefile 
	devel/ois      : Makefile 
	devel/openmpi  : Makefile 
	devel/jdk/1.7  : Makefile 
	devel/jdk/1.8  : Makefile 
	devel/arm-none-eabi/gcc-linaro: Makefile 
	devel/gengetopt: Makefile 
	devel/csmith   : Makefile 
	devel/libvmime : Makefile 
	devel/cbmc     : Makefile 
	devel/pcre     : Makefile 
	devel/pcre++   : Makefile 
	devel/poedit   : Makefile 
	devel/protobuf : Makefile 
	devel/protobuf-c: Makefile 
	devel/ptlib    : Makefile 
	devel/gtest    : Makefile 
	devel/leatherman: Makefile 
	devel/ddd      : Makefile 
	devel/pysvn    : Makefile 
	devel/qgit     : Makefile 
	devel/qjson    : Makefile 
	devel/qt-creator: Makefile 
	devel/ragel    : Makefile 
	devel/rapidsvn : Makefile 
	devel/re2c     : Makefile 
	devel/rlog     : Makefile 
	devel/doxygen-gui: Makefile 
	devel/ruby-therubyracer: Makefile 
	devel/gsoap    : Makefile 
	devel/sdcc     : Makefile 
	devel/sdlmm    : Makefile 
	devel/smpeg    : Makefile 
	devel/smpeg2   : Makefile 
	devel/srecord  : Makefile 
	devel/stp      : Makefile 
	devel/swig     : Makefile 
	devel/tclcl    : Makefile 
	devel/uuid     : Makefile 
	devel/yaml-cpp : Makefile 
	devel/ti-msp430gcc: Makefile 
	editors/TeXmacs: Makefile 
	editors/tea    : Makefile 
	editors/focuswriter: Makefile 
	editors/fte    : Makefile 
	editors/ht     : Makefile 
	editors/libreoffice: Makefile 
	editors/moe    : Makefile 
	editors/le     : Makefile 
	editors/py-qscintilla: Makefile 
	editors/qscintilla: Makefile 
	editors/scintilla: Makefile 
	editors/scite  : Makefile 
	editors/teaqt  : Makefile 
	editors/texworks: Makefile 
	editors/tiled  : Makefile 
	editors/tpad   : Makefile 
	education/drgeo: Makefile 
	education/verbiste: Makefile 
	emulators/BasiliskII: Makefile 
	emulators/bochs: Makefile 
	emulators/dgen-sdl: Makefile 
	emulators/dosbox: Makefile 
	emulators/fceux: Makefile 
	emulators/openmsx: Makefile 
	emulators/frodo: Makefile 
	emulators/fs-uae: Makefile 
	emulators/fuse-utils: Makefile 
	emulators/gambatte: Makefile 
	emulators/gxemul: Makefile 
	emulators/emulationstation: Makefile 
	emulators/mednafen: Makefile 
	emulators/mgba : Makefile 
	emulators/mupen64plus/core: Makefile 
	emulators/mupen64plus/rsp-z64: Makefile 
	emulators/mupen64plus/video-arachnoid: Makefile 
	emulators/mupen64plus/video-glide64: Makefile 
	emulators/mupen64plus/video-glide64mk2: Makefile 
	emulators/mupen64plus/video-rice: Makefile 
	emulators/mupen64plus/video-z64: Makefile 
	emulators/nestopia: Makefile 
	emulators/pcsxr: Makefile 
	emulators/qemu : Makefile 
	emulators/sdlmame: Makefile 
	emulators/sdlmess: Makefile 
	emulators/snes9x: Makefile 
	emulators/stella: Makefile 
	emulators/vice : Makefile 
	emulators/xnp2 : Makefile 
	emulators/virtualjaguar: Makefile 
	games/0ad/base : Makefile 
	games/abuse    : Makefile 
	games/galois   : Makefile 
	games/afternoonstalker: Makefile 
	games/alephone/alephone: Makefile 
	games/amoebax  : Makefile 
	games/amph     : Makefile 
	games/armagetronad: Makefile 
	games/batrachians: Makefile 
	games/blobby   : Makefile 
	games/blobwars : Makefile 
	games/astromenace: Makefile 
	games/boswars  : Makefile 
	games/braincurses: Makefile 
	games/burgerspace: Makefile 
	games/bzflag   : Makefile 
	games/capitan-sevilla: Makefile 
	games/quadrupleback: Makefile 
	games/choria   : Makefile 
	games/chromium-bsu: Makefile 
	games/clonekeen: Makefile 
	games/cosmosmash: Makefile 
	games/crack-attack: Makefile 
	games/crimson  : Makefile 
	games/csmash   : Makefile 
	games/dunelegacy: Makefile 
	games/dungeon-crawl: Makefile 
	games/easyrpg  : Makefile 
	games/eboard   : Makefile 
	games/eduke32  : Makefile 
	games/einstein : Makefile 
	games/eliot    : Makefile 
	games/enigma   : Makefile 
	games/f1spirit : Makefile 
	games/flare    : Makefile 
	games/flightgear/base: Makefile 
	games/gargoyle : Makefile 
	games/gnuchess : Makefile 
	games/golly    : Makefile 
	games/grhino   : Makefile 
	games/brumbrumrally: Makefile 
	games/hex-a-hop: Makefile 
	games/irrlamb  : Makefile 
	games/jag      : Makefile 
	games/kbilliards: Makefile 
	games/kobodeluxe: Makefile 
	games/late     : Makefile 
	games/life     : Makefile 
	games/lincity-ng: Makefile 
	games/lostpixels: Makefile 
	games/love     : Makefile 
	games/maelstrom: Makefile 
	games/manaplus : Makefile 
	games/meandmyshadow: Makefile 
	games/megaglest/base: Makefile 
	games/minetest : Makefile 
	games/bastet   : Makefile 
	games/nethack  : Makefile 
	games/numptyphysics: Makefile 
	games/oilwar   : Makefile 
	games/openttd  : Makefile 
	games/openxcom : Makefile 
	games/pingus   : Makefile 
	games/pokerth  : Makefile 
	games/pushover : Makefile 
	games/qgo      : Makefile 
	games/dangerdeep: Makefile 
	games/redeclipse: Makefile 
	games/residualvm: Makefile 
	games/ri-li    : Makefile 
	games/roadfighter: Makefile 
	games/sauerbraten: Makefile 
	games/scorched3d: Makefile 
	games/scummvm  : Makefile 
	games/scummvm-tools: Makefile 
	games/snipe2d  : Makefile 
	games/solarus/solarus: Makefile 
	games/spacehulk: Makefile 
	games/speeddreams: Makefile 
	games/stepmania: Makefile 
	games/stone-soup: Makefile 
	games/supertux : Makefile 
	games/supertuxkart: Makefile 
	games/taxipilot: Makefile 
	games/teeworlds: Makefile 
	games/tong     : Makefile 
	games/toppler  : Makefile 
	games/tutris   : Makefile 
	games/tuxkart  : Makefile 
	games/tuxpaint-config: Makefile 
	games/valyriatear: Makefile 
	games/vegastrike/engine: Makefile 
	games/vodovod  : Makefile 
	games/warmux   : Makefile 
	games/warzone2100: Makefile 
	games/wesnoth  : Makefile 
	games/widelands: Makefile 
	games/sumwars  : Makefile 
	games/mars     : Makefile 
	games/fillets-ng: Makefile 
	games/xbreaky  : Makefile 
	games/xevil    : Makefile 
	games/xjig     : Makefile 
	games/xkobo    : Makefile 
	games/xmahjongg: Makefile 
	games/xminehunter: Makefile 
	games/xmoto    : Makefile 
	games/xwelltris: Makefile 
	games/xye      : Makefile 
	games/zaz      : Makefile 
	games/liberalcrimesquad: Makefile 
	games/gemrb    : Makefile 
	games/starfighter: Makefile 
	games/hedgewars: Makefile 
	games/openmw   : Makefile 
	games/instead-launcher: Makefile 
	games/ja2-stracciatella: Makefile 
	games/lugaru   : Makefile 
	graphics/DevIL : Makefile 
	graphics/GraphicsMagick: Makefile 
	graphics/ImageMagick: Makefile 
	graphics/gegl03: Makefile 
	graphics/agg   : Makefile 
	graphics/amide : Makefile 
	graphics/animorph: Makefile 
	graphics/aqsis : Makefile 
	graphics/asymptote: Makefile 
	graphics/autopano-sift-c: Makefile 
	graphics/blender: Makefile 
	graphics/cal3d : Makefile 
	graphics/cfdg  : Makefile 
	graphics/vigra : Makefile 
	graphics/ctl   : Makefile 
	graphics/darktable: Makefile 
	graphics/dcmtk : Makefile 
	graphics/delaboratory: Makefile 
	graphics/discwrapper: Makefile 
	graphics/djview4: Makefile 
	graphics/djvulibre: Makefile 
	graphics/enblend-enfuse: Makefile 
	graphics/exiv2 : Makefile 
	graphics/ffmpegthumbnailer: Makefile 
	graphics/freeimage: Makefile 
	graphics/ftgl  : Makefile 
	graphics/fyre  : Makefile 
	graphics/gd    : Makefile 
	graphics/geeqie: Makefile 
	graphics/gegl  : Makefile 
	graphics/geomview: Makefile 
	graphics/gfract: Makefile 
	graphics/gimp/deskew: Makefile 
	graphics/gnofract4d: Makefile 
	graphics/goocanvas: Makefile 
	graphics/grap  : Makefile 
	graphics/graphite2: Makefile 
	graphics/gthumb: Makefile 
	graphics/gtkimageview: Makefile 
	graphics/hugin : Makefile 
	graphics/ilmbase: Makefile 
	graphics/inkscape: Makefile 
	graphics/ipe   : Makefile 
	graphics/k3dsurf: Makefile 
	graphics/lensfun: Makefile 
	graphics/libpgf: Makefile 
	graphics/libraw: Makefile 
	graphics/libvidcap: Makefile 
	graphics/lsys  : Makefile 
	graphics/makehuman: Makefile 
	graphics/mapnik: Makefile 
	graphics/mhgui : Makefile 
	graphics/ocrad : Makefile 
	graphics/opencolorio: Makefile 
	graphics/opencsg: Makefile 
	graphics/opencv: Makefile 
	graphics/openexr: Makefile 
	graphics/openexr-viewers: Makefile 
	graphics/openscenegraph: Makefile 
	graphics/png2ico: Makefile 
	graphics/povray: Makefile 
	graphics/pstoedit: Makefile 
	graphics/fotowall: Makefile 
	graphics/py-matplotlib: Makefile 
	graphics/quesoglc: Makefile 
	graphics/rawstudio: Makefile 
	graphics/rawtherapee: Makefile 
	graphics/shotwell: Makefile 
	graphics/simgear: Makefile 
	graphics/tiff  : Makefile 
	graphics/ufraw : Makefile 
	graphics/viewnior: Makefile 
	graphics/zint  : Makefile 
	graphics/zxing : Makefile 
	graphics/ttfautohint: Makefile 
	inputmethods/scim: Makefile 
	inputmethods/scim-anthy: Makefile 
	inputmethods/scim-chewing: Makefile 
	inputmethods/scim-fcitx: Makefile 
	inputmethods/scim-hangul: Makefile 
	inputmethods/scim-pinyin: Makefile 
	inputmethods/scim-qtimm: Makefile 
	inputmethods/scim-tables: Makefile 
	inputmethods/uim: Makefile 
	japanese/groff : Makefile 
	japanese/kasumi: Makefile 
	japanese/mecab : Makefile 
	java/jlint     : Makefile 
	net/amule      : Makefile 
	net/castget    : Makefile 
	net/centerim   : Makefile 
	net/corebird   : Makefile 
	net/dclib      : Makefile 
	net/dxpc       : Makefile 
	net/dysnomia   : Makefile 
	net/freetalk   : Makefile 
	net/glib2-networking: Makefile 
	net/gloox      : Makefile 
	net/gnugk      : Makefile 
	net/h323plus   : Makefile 
	net/hexchat    : Makefile 
	net/icinga/core2: Makefile 
	net/iperf      : Makefile 
	net/irrtoolset : Makefile 
	net/kea        : Makefile 
	net/jabberd    : Makefile 
	net/kismet     : Makefile 
	net/lftp       : Makefile 
	net/libmygpo-qt: Makefile 
	net/libproxy   : Makefile 
	net/livemedia  : Makefile 
	net/minbif     : Makefile 
	net/mldonkey   : Makefile 
	net/monitoring-plugins: Makefile 
	net/mosh       : Makefile 
	net/mosquitto  : Makefile 
	net/mutella    : Makefile 
	net/nam        : Makefile 
	net/neon       : Makefile 
	net/nepenthes  : Makefile 
	net/nload      : Makefile 
	net/nmap       : Makefile 
	net/ns         : Makefile 
	net/ntopng     : Makefile 
	net/openconnect: Makefile 
	net/osrtspproxy: Makefile 
	net/psi        : Makefile 
	net/pchar      : Makefile 
	net/pidgin     : Makefile 
	net/pmacct     : Makefile 
	net/poco       : Makefile 
	net/powerdns   : Makefile 
	net/libtorrent : Makefile 
	net/py-msgpack : Makefile 
	net/py-pcapy   : Makefile 
	net/qsynergy   : Makefile 
	net/retroshare : Makefile 
	net/rtorrent   : Makefile 
	net/ruby-eventmachine: Makefile 
	net/dnsdist    : Makefile 
	net/spectrum   : Makefile 
	net/synergy    : Makefile 
	net/tcpreen    : Makefile 
	net/telepathy/telepathy-qt: Makefile 
	net/transmission: Makefile 
	net/valknut    : Makefile 
	net/vncsnapshot: Makefile 
	net/yaz        : Makefile 
	net/xprobe     : Makefile 
	net/zeromq     : Makefile 
	lang/classpath : Makefile 
	lang/erlang/16 : Makefile 
	lang/erlang/17 : Makefile 
	lang/erlang/18 : Makefile 
	lang/erlang/19 : Makefile 
	lang/freehdl   : Makefile 
	lang/gcc/4.9   : Makefile 
	lang/gcc/6     : Makefile 
	lang/intel2gas : Makefile 
	lang/iverilog  : Makefile 
	lang/jikes     : Makefile 
	lang/jruby     : Makefile 
	lang/libv8     : Makefile 
	lang/node      : Makefile 
	lang/parrot    : Makefile 
	lang/php       : Makefile.inc 
	lang/php/5.6   : Makefile 
	lang/php/7.0   : Makefile 
	lang/python    : Makefile.inc 
	lang/spidermonkey: Makefile 
	lang/verilator : Makefile 
	mail/archiveopteryx: Makefile 
	mail/avenger   : Makefile 
	mail/claws-mail: Makefile 
	mail/courier-authlib: Makefile 
	mail/cyrus-imapd: Makefile 
	mail/dovecot   : Makefile 
	mail/dspam     : Makefile 
	mail/evolution-rss: Makefile 
	mail/opensmtpd-extras: Makefile 
	mail/mu        : Makefile 
	mail/libetpan  : Makefile 
	mail/lumail    : Makefile 
	mail/maildrop  : Makefile 
	mail/mozilla-thunderbird: Makefile 
	mail/zarafa/zarafa: Makefile 
	mail/perdition : Makefile 
	mail/prepop    : Makefile 
	mail/courier-unicode: Makefile 
	mail/sylpheed  : Makefile 
	math/aamath    : Makefile 
	math/cgal      : Makefile 
	math/freemat   : Makefile 
	math/gnuplot   : Makefile 
	math/graphviz  : Makefile 
	math/kst       : Makefile 
	math/libqalculate: Makefile 
	math/minisat   : Makefile 
	math/netcdf    : Makefile 
	math/ntl       : Makefile 
	math/octave    : Makefile 
	math/openfst   : Makefile 
	math/plplot    : Makefile 
	math/py-scipy  : Makefile 
	math/veusz     : Makefile 
	math/wxMaxima  : Makefile 
	math/hdf5      : Makefile 
	math/z3        : Makefile 
	math/py-numexpr: Makefile 
	misc/cdrdao    : Makefile 
	misc/dtcltiny  : Makefile 
	misc/gpsd      : Makefile 
	misc/openbabel : Makefile 
	misc/rocrail   : Makefile 
	misc/xnc       : Makefile 
	multimedia/atomicparsley: Makefile 
	multimedia/avidemux: Makefile 
	multimedia/ccextractor: Makefile 
	multimedia/gstreamer1/mm: Makefile 
	multimedia/gstreamer1/plugins-good: Makefile 
	multimedia/dvdstyler: Makefile 
	multimedia/gstreamer-0.10/plugins-bad: Makefile 
	multimedia/gstreamer-0.10/plugins-good: Makefile 
	multimedia/gstreamer-0.10/plugins-ugly: Makefile 
	multimedia/avidemux: Makefile 
	multimedia/kguitar: Makefile 
	multimedia/libmatroska: Makefile 
	multimedia/libmp4v2: Makefile 
	multimedia/libquicktime: Makefile 
	multimedia/mediainfo: Makefile 
	multimedia/mediatomb: Makefile 
	multimedia/mjpegtools: Makefile 
	multimedia/mkvtoolnix: Makefile 
	multimedia/mpgtx: Makefile 
	multimedia/ogmrip: Makefile 
	multimedia/ogmtools: Makefile 
	multimedia/qt-gstreamer: Makefile 
	multimedia/streamdvd: Makefile 
	multimedia/swfmill: Makefile 
	multimedia/swftools: Makefile 
	multimedia/transcode: Makefile 
	multimedia/synfig: Makefile 
	multimedia/synfigstudio: Makefile 
	news/multimail : Makefile 
	news/pan       : Makefile 
	print/apvlv    : Makefile 
	print/cups     : Makefile 
	print/hplip    : Makefile 
	print/htmldoc  : Makefile 
	print/lilypond : Makefile 
	print/lyx      : Makefile 
	print/py-poppler: Makefile 
	print/qpdf     : Makefile 
	print/scribus  : Makefile 
	print/splix    : Makefile 
	print/sile     : Makefile 
	print/texlive/base: Makefile 
	productivity/aqbanking: Makefile 
	productivity/devtodo: Makefile 
	productivity/entomologist: Makefile 
	productivity/fet: Makefile 
	productivity/gnucash: Makefile 
	productivity/grisbi: Makefile 
	productivity/ledger: Makefile 
	productivity/qhacc: Makefile 
	productivity/rubrica2: Makefile 
	productivity/taskd: Makefile 
	productivity/taskwarrior: Makefile 
	productivity/tudu: Makefile 
	security/botan : Makefile 
	security/encfs : Makefile 
	security/fwbuilder: Makefile 
	security/gnutls: Makefile 
	security/opendnssec: Makefile 
	security/keepassx: Makefile 
	security/kqoauth: Makefile 
	security/libnipper: Makefile 
	security/nipper: Makefile 
	security/ophcrack: Makefile 
	security/pwsafe: Makefile 
	security/qca   : Makefile 
	security/qoauth: Makefile 
	security/steghide: Makefile 
	security/softhsm: Makefile 
	security/qtkeychain: Makefile 
	security/pcsc-cyberjack: Makefile 
	security/yubico/yubikey-personalization-gui: Makefile 
	security/ssdeep: Makefile 
	sysutils/apachetop: Makefile 
	sysutils/apcupsd: Makefile 
	sysutils/gource: Makefile 
	sysutils/colortail: Makefile 
	sysutils/ddrescue: Makefile 
	sysutils/dtpstree: Makefile 
	sysutils/dvd+rw-tools: Makefile 
	sysutils/knutclient: Makefile 
	sysutils/logstalgia: Makefile 
	sysutils/grive2: Makefile 
	sysutils/nut   : Makefile 
	sysutils/facter: Makefile 
	sysutils/rsyslog: Makefile 
	sysutils/sleuthkit: Makefile 
	sysutils/smartmontools: Makefile 
	sysutils/incron: Makefile 
	sysutils/tmux-mem-cpu-load: Makefile 
	sysutils/simple-mtpfs: Makefile 
	telephony/asterisk: Makefile 
	telephony/iaxclient: Makefile 
	telephony/pjsua: Makefile 
	telephony/stuntman: Makefile 
	tests/portbump/t1: Makefile 
	tests/portbump/t2: Makefile.inc 
	tests/portbump/t4: Makefile 
	tests/portbump/t5: Makefile 
	tests/portcheck/t7: Makefile 
	textproc/arabica: Makefile 
	textproc/aspell/core: Makefile 
	textproc/clo++ : Makefile 
	textproc/clucene: Makefile 
	textproc/fragistics: Makefile 
	textproc/exempi: Makefile 
	textproc/groff : Makefile 
	textproc/apertium: Makefile 
	textproc/gtkspell: Makefile 
	textproc/gtkspell3: Makefile 
	textproc/gtranslator: Makefile 
	textproc/hunspell: Makefile 
	textproc/icu4c : Makefile 
	textproc/isearch: Makefile 
	textproc/gspell: Makefile 
	textproc/libebml: Makefile 
	textproc/libical: Makefile 
	textproc/libwpd: Makefile 
	textproc/link-grammar: Makefile 
	textproc/lq-sp : Makefile 
	textproc/openjade: Makefile 
	textproc/opensp: Makefile 
	textproc/p5-Encode-Detect: Makefile 
	textproc/heirloom-doctools: Makefile 
	textproc/p5-Text-Aspell: Makefile 
	textproc/py-ICU: Makefile 
	textproc/apertium-lex-tools: Makefile 
	textproc/rarian: Makefile 
	textproc/redland: Makefile 
	textproc/sablotron: Makefile 
	textproc/source-highlight: Makefile 
	textproc/sp    : Makefile 
	textproc/sphinx: Makefile 
	textproc/tinyxml: Makefile 
	textproc/uchardet: Makefile 
	textproc/uncrustify: Makefile 
	textproc/vislcg3: Makefile 
	textproc/xerces-c: Makefile 
	textproc/xpdf  : Makefile 
	textproc/xxdiff: Makefile 
	textproc/lttoolbox: Makefile 
	textproc/pugixml: Makefile 
	textproc/wkhtmltopdf: Makefile 
	textproc/tinyxml2: Makefile 
	www/aria2      : Makefile 
	www/arora      : Makefile 
	www/bluefish   : Makefile 
	www/cgicc      : Makefile 
	www/conkeror   : Makefile 
	www/dansguardian: Makefile 
	www/dillo      : Makefile 
	www/fcgi       : Makefile 
	www/gtkhtml4   : Makefile 
	www/havp       : Makefile 
	www/icedtea-web: Makefile 
	www/larbin     : Makefile 
	www/lighttpd   : Makefile 
	www/minitube   : Makefile 
	www/newsbeuter : Makefile 
	www/nginx      : Makefile 
	www/chromium   : Makefile 
	www/firefox-esr: Makefile 
	www/mozilla-firefox: Makefile 
	www/iridium    : Makefile 
	www/ruby-capybara-webkit: Makefile 
	www/ruby-passenger: Makefile 
	www/seamonkey  : Makefile 
	www/slowhttptest: Makefile 
	www/sqtop      : Makefile 
	www/squid      : Makefile 
	www/xapian-omega: Makefile 
	x11/bbdate     : Makefile 
	x11/bbkeys     : Makefile 
	x11/bbpager    : Makefile 
	x11/blackbox   : Makefile 
	x11/compiz/core: Makefile 
	x11/compiz/libcompizconfig: Makefile 
	x11/e17/evas   : Makefile 
	x11/ede/desktop: Makefile 
	x11/ede/lib    : Makefile 
	x11/fleditor   : Makefile 
	x11/fltk       : Makefile 
	x11/mate/atril : Makefile 
	x11/mate/pluma : Makefile 
	x11/fluxbox    : Makefile 
	x11/fluxter    : Makefile 
	x11/flwm       : Makefile 
	x11/gaia       : Makefile 
	x11/gmrun      : Makefile 
	x11/gnome/banshee: Makefile 
	x11/gnome/bijiben: Makefile 
	x11/gnome/gtef : Makefile 
	x11/gnome/color-manager: Makefile 
	x11/gnome/contacts: Makefile 
	x11/gnome/empathy: Makefile 
	x11/gnome/gedit: Makefile 
	x11/gnome/latexila: Makefile 
	x11/gnome/libgda: Makefile 
	x11/gnome/online-accounts: Makefile 
	x11/gnome/shell: Makefile 
	x11/gnome/recipes: Makefile 
	x11/gnome/tracker: Makefile 
	x11/gnome/calendar: Makefile 
	x11/gnome/todo : Makefile 
	x11/gnustep/make: Makefile 
	x11/goggles    : Makefile 
	x11/grantlee   : Makefile 
	x11/gtk-engines2: Makefile 
	x11/gtk2-aurora-engine: Makefile 
	x11/polkit-qt  : Makefile 
	x11/gtk2-equinox-engine: Makefile 
	x11/gtk2-murrine-engine: Makefile 
	x11/gtk2-nodoka-engine: Makefile 
	x11/gtk2-oxygen-engine: Makefile 
	x11/gtk3-oxygen-engine: Makefile 
	x11/gtkglarea  : Makefile 
	x11/gtkglext   : Makefile 
	x11/herbstluftwm: Makefile 
	x11/icewm      : Makefile 
	x11/idesk      : Makefile 
	x11/irrlicht   : Makefile 
	x11/kde/accessibility3: Makefile 
	x11/kde/base3  : Makefile 
	x11/kde/arts3  : Makefile 
	x11/kde/artwork3: Makefile 
	x11/kde/games3 : Makefile 
	x11/kde/libs3  : Makefile 
	x11/kdirstat   : Makefile 
	x11/mplayer    : Makefile 
	x11/nx/nxcomp  : Makefile 
	x11/nx/nxproxy : Makefile 
	x11/nx/nxssh   : Makefile 
	x11/nx/opennx  : Makefile 
	x11/p5-Wx      : Makefile 
	x11/cegui      : Makefile 
	x11/pekwm      : Makefile 
	x11/py-qt4     : Makefile 
	x11/py-wxPython: Makefile 
	x11/qrfcview   : Makefile 
	x11/qt5/qtdatavis3d: Makefile 
	x11/qt5/qtgamepad: Makefile 
	x11/qt5/qtnetworkauth: Makefile 
	x11/qt5/qtpurchasing: Makefile 
	x11/qt5/qtremoteobjects: Makefile 
	x11/qt5/qtscxml: Makefile 
	x11/qt5/qtspeech: Makefile 
	x11/qt5/qtvirtualkeyboard: Makefile 
	x11/qt5/qtcharts: Makefile 
	x11/qvwm       : Makefile 
	x11/qwt        : Makefile 
	x11/slim       : Makefile 
	x11/treewm     : Makefile 
	x11/waimea     : Makefile 
	x11/wbar       : Makefile 
	x11/wm2        : Makefile 
	x11/wmi        : Makefile 
	x11/wmx        : Makefile 
	x11/worker     : Makefile 
	x11/wxSVG      : Makefile 
	x11/wxWidgets  : Makefile 
	x11/xchm       : Makefile 
	x11/xdrawchem  : Makefile 
	x11/xfce4/parole: Makefile 
	x11/xfce4/thunar-media-tags: Makefile 
	x11/xfce4/xfce4-whiskermenu: Makefile 
	x11/xfe        : Makefile 
	x11/xglobe     : Makefile 
	x11/xplanet    : Makefile 
	x11/xsettingsd : Makefile 
	x11/qt3        : Makefile 
	x11/qt4        : Makefile 
	x11/x2goclient : Makefile 

Log message:
use COMPILER_LIBCXX where applicable


CVSROOT:	/cvs
Module name:	ports
Changes by:	espie@cvs.openbsd.org	2017/07/16 13:20:57

Modified files:
	graphics/evince: Makefile 
	multimedia/gstreamer1/plugins-bad: Makefile 
	security/cyrus-sasl2: Makefile 
	sysutils/bacula: Makefile 
	x11/gnome/control-center: Makefile 

Log message:
...and those last 5, which got updated while I was creating the diff


CVSROOT:	/cvs
Module name:	src
Changes by:	kettenis@cvs.openbsd.org	2017/07/16 13:30:56

Modified files:
	sys/dev/fdt    : sxiccmu.c 

Log message:
Match /clocks node on Allwinner H5.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/07/16 15:35:20

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Some net80211 state changes are triggered by incoming frames, and it is
possible for such frames to move iwm(4) to the same state, e.g. AUTH->AUTH.
Do not bother the firmware with such no-op state changes because that runs
a high risk of hitting firmware errors.
Problem reported by Gregor Best.


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/07/16 16:03:11

Modified files:
	sys/dev/pci    : if_iwm.c 

Log message:
Remove the AP from iwm's firmware station table when moving out of AUTH state.
Fixes "could not remove MAC context" errors seen during AUTH->SCAN transitions.


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/07/16 16:47:37

Modified files:
	sys/arch/hppa/hppa: locore.S vm_machdep.c 

Log message:
Clear the framepointer (r3) in switch_trampoline to avoid faults in stack trace
Reduce size of switch stack frame to match normal 64byte alignment
Eliminate useless 'osp' variable when setting up initial frame in cpu_fork()

ok visa@ kettenis@


CVSROOT:	/cvs
Module name:	src
Changes by:	stsp@cvs.openbsd.org	2017/07/16 16:48:26

Modified files:
	sys/dev/pci    : if_iwmvar.h 

Log message:
Add comments to the definitions of iwm(4) driver-private flags.


CVSROOT:	/cvs
Module name:	src
Changes by:	guenther@cvs.openbsd.org	2017/07/16 16:48:38

Modified files:
	sys/arch/hppa/hppa: db_interface.c lock_machdep.c 
	sys/arch/hppa/include: mplock.h 

Log message:
Add WITNESS support
ok visa@ kettenis@


